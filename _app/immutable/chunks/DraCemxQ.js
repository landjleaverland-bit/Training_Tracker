import{f as _,a as c,c as zt,t as kt}from"./DlIpowWv.js";import{C as aa,X as ia,a_ as ra,ae as la,a2 as oa,k as gt,a$ as na,az as Xs,b0 as ca,aj as ua,n as Ps,a4 as da,p as Vt,c as i,r as s,s as a,g as e,t as I,a as Ut,f as Gt,e as d,A as Oe,o as ws,d as t,j as is,aM as Mt,as as Ce,b1 as ds,b2 as Ss,q as St,b3 as va,b4 as pa,b5 as ga,b6 as ma,b7 as fa,aL as _a}from"./BSXnj9bA.js";import{a as ha,d as rs,s as K,e as Nt}from"./DY3SdbM1.js";import{i as U}from"./Bnb5Vf_a.js";import{e as fe,j as _e,r as O,i as Et,p as ba}from"./DBB2y30b.js";import{s as Pt}from"./C5lbgwQY.js";import{a as Ws,s as Is,c as F,b as ot,d as Zs,u as ya,e as wa,f as Sa,g as ka,h as Us,j as xa,k as Ca,l as Ta,m as La,n as qa,o as Ma,p as Pa}from"./BHK6Hdfp.js";import{p as Ve}from"./DrybqwuO.js";import{i as js}from"./2GMkO49V.js";import{b as Ra}from"./QHwIPupj.js";const Da=()=>performance.now(),Yt={tick:R=>requestAnimationFrame(R),now:()=>Da(),tasks:new Set};function $s(){const R=Yt.now();Yt.tasks.forEach(r=>{r.c(R)||(Yt.tasks.delete(r),r.f())}),Yt.tasks.size!==0&&Yt.tick($s)}function Na(R){let r;return Yt.tasks.size===0&&Yt.tick($s),{promise:new Promise(l=>{Yt.tasks.add(r={c:R,f:l})}),abort(){Yt.tasks.delete(r)}}}function Gs(R,r){Xs(()=>{R.dispatchEvent(new CustomEvent(r))})}function Ba(R){if(R==="float")return"cssFloat";if(R==="offset")return"cssOffset";if(R.startsWith("--"))return R;const r=R.split("-");return r.length===1?r[0]:r[0]+r.slice(1).map(l=>l[0].toUpperCase()+l.slice(1)).join("")}function Ks(R){const r={},l=R.split(";");for(const b of l){const[B,W]=b.split(":");if(!B||W===void 0)break;const H=Ba(B.trim());r[H]=W.trim()}return r}const Ga=R=>R;function vs(R,r,l,b){var B=(R&na)!==0,W="both",H,S=r.inert,q=r.style.overflow,x,y;function T(){return Xs(()=>H??=l()(r,b?.()??{},{direction:W}))}var M={is_global:B,in(){r.inert=S,Gs(r,"introstart"),x=Es(r,T(),y,1,()=>{Gs(r,"introend"),x?.abort(),x=H=void 0,r.style.overflow=q})},out(D){r.inert=!0,Gs(r,"outrostart"),y=Es(r,T(),x,0,()=>{Gs(r,"outroend"),D?.()})},stop:()=>{x?.abort(),y?.abort()}},m=aa;if((m.nodes.t??=[]).push(M),ha){var P=B;if(!P){for(var w=m.parent;w&&(w.f&ia)!==0;)for(;(w=w.parent)&&(w.f&ra)===0;);P=!w||(w.f&la)!==0}P&&oa(()=>{gt(()=>M.in())})}}function Es(R,r,l,b,B){var W=b===1;if(ca(r)){var H,S=!1;return ua(()=>{if(!S){var D=r({direction:W?"in":"out"});H=Es(R,D,l,b,B)}}),{abort:()=>{S=!0,H?.abort()},deactivate:()=>H.deactivate(),reset:()=>H.reset(),t:()=>H.t()}}if(l?.deactivate(),!r?.duration)return B(),{abort:Ps,deactivate:Ps,reset:Ps,t:()=>b};const{delay:q=0,css:x,tick:y,easing:T=Ga}=r;var M=[];if(W&&l===void 0&&(y&&y(0,1),x)){var m=Ks(x(0,1));M.push(m,m)}var P=()=>1-b,w=R.animate(M,{duration:q,fill:"forwards"});return w.onfinish=()=>{w.cancel();var D=l?.t()??1-b;l?.abort();var L=b-D,N=r.duration*Math.abs(L),C=[];if(N>0){var J=!1;if(x)for(var Q=Math.ceil(N/16.666666666666668),E=0;E<=Q;E+=1){var j=D+L*T(E/Q),Z=Ks(x(j,1-j));C.push(Z),J||=Z.overflow==="hidden"}J&&(R.style.overflow="hidden"),P=()=>{var re=w.currentTime;return D+L*T(re/N)},y&&Na(()=>{if(w.playState!=="running")return!1;var re=P();return y(re,1-re),!0})}w=R.animate(C,{duration:N,fill:"forwards"}),w.onfinish=()=>{P=()=>b,y?.(b,1-b),B()}},{abort:()=>{w&&(w.cancel(),w.effect=null,w.onfinish=Ps)},deactivate:()=>{B=Ps},reset:()=>{b===0&&y?.(1,0)},t:()=>P()}}function Qs(R){return function(...r){var l=r[0];return l.stopPropagation(),R?.apply(this,r)}}function As(R,r){var l=R.$$events?.[r.type],b=da(l)?l.slice():l==null?[]:[l];for(var B of b)B.call(this,r)}var Fa=_('<span class="placeholder svelte-1g8x5ph"> </span>'),Aa=_('<span class="chip-display"> </span>'),Oa=_('<button type="button"> </button>'),Ea=_('<div class="multi-select-container svelte-1g8x5ph"><div class="chips svelte-1g8x5ph"><!></div> <div class="options-grid svelte-1g8x5ph"></div></div>');function us(R,r){Vt(r,!0);let l=Ve(r,"selected",19,()=>[]),b=Ve(r,"placeholder",3,"Select options...");function B(T){let M=[...l()];T==="None"?M.includes("None")?M=[]:M=["None"]:(M=M.filter(m=>m!=="None"),M.includes(T)?M=M.filter(m=>m!==T):M.push(T)),r.onChange(M)}var W=Ea(),H=i(W),S=i(H);{var q=T=>{var M=Fa(),m=i(M,!0);s(M),I(()=>K(m,b())),c(T,M)},x=T=>{var M=zt(),m=Gt(M);fe(m,17,l,_e,(P,w)=>{var D=Aa(),L=i(D,!0);s(D),I(()=>K(L,e(w))),c(P,D)}),c(T,M)};U(S,T=>{l().length===0?T(q):T(x,!1)})}s(H);var y=a(H,2);fe(y,21,()=>r.options,_e,(T,M)=>{var m=Oa();m.__click=()=>B(e(M));var P=i(m,!0);s(m),I(w=>{Pt(m,1,`option-chip ${w??""}`,"svelte-1g8x5ph"),K(P,e(M))},[()=>l().includes(e(M))?"selected":""]),c(T,m)}),s(y),s(W),c(R,W),Ut()}rs(["click"]);var Ha=_('<div class="input-with-action svelte-1lf3qka"><input type="text" id="location-manual" placeholder="Enter custom location..." class="flat-left svelte-1lf3qka"/> <button type="button" class="action-btn flat-right svelte-1lf3qka" title="Back to list">✕</button></div>'),Wa=_("<option> </option>"),Ia=_('<select id="location" class="svelte-1lf3qka"><option disabled>Select location...</option><!></select>'),ja=_("<option> </option>"),za=_("<option> </option>"),Va=_('<th class="svelte-1lf3qka">Sport?</th>'),Ua=_('<td class="center svelte-1lf3qka"><input type="checkbox" class="svelte-1lf3qka"/></td>'),Ka=_('<span class="grade-error svelte-1lf3qka">Invalid</span>'),Qa=_("<option> </option>"),Ja=_("<option> </option>"),Ya=_("<option> </option>"),Xa=_('<button type="button" class="remove-btn svelte-1lf3qka">✕</button>'),Za=_('<tr class="svelte-1lf3qka"><!><td class="svelte-1lf3qka"><input type="text" placeholder="Route name..." class="svelte-1lf3qka"/></td><td class="svelte-1lf3qka"><input type="text" placeholder="V3"/> <!></td><td class="svelte-1lf3qka"><select class="svelte-1lf3qka"></select></td><td class="svelte-1lf3qka"><input type="number" min="1" class="svelte-1lf3qka"/></td><td class="svelte-1lf3qka"><select class="svelte-1lf3qka"></select></td><td class="svelte-1lf3qka"><select class="svelte-1lf3qka"></select></td><td><textarea placeholder="Notes..." class="svelte-1lf3qka"></textarea></td><td class="center svelte-1lf3qka"><!></td></tr>'),$a=_("<div> </div>"),ei=_('<button type="button" class="cancel-btn-large svelte-1lf3qka">Cancel</button>'),ti=_('<div class="form-content svelte-1lf3qka"><div class="form-row svelte-1lf3qka"><div class="form-group svelte-1lf3qka"><label for="date" class="svelte-1lf3qka">Date</label> <div class="date-time-row svelte-1lf3qka"><input type="date" id="date" class="svelte-1lf3qka"/> <input type="time" id="time" class="svelte-1lf3qka"/></div></div> <div class="form-group svelte-1lf3qka"><label for="location" class="svelte-1lf3qka">Location</label> <!></div></div> <div class="form-group svelte-1lf3qka"><label for="climbing-type" class="svelte-1lf3qka">Climbing Type</label> <select id="climbing-type" class="svelte-1lf3qka"><option disabled>Select type...</option><!></select></div> <div class="training-section svelte-1lf3qka"><h4 class="svelte-1lf3qka">Training Details</h4> <div class="training-grid svelte-1lf3qka"><div class="training-item svelte-1lf3qka"><label for="training-type" class="svelte-1lf3qka">Training Type</label> <!></div> <div class="training-item svelte-1lf3qka"><label for="difficulty" class="svelte-1lf3qka">Difficulty</label> <select id="difficulty"></select></div> <div class="training-item svelte-1lf3qka"><label for="category" class="svelte-1lf3qka">Category</label> <!></div> <div class="training-item svelte-1lf3qka"><label for="energy-system" class="svelte-1lf3qka">Energy System</label> <!></div> <div class="training-item svelte-1lf3qka"><label for="wall-angle" class="svelte-1lf3qka">Wall</label> <!></div></div></div> <div class="climbs-section svelte-1lf3qka"><h4 class="svelte-1lf3qka">Climbs</h4> <div class="table-container svelte-1lf3qka"><table class="climbs-table svelte-1lf3qka"><thead><tr><!><th class="svelte-1lf3qka">Name</th><th class="svelte-1lf3qka">Grade</th><th class="svelte-1lf3qka">Attempt</th><th class="svelte-1lf3qka">#</th><th class="svelte-1lf3qka">Wall Angle</th><th class="svelte-1lf3qka">Technique Focus</th><th class="svelte-1lf3qka">Notes</th><th class="svelte-1lf3qka"></th></tr></thead><tbody></tbody></table></div> <button type="button" class="add-btn svelte-1lf3qka">+ Add Climb</button></div> <div class="load-section svelte-1lf3qka"><h4 class="svelte-1lf3qka">Load Metrics</h4> <div class="load-metrics svelte-1lf3qka"><div class="load-item svelte-1lf3qka"><label for="finger-load" class="svelte-1lf3qka">Finger</label> <input type="number" id="finger-load" min="1" max="5" class="svelte-1lf3qka"/> <span class="load-scale svelte-1lf3qka">/ 5</span></div> <div class="load-item svelte-1lf3qka"><label for="shoulder-load" class="svelte-1lf3qka">Shoulder</label> <input type="number" id="shoulder-load" min="1" max="5" class="svelte-1lf3qka"/> <span class="load-scale svelte-1lf3qka">/ 5</span></div> <div class="load-item svelte-1lf3qka"><label for="forearm-load" class="svelte-1lf3qka">Forearm</label> <input type="number" id="forearm-load" min="1" max="5" class="svelte-1lf3qka"/> <span class="load-scale svelte-1lf3qka">/ 5</span></div></div> <h4 class="mt-4 svelte-1lf3qka">Grip Metrics</h4> <div class="load-metrics svelte-1lf3qka"><div class="load-item svelte-1lf3qka"><label for="open-grip" class="svelte-1lf3qka">Open</label> <input type="number" id="open-grip" min="1" max="5" class="svelte-1lf3qka"/> <span class="load-scale svelte-1lf3qka">/ 5</span></div> <div class="load-item svelte-1lf3qka"><label for="crimp-grip" class="svelte-1lf3qka">Crimp</label> <input type="number" id="crimp-grip" min="1" max="5" class="svelte-1lf3qka"/> <span class="load-scale svelte-1lf3qka">/ 5</span></div> <div class="load-item svelte-1lf3qka"><label for="pinch-grip" class="svelte-1lf3qka">Pinch</label> <input type="number" id="pinch-grip" min="1" max="5" class="svelte-1lf3qka"/> <span class="load-scale svelte-1lf3qka">/ 5</span></div> <div class="load-item svelte-1lf3qka"><label for="sloper-grip" class="svelte-1lf3qka">Sloper</label> <input type="number" id="sloper-grip" min="1" max="5" class="svelte-1lf3qka"/> <span class="load-scale svelte-1lf3qka">/ 5</span></div> <div class="load-item svelte-1lf3qka"><label for="jug-grip" class="svelte-1lf3qka">Jug</label> <input type="number" id="jug-grip" min="1" max="5" class="svelte-1lf3qka"/> <span class="load-scale svelte-1lf3qka">/ 5</span></div></div></div> <div class="notes-section"><div class="form-group svelte-1lf3qka"><label for="session-notes" class="svelte-1lf3qka">Session Notes</label> <textarea id="session-notes" class="session-notes-area" placeholder="How did the session feel? Key takeaways..." rows="3"></textarea></div></div> <div class="submit-section svelte-1lf3qka"><!> <div class="action-buttons svelte-1lf3qka"><!> <button type="button" class="submit-btn svelte-1lf3qka"><!></button></div></div></div>');function Nr(R,r){Vt(r,!0);const l=["Rockstar Unit 3","Rockstar Unit 5","Rockstar Techno","Flashpoint Bristol","Redpoint Bristol","TCH Bristol","TCA Mothership","TCA Church","TCA Arc","Bloc","270 Climbing","Other"],b=["Bouldering","Sport","Mixed"],B=["Onsight","Flash","Redpoint","Repeat","Dogged","DNF"],W=["None","Projecting","Onsighting","Campusing","Repeaters","Comp Sim"],H=["None","Easy","Medium","Hard","Max","Limit+"],S=["None","Strength","Power","Strength Capacity","Power Capacity","Strength Endurance","Power Endurance","Endurance","Coordination","Slab Technique","Overhang Technique"],q=["None","Aerobic Lactic Capacity","Aerobic Lactic Power","Anaerobic Alactic Capacity","Anaerobic Alactic Power","Anaerobic Power","Anaerobic Lactic Capacity"],x=["None","Trusting feet","Double-clutch","Standing on volumes","Deadpointing","Flagging","Swapping feet","Edging","Smearing","Matching","Backstepping","Drop Knee","Bridging","Laybacking","Mantling","Kneebar","Dyno","Pogo","Coordination Moves","Gastoning","Undercutting","Compressing","Heel Hook","Toe Hook","Bicycle"],y=["None","Overhang","Vertical","Slab","Roof"],T=["None","Moon Board","Kilter Board","Tension Board","Beast","Circuit Board","Boulder wall","Lead wall","Comp wall","Auto belays"],m=["V0-","4-","V0","4","V0+","4+","V1","5","V2","5+","V3","6A","6A+","V4","6B","6B+","V5","6C","6C+","V6","7A","V7","7A+","V8","7B","7B+","V9","7C","V10","7C+","V11","8A","V12","8A+","V13","8B","V14","8B+","V15","8C","V16","8C+","V17","9A"].map(f=>f.toLowerCase());let P=d(null),w=Mt(()=>!!r.initialData),D=d(Oe(new Date().toISOString().split("T")[0])),L=d(Oe(new Date().toTimeString().split(" ")[0].slice(0,5))),N=d(""),C=d(""),J=d(Oe(["None"])),Q=d("None"),E=d(Oe(["None"])),j=d(Oe(["None"])),Z=d(Oe(["None"])),re=d(3),pe=d(3),ve=d(3),ee=d(3),le=d(3),z=d(3),ae=d(3),ce=d(3),ie=d(Oe([{isSport:!1,name:"",grade:"",attemptType:"Flash",attemptsNum:1,notes:"",wall:"Overhang"}])),ue=d(""),ge=d(!1);const $="indoor_climb_draft";let Y=d(!1);ws(()=>{if(r.initialData)t(D,r.initialData.date,!0),t(L,r.initialData.time||"12:00",!0),l.includes(r.initialData.location)?(t(N,r.initialData.location,!0),t(ge,!1)):r.initialData.customLocation?(t(N,r.initialData.customLocation,!0),t(ge,!0)):(t(N,r.initialData.location,!0),t(ge,!0)),t(C,r.initialData.climbingType,!0),t(J,r.initialData.trainingTypes||["None"],!0),t(Q,r.initialData.difficulty||"None",!0),t(E,r.initialData.categories||["None"],!0),t(j,r.initialData.energySystems||["None"],!0),t(Z,r.initialData.wallAngles||["None"],!0),t(re,r.initialData.fingerLoad||3,!0),t(pe,r.initialData.shoulderLoad||3,!0),t(ve,r.initialData.forearmLoad||3,!0),t(ee,r.initialData.openGrip||3,!0),t(le,r.initialData.crimpGrip||3,!0),t(z,r.initialData.pinchGrip||3,!0),t(ae,r.initialData.sloperGrip||3,!0),t(ce,r.initialData.jugGrip||3,!0),r.initialData.climbs&&r.initialData.climbs.length>0?t(ie,JSON.parse(JSON.stringify(r.initialData.climbs)),!0):t(ie,[{isSport:!1,name:"",grade:"",attemptType:"Flash",attemptsNum:1,notes:"",wall:"Overhang"}],!0),t(ue,r.initialData.notes||"",!0);else{const f=localStorage.getItem($);if(f)try{const u=JSON.parse(f);u.location&&t(N,u.location,!0),u.time&&t(L,u.time,!0),u.isOtherLocation&&t(ge,u.isOtherLocation,!0),u.climbingType&&t(C,u.climbingType,!0),u.trainingTypes&&t(J,u.trainingTypes,!0),u.difficulty&&t(Q,u.difficulty,!0),u.categories&&t(E,u.categories,!0),u.energySystems&&t(j,u.energySystems,!0),u.wallAngles&&t(Z,u.wallAngles,!0),u.fingerLoad&&t(re,u.fingerLoad,!0),u.shoulderLoad&&t(pe,u.shoulderLoad,!0),u.forearmLoad&&t(ve,u.forearmLoad,!0),u.openGrip&&t(ee,u.openGrip,!0),u.crimpGrip&&t(le,u.crimpGrip,!0),u.pinchGrip&&t(z,u.pinchGrip,!0),u.sloperGrip&&t(ae,u.sloperGrip,!0),u.jugGrip&&t(ce,u.jugGrip,!0),u.climbs&&t(ie,u.climbs,!0),u.notes&&t(ue,u.notes,!0)}catch(u){console.error("Failed to restore draft",u)}}t(Y,!0)}),is(()=>{if(!e(Y)||e(w))return;const f={date:e(D),time:e(L),location:e(N),isOtherLocation:e(ge),climbingType:e(C),trainingTypes:e(J),difficulty:e(Q),categories:e(E),energySystems:e(j),fingerLoad:e(re),shoulderLoad:e(pe),forearmLoad:e(ve),openGrip:e(ee),crimpGrip:e(le),pinchGrip:e(z),sloperGrip:e(ae),jugGrip:e(ce),climbs:e(ie),notes:e(ue)};localStorage.setItem($,JSON.stringify(f))});function Ee(){e(N)==="Other"&&(t(ge,!0),t(N,""))}function st(){t(ge,!1),t(N,"")}function mt(){t(ie,[...e(ie),{isSport:!1,name:"",grade:"",attemptType:"Flash",attemptsNum:1,notes:"",wall:"Overhang"}],!0)}function nt(f){t(ie,e(ie).filter((u,oe)=>oe!==f),!0)}function Rt(f,u){e(ie)[f].attemptType=u,(u==="Flash"||u==="Onsight")&&(e(ie)[f].attemptsNum=1)}function xt(f){t(P,f,!0)}function ft(){t(P,null)}let ct=Mt(()=>e(C)==="Mixed");function Bt(f){return e(C)==="Sport"?!0:e(C)==="Bouldering"?!1:f.isSport}function _t(f){return f.trim()?m.includes(f.trim().toLowerCase()):!0}let qe=d("idle"),De=d("");function te(){return e(N)?e(C)?e(ie).filter(u=>u.grade.trim()&&!_t(u.grade)).length>0?"Please fix invalid grades":null:"Please select a climbing type":"Please select a location"}async function he(){const f=te();if(f){t(qe,"error"),t(De,f,!0);return}t(qe,"saving");try{const u=e(ie).map(Je=>({...Je,isSport:Bt(Je)})),oe={date:e(D),time:e(L),location:e(N),customLocation:e(ge)?e(N):void 0,climbingType:e(C),trainingTypes:e(J),difficulty:e(Q),categories:e(E),energySystems:e(j),wallAngles:e(Z),fingerLoad:e(re),shoulderLoad:e(pe),forearmLoad:e(ve),openGrip:e(ee),crimpGrip:e(le),pinchGrip:e(z),sloperGrip:e(ae),jugGrip:e(ce),climbs:u,notes:e(ue)};let ze;e(w)?ze=await ya(r.initialData.id,oe):ze=await wa(oe),ze.ok?(t(qe,"success"),t(De,e(w)?"Session updated!":"Session saved!",!0),e(w)||localStorage.removeItem($),r.onSaved&&setTimeout(()=>{r.onSaved()},500)):(t(qe,"error"),t(De,"Failed to save: "+(ze.error||"Unknown error"))),e(w)||(window.dispatchEvent(new CustomEvent("session-saved")),setTimeout(()=>{Ue()},2e3))}catch(u){t(qe,"error"),t(De,"Failed to save session"),console.error("Save error:",u)}}function Ue(){t(D,new Date().toISOString().split("T")[0],!0),t(L,new Date().toTimeString().split(" ")[0].slice(0,5),!0),t(N,""),t(ge,!1),t(C,""),t(J,["None"],!0),t(Q,"None"),t(E,["None"],!0),t(j,["None"],!0),t(Z,["None"],!0),t(re,3),t(pe,3),t(ve,3),t(ee,3),t(le,3),t(z,3),t(ae,3),t(ce,3),t(ie,[{isSport:!1,name:"",grade:"",attemptType:"Flash",attemptsNum:1,notes:"",wall:"Overhang"}],!0),t(ue,""),t(qe,"idle"),t(De,"")}var Ge=ti(),Fe=i(Ge),de=i(Fe),xe=a(i(de),2),Ke=i(xe);O(Ke);var He=a(Ke,2);O(He),s(xe),s(de);var at=a(de,2),ht=a(i(at),2);{var We=f=>{var u=Ha(),oe=i(u);O(oe);var ze=a(oe,2);ze.__click=st,s(u),F(oe,()=>e(N),Je=>t(N,Je)),c(f,u)},bt=f=>{var u=Ia();u.__change=Ee;var oe=i(u);oe.value=oe.__value="";var ze=a(oe);fe(ze,17,()=>l,_e,(Je,v)=>{var o=Wa(),X=i(o,!0);s(o);var ke={};I(()=>{K(X,e(v)),ke!==(ke=e(v))&&(o.value=(o.__value=e(v))??"")}),c(Je,o)}),s(u),ot(u,()=>e(N),Je=>t(N,Je)),c(f,u)};U(ht,f=>{e(ge)?f(We):f(bt,!1)})}s(at),s(Fe);var it=a(Fe,2),Ne=a(i(it),2),Ye=i(Ne);Ye.value=Ye.__value="";var k=a(Ye);fe(k,17,()=>b,_e,(f,u)=>{var oe=ja(),ze=i(oe,!0);s(oe);var Je={};I(()=>{K(ze,e(u)),Je!==(Je=e(u))&&(oe.value=(oe.__value=e(u))??"")}),c(f,oe)}),s(Ne),s(it);var G=a(it,2),n=a(i(G),2),g=i(n),A=a(i(g),2);us(A,{get options(){return W},get selected(){return e(J)},placeholder:"Select types...",onChange:f=>t(J,f,!0)}),s(g);var V=a(g,2),p=a(i(V),2);fe(p,21,()=>H,_e,(f,u)=>{var oe=za(),ze=i(oe,!0);s(oe);var Je={};I(()=>{K(ze,e(u)),Je!==(Je=e(u))&&(oe.value=(oe.__value=e(u))??"")}),c(f,oe)}),s(p),s(V);var h=a(V,2),se=a(i(h),2);us(se,{get options(){return S},get selected(){return e(E)},placeholder:"Select categories...",onChange:f=>t(E,f,!0)}),s(h);var Ie=a(h,2),rt=a(i(Ie),2);us(rt,{get options(){return q},get selected(){return e(j)},placeholder:"Select systems...",onChange:f=>t(j,f,!0)}),s(Ie);var Xe=a(Ie,2),Ze=a(i(Xe),2);us(Ze,{get options(){return T},get selected(){return e(Z)},placeholder:"Select walls...",onChange:f=>t(Z,f,!0)}),s(Xe),s(n),s(G);var be=a(G,2),Be=a(i(be),2),ye=i(Be),we=i(ye),Ct=i(we),ut=i(Ct);{var Tt=f=>{var u=Va();c(f,u)};U(ut,f=>{e(ct)&&f(Tt)})}Ce(8),s(Ct),s(we);var dt=a(we);fe(dt,21,()=>e(ie),_e,(f,u,oe)=>{var ze=Za(),Je=i(ze);{var v=ne=>{var Re=Ua(),Ae=i(Re);O(Ae),s(Re),Zs(Ae,()=>e(u).isSport,Jt=>e(u).isSport=Jt),c(ne,Re)};U(Je,ne=>{e(ct)&&ne(v)})}var o=a(Je),X=i(o);O(X),s(o);var ke=a(o),Le=i(ke);O(Le);let Ot;var It=a(Le,2);{var Wt=ne=>{var Re=Ka();c(ne,Re)};U(It,ne=>{_t(e(u).grade)||ne(Wt)})}s(ke);var Dt=a(ke),pt=i(Dt);pt.__change=ne=>Rt(oe,ne.target.value),fe(pt,21,()=>B,_e,(ne,Re)=>{var Ae=Qa(),Jt=i(Ae,!0);s(Ae);var Qt={};I(()=>{K(Jt,e(Re)),Qt!==(Qt=e(Re))&&(Ae.value=(Ae.__value=e(Re))??"")}),c(ne,Ae)}),s(pt);var ls;Ws(pt),s(Dt);var es=a(Dt),qs=i(es);O(qs),s(es);var os=a(es),jt=i(os);fe(jt,21,()=>y.filter(ne=>ne!=="None"),_e,(ne,Re)=>{var Ae=Ja(),Jt=i(Ae,!0);s(Ae);var Qt={};I(()=>{K(Jt,e(Re)),Qt!==(Qt=e(Re))&&(Ae.value=(Ae.__value=e(Re))??"")}),c(ne,Ae)}),s(jt),s(os);var _s=a(os),ns=i(_s);fe(ns,21,()=>x,_e,(ne,Re)=>{var Ae=Ya(),Jt=i(Ae,!0);s(Ae);var Qt={};I(()=>{K(Jt,e(Re)),Qt!==(Qt=e(Re))&&(Ae.value=(Ae.__value=e(Re))??"")}),c(ne,Ae)}),s(ns),s(_s);var ts=a(_s);let hs;var ss=i(ts);ds(ss),s(ts);var bs=a(ts),Ms=i(bs);{var ys=ne=>{var Re=Xa();Re.__click=()=>nt(oe),c(ne,Re)};U(Ms,ne=>{e(ie).length>1&&ne(ys)})}s(bs),s(ze),I(ne=>{Ot=Pt(Le,1,"grade-input svelte-1lf3qka",null,Ot,ne),ls!==(ls=e(u).attemptType)&&(pt.value=(pt.__value=e(u).attemptType)??"",Is(pt,e(u).attemptType)),qs.disabled=e(u).attemptType==="Flash"||e(u).attemptType==="Onsight",hs=Pt(ts,1,"notes-cell svelte-1lf3qka",null,hs,{expanded:e(P)===oe})},[()=>({invalid:!_t(e(u).grade)})]),F(X,()=>e(u).name,ne=>e(u).name=ne),F(Le,()=>e(u).grade,ne=>e(u).grade=ne),F(qs,()=>e(u).attemptsNum,ne=>e(u).attemptsNum=ne),ot(jt,()=>e(u).wall,ne=>e(u).wall=ne),ot(ns,()=>e(u).techniqueFocus,ne=>e(u).techniqueFocus=ne),Nt("focus",ss,()=>xt(oe)),Nt("blur",ss,ft),F(ss,()=>e(u).notes,ne=>e(u).notes=ne),c(f,ze)}),s(dt),s(ye),s(Be);var je=a(Be,2);je.__click=mt,s(be);var Se=a(be,2),Me=a(i(Se),2),yt=i(Me),vt=a(i(yt),2);O(vt),Ce(2),s(yt);var $e=a(yt,2),lt=a(i($e),2);O(lt),Ce(2),s($e);var Te=a($e,2),Lt=a(i(Te),2);O(Lt),Ce(2),s(Te),s(Me);var wt=a(Me,4),Ht=i(wt),Pe=a(i(Ht),2);O(Pe),Ce(2),s(Ht);var Qe=a(Ht,2),qt=a(i(Qe),2);O(qt),Ce(2),s(Qe);var Ft=a(Qe,2),Kt=a(i(Ft),2);O(Kt),Ce(2),s(Ft);var Xt=a(Ft,2),At=a(i(Xt),2);O(At),Ce(2),s(Xt);var Zt=a(Xt,2),ps=a(i(Zt),2);O(ps),Ce(2),s(Zt),s(wt),s(Se);var gs=a(Se,2),ms=i(gs),ks=a(i(ms),2);ds(ks),s(ms),s(gs);var fs=a(gs,2),xs=i(fs);{var Cs=f=>{var u=$a();let oe;var ze=i(u,!0);s(u),I(()=>{oe=Pt(u,1,"save-message svelte-1lf3qka",null,oe,{success:e(qe)==="success",error:e(qe)==="error"}),K(ze,e(De))}),c(f,u)};U(xs,f=>{e(De)&&f(Cs)})}var Ts=a(xs,2),Ls=i(Ts);{var Rs=f=>{var u=ei();u.__click=function(...oe){r.onCancel?.apply(this,oe)},I(()=>u.disabled=e(qe)==="saving"),c(f,u)};U(Ls,f=>{e(w)&&f(Rs)})}var $t=a(Ls,2);$t.__click=he;var Ds=i($t);{var Ns=f=>{var u=kt();I(()=>K(u,e(w)?"Updating...":"Saving...")),c(f,u)},Bs=f=>{var u=zt(),oe=Gt(u);{var ze=v=>{var o=kt();I(()=>K(o,`✓ ${e(w)?"Updated!":"Saved!"}`)),c(v,o)},Je=v=>{var o=kt();I(()=>K(o,e(w)?"Update Session":"Save Session")),c(v,o)};U(oe,v=>{e(qe)==="success"?v(ze):v(Je,!1)},!0)}c(f,u)};U(Ds,f=>{e(qe)==="saving"?f(Ns):f(Bs,!1)})}s($t),s(Ts),s(fs),s(Ge),I(()=>$t.disabled=e(qe)==="saving"),F(Ke,()=>e(D),f=>t(D,f)),F(He,()=>e(L),f=>t(L,f)),ot(Ne,()=>e(C),f=>t(C,f)),ot(p,()=>e(Q),f=>t(Q,f)),F(vt,()=>e(re),f=>t(re,f)),F(lt,()=>e(pe),f=>t(pe,f)),F(Lt,()=>e(ve),f=>t(ve,f)),F(Pe,()=>e(ee),f=>t(ee,f)),F(qt,()=>e(le),f=>t(le,f)),F(Kt,()=>e(z),f=>t(z,f)),F(At,()=>e(ae),f=>t(ae,f)),F(ps,()=>e(ce),f=>t(ce,f)),F(ks,()=>e(ue),f=>t(ue,f)),c(R,Ge),Ut()}rs(["click","change"]);const Hs={Portland:{"Blacknor Far North":["Far North (Pit Prop Crag - North Wing)","Far North (Pit Prop Crag - South Wing)","Sunstone Wall","Sandcastle Wall","Hidden Wall"],"Blacknor North":["Diamond Slab","The Ledge","Sharpy's Wall","Reptile Smile Area","Wolfgang Forever Area","Captain Klutz Area","Death of Cool Area","Seattle Be The Day Area","Blacknor Heights (Blacknor Quarry Bouldering)","Blacknor Fort Quarry (Sport)","Cliff Top Way Down"],"Blacknor Central":["The Veranda","Medusa Wall","The Battlement","Wave Wall","Mirror Wall"],"Blacknor South":["Fallen Slab","Infidel Slab","Englands Dreaming Area","Sacred Angel Area","The Reach","Shit Happens Wall"],"Blacknor Far South":["Deadman's Bay","The White Hole","Wall of Lament"],"Battleship Edge":["Northern Sector","Main Edge","Battleship Block"],"Battleship Back Cliff":["Zinc Oxide Mountain","The Main Cliff","Sleepy Hollow"],"Wallsend North":["Sweet Smell of Success Wall","The Coastguard Wall (Northern section)"],"Wallsend South":["The Upper Tier","The Lower Tier","Stalker's Zone"],"Coastguard North":["Top Tier","Main Cliff (Beeston Bump)","The Grooves"],"Coastguard South":["The White Wall","Tennessee Wall","The Veranda (South)"],Godnor:["Godnor North","Godnor Far South","The Godnor Gate Area"],Neddyfields:["Neddyfields Main Wall","The Flowstone Wall","Neddyfields Bouldering"],"Cheyne Cliff":["Red Wall","Inception Wall","Road Rage Wall","The Nook","The Block"],"The Cuttings":["The Cuttings (Main Cliff)","The Pulpit","The Bower","Sun Lover's Slab"],"The New Cuttings":["The Gallery","The Annex","The Arches","The Grotto"],"The Cuttings Boulderfield":["The Tractor","The Coffin","The Octagon","Lightning Wall"]},Swanage:{"Dancing Ledge":["The Amphitheatre","The Upper Tier","The Skull","Promenade","The Quarry"],Hedbury:["Hedbury Quarry (Main)","Hedbury Sea Cliff (The Big Wall)"],Winspit:["The West Quarry","The East Quarry (The Playground)","The Sea Walls"]},"Wye Valley":{"Ban-y-Gor":["The Main Wall","The River Wall","The Far Left","The Upper Tier"],"Biblins Cave":["The Main Cave","The Right Wall","The Entrance Area"],"Woodcroft Quarry":["Fly Wall","The Main Quarry","The Retaining Wall"],"Wyndcliff Quarry":["The Main Wall (Left & Right)","The Upper Tier","The Shady Wall"]},"Costa Del Severn":{Brean:["Boulder Cove","The River Face (Main Cliff)","The Fort","The Slab"],Clevedon:["Ladye Bay","Marine Lake (Bouldering)","The Sea Walls"],"Portishead Quarry":["The Main Wall","The Slab","The Upper Tier"]},Bristol:{"Avon Gorge":["Sea Walls","Suspension Bridge Buttress","Morning Slab","Main Wall","New Quarry","The Amphitheatre","Unknown Wall"],"Leigh Woods":["Quarry 1","Quarry 2","The Main Buttress"],"Bickley Wood":["The Main Wall","The Stream Wall"],Hambrook:["The Roadside Wall"]},Cotswolds:{"Sally-in-the-Wood":["The Main Edge","The Boulders"],"Browns Folly":["The Tower","The Main Wall","The Upper Wall","The Far Right"]},Mendips:{"Cheddar Gorge":["High Rock","Sunset Buttress","Lion Rock","The Pinnacles","Acid Rock","Coronation Street","Long Rock"]},Gower:{Rhossili:["Shipwreck Cove","Rhossili Upper Cliff","The Tears Point"],"Trial Wall Area":["Trial Wall","The Terraces"],Foxhole:["The Main Cave","The Slab","The Overhangs"]},"South Wales":{"Dinas Rock":["Kennelgarth Wall","Main Overhang","Roadside Crag","The Inland Slabs"],Ogmore:["The Deep Zawn","Hardy's Bay","The Diamond","Daytona Wall"]},"North Wales":{"Cromlech (Dinas Cromlech)":["The Corner (Cenotaph)","Left Wall","Right Wall"],"Australia (Slate Quarries)":["The Sidings","Looning the Tube Area","Dali's Hole","The Salt Pans"]},"Peak District":{"Burbage South Valley":["The Boulders","The Edge (The Alliance Area)","The Tank"],"Gardoms Edge":["Apple Buttress","The Eye of Faith","Moomin Buttress"],"Raven Tor":["The Main Wall","The Weedkiller Wall"],Stanage:["Popular End","Plantation","High Neb","Stanage North","The End","Stanage Far North"],"Curbar Edge":["The Main Edge","Elder Crack Area"]},Devon:{Dartmoor:["Haytor (Low Man)","Hound Tor","The Dewerstone (Main Cliff)","Bonehill Rocks"],Hartland:["Screda Point","Smoothlands","Blackchurch Rock"],Tintagel:["The Great Cliff","Gull Rock","Ila's Ledge"]}};function si(){return Object.keys(Hs)}function Js(R){return Hs[R]?Object.keys(Hs[R]):[]}var ai=_('<div class="form-header-row" style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 1.5rem;"><h3 style="margin: 0;" class="svelte-15o2ys1">⛰️ Outdoor Climb</h3></div>'),ii=_("<option> </option>"),ri=_('<div class="input-with-action svelte-15o2ys1"><input type="text" id="crag-manual" placeholder="Enter custom crag name..." class="flat-left svelte-15o2ys1"/> <button type="button" class="action-btn flat-right svelte-15o2ys1" title="Back to list">✕</button></div>'),li=_("<option> </option>"),oi=_("<option>Other (Manual Entry)</option>"),ni=_('<select id="crag" class="svelte-15o2ys1"><option disabled> </option><!><!></select>'),ci=_("<option> </option>"),ui=_("<option> </option>"),di=_('<th class="svelte-15o2ys1">Sport?</th>'),vi=_('<td class="center svelte-15o2ys1"><input type="checkbox" class="svelte-15o2ys1"/></td>'),pi=_('<span class="grade-error svelte-15o2ys1">Invalid</span>'),gi=_("<option> </option>"),mi=_("<option> </option>"),fi=_("<option> </option>"),_i=_('<button type="button" class="remove-btn svelte-15o2ys1">✕</button>'),hi=_('<tr><!><td class="svelte-15o2ys1"><input type="text" placeholder="Route name..." class="svelte-15o2ys1"/></td><td class="svelte-15o2ys1"><input type="text" placeholder="V3"/> <!></td><td class="svelte-15o2ys1"><select class="svelte-15o2ys1"></select></td><td class="svelte-15o2ys1"><input type="number" min="1" class="svelte-15o2ys1"/></td><td class="svelte-15o2ys1"><select class="svelte-15o2ys1"></select></td><td class="svelte-15o2ys1"><select class="svelte-15o2ys1"></select></td><td><textarea placeholder="Notes..." class="svelte-15o2ys1"></textarea></td><td class="center svelte-15o2ys1"><!></td></tr>'),bi=_("<div> </div>"),yi=_('<div class="form-content svelte-15o2ys1"><!> <div class="form-row svelte-15o2ys1"><div class="form-group svelte-15o2ys1"><label for="date" class="svelte-15o2ys1">Date</label> <div class="date-time-row svelte-15o2ys1"><input type="date" id="date" class="svelte-15o2ys1"/> <input type="time" id="time" class="svelte-15o2ys1"/></div></div> <div class="form-group svelte-15o2ys1"><label for="area" class="svelte-15o2ys1">Area</label> <select id="area" class="svelte-15o2ys1"><option disabled>Select area...</option><!></select></div></div> <div class="form-row svelte-15o2ys1"><div class="form-group svelte-15o2ys1"><label for="crag" class="svelte-15o2ys1">Crag</label> <!></div> <div class="form-group svelte-15o2ys1"><label for="sector" class="svelte-15o2ys1">Wall / Sector</label> <input type="text" id="sector" placeholder="Enter sector or wall name..." class="svelte-15o2ys1"/></div></div> <div class="form-group svelte-15o2ys1"><label for="climbing-type" class="svelte-15o2ys1">Climbing Type</label> <select id="climbing-type" class="svelte-15o2ys1"><option disabled>Select type...</option><!></select></div> <div class="training-section svelte-15o2ys1"><h4 class="svelte-15o2ys1">Training Details</h4> <div class="training-grid svelte-15o2ys1"><div class="training-item svelte-15o2ys1"><label for="training-type" class="svelte-15o2ys1">Training Type</label> <!></div> <div class="training-item svelte-15o2ys1"><label for="difficulty" class="svelte-15o2ys1">Difficulty</label> <select id="difficulty" class="svelte-15o2ys1"></select></div> <div class="training-item svelte-15o2ys1"><label for="category" class="svelte-15o2ys1">Category</label> <!></div> <div class="training-item svelte-15o2ys1"><label for="energy-system" class="svelte-15o2ys1">Energy System</label> <!></div></div></div> <div class="climbs-section svelte-15o2ys1"><h4 class="svelte-15o2ys1">Climbs</h4> <div class="table-container svelte-15o2ys1"><table class="climbs-table svelte-15o2ys1"><thead><tr><!><th class="svelte-15o2ys1">Name</th><th class="svelte-15o2ys1">Grade</th><th class="svelte-15o2ys1">Attempt</th><th class="svelte-15o2ys1">#</th><th class="svelte-15o2ys1">Wall Angle</th><th class="svelte-15o2ys1">Technique Focus</th><th class="svelte-15o2ys1">Notes</th><th class="svelte-15o2ys1"></th></tr></thead><tbody></tbody></table></div> <button type="button" class="add-btn svelte-15o2ys1">+ Add Climb</button></div> <div class="load-section svelte-15o2ys1"><h4 class="svelte-15o2ys1">Load Metrics</h4> <div class="load-metrics svelte-15o2ys1"><div class="load-item svelte-15o2ys1"><label for="finger-load" class="svelte-15o2ys1">Finger</label> <input type="number" id="finger-load" min="1" max="5" class="svelte-15o2ys1"/> <span class="load-scale svelte-15o2ys1">/ 5</span></div> <div class="load-item svelte-15o2ys1"><label for="shoulder-load" class="svelte-15o2ys1">Shoulder</label> <input type="number" id="shoulder-load" min="1" max="5" class="svelte-15o2ys1"/> <span class="load-scale svelte-15o2ys1">/ 5</span></div> <div class="load-item svelte-15o2ys1"><label for="forearm-load" class="svelte-15o2ys1">Forearm</label> <input type="number" id="forearm-load" min="1" max="5" class="svelte-15o2ys1"/> <span class="load-scale svelte-15o2ys1">/ 5</span></div></div> <h4 class="mt-4 svelte-15o2ys1">Grip Metrics</h4> <div class="load-metrics svelte-15o2ys1"><div class="load-item svelte-15o2ys1"><label for="open-grip" class="svelte-15o2ys1">Open</label> <input type="number" id="open-grip" min="1" max="5" class="svelte-15o2ys1"/> <span class="load-scale svelte-15o2ys1">/ 5</span></div> <div class="load-item svelte-15o2ys1"><label for="crimp-grip" class="svelte-15o2ys1">Crimp</label> <input type="number" id="crimp-grip" min="1" max="5" class="svelte-15o2ys1"/> <span class="load-scale svelte-15o2ys1">/ 5</span></div> <div class="load-item svelte-15o2ys1"><label for="pinch-grip" class="svelte-15o2ys1">Pinch</label> <input type="number" id="pinch-grip" min="1" max="5" class="svelte-15o2ys1"/> <span class="load-scale svelte-15o2ys1">/ 5</span></div> <div class="load-item svelte-15o2ys1"><label for="sloper-grip" class="svelte-15o2ys1">Sloper</label> <input type="number" id="sloper-grip" min="1" max="5" class="svelte-15o2ys1"/> <span class="load-scale svelte-15o2ys1">/ 5</span></div> <div class="load-item svelte-15o2ys1"><label for="jug-grip" class="svelte-15o2ys1">Jug</label> <input type="number" id="jug-grip" min="1" max="5" class="svelte-15o2ys1"/> <span class="load-scale svelte-15o2ys1">/ 5</span></div></div></div> <div class="form-group notes-section svelte-15o2ys1"><label for="session-notes" class="svelte-15o2ys1">Session Notes</label> <textarea id="session-notes" placeholder="How did the session feel? Weather, conditions, mood..." rows="3"></textarea></div> <div class="submit-section svelte-15o2ys1"><!> <button type="button" class="submit-btn svelte-15o2ys1"><!></button></div></div>');function Br(R,r){Vt(r,!0);const l=si(),b=["Boulder","Sport","Trad"],B=["Onsight","Flash","Redpoint","Repeat","Dogged","DNF"],W=["None","Overhang","Vertical","Slab","Roof"],H=["None","Projecting","Onsighting","Campusing","Repeaters","Comp Sim"],S=["None","Easy","Medium","Hard","Max","Limit+"],q=["None","Strength","Power","Strength Capacity","Power Capacity","Strength Endurance","Power Endurance","Endurance","Coordination","Slab Technique","Overhang Technique"],x=["None","Aerobic Lactic Capacity","Aerobic Lactic Power","Anaerobic Alactic Capacity","Anaerobic Alactic Power","Anaerobic Power","Anaerobic Lactic Capacity"],y=["None","Trusting feet","Double-clutch","Deadpointing","Flagging","Swapping feet","Edging","Smearing","Matching","Backstepping","Drop Knee","Bridging","Laybacking","Mantling","Kneebar","Dyno","Coordination Moves","Gastoning","Undercutting","Compressing","Heel Hook","Toe Hook","Bicycle"],M=["V0-","4-","V0","4","V0+","4+","V1","5","V2","5+","V3","6A","6A+","V4","6B","6B+","V5","6C","6C+","V6","7A","V7","7A+","V8","7B","7B+","V9","7C","V10","7C+","V11","8A","V12","8A+","V13","8B","V14","8B+","V15","8C","V16","8C+","V17","9A"].map(v=>v.toLowerCase());let m=Ve(r,"initialData",3,null),P=Mt(()=>!!m()),w=d(null),D=d(Oe(new Date().toISOString().split("T")[0])),L=d(Oe(new Date().toTimeString().split(" ")[0].slice(0,5))),N=d(""),C=d(""),J=d(""),Q=d(""),E=d(Oe(["None"])),j=d("None"),Z=d(Oe(["None"])),re=d(Oe(["None"])),pe=d(3),ve=d(3),ee=d(3),le=d(3),z=d(3),ae=d(3),ce=d(3),ie=d(3),ue=d(Oe([{isSport:!1,name:"",grade:"",attemptType:"Flash",attemptsNum:1,notes:""}])),ge=d(""),$=Mt(()=>e(N)?Js(e(N)):[]),Y=d(!1);const Ee="outdoor_climb_draft";let st=d(!1);ws(()=>{if(m()){t(D,m().date,!0),t(L,m().time||"12:00",!0),t(N,m().area,!0),t(C,m().crag,!0);const v=Js(e(N));e(C)&&!v.includes(e(C))&&t(Y,!0),t(J,m().sector||"",!0),t(Q,m().climbingType,!0),t(E,m().trainingTypes||["None"],!0),t(j,m().difficulty||"Moderate",!0),t(Z,m().categories||["None"],!0),t(re,m().energySystems||["None"],!0),t(pe,m().fingerLoad,!0),t(ve,m().shoulderLoad,!0),t(ee,m().forearmLoad,!0),t(le,m().openGrip||3,!0),t(z,m().crimpGrip||3,!0),t(ae,m().pinchGrip||3,!0),t(ce,m().sloperGrip||3,!0),t(ie,m().jugGrip||3,!0),t(ue,m().climbs||[],!0),t(ge,m().notes||"",!0),t(st,!0)}else{const v=localStorage.getItem(Ee);if(v)try{const o=JSON.parse(v);o.date&&t(D,o.date,!0),o.time&&t(L,o.time,!0),o.area&&t(N,o.area,!0),o.crag&&t(C,o.crag,!0),o.sector&&t(J,o.sector,!0),o.isOtherCrag&&t(Y,o.isOtherCrag,!0),o.climbingType&&t(Q,o.climbingType,!0),o.trainingTypes&&t(E,o.trainingTypes,!0),o.difficulty&&t(j,o.difficulty,!0),o.categories&&t(Z,o.categories,!0),o.energySystems&&t(re,o.energySystems,!0),o.fingerLoad&&t(pe,o.fingerLoad,!0),o.shoulderLoad&&t(ve,o.shoulderLoad,!0),o.forearmLoad&&t(ee,o.forearmLoad,!0),o.openGrip&&t(le,o.openGrip,!0),o.crimpGrip&&t(z,o.crimpGrip,!0),o.pinchGrip&&t(ae,o.pinchGrip,!0),o.sloperGrip&&t(ce,o.sloperGrip,!0),o.jugGrip&&t(ie,o.jugGrip,!0),o.climbs&&t(ue,o.climbs,!0),o.notes&&t(ge,o.notes,!0)}catch(o){console.error("Failed to restore draft",o)}t(st,!0)}}),is(()=>{if(!e(st)||e(P))return;const v={date:e(D),time:e(L),area:e(N),crag:e(C),sector:e(J),isOtherCrag:e(Y),climbingType:e(Q),trainingTypes:e(E),difficulty:e(j),categories:e(Z),energySystems:e(re),fingerLoad:e(pe),shoulderLoad:e(ve),forearmLoad:e(ee),openGrip:e(le),crimpGrip:e(z),pinchGrip:e(ae),sloperGrip:e(ce),jugGrip:e(ie),climbs:e(ue),notes:e(ge)};localStorage.setItem(Ee,JSON.stringify(v))}),is(()=>{e(N)&&(t(C,""),t(Y,!1))});function mt(){e(C)==="Other"&&(t(Y,!0),t(C,""))}function nt(){t(Y,!1),t(C,"")}function Rt(){t(ue,[...e(ue),{isSport:!1,name:"",grade:"",attemptType:"Flash",attemptsNum:1,notes:""}],!0)}function xt(v){t(ue,e(ue).filter((o,X)=>X!==v),!0)}function ft(v,o){e(ue)[v].attemptType=o,(o==="Flash"||o==="Onsight")&&(e(ue)[v].attemptsNum=1)}function ct(v){t(w,v,!0)}function Bt(){t(w,null)}let _t=Mt(()=>e(Q)==="Trad");function qe(v){return e(Q)==="Sport"?!0:e(Q)==="Boulder"?!1:v.isSport}function De(v){return v.trim()?M.includes(v.trim().toLowerCase()):!0}let te=d("idle"),he=d("");function Ue(){return e(N)?e(C)?e(Q)?e(ue).filter(o=>o.grade.trim()&&!De(o.grade)).length>0?"Please fix invalid grades":null:"Please select a climbing type":"Please select a crag":"Please select an area"}async function Ge(){const v=Ue();if(v){t(te,"error"),t(he,v,!0);return}t(te,"saving");try{const o=e(ue).map(Le=>({...Le,isSport:qe(Le)})),X={date:e(D),time:e(L),area:e(N),crag:e(C),sector:e(J)||void 0,climbingType:e(Q),trainingTypes:e(E),difficulty:e(j),categories:e(Z),energySystems:e(re),fingerLoad:e(pe),shoulderLoad:e(ve),forearmLoad:e(ee),openGrip:e(le),crimpGrip:e(z),pinchGrip:e(ae),sloperGrip:e(ce),jugGrip:e(ie),climbs:o,notes:e(ge)};let ke;e(P)&&m()?ke=await Sa(m().id,X):ke=await ka(X),ke.ok?(t(te,"success"),t(he,"Session saved!"),e(P)||localStorage.removeItem(Ee),r.onSaved?r.onSaved():(window.dispatchEvent(new CustomEvent("session-saved")),e(P)||setTimeout(()=>{Fe()},2e3))):(t(te,"error"),t(he,"Failed to save: "+(ke.error||"Unknown error")))}catch(o){t(te,"error"),t(he,"Failed to save session"),console.error("Save error:",o)}}function Fe(){t(D,new Date().toISOString().split("T")[0],!0),t(L,new Date().toTimeString().split(" ")[0].slice(0,5),!0),t(N,""),t(C,""),t(J,""),t(Q,""),t(E,["None"],!0),t(j,"None"),t(Z,["None"],!0),t(re,["None"],!0),t(pe,3),t(ve,3),t(ee,3),t(le,3),t(z,3),t(ae,3),t(ce,3),t(ie,3),t(ue,[{isSport:!1,name:"",grade:"",attemptType:"Flash",attemptsNum:1,notes:""}],!0),t(ge,""),t(te,"idle"),t(he,"")}var de=yi(),xe=i(de);{var Ke=v=>{var o=ai();c(v,o)};U(xe,v=>{e(P)||v(Ke)})}var He=a(xe,2),at=i(He),ht=a(i(at),2),We=i(ht);O(We);var bt=a(We,2);O(bt),s(ht),s(at);var it=a(at,2),Ne=a(i(it),2),Ye=i(Ne);Ye.value=Ye.__value="";var k=a(Ye);fe(k,17,()=>l,_e,(v,o)=>{var X=ii(),ke=i(X,!0);s(X);var Le={};I(()=>{K(ke,e(o)),Le!==(Le=e(o))&&(X.value=(X.__value=e(o))??"")}),c(v,X)}),s(Ne),s(it),s(He);var G=a(He,2),n=i(G),g=a(i(n),2);{var A=v=>{var o=ri(),X=i(o);O(X);var ke=a(X,2);ke.__click=nt,s(o),F(X,()=>e(C),Le=>t(C,Le)),c(v,o)},V=v=>{var o=ni();o.__change=mt;var X=i(o),ke=i(X,!0);s(X),X.value=X.__value="";var Le=a(X);fe(Le,17,()=>e($),_e,(Wt,Dt)=>{var pt=li(),ls=i(pt,!0);s(pt);var es={};I(()=>{K(ls,e(Dt)),es!==(es=e(Dt))&&(pt.value=(pt.__value=e(Dt))??"")}),c(Wt,pt)});var Ot=a(Le);{var It=Wt=>{var Dt=oi();Dt.value=Dt.__value="Other",c(Wt,Dt)};U(Ot,Wt=>{e(N)&&Wt(It)})}s(o),I(()=>{o.disabled=!e(N),K(ke,e(N)?"Select crag...":"Select area first...")}),ot(o,()=>e(C),Wt=>t(C,Wt)),c(v,o)};U(g,v=>{e(Y)?v(A):v(V,!1)})}s(n);var p=a(n,2),h=a(i(p),2);O(h),s(p),s(G);var se=a(G,2),Ie=a(i(se),2),rt=i(Ie);rt.value=rt.__value="";var Xe=a(rt);fe(Xe,17,()=>b,_e,(v,o)=>{var X=ci(),ke=i(X,!0);s(X);var Le={};I(()=>{K(ke,e(o)),Le!==(Le=e(o))&&(X.value=(X.__value=e(o))??"")}),c(v,X)}),s(Ie),s(se);var Ze=a(se,2),be=a(i(Ze),2),Be=i(be),ye=a(i(Be),2);us(ye,{get options(){return H},get selected(){return e(E)},placeholder:"Select types...",onChange:v=>t(E,v,!0)}),s(Be);var we=a(Be,2),Ct=a(i(we),2);fe(Ct,21,()=>S,_e,(v,o)=>{var X=ui(),ke=i(X,!0);s(X);var Le={};I(()=>{K(ke,e(o)),Le!==(Le=e(o))&&(X.value=(X.__value=e(o))??"")}),c(v,X)}),s(Ct),s(we);var ut=a(we,2),Tt=a(i(ut),2);us(Tt,{get options(){return q},get selected(){return e(Z)},placeholder:"Select categories...",onChange:v=>t(Z,v,!0)}),s(ut);var dt=a(ut,2),je=a(i(dt),2);us(je,{get options(){return x},get selected(){return e(re)},placeholder:"Select systems...",onChange:v=>t(re,v,!0)}),s(dt),s(be),s(Ze);var Se=a(Ze,2),Me=a(i(Se),2),yt=i(Me),vt=i(yt),$e=i(vt),lt=i($e);{var Te=v=>{var o=di();c(v,o)};U(lt,v=>{e(_t)&&v(Te)})}Ce(8),s($e),s(vt);var Lt=a(vt);fe(Lt,21,()=>e(ue),_e,(v,o,X)=>{var ke=hi(),Le=i(ke);{var Ot=me=>{var et=vi(),tt=i(et);O(tt),s(et),Zs(tt,()=>e(o).isSport,cs=>e(o).isSport=cs),c(me,et)};U(Le,me=>{e(_t)&&me(Ot)})}var It=a(Le),Wt=i(It);O(Wt),s(It);var Dt=a(It),pt=i(Dt);O(pt);let ls;var es=a(pt,2);{var qs=me=>{var et=pi();c(me,et)};U(es,me=>{De(e(o).grade)||me(qs)})}s(Dt);var os=a(Dt),jt=i(os);jt.__change=me=>ft(X,me.target.value),fe(jt,21,()=>B,_e,(me,et)=>{var tt=gi(),cs=i(tt,!0);s(tt);var as={};I(()=>{K(cs,e(et)),as!==(as=e(et))&&(tt.value=(tt.__value=e(et))??"")}),c(me,tt)}),s(jt);var _s;Ws(jt),s(os);var ns=a(os),ts=i(ns);O(ts),s(ns);var hs=a(ns),ss=i(hs);fe(ss,21,()=>W.filter(me=>me!=="None"),_e,(me,et)=>{var tt=mi(),cs=i(tt,!0);s(tt);var as={};I(()=>{K(cs,e(et)),as!==(as=e(et))&&(tt.value=(tt.__value=e(et))??"")}),c(me,tt)}),s(ss),s(hs);var bs=a(hs),Ms=i(bs);fe(Ms,21,()=>y,_e,(me,et)=>{var tt=fi(),cs=i(tt,!0);s(tt);var as={};I(()=>{K(cs,e(et)),as!==(as=e(et))&&(tt.value=(tt.__value=e(et))??"")}),c(me,tt)}),s(Ms),s(bs);var ys=a(bs);let ne;var Re=i(ys);ds(Re),s(ys);var Ae=a(ys),Jt=i(Ae);{var Qt=me=>{var et=_i();et.__click=()=>xt(X),c(me,et)};U(Jt,me=>{e(ue).length>1&&me(Qt)})}s(Ae),s(ke),I(me=>{ls=Pt(pt,1,"grade-input svelte-15o2ys1",null,ls,me),_s!==(_s=e(o).attemptType)&&(jt.value=(jt.__value=e(o).attemptType)??"",Is(jt,e(o).attemptType)),ts.disabled=e(o).attemptType==="Flash"||e(o).attemptType==="Onsight",ne=Pt(ys,1,"notes-cell svelte-15o2ys1",null,ne,{expanded:e(w)===X})},[()=>({invalid:!De(e(o).grade)})]),F(Wt,()=>e(o).name,me=>e(o).name=me),F(pt,()=>e(o).grade,me=>e(o).grade=me),F(ts,()=>e(o).attemptsNum,me=>e(o).attemptsNum=me),ot(ss,()=>e(o).wall,me=>e(o).wall=me),ot(Ms,()=>e(o).techniqueFocus,me=>e(o).techniqueFocus=me),Nt("focus",Re,()=>ct(X)),Nt("blur",Re,Bt),F(Re,()=>e(o).notes,me=>e(o).notes=me),c(v,ke)}),s(Lt),s(yt),s(Me);var wt=a(Me,2);wt.__click=Rt,s(Se);var Ht=a(Se,2),Pe=a(i(Ht),2),Qe=i(Pe),qt=a(i(Qe),2);O(qt),Ce(2),s(Qe);var Ft=a(Qe,2),Kt=a(i(Ft),2);O(Kt),Ce(2),s(Ft);var Xt=a(Ft,2),At=a(i(Xt),2);O(At),Ce(2),s(Xt),s(Pe);var Zt=a(Pe,4),ps=i(Zt),gs=a(i(ps),2);O(gs),Ce(2),s(ps);var ms=a(ps,2),ks=a(i(ms),2);O(ks),Ce(2),s(ms);var fs=a(ms,2),xs=a(i(fs),2);O(xs),Ce(2),s(fs);var Cs=a(fs,2),Ts=a(i(Cs),2);O(Ts),Ce(2),s(Cs);var Ls=a(Cs,2),Rs=a(i(Ls),2);O(Rs),Ce(2),s(Ls),s(Zt),s(Ht);var $t=a(Ht,2),Ds=a(i($t),2);ds(Ds),s($t);var Ns=a($t,2),Bs=i(Ns);{var f=v=>{var o=bi();let X;var ke=i(o,!0);s(o),I(()=>{X=Pt(o,1,"save-message svelte-15o2ys1",null,X,{success:e(te)==="success",error:e(te)==="error"}),K(ke,e(he))}),c(v,o)};U(Bs,v=>{e(he)&&v(f)})}var u=a(Bs,2);u.__click=Ge;var oe=i(u);{var ze=v=>{var o=kt("Saving...");c(v,o)},Je=v=>{var o=zt(),X=Gt(o);{var ke=Ot=>{var It=kt("✓ Saved!");c(Ot,It)},Le=Ot=>{var It=kt("Save Session");c(Ot,It)};U(X,Ot=>{e(te)==="success"?Ot(ke):Ot(Le,!1)},!0)}c(v,o)};U(oe,v=>{e(te)==="saving"?v(ze):v(Je,!1)})}s(u),s(Ns),s(de),I(()=>u.disabled=e(te)==="saving"),F(We,()=>e(D),v=>t(D,v)),F(bt,()=>e(L),v=>t(L,v)),ot(Ne,()=>e(N),v=>t(N,v)),F(h,()=>e(J),v=>t(J,v)),ot(Ie,()=>e(Q),v=>t(Q,v)),ot(Ct,()=>e(j),v=>t(j,v)),F(qt,()=>e(pe),v=>t(pe,v)),F(Kt,()=>e(ve),v=>t(ve,v)),F(At,()=>e(ee),v=>t(ee,v)),F(gs,()=>e(le),v=>t(le,v)),F(ks,()=>e(z),v=>t(z,v)),F(xs,()=>e(ae),v=>t(ae,v)),F(Ts,()=>e(ce),v=>t(ce,v)),F(Rs,()=>e(ie),v=>t(ie,v)),F(Ds,()=>e(ge),v=>t(ge,v)),c(R,de),Ut()}rs(["click","change"]);const Fs=[{id:"pull_ups",name:"Pull-Up",category:"Pull",subcategory:"Vertical Pull",targetMuscles:["Lats","Biceps"],instructions:["Grip bar wider than shoulders.","Pull chest up toward the bar."],images:["/exercises/pull-ups.webp"]},{id:"weighted_pull_ups",name:"Weighted Pull-Up",category:"Pull",subcategory:"Vertical Pull",targetMuscles:["Lats","Biceps"],instructions:["Grip bar wider than shoulders.","Pull chest up toward the bar."],images:["/exercises/weighted_pull_ups.webp"]},{id:"lat_pulldown",name:"Lat Pulldown",category:"Pull",subcategory:"Vertical Pull",targetMuscles:["Lats"],instructions:["Sit in machine.","Pull bar down to upper chest."],images:["/exercises/lat_pulldown.webp"]},{id:"one_arm_assisted_pull_up",name:"1 Arm Assisted Pull-Up",category:"Pull",subcategory:"Vertical Pull",targetMuscles:["Lats","Biceps"],instructions:["Use a pulley or band to assist one arm.","Perform a one-arm pull-up."],images:["/exercises/1_Arm_Assisted_Pull-Up.webp"]},{id:"bent_over_row",name:"Barbell Row",category:"Pull",subcategory:"Horizontal Pull",targetMuscles:["Lats","Rhomboids"],instructions:["Hinge at hips.","Pull weight to hip pocket."],images:["/exercises/bent_over_row.webp"]},{id:"single_arm_db_row",name:"Dumbbell Row",category:"Pull",subcategory:"Horizontal Pull",targetMuscles:["Lats","Rhomboids"],instructions:["Support on bench.","Pull dumbbell to hip."],images:["/exercises/single_arm_db_row.webp"]},{id:"one_arm_negatives",name:"One Arm Negatives",category:"Pull",subcategory:"Lock-offs",targetMuscles:["Lats","Biceps","Forearms"],instructions:["Jump or assist up to the top position.","Lower yourself as slowly as possible with one arm."],images:["/exercises/one_arm_negatives.webp"]},{id:"full_lock_offs",name:"Full Lock-offs",category:"Pull",subcategory:"Lock-offs",targetMuscles:["Lats","Biceps"],instructions:["Hold the top position of a pull-up.","Maintain chin above the bar for time."],images:["/exercises/full_lock_offs.webp"]},{id:"90_degree_lock_offs",name:"90 Lock-offs",category:"Pull",subcategory:"Lock-offs",targetMuscles:["Lats","Biceps"],instructions:["Hold a pull-up position with elbows at 90 degrees.","Keep core tight and hold for time."],images:["/exercises/90_degree_lock_offs.webp"]},{id:"120_degree_lock_offs",name:"120 Lock-offs",category:"Pull",subcategory:"Lock-offs",targetMuscles:["Lats","Biceps"],instructions:["Hold a pull-up position with elbows at 120 degrees (slightly bent).","Maintain tension for time."],images:["/exercises/120_degree_lock_offs.webp"]},{id:"bicep_curls",name:"Bicep Curls",category:"Pull",subcategory:"Curls",targetMuscles:["Biceps"],instructions:["Hold dumbbells at sides.","Curl weights toward shoulders.","Lower with control."],images:["/exercises/bicep_curls.webp"]},{id:"hammer_curls",name:"Hammer Curls",category:"Pull",subcategory:"Curls",targetMuscles:["Biceps","Forearms"],instructions:["Hold dumbbells with neutral grip (palms facing in).","Curl weights toward shoulders.","Lower with control."],images:["/exercises/hammer_curls.webp"]},{id:"barbell_curls",name:"Barbell Curls",category:"Pull",subcategory:"Curls",targetMuscles:["Biceps"],instructions:["Hold barbell with underhand grip.","Curl bar toward chest.","Lower with control."],images:["/exercises/barbell_curls.webp"]},{id:"front_raises",name:"Front Raises",category:"Pull",subcategory:"Shoulders",targetMuscles:["Front Delts"],instructions:["Hold weights in front of thighs.","Raise arms straight in front to shoulder height."],images:["/exercises/front_raises.webp"]},{id:"kettlebell_swings",name:"Kettlebell Swings",category:"Pull",subcategory:"Shoulders",targetMuscles:["Glutes","Hamstrings","Lower Back"],instructions:["Hinge at hips holding kettlebell.","Snap hips forward to swing weight up."],images:["/exercises/kettlebell_swings.webp"]},{id:"muscle_ups",name:"Muscle Ups",category:"Pull",subcategory:"Shoulders",targetMuscles:["Lats","Triceps","Chest"],instructions:["Explosive pull-up.","Transition wrists over bar.","Press out at top."],images:["/exercises/muscle_ups.webp"]},{id:"seated_row",name:"Seated Row",category:"Pull",subcategory:"Horizontal Pull",targetMuscles:["Lats","Rhomboids"],instructions:["Sit at machine.","Pull handle to torso."],images:["/exercises/Seated_Row.webp"]},{id:"supine_trx_row",name:"Supine TRX Row",category:"Pull",subcategory:"Horizontal Pull",targetMuscles:["Lats","Rhomboids"],instructions:["Feet in TRX straps.","Pull handle to torso."],images:["/exercises/supine_trx_row.webp"]},{id:"barbell_bench_press",name:"Barbell Bench Press",category:"Push",subcategory:"Horizontal Push",targetMuscles:["Chest","Triceps"],instructions:["Lower bar to chest.","Press back up."],images:["/exercises/barbell_bench_press.webp"]},{id:"dumbbell_bench_press",name:"Dumbbell Chest Press",category:"Push",subcategory:"Horizontal Push",targetMuscles:["Upper Chest"],instructions:["Press dumbbells whilst lying on bench."],images:["/exercises/dumbbell_bench_press.webp"]},{id:"dumbbell_bench_press",name:"Dumbbell Chest Press",category:"Push",subcategory:"Horizontal Push",targetMuscles:["Upper Chest"],instructions:["Press dumbbells whilst lying on bench."],images:["/exercises/dumbbell_bench_press.webp"]},{id:"chest_press",name:"Chest Press Machine",category:"Push",subcategory:"Horizontal Push",targetMuscles:["Chest","Triceps"],instructions:["From seated position, push handles overhead."],images:["/exercises/chest_press.webp"]},{id:"push_up",name:"Push-Up",category:"Push",subcategory:"Horizontal Push",targetMuscles:["Triceps","Chest"],instructions:["Hands wide, lower to floor.","Press back up."],images:["/exercises/push_up.webp"]},{id:"narrow_push_up",name:"Narrow Push-Up",category:"Push",subcategory:"Horizontal Push",targetMuscles:["Triceps","Chest"],instructions:["Hands close together.","Keep elbows tucked."],images:["/exercises/narrow_push_up.webp"]},{id:"trx_push_up",name:"TRX Push-Up",category:"Push",subcategory:"Horizontal Push",targetMuscles:["Chest","Global Stabilisers"],instructions:["Feet or hands in TRX straps.","Perform push-up."],images:["/exercises/trx_push_up.webp"]},{id:"overhead_press",name:"Barbell Overhead Press",category:"Push",subcategory:"Vertical Push",targetMuscles:["Shoulders"],instructions:["Press bar vertically overhead."],images:["/exercises/overhead_press.webp"]},{id:"dumbbell_overhead_press",name:"Dumbbell Overhead Press",category:"Push",subcategory:"Vertical Push",targetMuscles:["Shoulders"],instructions:["Press dumbbells vertically overhead."],images:["/exercises/dumbbell_overhead_press.webp"]},{id:"arnold_press",name:"Arnold Press",category:"Push",subcategory:"Vertical Push",targetMuscles:["Shoulders"],instructions:["Rotate palms while pressing overhead."],images:["/exercises/arnold_press.webp"]},{id:"shoulder_press_machine",name:"Shoulder Press Machine",category:"Push",subcategory:"Vertical Push",targetMuscles:["Shoulders"],instructions:["Sit in machine.","Press handles overhead."],images:["/exercises/Shoulder_Press_Machine.webp"]},{id:"dumbbell_flies",name:"Dumbbell Flies",category:"Push",subcategory:"Shoulders",targetMuscles:["Chest"],instructions:["Lie on bench.","Open arms wide, then bring together."],images:["/exercises/Dumbbell_Flies.webp"]},{id:"lateral_raises",name:"Lateral Raises",category:"Push",subcategory:"Shoulders",targetMuscles:["Side Delts"],instructions:["Raise arms to sides."],images:["/exercises/dumbbell_lateral_raise.webp"]},{id:"dumbbell_kickbacks",name:"Dumbbell Kickbacks",category:"Push",subcategory:"Triceps",targetMuscles:["Triceps"],instructions:["Hinge forward.","Extend arm back."],images:["/exercises/dumbbell_kickbacks.webp"]},{id:"cable_pushdown",name:"Cable Pushdown",category:"Push",subcategory:"Triceps",targetMuscles:["Triceps"],instructions:["Push bar down using triceps."],images:["/exercises/tricep_pulldown.webp"]},{id:"tricep_dips",name:"Tricep Dips",category:"Push",subcategory:"Triceps",targetMuscles:["Triceps"],instructions:["Support body on parallel bars.","Lower until elbows at 90 degrees."],images:["/exercises/Tricep_Dips.webp"]},{id:"barbell_squat",name:"Barbell Squat",category:"Legs",subcategory:"Squats",targetMuscles:["Quads","Glutes"],instructions:["Squat with barbell on back."],images:["/exercises/barbell_squat.webp"]},{id:"leg_press",name:"Leg Press",category:"Legs",subcategory:"Squats",targetMuscles:["Quads"],instructions:["Press weight on machine."],images:["/exercises/leg_press.webp"]},{id:"pistol_squats",name:"Pistol Squats",category:"Legs",subcategory:"Squats",targetMuscles:["Quads","Balance"],instructions:["One-legged squat."],images:["/exercises/Pistol_Squats.webp"]},{id:"goblet_squat",name:"Goblet Squat",category:"Legs",subcategory:"Squats",targetMuscles:["Quads"],instructions:["Hold weight at chest.","Squat."],images:["/exercises/goblet_squat.webp"]},{id:"deadlift",name:"Deadlift",category:"Legs",subcategory:"Hinge Pattern",targetMuscles:["Posterior Chain"],instructions:["Lift bar from floor."],images:["/exercises/deadlift.webp"]},{id:"rack_pulls",name:"Rack Pulls",category:"Legs",subcategory:"Hinge Pattern",targetMuscles:["Back","Glutes"],instructions:["Deadlift from rack height."],images:["/exercises/Rack_Pulls.webp"]},{id:"barbell_good_mornings",name:"BarbellGood Mornings",category:"Legs",subcategory:"Hinge Pattern",targetMuscles:["Back","Hamstrings"],instructions:["Deadlift from rack height."],images:["/exercises/barbell_good_mornings.webp"]},{id:"leg_extension",name:"Leg Extension",category:"Legs",subcategory:"Isolation",targetMuscles:["Quads"],instructions:["Extend legs against machine resistance."],images:["/exercises/Leg_Extension.webp"]},{id:"leg_curl",name:"Leg Curl",category:"Legs",subcategory:"Isolation",targetMuscles:["Hamstrings"],instructions:["Curl legs against machine resistance."],images:["/exercises/Leg_Curl.webp"]},{id:"walking_lunge",name:"Walking Lunge",category:"Legs",subcategory:"Isolation",targetMuscles:["Quads","Glutes"],instructions:["Step forward and lower hips."],images:["/exercises/walking_lunge.webp"]},{id:"calf_raises",name:"Calf Raises",category:"Legs",subcategory:"Calves",targetMuscles:["Calves"],instructions:["Raise heels."],images:["/exercises/calf_raise.webp"]},{id:"glute_bridges",name:"Glute Bridges",category:"Legs",subcategory:"Glutes",targetMuscles:["Glutes"],instructions:["Lie on back.","Lift hips."],images:["/exercises/Glute_Bridges.webp"]},{id:"reverse_wrist_curl",name:"Reverse Wrist Curl",category:"Stabilisers",subcategory:"Wrists",targetMuscles:["Forearm Extensors"],instructions:["Curl wrist up with palm down."],images:["/exercises/reverse_wrist_curl.webp"]},{id:"radial_wrist_tilts",name:"Radial Wrist Tilts",category:"Stabilisers",subcategory:"Wrists",targetMuscles:["Forearms"],instructions:["Tilt wrist thumb-side up."],images:["/exercises/Radial_Wrist_Tilts.webp"]},{id:"wrist_rotations",name:"Wrist Rotations",category:"Stabilisers",subcategory:"Wrists",targetMuscles:["Forearms"],instructions:["Rotate wrists with weight."],images:["/exercises/Wrist_Rotations.webp"]},{id:"wrist_curls",name:"Wrist Curls",category:"Stabilisers",subcategory:"Wrists",targetMuscles:["Forearm Flexors"],instructions:["Curl wrist up with palm up."],images:["/exercises/Wrist_Curls.webp"]},{id:"dumbbell_rear_delt_flies",name:"Dumbbell Rear Delt Flies",category:"Stabilisers",subcategory:"Rear Delts",targetMuscles:["Rear Delts"],instructions:["Hinge forward.","Raise arms to sides."],images:["/exercises/dumbbell_rear_delt_flies.webp"]},{id:"cable_face_pulls",name:"Cable Face Pulls",category:"Stabilisers",subcategory:"Rear Delts",targetMuscles:["Rear Delts"],instructions:["Pull rope to face."],images:["/exercises/face_pull.webp"]},{id:"archer_rows",name:"Archer Rows",category:"Stabilisers",subcategory:"Rear Delts",targetMuscles:["Back","Rear Delts"],instructions:["Row with one arm while other stays straight."],images:["/exercises/Archer_Rows.webp"]},{id:"one_arm_dumbbell_shrugs",name:"One Arm Dumbbell Shrugs",category:"Stabilisers",subcategory:"Scapular Control",targetMuscles:["Traps"],instructions:["Shrug shoulder up."],images:["/exercises/One_Arm_Dumbbell_Shrugs.webp"]},{id:"prone_overhead_db_press",name:"Prone Overhead Dumbbell Press",category:"Stabilisers",subcategory:"Scapular Control",targetMuscles:["Lower Traps"],instructions:["Lie prone.","Press light weights overhead."],images:["/exercises/Prone_Overhead_Dumbbell_Press.webp"]},{id:"incline_bench_db_iyts",name:"Incline Bench Dumbbell IYTs",category:"Stabilisers",subcategory:"Scapular Control",targetMuscles:["Lower Traps","Rear Delts"],instructions:["Form I, Y, T shapes with arms."],images:["/exercises/i-y-t_raises.webp"]},{id:"scapular_holds",name:"Scapular Holds",category:"Stabilisers",subcategory:"Scapular Control",targetMuscles:["Scapula"],instructions:["Hold scapular retraction."],images:["/exercises/Scapular_Holds.webp"]},{id:"scapular_pull_ups",name:"Scapular Pull-Ups",category:"Stabilisers",subcategory:"Scapular Control",targetMuscles:["Scapula"],instructions:["Hang from bar.","Depress and retract scapula without bending elbows."],images:["/exercises/Scapular_Pull-ups.webp"]},{id:"one_arm_scapular_holds",name:"1 Arm Scapular Holds",category:"Stabilisers",subcategory:"Scapular Control",targetMuscles:["Scapula"],instructions:["Hang from one arm.","Engage scapula."],images:["/exercises/one_arm_scapular_holds.webp"]},{id:"one_arm_scapular_pull_ups",name:"1 Arm Scapular Pull-Ups",category:"Stabilisers",subcategory:"Scapular Control",targetMuscles:["Scapula"],instructions:["One arm hang.","Depress scapula."],images:["/exercises/one_arm_scapular_pull_ups.webp"]},{id:"trx_iyts",name:"TRX IYTs",category:"Stabilisers",subcategory:"Scapular Control",targetMuscles:["Back"],instructions:["Use TRX to perform I, Y, T raises."],images:["/exercises/trx_iyts.webp"]},{id:"dumbbell_overhead_rotations",name:"Dumbbell Overhead Rotations",category:"Stabilisers",subcategory:"Rotator Cuff",targetMuscles:["Rotator Cuff"],instructions:["Press overhead.","Rotate shoulders."],images:["/exercises/Dumbbell_Overhead_Rotations.webp"]},{id:"external_side_lying_rotations",name:"External Side Lying Rotations",category:"Stabilisers",subcategory:"Rotator Cuff",targetMuscles:["Rotator Cuff"],instructions:["Lie on side.","Rotate arm up."],images:["/exercises/External_Side_Lying_Rotations.webp"]},{id:"prone_bench_rotations",name:"Prone Bench Rotations",category:"Stabilisers",subcategory:"Rotator Cuff",targetMuscles:["Rotator Cuff"],instructions:["Lie prone.","Rotate arms."],images:["/exercises/Prone_Bench_Rotations.webp"]},{id:"cable_external_rotations",name:"Cable External Rotations",category:"Stabilisers",subcategory:"Rotator Cuff",targetMuscles:["Rotator Cuff"],instructions:["Use cable.","Rotate arm away from body."],images:["/exercises/Cable_External_Rotations.webp"]},{id:"cable_internal_rotation",name:"Cable Internal Rotation",category:"Stabilisers",subcategory:"Rotator Cuff",targetMuscles:["Rotator Cuff"],instructions:["Use cable.","Rotate arm across body."],images:["/exercises/Cable_Internal_Rotation.webp"]},{id:"internal_side_lying_rotations",name:"Internal Side Lying Rotations",category:"Stabilisers",subcategory:"Internal Rotation/Flexors",targetMuscles:["Rotator Cuff"],instructions:["Lie on side.","Rotate arm inward."],images:["/exercises/Internal_Side_Lying_Rotations.webp"]},{id:"hanging_l_hold",name:"Hanging L Hold",category:"Core",subcategory:"Leg Raise",targetMuscles:["Abs"],instructions:["Hang from bar.","Hold legs horizontal."],images:["/exercises/Hanging_L_Hold.webp"]},{id:"supine_leg_raises",name:"Supine Leg Raises",category:"Core",subcategory:"Leg Raise",targetMuscles:["Abs"],instructions:["Lie on back.","Raise legs."],images:["/exercises/Supine_Leg_Raises.webp"]},{id:"hanging_leg_raises",name:"Hanging Leg Raises",category:"Core",subcategory:"Leg Raise",targetMuscles:["Abs"],instructions:["Hang from bar.","Raise legs to bar."],images:["/exercises/hanging_leg_raise.webp"]},{id:"lever_raises_tucked",name:"Lever Raises (tucked)",category:"Core",subcategory:"Leg Raise",targetMuscles:["Abs"],instructions:["Front lever progression tucked."],images:["/exercises/Lever_Raises_tucked.webp"]},{id:"lever_raises_90",name:"Lever Raises (90)",category:"Core",subcategory:"Leg Raise",targetMuscles:["Abs"],instructions:["Front lever progression to 90 degrees."]},{id:"lever_raises",name:"Lever Raises",category:"Core",subcategory:"Leg Raise",targetMuscles:["Abs"],instructions:["Full front lever raises."]},{id:"crunches",name:"Crunches",category:"Core",subcategory:"Crunches",targetMuscles:["Upper Abs"],instructions:["Crunch up off floor."],images:["/exercises/crunch.webp"]},{id:"lower_ab_crunches",name:"Lower Ab Crunches",category:"Core",subcategory:"Crunches",targetMuscles:["Lower Abs"],instructions:["Reverse crunch movement."],images:["/exercises/Lower_Ab_Crunches.webp"]},{id:"weighted_crunches",name:"Weighted Crunches",category:"Core",subcategory:"Crunches",targetMuscles:["Abs"],instructions:["Crunch with weight."],images:["/exercises/Weighted_Crunches.webp"]},{id:"dead_bug",name:"Dead Bug",category:"Core",subcategory:"Crunches",targetMuscles:["Core"],instructions:["Opposite arm and leg extension lying on back."],images:["/exercises/Dead_Bug.webp"]},{id:"boat_pose",name:"Boat Pose",category:"Core",subcategory:"Crunches",targetMuscles:["Core"],instructions:["Static V hold on floor."],images:["/exercises/Boat_Pose.webp"]},{id:"v_sits",name:"V Sits",category:"Core",subcategory:"Crunches",targetMuscles:["Abs"],instructions:["Explosive sit up to V position."],images:["/exercises/V_Sits.webp"]},{id:"kettle_bell_twists",name:"Kettle Bell Twists",category:"Core",subcategory:"Rotation",targetMuscles:["Obliques"],instructions:["Russian twist with KB."],images:["/exercises/russian_twists.webp"]},{id:"twisting_crunches",name:"Twisting Crunches",category:"Core",subcategory:"Rotation",targetMuscles:["Obliques"],instructions:["Crunch with rotation."],images:["/exercises/Twisting_Crunches.webp"]},{id:"supine_windscreen_wipers",name:"Supine Windscreen Wipers",category:"Core",subcategory:"Rotation",targetMuscles:["Obliques"],instructions:["Lie on back.","Rotate legs side to side."],images:["/exercises/Supine_Windscreen_Wipers.webp"]},{id:"hanging_windscreen_wipers",name:"Hanging Windscreen Wipers",category:"Core",subcategory:"Rotation",targetMuscles:["Obliques"],instructions:["Hang from bar.","Rotate legs side to side."],images:["/exercises/Hanging_Windscreen_Wipers.webp"]},{id:"thread_the_needle",name:"Thread the Needle",category:"Core",subcategory:"Rotation",targetMuscles:["Obliques","Mobility"],instructions:["Plank position.","Reach under body."],images:["/exercises/Thread_the_Needle.webp"]},{id:"plank",name:"Plank",category:"Core",subcategory:"Stability",targetMuscles:["Core"],instructions:["Hold plank position."],images:["/exercises/plank.webp"]},{id:"dolphin_plank",name:"Dolphin Plank",category:"Core",subcategory:"Stability",targetMuscles:["Core"],instructions:["Plank on forearms with hips high."],images:["/exercises/Dolphin_Plank.webp"]},{id:"copenhagen_plank",name:"Copenhagen Plank",category:"Core",subcategory:"Stability",targetMuscles:["Adductors","Core"],instructions:["Side plank with top leg supported."],images:["/exercises/Copenhagen_Plank.webp"]},{id:"side_plank",name:"Side Plank",category:"Core",subcategory:"Stability",targetMuscles:["Obliques"],instructions:["Hold side plank."],images:["/exercises/side_plank.webp"]},{id:"prone_dish_hold",name:"Prone Dish Hold",category:"Core",subcategory:"Stability",targetMuscles:["Posterior Chain"],instructions:["Superman hold."],images:["/exercises/Prone_Dish_Hold.webp"]},{id:"supine_dish_hold",name:"Supine Dish Hold",category:"Core",subcategory:"Stability",targetMuscles:["Core"],instructions:["Hollow body hold (lower)."],images:["/exercises/Supine_Dish_Hold.webp"]},{id:"hollow_body_hold",name:"Hollow Body Hold",category:"Core",subcategory:"Stability",targetMuscles:["Core"],instructions:["Hold hollow body position."],images:["/exercises/Hollow_Body_Hold.webp"]},{id:"prone_dish_lifts",name:"Prone Dish Lifts",category:"Core",subcategory:"Stability",targetMuscles:["Posterior Chain"],instructions:["Lifting into superman position reps."],images:["/exercises/Prone_Dish_Lifts.webp"]},{id:"bicep_stretch",name:"Bicep Stretch",category:"Mobility",subcategory:"Upper Body",targetMuscles:["Biceps"],instructions:["Stretch biceps."],images:["/exercises/Bicep_Stretch.webp"]},{id:"finger_stretches",name:"Finger Stretches",category:"Mobility",subcategory:"Upper Body",targetMuscles:["Fingers"],instructions:["Stretch fingers."],images:["/exercises/Finger_Stretches.webp"]},{id:"pec_stretch",name:"Pec Stretch",category:"Mobility",subcategory:"Upper Body",targetMuscles:["Chest"],instructions:["Stretch chest."],images:["/exercises/Pec_Stretch.webp"]},{id:"lat_stretch",name:"Lat Stretch",category:"Mobility",subcategory:"Upper Body",targetMuscles:["Lats"],instructions:["Stretch lats."],images:["/exercises/Lat_Stretch.webp"]},{id:"wrist_stretches",name:"Wrist Stretches",category:"Mobility",subcategory:"Upper Body",targetMuscles:["Wrists"],instructions:["Stretch wrists."],images:["/exercises/wrist_stretches.webp"]},{id:"pancake_fold",name:"Pancake Fold",category:"Mobility",subcategory:"Torso Chain",targetMuscles:["Hips","Back"],instructions:["Seated straddle fold."],images:["/exercises/Pancake_Fold.webp"]},{id:"open_books",name:"Open Books",category:"Mobility",subcategory:"Torso Chain",targetMuscles:["Thoracic Spine"],instructions:["Side lying thoracic rotation."],images:["/exercises/Open_Books.webp"]},{id:"good_mornings",name:"Good Mornings",category:"Mobility",subcategory:"Torso Chain",targetMuscles:["Hamstrings","Back"],instructions:["Hinge with straight back."],images:["/exercises/Good_Mornings.webp"]},{id:"calf_stretch",name:"Calf Stretch",category:"Mobility",subcategory:"Lower Leg",targetMuscles:["Calves"],instructions:["Stretch calves."],images:["/exercises/Calf_Stretch.webp"]},{id:"donkey_calf_raise",name:"Donkey Calf Raise",category:"Mobility",subcategory:"Lower Leg",targetMuscles:["Calves"],instructions:["Calf raise bent over."],images:["/exercises/Donkey_Calf_Raise.webp"]},{id:"one_leg_calf_squats",name:"1 Leg Calf Squats",category:"Mobility",subcategory:"Lower Leg",targetMuscles:["Calves","Balance"],instructions:["Squat on one leg, heel raised."],images:["/exercises/1_Leg_Calf_Squats.webp"]},{id:"wall_calf_stretch",name:"Wall Calf Stretch",category:"Mobility",subcategory:"Lower Leg",targetMuscles:["Calves"],instructions:["Stretch against wall."],images:["/exercises/Wall_Calf_Stretch.webp"]},{id:"fishermans",name:"Fishermans",category:"Mobility",subcategory:"Lower Leg",targetMuscles:["Ankles"],instructions:["Kneeling ankle stretch."],images:["/exercises/Fishermans.webp"]},{id:"barre_lift",name:"Barre Lift",category:"Mobility",subcategory:"Hips/Lower Body",targetMuscles:["Hips"],instructions:["Lift leg at barre."],images:["/exercises/Barre_Lift.webp"]},{id:"fire_hydrants",name:"Fire Hydrants",category:"Mobility",subcategory:"Hips/Lower Body",targetMuscles:["Glutes"],instructions:["Quadruped hip abduction."],images:["/exercises/Fire_Hydrants.webp"]},{id:"supine_quad_stretch",name:"Supine Quad Stretch",category:"Mobility",subcategory:"Hips/Lower Body",targetMuscles:["Quads"],instructions:["Lie back with bent knee."],images:["/exercises/Supine_Quad_Stretch.webp"]},{id:"long_lunges",name:"Long Lunges",category:"Mobility",subcategory:"Hips/Lower Body",targetMuscles:["Hip Flexors"],instructions:["Deep lunge."],images:["/exercises/long_lunges.webp"]},{id:"cossack_squats",name:"Cossack Squats",category:"Mobility",subcategory:"Hips/Lower Body",targetMuscles:["Hips","Adductors"],instructions:["Side lunge."],images:["/exercises/Cossack_Squats.webp"]},{id:"front_splits",name:"Front Splits",category:"Mobility",subcategory:"Hips/Lower Body",targetMuscles:["Hamstrings","Hip Flexors"],instructions:["Split forward/back."],images:["/exercises/Front_Splits.webp"]},{id:"side_splits",name:"Side Splits",category:"Mobility",subcategory:"Hips/Lower Body",targetMuscles:["Adductors"],instructions:["Straddle split."],images:["/exercises/Side_Splits.webp"]},{id:"front_swings",name:"Front Swings",category:"Mobility",subcategory:"Hips/Lower Body",targetMuscles:["Hips"],instructions:["Swing leg forward/back."],images:["/exercises/Front_Swings.webp"]},{id:"side_swings",name:"Side Swings",category:"Mobility",subcategory:"Hips/Lower Body",targetMuscles:["Hips"],instructions:["Swing leg side to side."],images:["/exercises/Side_Swings.webp"]},{id:"hamstring_stretch",name:"Hamstring Stretch",category:"Mobility",subcategory:"Hips/Lower Body",targetMuscles:["Hamstrings"],instructions:["Stretch hamstring."],images:["/exercises/Hamstring_Stretch.webp"]},{id:"butterfly",name:"Butterfly",category:"Mobility",subcategory:"Hips/Lower Body",targetMuscles:["Hips"],instructions:["Seated hip opener."],images:["/exercises/Butterfly.webp"]},{id:"horse_squat",name:"Horse Squat",category:"Mobility",subcategory:"Hips/Lower Body",targetMuscles:["Hips","Quads"],instructions:["Wide stance squat."],images:["/exercises/Horse_Squat.webp"]},{id:"supine_frog",name:"Supine Frog",category:"Mobility",subcategory:"Hips/Lower Body",targetMuscles:["Hips"],instructions:["Lie on back, knees wide."],images:["/exercises/supine_frog.webp"]},{id:"prone_frog",name:"Prone Frog",category:"Mobility",subcategory:"Hips/Lower Body",targetMuscles:["Hips"],instructions:["Lie on front, knees wide."],images:["/exercises/Prone_Frog.webp"]},{id:"glute_stretch",name:"Glute Stretch",category:"Mobility",subcategory:"Hips/Lower Body",targetMuscles:["Glutes"],instructions:["Stretch glutes."],images:["/exercises/Glute_Stretch.webp"]},{id:"childs_pose",name:"Childs Pose",category:"Mobility",subcategory:"Hips/Lower Body",targetMuscles:["Back","Hips"],instructions:["Resting pose."],images:["/exercises/Childs_Pose.webp"]},{id:"pigeon_pose",name:"Pigeon Pose",category:"Mobility",subcategory:"Hips/Lower Body",targetMuscles:["Glutes","Hips"],instructions:["Hip opener."],images:["/exercises/Pigeon_Pose.webp"]}];var wi=_('<div><div class="col set-num svelte-ow8x7m"> </div> <div class="col weight svelte-ow8x7m"><input type="number" placeholder="-" class="svelte-ow8x7m"/></div> <div class="col reps svelte-ow8x7m"><input type="number" placeholder="-" class="svelte-ow8x7m"/></div> <div class="col check svelte-ow8x7m"><button><!></button></div></div>');function Si(R,r){Vt(r,!1);let l=Ve(r,"setNumber",8),b=Ve(r,"set",12);const B=Ss();function W(){b(b().completed=!b().completed,!0),B("change",b()),b().completed&&B("complete")}js();var H=wi();let S;var q=i(H),x=i(q,!0);s(q);var y=a(q,2),T=i(y);O(T),s(y);var M=a(y,2),m=i(M);O(m),s(M);var P=a(M,2),w=i(P);let D;var L=i(w);{var N=C=>{var J=kt("✓");c(C,J)};U(L,C=>{St(b()),gt(()=>b().completed)&&C(N)})}s(w),s(P),s(H),I(()=>{S=Pt(H,1,"set-row svelte-ow8x7m",null,S,{completed:b().completed}),K(x,l()),D=Pt(w,1,"check-btn svelte-ow8x7m",null,D,{checked:b().completed})}),F(T,()=>b().weight,C=>b(b().weight=C,!0)),F(m,()=>b().reps,C=>b(b().reps=C,!0)),Nt("click",w,W),c(R,H),Ut()}var ki=_('<div><span class="dot svelte-1ni79z8"></span> <span class="text"> </span></div>'),xi=_("<button></button>"),Ci=_('<div class="exercise-card svelte-1ni79z8"><div class="header svelte-1ni79z8"><div class="title-group svelte-1ni79z8"><button class="icon-btn info-btn svelte-1ni79z8" aria-label="Exercise Info"><div class="info-icon svelte-1ni79z8">?</div></button> <div><h4 class="svelte-1ni79z8"> </h4> <button class="icon-btn timer-btn svelte-1ni79z8" aria-label="Open Timer" title="Interval Timer">⏱</button> <div class="benchmarks svelte-1ni79z8"></div></div></div> <button class="icon-btn delete-btn svelte-1ni79z8" aria-label="Delete Exercise">🗑️</button></div> <div class="table-header svelte-1ni79z8"><div class="col">Set</div> <div class="col">kg</div> <div class="col">Reps</div> <div class="col">✓</div></div> <div class="sets"></div> <button class="add-set-btn svelte-1ni79z8">+ Add Set</button> <div class="difficulty-footer svelte-1ni79z8"><span class="diff-label svelte-1ni79z8">How did it feel?</span> <div class="diff-circles svelte-1ni79z8"></div></div></div>');function Ti(R,r){Vt(r,!1);let l=Ve(r,"exercise",12),b=Ve(r,"benchmarks",24,()=>({}));const B=Ss();function W(){const Q=l().sets[l().sets.length-1],E={weight:Q?Q.weight:0,reps:Q?Q.reps:0,isWarmup:!1,isFailure:!1,isDropSet:!1,completed:!1};l(l().sets=[...l().sets,E],!0)}const H=["Green","Yellow","Orange","Red"];js();var S=Ci(),q=i(S),x=i(q),y=i(x),T=a(y,2),M=i(T),m=i(M,!0);s(M);var P=a(M,2),w=a(P,2);fe(w,5,()=>H,_e,(Q,E)=>{var j=zt(),Z=Gt(j);{var re=pe=>{var ve=ki();Pt(ve,1,"benchmark-pill svelte-1ni79z8",null,{},{"has-data":!0});var ee=a(i(ve),2),le=i(ee);s(ee),s(ve),I(z=>{Us(ve,`--pill-color: var(--color-${z??""})`),K(le,`${St(b()),e(E),gt(()=>b()[e(E)]?.weight)??""}kg x ${St(b()),e(E),gt(()=>b()[e(E)]?.reps)??""}`)},[()=>(e(E),gt(()=>e(E).toLowerCase()))]),c(pe,ve)};U(Z,pe=>{St(b()),e(E),gt(()=>b()[e(E)])&&pe(re)})}c(Q,j)}),s(w),s(T),s(x);var D=a(x,2);s(q);var L=a(q,4);fe(L,5,()=>(St(l()),gt(()=>l().sets)),_e,(Q,E,j)=>{Si(Q,{setNumber:j+1,get set(){return(St(l()),gt(()=>l().sets))[j]},set set(Z){(St(l()),gt(()=>l().sets))[j]=Z,va(()=>l())},$$events:{complete(Z){As.call(this,r,Z)},change(Z){As.call(this,r,Z)}},$$legacy:!0})}),s(L);var N=a(L,2),C=a(N,2),J=a(i(C),2);fe(J,5,()=>H,_e,(Q,E)=>{var j=xi();let Z;I(re=>{Z=Pt(j,1,"diff-circle svelte-1ni79z8",null,Z,{selected:l().difficulty===e(E)}),Us(j,`--circle-color: var(--color-${re??""})`),Et(j,"aria-label",`Mark as ${e(E)??""}`)},[()=>(e(E),gt(()=>e(E).toLowerCase()))]),Nt("click",j,()=>l(l().difficulty=e(E),!0)),c(Q,j)}),s(J),s(C),s(S),I(()=>K(m,(St(l()),gt(()=>l().name)))),Nt("click",y,()=>B("info",l())),Nt("click",P,()=>B("timer",l())),Nt("click",D,()=>B("delete",l())),Nt("click",N,W),c(R,S),Ut()}const Li=R=>R;function zs(R){const r=R-1;return r*r*r+1}function Ys(R){const r=typeof R=="string"&&R.match(/^\s*(-?[\d.]+)([^\s]*)\s*$/);return r?[parseFloat(r[1]),r[2]||"px"]:[R,"px"]}function Vs(R,{delay:r=0,duration:l=400,easing:b=Li}={}){const B=+getComputedStyle(R).opacity;return{delay:r,duration:l,easing:b,css:W=>`opacity: ${W*B}`}}function ea(R,{delay:r=0,duration:l=400,easing:b=zs,x:B=0,y:W=0,opacity:H=0}={}){const S=getComputedStyle(R),q=+S.opacity,x=S.transform==="none"?"":S.transform,y=q*(1-H),[T,M]=Ys(B),[m,P]=Ys(W);return{delay:r,duration:l,easing:b,css:(w,D)=>`
			transform: ${x} translate(${(1-w)*T}${M}, ${(1-w)*m}${P});
			opacity: ${q-y*D}`}}function Gr(R,{delay:r=0,duration:l=400,easing:b=zs,axis:B="y"}={}){const W=getComputedStyle(R),H=+W.opacity,S=B==="y"?"height":"width",q=parseFloat(W[S]),x=B==="y"?["top","bottom"]:["left","right"],y=x.map(L=>`${L[0].toUpperCase()}${L.slice(1)}`),T=parseFloat(W[`padding${y[0]}`]),M=parseFloat(W[`padding${y[1]}`]),m=parseFloat(W[`margin${y[0]}`]),P=parseFloat(W[`margin${y[1]}`]),w=parseFloat(W[`border${y[0]}Width`]),D=parseFloat(W[`border${y[1]}Width`]);return{delay:r,duration:l,easing:b,css:L=>`overflow: hidden;opacity: ${Math.min(L*20,1)*H};${S}: ${L*q}px;padding-${x[0]}: ${L*T}px;padding-${x[1]}: ${L*M}px;margin-${x[0]}: ${L*m}px;margin-${x[1]}: ${L*P}px;border-${x[0]}-width: ${L*w}px;border-${x[1]}-width: ${L*D}px;min-${S}: 0`}}function ta(R,{delay:r=0,duration:l=400,easing:b=zs,start:B=0,opacity:W=0}={}){const H=getComputedStyle(R),S=+H.opacity,q=H.transform==="none"?"":H.transform,x=1-B,y=S*(1-W);return{delay:r,duration:l,easing:b,css:(T,M)=>`
			transform: ${q} scale(${1-x*M});
			opacity: ${S-y*M}
		`}}function qi(R){const r=R-1;return r*r*r+1}class Os{static audioContext=null;static gainNode=null;static isInitialized=!1;static init(){if(!this.isInitialized)try{(window.AudioContext||window.webkitAudioContext)&&(this.audioContext=new AudioContext,this.gainNode=this.audioContext.createGain(),this.gainNode.connect(this.audioContext.destination),this.isInitialized=!0)}catch(r){console.warn("AudioContext not supported",r)}}static async playChime(){if(this.isInitialized||this.init(),!this.audioContext||!this.gainNode)return;this.audioContext.state==="suspended"&&await this.audioContext.resume();const r=this.audioContext.currentTime,l=this.audioContext.createOscillator();l.type="sine",l.frequency.setValueAtTime(880,r),l.frequency.exponentialRampToValueAtTime(.01,r+1.5);const b=this.audioContext.createGain();b.gain.setValueAtTime(.3,r),b.gain.exponentialRampToValueAtTime(.001,r+1.5),l.connect(b),b.connect(this.gainNode),l.start(r),l.stop(r+1.5);const B=this.audioContext.createOscillator();B.type="triangle",B.frequency.setValueAtTime(1760,r),B.frequency.exponentialRampToValueAtTime(.01,r+1);const W=this.audioContext.createGain();W.gain.setValueAtTime(.1,r),W.gain.exponentialRampToValueAtTime(.001,r+1),B.connect(W),W.connect(this.gainNode),B.start(r),B.stop(r+1)}static vibrate(r=200){typeof navigator<"u"&&navigator.vibrate&&navigator.vibrate(r)}static async playCompletionAlert(){this.vibrate([500,100,500]),await this.playChime()}static async playTick(){if(this.isInitialized||this.init(),!this.audioContext||!this.gainNode)return;this.audioContext.state==="suspended"&&await this.audioContext.resume();const r=this.audioContext.currentTime,l=this.audioContext.createOscillator();l.type="sine",l.frequency.setValueAtTime(600,r);const b=this.audioContext.createGain();b.gain.setValueAtTime(.05,r),b.gain.exponentialRampToValueAtTime(.001,r+.1),l.connect(b),b.connect(this.gainNode),l.start(r),l.stop(r+.1),this.vibrate(50)}}var Mi=_('<div class="setup-form svelte-18i4gcv"><div class="input-group svelte-18i4gcv"><label for="work-duration" class="svelte-18i4gcv">Work</label> <div class="time-adjuster svelte-18i4gcv"><button class="svelte-18i4gcv">−</button> <span class="val svelte-18i4gcv"> </span> <button class="svelte-18i4gcv">+</button></div></div> <div class="input-group svelte-18i4gcv"><label for="rest-duration" class="svelte-18i4gcv">Rest</label> <div class="time-adjuster svelte-18i4gcv"><button class="svelte-18i4gcv">−</button> <span class="val svelte-18i4gcv"> </span> <button class="svelte-18i4gcv">+</button></div></div> <div class="input-group svelte-18i4gcv"><label for="num-sets" class="svelte-18i4gcv">Sets</label> <div class="time-adjuster svelte-18i4gcv"><button class="svelte-18i4gcv">−</button> <span class="val svelte-18i4gcv"> </span> <button class="svelte-18i4gcv">+</button></div></div> <button class="start-btn svelte-18i4gcv">▶ Start Interval</button></div>'),Pi=_('<div class="finished-state svelte-18i4gcv"><div class="check-icon svelte-18i4gcv">✓</div> <h3>Nicely Done!</h3> <button class="reset-btn svelte-18i4gcv">Back to Setup</button></div>'),Ri=_('<button class="ctl-btn pause svelte-18i4gcv">⏸</button>'),Di=_('<button class="ctl-btn play svelte-18i4gcv">▶</button>'),Ni=_('<div class="timer-circle svelte-18i4gcv"><svg viewBox="0 0 100 100" class="ring svelte-18i4gcv"><circle class="track svelte-18i4gcv" cx="50" cy="50" r="45"></circle><circle class="progress svelte-18i4gcv" cx="50" cy="50" r="45" stroke-dasharray="283"></circle></svg> <div class="timer-val svelte-18i4gcv"><div class="phase-label svelte-18i4gcv"> </div> <div class="digits svelte-18i4gcv"> </div></div></div> <div class="controls svelte-18i4gcv"><!> <button class="ctl-btn skip svelte-18i4gcv">⏭</button> <button class="ctl-btn stop svelte-18i4gcv" style="font-size: 1rem; padding: 1rem;">Stop</button></div>',1),Bi=_('<div class="overlay svelte-18i4gcv" role="button" tabindex="0"><div><div class="header svelte-18i4gcv"><span class="title svelte-18i4gcv"><!></span> <button class="close-btn svelte-18i4gcv">✕</button></div> <div class="content svelte-18i4gcv"><!></div></div></div>');function sa(R,r){Vt(r,!0);let l=Ve(r,"visible",15,!1),b=Ve(r,"defaultSets",3,3),B=Ve(r,"associatedExerciseId",7,null),W=Ve(r,"onComplete",3,()=>{}),H=Ve(r,"onClose",3,()=>{}),S=d("SETUP"),q=d("PAUSED"),x=d(30),y=d(60),T=d(3),M=d(1),m=d(30),P=d(null),w=d(null);const D="interval_timer_prefs";let L=null;is(()=>{l()&&(Os.init(),e(S)==="SETUP"&&(N(),b()>0&&t(T,b())))}),ws(()=>(Q(),L=setInterval(z,100),()=>clearInterval(L)));function N(){if(B())try{const $=JSON.parse(localStorage.getItem(D)||"{}"),Y=$[B()]||$.default;Y&&(t(x,Y.work||30,!0),t(y,Y.rest||60,!0))}catch($){console.warn($)}}function C(){try{const $=JSON.parse(localStorage.getItem(D)||"{}"),Y={work:e(x),rest:e(y)};B()&&($[B()]=Y),$.default=Y,localStorage.setItem(D,JSON.stringify($))}catch($){console.error($)}}function J(){if(e(S)==="SETUP")return;const $={phase:e(S),runningState:e(q),remaining:e(m),endTimestamp:e(P),configWork:e(x),configRest:e(y),configSets:e(T),currentSet:e(M),associatedExerciseId:B(),pausedTimeRemaining:e(w),timestamp:Date.now()};localStorage.setItem("active_interval_timer",JSON.stringify($))}function Q(){try{const $=localStorage.getItem("active_interval_timer");if($){const Y=JSON.parse($);Date.now()-Y.timestamp<36e5&&(t(S,Y.phase,!0),t(q,Y.runningState,!0),t(m,Y.remaining,!0),t(P,Y.endTimestamp,!0),t(x,Y.configWork,!0),t(y,Y.configRest,!0),t(T,Y.configSets,!0),t(M,Y.currentSet,!0),B(Y.associatedExerciseId),t(w,Y.pausedTimeRemaining,!0),e(S)!=="SETUP"&&e(S)!=="FINISHED"&&l(!0))}}catch{}}function E(){localStorage.removeItem("active_interval_timer")}function j(){C(),t(S,"WORK"),t(M,1),Z(e(x))}function Z($){t(q,"RUNNING"),t(m,$,!0),t(P,Date.now()+$*1e3),J(),Os.playChime()}function re(){t(q,"PAUSED"),t(w,e(m),!0),t(P,null),J()}function pe(){e(w)&&(t(q,"RUNNING"),t(P,Date.now()+e(w)*1e3),J())}function ve(){le()}function ee(){t(S,"SETUP"),t(q,"PAUSED"),E()}function le(){Os.playCompletionAlert(),e(S)==="WORK"?e(M)>=e(T)?(t(S,"FINISHED"),t(q,"PAUSED"),t(P,null),W()(),E()):(t(S,"REST"),Z(e(y))):e(S)==="REST"&&(pa(M),t(S,"WORK"),Z(e(x)))}function z(){if(!(!l()||e(S)==="SETUP"||e(S)==="FINISHED"||e(q)==="PAUSED")&&e(P)){const $=Date.now(),Y=e(P)-$;t(m,Math.ceil(Y/1e3),!0),e(m)<=0&&(t(m,0),le())}}function ae($){const Y=Math.floor($/60),Ee=$%60;return`${Y}:${Ee.toString().padStart(2,"0")}`}function ce(){(e(S)==="SETUP"||e(S)==="FINISHED")&&ee(),l(!1),H()&&H()()}var ie=zt(),ue=Gt(ie);{var ge=$=>{var Y=Bi();Y.__click=te=>{te.target===te.currentTarget&&ce()},Y.__keydown=te=>{te.key==="Escape"&&ce()};var Ee=i(Y);let st;var mt=i(Ee),nt=i(mt),Rt=i(nt);{var xt=te=>{var he=kt("Timer Setup");c(te,he)},ft=te=>{var he=zt(),Ue=Gt(he);{var Ge=de=>{var xe=kt("Complete");c(de,xe)},Fe=de=>{var xe=kt();I(()=>K(xe,`Set ${e(M)??""} / ${e(T)??""}`)),c(de,xe)};U(Ue,de=>{e(S)==="FINISHED"?de(Ge):de(Fe,!1)},!0)}c(te,he)};U(Rt,te=>{e(S)==="SETUP"?te(xt):te(ft,!1)})}s(nt);var ct=a(nt,2);ct.__click=ce,s(mt);var Bt=a(mt,2),_t=i(Bt);{var qe=te=>{var he=Mi(),Ue=i(he),Ge=a(i(Ue),2),Fe=i(Ge);Fe.__click=()=>t(x,Math.max(5,e(x)-5),!0);var de=a(Fe,2),xe=i(de,!0);s(de);var Ke=a(de,2);Ke.__click=()=>t(x,e(x)+5),s(Ge),s(Ue);var He=a(Ue,2),at=a(i(He),2),ht=i(at);ht.__click=()=>t(y,Math.max(5,e(y)-5),!0);var We=a(ht,2),bt=i(We,!0);s(We);var it=a(We,2);it.__click=()=>t(y,e(y)+5),s(at),s(He);var Ne=a(He,2),Ye=a(i(Ne),2),k=i(Ye);k.__click=()=>t(T,Math.max(1,e(T)-1),!0);var G=a(k,2),n=i(G,!0);s(G);var g=a(G,2);g.__click=()=>t(T,e(T)+1),s(Ye),s(Ne);var A=a(Ne,2);A.__click=j,s(he),I((V,p)=>{K(xe,V),K(bt,p),K(n,e(T))},[()=>ae(e(x)),()=>ae(e(y))]),c(te,he)},De=te=>{var he=zt(),Ue=Gt(he);{var Ge=de=>{var xe=Pi(),Ke=a(i(xe),4);Ke.__click=()=>t(S,"SETUP"),s(xe),c(de,xe)},Fe=de=>{var xe=Ni(),Ke=Gt(xe),He=i(Ke),at=a(i(He));s(He);var ht=a(He,2),We=i(ht),bt=i(We,!0);s(We);var it=a(We,2),Ne=i(it,!0);s(it),s(ht),s(Ke);var Ye=a(Ke,2),k=i(Ye);{var G=V=>{var p=Ri();p.__click=re,c(V,p)},n=V=>{var p=Di();p.__click=pe,c(V,p)};U(k,V=>{e(q)==="RUNNING"?V(G):V(n,!1)})}var g=a(k,2);g.__click=ve;var A=a(g,2);A.__click=ee,s(Ye),I(V=>{Et(at,"stroke-dashoffset",283*(1-e(m)/(e(S)==="WORK"?e(x):e(y)))),K(bt,e(S)),K(Ne,V)},[()=>ae(e(m))]),c(de,xe)};U(Ue,de=>{e(S)==="FINISHED"?de(Ge):de(Fe,!1)},!0)}c(te,he)};U(_t,te=>{e(S)==="SETUP"?te(qe):te(De,!1)})}s(Bt),s(Ee),s(Y),I(()=>st=Pt(Ee,1,"timer-card svelte-18i4gcv",null,st,{work:e(S)==="WORK",rest:e(S)==="REST"})),vs(3,Ee,()=>ta,()=>({start:.96,duration:300,easing:qi})),vs(3,Y,()=>Vs,()=>({duration:250})),c($,Y)};U(ue,$=>{l()&&$(ge)})}c(R,ie),Ut()}rs(["click","keydown"]);var Gi=_("<img/>"),Fi=_('<div class="animation-frame svelte-zbmy0k"></div>'),Ai=_('<div class="visual-placeholder svelte-zbmy0k"><span>No animation available</span></div>'),Oi=_("<li> </li>"),Ei=_('<div class="modal-overlay svelte-zbmy0k" role="button" tabindex="0" aria-label="Close modal"><div class="modal-content svelte-zbmy0k" role="dialog" aria-modal="true" tabindex="-1"><div class="header svelte-zbmy0k"><h3 class="svelte-zbmy0k"> </h3> <span class="category svelte-zbmy0k"> </span> <button class="close-btn svelte-zbmy0k" aria-label="Close">×</button></div> <div class="visual-container svelte-zbmy0k"><!> <div class="muscles svelte-zbmy0k"> </div></div> <div class="instructions svelte-zbmy0k"><h4>Instructions</h4> <ol class="svelte-zbmy0k"></ol></div></div></div>');function Hi(R,r){Vt(r,!1);let l=Ve(r,"exercise",8),b=Ve(r,"visible",8,!1);const B=Ss();let W=_a(0),H;function S(){l().images&&l().images.length>0&&(t(W,0),H=setInterval(()=>{t(W,(e(W)+1)%l().images.length)},800))}function q(){H&&clearInterval(H)}ga(()=>{q()});function x(){B("close")}ma(()=>(St(b()),St(l())),()=>{b()&&l().images?.length?S():q()}),fa(),js();var y=zt(),T=Gt(y);{var M=m=>{var P=Ei(),w=i(P),D=i(w),L=i(D),N=i(L,!0);s(L);var C=a(L,2),J=i(C,!0);s(C);var Q=a(C,2);s(D);var E=a(D,2),j=i(E);{var Z=z=>{var ae=Fi();fe(ae,5,()=>(St(l()),gt(()=>l().images)),_e,(ce,ie,ue)=>{var ge=Gi();let $;I(()=>{Et(ge,"src",`${Ra??""}${e(ie)??""}`),Et(ge,"alt",`${St(l()),gt(()=>l().name)??""} frame ${ue+1}`),$=Pt(ge,1,"svelte-zbmy0k",null,$,{active:ue===e(W)})}),c(ce,ge)}),s(ae),c(z,ae)},re=z=>{var ae=Ai();c(z,ae)};U(j,z=>{St(l()),gt(()=>l().images&&l().images.length>0)?z(Z):z(re,!1)})}var pe=a(j,2),ve=i(pe);s(pe),s(E);var ee=a(E,2),le=a(i(ee),2);fe(le,5,()=>(St(l()),gt(()=>l().instructions)),_e,(z,ae)=>{var ce=Oi(),ie=i(ce,!0);s(ce),I(()=>K(ie,e(ae))),c(z,ce)}),s(le),s(ee),s(w),s(P),I(z=>{K(N,(St(l()),gt(()=>l().name))),K(J,(St(l()),gt(()=>l().category))),K(ve,`Targets: ${z??""}`)},[()=>(St(l()),gt(()=>l().targetMuscles.join(", ")))]),Nt("click",Q,x),vs(3,w,()=>ea,()=>({y:50,duration:300})),Nt("click",w,Qs(function(z){As.call(this,r,z)})),Nt("keydown",w,Qs(function(z){As.call(this,r,z)})),Nt("click",P,x),Nt("keydown",P,z=>z.key==="Escape"&&x()),c(m,P)};U(T,m=>{b()&&m(M)})}c(R,y),Ut()}var Wi=_('<div class="input-group svelte-12q9g58"><label for="delete-confirm" class="svelte-12q9g58">Type <strong> </strong> to confirm:</label> <input type="text" id="delete-confirm" autocomplete="off" class="svelte-12q9g58"/></div>'),Ii=_('<button class="backdrop svelte-12q9g58" aria-label="Close modal"></button> <div class="modal svelte-12q9g58" role="dialog" aria-modal="true"><h3 class="svelte-12q9g58"> </h3> <p class="svelte-12q9g58"> </p> <!> <div class="actions svelte-12q9g58"><button class="btn-cancel svelte-12q9g58">Cancel</button> <button class="btn-delete svelte-12q9g58">Delete</button></div></div>',1);function ji(R,r){Vt(r,!0);let l=Ve(r,"isOpen",3,!1),b=Ve(r,"title",3,"Confirm Delete"),B=Ve(r,"message",3,"Are you sure you want to delete this item? This action cannot be undone."),W=Ve(r,"confirmKeyword",3,"delete"),H=Ve(r,"requireInput",3,!0),S=d(""),q=Mt(()=>!H()||e(S).toLowerCase()===W().toLowerCase());function x(){e(q)&&(r.onConfirm(),t(S,""))}function y(){r.onCancel(),t(S,"")}var T=zt(),M=Gt(T);{var m=P=>{var w=Ii(),D=Gt(w);D.__click=y;var L=a(D,2),N=i(L),C=i(N,!0);s(N);var J=a(N,2),Q=i(J,!0);s(J);var E=a(J,2);{var j=ve=>{var ee=Wi(),le=i(ee),z=a(i(le)),ae=i(z,!0);s(z),Ce(),s(le);var ce=a(le,2);O(ce),s(ee),I(()=>{K(ae,W()),Et(ce,"placeholder",W())}),F(ce,()=>e(S),ie=>t(S,ie)),c(ve,ee)};U(E,ve=>{H()&&ve(j)})}var Z=a(E,2),re=i(Z);re.__click=y;var pe=a(re,2);pe.__click=x,s(Z),s(L),I(()=>{K(C,b()),K(Q,B()),pe.disabled=!e(q)}),vs(3,D,()=>Vs,()=>({duration:200})),vs(3,L,()=>ta,()=>({duration:200,start:.9})),c(P,w)};U(M,P=>{l()&&P(m)})}c(R,T),Ut()}rs(["click"]);var zi=_('<div class="form-header-row" style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 1rem;"><h2 style="margin: 0; font-size: 1.25rem; color: var(--teal-primary);">New Gym Session</h2></div>'),Vi=_("<span>Saved! ✓</span>"),Ui=_("<button><!></button>"),Ki=_("<option> </option>"),Qi=_("<option> </option>"),Ji=_('<div class="filter-row svelte-1w0zsmt"><select class="category-select svelte-1w0zsmt"><option>Select Category...</option><!></select> <select class="subcategory-select svelte-1w0zsmt"><option>Select Subcategory...</option><!></select></div>'),Yi=_('<span class="details svelte-1w0zsmt"> </span>'),Xi=_('<button class="exercise-item-simple svelte-1w0zsmt"><span class="name svelte-1w0zsmt"> </span> <!></button>'),Zi=_('<div class="no-results svelte-1w0zsmt"> </div>'),$i=_('<div class="modal-overlay svelte-1w0zsmt" role="button" tabindex="0" aria-label="Close modal"><div class="picker-modal svelte-1w0zsmt" role="dialog" aria-modal="true" tabindex="-1"><div class="picker-header svelte-1w0zsmt"><h3>Add Exercise</h3> <div class="search-row svelte-1w0zsmt"><input type="text" placeholder="Search exercises..." class="svelte-1w0zsmt"/></div> <!></div> <div class="picker-content svelte-1w0zsmt"><div class="exercise-list-simple svelte-1w0zsmt"><!> <!></div></div></div></div>'),er=_('<div class="gym-session-form svelte-1w0zsmt"><div class="session-meta svelte-1w0zsmt"><!> <input type="text" class="session-name svelte-1w0zsmt" placeholder="Workout Name (e.g. Pull Day)"/> <div class="meta-row svelte-1w0zsmt"><label class="svelte-1w0zsmt">Date <div class="date-time-row svelte-1w0zsmt"><input type="date" class="svelte-1w0zsmt"/> <input type="time" class="svelte-1w0zsmt"/></div></label> <label class="svelte-1w0zsmt">Bodyweight (kg) <input type="number" placeholder="Optional" class="svelte-1w0zsmt"/></label> <label class="svelte-1w0zsmt">Block <select class="svelte-1w0zsmt"><option>Strength</option><option>Power</option><option>Power Endurance</option><option>Muscular Endurance</option></select></label></div></div> <div class="exercises-list"></div> <button class="add-exercise-btn svelte-1w0zsmt">+ Add Exercise</button> <div class="session-notes-container svelte-1w0zsmt"><label for="session-notes" class="svelte-1w0zsmt">Session Notes</label> <textarea id="session-notes" class="session-notes-area svelte-1w0zsmt" placeholder="How did the workout feel? Energy, sleep, stress..." rows="3"></textarea></div> <!> <!> <!> <!> <!></div>');function Fr(R,r){Vt(r,!0);const l=Ss(),b="gym_session_draft";let B=Ve(r,"initialData",3,null),W=Mt(()=>!!B()),H=d(""),S=d(void 0),q=d(Oe([])),x=d(Oe(new Date().toISOString().split("T")[0])),y=d(Oe(new Date().toTimeString().split(" ")[0].slice(0,5))),T=d("Strength"),M=d(null),m=d(Oe([])),P=d("");ws(async()=>{if(B())t(H,B().name,!0),t(S,B().bodyweight,!0),t(q,B().exercises,!0),t(x,B().date,!0),t(y,B().time||"12:00",!0),t(T,B().trainingBlock||"Strength",!0),t(P,B().notes||"",!0),t(pe,!0);else{const G=localStorage.getItem(b);if(G)try{const n=JSON.parse(G);n.sessionName&&t(H,n.sessionName,!0),n.bodyweight&&t(S,n.bodyweight,!0),n.startTime&&t(x,n.startTime,!0),n.time&&t(y,n.time,!0),n.trainingBlock&&t(T,n.trainingBlock,!0),n.exercises&&t(q,n.exercises,!0),n.notes&&t(P,n.notes,!0)}catch(n){console.error("Failed to restore draft",n)}t(pe,!0)}const k=await xa();k.ok&&k.data&&t(m,k.data.map(G=>({...G,activityType:"gym_session",syncStatus:"synced"})),!0)}),is(()=>{const k=e(m).filter(G=>(G.trainingBlock||"Strength")===e(T)&&G.date<e(x));k.sort((G,n)=>new Date(n.date).getTime()-new Date(G.date).getTime()),t(M,k.length>0?k[0]:null,!0)});function w(k){const G={Green:null,Yellow:null,Orange:null,Red:null},n=[...e(m)].sort((g,A)=>new Date(A.date).getTime()-new Date(g.date).getTime());for(const g of n){if(G.Green&&G.Yellow&&G.Orange&&G.Red)break;const A=g.exercises.find(V=>V.name===k);if(A&&A.difficulty&&!G[A.difficulty]){let V=null;for(const p of A.sets)(!V||p.weight>V.weight||p.weight===V.weight&&p.reps>V.reps)&&(V=p);V&&(G[A.difficulty]={weight:V.weight,reps:V.reps})}}return G}let D=d(!1),L=d(""),N=d(""),C=d(""),J=d(!1),Q=d(null),E=d(null),j=d(!1),Z=d(null),re=d(3),pe=d(!1);is(()=>{if(e(pe)&&!e(W)&&typeof localStorage<"u"){const k={sessionName:e(H),bodyweight:e(S),startTime:e(x),time:e(y),trainingBlock:e(T),exercises:e(q),notes:e(P)};localStorage.setItem(b,JSON.stringify(k))}});let ve=Mt(()=>Fs.filter(k=>{if(e(L))return k.name.toLowerCase().includes(e(L).toLowerCase())||k.targetMuscles.some(g=>g.toLowerCase().includes(e(L).toLowerCase()));const G=e(N)?k.category===e(N):!0,n=e(C)?k.subcategory===e(C):!0;return G&&n}));const ee=Array.from(new Set(Fs.map(k=>k.category))).sort();let le=Mt(()=>e(N)?Array.from(new Set(Fs.filter(k=>k.category===e(N)).map(k=>k.subcategory))).sort():[]);function z(){t(C,"")}function ae(k){const G={id:crypto.randomUUID(),name:k.name,sets:[{weight:0,reps:0,isWarmup:!1,isFailure:!1,isDropSet:!1,completed:!1}]};t(q,[...e(q),G],!0),t(D,!1),t(L,""),t(N,""),t(C,"")}function ce(k){const G=k.detail;t(Z,G.id,!0),t(re,G.sets.length,!0),t(J,!0)}function ie(){}async function ue(){if(e(q).length===0)return;const k={date:e(x),time:e(y),name:e(H)||"Gym Workout",bodyweight:e(S),trainingBlock:e(T),exercises:e(q),notes:e(P)},G=e(W)&&B()?await Ca(B().id,k):await Ta(k);G.ok?(t(j,!0),e(W)||localStorage.removeItem(b),r.onSaved?r.onSaved():setTimeout(()=>{t(j,!1),l("save")},1500)):console.error("Failed to save gym session",G.error)}var ge=er(),$=i(ge),Y=i($);{var Ee=k=>{var G=zi();c(k,G)};U(Y,k=>{e(W)||k(Ee)})}var st=a(Y,2);O(st);var mt=a(st,2),nt=i(mt),Rt=a(i(nt)),xt=i(Rt);O(xt);var ft=a(xt,2);O(ft),s(Rt),s(nt);var ct=a(nt,2),Bt=a(i(ct));O(Bt),s(ct);var _t=a(ct,2),qe=a(i(_t)),De=i(qe);De.value=De.__value="Strength";var te=a(De);te.value=te.__value="Power";var he=a(te);he.value=he.__value="Power Endurance";var Ue=a(he);Ue.value=Ue.__value="Muscular Endurance",s(qe),s(_t),s(mt),s($);var Ge=a($,2);fe(Ge,21,()=>e(q),_e,(k,G,n)=>{{let g=Mt(()=>w(e(G).name));Ti(k,{get exercise(){return e(G)},get benchmarks(){return e(g)},$$events:{complete:ie,timer:ce,delete:()=>{t(E,n,!0)},info:()=>{const A=Fs.find(V=>V.name===e(G).name);A&&t(Q,A,!0)}}})}}),s(Ge);var Fe=a(Ge,2);Fe.__click=()=>t(D,!0);var de=a(Fe,2),xe=a(i(de),2);ds(xe),s(de);var Ke=a(de,2);{var He=k=>{var G=Ui();let n;G.__click=ue;var g=i(G);{var A=p=>{var h=Vi();c(p,h)},V=p=>{var h=kt("Finish Workout");c(p,h)};U(g,p=>{e(j)?p(A):p(V,!1)})}s(G),I(()=>{n=Pt(G,1,"save-btn svelte-1w0zsmt",null,n,{success:e(j)}),G.disabled=e(j)}),c(k,G)};U(Ke,k=>{e(q).length>0&&k(He)})}var at=a(Ke,2);{var ht=k=>{var G=$i();G.__click=()=>t(D,!1),G.__keydown=be=>be.key==="Escape"&&t(D,!1);var n=i(G);n.__click=be=>be.stopPropagation(),n.__keydown=be=>be.stopPropagation();var g=i(n),A=a(i(g),2),V=i(A);O(V),s(A);var p=a(A,2);{var h=be=>{var Be=Ji(),ye=i(Be);ye.__change=z;var we=i(ye);we.value=we.__value="";var Ct=a(we);fe(Ct,17,()=>ee,_e,(je,Se)=>{var Me=Ki(),yt=i(Me,!0);s(Me);var vt={};I(()=>{K(yt,e(Se)),vt!==(vt=e(Se))&&(Me.value=(Me.__value=e(Se))??"")}),c(je,Me)}),s(ye);var ut=a(ye,2),Tt=i(ut);Tt.value=Tt.__value="";var dt=a(Tt);fe(dt,17,()=>e(le),_e,(je,Se)=>{var Me=Qi(),yt=i(Me,!0);s(Me);var vt={};I(()=>{K(yt,e(Se)),vt!==(vt=e(Se))&&(Me.value=(Me.__value=e(Se))??"")}),c(je,Me)}),s(ut),s(Be),I(()=>ut.disabled=!e(N)),ot(ye,()=>e(N),je=>t(N,je)),ot(ut,()=>e(C),je=>t(C,je)),c(be,Be)};U(p,be=>{e(L)||be(h)})}s(g);var se=a(g,2),Ie=i(se),rt=i(Ie);fe(rt,17,()=>e(ve),_e,(be,Be)=>{var ye=Xi();ye.__click=()=>ae(e(Be));var we=i(ye),Ct=i(we,!0);s(we);var ut=a(we,2);{var Tt=dt=>{var je=Yi(),Se=i(je);s(je),I(()=>K(Se,`${e(Be).category??""} - ${e(Be).subcategory??""}`)),c(dt,je)};U(ut,dt=>{e(L)&&dt(Tt)})}s(ye),I(()=>K(Ct,e(Be).name)),c(be,ye)});var Xe=a(rt,2);{var Ze=be=>{var Be=Zi(),ye=i(Be,!0);s(Be),I(()=>K(ye,e(L)?"No exercises found":"Select a category and subcategory to view exercises.")),c(be,Be)};U(Xe,be=>{e(ve).length===0&&be(Ze)})}s(Ie),s(se),s(n),s(G),F(V,()=>e(L),be=>t(L,be)),vs(3,n,()=>ea,()=>({y:100,duration:300})),vs(3,G,()=>Vs),c(k,G)};U(at,k=>{e(D)&&k(ht)})}var We=a(at,2);{var bt=k=>{Hi(k,{get exercise(){return e(Q)},visible:!0,$$events:{close:()=>t(Q,null)}})};U(We,k=>{e(Q)&&k(bt)})}var it=a(We,2);sa(it,{get defaultSets(){return e(re)},get associatedExerciseId(){return e(Z)},get visible(){return e(J)},set visible(k){t(J,k,!0)}});var Ne=a(it,2);{var Ye=k=>{ji(k,{isOpen:!0,title:"Delete Exercise",get message(){return`Are you sure you want to delete ${e(q)[e(E)].name??""}?`},requireInput:!1,onConfirm:()=>{e(E)!==null&&(t(q,e(q).filter((G,n)=>n!==e(E)),!0),t(E,null))},onCancel:()=>t(E,null)})};U(Ne,k=>{e(E)!==null&&k(Ye)})}s(ge),F(st,()=>e(H),k=>t(H,k)),F(xt,()=>e(x),k=>t(x,k)),F(ft,()=>e(y),k=>t(y,k)),F(Bt,()=>e(S),k=>t(S,k)),ot(qe,()=>e(T),k=>t(T,k)),F(xe,()=>e(P),k=>t(P,k)),c(R,ge),Ut()}rs(["click","keydown","change"]);var tr=_('<h3 class="svelte-1m63nqt">🤏 Fingerboarding</h3>'),sr=_("<option> </option>"),ar=_("<option> </option>"),ir=_('<button class="remove-set-btn svelte-1m63nqt">✕</button>'),rr=_('<div class="set-row svelte-1m63nqt"><div class="input-wrap svelte-1m63nqt"><label class="svelte-1m63nqt">Weight</label> <input type="number" placeholder="0" class="svelte-1m63nqt"/></div> <div class="input-wrap svelte-1m63nqt"><label class="svelte-1m63nqt">Reps/Secs</label> <input type="number" placeholder="1" class="svelte-1m63nqt"/></div> <!></div>'),lr=_('<div class="exercise-card svelte-1m63nqt"><div class="card-header svelte-1m63nqt"><div class="header-inputs svelte-1m63nqt"><select class="svelte-1m63nqt"></select> <select class="svelte-1m63nqt"></select></div> <button class="remove-card-btn svelte-1m63nqt" title="Remove Exercise">✕</button></div> <div class="sets-list svelte-1m63nqt"><!> <button class="add-set-btn svelte-1m63nqt">+ Add Set</button> <button class="rest-btn svelte-1m63nqt" title="Interval Timer">⏱ Timer</button></div> <div class="card-footer svelte-1m63nqt"><div class="meta-input svelte-1m63nqt"><label class="svelte-1m63nqt">Total Sets</label> <input type="number" readonly="" disabled class="svelte-1m63nqt"/></div> <div class="notes-input svelte-1m63nqt"><label class="svelte-1m63nqt">Notes</label> <input type="text" placeholder="Notes..." class="svelte-1m63nqt"/></div></div></div>'),or=_("<div> </div>"),nr=_('<div class="form-content svelte-1m63nqt"><div class="header-row svelte-1m63nqt"><div style="flex: 1; display: flex; justify-content: space-between; align-items: center;"><!></div> <button class="add-row-btn svelte-1m63nqt">+ Add Exercise</button></div> <div class="form-group date-group svelte-1m63nqt"><label for="date">Date</label> <div class="date-time-row svelte-1m63nqt"><input type="date" id="date" class="svelte-1m63nqt"/> <input type="time" id="time" class="svelte-1m63nqt"/></div></div> <div class="cards-container svelte-1m63nqt"></div> <div class="load-section svelte-1m63nqt"><h4 class="svelte-1m63nqt">Load Metrics</h4> <div class="load-metrics svelte-1m63nqt"><div class="load-item svelte-1m63nqt"><label for="finger-load" class="svelte-1m63nqt">Finger</label> <input type="number" id="finger-load" min="1" max="5" class="svelte-1m63nqt"/> <span class="load-scale svelte-1m63nqt">/ 5</span></div> <div class="load-item svelte-1m63nqt"><label for="shoulder-load" class="svelte-1m63nqt">Shoulder</label> <input type="number" id="shoulder-load" min="1" max="5" class="svelte-1m63nqt"/> <span class="load-scale svelte-1m63nqt">/ 5</span></div> <div class="load-item svelte-1m63nqt"><label for="forearm-load" class="svelte-1m63nqt">Forearm</label> <input type="number" id="forearm-load" min="1" max="5" class="svelte-1m63nqt"/> <span class="load-scale svelte-1m63nqt">/ 5</span></div></div> <h4 class="mt-4 svelte-1m63nqt">Grip Metrics</h4> <div class="load-metrics svelte-1m63nqt"><div class="load-item svelte-1m63nqt"><label for="open-grip" class="svelte-1m63nqt">Open</label> <input type="number" id="open-grip" min="1" max="5" class="svelte-1m63nqt"/> <span class="load-scale svelte-1m63nqt">/ 5</span></div> <div class="load-item svelte-1m63nqt"><label for="crimp-grip" class="svelte-1m63nqt">Crimp</label> <input type="number" id="crimp-grip" min="1" max="5" class="svelte-1m63nqt"/> <span class="load-scale svelte-1m63nqt">/ 5</span></div> <div class="load-item svelte-1m63nqt"><label for="pinch-grip" class="svelte-1m63nqt">Pinch</label> <input type="number" id="pinch-grip" min="1" max="5" class="svelte-1m63nqt"/> <span class="load-scale svelte-1m63nqt">/ 5</span></div> <div class="load-item svelte-1m63nqt"><label for="sloper-grip" class="svelte-1m63nqt">Sloper</label> <input type="number" id="sloper-grip" min="1" max="5" class="svelte-1m63nqt"/> <span class="load-scale svelte-1m63nqt">/ 5</span></div> <div class="load-item svelte-1m63nqt"><label for="jug-grip" class="svelte-1m63nqt">Jug</label> <input type="number" id="jug-grip" min="1" max="5" class="svelte-1m63nqt"/> <span class="load-scale svelte-1m63nqt">/ 5</span></div></div></div> <div class="form-group notes-section svelte-1m63nqt"><label for="session-notes">Session Notes</label> <textarea id="session-notes" placeholder="How did the session feel? Energy levels, mood, etc." rows="3" class="session-notes-area svelte-1m63nqt"></textarea></div> <div class="submit-section"><!> <button type="button" class="submit-btn svelte-1m63nqt"><!></button></div> <!></div>');function Ar(R,r){Vt(r,!0),Ss();let l=Ve(r,"initialData",3,null),b=Mt(()=>!!l());const B=["Max hangs","Recruitment pulls","Max pick-ups"],W=["Full-crimp","Half-crimp","Three finger drag","Pinch","Open hand","Sloper"];let H=d(Oe(new Date().toISOString().split("T")[0])),S=d(Oe(new Date().toTimeString().split(" ")[0].slice(0,5))),q=d(Oe([])),x=d(3),y=d(3),T=d(3),M=d(3),m=d(3),P=d(3),w=d(3),D=d(3),L=d(""),N=d(!1),C=d(null),J=d(3);function Q(p){t(C,p.id,!0),t(J,p.sets,!0),t(N,!0)}function E(){t(q,[...e(q),{id:crypto.randomUUID(),name:B[0],gripType:W[1],sets:1,details:[{weight:0,reps:5}],notes:""}],!0)}const j="fingerboard_session_draft";let Z=d(!1);ws(()=>{if(l())t(H,l().date,!0),t(S,l().time||"12:00",!0),t(q,l().exercises,!0),t(x,l().fingerLoad||3,!0),t(y,l().shoulderLoad||3,!0),t(T,l().forearmLoad||3,!0),t(M,l().openGrip||3,!0),t(m,l().crimpGrip||3,!0),t(P,l().pinchGrip||3,!0),t(w,l().sloperGrip||3,!0),t(D,l().jugGrip||3,!0),t(L,l().notes||"",!0),t(Z,!0);else{const p=localStorage.getItem(j);if(p)try{const h=JSON.parse(p);h.time&&t(S,h.time,!0),h.exercises&&Array.isArray(h.exercises)&&t(q,h.exercises,!0),h.fingerLoad&&t(x,h.fingerLoad,!0),h.shoulderLoad&&t(y,h.shoulderLoad,!0),h.forearmLoad&&t(T,h.forearmLoad,!0),h.openGrip&&t(M,h.openGrip,!0),h.crimpGrip&&t(m,h.crimpGrip,!0),h.pinchGrip&&t(P,h.pinchGrip,!0),h.sloperGrip&&t(w,h.sloperGrip,!0),h.jugGrip&&t(D,h.jugGrip,!0),h.notes&&t(L,h.notes,!0)}catch(h){console.error("Failed to restore draft",h)}e(q).length===0&&E(),t(Z,!0)}}),is(()=>{if(!e(Z)||e(b))return;const p={date:e(H),time:e(S),exercises:e(q),fingerLoad:e(x),shoulderLoad:e(y),forearmLoad:e(T),openGrip:e(M),crimpGrip:e(m),pinchGrip:e(P),sloperGrip:e(w),jugGrip:e(D),notes:e(L)};localStorage.setItem(j,JSON.stringify(p))});function re(p){t(q,e(q).filter((h,se)=>se!==p),!0)}function pe(p){const h=e(q)[p],se=h.details[h.details.length-1];h.details=[...h.details,{...se}],h.sets=h.details.length}function ve(p,h){const se=e(q)[p];se.details.length>1&&(se.details=se.details.filter((Ie,rt)=>rt!==h),se.sets=se.details.length)}let ee=d("idle"),le=d("");async function z(){t(ee,"saving");try{const p={date:e(H),time:e(S),location:"N/A",exercises:JSON.parse(JSON.stringify(e(q))),fingerLoad:e(x),shoulderLoad:e(y),forearmLoad:e(T),openGrip:e(M),crimpGrip:e(m),pinchGrip:e(P),sloperGrip:e(w),jugGrip:e(D),notes:e(L)};let h;e(b)&&l()?h=await La(l().id,p):h=await qa(p),h.ok?(t(ee,"success"),t(le,"Session saved!"),e(b)||localStorage.removeItem(j),r.onSaved?r.onSaved():(window.dispatchEvent(new CustomEvent("session-saved")),setTimeout(()=>{ae()},2e3))):(t(ee,"error"),t(le,"Failed to save: "+(h.error||"Unknown error")))}catch(p){t(ee,"error"),t(le,"Failed to save session"),console.error("Save error:",p)}}function ae(){t(H,new Date().toISOString().split("T")[0],!0),t(S,new Date().toTimeString().split(" ")[0].slice(0,5),!0),t(q,[],!0),E(),t(x,3),t(y,3),t(T,3),t(M,3),t(m,3),t(P,3),t(w,3),t(D,3),t(L,""),t(ee,"idle"),t(le,"")}var ce=nr(),ie=i(ce),ue=i(ie),ge=i(ue);{var $=p=>{var h=tr();c(p,h)};U(ge,p=>{e(b)||p($)})}s(ue);var Y=a(ue,2);Y.__click=E,s(ie);var Ee=a(ie,2),st=a(i(Ee),2),mt=i(st);O(mt);var nt=a(mt,2);O(nt),s(st),s(Ee);var Rt=a(Ee,2);fe(Rt,21,()=>e(q),_e,(p,h,se)=>{var Ie=lr(),rt=i(Ie),Xe=i(rt),Ze=i(Xe);fe(Ze,21,()=>B,_e,($e,lt)=>{var Te=sr(),Lt=i(Te,!0);s(Te);var wt={};I(()=>{K(Lt,e(lt)),wt!==(wt=e(lt))&&(Te.value=(Te.__value=e(lt))??"")}),c($e,Te)}),s(Ze);var be=a(Ze,2);fe(be,21,()=>W,_e,($e,lt)=>{var Te=ar(),Lt=i(Te,!0);s(Te);var wt={};I(()=>{K(Lt,e(lt)),wt!==(wt=e(lt))&&(Te.value=(Te.__value=e(lt))??"")}),c($e,Te)}),s(be),s(Xe);var Be=a(Xe,2);Be.__click=()=>re(se),s(rt);var ye=a(rt,2),we=i(ye);fe(we,17,()=>e(h).details,_e,($e,lt,Te)=>{var Lt=rr(),wt=i(Lt),Ht=i(wt);Et(Ht,"for",`weight-${se}-${Te}`);var Pe=a(Ht,2);O(Pe),Et(Pe,"id",`weight-${se}-${Te}`),s(wt);var Qe=a(wt,2),qt=i(Qe);Et(qt,"for",`reps-${se}-${Te}`);var Ft=a(qt,2);O(Ft),Et(Ft,"id",`reps-${se}-${Te}`),s(Qe);var Kt=a(Qe,2);{var Xt=At=>{var Zt=ir();Zt.__click=()=>ve(se,Te),c(At,Zt)};U(Kt,At=>{e(h).details.length>1&&At(Xt)})}s(Lt),F(Pe,()=>e(lt).weight,At=>e(lt).weight=At),F(Ft,()=>e(lt).reps,At=>e(lt).reps=At),c($e,Lt)});var Ct=a(we,2);Ct.__click=()=>pe(se);var ut=a(Ct,2);ut.__click=()=>Q(e(h)),s(ye);var Tt=a(ye,2),dt=i(Tt),je=i(dt);Et(je,"for",`total-sets-${se}`);var Se=a(je,2);O(Se),Et(Se,"id",`total-sets-${se}`),s(dt);var Me=a(dt,2),yt=i(Me);Et(yt,"for",`notes-${se}`);var vt=a(yt,2);O(vt),Et(vt,"id",`notes-${se}`),s(Me),s(Tt),s(Ie),I(()=>ba(Se,e(h).sets)),ot(Ze,()=>e(h).name,$e=>e(h).name=$e),ot(be,()=>e(h).gripType,$e=>e(h).gripType=$e),F(vt,()=>e(h).notes,$e=>e(h).notes=$e),c(p,Ie)}),s(Rt);var xt=a(Rt,2),ft=a(i(xt),2),ct=i(ft),Bt=a(i(ct),2);O(Bt),Ce(2),s(ct);var _t=a(ct,2),qe=a(i(_t),2);O(qe),Ce(2),s(_t);var De=a(_t,2),te=a(i(De),2);O(te),Ce(2),s(De),s(ft);var he=a(ft,4),Ue=i(he),Ge=a(i(Ue),2);O(Ge),Ce(2),s(Ue);var Fe=a(Ue,2),de=a(i(Fe),2);O(de),Ce(2),s(Fe);var xe=a(Fe,2),Ke=a(i(xe),2);O(Ke),Ce(2),s(xe);var He=a(xe,2),at=a(i(He),2);O(at),Ce(2),s(He);var ht=a(He,2),We=a(i(ht),2);O(We),Ce(2),s(ht),s(he),s(xt);var bt=a(xt,2),it=a(i(bt),2);ds(it),s(bt);var Ne=a(bt,2),Ye=i(Ne);{var k=p=>{var h=or();let se;var Ie=i(h,!0);s(h),I(()=>{se=Pt(h,1,"save-message svelte-1m63nqt",null,se,{success:e(ee)==="success",error:e(ee)==="error"}),K(Ie,e(le))}),c(p,h)};U(Ye,p=>{e(le)&&p(k)})}var G=a(Ye,2);G.__click=z;var n=i(G);{var g=p=>{var h=kt("Saving...");c(p,h)},A=p=>{var h=zt(),se=Gt(h);{var Ie=Xe=>{var Ze=kt("✓ Saved!");c(Xe,Ze)},rt=Xe=>{var Ze=kt("Save Session");c(Xe,Ze)};U(se,Xe=>{e(ee)==="success"?Xe(Ie):Xe(rt,!1)},!0)}c(p,h)};U(n,p=>{e(ee)==="saving"?p(g):p(A,!1)})}s(G),s(Ne);var V=a(Ne,2);sa(V,{get defaultSets(){return e(J)},get associatedExerciseId(){return e(C)},get visible(){return e(N)},set visible(p){t(N,p,!0)}}),s(ce),I(()=>G.disabled=e(ee)==="saving"),F(mt,()=>e(H),p=>t(H,p)),F(nt,()=>e(S),p=>t(S,p)),F(Bt,()=>e(x),p=>t(x,p)),F(qe,()=>e(y),p=>t(y,p)),F(te,()=>e(T),p=>t(T,p)),F(Ge,()=>e(M),p=>t(M,p)),F(de,()=>e(m),p=>t(m,p)),F(Ke,()=>e(P),p=>t(P,p)),F(at,()=>e(w),p=>t(w,p)),F(We,()=>e(D),p=>t(D,p)),F(it,()=>e(L),p=>t(L,p)),c(R,ce),Ut()}rs(["click"]);var cr=_('<h3 style="margin: 0; color: var(--teal-secondary);" class="svelte-1fje4dh">🏆 Competition</h3>'),ur=_("<option> </option>"),dr=_('<input type="text" placeholder="Enter venue name" class="mt-2 svelte-1fje4dh"/>'),vr=_("<option> </option>"),pr=_("<option> </option>"),gr=_('<input type="text" placeholder="Round name" class="mt-2 svelte-1fje4dh"/>'),mr=_('<div class="result-mode-content svelte-1fje4dh"><div class="form-group svelte-1fje4dh"><label for="position" class="svelte-1fje4dh">Final Position</label> <input type="number" id="position" placeholder="#" class="large-input svelte-1fje4dh"/></div></div>'),fr=_("<option> </option>"),_r=_('<input type="number" min="1" class="svelte-1fje4dh"/>'),hr=_('<span class="flash-dash">-</span>'),br=_('<tr><td class="col-name svelte-1fje4dh"><input type="text" class="svelte-1fje4dh"/></td><td class="col-status svelte-1fje4dh"><select class="svelte-1fje4dh"></select></td><td class="col-attempt svelte-1fje4dh"><!></td><td class="col-notes svelte-1fje4dh"><input type="text" placeholder="..." class="svelte-1fje4dh"/></td><td class="col-action svelte-1fje4dh"><button class="svelte-1fje4dh">✕</button></td></tr>'),yr=_('<div class="load-metrics-compact svelte-1fje4dh"><div class="metric svelte-1fje4dh"><label for="finger">Finger Load</label> <input type="number" id="finger" min="0" max="5" step="0.5" class="svelte-1fje4dh"/></div> <div class="metric svelte-1fje4dh"><label for="shoulder">Shoulder Load</label> <input type="number" id="shoulder" min="0" max="5" step="0.5" class="svelte-1fje4dh"/></div> <div class="metric svelte-1fje4dh"><label for="forearm">Forearm Load</label> <input type="number" id="forearm" min="0" max="5" step="0.5" class="svelte-1fje4dh"/></div></div> <div class="climbs-table-container svelte-1fje4dh"><div class="section-header svelte-1fje4dh"><h4 class="svelte-1fje4dh">Boulders / Routes</h4></div> <table class="climbs-table svelte-1fje4dh"><thead><tr><th class="svelte-1fje4dh">#</th><th class="svelte-1fje4dh">Result</th><th class="svelte-1fje4dh">Att.</th><th class="svelte-1fje4dh">Notes</th><th class="svelte-1fje4dh"></th></tr></thead><tbody></tbody></table> <button class="add-row-btn svelte-1fje4dh">+ Add Row</button></div>',1),wr=_("<div> </div>"),Sr=_('<div class="form-content svelte-1fje4dh"><div style="flex: 1; display: flex; justify-content: space-between; align-items: center; margin-bottom: 1.5rem;"><!></div> <div class="form-grid svelte-1fje4dh"><div class="form-group svelte-1fje4dh"><label for="date" class="svelte-1fje4dh">Date</label> <div class="date-time-row svelte-1fje4dh"><input type="date" id="date" class="svelte-1fje4dh"/> <input type="time" id="time" class="svelte-1fje4dh"/></div></div> <div class="form-group svelte-1fje4dh"><label for="venue" class="svelte-1fje4dh">Venue</label> <select id="venue" class="svelte-1fje4dh"><option disabled>Select venue...</option><!></select> <!></div></div> <div class="form-group mb-4 svelte-1fje4dh"><label for="type" class="svelte-1fje4dh">Type</label> <select id="type" class="svelte-1fje4dh"></select></div> <div class="form-group mb-4 svelte-1fje4dh"><label for="session-notes" class="svelte-1fje4dh">Session Notes</label> <textarea id="session-notes" placeholder="How did the comp go? Strategy, mindset, etc." rows="3" class="svelte-1fje4dh"></textarea></div> <div class="round-section svelte-1fje4dh"><div class="form-group svelte-1fje4dh"><label for="round" class="svelte-1fje4dh">Round</label> <select id="round" class="svelte-1fje4dh"></select> <!></div> <!></div> <div class="submit-section"><!> <button type="button" class="submit-btn svelte-1fje4dh"><!></button></div></div>');function Or(R,r){Vt(r,!0),Ss();let l=Ve(r,"initialData",3,null),b=Mt(()=>!!l());const B=["Flashpoint Bristol","Rockstar Techno","Rockstar Unit 3","Rockstar Unit 5","Bloc","TCA","Other"],W=["Bouldering","Lead","Speed"],H=["Qualifiers","Semi-Finals","Finals","Result","Other"],S=["Flash","Top","Zone","Attempt"];let q=d(Oe(new Date().toISOString().split("T")[0])),x=d(Oe(new Date().toTimeString().split(" ")[0].slice(0,5))),y=d(""),T=d(""),M=d("Bouldering"),m=d(4),P=d(4),w=d(4),D=d("Qualifiers"),L=d(""),N=d(null),C=d(Oe([{name:"#1",status:"Flash",attemptCount:1,notes:""}])),J=d("");const Q="competition_session_draft";let E=d(!1);ws(()=>{if(l()){if(t(q,l().date,!0),t(x,l().time||"12:00",!0),t(M,l().type||"Bouldering",!0),t(J,l().notes||"",!0),B.includes(l().venue)?t(y,l().venue,!0):(t(y,"Other"),t(T,l().venue,!0)),t(m,l().fingerLoad??4,!0),t(P,l().shoulderLoad??4,!0),t(w,l().forearmLoad??4,!0),l().rounds&&l().rounds.length>0){const n=l().rounds[0];H.includes(n.name)?t(D,n.name,!0):(t(D,"Other"),t(L,n.name,!0)),t(N,n.position??null,!0),n.climbs&&n.climbs.length>0&&t(C,n.climbs,!0)}t(E,!0)}else{const n=localStorage.getItem(Q);if(n)try{const g=JSON.parse(n);g.venue&&t(y,g.venue,!0),g.time&&t(x,g.time,!0),g.customVenue&&t(T,g.customVenue,!0),g.type&&t(M,g.type,!0),g.fingerLoad&&t(m,g.fingerLoad,!0),g.shoulderLoad&&t(P,g.shoulderLoad,!0),g.forearmLoad&&t(w,g.forearmLoad,!0),g.roundName&&t(D,g.roundName,!0),g.customRoundName&&t(L,g.customRoundName,!0),g.finalPosition&&t(N,g.finalPosition,!0),g.climbs&&t(C,g.climbs,!0),g.notes&&t(J,g.notes,!0)}catch(g){console.error("Failed to restore draft",g)}t(E,!0)}}),is(()=>{if(!e(E)||e(b))return;const n={date:e(q),time:e(x),venue:e(y),customVenue:e(T),type:e(M),fingerLoad:e(m),shoulderLoad:e(P),forearmLoad:e(w),roundName:e(D),customRoundName:e(L),finalPosition:e(N),climbs:e(C),notes:e(J)};localStorage.setItem(Q,JSON.stringify(n))});let j=Mt(()=>e(D)==="Result"),Z=Mt(()=>e(y)==="Other"),re=Mt(()=>e(D)==="Other"),pe=Mt(()=>e(D)==="Other"?e(L):e(D));function ve(){const n=e(C).length+1;t(C,[...e(C),{name:`#${n}`,status:"Flash",attemptCount:1,notes:""}],!0)}function ee(n){e(C).length>1?t(C,e(C).filter((g,A)=>A!==n),!0):e(C)[0]={name:"#1",status:"Flash",attemptCount:1,notes:""}}function le(n,g){e(C)[n].status=g,g==="Flash"&&(e(C)[n].attemptCount=1)}let z=d("idle"),ae=d("");async function ce(){if(!e(y)||e(y)==="Other"&&!e(T)){t(z,"error"),t(ae,"Please specify a venue");return}t(z,"saving");try{const n={name:e(pe),position:e(j)?e(N):void 0,climbs:e(j)?void 0:JSON.parse(JSON.stringify(e(C)))},g={date:e(q),time:e(x),venue:e(y)==="Other"?e(T):e(y),customVenue:e(y)==="Other"?e(T):void 0,type:e(M),fingerLoad:e(j)?void 0:e(m),shoulderLoad:e(j)?void 0:e(P),forearmLoad:e(j)?void 0:e(w),rounds:[n],notes:e(J)};let A;e(b)&&l()?A=await Ma(l().id,g):A=await Pa(g),A.ok?(t(z,"success"),t(ae,"Competition saved!"),e(b)||localStorage.removeItem(Q),r.onSaved?r.onSaved():(window.dispatchEvent(new CustomEvent("session-saved")),setTimeout(()=>{ie()},2e3))):(t(z,"error"),t(ae,"Failed to save: "+(A.error||"Unknown error")))}catch(n){t(z,"error"),t(ae,"Failed to save session"),console.error("Save error:",n)}}function ie(){t(q,new Date().toISOString().split("T")[0],!0),t(x,new Date().toTimeString().split(" ")[0].slice(0,5),!0),t(y,""),t(T,""),t(N,null),t(C,[{name:"#1",status:"Flash",attemptCount:1,notes:""}],!0),t(J,""),t(z,"idle"),t(ae,"")}var ue=Sr(),ge=i(ue),$=i(ge);{var Y=n=>{var g=cr();c(n,g)};U($,n=>{e(b)||n(Y)})}s(ge);var Ee=a(ge,2),st=i(Ee),mt=a(i(st),2),nt=i(mt);O(nt);var Rt=a(nt,2);O(Rt),s(mt),s(st);var xt=a(st,2),ft=a(i(xt),2),ct=i(ft);ct.value=ct.__value="";var Bt=a(ct);fe(Bt,17,()=>B,_e,(n,g)=>{var A=ur(),V=i(A,!0);s(A);var p={};I(()=>{K(V,e(g)),p!==(p=e(g))&&(A.value=(A.__value=e(g))??"")}),c(n,A)}),s(ft);var _t=a(ft,2);{var qe=n=>{var g=dr();O(g),F(g,()=>e(T),A=>t(T,A)),c(n,g)};U(_t,n=>{e(Z)&&n(qe)})}s(xt),s(Ee);var De=a(Ee,2),te=a(i(De),2);fe(te,21,()=>W,_e,(n,g)=>{var A=vr(),V=i(A,!0);s(A);var p={};I(()=>{K(V,e(g)),p!==(p=e(g))&&(A.value=(A.__value=e(g))??"")}),c(n,A)}),s(te),s(De);var he=a(De,2),Ue=a(i(he),2);ds(Ue),s(he);var Ge=a(he,2),Fe=i(Ge),de=a(i(Fe),2);fe(de,21,()=>H,_e,(n,g)=>{var A=pr(),V=i(A,!0);s(A);var p={};I(()=>{K(V,e(g)),p!==(p=e(g))&&(A.value=(A.__value=e(g))??"")}),c(n,A)}),s(de);var xe=a(de,2);{var Ke=n=>{var g=gr();O(g),F(g,()=>e(L),A=>t(L,A)),c(n,g)};U(xe,n=>{e(re)&&n(Ke)})}s(Fe);var He=a(Fe,2);{var at=n=>{var g=mr(),A=i(g),V=a(i(A),2);O(V),s(A),s(g),F(V,()=>e(N),p=>t(N,p)),c(n,g)},ht=n=>{var g=yr(),A=Gt(g),V=i(A),p=a(i(V),2);O(p),s(V);var h=a(V,2),se=a(i(h),2);O(se),s(h);var Ie=a(h,2),rt=a(i(Ie),2);O(rt),s(Ie),s(A);var Xe=a(A,2),Ze=a(i(Xe),2),be=a(i(Ze));fe(be,21,()=>e(C),_e,(ye,we,Ct)=>{var ut=br(),Tt=i(ut),dt=i(Tt);O(dt),s(Tt);var je=a(Tt),Se=i(je);Se.__change=Pe=>le(Ct,Pe.target.value),fe(Se,21,()=>S,_e,(Pe,Qe)=>{var qt=fr(),Ft=i(qt,!0);s(qt);var Kt={};I(()=>{K(Ft,e(Qe)),Kt!==(Kt=e(Qe))&&(qt.value=(qt.__value=e(Qe))??"")}),c(Pe,qt)}),s(Se);var Me;Ws(Se),s(je);var yt=a(je),vt=i(yt);{var $e=Pe=>{var Qe=_r();O(Qe),F(Qe,()=>e(we).attemptCount,qt=>e(we).attemptCount=qt),c(Pe,Qe)},lt=Pe=>{var Qe=hr();c(Pe,Qe)};U(vt,Pe=>{e(we).status!=="Flash"?Pe($e):Pe(lt,!1)})}s(yt);var Te=a(yt),Lt=i(Te);O(Lt),s(Te);var wt=a(Te),Ht=i(wt);Ht.__click=()=>ee(Ct),s(wt),s(ut),I(()=>{Me!==(Me=e(we).status)&&(Se.value=(Se.__value=e(we).status)??"",Is(Se,e(we).status))}),F(dt,()=>e(we).name,Pe=>e(we).name=Pe),F(Lt,()=>e(we).notes,Pe=>e(we).notes=Pe),c(ye,ut)}),s(be),s(Ze);var Be=a(Ze,2);Be.__click=ve,s(Xe),F(p,()=>e(m),ye=>t(m,ye)),F(se,()=>e(P),ye=>t(P,ye)),F(rt,()=>e(w),ye=>t(w,ye)),c(n,g)};U(He,n=>{e(j)?n(at):n(ht,!1)})}s(Ge);var We=a(Ge,2),bt=i(We);{var it=n=>{var g=wr();let A;var V=i(g,!0);s(g),I(()=>{A=Pt(g,1,"save-message svelte-1fje4dh",null,A,{success:e(z)==="success",error:e(z)==="error"}),K(V,e(ae))}),c(n,g)};U(bt,n=>{e(ae)&&n(it)})}var Ne=a(bt,2);Ne.__click=ce;var Ye=i(Ne);{var k=n=>{var g=kt("Saving...");c(n,g)},G=n=>{var g=zt(),A=Gt(g);{var V=h=>{var se=kt("✓ Saved!");c(h,se)},p=h=>{var se=kt("Save Session");c(h,se)};U(A,h=>{e(z)==="success"?h(V):h(p,!1)},!0)}c(n,g)};U(Ye,n=>{e(z)==="saving"?n(k):n(G,!1)})}s(Ne),s(We),s(ue),I(()=>Ne.disabled=e(z)==="saving"),F(nt,()=>e(q),n=>t(q,n)),F(Rt,()=>e(x),n=>t(x,n)),ot(ft,()=>e(y),n=>t(y,n)),ot(te,()=>e(M),n=>t(M,n)),F(Ue,()=>e(J),n=>t(J,n)),ot(de,()=>e(D),n=>t(D,n)),c(R,ue),Ut()}rs(["change","click"]);export{Or as C,ji as D,Fs as E,Ar as F,Fr as G,Nr as I,Br as O,Js as a,ea as f,si as g,Gr as s,vs as t};
