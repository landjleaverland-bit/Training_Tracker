import{f as _,a as c,c as Kt,t as xt}from"./DlIpowWv.js";import{C as aa,X as ia,a_ as ra,ae as la,a2 as oa,k as pt,a$ as na,az as Js,b0 as ca,aj as ua,n as qs,a4 as da,p as Qt,c as i,r as s,s as a,g as e,t as I,a as Jt,f as Et,e as u,A as Ee,o as hs,d as t,j as rs,aM as Pt,as as xe,b1 as _s,b2 as bs,q as kt,b3 as va,b4 as pa,b5 as ga,b6 as ma,b7 as fa,aL as _a}from"./BSXnj9bA.js";import{a as ha,d as ls,s as K,e as Bt}from"./DY3SdbM1.js";import{i as U}from"./Bnb5Vf_a.js";import{e as fe,j as _e,r as O,i as zt,p as ba}from"./DBB2y30b.js";import{s as Rt}from"./C5lbgwQY.js";import{a as Os,s as Es,c as A,b as ot,d as Ys,u as ya,e as wa,f as Sa,g as ka,h as zs,j as xa,k as Ca,l as Ta,m as La,n as qa,o as Ma,p as Pa}from"./BHK6Hdfp.js";import{p as Ue}from"./DrybqwuO.js";import{i as Hs}from"./2GMkO49V.js";import{b as Ra}from"./SKB21sHQ.js";const Da=()=>performance.now(),Zt={tick:R=>requestAnimationFrame(R),now:()=>Da(),tasks:new Set};function Xs(){const R=Zt.now();Zt.tasks.forEach(r=>{r.c(R)||(Zt.tasks.delete(r),r.f())}),Zt.tasks.size!==0&&Zt.tick(Xs)}function Na(R){let r;return Zt.tasks.size===0&&Zt.tick(Xs),{promise:new Promise(l=>{Zt.tasks.add(r={c:R,f:l})}),abort(){Zt.tasks.delete(r)}}}function Ds(R,r){Js(()=>{R.dispatchEvent(new CustomEvent(r))})}function Ba(R){if(R==="float")return"cssFloat";if(R==="offset")return"cssOffset";if(R.startsWith("--"))return R;const r=R.split("-");return r.length===1?r[0]:r[0]+r.slice(1).map(l=>l[0].toUpperCase()+l.slice(1)).join("")}function Vs(R){const r={},l=R.split(";");for(const b of l){const[B,W]=b.split(":");if(!B||W===void 0)break;const H=Ba(B.trim());r[H]=W.trim()}return r}const Ga=R=>R;function ds(R,r,l,b){var B=(R&na)!==0,W="both",H,S=r.inert,q=r.style.overflow,x,y;function T(){return Js(()=>H??=l()(r,b?.()??{},{direction:W}))}var M={is_global:B,in(){r.inert=S,Ds(r,"introstart"),x=Fs(r,T(),y,1,()=>{Ds(r,"introend"),x?.abort(),x=H=void 0,r.style.overflow=q})},out(D){r.inert=!0,Ds(r,"outrostart"),y=Fs(r,T(),x,0,()=>{Ds(r,"outroend"),D?.()})},stop:()=>{x?.abort(),y?.abort()}},m=aa;if((m.nodes.t??=[]).push(M),ha){var P=B;if(!P){for(var w=m.parent;w&&(w.f&ia)!==0;)for(;(w=w.parent)&&(w.f&ra)===0;);P=!w||(w.f&la)!==0}P&&oa(()=>{pt(()=>M.in())})}}function Fs(R,r,l,b,B){var W=b===1;if(ca(r)){var H,S=!1;return ua(()=>{if(!S){var D=r({direction:W?"in":"out"});H=Fs(R,D,l,b,B)}}),{abort:()=>{S=!0,H?.abort()},deactivate:()=>H.deactivate(),reset:()=>H.reset(),t:()=>H.t()}}if(l?.deactivate(),!r?.duration)return B(),{abort:qs,deactivate:qs,reset:qs,t:()=>b};const{delay:q=0,css:x,tick:y,easing:T=Ga}=r;var M=[];if(W&&l===void 0&&(y&&y(0,1),x)){var m=Vs(x(0,1));M.push(m,m)}var P=()=>1-b,w=R.animate(M,{duration:q,fill:"forwards"});return w.onfinish=()=>{w.cancel();var D=l?.t()??1-b;l?.abort();var L=b-D,N=r.duration*Math.abs(L),C=[];if(N>0){var J=!1;if(x)for(var Q=Math.ceil(N/16.666666666666668),E=0;E<=Q;E+=1){var j=D+L*T(E/Q),X=Vs(x(j,1-j));C.push(X),J||=X.overflow==="hidden"}J&&(R.style.overflow="hidden"),P=()=>{var oe=w.currentTime;return D+L*T(oe/N)},y&&Na(()=>{if(w.playState!=="running")return!1;var oe=P();return y(oe,1-oe),!0})}w=R.animate(C,{duration:N,fill:"forwards"}),w.onfinish=()=>{P=()=>b,y?.(b,1-b),B()}},{abort:()=>{w&&(w.cancel(),w.effect=null,w.onfinish=qs)},deactivate:()=>{B=qs},reset:()=>{b===0&&y?.(1,0)},t:()=>P()}}function Us(R){return function(...r){var l=r[0];return l.stopPropagation(),R?.apply(this,r)}}function Bs(R,r){var l=R.$$events?.[r.type],b=da(l)?l.slice():l==null?[]:[l];for(var B of b)B.call(this,r)}var Fa=_('<span class="placeholder svelte-1g8x5ph"> </span>'),Aa=_('<span class="chip-display"> </span>'),Oa=_('<button type="button"> </button>'),Ea=_('<div class="multi-select-container svelte-1g8x5ph"><div class="chips svelte-1g8x5ph"><!></div> <div class="options-grid svelte-1g8x5ph"></div></div>');function us(R,r){Qt(r,!0);let l=Ue(r,"selected",19,()=>[]),b=Ue(r,"placeholder",3,"Select options...");function B(T){let M=[...l()];T==="None"?M.includes("None")?M=[]:M=["None"]:(M=M.filter(m=>m!=="None"),M.includes(T)?M=M.filter(m=>m!==T):M.push(T)),r.onChange(M)}var W=Ea(),H=i(W),S=i(H);{var q=T=>{var M=Fa(),m=i(M,!0);s(M),I(()=>K(m,b())),c(T,M)},x=T=>{var M=Kt(),m=Et(M);fe(m,17,l,_e,(P,w)=>{var D=Aa(),L=i(D,!0);s(D),I(()=>K(L,e(w))),c(P,D)}),c(T,M)};U(S,T=>{l().length===0?T(q):T(x,!1)})}s(H);var y=a(H,2);fe(y,21,()=>r.options,_e,(T,M)=>{var m=Oa();m.__click=()=>B(e(M));var P=i(m,!0);s(m),I(w=>{Rt(m,1,`option-chip ${w??""}`,"svelte-1g8x5ph"),K(P,e(M))},[()=>l().includes(e(M))?"selected":""]),c(T,m)}),s(y),s(W),c(R,W),Jt()}ls(["click"]);var Ha=_('<div class="input-with-action svelte-1lf3qka"><input type="text" id="location-manual" placeholder="Enter custom location..." class="flat-left svelte-1lf3qka"/> <button type="button" class="action-btn flat-right svelte-1lf3qka" title="Back to list">✕</button></div>'),Wa=_("<option> </option>"),Ia=_('<select id="location" class="svelte-1lf3qka"><option disabled>Select location...</option><!></select>'),ja=_("<option> </option>"),za=_("<option> </option>"),Va=_('<th class="svelte-1lf3qka">Sport?</th>'),Ua=_('<td class="center svelte-1lf3qka"><input type="checkbox" class="svelte-1lf3qka"/></td>'),Ka=_('<span class="grade-error svelte-1lf3qka">Invalid</span>'),Qa=_("<option> </option>"),Ja=_("<option> </option>"),Ya=_("<option> </option>"),Xa=_('<button type="button" class="remove-btn svelte-1lf3qka">✕</button>'),Za=_('<tr class="svelte-1lf3qka"><!><td class="svelte-1lf3qka"><input type="text" placeholder="Route name..." class="svelte-1lf3qka"/></td><td class="svelte-1lf3qka"><input type="text" placeholder="V3"/> <!></td><td class="svelte-1lf3qka"><select class="svelte-1lf3qka"></select></td><td class="svelte-1lf3qka"><input type="number" min="1" class="svelte-1lf3qka"/></td><td class="svelte-1lf3qka"><select class="svelte-1lf3qka"></select></td><td class="svelte-1lf3qka"><select class="svelte-1lf3qka"></select></td><td><textarea placeholder="Notes..." class="svelte-1lf3qka"></textarea></td><td class="center svelte-1lf3qka"><!></td></tr>'),$a=_("<div> </div>"),ei=_('<button type="button" class="cancel-btn-large svelte-1lf3qka">Cancel</button>'),ti=_('<div class="form-content svelte-1lf3qka"><div class="form-row svelte-1lf3qka"><div class="form-group svelte-1lf3qka"><label for="date" class="svelte-1lf3qka">Date</label> <div class="date-time-row svelte-1lf3qka"><input type="date" id="date" class="svelte-1lf3qka"/> <input type="time" id="time" class="svelte-1lf3qka"/></div></div> <div class="form-group svelte-1lf3qka"><label for="location" class="svelte-1lf3qka">Location</label> <!></div></div> <div class="form-group svelte-1lf3qka"><label for="climbing-type" class="svelte-1lf3qka">Climbing Type</label> <select id="climbing-type" class="svelte-1lf3qka"><option disabled>Select type...</option><!></select></div> <div class="training-section svelte-1lf3qka"><h4 class="svelte-1lf3qka">Training Details</h4> <div class="training-grid svelte-1lf3qka"><div class="training-item svelte-1lf3qka"><label for="training-type" class="svelte-1lf3qka">Training Type</label> <!></div> <div class="training-item svelte-1lf3qka"><label for="difficulty" class="svelte-1lf3qka">Difficulty</label> <select id="difficulty"></select></div> <div class="training-item svelte-1lf3qka"><label for="category" class="svelte-1lf3qka">Category</label> <!></div> <div class="training-item svelte-1lf3qka"><label for="energy-system" class="svelte-1lf3qka">Energy System</label> <!></div> <div class="training-item svelte-1lf3qka"><label for="wall-angle" class="svelte-1lf3qka">Wall</label> <!></div></div></div> <div class="climbs-section svelte-1lf3qka"><h4 class="svelte-1lf3qka">Climbs</h4> <div class="table-container svelte-1lf3qka"><table class="climbs-table svelte-1lf3qka"><thead><tr><!><th class="svelte-1lf3qka">Name</th><th class="svelte-1lf3qka">Grade</th><th class="svelte-1lf3qka">Attempt</th><th class="svelte-1lf3qka">#</th><th class="svelte-1lf3qka">Wall Angle</th><th class="svelte-1lf3qka">Technique Focus</th><th class="svelte-1lf3qka">Notes</th><th class="svelte-1lf3qka"></th></tr></thead><tbody></tbody></table></div> <button type="button" class="add-btn svelte-1lf3qka">+ Add Climb</button></div> <div class="load-section svelte-1lf3qka"><h4 class="svelte-1lf3qka">Load Metrics</h4> <div class="load-metrics svelte-1lf3qka"><div class="load-item svelte-1lf3qka"><label for="finger-load" class="svelte-1lf3qka">Finger</label> <input type="number" id="finger-load" min="1" max="5" class="svelte-1lf3qka"/> <span class="load-scale svelte-1lf3qka">/ 5</span></div> <div class="load-item svelte-1lf3qka"><label for="shoulder-load" class="svelte-1lf3qka">Shoulder</label> <input type="number" id="shoulder-load" min="1" max="5" class="svelte-1lf3qka"/> <span class="load-scale svelte-1lf3qka">/ 5</span></div> <div class="load-item svelte-1lf3qka"><label for="forearm-load" class="svelte-1lf3qka">Forearm</label> <input type="number" id="forearm-load" min="1" max="5" class="svelte-1lf3qka"/> <span class="load-scale svelte-1lf3qka">/ 5</span></div></div> <h4 class="mt-4 svelte-1lf3qka">Grip Metrics</h4> <div class="load-metrics svelte-1lf3qka"><div class="load-item svelte-1lf3qka"><label for="open-grip" class="svelte-1lf3qka">Open</label> <input type="number" id="open-grip" min="1" max="5" class="svelte-1lf3qka"/> <span class="load-scale svelte-1lf3qka">/ 5</span></div> <div class="load-item svelte-1lf3qka"><label for="crimp-grip" class="svelte-1lf3qka">Crimp</label> <input type="number" id="crimp-grip" min="1" max="5" class="svelte-1lf3qka"/> <span class="load-scale svelte-1lf3qka">/ 5</span></div> <div class="load-item svelte-1lf3qka"><label for="pinch-grip" class="svelte-1lf3qka">Pinch</label> <input type="number" id="pinch-grip" min="1" max="5" class="svelte-1lf3qka"/> <span class="load-scale svelte-1lf3qka">/ 5</span></div> <div class="load-item svelte-1lf3qka"><label for="sloper-grip" class="svelte-1lf3qka">Sloper</label> <input type="number" id="sloper-grip" min="1" max="5" class="svelte-1lf3qka"/> <span class="load-scale svelte-1lf3qka">/ 5</span></div> <div class="load-item svelte-1lf3qka"><label for="jug-grip" class="svelte-1lf3qka">Jug</label> <input type="number" id="jug-grip" min="1" max="5" class="svelte-1lf3qka"/> <span class="load-scale svelte-1lf3qka">/ 5</span></div></div></div> <div class="submit-section svelte-1lf3qka"><!> <div class="action-buttons svelte-1lf3qka"><!> <button type="button" class="submit-btn svelte-1lf3qka"><!></button></div></div></div>');function Nr(R,r){Qt(r,!0);const l=["Rockstar Unit 3","Rockstar Unit 5","Rockstar Techno","Flashpoint Bristol","Redpoint Bristol","TCH Bristol","TCA Mothership","TCA Church","TCA Arc","Bloc","270 Climbing","Other"],b=["Bouldering","Sport","Mixed"],B=["Onsight","Flash","Redpoint","Repeat","Dogged","DNF"],W=["None","Projecting","Onsighting","Campusing","Repeaters","Comp Sim"],H=["None","Easy","Medium","Hard","Max","Limit+"],S=["None","Strength","Power","Strength Capacity","Power Capacity","Strength Endurance","Power Endurance","Endurance","Coordination","Slab Technique","Overhang Technique"],q=["None","Aerobic Lactic Capacity","Aerobic Lactic Power","Anaerobic Alactic Capacity","Anaerobic Alactic Power","Anaerobic Power","Anaerobic Lactic Capacity"],x=["None","Trusting feet","Double-clutch","Standing on volumes","Deadpointing","Flagging","Swapping feet","Edging","Smearing","Matching","Backstepping","Drop Knee","Bridging","Laybacking","Mantling","Kneebar","Dyno","Pogo","Coordination Moves","Gastoning","Undercutting","Compressing","Heel Hook","Toe Hook","Bicycle"],y=["None","Overhang","Vertical","Slab","Roof"],T=["None","Moon Board","Kilter Board","Tension Board","Beast","Circuit Board","Boulder wall","Lead wall","Comp wall","Auto belays"],m=["V0-","4-","V0","4","V0+","4+","V1","5","V2","5+","V3","6A","6A+","V4","6B","6B+","V5","6C","6C+","V6","7A","V7","7A+","V8","7B","7B+","V9","7C","V10","7C+","V11","8A","V12","8A+","V13","8B","V14","8B+","V15","8C","V16","8C+","V17","9A"].map(f=>f.toLowerCase());let P=u(null),w=Pt(()=>!!r.initialData),D=u(Ee(new Date().toISOString().split("T")[0])),L=u(Ee(new Date().toTimeString().split(" ")[0].slice(0,5))),N=u(""),C=u(""),J=u(Ee(["None"])),Q=u("None"),E=u(Ee(["None"])),j=u(Ee(["None"])),X=u(Ee(["None"])),oe=u(3),ve=u(3),de=u(3),ee=u(3),ne=u(3),z=u(3),ae=u(3),ce=u(3),ie=u(Ee([{isSport:!1,name:"",grade:"",attemptType:"Flash",attemptsNum:1,notes:"",wall:"Overhang"}])),pe=u(""),ge=u(!1);const Z="indoor_climb_draft";let Y=u(!1);hs(()=>{if(r.initialData)t(D,r.initialData.date,!0),t(L,r.initialData.time||"12:00",!0),l.includes(r.initialData.location)?(t(N,r.initialData.location,!0),t(ge,!1)):r.initialData.customLocation?(t(N,r.initialData.customLocation,!0),t(ge,!0)):(t(N,r.initialData.location,!0),t(ge,!0)),t(C,r.initialData.climbingType,!0),t(J,r.initialData.trainingTypes||["None"],!0),t(Q,r.initialData.difficulty||"None",!0),t(E,r.initialData.categories||["None"],!0),t(j,r.initialData.energySystems||["None"],!0),t(X,r.initialData.wallAngles||["None"],!0),t(oe,r.initialData.fingerLoad||3,!0),t(ve,r.initialData.shoulderLoad||3,!0),t(de,r.initialData.forearmLoad||3,!0),t(ee,r.initialData.openGrip||3,!0),t(ne,r.initialData.crimpGrip||3,!0),t(z,r.initialData.pinchGrip||3,!0),t(ae,r.initialData.sloperGrip||3,!0),t(ce,r.initialData.jugGrip||3,!0),r.initialData.climbs&&r.initialData.climbs.length>0?t(ie,JSON.parse(JSON.stringify(r.initialData.climbs)),!0):t(ie,[{isSport:!1,name:"",grade:"",attemptType:"Flash",attemptsNum:1,notes:"",wall:"Overhang"}],!0),t(pe,r.initialData.notes||"",!0);else{const f=localStorage.getItem(Z);if(f)try{const d=JSON.parse(f);d.location&&t(N,d.location,!0),d.time&&t(L,d.time,!0),d.isOtherLocation&&t(ge,d.isOtherLocation,!0),d.climbingType&&t(C,d.climbingType,!0),d.trainingTypes&&t(J,d.trainingTypes,!0),d.difficulty&&t(Q,d.difficulty,!0),d.categories&&t(E,d.categories,!0),d.energySystems&&t(j,d.energySystems,!0),d.wallAngles&&t(X,d.wallAngles,!0),d.fingerLoad&&t(oe,d.fingerLoad,!0),d.shoulderLoad&&t(ve,d.shoulderLoad,!0),d.forearmLoad&&t(de,d.forearmLoad,!0),d.openGrip&&t(ee,d.openGrip,!0),d.crimpGrip&&t(ne,d.crimpGrip,!0),d.pinchGrip&&t(z,d.pinchGrip,!0),d.sloperGrip&&t(ae,d.sloperGrip,!0),d.jugGrip&&t(ce,d.jugGrip,!0),d.climbs&&t(ie,d.climbs,!0),d.notes&&t(pe,d.notes,!0)}catch(d){console.error("Failed to restore draft",d)}}t(Y,!0)}),rs(()=>{if(!e(Y)||e(w))return;const f={date:e(D),time:e(L),location:e(N),isOtherLocation:e(ge),climbingType:e(C),trainingTypes:e(J),difficulty:e(Q),categories:e(E),energySystems:e(j),fingerLoad:e(oe),shoulderLoad:e(ve),forearmLoad:e(de),openGrip:e(ee),crimpGrip:e(ne),pinchGrip:e(z),sloperGrip:e(ae),jugGrip:e(ce),climbs:e(ie),notes:e(pe)};localStorage.setItem(Z,JSON.stringify(f))});function He(){e(N)==="Other"&&(t(ge,!0),t(N,""))}function st(){t(ge,!1),t(N,"")}function gt(){t(ie,[...e(ie),{isSport:!1,name:"",grade:"",attemptType:"Flash",attemptsNum:1,notes:"",wall:"Overhang"}],!0)}function nt(f){t(ie,e(ie).filter((d,re)=>re!==f),!0)}function Dt(f,d){e(ie)[f].attemptType=d,(d==="Flash"||d==="Onsight")&&(e(ie)[f].attemptsNum=1)}function Ct(f){t(P,f,!0)}function mt(){t(P,null)}let ct=Pt(()=>e(C)==="Mixed");function Gt(f){return e(C)==="Sport"?!0:e(C)==="Bouldering"?!1:f.isSport}function ft(f){return f.trim()?m.includes(f.trim().toLowerCase()):!0}let Te=u("idle"),Pe=u("");function te(){return e(N)?e(C)?e(ie).filter(d=>d.grade.trim()&&!ft(d.grade)).length>0?"Please fix invalid grades":null:"Please select a climbing type":"Please select a location"}async function he(){const f=te();if(f){t(Te,"error"),t(Pe,f,!0);return}t(Te,"saving");try{const d=e(ie).map(Ne=>({...Ne,isSport:Gt(Ne)})),re={date:e(D),time:e(L),location:e(N),customLocation:e(ge)?e(N):void 0,climbingType:e(C),trainingTypes:e(J),difficulty:e(Q),categories:e(E),energySystems:e(j),wallAngles:e(X),fingerLoad:e(oe),shoulderLoad:e(ve),forearmLoad:e(de),openGrip:e(ee),crimpGrip:e(ne),pinchGrip:e(z),sloperGrip:e(ae),jugGrip:e(ce),climbs:d,notes:e(pe)};let Ve;e(w)?Ve=await ya(r.initialData.id,re):Ve=await wa(re),Ve.ok?(t(Te,"success"),t(Pe,e(w)?"Session updated!":"Session saved!",!0),e(w)||localStorage.removeItem(Z),r.onSaved&&setTimeout(()=>{r.onSaved()},500)):(t(Te,"error"),t(Pe,"Failed to save: "+(Ve.error||"Unknown error"))),e(w)||(window.dispatchEvent(new CustomEvent("session-saved")),setTimeout(()=>{Ke()},2e3))}catch(d){t(Te,"error"),t(Pe,"Failed to save session"),console.error("Save error:",d)}}function Ke(){t(D,new Date().toISOString().split("T")[0],!0),t(L,new Date().toTimeString().split(" ")[0].slice(0,5),!0),t(N,""),t(ge,!1),t(C,""),t(J,["None"],!0),t(Q,"None"),t(E,["None"],!0),t(j,["None"],!0),t(X,["None"],!0),t(oe,3),t(ve,3),t(de,3),t(ee,3),t(ne,3),t(z,3),t(ae,3),t(ce,3),t(ie,[{isSport:!1,name:"",grade:"",attemptType:"Flash",attemptsNum:1,notes:"",wall:"Overhang"}],!0),t(pe,""),t(Te,"idle"),t(Pe,"")}var Fe=ti(),Ae=i(Fe),ue=i(Ae),ke=a(i(ue),2),Qe=i(ke);O(Qe);var We=a(Qe,2);O(We),s(ke),s(ue);var at=a(ue,2),_t=a(i(at),2);{var Ie=f=>{var d=Ha(),re=i(d);O(re);var Ve=a(re,2);Ve.__click=st,s(d),A(re,()=>e(N),Ne=>t(N,Ne)),c(f,d)},ht=f=>{var d=Ia();d.__change=He;var re=i(d);re.value=re.__value="";var Ve=a(re);fe(Ve,17,()=>l,_e,(Ne,Ft)=>{var wt=Wa(),ms=i(wt,!0);s(wt);var p={};I(()=>{K(ms,e(Ft)),p!==(p=e(Ft))&&(wt.value=(wt.__value=e(Ft))??"")}),c(Ne,wt)}),s(d),ot(d,()=>e(N),Ne=>t(N,Ne)),c(f,d)};U(_t,f=>{e(ge)?f(Ie):f(ht,!1)})}s(at),s(Ae);var it=a(Ae,2),Re=a(i(it),2),Ye=i(Re);Ye.value=Ye.__value="";var k=a(Ye);fe(k,17,()=>b,_e,(f,d)=>{var re=ja(),Ve=i(re,!0);s(re);var Ne={};I(()=>{K(Ve,e(d)),Ne!==(Ne=e(d))&&(re.value=(re.__value=e(d))??"")}),c(f,re)}),s(Re),s(it);var G=a(it,2),o=a(i(G),2),g=i(o),F=a(i(g),2);us(F,{get options(){return W},get selected(){return e(J)},placeholder:"Select types...",onChange:f=>t(J,f,!0)}),s(g);var V=a(g,2),v=a(i(V),2);fe(v,21,()=>H,_e,(f,d)=>{var re=za(),Ve=i(re,!0);s(re);var Ne={};I(()=>{K(Ve,e(d)),Ne!==(Ne=e(d))&&(re.value=(re.__value=e(d))??"")}),c(f,re)}),s(v),s(V);var h=a(V,2),se=a(i(h),2);us(se,{get options(){return S},get selected(){return e(E)},placeholder:"Select categories...",onChange:f=>t(E,f,!0)}),s(h);var je=a(h,2),rt=a(i(je),2);us(rt,{get options(){return q},get selected(){return e(j)},placeholder:"Select systems...",onChange:f=>t(j,f,!0)}),s(je);var Xe=a(je,2),Ze=a(i(Xe),2);us(Ze,{get options(){return T},get selected(){return e(X)},placeholder:"Select walls...",onChange:f=>t(X,f,!0)}),s(Xe),s(o),s(G);var be=a(G,2),De=a(i(be),2),ye=i(De),we=i(ye),Tt=i(we),ut=i(Tt);{var Lt=f=>{var d=Va();c(f,d)};U(ut,f=>{e(ct)&&f(Lt)})}xe(8),s(Tt),s(we);var dt=a(we);fe(dt,21,()=>e(ie),_e,(f,d,re)=>{var Ve=Za(),Ne=i(Ve);{var Ft=le=>{var Ge=Ua(),Me=i(Ge);O(Me),s(Ge),Ys(Me,()=>e(d).isSport,Xt=>e(d).isSport=Xt),c(le,Ge)};U(Ne,le=>{e(ct)&&le(Ft)})}var wt=a(Ne),ms=i(wt);O(ms),s(wt);var p=a(wt),n=i(p);O(n);let $;var Be=a(n,2);{var Oe=le=>{var Ge=Ka();c(le,Ge)};U(Be,le=>{ft(e(d).grade)||le(Oe)})}s(p);var At=a(p),St=i(At);St.__change=le=>Dt(re,le.target.value),fe(St,21,()=>B,_e,(le,Ge)=>{var Me=Qa(),Xt=i(Me,!0);s(Me);var jt={};I(()=>{K(Xt,e(Ge)),jt!==(jt=e(Ge))&&(Me.value=(Me.__value=e(Ge))??"")}),c(le,Me)}),s(St);var It;Os(St),s(At);var Nt=a(At),Ot=i(Nt);O(Ot),s(Nt);var ts=a(Nt),ss=i(ts);fe(ss,21,()=>y.filter(le=>le!=="None"),_e,(le,Ge)=>{var Me=Ja(),Xt=i(Me,!0);s(Me);var jt={};I(()=>{K(Xt,e(Ge)),jt!==(jt=e(Ge))&&(Me.value=(Me.__value=e(Ge))??"")}),c(le,Me)}),s(ss),s(ts);var xs=a(ts),ns=i(xs);fe(ns,21,()=>x,_e,(le,Ge)=>{var Me=Ya(),Xt=i(Me,!0);s(Me);var jt={};I(()=>{K(Xt,e(Ge)),jt!==(jt=e(Ge))&&(Me.value=(Me.__value=e(Ge))??"")}),c(le,Me)}),s(ns),s(xs);var Ut=a(xs);let Cs;var as=i(Ut);_s(as),s(Ut);var fs=a(Ut),Ts=i(fs);{var Ls=le=>{var Ge=Xa();Ge.__click=()=>nt(re),c(le,Ge)};U(Ts,le=>{e(ie).length>1&&le(Ls)})}s(fs),s(Ve),I(le=>{$=Rt(n,1,"grade-input svelte-1lf3qka",null,$,le),It!==(It=e(d).attemptType)&&(St.value=(St.__value=e(d).attemptType)??"",Es(St,e(d).attemptType)),Ot.disabled=e(d).attemptType==="Flash"||e(d).attemptType==="Onsight",Cs=Rt(Ut,1,"notes-cell svelte-1lf3qka",null,Cs,{expanded:e(P)===re})},[()=>({invalid:!ft(e(d).grade)})]),A(ms,()=>e(d).name,le=>e(d).name=le),A(n,()=>e(d).grade,le=>e(d).grade=le),A(Ot,()=>e(d).attemptsNum,le=>e(d).attemptsNum=le),ot(ss,()=>e(d).wall,le=>e(d).wall=le),ot(ns,()=>e(d).techniqueFocus,le=>e(d).techniqueFocus=le),Bt("focus",as,()=>Ct(re)),Bt("blur",as,mt),A(as,()=>e(d).notes,le=>e(d).notes=le),c(f,Ve)}),s(dt),s(ye),s(De);var ze=a(De,2);ze.__click=gt,s(be);var Se=a(be,2),Le=a(i(Se),2),bt=i(Le),vt=a(i(bt),2);O(vt),xe(2),s(bt);var $e=a(bt,2),lt=a(i($e),2);O(lt),xe(2),s($e);var Ce=a($e,2),qt=a(i(Ce),2);O(qt),xe(2),s(Ce),s(Le);var yt=a(Le,4),Vt=i(yt),qe=a(i(Vt),2);O(qe),xe(2),s(Vt);var Je=a(Vt,2),Mt=a(i(Je),2);O(Mt),xe(2),s(Je);var Ht=a(Je,2),Yt=a(i(Ht),2);O(Yt),xe(2),s(Ht);var $t=a(Ht,2),Wt=a(i($t),2);O(Wt),xe(2),s($t);var es=a($t,2),vs=a(i(es),2);O(vs),xe(2),s(es),s(yt),s(Se);var ys=a(Se,2),ps=i(ys);{var Ms=f=>{var d=$a();let re;var Ve=i(d,!0);s(d),I(()=>{re=Rt(d,1,"save-message svelte-1lf3qka",null,re,{success:e(Te)==="success",error:e(Te)==="error"}),K(Ve,e(Pe))}),c(f,d)};U(ps,f=>{e(Pe)&&f(Ms)})}var gs=a(ps,2),ws=i(gs);{var Ss=f=>{var d=ei();d.__click=function(...re){r.onCancel?.apply(this,re)},I(()=>d.disabled=e(Te)==="saving"),c(f,d)};U(ws,f=>{e(w)&&f(Ss)})}var os=a(ws,2);os.__click=he;var Ps=i(os);{var Rs=f=>{var d=xt();I(()=>K(d,e(w)?"Updating...":"Saving...")),c(f,d)},ks=f=>{var d=Kt(),re=Et(d);{var Ve=Ft=>{var wt=xt();I(()=>K(wt,`✓ ${e(w)?"Updated!":"Saved!"}`)),c(Ft,wt)},Ne=Ft=>{var wt=xt();I(()=>K(wt,e(w)?"Update Session":"Save Session")),c(Ft,wt)};U(re,Ft=>{e(Te)==="success"?Ft(Ve):Ft(Ne,!1)},!0)}c(f,d)};U(Ps,f=>{e(Te)==="saving"?f(Rs):f(ks,!1)})}s(os),s(gs),s(ys),s(Fe),I(()=>os.disabled=e(Te)==="saving"),A(Qe,()=>e(D),f=>t(D,f)),A(We,()=>e(L),f=>t(L,f)),ot(Re,()=>e(C),f=>t(C,f)),ot(v,()=>e(Q),f=>t(Q,f)),A(vt,()=>e(oe),f=>t(oe,f)),A(lt,()=>e(ve),f=>t(ve,f)),A(qt,()=>e(de),f=>t(de,f)),A(qe,()=>e(ee),f=>t(ee,f)),A(Mt,()=>e(ne),f=>t(ne,f)),A(Yt,()=>e(z),f=>t(z,f)),A(Wt,()=>e(ae),f=>t(ae,f)),A(vs,()=>e(ce),f=>t(ce,f)),c(R,Fe),Jt()}ls(["click","change"]);const As={Portland:{"Blacknor Far North":["Far North (Pit Prop Crag - North Wing)","Far North (Pit Prop Crag - South Wing)","Sunstone Wall","Sandcastle Wall","Hidden Wall"],"Blacknor North":["Diamond Slab","The Ledge","Sharpy's Wall","Reptile Smile Area","Wolfgang Forever Area","Captain Klutz Area","Death of Cool Area","Seattle Be The Day Area","Blacknor Heights (Blacknor Quarry Bouldering)","Blacknor Fort Quarry (Sport)","Cliff Top Way Down"],"Blacknor Central":["The Veranda","Medusa Wall","The Battlement","Wave Wall","Mirror Wall"],"Blacknor South":["Fallen Slab","Infidel Slab","Englands Dreaming Area","Sacred Angel Area","The Reach","Shit Happens Wall"],"Blacknor Far South":["Deadman's Bay","The White Hole","Wall of Lament"],"Battleship Edge":["Northern Sector","Main Edge","Battleship Block"],"Battleship Back Cliff":["Zinc Oxide Mountain","The Main Cliff","Sleepy Hollow"],"Wallsend North":["Sweet Smell of Success Wall","The Coastguard Wall (Northern section)"],"Wallsend South":["The Upper Tier","The Lower Tier","Stalker's Zone"],"Coastguard North":["Top Tier","Main Cliff (Beeston Bump)","The Grooves"],"Coastguard South":["The White Wall","Tennessee Wall","The Veranda (South)"],Godnor:["Godnor North","Godnor Far South","The Godnor Gate Area"],Neddyfields:["Neddyfields Main Wall","The Flowstone Wall","Neddyfields Bouldering"],"Cheyne Cliff":["Red Wall","Inception Wall","Road Rage Wall","The Nook","The Block"],"The Cuttings":["The Cuttings (Main Cliff)","The Pulpit","The Bower","Sun Lover's Slab"],"The New Cuttings":["The Gallery","The Annex","The Arches","The Grotto"],"The Cuttings Boulderfield":["The Tractor","The Coffin","The Octagon","Lightning Wall"]},Swanage:{"Dancing Ledge":["The Amphitheatre","The Upper Tier","The Skull","Promenade","The Quarry"],Hedbury:["Hedbury Quarry (Main)","Hedbury Sea Cliff (The Big Wall)"],Winspit:["The West Quarry","The East Quarry (The Playground)","The Sea Walls"]},"Wye Valley":{"Ban-y-Gor":["The Main Wall","The River Wall","The Far Left","The Upper Tier"],"Biblins Cave":["The Main Cave","The Right Wall","The Entrance Area"],"Woodcroft Quarry":["Fly Wall","The Main Quarry","The Retaining Wall"],"Wyndcliff Quarry":["The Main Wall (Left & Right)","The Upper Tier","The Shady Wall"]},"Costa Del Severn":{Brean:["Boulder Cove","The River Face (Main Cliff)","The Fort","The Slab"],Clevedon:["Ladye Bay","Marine Lake (Bouldering)","The Sea Walls"],"Portishead Quarry":["The Main Wall","The Slab","The Upper Tier"]},Bristol:{"Avon Gorge":["Sea Walls","Suspension Bridge Buttress","Morning Slab","Main Wall","New Quarry","The Amphitheatre","Unknown Wall"],"Leigh Woods":["Quarry 1","Quarry 2","The Main Buttress"],"Bickley Wood":["The Main Wall","The Stream Wall"],Hambrook:["The Roadside Wall"]},Cotswolds:{"Sally-in-the-Wood":["The Main Edge","The Boulders"],"Browns Folly":["The Tower","The Main Wall","The Upper Wall","The Far Right"]},Mendips:{"Cheddar Gorge":["High Rock","Sunset Buttress","Lion Rock","The Pinnacles","Acid Rock","Coronation Street","Long Rock"]},Gower:{Rhossili:["Shipwreck Cove","Rhossili Upper Cliff","The Tears Point"],"Trial Wall Area":["Trial Wall","The Terraces"],Foxhole:["The Main Cave","The Slab","The Overhangs"]},"South Wales":{"Dinas Rock":["Kennelgarth Wall","Main Overhang","Roadside Crag","The Inland Slabs"],Ogmore:["The Deep Zawn","Hardy's Bay","The Diamond","Daytona Wall"]},"North Wales":{"Cromlech (Dinas Cromlech)":["The Corner (Cenotaph)","Left Wall","Right Wall"],"Australia (Slate Quarries)":["The Sidings","Looning the Tube Area","Dali's Hole","The Salt Pans"]},"Peak District":{"Burbage South Valley":["The Boulders","The Edge (The Alliance Area)","The Tank"],"Gardoms Edge":["Apple Buttress","The Eye of Faith","Moomin Buttress"],"Raven Tor":["The Main Wall","The Weedkiller Wall"],Stanage:["Popular End","Plantation","High Neb","Stanage North","The End","Stanage Far North"],"Curbar Edge":["The Main Edge","Elder Crack Area"]},Devon:{Dartmoor:["Haytor (Low Man)","Hound Tor","The Dewerstone (Main Cliff)","Bonehill Rocks"],Hartland:["Screda Point","Smoothlands","Blackchurch Rock"],Tintagel:["The Great Cliff","Gull Rock","Ila's Ledge"]}};function si(){return Object.keys(As)}function Ks(R){return As[R]?Object.keys(As[R]):[]}var ai=_('<div class="form-header-row" style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 1.5rem;"><h3 style="margin: 0;" class="svelte-15o2ys1">⛰️ Outdoor Climb</h3></div>'),ii=_("<option> </option>"),ri=_('<div class="input-with-action svelte-15o2ys1"><input type="text" id="crag-manual" placeholder="Enter custom crag name..." class="flat-left svelte-15o2ys1"/> <button type="button" class="action-btn flat-right svelte-15o2ys1" title="Back to list">✕</button></div>'),li=_("<option> </option>"),oi=_("<option>Other (Manual Entry)</option>"),ni=_('<select id="crag" class="svelte-15o2ys1"><option disabled> </option><!><!></select>'),ci=_("<option> </option>"),ui=_("<option> </option>"),di=_('<th class="svelte-15o2ys1">Sport?</th>'),vi=_('<td class="center svelte-15o2ys1"><input type="checkbox" class="svelte-15o2ys1"/></td>'),pi=_('<span class="grade-error svelte-15o2ys1">Invalid</span>'),gi=_("<option> </option>"),mi=_("<option> </option>"),fi=_("<option> </option>"),_i=_('<button type="button" class="remove-btn svelte-15o2ys1">✕</button>'),hi=_('<tr><!><td class="svelte-15o2ys1"><input type="text" placeholder="Route name..." class="svelte-15o2ys1"/></td><td class="svelte-15o2ys1"><input type="text" placeholder="V3"/> <!></td><td class="svelte-15o2ys1"><select class="svelte-15o2ys1"></select></td><td class="svelte-15o2ys1"><input type="number" min="1" class="svelte-15o2ys1"/></td><td class="svelte-15o2ys1"><select class="svelte-15o2ys1"></select></td><td class="svelte-15o2ys1"><select class="svelte-15o2ys1"></select></td><td><textarea placeholder="Notes..." class="svelte-15o2ys1"></textarea></td><td class="center svelte-15o2ys1"><!></td></tr>'),bi=_("<div> </div>"),yi=_('<div class="form-content svelte-15o2ys1"><!> <div class="form-row svelte-15o2ys1"><div class="form-group svelte-15o2ys1"><label for="date" class="svelte-15o2ys1">Date</label> <div class="date-time-row svelte-15o2ys1"><input type="date" id="date" class="svelte-15o2ys1"/> <input type="time" id="time" class="svelte-15o2ys1"/></div></div> <div class="form-group svelte-15o2ys1"><label for="area" class="svelte-15o2ys1">Area</label> <select id="area" class="svelte-15o2ys1"><option disabled>Select area...</option><!></select></div></div> <div class="form-row svelte-15o2ys1"><div class="form-group svelte-15o2ys1"><label for="crag" class="svelte-15o2ys1">Crag</label> <!></div> <div class="form-group svelte-15o2ys1"><label for="sector" class="svelte-15o2ys1">Wall / Sector</label> <input type="text" id="sector" placeholder="Enter sector or wall name..." class="svelte-15o2ys1"/></div></div> <div class="form-group svelte-15o2ys1"><label for="climbing-type" class="svelte-15o2ys1">Climbing Type</label> <select id="climbing-type" class="svelte-15o2ys1"><option disabled>Select type...</option><!></select></div> <div class="training-section svelte-15o2ys1"><h4 class="svelte-15o2ys1">Training Details</h4> <div class="training-grid svelte-15o2ys1"><div class="training-item svelte-15o2ys1"><label for="training-type" class="svelte-15o2ys1">Training Type</label> <!></div> <div class="training-item svelte-15o2ys1"><label for="difficulty" class="svelte-15o2ys1">Difficulty</label> <select id="difficulty" class="svelte-15o2ys1"></select></div> <div class="training-item svelte-15o2ys1"><label for="category" class="svelte-15o2ys1">Category</label> <!></div> <div class="training-item svelte-15o2ys1"><label for="energy-system" class="svelte-15o2ys1">Energy System</label> <!></div></div></div> <div class="climbs-section svelte-15o2ys1"><h4 class="svelte-15o2ys1">Climbs</h4> <div class="table-container svelte-15o2ys1"><table class="climbs-table svelte-15o2ys1"><thead><tr><!><th class="svelte-15o2ys1">Name</th><th class="svelte-15o2ys1">Grade</th><th class="svelte-15o2ys1">Attempt</th><th class="svelte-15o2ys1">#</th><th class="svelte-15o2ys1">Wall Angle</th><th class="svelte-15o2ys1">Technique Focus</th><th class="svelte-15o2ys1">Notes</th><th class="svelte-15o2ys1"></th></tr></thead><tbody></tbody></table></div> <button type="button" class="add-btn svelte-15o2ys1">+ Add Climb</button></div> <div class="load-section svelte-15o2ys1"><h4 class="svelte-15o2ys1">Load Metrics</h4> <div class="load-metrics svelte-15o2ys1"><div class="load-item svelte-15o2ys1"><label for="finger-load" class="svelte-15o2ys1">Finger</label> <input type="number" id="finger-load" min="1" max="5" class="svelte-15o2ys1"/> <span class="load-scale svelte-15o2ys1">/ 5</span></div> <div class="load-item svelte-15o2ys1"><label for="shoulder-load" class="svelte-15o2ys1">Shoulder</label> <input type="number" id="shoulder-load" min="1" max="5" class="svelte-15o2ys1"/> <span class="load-scale svelte-15o2ys1">/ 5</span></div> <div class="load-item svelte-15o2ys1"><label for="forearm-load" class="svelte-15o2ys1">Forearm</label> <input type="number" id="forearm-load" min="1" max="5" class="svelte-15o2ys1"/> <span class="load-scale svelte-15o2ys1">/ 5</span></div></div> <h4 class="mt-4 svelte-15o2ys1">Grip Metrics</h4> <div class="load-metrics svelte-15o2ys1"><div class="load-item svelte-15o2ys1"><label for="open-grip" class="svelte-15o2ys1">Open</label> <input type="number" id="open-grip" min="1" max="5" class="svelte-15o2ys1"/> <span class="load-scale svelte-15o2ys1">/ 5</span></div> <div class="load-item svelte-15o2ys1"><label for="crimp-grip" class="svelte-15o2ys1">Crimp</label> <input type="number" id="crimp-grip" min="1" max="5" class="svelte-15o2ys1"/> <span class="load-scale svelte-15o2ys1">/ 5</span></div> <div class="load-item svelte-15o2ys1"><label for="pinch-grip" class="svelte-15o2ys1">Pinch</label> <input type="number" id="pinch-grip" min="1" max="5" class="svelte-15o2ys1"/> <span class="load-scale svelte-15o2ys1">/ 5</span></div> <div class="load-item svelte-15o2ys1"><label for="sloper-grip" class="svelte-15o2ys1">Sloper</label> <input type="number" id="sloper-grip" min="1" max="5" class="svelte-15o2ys1"/> <span class="load-scale svelte-15o2ys1">/ 5</span></div> <div class="load-item svelte-15o2ys1"><label for="jug-grip" class="svelte-15o2ys1">Jug</label> <input type="number" id="jug-grip" min="1" max="5" class="svelte-15o2ys1"/> <span class="load-scale svelte-15o2ys1">/ 5</span></div></div></div> <div class="form-group notes-section svelte-15o2ys1"><label for="session-notes" class="svelte-15o2ys1">Session Notes</label> <textarea id="session-notes" placeholder="How did the session feel? Weather, conditions, mood..." rows="3"></textarea></div> <div class="submit-section svelte-15o2ys1"><!> <button type="button" class="submit-btn svelte-15o2ys1"><!></button></div></div>');function Br(R,r){Qt(r,!0);const l=si(),b=["Boulder","Sport","Trad"],B=["Onsight","Flash","Redpoint","Repeat","Dogged","DNF"],W=["None","Overhang","Vertical","Slab","Roof"],H=["None","Projecting","Onsighting","Campusing","Repeaters","Comp Sim"],S=["None","Easy","Medium","Hard","Max","Limit+"],q=["None","Strength","Power","Strength Capacity","Power Capacity","Strength Endurance","Power Endurance","Endurance","Coordination","Slab Technique","Overhang Technique"],x=["None","Aerobic Lactic Capacity","Aerobic Lactic Power","Anaerobic Alactic Capacity","Anaerobic Alactic Power","Anaerobic Power","Anaerobic Lactic Capacity"],y=["None","Trusting feet","Double-clutch","Deadpointing","Flagging","Swapping feet","Edging","Smearing","Matching","Backstepping","Drop Knee","Bridging","Laybacking","Mantling","Kneebar","Dyno","Coordination Moves","Gastoning","Undercutting","Compressing","Heel Hook","Toe Hook","Bicycle"],M=["V0-","4-","V0","4","V0+","4+","V1","5","V2","5+","V3","6A","6A+","V4","6B","6B+","V5","6C","6C+","V6","7A","V7","7A+","V8","7B","7B+","V9","7C","V10","7C+","V11","8A","V12","8A+","V13","8B","V14","8B+","V15","8C","V16","8C+","V17","9A"].map(p=>p.toLowerCase());let m=Ue(r,"initialData",3,null),P=Pt(()=>!!m()),w=u(null),D=u(Ee(new Date().toISOString().split("T")[0])),L=u(Ee(new Date().toTimeString().split(" ")[0].slice(0,5))),N=u(""),C=u(""),J=u(""),Q=u(""),E=u(Ee(["None"])),j=u("None"),X=u(Ee(["None"])),oe=u(Ee(["None"])),ve=u(3),de=u(3),ee=u(3),ne=u(3),z=u(3),ae=u(3),ce=u(3),ie=u(3),pe=u(Ee([{isSport:!1,name:"",grade:"",attemptType:"Flash",attemptsNum:1,notes:""}])),ge=u(""),Z=Pt(()=>e(N)?Ks(e(N)):[]),Y=u(!1);const He="outdoor_climb_draft";let st=u(!1);hs(()=>{if(m()){t(D,m().date,!0),t(L,m().time||"12:00",!0),t(N,m().area,!0),t(C,m().crag,!0);const p=Ks(e(N));e(C)&&!p.includes(e(C))&&t(Y,!0),t(J,m().sector||"",!0),t(Q,m().climbingType,!0),t(E,m().trainingTypes||["None"],!0),t(j,m().difficulty||"Moderate",!0),t(X,m().categories||["None"],!0),t(oe,m().energySystems||["None"],!0),t(ve,m().fingerLoad,!0),t(de,m().shoulderLoad,!0),t(ee,m().forearmLoad,!0),t(ne,m().openGrip||3,!0),t(z,m().crimpGrip||3,!0),t(ae,m().pinchGrip||3,!0),t(ce,m().sloperGrip||3,!0),t(ie,m().jugGrip||3,!0),t(pe,m().climbs||[],!0),t(ge,m().notes||"",!0),t(st,!0)}else{const p=localStorage.getItem(He);if(p)try{const n=JSON.parse(p);n.date&&t(D,n.date,!0),n.time&&t(L,n.time,!0),n.area&&t(N,n.area,!0),n.crag&&t(C,n.crag,!0),n.sector&&t(J,n.sector,!0),n.isOtherCrag&&t(Y,n.isOtherCrag,!0),n.climbingType&&t(Q,n.climbingType,!0),n.trainingTypes&&t(E,n.trainingTypes,!0),n.difficulty&&t(j,n.difficulty,!0),n.categories&&t(X,n.categories,!0),n.energySystems&&t(oe,n.energySystems,!0),n.fingerLoad&&t(ve,n.fingerLoad,!0),n.shoulderLoad&&t(de,n.shoulderLoad,!0),n.forearmLoad&&t(ee,n.forearmLoad,!0),n.openGrip&&t(ne,n.openGrip,!0),n.crimpGrip&&t(z,n.crimpGrip,!0),n.pinchGrip&&t(ae,n.pinchGrip,!0),n.sloperGrip&&t(ce,n.sloperGrip,!0),n.jugGrip&&t(ie,n.jugGrip,!0),n.climbs&&t(pe,n.climbs,!0),n.notes&&t(ge,n.notes,!0)}catch(n){console.error("Failed to restore draft",n)}t(st,!0)}}),rs(()=>{if(!e(st)||e(P))return;const p={date:e(D),time:e(L),area:e(N),crag:e(C),sector:e(J),isOtherCrag:e(Y),climbingType:e(Q),trainingTypes:e(E),difficulty:e(j),categories:e(X),energySystems:e(oe),fingerLoad:e(ve),shoulderLoad:e(de),forearmLoad:e(ee),openGrip:e(ne),crimpGrip:e(z),pinchGrip:e(ae),sloperGrip:e(ce),jugGrip:e(ie),climbs:e(pe),notes:e(ge)};localStorage.setItem(He,JSON.stringify(p))}),rs(()=>{e(N)&&(t(C,""),t(Y,!1))});function gt(){e(C)==="Other"&&(t(Y,!0),t(C,""))}function nt(){t(Y,!1),t(C,"")}function Dt(){t(pe,[...e(pe),{isSport:!1,name:"",grade:"",attemptType:"Flash",attemptsNum:1,notes:""}],!0)}function Ct(p){t(pe,e(pe).filter((n,$)=>$!==p),!0)}function mt(p,n){e(pe)[p].attemptType=n,(n==="Flash"||n==="Onsight")&&(e(pe)[p].attemptsNum=1)}function ct(p){t(w,p,!0)}function Gt(){t(w,null)}let ft=Pt(()=>e(Q)==="Trad");function Te(p){return e(Q)==="Sport"?!0:e(Q)==="Boulder"?!1:p.isSport}function Pe(p){return p.trim()?M.includes(p.trim().toLowerCase()):!0}let te=u("idle"),he=u("");function Ke(){return e(N)?e(C)?e(Q)?e(pe).filter(n=>n.grade.trim()&&!Pe(n.grade)).length>0?"Please fix invalid grades":null:"Please select a climbing type":"Please select a crag":"Please select an area"}async function Fe(){const p=Ke();if(p){t(te,"error"),t(he,p,!0);return}t(te,"saving");try{const n=e(pe).map(Oe=>({...Oe,isSport:Te(Oe)})),$={date:e(D),time:e(L),area:e(N),crag:e(C),sector:e(J)||void 0,climbingType:e(Q),trainingTypes:e(E),difficulty:e(j),categories:e(X),energySystems:e(oe),fingerLoad:e(ve),shoulderLoad:e(de),forearmLoad:e(ee),openGrip:e(ne),crimpGrip:e(z),pinchGrip:e(ae),sloperGrip:e(ce),jugGrip:e(ie),climbs:n,notes:e(ge)};let Be;e(P)&&m()?Be=await Sa(m().id,$):Be=await ka($),Be.ok?(t(te,"success"),t(he,"Session saved!"),e(P)||localStorage.removeItem(He),r.onSaved?r.onSaved():(window.dispatchEvent(new CustomEvent("session-saved")),e(P)||setTimeout(()=>{Ae()},2e3))):(t(te,"error"),t(he,"Failed to save: "+(Be.error||"Unknown error")))}catch(n){t(te,"error"),t(he,"Failed to save session"),console.error("Save error:",n)}}function Ae(){t(D,new Date().toISOString().split("T")[0],!0),t(L,new Date().toTimeString().split(" ")[0].slice(0,5),!0),t(N,""),t(C,""),t(J,""),t(Q,""),t(E,["None"],!0),t(j,"None"),t(X,["None"],!0),t(oe,["None"],!0),t(ve,3),t(de,3),t(ee,3),t(ne,3),t(z,3),t(ae,3),t(ce,3),t(ie,3),t(pe,[{isSport:!1,name:"",grade:"",attemptType:"Flash",attemptsNum:1,notes:""}],!0),t(ge,""),t(te,"idle"),t(he,"")}var ue=yi(),ke=i(ue);{var Qe=p=>{var n=ai();c(p,n)};U(ke,p=>{e(P)||p(Qe)})}var We=a(ke,2),at=i(We),_t=a(i(at),2),Ie=i(_t);O(Ie);var ht=a(Ie,2);O(ht),s(_t),s(at);var it=a(at,2),Re=a(i(it),2),Ye=i(Re);Ye.value=Ye.__value="";var k=a(Ye);fe(k,17,()=>l,_e,(p,n)=>{var $=ii(),Be=i($,!0);s($);var Oe={};I(()=>{K(Be,e(n)),Oe!==(Oe=e(n))&&($.value=($.__value=e(n))??"")}),c(p,$)}),s(Re),s(it),s(We);var G=a(We,2),o=i(G),g=a(i(o),2);{var F=p=>{var n=ri(),$=i(n);O($);var Be=a($,2);Be.__click=nt,s(n),A($,()=>e(C),Oe=>t(C,Oe)),c(p,n)},V=p=>{var n=ni();n.__change=gt;var $=i(n),Be=i($,!0);s($),$.value=$.__value="";var Oe=a($);fe(Oe,17,()=>e(Z),_e,(It,Nt)=>{var Ot=li(),ts=i(Ot,!0);s(Ot);var ss={};I(()=>{K(ts,e(Nt)),ss!==(ss=e(Nt))&&(Ot.value=(Ot.__value=e(Nt))??"")}),c(It,Ot)});var At=a(Oe);{var St=It=>{var Nt=oi();Nt.value=Nt.__value="Other",c(It,Nt)};U(At,It=>{e(N)&&It(St)})}s(n),I(()=>{n.disabled=!e(N),K(Be,e(N)?"Select crag...":"Select area first...")}),ot(n,()=>e(C),It=>t(C,It)),c(p,n)};U(g,p=>{e(Y)?p(F):p(V,!1)})}s(o);var v=a(o,2),h=a(i(v),2);O(h),s(v),s(G);var se=a(G,2),je=a(i(se),2),rt=i(je);rt.value=rt.__value="";var Xe=a(rt);fe(Xe,17,()=>b,_e,(p,n)=>{var $=ci(),Be=i($,!0);s($);var Oe={};I(()=>{K(Be,e(n)),Oe!==(Oe=e(n))&&($.value=($.__value=e(n))??"")}),c(p,$)}),s(je),s(se);var Ze=a(se,2),be=a(i(Ze),2),De=i(be),ye=a(i(De),2);us(ye,{get options(){return H},get selected(){return e(E)},placeholder:"Select types...",onChange:p=>t(E,p,!0)}),s(De);var we=a(De,2),Tt=a(i(we),2);fe(Tt,21,()=>S,_e,(p,n)=>{var $=ui(),Be=i($,!0);s($);var Oe={};I(()=>{K(Be,e(n)),Oe!==(Oe=e(n))&&($.value=($.__value=e(n))??"")}),c(p,$)}),s(Tt),s(we);var ut=a(we,2),Lt=a(i(ut),2);us(Lt,{get options(){return q},get selected(){return e(X)},placeholder:"Select categories...",onChange:p=>t(X,p,!0)}),s(ut);var dt=a(ut,2),ze=a(i(dt),2);us(ze,{get options(){return x},get selected(){return e(oe)},placeholder:"Select systems...",onChange:p=>t(oe,p,!0)}),s(dt),s(be),s(Ze);var Se=a(Ze,2),Le=a(i(Se),2),bt=i(Le),vt=i(bt),$e=i(vt),lt=i($e);{var Ce=p=>{var n=di();c(p,n)};U(lt,p=>{e(ft)&&p(Ce)})}xe(8),s($e),s(vt);var qt=a(vt);fe(qt,21,()=>e(pe),_e,(p,n,$)=>{var Be=hi(),Oe=i(Be);{var At=me=>{var et=vi(),tt=i(et);O(tt),s(et),Ys(tt,()=>e(n).isSport,cs=>e(n).isSport=cs),c(me,et)};U(Oe,me=>{e(ft)&&me(At)})}var St=a(Oe),It=i(St);O(It),s(St);var Nt=a(St),Ot=i(Nt);O(Ot);let ts;var ss=a(Ot,2);{var xs=me=>{var et=pi();c(me,et)};U(ss,me=>{Pe(e(n).grade)||me(xs)})}s(Nt);var ns=a(Nt),Ut=i(ns);Ut.__change=me=>mt($,me.target.value),fe(Ut,21,()=>B,_e,(me,et)=>{var tt=gi(),cs=i(tt,!0);s(tt);var is={};I(()=>{K(cs,e(et)),is!==(is=e(et))&&(tt.value=(tt.__value=e(et))??"")}),c(me,tt)}),s(Ut);var Cs;Os(Ut),s(ns);var as=a(ns),fs=i(as);O(fs),s(as);var Ts=a(as),Ls=i(Ts);fe(Ls,21,()=>W.filter(me=>me!=="None"),_e,(me,et)=>{var tt=mi(),cs=i(tt,!0);s(tt);var is={};I(()=>{K(cs,e(et)),is!==(is=e(et))&&(tt.value=(tt.__value=e(et))??"")}),c(me,tt)}),s(Ls),s(Ts);var le=a(Ts),Ge=i(le);fe(Ge,21,()=>y,_e,(me,et)=>{var tt=fi(),cs=i(tt,!0);s(tt);var is={};I(()=>{K(cs,e(et)),is!==(is=e(et))&&(tt.value=(tt.__value=e(et))??"")}),c(me,tt)}),s(Ge),s(le);var Me=a(le);let Xt;var jt=i(Me);_s(jt),s(Me);var js=a(Me),ta=i(js);{var sa=me=>{var et=_i();et.__click=()=>Ct($),c(me,et)};U(ta,me=>{e(pe).length>1&&me(sa)})}s(js),s(Be),I(me=>{ts=Rt(Ot,1,"grade-input svelte-15o2ys1",null,ts,me),Cs!==(Cs=e(n).attemptType)&&(Ut.value=(Ut.__value=e(n).attemptType)??"",Es(Ut,e(n).attemptType)),fs.disabled=e(n).attemptType==="Flash"||e(n).attemptType==="Onsight",Xt=Rt(Me,1,"notes-cell svelte-15o2ys1",null,Xt,{expanded:e(w)===$})},[()=>({invalid:!Pe(e(n).grade)})]),A(It,()=>e(n).name,me=>e(n).name=me),A(Ot,()=>e(n).grade,me=>e(n).grade=me),A(fs,()=>e(n).attemptsNum,me=>e(n).attemptsNum=me),ot(Ls,()=>e(n).wall,me=>e(n).wall=me),ot(Ge,()=>e(n).techniqueFocus,me=>e(n).techniqueFocus=me),Bt("focus",jt,()=>ct($)),Bt("blur",jt,Gt),A(jt,()=>e(n).notes,me=>e(n).notes=me),c(p,Be)}),s(qt),s(bt),s(Le);var yt=a(Le,2);yt.__click=Dt,s(Se);var Vt=a(Se,2),qe=a(i(Vt),2),Je=i(qe),Mt=a(i(Je),2);O(Mt),xe(2),s(Je);var Ht=a(Je,2),Yt=a(i(Ht),2);O(Yt),xe(2),s(Ht);var $t=a(Ht,2),Wt=a(i($t),2);O(Wt),xe(2),s($t),s(qe);var es=a(qe,4),vs=i(es),ys=a(i(vs),2);O(ys),xe(2),s(vs);var ps=a(vs,2),Ms=a(i(ps),2);O(Ms),xe(2),s(ps);var gs=a(ps,2),ws=a(i(gs),2);O(ws),xe(2),s(gs);var Ss=a(gs,2),os=a(i(Ss),2);O(os),xe(2),s(Ss);var Ps=a(Ss,2),Rs=a(i(Ps),2);O(Rs),xe(2),s(Ps),s(es),s(Vt);var ks=a(Vt,2),f=a(i(ks),2);_s(f),s(ks);var d=a(ks,2),re=i(d);{var Ve=p=>{var n=bi();let $;var Be=i(n,!0);s(n),I(()=>{$=Rt(n,1,"save-message svelte-15o2ys1",null,$,{success:e(te)==="success",error:e(te)==="error"}),K(Be,e(he))}),c(p,n)};U(re,p=>{e(he)&&p(Ve)})}var Ne=a(re,2);Ne.__click=Fe;var Ft=i(Ne);{var wt=p=>{var n=xt("Saving...");c(p,n)},ms=p=>{var n=Kt(),$=Et(n);{var Be=At=>{var St=xt("✓ Saved!");c(At,St)},Oe=At=>{var St=xt("Save Session");c(At,St)};U($,At=>{e(te)==="success"?At(Be):At(Oe,!1)},!0)}c(p,n)};U(Ft,p=>{e(te)==="saving"?p(wt):p(ms,!1)})}s(Ne),s(d),s(ue),I(()=>Ne.disabled=e(te)==="saving"),A(Ie,()=>e(D),p=>t(D,p)),A(ht,()=>e(L),p=>t(L,p)),ot(Re,()=>e(N),p=>t(N,p)),A(h,()=>e(J),p=>t(J,p)),ot(je,()=>e(Q),p=>t(Q,p)),ot(Tt,()=>e(j),p=>t(j,p)),A(Mt,()=>e(ve),p=>t(ve,p)),A(Yt,()=>e(de),p=>t(de,p)),A(Wt,()=>e(ee),p=>t(ee,p)),A(ys,()=>e(ne),p=>t(ne,p)),A(Ms,()=>e(z),p=>t(z,p)),A(ws,()=>e(ae),p=>t(ae,p)),A(os,()=>e(ce),p=>t(ce,p)),A(Rs,()=>e(ie),p=>t(ie,p)),A(f,()=>e(ge),p=>t(ge,p)),c(R,ue),Jt()}ls(["click","change"]);const Ns=[{id:"pull_ups",name:"Pull-Up",category:"Pull",subcategory:"Vertical Pull",targetMuscles:["Lats","Biceps"],instructions:["Grip bar wider than shoulders.","Pull chest up toward the bar."],images:["/exercises/pull-ups.webp"]},{id:"weighted_pull_ups",name:"Weighted Pull-Up",category:"Pull",subcategory:"Vertical Pull",targetMuscles:["Lats","Biceps"],instructions:["Grip bar wider than shoulders.","Pull chest up toward the bar."],images:["/exercises/weighted_pull_ups.webp"]},{id:"lat_pulldown",name:"Lat Pulldown",category:"Pull",subcategory:"Vertical Pull",targetMuscles:["Lats"],instructions:["Sit in machine.","Pull bar down to upper chest."],images:["/exercises/lat_pulldown.webp"]},{id:"one_arm_assisted_pull_up",name:"1 Arm Assisted Pull-Up",category:"Pull",subcategory:"Vertical Pull",targetMuscles:["Lats","Biceps"],instructions:["Use a pulley or band to assist one arm.","Perform a one-arm pull-up."],images:["/exercises/1_Arm_Assisted_Pull-Up.webp"]},{id:"bent_over_row",name:"Barbell Row",category:"Pull",subcategory:"Horizontal Pull",targetMuscles:["Lats","Rhomboids"],instructions:["Hinge at hips.","Pull weight to hip pocket."],images:["/exercises/bent_over_row.webp"]},{id:"single_arm_db_row",name:"Dumbbell Row",category:"Pull",subcategory:"Horizontal Pull",targetMuscles:["Lats","Rhomboids"],instructions:["Support on bench.","Pull dumbbell to hip."],images:["/exercises/single_arm_db_row.webp"]},{id:"one_arm_negatives",name:"One Arm Negatives",category:"Pull",subcategory:"Lock-offs",targetMuscles:["Lats","Biceps","Forearms"],instructions:["Jump or assist up to the top position.","Lower yourself as slowly as possible with one arm."],images:["/exercises/one_arm_negatives.webp"]},{id:"full_lock_offs",name:"Full Lock-offs",category:"Pull",subcategory:"Lock-offs",targetMuscles:["Lats","Biceps"],instructions:["Hold the top position of a pull-up.","Maintain chin above the bar for time."],images:["/exercises/full_lock_offs.webp"]},{id:"90_degree_lock_offs",name:"90 Lock-offs",category:"Pull",subcategory:"Lock-offs",targetMuscles:["Lats","Biceps"],instructions:["Hold a pull-up position with elbows at 90 degrees.","Keep core tight and hold for time."],images:["/exercises/90_degree_lock_offs.webp"]},{id:"120_degree_lock_offs",name:"120 Lock-offs",category:"Pull",subcategory:"Lock-offs",targetMuscles:["Lats","Biceps"],instructions:["Hold a pull-up position with elbows at 120 degrees (slightly bent).","Maintain tension for time."],images:["/exercises/120_degree_lock_offs.webp"]},{id:"bicep_curls",name:"Bicep Curls",category:"Pull",subcategory:"Curls",targetMuscles:["Biceps"],instructions:["Hold dumbbells at sides.","Curl weights toward shoulders.","Lower with control."],images:["/exercises/bicep_curls.webp"]},{id:"hammer_curls",name:"Hammer Curls",category:"Pull",subcategory:"Curls",targetMuscles:["Biceps","Forearms"],instructions:["Hold dumbbells with neutral grip (palms facing in).","Curl weights toward shoulders.","Lower with control."],images:["/exercises/hammer_curls.webp"]},{id:"barbell_curls",name:"Barbell Curls",category:"Pull",subcategory:"Curls",targetMuscles:["Biceps"],instructions:["Hold barbell with underhand grip.","Curl bar toward chest.","Lower with control."],images:["/exercises/barbell_curls.webp"]},{id:"front_raises",name:"Front Raises",category:"Pull",subcategory:"Shoulders",targetMuscles:["Front Delts"],instructions:["Hold weights in front of thighs.","Raise arms straight in front to shoulder height."],images:["/exercises/front_raises.webp"]},{id:"kettlebell_swings",name:"Kettlebell Swings",category:"Pull",subcategory:"Shoulders",targetMuscles:["Glutes","Hamstrings","Lower Back"],instructions:["Hinge at hips holding kettlebell.","Snap hips forward to swing weight up."],images:["/exercises/kettlebell_swings.webp"]},{id:"muscle_ups",name:"Muscle Ups",category:"Pull",subcategory:"Shoulders",targetMuscles:["Lats","Triceps","Chest"],instructions:["Explosive pull-up.","Transition wrists over bar.","Press out at top."],images:["/exercises/muscle_ups.webp"]},{id:"seated_row",name:"Seated Row",category:"Pull",subcategory:"Horizontal Pull",targetMuscles:["Lats","Rhomboids"],instructions:["Sit at machine.","Pull handle to torso."],images:["/exercises/Seated_Row.webp"]},{id:"supine_trx_row",name:"Supine TRX Row",category:"Pull",subcategory:"Horizontal Pull",targetMuscles:["Lats","Rhomboids"],instructions:["Feet in TRX straps.","Pull handle to torso."],images:["/exercises/supine_trx_row.webp"]},{id:"barbell_bench_press",name:"Barbell Bench Press",category:"Push",subcategory:"Horizontal Push",targetMuscles:["Chest","Triceps"],instructions:["Lower bar to chest.","Press back up."],images:["/exercises/barbell_bench_press.webp"]},{id:"dumbbell_bench_press",name:"Dumbbell Chest Press",category:"Push",subcategory:"Horizontal Push",targetMuscles:["Upper Chest"],instructions:["Press dumbbells whilst lying on bench."],images:["/exercises/dumbbell_bench_press.webp"]},{id:"dumbbell_bench_press",name:"Dumbbell Chest Press",category:"Push",subcategory:"Horizontal Push",targetMuscles:["Upper Chest"],instructions:["Press dumbbells whilst lying on bench."],images:["/exercises/dumbbell_bench_press.webp"]},{id:"chest_press",name:"Chest Press Machine",category:"Push",subcategory:"Horizontal Push",targetMuscles:["Chest","Triceps"],instructions:["From seated position, push handles overhead."],images:["/exercises/chest_press.webp"]},{id:"push_up",name:"Push-Up",category:"Push",subcategory:"Horizontal Push",targetMuscles:["Triceps","Chest"],instructions:["Hands wide, lower to floor.","Press back up."],images:["/exercises/push_up.webp"]},{id:"narrow_push_up",name:"Narrow Push-Up",category:"Push",subcategory:"Horizontal Push",targetMuscles:["Triceps","Chest"],instructions:["Hands close together.","Keep elbows tucked."],images:["/exercises/narrow_push_up.webp"]},{id:"trx_push_up",name:"TRX Push-Up",category:"Push",subcategory:"Horizontal Push",targetMuscles:["Chest","Global Stabilisers"],instructions:["Feet or hands in TRX straps.","Perform push-up."],images:["/exercises/trx_push_up.webp"]},{id:"overhead_press",name:"Barbell Overhead Press",category:"Push",subcategory:"Vertical Push",targetMuscles:["Shoulders"],instructions:["Press bar vertically overhead."],images:["/exercises/overhead_press.webp"]},{id:"dumbbell_overhead_press",name:"Dumbbell Overhead Press",category:"Push",subcategory:"Vertical Push",targetMuscles:["Shoulders"],instructions:["Press dumbbells vertically overhead."],images:["/exercises/dumbbell_overhead_press.webp"]},{id:"arnold_press",name:"Arnold Press",category:"Push",subcategory:"Vertical Push",targetMuscles:["Shoulders"],instructions:["Rotate palms while pressing overhead."],images:["/exercises/arnold_press.webp"]},{id:"shoulder_press_machine",name:"Shoulder Press Machine",category:"Push",subcategory:"Vertical Push",targetMuscles:["Shoulders"],instructions:["Sit in machine.","Press handles overhead."],images:["/exercises/Shoulder_Press_Machine.webp"]},{id:"dumbbell_flies",name:"Dumbbell Flies",category:"Push",subcategory:"Shoulders",targetMuscles:["Chest"],instructions:["Lie on bench.","Open arms wide, then bring together."],images:["/exercises/Dumbbell_Flies.webp"]},{id:"lateral_raises",name:"Lateral Raises",category:"Push",subcategory:"Shoulders",targetMuscles:["Side Delts"],instructions:["Raise arms to sides."],images:["/exercises/dumbbell_lateral_raise.webp"]},{id:"dumbbell_kickbacks",name:"Dumbbell Kickbacks",category:"Push",subcategory:"Triceps",targetMuscles:["Triceps"],instructions:["Hinge forward.","Extend arm back."],images:["/exercises/dumbbell_kickbacks.webp"]},{id:"cable_pushdown",name:"Cable Pushdown",category:"Push",subcategory:"Triceps",targetMuscles:["Triceps"],instructions:["Push bar down using triceps."],images:["/exercises/tricep_pulldown.webp"]},{id:"tricep_dips",name:"Tricep Dips",category:"Push",subcategory:"Triceps",targetMuscles:["Triceps"],instructions:["Support body on parallel bars.","Lower until elbows at 90 degrees."],images:["/exercises/Tricep_Dips.webp"]},{id:"barbell_squat",name:"Barbell Squat",category:"Legs",subcategory:"Squats",targetMuscles:["Quads","Glutes"],instructions:["Squat with barbell on back."],images:["/exercises/barbell_squat.webp"]},{id:"leg_press",name:"Leg Press",category:"Legs",subcategory:"Squats",targetMuscles:["Quads"],instructions:["Press weight on machine."],images:["/exercises/leg_press.webp"]},{id:"pistol_squats",name:"Pistol Squats",category:"Legs",subcategory:"Squats",targetMuscles:["Quads","Balance"],instructions:["One-legged squat."],images:["/exercises/Pistol_Squats.webp"]},{id:"goblet_squat",name:"Goblet Squat",category:"Legs",subcategory:"Squats",targetMuscles:["Quads"],instructions:["Hold weight at chest.","Squat."],images:["/exercises/goblet_squat.webp"]},{id:"deadlift",name:"Deadlift",category:"Legs",subcategory:"Hinge Pattern",targetMuscles:["Posterior Chain"],instructions:["Lift bar from floor."],images:["/exercises/deadlift.webp"]},{id:"rack_pulls",name:"Rack Pulls",category:"Legs",subcategory:"Hinge Pattern",targetMuscles:["Back","Glutes"],instructions:["Deadlift from rack height."],images:["/exercises/Rack_Pulls.webp"]},{id:"barbell_good_mornings",name:"BarbellGood Mornings",category:"Legs",subcategory:"Hinge Pattern",targetMuscles:["Back","Hamstrings"],instructions:["Deadlift from rack height."],images:["/exercises/barbell_good_mornings.webp"]},{id:"leg_extension",name:"Leg Extension",category:"Legs",subcategory:"Isolation",targetMuscles:["Quads"],instructions:["Extend legs against machine resistance."],images:["/exercises/Leg_Extension.webp"]},{id:"leg_curl",name:"Leg Curl",category:"Legs",subcategory:"Isolation",targetMuscles:["Hamstrings"],instructions:["Curl legs against machine resistance."],images:["/exercises/Leg_Curl.webp"]},{id:"walking_lunge",name:"Walking Lunge",category:"Legs",subcategory:"Isolation",targetMuscles:["Quads","Glutes"],instructions:["Step forward and lower hips."],images:["/exercises/walking_lunge.webp"]},{id:"calf_raises",name:"Calf Raises",category:"Legs",subcategory:"Calves",targetMuscles:["Calves"],instructions:["Raise heels."],images:["/exercises/calf_raise.webp"]},{id:"glute_bridges",name:"Glute Bridges",category:"Legs",subcategory:"Glutes",targetMuscles:["Glutes"],instructions:["Lie on back.","Lift hips."],images:["/exercises/Glute_Bridges.webp"]},{id:"reverse_wrist_curl",name:"Reverse Wrist Curl",category:"Stabilisers",subcategory:"Wrists",targetMuscles:["Forearm Extensors"],instructions:["Curl wrist up with palm down."],images:["/exercises/reverse_wrist_curl.webp"]},{id:"radial_wrist_tilts",name:"Radial Wrist Tilts",category:"Stabilisers",subcategory:"Wrists",targetMuscles:["Forearms"],instructions:["Tilt wrist thumb-side up."],images:["/exercises/Radial_Wrist_Tilts.webp"]},{id:"wrist_rotations",name:"Wrist Rotations",category:"Stabilisers",subcategory:"Wrists",targetMuscles:["Forearms"],instructions:["Rotate wrists with weight."],images:["/exercises/Wrist_Rotations.webp"]},{id:"wrist_curls",name:"Wrist Curls",category:"Stabilisers",subcategory:"Wrists",targetMuscles:["Forearm Flexors"],instructions:["Curl wrist up with palm up."],images:["/exercises/Wrist_Curls.webp"]},{id:"dumbbell_rear_delt_flies",name:"Dumbbell Rear Delt Flies",category:"Stabilisers",subcategory:"Rear Delts",targetMuscles:["Rear Delts"],instructions:["Hinge forward.","Raise arms to sides."],images:["/exercises/dumbbell_rear_delt_flies.webp"]},{id:"cable_face_pulls",name:"Cable Face Pulls",category:"Stabilisers",subcategory:"Rear Delts",targetMuscles:["Rear Delts"],instructions:["Pull rope to face."],images:["/exercises/face_pull.webp"]},{id:"archer_rows",name:"Archer Rows",category:"Stabilisers",subcategory:"Rear Delts",targetMuscles:["Back","Rear Delts"],instructions:["Row with one arm while other stays straight."],images:["/exercises/Archer_Rows.webp"]},{id:"one_arm_dumbbell_shrugs",name:"One Arm Dumbbell Shrugs",category:"Stabilisers",subcategory:"Scapular Control",targetMuscles:["Traps"],instructions:["Shrug shoulder up."],images:["/exercises/One_Arm_Dumbbell_Shrugs.webp"]},{id:"prone_overhead_db_press",name:"Prone Overhead Dumbbell Press",category:"Stabilisers",subcategory:"Scapular Control",targetMuscles:["Lower Traps"],instructions:["Lie prone.","Press light weights overhead."],images:["/exercises/Prone_Overhead_Dumbbell_Press.webp"]},{id:"incline_bench_db_iyts",name:"Incline Bench Dumbbell IYTs",category:"Stabilisers",subcategory:"Scapular Control",targetMuscles:["Lower Traps","Rear Delts"],instructions:["Form I, Y, T shapes with arms."],images:["/exercises/i-y-t_raises.webp"]},{id:"scapular_holds",name:"Scapular Holds",category:"Stabilisers",subcategory:"Scapular Control",targetMuscles:["Scapula"],instructions:["Hold scapular retraction."],images:["/exercises/Scapular_Holds.webp"]},{id:"scapular_pull_ups",name:"Scapular Pull-Ups",category:"Stabilisers",subcategory:"Scapular Control",targetMuscles:["Scapula"],instructions:["Hang from bar.","Depress and retract scapula without bending elbows."],images:["/exercises/Scapular_Pull-ups.webp"]},{id:"one_arm_scapular_holds",name:"1 Arm Scapular Holds",category:"Stabilisers",subcategory:"Scapular Control",targetMuscles:["Scapula"],instructions:["Hang from one arm.","Engage scapula."],images:["/exercises/one_arm_scapular_holds.webp"]},{id:"one_arm_scapular_pull_ups",name:"1 Arm Scapular Pull-Ups",category:"Stabilisers",subcategory:"Scapular Control",targetMuscles:["Scapula"],instructions:["One arm hang.","Depress scapula."],images:["/exercises/one_arm_scapular_pull_ups.webp"]},{id:"trx_iyts",name:"TRX IYTs",category:"Stabilisers",subcategory:"Scapular Control",targetMuscles:["Back"],instructions:["Use TRX to perform I, Y, T raises."],images:["/exercises/trx_iyts.webp"]},{id:"dumbbell_overhead_rotations",name:"Dumbbell Overhead Rotations",category:"Stabilisers",subcategory:"Rotator Cuff",targetMuscles:["Rotator Cuff"],instructions:["Press overhead.","Rotate shoulders."],images:["/exercises/Dumbbell_Overhead_Rotations.webp"]},{id:"external_side_lying_rotations",name:"External Side Lying Rotations",category:"Stabilisers",subcategory:"Rotator Cuff",targetMuscles:["Rotator Cuff"],instructions:["Lie on side.","Rotate arm up."],images:["/exercises/External_Side_Lying_Rotations.webp"]},{id:"prone_bench_rotations",name:"Prone Bench Rotations",category:"Stabilisers",subcategory:"Rotator Cuff",targetMuscles:["Rotator Cuff"],instructions:["Lie prone.","Rotate arms."],images:["/exercises/Prone_Bench_Rotations.webp"]},{id:"cable_external_rotations",name:"Cable External Rotations",category:"Stabilisers",subcategory:"Rotator Cuff",targetMuscles:["Rotator Cuff"],instructions:["Use cable.","Rotate arm away from body."],images:["/exercises/Cable_External_Rotations.webp"]},{id:"cable_internal_rotation",name:"Cable Internal Rotation",category:"Stabilisers",subcategory:"Rotator Cuff",targetMuscles:["Rotator Cuff"],instructions:["Use cable.","Rotate arm across body."],images:["/exercises/Cable_Internal_Rotation.webp"]},{id:"internal_side_lying_rotations",name:"Internal Side Lying Rotations",category:"Stabilisers",subcategory:"Internal Rotation/Flexors",targetMuscles:["Rotator Cuff"],instructions:["Lie on side.","Rotate arm inward."],images:["/exercises/Internal_Side_Lying_Rotations.webp"]},{id:"hanging_l_hold",name:"Hanging L Hold",category:"Core",subcategory:"Leg Raise",targetMuscles:["Abs"],instructions:["Hang from bar.","Hold legs horizontal."],images:["/exercises/Hanging_L_Hold.webp"]},{id:"supine_leg_raises",name:"Supine Leg Raises",category:"Core",subcategory:"Leg Raise",targetMuscles:["Abs"],instructions:["Lie on back.","Raise legs."],images:["/exercises/Supine_Leg_Raises.webp"]},{id:"hanging_leg_raises",name:"Hanging Leg Raises",category:"Core",subcategory:"Leg Raise",targetMuscles:["Abs"],instructions:["Hang from bar.","Raise legs to bar."],images:["/exercises/hanging_leg_raise.webp"]},{id:"lever_raises_tucked",name:"Lever Raises (tucked)",category:"Core",subcategory:"Leg Raise",targetMuscles:["Abs"],instructions:["Front lever progression tucked."],images:["/exercises/Lever_Raises_tucked.webp"]},{id:"lever_raises_90",name:"Lever Raises (90)",category:"Core",subcategory:"Leg Raise",targetMuscles:["Abs"],instructions:["Front lever progression to 90 degrees."]},{id:"lever_raises",name:"Lever Raises",category:"Core",subcategory:"Leg Raise",targetMuscles:["Abs"],instructions:["Full front lever raises."]},{id:"crunches",name:"Crunches",category:"Core",subcategory:"Crunches",targetMuscles:["Upper Abs"],instructions:["Crunch up off floor."],images:["/exercises/crunch.webp"]},{id:"lower_ab_crunches",name:"Lower Ab Crunches",category:"Core",subcategory:"Crunches",targetMuscles:["Lower Abs"],instructions:["Reverse crunch movement."],images:["/exercises/Lower_Ab_Crunches.webp"]},{id:"weighted_crunches",name:"Weighted Crunches",category:"Core",subcategory:"Crunches",targetMuscles:["Abs"],instructions:["Crunch with weight."],images:["/exercises/Weighted_Crunches.webp"]},{id:"dead_bug",name:"Dead Bug",category:"Core",subcategory:"Crunches",targetMuscles:["Core"],instructions:["Opposite arm and leg extension lying on back."],images:["/exercises/Dead_Bug.webp"]},{id:"boat_pose",name:"Boat Pose",category:"Core",subcategory:"Crunches",targetMuscles:["Core"],instructions:["Static V hold on floor."],images:["/exercises/Boat_Pose.webp"]},{id:"v_sits",name:"V Sits",category:"Core",subcategory:"Crunches",targetMuscles:["Abs"],instructions:["Explosive sit up to V position."],images:["/exercises/V_Sits.webp"]},{id:"kettle_bell_twists",name:"Kettle Bell Twists",category:"Core",subcategory:"Rotation",targetMuscles:["Obliques"],instructions:["Russian twist with KB."],images:["/exercises/russian_twists.webp"]},{id:"twisting_crunches",name:"Twisting Crunches",category:"Core",subcategory:"Rotation",targetMuscles:["Obliques"],instructions:["Crunch with rotation."],images:["/exercises/Twisting_Crunches.webp"]},{id:"supine_windscreen_wipers",name:"Supine Windscreen Wipers",category:"Core",subcategory:"Rotation",targetMuscles:["Obliques"],instructions:["Lie on back.","Rotate legs side to side."],images:["/exercises/Supine_Windscreen_Wipers.webp"]},{id:"hanging_windscreen_wipers",name:"Hanging Windscreen Wipers",category:"Core",subcategory:"Rotation",targetMuscles:["Obliques"],instructions:["Hang from bar.","Rotate legs side to side."],images:["/exercises/Hanging_Windscreen_Wipers.webp"]},{id:"thread_the_needle",name:"Thread the Needle",category:"Core",subcategory:"Rotation",targetMuscles:["Obliques","Mobility"],instructions:["Plank position.","Reach under body."],images:["/exercises/Thread_the_Needle.webp"]},{id:"plank",name:"Plank",category:"Core",subcategory:"Stability",targetMuscles:["Core"],instructions:["Hold plank position."],images:["/exercises/plank.webp"]},{id:"dolphin_plank",name:"Dolphin Plank",category:"Core",subcategory:"Stability",targetMuscles:["Core"],instructions:["Plank on forearms with hips high."],images:["/exercises/Dolphin_Plank.webp"]},{id:"copenhagen_plank",name:"Copenhagen Plank",category:"Core",subcategory:"Stability",targetMuscles:["Adductors","Core"],instructions:["Side plank with top leg supported."],images:["/exercises/Copenhagen_Plank.webp"]},{id:"side_plank",name:"Side Plank",category:"Core",subcategory:"Stability",targetMuscles:["Obliques"],instructions:["Hold side plank."],images:["/exercises/side_plank.webp"]},{id:"prone_dish_hold",name:"Prone Dish Hold",category:"Core",subcategory:"Stability",targetMuscles:["Posterior Chain"],instructions:["Superman hold."],images:["/exercises/Prone_Dish_Hold.webp"]},{id:"supine_dish_hold",name:"Supine Dish Hold",category:"Core",subcategory:"Stability",targetMuscles:["Core"],instructions:["Hollow body hold (lower)."],images:["/exercises/Supine_Dish_Hold.webp"]},{id:"hollow_body_hold",name:"Hollow Body Hold",category:"Core",subcategory:"Stability",targetMuscles:["Core"],instructions:["Hold hollow body position."],images:["/exercises/Hollow_Body_Hold.webp"]},{id:"prone_dish_lifts",name:"Prone Dish Lifts",category:"Core",subcategory:"Stability",targetMuscles:["Posterior Chain"],instructions:["Lifting into superman position reps."],images:["/exercises/Prone_Dish_Lifts.webp"]},{id:"bicep_stretch",name:"Bicep Stretch",category:"Mobility",subcategory:"Upper Body",targetMuscles:["Biceps"],instructions:["Stretch biceps."],images:["/exercises/Bicep_Stretch.webp"]},{id:"finger_stretches",name:"Finger Stretches",category:"Mobility",subcategory:"Upper Body",targetMuscles:["Fingers"],instructions:["Stretch fingers."],images:["/exercises/Finger_Stretches.webp"]},{id:"pec_stretch",name:"Pec Stretch",category:"Mobility",subcategory:"Upper Body",targetMuscles:["Chest"],instructions:["Stretch chest."],images:["/exercises/Pec_Stretch.webp"]},{id:"lat_stretch",name:"Lat Stretch",category:"Mobility",subcategory:"Upper Body",targetMuscles:["Lats"],instructions:["Stretch lats."],images:["/exercises/Lat_Stretch.webp"]},{id:"wrist_stretches",name:"Wrist Stretches",category:"Mobility",subcategory:"Upper Body",targetMuscles:["Wrists"],instructions:["Stretch wrists."],images:["/exercises/wrist_stretches.webp"]},{id:"pancake_fold",name:"Pancake Fold",category:"Mobility",subcategory:"Torso Chain",targetMuscles:["Hips","Back"],instructions:["Seated straddle fold."],images:["/exercises/Pancake_Fold.webp"]},{id:"open_books",name:"Open Books",category:"Mobility",subcategory:"Torso Chain",targetMuscles:["Thoracic Spine"],instructions:["Side lying thoracic rotation."],images:["/exercises/Open_Books.webp"]},{id:"good_mornings",name:"Good Mornings",category:"Mobility",subcategory:"Torso Chain",targetMuscles:["Hamstrings","Back"],instructions:["Hinge with straight back."],images:["/exercises/Good_Mornings.webp"]},{id:"calf_stretch",name:"Calf Stretch",category:"Mobility",subcategory:"Lower Leg",targetMuscles:["Calves"],instructions:["Stretch calves."],images:["/exercises/Calf_Stretch.webp"]},{id:"donkey_calf_raise",name:"Donkey Calf Raise",category:"Mobility",subcategory:"Lower Leg",targetMuscles:["Calves"],instructions:["Calf raise bent over."],images:["/exercises/Donkey_Calf_Raise.webp"]},{id:"one_leg_calf_squats",name:"1 Leg Calf Squats",category:"Mobility",subcategory:"Lower Leg",targetMuscles:["Calves","Balance"],instructions:["Squat on one leg, heel raised."],images:["/exercises/1_Leg_Calf_Squats.webp"]},{id:"wall_calf_stretch",name:"Wall Calf Stretch",category:"Mobility",subcategory:"Lower Leg",targetMuscles:["Calves"],instructions:["Stretch against wall."],images:["/exercises/Wall_Calf_Stretch.webp"]},{id:"fishermans",name:"Fishermans",category:"Mobility",subcategory:"Lower Leg",targetMuscles:["Ankles"],instructions:["Kneeling ankle stretch."],images:["/exercises/Fishermans.webp"]},{id:"barre_lift",name:"Barre Lift",category:"Mobility",subcategory:"Hips/Lower Body",targetMuscles:["Hips"],instructions:["Lift leg at barre."],images:["/exercises/Barre_Lift.webp"]},{id:"fire_hydrants",name:"Fire Hydrants",category:"Mobility",subcategory:"Hips/Lower Body",targetMuscles:["Glutes"],instructions:["Quadruped hip abduction."],images:["/exercises/Fire_Hydrants.webp"]},{id:"supine_quad_stretch",name:"Supine Quad Stretch",category:"Mobility",subcategory:"Hips/Lower Body",targetMuscles:["Quads"],instructions:["Lie back with bent knee."],images:["/exercises/Supine_Quad_Stretch.webp"]},{id:"long_lunges",name:"Long Lunges",category:"Mobility",subcategory:"Hips/Lower Body",targetMuscles:["Hip Flexors"],instructions:["Deep lunge."],images:["/exercises/long_lunges.webp"]},{id:"cossack_squats",name:"Cossack Squats",category:"Mobility",subcategory:"Hips/Lower Body",targetMuscles:["Hips","Adductors"],instructions:["Side lunge."],images:["/exercises/Cossack_Squats.webp"]},{id:"front_splits",name:"Front Splits",category:"Mobility",subcategory:"Hips/Lower Body",targetMuscles:["Hamstrings","Hip Flexors"],instructions:["Split forward/back."],images:["/exercises/Front_Splits.webp"]},{id:"side_splits",name:"Side Splits",category:"Mobility",subcategory:"Hips/Lower Body",targetMuscles:["Adductors"],instructions:["Straddle split."],images:["/exercises/Side_Splits.webp"]},{id:"front_swings",name:"Front Swings",category:"Mobility",subcategory:"Hips/Lower Body",targetMuscles:["Hips"],instructions:["Swing leg forward/back."],images:["/exercises/Front_Swings.webp"]},{id:"side_swings",name:"Side Swings",category:"Mobility",subcategory:"Hips/Lower Body",targetMuscles:["Hips"],instructions:["Swing leg side to side."],images:["/exercises/Side_Swings.webp"]},{id:"hamstring_stretch",name:"Hamstring Stretch",category:"Mobility",subcategory:"Hips/Lower Body",targetMuscles:["Hamstrings"],instructions:["Stretch hamstring."],images:["/exercises/Hamstring_Stretch.webp"]},{id:"butterfly",name:"Butterfly",category:"Mobility",subcategory:"Hips/Lower Body",targetMuscles:["Hips"],instructions:["Seated hip opener."],images:["/exercises/Butterfly.webp"]},{id:"horse_squat",name:"Horse Squat",category:"Mobility",subcategory:"Hips/Lower Body",targetMuscles:["Hips","Quads"],instructions:["Wide stance squat."],images:["/exercises/Horse_Squat.webp"]},{id:"supine_frog",name:"Supine Frog",category:"Mobility",subcategory:"Hips/Lower Body",targetMuscles:["Hips"],instructions:["Lie on back, knees wide."],images:["/exercises/supine_frog.webp"]},{id:"prone_frog",name:"Prone Frog",category:"Mobility",subcategory:"Hips/Lower Body",targetMuscles:["Hips"],instructions:["Lie on front, knees wide."],images:["/exercises/Prone_Frog.webp"]},{id:"glute_stretch",name:"Glute Stretch",category:"Mobility",subcategory:"Hips/Lower Body",targetMuscles:["Glutes"],instructions:["Stretch glutes."],images:["/exercises/Glute_Stretch.webp"]},{id:"childs_pose",name:"Childs Pose",category:"Mobility",subcategory:"Hips/Lower Body",targetMuscles:["Back","Hips"],instructions:["Resting pose."],images:["/exercises/Childs_Pose.webp"]},{id:"pigeon_pose",name:"Pigeon Pose",category:"Mobility",subcategory:"Hips/Lower Body",targetMuscles:["Glutes","Hips"],instructions:["Hip opener."],images:["/exercises/Pigeon_Pose.webp"]}];var wi=_('<div><div class="col set-num svelte-ow8x7m"> </div> <div class="col weight svelte-ow8x7m"><input type="number" placeholder="-" class="svelte-ow8x7m"/></div> <div class="col reps svelte-ow8x7m"><input type="number" placeholder="-" class="svelte-ow8x7m"/></div> <div class="col check svelte-ow8x7m"><button><!></button></div></div>');function Si(R,r){Qt(r,!1);let l=Ue(r,"setNumber",8),b=Ue(r,"set",12);const B=bs();function W(){b(b().completed=!b().completed,!0),B("change",b()),b().completed&&B("complete")}Hs();var H=wi();let S;var q=i(H),x=i(q,!0);s(q);var y=a(q,2),T=i(y);O(T),s(y);var M=a(y,2),m=i(M);O(m),s(M);var P=a(M,2),w=i(P);let D;var L=i(w);{var N=C=>{var J=xt("✓");c(C,J)};U(L,C=>{kt(b()),pt(()=>b().completed)&&C(N)})}s(w),s(P),s(H),I(()=>{S=Rt(H,1,"set-row svelte-ow8x7m",null,S,{completed:b().completed}),K(x,l()),D=Rt(w,1,"check-btn svelte-ow8x7m",null,D,{checked:b().completed})}),A(T,()=>b().weight,C=>b(b().weight=C,!0)),A(m,()=>b().reps,C=>b(b().reps=C,!0)),Bt("click",w,W),c(R,H),Jt()}var ki=_('<div><span class="dot svelte-1ni79z8"></span> <span class="text"> </span></div>'),xi=_("<button></button>"),Ci=_('<div class="exercise-card svelte-1ni79z8"><div class="header svelte-1ni79z8"><div class="title-group svelte-1ni79z8"><button class="icon-btn info-btn svelte-1ni79z8" aria-label="Exercise Info"><div class="info-icon svelte-1ni79z8">?</div></button> <div><h4 class="svelte-1ni79z8"> </h4> <button class="icon-btn timer-btn svelte-1ni79z8" aria-label="Open Timer" title="Interval Timer">⏱</button> <div class="benchmarks svelte-1ni79z8"></div></div></div> <button class="icon-btn delete-btn svelte-1ni79z8" aria-label="Delete Exercise">🗑️</button></div> <div class="table-header svelte-1ni79z8"><div class="col">Set</div> <div class="col">kg</div> <div class="col">Reps</div> <div class="col">✓</div></div> <div class="sets"></div> <button class="add-set-btn svelte-1ni79z8">+ Add Set</button> <div class="difficulty-footer svelte-1ni79z8"><span class="diff-label svelte-1ni79z8">How did it feel?</span> <div class="diff-circles svelte-1ni79z8"></div></div></div>');function Ti(R,r){Qt(r,!1);let l=Ue(r,"exercise",12),b=Ue(r,"benchmarks",24,()=>({}));const B=bs();function W(){const Q=l().sets[l().sets.length-1],E={weight:Q?Q.weight:0,reps:Q?Q.reps:0,isWarmup:!1,isFailure:!1,isDropSet:!1,completed:!1};l(l().sets=[...l().sets,E],!0)}const H=["Green","Yellow","Orange","Red"];Hs();var S=Ci(),q=i(S),x=i(q),y=i(x),T=a(y,2),M=i(T),m=i(M,!0);s(M);var P=a(M,2),w=a(P,2);fe(w,5,()=>H,_e,(Q,E)=>{var j=Kt(),X=Et(j);{var oe=ve=>{var de=ki();Rt(de,1,"benchmark-pill svelte-1ni79z8",null,{},{"has-data":!0});var ee=a(i(de),2),ne=i(ee);s(ee),s(de),I(z=>{zs(de,`--pill-color: var(--color-${z??""})`),K(ne,`${kt(b()),e(E),pt(()=>b()[e(E)]?.weight)??""}kg x ${kt(b()),e(E),pt(()=>b()[e(E)]?.reps)??""}`)},[()=>(e(E),pt(()=>e(E).toLowerCase()))]),c(ve,de)};U(X,ve=>{kt(b()),e(E),pt(()=>b()[e(E)])&&ve(oe)})}c(Q,j)}),s(w),s(T),s(x);var D=a(x,2);s(q);var L=a(q,4);fe(L,5,()=>(kt(l()),pt(()=>l().sets)),_e,(Q,E,j)=>{Si(Q,{setNumber:j+1,get set(){return(kt(l()),pt(()=>l().sets))[j]},set set(X){(kt(l()),pt(()=>l().sets))[j]=X,va(()=>l())},$$events:{complete(X){Bs.call(this,r,X)},change(X){Bs.call(this,r,X)}},$$legacy:!0})}),s(L);var N=a(L,2),C=a(N,2),J=a(i(C),2);fe(J,5,()=>H,_e,(Q,E)=>{var j=xi();let X;I(oe=>{X=Rt(j,1,"diff-circle svelte-1ni79z8",null,X,{selected:l().difficulty===e(E)}),zs(j,`--circle-color: var(--color-${oe??""})`),zt(j,"aria-label",`Mark as ${e(E)??""}`)},[()=>(e(E),pt(()=>e(E).toLowerCase()))]),Bt("click",j,()=>l(l().difficulty=e(E),!0)),c(Q,j)}),s(J),s(C),s(S),I(()=>K(m,(kt(l()),pt(()=>l().name)))),Bt("click",y,()=>B("info",l())),Bt("click",P,()=>B("timer",l())),Bt("click",D,()=>B("delete",l())),Bt("click",N,W),c(R,S),Jt()}const Li=R=>R;function Ws(R){const r=R-1;return r*r*r+1}function Qs(R){const r=typeof R=="string"&&R.match(/^\s*(-?[\d.]+)([^\s]*)\s*$/);return r?[parseFloat(r[1]),r[2]||"px"]:[R,"px"]}function Is(R,{delay:r=0,duration:l=400,easing:b=Li}={}){const B=+getComputedStyle(R).opacity;return{delay:r,duration:l,easing:b,css:W=>`opacity: ${W*B}`}}function Zs(R,{delay:r=0,duration:l=400,easing:b=Ws,x:B=0,y:W=0,opacity:H=0}={}){const S=getComputedStyle(R),q=+S.opacity,x=S.transform==="none"?"":S.transform,y=q*(1-H),[T,M]=Qs(B),[m,P]=Qs(W);return{delay:r,duration:l,easing:b,css:(w,D)=>`
			transform: ${x} translate(${(1-w)*T}${M}, ${(1-w)*m}${P});
			opacity: ${q-y*D}`}}function Gr(R,{delay:r=0,duration:l=400,easing:b=Ws,axis:B="y"}={}){const W=getComputedStyle(R),H=+W.opacity,S=B==="y"?"height":"width",q=parseFloat(W[S]),x=B==="y"?["top","bottom"]:["left","right"],y=x.map(L=>`${L[0].toUpperCase()}${L.slice(1)}`),T=parseFloat(W[`padding${y[0]}`]),M=parseFloat(W[`padding${y[1]}`]),m=parseFloat(W[`margin${y[0]}`]),P=parseFloat(W[`margin${y[1]}`]),w=parseFloat(W[`border${y[0]}Width`]),D=parseFloat(W[`border${y[1]}Width`]);return{delay:r,duration:l,easing:b,css:L=>`overflow: hidden;opacity: ${Math.min(L*20,1)*H};${S}: ${L*q}px;padding-${x[0]}: ${L*T}px;padding-${x[1]}: ${L*M}px;margin-${x[0]}: ${L*m}px;margin-${x[1]}: ${L*P}px;border-${x[0]}-width: ${L*w}px;border-${x[1]}-width: ${L*D}px;min-${S}: 0`}}function $s(R,{delay:r=0,duration:l=400,easing:b=Ws,start:B=0,opacity:W=0}={}){const H=getComputedStyle(R),S=+H.opacity,q=H.transform==="none"?"":H.transform,x=1-B,y=S*(1-W);return{delay:r,duration:l,easing:b,css:(T,M)=>`
			transform: ${q} scale(${1-x*M});
			opacity: ${S-y*M}
		`}}function qi(R){const r=R-1;return r*r*r+1}class Gs{static audioContext=null;static gainNode=null;static isInitialized=!1;static init(){if(!this.isInitialized)try{(window.AudioContext||window.webkitAudioContext)&&(this.audioContext=new AudioContext,this.gainNode=this.audioContext.createGain(),this.gainNode.connect(this.audioContext.destination),this.isInitialized=!0)}catch(r){console.warn("AudioContext not supported",r)}}static async playChime(){if(this.isInitialized||this.init(),!this.audioContext||!this.gainNode)return;this.audioContext.state==="suspended"&&await this.audioContext.resume();const r=this.audioContext.currentTime,l=this.audioContext.createOscillator();l.type="sine",l.frequency.setValueAtTime(880,r),l.frequency.exponentialRampToValueAtTime(.01,r+1.5);const b=this.audioContext.createGain();b.gain.setValueAtTime(.3,r),b.gain.exponentialRampToValueAtTime(.001,r+1.5),l.connect(b),b.connect(this.gainNode),l.start(r),l.stop(r+1.5);const B=this.audioContext.createOscillator();B.type="triangle",B.frequency.setValueAtTime(1760,r),B.frequency.exponentialRampToValueAtTime(.01,r+1);const W=this.audioContext.createGain();W.gain.setValueAtTime(.1,r),W.gain.exponentialRampToValueAtTime(.001,r+1),B.connect(W),W.connect(this.gainNode),B.start(r),B.stop(r+1)}static vibrate(r=200){typeof navigator<"u"&&navigator.vibrate&&navigator.vibrate(r)}static async playCompletionAlert(){this.vibrate([500,100,500]),await this.playChime()}static async playTick(){if(this.isInitialized||this.init(),!this.audioContext||!this.gainNode)return;this.audioContext.state==="suspended"&&await this.audioContext.resume();const r=this.audioContext.currentTime,l=this.audioContext.createOscillator();l.type="sine",l.frequency.setValueAtTime(600,r);const b=this.audioContext.createGain();b.gain.setValueAtTime(.05,r),b.gain.exponentialRampToValueAtTime(.001,r+.1),l.connect(b),b.connect(this.gainNode),l.start(r),l.stop(r+.1),this.vibrate(50)}}var Mi=_('<div class="setup-form svelte-18i4gcv"><div class="input-group svelte-18i4gcv"><label for="work-duration" class="svelte-18i4gcv">Work</label> <div class="time-adjuster svelte-18i4gcv"><button class="svelte-18i4gcv">−</button> <span class="val svelte-18i4gcv"> </span> <button class="svelte-18i4gcv">+</button></div></div> <div class="input-group svelte-18i4gcv"><label for="rest-duration" class="svelte-18i4gcv">Rest</label> <div class="time-adjuster svelte-18i4gcv"><button class="svelte-18i4gcv">−</button> <span class="val svelte-18i4gcv"> </span> <button class="svelte-18i4gcv">+</button></div></div> <div class="input-group svelte-18i4gcv"><label for="num-sets" class="svelte-18i4gcv">Sets</label> <div class="time-adjuster svelte-18i4gcv"><button class="svelte-18i4gcv">−</button> <span class="val svelte-18i4gcv"> </span> <button class="svelte-18i4gcv">+</button></div></div> <button class="start-btn svelte-18i4gcv">▶ Start Interval</button></div>'),Pi=_('<div class="finished-state svelte-18i4gcv"><div class="check-icon svelte-18i4gcv">✓</div> <h3>Nicely Done!</h3> <button class="reset-btn svelte-18i4gcv">Back to Setup</button></div>'),Ri=_('<button class="ctl-btn pause svelte-18i4gcv">⏸</button>'),Di=_('<button class="ctl-btn play svelte-18i4gcv">▶</button>'),Ni=_('<div class="timer-circle svelte-18i4gcv"><svg viewBox="0 0 100 100" class="ring svelte-18i4gcv"><circle class="track svelte-18i4gcv" cx="50" cy="50" r="45"></circle><circle class="progress svelte-18i4gcv" cx="50" cy="50" r="45" stroke-dasharray="283"></circle></svg> <div class="timer-val svelte-18i4gcv"><div class="phase-label svelte-18i4gcv"> </div> <div class="digits svelte-18i4gcv"> </div></div></div> <div class="controls svelte-18i4gcv"><!> <button class="ctl-btn skip svelte-18i4gcv">⏭</button> <button class="ctl-btn stop svelte-18i4gcv" style="font-size: 1rem; padding: 1rem;">Stop</button></div>',1),Bi=_('<div class="overlay svelte-18i4gcv" role="button" tabindex="0"><div><div class="header svelte-18i4gcv"><span class="title svelte-18i4gcv"><!></span> <button class="close-btn svelte-18i4gcv">✕</button></div> <div class="content svelte-18i4gcv"><!></div></div></div>');function ea(R,r){Qt(r,!0);let l=Ue(r,"visible",15,!1),b=Ue(r,"defaultSets",3,3),B=Ue(r,"associatedExerciseId",7,null),W=Ue(r,"onComplete",3,()=>{}),H=Ue(r,"onClose",3,()=>{}),S=u("SETUP"),q=u("PAUSED"),x=u(30),y=u(60),T=u(3),M=u(1),m=u(30),P=u(null),w=u(null);const D="interval_timer_prefs";let L=null;rs(()=>{l()&&(Gs.init(),e(S)==="SETUP"&&(N(),b()>0&&t(T,b())))}),hs(()=>(Q(),L=setInterval(z,100),()=>clearInterval(L)));function N(){if(B())try{const Z=JSON.parse(localStorage.getItem(D)||"{}"),Y=Z[B()]||Z.default;Y&&(t(x,Y.work||30,!0),t(y,Y.rest||60,!0))}catch(Z){console.warn(Z)}}function C(){try{const Z=JSON.parse(localStorage.getItem(D)||"{}"),Y={work:e(x),rest:e(y)};B()&&(Z[B()]=Y),Z.default=Y,localStorage.setItem(D,JSON.stringify(Z))}catch(Z){console.error(Z)}}function J(){if(e(S)==="SETUP")return;const Z={phase:e(S),runningState:e(q),remaining:e(m),endTimestamp:e(P),configWork:e(x),configRest:e(y),configSets:e(T),currentSet:e(M),associatedExerciseId:B(),pausedTimeRemaining:e(w),timestamp:Date.now()};localStorage.setItem("active_interval_timer",JSON.stringify(Z))}function Q(){try{const Z=localStorage.getItem("active_interval_timer");if(Z){const Y=JSON.parse(Z);Date.now()-Y.timestamp<36e5&&(t(S,Y.phase,!0),t(q,Y.runningState,!0),t(m,Y.remaining,!0),t(P,Y.endTimestamp,!0),t(x,Y.configWork,!0),t(y,Y.configRest,!0),t(T,Y.configSets,!0),t(M,Y.currentSet,!0),B(Y.associatedExerciseId),t(w,Y.pausedTimeRemaining,!0),e(S)!=="SETUP"&&e(S)!=="FINISHED"&&l(!0))}}catch{}}function E(){localStorage.removeItem("active_interval_timer")}function j(){C(),t(S,"WORK"),t(M,1),X(e(x))}function X(Z){t(q,"RUNNING"),t(m,Z,!0),t(P,Date.now()+Z*1e3),J(),Gs.playChime()}function oe(){t(q,"PAUSED"),t(w,e(m),!0),t(P,null),J()}function ve(){e(w)&&(t(q,"RUNNING"),t(P,Date.now()+e(w)*1e3),J())}function de(){ne()}function ee(){t(S,"SETUP"),t(q,"PAUSED"),E()}function ne(){Gs.playCompletionAlert(),e(S)==="WORK"?e(M)>=e(T)?(t(S,"FINISHED"),t(q,"PAUSED"),t(P,null),W()(),E()):(t(S,"REST"),X(e(y))):e(S)==="REST"&&(pa(M),t(S,"WORK"),X(e(x)))}function z(){if(!(!l()||e(S)==="SETUP"||e(S)==="FINISHED"||e(q)==="PAUSED")&&e(P)){const Z=Date.now(),Y=e(P)-Z;t(m,Math.ceil(Y/1e3),!0),e(m)<=0&&(t(m,0),ne())}}function ae(Z){const Y=Math.floor(Z/60),He=Z%60;return`${Y}:${He.toString().padStart(2,"0")}`}function ce(){(e(S)==="SETUP"||e(S)==="FINISHED")&&ee(),l(!1),H()&&H()()}var ie=Kt(),pe=Et(ie);{var ge=Z=>{var Y=Bi();Y.__click=te=>{te.target===te.currentTarget&&ce()},Y.__keydown=te=>{te.key==="Escape"&&ce()};var He=i(Y);let st;var gt=i(He),nt=i(gt),Dt=i(nt);{var Ct=te=>{var he=xt("Timer Setup");c(te,he)},mt=te=>{var he=Kt(),Ke=Et(he);{var Fe=ue=>{var ke=xt("Complete");c(ue,ke)},Ae=ue=>{var ke=xt();I(()=>K(ke,`Set ${e(M)??""} / ${e(T)??""}`)),c(ue,ke)};U(Ke,ue=>{e(S)==="FINISHED"?ue(Fe):ue(Ae,!1)},!0)}c(te,he)};U(Dt,te=>{e(S)==="SETUP"?te(Ct):te(mt,!1)})}s(nt);var ct=a(nt,2);ct.__click=ce,s(gt);var Gt=a(gt,2),ft=i(Gt);{var Te=te=>{var he=Mi(),Ke=i(he),Fe=a(i(Ke),2),Ae=i(Fe);Ae.__click=()=>t(x,Math.max(5,e(x)-5),!0);var ue=a(Ae,2),ke=i(ue,!0);s(ue);var Qe=a(ue,2);Qe.__click=()=>t(x,e(x)+5),s(Fe),s(Ke);var We=a(Ke,2),at=a(i(We),2),_t=i(at);_t.__click=()=>t(y,Math.max(5,e(y)-5),!0);var Ie=a(_t,2),ht=i(Ie,!0);s(Ie);var it=a(Ie,2);it.__click=()=>t(y,e(y)+5),s(at),s(We);var Re=a(We,2),Ye=a(i(Re),2),k=i(Ye);k.__click=()=>t(T,Math.max(1,e(T)-1),!0);var G=a(k,2),o=i(G,!0);s(G);var g=a(G,2);g.__click=()=>t(T,e(T)+1),s(Ye),s(Re);var F=a(Re,2);F.__click=j,s(he),I((V,v)=>{K(ke,V),K(ht,v),K(o,e(T))},[()=>ae(e(x)),()=>ae(e(y))]),c(te,he)},Pe=te=>{var he=Kt(),Ke=Et(he);{var Fe=ue=>{var ke=Pi(),Qe=a(i(ke),4);Qe.__click=()=>t(S,"SETUP"),s(ke),c(ue,ke)},Ae=ue=>{var ke=Ni(),Qe=Et(ke),We=i(Qe),at=a(i(We));s(We);var _t=a(We,2),Ie=i(_t),ht=i(Ie,!0);s(Ie);var it=a(Ie,2),Re=i(it,!0);s(it),s(_t),s(Qe);var Ye=a(Qe,2),k=i(Ye);{var G=V=>{var v=Ri();v.__click=oe,c(V,v)},o=V=>{var v=Di();v.__click=ve,c(V,v)};U(k,V=>{e(q)==="RUNNING"?V(G):V(o,!1)})}var g=a(k,2);g.__click=de;var F=a(g,2);F.__click=ee,s(Ye),I(V=>{zt(at,"stroke-dashoffset",283*(1-e(m)/(e(S)==="WORK"?e(x):e(y)))),K(ht,e(S)),K(Re,V)},[()=>ae(e(m))]),c(ue,ke)};U(Ke,ue=>{e(S)==="FINISHED"?ue(Fe):ue(Ae,!1)},!0)}c(te,he)};U(ft,te=>{e(S)==="SETUP"?te(Te):te(Pe,!1)})}s(Gt),s(He),s(Y),I(()=>st=Rt(He,1,"timer-card svelte-18i4gcv",null,st,{work:e(S)==="WORK",rest:e(S)==="REST"})),ds(3,He,()=>$s,()=>({start:.96,duration:300,easing:qi})),ds(3,Y,()=>Is,()=>({duration:250})),c(Z,Y)};U(pe,Z=>{l()&&Z(ge)})}c(R,ie),Jt()}ls(["click","keydown"]);var Gi=_("<img/>"),Fi=_('<div class="animation-frame svelte-zbmy0k"></div>'),Ai=_('<div class="visual-placeholder svelte-zbmy0k"><span>No animation available</span></div>'),Oi=_("<li> </li>"),Ei=_('<div class="modal-overlay svelte-zbmy0k" role="button" tabindex="0" aria-label="Close modal"><div class="modal-content svelte-zbmy0k" role="dialog" aria-modal="true" tabindex="-1"><div class="header svelte-zbmy0k"><h3 class="svelte-zbmy0k"> </h3> <span class="category svelte-zbmy0k"> </span> <button class="close-btn svelte-zbmy0k" aria-label="Close">×</button></div> <div class="visual-container svelte-zbmy0k"><!> <div class="muscles svelte-zbmy0k"> </div></div> <div class="instructions svelte-zbmy0k"><h4>Instructions</h4> <ol class="svelte-zbmy0k"></ol></div></div></div>');function Hi(R,r){Qt(r,!1);let l=Ue(r,"exercise",8),b=Ue(r,"visible",8,!1);const B=bs();let W=_a(0),H;function S(){l().images&&l().images.length>0&&(t(W,0),H=setInterval(()=>{t(W,(e(W)+1)%l().images.length)},800))}function q(){H&&clearInterval(H)}ga(()=>{q()});function x(){B("close")}ma(()=>(kt(b()),kt(l())),()=>{b()&&l().images?.length?S():q()}),fa(),Hs();var y=Kt(),T=Et(y);{var M=m=>{var P=Ei(),w=i(P),D=i(w),L=i(D),N=i(L,!0);s(L);var C=a(L,2),J=i(C,!0);s(C);var Q=a(C,2);s(D);var E=a(D,2),j=i(E);{var X=z=>{var ae=Fi();fe(ae,5,()=>(kt(l()),pt(()=>l().images)),_e,(ce,ie,pe)=>{var ge=Gi();let Z;I(()=>{zt(ge,"src",`${Ra??""}${e(ie)??""}`),zt(ge,"alt",`${kt(l()),pt(()=>l().name)??""} frame ${pe+1}`),Z=Rt(ge,1,"svelte-zbmy0k",null,Z,{active:pe===e(W)})}),c(ce,ge)}),s(ae),c(z,ae)},oe=z=>{var ae=Ai();c(z,ae)};U(j,z=>{kt(l()),pt(()=>l().images&&l().images.length>0)?z(X):z(oe,!1)})}var ve=a(j,2),de=i(ve);s(ve),s(E);var ee=a(E,2),ne=a(i(ee),2);fe(ne,5,()=>(kt(l()),pt(()=>l().instructions)),_e,(z,ae)=>{var ce=Oi(),ie=i(ce,!0);s(ce),I(()=>K(ie,e(ae))),c(z,ce)}),s(ne),s(ee),s(w),s(P),I(z=>{K(N,(kt(l()),pt(()=>l().name))),K(J,(kt(l()),pt(()=>l().category))),K(de,`Targets: ${z??""}`)},[()=>(kt(l()),pt(()=>l().targetMuscles.join(", ")))]),Bt("click",Q,x),ds(3,w,()=>Zs,()=>({y:50,duration:300})),Bt("click",w,Us(function(z){Bs.call(this,r,z)})),Bt("keydown",w,Us(function(z){Bs.call(this,r,z)})),Bt("click",P,x),Bt("keydown",P,z=>z.key==="Escape"&&x()),c(m,P)};U(T,m=>{b()&&m(M)})}c(R,y),Jt()}var Wi=_('<div class="input-group svelte-12q9g58"><label for="delete-confirm" class="svelte-12q9g58">Type <strong> </strong> to confirm:</label> <input type="text" id="delete-confirm" autocomplete="off" class="svelte-12q9g58"/></div>'),Ii=_('<button class="backdrop svelte-12q9g58" aria-label="Close modal"></button> <div class="modal svelte-12q9g58" role="dialog" aria-modal="true"><h3 class="svelte-12q9g58"> </h3> <p class="svelte-12q9g58"> </p> <!> <div class="actions svelte-12q9g58"><button class="btn-cancel svelte-12q9g58">Cancel</button> <button class="btn-delete svelte-12q9g58">Delete</button></div></div>',1);function ji(R,r){Qt(r,!0);let l=Ue(r,"isOpen",3,!1),b=Ue(r,"title",3,"Confirm Delete"),B=Ue(r,"message",3,"Are you sure you want to delete this item? This action cannot be undone."),W=Ue(r,"confirmKeyword",3,"delete"),H=Ue(r,"requireInput",3,!0),S=u(""),q=Pt(()=>!H()||e(S).toLowerCase()===W().toLowerCase());function x(){e(q)&&(r.onConfirm(),t(S,""))}function y(){r.onCancel(),t(S,"")}var T=Kt(),M=Et(T);{var m=P=>{var w=Ii(),D=Et(w);D.__click=y;var L=a(D,2),N=i(L),C=i(N,!0);s(N);var J=a(N,2),Q=i(J,!0);s(J);var E=a(J,2);{var j=de=>{var ee=Wi(),ne=i(ee),z=a(i(ne)),ae=i(z,!0);s(z),xe(),s(ne);var ce=a(ne,2);O(ce),s(ee),I(()=>{K(ae,W()),zt(ce,"placeholder",W())}),A(ce,()=>e(S),ie=>t(S,ie)),c(de,ee)};U(E,de=>{H()&&de(j)})}var X=a(E,2),oe=i(X);oe.__click=y;var ve=a(oe,2);ve.__click=x,s(X),s(L),I(()=>{K(C,b()),K(Q,B()),ve.disabled=!e(q)}),ds(3,D,()=>Is,()=>({duration:200})),ds(3,L,()=>$s,()=>({duration:200,start:.9})),c(P,w)};U(M,P=>{l()&&P(m)})}c(R,T),Jt()}ls(["click"]);var zi=_('<div class="form-header-row" style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 1rem;"><h2 style="margin: 0; font-size: 1.25rem; color: var(--teal-primary);">New Gym Session</h2></div>'),Vi=_("<span>Saved! ✓</span>"),Ui=_("<button><!></button>"),Ki=_("<option> </option>"),Qi=_("<option> </option>"),Ji=_('<div class="filter-row svelte-1w0zsmt"><select class="category-select svelte-1w0zsmt"><option>Select Category...</option><!></select> <select class="subcategory-select svelte-1w0zsmt"><option>Select Subcategory...</option><!></select></div>'),Yi=_('<span class="details svelte-1w0zsmt"> </span>'),Xi=_('<button class="exercise-item-simple svelte-1w0zsmt"><span class="name svelte-1w0zsmt"> </span> <!></button>'),Zi=_('<div class="no-results svelte-1w0zsmt"> </div>'),$i=_('<div class="modal-overlay svelte-1w0zsmt" role="button" tabindex="0" aria-label="Close modal"><div class="picker-modal svelte-1w0zsmt" role="dialog" aria-modal="true" tabindex="-1"><div class="picker-header svelte-1w0zsmt"><h3>Add Exercise</h3> <div class="search-row svelte-1w0zsmt"><input type="text" placeholder="Search exercises..." class="svelte-1w0zsmt"/></div> <!></div> <div class="picker-content svelte-1w0zsmt"><div class="exercise-list-simple svelte-1w0zsmt"><!> <!></div></div></div></div>'),er=_('<div class="gym-session-form svelte-1w0zsmt"><div class="session-meta svelte-1w0zsmt"><!> <input type="text" class="session-name svelte-1w0zsmt" placeholder="Workout Name (e.g. Pull Day)"/> <div class="meta-row svelte-1w0zsmt"><label class="svelte-1w0zsmt">Date <div class="date-time-row svelte-1w0zsmt"><input type="date" class="svelte-1w0zsmt"/> <input type="time" class="svelte-1w0zsmt"/></div></label> <label class="svelte-1w0zsmt">Bodyweight (kg) <input type="number" placeholder="Optional" class="svelte-1w0zsmt"/></label> <label class="svelte-1w0zsmt">Block <select class="svelte-1w0zsmt"><option>Strength</option><option>Power</option><option>Power Endurance</option><option>Muscular Endurance</option></select></label></div></div> <div class="exercises-list"></div> <button class="add-exercise-btn svelte-1w0zsmt">+ Add Exercise</button> <div class="session-notes-container svelte-1w0zsmt"><label for="session-notes" class="svelte-1w0zsmt">Session Notes</label> <textarea id="session-notes" class="session-notes-area svelte-1w0zsmt" placeholder="How did the workout feel? Energy, sleep, stress..." rows="3"></textarea></div> <!> <!> <!> <!> <!></div>');function Fr(R,r){Qt(r,!0);const l=bs(),b="gym_session_draft";let B=Ue(r,"initialData",3,null),W=Pt(()=>!!B()),H=u(""),S=u(void 0),q=u(Ee([])),x=u(Ee(new Date().toISOString().split("T")[0])),y=u(Ee(new Date().toTimeString().split(" ")[0].slice(0,5))),T=u("Strength"),M=u(null),m=u(Ee([])),P=u("");hs(async()=>{if(B())t(H,B().name,!0),t(S,B().bodyweight,!0),t(q,B().exercises,!0),t(x,B().date,!0),t(y,B().time||"12:00",!0),t(T,B().trainingBlock||"Strength",!0),t(P,B().notes||"",!0),t(ve,!0);else{const G=localStorage.getItem(b);if(G)try{const o=JSON.parse(G);o.sessionName&&t(H,o.sessionName,!0),o.bodyweight&&t(S,o.bodyweight,!0),o.startTime&&t(x,o.startTime,!0),o.time&&t(y,o.time,!0),o.trainingBlock&&t(T,o.trainingBlock,!0),o.exercises&&t(q,o.exercises,!0),o.notes&&t(P,o.notes,!0)}catch(o){console.error("Failed to restore draft",o)}t(ve,!0)}const k=await xa();k.ok&&k.data&&t(m,k.data.map(G=>({...G,activityType:"gym_session",syncStatus:"synced"})),!0)}),rs(()=>{const k=e(m).filter(G=>(G.trainingBlock||"Strength")===e(T)&&G.date<e(x));k.sort((G,o)=>new Date(o.date).getTime()-new Date(G.date).getTime()),t(M,k.length>0?k[0]:null,!0)});function w(k){const G={Green:null,Yellow:null,Orange:null,Red:null},o=[...e(m)].sort((g,F)=>new Date(F.date).getTime()-new Date(g.date).getTime());for(const g of o){if(G.Green&&G.Yellow&&G.Orange&&G.Red)break;const F=g.exercises.find(V=>V.name===k);if(F&&F.difficulty&&!G[F.difficulty]){let V=null;for(const v of F.sets)(!V||v.weight>V.weight||v.weight===V.weight&&v.reps>V.reps)&&(V=v);V&&(G[F.difficulty]={weight:V.weight,reps:V.reps})}}return G}let D=u(!1),L=u(""),N=u(""),C=u(""),J=u(!1),Q=u(null),E=u(null),j=u(!1),X=u(null),oe=u(3),ve=u(!1);rs(()=>{if(e(ve)&&!e(W)&&typeof localStorage<"u"){const k={sessionName:e(H),bodyweight:e(S),startTime:e(x),time:e(y),trainingBlock:e(T),exercises:e(q),notes:e(P)};localStorage.setItem(b,JSON.stringify(k))}});let de=Pt(()=>Ns.filter(k=>{if(e(L))return k.name.toLowerCase().includes(e(L).toLowerCase())||k.targetMuscles.some(g=>g.toLowerCase().includes(e(L).toLowerCase()));const G=e(N)?k.category===e(N):!0,o=e(C)?k.subcategory===e(C):!0;return G&&o}));const ee=Array.from(new Set(Ns.map(k=>k.category))).sort();let ne=Pt(()=>e(N)?Array.from(new Set(Ns.filter(k=>k.category===e(N)).map(k=>k.subcategory))).sort():[]);function z(){t(C,"")}function ae(k){const G={id:crypto.randomUUID(),name:k.name,sets:[{weight:0,reps:0,isWarmup:!1,isFailure:!1,isDropSet:!1,completed:!1}]};t(q,[...e(q),G],!0),t(D,!1),t(L,""),t(N,""),t(C,"")}function ce(k){const G=k.detail;t(X,G.id,!0),t(oe,G.sets.length,!0),t(J,!0)}function ie(){}async function pe(){if(e(q).length===0)return;const k={date:e(x),time:e(y),name:e(H)||"Gym Workout",bodyweight:e(S),trainingBlock:e(T),exercises:e(q),notes:e(P)},G=e(W)&&B()?await Ca(B().id,k):await Ta(k);G.ok?(t(j,!0),e(W)||localStorage.removeItem(b),r.onSaved?r.onSaved():setTimeout(()=>{t(j,!1),l("save")},1500)):console.error("Failed to save gym session",G.error)}var ge=er(),Z=i(ge),Y=i(Z);{var He=k=>{var G=zi();c(k,G)};U(Y,k=>{e(W)||k(He)})}var st=a(Y,2);O(st);var gt=a(st,2),nt=i(gt),Dt=a(i(nt)),Ct=i(Dt);O(Ct);var mt=a(Ct,2);O(mt),s(Dt),s(nt);var ct=a(nt,2),Gt=a(i(ct));O(Gt),s(ct);var ft=a(ct,2),Te=a(i(ft)),Pe=i(Te);Pe.value=Pe.__value="Strength";var te=a(Pe);te.value=te.__value="Power";var he=a(te);he.value=he.__value="Power Endurance";var Ke=a(he);Ke.value=Ke.__value="Muscular Endurance",s(Te),s(ft),s(gt),s(Z);var Fe=a(Z,2);fe(Fe,21,()=>e(q),_e,(k,G,o)=>{{let g=Pt(()=>w(e(G).name));Ti(k,{get exercise(){return e(G)},get benchmarks(){return e(g)},$$events:{complete:ie,timer:ce,delete:()=>{t(E,o,!0)},info:()=>{const F=Ns.find(V=>V.name===e(G).name);F&&t(Q,F,!0)}}})}}),s(Fe);var Ae=a(Fe,2);Ae.__click=()=>t(D,!0);var ue=a(Ae,2),ke=a(i(ue),2);_s(ke),s(ue);var Qe=a(ue,2);{var We=k=>{var G=Ui();let o;G.__click=pe;var g=i(G);{var F=v=>{var h=Vi();c(v,h)},V=v=>{var h=xt("Finish Workout");c(v,h)};U(g,v=>{e(j)?v(F):v(V,!1)})}s(G),I(()=>{o=Rt(G,1,"save-btn svelte-1w0zsmt",null,o,{success:e(j)}),G.disabled=e(j)}),c(k,G)};U(Qe,k=>{e(q).length>0&&k(We)})}var at=a(Qe,2);{var _t=k=>{var G=$i();G.__click=()=>t(D,!1),G.__keydown=be=>be.key==="Escape"&&t(D,!1);var o=i(G);o.__click=be=>be.stopPropagation(),o.__keydown=be=>be.stopPropagation();var g=i(o),F=a(i(g),2),V=i(F);O(V),s(F);var v=a(F,2);{var h=be=>{var De=Ji(),ye=i(De);ye.__change=z;var we=i(ye);we.value=we.__value="";var Tt=a(we);fe(Tt,17,()=>ee,_e,(ze,Se)=>{var Le=Ki(),bt=i(Le,!0);s(Le);var vt={};I(()=>{K(bt,e(Se)),vt!==(vt=e(Se))&&(Le.value=(Le.__value=e(Se))??"")}),c(ze,Le)}),s(ye);var ut=a(ye,2),Lt=i(ut);Lt.value=Lt.__value="";var dt=a(Lt);fe(dt,17,()=>e(ne),_e,(ze,Se)=>{var Le=Qi(),bt=i(Le,!0);s(Le);var vt={};I(()=>{K(bt,e(Se)),vt!==(vt=e(Se))&&(Le.value=(Le.__value=e(Se))??"")}),c(ze,Le)}),s(ut),s(De),I(()=>ut.disabled=!e(N)),ot(ye,()=>e(N),ze=>t(N,ze)),ot(ut,()=>e(C),ze=>t(C,ze)),c(be,De)};U(v,be=>{e(L)||be(h)})}s(g);var se=a(g,2),je=i(se),rt=i(je);fe(rt,17,()=>e(de),_e,(be,De)=>{var ye=Xi();ye.__click=()=>ae(e(De));var we=i(ye),Tt=i(we,!0);s(we);var ut=a(we,2);{var Lt=dt=>{var ze=Yi(),Se=i(ze);s(ze),I(()=>K(Se,`${e(De).category??""} - ${e(De).subcategory??""}`)),c(dt,ze)};U(ut,dt=>{e(L)&&dt(Lt)})}s(ye),I(()=>K(Tt,e(De).name)),c(be,ye)});var Xe=a(rt,2);{var Ze=be=>{var De=Zi(),ye=i(De,!0);s(De),I(()=>K(ye,e(L)?"No exercises found":"Select a category and subcategory to view exercises.")),c(be,De)};U(Xe,be=>{e(de).length===0&&be(Ze)})}s(je),s(se),s(o),s(G),A(V,()=>e(L),be=>t(L,be)),ds(3,o,()=>Zs,()=>({y:100,duration:300})),ds(3,G,()=>Is),c(k,G)};U(at,k=>{e(D)&&k(_t)})}var Ie=a(at,2);{var ht=k=>{Hi(k,{get exercise(){return e(Q)},visible:!0,$$events:{close:()=>t(Q,null)}})};U(Ie,k=>{e(Q)&&k(ht)})}var it=a(Ie,2);ea(it,{get defaultSets(){return e(oe)},get associatedExerciseId(){return e(X)},get visible(){return e(J)},set visible(k){t(J,k,!0)}});var Re=a(it,2);{var Ye=k=>{ji(k,{isOpen:!0,title:"Delete Exercise",get message(){return`Are you sure you want to delete ${e(q)[e(E)].name??""}?`},requireInput:!1,onConfirm:()=>{e(E)!==null&&(t(q,e(q).filter((G,o)=>o!==e(E)),!0),t(E,null))},onCancel:()=>t(E,null)})};U(Re,k=>{e(E)!==null&&k(Ye)})}s(ge),A(st,()=>e(H),k=>t(H,k)),A(Ct,()=>e(x),k=>t(x,k)),A(mt,()=>e(y),k=>t(y,k)),A(Gt,()=>e(S),k=>t(S,k)),ot(Te,()=>e(T),k=>t(T,k)),A(ke,()=>e(P),k=>t(P,k)),c(R,ge),Jt()}ls(["click","keydown","change"]);var tr=_('<h3 class="svelte-1m63nqt">🤏 Fingerboarding</h3>'),sr=_("<option> </option>"),ar=_("<option> </option>"),ir=_('<button class="remove-set-btn svelte-1m63nqt">✕</button>'),rr=_('<div class="set-row svelte-1m63nqt"><div class="input-wrap svelte-1m63nqt"><label class="svelte-1m63nqt">Weight</label> <input type="number" placeholder="0" class="svelte-1m63nqt"/></div> <div class="input-wrap svelte-1m63nqt"><label class="svelte-1m63nqt">Reps/Secs</label> <input type="number" placeholder="1" class="svelte-1m63nqt"/></div> <!></div>'),lr=_('<div class="exercise-card svelte-1m63nqt"><div class="card-header svelte-1m63nqt"><div class="header-inputs svelte-1m63nqt"><select class="svelte-1m63nqt"></select> <select class="svelte-1m63nqt"></select></div> <button class="remove-card-btn svelte-1m63nqt" title="Remove Exercise">✕</button></div> <div class="sets-list svelte-1m63nqt"><!> <button class="add-set-btn svelte-1m63nqt">+ Add Set</button> <button class="rest-btn svelte-1m63nqt" title="Interval Timer">⏱ Timer</button></div> <div class="card-footer svelte-1m63nqt"><div class="meta-input svelte-1m63nqt"><label class="svelte-1m63nqt">Total Sets</label> <input type="number" readonly="" disabled class="svelte-1m63nqt"/></div> <div class="notes-input svelte-1m63nqt"><label class="svelte-1m63nqt">Notes</label> <input type="text" placeholder="Notes..." class="svelte-1m63nqt"/></div></div></div>'),or=_("<div> </div>"),nr=_('<div class="form-content svelte-1m63nqt"><div class="header-row svelte-1m63nqt"><div style="flex: 1; display: flex; justify-content: space-between; align-items: center;"><!></div> <button class="add-row-btn svelte-1m63nqt">+ Add Exercise</button></div> <div class="form-group date-group svelte-1m63nqt"><label for="date">Date</label> <div class="date-time-row svelte-1m63nqt"><input type="date" id="date" class="svelte-1m63nqt"/> <input type="time" id="time" class="svelte-1m63nqt"/></div></div> <div class="cards-container svelte-1m63nqt"></div> <div class="load-section svelte-1m63nqt"><h4 class="svelte-1m63nqt">Load Metrics</h4> <div class="load-metrics svelte-1m63nqt"><div class="load-item svelte-1m63nqt"><label for="finger-load" class="svelte-1m63nqt">Finger</label> <input type="number" id="finger-load" min="1" max="5" class="svelte-1m63nqt"/> <span class="load-scale svelte-1m63nqt">/ 5</span></div> <div class="load-item svelte-1m63nqt"><label for="shoulder-load" class="svelte-1m63nqt">Shoulder</label> <input type="number" id="shoulder-load" min="1" max="5" class="svelte-1m63nqt"/> <span class="load-scale svelte-1m63nqt">/ 5</span></div> <div class="load-item svelte-1m63nqt"><label for="forearm-load" class="svelte-1m63nqt">Forearm</label> <input type="number" id="forearm-load" min="1" max="5" class="svelte-1m63nqt"/> <span class="load-scale svelte-1m63nqt">/ 5</span></div></div> <h4 class="mt-4 svelte-1m63nqt">Grip Metrics</h4> <div class="load-metrics svelte-1m63nqt"><div class="load-item svelte-1m63nqt"><label for="open-grip" class="svelte-1m63nqt">Open</label> <input type="number" id="open-grip" min="1" max="5" class="svelte-1m63nqt"/> <span class="load-scale svelte-1m63nqt">/ 5</span></div> <div class="load-item svelte-1m63nqt"><label for="crimp-grip" class="svelte-1m63nqt">Crimp</label> <input type="number" id="crimp-grip" min="1" max="5" class="svelte-1m63nqt"/> <span class="load-scale svelte-1m63nqt">/ 5</span></div> <div class="load-item svelte-1m63nqt"><label for="pinch-grip" class="svelte-1m63nqt">Pinch</label> <input type="number" id="pinch-grip" min="1" max="5" class="svelte-1m63nqt"/> <span class="load-scale svelte-1m63nqt">/ 5</span></div> <div class="load-item svelte-1m63nqt"><label for="sloper-grip" class="svelte-1m63nqt">Sloper</label> <input type="number" id="sloper-grip" min="1" max="5" class="svelte-1m63nqt"/> <span class="load-scale svelte-1m63nqt">/ 5</span></div> <div class="load-item svelte-1m63nqt"><label for="jug-grip" class="svelte-1m63nqt">Jug</label> <input type="number" id="jug-grip" min="1" max="5" class="svelte-1m63nqt"/> <span class="load-scale svelte-1m63nqt">/ 5</span></div></div></div> <div class="form-group notes-section svelte-1m63nqt"><label for="session-notes">Session Notes</label> <textarea id="session-notes" placeholder="How did the session feel? Energy levels, mood, etc." rows="3" class="session-notes-area svelte-1m63nqt"></textarea></div> <div class="submit-section"><!> <button type="button" class="submit-btn svelte-1m63nqt"><!></button></div> <!></div>');function Ar(R,r){Qt(r,!0),bs();let l=Ue(r,"initialData",3,null),b=Pt(()=>!!l());const B=["Max hangs","Recruitment pulls","Max pick-ups"],W=["Full-crimp","Half-crimp","Three finger drag","Pinch","Open hand","Sloper"];let H=u(Ee(new Date().toISOString().split("T")[0])),S=u(Ee(new Date().toTimeString().split(" ")[0].slice(0,5))),q=u(Ee([])),x=u(3),y=u(3),T=u(3),M=u(3),m=u(3),P=u(3),w=u(3),D=u(3),L=u(""),N=u(!1),C=u(null),J=u(3);function Q(v){t(C,v.id,!0),t(J,v.sets,!0),t(N,!0)}function E(){t(q,[...e(q),{id:crypto.randomUUID(),name:B[0],gripType:W[1],sets:1,details:[{weight:0,reps:5}],notes:""}],!0)}const j="fingerboard_session_draft";let X=u(!1);hs(()=>{if(l())t(H,l().date,!0),t(S,l().time||"12:00",!0),t(q,l().exercises,!0),t(x,l().fingerLoad||3,!0),t(y,l().shoulderLoad||3,!0),t(T,l().forearmLoad||3,!0),t(M,l().openGrip||3,!0),t(m,l().crimpGrip||3,!0),t(P,l().pinchGrip||3,!0),t(w,l().sloperGrip||3,!0),t(D,l().jugGrip||3,!0),t(L,l().notes||"",!0),t(X,!0);else{const v=localStorage.getItem(j);if(v)try{const h=JSON.parse(v);h.time&&t(S,h.time,!0),h.exercises&&Array.isArray(h.exercises)&&t(q,h.exercises,!0),h.fingerLoad&&t(x,h.fingerLoad,!0),h.shoulderLoad&&t(y,h.shoulderLoad,!0),h.forearmLoad&&t(T,h.forearmLoad,!0),h.openGrip&&t(M,h.openGrip,!0),h.crimpGrip&&t(m,h.crimpGrip,!0),h.pinchGrip&&t(P,h.pinchGrip,!0),h.sloperGrip&&t(w,h.sloperGrip,!0),h.jugGrip&&t(D,h.jugGrip,!0),h.notes&&t(L,h.notes,!0)}catch(h){console.error("Failed to restore draft",h)}e(q).length===0&&E(),t(X,!0)}}),rs(()=>{if(!e(X)||e(b))return;const v={date:e(H),time:e(S),exercises:e(q),fingerLoad:e(x),shoulderLoad:e(y),forearmLoad:e(T),openGrip:e(M),crimpGrip:e(m),pinchGrip:e(P),sloperGrip:e(w),jugGrip:e(D),notes:e(L)};localStorage.setItem(j,JSON.stringify(v))});function oe(v){t(q,e(q).filter((h,se)=>se!==v),!0)}function ve(v){const h=e(q)[v],se=h.details[h.details.length-1];h.details=[...h.details,{...se}],h.sets=h.details.length}function de(v,h){const se=e(q)[v];se.details.length>1&&(se.details=se.details.filter((je,rt)=>rt!==h),se.sets=se.details.length)}let ee=u("idle"),ne=u("");async function z(){t(ee,"saving");try{const v={date:e(H),time:e(S),location:"N/A",exercises:JSON.parse(JSON.stringify(e(q))),fingerLoad:e(x),shoulderLoad:e(y),forearmLoad:e(T),openGrip:e(M),crimpGrip:e(m),pinchGrip:e(P),sloperGrip:e(w),jugGrip:e(D),notes:e(L)};let h;e(b)&&l()?h=await La(l().id,v):h=await qa(v),h.ok?(t(ee,"success"),t(ne,"Session saved!"),e(b)||localStorage.removeItem(j),r.onSaved?r.onSaved():(window.dispatchEvent(new CustomEvent("session-saved")),setTimeout(()=>{ae()},2e3))):(t(ee,"error"),t(ne,"Failed to save: "+(h.error||"Unknown error")))}catch(v){t(ee,"error"),t(ne,"Failed to save session"),console.error("Save error:",v)}}function ae(){t(H,new Date().toISOString().split("T")[0],!0),t(S,new Date().toTimeString().split(" ")[0].slice(0,5),!0),t(q,[],!0),E(),t(x,3),t(y,3),t(T,3),t(M,3),t(m,3),t(P,3),t(w,3),t(D,3),t(L,""),t(ee,"idle"),t(ne,"")}var ce=nr(),ie=i(ce),pe=i(ie),ge=i(pe);{var Z=v=>{var h=tr();c(v,h)};U(ge,v=>{e(b)||v(Z)})}s(pe);var Y=a(pe,2);Y.__click=E,s(ie);var He=a(ie,2),st=a(i(He),2),gt=i(st);O(gt);var nt=a(gt,2);O(nt),s(st),s(He);var Dt=a(He,2);fe(Dt,21,()=>e(q),_e,(v,h,se)=>{var je=lr(),rt=i(je),Xe=i(rt),Ze=i(Xe);fe(Ze,21,()=>B,_e,($e,lt)=>{var Ce=sr(),qt=i(Ce,!0);s(Ce);var yt={};I(()=>{K(qt,e(lt)),yt!==(yt=e(lt))&&(Ce.value=(Ce.__value=e(lt))??"")}),c($e,Ce)}),s(Ze);var be=a(Ze,2);fe(be,21,()=>W,_e,($e,lt)=>{var Ce=ar(),qt=i(Ce,!0);s(Ce);var yt={};I(()=>{K(qt,e(lt)),yt!==(yt=e(lt))&&(Ce.value=(Ce.__value=e(lt))??"")}),c($e,Ce)}),s(be),s(Xe);var De=a(Xe,2);De.__click=()=>oe(se),s(rt);var ye=a(rt,2),we=i(ye);fe(we,17,()=>e(h).details,_e,($e,lt,Ce)=>{var qt=rr(),yt=i(qt),Vt=i(yt);zt(Vt,"for",`weight-${se}-${Ce}`);var qe=a(Vt,2);O(qe),zt(qe,"id",`weight-${se}-${Ce}`),s(yt);var Je=a(yt,2),Mt=i(Je);zt(Mt,"for",`reps-${se}-${Ce}`);var Ht=a(Mt,2);O(Ht),zt(Ht,"id",`reps-${se}-${Ce}`),s(Je);var Yt=a(Je,2);{var $t=Wt=>{var es=ir();es.__click=()=>de(se,Ce),c(Wt,es)};U(Yt,Wt=>{e(h).details.length>1&&Wt($t)})}s(qt),A(qe,()=>e(lt).weight,Wt=>e(lt).weight=Wt),A(Ht,()=>e(lt).reps,Wt=>e(lt).reps=Wt),c($e,qt)});var Tt=a(we,2);Tt.__click=()=>ve(se);var ut=a(Tt,2);ut.__click=()=>Q(e(h)),s(ye);var Lt=a(ye,2),dt=i(Lt),ze=i(dt);zt(ze,"for",`total-sets-${se}`);var Se=a(ze,2);O(Se),zt(Se,"id",`total-sets-${se}`),s(dt);var Le=a(dt,2),bt=i(Le);zt(bt,"for",`notes-${se}`);var vt=a(bt,2);O(vt),zt(vt,"id",`notes-${se}`),s(Le),s(Lt),s(je),I(()=>ba(Se,e(h).sets)),ot(Ze,()=>e(h).name,$e=>e(h).name=$e),ot(be,()=>e(h).gripType,$e=>e(h).gripType=$e),A(vt,()=>e(h).notes,$e=>e(h).notes=$e),c(v,je)}),s(Dt);var Ct=a(Dt,2),mt=a(i(Ct),2),ct=i(mt),Gt=a(i(ct),2);O(Gt),xe(2),s(ct);var ft=a(ct,2),Te=a(i(ft),2);O(Te),xe(2),s(ft);var Pe=a(ft,2),te=a(i(Pe),2);O(te),xe(2),s(Pe),s(mt);var he=a(mt,4),Ke=i(he),Fe=a(i(Ke),2);O(Fe),xe(2),s(Ke);var Ae=a(Ke,2),ue=a(i(Ae),2);O(ue),xe(2),s(Ae);var ke=a(Ae,2),Qe=a(i(ke),2);O(Qe),xe(2),s(ke);var We=a(ke,2),at=a(i(We),2);O(at),xe(2),s(We);var _t=a(We,2),Ie=a(i(_t),2);O(Ie),xe(2),s(_t),s(he),s(Ct);var ht=a(Ct,2),it=a(i(ht),2);_s(it),s(ht);var Re=a(ht,2),Ye=i(Re);{var k=v=>{var h=or();let se;var je=i(h,!0);s(h),I(()=>{se=Rt(h,1,"save-message svelte-1m63nqt",null,se,{success:e(ee)==="success",error:e(ee)==="error"}),K(je,e(ne))}),c(v,h)};U(Ye,v=>{e(ne)&&v(k)})}var G=a(Ye,2);G.__click=z;var o=i(G);{var g=v=>{var h=xt("Saving...");c(v,h)},F=v=>{var h=Kt(),se=Et(h);{var je=Xe=>{var Ze=xt("✓ Saved!");c(Xe,Ze)},rt=Xe=>{var Ze=xt("Save Session");c(Xe,Ze)};U(se,Xe=>{e(ee)==="success"?Xe(je):Xe(rt,!1)},!0)}c(v,h)};U(o,v=>{e(ee)==="saving"?v(g):v(F,!1)})}s(G),s(Re);var V=a(Re,2);ea(V,{get defaultSets(){return e(J)},get associatedExerciseId(){return e(C)},get visible(){return e(N)},set visible(v){t(N,v,!0)}}),s(ce),I(()=>G.disabled=e(ee)==="saving"),A(gt,()=>e(H),v=>t(H,v)),A(nt,()=>e(S),v=>t(S,v)),A(Gt,()=>e(x),v=>t(x,v)),A(Te,()=>e(y),v=>t(y,v)),A(te,()=>e(T),v=>t(T,v)),A(Fe,()=>e(M),v=>t(M,v)),A(ue,()=>e(m),v=>t(m,v)),A(Qe,()=>e(P),v=>t(P,v)),A(at,()=>e(w),v=>t(w,v)),A(Ie,()=>e(D),v=>t(D,v)),A(it,()=>e(L),v=>t(L,v)),c(R,ce),Jt()}ls(["click"]);var cr=_('<h3 style="margin: 0; color: var(--teal-secondary);" class="svelte-1fje4dh">🏆 Competition</h3>'),ur=_("<option> </option>"),dr=_('<input type="text" placeholder="Enter venue name" class="mt-2 svelte-1fje4dh"/>'),vr=_("<option> </option>"),pr=_("<option> </option>"),gr=_('<input type="text" placeholder="Round name" class="mt-2 svelte-1fje4dh"/>'),mr=_('<div class="result-mode-content svelte-1fje4dh"><div class="form-group svelte-1fje4dh"><label for="position" class="svelte-1fje4dh">Final Position</label> <input type="number" id="position" placeholder="#" class="large-input svelte-1fje4dh"/></div></div>'),fr=_("<option> </option>"),_r=_('<input type="number" min="1" class="svelte-1fje4dh"/>'),hr=_('<span class="flash-dash">-</span>'),br=_('<tr><td class="col-name svelte-1fje4dh"><input type="text" class="svelte-1fje4dh"/></td><td class="col-status svelte-1fje4dh"><select class="svelte-1fje4dh"></select></td><td class="col-attempt svelte-1fje4dh"><!></td><td class="col-notes svelte-1fje4dh"><input type="text" placeholder="..." class="svelte-1fje4dh"/></td><td class="col-action svelte-1fje4dh"><button class="svelte-1fje4dh">✕</button></td></tr>'),yr=_('<div class="load-metrics-compact svelte-1fje4dh"><div class="metric svelte-1fje4dh"><label for="finger">Finger Load</label> <input type="number" id="finger" min="0" max="5" step="0.5" class="svelte-1fje4dh"/></div> <div class="metric svelte-1fje4dh"><label for="shoulder">Shoulder Load</label> <input type="number" id="shoulder" min="0" max="5" step="0.5" class="svelte-1fje4dh"/></div> <div class="metric svelte-1fje4dh"><label for="forearm">Forearm Load</label> <input type="number" id="forearm" min="0" max="5" step="0.5" class="svelte-1fje4dh"/></div></div> <div class="climbs-table-container svelte-1fje4dh"><div class="section-header svelte-1fje4dh"><h4 class="svelte-1fje4dh">Boulders / Routes</h4></div> <table class="climbs-table svelte-1fje4dh"><thead><tr><th class="svelte-1fje4dh">#</th><th class="svelte-1fje4dh">Result</th><th class="svelte-1fje4dh">Att.</th><th class="svelte-1fje4dh">Notes</th><th class="svelte-1fje4dh"></th></tr></thead><tbody></tbody></table> <button class="add-row-btn svelte-1fje4dh">+ Add Row</button></div>',1),wr=_("<div> </div>"),Sr=_('<div class="form-content svelte-1fje4dh"><div style="flex: 1; display: flex; justify-content: space-between; align-items: center; margin-bottom: 1.5rem;"><!></div> <div class="form-grid svelte-1fje4dh"><div class="form-group svelte-1fje4dh"><label for="date" class="svelte-1fje4dh">Date</label> <div class="date-time-row svelte-1fje4dh"><input type="date" id="date" class="svelte-1fje4dh"/> <input type="time" id="time" class="svelte-1fje4dh"/></div></div> <div class="form-group svelte-1fje4dh"><label for="venue" class="svelte-1fje4dh">Venue</label> <select id="venue" class="svelte-1fje4dh"><option disabled>Select venue...</option><!></select> <!></div></div> <div class="form-group mb-4 svelte-1fje4dh"><label for="type" class="svelte-1fje4dh">Type</label> <select id="type" class="svelte-1fje4dh"></select></div> <div class="form-group mb-4 svelte-1fje4dh"><label for="session-notes" class="svelte-1fje4dh">Session Notes</label> <textarea id="session-notes" placeholder="How did the comp go? Strategy, mindset, etc." rows="3" class="svelte-1fje4dh"></textarea></div> <div class="round-section svelte-1fje4dh"><div class="form-group svelte-1fje4dh"><label for="round" class="svelte-1fje4dh">Round</label> <select id="round" class="svelte-1fje4dh"></select> <!></div> <!></div> <div class="submit-section"><!> <button type="button" class="submit-btn svelte-1fje4dh"><!></button></div></div>');function Or(R,r){Qt(r,!0),bs();let l=Ue(r,"initialData",3,null),b=Pt(()=>!!l());const B=["Flashpoint Bristol","Rockstar Techno","Rockstar Unit 3","Rockstar Unit 5","Bloc","TCA","Other"],W=["Bouldering","Lead","Speed"],H=["Qualifiers","Semi-Finals","Finals","Result","Other"],S=["Flash","Top","Zone","Attempt"];let q=u(Ee(new Date().toISOString().split("T")[0])),x=u(Ee(new Date().toTimeString().split(" ")[0].slice(0,5))),y=u(""),T=u(""),M=u("Bouldering"),m=u(4),P=u(4),w=u(4),D=u("Qualifiers"),L=u(""),N=u(null),C=u(Ee([{name:"#1",status:"Flash",attemptCount:1,notes:""}])),J=u("");const Q="competition_session_draft";let E=u(!1);hs(()=>{if(l()){if(t(q,l().date,!0),t(x,l().time||"12:00",!0),t(M,l().type||"Bouldering",!0),t(J,l().notes||"",!0),B.includes(l().venue)?t(y,l().venue,!0):(t(y,"Other"),t(T,l().venue,!0)),t(m,l().fingerLoad??4,!0),t(P,l().shoulderLoad??4,!0),t(w,l().forearmLoad??4,!0),l().rounds&&l().rounds.length>0){const o=l().rounds[0];H.includes(o.name)?t(D,o.name,!0):(t(D,"Other"),t(L,o.name,!0)),t(N,o.position??null,!0),o.climbs&&o.climbs.length>0&&t(C,o.climbs,!0)}t(E,!0)}else{const o=localStorage.getItem(Q);if(o)try{const g=JSON.parse(o);g.venue&&t(y,g.venue,!0),g.time&&t(x,g.time,!0),g.customVenue&&t(T,g.customVenue,!0),g.type&&t(M,g.type,!0),g.fingerLoad&&t(m,g.fingerLoad,!0),g.shoulderLoad&&t(P,g.shoulderLoad,!0),g.forearmLoad&&t(w,g.forearmLoad,!0),g.roundName&&t(D,g.roundName,!0),g.customRoundName&&t(L,g.customRoundName,!0),g.finalPosition&&t(N,g.finalPosition,!0),g.climbs&&t(C,g.climbs,!0),g.notes&&t(J,g.notes,!0)}catch(g){console.error("Failed to restore draft",g)}t(E,!0)}}),rs(()=>{if(!e(E)||e(b))return;const o={date:e(q),time:e(x),venue:e(y),customVenue:e(T),type:e(M),fingerLoad:e(m),shoulderLoad:e(P),forearmLoad:e(w),roundName:e(D),customRoundName:e(L),finalPosition:e(N),climbs:e(C),notes:e(J)};localStorage.setItem(Q,JSON.stringify(o))});let j=Pt(()=>e(D)==="Result"),X=Pt(()=>e(y)==="Other"),oe=Pt(()=>e(D)==="Other"),ve=Pt(()=>e(D)==="Other"?e(L):e(D));function de(){const o=e(C).length+1;t(C,[...e(C),{name:`#${o}`,status:"Flash",attemptCount:1,notes:""}],!0)}function ee(o){e(C).length>1?t(C,e(C).filter((g,F)=>F!==o),!0):e(C)[0]={name:"#1",status:"Flash",attemptCount:1,notes:""}}function ne(o,g){e(C)[o].status=g,g==="Flash"&&(e(C)[o].attemptCount=1)}let z=u("idle"),ae=u("");async function ce(){if(!e(y)||e(y)==="Other"&&!e(T)){t(z,"error"),t(ae,"Please specify a venue");return}t(z,"saving");try{const o={name:e(ve),position:e(j)?e(N):void 0,climbs:e(j)?void 0:JSON.parse(JSON.stringify(e(C)))},g={date:e(q),time:e(x),venue:e(y)==="Other"?e(T):e(y),customVenue:e(y)==="Other"?e(T):void 0,type:e(M),fingerLoad:e(j)?void 0:e(m),shoulderLoad:e(j)?void 0:e(P),forearmLoad:e(j)?void 0:e(w),rounds:[o],notes:e(J)};let F;e(b)&&l()?F=await Ma(l().id,g):F=await Pa(g),F.ok?(t(z,"success"),t(ae,"Competition saved!"),e(b)||localStorage.removeItem(Q),r.onSaved?r.onSaved():(window.dispatchEvent(new CustomEvent("session-saved")),setTimeout(()=>{ie()},2e3))):(t(z,"error"),t(ae,"Failed to save: "+(F.error||"Unknown error")))}catch(o){t(z,"error"),t(ae,"Failed to save session"),console.error("Save error:",o)}}function ie(){t(q,new Date().toISOString().split("T")[0],!0),t(x,new Date().toTimeString().split(" ")[0].slice(0,5),!0),t(y,""),t(T,""),t(N,null),t(C,[{name:"#1",status:"Flash",attemptCount:1,notes:""}],!0),t(J,""),t(z,"idle"),t(ae,"")}var pe=Sr(),ge=i(pe),Z=i(ge);{var Y=o=>{var g=cr();c(o,g)};U(Z,o=>{e(b)||o(Y)})}s(ge);var He=a(ge,2),st=i(He),gt=a(i(st),2),nt=i(gt);O(nt);var Dt=a(nt,2);O(Dt),s(gt),s(st);var Ct=a(st,2),mt=a(i(Ct),2),ct=i(mt);ct.value=ct.__value="";var Gt=a(ct);fe(Gt,17,()=>B,_e,(o,g)=>{var F=ur(),V=i(F,!0);s(F);var v={};I(()=>{K(V,e(g)),v!==(v=e(g))&&(F.value=(F.__value=e(g))??"")}),c(o,F)}),s(mt);var ft=a(mt,2);{var Te=o=>{var g=dr();O(g),A(g,()=>e(T),F=>t(T,F)),c(o,g)};U(ft,o=>{e(X)&&o(Te)})}s(Ct),s(He);var Pe=a(He,2),te=a(i(Pe),2);fe(te,21,()=>W,_e,(o,g)=>{var F=vr(),V=i(F,!0);s(F);var v={};I(()=>{K(V,e(g)),v!==(v=e(g))&&(F.value=(F.__value=e(g))??"")}),c(o,F)}),s(te),s(Pe);var he=a(Pe,2),Ke=a(i(he),2);_s(Ke),s(he);var Fe=a(he,2),Ae=i(Fe),ue=a(i(Ae),2);fe(ue,21,()=>H,_e,(o,g)=>{var F=pr(),V=i(F,!0);s(F);var v={};I(()=>{K(V,e(g)),v!==(v=e(g))&&(F.value=(F.__value=e(g))??"")}),c(o,F)}),s(ue);var ke=a(ue,2);{var Qe=o=>{var g=gr();O(g),A(g,()=>e(L),F=>t(L,F)),c(o,g)};U(ke,o=>{e(oe)&&o(Qe)})}s(Ae);var We=a(Ae,2);{var at=o=>{var g=mr(),F=i(g),V=a(i(F),2);O(V),s(F),s(g),A(V,()=>e(N),v=>t(N,v)),c(o,g)},_t=o=>{var g=yr(),F=Et(g),V=i(F),v=a(i(V),2);O(v),s(V);var h=a(V,2),se=a(i(h),2);O(se),s(h);var je=a(h,2),rt=a(i(je),2);O(rt),s(je),s(F);var Xe=a(F,2),Ze=a(i(Xe),2),be=a(i(Ze));fe(be,21,()=>e(C),_e,(ye,we,Tt)=>{var ut=br(),Lt=i(ut),dt=i(Lt);O(dt),s(Lt);var ze=a(Lt),Se=i(ze);Se.__change=qe=>ne(Tt,qe.target.value),fe(Se,21,()=>S,_e,(qe,Je)=>{var Mt=fr(),Ht=i(Mt,!0);s(Mt);var Yt={};I(()=>{K(Ht,e(Je)),Yt!==(Yt=e(Je))&&(Mt.value=(Mt.__value=e(Je))??"")}),c(qe,Mt)}),s(Se);var Le;Os(Se),s(ze);var bt=a(ze),vt=i(bt);{var $e=qe=>{var Je=_r();O(Je),A(Je,()=>e(we).attemptCount,Mt=>e(we).attemptCount=Mt),c(qe,Je)},lt=qe=>{var Je=hr();c(qe,Je)};U(vt,qe=>{e(we).status!=="Flash"?qe($e):qe(lt,!1)})}s(bt);var Ce=a(bt),qt=i(Ce);O(qt),s(Ce);var yt=a(Ce),Vt=i(yt);Vt.__click=()=>ee(Tt),s(yt),s(ut),I(()=>{Le!==(Le=e(we).status)&&(Se.value=(Se.__value=e(we).status)??"",Es(Se,e(we).status))}),A(dt,()=>e(we).name,qe=>e(we).name=qe),A(qt,()=>e(we).notes,qe=>e(we).notes=qe),c(ye,ut)}),s(be),s(Ze);var De=a(Ze,2);De.__click=de,s(Xe),A(v,()=>e(m),ye=>t(m,ye)),A(se,()=>e(P),ye=>t(P,ye)),A(rt,()=>e(w),ye=>t(w,ye)),c(o,g)};U(We,o=>{e(j)?o(at):o(_t,!1)})}s(Fe);var Ie=a(Fe,2),ht=i(Ie);{var it=o=>{var g=wr();let F;var V=i(g,!0);s(g),I(()=>{F=Rt(g,1,"save-message svelte-1fje4dh",null,F,{success:e(z)==="success",error:e(z)==="error"}),K(V,e(ae))}),c(o,g)};U(ht,o=>{e(ae)&&o(it)})}var Re=a(ht,2);Re.__click=ce;var Ye=i(Re);{var k=o=>{var g=xt("Saving...");c(o,g)},G=o=>{var g=Kt(),F=Et(g);{var V=h=>{var se=xt("✓ Saved!");c(h,se)},v=h=>{var se=xt("Save Session");c(h,se)};U(F,h=>{e(z)==="success"?h(V):h(v,!1)},!0)}c(o,g)};U(Ye,o=>{e(z)==="saving"?o(k):o(G,!1)})}s(Re),s(Ie),s(pe),I(()=>Re.disabled=e(z)==="saving"),A(nt,()=>e(q),o=>t(q,o)),A(Dt,()=>e(x),o=>t(x,o)),ot(mt,()=>e(y),o=>t(y,o)),ot(te,()=>e(M),o=>t(M,o)),A(Ke,()=>e(J),o=>t(J,o)),ot(ue,()=>e(D),o=>t(D,o)),c(R,pe),Jt()}ls(["change","click"]);export{Or as C,ji as D,Ns as E,Ar as F,Fr as G,Nr as I,Br as O,Ks as a,Zs as f,si as g,Gr as s,ds as t};
