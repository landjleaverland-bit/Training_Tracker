import{f as w,a as n,c as Kt,t as kt}from"./Daoe3kko.js";import{C as as,X as ss,a$ as rs,a5 as is,a8 as ls,k as bt,b0 as os,az as Ja,b1 as ns,aj as cs,n as wa,aa as us,p as Bt,c as s,r as a,s as r,g as e,t as F,a as Wt,f as Ft,aM as St,b2 as Ea,e as v,A as Be,o as ma,d as t,j as ra,as as qa,b3 as fa,q as wt,b4 as vs,b5 as ds,b6 as gs,b7 as ps,b8 as ms,aL as fs}from"./BD2jSOmL.js";import{a as _s,d as Zt,s as j,e as Mt}from"./Clw8EWiG.js";import{i as H}from"./CKIECWdo.js";import{e as ne,k as ce,r as ie,j as ut,v as hs}from"./cSC8pg5z.js";import{s as Rt}from"./DU6y904K.js";import{a as ue,n as Fa,o as Ba,b as vt,p as Wa,u as bs,q as ys,r as ws,t as Ss,s as Oa,v as ks,w as xs,h as Ts,x as Cs,y as Ls,z as Rs,A as Ps,B as qs,C as Ns}from"./xPE-J_WT.js";import{p as he}from"./9VQmhtgh.js";import{i as Ia}from"./Dp_ruqZb.js";import{b as Ds}from"./D-EyNCqE.js";const Ms=()=>performance.now(),Xt={tick:P=>requestAnimationFrame(P),now:()=>Ms(),tasks:new Set};function Ya(){const P=Xt.now();Xt.tasks.forEach(i=>{i.c(P)||(Xt.tasks.delete(i),i.f())}),Xt.tasks.size!==0&&Xt.tick(Ya)}function Os(P){let i;return Xt.tasks.size===0&&Xt.tick(Ya),{promise:new Promise(l=>{Xt.tasks.add(i={c:P,f:l})}),abort(){Xt.tasks.delete(i)}}}function La(P,i){Ja(()=>{P.dispatchEvent(new CustomEvent(i))})}function Gs(P){if(P==="float")return"cssFloat";if(P==="offset")return"cssOffset";if(P.startsWith("--"))return P;const i=P.split("-");return i.length===1?i[0]:i[0]+i.slice(1).map(l=>l[0].toUpperCase()+l.slice(1)).join("")}function Va(P){const i={},l=P.split(";");for(const f of l){const[D,G]=f.split(":");if(!D||G===void 0)break;const M=Gs(D.trim());i[M]=G.trim()}return i}const As=P=>P;function na(P,i,l,f){var D=(P&os)!==0,G="both",M,_=i.inert,R=i.style.overflow,k,h;function u(){return Ja(()=>M??=l()(i,f?.()??{},{direction:G}))}var C={is_global:D,in(){i.inert=_,La(i,"introstart"),k=Ga(i,u(),h,1,()=>{La(i,"introend"),k?.abort(),k=M=void 0,i.style.overflow=R})},out(b){i.inert=!0,La(i,"outrostart"),h=Ga(i,u(),k,0,()=>{La(i,"outroend"),b?.()})},stop:()=>{k?.abort(),h?.abort()}},N=as;if((N.nodes.t??=[]).push(C),_s){var L=D;if(!L){for(var x=N.parent;x&&(x.f&ss)!==0;)for(;(x=x.parent)&&(x.f&rs)===0;);L=!x||(x.f&is)!==0}L&&ls(()=>{bt(()=>C.in())})}}function Ga(P,i,l,f,D){var G=f===1;if(ns(i)){var M,_=!1;return cs(()=>{if(!_){var b=i({direction:G?"in":"out"});M=Ga(P,b,l,f,D)}}),{abort:()=>{_=!0,M?.abort()},deactivate:()=>M.deactivate(),reset:()=>M.reset(),t:()=>M.t()}}if(l?.deactivate(),!i?.duration)return D(),{abort:wa,deactivate:wa,reset:wa,t:()=>f};const{delay:R=0,css:k,tick:h,easing:u=As}=i;var C=[];if(G&&l===void 0&&(h&&h(0,1),k)){var N=Va(k(0,1));C.push(N,N)}var L=()=>1-f,x=P.animate(C,{duration:R,fill:"forwards"});return x.onfinish=()=>{x.cancel();var b=l?.t()??1-f;l?.abort();var S=f-b,W=i.duration*Math.abs(S),A=[];if(W>0){var J=!1;if(k)for(var Z=Math.ceil(W/16.666666666666668),B=0;B<=Z;B+=1){var I=b+S*u(B/Z),Y=Va(k(I,1-I));A.push(Y),J||=Y.overflow==="hidden"}J&&(P.style.overflow="hidden"),L=()=>{var se=x.currentTime;return b+S*u(se/W)},h&&Os(()=>{if(x.playState!=="running")return!1;var se=L();return h(se,1-se),!0})}x=P.animate(A,{duration:W,fill:"forwards"}),x.onfinish=()=>{L=()=>f,h?.(f,1-f),D()}},{abort:()=>{x&&(x.cancel(),x.effect=null,x.onfinish=wa)},deactivate:()=>{D=wa},reset:()=>{f===0&&h?.(1,0)},t:()=>L()}}function Ua(P){return function(...i){var l=i[0];return l.stopPropagation(),P?.apply(this,i)}}function Pa(P,i){var l=P.$$events?.[i.type],f=us(l)?l.slice():l==null?[]:[l];for(var D of f)D.call(this,i)}var Es=w('<span class="placeholder svelte-1g8x5ph"> </span>'),Fs=w('<span class="chip-display"> </span>'),Bs=w('<button type="button"> </button>'),Ws=w('<div class="multi-select-container svelte-1g8x5ph"><div class="chips svelte-1g8x5ph"><!></div> <div class="options-grid svelte-1g8x5ph"></div></div>');function oa(P,i){Bt(i,!0);let l=he(i,"selected",19,()=>[]),f=he(i,"placeholder",3,"Select options...");function D(u){let C=[...l()];u==="None"?C.includes("None")?C=[]:C=["None"]:(C=C.filter(N=>N!=="None"),C.includes(u)?C=C.filter(N=>N!==u):C.push(u)),i.onChange(C)}var G=Ws(),M=s(G),_=s(M);{var R=u=>{var C=Es(),N=s(C,!0);a(C),F(()=>j(N,f())),n(u,C)},k=u=>{var C=Kt(),N=Ft(C);ne(N,17,l,ce,(L,x)=>{var b=Fs(),S=s(b,!0);a(b),F(()=>j(S,e(x))),n(L,b)}),n(u,C)};H(_,u=>{l().length===0?u(R):u(k,!1)})}a(M);var h=r(M,2);ne(h,21,()=>i.options,ce,(u,C)=>{var N=Bs();N.__click=()=>D(e(C));var L=s(N,!0);a(N),F(x=>{Rt(N,1,`option-chip ${x??""}`,"svelte-1g8x5ph"),j(L,e(C))},[()=>l().includes(e(C))?"selected":""]),n(u,N)}),a(h),a(G),n(P,G),Wt()}Zt(["click"]);const Is=["V0-","4-","V0","4","V0+","4+","V1","5","V2","5+","V3","6A","6A+","V4","6B","6B+","V5","6C","6C+","V6","7A","V7","7A+","V8","7B","7B+","V9","7C","V10","7C+","V11","8A","V12","8A+","V13","8B","V14","8B+","V15","8C","V16","8C+","V17","9A"],za=Is.map(P=>P.toLowerCase());var zs=w('<span class="grade-error svelte-1km774a">Invalid</span>'),js=w('<div class="grade-input-container svelte-1km774a"><input type="text"/> <!></div>');function Xa(P,i){Bt(i,!0);let l=he(i,"value",15),f=he(i,"placeholder",3,"V3");function D(u){return u.trim()?za.includes(u.trim().toLowerCase()):!0}let G=St(()=>D(l()));var M=js(),_=s(M);ie(_);let R;var k=r(_,2);{var h=u=>{var C=zs();n(u,C)};H(k,u=>{e(G)||u(h)})}a(M),F(()=>{ut(_,"placeholder",f()),R=Rt(_,1,"grade-input svelte-1km774a",null,R,{invalid:!e(G)})}),ue(_,l),n(P,M),Wt()}var Hs=w('<button type="button"> </button>'),Vs=w('<div class="load-row svelte-oe84ev"><label class="load-label svelte-oe84ev"> </label> <div class="button-group svelte-oe84ev" role="group"></div></div>');function Te(P,i){Bt(i,!0);let l=he(i,"value",15);he(i,"min",3,1);let f=he(i,"max",3,5);function D(k){l(k)}var G=Vs(),M=s(G),_=s(M,!0);a(M);var R=r(M,2);ne(R,21,()=>Array.from({length:f()},(k,h)=>h+1),ce,(k,h)=>{var u=Hs();let C;u.__click=()=>D(e(h));var N=s(u,!0);a(u),F(()=>{C=Rt(u,1,"scale-btn svelte-oe84ev",null,C,{active:l()===e(h)}),ut(u,"aria-pressed",l()===e(h)),j(N,e(h))}),n(k,u)}),a(R),a(G),F(()=>{ut(M,"for",i.id),j(_,i.label),ut(R,"aria-label",`${i.label??""} scale selector`)}),n(P,G),Wt()}Zt(["click"]);var Us=w('<div class="notes-group svelte-1kz8zai"><label for="session-notes" class="svelte-1kz8zai"> </label> <textarea id="session-notes" class="session-notes-area svelte-1kz8zai"></textarea></div>');function Sa(P,i){Bt(i,!0);let l=he(i,"value",15),f=he(i,"label",3,"Session Notes"),D=he(i,"placeholder",3,"How did the session feel? Key takeaways..."),G=he(i,"rows",3,3);var M=Us(),_=s(M),R=s(_,!0);a(_);var k=r(_,2);Ea(k),a(M),F(()=>{j(R,f()),ut(k,"placeholder",D()),ut(k,"rows",G())}),ue(k,l),n(P,M),Wt()}var Ks=w('<div class="input-with-action svelte-1lf3qka"><input type="text" id="location-manual" placeholder="Enter custom location..." class="flat-left svelte-1lf3qka"/> <button type="button" class="action-btn flat-right svelte-1lf3qka" title="Back to list">✕</button></div>'),Qs=w("<option> </option>"),Js=w('<select id="location" class="svelte-1lf3qka"><option disabled>Select location...</option><!></select>'),Ys=w("<option> </option>"),Xs=w("<option> </option>"),Zs=w('<th class="svelte-1lf3qka">Sport?</th>'),$s=w('<td class="center svelte-1lf3qka"><input type="checkbox" class="svelte-1lf3qka"/></td>'),er=w("<option> </option>"),tr=w("<option> </option>"),ar=w("<option> </option>"),sr=w('<button type="button" class="remove-btn svelte-1lf3qka">✕</button>'),rr=w('<tr class="svelte-1lf3qka"><!><td class="svelte-1lf3qka"><input type="text" placeholder="Route name..." class="svelte-1lf3qka"/></td><td class="svelte-1lf3qka"><!></td><td class="svelte-1lf3qka"><select class="svelte-1lf3qka"></select></td><td class="svelte-1lf3qka"><input type="number" min="1" class="svelte-1lf3qka"/></td><td class="svelte-1lf3qka"><select class="svelte-1lf3qka"></select></td><td class="svelte-1lf3qka"><select class="svelte-1lf3qka"></select></td><td><textarea placeholder="Notes..." class="svelte-1lf3qka"></textarea></td><td class="center svelte-1lf3qka"><!></td></tr>'),ir=w("<div> </div>"),lr=w('<button type="button" class="cancel-btn-large svelte-1lf3qka">Cancel</button>'),or=w('<div class="form-content svelte-1lf3qka"><div class="form-row svelte-1lf3qka"><div class="form-group svelte-1lf3qka"><label for="date" class="svelte-1lf3qka">Date</label> <div class="date-time-row svelte-1lf3qka"><input type="date" id="date" class="svelte-1lf3qka"/> <input type="time" id="time" class="svelte-1lf3qka"/></div></div> <div class="form-group svelte-1lf3qka"><label for="location" class="svelte-1lf3qka">Location</label> <!></div></div> <div class="form-group svelte-1lf3qka"><label for="climbing-type" class="svelte-1lf3qka">Climbing Type</label> <select id="climbing-type" class="svelte-1lf3qka"><option disabled>Select type...</option><!></select></div> <div class="training-section svelte-1lf3qka"><h4 class="svelte-1lf3qka">Training Details</h4> <div class="training-grid svelte-1lf3qka"><div class="training-item svelte-1lf3qka"><label for="training-type" class="svelte-1lf3qka">Training Type</label> <!></div> <div class="training-item svelte-1lf3qka"><label for="difficulty" class="svelte-1lf3qka">Difficulty</label> <select id="difficulty"></select></div> <div class="training-item svelte-1lf3qka"><label for="category" class="svelte-1lf3qka">Category</label> <!></div> <div class="training-item svelte-1lf3qka"><label for="energy-system" class="svelte-1lf3qka">Energy System</label> <!></div> <div class="training-item svelte-1lf3qka"><label for="wall-angle" class="svelte-1lf3qka">Wall</label> <!></div></div></div> <div class="climbs-section svelte-1lf3qka"><h4 class="svelte-1lf3qka">Climbs</h4> <div class="table-container svelte-1lf3qka"><table class="climbs-table svelte-1lf3qka"><thead><tr><!><th class="svelte-1lf3qka">Name</th><th class="svelte-1lf3qka">Grade</th><th class="svelte-1lf3qka">Attempt</th><th class="svelte-1lf3qka">#</th><th class="svelte-1lf3qka">Wall Angle</th><th class="svelte-1lf3qka">Technique Focus</th><th class="svelte-1lf3qka">Notes</th><th class="svelte-1lf3qka"></th></tr></thead><tbody></tbody></table></div> <button type="button" class="add-btn svelte-1lf3qka">+ Add Climb</button></div> <div class="load-section svelte-1lf3qka"><h4 class="svelte-1lf3qka">Load Metrics</h4> <div class="load-metrics svelte-1lf3qka"><div class="metric-row svelte-1lf3qka"><!></div> <div class="metric-row svelte-1lf3qka"><!></div> <div class="metric-row svelte-1lf3qka"><!></div></div> <h4 class="mt-4 svelte-1lf3qka">Grip Metrics</h4> <div class="load-metrics svelte-1lf3qka"><div class="metric-row svelte-1lf3qka"><!></div> <div class="metric-row svelte-1lf3qka"><!></div> <div class="metric-row svelte-1lf3qka"><!></div> <div class="metric-row svelte-1lf3qka"><!></div> <div class="metric-row svelte-1lf3qka"><!></div></div></div> <div class="notes-section"><!></div> <div class="submit-section svelte-1lf3qka"><!> <div class="action-buttons svelte-1lf3qka"><!> <button type="button" class="submit-btn svelte-1lf3qka"><!></button></div></div></div>');function Fi(P,i){Bt(i,!0);const l=["Rockstar Unit 3","Rockstar Unit 5","Rockstar Techno","Flashpoint Bristol","Redpoint Bristol","TCH Bristol","TCA Mothership","TCA Church","TCA Arc","Bloc","270 Climbing","Other"],f=["Bouldering","Sport","Mixed"],D=["Onsight","Flash","Redpoint","Repeat","Dogged","DNF"],G=["None","Projecting","Onsighting","Campusing","Repeaters","Comp Sim"],M=["None","Easy","Medium","Hard","Max","Limit+"],_=["None","Strength","Power","Strength Capacity","Power Capacity","Strength Endurance","Power Endurance","Endurance","Coordination","Slab Technique","Overhang Technique"],R=["None","Aerobic Lactic Capacity","Aerobic Lactic Power","Anaerobic Alactic Capacity","Anaerobic Alactic Power","Anaerobic Power","Anaerobic Lactic Capacity"],k=["None","Trusting feet","Double-clutch","Standing on volumes","Deadpointing","Flagging","Swapping feet","Edging","Smearing","Matching","Backstepping","Drop Knee","Bridging","Laybacking","Mantling","Kneebar","Dyno","Pogo","Coordination Moves","Gastoning","Undercutting","Compressing","Heel Hook","Toe Hook","Bicycle"],h=["None","Overhang","Vertical","Slab","Roof"],u=["None","Moon Board","Kilter Board","Tension Board","Beast","Circuit Board","Boulder wall","Lead wall","Comp wall","Auto belays"];let C=v(null),N=St(()=>!!i.initialData),L=v(Be(new Date().toISOString().split("T")[0])),x=v(Be(new Date().toTimeString().split(" ")[0].slice(0,5))),b=v(""),S=v(""),W=v(Be(["None"])),A=v("None"),J=v(Be(["None"])),Z=v(Be(["None"])),B=v(Be(["None"])),I=v(3),Y=v(3),se=v(3),le=v(3),oe=v(3),$=v(3),re=v(3),z=v(3),X=v(Be([{isSport:!1,name:"",grade:"",attemptType:"Flash",attemptsNum:1,notes:"",wall:"Overhang"}])),ee=v(""),ve=v(!1);const Ye="indoor_climb_draft";let ye=v(!1);ma(()=>{if(i.initialData)t(L,i.initialData.date,!0),t(x,i.initialData.time||"12:00",!0),l.includes(i.initialData.location)?(t(b,i.initialData.location,!0),t(ve,!1)):i.initialData.customLocation?(t(b,i.initialData.customLocation,!0),t(ve,!0)):(t(b,i.initialData.location,!0),t(ve,!0)),t(S,i.initialData.climbingType,!0),t(W,i.initialData.trainingTypes||["None"],!0),t(A,i.initialData.difficulty||"None",!0),t(J,i.initialData.categories||["None"],!0),t(Z,i.initialData.energySystems||["None"],!0),t(B,i.initialData.wallAngles||["None"],!0),t(I,i.initialData.fingerLoad||3,!0),t(Y,i.initialData.shoulderLoad||3,!0),t(se,i.initialData.forearmLoad||3,!0),t(le,i.initialData.openGrip||3,!0),t(oe,i.initialData.crimpGrip||3,!0),t($,i.initialData.pinchGrip||3,!0),t(re,i.initialData.sloperGrip||3,!0),t(z,i.initialData.jugGrip||3,!0),i.initialData.climbs&&i.initialData.climbs.length>0?t(X,JSON.parse(JSON.stringify(i.initialData.climbs)),!0):t(X,[{isSport:!1,name:"",grade:"",attemptType:"Flash",attemptsNum:1,notes:"",wall:"Overhang"}],!0),t(ee,i.initialData.notes||"",!0);else{const T=localStorage.getItem(Ye);if(T)try{const d=JSON.parse(T);d.location&&t(b,d.location,!0),d.time&&t(x,d.time,!0),d.isOtherLocation&&t(ve,d.isOtherLocation,!0),d.climbingType&&t(S,d.climbingType,!0),d.trainingTypes&&t(W,d.trainingTypes,!0),d.difficulty&&t(A,d.difficulty,!0),d.categories&&t(J,d.categories,!0),d.energySystems&&t(Z,d.energySystems,!0),d.wallAngles&&t(B,d.wallAngles,!0),d.fingerLoad&&t(I,d.fingerLoad,!0),d.shoulderLoad&&t(Y,d.shoulderLoad,!0),d.forearmLoad&&t(se,d.forearmLoad,!0),d.openGrip&&t(le,d.openGrip,!0),d.crimpGrip&&t(oe,d.crimpGrip,!0),d.pinchGrip&&t($,d.pinchGrip,!0),d.sloperGrip&&t(re,d.sloperGrip,!0),d.jugGrip&&t(z,d.jugGrip,!0),d.climbs&&t(X,d.climbs,!0),d.notes&&t(ee,d.notes,!0)}catch(d){console.error("Failed to restore draft",d)}}t(ye,!0)}),ra(()=>{if(!e(ye)||e(N))return;const T={date:e(L),time:e(x),location:e(b),isOtherLocation:e(ve),climbingType:e(S),trainingTypes:e(W),difficulty:e(A),categories:e(J),energySystems:e(Z),fingerLoad:e(I),shoulderLoad:e(Y),forearmLoad:e(se),openGrip:e(le),crimpGrip:e(oe),pinchGrip:e($),sloperGrip:e(re),jugGrip:e(z),climbs:e(X),notes:e(ee)};localStorage.setItem(Ye,JSON.stringify(T))});function Xe(){e(b)==="Other"&&(t(ve,!0),t(b,""))}function Pt(){t(ve,!1),t(b,"")}function qt(){t(X,[...e(X),{isSport:!1,name:"",grade:"",attemptType:"Flash",attemptsNum:1,notes:"",wall:"Overhang"}],!0)}function xt(T){t(X,e(X).filter((d,ae)=>ae!==T),!0)}function U(T,d){e(X)[T].attemptType=d,(d==="Flash"||d==="Onsight")&&(e(X)[T].attemptsNum=1)}function te(T){t(C,T,!0)}function We(){t(C,null)}let Ze=St(()=>e(S)==="Mixed");function it(T){return e(S)==="Sport"?!0:e(S)==="Bouldering"?!1:T.isSport}function $e(T){return T.trim()?za.includes(T.trim().toLowerCase()):!0}let Ge=v("idle"),et=v("");function Ae(){return e(b)?e(S)?e(X).filter(d=>d.grade.trim()&&!$e(d.grade)).length>0?"Please fix invalid grades":null:"Please select a climbing type":"Please select a location"}async function Ie(){const T=Ae();if(T){t(Ge,"error"),t(et,T,!0);return}t(Ge,"saving");try{const d=e(X).map(Qe=>({...Qe,isSport:it(Qe)})),ae={date:e(L),time:e(x),location:e(b),customLocation:e(ve)?e(b):void 0,climbingType:e(S),trainingTypes:e(W),difficulty:e(A),categories:e(J),energySystems:e(Z),wallAngles:e(B),fingerLoad:e(I),shoulderLoad:e(Y),forearmLoad:e(se),openGrip:e(le),crimpGrip:e(oe),pinchGrip:e($),sloperGrip:e(re),jugGrip:e(z),climbs:d,notes:e(ee)};let Ue;e(N)?Ue=await bs(i.initialData.id,ae):Ue=await ys(ae),Ue.ok?(t(Ge,"success"),t(et,e(N)?"Session updated!":"Session saved!",!0),e(N)||localStorage.removeItem(Ye),i.onSaved&&setTimeout(()=>{i.onSaved()},500)):(t(Ge,"error"),t(et,"Failed to save: "+(Ue.error||"Unknown error"))),e(N)||(window.dispatchEvent(new CustomEvent("session-saved")),setTimeout(()=>{Tt()},2e3))}catch(d){t(Ge,"error"),t(et,"Failed to save session"),console.error("Save error:",d)}}function Tt(){t(L,new Date().toISOString().split("T")[0],!0),t(x,new Date().toTimeString().split(" ")[0].slice(0,5),!0),t(b,""),t(ve,!1),t(S,""),t(W,["None"],!0),t(A,"None"),t(J,["None"],!0),t(Z,["None"],!0),t(B,["None"],!0),t(I,3),t(Y,3),t(se,3),t(le,3),t(oe,3),t($,3),t(re,3),t(z,3),t(X,[{isSport:!1,name:"",grade:"",attemptType:"Flash",attemptsNum:1,notes:"",wall:"Overhang"}],!0),t(ee,""),t(Ge,"idle"),t(et,"")}var dt=or(),Ct=s(dt),lt=s(Ct),de=r(s(lt),2),Se=s(de);ie(Se);var ze=r(Se,2);ie(ze),a(de),a(lt);var tt=r(lt,2),ot=r(s(tt),2);{var be=T=>{var d=Ks(),ae=s(d);ie(ae);var Ue=r(ae,2);Ue.__click=Pt,a(d),ue(ae,()=>e(b),Qe=>t(b,Qe)),n(T,d)},Re=T=>{var d=Js();d.__change=Xe;var ae=s(d);ae.value=ae.__value="";var Ue=r(ae);ne(Ue,17,()=>l,ce,(Qe,Gt)=>{var g=Qs(),c=s(g,!0);a(g);var Q={};F(()=>{j(c,e(Gt)),Q!==(Q=e(Gt))&&(g.value=(g.__value=e(Gt))??"")}),n(Qe,g)}),a(d),vt(d,()=>e(b),Qe=>t(b,Qe)),n(T,d)};H(ot,T=>{e(ve)?T(be):T(Re,!1)})}a(tt),a(Ct);var je=r(Ct,2),Ne=r(s(je),2),nt=s(Ne);nt.value=nt.__value="";var at=r(nt);ne(at,17,()=>f,ce,(T,d)=>{var ae=Ys(),Ue=s(ae,!0);a(ae);var Qe={};F(()=>{j(Ue,e(d)),Qe!==(Qe=e(d))&&(ae.value=(ae.__value=e(d))??"")}),n(T,ae)}),a(Ne),a(je);var He=r(je,2),q=r(s(He),2),E=s(q),o=r(s(E),2);oa(o,{get options(){return G},get selected(){return e(W)},placeholder:"Select types...",onChange:T=>t(W,T,!0)}),a(E);var p=r(E,2),O=r(s(p),2);ne(O,21,()=>M,ce,(T,d)=>{var ae=Xs(),Ue=s(ae,!0);a(ae);var Qe={};F(()=>{j(Ue,e(d)),Qe!==(Qe=e(d))&&(ae.value=(ae.__value=e(d))??"")}),n(T,ae)}),a(O),a(p);var V=r(p,2),m=r(s(V),2);oa(m,{get options(){return _},get selected(){return e(J)},placeholder:"Select categories...",onChange:T=>t(J,T,!0)}),a(V);var y=r(V,2),K=r(s(y),2);oa(K,{get options(){return R},get selected(){return e(Z)},placeholder:"Select systems...",onChange:T=>t(Z,T,!0)}),a(y);var De=r(y,2),Ee=r(s(De),2);oa(Ee,{get options(){return u},get selected(){return e(B)},placeholder:"Select walls...",onChange:T=>t(B,T,!0)}),a(De),a(q),a(He);var pe=r(He,2),me=r(s(pe),2),fe=s(me),Me=s(fe),_e=s(Me),xe=s(_e);{var It=T=>{var d=Zs();n(T,d)};H(xe,T=>{e(Ze)&&T(It)})}qa(8),a(_e),a(Me);var gt=r(Me);ne(gt,21,()=>e(X),ce,(T,d,ae)=>{var Ue=rr(),Qe=s(Ue);{var Gt=ge=>{var Je=$s(),qe=s(Je);ie(qe),a(Je),Wa(qe,()=>e(d).isSport,Qt=>e(d).isSport=Qt),n(ge,Je)};H(Qe,ge=>{e(Ze)&&ge(Gt)})}var g=r(Qe),c=s(g);ie(c),a(g);var Q=r(g),Oe=s(Q);Xa(Oe,{get value(){return e(d).grade},set value(ge){e(d).grade=ge}}),a(Q);var Pe=r(Q),_t=s(Pe);_t.__change=ge=>U(ae,ge.target.value),ne(_t,21,()=>D,ce,(ge,Je)=>{var qe=er(),Qt=s(qe,!0);a(qe);var Jt={};F(()=>{j(Qt,e(Je)),Jt!==(Jt=e(Je))&&(qe.value=(qe.__value=e(Je))??"")}),n(ge,qe)}),a(_t);var Vt;Fa(_t),a(Pe);var At=r(Pe),Dt=s(At);ie(Dt),a(At);var Ut=r(At),Yt=s(Ut);ne(Yt,21,()=>h.filter(ge=>ge!=="None"),ce,(ge,Je)=>{var qe=tr(),Qt=s(qe,!0);a(qe);var Jt={};F(()=>{j(Qt,e(Je)),Jt!==(Jt=e(Je))&&(qe.value=(qe.__value=e(Je))??"")}),n(ge,qe)}),a(Yt),a(Ut);var Et=r(Ut),da=s(Et);ne(da,21,()=>k,ce,(ge,Je)=>{var qe=ar(),Qt=s(qe,!0);a(qe);var Jt={};F(()=>{j(Qt,e(Je)),Jt!==(Jt=e(Je))&&(qe.value=(qe.__value=e(Je))??"")}),n(ge,qe)}),a(da),a(Et);var ta=r(Et);let ga;var aa=s(ta);Ea(aa),a(ta);var pa=r(ta),ba=s(pa);{var ya=ge=>{var Je=sr();Je.__click=()=>xt(ae),n(ge,Je)};H(ba,ge=>{e(X).length>1&&ge(ya)})}a(pa),a(Ue),F(()=>{Vt!==(Vt=e(d).attemptType)&&(_t.value=(_t.__value=e(d).attemptType)??"",Ba(_t,e(d).attemptType)),Dt.disabled=e(d).attemptType==="Flash"||e(d).attemptType==="Onsight",ga=Rt(ta,1,"notes-cell svelte-1lf3qka",null,ga,{expanded:e(C)===ae})}),ue(c,()=>e(d).name,ge=>e(d).name=ge),ue(Dt,()=>e(d).attemptsNum,ge=>e(d).attemptsNum=ge),vt(Yt,()=>e(d).wall,ge=>e(d).wall=ge),vt(da,()=>e(d).techniqueFocus,ge=>e(d).techniqueFocus=ge),Mt("focus",aa,()=>te(ae)),Mt("blur",aa,We),ue(aa,()=>e(d).notes,ge=>e(d).notes=ge),n(T,Ue)}),a(gt),a(fe),a(me);var Lt=r(me,2);Lt.__click=qt,a(pe);var st=r(pe,2),Ce=r(s(st),2),ke=s(Ce),Fe=s(ke);Te(Fe,{id:"finger-load",label:"Finger",get value(){return e(I)},set value(T){t(I,T,!0)}}),a(ke);var yt=r(ke,2),Nt=s(yt);Te(Nt,{id:"shoulder-load",label:"Shoulder",get value(){return e(Y)},set value(T){t(Y,T,!0)}}),a(yt);var pt=r(yt,2),ct=s(pt);Te(ct,{id:"forearm-load",label:"Forearm",get value(){return e(se)},set value(T){t(se,T,!0)}}),a(pt),a(Ce);var Le=r(Ce,4),mt=s(Le),ft=s(mt);Te(ft,{id:"open-grip",label:"Open",get value(){return e(le)},set value(T){t(le,T,!0)}}),a(mt);var jt=r(mt,2),Ve=s(jt);Te(Ve,{id:"crimp-grip",label:"Crimp",get value(){return e(oe)},set value(T){t(oe,T,!0)}}),a(jt);var Ke=r(jt,2),Ot=s(Ke);Te(Ot,{id:"pinch-grip",label:"Pinch",get value(){return e($)},set value(T){t($,T,!0)}}),a(Ke);var Ht=r(Ke,2),$t=s(Ht);Te($t,{id:"sloper-grip",label:"Sloper",get value(){return e(re)},set value(T){t(re,T,!0)}}),a(Ht);var ia=r(Ht,2),zt=s(ia);Te(zt,{id:"jug-grip",label:"Jug",get value(){return e(z)},set value(T){t(z,T,!0)}}),a(ia),a(Le),a(st);var ea=r(st,2),_a=s(ea);Sa(_a,{get value(){return e(ee)},set value(T){t(ee,T,!0)}}),a(ea);var ka=r(ea,2),ca=s(ka);{var Na=T=>{var d=ir();let ae;var Ue=s(d,!0);a(d),F(()=>{ae=Rt(d,1,"save-message svelte-1lf3qka",null,ae,{success:e(Ge)==="success",error:e(Ge)==="error"}),j(Ue,e(et))}),n(T,d)};H(ca,T=>{e(et)&&T(Na)})}var ua=r(ca,2),xa=s(ua);{var Ta=T=>{var d=lr();d.__click=function(...ae){i.onCancel?.apply(this,ae)},F(()=>d.disabled=e(Ge)==="saving"),n(T,d)};H(xa,T=>{e(N)&&T(Ta)})}var va=r(xa,2);va.__click=Ie;var ha=s(va);{var Da=T=>{var d=kt();F(()=>j(d,e(N)?"Updating...":"Saving...")),n(T,d)},Ca=T=>{var d=Kt(),ae=Ft(d);{var Ue=Gt=>{var g=kt();F(()=>j(g,`✓ ${e(N)?"Updated!":"Saved!"}`)),n(Gt,g)},Qe=Gt=>{var g=kt();F(()=>j(g,e(N)?"Update Session":"Save Session")),n(Gt,g)};H(ae,Gt=>{e(Ge)==="success"?Gt(Ue):Gt(Qe,!1)},!0)}n(T,d)};H(ha,T=>{e(Ge)==="saving"?T(Da):T(Ca,!1)})}a(va),a(ua),a(ka),a(dt),F(()=>va.disabled=e(Ge)==="saving"),ue(Se,()=>e(L),T=>t(L,T)),ue(ze,()=>e(x),T=>t(x,T)),vt(Ne,()=>e(S),T=>t(S,T)),vt(O,()=>e(A),T=>t(A,T)),n(P,dt),Wt()}Zt(["click","change"]);const Aa={Portland:{"Blacknor Far North":["Far North (Pit Prop Crag - North Wing)","Far North (Pit Prop Crag - South Wing)","Sunstone Wall","Sandcastle Wall","Hidden Wall"],"Blacknor North":["Diamond Slab","The Ledge","Sharpy's Wall","Reptile Smile Area","Wolfgang Forever Area","Captain Klutz Area","Death of Cool Area","Seattle Be The Day Area","Blacknor Heights (Blacknor Quarry Bouldering)","Blacknor Fort Quarry (Sport)","Cliff Top Way Down"],"Blacknor Central":["The Veranda","Medusa Wall","The Battlement","Wave Wall","Mirror Wall"],"Blacknor South":["Fallen Slab","Infidel Slab","Englands Dreaming Area","Sacred Angel Area","The Reach","Shit Happens Wall"],"Blacknor Far South":["Deadman's Bay","The White Hole","Wall of Lament"],"Battleship Edge":["Northern Sector","Main Edge","Battleship Block"],"Battleship Back Cliff":["Zinc Oxide Mountain","The Main Cliff","Sleepy Hollow"],"Wallsend North":["Sweet Smell of Success Wall","The Coastguard Wall (Northern section)"],"Wallsend South":["The Upper Tier","The Lower Tier","Stalker's Zone"],"Coastguard North":["Top Tier","Main Cliff (Beeston Bump)","The Grooves"],"Coastguard South":["The White Wall","Tennessee Wall","The Veranda (South)"],Godnor:["Godnor North","Godnor Far South","The Godnor Gate Area"],Neddyfields:["Neddyfields Main Wall","The Flowstone Wall","Neddyfields Bouldering"],"Cheyne Cliff":["Red Wall","Inception Wall","Road Rage Wall","The Nook","The Block"],"The Cuttings":["The Cuttings (Main Cliff)","The Pulpit","The Bower","Sun Lover's Slab"],"The New Cuttings":["The Gallery","The Annex","The Arches","The Grotto"],"The Cuttings Boulderfield":["The Tractor","The Coffin","The Octagon","Lightning Wall"]},Swanage:{"Dancing Ledge":["The Amphitheatre","The Upper Tier","The Skull","Promenade","The Quarry"],Hedbury:["Hedbury Quarry (Main)","Hedbury Sea Cliff (The Big Wall)"],Winspit:["The West Quarry","The East Quarry (The Playground)","The Sea Walls"]},"Wye Valley":{"Ban-y-Gor":["The Main Wall","The River Wall","The Far Left","The Upper Tier"],"Biblins Cave":["The Main Cave","The Right Wall","The Entrance Area"],"Woodcroft Quarry":["Fly Wall","The Main Quarry","The Retaining Wall"],"Wyndcliff Quarry":["The Main Wall (Left & Right)","The Upper Tier","The Shady Wall"]},"Costa Del Severn":{Brean:["Boulder Cove","The River Face (Main Cliff)","The Fort","The Slab"],Clevedon:["Ladye Bay","Marine Lake (Bouldering)","The Sea Walls"],"Portishead Quarry":["The Main Wall","The Slab","The Upper Tier"]},Bristol:{"Avon Gorge":["Sea Walls","Suspension Bridge Buttress","Morning Slab","Main Wall","New Quarry","The Amphitheatre","Unknown Wall"],"Leigh Woods":["Quarry 1","Quarry 2","The Main Buttress"],"Bickley Wood":["The Main Wall","The Stream Wall"],Hambrook:["The Roadside Wall"]},Cotswolds:{"Sally-in-the-Wood":["The Main Edge","The Boulders"],"Browns Folly":["The Tower","The Main Wall","The Upper Wall","The Far Right"]},Mendips:{"Cheddar Gorge":["High Rock","Sunset Buttress","Lion Rock","The Pinnacles","Acid Rock","Coronation Street","Long Rock"]},Gower:{Rhossili:["Shipwreck Cove","Rhossili Upper Cliff","The Tears Point"],"Trial Wall Area":["Trial Wall","The Terraces"],Foxhole:["The Main Cave","The Slab","The Overhangs"]},"South Wales":{"Dinas Rock":["Kennelgarth Wall","Main Overhang","Roadside Crag","The Inland Slabs"],Ogmore:["The Deep Zawn","Hardy's Bay","The Diamond","Daytona Wall"]},"North Wales":{"Cromlech (Dinas Cromlech)":["The Corner (Cenotaph)","Left Wall","Right Wall"],"Australia (Slate Quarries)":["The Sidings","Looning the Tube Area","Dali's Hole","The Salt Pans"]},"Peak District":{"Burbage South Valley":["The Boulders","The Edge (The Alliance Area)","The Tank"],"Gardoms Edge":["Apple Buttress","The Eye of Faith","Moomin Buttress"],"Raven Tor":["The Main Wall","The Weedkiller Wall"],Stanage:["Popular End","Plantation","High Neb","Stanage North","The End","Stanage Far North"],"Curbar Edge":["The Main Edge","Elder Crack Area"]},Devon:{Dartmoor:["Haytor (Low Man)","Hound Tor","The Dewerstone (Main Cliff)","Bonehill Rocks"],Hartland:["Screda Point","Smoothlands","Blackchurch Rock"],Tintagel:["The Great Cliff","Gull Rock","Ila's Ledge"]}};function nr(){return Object.keys(Aa)}function Ka(P){return Aa[P]?Object.keys(Aa[P]):[]}var cr=w('<div class="form-header-row" style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 1.5rem;"><h3 style="margin: 0;" class="svelte-15o2ys1">⛰️ Outdoor Climb</h3></div>'),ur=w("<option> </option>"),vr=w('<div class="input-with-action svelte-15o2ys1"><input type="text" id="crag-manual" placeholder="Enter custom crag name..." class="flat-left svelte-15o2ys1"/> <button type="button" class="action-btn flat-right svelte-15o2ys1" title="Back to list">✕</button></div>'),dr=w("<option> </option>"),gr=w("<option>Other (Manual Entry)</option>"),pr=w('<select id="crag" class="svelte-15o2ys1"><option disabled> </option><!><!></select>'),mr=w("<option> </option>"),fr=w("<option> </option>"),_r=w('<th class="svelte-15o2ys1">Sport?</th>'),hr=w('<td class="center svelte-15o2ys1"><input type="checkbox" class="svelte-15o2ys1"/></td>'),br=w("<option> </option>"),yr=w("<option> </option>"),wr=w("<option> </option>"),Sr=w('<button type="button" class="remove-btn svelte-15o2ys1">✕</button>'),kr=w('<tr><!><td class="svelte-15o2ys1"><input type="text" placeholder="Route name..." class="svelte-15o2ys1"/></td><td class="svelte-15o2ys1"><!></td><td class="svelte-15o2ys1"><select class="svelte-15o2ys1"></select></td><td class="svelte-15o2ys1"><input type="number" min="1" class="svelte-15o2ys1"/></td><td class="svelte-15o2ys1"><select class="svelte-15o2ys1"></select></td><td class="svelte-15o2ys1"><select class="svelte-15o2ys1"></select></td><td><textarea placeholder="Notes..." class="svelte-15o2ys1"></textarea></td><td class="center svelte-15o2ys1"><!></td></tr>'),xr=w("<div> </div>"),Tr=w('<div class="form-content svelte-15o2ys1"><!> <div class="form-row svelte-15o2ys1"><div class="form-group svelte-15o2ys1"><label for="date" class="svelte-15o2ys1">Date</label> <div class="date-time-row svelte-15o2ys1"><input type="date" id="date" class="svelte-15o2ys1"/> <input type="time" id="time" class="svelte-15o2ys1"/></div></div> <div class="form-group svelte-15o2ys1"><label for="area" class="svelte-15o2ys1">Area</label> <select id="area" class="svelte-15o2ys1"><option disabled>Select area...</option><!></select></div></div> <div class="form-row svelte-15o2ys1"><div class="form-group svelte-15o2ys1"><label for="crag" class="svelte-15o2ys1">Crag</label> <!></div> <div class="form-group svelte-15o2ys1"><label for="sector" class="svelte-15o2ys1">Wall / Sector</label> <input type="text" id="sector" placeholder="Enter sector or wall name..." class="svelte-15o2ys1"/></div></div> <div class="form-group svelte-15o2ys1"><label for="climbing-type" class="svelte-15o2ys1">Climbing Type</label> <select id="climbing-type" class="svelte-15o2ys1"><option disabled>Select type...</option><!></select></div> <div class="training-section svelte-15o2ys1"><h4 class="svelte-15o2ys1">Training Details</h4> <div class="training-grid svelte-15o2ys1"><div class="training-item svelte-15o2ys1"><label for="training-type" class="svelte-15o2ys1">Training Type</label> <!></div> <div class="training-item svelte-15o2ys1"><label for="difficulty" class="svelte-15o2ys1">Difficulty</label> <select id="difficulty" class="svelte-15o2ys1"></select></div> <div class="training-item svelte-15o2ys1"><label for="category" class="svelte-15o2ys1">Category</label> <!></div> <div class="training-item svelte-15o2ys1"><label for="energy-system" class="svelte-15o2ys1">Energy System</label> <!></div></div></div> <div class="climbs-section svelte-15o2ys1"><h4 class="svelte-15o2ys1">Climbs</h4> <div class="table-container svelte-15o2ys1"><table class="climbs-table svelte-15o2ys1"><thead><tr><!><th class="svelte-15o2ys1">Name</th><th class="svelte-15o2ys1">Grade</th><th class="svelte-15o2ys1">Attempt</th><th class="svelte-15o2ys1">#</th><th class="svelte-15o2ys1">Wall Angle</th><th class="svelte-15o2ys1">Technique Focus</th><th class="svelte-15o2ys1">Notes</th><th class="svelte-15o2ys1"></th></tr></thead><tbody></tbody></table></div> <button type="button" class="add-btn svelte-15o2ys1">+ Add Climb</button></div> <div class="load-section svelte-15o2ys1"><h4 class="svelte-15o2ys1">Load Metrics</h4> <div class="load-metrics svelte-15o2ys1"><div class="metric-row svelte-15o2ys1"><!></div> <div class="metric-row svelte-15o2ys1"><!></div> <div class="metric-row svelte-15o2ys1"><!></div></div> <h4 class="mt-4 svelte-15o2ys1">Grip Metrics</h4> <div class="load-metrics svelte-15o2ys1"><div class="metric-row svelte-15o2ys1"><!></div> <div class="metric-row svelte-15o2ys1"><!></div> <div class="metric-row svelte-15o2ys1"><!></div> <div class="metric-row svelte-15o2ys1"><!></div> <div class="metric-row svelte-15o2ys1"><!></div></div></div>  <div class="notes-section"><!></div> <div class="submit-section svelte-15o2ys1"><!> <button type="button" class="submit-btn svelte-15o2ys1"><!></button></div></div>');function Bi(P,i){Bt(i,!0);const l=nr(),f=["Boulder","Sport","Trad"],D=["Onsight","Flash","Redpoint","Repeat","Dogged","DNF"],G=["None","Overhang","Vertical","Slab","Roof"],M=["None","Projecting","Onsighting","Campusing","Repeaters","Comp Sim"],_=["None","Easy","Medium","Hard","Max","Limit+"],R=["None","Strength","Power","Strength Capacity","Power Capacity","Strength Endurance","Power Endurance","Endurance","Coordination","Slab Technique","Overhang Technique"],k=["None","Aerobic Lactic Capacity","Aerobic Lactic Power","Anaerobic Alactic Capacity","Anaerobic Alactic Power","Anaerobic Power","Anaerobic Lactic Capacity"],h=["None","Trusting feet","Double-clutch","Deadpointing","Flagging","Swapping feet","Edging","Smearing","Matching","Backstepping","Drop Knee","Bridging","Laybacking","Mantling","Kneebar","Dyno","Coordination Moves","Gastoning","Undercutting","Compressing","Heel Hook","Toe Hook","Bicycle"];let u=he(i,"initialData",3,null),C=St(()=>!!u()),N=v(null),L=v(Be(new Date().toISOString().split("T")[0])),x=v(Be(new Date().toTimeString().split(" ")[0].slice(0,5))),b=v(""),S=v(""),W=v(""),A=v(""),J=v(Be(["None"])),Z=v("None"),B=v(Be(["None"])),I=v(Be(["None"])),Y=v(3),se=v(3),le=v(3),oe=v(3),$=v(3),re=v(3),z=v(3),X=v(3),ee=v(Be([{isSport:!1,name:"",grade:"",attemptType:"Flash",attemptsNum:1,notes:""}])),ve=v(""),Ye=St(()=>e(b)?Ka(e(b)):[]),ye=v(!1);const Xe="outdoor_climb_draft";let Pt=v(!1);ma(()=>{if(u()){t(L,u().date,!0),t(x,u().time||"12:00",!0),t(b,u().area,!0),t(S,u().crag,!0);const g=Ka(e(b));e(S)&&!g.includes(e(S))&&t(ye,!0),t(W,u().sector||"",!0),t(A,u().climbingType,!0),t(J,u().trainingTypes||["None"],!0),t(Z,u().difficulty||"Moderate",!0),t(B,u().categories||["None"],!0),t(I,u().energySystems||["None"],!0),t(Y,u().fingerLoad,!0),t(se,u().shoulderLoad,!0),t(le,u().forearmLoad,!0),t(oe,u().openGrip||3,!0),t($,u().crimpGrip||3,!0),t(re,u().pinchGrip||3,!0),t(z,u().sloperGrip||3,!0),t(X,u().jugGrip||3,!0),t(ee,u().climbs||[],!0),t(ve,u().notes||"",!0),t(Pt,!0)}else{const g=localStorage.getItem(Xe);if(g)try{const c=JSON.parse(g);c.date&&t(L,c.date,!0),c.time&&t(x,c.time,!0),c.area&&t(b,c.area,!0),c.crag&&t(S,c.crag,!0),c.sector&&t(W,c.sector,!0),c.isOtherCrag&&t(ye,c.isOtherCrag,!0),c.climbingType&&t(A,c.climbingType,!0),c.trainingTypes&&t(J,c.trainingTypes,!0),c.difficulty&&t(Z,c.difficulty,!0),c.categories&&t(B,c.categories,!0),c.energySystems&&t(I,c.energySystems,!0),c.fingerLoad&&t(Y,c.fingerLoad,!0),c.shoulderLoad&&t(se,c.shoulderLoad,!0),c.forearmLoad&&t(le,c.forearmLoad,!0),c.openGrip&&t(oe,c.openGrip,!0),c.crimpGrip&&t($,c.crimpGrip,!0),c.pinchGrip&&t(re,c.pinchGrip,!0),c.sloperGrip&&t(z,c.sloperGrip,!0),c.jugGrip&&t(X,c.jugGrip,!0),c.climbs&&t(ee,c.climbs,!0),c.notes&&t(ve,c.notes,!0)}catch(c){console.error("Failed to restore draft",c)}t(Pt,!0)}}),ra(()=>{if(!e(Pt)||e(C))return;const g={date:e(L),time:e(x),area:e(b),crag:e(S),sector:e(W),isOtherCrag:e(ye),climbingType:e(A),trainingTypes:e(J),difficulty:e(Z),categories:e(B),energySystems:e(I),fingerLoad:e(Y),shoulderLoad:e(se),forearmLoad:e(le),openGrip:e(oe),crimpGrip:e($),pinchGrip:e(re),sloperGrip:e(z),jugGrip:e(X),climbs:e(ee),notes:e(ve)};localStorage.setItem(Xe,JSON.stringify(g))}),ra(()=>{e(b)&&(t(S,""),t(ye,!1))});function qt(){e(S)==="Other"&&(t(ye,!0),t(S,""))}function xt(){t(ye,!1),t(S,"")}function U(){t(ee,[...e(ee),{isSport:!1,name:"",grade:"",attemptType:"Flash",attemptsNum:1,notes:""}],!0)}function te(g){t(ee,e(ee).filter((c,Q)=>Q!==g),!0)}function We(g,c){e(ee)[g].attemptType=c,(c==="Flash"||c==="Onsight")&&(e(ee)[g].attemptsNum=1)}function Ze(g){t(N,g,!0)}function it(){t(N,null)}let $e=St(()=>e(A)==="Trad");function Ge(g){return e(A)==="Sport"?!0:e(A)==="Boulder"?!1:g.isSport}function et(g){return g.trim()?za.includes(g.trim().toLowerCase()):!0}let Ae=v("idle"),Ie=v("");function Tt(){return e(b)?e(S)?e(A)?e(ee).filter(c=>c.grade.trim()&&!et(c.grade)).length>0?"Please fix invalid grades":null:"Please select a climbing type":"Please select a crag":"Please select an area"}async function dt(){const g=Tt();if(g){t(Ae,"error"),t(Ie,g,!0);return}t(Ae,"saving");try{const c=e(ee).map(Pe=>({...Pe,isSport:Ge(Pe)})),Q={date:e(L),time:e(x),area:e(b),crag:e(S),sector:e(W)||void 0,climbingType:e(A),trainingTypes:e(J),difficulty:e(Z),categories:e(B),energySystems:e(I),fingerLoad:e(Y),shoulderLoad:e(se),forearmLoad:e(le),openGrip:e(oe),crimpGrip:e($),pinchGrip:e(re),sloperGrip:e(z),jugGrip:e(X),climbs:c,notes:e(ve)};let Oe;e(C)&&u()?Oe=await ws(u().id,Q):Oe=await Ss(Q),Oe.ok?(t(Ae,"success"),t(Ie,"Session saved!"),e(C)||localStorage.removeItem(Xe),i.onSaved?i.onSaved():(window.dispatchEvent(new CustomEvent("session-saved")),e(C)||setTimeout(()=>{Ct()},2e3))):(t(Ae,"error"),t(Ie,"Failed to save: "+(Oe.error||"Unknown error")))}catch(c){t(Ae,"error"),t(Ie,"Failed to save session"),console.error("Save error:",c)}}function Ct(){t(L,new Date().toISOString().split("T")[0],!0),t(x,new Date().toTimeString().split(" ")[0].slice(0,5),!0),t(b,""),t(S,""),t(W,""),t(A,""),t(J,["None"],!0),t(Z,"None"),t(B,["None"],!0),t(I,["None"],!0),t(Y,3),t(se,3),t(le,3),t(oe,3),t($,3),t(re,3),t(z,3),t(X,3),t(ee,[{isSport:!1,name:"",grade:"",attemptType:"Flash",attemptsNum:1,notes:""}],!0),t(ve,""),t(Ae,"idle"),t(Ie,"")}var lt=Tr(),de=s(lt);{var Se=g=>{var c=cr();n(g,c)};H(de,g=>{e(C)||g(Se)})}var ze=r(de,2),tt=s(ze),ot=r(s(tt),2),be=s(ot);ie(be);var Re=r(be,2);ie(Re),a(ot),a(tt);var je=r(tt,2),Ne=r(s(je),2),nt=s(Ne);nt.value=nt.__value="";var at=r(nt);ne(at,17,()=>l,ce,(g,c)=>{var Q=ur(),Oe=s(Q,!0);a(Q);var Pe={};F(()=>{j(Oe,e(c)),Pe!==(Pe=e(c))&&(Q.value=(Q.__value=e(c))??"")}),n(g,Q)}),a(Ne),a(je),a(ze);var He=r(ze,2),q=s(He),E=r(s(q),2);{var o=g=>{var c=vr(),Q=s(c);ie(Q);var Oe=r(Q,2);Oe.__click=xt,a(c),ue(Q,()=>e(S),Pe=>t(S,Pe)),n(g,c)},p=g=>{var c=pr();c.__change=qt;var Q=s(c),Oe=s(Q,!0);a(Q),Q.value=Q.__value="";var Pe=r(Q);ne(Pe,17,()=>e(Ye),ce,(At,Dt)=>{var Ut=dr(),Yt=s(Ut,!0);a(Ut);var Et={};F(()=>{j(Yt,e(Dt)),Et!==(Et=e(Dt))&&(Ut.value=(Ut.__value=e(Dt))??"")}),n(At,Ut)});var _t=r(Pe);{var Vt=At=>{var Dt=gr();Dt.value=Dt.__value="Other",n(At,Dt)};H(_t,At=>{e(b)&&At(Vt)})}a(c),F(()=>{c.disabled=!e(b),j(Oe,e(b)?"Select crag...":"Select area first...")}),vt(c,()=>e(S),At=>t(S,At)),n(g,c)};H(E,g=>{e(ye)?g(o):g(p,!1)})}a(q);var O=r(q,2),V=r(s(O),2);ie(V),a(O),a(He);var m=r(He,2),y=r(s(m),2),K=s(y);K.value=K.__value="";var De=r(K);ne(De,17,()=>f,ce,(g,c)=>{var Q=mr(),Oe=s(Q,!0);a(Q);var Pe={};F(()=>{j(Oe,e(c)),Pe!==(Pe=e(c))&&(Q.value=(Q.__value=e(c))??"")}),n(g,Q)}),a(y),a(m);var Ee=r(m,2),pe=r(s(Ee),2),me=s(pe),fe=r(s(me),2);oa(fe,{get options(){return M},get selected(){return e(J)},placeholder:"Select types...",onChange:g=>t(J,g,!0)}),a(me);var Me=r(me,2),_e=r(s(Me),2);ne(_e,21,()=>_,ce,(g,c)=>{var Q=fr(),Oe=s(Q,!0);a(Q);var Pe={};F(()=>{j(Oe,e(c)),Pe!==(Pe=e(c))&&(Q.value=(Q.__value=e(c))??"")}),n(g,Q)}),a(_e),a(Me);var xe=r(Me,2),It=r(s(xe),2);oa(It,{get options(){return R},get selected(){return e(B)},placeholder:"Select categories...",onChange:g=>t(B,g,!0)}),a(xe);var gt=r(xe,2),Lt=r(s(gt),2);oa(Lt,{get options(){return k},get selected(){return e(I)},placeholder:"Select systems...",onChange:g=>t(I,g,!0)}),a(gt),a(pe),a(Ee);var st=r(Ee,2),Ce=r(s(st),2),ke=s(Ce),Fe=s(ke),yt=s(Fe),Nt=s(yt);{var pt=g=>{var c=_r();n(g,c)};H(Nt,g=>{e($e)&&g(pt)})}qa(8),a(yt),a(Fe);var ct=r(Fe);ne(ct,21,()=>e(ee),ce,(g,c,Q)=>{var Oe=kr(),Pe=s(Oe);{var _t=we=>{var ht=hr(),rt=s(ht);ie(rt),a(ht),Wa(rt,()=>e(c).isSport,la=>e(c).isSport=la),n(we,ht)};H(Pe,we=>{e($e)&&we(_t)})}var Vt=r(Pe),At=s(Vt);ie(At),a(Vt);var Dt=r(Vt),Ut=s(Dt);Xa(Ut,{get value(){return e(c).grade},set value(we){e(c).grade=we}}),a(Dt);var Yt=r(Dt),Et=s(Yt);Et.__change=we=>We(Q,we.target.value),ne(Et,21,()=>D,ce,(we,ht)=>{var rt=br(),la=s(rt,!0);a(rt);var sa={};F(()=>{j(la,e(ht)),sa!==(sa=e(ht))&&(rt.value=(rt.__value=e(ht))??"")}),n(we,rt)}),a(Et);var da;Fa(Et),a(Yt);var ta=r(Yt),ga=s(ta);ie(ga),a(ta);var aa=r(ta),pa=s(aa);ne(pa,21,()=>G.filter(we=>we!=="None"),ce,(we,ht)=>{var rt=yr(),la=s(rt,!0);a(rt);var sa={};F(()=>{j(la,e(ht)),sa!==(sa=e(ht))&&(rt.value=(rt.__value=e(ht))??"")}),n(we,rt)}),a(pa),a(aa);var ba=r(aa),ya=s(ba);ne(ya,21,()=>h,ce,(we,ht)=>{var rt=wr(),la=s(rt,!0);a(rt);var sa={};F(()=>{j(la,e(ht)),sa!==(sa=e(ht))&&(rt.value=(rt.__value=e(ht))??"")}),n(we,rt)}),a(ya),a(ba);var ge=r(ba);let Je;var qe=s(ge);Ea(qe),a(ge);var Qt=r(ge),Jt=s(Qt);{var ts=we=>{var ht=Sr();ht.__click=()=>te(Q),n(we,ht)};H(Jt,we=>{e(ee).length>1&&we(ts)})}a(Qt),a(Oe),F(()=>{da!==(da=e(c).attemptType)&&(Et.value=(Et.__value=e(c).attemptType)??"",Ba(Et,e(c).attemptType)),ga.disabled=e(c).attemptType==="Flash"||e(c).attemptType==="Onsight",Je=Rt(ge,1,"notes-cell svelte-15o2ys1",null,Je,{expanded:e(N)===Q})}),ue(At,()=>e(c).name,we=>e(c).name=we),ue(ga,()=>e(c).attemptsNum,we=>e(c).attemptsNum=we),vt(pa,()=>e(c).wall,we=>e(c).wall=we),vt(ya,()=>e(c).techniqueFocus,we=>e(c).techniqueFocus=we),Mt("focus",qe,()=>Ze(Q)),Mt("blur",qe,it),ue(qe,()=>e(c).notes,we=>e(c).notes=we),n(g,Oe)}),a(ct),a(ke),a(Ce);var Le=r(Ce,2);Le.__click=U,a(st);var mt=r(st,2),ft=r(s(mt),2),jt=s(ft),Ve=s(jt);Te(Ve,{id:"finger-load",label:"Finger",get value(){return e(Y)},set value(g){t(Y,g,!0)}}),a(jt);var Ke=r(jt,2),Ot=s(Ke);Te(Ot,{id:"shoulder-load",label:"Shoulder",get value(){return e(se)},set value(g){t(se,g,!0)}}),a(Ke);var Ht=r(Ke,2),$t=s(Ht);Te($t,{id:"forearm-load",label:"Forearm",get value(){return e(le)},set value(g){t(le,g,!0)}}),a(Ht),a(ft);var ia=r(ft,4),zt=s(ia),ea=s(zt);Te(ea,{id:"open-grip",label:"Open",get value(){return e(oe)},set value(g){t(oe,g,!0)}}),a(zt);var _a=r(zt,2),ka=s(_a);Te(ka,{id:"crimp-grip",label:"Crimp",get value(){return e($)},set value(g){t($,g,!0)}}),a(_a);var ca=r(_a,2),Na=s(ca);Te(Na,{id:"pinch-grip",label:"Pinch",get value(){return e(re)},set value(g){t(re,g,!0)}}),a(ca);var ua=r(ca,2),xa=s(ua);Te(xa,{id:"sloper-grip",label:"Sloper",get value(){return e(z)},set value(g){t(z,g,!0)}}),a(ua);var Ta=r(ua,2),va=s(Ta);Te(va,{id:"jug-grip",label:"Jug",get value(){return e(X)},set value(g){t(X,g,!0)}}),a(Ta),a(ia),a(mt);var ha=r(mt,2),Da=s(ha);Sa(Da,{placeholder:"How did the session feel? Weather, conditions, mood...",get value(){return e(ve)},set value(g){t(ve,g,!0)}}),a(ha);var Ca=r(ha,2),T=s(Ca);{var d=g=>{var c=xr();let Q;var Oe=s(c,!0);a(c),F(()=>{Q=Rt(c,1,"save-message svelte-15o2ys1",null,Q,{success:e(Ae)==="success",error:e(Ae)==="error"}),j(Oe,e(Ie))}),n(g,c)};H(T,g=>{e(Ie)&&g(d)})}var ae=r(T,2);ae.__click=dt;var Ue=s(ae);{var Qe=g=>{var c=kt("Saving...");n(g,c)},Gt=g=>{var c=Kt(),Q=Ft(c);{var Oe=_t=>{var Vt=kt("✓ Saved!");n(_t,Vt)},Pe=_t=>{var Vt=kt("Save Session");n(_t,Vt)};H(Q,_t=>{e(Ae)==="success"?_t(Oe):_t(Pe,!1)},!0)}n(g,c)};H(Ue,g=>{e(Ae)==="saving"?g(Qe):g(Gt,!1)})}a(ae),a(Ca),a(lt),F(()=>ae.disabled=e(Ae)==="saving"),ue(be,()=>e(L),g=>t(L,g)),ue(Re,()=>e(x),g=>t(x,g)),vt(Ne,()=>e(b),g=>t(b,g)),ue(V,()=>e(W),g=>t(W,g)),vt(y,()=>e(A),g=>t(A,g)),vt(_e,()=>e(Z),g=>t(Z,g)),n(P,lt),Wt()}Zt(["click","change"]);const Ra=[{id:"pull_ups",name:"Pull-Up",category:"Pull",subcategory:"Vertical Pull",targetMuscles:["Lats","Biceps"],instructions:["Grip bar wider than shoulders.","Pull chest up toward the bar."],images:["/exercises/pull-ups.webp"]},{id:"weighted_pull_ups",name:"Weighted Pull-Up",category:"Pull",subcategory:"Vertical Pull",targetMuscles:["Lats","Biceps"],instructions:["Grip bar wider than shoulders.","Pull chest up toward the bar."],images:["/exercises/weighted_pull_ups.webp"]},{id:"lat_pulldown",name:"Lat Pulldown",category:"Pull",subcategory:"Vertical Pull",targetMuscles:["Lats"],instructions:["Sit in machine.","Pull bar down to upper chest."],images:["/exercises/lat_pulldown.webp"]},{id:"one_arm_assisted_pull_up",name:"1 Arm Assisted Pull-Up",category:"Pull",subcategory:"Vertical Pull",targetMuscles:["Lats","Biceps"],instructions:["Use a pulley or band to assist one arm.","Perform a one-arm pull-up."],images:["/exercises/1_Arm_Assisted_Pull-Up.webp"]},{id:"bent_over_row",name:"Barbell Row",category:"Pull",subcategory:"Horizontal Pull",targetMuscles:["Lats","Rhomboids"],instructions:["Hinge at hips.","Pull weight to hip pocket."],images:["/exercises/bent_over_row.webp"]},{id:"single_arm_db_row",name:"Dumbbell Row",category:"Pull",subcategory:"Horizontal Pull",targetMuscles:["Lats","Rhomboids"],instructions:["Support on bench.","Pull dumbbell to hip."],images:["/exercises/single_arm_db_row.webp"]},{id:"one_arm_negatives",name:"One Arm Negatives",category:"Pull",subcategory:"Lock-offs",targetMuscles:["Lats","Biceps","Forearms"],instructions:["Jump or assist up to the top position.","Lower yourself as slowly as possible with one arm."],images:["/exercises/one_arm_negatives.webp"]},{id:"full_lock_offs",name:"Full Lock-offs",category:"Pull",subcategory:"Lock-offs",targetMuscles:["Lats","Biceps"],instructions:["Hold the top position of a pull-up.","Maintain chin above the bar for time."],images:["/exercises/full_lock_offs.webp"]},{id:"90_degree_lock_offs",name:"90 Lock-offs",category:"Pull",subcategory:"Lock-offs",targetMuscles:["Lats","Biceps"],instructions:["Hold a pull-up position with elbows at 90 degrees.","Keep core tight and hold for time."],images:["/exercises/90_degree_lock_offs.webp"]},{id:"120_degree_lock_offs",name:"120 Lock-offs",category:"Pull",subcategory:"Lock-offs",targetMuscles:["Lats","Biceps"],instructions:["Hold a pull-up position with elbows at 120 degrees (slightly bent).","Maintain tension for time."],images:["/exercises/120_degree_lock_offs.webp"]},{id:"bicep_curls",name:"Bicep Curls",category:"Pull",subcategory:"Curls",targetMuscles:["Biceps"],instructions:["Hold dumbbells at sides.","Curl weights toward shoulders.","Lower with control."],images:["/exercises/bicep_curls.webp"]},{id:"hammer_curls",name:"Hammer Curls",category:"Pull",subcategory:"Curls",targetMuscles:["Biceps","Forearms"],instructions:["Hold dumbbells with neutral grip (palms facing in).","Curl weights toward shoulders.","Lower with control."],images:["/exercises/hammer_curls.webp"]},{id:"barbell_curls",name:"Barbell Curls",category:"Pull",subcategory:"Curls",targetMuscles:["Biceps"],instructions:["Hold barbell with underhand grip.","Curl bar toward chest.","Lower with control."],images:["/exercises/barbell_curls.webp"]},{id:"front_raises",name:"Front Raises",category:"Pull",subcategory:"Shoulders",targetMuscles:["Front Delts"],instructions:["Hold weights in front of thighs.","Raise arms straight in front to shoulder height."],images:["/exercises/front_raises.webp"]},{id:"kettlebell_swings",name:"Kettlebell Swings",category:"Pull",subcategory:"Shoulders",targetMuscles:["Glutes","Hamstrings","Lower Back"],instructions:["Hinge at hips holding kettlebell.","Snap hips forward to swing weight up."],images:["/exercises/kettlebell_swings.webp"]},{id:"muscle_ups",name:"Muscle Ups",category:"Pull",subcategory:"Shoulders",targetMuscles:["Lats","Triceps","Chest"],instructions:["Explosive pull-up.","Transition wrists over bar.","Press out at top."],images:["/exercises/muscle_ups.webp"]},{id:"seated_row",name:"Seated Row",category:"Pull",subcategory:"Horizontal Pull",targetMuscles:["Lats","Rhomboids"],instructions:["Sit at machine.","Pull handle to torso."],images:["/exercises/Seated_Row.webp"]},{id:"supine_trx_row",name:"Supine TRX Row",category:"Pull",subcategory:"Horizontal Pull",targetMuscles:["Lats","Rhomboids"],instructions:["Feet in TRX straps.","Pull handle to torso."],images:["/exercises/supine_trx_row.webp"]},{id:"barbell_bench_press",name:"Barbell Bench Press",category:"Push",subcategory:"Horizontal Push",targetMuscles:["Chest","Triceps"],instructions:["Lower bar to chest.","Press back up."],images:["/exercises/barbell_bench_press.webp"]},{id:"dumbbell_bench_press",name:"Dumbbell Chest Press",category:"Push",subcategory:"Horizontal Push",targetMuscles:["Upper Chest"],instructions:["Press dumbbells whilst lying on bench."],images:["/exercises/dumbbell_bench_press.webp"]},{id:"chest_press",name:"Chest Press Machine",category:"Push",subcategory:"Horizontal Push",targetMuscles:["Chest","Triceps"],instructions:["From seated position, push handles overhead."],images:["/exercises/chest_press.webp"]},{id:"push_up",name:"Push-Up",category:"Push",subcategory:"Horizontal Push",targetMuscles:["Triceps","Chest"],instructions:["Hands wide, lower to floor.","Press back up."],images:["/exercises/push_up.webp"]},{id:"narrow_push_up",name:"Narrow Push-Up",category:"Push",subcategory:"Horizontal Push",targetMuscles:["Triceps","Chest"],instructions:["Hands close together.","Keep elbows tucked."],images:["/exercises/narrow_push_up.webp"]},{id:"trx_push_up",name:"TRX Push-Up",category:"Push",subcategory:"Horizontal Push",targetMuscles:["Chest","Global Stabilisers"],instructions:["Feet or hands in TRX straps.","Perform push-up."],images:["/exercises/trx_push_up.webp"]},{id:"overhead_press",name:"Barbell Overhead Press",category:"Push",subcategory:"Vertical Push",targetMuscles:["Shoulders"],instructions:["Press bar vertically overhead."],images:["/exercises/overhead_press.webp"]},{id:"dumbbell_overhead_press",name:"Dumbbell Overhead Press",category:"Push",subcategory:"Vertical Push",targetMuscles:["Shoulders"],instructions:["Press dumbbells vertically overhead."],images:["/exercises/dumbbell_overhead_press.webp"]},{id:"arnold_press",name:"Arnold Press",category:"Push",subcategory:"Vertical Push",targetMuscles:["Shoulders"],instructions:["Rotate palms while pressing overhead."],images:["/exercises/arnold_press.webp"]},{id:"shoulder_press_machine",name:"Shoulder Press Machine",category:"Push",subcategory:"Vertical Push",targetMuscles:["Shoulders"],instructions:["Sit in machine.","Press handles overhead."],images:["/exercises/Shoulder_Press_Machine.webp"]},{id:"dumbbell_flies",name:"Dumbbell Flies",category:"Push",subcategory:"Shoulders",targetMuscles:["Chest"],instructions:["Lie on bench.","Open arms wide, then bring together."],images:["/exercises/Dumbbell_Flies.webp"]},{id:"lateral_raises",name:"Lateral Raises",category:"Push",subcategory:"Shoulders",targetMuscles:["Side Delts"],instructions:["Raise arms to sides."],images:["/exercises/dumbbell_lateral_raise.webp"]},{id:"dumbbell_kickbacks",name:"Dumbbell Kickbacks",category:"Push",subcategory:"Triceps",targetMuscles:["Triceps"],instructions:["Hinge forward.","Extend arm back."],images:["/exercises/dumbbell_kickbacks.webp"]},{id:"cable_pushdown",name:"Cable Pushdown",category:"Push",subcategory:"Triceps",targetMuscles:["Triceps"],instructions:["Push bar down using triceps."],images:["/exercises/tricep_pulldown.webp"]},{id:"tricep_dips",name:"Tricep Dips",category:"Push",subcategory:"Triceps",targetMuscles:["Triceps"],instructions:["Support body on parallel bars.","Lower until elbows at 90 degrees."],images:["/exercises/Tricep_Dips.webp"]},{id:"barbell_squat",name:"Barbell Squat",category:"Legs",subcategory:"Squats",targetMuscles:["Quads","Glutes"],instructions:["Squat with barbell on back."],images:["/exercises/barbell_squat.webp"]},{id:"leg_press",name:"Leg Press",category:"Legs",subcategory:"Squats",targetMuscles:["Quads"],instructions:["Press weight on machine."],images:["/exercises/leg_press.webp"]},{id:"pistol_squats",name:"Pistol Squats",category:"Legs",subcategory:"Squats",targetMuscles:["Quads","Balance"],instructions:["One-legged squat."],images:["/exercises/Pistol_Squats.webp"]},{id:"goblet_squat",name:"Goblet Squat",category:"Legs",subcategory:"Squats",targetMuscles:["Quads"],instructions:["Hold weight at chest.","Squat."],images:["/exercises/goblet_squat.webp"]},{id:"deadlift",name:"Deadlift",category:"Legs",subcategory:"Hinge Pattern",targetMuscles:["Posterior Chain"],instructions:["Lift bar from floor."],images:["/exercises/deadlift.webp"]},{id:"rack_pulls",name:"Rack Pulls",category:"Legs",subcategory:"Hinge Pattern",targetMuscles:["Back","Glutes"],instructions:["Deadlift from rack height."],images:["/exercises/Rack_Pulls.webp"]},{id:"barbell_good_mornings",name:"BarbellGood Mornings",category:"Legs",subcategory:"Hinge Pattern",targetMuscles:["Back","Hamstrings"],instructions:["Deadlift from rack height."],images:["/exercises/barbell_good_mornings.webp"]},{id:"leg_extension",name:"Leg Extension",category:"Legs",subcategory:"Isolation",targetMuscles:["Quads"],instructions:["Extend legs against machine resistance."],images:["/exercises/Leg_Extension.webp"]},{id:"leg_curl",name:"Leg Curl",category:"Legs",subcategory:"Isolation",targetMuscles:["Hamstrings"],instructions:["Curl legs against machine resistance."],images:["/exercises/Leg_Curl.webp"]},{id:"walking_lunge",name:"Walking Lunge",category:"Legs",subcategory:"Isolation",targetMuscles:["Quads","Glutes"],instructions:["Step forward and lower hips."],images:["/exercises/walking_lunge.webp"]},{id:"calf_raises",name:"Calf Raises",category:"Legs",subcategory:"Calves",targetMuscles:["Calves"],instructions:["Raise heels."],images:["/exercises/calf_raise.webp"]},{id:"glute_bridges",name:"Glute Bridges",category:"Legs",subcategory:"Glutes",targetMuscles:["Glutes"],instructions:["Lie on back.","Lift hips."],images:["/exercises/Glute_Bridges.webp"]},{id:"reverse_wrist_curl",name:"Reverse Wrist Curl",category:"Stabilisers",subcategory:"Wrists",targetMuscles:["Forearm Extensors"],instructions:["Curl wrist up with palm down."],images:["/exercises/reverse_wrist_curl.webp"]},{id:"radial_wrist_tilts",name:"Radial Wrist Tilts",category:"Stabilisers",subcategory:"Wrists",targetMuscles:["Forearms"],instructions:["Tilt wrist thumb-side up."],images:["/exercises/Radial_Wrist_Tilts.webp"]},{id:"wrist_rotations",name:"Wrist Rotations",category:"Stabilisers",subcategory:"Wrists",targetMuscles:["Forearms"],instructions:["Rotate wrists with weight."],images:["/exercises/Wrist_Rotations.webp"]},{id:"wrist_curls",name:"Wrist Curls",category:"Stabilisers",subcategory:"Wrists",targetMuscles:["Forearm Flexors"],instructions:["Curl wrist up with palm up."],images:["/exercises/Wrist_Curls.webp"]},{id:"dumbbell_rear_delt_flies",name:"Dumbbell Rear Delt Flies",category:"Stabilisers",subcategory:"Rear Delts",targetMuscles:["Rear Delts"],instructions:["Hinge forward.","Raise arms to sides."],images:["/exercises/dumbbell_rear_delt_flies.webp"]},{id:"cable_face_pulls",name:"Cable Face Pulls",category:"Stabilisers",subcategory:"Rear Delts",targetMuscles:["Rear Delts"],instructions:["Pull rope to face."],images:["/exercises/face_pull.webp"]},{id:"archer_rows",name:"Archer Rows",category:"Stabilisers",subcategory:"Rear Delts",targetMuscles:["Back","Rear Delts"],instructions:["Row with one arm while other stays straight."],images:["/exercises/Archer_Rows.webp"]},{id:"one_arm_dumbbell_shrugs",name:"One Arm Dumbbell Shrugs",category:"Stabilisers",subcategory:"Scapular Control",targetMuscles:["Traps"],instructions:["Shrug shoulder up."],images:["/exercises/One_Arm_Dumbbell_Shrugs.webp"]},{id:"prone_overhead_db_press",name:"Prone Overhead Dumbbell Press",category:"Stabilisers",subcategory:"Scapular Control",targetMuscles:["Lower Traps"],instructions:["Lie prone.","Press light weights overhead."],images:["/exercises/Prone_Overhead_Dumbbell_Press.webp"]},{id:"incline_bench_db_iyts",name:"Incline Bench Dumbbell IYTs",category:"Stabilisers",subcategory:"Scapular Control",targetMuscles:["Lower Traps","Rear Delts"],instructions:["Form I, Y, T shapes with arms."],images:["/exercises/i-y-t_raises.webp"]},{id:"scapular_holds",name:"Scapular Holds",category:"Stabilisers",subcategory:"Scapular Control",targetMuscles:["Scapula"],instructions:["Hold scapular retraction."],images:["/exercises/Scapular_Holds.webp"]},{id:"scapular_pull_ups",name:"Scapular Pull-Ups",category:"Stabilisers",subcategory:"Scapular Control",targetMuscles:["Scapula"],instructions:["Hang from bar.","Depress and retract scapula without bending elbows."],images:["/exercises/Scapular_Pull-ups.webp"]},{id:"one_arm_scapular_holds",name:"1 Arm Scapular Holds",category:"Stabilisers",subcategory:"Scapular Control",targetMuscles:["Scapula"],instructions:["Hang from one arm.","Engage scapula."],images:["/exercises/one_arm_scapular_holds.webp"]},{id:"one_arm_scapular_pull_ups",name:"1 Arm Scapular Pull-Ups",category:"Stabilisers",subcategory:"Scapular Control",targetMuscles:["Scapula"],instructions:["One arm hang.","Depress scapula."],images:["/exercises/one_arm_scapular_pull_ups.webp"]},{id:"trx_iyts",name:"TRX IYTs",category:"Stabilisers",subcategory:"Scapular Control",targetMuscles:["Back"],instructions:["Use TRX to perform I, Y, T raises."],images:["/exercises/trx_iyts.webp"]},{id:"dumbbell_overhead_rotations",name:"Dumbbell Overhead Rotations",category:"Stabilisers",subcategory:"Rotator Cuff",targetMuscles:["Rotator Cuff"],instructions:["Press overhead.","Rotate shoulders."],images:["/exercises/Dumbbell_Overhead_Rotations.webp"]},{id:"external_side_lying_rotations",name:"External Side Lying Rotations",category:"Stabilisers",subcategory:"Rotator Cuff",targetMuscles:["Rotator Cuff"],instructions:["Lie on side.","Rotate arm up."],images:["/exercises/External_Side_Lying_Rotations.webp"]},{id:"prone_bench_rotations",name:"Prone Bench Rotations",category:"Stabilisers",subcategory:"Rotator Cuff",targetMuscles:["Rotator Cuff"],instructions:["Lie prone.","Rotate arms."],images:["/exercises/Prone_Bench_Rotations.webp"]},{id:"cable_external_rotations",name:"Cable External Rotations",category:"Stabilisers",subcategory:"Rotator Cuff",targetMuscles:["Rotator Cuff"],instructions:["Use cable.","Rotate arm away from body."],images:["/exercises/Cable_External_Rotations.webp"]},{id:"cable_internal_rotation",name:"Cable Internal Rotation",category:"Stabilisers",subcategory:"Rotator Cuff",targetMuscles:["Rotator Cuff"],instructions:["Use cable.","Rotate arm across body."],images:["/exercises/Cable_Internal_Rotation.webp"]},{id:"internal_side_lying_rotations",name:"Internal Side Lying Rotations",category:"Stabilisers",subcategory:"Internal Rotation/Flexors",targetMuscles:["Rotator Cuff"],instructions:["Lie on side.","Rotate arm inward."],images:["/exercises/Internal_Side_Lying_Rotations.webp"]},{id:"hanging_l_hold",name:"Hanging L Hold",category:"Core",subcategory:"Leg Raise",targetMuscles:["Abs"],instructions:["Hang from bar.","Hold legs horizontal."],images:["/exercises/Hanging_L_Hold.webp"]},{id:"supine_leg_raises",name:"Supine Leg Raises",category:"Core",subcategory:"Leg Raise",targetMuscles:["Abs"],instructions:["Lie on back.","Raise legs."],images:["/exercises/Supine_Leg_Raises.webp"]},{id:"hanging_leg_raises",name:"Hanging Leg Raises",category:"Core",subcategory:"Leg Raise",targetMuscles:["Abs"],instructions:["Hang from bar.","Raise legs to bar."],images:["/exercises/hanging_leg_raise.webp"]},{id:"lever_raises_tucked",name:"Lever Raises (tucked)",category:"Core",subcategory:"Leg Raise",targetMuscles:["Abs"],instructions:["Front lever progression tucked."],images:["/exercises/Lever_Raises_tucked.webp"]},{id:"lever_raises_90",name:"Lever Raises (90)",category:"Core",subcategory:"Leg Raise",targetMuscles:["Abs"],instructions:["Front lever progression to 90 degrees."]},{id:"lever_raises",name:"Lever Raises",category:"Core",subcategory:"Leg Raise",targetMuscles:["Abs"],instructions:["Full front lever raises."]},{id:"crunches",name:"Crunches",category:"Core",subcategory:"Crunches",targetMuscles:["Upper Abs"],instructions:["Crunch up off floor."],images:["/exercises/crunch.webp"]},{id:"lower_ab_crunches",name:"Lower Ab Crunches",category:"Core",subcategory:"Crunches",targetMuscles:["Lower Abs"],instructions:["Reverse crunch movement."],images:["/exercises/Lower_Ab_Crunches.webp"]},{id:"weighted_crunches",name:"Weighted Crunches",category:"Core",subcategory:"Crunches",targetMuscles:["Abs"],instructions:["Crunch with weight."],images:["/exercises/Weighted_Crunches.webp"]},{id:"dead_bug",name:"Dead Bug",category:"Core",subcategory:"Crunches",targetMuscles:["Core"],instructions:["Opposite arm and leg extension lying on back."],images:["/exercises/Dead_Bug.webp"]},{id:"boat_pose",name:"Boat Pose",category:"Core",subcategory:"Crunches",targetMuscles:["Core"],instructions:["Static V hold on floor."],images:["/exercises/Boat_Pose.webp"]},{id:"v_sits",name:"V Sits",category:"Core",subcategory:"Crunches",targetMuscles:["Abs"],instructions:["Explosive sit up to V position."],images:["/exercises/V_Sits.webp"]},{id:"kettle_bell_twists",name:"Kettle Bell Twists",category:"Core",subcategory:"Rotation",targetMuscles:["Obliques"],instructions:["Russian twist with KB."],images:["/exercises/russian_twists.webp"]},{id:"twisting_crunches",name:"Twisting Crunches",category:"Core",subcategory:"Rotation",targetMuscles:["Obliques"],instructions:["Crunch with rotation."],images:["/exercises/Twisting_Crunches.webp"]},{id:"supine_windscreen_wipers",name:"Supine Windscreen Wipers",category:"Core",subcategory:"Rotation",targetMuscles:["Obliques"],instructions:["Lie on back.","Rotate legs side to side."],images:["/exercises/Supine_Windscreen_Wipers.webp"]},{id:"hanging_windscreen_wipers",name:"Hanging Windscreen Wipers",category:"Core",subcategory:"Rotation",targetMuscles:["Obliques"],instructions:["Hang from bar.","Rotate legs side to side."],images:["/exercises/Hanging_Windscreen_Wipers.webp"]},{id:"thread_the_needle",name:"Thread the Needle",category:"Core",subcategory:"Rotation",targetMuscles:["Obliques","Mobility"],instructions:["Plank position.","Reach under body."],images:["/exercises/Thread_the_Needle.webp"]}];var Cr=w('<div><div class="col set-num svelte-ow8x7m"> </div> <div class="col weight svelte-ow8x7m"><input type="number" placeholder="-" class="svelte-ow8x7m"/></div> <div class="col reps svelte-ow8x7m"><input type="number" placeholder="-" class="svelte-ow8x7m"/></div> <div class="col check svelte-ow8x7m"><button><!></button></div></div>');function Lr(P,i){Bt(i,!1);let l=he(i,"setNumber",8),f=he(i,"set",12);const D=fa();function G(){f(f().completed=!f().completed,!0),D("change",f()),f().completed&&D("complete")}Ia();var M=Cr();let _;var R=s(M),k=s(R,!0);a(R);var h=r(R,2),u=s(h);ie(u),a(h);var C=r(h,2),N=s(C);ie(N),a(C);var L=r(C,2),x=s(L);let b;var S=s(x);{var W=A=>{var J=kt("✓");n(A,J)};H(S,A=>{wt(f()),bt(()=>f().completed)&&A(W)})}a(x),a(L),a(M),F(()=>{_=Rt(M,1,"set-row svelte-ow8x7m",null,_,{completed:f().completed}),j(k,l()),b=Rt(x,1,"check-btn svelte-ow8x7m",null,b,{checked:f().completed})}),ue(u,()=>f().weight,A=>f(f().weight=A,!0)),ue(N,()=>f().reps,A=>f(f().reps=A,!0)),Mt("click",x,G),n(P,M),Wt()}var Rr=w('<div><span class="dot svelte-1ni79z8"></span> <span class="text"> </span></div>'),Pr=w("<button></button>"),qr=w('<div class="exercise-card svelte-1ni79z8"><div class="header svelte-1ni79z8"><div class="title-group svelte-1ni79z8"><button class="icon-btn info-btn svelte-1ni79z8" aria-label="Exercise Info"><div class="info-icon svelte-1ni79z8">?</div></button> <div><h4 class="svelte-1ni79z8"> </h4> <button class="icon-btn timer-btn svelte-1ni79z8" aria-label="Open Timer" title="Interval Timer">⏱</button> <div class="benchmarks svelte-1ni79z8"></div></div></div> <button class="icon-btn delete-btn svelte-1ni79z8" aria-label="Delete Exercise">🗑️</button></div> <div class="table-header svelte-1ni79z8"><div class="col">Set</div> <div class="col">kg</div> <div class="col">Reps</div> <div class="col">✓</div></div> <div class="sets"></div> <button class="add-set-btn svelte-1ni79z8">+ Add Set</button> <div class="difficulty-footer svelte-1ni79z8"><span class="diff-label svelte-1ni79z8">How did it feel?</span> <div class="diff-circles svelte-1ni79z8"></div></div></div>');function Nr(P,i){Bt(i,!1);let l=he(i,"exercise",12),f=he(i,"benchmarks",24,()=>({}));const D=fa();function G(){const Z=l().sets[l().sets.length-1],B={weight:Z?Z.weight:0,reps:Z?Z.reps:0,isWarmup:!1,isFailure:!1,isDropSet:!1,completed:!1};l(l().sets=[...l().sets,B],!0)}const M=["Green","Yellow","Orange","Red"];Ia();var _=qr(),R=s(_),k=s(R),h=s(k),u=r(h,2),C=s(u),N=s(C,!0);a(C);var L=r(C,2),x=r(L,2);ne(x,5,()=>M,ce,(Z,B)=>{var I=Kt(),Y=Ft(I);{var se=le=>{var oe=Rr();Rt(oe,1,"benchmark-pill svelte-1ni79z8",null,{},{"has-data":!0});var $=r(s(oe),2),re=s($);a($),a(oe),F(z=>{Oa(oe,`--pill-color: var(--color-${z??""})`),j(re,`${wt(f()),e(B),bt(()=>f()[e(B)]?.weight)??""}kg x ${wt(f()),e(B),bt(()=>f()[e(B)]?.reps)??""}`)},[()=>(e(B),bt(()=>e(B).toLowerCase()))]),n(le,oe)};H(Y,le=>{wt(f()),e(B),bt(()=>f()[e(B)])&&le(se)})}n(Z,I)}),a(x),a(u),a(k);var b=r(k,2);a(R);var S=r(R,4);ne(S,5,()=>(wt(l()),bt(()=>l().sets)),ce,(Z,B,I)=>{Lr(Z,{setNumber:I+1,get set(){return(wt(l()),bt(()=>l().sets))[I]},set set(Y){(wt(l()),bt(()=>l().sets))[I]=Y,vs(()=>l())},$$events:{complete(Y){Pa.call(this,i,Y)},change(Y){Pa.call(this,i,Y)}},$$legacy:!0})}),a(S);var W=r(S,2),A=r(W,2),J=r(s(A),2);ne(J,5,()=>M,ce,(Z,B)=>{var I=Pr();let Y;F(se=>{Y=Rt(I,1,"diff-circle svelte-1ni79z8",null,Y,{selected:l().difficulty===e(B)}),Oa(I,`--circle-color: var(--color-${se??""})`),ut(I,"aria-label",`Mark as ${e(B)??""}`)},[()=>(e(B),bt(()=>e(B).toLowerCase()))]),Mt("click",I,()=>l(l().difficulty=e(B),!0)),n(Z,I)}),a(J),a(A),a(_),F(()=>j(N,(wt(l()),bt(()=>l().name)))),Mt("click",h,()=>D("info",l())),Mt("click",L,()=>D("timer",l())),Mt("click",b,()=>D("delete",l())),Mt("click",W,G),n(P,_),Wt()}const Dr=P=>P;function ja(P){const i=P-1;return i*i*i+1}function Qa(P){const i=typeof P=="string"&&P.match(/^\s*(-?[\d.]+)([^\s]*)\s*$/);return i?[parseFloat(i[1]),i[2]||"px"]:[P,"px"]}function Ha(P,{delay:i=0,duration:l=400,easing:f=Dr}={}){const D=+getComputedStyle(P).opacity;return{delay:i,duration:l,easing:f,css:G=>`opacity: ${G*D}`}}function Za(P,{delay:i=0,duration:l=400,easing:f=ja,x:D=0,y:G=0,opacity:M=0}={}){const _=getComputedStyle(P),R=+_.opacity,k=_.transform==="none"?"":_.transform,h=R*(1-M),[u,C]=Qa(D),[N,L]=Qa(G);return{delay:i,duration:l,easing:f,css:(x,b)=>`
			transform: ${k} translate(${(1-x)*u}${C}, ${(1-x)*N}${L});
			opacity: ${R-h*b}`}}function Wi(P,{delay:i=0,duration:l=400,easing:f=ja,axis:D="y"}={}){const G=getComputedStyle(P),M=+G.opacity,_=D==="y"?"height":"width",R=parseFloat(G[_]),k=D==="y"?["top","bottom"]:["left","right"],h=k.map(S=>`${S[0].toUpperCase()}${S.slice(1)}`),u=parseFloat(G[`padding${h[0]}`]),C=parseFloat(G[`padding${h[1]}`]),N=parseFloat(G[`margin${h[0]}`]),L=parseFloat(G[`margin${h[1]}`]),x=parseFloat(G[`border${h[0]}Width`]),b=parseFloat(G[`border${h[1]}Width`]);return{delay:i,duration:l,easing:f,css:S=>`overflow: hidden;opacity: ${Math.min(S*20,1)*M};${_}: ${S*R}px;padding-${k[0]}: ${S*u}px;padding-${k[1]}: ${S*C}px;margin-${k[0]}: ${S*N}px;margin-${k[1]}: ${S*L}px;border-${k[0]}-width: ${S*x}px;border-${k[1]}-width: ${S*b}px;min-${_}: 0`}}function $a(P,{delay:i=0,duration:l=400,easing:f=ja,start:D=0,opacity:G=0}={}){const M=getComputedStyle(P),_=+M.opacity,R=M.transform==="none"?"":M.transform,k=1-D,h=_*(1-G);return{delay:i,duration:l,easing:f,css:(u,C)=>`
			transform: ${R} scale(${1-k*C});
			opacity: ${_-h*C}
		`}}function Mr(P){const i=P-1;return i*i*i+1}class Ma{static audioContext=null;static gainNode=null;static isInitialized=!1;static init(){if(!this.isInitialized)try{(window.AudioContext||window.webkitAudioContext)&&(this.audioContext=new AudioContext,this.gainNode=this.audioContext.createGain(),this.gainNode.connect(this.audioContext.destination),this.isInitialized=!0)}catch(i){console.warn("AudioContext not supported",i)}}static async playChime(){if(this.isInitialized||this.init(),!this.audioContext||!this.gainNode)return;this.audioContext.state==="suspended"&&await this.audioContext.resume();const i=this.audioContext.currentTime,l=this.audioContext.createOscillator();l.type="sine",l.frequency.setValueAtTime(880,i),l.frequency.exponentialRampToValueAtTime(.01,i+1.5);const f=this.audioContext.createGain();f.gain.setValueAtTime(.3,i),f.gain.exponentialRampToValueAtTime(.001,i+1.5),l.connect(f),f.connect(this.gainNode),l.start(i),l.stop(i+1.5);const D=this.audioContext.createOscillator();D.type="triangle",D.frequency.setValueAtTime(1760,i),D.frequency.exponentialRampToValueAtTime(.01,i+1);const G=this.audioContext.createGain();G.gain.setValueAtTime(.1,i),G.gain.exponentialRampToValueAtTime(.001,i+1),D.connect(G),G.connect(this.gainNode),D.start(i),D.stop(i+1)}static vibrate(i=200){typeof navigator<"u"&&navigator.vibrate&&navigator.vibrate(i)}static async playCompletionAlert(){this.vibrate([500,100,500]),await this.playChime()}static async playTick(){if(this.isInitialized||this.init(),!this.audioContext||!this.gainNode)return;this.audioContext.state==="suspended"&&await this.audioContext.resume();const i=this.audioContext.currentTime,l=this.audioContext.createOscillator();l.type="sine",l.frequency.setValueAtTime(600,i);const f=this.audioContext.createGain();f.gain.setValueAtTime(.05,i),f.gain.exponentialRampToValueAtTime(.001,i+.1),l.connect(f),f.connect(this.gainNode),l.start(i),l.stop(i+.1),this.vibrate(50)}}var Or=w('<div class="setup-form svelte-18i4gcv"><div class="input-group svelte-18i4gcv"><label for="work-duration" class="svelte-18i4gcv">Work</label> <div class="time-adjuster svelte-18i4gcv"><button class="svelte-18i4gcv">−</button> <span class="val svelte-18i4gcv"> </span> <button class="svelte-18i4gcv">+</button></div></div> <div class="input-group svelte-18i4gcv"><label for="rest-duration" class="svelte-18i4gcv">Rest</label> <div class="time-adjuster svelte-18i4gcv"><button class="svelte-18i4gcv">−</button> <span class="val svelte-18i4gcv"> </span> <button class="svelte-18i4gcv">+</button></div></div> <div class="input-group svelte-18i4gcv"><label for="num-sets" class="svelte-18i4gcv">Sets</label> <div class="time-adjuster svelte-18i4gcv"><button class="svelte-18i4gcv">−</button> <span class="val svelte-18i4gcv"> </span> <button class="svelte-18i4gcv">+</button></div></div> <div class="input-group svelte-18i4gcv" style="flex-direction: row; align-items: center; justify-content: space-between;"><label for="allow-overtime" style="margin: 0;" class="svelte-18i4gcv">Overtime</label> <label class="toggle-switch svelte-18i4gcv"><input type="checkbox" id="allow-overtime" class="svelte-18i4gcv"/> <span class="slider svelte-18i4gcv"></span></label></div> <button class="start-btn svelte-18i4gcv">▶ Start Interval</button></div>'),Gr=w('<div class="finished-state svelte-18i4gcv"><div class="check-icon svelte-18i4gcv">✓</div> <h3>Nicely Done!</h3> <button class="reset-btn svelte-18i4gcv">Back to Setup</button></div>'),Ar=w('<button class="ctl-btn pause svelte-18i4gcv">⏸</button>'),Er=w('<button class="ctl-btn play svelte-18i4gcv">▶</button>'),Fr=w('<div class="timer-circle svelte-18i4gcv"><svg viewBox="0 0 100 100" class="ring svelte-18i4gcv"><circle class="track svelte-18i4gcv" cx="50" cy="50" r="45"></circle><circle class="progress svelte-18i4gcv" cx="50" cy="50" r="45" stroke-dasharray="283"></circle></svg> <div class="timer-val svelte-18i4gcv"><div class="phase-label svelte-18i4gcv"> </div> <div class="digits svelte-18i4gcv"> </div></div></div> <div class="controls svelte-18i4gcv"><!> <button class="ctl-btn skip svelte-18i4gcv"> </button> <button class="ctl-btn stop svelte-18i4gcv" style="font-size: 1rem; padding: 1rem;">Stop</button></div>',1),Br=w('<div class="overlay svelte-18i4gcv" role="button" tabindex="0"><div><div class="header svelte-18i4gcv"><span class="title svelte-18i4gcv"><!></span> <button class="close-btn svelte-18i4gcv">✕</button></div> <div class="content svelte-18i4gcv"><!></div></div></div>');function es(P,i){Bt(i,!0);let l=he(i,"visible",15,!1),f=he(i,"defaultSets",3,3),D=he(i,"associatedExerciseId",7,null),G=he(i,"onComplete",3,()=>{}),M=he(i,"onClose",3,()=>{}),_=v("SETUP"),R=v("PAUSED"),k=v(30),h=v(60),u=v(3),C=v(!1),N=v(1),L=v(30),x=v(null),b=v(null),S=v(!1),W=null;ra(()=>{l()&&(Ma.init(),e(_)==="SETUP"&&(B(),f()>0&&t(u,f())))}),ma(()=>(se(),W=setInterval(Ye,100),"serviceWorker"in navigator&&navigator.serviceWorker.addEventListener("message",U=>{U.data&&U.data.type==="TIMER_ACTION"&&Z(U.data.action)}),()=>clearInterval(W)));async function A(){"Notification"in window&&Notification.permission!=="granted"&&await Notification.requestPermission()}function J(U,te,We=[]){"serviceWorker"in navigator&&Notification.permission==="granted"&&navigator.serviceWorker.ready.then(Ze=>{Ze.showNotification(U,{body:te,icon:"/favicon.png",vibrate:[200,100,200],actions:We,tag:"rest-timer",renotify:!0})})}function Z(U){U==="extend-10"?(t(L,e(L)+10),e(x)&&t(x,e(x)+1e4),e(L)>0&&t(S,!1),Y()):U==="next-set"&&X()}async function B(){if(D())try{const U=await ks(D());U.ok&&U.data&&(t(k,U.data.workDuration,!0),t(h,U.data.restDuration,!0),t(C,U.data.allowOvertime,!0))}catch(U){console.warn(U)}}async function I(){if(D())try{await xs(D(),{workDuration:e(k),restDuration:e(h),allowOvertime:e(C)})}catch(U){console.error(U)}}function Y(){if(e(_)==="SETUP")return;const U={phase:e(_),runningState:e(R),remaining:e(L),endTimestamp:e(x),configWork:e(k),configRest:e(h),configSets:e(u),configSetsOverridden:e(u),allowOvertime:e(C),currentSet:e(N),associatedExerciseId:D(),pausedTimeRemaining:e(b),timestamp:Date.now()};localStorage.setItem("active_interval_timer",JSON.stringify(U))}function se(){try{const U=localStorage.getItem("active_interval_timer");if(U){const te=JSON.parse(U);Date.now()-te.timestamp<36e5&&(t(_,te.phase,!0),t(R,te.runningState,!0),t(L,te.remaining,!0),t(x,te.endTimestamp,!0),t(k,te.configWork,!0),t(h,te.configRest,!0),te.configSets&&t(u,te.configSets,!0),te.allowOvertime!==void 0&&t(C,te.allowOvertime,!0),t(N,te.currentSet,!0),D(te.associatedExerciseId),t(b,te.pausedTimeRemaining,!0),e(_)!=="SETUP"&&e(_)!=="FINISHED"&&l(!0))}}catch{}}function le(){localStorage.removeItem("active_interval_timer")}function oe(){A(),I(),t(_,"WORK"),t(N,1),$(e(k))}function $(U){t(R,"RUNNING"),t(L,U,!0),t(x,Date.now()+U*1e3),t(S,!1),Y(),Ma.playChime()}function re(){t(R,"PAUSED"),t(b,e(L),!0),t(x,null),Y()}function z(){e(b)&&(t(R,"RUNNING"),t(x,Date.now()+e(b)*1e3),Y())}function X(){ve()}function ee(){t(_,"SETUP"),t(R,"PAUSED"),le()}function ve(){e(_)==="WORK"?e(N)>=e(u)?(t(_,"FINISHED"),t(R,"PAUSED"),t(x,null),G()(),le()):(t(_,"REST"),$(e(h)),J("Work Complete",`Resting for ${e(h)}s`)):e(_)==="REST"&&(ds(N),t(_,"WORK"),$(e(k)),J("Rest Complete",`Starting Set ${e(N)}/${e(u)}`))}function Ye(){if(!(!l()||e(_)==="SETUP"||e(_)==="FINISHED"||e(R)==="PAUSED")&&e(x)){const U=Date.now(),te=e(x)-U;t(L,Math.ceil(te/1e3),!0),e(L)<=0&&(e(S)||(t(S,!0),Ma.playCompletionAlert(),e(C)?J("Timer Finished","Overtime started",[{action:"next-set",title:"Next Set"},{action:"extend-10",title:"+10s"}]):(t(L,0),ve())))}}function ye(U){const te=Math.floor(U/60),We=U%60;return`${te}:${We.toString().padStart(2,"0")}`}function Xe(){(e(_)==="SETUP"||e(_)==="FINISHED")&&ee(),l(!1),M()&&M()()}var Pt=Kt(),qt=Ft(Pt);{var xt=U=>{var te=Br();te.__click=de=>{de.target===de.currentTarget&&Xe()},te.__keydown=de=>{de.key==="Escape"&&Xe()};var We=s(te);let Ze;var it=s(We),$e=s(it),Ge=s($e);{var et=de=>{var Se=kt("Timer Setup");n(de,Se)},Ae=de=>{var Se=Kt(),ze=Ft(Se);{var tt=be=>{var Re=kt("Complete");n(be,Re)},ot=be=>{var Re=kt();F(()=>j(Re,`Set ${e(N)??""} / ${e(u)??""}`)),n(be,Re)};H(ze,be=>{e(_)==="FINISHED"?be(tt):be(ot,!1)},!0)}n(de,Se)};H(Ge,de=>{e(_)==="SETUP"?de(et):de(Ae,!1)})}a($e);var Ie=r($e,2);Ie.__click=Xe,a(it);var Tt=r(it,2),dt=s(Tt);{var Ct=de=>{var Se=Or(),ze=s(Se),tt=r(s(ze),2),ot=s(tt);ot.__click=()=>t(k,Math.max(5,e(k)-5),!0);var be=r(ot,2),Re=s(be,!0);a(be);var je=r(be,2);je.__click=()=>t(k,e(k)+5),a(tt),a(ze);var Ne=r(ze,2),nt=r(s(Ne),2),at=s(nt);at.__click=()=>t(h,Math.max(5,e(h)-5),!0);var He=r(at,2),q=s(He,!0);a(He);var E=r(He,2);E.__click=()=>t(h,e(h)+5),a(nt),a(Ne);var o=r(Ne,2),p=r(s(o),2),O=s(p);O.__click=()=>t(u,Math.max(1,e(u)-1),!0);var V=r(O,2),m=s(V,!0);a(V);var y=r(V,2);y.__click=()=>t(u,e(u)+1),a(p),a(o);var K=r(o,2),De=r(s(K),2),Ee=s(De);ie(Ee),qa(2),a(De),a(K);var pe=r(K,2);pe.__click=oe,a(Se),F((me,fe)=>{j(Re,me),j(q,fe),j(m,e(u))},[()=>ye(e(k)),()=>ye(e(h))]),Wa(Ee,()=>e(C),me=>t(C,me)),n(de,Se)},lt=de=>{var Se=Kt(),ze=Ft(Se);{var tt=be=>{var Re=Gr(),je=r(s(Re),4);je.__click=()=>t(_,"SETUP"),a(Re),n(be,Re)},ot=be=>{var Re=Fr(),je=Ft(Re),Ne=s(je),nt=r(s(Ne));a(Ne);var at=r(Ne,2),He=s(at),q=s(He,!0);a(He);var E=r(He,2);let o;var p=s(E,!0);a(E),a(at),a(je);var O=r(je,2),V=s(O);{var m=pe=>{var me=Ar();me.__click=re,n(pe,me)},y=pe=>{var me=Er();me.__click=z,n(pe,me)};H(V,pe=>{e(R)==="RUNNING"?pe(m):pe(y,!1)})}var K=r(V,2);K.__click=X;var De=s(K,!0);a(K);var Ee=r(K,2);Ee.__click=ee,a(O),F(pe=>{ut(nt,"stroke-dashoffset",283*(1-e(L)/(e(_)==="WORK"?e(k):e(h)))),j(q,e(L)<0?"OVERTIME":e(_)),o=Oa(E,"",o,{color:e(L)<0?"#ef4444":"inherit"}),j(p,pe),j(De,e(L)<0?"Next":"⏭")},[()=>ye(Math.abs(e(L)))]),n(be,Re)};H(ze,be=>{e(_)==="FINISHED"?be(tt):be(ot,!1)},!0)}n(de,Se)};H(dt,de=>{e(_)==="SETUP"?de(Ct):de(lt,!1)})}a(Tt),a(We),a(te),F(()=>Ze=Rt(We,1,"timer-card svelte-18i4gcv",null,Ze,{work:e(_)==="WORK",rest:e(_)==="REST"})),na(3,We,()=>$a,()=>({start:.96,duration:300,easing:Mr})),na(3,te,()=>Ha,()=>({duration:250})),n(U,te)};H(qt,U=>{l()&&U(xt)})}n(P,Pt),Wt()}Zt(["click","keydown"]);var Wr=w("<img/>"),Ir=w('<div class="animation-frame svelte-zbmy0k"></div>'),zr=w('<div class="visual-placeholder svelte-zbmy0k"><span>No animation available</span></div>'),jr=w("<li> </li>"),Hr=w('<div class="modal-overlay svelte-zbmy0k" role="button" tabindex="0" aria-label="Close modal"><div class="modal-content svelte-zbmy0k" role="dialog" aria-modal="true" tabindex="-1"><div class="header svelte-zbmy0k"><h3 class="svelte-zbmy0k"> </h3> <span class="category svelte-zbmy0k"> </span> <button class="close-btn svelte-zbmy0k" aria-label="Close">×</button></div> <div class="visual-container svelte-zbmy0k"><!> <div class="muscles svelte-zbmy0k"> </div></div> <div class="instructions svelte-zbmy0k"><h4>Instructions</h4> <ol class="svelte-zbmy0k"></ol></div></div></div>');function Vr(P,i){Bt(i,!1);let l=he(i,"exercise",8),f=he(i,"visible",8,!1);const D=fa();let G=fs(0),M;function _(){l().images&&l().images.length>0&&(t(G,0),M=setInterval(()=>{t(G,(e(G)+1)%l().images.length)},800))}function R(){M&&clearInterval(M)}gs(()=>{R()});function k(){D("close")}ps(()=>(wt(f()),wt(l())),()=>{f()&&l().images?.length?_():R()}),ms(),Ia();var h=Kt(),u=Ft(h);{var C=N=>{var L=Hr(),x=s(L),b=s(x),S=s(b),W=s(S,!0);a(S);var A=r(S,2),J=s(A,!0);a(A);var Z=r(A,2);a(b);var B=r(b,2),I=s(B);{var Y=z=>{var X=Ir();ne(X,5,()=>(wt(l()),bt(()=>l().images)),ce,(ee,ve,Ye)=>{var ye=Wr();let Xe;F(()=>{ut(ye,"src",`${Ds??""}${e(ve)??""}`),ut(ye,"alt",`${wt(l()),bt(()=>l().name)??""} frame ${Ye+1}`),Xe=Rt(ye,1,"svelte-zbmy0k",null,Xe,{active:Ye===e(G)})}),n(ee,ye)}),a(X),n(z,X)},se=z=>{var X=zr();n(z,X)};H(I,z=>{wt(l()),bt(()=>l().images&&l().images.length>0)?z(Y):z(se,!1)})}var le=r(I,2),oe=s(le);a(le),a(B);var $=r(B,2),re=r(s($),2);ne(re,5,()=>(wt(l()),bt(()=>l().instructions)),ce,(z,X)=>{var ee=jr(),ve=s(ee,!0);a(ee),F(()=>j(ve,e(X))),n(z,ee)}),a(re),a($),a(x),a(L),F(z=>{j(W,(wt(l()),bt(()=>l().name))),j(J,(wt(l()),bt(()=>l().category))),j(oe,`Targets: ${z??""}`)},[()=>(wt(l()),bt(()=>l().targetMuscles.join(", ")))]),Mt("click",Z,k),na(3,x,()=>Za,()=>({y:50,duration:300})),Mt("click",x,Ua(function(z){Pa.call(this,i,z)})),Mt("keydown",x,Ua(function(z){Pa.call(this,i,z)})),Mt("click",L,k),Mt("keydown",L,z=>z.key==="Escape"&&k()),n(N,L)};H(u,N=>{f()&&N(C)})}n(P,h),Wt()}var Ur=w('<div class="input-group svelte-12q9g58"><label for="delete-confirm" class="svelte-12q9g58">Type <strong> </strong> to confirm:</label> <input type="text" id="delete-confirm" autocomplete="off" class="svelte-12q9g58"/></div>'),Kr=w('<button class="backdrop svelte-12q9g58" aria-label="Close modal"></button> <div class="modal svelte-12q9g58" role="dialog" aria-modal="true"><h3 class="svelte-12q9g58"> </h3> <p class="svelte-12q9g58"> </p> <!> <div class="actions svelte-12q9g58"><button class="btn-cancel svelte-12q9g58">Cancel</button> <button class="btn-delete svelte-12q9g58">Delete</button></div></div>',1);function Qr(P,i){Bt(i,!0);let l=he(i,"isOpen",3,!1),f=he(i,"title",3,"Confirm Delete"),D=he(i,"message",3,"Are you sure you want to delete this item? This action cannot be undone."),G=he(i,"confirmKeyword",3,"delete"),M=he(i,"requireInput",3,!0),_=v(""),R=St(()=>!M()||e(_).toLowerCase()===G().toLowerCase());function k(){e(R)&&(i.onConfirm(),t(_,""))}function h(){i.onCancel(),t(_,"")}var u=Kt(),C=Ft(u);{var N=L=>{var x=Kr(),b=Ft(x);b.__click=h;var S=r(b,2),W=s(S),A=s(W,!0);a(W);var J=r(W,2),Z=s(J,!0);a(J);var B=r(J,2);{var I=oe=>{var $=Ur(),re=s($),z=r(s(re)),X=s(z,!0);a(z),qa(),a(re);var ee=r(re,2);ie(ee),a($),F(()=>{j(X,G()),ut(ee,"placeholder",G())}),ue(ee,()=>e(_),ve=>t(_,ve)),n(oe,$)};H(B,oe=>{M()&&oe(I)})}var Y=r(B,2),se=s(Y);se.__click=h;var le=r(se,2);le.__click=k,a(Y),a(S),F(()=>{j(A,f()),j(Z,D()),le.disabled=!e(R)}),na(3,b,()=>Ha,()=>({duration:200})),na(3,S,()=>$a,()=>({duration:200,start:.9})),n(L,x)};H(C,L=>{l()&&L(N)})}n(P,u),Wt()}Zt(["click"]);var Jr=w('<div class="form-header-row" style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 1rem;"><h2 style="margin: 0; font-size: 1.25rem; color: var(--teal-primary);">New Gym Session</h2></div>'),Yr=w("<span>Saved! ✓</span>"),Xr=w("<button><!></button>"),Zr=w("<option> </option>"),$r=w("<option> </option>"),ei=w('<div class="filter-row svelte-1w0zsmt"><select class="category-select svelte-1w0zsmt"><option>Select Category...</option><!></select> <select class="subcategory-select svelte-1w0zsmt"><option>Select Subcategory...</option><!></select></div>'),ti=w('<span class="details svelte-1w0zsmt"> </span>'),ai=w('<button class="exercise-item-simple svelte-1w0zsmt"><span class="name svelte-1w0zsmt"> </span> <!></button>'),si=w('<div class="no-results svelte-1w0zsmt"> </div>'),ri=w('<div class="modal-overlay svelte-1w0zsmt" role="button" tabindex="0" aria-label="Close modal"><div class="picker-modal svelte-1w0zsmt" role="dialog" aria-modal="true" tabindex="-1"><div class="picker-header svelte-1w0zsmt"><h3>Add Exercise</h3> <div class="search-row svelte-1w0zsmt"><input type="text" placeholder="Search exercises..." class="svelte-1w0zsmt"/></div> <!></div> <div class="picker-content svelte-1w0zsmt"><div class="exercise-list-simple svelte-1w0zsmt"><!> <!></div></div></div></div>'),ii=w('<div class="gym-session-form svelte-1w0zsmt"><div class="session-meta svelte-1w0zsmt"><!> <input type="text" class="session-name svelte-1w0zsmt" placeholder="Workout Name (e.g. Pull Day)"/> <div class="meta-row svelte-1w0zsmt"><label class="svelte-1w0zsmt">Date <div class="date-time-row svelte-1w0zsmt"><input type="date" class="svelte-1w0zsmt"/> <input type="time" class="svelte-1w0zsmt"/></div></label> <label class="svelte-1w0zsmt">Bodyweight (kg) <input type="number" placeholder="Optional" class="svelte-1w0zsmt"/></label> <label class="svelte-1w0zsmt">Block <select class="svelte-1w0zsmt"><option>Strength</option><option>Power</option><option>Power Endurance</option><option>Muscular Endurance</option></select></label></div></div> <div class="exercises-list"></div> <button class="add-exercise-btn svelte-1w0zsmt">+ Add Exercise</button> <div class="session-notes-container svelte-1w0zsmt"><!></div> <!> <!> <!> <!> <!></div>');function Ii(P,i){Bt(i,!0);const l=fa(),f="gym_session_draft";let D=he(i,"initialData",3,null),G=St(()=>!!D()),M=v(""),_=v(void 0),R=v(Be([])),k=v(Be(new Date().toISOString().split("T")[0])),h=v(Be(new Date().toTimeString().split(" ")[0].slice(0,5))),u=v("Strength"),C=v(null),N=v(Be([])),L=v("");ma(async()=>{if(D())t(M,D().name,!0),t(_,D().bodyweight,!0),t(R,D().exercises,!0),t(k,D().date,!0),t(h,D().time||"12:00",!0),t(u,D().trainingBlock||"Strength",!0),t(L,D().notes||"",!0),t(le,!0);else{const E=localStorage.getItem(f);if(E)try{const o=JSON.parse(E);o.sessionName&&t(M,o.sessionName,!0),o.bodyweight&&t(_,o.bodyweight,!0),o.startTime&&t(k,o.startTime,!0),o.time&&t(h,o.time,!0),o.trainingBlock&&t(u,o.trainingBlock,!0),o.exercises&&t(R,o.exercises,!0),o.notes&&t(L,o.notes,!0)}catch(o){console.error("Failed to restore draft",o)}t(le,!0)}const q=await Ts();q.ok&&q.data&&t(N,q.data.map(E=>({...E,activityType:"gym_session",syncStatus:"synced"})),!0)}),ra(()=>{const q=e(N).filter(E=>(E.trainingBlock||"Strength")===e(u)&&E.date<e(k));q.sort((E,o)=>new Date(o.date).getTime()-new Date(E.date).getTime()),t(C,q.length>0?q[0]:null,!0)});function x(q){const E={Green:null,Yellow:null,Orange:null,Red:null},o=[...e(N)].sort((p,O)=>new Date(O.date).getTime()-new Date(p.date).getTime());for(const p of o){if(E.Green&&E.Yellow&&E.Orange&&E.Red)break;const O=p.exercises.find(V=>V.name===q);if(O&&O.difficulty&&!E[O.difficulty]){let V=null;for(const m of O.sets)(!V||m.weight>V.weight||m.weight===V.weight&&m.reps>V.reps)&&(V=m);V&&(E[O.difficulty]={weight:V.weight,reps:V.reps})}}return E}let b=v(!1),S=v(""),W=v(""),A=v(""),J=v(!1),Z=v(null),B=v(null),I=v(!1),Y=v(null),se=v(3),le=v(!1);ra(()=>{if(e(le)&&!e(G)&&typeof localStorage<"u"){const q={sessionName:e(M),bodyweight:e(_),startTime:e(k),time:e(h),trainingBlock:e(u),exercises:e(R),notes:e(L)};localStorage.setItem(f,JSON.stringify(q))}});let oe=St(()=>Ra.filter(q=>{if(e(S))return q.name.toLowerCase().includes(e(S).toLowerCase())||q.targetMuscles.some(p=>p.toLowerCase().includes(e(S).toLowerCase()));const E=e(W)?q.category===e(W):!0,o=e(A)?q.subcategory===e(A):!0;return E&&o}));const $=Array.from(new Set(Ra.map(q=>q.category))).sort();let re=St(()=>e(W)?Array.from(new Set(Ra.filter(q=>q.category===e(W)).map(q=>q.subcategory))).sort():[]);function z(){t(A,"")}function X(q){const E={id:crypto.randomUUID(),name:q.name,sets:[{weight:0,reps:0,isWarmup:!1,isFailure:!1,isDropSet:!1,completed:!1}]};t(R,[...e(R),E],!0),t(b,!1),t(S,""),t(W,""),t(A,"")}function ee(q){const E=q.detail;t(Y,E.id,!0),t(se,E.sets.length,!0),t(J,!0)}function ve(){}async function Ye(){if(e(R).length===0)return;const q={date:e(k),time:e(h),name:e(M)||"Gym Workout",bodyweight:e(_),trainingBlock:e(u),exercises:e(R),notes:e(L)},E=e(G)&&D()?await Cs(D().id,q):await Ls(q);E.ok?(t(I,!0),e(G)||localStorage.removeItem(f),i.onSaved?i.onSaved():setTimeout(()=>{t(I,!1),l("save")},1500)):console.error("Failed to save gym session",E.error)}var ye=ii(),Xe=s(ye),Pt=s(Xe);{var qt=q=>{var E=Jr();n(q,E)};H(Pt,q=>{e(G)||q(qt)})}var xt=r(Pt,2);ie(xt);var U=r(xt,2),te=s(U),We=r(s(te)),Ze=s(We);ie(Ze);var it=r(Ze,2);ie(it),a(We),a(te);var $e=r(te,2),Ge=r(s($e));ie(Ge),a($e);var et=r($e,2),Ae=r(s(et)),Ie=s(Ae);Ie.value=Ie.__value="Strength";var Tt=r(Ie);Tt.value=Tt.__value="Power";var dt=r(Tt);dt.value=dt.__value="Power Endurance";var Ct=r(dt);Ct.value=Ct.__value="Muscular Endurance",a(Ae),a(et),a(U),a(Xe);var lt=r(Xe,2);ne(lt,21,()=>e(R),ce,(q,E,o)=>{{let p=St(()=>x(e(E).name));Nr(q,{get exercise(){return e(E)},get benchmarks(){return e(p)},$$events:{complete:ve,timer:ee,delete:()=>{t(B,o,!0)},info:()=>{const O=Ra.find(V=>V.name===e(E).name);O&&t(Z,O,!0)}}})}}),a(lt);var de=r(lt,2);de.__click=()=>t(b,!0);var Se=r(de,2),ze=s(Se);Sa(ze,{placeholder:"How did the workout feel? Energy, sleep, stress...",get value(){return e(L)},set value(q){t(L,q,!0)}}),a(Se);var tt=r(Se,2);{var ot=q=>{var E=Xr();let o;E.__click=Ye;var p=s(E);{var O=m=>{var y=Yr();n(m,y)},V=m=>{var y=kt("Finish Workout");n(m,y)};H(p,m=>{e(I)?m(O):m(V,!1)})}a(E),F(()=>{o=Rt(E,1,"save-btn svelte-1w0zsmt",null,o,{success:e(I)}),E.disabled=e(I)}),n(q,E)};H(tt,q=>{e(R).length>0&&q(ot)})}var be=r(tt,2);{var Re=q=>{var E=ri();E.__click=()=>t(b,!1),E.__keydown=fe=>fe.key==="Escape"&&t(b,!1);var o=s(E);o.__click=fe=>fe.stopPropagation(),o.__keydown=fe=>fe.stopPropagation();var p=s(o),O=r(s(p),2),V=s(O);ie(V),a(O);var m=r(O,2);{var y=fe=>{var Me=ei(),_e=s(Me);_e.__change=z;var xe=s(_e);xe.value=xe.__value="";var It=r(xe);ne(It,17,()=>$,ce,(Ce,ke)=>{var Fe=Zr(),yt=s(Fe,!0);a(Fe);var Nt={};F(()=>{j(yt,e(ke)),Nt!==(Nt=e(ke))&&(Fe.value=(Fe.__value=e(ke))??"")}),n(Ce,Fe)}),a(_e);var gt=r(_e,2),Lt=s(gt);Lt.value=Lt.__value="";var st=r(Lt);ne(st,17,()=>e(re),ce,(Ce,ke)=>{var Fe=$r(),yt=s(Fe,!0);a(Fe);var Nt={};F(()=>{j(yt,e(ke)),Nt!==(Nt=e(ke))&&(Fe.value=(Fe.__value=e(ke))??"")}),n(Ce,Fe)}),a(gt),a(Me),F(()=>gt.disabled=!e(W)),vt(_e,()=>e(W),Ce=>t(W,Ce)),vt(gt,()=>e(A),Ce=>t(A,Ce)),n(fe,Me)};H(m,fe=>{e(S)||fe(y)})}a(p);var K=r(p,2),De=s(K),Ee=s(De);ne(Ee,17,()=>e(oe),ce,(fe,Me)=>{var _e=ai();_e.__click=()=>X(e(Me));var xe=s(_e),It=s(xe,!0);a(xe);var gt=r(xe,2);{var Lt=st=>{var Ce=ti(),ke=s(Ce);a(Ce),F(()=>j(ke,`${e(Me).category??""} - ${e(Me).subcategory??""}`)),n(st,Ce)};H(gt,st=>{e(S)&&st(Lt)})}a(_e),F(()=>j(It,e(Me).name)),n(fe,_e)});var pe=r(Ee,2);{var me=fe=>{var Me=si(),_e=s(Me,!0);a(Me),F(()=>j(_e,e(S)?"No exercises found":"Select a category and subcategory to view exercises.")),n(fe,Me)};H(pe,fe=>{e(oe).length===0&&fe(me)})}a(De),a(K),a(o),a(E),ue(V,()=>e(S),fe=>t(S,fe)),na(3,o,()=>Za,()=>({y:100,duration:300})),na(3,E,()=>Ha),n(q,E)};H(be,q=>{e(b)&&q(Re)})}var je=r(be,2);{var Ne=q=>{Vr(q,{get exercise(){return e(Z)},visible:!0,$$events:{close:()=>t(Z,null)}})};H(je,q=>{e(Z)&&q(Ne)})}var nt=r(je,2);es(nt,{get defaultSets(){return e(se)},get associatedExerciseId(){return e(Y)},get visible(){return e(J)},set visible(q){t(J,q,!0)}});var at=r(nt,2);{var He=q=>{Qr(q,{isOpen:!0,title:"Delete Exercise",get message(){return`Are you sure you want to delete ${e(R)[e(B)].name??""}?`},requireInput:!1,onConfirm:()=>{e(B)!==null&&(t(R,e(R).filter((E,o)=>o!==e(B)),!0),t(B,null))},onCancel:()=>t(B,null)})};H(at,q=>{e(B)!==null&&q(He)})}a(ye),ue(xt,()=>e(M),q=>t(M,q)),ue(Ze,()=>e(k),q=>t(k,q)),ue(it,()=>e(h),q=>t(h,q)),ue(Ge,()=>e(_),q=>t(_,q)),vt(Ae,()=>e(u),q=>t(u,q)),n(P,ye),Wt()}Zt(["click","keydown","change"]);var li=w('<h3 class="svelte-1m63nqt">🤏 Fingerboarding</h3>'),oi=w("<option> </option>"),ni=w("<option> </option>"),ci=w('<button class="remove-set-btn svelte-1m63nqt">✕</button>'),ui=w('<div class="set-row svelte-1m63nqt"><div class="input-wrap svelte-1m63nqt"><label class="svelte-1m63nqt">Weight</label> <input type="number" placeholder="0" class="svelte-1m63nqt"/></div> <div class="input-wrap svelte-1m63nqt"><label class="svelte-1m63nqt">Reps/Secs</label> <input type="number" placeholder="1" class="svelte-1m63nqt"/></div> <!></div>'),vi=w('<div class="exercise-card svelte-1m63nqt"><div class="card-header svelte-1m63nqt"><div class="header-inputs svelte-1m63nqt"><select class="svelte-1m63nqt"></select> <select class="svelte-1m63nqt"></select></div> <button class="remove-card-btn svelte-1m63nqt" title="Remove Exercise">✕</button></div> <div class="sets-list svelte-1m63nqt"><!> <button class="add-set-btn svelte-1m63nqt">+ Add Set</button> <button class="rest-btn svelte-1m63nqt" title="Interval Timer">⏱ Timer</button></div> <div class="card-footer svelte-1m63nqt"><div class="meta-input svelte-1m63nqt"><label class="svelte-1m63nqt">Total Sets</label> <input type="number" readonly="" disabled class="svelte-1m63nqt"/></div> <div class="notes-input svelte-1m63nqt"><label class="svelte-1m63nqt">Notes</label> <input type="text" placeholder="Notes..." class="svelte-1m63nqt"/></div></div></div>'),di=w("<div> </div>"),gi=w('<div class="form-content svelte-1m63nqt"><div class="header-row svelte-1m63nqt"><div style="flex: 1; display: flex; justify-content: space-between; align-items: center;"><!></div> <button class="add-row-btn svelte-1m63nqt">+ Add Exercise</button></div> <div class="form-group date-group svelte-1m63nqt"><label for="date">Date</label> <div class="date-time-row svelte-1m63nqt"><input type="date" id="date" class="svelte-1m63nqt"/> <input type="time" id="time" class="svelte-1m63nqt"/></div></div> <div class="cards-container svelte-1m63nqt"></div> <div class="load-section svelte-1m63nqt"><h4 class="svelte-1m63nqt">Load Metrics</h4> <div class="load-metrics svelte-1m63nqt"><div class="metric-row svelte-1m63nqt"><!></div> <div class="metric-row svelte-1m63nqt"><!></div> <div class="metric-row svelte-1m63nqt"><!></div></div> <h4 class="mt-4 svelte-1m63nqt">Grip Metrics</h4> <div class="load-metrics svelte-1m63nqt"><div class="metric-row svelte-1m63nqt"><!></div> <div class="metric-row svelte-1m63nqt"><!></div> <div class="metric-row svelte-1m63nqt"><!></div> <div class="metric-row svelte-1m63nqt"><!></div> <div class="metric-row svelte-1m63nqt"><!></div></div></div> <div class="notes-section"><!></div> <div class="submit-section"><!> <button type="button" class="submit-btn svelte-1m63nqt"><!></button></div> <!></div>');function zi(P,i){Bt(i,!0),fa();let l=he(i,"initialData",3,null),f=St(()=>!!l());const D=["Max hangs","Recruitment pulls","Max pick-ups"],G=["Full-crimp","Half-crimp","Three finger drag","Pinch","Open hand","Sloper"];let M=v(Be(new Date().toISOString().split("T")[0])),_=v(Be(new Date().toTimeString().split(" ")[0].slice(0,5))),R=v(Be([])),k=v(3),h=v(3),u=v(3),C=v(3),N=v(3),L=v(3),x=v(3),b=v(3),S=v(""),W=v(!1),A=v(null),J=v(3);function Z(m){t(A,m.id,!0),t(J,m.sets,!0),t(W,!0)}function B(){t(R,[...e(R),{id:crypto.randomUUID(),name:D[0],gripType:G[1],sets:1,details:[{weight:0,reps:5}],notes:""}],!0)}const I="fingerboard_session_draft";let Y=v(!1);ma(()=>{if(l())t(M,l().date,!0),t(_,l().time||"12:00",!0),t(R,l().exercises,!0),t(k,l().fingerLoad||3,!0),t(h,l().shoulderLoad||3,!0),t(u,l().forearmLoad||3,!0),t(C,l().openGrip||3,!0),t(N,l().crimpGrip||3,!0),t(L,l().pinchGrip||3,!0),t(x,l().sloperGrip||3,!0),t(b,l().jugGrip||3,!0),t(S,l().notes||"",!0),t(Y,!0);else{const m=localStorage.getItem(I);if(m)try{const y=JSON.parse(m);y.time&&t(_,y.time,!0),y.exercises&&Array.isArray(y.exercises)&&t(R,y.exercises,!0),y.fingerLoad&&t(k,y.fingerLoad,!0),y.shoulderLoad&&t(h,y.shoulderLoad,!0),y.forearmLoad&&t(u,y.forearmLoad,!0),y.openGrip&&t(C,y.openGrip,!0),y.crimpGrip&&t(N,y.crimpGrip,!0),y.pinchGrip&&t(L,y.pinchGrip,!0),y.sloperGrip&&t(x,y.sloperGrip,!0),y.jugGrip&&t(b,y.jugGrip,!0),y.notes&&t(S,y.notes,!0)}catch(y){console.error("Failed to restore draft",y)}e(R).length===0&&B(),t(Y,!0)}}),ra(()=>{if(!e(Y)||e(f))return;const m={date:e(M),time:e(_),exercises:e(R),fingerLoad:e(k),shoulderLoad:e(h),forearmLoad:e(u),openGrip:e(C),crimpGrip:e(N),pinchGrip:e(L),sloperGrip:e(x),jugGrip:e(b),notes:e(S)};localStorage.setItem(I,JSON.stringify(m))});function se(m){t(R,e(R).filter((y,K)=>K!==m),!0)}function le(m){const y=e(R)[m],K=y.details[y.details.length-1];y.details=[...y.details,{...K}],y.sets=y.details.length}function oe(m,y){const K=e(R)[m];K.details.length>1&&(K.details=K.details.filter((De,Ee)=>Ee!==y),K.sets=K.details.length)}let $=v("idle"),re=v("");async function z(){t($,"saving");try{const m={date:e(M),time:e(_),location:"N/A",exercises:JSON.parse(JSON.stringify(e(R))),fingerLoad:e(k),shoulderLoad:e(h),forearmLoad:e(u),openGrip:e(C),crimpGrip:e(N),pinchGrip:e(L),sloperGrip:e(x),jugGrip:e(b),notes:e(S)};let y;e(f)&&l()?y=await Rs(l().id,m):y=await Ps(m),y.ok?(t($,"success"),t(re,"Session saved!"),e(f)||localStorage.removeItem(I),i.onSaved?i.onSaved():(window.dispatchEvent(new CustomEvent("session-saved")),setTimeout(()=>{X()},2e3))):(t($,"error"),t(re,"Failed to save: "+(y.error||"Unknown error")))}catch(m){t($,"error"),t(re,"Failed to save session"),console.error("Save error:",m)}}function X(){t(M,new Date().toISOString().split("T")[0],!0),t(_,new Date().toTimeString().split(" ")[0].slice(0,5),!0),t(R,[],!0),B(),t(k,3),t(h,3),t(u,3),t(C,3),t(N,3),t(L,3),t(x,3),t(b,3),t(S,""),t($,"idle"),t(re,"")}var ee=gi(),ve=s(ee),Ye=s(ve),ye=s(Ye);{var Xe=m=>{var y=li();n(m,y)};H(ye,m=>{e(f)||m(Xe)})}a(Ye);var Pt=r(Ye,2);Pt.__click=B,a(ve);var qt=r(ve,2),xt=r(s(qt),2),U=s(xt);ie(U);var te=r(U,2);ie(te),a(xt),a(qt);var We=r(qt,2);ne(We,21,()=>e(R),ce,(m,y,K)=>{var De=vi(),Ee=s(De),pe=s(Ee),me=s(pe);ne(me,21,()=>D,ce,(pt,ct)=>{var Le=oi(),mt=s(Le,!0);a(Le);var ft={};F(()=>{j(mt,e(ct)),ft!==(ft=e(ct))&&(Le.value=(Le.__value=e(ct))??"")}),n(pt,Le)}),a(me);var fe=r(me,2);ne(fe,21,()=>G,ce,(pt,ct)=>{var Le=ni(),mt=s(Le,!0);a(Le);var ft={};F(()=>{j(mt,e(ct)),ft!==(ft=e(ct))&&(Le.value=(Le.__value=e(ct))??"")}),n(pt,Le)}),a(fe),a(pe);var Me=r(pe,2);Me.__click=()=>se(K),a(Ee);var _e=r(Ee,2),xe=s(_e);ne(xe,17,()=>e(y).details,ce,(pt,ct,Le)=>{var mt=ui(),ft=s(mt),jt=s(ft);ut(jt,"for",`weight-${K}-${Le}`);var Ve=r(jt,2);ie(Ve),ut(Ve,"id",`weight-${K}-${Le}`),a(ft);var Ke=r(ft,2),Ot=s(Ke);ut(Ot,"for",`reps-${K}-${Le}`);var Ht=r(Ot,2);ie(Ht),ut(Ht,"id",`reps-${K}-${Le}`),a(Ke);var $t=r(Ke,2);{var ia=zt=>{var ea=ci();ea.__click=()=>oe(K,Le),n(zt,ea)};H($t,zt=>{e(y).details.length>1&&zt(ia)})}a(mt),ue(Ve,()=>e(ct).weight,zt=>e(ct).weight=zt),ue(Ht,()=>e(ct).reps,zt=>e(ct).reps=zt),n(pt,mt)});var It=r(xe,2);It.__click=()=>le(K);var gt=r(It,2);gt.__click=()=>Z(e(y)),a(_e);var Lt=r(_e,2),st=s(Lt),Ce=s(st);ut(Ce,"for",`total-sets-${K}`);var ke=r(Ce,2);ie(ke),ut(ke,"id",`total-sets-${K}`),a(st);var Fe=r(st,2),yt=s(Fe);ut(yt,"for",`notes-${K}`);var Nt=r(yt,2);ie(Nt),ut(Nt,"id",`notes-${K}`),a(Fe),a(Lt),a(De),F(()=>hs(ke,e(y).sets)),vt(me,()=>e(y).name,pt=>e(y).name=pt),vt(fe,()=>e(y).gripType,pt=>e(y).gripType=pt),ue(Nt,()=>e(y).notes,pt=>e(y).notes=pt),n(m,De)}),a(We);var Ze=r(We,2),it=r(s(Ze),2),$e=s(it),Ge=s($e);Te(Ge,{id:"finger-load",label:"Finger",get value(){return e(k)},set value(m){t(k,m,!0)}}),a($e);var et=r($e,2),Ae=s(et);Te(Ae,{id:"shoulder-load",label:"Shoulder",get value(){return e(h)},set value(m){t(h,m,!0)}}),a(et);var Ie=r(et,2),Tt=s(Ie);Te(Tt,{id:"forearm-load",label:"Forearm",get value(){return e(u)},set value(m){t(u,m,!0)}}),a(Ie),a(it);var dt=r(it,4),Ct=s(dt),lt=s(Ct);Te(lt,{id:"open-grip",label:"Open",get value(){return e(C)},set value(m){t(C,m,!0)}}),a(Ct);var de=r(Ct,2),Se=s(de);Te(Se,{id:"crimp-grip",label:"Crimp",get value(){return e(N)},set value(m){t(N,m,!0)}}),a(de);var ze=r(de,2),tt=s(ze);Te(tt,{id:"pinch-grip",label:"Pinch",get value(){return e(L)},set value(m){t(L,m,!0)}}),a(ze);var ot=r(ze,2),be=s(ot);Te(be,{id:"sloper-grip",label:"Sloper",get value(){return e(x)},set value(m){t(x,m,!0)}}),a(ot);var Re=r(ot,2),je=s(Re);Te(je,{id:"jug-grip",label:"Jug",get value(){return e(b)},set value(m){t(b,m,!0)}}),a(Re),a(dt),a(Ze);var Ne=r(Ze,2),nt=s(Ne);Sa(nt,{placeholder:"How did the session feel? Energy levels, mood, etc.",get value(){return e(S)},set value(m){t(S,m,!0)}}),a(Ne);var at=r(Ne,2),He=s(at);{var q=m=>{var y=di();let K;var De=s(y,!0);a(y),F(()=>{K=Rt(y,1,"save-message svelte-1m63nqt",null,K,{success:e($)==="success",error:e($)==="error"}),j(De,e(re))}),n(m,y)};H(He,m=>{e(re)&&m(q)})}var E=r(He,2);E.__click=z;var o=s(E);{var p=m=>{var y=kt("Saving...");n(m,y)},O=m=>{var y=Kt(),K=Ft(y);{var De=pe=>{var me=kt("✓ Saved!");n(pe,me)},Ee=pe=>{var me=kt("Save Session");n(pe,me)};H(K,pe=>{e($)==="success"?pe(De):pe(Ee,!1)},!0)}n(m,y)};H(o,m=>{e($)==="saving"?m(p):m(O,!1)})}a(E),a(at);var V=r(at,2);es(V,{get defaultSets(){return e(J)},get associatedExerciseId(){return e(A)},get visible(){return e(W)},set visible(m){t(W,m,!0)}}),a(ee),F(()=>E.disabled=e($)==="saving"),ue(U,()=>e(M),m=>t(M,m)),ue(te,()=>e(_),m=>t(_,m)),n(P,ee),Wt()}Zt(["click"]);var pi=w('<h3 style="margin: 0; color: var(--teal-secondary);" class="svelte-1fje4dh">🏆 Competition</h3>'),mi=w("<option> </option>"),fi=w('<input type="text" placeholder="Enter venue name" class="mt-2 svelte-1fje4dh"/>'),_i=w("<option> </option>"),hi=w("<option> </option>"),bi=w('<input type="text" placeholder="Round name" class="mt-2 svelte-1fje4dh"/>'),yi=w('<div class="result-mode-content svelte-1fje4dh"><div class="form-group svelte-1fje4dh"><label for="position" class="svelte-1fje4dh">Final Position</label> <input type="number" id="position" placeholder="#" class="large-input svelte-1fje4dh"/></div></div>'),wi=w("<option> </option>"),Si=w('<input type="number" min="1" class="svelte-1fje4dh"/>'),ki=w('<span class="flash-dash">-</span>'),xi=w('<tr><td class="col-name svelte-1fje4dh"><input type="text" class="svelte-1fje4dh"/></td><td class="col-status svelte-1fje4dh"><select class="svelte-1fje4dh"></select></td><td class="col-attempt svelte-1fje4dh"><!></td><td class="col-notes svelte-1fje4dh"><input type="text" placeholder="..." class="svelte-1fje4dh"/></td><td class="col-action svelte-1fje4dh"><button class="svelte-1fje4dh">✕</button></td></tr>'),Ti=w('<div class="section-header centered svelte-1fje4dh"><h4 class="svelte-1fje4dh">Load Metrics</h4></div> <div class="load-metrics-column svelte-1fje4dh"><div class="metric-row svelte-1fje4dh"><!></div> <div class="metric-row svelte-1fje4dh"><!></div> <div class="metric-row svelte-1fje4dh"><!></div></div> <div class="climbs-table-container svelte-1fje4dh"><div class="section-header svelte-1fje4dh"><h4 class="svelte-1fje4dh">Boulders / Routes</h4></div> <table class="climbs-table svelte-1fje4dh"><thead><tr><th class="svelte-1fje4dh">#</th><th class="svelte-1fje4dh">Result</th><th class="svelte-1fje4dh">Att.</th><th class="svelte-1fje4dh">Notes</th><th class="svelte-1fje4dh"></th></tr></thead><tbody></tbody></table> <button class="add-row-btn svelte-1fje4dh">+ Add Row</button></div>',1),Ci=w("<div> </div>"),Li=w('<div class="form-content svelte-1fje4dh"><div style="flex: 1; display: flex; justify-content: space-between; align-items: center; margin-bottom: 1.5rem;"><!></div> <div class="form-grid svelte-1fje4dh"><div class="form-group svelte-1fje4dh"><label for="date" class="svelte-1fje4dh">Date</label> <div class="date-time-row svelte-1fje4dh"><input type="date" id="date" class="svelte-1fje4dh"/> <input type="time" id="time" class="svelte-1fje4dh"/></div></div> <div class="form-group svelte-1fje4dh"><label for="venue" class="svelte-1fje4dh">Venue</label> <select id="venue" class="svelte-1fje4dh"><option disabled>Select venue...</option><!></select> <!></div></div> <div class="form-group mb-4 svelte-1fje4dh"><label for="type" class="svelte-1fje4dh">Type</label> <select id="type" class="svelte-1fje4dh"></select></div> <div class="form-group mb-4 svelte-1fje4dh"><!></div> <div class="round-section svelte-1fje4dh"><div class="form-group svelte-1fje4dh"><label for="round" class="svelte-1fje4dh">Round</label> <select id="round" class="svelte-1fje4dh"></select> <!></div> <!></div> <div class="submit-section"><!> <button type="button" class="submit-btn svelte-1fje4dh"><!></button></div></div>');function ji(P,i){Bt(i,!0),fa();let l=he(i,"initialData",3,null),f=St(()=>!!l());const D=["Flashpoint Bristol","Rockstar Techno","Rockstar Unit 3","Rockstar Unit 5","Bloc","TCA","Other"],G=["Bouldering","Lead","Speed"],M=["Qualifiers","Semi-Finals","Finals","Result","Other"],_=["Flash","Top","Zone","Attempt"];let R=v(Be(new Date().toISOString().split("T")[0])),k=v(Be(new Date().toTimeString().split(" ")[0].slice(0,5))),h=v(""),u=v(""),C=v("Bouldering"),N=v(4),L=v(4),x=v(4),b=v("Qualifiers"),S=v(""),W=v(null),A=v(Be([{name:"#1",status:"Flash",attemptCount:1,notes:""}])),J=v("");const Z="competition_session_draft";let B=v(!1);ma(()=>{if(l()){if(t(R,l().date,!0),t(k,l().time||"12:00",!0),t(C,l().type||"Bouldering",!0),t(J,l().notes||"",!0),D.includes(l().venue)?t(h,l().venue,!0):(t(h,"Other"),t(u,l().venue,!0)),t(N,l().fingerLoad??4,!0),t(L,l().shoulderLoad??4,!0),t(x,l().forearmLoad??4,!0),l().rounds&&l().rounds.length>0){const o=l().rounds[0];M.includes(o.name)?t(b,o.name,!0):(t(b,"Other"),t(S,o.name,!0)),t(W,o.position??null,!0),o.climbs&&o.climbs.length>0&&t(A,o.climbs,!0)}t(B,!0)}else{const o=localStorage.getItem(Z);if(o)try{const p=JSON.parse(o);p.venue&&t(h,p.venue,!0),p.time&&t(k,p.time,!0),p.customVenue&&t(u,p.customVenue,!0),p.type&&t(C,p.type,!0),p.fingerLoad&&t(N,p.fingerLoad,!0),p.shoulderLoad&&t(L,p.shoulderLoad,!0),p.forearmLoad&&t(x,p.forearmLoad,!0),p.roundName&&t(b,p.roundName,!0),p.customRoundName&&t(S,p.customRoundName,!0),p.finalPosition&&t(W,p.finalPosition,!0),p.climbs&&t(A,p.climbs,!0),p.notes&&t(J,p.notes,!0)}catch(p){console.error("Failed to restore draft",p)}t(B,!0)}}),ra(()=>{if(!e(B)||e(f))return;const o={date:e(R),time:e(k),venue:e(h),customVenue:e(u),type:e(C),fingerLoad:e(N),shoulderLoad:e(L),forearmLoad:e(x),roundName:e(b),customRoundName:e(S),finalPosition:e(W),climbs:e(A),notes:e(J)};localStorage.setItem(Z,JSON.stringify(o))});let I=St(()=>e(b)==="Result"),Y=St(()=>e(h)==="Other"),se=St(()=>e(b)==="Other"),le=St(()=>e(b)==="Other"?e(S):e(b));function oe(){const o=e(A).length+1;t(A,[...e(A),{name:`#${o}`,status:"Flash",attemptCount:1,notes:""}],!0)}function $(o){e(A).length>1?t(A,e(A).filter((p,O)=>O!==o),!0):e(A)[0]={name:"#1",status:"Flash",attemptCount:1,notes:""}}function re(o,p){e(A)[o].status=p,p==="Flash"&&(e(A)[o].attemptCount=1)}let z=v("idle"),X=v("");async function ee(){if(!e(h)||e(h)==="Other"&&!e(u)){t(z,"error"),t(X,"Please specify a venue");return}t(z,"saving");try{const o={name:e(le),position:e(I)?e(W):void 0,climbs:e(I)?void 0:JSON.parse(JSON.stringify(e(A)))},p={date:e(R),time:e(k),venue:e(h)==="Other"?e(u):e(h),customVenue:e(h)==="Other"?e(u):void 0,type:e(C),fingerLoad:e(I)?void 0:e(N),shoulderLoad:e(I)?void 0:e(L),forearmLoad:e(I)?void 0:e(x),rounds:[o],notes:e(J)};let O;e(f)&&l()?O=await qs(l().id,p):O=await Ns(p),O.ok?(t(z,"success"),t(X,"Competition saved!"),e(f)||localStorage.removeItem(Z),i.onSaved?i.onSaved():(window.dispatchEvent(new CustomEvent("session-saved")),setTimeout(()=>{ve()},2e3))):(t(z,"error"),t(X,"Failed to save: "+(O.error||"Unknown error")))}catch(o){t(z,"error"),t(X,"Failed to save session"),console.error("Save error:",o)}}function ve(){t(R,new Date().toISOString().split("T")[0],!0),t(k,new Date().toTimeString().split(" ")[0].slice(0,5),!0),t(h,""),t(u,""),t(W,null),t(A,[{name:"#1",status:"Flash",attemptCount:1,notes:""}],!0),t(J,""),t(z,"idle"),t(X,"")}var Ye=Li(),ye=s(Ye),Xe=s(ye);{var Pt=o=>{var p=pi();n(o,p)};H(Xe,o=>{e(f)||o(Pt)})}a(ye);var qt=r(ye,2),xt=s(qt),U=r(s(xt),2),te=s(U);ie(te);var We=r(te,2);ie(We),a(U),a(xt);var Ze=r(xt,2),it=r(s(Ze),2),$e=s(it);$e.value=$e.__value="";var Ge=r($e);ne(Ge,17,()=>D,ce,(o,p)=>{var O=mi(),V=s(O,!0);a(O);var m={};F(()=>{j(V,e(p)),m!==(m=e(p))&&(O.value=(O.__value=e(p))??"")}),n(o,O)}),a(it);var et=r(it,2);{var Ae=o=>{var p=fi();ie(p),ue(p,()=>e(u),O=>t(u,O)),n(o,p)};H(et,o=>{e(Y)&&o(Ae)})}a(Ze),a(qt);var Ie=r(qt,2),Tt=r(s(Ie),2);ne(Tt,21,()=>G,ce,(o,p)=>{var O=_i(),V=s(O,!0);a(O);var m={};F(()=>{j(V,e(p)),m!==(m=e(p))&&(O.value=(O.__value=e(p))??"")}),n(o,O)}),a(Tt),a(Ie);var dt=r(Ie,2),Ct=s(dt);Sa(Ct,{placeholder:"How did the comp go? Strategy, mindset, etc.",get value(){return e(J)},set value(o){t(J,o,!0)}}),a(dt);var lt=r(dt,2),de=s(lt),Se=r(s(de),2);ne(Se,21,()=>M,ce,(o,p)=>{var O=hi(),V=s(O,!0);a(O);var m={};F(()=>{j(V,e(p)),m!==(m=e(p))&&(O.value=(O.__value=e(p))??"")}),n(o,O)}),a(Se);var ze=r(Se,2);{var tt=o=>{var p=bi();ie(p),ue(p,()=>e(S),O=>t(S,O)),n(o,p)};H(ze,o=>{e(se)&&o(tt)})}a(de);var ot=r(de,2);{var be=o=>{var p=yi(),O=s(p),V=r(s(O),2);ie(V),a(O),a(p),ue(V,()=>e(W),m=>t(W,m)),n(o,p)},Re=o=>{var p=Ti(),O=r(Ft(p),2),V=s(O),m=s(V);Te(m,{id:"finger",label:"Finger Load",max:5,get value(){return e(N)},set value(_e){t(N,_e,!0)}}),a(V);var y=r(V,2),K=s(y);Te(K,{id:"shoulder",label:"Shoulder Load",max:5,get value(){return e(L)},set value(_e){t(L,_e,!0)}}),a(y);var De=r(y,2),Ee=s(De);Te(Ee,{id:"forearm",label:"Forearm Load",max:5,get value(){return e(x)},set value(_e){t(x,_e,!0)}}),a(De),a(O);var pe=r(O,2),me=r(s(pe),2),fe=r(s(me));ne(fe,21,()=>e(A),ce,(_e,xe,It)=>{var gt=xi(),Lt=s(gt),st=s(Lt);ie(st),a(Lt);var Ce=r(Lt),ke=s(Ce);ke.__change=Ve=>re(It,Ve.target.value),ne(ke,21,()=>_,ce,(Ve,Ke)=>{var Ot=wi(),Ht=s(Ot,!0);a(Ot);var $t={};F(()=>{j(Ht,e(Ke)),$t!==($t=e(Ke))&&(Ot.value=(Ot.__value=e(Ke))??"")}),n(Ve,Ot)}),a(ke);var Fe;Fa(ke),a(Ce);var yt=r(Ce),Nt=s(yt);{var pt=Ve=>{var Ke=Si();ie(Ke),ue(Ke,()=>e(xe).attemptCount,Ot=>e(xe).attemptCount=Ot),n(Ve,Ke)},ct=Ve=>{var Ke=ki();n(Ve,Ke)};H(Nt,Ve=>{e(xe).status!=="Flash"?Ve(pt):Ve(ct,!1)})}a(yt);var Le=r(yt),mt=s(Le);ie(mt),a(Le);var ft=r(Le),jt=s(ft);jt.__click=()=>$(It),a(ft),a(gt),F(()=>{Fe!==(Fe=e(xe).status)&&(ke.value=(ke.__value=e(xe).status)??"",Ba(ke,e(xe).status))}),ue(st,()=>e(xe).name,Ve=>e(xe).name=Ve),ue(mt,()=>e(xe).notes,Ve=>e(xe).notes=Ve),n(_e,gt)}),a(fe),a(me);var Me=r(me,2);Me.__click=oe,a(pe),n(o,p)};H(ot,o=>{e(I)?o(be):o(Re,!1)})}a(lt);var je=r(lt,2),Ne=s(je);{var nt=o=>{var p=Ci();let O;var V=s(p,!0);a(p),F(()=>{O=Rt(p,1,"save-message svelte-1fje4dh",null,O,{success:e(z)==="success",error:e(z)==="error"}),j(V,e(X))}),n(o,p)};H(Ne,o=>{e(X)&&o(nt)})}var at=r(Ne,2);at.__click=ee;var He=s(at);{var q=o=>{var p=kt("Saving...");n(o,p)},E=o=>{var p=Kt(),O=Ft(p);{var V=y=>{var K=kt("✓ Saved!");n(y,K)},m=y=>{var K=kt("Save Session");n(y,K)};H(O,y=>{e(z)==="success"?y(V):y(m,!1)},!0)}n(o,p)};H(He,o=>{e(z)==="saving"?o(q):o(E,!1)})}a(at),a(je),a(Ye),F(()=>at.disabled=e(z)==="saving"),ue(te,()=>e(R),o=>t(R,o)),ue(We,()=>e(k),o=>t(k,o)),vt(it,()=>e(h),o=>t(h,o)),vt(Tt,()=>e(C),o=>t(C,o)),vt(Se,()=>e(b),o=>t(b,o)),n(P,Ye),Wt()}Zt(["change","click"]);export{ji as C,Qr as D,Ra as E,zi as F,Ii as G,Fi as I,Bi as O,Ka as a,Za as f,nr as g,Wi as s,na as t};
