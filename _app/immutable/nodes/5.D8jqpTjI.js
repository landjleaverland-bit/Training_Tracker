import{f as v,a as r,c as Te,t as wa}from"../chunks/BXdXZntb.js";import{z as as,ak as ss,aZ as ts,as as is,au as rs,e as vs,a_ as ns,aN as Ka,a$ as ls,ac as os,b0 as Oa,G as Za,p as va,c as a,s as i,i as s,aV as Z,r as e,t as y,a as na,x as o,f as xe,aW as ha,w as fa,aG as Fa}from"../chunks/Uw_kZyi_.js";import{a as ds,d as ea,s as l}from"../chunks/DPirsh8J.js";import{i as c}from"../chunks/YwdRV5Fi.js";import{s as Ne,r as Xe,e as be,i as we}from"../chunks/DQsiYeU_.js";import{b as Ta,r as Pa,u as Ya,t as Ra,q as Ba,v as cs,w as Ma,g as _s,j as us,x as fs,y as Wa,z as gs,A as Ua,B as ps}from"../chunks/Dt1-E3yB.js";import{o as Qa}from"../chunks/D0dKXudF.js";import{t as ms,b as $e,s as Be}from"../chunks/CLsJli5y.js";import{p as Ea}from"../chunks/Def57eX4.js";import"../chunks/BXNNvvj2.js";const hs=()=>performance.now(),ma={tick:x=>requestAnimationFrame(x),now:()=>hs(),tasks:new Set};function Xa(){const x=ma.now();ma.tasks.forEach(t=>{t.c(x)||(ma.tasks.delete(t),t.f())}),ma.tasks.size!==0&&ma.tick(Xa)}function bs(x){let t;return ma.tasks.size===0&&ma.tick(Xa),{promise:new Promise(p=>{ma.tasks.add(t={c:x,f:p})}),abort(){ma.tasks.delete(t)}}}function Ia(x,t){Ka(()=>{x.dispatchEvent(new CustomEvent(t))})}function ys(x){if(x==="float")return"cssFloat";if(x==="offset")return"cssOffset";if(x.startsWith("--"))return x;const t=x.split("-");return t.length===1?t[0]:t[0]+t.slice(1).map(p=>p[0].toUpperCase()+p.slice(1)).join("")}function Ja(x){const t={},p=x.split(";");for(const g of p){const[h,b]=g.split(":");if(!h||b===void 0)break;const u=ys(h.trim());t[u]=b.trim()}return t}const xs=x=>x;function Ze(x,t,p,g){var h=(x&ns)!==0,b="both",u,S=t.inert,R=t.style.overflow,k,O;function T(){return Ka(()=>u??=p()(t,g?.()??{},{direction:b}))}var F={is_global:h,in(){t.inert=S,Ia(t,"introstart"),k=Ha(t,T(),O,1,()=>{Ia(t,"introend"),k?.abort(),k=u=void 0,t.style.overflow=R})},out(W){t.inert=!0,Ia(t,"outrostart"),O=Ha(t,T(),k,0,()=>{Ia(t,"outroend"),W?.()})},stop:()=>{k?.abort(),O?.abort()}},z=as;if((z.nodes.t??=[]).push(F),ds){var C=h;if(!C){for(var A=z.parent;A&&(A.f&ss)!==0;)for(;(A=A.parent)&&(A.f&ts)===0;);C=!A||(A.f&is)!==0}C&&rs(()=>{vs(()=>F.in())})}}function Ha(x,t,p,g,h){var b=g===1;if(ls(t)){var u,S=!1;return os(()=>{if(!S){var W=t({direction:b?"in":"out"});u=Ha(x,W,p,g,h)}}),{abort:()=>{S=!0,u?.abort()},deactivate:()=>u.deactivate(),reset:()=>u.reset(),t:()=>u.t()}}if(p?.deactivate(),!t?.duration)return h(),{abort:Oa,deactivate:Oa,reset:Oa,t:()=>g};const{delay:R=0,css:k,tick:O,easing:T=xs}=t;var F=[];if(b&&p===void 0&&(O&&O(0,1),k)){var z=Ja(k(0,1));F.push(z,z)}var C=()=>1-g,A=x.animate(F,{duration:R,fill:"forwards"});return A.onfinish=()=>{A.cancel();var W=p?.t()??1-g;p?.abort();var J=g-W,V=t.duration*Math.abs(J),fe=[];if(V>0){var ae=!1;if(k)for(var j=Math.ceil(V/16.666666666666668),m=0;m<=j;m+=1){var E=W+J*T(m/j),K=Ja(k(E,1-E));fe.push(K),ae||=K.overflow==="hidden"}ae&&(x.style.overflow="hidden"),C=()=>{var Q=A.currentTime;return W+J*T(Q/V)},O&&bs(()=>{if(A.playState!=="running")return!1;var Q=C();return O(Q,1-Q),!0})}A=x.animate(fe,{duration:V,fill:"forwards"}),A.onfinish=()=>{C=()=>g,O?.(g,1-g),h()}},{abort:()=>{A&&(A.cancel(),A.effect=null,A.onfinish=Oa)},deactivate:()=>{h=Oa},reset:()=>{g===0&&O?.(1,0)},t:()=>C()}}function Ee(x,t,p,g){var h=x.__style;if(Za||h!==t){var b=ms(t);(!Za||b!==x.getAttribute("style"))&&(b==null?x.removeAttribute("style"):x.style.cssText=b),x.__style=t}return g}const ws=x=>x;function $a(x){const t=x-1;return t*t*t+1}function qs(x,{delay:t=0,duration:p=400,easing:g=ws}={}){const h=+getComputedStyle(x).opacity;return{delay:t,duration:p,easing:g,css:b=>`opacity: ${b*h}`}}function la(x,{delay:t=0,duration:p=400,easing:g=$a,axis:h="y"}={}){const b=getComputedStyle(x),u=+b.opacity,S=h==="y"?"height":"width",R=parseFloat(b[S]),k=h==="y"?["top","bottom"]:["left","right"],O=k.map(J=>`${J[0].toUpperCase()}${J.slice(1)}`),T=parseFloat(b[`padding${O[0]}`]),F=parseFloat(b[`padding${O[1]}`]),z=parseFloat(b[`margin${O[0]}`]),C=parseFloat(b[`margin${O[1]}`]),A=parseFloat(b[`border${O[0]}Width`]),W=parseFloat(b[`border${O[1]}Width`]);return{delay:t,duration:p,easing:g,css:J=>`overflow: hidden;opacity: ${Math.min(J*20,1)*u};${S}: ${J*R}px;padding-${k[0]}: ${J*T}px;padding-${k[1]}: ${J*F}px;margin-${k[0]}: ${J*z}px;margin-${k[1]}: ${J*C}px;border-${k[0]}-width: ${J*A}px;border-${k[1]}-width: ${J*W}px;min-${S}: 0`}}function Ds(x,{delay:t=0,duration:p=400,easing:g=$a,start:h=0,opacity:b=0}={}){const u=getComputedStyle(x),S=+u.opacity,R=u.transform==="none"?"":u.transform,k=1-h,O=S*(1-b);return{delay:t,duration:p,easing:g,css:(T,F)=>`
			transform: ${R} scale(${1-k*F});
			opacity: ${S-O*F}
		`}}var Ss=v('<span class="chevron svelte-12crvy">‚ñ≤</span>'),ks=v('<span class="chevron svelte-12crvy">‚ñº</span>'),Ts=v("<option> </option>"),Fs=v("<option> </option>"),Cs=v('<div class="filter-body svelte-12crvy"><div class="filter-grid svelte-12crvy"><div class="filter-item svelte-12crvy"><label for="start-date" class="svelte-12crvy">Start Date</label> <input type="date" id="start-date" class="svelte-12crvy"/></div> <div class="filter-item svelte-12crvy"><label for="end-date" class="svelte-12crvy">End Date</label> <input type="date" id="end-date" class="svelte-12crvy"/></div> <div class="filter-item svelte-12crvy"><label for="location-filter" class="svelte-12crvy">Location</label> <select id="location-filter" class="svelte-12crvy"><option>Any Location</option><!></select></div> <div class="filter-item svelte-12crvy"><label for="session-type-filter" class="svelte-12crvy">Session Type</label> <select id="session-type-filter" class="svelte-12crvy"><option>Any Type</option><!></select></div> <div class="filter-item svelte-12crvy"><label for="grade-filter" class="svelte-12crvy">Grade (Exact)</label> <input type="text" id="grade-filter" placeholder="e.g. V4" class="svelte-12crvy"/></div></div> <div class="filter-actions svelte-12crvy"><button class="reset-btn svelte-12crvy">Reset Filters</button></div></div>'),zs=v('<div class="filter-container svelte-12crvy"><button class="filter-header svelte-12crvy"><div class="header-content svelte-12crvy"><span class="icon svelte-12crvy">üîç</span> <span class="title svelte-12crvy">Filters</span> <!></div></button> <!></div>');function Ls(x,t){va(t,!0);const p=["Rockstar Swindon","Flashpoint Swindon","Flashpoint Bristol","Redpoint Bristol","TCH Bristol","Other"],g=["Projecting","Onsighting","Campusing","Repeaters"];let h=Z(!1),b=Z(""),u=Z(""),S=Z(""),R=Z(""),k=Z("");function O(){o(h,!s(h))}function T(){o(b,""),o(u,""),o(S,""),o(R,""),o(k,""),F()}function F(){t.onFilterParamsChange({startDate:s(b),endDate:s(u),location:s(S),sessionType:s(R),grade:s(k)})}var z=zs(),C=a(z);C.__click=O;var A=a(C),W=i(a(A),4);{var J=j=>{var m=Ss();r(j,m)},V=j=>{var m=ks();r(j,m)};c(W,j=>{s(h)?j(J):j(V,!1)})}e(A),e(C);var fe=i(C,2);{var ae=j=>{var m=Cs(),E=a(m),K=a(E),Q=i(a(K),2);Xe(Q),Q.__change=F,e(K);var se=i(K,2),X=i(a(se),2);Xe(X),X.__change=F,e(se);var n=i(se,2),w=i(a(n),2);w.__change=F;var L=a(w);L.value=L.__value="";var f=i(L);be(f,17,()=>p,we,(ie,ce)=>{var H=Ts(),le=a(H,!0);e(H);var pe={};y(()=>{l(le,s(ce)),pe!==(pe=s(ce))&&(H.value=(H.__value=s(ce))??"")}),r(ie,H)}),e(w),e(n);var d=i(n,2),q=i(a(d),2);q.__change=F;var $=a(q);$.value=$.__value="";var qe=i($);be(qe,17,()=>g,we,(ie,ce)=>{var H=Fs(),le=a(H,!0);e(H);var pe={};y(()=>{l(le,s(ce)),pe!==(pe=s(ce))&&(H.value=(H.__value=s(ce))??"")}),r(ie,H)}),e(q),e(d);var ge=i(d,2),ye=i(a(ge),2);Xe(ye),ye.__input=F,e(ge),e(E);var ue=i(E,2),ve=a(ue);ve.__click=T,e(ue),e(m),$e(Q,()=>s(b),ie=>o(b,ie)),$e(X,()=>s(u),ie=>o(u,ie)),Ta(w,()=>s(S),ie=>o(S,ie)),Ta(q,()=>s(R),ie=>o(R,ie)),$e(ye,()=>s(k),ie=>o(k,ie)),Ze(3,m,()=>la,()=>({duration:200})),r(j,m)};c(fe,j=>{s(h)&&j(ae)})}e(z),y(()=>Ne(C,"aria-expanded",s(h))),r(x,z),na()}ea(["click","change","input"]);var Gs=v('<span class="climb-type-tag svelte-yz0xxt"> </span>'),As=v('<span class="notes-preview svelte-yz0xxt"> </span>'),Os=v('<span class="attempts-count svelte-yz0xxt"> </span>'),Es=v('<div class="detail-row svelte-yz0xxt"><span class="label svelte-yz0xxt">Notes:</span> <p class="notes svelte-yz0xxt"> </p></div>'),Ns=v('<p class="empty-notes svelte-yz0xxt">No notes for this climb.</p>'),js=v('<div class="climb-details svelte-yz0xxt"><!> <div class="tags svelte-yz0xxt"><span class="tag type svelte-yz0xxt"> </span> <span class="tag attempt-text svelte-yz0xxt"> </span></div></div>'),Is=v('<div><div class="climb-header svelte-yz0xxt" role="button" tabindex="0"><div class="climb-main-info svelte-yz0xxt"><span> </span> <span class="climb-name svelte-yz0xxt"> </span> <!> <!></div> <div class="climb-meta svelte-yz0xxt"><span><span class="icon svelte-yz0xxt"> </span> <!></span> <button class="delete-btn svelte-yz0xxt" aria-label="Delete climb" title="Delete climb">üóëÔ∏è</button> <span class="chevron svelte-yz0xxt"> </span></div></div> <!></div>');function Rs(x,t){va(t,!0);let p=Ea(t,"showClimbType",3,!1),g=Z(!1);function h(){o(g,!s(g))}function b(d){d.stopPropagation(),t.onDelete()}const u={Flash:"‚ö°",Onsight:"üëÅÔ∏è",Redpoint:"üî¥",Dogged:"üõ†Ô∏è",DNF:"‚ùå"};var S=Is();let R;var k=a(S);k.__click=h,k.__keydown=d=>(d.key==="Enter"||d.key===" ")&&h();var O=a(k),T=a(O);let F;var z=a(T,!0);e(T);var C=i(T,2),A=a(C,!0);e(C);var W=i(C,2);{var J=d=>{var q=Gs(),$=a(q,!0);e(q),y(()=>l($,t.climb.isSport?"Sport":"Boulder")),r(d,q)};c(W,d=>{p()&&d(J)})}var V=i(W,2);{var fe=d=>{var q=As(),$=a(q);e(q),y(()=>l($,`- ${t.climb.notes??""}`)),r(d,q)};c(V,d=>{!s(g)&&t.climb.notes&&d(fe)})}e(O);var ae=i(O,2),j=a(ae);let m;var E=a(j),K=a(E,!0);e(E);var Q=i(E,2);{var se=d=>{var q=Os(),$=a(q,!0);e(q),y(()=>l($,t.climb.attemptsNum)),r(d,q)};c(Q,d=>{t.climb.attemptType!=="Flash"&&t.climb.attemptType!=="Onsight"&&d(se)})}e(j);var X=i(j,2);X.__click=b;var n=i(X,2),w=a(n,!0);e(n),e(ae),e(k);var L=i(k,2);{var f=d=>{var q=js(),$=a(q);{var qe=H=>{var le=Es(),pe=i(a(le),2),Me=a(pe,!0);e(pe),e(le),y(()=>l(Me,t.climb.notes)),r(H,le)},ge=H=>{var le=Ns();r(H,le)};c($,H=>{t.climb.notes?H(qe):H(ge,!1)})}var ye=i($,2),ue=a(ye),ve=a(ue,!0);e(ue);var ie=i(ue,2),ce=a(ie,!0);e(ie),e(ye),e(q),y(()=>{l(ve,t.climb.isSport?"Sport":"Boulder"),l(ce,t.climb.attemptType)}),Ze(3,q,()=>la,()=>({duration:150})),r(d,q)};c(L,d=>{s(g)&&d(f)})}e(S),y(()=>{R=Be(S,1,"climb-entry svelte-yz0xxt",null,R,{expanded:s(g)}),Ne(k,"aria-expanded",s(g)),F=Be(T,1,"grade-badge svelte-yz0xxt",null,F,{sport:t.climb.isSport}),l(z,t.climb.grade),l(A,t.climb.name||"Unnamed Route"),m=Be(j,1,"attempt-type svelte-yz0xxt",null,m,{flash:t.climb.attemptType==="Flash"}),l(K,u[t.climb.attemptType]||t.climb.attemptType),l(w,s(g)?"‚ñ≤":"‚ñº")}),r(x,S),na()}ea(["click","keydown"]);var Ps=v('<button class="backdrop svelte-12q9g58" aria-label="Close modal"></button> <div class="modal svelte-12q9g58" role="dialog" aria-modal="true"><h3 class="svelte-12q9g58"> </h3> <p class="svelte-12q9g58"> </p> <div class="input-group svelte-12q9g58"><label for="delete-confirm" class="svelte-12q9g58">Type <strong>delete</strong> to confirm:</label> <input type="text" id="delete-confirm" placeholder="delete" autocomplete="off" class="svelte-12q9g58"/></div> <div class="actions svelte-12q9g58"><button class="btn-cancel svelte-12q9g58">Cancel</button> <button class="btn-delete svelte-12q9g58">Delete</button></div></div>',1);function Va(x,t){va(t,!0);let p=Ea(t,"isOpen",3,!1),g=Ea(t,"title",3,"Confirm Delete"),h=Ea(t,"message",3,"Are you sure you want to delete this item? This action cannot be undone."),b=Z(""),u=ha(()=>s(b).toLowerCase()==="delete");function S(){s(u)&&(t.onConfirm(),o(b,""))}function R(){t.onCancel(),o(b,"")}var k=Te(),O=xe(k);{var T=F=>{var z=Ps(),C=xe(z);C.__click=R;var A=i(C,2),W=a(A),J=a(W,!0);e(W);var V=i(W,2),fe=a(V,!0);e(V);var ae=i(V,2),j=i(a(ae),2);Xe(j),e(ae);var m=i(ae,2),E=a(m);E.__click=R;var K=i(E,2);K.__click=S,e(m),e(A),y(()=>{l(J,g()),l(fe,h()),K.disabled=!s(u)}),Ze(3,C,()=>qs,()=>({duration:200})),$e(j,()=>s(b),Q=>o(b,Q)),Ze(3,A,()=>Ds,()=>({duration:200,start:.9})),r(F,z)};c(O,F=>{p()&&F(T)})}r(x,k),na()}ea(["click"]);var Bs=v('<span class="stat svelte-7vqogn"> </span>'),Ms=v('<span class="status-icon pending svelte-7vqogn" title="Waiting to sync">üîÑ</span>'),Vs=v('<span class="status-icon error svelte-7vqogn" title="Sync error">‚ö†Ô∏è</span>'),Ws=v('<span class="chip svelte-7vqogn"> </span>'),Us=v('<span class="text-none svelte-7vqogn">None</span>'),Hs=v('<div class="detail-item svelte-7vqogn"><span class="label svelte-7vqogn">Difficulty</span> <span class="value svelte-7vqogn"> </span></div>'),Zs=v('<span class="chip svelte-7vqogn"> </span>'),Js=v('<span class="text-none svelte-7vqogn">None</span>'),Ks=v('<div class="detail-item svelte-7vqogn"><span class="label svelte-7vqogn">Category</span> <div class="value-chips svelte-7vqogn"><!></div></div>'),Ys=v('<span class="chip svelte-7vqogn"> </span>'),Qs=v('<span class="text-none svelte-7vqogn">None</span>'),Xs=v('<div class="detail-item svelte-7vqogn"><span class="label svelte-7vqogn">Focus</span> <div class="value-chips svelte-7vqogn"><!></div></div>'),$s=v('<span class="chip svelte-7vqogn"> </span>'),et=v('<span class="text-none svelte-7vqogn">None</span>'),at=v('<div class="detail-item svelte-7vqogn"><span class="label svelte-7vqogn">Energy System</span> <div class="value-chips svelte-7vqogn"><!></div></div>'),st=v('<span class="chip svelte-7vqogn"> </span>'),tt=v('<span class="text-none svelte-7vqogn">None</span>'),it=v('<div class="detail-item svelte-7vqogn"><span class="label svelte-7vqogn">Wall Angle</span> <div class="value-chips svelte-7vqogn"><!></div></div>'),rt=v('<div class="metric svelte-7vqogn"><span class="label svelte-7vqogn">Open Grip</span> <div class="bar-container svelte-7vqogn"><div class="bar-fill svelte-7vqogn"></div></div> <span class="score svelte-7vqogn"> </span></div>'),vt=v('<div class="metric svelte-7vqogn"><span class="label svelte-7vqogn">Crimp Grip</span> <div class="bar-container svelte-7vqogn"><div class="bar-fill svelte-7vqogn"></div></div> <span class="score svelte-7vqogn"> </span></div>'),nt=v('<div class="metric svelte-7vqogn"><span class="label svelte-7vqogn">Pinch Grip</span> <div class="bar-container svelte-7vqogn"><div class="bar-fill svelte-7vqogn"></div></div> <span class="score svelte-7vqogn"> </span></div>'),lt=v('<div class="metric svelte-7vqogn"><span class="label svelte-7vqogn">Sloper Grip</span> <div class="bar-container svelte-7vqogn"><div class="bar-fill svelte-7vqogn"></div></div> <span class="score svelte-7vqogn"> </span></div>'),ot=v('<div class="metric svelte-7vqogn"><span class="label svelte-7vqogn">Jug Grip</span> <div class="bar-container svelte-7vqogn"><div class="bar-fill svelte-7vqogn"></div></div> <span class="score svelte-7vqogn"> </span></div>'),dt=v('<p class="no-climbs svelte-7vqogn">No climbs logged for this session.</p>'),ct=v('<div class="card-body svelte-7vqogn"><div class="details-grid svelte-7vqogn"><div class="detail-item svelte-7vqogn"><span class="label svelte-7vqogn">Training Type</span> <div class="value-chips svelte-7vqogn"><!></div></div> <!> <!> <!> <!> <!></div> <div class="metrics-container svelte-7vqogn"><div class="metric svelte-7vqogn"><span class="label svelte-7vqogn">Finger Load</span> <div class="bar-container svelte-7vqogn"><div class="bar-fill svelte-7vqogn"></div></div> <span class="score svelte-7vqogn"> </span></div> <div class="metric svelte-7vqogn"><span class="label svelte-7vqogn">Shoulder Load</span> <div class="bar-container svelte-7vqogn"><div class="bar-fill svelte-7vqogn"></div></div> <span class="score svelte-7vqogn"> </span></div> <div class="metric svelte-7vqogn"><span class="label svelte-7vqogn">Forearm Load</span> <div class="bar-container svelte-7vqogn"><div class="bar-fill svelte-7vqogn"></div></div> <span class="score svelte-7vqogn"> </span></div> <!> <!> <!> <!> <!></div> <div class="climbs-list svelte-7vqogn"><h4 class="svelte-7vqogn">Climbs</h4> <div class="climbs-container svelte-7vqogn"><!> <!></div></div></div>'),_t=v('<div><div class="card-header svelte-7vqogn" role="button" tabindex="0"><div class="header-main svelte-7vqogn"><div class="date-badge svelte-7vqogn"><span class="day svelte-7vqogn"> </span> <span class="month svelte-7vqogn"> </span></div> <div class="session-info svelte-7vqogn"><div class="session-text svelte-7vqogn"><h3 class="location svelte-7vqogn"> </h3> <div class="session-meta svelte-7vqogn"><span class="type-tag svelte-7vqogn"> </span> <span class="stat svelte-7vqogn"> </span> <!></div></div> <div class="load-summary svelte-7vqogn"><div class="load-badge finger svelte-7vqogn"> </div> <div class="load-badge shoulder svelte-7vqogn"> </div> <div class="load-badge forearm svelte-7vqogn"> </div></div></div></div> <div class="header-actions"><div class="header-status svelte-7vqogn"><!></div>  <button class="btn-icon delete-session" title="Delete Session">üóëÔ∏è</button> <span class="chevron svelte-7vqogn"> </span></div></div> <!></div> <!>',1);function ut(x,t){va(t,!0);let p=Z(!1),g=Z(!1);function h(){o(p,!s(p))}function b(){o(g,!0)}function u(){Pa(t.session.id),o(g,!1),t.onDelete()}function S(ne){const B=[...t.session.climbs];B.splice(ne,1),Ya(t.session.id,{climbs:B}),t.onDelete()}let R=ha(()=>t.session.climbs.length),k=ha(()=>t.session.climbs.reduce((ne,B)=>{const te=parseInt(B.grade.replace(/\D/g,""))||0,re=parseInt(ne.replace(/\D/g,""))||0;return te>re?B.grade:ne},"V0"));var O=_t(),T=xe(O);let F;var z=a(T);z.__click=h,z.__keydown=ne=>ne.key==="Enter"&&h();var C=a(z),A=a(C),W=a(A),J=a(W,!0);e(W);var V=i(W,2),fe=a(V,!0);e(V),e(A);var ae=i(A,2),j=a(ae),m=a(j),E=a(m,!0);e(m);var K=i(m,2),Q=a(K),se=a(Q,!0);e(Q);var X=i(Q,2),n=a(X);e(X);var w=i(X,2);{var L=ne=>{var B=Bs(),te=a(B);e(B),y(()=>l(te,`Max: ${s(k)??""}`)),r(ne,B)};c(w,ne=>{s(R)>0&&ne(L)})}e(K),e(j);var f=i(j,2),d=a(f),q=a(d,!0);e(d);var $=i(d,2),qe=a($,!0);e($);var ge=i($,2),ye=a(ge,!0);e(ge),e(f),e(ae),e(C);var ue=i(C,2),ve=a(ue),ie=a(ve);{var ce=ne=>{var B=Ms();r(ne,B)},H=ne=>{var B=Te(),te=xe(B);{var re=I=>{var N=Vs();r(I,N)};c(te,I=>{t.session.syncStatus==="error"&&I(re)},!0)}r(ne,B)};c(ie,ne=>{t.session.syncStatus==="pending"?ne(ce):ne(H,!1)})}e(ve);var le=i(ve,2);le.__click=ne=>{ne.stopPropagation(),b()};var pe=i(le,2),Me=a(pe,!0);e(pe),e(ue),e(z);var Je=i(z,2);{var je=ne=>{var B=ct(),te=a(B),re=a(te),I=i(a(re),2),N=a(I);{var oe=P=>{var U=Te(),_=xe(U);be(_,17,()=>t.session.trainingTypes,we,(D,G)=>{var Y=Ws(),M=a(Y,!0);e(Y),y(()=>l(M,s(G))),r(D,Y)}),r(P,U)},de=P=>{var U=Us();r(P,U)};c(N,P=>{t.session.trainingTypes&&t.session.trainingTypes.length>0&&!t.session.trainingTypes.includes("None")?P(oe):P(de,!1)})}e(I),e(re);var me=i(re,2);{var he=P=>{var U=Hs(),_=i(a(U),2),D=a(_,!0);e(_),e(U),y(()=>l(D,t.session.difficulty)),r(P,U)};c(me,P=>{t.session.difficulty&&P(he)})}var De=i(me,2);{var Ie=P=>{var U=Ks(),_=i(a(U),2),D=a(_);{var G=M=>{var ee=Te(),_e=xe(ee);be(_e,17,()=>t.session.categories,we,(Se,Ue)=>{var ke=Zs(),He=a(ke,!0);e(ke),y(()=>l(He,s(Ue))),r(Se,ke)}),r(M,ee)},Y=M=>{var ee=Js();r(M,ee)};c(D,M=>{t.session.categories.length>0&&!t.session.categories.includes("None")?M(G):M(Y,!1)})}e(_),e(U),r(P,U)};c(De,P=>{t.session.categories?.length&&P(Ie)})}var ze=i(De,2);{var Fe=P=>{var U=Xs(),_=i(a(U),2),D=a(_);{var G=M=>{var ee=Te(),_e=xe(ee);be(_e,17,()=>t.session.techniqueFocuses,we,(Se,Ue)=>{var ke=Ys(),He=a(ke,!0);e(ke),y(()=>l(He,s(Ue))),r(Se,ke)}),r(M,ee)},Y=M=>{var ee=Qs();r(M,ee)};c(D,M=>{t.session.techniqueFocuses.length>0&&!t.session.techniqueFocuses.includes("None")?M(G):M(Y,!1)})}e(_),e(U),r(P,U)};c(ze,P=>{t.session.techniqueFocuses?.length&&P(Fe)})}var Ve=i(ze,2);{var Ce=P=>{var U=at(),_=i(a(U),2),D=a(_);{var G=M=>{var ee=Te(),_e=xe(ee);be(_e,17,()=>t.session.energySystems,we,(Se,Ue)=>{var ke=$s(),He=a(ke,!0);e(ke),y(()=>l(He,s(Ue))),r(Se,ke)}),r(M,ee)},Y=M=>{var ee=et();r(M,ee)};c(D,M=>{t.session.energySystems.length>0&&!t.session.energySystems.includes("None")?M(G):M(Y,!1)})}e(_),e(U),r(P,U)};c(Ve,P=>{t.session.energySystems?.length&&P(Ce)})}var Le=i(Ve,2);{var oa=P=>{var U=it(),_=i(a(U),2),D=a(_);{var G=M=>{var ee=Te(),_e=xe(ee);be(_e,17,()=>t.session.wallAngles,we,(Se,Ue)=>{var ke=st(),He=a(ke,!0);e(ke),y(()=>l(He,s(Ue))),r(Se,ke)}),r(M,ee)},Y=M=>{var ee=tt();r(M,ee)};c(D,M=>{t.session.wallAngles.length>0&&!t.session.wallAngles.includes("None")?M(G):M(Y,!1)})}e(_),e(U),r(P,U)};c(Le,P=>{t.session.wallAngles?.length&&P(oa)})}e(te);var Ge=i(te,2),aa=a(Ge),Re=i(a(aa),2),sa=a(Re);e(Re);var da=i(Re,2),ta=a(da);e(da),e(aa);var Ae=i(aa,2),We=i(a(Ae),2),ca=a(We);e(We);var Oe=i(We,2),ia=a(Oe);e(Oe),e(Ae);var _a=i(Ae,2),Pe=i(a(_a),2),ba=a(Pe);e(Pe);var ua=i(Pe,2),qa=a(ua);e(ua),e(_a);var ga=i(_a,2);{var Ca=P=>{var U=rt(),_=i(a(U),2),D=a(_);e(_);var G=i(_,2),Y=a(G);e(G),e(U),y(()=>{Ee(D,`width: ${t.session.openGrip/5*100}%`),l(Y,`${t.session.openGrip??""}/5`)}),r(P,U)};c(ga,P=>{t.session.openGrip&&P(Ca)})}var Da=i(ga,2);{var za=P=>{var U=vt(),_=i(a(U),2),D=a(_);e(_);var G=i(_,2),Y=a(G);e(G),e(U),y(()=>{Ee(D,`width: ${t.session.crimpGrip/5*100}%`),l(Y,`${t.session.crimpGrip??""}/5`)}),r(P,U)};c(Da,P=>{t.session.crimpGrip&&P(za)})}var ya=i(Da,2);{var Sa=P=>{var U=nt(),_=i(a(U),2),D=a(_);e(_);var G=i(_,2),Y=a(G);e(G),e(U),y(()=>{Ee(D,`width: ${t.session.pinchGrip/5*100}%`),l(Y,`${t.session.pinchGrip??""}/5`)}),r(P,U)};c(ya,P=>{t.session.pinchGrip&&P(Sa)})}var xa=i(ya,2);{var La=P=>{var U=lt(),_=i(a(U),2),D=a(_);e(_);var G=i(_,2),Y=a(G);e(G),e(U),y(()=>{Ee(D,`width: ${t.session.sloperGrip/5*100}%`),l(Y,`${t.session.sloperGrip??""}/5`)}),r(P,U)};c(xa,P=>{t.session.sloperGrip&&P(La)})}var ka=i(xa,2);{var Ga=P=>{var U=ot(),_=i(a(U),2),D=a(_);e(_);var G=i(_,2),Y=a(G);e(G),e(U),y(()=>{Ee(D,`width: ${t.session.jugGrip/5*100}%`),l(Y,`${t.session.jugGrip??""}/5`)}),r(P,U)};c(ka,P=>{t.session.jugGrip&&P(Ga)})}e(Ge);var Ye=i(Ge,2),Qe=i(a(Ye),2),pa=a(Qe);be(pa,17,()=>t.session.climbs,we,(P,U,_)=>{{let D=ha(()=>t.session.climbingType==="Mixed");Rs(P,{get climb(){return s(U)},onDelete:()=>S(_),get showClimbType(){return s(D)}})}});var Na=i(pa,2);{var ja=P=>{var U=dt();r(P,U)};c(Na,P=>{t.session.climbs.length===0&&P(ja)})}e(Qe),e(Ye),e(B),y(()=>{Ee(sa,`width: ${t.session.fingerLoad/5*100}%`),l(ta,`${t.session.fingerLoad??""}/5`),Ee(ca,`width: ${t.session.shoulderLoad/5*100}%`),l(ia,`${t.session.shoulderLoad??""}/5`),Ee(ba,`width: ${t.session.forearmLoad/5*100}%`),l(qa,`${t.session.forearmLoad??""}/5`)}),Ze(3,B,()=>la,()=>({duration:200})),r(ne,B)};c(Je,ne=>{s(p)&&ne(je)})}e(T);var Ke=i(T,2);Va(Ke,{get isOpen(){return s(g)},title:"Delete Session",message:"Are you sure you want to delete this session and all its climbs? This cannot be undone.",onConfirm:u,onCancel:()=>o(g,!1)}),y((ne,B)=>{F=Be(T,1,"session-card svelte-7vqogn",null,F,{expanded:s(p)}),Ne(z,"aria-expanded",s(p)),l(J,ne),l(fe,B),l(E,t.session.location),l(se,t.session.climbingType),l(n,`${s(R)??""} climbs`),Ne(d,"title",`Finger Load: ${t.session.fingerLoad??""}`),l(q,t.session.fingerLoad),Ne($,"title",`Shoulder Load: ${t.session.shoulderLoad??""}`),l(qe,t.session.shoulderLoad),Ne(ge,"title",`Forearm Load: ${t.session.forearmLoad??""}`),l(ye,t.session.forearmLoad),l(Me,s(p)?"‚ñ≤":"‚ñº")},[()=>new Date(t.session.date).getDate(),()=>new Date(t.session.date).toLocaleDateString("en-GB",{month:"short"})]),r(x,O),na()}ea(["click","keydown"]);var ft=v('<div class="legend-item svelte-11p9lqi"><span class="l-icon svelte-11p9lqi"> </span> <span class="l-label svelte-11p9lqi"> </span></div>'),gt=v('<div class="legend-content svelte-11p9lqi"><div class="legend-grid svelte-11p9lqi"></div></div>'),pt=v('<div class="legend-container svelte-11p9lqi"><button class="legend-toggle svelte-11p9lqi"><span class="icon">‚ÑπÔ∏è</span> <span class="text">Icon Legend</span> <span class="chevron svelte-11p9lqi"> </span></button> <!></div>');function es(x){let t=Z(!1);const p=[{icon:"üëÅÔ∏è",label:"Onsight"},{icon:"‚ö°",label:"Flash"},{icon:"üî¥",label:"Redpoint"},{icon:"üõ†Ô∏è",label:"Dogged"},{icon:"‚ùå",label:"DNF"}];var g=pt(),h=a(g);h.__click=()=>o(t,!s(t));var b=i(a(h),4),u=a(b,!0);e(b),e(h);var S=i(h,2);{var R=k=>{var O=gt(),T=a(O);be(T,21,()=>p,we,(F,z)=>{var C=ft(),A=a(C),W=a(A,!0);e(A);var J=i(A,2),V=a(J,!0);e(J),e(C),y(()=>{l(W,s(z).icon),l(V,s(z).label)}),r(F,C)}),e(T),e(O),Ze(3,O,()=>la),r(k,O)};c(S,k=>{s(t)&&k(R)})}e(g),y(()=>{Ne(h,"aria-expanded",s(t)),l(u,s(t)?"‚ñº":"‚ñ∂")}),r(x,g)}ea(["click"]);var mt=v('<span class="spinner svelte-14fqz8w"></span> Fetching...',1),ht=v('<div class="error-banner svelte-14fqz8w"> </div>'),bt=v('<small class="svelte-14fqz8w">Try adjusting your filters.</small>'),yt=v('<div class="empty-state svelte-14fqz8w"><p class="svelte-14fqz8w">No indoor climbing sessions found.</p> <!></div>'),xt=v('<div class="view-container svelte-14fqz8w"><div class="view-header svelte-14fqz8w"><h2 class="view-title svelte-14fqz8w">üßó Indoor Climbing History</h2> <button class="fetch-btn svelte-14fqz8w" title="Fetch data from cloud"><!></button></div> <!> <!> <div class="info-bar svelte-14fqz8w"><div class="legend-wrapper svelte-14fqz8w"><!></div> <div class="load-key svelte-14fqz8w"><span class="key-label svelte-14fqz8w">Load:</span> <div class="key-item svelte-14fqz8w"><span class="dot finger svelte-14fqz8w"></span> Finger</div> <div class="key-item svelte-14fqz8w"><span class="dot shoulder svelte-14fqz8w"></span> Shoulder</div> <div class="key-item svelte-14fqz8w"><span class="dot forearm svelte-14fqz8w"></span> Forearm</div></div></div> <div class="sessions-list"><!> <!></div></div>');function wt(x,t){va(t,!0);let p=Z(fa([])),g=Z(fa([])),h=Z(!1),b=Z(""),u=Z(fa({startDate:"",endDate:"",location:"",sessionType:"",grade:""}));Qa(()=>{S()});function S(){const n=Ra("indoor_climb");o(p,n.sort((w,L)=>new Date(L.date).getTime()-new Date(w.date).getTime()),!0),T()}async function R(){o(h,!0),o(b,"");try{await Ba();const n=await cs();n.ok&&n.data?k(n.data):o(b,n.error||"Failed to fetch data",!0)}catch(n){o(b,n instanceof Error?n.message:"Unknown error",!0)}finally{o(h,!1)}}function k(n){const w=n.map(f=>({...f,activityType:"indoor_climb",createdAt:new Date().toISOString(),updatedAt:new Date().toISOString(),syncStatus:"synced",syncedAt:new Date().toISOString()}));Ma(w);const L=Ra("indoor_climb");o(p,L.sort((f,d)=>new Date(d.date).getTime()-new Date(f.date).getTime()),!0),T()}function O(n){o(u,n,!0),T()}function T(){o(g,s(p).filter(n=>{if(s(u).startDate&&n.date<s(u).startDate||s(u).endDate&&n.date>s(u).endDate||s(u).location&&n.location!==s(u).location||s(u).sessionType&&!n.trainingTypes?.includes(s(u).sessionType))return!1;if(s(u).grade){const w=s(u).grade.trim().toLowerCase();if(!n.climbs.some(f=>f.grade.trim().toLowerCase()===w))return!1}return!0}),!0)}var F=xt(),z=a(F),C=i(a(z),2);C.__click=R;var A=a(C);{var W=n=>{var w=mt();Fa(),r(n,w)},J=n=>{var w=wa("‚òÅÔ∏è Fetch Data");r(n,w)};c(A,n=>{s(h)?n(W):n(J,!1)})}e(C),e(z);var V=i(z,2);{var fe=n=>{var w=ht(),L=a(w,!0);e(w),y(()=>l(L,s(b))),Ze(3,w,()=>la),r(n,w)};c(V,n=>{s(b)&&n(fe)})}var ae=i(V,2);Ls(ae,{onFilterParamsChange:O});var j=i(ae,2),m=a(j),E=a(m);es(E),e(m),Fa(2),e(j);var K=i(j,2),Q=a(K);be(Q,17,()=>s(g),n=>n.id,(n,w)=>{ut(n,{get session(){return s(w)},onDelete:S})});var se=i(Q,2);{var X=n=>{var w=yt(),L=i(a(w),2);{var f=d=>{var q=bt();r(d,q)};c(L,d=>{s(p).length>0&&d(f)})}e(w),r(n,w)};c(se,n=>{s(g).length===0&&n(X)})}e(K),e(F),y(()=>C.disabled=s(h)),r(x,F),na()}ea(["click"]);var qt=v('<span class="chevron svelte-1frtlim">‚ñ≤</span>'),Dt=v('<span class="chevron svelte-1frtlim">‚ñº</span>'),St=v('<div class="input-with-action svelte-1frtlim"><input type="text" id="area-filter-text" placeholder="Type area name..." class="flat-left svelte-1frtlim"/> <button class="action-btn flat-right svelte-1frtlim" title="Back to list">‚úï</button></div>'),kt=v("<option> </option>"),Tt=v('<select id="area-filter" class="svelte-1frtlim"><option>All Areas</option><!><option>Other (Manual Entry)</option></select>'),Ft=v('<div class="input-with-action svelte-1frtlim"><input type="text" id="crag-filter-text" placeholder="Type crag name..." class="flat-left svelte-1frtlim"/> <button class="action-btn flat-right svelte-1frtlim" title="Back to list">‚úï</button></div>'),Ct=v("<option> </option>"),zt=v('<select id="crag-filter" class="svelte-1frtlim"><option>All Crags</option><!><option>Other (Manual Entry)</option></select>'),Lt=v('<input type="text" id="crag-filter-text" class="svelte-1frtlim"/>'),Gt=v("<option> </option>"),At=v('<div class="filter-body svelte-1frtlim"><div class="filter-grid svelte-1frtlim"><div class="filter-item svelte-1frtlim"><label for="start-date" class="svelte-1frtlim">Start Date</label> <input type="date" id="start-date" class="svelte-1frtlim"/></div> <div class="filter-item svelte-1frtlim"><label for="end-date" class="svelte-1frtlim">End Date</label> <input type="date" id="end-date" class="svelte-1frtlim"/></div> <div class="filter-item svelte-1frtlim"><label for="area-filter" class="svelte-1frtlim">Area</label> <!></div> <div class="filter-item svelte-1frtlim"><label for="crag-filter" class="svelte-1frtlim">Crag</label> <!></div> <div class="filter-item svelte-1frtlim"><label for="session-type-filter" class="svelte-1frtlim">Session Type</label> <select id="session-type-filter" class="svelte-1frtlim"><option>Any Type</option><!></select></div> <div class="filter-item svelte-1frtlim"><label for="grade-filter" class="svelte-1frtlim">Grade (Exact)</label> <input type="text" id="grade-filter" placeholder="e.g. 7a" class="svelte-1frtlim"/></div></div> <div class="filter-actions svelte-1frtlim"><button class="reset-btn svelte-1frtlim">Reset Filters</button></div></div>'),Ot=v('<div class="filter-container svelte-1frtlim"><button class="filter-header svelte-1frtlim"><div class="header-content svelte-1frtlim"><span class="icon svelte-1frtlim">üîç</span> <span class="title svelte-1frtlim">Filters</span> <!></div></button> <!></div>');function Et(x,t){va(t,!0);const p=_s(),g=["Projecting","Onsighting","Campusing","Repeaters","Fun","Volume"];let h=Z(!1),b=Z(""),u=Z(""),S=Z(""),R=Z(""),k=Z(""),O=Z(""),T=Z(!1),F=Z(!1),z=ha(()=>s(S)&&s(S)!=="Other"?us(s(S)):[]);function C(){s(S)==="Other"?(o(T,!0),o(S,"")):o(T,!1),o(R,""),o(F,!1),V()}function A(){s(R)==="Other"?(o(F,!0),o(R,"")):o(F,!1),V()}function W(){o(h,!s(h))}function J(){o(b,""),o(u,""),o(S,""),o(R,""),o(k,""),o(O,""),o(T,!1),o(F,!1),V()}function V(){t.onFilterParamsChange({startDate:s(b),endDate:s(u),area:s(S),crag:s(R),sessionType:s(k),grade:s(O)})}var fe=Ot(),ae=a(fe);ae.__click=W;var j=a(ae),m=i(a(j),4);{var E=X=>{var n=qt();r(X,n)},K=X=>{var n=Dt();r(X,n)};c(m,X=>{s(h)?X(E):X(K,!1)})}e(j),e(ae);var Q=i(ae,2);{var se=X=>{var n=At(),w=a(n),L=a(w),f=i(a(L),2);Xe(f),f.__change=V,e(L);var d=i(L,2),q=i(a(d),2);Xe(q),q.__change=V,e(d);var $=i(d,2),qe=i(a($),2);{var ge=B=>{var te=St(),re=a(te);Xe(re),re.__input=V;var I=i(re,2);I.__click=()=>{o(T,!1),o(S,""),V()},e(te),$e(re,()=>s(S),N=>o(S,N)),r(B,te)},ye=B=>{var te=Tt();te.__change=C;var re=a(te);re.value=re.__value="";var I=i(re);be(I,17,()=>p,we,(oe,de)=>{var me=kt(),he=a(me,!0);e(me);var De={};y(()=>{l(he,s(de)),De!==(De=s(de))&&(me.value=(me.__value=s(de))??"")}),r(oe,me)});var N=i(I);N.value=N.__value="Other",e(te),Ta(te,()=>s(S),oe=>o(S,oe)),r(B,te)};c(qe,B=>{s(T)?B(ge):B(ye,!1)})}e($);var ue=i($,2),ve=i(a(ue),2);{var ie=B=>{var te=Ft(),re=a(te);Xe(re),re.__input=V;var I=i(re,2);I.__click=()=>{o(F,!1),o(R,""),V()},e(te),$e(re,()=>s(R),N=>o(R,N)),r(B,te)},ce=B=>{var te=Te(),re=xe(te);{var I=oe=>{var de=zt();de.__change=A;var me=a(de);me.value=me.__value="";var he=i(me);be(he,17,()=>s(z),we,(Ie,ze)=>{var Fe=Ct(),Ve=a(Fe,!0);e(Fe);var Ce={};y(()=>{l(Ve,s(ze)),Ce!==(Ce=s(ze))&&(Fe.value=(Fe.__value=s(ze))??"")}),r(Ie,Fe)});var De=i(he);De.value=De.__value="Other",e(de),Ta(de,()=>s(R),Ie=>o(R,Ie)),r(oe,de)},N=oe=>{var de=Lt();Xe(de),de.__input=V,y(()=>{Ne(de,"placeholder",s(S)?"Filter crag...":"Select area first"),de.disabled=!s(T)&&!s(S)}),$e(de,()=>s(R),me=>o(R,me)),r(oe,de)};c(re,oe=>{!s(T)&&s(S)&&s(z).length>0?oe(I):oe(N,!1)},!0)}r(B,te)};c(ve,B=>{s(F)?B(ie):B(ce,!1)})}e(ue);var H=i(ue,2),le=i(a(H),2);le.__change=V;var pe=a(le);pe.value=pe.__value="";var Me=i(pe);be(Me,17,()=>g,we,(B,te)=>{var re=Gt(),I=a(re,!0);e(re);var N={};y(()=>{l(I,s(te)),N!==(N=s(te))&&(re.value=(re.__value=s(te))??"")}),r(B,re)}),e(le),e(H);var Je=i(H,2),je=i(a(Je),2);Xe(je),je.__input=V,e(Je),e(w);var Ke=i(w,2),ne=a(Ke);ne.__click=J,e(Ke),e(n),$e(f,()=>s(b),B=>o(b,B)),$e(q,()=>s(u),B=>o(u,B)),Ta(le,()=>s(k),B=>o(k,B)),$e(je,()=>s(O),B=>o(O,B)),Ze(3,n,()=>la,()=>({duration:200})),r(X,n)};c(Q,X=>{s(h)&&X(se)})}e(fe),y(()=>Ne(ae,"aria-expanded",s(h))),r(x,fe),na()}ea(["click","change","input"]);var Nt=v('<span class="climb-type-tag svelte-1k6anfh"> </span>'),jt=v('<span class="notes-preview svelte-1k6anfh"> </span>'),It=v('<span class="attempts-count svelte-1k6anfh"> </span>'),Rt=v('<div class="detail-row svelte-1k6anfh"><span class="label svelte-1k6anfh">Notes:</span> <p class="notes svelte-1k6anfh"> </p></div>'),Pt=v('<p class="empty-notes svelte-1k6anfh">No notes for this climb.</p>'),Bt=v('<div class="climb-details svelte-1k6anfh"><!> <div class="tags svelte-1k6anfh"><span class="tag type svelte-1k6anfh"> </span> <span class="tag attempt-text svelte-1k6anfh"> </span></div></div>'),Mt=v('<div><div class="climb-header svelte-1k6anfh" role="button" tabindex="0"><div class="climb-main-info svelte-1k6anfh"><span> </span> <span class="climb-name svelte-1k6anfh"> </span> <!> <!></div> <div class="climb-meta svelte-1k6anfh"><span><span class="icon svelte-1k6anfh"> </span> <!></span> <button class="delete-btn svelte-1k6anfh" aria-label="Delete climb" title="Delete climb">üóëÔ∏è</button> <span class="chevron svelte-1k6anfh"> </span></div></div> <!></div>');function Vt(x,t){va(t,!0);let p=Ea(t,"showClimbType",3,!1),g=Z(!1);function h(){o(g,!s(g))}function b(d){d.stopPropagation(),t.onDelete()}const u={Flash:"‚ö°",Onsight:"üëÅÔ∏è",Redpoint:"üî¥",Dogged:"üõ†Ô∏è",DNF:"‚ùå"};var S=Mt();let R;var k=a(S);k.__click=h,k.__keydown=d=>(d.key==="Enter"||d.key===" ")&&h();var O=a(k),T=a(O);let F;var z=a(T,!0);e(T);var C=i(T,2),A=a(C,!0);e(C);var W=i(C,2);{var J=d=>{var q=Nt(),$=a(q,!0);e(q),y(()=>l($,t.climb.isSport?"Sport":"Boulder")),r(d,q)};c(W,d=>{p()&&d(J)})}var V=i(W,2);{var fe=d=>{var q=jt(),$=a(q);e(q),y(()=>l($,`- ${t.climb.notes??""}`)),r(d,q)};c(V,d=>{!s(g)&&t.climb.notes&&d(fe)})}e(O);var ae=i(O,2),j=a(ae);let m;var E=a(j),K=a(E,!0);e(E);var Q=i(E,2);{var se=d=>{var q=It(),$=a(q,!0);e(q),y(()=>l($,t.climb.attemptsNum)),r(d,q)};c(Q,d=>{t.climb.attemptType!=="Flash"&&t.climb.attemptType!=="Onsight"&&d(se)})}e(j);var X=i(j,2);X.__click=b;var n=i(X,2),w=a(n,!0);e(n),e(ae),e(k);var L=i(k,2);{var f=d=>{var q=Bt(),$=a(q);{var qe=H=>{var le=Rt(),pe=i(a(le),2),Me=a(pe,!0);e(pe),e(le),y(()=>l(Me,t.climb.notes)),r(H,le)},ge=H=>{var le=Pt();r(H,le)};c($,H=>{t.climb.notes?H(qe):H(ge,!1)})}var ye=i($,2),ue=a(ye),ve=a(ue,!0);e(ue);var ie=i(ue,2),ce=a(ie,!0);e(ie),e(ye),e(q),y(()=>{l(ve,t.climb.isSport?"Sport":"Boulder"),l(ce,t.climb.attemptType)}),Ze(3,q,()=>la,()=>({duration:150})),r(d,q)};c(L,d=>{s(g)&&d(f)})}e(S),y(()=>{R=Be(S,1,"climb-entry svelte-1k6anfh",null,R,{expanded:s(g)}),Ne(k,"aria-expanded",s(g)),F=Be(T,1,"grade-badge svelte-1k6anfh",null,F,{sport:t.climb.isSport}),l(z,t.climb.grade),l(A,t.climb.name||"Unnamed Route"),m=Be(j,1,"attempt-type svelte-1k6anfh",null,m,{flash:t.climb.attemptType==="Flash"}),l(K,u[t.climb.attemptType]||t.climb.attemptType),l(w,s(g)?"‚ñ≤":"‚ñº")}),r(x,S),na()}ea(["click","keydown"]);var Wt=v('<div class="sector-meta svelte-d5hg2r"> </div>'),Ut=v('<span class="stat svelte-d5hg2r"> </span>'),Ht=v('<span class="status-icon pending svelte-d5hg2r" title="Waiting to sync">üîÑ</span>'),Zt=v('<span class="status-icon error svelte-d5hg2r" title="Sync error">‚ö†Ô∏è</span>'),Jt=v('<span class="chip svelte-d5hg2r"> </span>'),Kt=v('<span class="text-none svelte-d5hg2r">None</span>'),Yt=v('<div class="detail-item svelte-d5hg2r"><span class="label svelte-d5hg2r">Difficulty</span> <span class="value svelte-d5hg2r"> </span></div>'),Qt=v('<span class="chip svelte-d5hg2r"> </span>'),Xt=v('<span class="text-none svelte-d5hg2r">None</span>'),$t=v('<div class="detail-item svelte-d5hg2r"><span class="label svelte-d5hg2r">Category</span> <div class="value-chips svelte-d5hg2r"><!></div></div>'),ei=v('<span class="chip svelte-d5hg2r"> </span>'),ai=v('<span class="text-none svelte-d5hg2r">None</span>'),si=v('<div class="detail-item svelte-d5hg2r"><span class="label svelte-d5hg2r">Focus</span> <div class="value-chips svelte-d5hg2r"><!></div></div>'),ti=v('<span class="chip svelte-d5hg2r"> </span>'),ii=v('<span class="text-none svelte-d5hg2r">None</span>'),ri=v('<div class="detail-item svelte-d5hg2r"><span class="label svelte-d5hg2r">Energy System</span> <div class="value-chips svelte-d5hg2r"><!></div></div>'),vi=v('<div class="metric svelte-d5hg2r"><span class="label svelte-d5hg2r">Open Grip</span> <div class="bar-container svelte-d5hg2r"><div class="bar-fill svelte-d5hg2r"></div></div> <span class="score svelte-d5hg2r"> </span></div>'),ni=v('<div class="metric svelte-d5hg2r"><span class="label svelte-d5hg2r">Crimp Grip</span> <div class="bar-container svelte-d5hg2r"><div class="bar-fill svelte-d5hg2r"></div></div> <span class="score svelte-d5hg2r"> </span></div>'),li=v('<div class="metric svelte-d5hg2r"><span class="label svelte-d5hg2r">Pinch Grip</span> <div class="bar-container svelte-d5hg2r"><div class="bar-fill svelte-d5hg2r"></div></div> <span class="score svelte-d5hg2r"> </span></div>'),oi=v('<div class="metric svelte-d5hg2r"><span class="label svelte-d5hg2r">Sloper Grip</span> <div class="bar-container svelte-d5hg2r"><div class="bar-fill svelte-d5hg2r"></div></div> <span class="score svelte-d5hg2r"> </span></div>'),di=v('<div class="metric svelte-d5hg2r"><span class="label svelte-d5hg2r">Jug Grip</span> <div class="bar-container svelte-d5hg2r"><div class="bar-fill svelte-d5hg2r"></div></div> <span class="score svelte-d5hg2r"> </span></div>'),ci=v('<p class="no-climbs svelte-d5hg2r">No climbs logged for this session.</p>'),_i=v('<div class="card-body svelte-d5hg2r"><div class="details-grid svelte-d5hg2r"><div class="detail-item svelte-d5hg2r"><span class="label svelte-d5hg2r">Training Type</span> <div class="value-chips svelte-d5hg2r"><!></div></div> <!> <!> <!> <!></div> <div class="metrics-container svelte-d5hg2r"><div class="metric svelte-d5hg2r"><span class="label svelte-d5hg2r">Finger Load</span> <div class="bar-container svelte-d5hg2r"><div class="bar-fill svelte-d5hg2r"></div></div> <span class="score svelte-d5hg2r"> </span></div> <div class="metric svelte-d5hg2r"><span class="label svelte-d5hg2r">Shoulder Load</span> <div class="bar-container svelte-d5hg2r"><div class="bar-fill svelte-d5hg2r"></div></div> <span class="score svelte-d5hg2r"> </span></div> <div class="metric svelte-d5hg2r"><span class="label svelte-d5hg2r">Forearm Load</span> <div class="bar-container svelte-d5hg2r"><div class="bar-fill svelte-d5hg2r"></div></div> <span class="score svelte-d5hg2r"> </span></div> <!> <!> <!> <!> <!></div> <div class="climbs-list svelte-d5hg2r"><h4 class="svelte-d5hg2r">Climbs</h4> <div class="climbs-container svelte-d5hg2r"><!> <!></div></div></div>'),ui=v('<div><div class="card-header svelte-d5hg2r" role="button" tabindex="0"><div class="header-main svelte-d5hg2r"><div class="date-badge svelte-d5hg2r"><span class="day svelte-d5hg2r"> </span> <span class="month svelte-d5hg2r"> </span></div> <div class="session-info svelte-d5hg2r"><div class="session-text svelte-d5hg2r"><h3 class="location svelte-d5hg2r"> <!></h3> <!> <div class="session-meta svelte-d5hg2r"><span class="type-tag svelte-d5hg2r"> </span> <span class="stat svelte-d5hg2r"> </span> <!></div></div> <div class="load-summary svelte-d5hg2r"><div class="load-badge finger svelte-d5hg2r"> </div> <div class="load-badge shoulder svelte-d5hg2r"> </div> <div class="load-badge forearm svelte-d5hg2r"> </div></div></div></div> <div class="header-actions svelte-d5hg2r"><div class="header-status svelte-d5hg2r"><!></div> <button class="btn-icon delete-session svelte-d5hg2r" title="Delete Session">üóëÔ∏è</button> <span class="chevron svelte-d5hg2r"> </span></div></div> <!></div> <!>',1);function fi(x,t){va(t,!0);let p=Z(!1),g=Z(!1);function h(){o(p,!s(p))}function b(){o(g,!0)}function u(){Pa(t.session.id),o(g,!1),t.onDelete()}function S(I){const N=[...t.session.climbs];N.splice(I,1),Ya(t.session.id,{climbs:N}),t.onDelete()}let R=ha(()=>t.session.climbs.length),k=ha(()=>t.session.climbs.reduce((I,N)=>{const oe=parseInt(N.grade.replace(/\D/g,""))||0,de=parseInt(I.replace(/\D/g,""))||0;return oe>de?N.grade:I},"V0/4a"));var O=ui(),T=xe(O);let F;var z=a(T);z.__click=h,z.__keydown=I=>I.key==="Enter"&&h();var C=a(z),A=a(C),W=a(A),J=a(W,!0);e(W);var V=i(W,2),fe=a(V,!0);e(V),e(A);var ae=i(A,2),j=a(ae),m=a(j),E=a(m),K=i(E);{var Q=I=>{var N=wa();y(()=>l(N,`- ${t.session.crag??""}`)),r(I,N)};c(K,I=>{t.session.crag&&I(Q)})}e(m);var se=i(m,2);{var X=I=>{var N=Wt(),oe=a(N);e(N),y(()=>l(oe,`üìç ${t.session.sector??""}`)),r(I,N)};c(se,I=>{t.session.sector&&I(X)})}var n=i(se,2),w=a(n),L=a(w,!0);e(w);var f=i(w,2),d=a(f);e(f);var q=i(f,2);{var $=I=>{var N=Ut(),oe=a(N);e(N),y(()=>l(oe,`Max: ${s(k)??""}`)),r(I,N)};c(q,I=>{s(R)>0&&I($)})}e(n),e(j);var qe=i(j,2),ge=a(qe),ye=a(ge,!0);e(ge);var ue=i(ge,2),ve=a(ue,!0);e(ue);var ie=i(ue,2),ce=a(ie,!0);e(ie),e(qe),e(ae),e(C);var H=i(C,2),le=a(H),pe=a(le);{var Me=I=>{var N=Ht();r(I,N)},Je=I=>{var N=Te(),oe=xe(N);{var de=me=>{var he=Zt();r(me,he)};c(oe,me=>{t.session.syncStatus==="error"&&me(de)},!0)}r(I,N)};c(pe,I=>{t.session.syncStatus==="pending"?I(Me):I(Je,!1)})}e(le);var je=i(le,2);je.__click=I=>{I.stopPropagation(),b()};var Ke=i(je,2),ne=a(Ke,!0);e(Ke),e(H),e(z);var B=i(z,2);{var te=I=>{var N=_i(),oe=a(N),de=a(oe),me=i(a(de),2),he=a(me);{var De=_=>{var D=Te(),G=xe(D);be(G,17,()=>t.session.trainingTypes,we,(Y,M)=>{var ee=Jt(),_e=a(ee,!0);e(ee),y(()=>l(_e,s(M))),r(Y,ee)}),r(_,D)},Ie=_=>{var D=Kt();r(_,D)};c(he,_=>{t.session.trainingTypes&&t.session.trainingTypes.length>0&&!t.session.trainingTypes.includes("None")?_(De):_(Ie,!1)})}e(me),e(de);var ze=i(de,2);{var Fe=_=>{var D=Yt(),G=i(a(D),2),Y=a(G,!0);e(G),e(D),y(()=>l(Y,t.session.difficulty)),r(_,D)};c(ze,_=>{t.session.difficulty&&_(Fe)})}var Ve=i(ze,2);{var Ce=_=>{var D=$t(),G=i(a(D),2),Y=a(G);{var M=_e=>{var Se=Te(),Ue=xe(Se);be(Ue,17,()=>t.session.categories,we,(ke,He)=>{var ra=Qt(),Aa=a(ra,!0);e(ra),y(()=>l(Aa,s(He))),r(ke,ra)}),r(_e,Se)},ee=_e=>{var Se=Xt();r(_e,Se)};c(Y,_e=>{t.session.categories.length>0&&!t.session.categories.includes("None")?_e(M):_e(ee,!1)})}e(G),e(D),r(_,D)};c(Ve,_=>{t.session.categories?.length&&_(Ce)})}var Le=i(Ve,2);{var oa=_=>{var D=si(),G=i(a(D),2),Y=a(G);{var M=_e=>{var Se=Te(),Ue=xe(Se);be(Ue,17,()=>t.session.techniqueFocuses,we,(ke,He)=>{var ra=ei(),Aa=a(ra,!0);e(ra),y(()=>l(Aa,s(He))),r(ke,ra)}),r(_e,Se)},ee=_e=>{var Se=ai();r(_e,Se)};c(Y,_e=>{t.session.techniqueFocuses.length>0&&!t.session.techniqueFocuses.includes("None")?_e(M):_e(ee,!1)})}e(G),e(D),r(_,D)};c(Le,_=>{t.session.techniqueFocuses?.length&&_(oa)})}var Ge=i(Le,2);{var aa=_=>{var D=ri(),G=i(a(D),2),Y=a(G);{var M=_e=>{var Se=Te(),Ue=xe(Se);be(Ue,17,()=>t.session.energySystems,we,(ke,He)=>{var ra=ti(),Aa=a(ra,!0);e(ra),y(()=>l(Aa,s(He))),r(ke,ra)}),r(_e,Se)},ee=_e=>{var Se=ii();r(_e,Se)};c(Y,_e=>{t.session.energySystems.length>0&&!t.session.energySystems.includes("None")?_e(M):_e(ee,!1)})}e(G),e(D),r(_,D)};c(Ge,_=>{t.session.energySystems?.length&&_(aa)})}e(oe);var Re=i(oe,2),sa=a(Re),da=i(a(sa),2),ta=a(da);e(da);var Ae=i(da,2),We=a(Ae);e(Ae),e(sa);var ca=i(sa,2),Oe=i(a(ca),2),ia=a(Oe);e(Oe);var _a=i(Oe,2),Pe=a(_a);e(_a),e(ca);var ba=i(ca,2),ua=i(a(ba),2),qa=a(ua);e(ua);var ga=i(ua,2),Ca=a(ga);e(ga),e(ba);var Da=i(ba,2);{var za=_=>{var D=vi(),G=i(a(D),2),Y=a(G);e(G);var M=i(G,2),ee=a(M);e(M),e(D),y(()=>{Ee(Y,`width: ${t.session.openGrip/5*100}%`),l(ee,`${t.session.openGrip??""}/5`)}),r(_,D)};c(Da,_=>{t.session.openGrip&&_(za)})}var ya=i(Da,2);{var Sa=_=>{var D=ni(),G=i(a(D),2),Y=a(G);e(G);var M=i(G,2),ee=a(M);e(M),e(D),y(()=>{Ee(Y,`width: ${t.session.crimpGrip/5*100}%`),l(ee,`${t.session.crimpGrip??""}/5`)}),r(_,D)};c(ya,_=>{t.session.crimpGrip&&_(Sa)})}var xa=i(ya,2);{var La=_=>{var D=li(),G=i(a(D),2),Y=a(G);e(G);var M=i(G,2),ee=a(M);e(M),e(D),y(()=>{Ee(Y,`width: ${t.session.pinchGrip/5*100}%`),l(ee,`${t.session.pinchGrip??""}/5`)}),r(_,D)};c(xa,_=>{t.session.pinchGrip&&_(La)})}var ka=i(xa,2);{var Ga=_=>{var D=oi(),G=i(a(D),2),Y=a(G);e(G);var M=i(G,2),ee=a(M);e(M),e(D),y(()=>{Ee(Y,`width: ${t.session.sloperGrip/5*100}%`),l(ee,`${t.session.sloperGrip??""}/5`)}),r(_,D)};c(ka,_=>{t.session.sloperGrip&&_(Ga)})}var Ye=i(ka,2);{var Qe=_=>{var D=di(),G=i(a(D),2),Y=a(G);e(G);var M=i(G,2),ee=a(M);e(M),e(D),y(()=>{Ee(Y,`width: ${t.session.jugGrip/5*100}%`),l(ee,`${t.session.jugGrip??""}/5`)}),r(_,D)};c(Ye,_=>{t.session.jugGrip&&_(Qe)})}e(Re);var pa=i(Re,2),Na=i(a(pa),2),ja=a(Na);be(ja,17,()=>t.session.climbs,we,(_,D,G)=>{{let Y=ha(()=>t.session.climbingType==="Mixed");Vt(_,{get climb(){return s(D)},onDelete:()=>S(G),get showClimbType(){return s(Y)}})}});var P=i(ja,2);{var U=_=>{var D=ci();r(_,D)};c(P,_=>{t.session.climbs.length===0&&_(U)})}e(Na),e(pa),e(N),y(()=>{Ee(ta,`width: ${t.session.fingerLoad/5*100}%`),l(We,`${t.session.fingerLoad??""}/5`),Ee(ia,`width: ${t.session.shoulderLoad/5*100}%`),l(Pe,`${t.session.shoulderLoad??""}/5`),Ee(qa,`width: ${t.session.forearmLoad/5*100}%`),l(Ca,`${t.session.forearmLoad??""}/5`)}),Ze(3,N,()=>la,()=>({duration:200})),r(I,N)};c(B,I=>{s(p)&&I(te)})}e(T);var re=i(T,2);Va(re,{get isOpen(){return s(g)},title:"Delete Session",message:"Are you sure you want to delete this session and all its climbs? This cannot be undone.",onConfirm:u,onCancel:()=>o(g,!1)}),y((I,N)=>{F=Be(T,1,"session-card svelte-d5hg2r",null,F,{expanded:s(p)}),Ne(z,"aria-expanded",s(p)),l(J,I),l(fe,N),l(E,`${t.session.area??""} `),l(L,t.session.climbingType),l(d,`${s(R)??""} climbs`),Ne(ge,"title",`Finger Load: ${t.session.fingerLoad??""}`),l(ye,t.session.fingerLoad),Ne(ue,"title",`Shoulder Load: ${t.session.shoulderLoad??""}`),l(ve,t.session.shoulderLoad),Ne(ie,"title",`Forearm Load: ${t.session.forearmLoad??""}`),l(ce,t.session.forearmLoad),l(ne,s(p)?"‚ñ≤":"‚ñº")},[()=>new Date(t.session.date).getDate(),()=>new Date(t.session.date).toLocaleDateString(void 0,{month:"short"})]),r(x,O),na()}ea(["click","keydown"]);var gi=v('<span class="spinner svelte-1s7jdlh"></span> Fetching...',1),pi=v('<div class="error-banner svelte-1s7jdlh"> </div>'),mi=v('<small class="svelte-1s7jdlh">Try adjusting your filters.</small>'),hi=v('<div class="empty-state svelte-1s7jdlh"><p class="svelte-1s7jdlh">No outdoor climbing sessions found.</p> <!></div>'),bi=v('<div class="view-container svelte-1s7jdlh"><div class="view-header svelte-1s7jdlh"><h2 class="view-title svelte-1s7jdlh">‚õ∞Ô∏è Outdoor Climbing History</h2> <button class="fetch-btn svelte-1s7jdlh" title="Fetch data from cloud"><!></button></div> <!> <!> <div class="info-bar svelte-1s7jdlh"><div class="legend-wrapper svelte-1s7jdlh"><!></div> <div class="load-key svelte-1s7jdlh"><span class="key-label svelte-1s7jdlh">Load:</span> <div class="key-item svelte-1s7jdlh"><span class="dot finger svelte-1s7jdlh"></span> Finger</div> <div class="key-item svelte-1s7jdlh"><span class="dot shoulder svelte-1s7jdlh"></span> Shoulder</div> <div class="key-item svelte-1s7jdlh"><span class="dot forearm svelte-1s7jdlh"></span> Forearm</div></div></div> <div class="sessions-list"><!> <!></div></div>');function yi(x,t){va(t,!0);let p=Z(fa([])),g=Z(fa([])),h=Z(!1),b=Z(""),u=Z(fa({startDate:"",endDate:"",area:"",crag:"",sessionType:"",grade:""}));Qa(()=>{S()});function S(){const n=Ra("outdoor_climb");o(p,n.sort((w,L)=>new Date(L.date).getTime()-new Date(w.date).getTime()),!0),T()}async function R(){o(h,!0),o(b,"");try{await Ba();const n=await fs();n.ok&&n.data?k(n.data):o(b,n.error||"Failed to fetch data",!0)}catch(n){o(b,n instanceof Error?n.message:"Unknown error",!0)}finally{o(h,!1)}}function k(n){const w=n.map(f=>({...f,activityType:"outdoor_climb",createdAt:new Date().toISOString(),updatedAt:new Date().toISOString(),syncStatus:"synced",syncedAt:new Date().toISOString()}));Ma(w);const L=Ra("outdoor_climb");o(p,L.sort((f,d)=>new Date(d.date).getTime()-new Date(f.date).getTime()),!0),T()}function O(n){o(u,n,!0),T()}function T(){o(g,s(p).filter(n=>{if(s(u).startDate&&n.date<s(u).startDate||s(u).endDate&&n.date>s(u).endDate||s(u).area&&!n.area.toLowerCase().includes(s(u).area.toLowerCase())||s(u).crag&&!n.crag.toLowerCase().includes(s(u).crag.toLowerCase())||s(u).sessionType&&!n.trainingTypes?.includes(s(u).sessionType))return!1;if(s(u).grade){const w=s(u).grade.trim().toLowerCase();if(!n.climbs.some(f=>f.grade.trim().toLowerCase()===w))return!1}return!0}),!0)}var F=bi(),z=a(F),C=i(a(z),2);C.__click=R;var A=a(C);{var W=n=>{var w=gi();Fa(),r(n,w)},J=n=>{var w=wa("‚òÅÔ∏è Fetch Data");r(n,w)};c(A,n=>{s(h)?n(W):n(J,!1)})}e(C),e(z);var V=i(z,2);{var fe=n=>{var w=pi(),L=a(w,!0);e(w),y(()=>l(L,s(b))),Ze(3,w,()=>la),r(n,w)};c(V,n=>{s(b)&&n(fe)})}var ae=i(V,2);Et(ae,{onFilterParamsChange:O});var j=i(ae,2),m=a(j),E=a(m);es(E),e(m),Fa(2),e(j);var K=i(j,2),Q=a(K);be(Q,17,()=>s(g),n=>n.id,(n,w)=>{fi(n,{get session(){return s(w)},onDelete:S})});var se=i(Q,2);{var X=n=>{var w=hi(),L=i(a(w),2);{var f=d=>{var q=mi();r(d,q)};c(L,d=>{s(p).length>0&&d(f)})}e(w),r(n,w)};c(se,n=>{s(g).length===0&&n(X)})}e(K),e(F),y(()=>C.disabled=s(h)),r(x,F),na()}ea(["click"]);var xi=v('<div class="view-container svelte-133enjd"><h2 class="view-title svelte-133enjd">üèãÔ∏è Gym Session History</h2> <p class="placeholder-text svelte-133enjd">Your gym sessions will appear here</p></div>');function wi(x){var t=xi();r(x,t)}var qi=v('<span class="spinner svelte-1szs0u9"></span> Fetching...',1),Di=v('<div class="loading svelte-1szs0u9">Loading sessions...</div>'),Si=v('<div class="empty-state svelte-1szs0u9"><!></div>'),ki=v('<span class="set-tag svelte-1szs0u9"> <span class="x svelte-1szs0u9">x</span> </span>'),Ti=v('<div class="ex-notes svelte-1szs0u9"> </div>'),Fi=v('<div class="exercise-item svelte-1szs0u9"><div class="ex-header svelte-1szs0u9"><span class="ex-name svelte-1szs0u9"> </span> <span class="ex-grip svelte-1szs0u9"> </span></div> <div class="ex-sets svelte-1szs0u9"></div> <!></div>'),Ci=v('<div class="card-body svelte-1szs0u9"><div class="exercises-list svelte-1szs0u9"></div></div>'),zi=v('<div><div class="card-header" role="button" tabindex="0"><div class="header-main"><span class="session-date svelte-1szs0u9"> </span> <span class="meta svelte-1szs0u9"><!> </span></div> <div class="header-status svelte-1szs0u9"><span>‚óè</span> <button class="btn-icon delete-btn svelte-1szs0u9" title="Delete Session">üóëÔ∏è</button> <span class="chevron svelte-1szs0u9"> </span></div></div> <!></div>'),Li=v('<div class="timeline svelte-1szs0u9"></div>'),Gi=v('<div class="view-content svelte-1szs0u9"><div class="header svelte-1szs0u9"><h3 class="svelte-1szs0u9">ü§è Fingerboarding Log</h3> <button class="fetch-btn svelte-1szs0u9" title="Fetch data from cloud"><!></button></div> <div class="filters svelte-1szs0u9"><div class="filter-group svelte-1szs0u9"><label for="start-date" class="svelte-1szs0u9">From</label> <input type="date" id="start-date" class="svelte-1szs0u9"/></div> <div class="filter-group svelte-1szs0u9"><label for="end-date" class="svelte-1szs0u9">To</label> <input type="date" id="end-date" class="svelte-1szs0u9"/></div></div> <!></div> <!>',1);function Ai(x,t){va(t,!0);let p=Z(fa([])),g=Z(!0),h=Z(""),b=Z(""),u=Z(fa(new Set)),S=Z(!1),R=Z(null);function k(f){o(R,f,!0),o(S,!0)}function O(){s(R)&&(Pa(s(R)),o(R,null),o(S,!1),o(p,Wa().sort((f,d)=>new Date(d.date).getTime()-new Date(f.date).getTime()),!0))}async function T(){o(g,!0),o(p,Wa().sort((f,d)=>new Date(d.date).getTime()-new Date(f.date).getTime()),!0);try{await Ba();const f=await gs();if(f.ok&&f.data){const d=f.data.map(q=>({...q,activityType:"fingerboarding",createdAt:q.createdAt||new Date().toISOString(),updatedAt:q.updatedAt||new Date().toISOString(),syncStatus:"synced"}));Ma(d),o(p,Wa().sort((q,$)=>new Date($.date).getTime()-new Date(q.date).getTime()),!0)}}catch(f){console.error("Failed to sync",f)}finally{o(g,!1)}}T();let F=ha(()=>s(p).filter(f=>!(s(h)&&new Date(f.date)<new Date(s(h))||s(b)&&new Date(f.date)>new Date(s(b)))));function z(f){s(u).has(f)?s(u).delete(f):s(u).add(f),o(u,new Set(s(u)),!0)}function C(f){return f.exercises.reduce((d,q)=>d+q.details.length,0)}var A=Gi(),W=xe(A),J=a(W),V=i(a(J),2);V.__click=T;var fe=a(V);{var ae=f=>{var d=qi();Fa(),r(f,d)},j=f=>{var d=wa("‚òÅÔ∏è Fetch Data");r(f,d)};c(fe,f=>{s(g)?f(ae):f(j,!1)})}e(V),e(J);var m=i(J,2),E=a(m),K=i(a(E),2);Xe(K),e(E);var Q=i(E,2),se=i(a(Q),2);Xe(se),e(Q),e(m);var X=i(m,2);{var n=f=>{var d=Di();r(f,d)},w=f=>{var d=Te(),q=xe(d);{var $=ge=>{var ye=Si(),ue=a(ye);{var ve=ce=>{var H=wa("No sessions match filter.");r(ce,H)},ie=ce=>{var H=wa("No fingerboarding sessions logged yet.");r(ce,H)};c(ue,ce=>{s(p).length>0?ce(ve):ce(ie,!1)})}e(ye),r(ge,ye)},qe=ge=>{var ye=Li();be(ye,21,()=>s(F),we,(ue,ve)=>{var ie=zi();let ce;var H=a(ie);H.__click=()=>z(s(ve).id),H.__keydown=he=>he.key==="Enter"&&z(s(ve).id);var le=a(H),pe=a(le),Me=a(pe,!0);e(pe);var Je=i(pe,2),je=a(Je);{var Ke=he=>{var De=wa();y(()=>l(De,`${s(ve).location??""} ¬∑`)),r(he,De)};c(je,he=>{s(ve).location&&s(ve).location!=="N/A"&&s(ve).location!=="Home"&&he(Ke)})}var ne=i(je);e(Je),e(le);var B=i(le,2),te=a(B);let re;var I=i(te,2);I.__click=he=>{he.stopPropagation(),k(s(ve).id)};var N=i(I,2),oe=a(N,!0);e(N),e(B),e(H);var de=i(H,2);{var me=he=>{var De=Ci(),Ie=a(De);be(Ie,21,()=>s(ve).exercises,we,(ze,Fe)=>{var Ve=Fi(),Ce=a(Ve),Le=a(Ce),oa=a(Le,!0);e(Le);var Ge=i(Le,2),aa=a(Ge,!0);e(Ge),e(Ce);var Re=i(Ce,2);be(Re,21,()=>s(Fe).details,we,(ta,Ae)=>{var We=ki(),ca=a(We),Oe=i(ca,2);e(We),y(()=>{l(ca,`${s(Ae).weight>0?`+${s(Ae).weight}kg`:"BW"} `),l(Oe,` ${s(Ae).reps??""}s/reps`)}),r(ta,We)}),e(Re);var sa=i(Re,2);{var da=ta=>{var Ae=Ti(),We=a(Ae);e(Ae),y(()=>l(We,`"${s(Fe).notes??""}"`)),r(ta,Ae)};c(sa,ta=>{s(Fe).notes&&ta(da)})}e(Ve),y(()=>{l(oa,s(Fe).name),l(aa,s(Fe).gripType)}),r(ze,Ve)}),e(Ie),e(De),Ze(3,De,()=>la,()=>({duration:200})),r(he,De)};c(de,he=>{s(u).has(s(ve).id)&&he(me)})}e(ie),y((he,De,Ie,ze)=>{ce=Be(ie,1,"session-card",null,ce,he),l(Me,De),l(ne,` ${s(ve).exercises.length??""} Exercises ¬∑ ${Ie??""} Sets`),re=Be(te,1,"sync-dot svelte-1szs0u9",null,re,{synced:s(ve).syncStatus==="synced"}),Ne(te,"title",s(ve).syncStatus==="synced"?"Synced":"Local"),l(oe,ze)},[()=>({expanded:s(u).has(s(ve).id)}),()=>new Date(s(ve).date).toLocaleDateString(void 0,{weekday:"short",month:"short",day:"numeric"}),()=>C(s(ve)),()=>s(u).has(s(ve).id)?"‚ñ≤":"‚ñº"]),r(ue,ie)}),e(ye),r(ge,ye)};c(q,ge=>{s(F).length===0?ge($):ge(qe,!1)},!0)}r(f,d)};c(X,f=>{s(g)&&s(p).length===0?f(n):f(w,!1)})}e(W);var L=i(W,2);Va(L,{get isOpen(){return s(S)},title:"Delete Fingerboard Session",message:"Are you sure you want to delete this session? This cannot be undone.",onConfirm:O,onCancel:()=>o(S,!1)}),y(()=>V.disabled=s(g)),$e(K,()=>s(h),f=>o(h,f)),$e(se,()=>s(b),f=>o(b,f)),r(x,A),na()}ea(["click","keydown"]);var Oi=v('<span class="spinner svelte-xyvf5r"></span> Fetching...',1),Ei=v('<div class="loading svelte-xyvf5r">Loading sessions...</div>'),Ni=v('<div class="empty-state svelte-xyvf5r">No competitions logged yet.</div>'),ji=v('<span class="round-pos svelte-xyvf5r"> </span>'),Ii=v('<span class="c-attempts svelte-xyvf5r"> </span>'),Ri=v('<div class="climb-notes svelte-xyvf5r"> </div>'),Pi=v('<div class="climb-row svelte-xyvf5r"><div class="climb-info svelte-xyvf5r"><span class="c-name svelte-xyvf5r"> </span> <!></div> <div class="climb-result"><span> </span></div></div> <!>',1),Bi=v('<div class="climbs-list"></div>'),Mi=v('<div class="round-item svelte-xyvf5r"><div class="round-header svelte-xyvf5r"><span class="round-name"> </span> <!></div> <!></div>'),Vi=v('<div class="rounds-list svelte-xyvf5r"></div>'),Wi=v('<div class="load-meta svelte-xyvf5r"><span> </span></div>'),Ui=v('<div class="card-body svelte-xyvf5r"><!> <!> <div class="session-footer svelte-xyvf5r"><span> </span></div></div>'),Hi=v('<div><div class="card-header svelte-xyvf5r" role="button" tabindex="0"><div class="header-main svelte-xyvf5r"><div class="left-col svelte-xyvf5r"><span class="venue svelte-xyvf5r"> </span> <span class="date svelte-xyvf5r"> </span></div> <div class="right-col svelte-xyvf5r"><div class="badges svelte-xyvf5r"><span class="type-tag svelte-xyvf5r"> </span> <span class="result-tag svelte-xyvf5r"> </span></div></div></div> <div class="header-status svelte-xyvf5r"><span>‚óè</span> <button class="btn-icon delete-btn svelte-xyvf5r" title="Delete Session">üóëÔ∏è</button> <span class="chevron svelte-xyvf5r"> </span></div></div> <!></div>'),Zi=v('<div class="timeline svelte-xyvf5r"></div>'),Ji=v('<div class="view-content svelte-xyvf5r"><div class="header svelte-xyvf5r"><h3 class="svelte-xyvf5r">üèÜ Competition Log</h3> <button class="fetch-btn svelte-xyvf5r" title="Fetch data from cloud"><!></button></div> <!> <!></div>');function Ki(x,t){va(t,!0);let p=Z(fa([])),g=Z(!0),h=Z(fa(new Set)),b=Z(!1),u=Z(null);function S(m){o(u,m,!0),o(b,!0)}function R(){s(u)&&(Pa(s(u)),o(u,null),o(b,!1),o(p,Ua().sort((m,E)=>new Date(E.date).getTime()-new Date(m.date).getTime()),!0))}async function k(){o(g,!0),o(p,Ua().sort((m,E)=>new Date(E.date).getTime()-new Date(m.date).getTime()),!0);try{await Ba();const m=await ps();if(m.ok&&m.data){const E=m.data.map(K=>({...K,activityType:"competition",type:K.type,rounds:K.rounds.map(Q=>({...Q,climbs:Q.climbs?.map(se=>({...se,status:se.status}))})),createdAt:K.createdAt||new Date().toISOString(),updatedAt:K.updatedAt||new Date().toISOString(),syncStatus:"synced"}));Ma(E),o(p,Ua().sort((K,Q)=>new Date(Q.date).getTime()-new Date(K.date).getTime()),!0)}}catch(m){console.error("Failed to sync",m)}finally{o(g,!1)}}k();function O(m){s(h).has(m)?s(h).delete(m):s(h).add(m),o(h,new Set(s(h)),!0)}function T(m){if(!m.rounds||m.rounds.length===0)return"No rounds";const E=m.rounds[m.rounds.length-1];if(E.position)return`#${E.position} ${E.name}`;if(E.climbs){const K=E.climbs.filter(se=>se.status==="Top"||se.status==="Flash").length,Q=E.climbs.filter(se=>se.status==="Zone").length;return`${m.rounds.length} Rnds ¬∑ Final: ${K}T ${Q+K}Z`}return E.name}var F=Ji(),z=a(F),C=i(a(z),2);C.__click=k;var A=a(C);{var W=m=>{var E=Oi();Fa(),r(m,E)},J=m=>{var E=wa("‚òÅÔ∏è Fetch Data");r(m,E)};c(A,m=>{s(g)?m(W):m(J,!1)})}e(C),e(z);var V=i(z,2);{var fe=m=>{var E=Ei();r(m,E)},ae=m=>{var E=Te(),K=xe(E);{var Q=X=>{var n=Ni();r(X,n)},se=X=>{var n=Zi();be(n,21,()=>s(p),we,(w,L)=>{var f=Hi();let d;var q=a(f);q.__click=()=>O(s(L).id),q.__keydown=N=>N.key==="Enter"&&O(s(L).id);var $=a(q),qe=a($),ge=a(qe),ye=a(ge,!0);e(ge);var ue=i(ge,2),ve=a(ue,!0);e(ue),e(qe);var ie=i(qe,2),ce=a(ie),H=a(ce),le=a(H,!0);e(H);var pe=i(H,2),Me=a(pe,!0);e(pe),e(ce),e(ie),e($);var Je=i($,2),je=a(Je);let Ke;var ne=i(je,2);ne.__click=N=>{N.stopPropagation(),S(s(L).id)};var B=i(ne,2),te=a(B,!0);e(B),e(Je),e(q);var re=i(q,2);{var I=N=>{var oe=Ui(),de=a(oe);{var me=Ce=>{var Le=Vi();be(Le,21,()=>s(L).rounds,we,(oa,Ge)=>{var aa=Mi(),Re=a(aa),sa=a(Re),da=a(sa,!0);e(sa);var ta=i(sa,2);{var Ae=Oe=>{var ia=ji(),_a=a(ia);e(ia),y(()=>l(_a,`#${s(Ge).position??""}`)),r(Oe,ia)};c(ta,Oe=>{s(Ge).position&&Oe(Ae)})}e(Re);var We=i(Re,2);{var ca=Oe=>{var ia=Bi();be(ia,21,()=>s(Ge).climbs,we,(_a,Pe)=>{var ba=Pi(),ua=xe(ba),qa=a(ua),ga=a(qa),Ca=a(ga,!0);e(ga);var Da=i(ga,2);{var za=Ye=>{var Qe=Ii(),pa=a(Qe);e(Qe),y(()=>l(pa,`(${s(Pe).attemptCount??""} tries)`)),r(Ye,Qe)};c(Da,Ye=>{s(Pe).attemptCount>1&&Ye(za)})}e(qa);var ya=i(qa,2),Sa=a(ya);let xa;var La=a(Sa,!0);e(Sa),e(ya),e(ua);var ka=i(ua,2);{var Ga=Ye=>{var Qe=Ri(),pa=a(Qe);e(Qe),y(()=>l(pa,`"${s(Pe).notes??""}"`)),r(Ye,Qe)};c(ka,Ye=>{s(Pe).notes&&Ye(Ga)})}y(()=>{l(Ca,s(Pe).name),xa=Be(Sa,1,"status-badge svelte-xyvf5r",null,xa,{top:s(Pe).status==="Top"||s(Pe).status==="Flash",zone:s(Pe).status==="Zone"}),l(La,s(Pe).status)}),r(_a,ba)}),e(ia),r(Oe,ia)};c(We,Oe=>{s(Ge).climbs&&Oe(ca)})}e(aa),y(()=>l(da,s(Ge).name)),r(oa,aa)}),e(Le),r(Ce,Le)};c(de,Ce=>{s(L).rounds&&Ce(me)})}var he=i(de,2);{var De=Ce=>{var Le=Wi(),oa=a(Le),Ge=a(oa);e(oa),e(Le),y(()=>l(Ge,`Detailed Load: Fingers ${s(L).fingerLoad??""}/5, Shoulders ${s(L).shoulderLoad??""}/5, Forearms ${s(L).forearmLoad??""}/5`)),r(Ce,Le)};c(he,Ce=>{(s(L).fingerLoad||s(L).shoulderLoad)&&Ce(De)})}var Ie=i(he,2),ze=a(Ie);let Fe;var Ve=a(ze,!0);e(ze),e(Ie),e(oe),y(()=>{Fe=Be(ze,1,"sync-status svelte-xyvf5r",null,Fe,{synced:s(L).syncStatus==="synced"}),l(Ve,s(L).syncStatus==="synced"?"‚úì Synced":"‚òÅ Local")}),Ze(3,oe,()=>la,()=>({duration:200})),r(N,oe)};c(re,N=>{s(h).has(s(L).id)&&N(I)})}e(f),y((N,oe,de,me)=>{d=Be(f,1,"session-card svelte-xyvf5r",null,d,N),l(ye,s(L).customVenue||s(L).venue),l(ve,oe),l(le,s(L).type),l(Me,de),Ke=Be(je,1,"sync-dot",null,Ke,{synced:s(L).syncStatus==="synced"}),Ne(je,"title",s(L).syncStatus==="synced"?"Synced":"Local"),l(te,me)},[()=>({expanded:s(h).has(s(L).id)}),()=>new Date(s(L).date).toLocaleDateString(void 0,{weekday:"short",day:"numeric",month:"short"}),()=>T(s(L)),()=>s(h).has(s(L).id)?"‚ñ≤":"‚ñº"]),r(w,f)}),e(n),r(X,n)};c(K,X=>{s(p).length===0?X(Q):X(se,!1)},!0)}r(m,E)};c(V,m=>{s(g)&&s(p).length===0?m(fe):m(ae,!1)})}var j=i(V,2);Va(j,{get isOpen(){return s(b)},title:"Delete Competition",message:"Are you sure you want to delete this competition session? This action cannot be undone.",onConfirm:R,onCancel:()=>o(b,!1)}),e(F),y(()=>C.disabled=s(g)),r(x,F),na()}ea(["click","keydown"]);var Yi=v("<option> </option>"),Qi=v('<div class="view-container svelte-108px9u"><!></div>'),Xi=v('<div class="page svelte-108px9u"><div class="page-header svelte-108px9u"><h1 class="svelte-108px9u">üìä View Data</h1> <p class="subtitle svelte-108px9u">Browse your training history</p></div> <div class="content-card svelte-108px9u"><div class="form-group svelte-108px9u"><label for="activity-type" class="svelte-108px9u">Activity Type</label> <select id="activity-type" class="svelte-108px9u"><option disabled>Select an activity...</option><!></select></div> <!></div></div>');function or(x){const t=[{value:"indoor_climb",label:"Indoor Climb",icon:"üßó"},{value:"outdoor_climb",label:"Outdoor Climb",icon:"‚õ∞Ô∏è"},{value:"gym_session",label:"Gym Session",icon:"üèãÔ∏è"},{value:"fingerboarding",label:"Fingerboarding",icon:"ü§è"},{value:"competition",label:"Competition",icon:"üèÜ"}];let p=Z("");var g=Xi(),h=i(a(g),2),b=a(h),u=i(a(b),2),S=a(u);S.value=S.__value="";var R=i(S);be(R,17,()=>t,T=>T.value,(T,F)=>{var z=Yi(),C=a(z);e(z);var A={};y(()=>{l(C,`${s(F).icon??""} ${s(F).label??""}`),A!==(A=s(F).value)&&(z.value=(z.__value=s(F).value)??"")}),r(T,z)}),e(u),e(b);var k=i(b,2);{var O=T=>{var F=Qi(),z=a(F);{var C=W=>{wt(W,{})},A=W=>{var J=Te(),V=xe(J);{var fe=j=>{yi(j,{})},ae=j=>{var m=Te(),E=xe(m);{var K=se=>{wi(se)},Q=se=>{var X=Te(),n=xe(X);{var w=f=>{Ai(f,{})},L=f=>{var d=Te(),q=xe(d);{var $=qe=>{Ki(qe,{})};c(q,qe=>{s(p)==="competition"&&qe($)},!0)}r(f,d)};c(n,f=>{s(p)==="fingerboarding"?f(w):f(L,!1)},!0)}r(se,X)};c(E,se=>{s(p)==="gym_session"?se(K):se(Q,!1)},!0)}r(j,m)};c(V,j=>{s(p)==="outdoor_climb"?j(fe):j(ae,!1)},!0)}r(W,J)};c(z,W=>{s(p)==="indoor_climb"?W(C):W(A,!1)})}e(F),r(T,F)};c(k,T=>{s(p)&&T(O)})}e(h),e(g),Ta(u,()=>s(p),T=>o(p,T)),r(x,g)}export{or as component};
