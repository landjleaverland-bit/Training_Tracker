import{f as d,a as r,c as yt,t as Ve}from"../chunks/CKcnA5P_.js";import{w as Da,p as ht,c as l,r as a,s,j as e,t as I,a as St,f as pt,aV as b,E as He,o as ca,F as t,d as ga,aG as Me,aW as At,b0 as za,b1 as da,k as De,e as ce,b2 as Ea,D as Na,ac as Pe,b3 as ja,b4 as Yt,b5 as Fa,b6 as Va,b7 as Ba,b8 as Ra}from"../chunks/4c6jdw0Z.js";import{d as Qt,s as Q,e as X}from"../chunks/K94srNfd.js";import{i as E}from"../chunks/CK8hGvwc.js";import{e as de,i as _e,r as V,b as M,c as Aa,s as ut,d as Pa}from"../chunks/BVSa1UsB.js";import{s as Ye}from"../chunks/9PGhKrW6.js";import{i as Oa,s as La,c as ot,d as Ma,u as ha,m as Sa,b as ka,e as $a,f as Ua,h as Wa,j as Ja,k as Ka}from"../chunks/ChylFdpu.js";import{i as ua,c as Ha,g as Ya,a as Qa,b as Xa,t as va,f as ba,E as na,d as Za,D as es,e as ts,h as as,j as ss,s as ls}from"../chunks/Dsikxa4z.js";import{p as nt}from"../chunks/CfB7tKQ8.js";import{i as Xt}from"../chunks/DMFvxL8W.js";import{b as rs}from"../chunks/C0VVBOaW.js";function ya(be){return function(...A){var u=A[0];return u.stopPropagation(),be?.apply(this,A)}}function Rt(be,A){var u=be.$$events?.[A.type],B=Da(u)?u.slice():u==null?[]:[u];for(var L of B)L.call(this,A)}var is=d('<span class="placeholder svelte-1g8x5ph"> </span>'),os=d('<span class="chip-display"> </span>'),ns=d('<button type="button"> </button>'),vs=d('<div class="multi-select-container svelte-1g8x5ph"><div class="chips svelte-1g8x5ph"><!></div> <div class="options-grid svelte-1g8x5ph"></div></div>');function Gt(be,A){ht(A,!0);let u=nt(A,"selected",19,()=>[]),B=nt(A,"placeholder",3,"Select options...");function L(R){let G=[...u()];R==="None"?G.includes("None")?G=[]:G=["None"]:(G=G.filter(k=>k!=="None"),G.includes(R)?G=G.filter(k=>k!==R):G.push(R)),A.onChange(G)}var _=vs(),F=l(_),g=l(F);{var U=R=>{var G=is(),k=l(G,!0);a(G),I(()=>Q(k,B())),r(R,G)},re=R=>{var G=yt(),k=pt(G);de(k,17,u,_e,(y,p)=>{var m=os(),S=l(m,!0);a(m),I(()=>Q(S,e(p))),r(y,m)}),r(R,G)};E(g,R=>{u().length===0?R(U):R(re,!1)})}a(F);var H=s(F,2);de(H,21,()=>A.options,_e,(R,G)=>{var k=ns();k.__click=()=>L(e(G));var y=l(k,!0);a(k),I(p=>{Ye(k,1,`option-chip ${p??""}`,"svelte-1g8x5ph"),Q(y,e(G))},[()=>u().includes(e(G))?"selected":""]),r(R,k)}),a(H),a(_),r(be,_),St()}Qt(["click"]);var cs=d('<div class="input-with-action svelte-1lf3qka"><input type="text" id="location-manual" placeholder="Enter custom location..." class="flat-left svelte-1lf3qka"/> <button type="button" class="action-btn flat-right svelte-1lf3qka" title="Back to list">‚úï</button></div>'),ds=d("<option> </option>"),us=d('<select id="location" class="svelte-1lf3qka"><option disabled>Select location...</option><!></select>'),ps=d("<option> </option>"),fs=d("<option> </option>"),_s=d('<th class="svelte-1lf3qka">Sport?</th>'),ms=d('<td class="center svelte-1lf3qka"><input type="checkbox" class="svelte-1lf3qka"/></td>'),gs=d('<span class="grade-error svelte-1lf3qka">Invalid</span>'),bs=d("<option> </option>"),ys=d('<button type="button" class="remove-btn svelte-1lf3qka">‚úï</button>'),hs=d('<tr><!><td class="svelte-1lf3qka"><input type="text" placeholder="Route name..." class="svelte-1lf3qka"/></td><td class="svelte-1lf3qka"><input type="text" placeholder="V3"/> <!></td><td class="svelte-1lf3qka"><select class="svelte-1lf3qka"></select></td><td class="svelte-1lf3qka"><input type="number" min="1" class="svelte-1lf3qka"/></td><td><textarea placeholder="Notes..." class="svelte-1lf3qka"></textarea></td><td class="center svelte-1lf3qka"><!></td></tr>'),Ss=d("<div> </div>"),ks=d('<div class="form-content svelte-1lf3qka"><h3 class="svelte-1lf3qka">üßó Indoor Climb</h3> <div class="form-row svelte-1lf3qka"><div class="form-group svelte-1lf3qka"><label for="date" class="svelte-1lf3qka">Date</label> <input type="date" id="date" class="svelte-1lf3qka"/></div> <div class="form-group svelte-1lf3qka"><label for="location" class="svelte-1lf3qka">Location</label> <!></div></div> <div class="form-group svelte-1lf3qka"><label for="climbing-type" class="svelte-1lf3qka">Climbing Type</label> <select id="climbing-type" class="svelte-1lf3qka"><option disabled>Select type...</option><!></select></div> <div class="load-section svelte-1lf3qka"><h4 class="svelte-1lf3qka">Load Metrics</h4> <div class="load-metrics svelte-1lf3qka"><div class="load-item svelte-1lf3qka"><label for="finger-load" class="svelte-1lf3qka">Finger</label> <input type="number" id="finger-load" min="1" max="5" class="svelte-1lf3qka"/> <span class="load-scale svelte-1lf3qka">/ 5</span></div> <div class="load-item svelte-1lf3qka"><label for="shoulder-load" class="svelte-1lf3qka">Shoulder</label> <input type="number" id="shoulder-load" min="1" max="5" class="svelte-1lf3qka"/> <span class="load-scale svelte-1lf3qka">/ 5</span></div> <div class="load-item svelte-1lf3qka"><label for="forearm-load" class="svelte-1lf3qka">Forearm</label> <input type="number" id="forearm-load" min="1" max="5" class="svelte-1lf3qka"/> <span class="load-scale svelte-1lf3qka">/ 5</span></div></div> <h4 class="mt-4 svelte-1lf3qka">Grip Metrics</h4> <div class="load-metrics svelte-1lf3qka"><div class="load-item svelte-1lf3qka"><label for="open-grip" class="svelte-1lf3qka">Open</label> <input type="number" id="open-grip" min="1" max="5" class="svelte-1lf3qka"/> <span class="load-scale svelte-1lf3qka">/ 5</span></div> <div class="load-item svelte-1lf3qka"><label for="crimp-grip" class="svelte-1lf3qka">Crimp</label> <input type="number" id="crimp-grip" min="1" max="5" class="svelte-1lf3qka"/> <span class="load-scale svelte-1lf3qka">/ 5</span></div> <div class="load-item svelte-1lf3qka"><label for="pinch-grip" class="svelte-1lf3qka">Pinch</label> <input type="number" id="pinch-grip" min="1" max="5" class="svelte-1lf3qka"/> <span class="load-scale svelte-1lf3qka">/ 5</span></div> <div class="load-item svelte-1lf3qka"><label for="sloper-grip" class="svelte-1lf3qka">Sloper</label> <input type="number" id="sloper-grip" min="1" max="5" class="svelte-1lf3qka"/> <span class="load-scale svelte-1lf3qka">/ 5</span></div> <div class="load-item svelte-1lf3qka"><label for="jug-grip" class="svelte-1lf3qka">Jug</label> <input type="number" id="jug-grip" min="1" max="5" class="svelte-1lf3qka"/> <span class="load-scale svelte-1lf3qka">/ 5</span></div></div></div> <div class="training-section svelte-1lf3qka"><h4 class="svelte-1lf3qka">Training Details</h4> <div class="training-grid svelte-1lf3qka"><div class="training-item svelte-1lf3qka"><label for="training-type" class="svelte-1lf3qka">Training Type</label> <!></div> <div class="training-item svelte-1lf3qka"><label for="difficulty" class="svelte-1lf3qka">Difficulty</label> <select id="difficulty" class="svelte-1lf3qka"></select></div> <div class="training-item svelte-1lf3qka"><label for="category" class="svelte-1lf3qka">Category</label> <!></div> <div class="training-item svelte-1lf3qka"><label for="energy-system" class="svelte-1lf3qka">Energy System</label> <!></div> <div class="training-item svelte-1lf3qka"><label for="technique-focus" class="svelte-1lf3qka">Technique Focus</label> <!></div> <div class="training-item svelte-1lf3qka"><label for="wall-angle" class="svelte-1lf3qka">Wall</label> <!></div></div></div> <div class="climbs-section svelte-1lf3qka"><h4 class="svelte-1lf3qka">Climbs</h4> <div class="table-container svelte-1lf3qka"><table class="climbs-table svelte-1lf3qka"><thead><tr><!><th class="svelte-1lf3qka">Name</th><th class="svelte-1lf3qka">Grade</th><th class="svelte-1lf3qka">Attempt</th><th class="svelte-1lf3qka">#</th><th class="svelte-1lf3qka">Notes</th><th class="svelte-1lf3qka"></th></tr></thead><tbody></tbody></table></div> <button type="button" class="add-btn svelte-1lf3qka">+ Add Climb</button></div> <div class="submit-section svelte-1lf3qka"><!> <button type="button" class="submit-btn svelte-1lf3qka"><!></button></div></div>');function ws(be,A){ht(A,!0);const u=["Rockstar Unit 3","Rockstar Unit 5","Rockstar Techno","Flashpoint Bristol","Redpoint Bristol","TCH Bristol","Other"],B=["Bouldering","Sport","Mixed"],L=["Onsight","Flash","Redpoint","Dogged","DNF"],_=["None","Projecting","Onsighting","Campusing","Repeaters"],F=["None","Easy","Medium","Hard","Max","Limit+"],g=["None","Strength","Strength Endurance","Power Endurance","Coordination","Slab Technique","Overhang Technique","Power","Strength Capacity","Power Capacity"],U=["None","Aerobic Lactic Capacity","Aerobic Lactic Power","Anaerobic Alactic Capacity","Anaerobic Alactic Power","Anaerobic Power","Anaerobic Lactic Capacity"],re=["None","Trusting feet","Double-clutch","Standing on volumes","Deadpointing","Flagging","Swapping feet","Edging","Smearing","Matching","Backstepping","Drop Knee","Bridging","Laybacking","Mantling","Kneebar","Dyno","Pogo","Coordination Moves","Gastoning","Undercutting","Compressing","Heel Hook","Toe Hook","Bicycle"],H=["None","Overhang","Slab","Roof","Moon Board","Kilter Board","Beast","Circuit Board"],G=["V0-","4-","V0","4","V0+","4+","V1","5","V2","5+","V3","6A","V4","6B","V5","6C","V6","7A","V7","7A+","V8","7B","7B+","V9","7C","V10","7C+","V11","8A","V12","8A+","V13","8B","V14","8B+","V15","8C","V16","8C+","V17","9A"].map(c=>c.toLowerCase());let k=b(null),y=b(He(new Date().toISOString().split("T")[0])),p=b(""),m=b(""),S=b(He(["None"])),se=b("None"),W=b(He(["None"])),w=b(He(["None"])),D=b(He(["None"])),J=b(He(["None"])),te=b(3),$=b(3),x=b(3),Z=b(3),j=b(3),h=b(3),q=b(3),N=b(3),z=b(He([{isSport:!1,name:"",grade:"",attemptType:"Flash",attemptsNum:1,notes:""}])),Y=b(!1);const ee="indoor_climb_draft";ca(()=>{const c=localStorage.getItem(ee);if(c)try{const o=JSON.parse(c);o.date&&t(y,o.date,!0),o.location&&t(p,o.location,!0),o.isOtherLocation&&t(Y,o.isOtherLocation,!0),o.climbingType&&t(m,o.climbingType,!0),o.trainingTypes&&t(S,o.trainingTypes,!0),o.difficulty&&t(se,o.difficulty,!0),o.categories&&t(W,o.categories,!0),o.energySystems&&t(w,o.energySystems,!0),o.techniqueFocuses&&t(D,o.techniqueFocuses,!0),o.wallAngles&&t(J,o.wallAngles,!0),o.fingerLoad&&t(te,o.fingerLoad,!0),o.shoulderLoad&&t($,o.shoulderLoad,!0),o.forearmLoad&&t(x,o.forearmLoad,!0),o.openGrip&&t(Z,o.openGrip,!0),o.crimpGrip&&t(j,o.crimpGrip,!0),o.pinchGrip&&t(h,o.pinchGrip,!0),o.sloperGrip&&t(q,o.sloperGrip,!0),o.jugGrip&&t(N,o.jugGrip,!0),o.climbs&&t(z,o.climbs,!0)}catch(o){console.error("Failed to restore draft",o)}}),ga(()=>{const c={date:e(y),location:e(p),isOtherLocation:e(Y),climbingType:e(m),trainingTypes:e(S),difficulty:e(se),categories:e(W),energySystems:e(w),techniqueFocuses:e(D),wallAngles:e(J),fingerLoad:e(te),shoulderLoad:e($),forearmLoad:e(x),openGrip:e(Z),crimpGrip:e(j),pinchGrip:e(h),sloperGrip:e(q),jugGrip:e(N),climbs:e(z)};localStorage.setItem(ee,JSON.stringify(c))});function le(){e(p)==="Other"&&(t(Y,!0),t(p,""))}function ae(){t(Y,!1),t(p,"")}function ke(){t(z,[...e(z),{isSport:!1,name:"",grade:"",attemptType:"Flash",attemptsNum:1,notes:""}],!0)}function $e(c){t(z,e(z).filter((o,ie)=>ie!==c),!0)}function We(c,o){e(z)[c].attemptType=o,(o==="Flash"||o==="Onsight")&&(e(z)[c].attemptsNum=1)}function Je(c){t(k,c,!0)}function me(){t(k,null)}let Fe=At(()=>e(m)==="Mixed");function Ee(c){return e(m)==="Sport"?!0:e(m)==="Bouldering"?!1:c.isSport}function Qe(c){return c.trim()?G.includes(c.trim().toLowerCase()):!0}let ue=b("idle"),ne=b("");function ve(){return e(p)?e(m)?e(z).filter(o=>o.grade.trim()&&!Qe(o.grade)).length>0?"Please fix invalid grades":null:"Please select a climbing type":"Please select a location"}async function je(){const c=ve();if(c){t(ue,"error"),t(ne,c,!0);return}t(ue,"saving");try{const o=e(z).map(Se=>({...Se,isSport:Ee(Se)})),ie={date:e(y),location:e(p),customLocation:e(Y)?e(p):void 0,climbingType:e(m),trainingTypes:e(S),difficulty:e(se),categories:e(W),energySystems:e(w),techniqueFocuses:e(D),wallAngles:e(J),fingerLoad:e(te),shoulderLoad:e($),forearmLoad:e(x),openGrip:e(Z),crimpGrip:e(j),pinchGrip:e(h),sloperGrip:e(q),jugGrip:e(N),climbs:o},Ie=Ma(ie);if(ua()){const Se=await Ha(ie);Se.ok?(ha(Ie.id,Se.id),Sa(Se.id),t(ue,"success"),t(ne,"Session saved and synced!"),localStorage.removeItem(ee)):(ka(Ie.id),t(ue,"success"),t(ne,"Saved locally. Sync failed: "+(Se.error||"Unknown error")),localStorage.removeItem(ee))}else t(ue,"success"),t(ne,"Saved locally. Will sync when online."),localStorage.removeItem(ee);window.dispatchEvent(new CustomEvent("session-saved")),setTimeout(()=>{ye()},2e3)}catch(o){t(ue,"error"),t(ne,"Failed to save session"),console.error("Save error:",o)}}function ye(){t(y,new Date().toISOString().split("T")[0],!0),t(p,""),t(Y,!1),t(m,""),t(S,["None"],!0),t(se,"None"),t(W,["None"],!0),t(w,["None"],!0),t(D,["None"],!0),t(J,["None"],!0),t(te,3),t($,3),t(x,3),t(Z,3),t(j,3),t(h,3),t(q,3),t(N,3),t(z,[{isSport:!1,name:"",grade:"",attemptType:"Flash",attemptsNum:1,notes:""}],!0),t(ue,"idle"),t(ne,"")}var Ue=ks(),Oe=s(l(Ue),2),Ke=l(Oe),st=s(l(Ke),2);V(st),a(Ke);var T=s(Ke,2),O=s(l(T),2);{var v=c=>{var o=cs(),ie=l(o);V(ie);var Ie=s(ie,2);Ie.__click=ae,a(o),M(ie,()=>e(p),Se=>t(p,Se)),r(c,o)},f=c=>{var o=us();o.__change=le;var ie=l(o);ie.value=ie.__value="";var Ie=s(ie);de(Ie,17,()=>u,_e,(Se,rt)=>{var n=ds(),i=l(n,!0);a(n);var P={};I(()=>{Q(i,e(rt)),P!==(P=e(rt))&&(n.value=(n.__value=e(rt))??"")}),r(Se,n)}),a(o),ot(o,()=>e(p),Se=>t(p,Se)),r(c,o)};E(O,c=>{e(Y)?c(v):c(f,!1)})}a(T),a(Oe);var C=s(Oe,2),K=s(l(C),2),oe=l(K);oe.value=oe.__value="";var Le=s(oe);de(Le,17,()=>B,_e,(c,o)=>{var ie=ps(),Ie=l(ie,!0);a(ie);var Se={};I(()=>{Q(Ie,e(o)),Se!==(Se=e(o))&&(ie.value=(ie.__value=e(o))??"")}),r(c,ie)}),a(K),a(C);var et=s(C,2),Ct=s(l(et),2),kt=l(Ct),Tt=s(l(kt),2);V(Tt),Me(2),a(kt);var pe=s(kt,2),Ge=s(l(pe),2);V(Ge),Me(2),a(pe);var Ce=s(pe,2),Te=s(l(Ce),2);V(Te),Me(2),a(Ce),a(Ct);var qe=s(Ct,4),Ne=l(qe),he=s(l(Ne),2);V(he),Me(2),a(Ne);var Be=s(Ne,2),tt=s(l(Be),2);V(tt),Me(2),a(Be);var Xe=s(Be,2),Ae=s(l(Xe),2);V(Ae),Me(2),a(Xe);var vt=s(Xe,2),ft=s(l(vt),2);V(ft),Me(2),a(vt);var Nt=s(vt,2),wt=s(l(Nt),2);V(wt),Me(2),a(Nt),a(qe),a(et);var lt=s(et,2),xt=s(l(lt),2),Ft=l(xt),It=s(l(Ft),2);Gt(It,{get options(){return _},get selected(){return e(S)},placeholder:"Select types...",onChange:c=>t(S,c,!0)}),a(Ft);var Ot=s(Ft,2),ze=s(l(Ot),2);de(ze,21,()=>F,_e,(c,o)=>{var ie=fs(),Ie=l(ie,!0);a(ie);var Se={};I(()=>{Q(Ie,e(o)),Se!==(Se=e(o))&&(ie.value=(ie.__value=e(o))??"")}),r(c,ie)}),a(ze),a(Ot);var Ze=s(Ot,2),_t=s(l(Ze),2);Gt(_t,{get options(){return g},get selected(){return e(W)},placeholder:"Select categories...",onChange:c=>t(W,c,!0)}),a(Ze);var Lt=s(Ze,2),Dt=s(l(Lt),2);Gt(Dt,{get options(){return U},get selected(){return e(w)},placeholder:"Select systems...",onChange:c=>t(w,c,!0)}),a(Lt);var Vt=s(Lt,2),wa=s(l(Vt),2);Gt(wa,{get options(){return re},get selected(){return e(D)},placeholder:"Select focus...",onChange:c=>t(D,c,!0)}),a(Vt);var Pt=s(Vt,2),Zt=s(l(Pt),2);Gt(Zt,{get options(){return H},get selected(){return e(J)},placeholder:"Select angles...",onChange:c=>t(J,c,!0)}),a(Pt),a(xt),a(lt);var Bt=s(lt,2),ea=s(l(Bt),2),Mt=l(ea),ta=l(Mt),aa=l(ta),xa=l(aa);{var sa=c=>{var o=_s();r(c,o)};E(xa,c=>{e(Fe)&&c(sa)})}Me(6),a(aa),a(ta);var $t=s(ta);de($t,21,()=>e(z),_e,(c,o,ie)=>{var Ie=hs(),Se=l(Ie);{var rt=fe=>{var at=ms(),dt=l(at);V(dt),a(at),Aa(dt,()=>e(o).isSport,Ht=>e(o).isSport=Ht),r(fe,at)};E(Se,fe=>{e(Fe)&&fe(rt)})}var n=s(Se),i=l(n);V(i),a(n);var P=s(n),we=l(P);V(we);let ge;var mt=s(we,2);{var qt=fe=>{var at=gs();r(fe,at)};E(mt,fe=>{Qe(e(o).grade)||fe(qt)})}a(P);var it=s(P),Re=l(it);Re.__change=fe=>We(ie,fe.target.value),de(Re,21,()=>L,_e,(fe,at)=>{var dt=bs(),Ht=l(dt,!0);a(dt);var ma={};I(()=>{Q(Ht,e(at)),ma!==(ma=e(at))&&(dt.value=(dt.__value=e(at))??"")}),r(fe,dt)}),a(Re);var ct;Oa(Re),a(it);var zt=s(it),Et=l(zt);V(Et),a(zt);var Jt=s(zt);let Kt;var gt=l(Jt);za(gt),a(Jt);var ra=s(Jt),ia=l(ra);{var oa=fe=>{var at=ys();at.__click=()=>$e(ie),r(fe,at)};E(ia,fe=>{e(z).length>1&&fe(oa)})}a(ra),a(Ie),I(fe=>{ge=Ye(we,1,"grade-input svelte-1lf3qka",null,ge,fe),ct!==(ct=e(o).attemptType)&&(Re.value=(Re.__value=e(o).attemptType)??"",La(Re,e(o).attemptType)),Et.disabled=e(o).attemptType==="Flash",Kt=Ye(Jt,1,"notes-cell svelte-1lf3qka",null,Kt,{expanded:e(k)===ie})},[()=>({invalid:!Qe(e(o).grade)})]),M(i,()=>e(o).name,fe=>e(o).name=fe),M(we,()=>e(o).grade,fe=>e(o).grade=fe),M(Et,()=>e(o).attemptsNum,fe=>e(o).attemptsNum=fe),X("focus",gt,()=>Je(ie)),X("blur",gt,me),M(gt,()=>e(o).notes,fe=>e(o).notes=fe),r(c,Ie)}),a($t),a(Mt),a(ea);var pa=s(ea,2);pa.__click=ke,a(Bt);var Ut=s(Bt,2),la=l(Ut);{var qa=c=>{var o=Ss();let ie;var Ie=l(o,!0);a(o),I(()=>{ie=Ye(o,1,"save-message svelte-1lf3qka",null,ie,{success:e(ue)==="success",error:e(ue)==="error"}),Q(Ie,e(ne))}),r(c,o)};E(la,c=>{e(ne)&&c(qa)})}var Wt=s(la,2);Wt.__click=je;var fa=l(Wt);{var Ca=c=>{var o=Ve("Saving...");r(c,o)},_a=c=>{var o=yt(),ie=pt(o);{var Ie=rt=>{var n=Ve("‚úì Saved!");r(rt,n)},Se=rt=>{var n=Ve("Save Session");r(rt,n)};E(ie,rt=>{e(ue)==="success"?rt(Ie):rt(Se,!1)},!0)}r(c,o)};E(fa,c=>{e(ue)==="saving"?c(Ca):c(_a,!1)})}a(Wt),a(Ut),a(Ue),I(()=>Wt.disabled=e(ue)==="saving"),M(st,()=>e(y),c=>t(y,c)),ot(K,()=>e(m),c=>t(m,c)),M(Tt,()=>e(te),c=>t(te,c)),M(Ge,()=>e($),c=>t($,c)),M(Te,()=>e(x),c=>t(x,c)),M(he,()=>e(Z),c=>t(Z,c)),M(tt,()=>e(j),c=>t(j,c)),M(Ae,()=>e(h),c=>t(h,c)),M(ft,()=>e(q),c=>t(q,c)),M(wt,()=>e(N),c=>t(N,c)),ot(ze,()=>e(se),c=>t(se,c)),r(be,Ue),St()}Qt(["click","change"]);var xs=d("<option> </option>"),qs=d('<div class="input-with-action svelte-15o2ys1"><input type="text" id="crag-manual" placeholder="Enter custom crag name..." class="flat-left svelte-15o2ys1"/> <button type="button" class="action-btn flat-right svelte-15o2ys1" title="Back to list">‚úï</button></div>'),Cs=d("<option> </option>"),Ts=d("<option>Other (Manual Entry)</option>"),Ns=d('<select id="crag" class="svelte-15o2ys1"><option disabled> </option><!><!></select>'),Fs=d("<option> </option>"),Os=d("<option> </option>"),Ls=d('<th class="svelte-15o2ys1">Sport?</th>'),Gs=d('<td class="center svelte-15o2ys1"><input type="checkbox" class="svelte-15o2ys1"/></td>'),zs=d('<span class="grade-error svelte-15o2ys1">Invalid</span>'),Es=d("<option> </option>"),js=d('<button type="button" class="remove-btn svelte-15o2ys1">‚úï</button>'),As=d('<tr><!><td class="svelte-15o2ys1"><input type="text" placeholder="Route name..." class="svelte-15o2ys1"/></td><td class="svelte-15o2ys1"><input type="text" placeholder="V3"/> <!></td><td class="svelte-15o2ys1"><select class="svelte-15o2ys1"></select></td><td class="svelte-15o2ys1"><input type="number" min="1" class="svelte-15o2ys1"/></td><td><textarea placeholder="Notes..." class="svelte-15o2ys1"></textarea></td><td class="center svelte-15o2ys1"><!></td></tr>'),Is=d("<div> </div>"),Ds=d('<div class="form-content svelte-15o2ys1"><h3 class="svelte-15o2ys1">‚õ∞Ô∏è Outdoor Climb</h3> <div class="form-row svelte-15o2ys1"><div class="form-group svelte-15o2ys1"><label for="date" class="svelte-15o2ys1">Date</label> <input type="date" id="date" class="svelte-15o2ys1"/></div> <div class="form-group svelte-15o2ys1"><label for="area" class="svelte-15o2ys1">Area</label> <select id="area" class="svelte-15o2ys1"><option disabled>Select area...</option><!></select></div></div> <div class="form-row svelte-15o2ys1"><div class="form-group svelte-15o2ys1"><label for="crag" class="svelte-15o2ys1">Crag</label> <!></div> <div class="form-group svelte-15o2ys1"><label for="sector" class="svelte-15o2ys1">Wall / Sector</label> <input type="text" id="sector" placeholder="Enter sector or wall name..." class="svelte-15o2ys1"/></div></div> <div class="form-group svelte-15o2ys1"><label for="climbing-type" class="svelte-15o2ys1">Climbing Type</label> <select id="climbing-type" class="svelte-15o2ys1"><option disabled>Select type...</option><!></select></div> <div class="load-section svelte-15o2ys1"><h4 class="svelte-15o2ys1">Load Metrics</h4> <div class="load-metrics svelte-15o2ys1"><div class="load-item svelte-15o2ys1"><label for="finger-load" class="svelte-15o2ys1">Finger</label> <input type="number" id="finger-load" min="1" max="5" class="svelte-15o2ys1"/> <span class="load-scale svelte-15o2ys1">/ 5</span></div> <div class="load-item svelte-15o2ys1"><label for="shoulder-load" class="svelte-15o2ys1">Shoulder</label> <input type="number" id="shoulder-load" min="1" max="5" class="svelte-15o2ys1"/> <span class="load-scale svelte-15o2ys1">/ 5</span></div> <div class="load-item svelte-15o2ys1"><label for="forearm-load" class="svelte-15o2ys1">Forearm</label> <input type="number" id="forearm-load" min="1" max="5" class="svelte-15o2ys1"/> <span class="load-scale svelte-15o2ys1">/ 5</span></div></div> <h4 class="mt-4 svelte-15o2ys1">Grip Metrics</h4> <div class="load-metrics svelte-15o2ys1"><div class="load-item svelte-15o2ys1"><label for="open-grip" class="svelte-15o2ys1">Open</label> <input type="number" id="open-grip" min="1" max="5" class="svelte-15o2ys1"/> <span class="load-scale svelte-15o2ys1">/ 5</span></div> <div class="load-item svelte-15o2ys1"><label for="crimp-grip" class="svelte-15o2ys1">Crimp</label> <input type="number" id="crimp-grip" min="1" max="5" class="svelte-15o2ys1"/> <span class="load-scale svelte-15o2ys1">/ 5</span></div> <div class="load-item svelte-15o2ys1"><label for="pinch-grip" class="svelte-15o2ys1">Pinch</label> <input type="number" id="pinch-grip" min="1" max="5" class="svelte-15o2ys1"/> <span class="load-scale svelte-15o2ys1">/ 5</span></div> <div class="load-item svelte-15o2ys1"><label for="sloper-grip" class="svelte-15o2ys1">Sloper</label> <input type="number" id="sloper-grip" min="1" max="5" class="svelte-15o2ys1"/> <span class="load-scale svelte-15o2ys1">/ 5</span></div> <div class="load-item svelte-15o2ys1"><label for="jug-grip" class="svelte-15o2ys1">Jug</label> <input type="number" id="jug-grip" min="1" max="5" class="svelte-15o2ys1"/> <span class="load-scale svelte-15o2ys1">/ 5</span></div></div></div> <div class="training-section svelte-15o2ys1"><h4 class="svelte-15o2ys1">Training Details</h4> <div class="training-grid svelte-15o2ys1"><div class="training-item svelte-15o2ys1"><label for="training-type" class="svelte-15o2ys1">Training Type</label> <!></div> <div class="training-item svelte-15o2ys1"><label for="difficulty" class="svelte-15o2ys1">Difficulty</label> <select id="difficulty" class="svelte-15o2ys1"></select></div> <div class="training-item svelte-15o2ys1"><label for="category" class="svelte-15o2ys1">Category</label> <!></div> <div class="training-item svelte-15o2ys1"><label for="energy-system" class="svelte-15o2ys1">Energy System</label> <!></div> <div class="training-item svelte-15o2ys1"><label for="technique-focus" class="svelte-15o2ys1">Technique Focus</label> <!></div></div></div> <div class="climbs-section svelte-15o2ys1"><h4 class="svelte-15o2ys1">Climbs</h4> <div class="table-container svelte-15o2ys1"><table class="climbs-table svelte-15o2ys1"><thead><tr><!><th class="svelte-15o2ys1">Name</th><th class="svelte-15o2ys1">Grade</th><th class="svelte-15o2ys1">Attempt</th><th class="svelte-15o2ys1">#</th><th class="svelte-15o2ys1">Notes</th><th class="svelte-15o2ys1"></th></tr></thead><tbody></tbody></table></div> <button type="button" class="add-btn svelte-15o2ys1">+ Add Climb</button></div> <div class="submit-section svelte-15o2ys1"><!> <button type="button" class="submit-btn svelte-15o2ys1"><!></button></div></div>');function Vs(be,A){ht(A,!0);const u=Ya(),B=["Boulder","Sport","Trad"],L=["Onsight","Flash","Redpoint","Dogged","DNF"],_=["None","Projecting","Onsighting","Campusing","Repeaters"],F=["None","Easy","Medium","Hard","Max","Limit+"],g=["None","Strength","Strength Endurance","Power Endurance","Coordination","Slab Technique","Overhang Technique","Power","Strength Capacity","Power Capacity"],U=["None","Aerobic Lactic Capacity","Aerobic Lactic Power","Anaerobic Alactic Capacity","Anaerobic Alactic Power","Anaerobic Power","Anaerobic Lactic Capacity"],re=["None","Trusting feet","Double-clutch","Deadpointing","Flagging","Swapping feet","Edging","Smearing","Matching","Backstepping","Drop Knee","Bridging","Laybacking","Mantling","Kneebar","Dyno","Coordination Moves","Gastoning","Undercutting","Compressing","Heel Hook","Toe Hook","Bicycle"],R=["V0-","4-","V0","4","V0+","4+","V1","5","V2","5+","V3","6A","V4","6B","V5","6C","V6","7A","V7","7A+","V8","7B","7B+","V9","7C","V10","7C+","V11","8A","V12","8A+","V13","8B","V14","8B+","V15","8C","V16","8C+","V17","9A"].map(n=>n.toLowerCase());let G=b(null),k=b(He(new Date().toISOString().split("T")[0])),y=b(""),p=b(""),m=b(""),S=b(""),se=b(He(["None"])),W=b("None"),w=b(He(["None"])),D=b(He(["None"])),J=b(He(["None"])),te=b(3),$=b(3),x=b(3),Z=b(3),j=b(3),h=b(3),q=b(3),N=b(3),z=b(He([{isSport:!1,name:"",grade:"",attemptType:"Flash",attemptsNum:1,notes:""}])),Y=At(()=>e(y)?Xa(e(y)):[]),ee=b(!1);const le="outdoor_climb_draft";ca(()=>{const n=localStorage.getItem(le);if(n)try{const i=JSON.parse(n);i.date&&t(k,i.date,!0),i.area&&t(y,i.area,!0),i.crag&&t(p,i.crag,!0),i.sector&&t(m,i.sector,!0),i.isOtherCrag&&t(ee,i.isOtherCrag,!0),i.climbingType&&t(S,i.climbingType,!0),i.trainingTypes&&t(se,i.trainingTypes,!0),i.difficulty&&t(W,i.difficulty,!0),i.categories&&t(w,i.categories,!0),i.energySystems&&t(D,i.energySystems,!0),i.techniqueFocuses&&t(J,i.techniqueFocuses,!0),i.fingerLoad&&t(te,i.fingerLoad,!0),i.shoulderLoad&&t($,i.shoulderLoad,!0),i.forearmLoad&&t(x,i.forearmLoad,!0),i.openGrip&&t(Z,i.openGrip,!0),i.crimpGrip&&t(j,i.crimpGrip,!0),i.pinchGrip&&t(h,i.pinchGrip,!0),i.sloperGrip&&t(q,i.sloperGrip,!0),i.jugGrip&&t(N,i.jugGrip,!0),i.climbs&&t(z,i.climbs,!0)}catch(i){console.error("Failed to restore draft",i)}}),ga(()=>{const n={date:e(k),area:e(y),crag:e(p),sector:e(m),isOtherCrag:e(ee),climbingType:e(S),trainingTypes:e(se),difficulty:e(W),categories:e(w),energySystems:e(D),techniqueFocuses:e(J),fingerLoad:e(te),shoulderLoad:e($),forearmLoad:e(x),openGrip:e(Z),crimpGrip:e(j),pinchGrip:e(h),sloperGrip:e(q),jugGrip:e(N),climbs:e(z)};localStorage.setItem(le,JSON.stringify(n))}),ga(()=>{e(y)&&(t(p,""),t(ee,!1))});function ae(){e(p)==="Other"&&(t(ee,!0),t(p,""))}function ke(){t(ee,!1),t(p,"")}function $e(){t(z,[...e(z),{isSport:!1,name:"",grade:"",attemptType:"Flash",attemptsNum:1,notes:""}],!0)}function We(n){t(z,e(z).filter((i,P)=>P!==n),!0)}function Je(n,i){e(z)[n].attemptType=i,(i==="Flash"||i==="Onsight")&&(e(z)[n].attemptsNum=1)}function me(n){t(G,n,!0)}function Fe(){t(G,null)}let Ee=At(()=>e(S)==="Trad");function Qe(n){return e(S)==="Sport"?!0:e(S)==="Boulder"?!1:n.isSport}function ue(n){return n.trim()?R.includes(n.trim().toLowerCase()):!0}let ne=b("idle"),ve=b("");function je(){return e(y)?e(p)?e(S)?e(z).filter(i=>i.grade.trim()&&!ue(i.grade)).length>0?"Please fix invalid grades":null:"Please select a climbing type":"Please select a crag":"Please select an area"}async function ye(){const n=je();if(n){t(ne,"error"),t(ve,n,!0);return}t(ne,"saving");try{const i=e(z).map(ge=>({...ge,isSport:Qe(ge)})),P={date:e(k),area:e(y),crag:e(p),sector:e(m)||void 0,climbingType:e(S),trainingTypes:e(se),difficulty:e(W),categories:e(w),energySystems:e(D),techniqueFocuses:e(J),fingerLoad:e(te),shoulderLoad:e($),forearmLoad:e(x),openGrip:e(Z),crimpGrip:e(j),pinchGrip:e(h),sloperGrip:e(q),jugGrip:e(N),climbs:i},we=$a(P);if(ua()){const ge=await Qa(P);ge.ok?(ha(we.id,ge.id),Sa(ge.id),t(ne,"success"),t(ve,"Session saved and synced!"),localStorage.removeItem(le)):(ka(we.id),t(ne,"success"),t(ve,"Saved locally. Sync failed: "+(ge.error||"Unknown error")),localStorage.removeItem(le))}else t(ne,"success"),t(ve,"Saved locally. Will sync when online."),localStorage.removeItem(le);window.dispatchEvent(new CustomEvent("session-saved")),setTimeout(()=>{Ue()},2e3)}catch(i){t(ne,"error"),t(ve,"Failed to save session"),console.error("Save error:",i)}}function Ue(){t(k,new Date().toISOString().split("T")[0],!0),t(y,""),t(p,""),t(m,""),t(S,""),t(se,["None"],!0),t(W,"None"),t(w,["None"],!0),t(D,["None"],!0),t(J,["None"],!0),t(te,3),t($,3),t(x,3),t(Z,3),t(j,3),t(h,3),t(q,3),t(N,3),t(z,[{isSport:!1,name:"",grade:"",attemptType:"Flash",attemptsNum:1,notes:""}],!0),t(ne,"idle"),t(ve,"")}var Oe=Ds(),Ke=s(l(Oe),2),st=l(Ke),T=s(l(st),2);V(T),a(st);var O=s(st,2),v=s(l(O),2),f=l(v);f.value=f.__value="";var C=s(f);de(C,17,()=>u,_e,(n,i)=>{var P=xs(),we=l(P,!0);a(P);var ge={};I(()=>{Q(we,e(i)),ge!==(ge=e(i))&&(P.value=(P.__value=e(i))??"")}),r(n,P)}),a(v),a(O),a(Ke);var K=s(Ke,2),oe=l(K),Le=s(l(oe),2);{var et=n=>{var i=qs(),P=l(i);V(P);var we=s(P,2);we.__click=ke,a(i),M(P,()=>e(p),ge=>t(p,ge)),r(n,i)},Ct=n=>{var i=Ns();i.__change=ae;var P=l(i),we=l(P,!0);a(P),P.value=P.__value="";var ge=s(P);de(ge,17,()=>e(Y),_e,(it,Re)=>{var ct=Cs(),zt=l(ct,!0);a(ct);var Et={};I(()=>{Q(zt,e(Re)),Et!==(Et=e(Re))&&(ct.value=(ct.__value=e(Re))??"")}),r(it,ct)});var mt=s(ge);{var qt=it=>{var Re=Ts();Re.value=Re.__value="Other",r(it,Re)};E(mt,it=>{e(y)&&it(qt)})}a(i),I(()=>{i.disabled=!e(y),Q(we,e(y)?"Select crag...":"Select area first...")}),ot(i,()=>e(p),it=>t(p,it)),r(n,i)};E(Le,n=>{e(ee)?n(et):n(Ct,!1)})}a(oe);var kt=s(oe,2),Tt=s(l(kt),2);V(Tt),a(kt),a(K);var pe=s(K,2),Ge=s(l(pe),2),Ce=l(Ge);Ce.value=Ce.__value="";var Te=s(Ce);de(Te,17,()=>B,_e,(n,i)=>{var P=Fs(),we=l(P,!0);a(P);var ge={};I(()=>{Q(we,e(i)),ge!==(ge=e(i))&&(P.value=(P.__value=e(i))??"")}),r(n,P)}),a(Ge),a(pe);var qe=s(pe,2),Ne=s(l(qe),2),he=l(Ne),Be=s(l(he),2);V(Be),Me(2),a(he);var tt=s(he,2),Xe=s(l(tt),2);V(Xe),Me(2),a(tt);var Ae=s(tt,2),vt=s(l(Ae),2);V(vt),Me(2),a(Ae),a(Ne);var ft=s(Ne,4),Nt=l(ft),wt=s(l(Nt),2);V(wt),Me(2),a(Nt);var lt=s(Nt,2),xt=s(l(lt),2);V(xt),Me(2),a(lt);var Ft=s(lt,2),It=s(l(Ft),2);V(It),Me(2),a(Ft);var Ot=s(Ft,2),ze=s(l(Ot),2);V(ze),Me(2),a(Ot);var Ze=s(Ot,2),_t=s(l(Ze),2);V(_t),Me(2),a(Ze),a(ft),a(qe);var Lt=s(qe,2),Dt=s(l(Lt),2),Vt=l(Dt),wa=s(l(Vt),2);Gt(wa,{get options(){return _},get selected(){return e(se)},placeholder:"Select types...",onChange:n=>t(se,n,!0)}),a(Vt);var Pt=s(Vt,2),Zt=s(l(Pt),2);de(Zt,21,()=>F,_e,(n,i)=>{var P=Os(),we=l(P,!0);a(P);var ge={};I(()=>{Q(we,e(i)),ge!==(ge=e(i))&&(P.value=(P.__value=e(i))??"")}),r(n,P)}),a(Zt),a(Pt);var Bt=s(Pt,2),ea=s(l(Bt),2);Gt(ea,{get options(){return g},get selected(){return e(w)},placeholder:"Select categories...",onChange:n=>t(w,n,!0)}),a(Bt);var Mt=s(Bt,2),ta=s(l(Mt),2);Gt(ta,{get options(){return U},get selected(){return e(D)},placeholder:"Select systems...",onChange:n=>t(D,n,!0)}),a(Mt);var aa=s(Mt,2),xa=s(l(aa),2);Gt(xa,{get options(){return re},get selected(){return e(J)},placeholder:"Select focus...",onChange:n=>t(J,n,!0)}),a(aa),a(Dt),a(Lt);var sa=s(Lt,2),$t=s(l(sa),2),pa=l($t),Ut=l(pa),la=l(Ut),qa=l(la);{var Wt=n=>{var i=Ls();r(n,i)};E(qa,n=>{e(Ee)&&n(Wt)})}Me(6),a(la),a(Ut);var fa=s(Ut);de(fa,21,()=>e(z),_e,(n,i,P)=>{var we=As(),ge=l(we);{var mt=xe=>{var bt=Gs(),jt=l(bt);V(jt),a(bt),Aa(jt,()=>e(i).isSport,Ta=>e(i).isSport=Ta),r(xe,bt)};E(ge,xe=>{e(Ee)&&xe(mt)})}var qt=s(ge),it=l(qt);V(it),a(qt);var Re=s(qt),ct=l(Re);V(ct);let zt;var Et=s(ct,2);{var Jt=xe=>{var bt=zs();r(xe,bt)};E(Et,xe=>{ue(e(i).grade)||xe(Jt)})}a(Re);var Kt=s(Re),gt=l(Kt);gt.__change=xe=>Je(P,xe.target.value),de(gt,21,()=>L,_e,(xe,bt)=>{var jt=Es(),Ta=l(jt,!0);a(jt);var Ga={};I(()=>{Q(Ta,e(bt)),Ga!==(Ga=e(bt))&&(jt.value=(jt.__value=e(bt))??"")}),r(xe,jt)}),a(gt);var ra;Oa(gt),a(Kt);var ia=s(Kt),oa=l(ia);V(oa),a(ia);var fe=s(ia);let at;var dt=l(fe);za(dt),a(fe);var Ht=s(fe),ma=l(Ht);{var Ia=xe=>{var bt=js();bt.__click=()=>We(P),r(xe,bt)};E(ma,xe=>{e(z).length>1&&xe(Ia)})}a(Ht),a(we),I(xe=>{zt=Ye(ct,1,"grade-input svelte-15o2ys1",null,zt,xe),ra!==(ra=e(i).attemptType)&&(gt.value=(gt.__value=e(i).attemptType)??"",La(gt,e(i).attemptType)),oa.disabled=e(i).attemptType==="Flash",at=Ye(fe,1,"notes-cell svelte-15o2ys1",null,at,{expanded:e(G)===P})},[()=>({invalid:!ue(e(i).grade)})]),M(it,()=>e(i).name,xe=>e(i).name=xe),M(ct,()=>e(i).grade,xe=>e(i).grade=xe),M(oa,()=>e(i).attemptsNum,xe=>e(i).attemptsNum=xe),X("focus",dt,()=>me(P)),X("blur",dt,Fe),M(dt,()=>e(i).notes,xe=>e(i).notes=xe),r(n,we)}),a(fa),a(pa),a($t);var Ca=s($t,2);Ca.__click=$e,a(sa);var _a=s(sa,2),c=l(_a);{var o=n=>{var i=Is();let P;var we=l(i,!0);a(i),I(()=>{P=Ye(i,1,"save-message svelte-15o2ys1",null,P,{success:e(ne)==="success",error:e(ne)==="error"}),Q(we,e(ve))}),r(n,i)};E(c,n=>{e(ve)&&n(o)})}var ie=s(c,2);ie.__click=ye;var Ie=l(ie);{var Se=n=>{var i=Ve("Saving...");r(n,i)},rt=n=>{var i=yt(),P=pt(i);{var we=mt=>{var qt=Ve("‚úì Saved!");r(mt,qt)},ge=mt=>{var qt=Ve("Save Session");r(mt,qt)};E(P,mt=>{e(ne)==="success"?mt(we):mt(ge,!1)},!0)}r(n,i)};E(Ie,n=>{e(ne)==="saving"?n(Se):n(rt,!1)})}a(ie),a(_a),a(Oe),I(()=>ie.disabled=e(ne)==="saving"),M(T,()=>e(k),n=>t(k,n)),ot(v,()=>e(y),n=>t(y,n)),M(Tt,()=>e(m),n=>t(m,n)),ot(Ge,()=>e(S),n=>t(S,n)),M(Be,()=>e(te),n=>t(te,n)),M(Xe,()=>e($),n=>t($,n)),M(vt,()=>e(x),n=>t(x,n)),M(wt,()=>e(Z),n=>t(Z,n)),M(xt,()=>e(j),n=>t(j,n)),M(It,()=>e(h),n=>t(h,n)),M(ze,()=>e(q),n=>t(q,n)),M(_t,()=>e(N),n=>t(N,n)),ot(Zt,()=>e(W),n=>t(W,n)),r(be,Oe),St()}Qt(["click","change"]);var Bs=d('<div><div class="col set-num svelte-ow8x7m"> </div> <div class="col prev svelte-ow8x7m"><!></div> <div class="col weight svelte-ow8x7m"><input type="number" class="svelte-ow8x7m"/></div> <div class="col reps svelte-ow8x7m"><input type="number" class="svelte-ow8x7m"/></div> <div class="col check svelte-ow8x7m"><button><!></button></div></div>');function Rs(be,A){ht(A,!1);let u=nt(A,"setNumber",8),B=nt(A,"prevSet",8,null),L=nt(A,"set",12);const _=da();function F(){L(L().completed=!L().completed,!0),_("change",L()),L().completed&&_("complete")}function g(x){_("focus",{field:x,value:L()[x],set:L()})}Xt();var U=Bs();let re;var H=l(U),R=l(H,!0);a(H);var G=s(H,2),k=l(G);{var y=x=>{var Z=Ve();I(()=>Q(Z,`${De(B()),ce(()=>B().weight)??""}kg x ${De(B()),ce(()=>B().reps)??""}`)),r(x,Z)},p=x=>{var Z=Ve("-");r(x,Z)};E(k,x=>{B()?x(y):x(p,!1)})}a(G);var m=s(G,2),S=l(m);V(S),a(m);var se=s(m,2),W=l(se);V(W),a(se);var w=s(se,2),D=l(w);let J;var te=l(D);{var $=x=>{var Z=Ve("‚úì");r(x,Z)};E(te,x=>{De(L()),ce(()=>L().completed)&&x($)})}a(D),a(w),a(U),I((x,Z)=>{re=Ye(U,1,"set-row svelte-ow8x7m",null,re,{completed:L().completed}),Q(R,u()),ut(S,"placeholder",x),ut(W,"placeholder",Z),J=Ye(D,1,"check-btn svelte-ow8x7m",null,J,{checked:L().completed})},[()=>(De(B()),ce(()=>B()?B().weight.toString():"-")),()=>(De(B()),ce(()=>B()?B().reps.toString():"-"))]),M(S,()=>L().weight,x=>L(L().weight=x,!0)),X("focus",S,()=>g("weight")),M(W,()=>L().reps,x=>L(L().reps=x,!0)),X("focus",W,()=>g("reps")),X("click",D,F),r(be,U),St()}var Ps=d('<div class="exercise-card svelte-1ni79z8"><div class="header svelte-1ni79z8"><div class="title-group svelte-1ni79z8"><button class="icon-btn info-btn svelte-1ni79z8" aria-label="Exercise Info"><div class="info-icon svelte-1ni79z8">?</div></button> <h4 class="svelte-1ni79z8"> </h4></div> <button class="icon-btn delete-btn svelte-1ni79z8" aria-label="Delete Exercise">üóëÔ∏è</button></div> <div class="table-header svelte-1ni79z8"><div class="col">Set</div> <div class="col">Previous</div> <div class="col">kg</div> <div class="col">Reps</div> <div class="col">‚úì</div></div> <div class="sets"></div> <button class="add-set-btn svelte-1ni79z8">+ Add Set</button></div>');function Ms(be,A){ht(A,!1);let u=nt(A,"exercise",12),B=nt(A,"prevExercise",8,void 0);const L=da();function _(){const p=u().sets[u().sets.length-1],m={weight:p?p.weight:0,reps:p?p.reps:0,isWarmup:!1,isFailure:!1,isDropSet:!1,completed:!1};u(u().sets=[...u().sets,m],!0)}Xt();var F=Ps(),g=l(F),U=l(g),re=l(U),H=s(re,2),R=l(H,!0);a(H),a(U);var G=s(U,2);a(g);var k=s(g,4);de(k,5,()=>(De(u()),ce(()=>u().sets)),_e,(p,m,S)=>{{let se=Na(()=>(De(B()),ce(()=>B()?.sets[S]||null)));Rs(p,{setNumber:S+1,get prevSet(){return e(se)},get set(){return(De(u()),ce(()=>u().sets))[S]},set set(W){(De(u()),ce(()=>u().sets))[S]=W,Ea(()=>u())},$$events:{complete(W){Rt.call(this,A,W)},focus(W){Rt.call(this,A,W)},change(W){Rt.call(this,A,W)}},$$legacy:!0})}}),a(k);var y=s(k,2);a(F),I(()=>Q(R,(De(u()),ce(()=>u().name)))),X("click",re,()=>L("info",u())),X("click",G,()=>L("delete",u())),X("click",y,_),r(be,F),St()}var $s=d('<div class="keypad svelte-1fay4f8"><div class="header svelte-1fay4f8"><span class="label svelte-1fay4f8"> </span> <div class="display svelte-1fay4f8" role="textbox" aria-readonly="true"> </div></div> <div class="quick-adds svelte-1fay4f8"><button class="svelte-1fay4f8">+2.5</button> <button class="svelte-1fay4f8">+5</button> <button class="svelte-1fay4f8">+10</button></div> <div class="grid svelte-1fay4f8"><button class="svelte-1fay4f8">1</button> <button class="svelte-1fay4f8">2</button> <button class="svelte-1fay4f8">3</button> <button class="svelte-1fay4f8">4</button> <button class="svelte-1fay4f8">5</button> <button class="svelte-1fay4f8">6</button> <button class="svelte-1fay4f8">7</button> <button class="svelte-1fay4f8">8</button> <button class="svelte-1fay4f8">9</button> <button class="action svelte-1fay4f8">C</button> <button class="svelte-1fay4f8">0</button> <button class="action svelte-1fay4f8">‚å´</button></div></div>');function Us(be,A){ht(A,!1);let u=nt(A,"value",8,null),B=nt(A,"label",8,"Value");const L=da();function _(Y){const ee=u()?.toString()||"";if(ee.length>=5)return;const le=parseFloat(ee+Y.toString());L("change",le)}function F(){L("change",0)}function g(){const Y=u()?.toString()||"";if(Y.length<=1){L("change",0);return}const ee=parseFloat(Y.slice(0,-1));L("change",ee)}function U(Y){L("change",(u()||0)+Y)}Xt();var re=$s(),H=l(re),R=l(H),G=l(R,!0);a(R);var k=s(R,2),y=l(k,!0);a(k),a(H);var p=s(H,2),m=l(p),S=s(m,2),se=s(S,2);a(p);var W=s(p,2),w=l(W),D=s(w,2),J=s(D,2),te=s(J,2),$=s(te,2),x=s($,2),Z=s(x,2),j=s(Z,2),h=s(j,2),q=s(h,2),N=s(q,2),z=s(N,2);a(W),a(re),I(()=>{Q(G,B()),ut(k,"aria-label",B()),Q(y,u()||0)}),X("click",m,()=>U(2.5)),X("click",S,()=>U(5)),X("click",se,()=>U(10)),X("click",w,()=>_(1)),X("click",D,()=>_(2)),X("click",J,()=>_(3)),X("click",te,()=>_(4)),X("click",$,()=>_(5)),X("click",x,()=>_(6)),X("click",Z,()=>_(7)),X("click",j,()=>_(8)),X("click",h,()=>_(9)),X("click",q,F),X("click",N,()=>_(0)),X("click",z,g),r(be,re),St()}var Ws=d('<div class="rest-timer svelte-18i4gcv"><div class="timer-display svelte-18i4gcv"><span class="label svelte-18i4gcv">Rest</span> <span class="time svelte-18i4gcv"> </span></div> <div class="controls svelte-18i4gcv"><button class="svelte-18i4gcv">-30</button> <button class="svelte-18i4gcv">+30</button> <button class="skip svelte-18i4gcv">Skip</button></div></div>');function Js(be,A){ht(A,!1);const u=Pe(),B=Pe();let L=nt(A,"duration",8,90),_=nt(A,"onComplete",8,()=>{}),F=Pe(L()),g,U=nt(A,"visible",12,!0);function re(){clearInterval(g),t(F,L()),g=setInterval(()=>{Va(F,-1),e(F)<=0&&(clearInterval(g),_()())},1e3)}function H(m){t(F,e(F)+m)}function R(m){e(F)>m&&t(F,e(F)-m)}function G(){U(!1),clearInterval(g),_()()}ca(()=>{re()}),ja(()=>{clearInterval(g)}),Yt(()=>e(F),()=>{t(u,Math.floor(e(F)/60))}),Yt(()=>e(F),()=>{t(B,e(F)%60)}),Fa(),Xt();var k=yt(),y=pt(k);{var p=m=>{var S=Ws(),se=l(S),W=s(l(se),2),w=l(W);a(W),a(se);var D=s(se,2),J=l(D),te=s(J,2),$=s(te,2);a(D),a(S),I(x=>Q(w,`${e(u)??""}:${x??""}`),[()=>(e(B),ce(()=>e(B).toString().padStart(2,"0")))]),X("click",J,()=>R(30)),X("click",te,()=>H(30)),X("click",$,G),va(3,S,()=>ba,()=>({y:50,duration:300})),r(m,S)};E(y,m=>{U()&&m(p)})}r(be,k),St()}var Ks=d("<img/>"),Hs=d('<div class="animation-frame svelte-zbmy0k"></div>'),Ys=d('<div class="visual-placeholder svelte-zbmy0k"><span>No animation available</span></div>'),Qs=d("<li> </li>"),Xs=d('<div class="modal-overlay svelte-zbmy0k" role="button" tabindex="0" aria-label="Close modal"><div class="modal-content svelte-zbmy0k" role="dialog" aria-modal="true" tabindex="-1"><div class="header svelte-zbmy0k"><h3 class="svelte-zbmy0k"> </h3> <span class="category svelte-zbmy0k"> </span> <button class="close-btn svelte-zbmy0k" aria-label="Close">√ó</button></div> <div class="visual-container svelte-zbmy0k"><!> <div class="muscles svelte-zbmy0k"> </div></div> <div class="instructions svelte-zbmy0k"><h4>Instructions</h4> <ol class="svelte-zbmy0k"></ol></div></div></div>');function Zs(be,A){ht(A,!1);let u=nt(A,"exercise",8),B=nt(A,"visible",8,!1);const L=da();let _=Pe(0),F;function g(){u().images&&u().images.length>0&&(t(_,0),F=setInterval(()=>{t(_,(e(_)+1)%u().images.length)},800))}function U(){F&&clearInterval(F)}ja(()=>{U()});function re(){L("close")}Yt(()=>(De(B()),De(u())),()=>{B()&&u().images?.length?g():U()}),Fa(),Xt();var H=yt(),R=pt(H);{var G=k=>{var y=Xs(),p=l(y),m=l(p),S=l(m),se=l(S,!0);a(S);var W=s(S,2),w=l(W,!0);a(W);var D=s(W,2);a(m);var J=s(m,2),te=l(J);{var $=N=>{var z=Hs();de(z,5,()=>(De(u()),ce(()=>u().images)),_e,(Y,ee,le)=>{var ae=Ks();let ke;I(()=>{ut(ae,"src",`${rs??""}${e(ee)??""}`),ut(ae,"alt",`${De(u()),ce(()=>u().name)??""} frame ${le+1}`),ke=Ye(ae,1,"svelte-zbmy0k",null,ke,{active:le===e(_)})}),r(Y,ae)}),a(z),r(N,z)},x=N=>{var z=Ys();r(N,z)};E(te,N=>{De(u()),ce(()=>u().images&&u().images.length>0)?N($):N(x,!1)})}var Z=s(te,2),j=l(Z);a(Z),a(J);var h=s(J,2),q=s(l(h),2);de(q,5,()=>(De(u()),ce(()=>u().instructions)),_e,(N,z)=>{var Y=Qs(),ee=l(Y,!0);a(Y),I(()=>Q(ee,e(z))),r(N,Y)}),a(q),a(h),a(p),a(y),I(N=>{Q(se,(De(u()),ce(()=>u().name))),Q(w,(De(u()),ce(()=>u().category))),Q(j,`Targets: ${N??""}`)},[()=>(De(u()),ce(()=>u().targetMuscles.join(", ")))]),X("click",D,re),va(3,p,()=>ba,()=>({y:50,duration:300})),X("click",p,ya(function(N){Rt.call(this,A,N)})),X("keydown",p,ya(function(N){Rt.call(this,A,N)})),X("click",y,re),X("keydown",y,N=>N.key==="Escape"&&re()),r(k,y)};E(R,k=>{B()&&k(G)})}r(be,H),St()}var el=d("<span>Saved! ‚úì</span>"),tl=d("<button><!></button>"),al=d("<button> </button>"),sl=d('<div class="tabs-scroll-container svelte-1w0zsmt"><div class="tabs-header svelte-1w0zsmt"></div></div>'),ll=d('<button class="exercise-item svelte-1w0zsmt"><span class="name svelte-1w0zsmt"> </span> <span class="details svelte-1w0zsmt"> </span></button>'),rl=d('<div class="no-results svelte-1w0zsmt">No exercises found</div>'),il=d('<div class="search-results svelte-1w0zsmt"><!> <!></div>'),ol=d('<button class="exercise-item-dence svelte-1w0zsmt"> </button>'),nl=d('<div class="subcategory-column svelte-1w0zsmt"><h4 class="subcategory-title svelte-1w0zsmt"> </h4> <div class="subcategory-list svelte-1w0zsmt"></div></div>'),vl=d('<div class="subcategory-grid svelte-1w0zsmt"></div>'),cl=d('<div class="modal-overlay svelte-1w0zsmt" role="button" tabindex="0" aria-label="Close modal"><div class="picker-modal svelte-1w0zsmt" role="dialog" aria-modal="true" tabindex="-1"><div class="picker-header svelte-1w0zsmt"><h3>Add Exercise</h3> <div class="search-row svelte-1w0zsmt"><input type="text" placeholder="Search exercises..." class="svelte-1w0zsmt"/></div> <!></div> <div class="picker-content svelte-1w0zsmt"><!></div></div></div>'),dl=d('<div class="keypad-overlay svelte-1w0zsmt"><div class="keypad-header svelte-1w0zsmt"><span> </span> <button class="svelte-1w0zsmt">Done</button></div> <!></div>'),ul=d('<div class="gym-session-form svelte-1w0zsmt"><div class="session-meta svelte-1w0zsmt"><input type="text" class="session-name svelte-1w0zsmt" placeholder="Workout Name (e.g. Pull Day)"/> <div class="meta-row svelte-1w0zsmt"><label class="svelte-1w0zsmt">Date <input type="date" class="svelte-1w0zsmt"/></label> <label class="svelte-1w0zsmt">Bodyweight (kg) <input type="number" placeholder="Optional" class="svelte-1w0zsmt"/></label> <label class="svelte-1w0zsmt">Block <select class="svelte-1w0zsmt"><option>Strength</option><option>Power</option><option>Power Endurance</option><option>Muscular Endurance</option></select></label></div></div> <div class="exercises-list"></div> <button class="add-exercise-btn svelte-1w0zsmt">+ Add Exercise</button> <!> <!> <!> <!> <!> <!></div>');function pl(be,A){ht(A,!1);const u=Pe(),B=da(),L="gym_session_draft";let _=Pe(""),F=Pe(),g=Pe([]),U=Pe(new Date().toISOString().split("T")[0]),re=Pe("Strength"),H=Pe(null),R=Pe(!1),G=Pe(""),k=Pe(""),y=Pe(null),p=Pe(!1),m=Pe(null),S=Pe(null),se=Pe(!1);ca(()=>{const T=localStorage.getItem(L);if(T)try{const O=JSON.parse(T);O.sessionName&&t(_,O.sessionName),O.bodyweight&&t(F,O.bodyweight),O.startTime&&t(U,O.startTime.split("T")[0]),O.trainingBlock&&t(re,O.trainingBlock),O.exercises&&t(g,O.exercises)}catch(O){console.error("Failed to restore draft",O)}});const W=Array.from(new Set(na.map(T=>T.category))).sort();function w(T){const O={id:crypto.randomUUID(),name:T.name,sets:[{weight:0,reps:0,isWarmup:!1,isFailure:!1,isDropSet:!1,completed:!1}]};t(g,[...e(g),O]),t(R,!1),t(G,""),t(k,"")}function D(T,O,v){t(y,{exerciseIndex:O,setIndex:v,field:T.detail.field})}function J(T){if(!e(y))return;const{exerciseIndex:O,setIndex:v,field:f}=e(y);Ba(g,e(g)[O].sets[v][f]=T.detail),t(g,[...e(g)])}function te(){t(p,!0)}function $(){e(g).length!==0&&(Ua({date:e(U),name:e(_)||"Gym Workout",bodyweight:e(F),trainingBlock:e(re),exercises:e(g)}),t(se,!0),localStorage.removeItem(L),setTimeout(()=>{t(se,!1),B("save")},1500))}function x(){t(y,null)}Yt(()=>(e(re),e(U)),()=>{const O=Wa().filter(v=>(v.trainingBlock||"Strength")===e(re)&&v.date<e(U));O.sort((v,f)=>new Date(f.date).getTime()-new Date(v.date).getTime()),t(H,O.length>0?O[0]:null)}),Yt(()=>(e(_),e(F),e(U),e(re),e(g)),()=>{if(typeof localStorage<"u"){const T={sessionName:e(_),bodyweight:e(F),startTime:e(U),trainingBlock:e(re),exercises:e(g)};localStorage.setItem(L,JSON.stringify(T))}}),Yt(()=>(e(G),e(k)),()=>{t(u,na.filter(T=>{const O=T.name.toLowerCase().includes(e(G).toLowerCase())||T.targetMuscles.some(f=>f.toLowerCase().includes(e(G).toLowerCase())),v=e(k)?T.category===e(k):!0;return O&&v}))}),Fa(),Xt();var Z=ul(),j=l(Z),h=l(j);V(h);var q=s(h,2),N=l(q),z=s(l(N));V(z),a(N);var Y=s(N,2),ee=s(l(Y));V(ee),a(Y);var le=s(Y,2),ae=s(l(le));I(()=>{e(re),Ea(()=>{})});var ke=l(ae);ke.value=ke.__value="Strength";var $e=s(ke);$e.value=$e.__value="Power";var We=s($e);We.value=We.__value="Power Endurance";var Je=s(We);Je.value=Je.__value="Muscular Endurance",a(ae),a(le),a(q),a(j);var me=s(j,2);de(me,5,()=>e(g),_e,(T,O,v)=>{{let f=Na(()=>(e(H),e(O),ce(()=>e(H)?.exercises.find(C=>C.name===e(O).name))));Ms(T,{get exercise(){return e(O)},get prevExercise(){return e(f)},$$events:{focus:C=>D(C,v,e(g)[v].sets.indexOf(C.detail.set)),complete:te,delete:()=>{t(S,v)},info:()=>{const C=na.find(K=>K.name===e(O).name);C&&t(m,C)}}})}}),a(me);var Fe=s(me,2),Ee=s(Fe,2);{var Qe=T=>{var O=tl();let v;var f=l(O);{var C=oe=>{var Le=el();r(oe,Le)},K=oe=>{var Le=Ve("Finish Workout");r(oe,Le)};E(f,oe=>{e(se)?oe(C):oe(K,!1)})}a(O),I(()=>{v=Ye(O,1,"save-btn svelte-1w0zsmt",null,v,{success:e(se)}),O.disabled=e(se)}),X("click",O,$),r(T,O)};E(Ee,T=>{e(g),ce(()=>e(g).length>0)&&T(Qe)})}var ue=s(Ee,2);{var ne=T=>{var O=cl(),v=l(O),f=l(v),C=s(l(f),2),K=l(C);V(K),a(C);var oe=s(C,2);{var Le=pe=>{var Ge=sl(),Ce=l(Ge);de(Ce,5,()=>W,_e,(Te,qe)=>{var Ne=al();let he;var Be=l(Ne,!0);a(Ne),I(()=>{he=Ye(Ne,1,"tab-btn svelte-1w0zsmt",null,he,{active:e(k)===e(qe)}),Q(Be,e(qe))}),X("click",Ne,()=>t(k,e(qe))),r(Te,Ne)}),a(Ce),a(Ge),r(pe,Ge)};E(oe,pe=>{e(G)||pe(Le)})}a(f);var et=s(f,2),Ct=l(et);{var kt=pe=>{var Ge=il(),Ce=l(Ge);de(Ce,1,()=>e(u),_e,(Ne,he)=>{var Be=ll(),tt=l(Be),Xe=l(tt,!0);a(tt);var Ae=s(tt,2),vt=l(Ae);a(Ae),a(Be),I(()=>{Q(Xe,(e(he),ce(()=>e(he).name))),Q(vt,`${e(he),ce(()=>e(he).category)??""} - ${e(he),ce(()=>e(he).subcategory)??""}`)}),X("click",Be,()=>w(e(he))),r(Ne,Be)});var Te=s(Ce,2);{var qe=Ne=>{var he=rl();r(Ne,he)};E(Te,Ne=>{e(u),ce(()=>e(u).length===0)&&Ne(qe)})}a(Ge),r(pe,Ge)},Tt=pe=>{var Ge=vl();de(Ge,5,()=>(De(na),e(k),ce(()=>Object.entries(na.filter(Ce=>Ce.category===e(k)).reduce((Ce,Te)=>(Ce[Te.subcategory]||(Ce[Te.subcategory]=[]),Ce[Te.subcategory].push(Te),Ce),{})))),_e,(Ce,Te,qe,Ne)=>{var he=At(()=>Ra(e(Te),2));let Be=()=>e(he)[0],tt=()=>e(he)[1];var Xe=nl(),Ae=l(Xe),vt=l(Ae,!0);a(Ae);var ft=s(Ae,2);de(ft,5,tt,_e,(Nt,wt)=>{var lt=ol(),xt=l(lt,!0);a(lt),I(()=>Q(xt,(e(wt),ce(()=>e(wt).name)))),X("click",lt,()=>w(e(wt))),r(Nt,lt)}),a(ft),a(Xe),I(()=>Q(vt,Be())),r(Ce,Xe)}),a(Ge),r(pe,Ge)};E(Ct,pe=>{e(G)?pe(kt):pe(Tt,!1)})}a(et),a(v),a(O),M(K,()=>e(G),pe=>t(G,pe)),X("click",v,ya(function(pe){Rt.call(this,A,pe)})),X("keydown",v,ya(function(pe){Rt.call(this,A,pe)})),va(3,v,()=>ba,()=>({y:100,duration:300})),X("click",O,()=>t(R,!1)),X("keydown",O,pe=>pe.key==="Escape"&&t(R,!1)),va(3,O,()=>Za),r(T,O)};E(ue,T=>{e(R)&&T(ne)})}var ve=s(ue,2);{var je=T=>{Zs(T,{get exercise(){return e(m)},visible:!0,$$events:{close:()=>t(m,null)}})};E(ve,T=>{e(m)&&T(je)})}var ye=s(ve,2);{var Ue=T=>{var O=dl(),v=l(O),f=l(v),C=l(f);a(f);var K=s(f,2);a(v);var oe=s(v,2);{let Le=Na(()=>(e(y),ce(()=>e(y).field==="weight"?"Weight (kg)":"Reps")));Us(oe,{get value(){return e(g),e(y),ce(()=>e(g)[e(y).exerciseIndex].sets[e(y).setIndex][e(y).field])},get label(){return e(Le)},$$events:{change:J}})}a(O),I(()=>Q(C,`Editing ${e(g),e(y),ce(()=>e(g)[e(y).exerciseIndex].name)??""} - Set ${e(y),ce(()=>e(y).setIndex+1)??""}`)),X("click",K,x),va(3,O,()=>ba,()=>({y:200,duration:300})),r(T,O)};E(ye,T=>{e(y)&&T(Ue)})}var Oe=s(ye,2);Js(Oe,{get visible(){return e(p)},set visible(T){t(p,T)},$$legacy:!0});var Ke=s(Oe,2);{var st=T=>{es(T,{isOpen:!0,title:"Delete Exercise",get message(){return`Are you sure you want to delete ${e(g),e(S),ce(()=>e(g)[e(S)].name)??""}?`},requireInput:!1,onConfirm:()=>{e(S)!==null&&(t(g,e(g).filter((O,v)=>v!==e(S))),t(S,null))},onCancel:()=>t(S,null)})};E(Ke,T=>{e(S)!==null&&T(st)})}a(Z),M(h,()=>e(_),T=>t(_,T)),M(z,()=>e(U),T=>t(U,T)),M(ee,()=>e(F),T=>t(F,T)),ot(ae,()=>e(re),T=>t(re,T)),X("click",Fe,()=>t(R,!0)),r(be,Z),St()}var fl=d("<option> </option>"),_l=d("<option> </option>"),ml=d('<button class="remove-set-btn svelte-1m63nqt">‚úï</button>'),gl=d('<div class="set-row svelte-1m63nqt"><div class="input-wrap svelte-1m63nqt"><label class="svelte-1m63nqt">Weight</label> <input type="number" placeholder="0" class="svelte-1m63nqt"/></div> <div class="input-wrap svelte-1m63nqt"><label class="svelte-1m63nqt">Reps/Secs</label> <input type="number" placeholder="1" class="svelte-1m63nqt"/></div> <!></div>'),bl=d('<div class="exercise-card svelte-1m63nqt"><div class="card-header svelte-1m63nqt"><div class="header-inputs svelte-1m63nqt"><select class="svelte-1m63nqt"></select> <select class="svelte-1m63nqt"></select></div> <button class="remove-card-btn svelte-1m63nqt" title="Remove Exercise">‚úï</button></div> <div class="sets-list svelte-1m63nqt"><!> <button class="add-set-btn svelte-1m63nqt">+ Add Set</button></div> <div class="card-footer svelte-1m63nqt"><div class="meta-input svelte-1m63nqt"><label class="svelte-1m63nqt">Total Sets</label> <input type="number" readonly="" disabled class="svelte-1m63nqt"/></div> <div class="notes-input svelte-1m63nqt"><label class="svelte-1m63nqt">Notes</label> <input type="text" placeholder="Notes..." class="svelte-1m63nqt"/></div></div></div>'),yl=d("<div> </div>"),hl=d('<div class="form-content svelte-1m63nqt"><div class="header-row svelte-1m63nqt"><h3 class="svelte-1m63nqt">ü§è Fingerboarding</h3> <button class="add-row-btn svelte-1m63nqt">+ Add Exercise</button></div> <div class="form-group date-group svelte-1m63nqt"><label for="date">Date</label> <input type="date" id="date" class="svelte-1m63nqt"/></div> <div class="cards-container svelte-1m63nqt"></div> <div class="submit-section"><!> <button type="button" class="submit-btn svelte-1m63nqt"><!></button></div></div>');function Sl(be,A){ht(A,!0);const u=["Max hangs","Recruitment pulls","Max pick-ups"],B=["Full-crimp","Half-crimp","Three finger drag","Pinch","Open hand","Sloper"];let L=b(He(new Date().toISOString().split("T")[0])),_=b(He([]));function F(){t(_,[...e(_),{id:crypto.randomUUID(),name:u[0],gripType:B[1],sets:1,details:[{weight:0,reps:5}],notes:""}],!0)}ga(()=>{e(_).length===0&&F()});function g(j){t(_,e(_).filter((h,q)=>q!==j),!0)}function U(j){const h=e(_)[j],q=h.details[h.details.length-1];h.details=[...h.details,{...q}],h.sets=h.details.length}function re(j,h){const q=e(_)[j];q.details.length>1&&(q.details=q.details.filter((N,z)=>z!==h),q.sets=q.details.length)}let H=b("idle"),R=b("");async function G(){t(H,"saving");try{const j={date:e(L),location:"N/A",exercises:JSON.parse(JSON.stringify(e(_)))},h=Ja(j);if(ua()){const q=await ts(j);q.ok?(ha(h.id,q.id),Sa(q.id),t(H,"success"),t(R,"Session saved and synced!")):(ka(h.id),t(H,"success"),t(R,"Saved locally. Sync failed: "+(q.error||"Unknown error")))}else t(H,"success"),t(R,"Saved locally. Will sync when online.");window.dispatchEvent(new CustomEvent("session-saved")),setTimeout(()=>{k()},2e3)}catch(j){t(H,"error"),t(R,"Failed to save session"),console.error("Save error:",j)}}function k(){t(L,new Date().toISOString().split("T")[0],!0),t(_,[],!0),F(),t(H,"idle"),t(R,"")}var y=hl(),p=l(y),m=s(l(p),2);m.__click=F,a(p);var S=s(p,2),se=s(l(S),2);V(se),a(S);var W=s(S,2);de(W,21,()=>e(_),_e,(j,h,q)=>{var N=bl(),z=l(N),Y=l(z),ee=l(Y);de(ee,21,()=>u,_e,(ve,je)=>{var ye=fl(),Ue=l(ye,!0);a(ye);var Oe={};I(()=>{Q(Ue,e(je)),Oe!==(Oe=e(je))&&(ye.value=(ye.__value=e(je))??"")}),r(ve,ye)}),a(ee);var le=s(ee,2);de(le,21,()=>B,_e,(ve,je)=>{var ye=_l(),Ue=l(ye,!0);a(ye);var Oe={};I(()=>{Q(Ue,e(je)),Oe!==(Oe=e(je))&&(ye.value=(ye.__value=e(je))??"")}),r(ve,ye)}),a(le),a(Y);var ae=s(Y,2);ae.__click=()=>g(q),a(z);var ke=s(z,2),$e=l(ke);de($e,17,()=>e(h).details,_e,(ve,je,ye)=>{var Ue=gl(),Oe=l(Ue),Ke=l(Oe);ut(Ke,"for",`weight-${q}-${ye}`);var st=s(Ke,2);V(st),ut(st,"id",`weight-${q}-${ye}`),a(Oe);var T=s(Oe,2),O=l(T);ut(O,"for",`reps-${q}-${ye}`);var v=s(O,2);V(v),ut(v,"id",`reps-${q}-${ye}`),a(T);var f=s(T,2);{var C=K=>{var oe=ml();oe.__click=()=>re(q,ye),r(K,oe)};E(f,K=>{e(h).details.length>1&&K(C)})}a(Ue),M(st,()=>e(je).weight,K=>e(je).weight=K),M(v,()=>e(je).reps,K=>e(je).reps=K),r(ve,Ue)});var We=s($e,2);We.__click=()=>U(q),a(ke);var Je=s(ke,2),me=l(Je),Fe=l(me);ut(Fe,"for",`total-sets-${q}`);var Ee=s(Fe,2);V(Ee),ut(Ee,"id",`total-sets-${q}`),a(me);var Qe=s(me,2),ue=l(Qe);ut(ue,"for",`notes-${q}`);var ne=s(ue,2);V(ne),ut(ne,"id",`notes-${q}`),a(Qe),a(Je),a(N),I(()=>Pa(Ee,e(h).sets)),ot(ee,()=>e(h).name,ve=>e(h).name=ve),ot(le,()=>e(h).gripType,ve=>e(h).gripType=ve),M(ne,()=>e(h).notes,ve=>e(h).notes=ve),r(j,N)}),a(W);var w=s(W,2),D=l(w);{var J=j=>{var h=yl();let q;var N=l(h,!0);a(h),I(()=>{q=Ye(h,1,"save-message svelte-1m63nqt",null,q,{success:e(H)==="success",error:e(H)==="error"}),Q(N,e(R))}),r(j,h)};E(D,j=>{e(R)&&j(J)})}var te=s(D,2);te.__click=G;var $=l(te);{var x=j=>{var h=Ve("Saving...");r(j,h)},Z=j=>{var h=yt(),q=pt(h);{var N=Y=>{var ee=Ve("‚úì Saved!");r(Y,ee)},z=Y=>{var ee=Ve("Save Session");r(Y,ee)};E(q,Y=>{e(H)==="success"?Y(N):Y(z,!1)},!0)}r(j,h)};E($,j=>{e(H)==="saving"?j(x):j(Z,!1)})}a(te),a(w),a(y),I(()=>te.disabled=e(H)==="saving"),M(se,()=>e(L),j=>t(L,j)),r(be,y),St()}Qt(["click"]);var kl=d("<option> </option>"),wl=d('<input type="text" placeholder="Enter venue name" class="mt-2 svelte-1fje4dh"/>'),xl=d("<option> </option>"),ql=d("<option> </option>"),Cl=d('<input type="text" placeholder="Round name" class="mt-2 svelte-1fje4dh"/>'),Tl=d('<div class="result-mode-content svelte-1fje4dh"><div class="form-group svelte-1fje4dh"><label for="position" class="svelte-1fje4dh">Final Position</label> <input type="number" id="position" placeholder="#" class="large-input svelte-1fje4dh"/></div></div>'),Nl=d("<option> </option>"),Fl=d('<input type="number" min="1" class="svelte-1fje4dh"/>'),Ol=d('<span class="flash-dash">-</span>'),Ll=d('<tr><td class="col-name svelte-1fje4dh"><input type="text" class="svelte-1fje4dh"/></td><td class="col-status svelte-1fje4dh"><select class="svelte-1fje4dh"></select></td><td class="col-attempt svelte-1fje4dh"><!></td><td class="col-notes svelte-1fje4dh"><input type="text" placeholder="..." class="svelte-1fje4dh"/></td><td class="col-action svelte-1fje4dh"><button class="svelte-1fje4dh">‚úï</button></td></tr>'),Gl=d('<div class="load-metrics-compact svelte-1fje4dh"><div class="metric svelte-1fje4dh"><label for="finger">Finger Load</label> <input type="number" id="finger" min="0" max="5" step="0.5" class="svelte-1fje4dh"/></div> <div class="metric svelte-1fje4dh"><label for="shoulder">Shoulder Load</label> <input type="number" id="shoulder" min="0" max="5" step="0.5" class="svelte-1fje4dh"/></div> <div class="metric svelte-1fje4dh"><label for="forearm">Forearm Load</label> <input type="number" id="forearm" min="0" max="5" step="0.5" class="svelte-1fje4dh"/></div></div> <div class="climbs-table-container svelte-1fje4dh"><div class="section-header svelte-1fje4dh"><h4 class="svelte-1fje4dh">Boulders / Routes</h4></div> <table class="climbs-table svelte-1fje4dh"><thead><tr><th class="svelte-1fje4dh">#</th><th class="svelte-1fje4dh">Result</th><th class="svelte-1fje4dh">Att.</th><th class="svelte-1fje4dh">Notes</th><th class="svelte-1fje4dh"></th></tr></thead><tbody></tbody></table> <button class="add-row-btn svelte-1fje4dh">+ Add Row</button></div>',1),zl=d("<div> </div>"),El=d('<div class="form-content svelte-1fje4dh"><h3 class="svelte-1fje4dh">üèÜ Competition</h3> <div class="form-grid svelte-1fje4dh"><div class="form-group svelte-1fje4dh"><label for="date" class="svelte-1fje4dh">Date</label> <input type="date" id="date" class="svelte-1fje4dh"/></div> <div class="form-group svelte-1fje4dh"><label for="venue" class="svelte-1fje4dh">Venue</label> <select id="venue" class="svelte-1fje4dh"><option disabled>Select venue...</option><!></select> <!></div></div> <div class="form-group mb-4 svelte-1fje4dh"><label for="type" class="svelte-1fje4dh">Type</label> <select id="type" class="svelte-1fje4dh"></select></div> <div class="round-section svelte-1fje4dh"><div class="form-group svelte-1fje4dh"><label for="round" class="svelte-1fje4dh">Round</label> <select id="round" class="svelte-1fje4dh"></select> <!></div> <!></div> <div class="submit-section"><!> <button type="button" class="submit-btn svelte-1fje4dh"><!></button></div></div>');function jl(be,A){ht(A,!0);const u=["Flashpoint Bristol","Rockstar Techno","Rockstar Unit 3","Rockstar Unit 5","Bloc","TCA","Other"],B=["Bouldering","Lead","Speed"],L=["Qualifiers","Semi-Finals","Finals","Result","Other"],_=["Flash","Top","Zone","Attempt"];let F=b(He(new Date().toISOString().split("T")[0])),g=b(""),U=b(""),re=b("Bouldering"),H=b(4),R=b(4),G=b(4),k=b("Qualifiers"),y=b(""),p=b(null),m=b(He([{name:"#1",status:"Flash",attemptCount:1,notes:""}])),S=At(()=>e(k)==="Result"),se=At(()=>e(g)==="Other"),W=At(()=>e(k)==="Other"),w=At(()=>e(k)==="Other"?e(y):e(k));function D(){const v=e(m).length+1;t(m,[...e(m),{name:`#${v}`,status:"Flash",attemptCount:1,notes:""}],!0)}function J(v){e(m).length>1?t(m,e(m).filter((f,C)=>C!==v),!0):e(m)[0]={name:"#1",status:"Flash",attemptCount:1,notes:""}}function te(v,f){e(m)[v].status=f,f==="Flash"&&(e(m)[v].attemptCount=1)}let $=b("idle"),x=b("");async function Z(){if(!e(g)||e(g)==="Other"&&!e(U)){t($,"error"),t(x,"Please specify a venue");return}t($,"saving");try{const v={name:e(w),position:e(S)?e(p):void 0,climbs:e(S)?void 0:JSON.parse(JSON.stringify(e(m)))},f={date:e(F),venue:e(g)==="Other"?e(U):e(g),customVenue:e(g)==="Other"?e(U):void 0,type:e(re),fingerLoad:e(S)?void 0:e(H),shoulderLoad:e(S)?void 0:e(R),forearmLoad:e(S)?void 0:e(G),rounds:[v]},C=Ka(f);if(ua()){const K=await as(f);K.ok?(ha(C.id,K.id),Sa(K.id),t($,"success"),t(x,"Competition saved and synced!")):(ka(C.id),t($,"success"),t(x,"Saved locally. Sync failed: "+(K.error||"Unknown error")))}else t($,"success"),t(x,"Saved locally. Will sync when online.");window.dispatchEvent(new CustomEvent("session-saved")),setTimeout(()=>{j()},2e3)}catch(v){t($,"error"),t(x,"Failed to save session"),console.error("Save error:",v)}}function j(){t(F,new Date().toISOString().split("T")[0],!0),t(g,""),t(U,""),t(p,null),t(m,[{name:"#1",status:"Flash",attemptCount:1,notes:""}],!0),t($,"idle"),t(x,"")}var h=El(),q=s(l(h),2),N=l(q),z=s(l(N),2);V(z),a(N);var Y=s(N,2),ee=s(l(Y),2),le=l(ee);le.value=le.__value="";var ae=s(le);de(ae,17,()=>u,_e,(v,f)=>{var C=kl(),K=l(C,!0);a(C);var oe={};I(()=>{Q(K,e(f)),oe!==(oe=e(f))&&(C.value=(C.__value=e(f))??"")}),r(v,C)}),a(ee);var ke=s(ee,2);{var $e=v=>{var f=wl();V(f),M(f,()=>e(U),C=>t(U,C)),r(v,f)};E(ke,v=>{e(se)&&v($e)})}a(Y),a(q);var We=s(q,2),Je=s(l(We),2);de(Je,21,()=>B,_e,(v,f)=>{var C=xl(),K=l(C,!0);a(C);var oe={};I(()=>{Q(K,e(f)),oe!==(oe=e(f))&&(C.value=(C.__value=e(f))??"")}),r(v,C)}),a(Je),a(We);var me=s(We,2),Fe=l(me),Ee=s(l(Fe),2);de(Ee,21,()=>L,_e,(v,f)=>{var C=ql(),K=l(C,!0);a(C);var oe={};I(()=>{Q(K,e(f)),oe!==(oe=e(f))&&(C.value=(C.__value=e(f))??"")}),r(v,C)}),a(Ee);var Qe=s(Ee,2);{var ue=v=>{var f=Cl();V(f),M(f,()=>e(y),C=>t(y,C)),r(v,f)};E(Qe,v=>{e(W)&&v(ue)})}a(Fe);var ne=s(Fe,2);{var ve=v=>{var f=Tl(),C=l(f),K=s(l(C),2);V(K),a(C),a(f),M(K,()=>e(p),oe=>t(p,oe)),r(v,f)},je=v=>{var f=Gl(),C=pt(f),K=l(C),oe=s(l(K),2);V(oe),a(K);var Le=s(K,2),et=s(l(Le),2);V(et),a(Le);var Ct=s(Le,2),kt=s(l(Ct),2);V(kt),a(Ct),a(C);var Tt=s(C,2),pe=s(l(Tt),2),Ge=s(l(pe));de(Ge,21,()=>e(m),_e,(Te,qe,Ne)=>{var he=Ll(),Be=l(he),tt=l(Be);V(tt),a(Be);var Xe=s(Be),Ae=l(Xe);Ae.__change=ze=>te(Ne,ze.target.value),de(Ae,21,()=>_,_e,(ze,Ze)=>{var _t=Nl(),Lt=l(_t,!0);a(_t);var Dt={};I(()=>{Q(Lt,e(Ze)),Dt!==(Dt=e(Ze))&&(_t.value=(_t.__value=e(Ze))??"")}),r(ze,_t)}),a(Ae);var vt;Oa(Ae),a(Xe);var ft=s(Xe),Nt=l(ft);{var wt=ze=>{var Ze=Fl();V(Ze),M(Ze,()=>e(qe).attemptCount,_t=>e(qe).attemptCount=_t),r(ze,Ze)},lt=ze=>{var Ze=Ol();r(ze,Ze)};E(Nt,ze=>{e(qe).status!=="Flash"?ze(wt):ze(lt,!1)})}a(ft);var xt=s(ft),Ft=l(xt);V(Ft),a(xt);var It=s(xt),Ot=l(It);Ot.__click=()=>J(Ne),a(It),a(he),I(()=>{vt!==(vt=e(qe).status)&&(Ae.value=(Ae.__value=e(qe).status)??"",La(Ae,e(qe).status))}),M(tt,()=>e(qe).name,ze=>e(qe).name=ze),M(Ft,()=>e(qe).notes,ze=>e(qe).notes=ze),r(Te,he)}),a(Ge),a(pe);var Ce=s(pe,2);Ce.__click=D,a(Tt),M(oe,()=>e(H),Te=>t(H,Te)),M(et,()=>e(R),Te=>t(R,Te)),M(kt,()=>e(G),Te=>t(G,Te)),r(v,f)};E(ne,v=>{e(S)?v(ve):v(je,!1)})}a(me);var ye=s(me,2),Ue=l(ye);{var Oe=v=>{var f=zl();let C;var K=l(f,!0);a(f),I(()=>{C=Ye(f,1,"save-message svelte-1fje4dh",null,C,{success:e($)==="success",error:e($)==="error"}),Q(K,e(x))}),r(v,f)};E(Ue,v=>{e(x)&&v(Oe)})}var Ke=s(Ue,2);Ke.__click=Z;var st=l(Ke);{var T=v=>{var f=Ve("Saving...");r(v,f)},O=v=>{var f=yt(),C=pt(f);{var K=Le=>{var et=Ve("‚úì Saved!");r(Le,et)},oe=Le=>{var et=Ve("Save Session");r(Le,et)};E(C,Le=>{e($)==="success"?Le(K):Le(oe,!1)},!0)}r(v,f)};E(st,v=>{e($)==="saving"?v(T):v(O,!1)})}a(Ke),a(ye),a(h),I(()=>Ke.disabled=e($)==="saving"),M(z,()=>e(F),v=>t(F,v)),ot(ee,()=>e(g),v=>t(g,v)),ot(Je,()=>e(re),v=>t(re,v)),ot(Ee,()=>e(k),v=>t(k,v)),r(be,h),St()}Qt(["change","click"]);var Al=d('<span class="spinner svelte-b2zgdd"></span> Syncing...',1),Il=d("<button><!></button>"),Dl=d("<div> </div>"),Vl=d('<div><div class="sync-info svelte-b2zgdd"><span class="sync-icon svelte-b2zgdd"> </span> <span class="sync-text svelte-b2zgdd"><!></span></div> <!> <!></div>'),Bl=d("<option> </option>"),Rl=d('<div class="form-container svelte-b2zgdd"><!></div>'),Pl=d('<div class="page svelte-b2zgdd"><div class="page-header svelte-b2zgdd"><h1 class="svelte-b2zgdd">üìù Log Data</h1> <p class="subtitle svelte-b2zgdd">Record your training sessions</p></div> <!> <div class="content-card svelte-b2zgdd"><div class="form-group svelte-b2zgdd"><label for="activity-type" class="svelte-b2zgdd">Activity Type</label> <select id="activity-type" class="svelte-b2zgdd"><option disabled>Select an activity...</option><!></select></div> <!></div></div>');function er(be,A){ht(A,!0);const u=[{value:"indoor_climb",label:"Indoor Climb",icon:"üßó"},{value:"outdoor_climb",label:"Outdoor Climb",icon:"‚õ∞Ô∏è"},{value:"gym_session",label:"Gym Session",icon:"üèãÔ∏è"},{value:"fingerboarding",label:"Fingerboarding",icon:"ü§è"},{value:"competition",label:"Competition",icon:"üèÜ"}];let B=b(""),L=b(0),_=b("idle"),F=b(""),g=b(!0);ca(()=>{U(),t(g,ua(),!0);const w=()=>{t(g,!0),U()},D=()=>{t(g,!1)},J=()=>{U()};return window.addEventListener("online",w),window.addEventListener("offline",D),window.addEventListener("session-saved",J),()=>{window.removeEventListener("online",w),window.removeEventListener("offline",D),window.removeEventListener("session-saved",J)}});function U(){t(L,ss(),!0)}async function re(){if(!e(g)){t(_,"error"),t(F,"No network connection");return}t(_,"syncing"),t(F,"");try{const w=await ls();w.failed===0&&w.success>0?(t(_,"success"),t(F,`Synced ${w.success} session${w.success>1?"s":""}!`)):w.failed>0&&w.success>0?(t(_,"error"),t(F,`Synced ${w.success}, failed ${w.failed}`)):w.failed>0?(t(_,"error"),t(F,`Failed to sync ${w.failed} session${w.failed>1?"s":""}`)):(t(_,"idle"),t(F,"")),U(),e(_)==="success"&&setTimeout(()=>{t(_,"idle"),t(F,"")},3e3)}catch(w){t(_,"error"),t(F,"Sync failed"),console.error("Sync error:",w)}}var H=Pl(),R=s(l(H),2);{var G=w=>{var D=Vl();let J;var te=l(D),$=l(te),x=l($,!0);a($);var Z=s($,2),j=l(Z);{var h=le=>{var ae=Ve();I(()=>Q(ae,`${e(L)??""} session${e(L)>1?"s":""} waiting to sync`)),r(le,ae)},q=le=>{var ae=Ve();I(()=>Q(ae,`Offline - ${e(L)??""} session${e(L)>1?"s":""} saved locally`)),r(le,ae)};E(j,le=>{e(g)?le(h):le(q,!1)})}a(Z),a(te);var N=s(te,2);{var z=le=>{var ae=Il();let ke;ae.__click=re;var $e=l(ae);{var We=me=>{var Fe=Al();Me(),r(me,Fe)},Je=me=>{var Fe=yt(),Ee=pt(Fe);{var Qe=ne=>{var ve=Ve("‚úì Synced!");r(ne,ve)},ue=ne=>{var ve=Ve("Sync Now");r(ne,ve)};E(Ee,ne=>{e(_)==="success"?ne(Qe):ne(ue,!1)},!0)}r(me,Fe)};E($e,me=>{e(_)==="syncing"?me(We):me(Je,!1)})}a(ae),I(()=>{ke=Ye(ae,1,"sync-btn svelte-b2zgdd",null,ke,{syncing:e(_)==="syncing"}),ae.disabled=e(_)==="syncing"}),r(le,ae)};E(N,le=>{e(g)&&le(z)})}var Y=s(N,2);{var ee=le=>{var ae=Dl();let ke;var $e=l(ae,!0);a(ae),I(()=>{ke=Ye(ae,1,"sync-message svelte-b2zgdd",null,ke,{error:e(_)==="error",success:e(_)==="success"}),Q($e,e(F))}),r(le,ae)};E(Y,le=>{e(F)&&le(ee)})}a(D),I(()=>{J=Ye(D,1,"sync-banner svelte-b2zgdd",null,J,{offline:!e(g)}),Q(x,e(g)?"üîÑ":"üì¥")}),r(w,D)};E(R,w=>{e(L)>0&&w(G)})}var k=s(R,2),y=l(k),p=s(l(y),2),m=l(p);m.value=m.__value="";var S=s(m);de(S,17,()=>u,w=>w.value,(w,D)=>{var J=Bl(),te=l(J);a(J);var $={};I(()=>{Q(te,`${e(D).icon??""} ${e(D).label??""}`),$!==($=e(D).value)&&(J.value=(J.__value=e(D).value)??"")}),r(w,J)}),a(p),a(y);var se=s(y,2);{var W=w=>{var D=Rl(),J=l(D);{var te=x=>{ws(x,{})},$=x=>{var Z=yt(),j=pt(Z);{var h=N=>{Vs(N,{})},q=N=>{var z=yt(),Y=pt(z);{var ee=ae=>{pl(ae,{})},le=ae=>{var ke=yt(),$e=pt(ke);{var We=me=>{Sl(me,{})},Je=me=>{var Fe=yt(),Ee=pt(Fe);{var Qe=ue=>{jl(ue,{})};E(Ee,ue=>{e(B)==="competition"&&ue(Qe)},!0)}r(me,Fe)};E($e,me=>{e(B)==="fingerboarding"?me(We):me(Je,!1)},!0)}r(ae,ke)};E(Y,ae=>{e(B)==="gym_session"?ae(ee):ae(le,!1)},!0)}r(N,z)};E(j,N=>{e(B)==="outdoor_climb"?N(h):N(q,!1)},!0)}r(x,Z)};E(J,x=>{e(B)==="indoor_climb"?x(te):x($,!1)})}a(D),r(w,D)};E(se,w=>{e(B)&&w(W)})}a(k),a(H),ot(p,()=>e(B),w=>t(B,w)),r(be,H),St()}Qt(["click"]);export{er as component};
