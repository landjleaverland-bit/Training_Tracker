import{f as p,a as i,c as kt,t as je}from"../chunks/CKcnA5P_.js";import{w as Da,p as wt,c as l,r as a,s,j as e,t as L,a as xt,f as mt,aV as g,E as Qe,o as ha,F as t,d as ga,aG as Be,aW as Bt,b0 as ja,b1 as ca,k as Re,e as _e,b2 as ma,D as Fa,ac as Le,b3 as za,b4 as Yt,b5 as Oa,b6 as Va,b7 as Ba}from"../chunks/4c6jdw0Z.js";import{d as Qt,s as J,e as X}from"../chunks/K94srNfd.js";import{i as E}from"../chunks/CK8hGvwc.js";import{e as ue,i as me,r as B,b as P,c as Aa,s as _t,d as Ra}from"../chunks/BVSa1UsB.js";import{s as et}from"../chunks/9PGhKrW6.js";import{i as La,s as Ga,c as Ze,d as Pa,u as Sa,m as ka,b as wa,e as Ma,f as $a,h as Ua,j as Wa,k as Ka}from"../chunks/ChylFdpu.js";import{i as da,c as Ha,g as Ja,a as Ya,b as Qa,t as va,f as ba,E as na,d as Xa,D as Za,e as es,h as ts,j as as,s as ss}from"../chunks/Dsikxa4z.js";import{p as ct}from"../chunks/CfB7tKQ8.js";import{i as Xt}from"../chunks/DMFvxL8W.js";import{b as ls}from"../chunks/DdO9RAVM.js";function ya(ge){return function(...A){var f=A[0];return f.stopPropagation(),ge?.apply(this,A)}}function Rt(ge,A){var f=ge.$$events?.[A.type],D=Da(f)?f.slice():f==null?[]:[f];for(var G of D)G.call(this,A)}var rs=p('<span class="placeholder svelte-1g8x5ph"> </span>'),is=p('<span class="chip-display"> </span>'),os=p('<button type="button"> </button>'),ns=p('<div class="multi-select-container svelte-1g8x5ph"><div class="chips svelte-1g8x5ph"><!></div> <div class="options-grid svelte-1g8x5ph"></div></div>');function Gt(ge,A){wt(A,!0);let f=ct(A,"selected",19,()=>[]),D=ct(A,"placeholder",3,"Select options...");function G(W){let j=[...f()];W==="None"?j.includes("None")?j=[]:j=["None"]:(j=j.filter(y=>y!=="None"),j.includes(W)?j=j.filter(y=>y!==W):j.push(W)),A.onChange(j)}var h=ns(),O=l(h),U=l(O);{var T=W=>{var j=rs(),y=l(j,!0);a(j),L(()=>J(y,D())),i(W,j)},ie=W=>{var j=kt(),y=mt(j);ue(y,17,f,me,(S,_)=>{var u=is(),N=l(u,!0);a(u),L(()=>J(N,e(_))),i(S,u)}),i(W,j)};E(U,W=>{f().length===0?W(T):W(ie,!1)})}a(O);var M=s(O,2);ue(M,21,()=>A.options,me,(W,j)=>{var y=os();y.__click=()=>G(e(j));var S=l(y,!0);a(y),L(_=>{et(y,1,`option-chip ${_??""}`,"svelte-1g8x5ph"),J(S,e(j))},[()=>f().includes(e(j))?"selected":""]),i(W,y)}),a(M),a(h),i(ge,h),xt()}Qt(["click"]);var vs=p('<div class="input-with-action svelte-1lf3qka"><input type="text" id="location-manual" placeholder="Enter custom location..." class="flat-left svelte-1lf3qka"/> <button type="button" class="action-btn flat-right svelte-1lf3qka" title="Back to list">‚úï</button></div>'),cs=p("<option> </option>"),ds=p('<select id="location" class="svelte-1lf3qka"><option disabled>Select location...</option><!></select>'),us=p("<option> </option>"),ps=p("<option> </option>"),fs=p('<th class="svelte-1lf3qka">Sport?</th>'),_s=p('<td class="center svelte-1lf3qka"><input type="checkbox" class="svelte-1lf3qka"/></td>'),ms=p('<span class="grade-error svelte-1lf3qka">Invalid</span>'),gs=p("<option> </option>"),bs=p('<button type="button" class="remove-btn svelte-1lf3qka">‚úï</button>'),ys=p('<tr><!><td class="svelte-1lf3qka"><input type="text" placeholder="Route name..." class="svelte-1lf3qka"/></td><td class="svelte-1lf3qka"><input type="text" placeholder="V3"/> <!></td><td class="svelte-1lf3qka"><select class="svelte-1lf3qka"></select></td><td class="svelte-1lf3qka"><input type="number" min="1" class="svelte-1lf3qka"/></td><td><textarea placeholder="Notes..." class="svelte-1lf3qka"></textarea></td><td class="center svelte-1lf3qka"><!></td></tr>'),hs=p("<div> </div>"),Ss=p('<div class="form-content svelte-1lf3qka"><h3 class="svelte-1lf3qka">üßó Indoor Climb</h3> <div class="form-row svelte-1lf3qka"><div class="form-group svelte-1lf3qka"><label for="date" class="svelte-1lf3qka">Date</label> <input type="date" id="date" class="svelte-1lf3qka"/></div> <div class="form-group svelte-1lf3qka"><label for="location" class="svelte-1lf3qka">Location</label> <!></div></div> <div class="form-group svelte-1lf3qka"><label for="climbing-type" class="svelte-1lf3qka">Climbing Type</label> <select id="climbing-type" class="svelte-1lf3qka"><option disabled>Select type...</option><!></select></div> <div class="load-section svelte-1lf3qka"><h4 class="svelte-1lf3qka">Load Metrics</h4> <div class="load-metrics svelte-1lf3qka"><div class="load-item svelte-1lf3qka"><label for="finger-load" class="svelte-1lf3qka">Finger</label> <input type="number" id="finger-load" min="1" max="5" class="svelte-1lf3qka"/> <span class="load-scale svelte-1lf3qka">/ 5</span></div> <div class="load-item svelte-1lf3qka"><label for="shoulder-load" class="svelte-1lf3qka">Shoulder</label> <input type="number" id="shoulder-load" min="1" max="5" class="svelte-1lf3qka"/> <span class="load-scale svelte-1lf3qka">/ 5</span></div> <div class="load-item svelte-1lf3qka"><label for="forearm-load" class="svelte-1lf3qka">Forearm</label> <input type="number" id="forearm-load" min="1" max="5" class="svelte-1lf3qka"/> <span class="load-scale svelte-1lf3qka">/ 5</span></div></div> <h4 class="mt-4 svelte-1lf3qka">Grip Metrics</h4> <div class="load-metrics svelte-1lf3qka"><div class="load-item svelte-1lf3qka"><label for="open-grip" class="svelte-1lf3qka">Open</label> <input type="number" id="open-grip" min="1" max="5" class="svelte-1lf3qka"/> <span class="load-scale svelte-1lf3qka">/ 5</span></div> <div class="load-item svelte-1lf3qka"><label for="crimp-grip" class="svelte-1lf3qka">Crimp</label> <input type="number" id="crimp-grip" min="1" max="5" class="svelte-1lf3qka"/> <span class="load-scale svelte-1lf3qka">/ 5</span></div> <div class="load-item svelte-1lf3qka"><label for="pinch-grip" class="svelte-1lf3qka">Pinch</label> <input type="number" id="pinch-grip" min="1" max="5" class="svelte-1lf3qka"/> <span class="load-scale svelte-1lf3qka">/ 5</span></div> <div class="load-item svelte-1lf3qka"><label for="sloper-grip" class="svelte-1lf3qka">Sloper</label> <input type="number" id="sloper-grip" min="1" max="5" class="svelte-1lf3qka"/> <span class="load-scale svelte-1lf3qka">/ 5</span></div> <div class="load-item svelte-1lf3qka"><label for="jug-grip" class="svelte-1lf3qka">Jug</label> <input type="number" id="jug-grip" min="1" max="5" class="svelte-1lf3qka"/> <span class="load-scale svelte-1lf3qka">/ 5</span></div></div></div> <div class="training-section svelte-1lf3qka"><h4 class="svelte-1lf3qka">Training Details</h4> <div class="training-grid svelte-1lf3qka"><div class="training-item svelte-1lf3qka"><label for="training-type" class="svelte-1lf3qka">Training Type</label> <!></div> <div class="training-item svelte-1lf3qka"><label for="difficulty" class="svelte-1lf3qka">Difficulty</label> <select id="difficulty" class="svelte-1lf3qka"></select></div> <div class="training-item svelte-1lf3qka"><label for="category" class="svelte-1lf3qka">Category</label> <!></div> <div class="training-item svelte-1lf3qka"><label for="energy-system" class="svelte-1lf3qka">Energy System</label> <!></div> <div class="training-item svelte-1lf3qka"><label for="technique-focus" class="svelte-1lf3qka">Technique Focus</label> <!></div> <div class="training-item svelte-1lf3qka"><label for="wall-angle" class="svelte-1lf3qka">Wall</label> <!></div></div></div> <div class="climbs-section svelte-1lf3qka"><h4 class="svelte-1lf3qka">Climbs</h4> <div class="table-container svelte-1lf3qka"><table class="climbs-table svelte-1lf3qka"><thead><tr><!><th class="svelte-1lf3qka">Name</th><th class="svelte-1lf3qka">Grade</th><th class="svelte-1lf3qka">Attempt</th><th class="svelte-1lf3qka">#</th><th class="svelte-1lf3qka">Notes</th><th class="svelte-1lf3qka"></th></tr></thead><tbody></tbody></table></div> <button type="button" class="add-btn svelte-1lf3qka">+ Add Climb</button></div> <div class="submit-section svelte-1lf3qka"><!> <button type="button" class="submit-btn svelte-1lf3qka"><!></button></div></div>');function ks(ge,A){wt(A,!0);const f=["Rockstar Unit 3","Rockstar Unit 5","Rockstar Techno","Flashpoint Bristol","Redpoint Bristol","TCH Bristol","Other"],D=["Bouldering","Sport","Mixed"],G=["Onsight","Flash","Redpoint","Dogged","DNF"],h=["None","Projecting","Onsighting","Campusing","Repeaters"],O=["None","Easy","Medium","Hard","Max","Limit+"],U=["None","Strength","Power","Strength Capacity","Power Capacity","Strength Endurance","Power Endurance","Coordination","Slab Technique","Overhang Technique"],T=["None","Aerobic Lactic Capacity","Aerobic Lactic Power","Anaerobic Alactic Capacity","Anaerobic Alactic Power","Anaerobic Power","Anaerobic Lactic Capacity"],ie=["None","Trusting feet","Double-clutch","Standing on volumes","Deadpointing","Flagging","Swapping feet","Edging","Smearing","Matching","Backstepping","Drop Knee","Bridging","Laybacking","Mantling","Kneebar","Dyno","Pogo","Coordination Moves","Gastoning","Undercutting","Compressing","Heel Hook","Toe Hook","Bicycle"],M=["None","Overhang","Slab","Roof","Moon Board","Kilter Board","Beast","Circuit Board"],j=["V0-","4-","V0","4","V0+","4+","V1","5","V2","5+","V3","6A","V4","6B","V5","6C","V6","7A","V7","7A+","V8","7B","7B+","V9","7C","V10","7C+","V11","8A","V12","8A+","V13","8B","V14","8B+","V15","8C","V16","8C+","V17","9A"].map(c=>c.toLowerCase());let y=g(null),S=g(Qe(new Date().toISOString().split("T")[0])),_=g(""),u=g(""),N=g(Qe(["None"])),se=g("None"),z=g(Qe(["None"])),b=g(Qe(["None"])),V=g(Qe(["None"])),K=g(Qe(["None"])),Z=g(3),$=g(3),w=g(3),te=g(3),I=g(3),x=g(3),k=g(3),C=g(3),F=g(Qe([{isSport:!1,name:"",grade:"",attemptType:"Flash",attemptsNum:1,notes:""}])),Y=g(!1);const Q="indoor_climb_draft";ha(()=>{const c=localStorage.getItem(Q);if(c)try{const n=JSON.parse(c);n.date&&t(S,n.date,!0),n.location&&t(_,n.location,!0),n.isOtherLocation&&t(Y,n.isOtherLocation,!0),n.climbingType&&t(u,n.climbingType,!0),n.trainingTypes&&t(N,n.trainingTypes,!0),n.difficulty&&t(se,n.difficulty,!0),n.categories&&t(z,n.categories,!0),n.energySystems&&t(b,n.energySystems,!0),n.techniqueFocuses&&t(V,n.techniqueFocuses,!0),n.wallAngles&&t(K,n.wallAngles,!0),n.fingerLoad&&t(Z,n.fingerLoad,!0),n.shoulderLoad&&t($,n.shoulderLoad,!0),n.forearmLoad&&t(w,n.forearmLoad,!0),n.openGrip&&t(te,n.openGrip,!0),n.crimpGrip&&t(I,n.crimpGrip,!0),n.pinchGrip&&t(x,n.pinchGrip,!0),n.sloperGrip&&t(k,n.sloperGrip,!0),n.jugGrip&&t(C,n.jugGrip,!0),n.climbs&&t(F,n.climbs,!0)}catch(n){console.error("Failed to restore draft",n)}}),ga(()=>{const c={date:e(S),location:e(_),isOtherLocation:e(Y),climbingType:e(u),trainingTypes:e(N),difficulty:e(se),categories:e(z),energySystems:e(b),techniqueFocuses:e(V),wallAngles:e(K),fingerLoad:e(Z),shoulderLoad:e($),forearmLoad:e(w),openGrip:e(te),crimpGrip:e(I),pinchGrip:e(x),sloperGrip:e(k),jugGrip:e(C),climbs:e(F)};localStorage.setItem(Q,JSON.stringify(c))});function ae(){e(_)==="Other"&&(t(Y,!0),t(_,""))}function ee(){t(Y,!1),t(_,"")}function we(){t(F,[...e(F),{isSport:!1,name:"",grade:"",attemptType:"Flash",attemptsNum:1,notes:""}],!0)}function Ke(c){t(F,e(F).filter((n,le)=>le!==c),!0)}function He(c,n){e(F)[c].attemptType=n,(n==="Flash"||n==="Onsight")&&(e(F)[c].attemptsNum=1)}function Pe(c){t(y,c,!0)}function pe(){t(y,null)}let xe=Bt(()=>e(u)==="Mixed");function Ge(c){return e(u)==="Sport"?!0:e(u)==="Bouldering"?!1:c.isSport}function Me(c){return c.trim()?j.includes(c.trim().toLowerCase()):!0}let ne=g("idle"),re=g("");function ve(){return e(_)?e(u)?e(F).filter(n=>n.grade.trim()&&!Me(n.grade)).length>0?"Please fix invalid grades":null:"Please select a climbing type":"Please select a location"}async function Ce(){const c=ve();if(c){t(ne,"error"),t(re,c,!0);return}t(ne,"saving");try{const n=e(F).map(he=>({...he,isSport:Ge(he)})),le={date:e(S),location:e(_),customLocation:e(Y)?e(_):void 0,climbingType:e(u),trainingTypes:e(N),difficulty:e(se),categories:e(z),energySystems:e(b),techniqueFocuses:e(V),wallAngles:e(K),fingerLoad:e(Z),shoulderLoad:e($),forearmLoad:e(w),openGrip:e(te),crimpGrip:e(I),pinchGrip:e(x),sloperGrip:e(k),jugGrip:e(C),climbs:n},Ee=Pa(le);if(da()){const he=await Ha(le);he.ok?(Sa(Ee.id,he.id),ka(he.id),t(ne,"success"),t(re,"Session saved and synced!"),localStorage.removeItem(Q)):(wa(Ee.id),t(ne,"success"),t(re,"Saved locally. Sync failed: "+(he.error||"Unknown error")),localStorage.removeItem(Q))}else t(ne,"success"),t(re,"Saved locally. Will sync when online."),localStorage.removeItem(Q);window.dispatchEvent(new CustomEvent("session-saved")),setTimeout(()=>{be()},2e3)}catch(n){t(ne,"error"),t(re,"Failed to save session"),console.error("Save error:",n)}}function be(){t(S,new Date().toISOString().split("T")[0],!0),t(_,""),t(Y,!1),t(u,""),t(N,["None"],!0),t(se,"None"),t(z,["None"],!0),t(b,["None"],!0),t(V,["None"],!0),t(K,["None"],!0),t(Z,3),t($,3),t(w,3),t(te,3),t(I,3),t(x,3),t(k,3),t(C,3),t(F,[{isSport:!1,name:"",grade:"",attemptType:"Flash",attemptsNum:1,notes:""}],!0),t(ne,"idle"),t(re,"")}var ze=Ss(),Te=s(l(ze),2),$e=l(Te),lt=s(l($e),2);B(lt),a($e);var rt=s($e,2),qt=s(l(rt),2);{var q=c=>{var n=vs(),le=l(n);B(le);var Ee=s(le,2);Ee.__click=ee,a(n),P(le,()=>e(_),he=>t(_,he)),i(c,n)},o=c=>{var n=ds();n.__change=ae;var le=l(n);le.value=le.__value="";var Ee=s(le);ue(Ee,17,()=>f,me,(he,nt)=>{var v=cs(),r=l(v,!0);a(v);var R={};L(()=>{J(r,e(nt)),R!==(R=e(nt))&&(v.value=(v.__value=e(nt))??"")}),i(he,v)}),a(n),Ze(n,()=>e(_),he=>t(_,he)),i(c,n)};E(qt,c=>{e(Y)?c(q):c(o,!1)})}a(rt),a(Te);var d=s(Te,2),m=s(l(d),2),H=l(m);H.value=H.__value="";var ce=s(H);ue(ce,17,()=>D,me,(c,n)=>{var le=us(),Ee=l(le,!0);a(le);var he={};L(()=>{J(Ee,e(n)),he!==(he=e(n))&&(le.value=(le.__value=e(n))??"")}),i(c,le)}),a(m),a(d);var Ne=s(d,2),Ae=s(l(Ne),2),Je=l(Ae),Ct=s(l(Je),2);B(Ct),Be(2),a(Je);var it=s(Je,2),gt=s(l(it),2);B(gt),Be(2),a(it);var Nt=s(it,2),ot=s(l(Nt),2);B(ot),Be(2),a(Nt),a(Ae);var oe=s(Ae,4),ye=l(oe),qe=s(l(ye),2);B(qe),Be(2),a(ye);var Ue=s(ye,2),dt=s(l(Ue),2);B(dt),Be(2),a(Ue);var Ye=s(Ue,2),Ie=s(l(Ye),2);B(Ie),Be(2),a(Ye);var tt=s(Ye,2),Fe=s(l(tt),2);B(Fe),Be(2),a(tt);var We=s(tt,2),De=s(l(We),2);B(De),Be(2),a(We),a(oe),a(Ne);var ut=s(Ne,2),at=s(l(ut),2),Ft=l(at),At=s(l(Ft),2);Gt(At,{get options(){return h},get selected(){return e(N)},placeholder:"Select types...",onChange:c=>t(N,c,!0)}),a(Ft);var Ot=s(Ft,2),Oe=s(l(Ot),2);ue(Oe,21,()=>O,me,(c,n)=>{var le=ps(),Ee=l(le,!0);a(le);var he={};L(()=>{J(Ee,e(n)),he!==(he=e(n))&&(le.value=(le.__value=e(n))??"")}),i(c,le)}),a(Oe),a(Ot);var Xe=s(Ot,2),bt=s(l(Xe),2);Gt(bt,{get options(){return U},get selected(){return e(z)},placeholder:"Select categories...",onChange:c=>t(z,c,!0)}),a(Xe);var Lt=s(Xe,2),It=s(l(Lt),2);Gt(It,{get options(){return T},get selected(){return e(b)},placeholder:"Select systems...",onChange:c=>t(b,c,!0)}),a(Lt);var Dt=s(Lt,2),xa=s(l(Dt),2);Gt(xa,{get options(){return ie},get selected(){return e(V)},placeholder:"Select focus...",onChange:c=>t(V,c,!0)}),a(Dt);var Pt=s(Dt,2),Zt=s(l(Pt),2);Gt(Zt,{get options(){return M},get selected(){return e(K)},placeholder:"Select angles...",onChange:c=>t(K,c,!0)}),a(Pt),a(at),a(ut);var Vt=s(ut,2),ea=s(l(Vt),2),Mt=l(ea),ta=l(Mt),aa=l(ta),qa=l(aa);{var sa=c=>{var n=fs();i(c,n)};E(qa,c=>{e(xe)&&c(sa)})}Be(6),a(aa),a(ta);var $t=s(ta);ue($t,21,()=>e(F),me,(c,n,le)=>{var Ee=ys(),he=l(Ee);{var nt=de=>{var st=_s(),ft=l(st);B(ft),a(st),Aa(ft,()=>e(n).isSport,Jt=>e(n).isSport=Jt),i(de,st)};E(he,de=>{e(xe)&&de(nt)})}var v=s(he),r=l(v);B(r),a(v);var R=s(v),Se=l(R);B(Se);let fe;var yt=s(Se,2);{var Tt=de=>{var st=ms();i(de,st)};E(yt,de=>{Me(e(n).grade)||de(Tt)})}a(R);var vt=s(R),Ve=l(vt);Ve.__change=de=>He(le,de.target.value),ue(Ve,21,()=>G,me,(de,st)=>{var ft=gs(),Jt=l(ft,!0);a(ft);var _a={};L(()=>{J(Jt,e(st)),_a!==(_a=e(st))&&(ft.value=(ft.__value=e(st))??"")}),i(de,ft)}),a(Ve);var pt;La(Ve),a(vt);var Et=s(vt),jt=l(Et);B(jt),a(Et);var Kt=s(Et);let Ht;var ht=l(Kt);ja(ht),a(Kt);var ra=s(Kt),ia=l(ra);{var oa=de=>{var st=bs();st.__click=()=>Ke(le),i(de,st)};E(ia,de=>{e(F).length>1&&de(oa)})}a(ra),a(Ee),L(de=>{fe=et(Se,1,"grade-input svelte-1lf3qka",null,fe,de),pt!==(pt=e(n).attemptType)&&(Ve.value=(Ve.__value=e(n).attemptType)??"",Ga(Ve,e(n).attemptType)),jt.disabled=e(n).attemptType==="Flash",Ht=et(Kt,1,"notes-cell svelte-1lf3qka",null,Ht,{expanded:e(y)===le})},[()=>({invalid:!Me(e(n).grade)})]),P(r,()=>e(n).name,de=>e(n).name=de),P(Se,()=>e(n).grade,de=>e(n).grade=de),P(jt,()=>e(n).attemptsNum,de=>e(n).attemptsNum=de),X("focus",ht,()=>Pe(le)),X("blur",ht,pe),P(ht,()=>e(n).notes,de=>e(n).notes=de),i(c,Ee)}),a($t),a(Mt),a(ea);var ua=s(ea,2);ua.__click=we,a(Vt);var Ut=s(Vt,2),la=l(Ut);{var Ca=c=>{var n=hs();let le;var Ee=l(n,!0);a(n),L(()=>{le=et(n,1,"save-message svelte-1lf3qka",null,le,{success:e(ne)==="success",error:e(ne)==="error"}),J(Ee,e(re))}),i(c,n)};E(la,c=>{e(re)&&c(Ca)})}var Wt=s(la,2);Wt.__click=Ce;var pa=l(Wt);{var Ta=c=>{var n=je("Saving...");i(c,n)},fa=c=>{var n=kt(),le=mt(n);{var Ee=nt=>{var v=je("‚úì Saved!");i(nt,v)},he=nt=>{var v=je("Save Session");i(nt,v)};E(le,nt=>{e(ne)==="success"?nt(Ee):nt(he,!1)},!0)}i(c,n)};E(pa,c=>{e(ne)==="saving"?c(Ta):c(fa,!1)})}a(Wt),a(Ut),a(ze),L(()=>Wt.disabled=e(ne)==="saving"),P(lt,()=>e(S),c=>t(S,c)),Ze(m,()=>e(u),c=>t(u,c)),P(Ct,()=>e(Z),c=>t(Z,c)),P(gt,()=>e($),c=>t($,c)),P(ot,()=>e(w),c=>t(w,c)),P(qe,()=>e(te),c=>t(te,c)),P(dt,()=>e(I),c=>t(I,c)),P(Ie,()=>e(x),c=>t(x,c)),P(Fe,()=>e(k),c=>t(k,c)),P(De,()=>e(C),c=>t(C,c)),Ze(Oe,()=>e(se),c=>t(se,c)),i(ge,ze),xt()}Qt(["click","change"]);var ws=p("<option> </option>"),xs=p('<div class="input-with-action svelte-15o2ys1"><input type="text" id="crag-manual" placeholder="Enter custom crag name..." class="flat-left svelte-15o2ys1"/> <button type="button" class="action-btn flat-right svelte-15o2ys1" title="Back to list">‚úï</button></div>'),qs=p("<option> </option>"),Cs=p("<option>Other (Manual Entry)</option>"),Ts=p('<select id="crag" class="svelte-15o2ys1"><option disabled> </option><!><!></select>'),Ns=p("<option> </option>"),Fs=p("<option> </option>"),Os=p('<th class="svelte-15o2ys1">Sport?</th>'),Ls=p('<td class="center svelte-15o2ys1"><input type="checkbox" class="svelte-15o2ys1"/></td>'),Gs=p('<span class="grade-error svelte-15o2ys1">Invalid</span>'),Es=p("<option> </option>"),js=p('<button type="button" class="remove-btn svelte-15o2ys1">‚úï</button>'),zs=p('<tr><!><td class="svelte-15o2ys1"><input type="text" placeholder="Route name..." class="svelte-15o2ys1"/></td><td class="svelte-15o2ys1"><input type="text" placeholder="V3"/> <!></td><td class="svelte-15o2ys1"><select class="svelte-15o2ys1"></select></td><td class="svelte-15o2ys1"><input type="number" min="1" class="svelte-15o2ys1"/></td><td><textarea placeholder="Notes..." class="svelte-15o2ys1"></textarea></td><td class="center svelte-15o2ys1"><!></td></tr>'),As=p("<div> </div>"),Is=p('<div class="form-content svelte-15o2ys1"><h3 class="svelte-15o2ys1">‚õ∞Ô∏è Outdoor Climb</h3> <div class="form-row svelte-15o2ys1"><div class="form-group svelte-15o2ys1"><label for="date" class="svelte-15o2ys1">Date</label> <input type="date" id="date" class="svelte-15o2ys1"/></div> <div class="form-group svelte-15o2ys1"><label for="area" class="svelte-15o2ys1">Area</label> <select id="area" class="svelte-15o2ys1"><option disabled>Select area...</option><!></select></div></div> <div class="form-row svelte-15o2ys1"><div class="form-group svelte-15o2ys1"><label for="crag" class="svelte-15o2ys1">Crag</label> <!></div> <div class="form-group svelte-15o2ys1"><label for="sector" class="svelte-15o2ys1">Wall / Sector</label> <input type="text" id="sector" placeholder="Enter sector or wall name..." class="svelte-15o2ys1"/></div></div> <div class="form-group svelte-15o2ys1"><label for="climbing-type" class="svelte-15o2ys1">Climbing Type</label> <select id="climbing-type" class="svelte-15o2ys1"><option disabled>Select type...</option><!></select></div> <div class="load-section svelte-15o2ys1"><h4 class="svelte-15o2ys1">Load Metrics</h4> <div class="load-metrics svelte-15o2ys1"><div class="load-item svelte-15o2ys1"><label for="finger-load" class="svelte-15o2ys1">Finger</label> <input type="number" id="finger-load" min="1" max="5" class="svelte-15o2ys1"/> <span class="load-scale svelte-15o2ys1">/ 5</span></div> <div class="load-item svelte-15o2ys1"><label for="shoulder-load" class="svelte-15o2ys1">Shoulder</label> <input type="number" id="shoulder-load" min="1" max="5" class="svelte-15o2ys1"/> <span class="load-scale svelte-15o2ys1">/ 5</span></div> <div class="load-item svelte-15o2ys1"><label for="forearm-load" class="svelte-15o2ys1">Forearm</label> <input type="number" id="forearm-load" min="1" max="5" class="svelte-15o2ys1"/> <span class="load-scale svelte-15o2ys1">/ 5</span></div></div> <h4 class="mt-4 svelte-15o2ys1">Grip Metrics</h4> <div class="load-metrics svelte-15o2ys1"><div class="load-item svelte-15o2ys1"><label for="open-grip" class="svelte-15o2ys1">Open</label> <input type="number" id="open-grip" min="1" max="5" class="svelte-15o2ys1"/> <span class="load-scale svelte-15o2ys1">/ 5</span></div> <div class="load-item svelte-15o2ys1"><label for="crimp-grip" class="svelte-15o2ys1">Crimp</label> <input type="number" id="crimp-grip" min="1" max="5" class="svelte-15o2ys1"/> <span class="load-scale svelte-15o2ys1">/ 5</span></div> <div class="load-item svelte-15o2ys1"><label for="pinch-grip" class="svelte-15o2ys1">Pinch</label> <input type="number" id="pinch-grip" min="1" max="5" class="svelte-15o2ys1"/> <span class="load-scale svelte-15o2ys1">/ 5</span></div> <div class="load-item svelte-15o2ys1"><label for="sloper-grip" class="svelte-15o2ys1">Sloper</label> <input type="number" id="sloper-grip" min="1" max="5" class="svelte-15o2ys1"/> <span class="load-scale svelte-15o2ys1">/ 5</span></div> <div class="load-item svelte-15o2ys1"><label for="jug-grip" class="svelte-15o2ys1">Jug</label> <input type="number" id="jug-grip" min="1" max="5" class="svelte-15o2ys1"/> <span class="load-scale svelte-15o2ys1">/ 5</span></div></div></div> <div class="training-section svelte-15o2ys1"><h4 class="svelte-15o2ys1">Training Details</h4> <div class="training-grid svelte-15o2ys1"><div class="training-item svelte-15o2ys1"><label for="training-type" class="svelte-15o2ys1">Training Type</label> <!></div> <div class="training-item svelte-15o2ys1"><label for="difficulty" class="svelte-15o2ys1">Difficulty</label> <select id="difficulty" class="svelte-15o2ys1"></select></div> <div class="training-item svelte-15o2ys1"><label for="category" class="svelte-15o2ys1">Category</label> <!></div> <div class="training-item svelte-15o2ys1"><label for="energy-system" class="svelte-15o2ys1">Energy System</label> <!></div> <div class="training-item svelte-15o2ys1"><label for="technique-focus" class="svelte-15o2ys1">Technique Focus</label> <!></div></div></div> <div class="climbs-section svelte-15o2ys1"><h4 class="svelte-15o2ys1">Climbs</h4> <div class="table-container svelte-15o2ys1"><table class="climbs-table svelte-15o2ys1"><thead><tr><!><th class="svelte-15o2ys1">Name</th><th class="svelte-15o2ys1">Grade</th><th class="svelte-15o2ys1">Attempt</th><th class="svelte-15o2ys1">#</th><th class="svelte-15o2ys1">Notes</th><th class="svelte-15o2ys1"></th></tr></thead><tbody></tbody></table></div> <button type="button" class="add-btn svelte-15o2ys1">+ Add Climb</button></div> <div class="submit-section svelte-15o2ys1"><!> <button type="button" class="submit-btn svelte-15o2ys1"><!></button></div></div>');function Ds(ge,A){wt(A,!0);const f=Ja(),D=["Boulder","Sport","Trad"],G=["Onsight","Flash","Redpoint","Dogged","DNF"],h=["None","Projecting","Onsighting","Campusing","Repeaters"],O=["None","Easy","Medium","Hard","Max","Limit+"],U=["None","Strength","Power","Strength Capacity","Power Capacity","Strength Endurance","Power Endurance","Coordination","Slab Technique","Overhang Technique"],T=["None","Aerobic Lactic Capacity","Aerobic Lactic Power","Anaerobic Alactic Capacity","Anaerobic Alactic Power","Anaerobic Power","Anaerobic Lactic Capacity"],ie=["None","Trusting feet","Double-clutch","Deadpointing","Flagging","Swapping feet","Edging","Smearing","Matching","Backstepping","Drop Knee","Bridging","Laybacking","Mantling","Kneebar","Dyno","Coordination Moves","Gastoning","Undercutting","Compressing","Heel Hook","Toe Hook","Bicycle"],W=["V0-","4-","V0","4","V0+","4+","V1","5","V2","5+","V3","6A","V4","6B","V5","6C","V6","7A","V7","7A+","V8","7B","7B+","V9","7C","V10","7C+","V11","8A","V12","8A+","V13","8B","V14","8B+","V15","8C","V16","8C+","V17","9A"].map(v=>v.toLowerCase());let j=g(null),y=g(Qe(new Date().toISOString().split("T")[0])),S=g(""),_=g(""),u=g(""),N=g(""),se=g(Qe(["None"])),z=g("None"),b=g(Qe(["None"])),V=g(Qe(["None"])),K=g(Qe(["None"])),Z=g(3),$=g(3),w=g(3),te=g(3),I=g(3),x=g(3),k=g(3),C=g(3),F=g(Qe([{isSport:!1,name:"",grade:"",attemptType:"Flash",attemptsNum:1,notes:""}])),Y=Bt(()=>e(S)?Qa(e(S)):[]),Q=g(!1);const ae="outdoor_climb_draft";ha(()=>{const v=localStorage.getItem(ae);if(v)try{const r=JSON.parse(v);r.date&&t(y,r.date,!0),r.area&&t(S,r.area,!0),r.crag&&t(_,r.crag,!0),r.sector&&t(u,r.sector,!0),r.isOtherCrag&&t(Q,r.isOtherCrag,!0),r.climbingType&&t(N,r.climbingType,!0),r.trainingTypes&&t(se,r.trainingTypes,!0),r.difficulty&&t(z,r.difficulty,!0),r.categories&&t(b,r.categories,!0),r.energySystems&&t(V,r.energySystems,!0),r.techniqueFocuses&&t(K,r.techniqueFocuses,!0),r.fingerLoad&&t(Z,r.fingerLoad,!0),r.shoulderLoad&&t($,r.shoulderLoad,!0),r.forearmLoad&&t(w,r.forearmLoad,!0),r.openGrip&&t(te,r.openGrip,!0),r.crimpGrip&&t(I,r.crimpGrip,!0),r.pinchGrip&&t(x,r.pinchGrip,!0),r.sloperGrip&&t(k,r.sloperGrip,!0),r.jugGrip&&t(C,r.jugGrip,!0),r.climbs&&t(F,r.climbs,!0)}catch(r){console.error("Failed to restore draft",r)}}),ga(()=>{const v={date:e(y),area:e(S),crag:e(_),sector:e(u),isOtherCrag:e(Q),climbingType:e(N),trainingTypes:e(se),difficulty:e(z),categories:e(b),energySystems:e(V),techniqueFocuses:e(K),fingerLoad:e(Z),shoulderLoad:e($),forearmLoad:e(w),openGrip:e(te),crimpGrip:e(I),pinchGrip:e(x),sloperGrip:e(k),jugGrip:e(C),climbs:e(F)};localStorage.setItem(ae,JSON.stringify(v))}),ga(()=>{e(S)&&(t(_,""),t(Q,!1))});function ee(){e(_)==="Other"&&(t(Q,!0),t(_,""))}function we(){t(Q,!1),t(_,"")}function Ke(){t(F,[...e(F),{isSport:!1,name:"",grade:"",attemptType:"Flash",attemptsNum:1,notes:""}],!0)}function He(v){t(F,e(F).filter((r,R)=>R!==v),!0)}function Pe(v,r){e(F)[v].attemptType=r,(r==="Flash"||r==="Onsight")&&(e(F)[v].attemptsNum=1)}function pe(v){t(j,v,!0)}function xe(){t(j,null)}let Ge=Bt(()=>e(N)==="Trad");function Me(v){return e(N)==="Sport"?!0:e(N)==="Boulder"?!1:v.isSport}function ne(v){return v.trim()?W.includes(v.trim().toLowerCase()):!0}let re=g("idle"),ve=g("");function Ce(){return e(S)?e(_)?e(N)?e(F).filter(r=>r.grade.trim()&&!ne(r.grade)).length>0?"Please fix invalid grades":null:"Please select a climbing type":"Please select a crag":"Please select an area"}async function be(){const v=Ce();if(v){t(re,"error"),t(ve,v,!0);return}t(re,"saving");try{const r=e(F).map(fe=>({...fe,isSport:Me(fe)})),R={date:e(y),area:e(S),crag:e(_),sector:e(u)||void 0,climbingType:e(N),trainingTypes:e(se),difficulty:e(z),categories:e(b),energySystems:e(V),techniqueFocuses:e(K),fingerLoad:e(Z),shoulderLoad:e($),forearmLoad:e(w),openGrip:e(te),crimpGrip:e(I),pinchGrip:e(x),sloperGrip:e(k),jugGrip:e(C),climbs:r},Se=Ma(R);if(da()){const fe=await Ya(R);fe.ok?(Sa(Se.id,fe.id),ka(fe.id),t(re,"success"),t(ve,"Session saved and synced!"),localStorage.removeItem(ae)):(wa(Se.id),t(re,"success"),t(ve,"Saved locally. Sync failed: "+(fe.error||"Unknown error")),localStorage.removeItem(ae))}else t(re,"success"),t(ve,"Saved locally. Will sync when online."),localStorage.removeItem(ae);window.dispatchEvent(new CustomEvent("session-saved")),setTimeout(()=>{ze()},2e3)}catch(r){t(re,"error"),t(ve,"Failed to save session"),console.error("Save error:",r)}}function ze(){t(y,new Date().toISOString().split("T")[0],!0),t(S,""),t(_,""),t(u,""),t(N,""),t(se,["None"],!0),t(z,"None"),t(b,["None"],!0),t(V,["None"],!0),t(K,["None"],!0),t(Z,3),t($,3),t(w,3),t(te,3),t(I,3),t(x,3),t(k,3),t(C,3),t(F,[{isSport:!1,name:"",grade:"",attemptType:"Flash",attemptsNum:1,notes:""}],!0),t(re,"idle"),t(ve,"")}var Te=Is(),$e=s(l(Te),2),lt=l($e),rt=s(l(lt),2);B(rt),a(lt);var qt=s(lt,2),q=s(l(qt),2),o=l(q);o.value=o.__value="";var d=s(o);ue(d,17,()=>f,me,(v,r)=>{var R=ws(),Se=l(R,!0);a(R);var fe={};L(()=>{J(Se,e(r)),fe!==(fe=e(r))&&(R.value=(R.__value=e(r))??"")}),i(v,R)}),a(q),a(qt),a($e);var m=s($e,2),H=l(m),ce=s(l(H),2);{var Ne=v=>{var r=xs(),R=l(r);B(R);var Se=s(R,2);Se.__click=we,a(r),P(R,()=>e(_),fe=>t(_,fe)),i(v,r)},Ae=v=>{var r=Ts();r.__change=ee;var R=l(r),Se=l(R,!0);a(R),R.value=R.__value="";var fe=s(R);ue(fe,17,()=>e(Y),me,(vt,Ve)=>{var pt=qs(),Et=l(pt,!0);a(pt);var jt={};L(()=>{J(Et,e(Ve)),jt!==(jt=e(Ve))&&(pt.value=(pt.__value=e(Ve))??"")}),i(vt,pt)});var yt=s(fe);{var Tt=vt=>{var Ve=Cs();Ve.value=Ve.__value="Other",i(vt,Ve)};E(yt,vt=>{e(S)&&vt(Tt)})}a(r),L(()=>{r.disabled=!e(S),J(Se,e(S)?"Select crag...":"Select area first...")}),Ze(r,()=>e(_),vt=>t(_,vt)),i(v,r)};E(ce,v=>{e(Q)?v(Ne):v(Ae,!1)})}a(H);var Je=s(H,2),Ct=s(l(Je),2);B(Ct),a(Je),a(m);var it=s(m,2),gt=s(l(it),2),Nt=l(gt);Nt.value=Nt.__value="";var ot=s(Nt);ue(ot,17,()=>D,me,(v,r)=>{var R=Ns(),Se=l(R,!0);a(R);var fe={};L(()=>{J(Se,e(r)),fe!==(fe=e(r))&&(R.value=(R.__value=e(r))??"")}),i(v,R)}),a(gt),a(it);var oe=s(it,2),ye=s(l(oe),2),qe=l(ye),Ue=s(l(qe),2);B(Ue),Be(2),a(qe);var dt=s(qe,2),Ye=s(l(dt),2);B(Ye),Be(2),a(dt);var Ie=s(dt,2),tt=s(l(Ie),2);B(tt),Be(2),a(Ie),a(ye);var Fe=s(ye,4),We=l(Fe),De=s(l(We),2);B(De),Be(2),a(We);var ut=s(We,2),at=s(l(ut),2);B(at),Be(2),a(ut);var Ft=s(ut,2),At=s(l(Ft),2);B(At),Be(2),a(Ft);var Ot=s(Ft,2),Oe=s(l(Ot),2);B(Oe),Be(2),a(Ot);var Xe=s(Ot,2),bt=s(l(Xe),2);B(bt),Be(2),a(Xe),a(Fe),a(oe);var Lt=s(oe,2),It=s(l(Lt),2),Dt=l(It),xa=s(l(Dt),2);Gt(xa,{get options(){return h},get selected(){return e(se)},placeholder:"Select types...",onChange:v=>t(se,v,!0)}),a(Dt);var Pt=s(Dt,2),Zt=s(l(Pt),2);ue(Zt,21,()=>O,me,(v,r)=>{var R=Fs(),Se=l(R,!0);a(R);var fe={};L(()=>{J(Se,e(r)),fe!==(fe=e(r))&&(R.value=(R.__value=e(r))??"")}),i(v,R)}),a(Zt),a(Pt);var Vt=s(Pt,2),ea=s(l(Vt),2);Gt(ea,{get options(){return U},get selected(){return e(b)},placeholder:"Select categories...",onChange:v=>t(b,v,!0)}),a(Vt);var Mt=s(Vt,2),ta=s(l(Mt),2);Gt(ta,{get options(){return T},get selected(){return e(V)},placeholder:"Select systems...",onChange:v=>t(V,v,!0)}),a(Mt);var aa=s(Mt,2),qa=s(l(aa),2);Gt(qa,{get options(){return ie},get selected(){return e(K)},placeholder:"Select focus...",onChange:v=>t(K,v,!0)}),a(aa),a(It),a(Lt);var sa=s(Lt,2),$t=s(l(sa),2),ua=l($t),Ut=l(ua),la=l(Ut),Ca=l(la);{var Wt=v=>{var r=Os();i(v,r)};E(Ca,v=>{e(Ge)&&v(Wt)})}Be(6),a(la),a(Ut);var pa=s(Ut);ue(pa,21,()=>e(F),me,(v,r,R)=>{var Se=zs(),fe=l(Se);{var yt=ke=>{var St=Ls(),zt=l(St);B(zt),a(St),Aa(zt,()=>e(r).isSport,Na=>e(r).isSport=Na),i(ke,St)};E(fe,ke=>{e(Ge)&&ke(yt)})}var Tt=s(fe),vt=l(Tt);B(vt),a(Tt);var Ve=s(Tt),pt=l(Ve);B(pt);let Et;var jt=s(pt,2);{var Kt=ke=>{var St=Gs();i(ke,St)};E(jt,ke=>{ne(e(r).grade)||ke(Kt)})}a(Ve);var Ht=s(Ve),ht=l(Ht);ht.__change=ke=>Pe(R,ke.target.value),ue(ht,21,()=>G,me,(ke,St)=>{var zt=Es(),Na=l(zt,!0);a(zt);var Ea={};L(()=>{J(Na,e(St)),Ea!==(Ea=e(St))&&(zt.value=(zt.__value=e(St))??"")}),i(ke,zt)}),a(ht);var ra;La(ht),a(Ht);var ia=s(Ht),oa=l(ia);B(oa),a(ia);var de=s(ia);let st;var ft=l(de);ja(ft),a(de);var Jt=s(de),_a=l(Jt);{var Ia=ke=>{var St=js();St.__click=()=>He(R),i(ke,St)};E(_a,ke=>{e(F).length>1&&ke(Ia)})}a(Jt),a(Se),L(ke=>{Et=et(pt,1,"grade-input svelte-15o2ys1",null,Et,ke),ra!==(ra=e(r).attemptType)&&(ht.value=(ht.__value=e(r).attemptType)??"",Ga(ht,e(r).attemptType)),oa.disabled=e(r).attemptType==="Flash",st=et(de,1,"notes-cell svelte-15o2ys1",null,st,{expanded:e(j)===R})},[()=>({invalid:!ne(e(r).grade)})]),P(vt,()=>e(r).name,ke=>e(r).name=ke),P(pt,()=>e(r).grade,ke=>e(r).grade=ke),P(oa,()=>e(r).attemptsNum,ke=>e(r).attemptsNum=ke),X("focus",ft,()=>pe(R)),X("blur",ft,xe),P(ft,()=>e(r).notes,ke=>e(r).notes=ke),i(v,Se)}),a(pa),a(ua),a($t);var Ta=s($t,2);Ta.__click=Ke,a(sa);var fa=s(sa,2),c=l(fa);{var n=v=>{var r=As();let R;var Se=l(r,!0);a(r),L(()=>{R=et(r,1,"save-message svelte-15o2ys1",null,R,{success:e(re)==="success",error:e(re)==="error"}),J(Se,e(ve))}),i(v,r)};E(c,v=>{e(ve)&&v(n)})}var le=s(c,2);le.__click=be;var Ee=l(le);{var he=v=>{var r=je("Saving...");i(v,r)},nt=v=>{var r=kt(),R=mt(r);{var Se=yt=>{var Tt=je("‚úì Saved!");i(yt,Tt)},fe=yt=>{var Tt=je("Save Session");i(yt,Tt)};E(R,yt=>{e(re)==="success"?yt(Se):yt(fe,!1)},!0)}i(v,r)};E(Ee,v=>{e(re)==="saving"?v(he):v(nt,!1)})}a(le),a(fa),a(Te),L(()=>le.disabled=e(re)==="saving"),P(rt,()=>e(y),v=>t(y,v)),Ze(q,()=>e(S),v=>t(S,v)),P(Ct,()=>e(u),v=>t(u,v)),Ze(gt,()=>e(N),v=>t(N,v)),P(Ue,()=>e(Z),v=>t(Z,v)),P(Ye,()=>e($),v=>t($,v)),P(tt,()=>e(w),v=>t(w,v)),P(De,()=>e(te),v=>t(te,v)),P(at,()=>e(I),v=>t(I,v)),P(At,()=>e(x),v=>t(x,v)),P(Oe,()=>e(k),v=>t(k,v)),P(bt,()=>e(C),v=>t(C,v)),Ze(Zt,()=>e(z),v=>t(z,v)),i(ge,Te),xt()}Qt(["click","change"]);var Vs=p('<div><div class="col set-num svelte-ow8x7m"> </div> <div class="col prev svelte-ow8x7m"><!></div> <div class="col weight svelte-ow8x7m"><input type="number" class="svelte-ow8x7m"/></div> <div class="col reps svelte-ow8x7m"><input type="number" class="svelte-ow8x7m"/></div> <div class="col check svelte-ow8x7m"><button><!></button></div></div>');function Bs(ge,A){wt(A,!1);let f=ct(A,"setNumber",8),D=ct(A,"prevSet",8,null),G=ct(A,"set",12);const h=ca();function O(){G(G().completed=!G().completed,!0),h("change",G()),G().completed&&h("complete")}function U(w){h("focus",{field:w,value:G()[w],set:G()})}Xt();var T=Vs();let ie;var M=l(T),W=l(M,!0);a(M);var j=s(M,2),y=l(j);{var S=w=>{var te=je();L(()=>J(te,`${Re(D()),_e(()=>D().weight)??""}kg x ${Re(D()),_e(()=>D().reps)??""}`)),i(w,te)},_=w=>{var te=je("-");i(w,te)};E(y,w=>{D()?w(S):w(_,!1)})}a(j);var u=s(j,2),N=l(u);B(N),a(u);var se=s(u,2),z=l(se);B(z),a(se);var b=s(se,2),V=l(b);let K;var Z=l(V);{var $=w=>{var te=je("‚úì");i(w,te)};E(Z,w=>{Re(G()),_e(()=>G().completed)&&w($)})}a(V),a(b),a(T),L((w,te)=>{ie=et(T,1,"set-row svelte-ow8x7m",null,ie,{completed:G().completed}),J(W,f()),_t(N,"placeholder",w),_t(z,"placeholder",te),K=et(V,1,"check-btn svelte-ow8x7m",null,K,{checked:G().completed})},[()=>(Re(D()),_e(()=>D()?D().weight.toString():"-")),()=>(Re(D()),_e(()=>D()?D().reps.toString():"-"))]),P(N,()=>G().weight,w=>G(G().weight=w,!0)),X("focus",N,()=>U("weight")),P(z,()=>G().reps,w=>G(G().reps=w,!0)),X("focus",z,()=>U("reps")),X("click",V,O),i(ge,T),xt()}var Rs=p('<div class="exercise-card svelte-1ni79z8"><div class="header svelte-1ni79z8"><div class="title-group svelte-1ni79z8"><button class="icon-btn info-btn svelte-1ni79z8" aria-label="Exercise Info"><div class="info-icon svelte-1ni79z8">?</div></button> <h4 class="svelte-1ni79z8"> </h4></div> <button class="icon-btn delete-btn svelte-1ni79z8" aria-label="Delete Exercise">üóëÔ∏è</button></div> <div class="table-header svelte-1ni79z8"><div class="col">Set</div> <div class="col">Previous</div> <div class="col">kg</div> <div class="col">Reps</div> <div class="col">‚úì</div></div> <div class="sets"></div> <button class="add-set-btn svelte-1ni79z8">+ Add Set</button></div>');function Ps(ge,A){wt(A,!1);let f=ct(A,"exercise",12),D=ct(A,"prevExercise",8,void 0);const G=ca();function h(){const _=f().sets[f().sets.length-1],u={weight:_?_.weight:0,reps:_?_.reps:0,isWarmup:!1,isFailure:!1,isDropSet:!1,completed:!1};f(f().sets=[...f().sets,u],!0)}Xt();var O=Rs(),U=l(O),T=l(U),ie=l(T),M=s(ie,2),W=l(M,!0);a(M),a(T);var j=s(T,2);a(U);var y=s(U,4);ue(y,5,()=>(Re(f()),_e(()=>f().sets)),me,(_,u,N)=>{{let se=Fa(()=>(Re(D()),_e(()=>D()?.sets[N]||null)));Bs(_,{setNumber:N+1,get prevSet(){return e(se)},get set(){return(Re(f()),_e(()=>f().sets))[N]},set set(z){(Re(f()),_e(()=>f().sets))[N]=z,ma(()=>f())},$$events:{complete(z){Rt.call(this,A,z)},focus(z){Rt.call(this,A,z)},change(z){Rt.call(this,A,z)}},$$legacy:!0})}}),a(y);var S=s(y,2);a(O),L(()=>J(W,(Re(f()),_e(()=>f().name)))),X("click",ie,()=>G("info",f())),X("click",j,()=>G("delete",f())),X("click",S,h),i(ge,O),xt()}var Ms=p('<div class="keypad svelte-1fay4f8"><div class="header svelte-1fay4f8"><span class="label svelte-1fay4f8"> </span> <div class="display svelte-1fay4f8" role="textbox" aria-readonly="true"> </div></div> <div class="quick-adds svelte-1fay4f8"><button class="svelte-1fay4f8">+2.5</button> <button class="svelte-1fay4f8">+5</button> <button class="svelte-1fay4f8">+10</button></div> <div class="grid svelte-1fay4f8"><button class="svelte-1fay4f8">1</button> <button class="svelte-1fay4f8">2</button> <button class="svelte-1fay4f8">3</button> <button class="svelte-1fay4f8">4</button> <button class="svelte-1fay4f8">5</button> <button class="svelte-1fay4f8">6</button> <button class="svelte-1fay4f8">7</button> <button class="svelte-1fay4f8">8</button> <button class="svelte-1fay4f8">9</button> <button class="action svelte-1fay4f8">C</button> <button class="svelte-1fay4f8">0</button> <button class="action svelte-1fay4f8">‚å´</button></div></div>');function $s(ge,A){wt(A,!1);let f=ct(A,"value",8,null),D=ct(A,"label",8,"Value");const G=ca();function h(Y){const Q=f()?.toString()||"";if(Q.length>=5)return;const ae=parseFloat(Q+Y.toString());G("change",ae)}function O(){G("change",0)}function U(){const Y=f()?.toString()||"";if(Y.length<=1){G("change",0);return}const Q=parseFloat(Y.slice(0,-1));G("change",Q)}function T(Y){G("change",(f()||0)+Y)}Xt();var ie=Ms(),M=l(ie),W=l(M),j=l(W,!0);a(W);var y=s(W,2),S=l(y,!0);a(y),a(M);var _=s(M,2),u=l(_),N=s(u,2),se=s(N,2);a(_);var z=s(_,2),b=l(z),V=s(b,2),K=s(V,2),Z=s(K,2),$=s(Z,2),w=s($,2),te=s(w,2),I=s(te,2),x=s(I,2),k=s(x,2),C=s(k,2),F=s(C,2);a(z),a(ie),L(()=>{J(j,D()),_t(y,"aria-label",D()),J(S,f()||0)}),X("click",u,()=>T(2.5)),X("click",N,()=>T(5)),X("click",se,()=>T(10)),X("click",b,()=>h(1)),X("click",V,()=>h(2)),X("click",K,()=>h(3)),X("click",Z,()=>h(4)),X("click",$,()=>h(5)),X("click",w,()=>h(6)),X("click",te,()=>h(7)),X("click",I,()=>h(8)),X("click",x,()=>h(9)),X("click",k,O),X("click",C,()=>h(0)),X("click",F,U),i(ge,ie),xt()}var Us=p('<div class="rest-timer svelte-18i4gcv"><div class="timer-display svelte-18i4gcv"><span class="label svelte-18i4gcv">Rest</span> <span class="time svelte-18i4gcv"> </span></div> <div class="controls svelte-18i4gcv"><button class="svelte-18i4gcv">-30</button> <button class="svelte-18i4gcv">+30</button> <button class="skip svelte-18i4gcv">Skip</button></div></div>');function Ws(ge,A){wt(A,!1);const f=Le(),D=Le();let G=ct(A,"duration",8,90),h=ct(A,"onComplete",8,()=>{}),O=Le(G()),U,T=ct(A,"visible",12,!0);function ie(){clearInterval(U),t(O,G()),U=setInterval(()=>{Va(O,-1),e(O)<=0&&(clearInterval(U),h()())},1e3)}function M(u){t(O,e(O)+u)}function W(u){e(O)>u&&t(O,e(O)-u)}function j(){T(!1),clearInterval(U),h()()}ha(()=>{ie()}),za(()=>{clearInterval(U)}),Yt(()=>e(O),()=>{t(f,Math.floor(e(O)/60))}),Yt(()=>e(O),()=>{t(D,e(O)%60)}),Oa(),Xt();var y=kt(),S=mt(y);{var _=u=>{var N=Us(),se=l(N),z=s(l(se),2),b=l(z);a(z),a(se);var V=s(se,2),K=l(V),Z=s(K,2),$=s(Z,2);a(V),a(N),L(w=>J(b,`${e(f)??""}:${w??""}`),[()=>(e(D),_e(()=>e(D).toString().padStart(2,"0")))]),X("click",K,()=>W(30)),X("click",Z,()=>M(30)),X("click",$,j),va(3,N,()=>ba,()=>({y:50,duration:300})),i(u,N)};E(S,u=>{T()&&u(_)})}i(ge,y),xt()}var Ks=p("<img/>"),Hs=p('<div class="animation-frame svelte-zbmy0k"></div>'),Js=p('<div class="visual-placeholder svelte-zbmy0k"><span>No animation available</span></div>'),Ys=p("<li> </li>"),Qs=p('<div class="modal-overlay svelte-zbmy0k" role="button" tabindex="0" aria-label="Close modal"><div class="modal-content svelte-zbmy0k" role="dialog" aria-modal="true" tabindex="-1"><div class="header svelte-zbmy0k"><h3 class="svelte-zbmy0k"> </h3> <span class="category svelte-zbmy0k"> </span> <button class="close-btn svelte-zbmy0k" aria-label="Close">√ó</button></div> <div class="visual-container svelte-zbmy0k"><!> <div class="muscles svelte-zbmy0k"> </div></div> <div class="instructions svelte-zbmy0k"><h4>Instructions</h4> <ol class="svelte-zbmy0k"></ol></div></div></div>');function Xs(ge,A){wt(A,!1);let f=ct(A,"exercise",8),D=ct(A,"visible",8,!1);const G=ca();let h=Le(0),O;function U(){f().images&&f().images.length>0&&(t(h,0),O=setInterval(()=>{t(h,(e(h)+1)%f().images.length)},800))}function T(){O&&clearInterval(O)}za(()=>{T()});function ie(){G("close")}Yt(()=>(Re(D()),Re(f())),()=>{D()&&f().images?.length?U():T()}),Oa(),Xt();var M=kt(),W=mt(M);{var j=y=>{var S=Qs(),_=l(S),u=l(_),N=l(u),se=l(N,!0);a(N);var z=s(N,2),b=l(z,!0);a(z);var V=s(z,2);a(u);var K=s(u,2),Z=l(K);{var $=C=>{var F=Hs();ue(F,5,()=>(Re(f()),_e(()=>f().images)),me,(Y,Q,ae)=>{var ee=Ks();let we;L(()=>{_t(ee,"src",`${ls??""}${e(Q)??""}`),_t(ee,"alt",`${Re(f()),_e(()=>f().name)??""} frame ${ae+1}`),we=et(ee,1,"svelte-zbmy0k",null,we,{active:ae===e(h)})}),i(Y,ee)}),a(F),i(C,F)},w=C=>{var F=Js();i(C,F)};E(Z,C=>{Re(f()),_e(()=>f().images&&f().images.length>0)?C($):C(w,!1)})}var te=s(Z,2),I=l(te);a(te),a(K);var x=s(K,2),k=s(l(x),2);ue(k,5,()=>(Re(f()),_e(()=>f().instructions)),me,(C,F)=>{var Y=Ys(),Q=l(Y,!0);a(Y),L(()=>J(Q,e(F))),i(C,Y)}),a(k),a(x),a(_),a(S),L(C=>{J(se,(Re(f()),_e(()=>f().name))),J(b,(Re(f()),_e(()=>f().category))),J(I,`Targets: ${C??""}`)},[()=>(Re(f()),_e(()=>f().targetMuscles.join(", ")))]),X("click",V,ie),va(3,_,()=>ba,()=>({y:50,duration:300})),X("click",_,ya(function(C){Rt.call(this,A,C)})),X("keydown",_,ya(function(C){Rt.call(this,A,C)})),X("click",S,ie),X("keydown",S,C=>C.key==="Escape"&&ie()),i(y,S)};E(W,y=>{D()&&y(j)})}i(ge,M),xt()}var Zs=p("<span>Saved! ‚úì</span>"),el=p("<button><!></button>"),tl=p("<option> </option>"),al=p("<option> </option>"),sl=p('<div class="filter-row svelte-1w0zsmt"><select class="category-select svelte-1w0zsmt"><option>Select Category...</option><!></select> <select class="subcategory-select svelte-1w0zsmt"><option>Select Subcategory...</option><!></select></div>'),ll=p('<span class="details svelte-1w0zsmt"> </span>'),rl=p('<button class="exercise-item-simple svelte-1w0zsmt"><span class="name svelte-1w0zsmt"> </span> <!></button>'),il=p('<div class="no-results svelte-1w0zsmt"> </div>'),ol=p('<div class="modal-overlay svelte-1w0zsmt" role="button" tabindex="0" aria-label="Close modal"><div class="picker-modal svelte-1w0zsmt" role="dialog" aria-modal="true" tabindex="-1"><div class="picker-header svelte-1w0zsmt"><h3>Add Exercise</h3> <div class="search-row svelte-1w0zsmt"><input type="text" placeholder="Search exercises..." class="svelte-1w0zsmt"/></div> <!></div> <div class="picker-content svelte-1w0zsmt"><div class="exercise-list-simple svelte-1w0zsmt"><!> <!></div></div></div></div>'),nl=p('<div class="keypad-overlay svelte-1w0zsmt"><div class="keypad-header svelte-1w0zsmt"><span> </span> <button class="svelte-1w0zsmt">Done</button></div> <!></div>'),vl=p('<div class="gym-session-form svelte-1w0zsmt"><div class="session-meta svelte-1w0zsmt"><input type="text" class="session-name svelte-1w0zsmt" placeholder="Workout Name (e.g. Pull Day)"/> <div class="meta-row svelte-1w0zsmt"><label class="svelte-1w0zsmt">Date <input type="date" class="svelte-1w0zsmt"/></label> <label class="svelte-1w0zsmt">Bodyweight (kg) <input type="number" placeholder="Optional" class="svelte-1w0zsmt"/></label> <label class="svelte-1w0zsmt">Block <select class="svelte-1w0zsmt"><option>Strength</option><option>Power</option><option>Power Endurance</option><option>Muscular Endurance</option></select></label></div></div> <div class="exercises-list"></div> <button class="add-exercise-btn svelte-1w0zsmt">+ Add Exercise</button> <!> <!> <!> <!> <!> <!></div>');function cl(ge,A){wt(A,!1);const f=Le(),D=Le(),G=ca(),h="gym_session_draft";let O=Le(""),U=Le(),T=Le([]),ie=Le(new Date().toISOString().split("T")[0]),M=Le("Strength"),W=Le(null),j=Le(!1),y=Le(""),S=Le(""),_=Le(""),u=Le(null),N=Le(!1),se=Le(null),z=Le(null),b=Le(!1);const V=Array.from(new Set(na.map(o=>o.category))).sort();function K(){t(_,"")}function Z(o){const d={id:crypto.randomUUID(),name:o.name,sets:[{weight:0,reps:0,isWarmup:!1,isFailure:!1,isDropSet:!1,completed:!1}]};t(T,[...e(T),d]),t(j,!1),t(y,""),t(S,""),t(_,"")}function $(o,d,m){t(u,{exerciseIndex:d,setIndex:m,field:o.detail.field})}function w(o){if(!e(u))return;const{exerciseIndex:d,setIndex:m,field:H}=e(u);Ba(T,e(T)[d].sets[m][H]=o.detail),t(T,[...e(T)])}function te(){t(N,!0)}function I(){e(T).length!==0&&($a({date:e(ie),name:e(O)||"Gym Workout",bodyweight:e(U),trainingBlock:e(M),exercises:e(T)}),t(b,!0),localStorage.removeItem(h),setTimeout(()=>{t(b,!1),G("save")},1500))}function x(){t(u,null)}Yt(()=>(e(M),e(ie)),()=>{const d=Ua().filter(m=>(m.trainingBlock||"Strength")===e(M)&&m.date<e(ie));d.sort((m,H)=>new Date(H.date).getTime()-new Date(m.date).getTime()),t(W,d.length>0?d[0]:null)}),Yt(()=>(e(y),e(S),e(_)),()=>{t(f,na.filter(o=>{if(e(y))return o.name.toLowerCase().includes(e(y).toLowerCase())||o.targetMuscles.some(H=>H.toLowerCase().includes(e(y).toLowerCase()));const d=e(S)?o.category===e(S):!0,m=e(_)?o.subcategory===e(_):!0;return d&&m}))}),Yt(()=>(e(S),na),()=>{t(D,e(S)?Array.from(new Set(na.filter(o=>o.category===e(S)).map(o=>o.subcategory))).sort():[])}),Oa(),Xt();var k=vl(),C=l(k),F=l(C);B(F);var Y=s(F,2),Q=l(Y),ae=s(l(Q));B(ae),a(Q);var ee=s(Q,2),we=s(l(ee));B(we),a(ee);var Ke=s(ee,2),He=s(l(Ke));L(()=>{e(M),ma(()=>{})});var Pe=l(He);Pe.value=Pe.__value="Strength";var pe=s(Pe);pe.value=pe.__value="Power";var xe=s(pe);xe.value=xe.__value="Power Endurance";var Ge=s(xe);Ge.value=Ge.__value="Muscular Endurance",a(He),a(Ke),a(Y),a(C);var Me=s(C,2);ue(Me,5,()=>e(T),me,(o,d,m)=>{{let H=Fa(()=>(e(W),e(d),_e(()=>e(W)?.exercises.find(ce=>ce.name===e(d).name))));Ps(o,{get exercise(){return e(d)},get prevExercise(){return e(H)},$$events:{focus:ce=>$(ce,m,e(T)[m].sets.indexOf(ce.detail.set)),complete:te,delete:()=>{t(z,m)},info:()=>{const ce=na.find(Ne=>Ne.name===e(d).name);ce&&t(se,ce)}}})}}),a(Me);var ne=s(Me,2),re=s(ne,2);{var ve=o=>{var d=el();let m;var H=l(d);{var ce=Ae=>{var Je=Zs();i(Ae,Je)},Ne=Ae=>{var Je=je("Finish Workout");i(Ae,Je)};E(H,Ae=>{e(b)?Ae(ce):Ae(Ne,!1)})}a(d),L(()=>{m=et(d,1,"save-btn svelte-1w0zsmt",null,m,{success:e(b)}),d.disabled=e(b)}),X("click",d,I),i(o,d)};E(re,o=>{e(T),_e(()=>e(T).length>0)&&o(ve)})}var Ce=s(re,2);{var be=o=>{var d=ol(),m=l(d),H=l(m),ce=s(l(H),2),Ne=l(ce);B(Ne),a(ce);var Ae=s(ce,2);{var Je=oe=>{var ye=sl(),qe=l(ye);L(()=>{e(S),ma(()=>{})});var Ue=l(qe);Ue.value=Ue.__value="";var dt=s(Ue);ue(dt,1,()=>V,me,(Fe,We)=>{var De=tl(),ut=l(De,!0);a(De);var at={};L(()=>{J(ut,e(We)),at!==(at=e(We))&&(De.value=(De.__value=e(We))??"")}),i(Fe,De)}),a(qe);var Ye=s(qe,2);L(()=>{e(_),ma(()=>{e(S),e(D)})});var Ie=l(Ye);Ie.value=Ie.__value="";var tt=s(Ie);ue(tt,1,()=>e(D),me,(Fe,We)=>{var De=al(),ut=l(De,!0);a(De);var at={};L(()=>{J(ut,e(We)),at!==(at=e(We))&&(De.value=(De.__value=e(We))??"")}),i(Fe,De)}),a(Ye),a(ye),L(()=>Ye.disabled=!e(S)),Ze(qe,()=>e(S),Fe=>t(S,Fe)),X("change",qe,K),Ze(Ye,()=>e(_),Fe=>t(_,Fe)),i(oe,ye)};E(Ae,oe=>{e(y)||oe(Je)})}a(H);var Ct=s(H,2),it=l(Ct),gt=l(it);ue(gt,1,()=>e(f),me,(oe,ye)=>{var qe=rl(),Ue=l(qe),dt=l(Ue,!0);a(Ue);var Ye=s(Ue,2);{var Ie=tt=>{var Fe=ll(),We=l(Fe);a(Fe),L(()=>J(We,`${e(ye),_e(()=>e(ye).category)??""} - ${e(ye),_e(()=>e(ye).subcategory)??""}`)),i(tt,Fe)};E(Ye,tt=>{e(y)&&tt(Ie)})}a(qe),L(()=>J(dt,(e(ye),_e(()=>e(ye).name)))),X("click",qe,()=>Z(e(ye))),i(oe,qe)});var Nt=s(gt,2);{var ot=oe=>{var ye=il(),qe=l(ye,!0);a(ye),L(()=>J(qe,e(y)?"No exercises found":"Select a category and subcategory to view exercises.")),i(oe,ye)};E(Nt,oe=>{e(f),_e(()=>e(f).length===0)&&oe(ot)})}a(it),a(Ct),a(m),a(d),P(Ne,()=>e(y),oe=>t(y,oe)),X("click",m,ya(function(oe){Rt.call(this,A,oe)})),X("keydown",m,ya(function(oe){Rt.call(this,A,oe)})),va(3,m,()=>ba,()=>({y:100,duration:300})),X("click",d,()=>t(j,!1)),X("keydown",d,oe=>oe.key==="Escape"&&t(j,!1)),va(3,d,()=>Xa),i(o,d)};E(Ce,o=>{e(j)&&o(be)})}var ze=s(Ce,2);{var Te=o=>{Xs(o,{get exercise(){return e(se)},visible:!0,$$events:{close:()=>t(se,null)}})};E(ze,o=>{e(se)&&o(Te)})}var $e=s(ze,2);{var lt=o=>{var d=nl(),m=l(d),H=l(m),ce=l(H);a(H);var Ne=s(H,2);a(m);var Ae=s(m,2);{let Je=Fa(()=>(e(u),_e(()=>e(u).field==="weight"?"Weight (kg)":"Reps")));$s(Ae,{get value(){return e(T),e(u),_e(()=>e(T)[e(u).exerciseIndex].sets[e(u).setIndex][e(u).field])},get label(){return e(Je)},$$events:{change:w}})}a(d),L(()=>J(ce,`Editing ${e(T),e(u),_e(()=>e(T)[e(u).exerciseIndex].name)??""} - Set ${e(u),_e(()=>e(u).setIndex+1)??""}`)),X("click",Ne,x),va(3,d,()=>ba,()=>({y:200,duration:300})),i(o,d)};E($e,o=>{e(u)&&o(lt)})}var rt=s($e,2);Ws(rt,{get visible(){return e(N)},set visible(o){t(N,o)},$$legacy:!0});var qt=s(rt,2);{var q=o=>{Za(o,{isOpen:!0,title:"Delete Exercise",get message(){return`Are you sure you want to delete ${e(T),e(z),_e(()=>e(T)[e(z)].name)??""}?`},requireInput:!1,onConfirm:()=>{e(z)!==null&&(t(T,e(T).filter((d,m)=>m!==e(z))),t(z,null))},onCancel:()=>t(z,null)})};E(qt,o=>{e(z)!==null&&o(q)})}a(k),P(F,()=>e(O),o=>t(O,o)),P(ae,()=>e(ie),o=>t(ie,o)),P(we,()=>e(U),o=>t(U,o)),Ze(He,()=>e(M),o=>t(M,o)),X("click",ne,()=>t(j,!0)),i(ge,k),xt()}var dl=p("<option> </option>"),ul=p("<option> </option>"),pl=p('<button class="remove-set-btn svelte-1m63nqt">‚úï</button>'),fl=p('<div class="set-row svelte-1m63nqt"><div class="input-wrap svelte-1m63nqt"><label class="svelte-1m63nqt">Weight</label> <input type="number" placeholder="0" class="svelte-1m63nqt"/></div> <div class="input-wrap svelte-1m63nqt"><label class="svelte-1m63nqt">Reps/Secs</label> <input type="number" placeholder="1" class="svelte-1m63nqt"/></div> <!></div>'),_l=p('<div class="exercise-card svelte-1m63nqt"><div class="card-header svelte-1m63nqt"><div class="header-inputs svelte-1m63nqt"><select class="svelte-1m63nqt"></select> <select class="svelte-1m63nqt"></select></div> <button class="remove-card-btn svelte-1m63nqt" title="Remove Exercise">‚úï</button></div> <div class="sets-list svelte-1m63nqt"><!> <button class="add-set-btn svelte-1m63nqt">+ Add Set</button></div> <div class="card-footer svelte-1m63nqt"><div class="meta-input svelte-1m63nqt"><label class="svelte-1m63nqt">Total Sets</label> <input type="number" readonly="" disabled class="svelte-1m63nqt"/></div> <div class="notes-input svelte-1m63nqt"><label class="svelte-1m63nqt">Notes</label> <input type="text" placeholder="Notes..." class="svelte-1m63nqt"/></div></div></div>'),ml=p("<div> </div>"),gl=p('<div class="form-content svelte-1m63nqt"><div class="header-row svelte-1m63nqt"><h3 class="svelte-1m63nqt">ü§è Fingerboarding</h3> <button class="add-row-btn svelte-1m63nqt">+ Add Exercise</button></div> <div class="form-group date-group svelte-1m63nqt"><label for="date">Date</label> <input type="date" id="date" class="svelte-1m63nqt"/></div> <div class="cards-container svelte-1m63nqt"></div> <div class="submit-section"><!> <button type="button" class="submit-btn svelte-1m63nqt"><!></button></div></div>');function bl(ge,A){wt(A,!0);const f=["Max hangs","Recruitment pulls","Max pick-ups"],D=["Full-crimp","Half-crimp","Three finger drag","Pinch","Open hand","Sloper"];let G=g(Qe(new Date().toISOString().split("T")[0])),h=g(Qe([]));function O(){t(h,[...e(h),{id:crypto.randomUUID(),name:f[0],gripType:D[1],sets:1,details:[{weight:0,reps:5}],notes:""}],!0)}ga(()=>{e(h).length===0&&O()});function U(I){t(h,e(h).filter((x,k)=>k!==I),!0)}function T(I){const x=e(h)[I],k=x.details[x.details.length-1];x.details=[...x.details,{...k}],x.sets=x.details.length}function ie(I,x){const k=e(h)[I];k.details.length>1&&(k.details=k.details.filter((C,F)=>F!==x),k.sets=k.details.length)}let M=g("idle"),W=g("");async function j(){t(M,"saving");try{const I={date:e(G),location:"N/A",exercises:JSON.parse(JSON.stringify(e(h)))},x=Wa(I);if(da()){const k=await es(I);k.ok?(Sa(x.id,k.id),ka(k.id),t(M,"success"),t(W,"Session saved and synced!")):(wa(x.id),t(M,"success"),t(W,"Saved locally. Sync failed: "+(k.error||"Unknown error")))}else t(M,"success"),t(W,"Saved locally. Will sync when online.");window.dispatchEvent(new CustomEvent("session-saved")),setTimeout(()=>{y()},2e3)}catch(I){t(M,"error"),t(W,"Failed to save session"),console.error("Save error:",I)}}function y(){t(G,new Date().toISOString().split("T")[0],!0),t(h,[],!0),O(),t(M,"idle"),t(W,"")}var S=gl(),_=l(S),u=s(l(_),2);u.__click=O,a(_);var N=s(_,2),se=s(l(N),2);B(se),a(N);var z=s(N,2);ue(z,21,()=>e(h),me,(I,x,k)=>{var C=_l(),F=l(C),Y=l(F),Q=l(Y);ue(Q,21,()=>f,me,(ve,Ce)=>{var be=dl(),ze=l(be,!0);a(be);var Te={};L(()=>{J(ze,e(Ce)),Te!==(Te=e(Ce))&&(be.value=(be.__value=e(Ce))??"")}),i(ve,be)}),a(Q);var ae=s(Q,2);ue(ae,21,()=>D,me,(ve,Ce)=>{var be=ul(),ze=l(be,!0);a(be);var Te={};L(()=>{J(ze,e(Ce)),Te!==(Te=e(Ce))&&(be.value=(be.__value=e(Ce))??"")}),i(ve,be)}),a(ae),a(Y);var ee=s(Y,2);ee.__click=()=>U(k),a(F);var we=s(F,2),Ke=l(we);ue(Ke,17,()=>e(x).details,me,(ve,Ce,be)=>{var ze=fl(),Te=l(ze),$e=l(Te);_t($e,"for",`weight-${k}-${be}`);var lt=s($e,2);B(lt),_t(lt,"id",`weight-${k}-${be}`),a(Te);var rt=s(Te,2),qt=l(rt);_t(qt,"for",`reps-${k}-${be}`);var q=s(qt,2);B(q),_t(q,"id",`reps-${k}-${be}`),a(rt);var o=s(rt,2);{var d=m=>{var H=pl();H.__click=()=>ie(k,be),i(m,H)};E(o,m=>{e(x).details.length>1&&m(d)})}a(ze),P(lt,()=>e(Ce).weight,m=>e(Ce).weight=m),P(q,()=>e(Ce).reps,m=>e(Ce).reps=m),i(ve,ze)});var He=s(Ke,2);He.__click=()=>T(k),a(we);var Pe=s(we,2),pe=l(Pe),xe=l(pe);_t(xe,"for",`total-sets-${k}`);var Ge=s(xe,2);B(Ge),_t(Ge,"id",`total-sets-${k}`),a(pe);var Me=s(pe,2),ne=l(Me);_t(ne,"for",`notes-${k}`);var re=s(ne,2);B(re),_t(re,"id",`notes-${k}`),a(Me),a(Pe),a(C),L(()=>Ra(Ge,e(x).sets)),Ze(Q,()=>e(x).name,ve=>e(x).name=ve),Ze(ae,()=>e(x).gripType,ve=>e(x).gripType=ve),P(re,()=>e(x).notes,ve=>e(x).notes=ve),i(I,C)}),a(z);var b=s(z,2),V=l(b);{var K=I=>{var x=ml();let k;var C=l(x,!0);a(x),L(()=>{k=et(x,1,"save-message svelte-1m63nqt",null,k,{success:e(M)==="success",error:e(M)==="error"}),J(C,e(W))}),i(I,x)};E(V,I=>{e(W)&&I(K)})}var Z=s(V,2);Z.__click=j;var $=l(Z);{var w=I=>{var x=je("Saving...");i(I,x)},te=I=>{var x=kt(),k=mt(x);{var C=Y=>{var Q=je("‚úì Saved!");i(Y,Q)},F=Y=>{var Q=je("Save Session");i(Y,Q)};E(k,Y=>{e(M)==="success"?Y(C):Y(F,!1)},!0)}i(I,x)};E($,I=>{e(M)==="saving"?I(w):I(te,!1)})}a(Z),a(b),a(S),L(()=>Z.disabled=e(M)==="saving"),P(se,()=>e(G),I=>t(G,I)),i(ge,S),xt()}Qt(["click"]);var yl=p("<option> </option>"),hl=p('<input type="text" placeholder="Enter venue name" class="mt-2 svelte-1fje4dh"/>'),Sl=p("<option> </option>"),kl=p("<option> </option>"),wl=p('<input type="text" placeholder="Round name" class="mt-2 svelte-1fje4dh"/>'),xl=p('<div class="result-mode-content svelte-1fje4dh"><div class="form-group svelte-1fje4dh"><label for="position" class="svelte-1fje4dh">Final Position</label> <input type="number" id="position" placeholder="#" class="large-input svelte-1fje4dh"/></div></div>'),ql=p("<option> </option>"),Cl=p('<input type="number" min="1" class="svelte-1fje4dh"/>'),Tl=p('<span class="flash-dash">-</span>'),Nl=p('<tr><td class="col-name svelte-1fje4dh"><input type="text" class="svelte-1fje4dh"/></td><td class="col-status svelte-1fje4dh"><select class="svelte-1fje4dh"></select></td><td class="col-attempt svelte-1fje4dh"><!></td><td class="col-notes svelte-1fje4dh"><input type="text" placeholder="..." class="svelte-1fje4dh"/></td><td class="col-action svelte-1fje4dh"><button class="svelte-1fje4dh">‚úï</button></td></tr>'),Fl=p('<div class="load-metrics-compact svelte-1fje4dh"><div class="metric svelte-1fje4dh"><label for="finger">Finger Load</label> <input type="number" id="finger" min="0" max="5" step="0.5" class="svelte-1fje4dh"/></div> <div class="metric svelte-1fje4dh"><label for="shoulder">Shoulder Load</label> <input type="number" id="shoulder" min="0" max="5" step="0.5" class="svelte-1fje4dh"/></div> <div class="metric svelte-1fje4dh"><label for="forearm">Forearm Load</label> <input type="number" id="forearm" min="0" max="5" step="0.5" class="svelte-1fje4dh"/></div></div> <div class="climbs-table-container svelte-1fje4dh"><div class="section-header svelte-1fje4dh"><h4 class="svelte-1fje4dh">Boulders / Routes</h4></div> <table class="climbs-table svelte-1fje4dh"><thead><tr><th class="svelte-1fje4dh">#</th><th class="svelte-1fje4dh">Result</th><th class="svelte-1fje4dh">Att.</th><th class="svelte-1fje4dh">Notes</th><th class="svelte-1fje4dh"></th></tr></thead><tbody></tbody></table> <button class="add-row-btn svelte-1fje4dh">+ Add Row</button></div>',1),Ol=p("<div> </div>"),Ll=p('<div class="form-content svelte-1fje4dh"><h3 class="svelte-1fje4dh">üèÜ Competition</h3> <div class="form-grid svelte-1fje4dh"><div class="form-group svelte-1fje4dh"><label for="date" class="svelte-1fje4dh">Date</label> <input type="date" id="date" class="svelte-1fje4dh"/></div> <div class="form-group svelte-1fje4dh"><label for="venue" class="svelte-1fje4dh">Venue</label> <select id="venue" class="svelte-1fje4dh"><option disabled>Select venue...</option><!></select> <!></div></div> <div class="form-group mb-4 svelte-1fje4dh"><label for="type" class="svelte-1fje4dh">Type</label> <select id="type" class="svelte-1fje4dh"></select></div> <div class="round-section svelte-1fje4dh"><div class="form-group svelte-1fje4dh"><label for="round" class="svelte-1fje4dh">Round</label> <select id="round" class="svelte-1fje4dh"></select> <!></div> <!></div> <div class="submit-section"><!> <button type="button" class="submit-btn svelte-1fje4dh"><!></button></div></div>');function Gl(ge,A){wt(A,!0);const f=["Flashpoint Bristol","Rockstar Techno","Rockstar Unit 3","Rockstar Unit 5","Bloc","TCA","Other"],D=["Bouldering","Lead","Speed"],G=["Qualifiers","Semi-Finals","Finals","Result","Other"],h=["Flash","Top","Zone","Attempt"];let O=g(Qe(new Date().toISOString().split("T")[0])),U=g(""),T=g(""),ie=g("Bouldering"),M=g(4),W=g(4),j=g(4),y=g("Qualifiers"),S=g(""),_=g(null),u=g(Qe([{name:"#1",status:"Flash",attemptCount:1,notes:""}])),N=Bt(()=>e(y)==="Result"),se=Bt(()=>e(U)==="Other"),z=Bt(()=>e(y)==="Other"),b=Bt(()=>e(y)==="Other"?e(S):e(y));function V(){const q=e(u).length+1;t(u,[...e(u),{name:`#${q}`,status:"Flash",attemptCount:1,notes:""}],!0)}function K(q){e(u).length>1?t(u,e(u).filter((o,d)=>d!==q),!0):e(u)[0]={name:"#1",status:"Flash",attemptCount:1,notes:""}}function Z(q,o){e(u)[q].status=o,o==="Flash"&&(e(u)[q].attemptCount=1)}let $=g("idle"),w=g("");async function te(){if(!e(U)||e(U)==="Other"&&!e(T)){t($,"error"),t(w,"Please specify a venue");return}t($,"saving");try{const q={name:e(b),position:e(N)?e(_):void 0,climbs:e(N)?void 0:JSON.parse(JSON.stringify(e(u)))},o={date:e(O),venue:e(U)==="Other"?e(T):e(U),customVenue:e(U)==="Other"?e(T):void 0,type:e(ie),fingerLoad:e(N)?void 0:e(M),shoulderLoad:e(N)?void 0:e(W),forearmLoad:e(N)?void 0:e(j),rounds:[q]},d=Ka(o);if(da()){const m=await ts(o);m.ok?(Sa(d.id,m.id),ka(m.id),t($,"success"),t(w,"Competition saved and synced!")):(wa(d.id),t($,"success"),t(w,"Saved locally. Sync failed: "+(m.error||"Unknown error")))}else t($,"success"),t(w,"Saved locally. Will sync when online.");window.dispatchEvent(new CustomEvent("session-saved")),setTimeout(()=>{I()},2e3)}catch(q){t($,"error"),t(w,"Failed to save session"),console.error("Save error:",q)}}function I(){t(O,new Date().toISOString().split("T")[0],!0),t(U,""),t(T,""),t(_,null),t(u,[{name:"#1",status:"Flash",attemptCount:1,notes:""}],!0),t($,"idle"),t(w,"")}var x=Ll(),k=s(l(x),2),C=l(k),F=s(l(C),2);B(F),a(C);var Y=s(C,2),Q=s(l(Y),2),ae=l(Q);ae.value=ae.__value="";var ee=s(ae);ue(ee,17,()=>f,me,(q,o)=>{var d=yl(),m=l(d,!0);a(d);var H={};L(()=>{J(m,e(o)),H!==(H=e(o))&&(d.value=(d.__value=e(o))??"")}),i(q,d)}),a(Q);var we=s(Q,2);{var Ke=q=>{var o=hl();B(o),P(o,()=>e(T),d=>t(T,d)),i(q,o)};E(we,q=>{e(se)&&q(Ke)})}a(Y),a(k);var He=s(k,2),Pe=s(l(He),2);ue(Pe,21,()=>D,me,(q,o)=>{var d=Sl(),m=l(d,!0);a(d);var H={};L(()=>{J(m,e(o)),H!==(H=e(o))&&(d.value=(d.__value=e(o))??"")}),i(q,d)}),a(Pe),a(He);var pe=s(He,2),xe=l(pe),Ge=s(l(xe),2);ue(Ge,21,()=>G,me,(q,o)=>{var d=kl(),m=l(d,!0);a(d);var H={};L(()=>{J(m,e(o)),H!==(H=e(o))&&(d.value=(d.__value=e(o))??"")}),i(q,d)}),a(Ge);var Me=s(Ge,2);{var ne=q=>{var o=wl();B(o),P(o,()=>e(S),d=>t(S,d)),i(q,o)};E(Me,q=>{e(z)&&q(ne)})}a(xe);var re=s(xe,2);{var ve=q=>{var o=xl(),d=l(o),m=s(l(d),2);B(m),a(d),a(o),P(m,()=>e(_),H=>t(_,H)),i(q,o)},Ce=q=>{var o=Fl(),d=mt(o),m=l(d),H=s(l(m),2);B(H),a(m);var ce=s(m,2),Ne=s(l(ce),2);B(Ne),a(ce);var Ae=s(ce,2),Je=s(l(Ae),2);B(Je),a(Ae),a(d);var Ct=s(d,2),it=s(l(Ct),2),gt=s(l(it));ue(gt,21,()=>e(u),me,(ot,oe,ye)=>{var qe=Nl(),Ue=l(qe),dt=l(Ue);B(dt),a(Ue);var Ye=s(Ue),Ie=l(Ye);Ie.__change=Oe=>Z(ye,Oe.target.value),ue(Ie,21,()=>h,me,(Oe,Xe)=>{var bt=ql(),Lt=l(bt,!0);a(bt);var It={};L(()=>{J(Lt,e(Xe)),It!==(It=e(Xe))&&(bt.value=(bt.__value=e(Xe))??"")}),i(Oe,bt)}),a(Ie);var tt;La(Ie),a(Ye);var Fe=s(Ye),We=l(Fe);{var De=Oe=>{var Xe=Cl();B(Xe),P(Xe,()=>e(oe).attemptCount,bt=>e(oe).attemptCount=bt),i(Oe,Xe)},ut=Oe=>{var Xe=Tl();i(Oe,Xe)};E(We,Oe=>{e(oe).status!=="Flash"?Oe(De):Oe(ut,!1)})}a(Fe);var at=s(Fe),Ft=l(at);B(Ft),a(at);var At=s(at),Ot=l(At);Ot.__click=()=>K(ye),a(At),a(qe),L(()=>{tt!==(tt=e(oe).status)&&(Ie.value=(Ie.__value=e(oe).status)??"",Ga(Ie,e(oe).status))}),P(dt,()=>e(oe).name,Oe=>e(oe).name=Oe),P(Ft,()=>e(oe).notes,Oe=>e(oe).notes=Oe),i(ot,qe)}),a(gt),a(it);var Nt=s(it,2);Nt.__click=V,a(Ct),P(H,()=>e(M),ot=>t(M,ot)),P(Ne,()=>e(W),ot=>t(W,ot)),P(Je,()=>e(j),ot=>t(j,ot)),i(q,o)};E(re,q=>{e(N)?q(ve):q(Ce,!1)})}a(pe);var be=s(pe,2),ze=l(be);{var Te=q=>{var o=Ol();let d;var m=l(o,!0);a(o),L(()=>{d=et(o,1,"save-message svelte-1fje4dh",null,d,{success:e($)==="success",error:e($)==="error"}),J(m,e(w))}),i(q,o)};E(ze,q=>{e(w)&&q(Te)})}var $e=s(ze,2);$e.__click=te;var lt=l($e);{var rt=q=>{var o=je("Saving...");i(q,o)},qt=q=>{var o=kt(),d=mt(o);{var m=ce=>{var Ne=je("‚úì Saved!");i(ce,Ne)},H=ce=>{var Ne=je("Save Session");i(ce,Ne)};E(d,ce=>{e($)==="success"?ce(m):ce(H,!1)},!0)}i(q,o)};E(lt,q=>{e($)==="saving"?q(rt):q(qt,!1)})}a($e),a(be),a(x),L(()=>$e.disabled=e($)==="saving"),P(F,()=>e(O),q=>t(O,q)),Ze(Q,()=>e(U),q=>t(U,q)),Ze(Pe,()=>e(ie),q=>t(ie,q)),Ze(Ge,()=>e(y),q=>t(y,q)),i(ge,x),xt()}Qt(["change","click"]);var El=p('<span class="spinner svelte-b2zgdd"></span> Syncing...',1),jl=p("<button><!></button>"),zl=p("<div> </div>"),Al=p('<div><div class="sync-info svelte-b2zgdd"><span class="sync-icon svelte-b2zgdd"> </span> <span class="sync-text svelte-b2zgdd"><!></span></div> <!> <!></div>'),Il=p("<option> </option>"),Dl=p('<div class="form-container svelte-b2zgdd"><!></div>'),Vl=p('<div class="page svelte-b2zgdd"><div class="page-header svelte-b2zgdd"><h1 class="svelte-b2zgdd">üìù Log Data</h1> <p class="subtitle svelte-b2zgdd">Record your training sessions</p></div> <!> <div class="content-card svelte-b2zgdd"><div class="form-group svelte-b2zgdd"><label for="activity-type" class="svelte-b2zgdd">Activity Type</label> <select id="activity-type" class="svelte-b2zgdd"><option disabled>Select an activity...</option><!></select></div> <!></div></div>');function Ql(ge,A){wt(A,!0);const f=[{value:"indoor_climb",label:"Indoor Climb",icon:"üßó"},{value:"outdoor_climb",label:"Outdoor Climb",icon:"‚õ∞Ô∏è"},{value:"gym_session",label:"Gym Session",icon:"üèãÔ∏è"},{value:"fingerboarding",label:"Fingerboarding",icon:"ü§è"},{value:"competition",label:"Competition",icon:"üèÜ"}];let D=g(""),G=g(0),h=g("idle"),O=g(""),U=g(!0);ha(()=>{T(),t(U,da(),!0);const b=()=>{t(U,!0),T()},V=()=>{t(U,!1)},K=()=>{T()};return window.addEventListener("online",b),window.addEventListener("offline",V),window.addEventListener("session-saved",K),()=>{window.removeEventListener("online",b),window.removeEventListener("offline",V),window.removeEventListener("session-saved",K)}});function T(){t(G,as(),!0)}async function ie(){if(!e(U)){t(h,"error"),t(O,"No network connection");return}t(h,"syncing"),t(O,"");try{const b=await ss();b.failed===0&&b.success>0?(t(h,"success"),t(O,`Synced ${b.success} session${b.success>1?"s":""}!`)):b.failed>0&&b.success>0?(t(h,"error"),t(O,`Synced ${b.success}, failed ${b.failed}`)):b.failed>0?(t(h,"error"),t(O,`Failed to sync ${b.failed} session${b.failed>1?"s":""}`)):(t(h,"idle"),t(O,"")),T(),e(h)==="success"&&setTimeout(()=>{t(h,"idle"),t(O,"")},3e3)}catch(b){t(h,"error"),t(O,"Sync failed"),console.error("Sync error:",b)}}var M=Vl(),W=s(l(M),2);{var j=b=>{var V=Al();let K;var Z=l(V),$=l(Z),w=l($,!0);a($);var te=s($,2),I=l(te);{var x=ae=>{var ee=je();L(()=>J(ee,`${e(G)??""} session${e(G)>1?"s":""} waiting to sync`)),i(ae,ee)},k=ae=>{var ee=je();L(()=>J(ee,`Offline - ${e(G)??""} session${e(G)>1?"s":""} saved locally`)),i(ae,ee)};E(I,ae=>{e(U)?ae(x):ae(k,!1)})}a(te),a(Z);var C=s(Z,2);{var F=ae=>{var ee=jl();let we;ee.__click=ie;var Ke=l(ee);{var He=pe=>{var xe=El();Be(),i(pe,xe)},Pe=pe=>{var xe=kt(),Ge=mt(xe);{var Me=re=>{var ve=je("‚úì Synced!");i(re,ve)},ne=re=>{var ve=je("Sync Now");i(re,ve)};E(Ge,re=>{e(h)==="success"?re(Me):re(ne,!1)},!0)}i(pe,xe)};E(Ke,pe=>{e(h)==="syncing"?pe(He):pe(Pe,!1)})}a(ee),L(()=>{we=et(ee,1,"sync-btn svelte-b2zgdd",null,we,{syncing:e(h)==="syncing"}),ee.disabled=e(h)==="syncing"}),i(ae,ee)};E(C,ae=>{e(U)&&ae(F)})}var Y=s(C,2);{var Q=ae=>{var ee=zl();let we;var Ke=l(ee,!0);a(ee),L(()=>{we=et(ee,1,"sync-message svelte-b2zgdd",null,we,{error:e(h)==="error",success:e(h)==="success"}),J(Ke,e(O))}),i(ae,ee)};E(Y,ae=>{e(O)&&ae(Q)})}a(V),L(()=>{K=et(V,1,"sync-banner svelte-b2zgdd",null,K,{offline:!e(U)}),J(w,e(U)?"üîÑ":"üì¥")}),i(b,V)};E(W,b=>{e(G)>0&&b(j)})}var y=s(W,2),S=l(y),_=s(l(S),2),u=l(_);u.value=u.__value="";var N=s(u);ue(N,17,()=>f,b=>b.value,(b,V)=>{var K=Il(),Z=l(K);a(K);var $={};L(()=>{J(Z,`${e(V).icon??""} ${e(V).label??""}`),$!==($=e(V).value)&&(K.value=(K.__value=e(V).value)??"")}),i(b,K)}),a(_),a(S);var se=s(S,2);{var z=b=>{var V=Dl(),K=l(V);{var Z=w=>{ks(w,{})},$=w=>{var te=kt(),I=mt(te);{var x=C=>{Ds(C,{})},k=C=>{var F=kt(),Y=mt(F);{var Q=ee=>{cl(ee,{})},ae=ee=>{var we=kt(),Ke=mt(we);{var He=pe=>{bl(pe,{})},Pe=pe=>{var xe=kt(),Ge=mt(xe);{var Me=ne=>{Gl(ne,{})};E(Ge,ne=>{e(D)==="competition"&&ne(Me)},!0)}i(pe,xe)};E(Ke,pe=>{e(D)==="fingerboarding"?pe(He):pe(Pe,!1)},!0)}i(ee,we)};E(Y,ee=>{e(D)==="gym_session"?ee(Q):ee(ae,!1)},!0)}i(C,F)};E(I,C=>{e(D)==="outdoor_climb"?C(x):C(k,!1)},!0)}i(w,te)};E(K,w=>{e(D)==="indoor_climb"?w(Z):w($,!1)})}a(V),i(b,V)};E(se,b=>{e(D)&&b(z)})}a(y),a(M),Ze(_,()=>e(D),b=>t(D,b)),i(ge,M),xt()}Qt(["click"]);export{Ql as component};
