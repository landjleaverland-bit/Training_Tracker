import{f as n,a as i,c as nt,t as je}from"../chunks/CKcnA5P_.js";import{w as Da,p as vt,c as l,r as t,s,j as e,t as L,a as ct,f as st,aV as _,E as Ge,aG as Ae,F as a,aW as Dt,b0 as Fa,d as Oa,b1 as oa,k as Le,e as ye,b2 as ja,ac as Re,o as za,b3 as Aa,b4 as pa,b5 as qa,b6 as Ia,D as Ga,b7 as Ra}from"../chunks/4c6jdw0Z.js";import{d as Jt,s as Q,e as Y}from"../chunks/K94srNfd.js";import{i as E}from"../chunks/CK8hGvwc.js";import{e as pe,i as _e,r as I,b as M,c as Ea,s as at,d as Va}from"../chunks/BVSa1UsB.js";import{s as Be}from"../chunks/9PGhKrW6.js";import{i as Ca,s as Ta,c as Xe,d as Ba,u as ma,m as ga,b as ba,e as Ma,f as Pa,h as $a,j as Wa}from"../chunks/BqWccOr6.js";import{i as na,c as Ua,g as Ha,a as Ka,b as Ja,t as ra,f as fa,E as wa,d as Qa,D as Xa,e as Ya,h as Za,j as es,s as ts}from"../chunks/9PYLJcFu.js";import{p as lt}from"../chunks/CfB7tKQ8.js";import{i as Qt}from"../chunks/DMFvxL8W.js";import{b as as}from"../chunks/BnjIvt2V.js";function _a(me){return function(...V){var c=V[0];return c.stopPropagation(),me?.apply(this,V)}}function It(me,V){var c=me.$$events?.[V.type],G=Da(c)?c.slice():c==null?[]:[c];for(var C of G)C.call(this,V)}var ss=n('<span class="placeholder svelte-1g8x5ph"> </span>'),ls=n('<span class="chip-display"> </span>'),is=n('<button type="button"> </button>'),rs=n('<div class="multi-select-container svelte-1g8x5ph"><div class="chips svelte-1g8x5ph"><!></div> <div class="options-grid svelte-1g8x5ph"></div></div>');function Ct(me,V){vt(V,!0);let c=lt(V,"selected",19,()=>[]),G=lt(V,"placeholder",3,"Select options...");function C(S){let z=[...c()];S==="None"?z.includes("None")?z=[]:z=["None"]:(z=z.filter(F=>F!=="None"),z.includes(S)?z=z.filter(F=>F!==S):z.push(S)),V.onChange(z)}var f=rs(),d=l(f),P=l(d);{var H=S=>{var z=ss(),F=l(z,!0);t(z),L(()=>Q(F,G())),i(S,z)},le=S=>{var z=nt(),F=st(z);pe(F,17,c,_e,(h,m)=>{var g=ls(),T=l(g,!0);t(g),L(()=>Q(T,e(m))),i(h,g)}),i(S,z)};E(P,S=>{c().length===0?S(H):S(le,!1)})}t(d);var B=s(d,2);pe(B,21,()=>V.options,_e,(S,z)=>{var F=is();F.__click=()=>C(e(z));var h=l(F,!0);t(F),L(m=>{Be(F,1,`option-chip ${m??""}`,"svelte-1g8x5ph"),Q(h,e(z))},[()=>c().includes(e(z))?"selected":""]),i(S,F)}),t(B),t(f),i(me,f),ct()}Jt(["click"]);var os=n('<div class="input-with-action svelte-1lf3qka"><input type="text" id="location-manual" placeholder="Enter custom location..." class="flat-left svelte-1lf3qka"/> <button type="button" class="action-btn flat-right svelte-1lf3qka" title="Back to list">‚úï</button></div>'),ns=n("<option> </option>"),vs=n('<select id="location" class="svelte-1lf3qka"><option disabled>Select location...</option><!></select>'),cs=n("<option> </option>"),ds=n("<option> </option>"),us=n('<th class="svelte-1lf3qka">Sport?</th>'),ps=n('<td class="center svelte-1lf3qka"><input type="checkbox" class="svelte-1lf3qka"/></td>'),fs=n('<span class="grade-error svelte-1lf3qka">Invalid</span>'),_s=n("<option> </option>"),ms=n('<button type="button" class="remove-btn svelte-1lf3qka">‚úï</button>'),gs=n('<tr><!><td class="svelte-1lf3qka"><input type="text" placeholder="Route name..." class="svelte-1lf3qka"/></td><td class="svelte-1lf3qka"><input type="text" placeholder="V3"/> <!></td><td class="svelte-1lf3qka"><select class="svelte-1lf3qka"></select></td><td class="svelte-1lf3qka"><input type="number" min="1" class="svelte-1lf3qka"/></td><td><textarea placeholder="Notes..." class="svelte-1lf3qka"></textarea></td><td class="center svelte-1lf3qka"><!></td></tr>'),bs=n("<div> </div>"),hs=n('<div class="form-content svelte-1lf3qka"><h3 class="svelte-1lf3qka">üßó Indoor Climb</h3> <div class="form-row svelte-1lf3qka"><div class="form-group svelte-1lf3qka"><label for="date" class="svelte-1lf3qka">Date</label> <input type="date" id="date" class="svelte-1lf3qka"/></div> <div class="form-group svelte-1lf3qka"><label for="location" class="svelte-1lf3qka">Location</label> <!></div></div> <div class="form-group svelte-1lf3qka"><label for="climbing-type" class="svelte-1lf3qka">Climbing Type</label> <select id="climbing-type" class="svelte-1lf3qka"><option disabled>Select type...</option><!></select></div> <div class="load-section svelte-1lf3qka"><h4 class="svelte-1lf3qka">Load Metrics</h4> <div class="load-metrics svelte-1lf3qka"><div class="load-item svelte-1lf3qka"><label for="finger-load" class="svelte-1lf3qka">Finger</label> <input type="number" id="finger-load" min="1" max="5" class="svelte-1lf3qka"/> <span class="load-scale svelte-1lf3qka">/ 5</span></div> <div class="load-item svelte-1lf3qka"><label for="shoulder-load" class="svelte-1lf3qka">Shoulder</label> <input type="number" id="shoulder-load" min="1" max="5" class="svelte-1lf3qka"/> <span class="load-scale svelte-1lf3qka">/ 5</span></div> <div class="load-item svelte-1lf3qka"><label for="forearm-load" class="svelte-1lf3qka">Forearm</label> <input type="number" id="forearm-load" min="1" max="5" class="svelte-1lf3qka"/> <span class="load-scale svelte-1lf3qka">/ 5</span></div></div> <h4 class="mt-4 svelte-1lf3qka">Grip Metrics</h4> <div class="load-metrics svelte-1lf3qka"><div class="load-item svelte-1lf3qka"><label for="open-grip" class="svelte-1lf3qka">Open</label> <input type="number" id="open-grip" min="1" max="5" class="svelte-1lf3qka"/> <span class="load-scale svelte-1lf3qka">/ 5</span></div> <div class="load-item svelte-1lf3qka"><label for="crimp-grip" class="svelte-1lf3qka">Crimp</label> <input type="number" id="crimp-grip" min="1" max="5" class="svelte-1lf3qka"/> <span class="load-scale svelte-1lf3qka">/ 5</span></div> <div class="load-item svelte-1lf3qka"><label for="pinch-grip" class="svelte-1lf3qka">Pinch</label> <input type="number" id="pinch-grip" min="1" max="5" class="svelte-1lf3qka"/> <span class="load-scale svelte-1lf3qka">/ 5</span></div> <div class="load-item svelte-1lf3qka"><label for="sloper-grip" class="svelte-1lf3qka">Sloper</label> <input type="number" id="sloper-grip" min="1" max="5" class="svelte-1lf3qka"/> <span class="load-scale svelte-1lf3qka">/ 5</span></div> <div class="load-item svelte-1lf3qka"><label for="jug-grip" class="svelte-1lf3qka">Jug</label> <input type="number" id="jug-grip" min="1" max="5" class="svelte-1lf3qka"/> <span class="load-scale svelte-1lf3qka">/ 5</span></div></div></div> <div class="training-section svelte-1lf3qka"><h4 class="svelte-1lf3qka">Training Details</h4> <div class="training-grid svelte-1lf3qka"><div class="training-item svelte-1lf3qka"><label for="training-type" class="svelte-1lf3qka">Training Type</label> <!></div> <div class="training-item svelte-1lf3qka"><label for="difficulty" class="svelte-1lf3qka">Difficulty</label> <select id="difficulty" class="svelte-1lf3qka"></select></div> <div class="training-item svelte-1lf3qka"><label for="category" class="svelte-1lf3qka">Category</label> <!></div> <div class="training-item svelte-1lf3qka"><label for="energy-system" class="svelte-1lf3qka">Energy System</label> <!></div> <div class="training-item svelte-1lf3qka"><label for="technique-focus" class="svelte-1lf3qka">Technique Focus</label> <!></div> <div class="training-item svelte-1lf3qka"><label for="wall-angle" class="svelte-1lf3qka">Wall</label> <!></div></div></div> <div class="climbs-section svelte-1lf3qka"><h4 class="svelte-1lf3qka">Climbs</h4> <div class="table-container svelte-1lf3qka"><table class="climbs-table svelte-1lf3qka"><thead><tr><!><th class="svelte-1lf3qka">Name</th><th class="svelte-1lf3qka">Grade</th><th class="svelte-1lf3qka">Attempt</th><th class="svelte-1lf3qka">#</th><th class="svelte-1lf3qka">Notes</th><th class="svelte-1lf3qka"></th></tr></thead><tbody></tbody></table></div> <button type="button" class="add-btn svelte-1lf3qka">+ Add Climb</button></div> <div class="submit-section svelte-1lf3qka"><!> <button type="button" class="submit-btn svelte-1lf3qka"><!></button></div></div>');function ys(me,V){vt(V,!0);const c=["Rockstar Unit 3","Rockstar Unit 5","Rockstar Techno","Flashpoint Bristol","Redpoint Bristol","TCH Bristol","Other"],G=["Bouldering","Sport","Mixed"],C=["Onsight","Flash","Redpoint","Dogged","DNF"],f=["None","Projecting","Onsighting","Campusing","Repeaters"],d=["None","Easy","Medium","Hard","Max","Limit+"],P=["None","Strength","Strength-endurance","Power Endurance","Coordination","Slab Technique","Overhang technique","Warm-up","Power"],H=["None","Aerobic capacity","Aerobic lactic power","Anaerobic alactic capacity","Anaerobic alactic power","Anaerobic power","Anaerobic lactic capacity"],le=["None","Trusting feet","Double-clutch","Standing on volumes","Deadpointing","Flagging","Swapping feet","Edging","Smearing","Matching","Backstepping","Drop Knee","Stemming","Bridging","Laybacking","Mantling","Kneebar","Dyno","Pogo","Coordination Moves","Gastoning","Underclinging","Compressing","Heel Hook","Toe Hook","Bicycle"],B=["None","Overhang","Slab","Roof","Moon Board","Kilter Board","Beast","Circuit Board"],z=["V0-","4-","V0","4","V0+","4+","V1","5","V2","5+","V3","6A","V4","6B","V5","6C","V6","7A","V7","7A+","V8","7B","7B+","V9","7C","V10","7C+","V11","8A","V12","8A+","V13","8B","V14","8B+","V15","8C","V16","8C+","V17","9A"].map(o=>o.toLowerCase());let F=_(null),h=_(Ge(new Date().toISOString().split("T")[0])),m=_(""),g=_(""),T=_(Ge(["None"])),ce=_("None"),ne=_(Ge(["None"])),q=_(Ge(["None"])),$=_(Ge(["None"])),K=_(Ge(["None"])),ee=_(3),W=_(3),y=_(3),se=_(3),D=_(3),x=_(3),w=_(3),N=_(3),A=_(Ge([{isSport:!1,name:"",grade:"",attemptType:"Flash",attemptsNum:1,notes:""}])),X=_(!1);function ie(){e(m)==="Other"&&(a(X,!0),a(m,""))}function re(){a(X,!1),a(m,"")}function Z(){a(A,[...e(A),{isSport:!1,name:"",grade:"",attemptType:"Flash",attemptsNum:1,notes:""}],!0)}function Ce(o){a(A,e(A).filter((k,te)=>te!==o),!0)}function De(o,k){e(A)[o].attemptType=k,(k==="Flash"||k==="Onsight")&&(e(A)[o].attemptsNum=1)}function Me(o){a(F,o,!0)}function Ie(){a(F,null)}let fe=Dt(()=>e(g)==="Mixed");function Te(o){return e(g)==="Sport"?!0:e(g)==="Bouldering"?!1:o.isSport}function Fe(o){return o.trim()?z.includes(o.trim().toLowerCase()):!0}let ge=_("idle"),v=_("");function O(){return e(m)?e(g)?e(A).filter(k=>k.grade.trim()&&!Fe(k.grade)).length>0?"Please fix invalid grades":null:"Please select a climbing type":"Please select a location"}async function U(){const o=O();if(o){a(ge,"error"),a(v,o,!0);return}a(ge,"saving");try{const k=e(A).map(he=>({...he,isSport:Te(he)})),te={date:e(h),location:e(m),customLocation:e(X)?e(m):void 0,climbingType:e(g),trainingTypes:e(T),difficulty:e(ce),categories:e(ne),energySystems:e(q),techniqueFocuses:e($),wallAngles:e(K),fingerLoad:e(ee),shoulderLoad:e(W),forearmLoad:e(y),openGrip:e(se),crimpGrip:e(D),pinchGrip:e(x),sloperGrip:e(w),jugGrip:e(N),climbs:k},Oe=Ba(te);if(na()){const he=await Ua(te);he.ok?(ma(Oe.id,he.id),ga(he.id),a(ge,"success"),a(v,"Session saved and synced!")):(ba(Oe.id),a(ge,"success"),a(v,"Saved locally. Sync failed: "+(he.error||"Unknown error")))}else a(ge,"success"),a(v,"Saved locally. Will sync when online.");window.dispatchEvent(new CustomEvent("session-saved")),setTimeout(()=>{ae()},2e3)}catch(k){a(ge,"error"),a(v,"Failed to save session"),console.error("Save error:",k)}}function ae(){a(h,new Date().toISOString().split("T")[0],!0),a(m,""),a(X,!1),a(g,""),a(T,["None"],!0),a(ce,"None"),a(ne,["None"],!0),a(q,["None"],!0),a($,["None"],!0),a(K,["None"],!0),a(ee,3),a(W,3),a(y,3),a(se,3),a(D,3),a(x,3),a(w,3),a(N,3),a(A,[{isSport:!1,name:"",grade:"",attemptType:"Flash",attemptsNum:1,notes:""}],!0),a(ge,"idle"),a(v,"")}var oe=hs(),be=s(l(oe),2),ve=l(be),we=s(l(ve),2);I(we),t(ve);var Ye=s(ve,2),Ze=s(l(Ye),2);{var qe=o=>{var k=os(),te=l(k);I(te);var Oe=s(te,2);Oe.__click=re,t(k),M(te,()=>e(m),he=>a(m,he)),i(o,k)},u=o=>{var k=vs();k.__change=ie;var te=l(k);te.value=te.__value="";var Oe=s(te);pe(Oe,17,()=>c,_e,(he,Je)=>{var r=ns(),p=l(r,!0);t(r);var R={};L(()=>{Q(p,e(Je)),R!==(R=e(Je))&&(r.value=(r.__value=e(Je))??"")}),i(he,r)}),t(k),Xe(k,()=>e(m),he=>a(m,he)),i(o,k)};E(Ze,o=>{e(X)?o(qe):o(u,!1)})}t(Ye),t(be);var b=s(be,2),j=s(l(b),2),J=l(j);J.value=J.__value="";var ke=s(J);pe(ke,17,()=>G,_e,(o,k)=>{var te=cs(),Oe=l(te,!0);t(te);var he={};L(()=>{Q(Oe,e(k)),he!==(he=e(k))&&(te.value=(te.__value=e(k))??"")}),i(o,te)}),t(j),t(b);var Ee=s(b,2),We=s(l(Ee),2),yt=l(We),Tt=s(l(yt),2);I(Tt),Ae(2),t(yt);var pt=s(yt,2),ft=s(l(pt),2);I(ft),Ae(2),t(pt);var kt=s(pt,2),Gt=s(l(kt),2);I(Gt),Ae(2),t(kt),t(We);var Ue=s(We,4),Ve=l(Ue),St=s(l(Ve),2);I(St),Ae(2),t(Ve);var _t=s(Ve,2),mt=s(l(_t),2);I(mt),Ae(2),t(_t);var xt=s(_t,2),wt=s(l(xt),2);I(wt),Ae(2),t(xt);var He=s(xt,2),Nt=s(l(He),2);I(Nt),Ae(2),t(He);var gt=s(He,2),At=s(l(gt),2);I(At),Ae(2),t(gt),t(Ue),t(Ee);var qt=s(Ee,2),Et=s(l(qt),2),dt=l(Et),Vt=s(l(dt),2);Ct(Vt,{get options(){return f},get selected(){return e(T)},placeholder:"Select types...",onChange:o=>a(T,o,!0)}),t(dt);var bt=s(dt,2),Ft=s(l(bt),2);pe(Ft,21,()=>d,_e,(o,k)=>{var te=ds(),Oe=l(te,!0);t(te);var he={};L(()=>{Q(Oe,e(k)),he!==(he=e(k))&&(te.value=(te.__value=e(k))??"")}),i(o,te)}),t(Ft),t(bt);var Ne=s(bt,2),Ke=s(l(Ne),2);Ct(Ke,{get options(){return P},get selected(){return e(ne)},placeholder:"Select categories...",onChange:o=>a(ne,o,!0)}),t(Ne);var Pe=s(Ne,2),Rt=s(l(Pe),2);Ct(Rt,{get options(){return H},get selected(){return e(q)},placeholder:"Select systems...",onChange:o=>a(q,o,!0)}),t(Pe);var ht=s(Pe,2),ha=s(l(ht),2);Ct(ha,{get options(){return le},get selected(){return e($)},placeholder:"Select focus...",onChange:o=>a($,o,!0)}),t(ht);var Bt=s(ht,2),Xt=s(l(Bt),2);Ct(Xt,{get options(){return B},get selected(){return e(K)},placeholder:"Select angles...",onChange:o=>a(K,o,!0)}),t(Bt),t(Et),t(qt);var Lt=s(qt,2),Yt=s(l(Lt),2),Mt=l(Yt),Zt=l(Mt),ea=l(Zt),ya=l(ea);{var ta=o=>{var k=us();i(o,k)};E(ya,o=>{e(fe)&&o(ta)})}Ae(6),t(ea),t(Zt);var Pt=s(Zt);pe(Pt,21,()=>e(A),_e,(o,k,te)=>{var Oe=gs(),he=l(Oe);{var Je=de=>{var $e=ps(),tt=l($e);I(tt),t($e),Ea(tt,()=>e(k).isSport,Kt=>e(k).isSport=Kt),i(de,$e)};E(he,de=>{e(fe)&&de(Je)})}var r=s(he),p=l(r);I(p),t(r);var R=s(r),Se=l(R);I(Se);let ue;var it=s(Se,2);{var ut=de=>{var $e=fs();i(de,$e)};E(it,de=>{Fe(e(k).grade)||de(ut)})}t(R);var Qe=s(R),ze=l(Qe);ze.__change=de=>De(te,de.target.value),pe(ze,21,()=>C,_e,(de,$e)=>{var tt=_s(),Kt=l(tt,!0);t(tt);var ua={};L(()=>{Q(Kt,e($e)),ua!==(ua=e($e))&&(tt.value=(tt.__value=e($e))??"")}),i(de,tt)}),t(ze);var et;Ca(ze),t(Qe);var Ot=s(Qe),jt=l(Ot);I(jt),t(Ot);var Ut=s(Ot);let Ht;var rt=l(Ut);Fa(rt),t(Ut);var sa=s(Ut),la=l(sa);{var ia=de=>{var $e=ms();$e.__click=()=>Ce(te),i(de,$e)};E(la,de=>{e(A).length>1&&de(ia)})}t(sa),t(Oe),L(de=>{ue=Be(Se,1,"grade-input svelte-1lf3qka",null,ue,de),et!==(et=e(k).attemptType)&&(ze.value=(ze.__value=e(k).attemptType)??"",Ta(ze,e(k).attemptType)),jt.disabled=e(k).attemptType==="Flash",Ht=Be(Ut,1,"notes-cell svelte-1lf3qka",null,Ht,{expanded:e(F)===te})},[()=>({invalid:!Fe(e(k).grade)})]),M(p,()=>e(k).name,de=>e(k).name=de),M(Se,()=>e(k).grade,de=>e(k).grade=de),M(jt,()=>e(k).attemptsNum,de=>e(k).attemptsNum=de),Y("focus",rt,()=>Me(te)),Y("blur",rt,Ie),M(rt,()=>e(k).notes,de=>e(k).notes=de),i(o,Oe)}),t(Pt),t(Mt),t(Yt);var va=s(Yt,2);va.__click=Z,t(Lt);var $t=s(Lt,2),aa=l($t);{var ka=o=>{var k=bs();let te;var Oe=l(k,!0);t(k),L(()=>{te=Be(k,1,"save-message svelte-1lf3qka",null,te,{success:e(ge)==="success",error:e(ge)==="error"}),Q(Oe,e(v))}),i(o,k)};E(aa,o=>{e(v)&&o(ka)})}var Wt=s(aa,2);Wt.__click=U;var ca=l(Wt);{var Sa=o=>{var k=je("Saving...");i(o,k)},da=o=>{var k=nt(),te=st(k);{var Oe=Je=>{var r=je("‚úì Saved!");i(Je,r)},he=Je=>{var r=je("Save Session");i(Je,r)};E(te,Je=>{e(ge)==="success"?Je(Oe):Je(he,!1)},!0)}i(o,k)};E(ca,o=>{e(ge)==="saving"?o(Sa):o(da,!1)})}t(Wt),t($t),t(oe),L(()=>Wt.disabled=e(ge)==="saving"),M(we,()=>e(h),o=>a(h,o)),Xe(j,()=>e(g),o=>a(g,o)),M(Tt,()=>e(ee),o=>a(ee,o)),M(ft,()=>e(W),o=>a(W,o)),M(Gt,()=>e(y),o=>a(y,o)),M(St,()=>e(se),o=>a(se,o)),M(mt,()=>e(D),o=>a(D,o)),M(wt,()=>e(x),o=>a(x,o)),M(Nt,()=>e(w),o=>a(w,o)),M(At,()=>e(N),o=>a(N,o)),Xe(Ft,()=>e(ce),o=>a(ce,o)),i(me,oe),ct()}Jt(["click","change"]);var ks=n("<option> </option>"),Ss=n('<div class="input-with-action svelte-15o2ys1"><input type="text" id="crag-manual" placeholder="Enter custom crag name..." class="flat-left svelte-15o2ys1"/> <button type="button" class="action-btn flat-right svelte-15o2ys1" title="Back to list">‚úï</button></div>'),xs=n("<option> </option>"),ws=n("<option>Other (Manual Entry)</option>"),qs=n('<select id="crag" class="svelte-15o2ys1"><option disabled> </option><!><!></select>'),Cs=n("<option> </option>"),Ts=n("<option> </option>"),Ns=n('<th class="svelte-15o2ys1">Sport?</th>'),Fs=n('<td class="center svelte-15o2ys1"><input type="checkbox" class="svelte-15o2ys1"/></td>'),Os=n('<span class="grade-error svelte-15o2ys1">Invalid</span>'),js=n("<option> </option>"),zs=n('<button type="button" class="remove-btn svelte-15o2ys1">‚úï</button>'),As=n('<tr><!><td class="svelte-15o2ys1"><input type="text" placeholder="Route name..." class="svelte-15o2ys1"/></td><td class="svelte-15o2ys1"><input type="text" placeholder="V3"/> <!></td><td class="svelte-15o2ys1"><select class="svelte-15o2ys1"></select></td><td class="svelte-15o2ys1"><input type="number" min="1" class="svelte-15o2ys1"/></td><td><textarea placeholder="Notes..." class="svelte-15o2ys1"></textarea></td><td class="center svelte-15o2ys1"><!></td></tr>'),Es=n("<div> </div>"),Vs=n('<div class="form-content svelte-15o2ys1"><h3 class="svelte-15o2ys1">‚õ∞Ô∏è Outdoor Climb</h3> <div class="form-row svelte-15o2ys1"><div class="form-group svelte-15o2ys1"><label for="date" class="svelte-15o2ys1">Date</label> <input type="date" id="date" class="svelte-15o2ys1"/></div> <div class="form-group svelte-15o2ys1"><label for="area" class="svelte-15o2ys1">Area</label> <select id="area" class="svelte-15o2ys1"><option disabled>Select area...</option><!></select></div></div> <div class="form-row svelte-15o2ys1"><div class="form-group svelte-15o2ys1"><label for="crag" class="svelte-15o2ys1">Crag</label> <!></div> <div class="form-group svelte-15o2ys1"><label for="sector" class="svelte-15o2ys1">Wall / Sector</label> <input type="text" id="sector" placeholder="Enter sector or wall name..." class="svelte-15o2ys1"/></div></div> <div class="form-group svelte-15o2ys1"><label for="climbing-type" class="svelte-15o2ys1">Climbing Type</label> <select id="climbing-type" class="svelte-15o2ys1"><option disabled>Select type...</option><!></select></div> <div class="load-section svelte-15o2ys1"><h4 class="svelte-15o2ys1">Load Metrics</h4> <div class="load-metrics svelte-15o2ys1"><div class="load-item svelte-15o2ys1"><label for="finger-load" class="svelte-15o2ys1">Finger</label> <input type="number" id="finger-load" min="1" max="5" class="svelte-15o2ys1"/> <span class="load-scale svelte-15o2ys1">/ 5</span></div> <div class="load-item svelte-15o2ys1"><label for="shoulder-load" class="svelte-15o2ys1">Shoulder</label> <input type="number" id="shoulder-load" min="1" max="5" class="svelte-15o2ys1"/> <span class="load-scale svelte-15o2ys1">/ 5</span></div> <div class="load-item svelte-15o2ys1"><label for="forearm-load" class="svelte-15o2ys1">Forearm</label> <input type="number" id="forearm-load" min="1" max="5" class="svelte-15o2ys1"/> <span class="load-scale svelte-15o2ys1">/ 5</span></div></div> <h4 class="mt-4 svelte-15o2ys1">Grip Metrics</h4> <div class="load-metrics svelte-15o2ys1"><div class="load-item svelte-15o2ys1"><label for="open-grip" class="svelte-15o2ys1">Open</label> <input type="number" id="open-grip" min="1" max="5" class="svelte-15o2ys1"/> <span class="load-scale svelte-15o2ys1">/ 5</span></div> <div class="load-item svelte-15o2ys1"><label for="crimp-grip" class="svelte-15o2ys1">Crimp</label> <input type="number" id="crimp-grip" min="1" max="5" class="svelte-15o2ys1"/> <span class="load-scale svelte-15o2ys1">/ 5</span></div> <div class="load-item svelte-15o2ys1"><label for="pinch-grip" class="svelte-15o2ys1">Pinch</label> <input type="number" id="pinch-grip" min="1" max="5" class="svelte-15o2ys1"/> <span class="load-scale svelte-15o2ys1">/ 5</span></div> <div class="load-item svelte-15o2ys1"><label for="sloper-grip" class="svelte-15o2ys1">Sloper</label> <input type="number" id="sloper-grip" min="1" max="5" class="svelte-15o2ys1"/> <span class="load-scale svelte-15o2ys1">/ 5</span></div> <div class="load-item svelte-15o2ys1"><label for="jug-grip" class="svelte-15o2ys1">Jug</label> <input type="number" id="jug-grip" min="1" max="5" class="svelte-15o2ys1"/> <span class="load-scale svelte-15o2ys1">/ 5</span></div></div></div> <div class="training-section svelte-15o2ys1"><h4 class="svelte-15o2ys1">Training Details</h4> <div class="training-grid svelte-15o2ys1"><div class="training-item svelte-15o2ys1"><label for="training-type" class="svelte-15o2ys1">Training Type</label> <!></div> <div class="training-item svelte-15o2ys1"><label for="difficulty" class="svelte-15o2ys1">Difficulty</label> <select id="difficulty" class="svelte-15o2ys1"></select></div> <div class="training-item svelte-15o2ys1"><label for="category" class="svelte-15o2ys1">Category</label> <!></div> <div class="training-item svelte-15o2ys1"><label for="energy-system" class="svelte-15o2ys1">Energy System</label> <!></div> <div class="training-item svelte-15o2ys1"><label for="technique-focus" class="svelte-15o2ys1">Technique Focus</label> <!></div></div></div> <div class="climbs-section svelte-15o2ys1"><h4 class="svelte-15o2ys1">Climbs</h4> <div class="table-container svelte-15o2ys1"><table class="climbs-table svelte-15o2ys1"><thead><tr><!><th class="svelte-15o2ys1">Name</th><th class="svelte-15o2ys1">Grade</th><th class="svelte-15o2ys1">Attempt</th><th class="svelte-15o2ys1">#</th><th class="svelte-15o2ys1">Notes</th><th class="svelte-15o2ys1"></th></tr></thead><tbody></tbody></table></div> <button type="button" class="add-btn svelte-15o2ys1">+ Add Climb</button></div> <div class="submit-section svelte-15o2ys1"><!> <button type="button" class="submit-btn svelte-15o2ys1"><!></button></div></div>');function Ls(me,V){vt(V,!0);const c=Ha(),G=["Boulder","Sport","Trad"],C=["Onsight","Flash","Redpoint","Dogged","DNF"],f=["None","Projecting","Onsighting","Campusing","Repeaters"],d=["None","Easy","Medium","Hard","Max","Limit+"],P=["None","Technique","Strength","Strength-endurance","Warm-up","Power"],H=["None","Aerobic capacity","Aerobic lactic power","Anaerobic alactic capacity","Anaerobic alactic power","Anaerobic power","Anaerobic lactic capacity"],le=["None","Double-clutch","Standing on volumes","Trusting feet"],S=["V0-","4-","V0","4","V0+","4+","V1","5","V2","5+","V3","6A","V4","6B","V5","6C","V6","7A","V7","7A+","V8","7B","7B+","V9","7C","V10","7C+","V11","8A","V12","8A+","V13","8B","V14","8B+","V15","8C","V16","8C+","V17","9A"].map(r=>r.toLowerCase());let z=_(null),F=_(Ge(new Date().toISOString().split("T")[0])),h=_(""),m=_(""),g=_(""),T=_(""),ce=_(Ge(["None"])),ne=_("None"),q=_(Ge(["None"])),$=_(Ge(["None"])),K=_(Ge(["None"])),ee=_(3),W=_(3),y=_(3),se=_(3),D=_(3),x=_(3),w=_(3),N=_(3),A=_(Ge([{isSport:!1,name:"",grade:"",attemptType:"Flash",attemptsNum:1,notes:""}])),X=Dt(()=>e(h)?Ja(e(h)):[]),ie=_(!1);Oa(()=>{e(h)&&(a(m,""),a(ie,!1))});function re(){e(m)==="Other"&&(a(ie,!0),a(m,""))}function Z(){a(ie,!1),a(m,"")}function Ce(){a(A,[...e(A),{isSport:!1,name:"",grade:"",attemptType:"Flash",attemptsNum:1,notes:""}],!0)}function De(r){a(A,e(A).filter((p,R)=>R!==r),!0)}function Me(r,p){e(A)[r].attemptType=p,(p==="Flash"||p==="Onsight")&&(e(A)[r].attemptsNum=1)}function Ie(r){a(z,r,!0)}function fe(){a(z,null)}let Te=Dt(()=>e(T)==="Trad");function Fe(r){return e(T)==="Sport"?!0:e(T)==="Boulder"?!1:r.isSport}function ge(r){return r.trim()?S.includes(r.trim().toLowerCase()):!0}let v=_("idle"),O=_("");function U(){return e(h)?e(m)?e(T)?e(A).filter(p=>p.grade.trim()&&!ge(p.grade)).length>0?"Please fix invalid grades":null:"Please select a climbing type":"Please select a crag":"Please select an area"}async function ae(){const r=U();if(r){a(v,"error"),a(O,r,!0);return}a(v,"saving");try{const p=e(A).map(ue=>({...ue,isSport:Fe(ue)})),R={date:e(F),area:e(h),crag:e(m),sector:e(g)||void 0,climbingType:e(T),trainingTypes:e(ce),difficulty:e(ne),categories:e(q),energySystems:e($),techniqueFocuses:e(K),fingerLoad:e(ee),shoulderLoad:e(W),forearmLoad:e(y),openGrip:e(se),crimpGrip:e(D),pinchGrip:e(x),sloperGrip:e(w),jugGrip:e(N),climbs:p},Se=Ma(R);if(na()){const ue=await Ka(R);ue.ok?(ma(Se.id,ue.id),ga(ue.id),a(v,"success"),a(O,"Session saved and synced!")):(ba(Se.id),a(v,"success"),a(O,"Saved locally. Sync failed: "+(ue.error||"Unknown error")))}else a(v,"success"),a(O,"Saved locally. Will sync when online.");window.dispatchEvent(new CustomEvent("session-saved")),setTimeout(()=>{oe()},2e3)}catch(p){a(v,"error"),a(O,"Failed to save session"),console.error("Save error:",p)}}function oe(){a(F,new Date().toISOString().split("T")[0],!0),a(h,""),a(m,""),a(g,""),a(T,""),a(ce,["None"],!0),a(ne,"None"),a(q,["None"],!0),a($,["None"],!0),a(K,["None"],!0),a(ee,3),a(W,3),a(y,3),a(se,3),a(D,3),a(x,3),a(w,3),a(N,3),a(A,[{isSport:!1,name:"",grade:"",attemptType:"Flash",attemptsNum:1,notes:""}],!0),a(v,"idle"),a(O,"")}var be=Vs(),ve=s(l(be),2),we=l(ve),Ye=s(l(we),2);I(Ye),t(we);var Ze=s(we,2),qe=s(l(Ze),2),u=l(qe);u.value=u.__value="";var b=s(u);pe(b,17,()=>c,_e,(r,p)=>{var R=ks(),Se=l(R,!0);t(R);var ue={};L(()=>{Q(Se,e(p)),ue!==(ue=e(p))&&(R.value=(R.__value=e(p))??"")}),i(r,R)}),t(qe),t(Ze),t(ve);var j=s(ve,2),J=l(j),ke=s(l(J),2);{var Ee=r=>{var p=Ss(),R=l(p);I(R);var Se=s(R,2);Se.__click=Z,t(p),M(R,()=>e(m),ue=>a(m,ue)),i(r,p)},We=r=>{var p=qs();p.__change=re;var R=l(p),Se=l(R,!0);t(R),R.value=R.__value="";var ue=s(R);pe(ue,17,()=>e(X),_e,(Qe,ze)=>{var et=xs(),Ot=l(et,!0);t(et);var jt={};L(()=>{Q(Ot,e(ze)),jt!==(jt=e(ze))&&(et.value=(et.__value=e(ze))??"")}),i(Qe,et)});var it=s(ue);{var ut=Qe=>{var ze=ws();ze.value=ze.__value="Other",i(Qe,ze)};E(it,Qe=>{e(h)&&Qe(ut)})}t(p),L(()=>{p.disabled=!e(h),Q(Se,e(h)?"Select crag...":"Select area first...")}),Xe(p,()=>e(m),Qe=>a(m,Qe)),i(r,p)};E(ke,r=>{e(ie)?r(Ee):r(We,!1)})}t(J);var yt=s(J,2),Tt=s(l(yt),2);I(Tt),t(yt),t(j);var pt=s(j,2),ft=s(l(pt),2),kt=l(ft);kt.value=kt.__value="";var Gt=s(kt);pe(Gt,17,()=>G,_e,(r,p)=>{var R=Cs(),Se=l(R,!0);t(R);var ue={};L(()=>{Q(Se,e(p)),ue!==(ue=e(p))&&(R.value=(R.__value=e(p))??"")}),i(r,R)}),t(ft),t(pt);var Ue=s(pt,2),Ve=s(l(Ue),2),St=l(Ve),_t=s(l(St),2);I(_t),Ae(2),t(St);var mt=s(St,2),xt=s(l(mt),2);I(xt),Ae(2),t(mt);var wt=s(mt,2),He=s(l(wt),2);I(He),Ae(2),t(wt),t(Ve);var Nt=s(Ve,4),gt=l(Nt),At=s(l(gt),2);I(At),Ae(2),t(gt);var qt=s(gt,2),Et=s(l(qt),2);I(Et),Ae(2),t(qt);var dt=s(qt,2),Vt=s(l(dt),2);I(Vt),Ae(2),t(dt);var bt=s(dt,2),Ft=s(l(bt),2);I(Ft),Ae(2),t(bt);var Ne=s(bt,2),Ke=s(l(Ne),2);I(Ke),Ae(2),t(Ne),t(Nt),t(Ue);var Pe=s(Ue,2),Rt=s(l(Pe),2),ht=l(Rt),ha=s(l(ht),2);Ct(ha,{get options(){return f},get selected(){return e(ce)},placeholder:"Select types...",onChange:r=>a(ce,r,!0)}),t(ht);var Bt=s(ht,2),Xt=s(l(Bt),2);pe(Xt,21,()=>d,_e,(r,p)=>{var R=Ts(),Se=l(R,!0);t(R);var ue={};L(()=>{Q(Se,e(p)),ue!==(ue=e(p))&&(R.value=(R.__value=e(p))??"")}),i(r,R)}),t(Xt),t(Bt);var Lt=s(Bt,2),Yt=s(l(Lt),2);Ct(Yt,{get options(){return P},get selected(){return e(q)},placeholder:"Select categories...",onChange:r=>a(q,r,!0)}),t(Lt);var Mt=s(Lt,2),Zt=s(l(Mt),2);Ct(Zt,{get options(){return H},get selected(){return e($)},placeholder:"Select systems...",onChange:r=>a($,r,!0)}),t(Mt);var ea=s(Mt,2),ya=s(l(ea),2);Ct(ya,{get options(){return le},get selected(){return e(K)},placeholder:"Select focus...",onChange:r=>a(K,r,!0)}),t(ea),t(Rt),t(Pe);var ta=s(Pe,2),Pt=s(l(ta),2),va=l(Pt),$t=l(va),aa=l($t),ka=l(aa);{var Wt=r=>{var p=Ns();i(r,p)};E(ka,r=>{e(Te)&&r(Wt)})}Ae(6),t(aa),t($t);var ca=s($t);pe(ca,21,()=>e(A),_e,(r,p,R)=>{var Se=As(),ue=l(Se);{var it=xe=>{var ot=Fs(),zt=l(ot);I(zt),t(ot),Ea(zt,()=>e(p).isSport,xa=>e(p).isSport=xa),i(xe,ot)};E(ue,xe=>{e(Te)&&xe(it)})}var ut=s(ue),Qe=l(ut);I(Qe),t(ut);var ze=s(ut),et=l(ze);I(et);let Ot;var jt=s(et,2);{var Ut=xe=>{var ot=Os();i(xe,ot)};E(jt,xe=>{ge(e(p).grade)||xe(Ut)})}t(ze);var Ht=s(ze),rt=l(Ht);rt.__change=xe=>Me(R,xe.target.value),pe(rt,21,()=>C,_e,(xe,ot)=>{var zt=js(),xa=l(zt,!0);t(zt);var Na={};L(()=>{Q(xa,e(ot)),Na!==(Na=e(ot))&&(zt.value=(zt.__value=e(ot))??"")}),i(xe,zt)}),t(rt);var sa;Ca(rt),t(Ht);var la=s(Ht),ia=l(la);I(ia),t(la);var de=s(la);let $e;var tt=l(de);Fa(tt),t(de);var Kt=s(de),ua=l(Kt);{var La=xe=>{var ot=zs();ot.__click=()=>De(R),i(xe,ot)};E(ua,xe=>{e(A).length>1&&xe(La)})}t(Kt),t(Se),L(xe=>{Ot=Be(et,1,"grade-input svelte-15o2ys1",null,Ot,xe),sa!==(sa=e(p).attemptType)&&(rt.value=(rt.__value=e(p).attemptType)??"",Ta(rt,e(p).attemptType)),ia.disabled=e(p).attemptType==="Flash",$e=Be(de,1,"notes-cell svelte-15o2ys1",null,$e,{expanded:e(z)===R})},[()=>({invalid:!ge(e(p).grade)})]),M(Qe,()=>e(p).name,xe=>e(p).name=xe),M(et,()=>e(p).grade,xe=>e(p).grade=xe),M(ia,()=>e(p).attemptsNum,xe=>e(p).attemptsNum=xe),Y("focus",tt,()=>Ie(R)),Y("blur",tt,fe),M(tt,()=>e(p).notes,xe=>e(p).notes=xe),i(r,Se)}),t(ca),t(va),t(Pt);var Sa=s(Pt,2);Sa.__click=Ce,t(ta);var da=s(ta,2),o=l(da);{var k=r=>{var p=Es();let R;var Se=l(p,!0);t(p),L(()=>{R=Be(p,1,"save-message svelte-15o2ys1",null,R,{success:e(v)==="success",error:e(v)==="error"}),Q(Se,e(O))}),i(r,p)};E(o,r=>{e(O)&&r(k)})}var te=s(o,2);te.__click=ae;var Oe=l(te);{var he=r=>{var p=je("Saving...");i(r,p)},Je=r=>{var p=nt(),R=st(p);{var Se=it=>{var ut=je("‚úì Saved!");i(it,ut)},ue=it=>{var ut=je("Save Session");i(it,ut)};E(R,it=>{e(v)==="success"?it(Se):it(ue,!1)},!0)}i(r,p)};E(Oe,r=>{e(v)==="saving"?r(he):r(Je,!1)})}t(te),t(da),t(be),L(()=>te.disabled=e(v)==="saving"),M(Ye,()=>e(F),r=>a(F,r)),Xe(qe,()=>e(h),r=>a(h,r)),M(Tt,()=>e(g),r=>a(g,r)),Xe(ft,()=>e(T),r=>a(T,r)),M(_t,()=>e(ee),r=>a(ee,r)),M(xt,()=>e(W),r=>a(W,r)),M(He,()=>e(y),r=>a(y,r)),M(At,()=>e(se),r=>a(se,r)),M(Et,()=>e(D),r=>a(D,r)),M(Vt,()=>e(x),r=>a(x,r)),M(Ft,()=>e(w),r=>a(w,r)),M(Ke,()=>e(N),r=>a(N,r)),Xe(Xt,()=>e(ne),r=>a(ne,r)),i(me,be),ct()}Jt(["click","change"]);var Ds=n('<div><div class="col set-num svelte-ow8x7m"> </div> <div class="col prev svelte-ow8x7m"><!></div> <div class="col weight svelte-ow8x7m"><input type="number" class="svelte-ow8x7m"/></div> <div class="col reps svelte-ow8x7m"><input type="number" class="svelte-ow8x7m"/></div> <div class="col check svelte-ow8x7m"><button><!></button></div></div>');function Is(me,V){vt(V,!1);let c=lt(V,"setNumber",8),G=lt(V,"prevSet",8,null),C=lt(V,"set",12);const f=oa();function d(){C(C().completed=!C().completed,!0),f("change",C()),C().completed&&f("complete")}function P(y){f("focus",{field:y,value:C()[y],set:C()})}Qt();var H=Ds();let le;var B=l(H),S=l(B,!0);t(B);var z=s(B,2),F=l(z);{var h=y=>{var se=je();L(()=>Q(se,`${Le(G()),ye(()=>G().weight)??""}kg x ${Le(G()),ye(()=>G().reps)??""}`)),i(y,se)},m=y=>{var se=je("-");i(y,se)};E(F,y=>{G()?y(h):y(m,!1)})}t(z);var g=s(z,2),T=l(g);I(T),t(g);var ce=s(g,2),ne=l(ce);I(ne),t(ce);var q=s(ce,2),$=l(q);let K;var ee=l($);{var W=y=>{var se=je("‚úì");i(y,se)};E(ee,y=>{Le(C()),ye(()=>C().completed)&&y(W)})}t($),t(q),t(H),L((y,se)=>{le=Be(H,1,"set-row svelte-ow8x7m",null,le,{completed:C().completed}),Q(S,c()),at(T,"placeholder",y),at(ne,"placeholder",se),K=Be($,1,"check-btn svelte-ow8x7m",null,K,{checked:C().completed})},[()=>(Le(G()),ye(()=>G()?G().weight.toString():"-")),()=>(Le(G()),ye(()=>G()?G().reps.toString():"-"))]),M(T,()=>C().weight,y=>C(C().weight=y,!0)),Y("focus",T,()=>P("weight")),M(ne,()=>C().reps,y=>C(C().reps=y,!0)),Y("focus",ne,()=>P("reps")),Y("click",$,d),i(me,H),ct()}var Gs=n('<div class="exercise-card svelte-1ni79z8"><div class="header svelte-1ni79z8"><div class="title-group svelte-1ni79z8"><button class="icon-btn info-btn svelte-1ni79z8" aria-label="Exercise Info"><div class="info-icon svelte-1ni79z8">?</div></button> <h4 class="svelte-1ni79z8"> </h4></div> <button class="icon-btn delete-btn svelte-1ni79z8" aria-label="Delete Exercise">üóëÔ∏è</button></div> <div class="table-header svelte-1ni79z8"><div class="col">Set</div> <div class="col">Previous</div> <div class="col">kg</div> <div class="col">Reps</div> <div class="col">‚úì</div></div> <div class="sets"></div> <button class="add-set-btn svelte-1ni79z8">+ Add Set</button></div>');function Rs(me,V){vt(V,!1);let c=lt(V,"exercise",12);const G=oa();function C(){const h=c().sets[c().sets.length-1],m={weight:h?h.weight:0,reps:h?h.reps:0,isWarmup:!1,isFailure:!1,isDropSet:!1,completed:!1};c(c().sets=[...c().sets,m],!0)}Qt();var f=Gs(),d=l(f),P=l(d),H=l(P),le=s(H,2),B=l(le,!0);t(le),t(P);var S=s(P,2);t(d);var z=s(d,4);pe(z,5,()=>(Le(c()),ye(()=>c().sets)),_e,(h,m,g)=>{Is(h,{setNumber:g+1,get set(){return(Le(c()),ye(()=>c().sets))[g]},set set(T){(Le(c()),ye(()=>c().sets))[g]=T,ja(()=>c())},$$events:{complete(T){It.call(this,V,T)},focus(T){It.call(this,V,T)},change(T){It.call(this,V,T)}},$$legacy:!0})}),t(z);var F=s(z,2);t(f),L(()=>Q(B,(Le(c()),ye(()=>c().name)))),Y("click",H,()=>G("info",c())),Y("click",S,()=>G("delete",c())),Y("click",F,C),i(me,f),ct()}var Bs=n('<div class="keypad svelte-1fay4f8"><div class="header svelte-1fay4f8"><span class="label svelte-1fay4f8"> </span> <div class="display svelte-1fay4f8" role="textbox" aria-readonly="true"> </div></div> <div class="quick-adds svelte-1fay4f8"><button class="svelte-1fay4f8">+2.5</button> <button class="svelte-1fay4f8">+5</button> <button class="svelte-1fay4f8">+10</button></div> <div class="grid svelte-1fay4f8"><button class="svelte-1fay4f8">1</button> <button class="svelte-1fay4f8">2</button> <button class="svelte-1fay4f8">3</button> <button class="svelte-1fay4f8">4</button> <button class="svelte-1fay4f8">5</button> <button class="svelte-1fay4f8">6</button> <button class="svelte-1fay4f8">7</button> <button class="svelte-1fay4f8">8</button> <button class="svelte-1fay4f8">9</button> <button class="action svelte-1fay4f8">C</button> <button class="svelte-1fay4f8">0</button> <button class="action svelte-1fay4f8">‚å´</button></div></div>');function Ms(me,V){vt(V,!1);let c=lt(V,"value",8,null),G=lt(V,"label",8,"Value");const C=oa();function f(X){const ie=c()?.toString()||"";if(ie.length>=5)return;const re=parseFloat(ie+X.toString());C("change",re)}function d(){C("change",0)}function P(){const X=c()?.toString()||"";if(X.length<=1){C("change",0);return}const ie=parseFloat(X.slice(0,-1));C("change",ie)}function H(X){C("change",(c()||0)+X)}Qt();var le=Bs(),B=l(le),S=l(B),z=l(S,!0);t(S);var F=s(S,2),h=l(F,!0);t(F),t(B);var m=s(B,2),g=l(m),T=s(g,2),ce=s(T,2);t(m);var ne=s(m,2),q=l(ne),$=s(q,2),K=s($,2),ee=s(K,2),W=s(ee,2),y=s(W,2),se=s(y,2),D=s(se,2),x=s(D,2),w=s(x,2),N=s(w,2),A=s(N,2);t(ne),t(le),L(()=>{Q(z,G()),at(F,"aria-label",G()),Q(h,c()||0)}),Y("click",g,()=>H(2.5)),Y("click",T,()=>H(5)),Y("click",ce,()=>H(10)),Y("click",q,()=>f(1)),Y("click",$,()=>f(2)),Y("click",K,()=>f(3)),Y("click",ee,()=>f(4)),Y("click",W,()=>f(5)),Y("click",y,()=>f(6)),Y("click",se,()=>f(7)),Y("click",D,()=>f(8)),Y("click",x,()=>f(9)),Y("click",w,d),Y("click",N,()=>f(0)),Y("click",A,P),i(me,le),ct()}var Ps=n('<div class="rest-timer svelte-18i4gcv"><div class="timer-display svelte-18i4gcv"><span class="label svelte-18i4gcv">Rest</span> <span class="time svelte-18i4gcv"> </span></div> <div class="controls svelte-18i4gcv"><button class="svelte-18i4gcv">-30</button> <button class="svelte-18i4gcv">+30</button> <button class="skip svelte-18i4gcv">Skip</button></div></div>');function $s(me,V){vt(V,!1);const c=Re(),G=Re();let C=lt(V,"duration",8,90),f=lt(V,"onComplete",8,()=>{}),d=Re(C()),P,H=lt(V,"visible",12,!0);function le(){clearInterval(P),a(d,C()),P=setInterval(()=>{Ia(d,-1),e(d)<=0&&(clearInterval(P),f()())},1e3)}function B(g){a(d,e(d)+g)}function S(g){e(d)>g&&a(d,e(d)-g)}function z(){H(!1),clearInterval(P),f()()}za(()=>{le()}),Aa(()=>{clearInterval(P)}),pa(()=>e(d),()=>{a(c,Math.floor(e(d)/60))}),pa(()=>e(d),()=>{a(G,e(d)%60)}),qa(),Qt();var F=nt(),h=st(F);{var m=g=>{var T=Ps(),ce=l(T),ne=s(l(ce),2),q=l(ne);t(ne),t(ce);var $=s(ce,2),K=l($),ee=s(K,2),W=s(ee,2);t($),t(T),L(y=>Q(q,`${e(c)??""}:${y??""}`),[()=>(e(G),ye(()=>e(G).toString().padStart(2,"0")))]),Y("click",K,()=>S(30)),Y("click",ee,()=>B(30)),Y("click",W,z),ra(3,T,()=>fa,()=>({y:50,duration:300})),i(g,T)};E(h,g=>{H()&&g(m)})}i(me,F),ct()}var Ws=n("<img/>"),Us=n('<div class="animation-frame svelte-zbmy0k"></div>'),Hs=n('<div class="visual-placeholder svelte-zbmy0k"><span>No animation available</span></div>'),Ks=n("<li> </li>"),Js=n('<div class="modal-overlay svelte-zbmy0k" role="button" tabindex="0" aria-label="Close modal"><div class="modal-content svelte-zbmy0k" role="dialog" aria-modal="true" tabindex="-1"><div class="header svelte-zbmy0k"><h3 class="svelte-zbmy0k"> </h3> <span class="category svelte-zbmy0k"> </span> <button class="close-btn svelte-zbmy0k" aria-label="Close">√ó</button></div> <div class="visual-container svelte-zbmy0k"><!> <div class="muscles svelte-zbmy0k"> </div></div> <div class="instructions svelte-zbmy0k"><h4>Instructions</h4> <ol class="svelte-zbmy0k"></ol></div></div></div>');function Qs(me,V){vt(V,!1);let c=lt(V,"exercise",8),G=lt(V,"visible",8,!1);const C=oa();let f=Re(0),d;function P(){c().images&&c().images.length>0&&(a(f,0),d=setInterval(()=>{a(f,(e(f)+1)%c().images.length)},800))}function H(){d&&clearInterval(d)}Aa(()=>{H()});function le(){C("close")}pa(()=>(Le(G()),Le(c())),()=>{G()&&c().images?.length?P():H()}),qa(),Qt();var B=nt(),S=st(B);{var z=F=>{var h=Js(),m=l(h),g=l(m),T=l(g),ce=l(T,!0);t(T);var ne=s(T,2),q=l(ne,!0);t(ne);var $=s(ne,2);t(g);var K=s(g,2),ee=l(K);{var W=N=>{var A=Us();pe(A,5,()=>(Le(c()),ye(()=>c().images)),_e,(X,ie,re)=>{var Z=Ws();let Ce;L(()=>{at(Z,"src",`${as??""}${e(ie)??""}`),at(Z,"alt",`${Le(c()),ye(()=>c().name)??""} frame ${re+1}`),Ce=Be(Z,1,"svelte-zbmy0k",null,Ce,{active:re===e(f)})}),i(X,Z)}),t(A),i(N,A)},y=N=>{var A=Hs();i(N,A)};E(ee,N=>{Le(c()),ye(()=>c().images&&c().images.length>0)?N(W):N(y,!1)})}var se=s(ee,2),D=l(se);t(se),t(K);var x=s(K,2),w=s(l(x),2);pe(w,5,()=>(Le(c()),ye(()=>c().instructions)),_e,(N,A)=>{var X=Ks(),ie=l(X,!0);t(X),L(()=>Q(ie,e(A))),i(N,X)}),t(w),t(x),t(m),t(h),L(N=>{Q(ce,(Le(c()),ye(()=>c().name))),Q(q,(Le(c()),ye(()=>c().category))),Q(D,`Targets: ${N??""}`)},[()=>(Le(c()),ye(()=>c().targetMuscles.join(", ")))]),Y("click",$,le),ra(3,m,()=>fa,()=>({y:50,duration:300})),Y("click",m,_a(function(N){It.call(this,V,N)})),Y("keydown",m,_a(function(N){It.call(this,V,N)})),Y("click",h,le),Y("keydown",h,N=>N.key==="Escape"&&le()),i(F,h)};E(S,F=>{G()&&F(z)})}i(me,B),ct()}var Xs=n("<span>Saved! ‚úì</span>"),Ys=n("<button><!></button>"),Zs=n("<option> </option>"),el=n('<button class="exercise-item svelte-1w0zsmt"><span class="name svelte-1w0zsmt"> </span> <span class="muscles svelte-1w0zsmt"> </span></button>'),tl=n('<div class="modal-overlay svelte-1w0zsmt" role="button" tabindex="0" aria-label="Close modal"><div class="picker-modal svelte-1w0zsmt" role="dialog" aria-modal="true" tabindex="-1"><div class="picker-header svelte-1w0zsmt"><h3>Add Exercise</h3> <div class="search-row svelte-1w0zsmt"><input type="text" placeholder="Search exercises..." class="svelte-1w0zsmt"/> <select class="svelte-1w0zsmt"><option>All Categories</option><!></select></div></div> <div class="picker-list svelte-1w0zsmt"></div></div></div>'),al=n('<div class="keypad-overlay svelte-1w0zsmt"><div class="keypad-header svelte-1w0zsmt"><span> </span> <button class="svelte-1w0zsmt">Done</button></div> <!></div>'),sl=n('<div class="gym-session-form svelte-1w0zsmt"><div class="session-meta svelte-1w0zsmt"><input type="text" class="session-name svelte-1w0zsmt" placeholder="Workout Name (e.g. Pull Day)"/> <div class="meta-row svelte-1w0zsmt"><label class="svelte-1w0zsmt">Start Time <input type="datetime-local" disabled class="svelte-1w0zsmt"/></label> <label class="svelte-1w0zsmt">Bodyweight (kg) <input type="number" placeholder="Optional" class="svelte-1w0zsmt"/></label></div></div> <div class="exercises-list"></div> <button class="add-exercise-btn svelte-1w0zsmt">+ Add Exercise</button> <!> <!> <!> <!> <!> <!></div>');function ll(me,V){vt(V,!1);const c=Re(),G=oa();let C=Re(""),f=Re(),d=Re([]),P=new Date().toISOString(),H=Re(!1),le=Re(""),B=Re(""),S=Re(null),z=Re(!1),F=Re(null),h=Re(null),m=Re(!1);const g=Array.from(new Set(wa.map(v=>v.category))).sort();function T(v){const O={id:crypto.randomUUID(),name:v.name,sets:[{weight:0,reps:0,isWarmup:!1,isFailure:!1,isDropSet:!1,completed:!1}]};a(d,[...e(d),O]),a(H,!1),a(le,""),a(B,"")}function ce(v,O,U){a(S,{exerciseIndex:O,setIndex:U,field:v.detail.field})}function ne(v){if(!e(S))return;const{exerciseIndex:O,setIndex:U,field:ae}=e(S);Ra(d,e(d)[O].sets[U][ae]=v.detail),a(d,[...e(d)])}function q(){a(z,!0)}function $(){e(d).length!==0&&(Pa({date:P.split("T")[0],name:e(C)||"Gym Workout",bodyweight:e(f),exercises:e(d)}),a(m,!0),setTimeout(()=>{a(m,!1),G("save")},1500))}function K(){a(S,null)}pa(()=>(e(le),e(B)),()=>{a(c,wa.filter(v=>{const O=v.name.toLowerCase().includes(e(le).toLowerCase())||v.targetMuscles.some(ae=>ae.toLowerCase().includes(e(le).toLowerCase())),U=e(B)?v.category===e(B):!0;return O&&U}))}),qa(),Qt();var ee=sl(),W=l(ee),y=l(W);I(y);var se=s(y,2),D=l(se),x=s(l(D));I(x),t(D);var w=s(D,2),N=s(l(w));I(N),t(w),t(se),t(W);var A=s(W,2);pe(A,5,()=>e(d),_e,(v,O,U)=>{Rs(v,{get exercise(){return e(O)},$$events:{focus:ae=>ce(ae,U,e(d)[U].sets.indexOf(ae.detail.set)),complete:q,delete:()=>{a(h,U)},info:()=>{const ae=wa.find(oe=>oe.name===e(O).name);ae&&a(F,ae)}}})}),t(A);var X=s(A,2),ie=s(X,2);{var re=v=>{var O=Ys();let U;var ae=l(O);{var oe=ve=>{var we=Xs();i(ve,we)},be=ve=>{var we=je("Finish Workout");i(ve,we)};E(ae,ve=>{e(m)?ve(oe):ve(be,!1)})}t(O),L(()=>{U=Be(O,1,"save-btn svelte-1w0zsmt",null,U,{success:e(m)}),O.disabled=e(m)}),Y("click",O,$),i(v,O)};E(ie,v=>{e(d),ye(()=>e(d).length>0)&&v(re)})}var Z=s(ie,2);{var Ce=v=>{var O=tl(),U=l(O),ae=l(U),oe=s(l(ae),2),be=l(oe);I(be);var ve=s(be,2);L(()=>{e(B),ja(()=>{})});var we=l(ve);we.value=we.__value="";var Ye=s(we);pe(Ye,1,()=>g,_e,(qe,u)=>{var b=Zs(),j=l(b,!0);t(b);var J={};L(()=>{Q(j,e(u)),J!==(J=e(u))&&(b.value=(b.__value=e(u))??"")}),i(qe,b)}),t(ve),t(oe),t(ae);var Ze=s(ae,2);pe(Ze,5,()=>e(c),_e,(qe,u)=>{var b=el(),j=l(b),J=l(j,!0);t(j);var ke=s(j,2),Ee=l(ke,!0);t(ke),t(b),L(We=>{Q(J,(e(u),ye(()=>e(u).name))),Q(Ee,We)},[()=>(e(u),ye(()=>e(u).targetMuscles.join(", ")))]),Y("click",b,()=>T(e(u))),i(qe,b)}),t(Ze),t(U),t(O),M(be,()=>e(le),qe=>a(le,qe)),Xe(ve,()=>e(B),qe=>a(B,qe)),Y("click",U,_a(function(qe){It.call(this,V,qe)})),Y("keydown",U,_a(function(qe){It.call(this,V,qe)})),ra(3,U,()=>fa,()=>({y:100,duration:300})),Y("click",O,()=>a(H,!1)),Y("keydown",O,qe=>qe.key==="Escape"&&a(H,!1)),ra(3,O,()=>Qa),i(v,O)};E(Z,v=>{e(H)&&v(Ce)})}var De=s(Z,2);{var Me=v=>{Qs(v,{get exercise(){return e(F)},visible:!0,$$events:{close:()=>a(F,null)}})};E(De,v=>{e(F)&&v(Me)})}var Ie=s(De,2);{var fe=v=>{var O=al(),U=l(O),ae=l(U),oe=l(ae);t(ae);var be=s(ae,2);t(U);var ve=s(U,2);{let we=Ga(()=>(e(S),ye(()=>e(S).field==="weight"?"Weight (kg)":"Reps")));Ms(ve,{get value(){return e(d),e(S),ye(()=>e(d)[e(S).exerciseIndex].sets[e(S).setIndex][e(S).field])},get label(){return e(we)},$$events:{change:ne}})}t(O),L(()=>Q(oe,`Editing ${e(d),e(S),ye(()=>e(d)[e(S).exerciseIndex].name)??""} - Set ${e(S),ye(()=>e(S).setIndex+1)??""}`)),Y("click",be,K),ra(3,O,()=>fa,()=>({y:200,duration:300})),i(v,O)};E(Ie,v=>{e(S)&&v(fe)})}var Te=s(Ie,2);$s(Te,{get visible(){return e(z)},set visible(v){a(z,v)},$$legacy:!0});var Fe=s(Te,2);{var ge=v=>{Xa(v,{isOpen:!0,title:"Delete Exercise",get message(){return`Are you sure you want to delete ${e(d),e(h),ye(()=>e(d)[e(h)].name)??""}?`},requireInput:!1,onConfirm:()=>{e(h)!==null&&(a(d,e(d).filter((O,U)=>U!==e(h))),a(h,null))},onCancel:()=>a(h,null)})};E(Fe,v=>{e(h)!==null&&v(ge)})}t(ee),L(v=>Va(x,v),[()=>ye(()=>P.slice(0,16))]),M(y,()=>e(C),v=>a(C,v)),M(N,()=>e(f),v=>a(f,v)),Y("click",X,()=>a(H,!0)),i(me,ee),ct()}var il=n("<option> </option>"),rl=n("<option> </option>"),ol=n('<button class="remove-set-btn svelte-1m63nqt">‚úï</button>'),nl=n('<div class="set-row svelte-1m63nqt"><div class="input-wrap svelte-1m63nqt"><label class="svelte-1m63nqt">Weight</label> <input type="number" placeholder="0" class="svelte-1m63nqt"/></div> <div class="input-wrap svelte-1m63nqt"><label class="svelte-1m63nqt">Reps/Secs</label> <input type="number" placeholder="1" class="svelte-1m63nqt"/></div> <!></div>'),vl=n('<div class="exercise-card svelte-1m63nqt"><div class="card-header svelte-1m63nqt"><div class="header-inputs svelte-1m63nqt"><select class="svelte-1m63nqt"></select> <select class="svelte-1m63nqt"></select></div> <button class="remove-card-btn svelte-1m63nqt" title="Remove Exercise">‚úï</button></div> <div class="sets-list svelte-1m63nqt"><!> <button class="add-set-btn svelte-1m63nqt">+ Add Set</button></div> <div class="card-footer svelte-1m63nqt"><div class="meta-input svelte-1m63nqt"><label class="svelte-1m63nqt">Total Sets</label> <input type="number" readonly="" disabled class="svelte-1m63nqt"/></div> <div class="notes-input svelte-1m63nqt"><label class="svelte-1m63nqt">Notes</label> <input type="text" placeholder="Notes..." class="svelte-1m63nqt"/></div></div></div>'),cl=n("<div> </div>"),dl=n('<div class="form-content svelte-1m63nqt"><div class="header-row svelte-1m63nqt"><h3 class="svelte-1m63nqt">ü§è Fingerboarding</h3> <button class="add-row-btn svelte-1m63nqt">+ Add Exercise</button></div> <div class="form-group date-group svelte-1m63nqt"><label for="date">Date</label> <input type="date" id="date" class="svelte-1m63nqt"/></div> <div class="cards-container svelte-1m63nqt"></div> <div class="submit-section"><!> <button type="button" class="submit-btn svelte-1m63nqt"><!></button></div></div>');function ul(me,V){vt(V,!0);const c=["Max hangs","Recruitment pulls","Max pick-ups"],G=["Full-crimp","Half-crimp","Three finger drag","Pinch","Open hand","Sloper"];let C=_(Ge(new Date().toISOString().split("T")[0])),f=_(Ge([]));function d(){a(f,[...e(f),{id:crypto.randomUUID(),name:c[0],gripType:G[1],sets:1,details:[{weight:0,reps:5}],notes:""}],!0)}Oa(()=>{e(f).length===0&&d()});function P(D){a(f,e(f).filter((x,w)=>w!==D),!0)}function H(D){const x=e(f)[D],w=x.details[x.details.length-1];x.details=[...x.details,{...w}],x.sets=x.details.length}function le(D,x){const w=e(f)[D];w.details.length>1&&(w.details=w.details.filter((N,A)=>A!==x),w.sets=w.details.length)}let B=_("idle"),S=_("");async function z(){a(B,"saving");try{const D={date:e(C),location:"N/A",exercises:JSON.parse(JSON.stringify(e(f)))},x=$a(D);if(na()){const w=await Ya(D);w.ok?(ma(x.id,w.id),ga(w.id),a(B,"success"),a(S,"Session saved and synced!")):(ba(x.id),a(B,"success"),a(S,"Saved locally. Sync failed: "+(w.error||"Unknown error")))}else a(B,"success"),a(S,"Saved locally. Will sync when online.");window.dispatchEvent(new CustomEvent("session-saved")),setTimeout(()=>{F()},2e3)}catch(D){a(B,"error"),a(S,"Failed to save session"),console.error("Save error:",D)}}function F(){a(C,new Date().toISOString().split("T")[0],!0),a(f,[],!0),d(),a(B,"idle"),a(S,"")}var h=dl(),m=l(h),g=s(l(m),2);g.__click=d,t(m);var T=s(m,2),ce=s(l(T),2);I(ce),t(T);var ne=s(T,2);pe(ne,21,()=>e(f),_e,(D,x,w)=>{var N=vl(),A=l(N),X=l(A),ie=l(X);pe(ie,21,()=>c,_e,(U,ae)=>{var oe=il(),be=l(oe,!0);t(oe);var ve={};L(()=>{Q(be,e(ae)),ve!==(ve=e(ae))&&(oe.value=(oe.__value=e(ae))??"")}),i(U,oe)}),t(ie);var re=s(ie,2);pe(re,21,()=>G,_e,(U,ae)=>{var oe=rl(),be=l(oe,!0);t(oe);var ve={};L(()=>{Q(be,e(ae)),ve!==(ve=e(ae))&&(oe.value=(oe.__value=e(ae))??"")}),i(U,oe)}),t(re),t(X);var Z=s(X,2);Z.__click=()=>P(w),t(A);var Ce=s(A,2),De=l(Ce);pe(De,17,()=>e(x).details,_e,(U,ae,oe)=>{var be=nl(),ve=l(be),we=l(ve);at(we,"for",`weight-${w}-${oe}`);var Ye=s(we,2);I(Ye),at(Ye,"id",`weight-${w}-${oe}`),t(ve);var Ze=s(ve,2),qe=l(Ze);at(qe,"for",`reps-${w}-${oe}`);var u=s(qe,2);I(u),at(u,"id",`reps-${w}-${oe}`),t(Ze);var b=s(Ze,2);{var j=J=>{var ke=ol();ke.__click=()=>le(w,oe),i(J,ke)};E(b,J=>{e(x).details.length>1&&J(j)})}t(be),M(Ye,()=>e(ae).weight,J=>e(ae).weight=J),M(u,()=>e(ae).reps,J=>e(ae).reps=J),i(U,be)});var Me=s(De,2);Me.__click=()=>H(w),t(Ce);var Ie=s(Ce,2),fe=l(Ie),Te=l(fe);at(Te,"for",`total-sets-${w}`);var Fe=s(Te,2);I(Fe),at(Fe,"id",`total-sets-${w}`),t(fe);var ge=s(fe,2),v=l(ge);at(v,"for",`notes-${w}`);var O=s(v,2);I(O),at(O,"id",`notes-${w}`),t(ge),t(Ie),t(N),L(()=>Va(Fe,e(x).sets)),Xe(ie,()=>e(x).name,U=>e(x).name=U),Xe(re,()=>e(x).gripType,U=>e(x).gripType=U),M(O,()=>e(x).notes,U=>e(x).notes=U),i(D,N)}),t(ne);var q=s(ne,2),$=l(q);{var K=D=>{var x=cl();let w;var N=l(x,!0);t(x),L(()=>{w=Be(x,1,"save-message svelte-1m63nqt",null,w,{success:e(B)==="success",error:e(B)==="error"}),Q(N,e(S))}),i(D,x)};E($,D=>{e(S)&&D(K)})}var ee=s($,2);ee.__click=z;var W=l(ee);{var y=D=>{var x=je("Saving...");i(D,x)},se=D=>{var x=nt(),w=st(x);{var N=X=>{var ie=je("‚úì Saved!");i(X,ie)},A=X=>{var ie=je("Save Session");i(X,ie)};E(w,X=>{e(B)==="success"?X(N):X(A,!1)},!0)}i(D,x)};E(W,D=>{e(B)==="saving"?D(y):D(se,!1)})}t(ee),t(q),t(h),L(()=>ee.disabled=e(B)==="saving"),M(ce,()=>e(C),D=>a(C,D)),i(me,h),ct()}Jt(["click"]);var pl=n("<option> </option>"),fl=n('<input type="text" placeholder="Enter venue name" class="mt-2 svelte-1fje4dh"/>'),_l=n("<option> </option>"),ml=n("<option> </option>"),gl=n('<input type="text" placeholder="Round name" class="mt-2 svelte-1fje4dh"/>'),bl=n('<div class="result-mode-content svelte-1fje4dh"><div class="form-group svelte-1fje4dh"><label for="position" class="svelte-1fje4dh">Final Position</label> <input type="number" id="position" placeholder="#" class="large-input svelte-1fje4dh"/></div></div>'),hl=n("<option> </option>"),yl=n('<input type="number" min="1" class="svelte-1fje4dh"/>'),kl=n('<span class="flash-dash">-</span>'),Sl=n('<tr><td class="col-name svelte-1fje4dh"><input type="text" class="svelte-1fje4dh"/></td><td class="col-status svelte-1fje4dh"><select class="svelte-1fje4dh"></select></td><td class="col-attempt svelte-1fje4dh"><!></td><td class="col-notes svelte-1fje4dh"><input type="text" placeholder="..." class="svelte-1fje4dh"/></td><td class="col-action svelte-1fje4dh"><button class="svelte-1fje4dh">‚úï</button></td></tr>'),xl=n('<div class="load-metrics-compact svelte-1fje4dh"><div class="metric svelte-1fje4dh"><label for="finger">Finger Load</label> <input type="number" id="finger" min="0" max="5" step="0.5" class="svelte-1fje4dh"/></div> <div class="metric svelte-1fje4dh"><label for="shoulder">Shoulder Load</label> <input type="number" id="shoulder" min="0" max="5" step="0.5" class="svelte-1fje4dh"/></div> <div class="metric svelte-1fje4dh"><label for="forearm">Forearm Load</label> <input type="number" id="forearm" min="0" max="5" step="0.5" class="svelte-1fje4dh"/></div></div> <div class="climbs-table-container svelte-1fje4dh"><div class="section-header svelte-1fje4dh"><h4 class="svelte-1fje4dh">Boulders / Routes</h4></div> <table class="climbs-table svelte-1fje4dh"><thead><tr><th class="svelte-1fje4dh">#</th><th class="svelte-1fje4dh">Result</th><th class="svelte-1fje4dh">Att.</th><th class="svelte-1fje4dh">Notes</th><th class="svelte-1fje4dh"></th></tr></thead><tbody></tbody></table> <button class="add-row-btn svelte-1fje4dh">+ Add Row</button></div>',1),wl=n("<div> </div>"),ql=n('<div class="form-content svelte-1fje4dh"><h3 class="svelte-1fje4dh">üèÜ Competition</h3> <div class="form-grid svelte-1fje4dh"><div class="form-group svelte-1fje4dh"><label for="date" class="svelte-1fje4dh">Date</label> <input type="date" id="date" class="svelte-1fje4dh"/></div> <div class="form-group svelte-1fje4dh"><label for="venue" class="svelte-1fje4dh">Venue</label> <select id="venue" class="svelte-1fje4dh"><option disabled>Select venue...</option><!></select> <!></div></div> <div class="form-group mb-4 svelte-1fje4dh"><label for="type" class="svelte-1fje4dh">Type</label> <select id="type" class="svelte-1fje4dh"></select></div> <div class="round-section svelte-1fje4dh"><div class="form-group svelte-1fje4dh"><label for="round" class="svelte-1fje4dh">Round</label> <select id="round" class="svelte-1fje4dh"></select> <!></div> <!></div> <div class="submit-section"><!> <button type="button" class="submit-btn svelte-1fje4dh"><!></button></div></div>');function Cl(me,V){vt(V,!0);const c=["Flashpoint Bristol","Rockstar Techno","Rockstar Unit 3","Rockstar Unit 5","Bloc","TCA","Other"],G=["Bouldering","Lead","Speed"],C=["Qualifiers","Semi-Finals","Finals","Result","Other"],f=["Flash","Top","Zone","Attempt"];let d=_(Ge(new Date().toISOString().split("T")[0])),P=_(""),H=_(""),le=_("Bouldering"),B=_(4),S=_(4),z=_(4),F=_("Qualifiers"),h=_(""),m=_(null),g=_(Ge([{name:"#1",status:"Flash",attemptCount:1,notes:""}])),T=Dt(()=>e(F)==="Result"),ce=Dt(()=>e(P)==="Other"),ne=Dt(()=>e(F)==="Other"),q=Dt(()=>e(F)==="Other"?e(h):e(F));function $(){const u=e(g).length+1;a(g,[...e(g),{name:`#${u}`,status:"Flash",attemptCount:1,notes:""}],!0)}function K(u){e(g).length>1?a(g,e(g).filter((b,j)=>j!==u),!0):e(g)[0]={name:"#1",status:"Flash",attemptCount:1,notes:""}}function ee(u,b){e(g)[u].status=b,b==="Flash"&&(e(g)[u].attemptCount=1)}let W=_("idle"),y=_("");async function se(){if(!e(P)||e(P)==="Other"&&!e(H)){a(W,"error"),a(y,"Please specify a venue");return}a(W,"saving");try{const u={name:e(q),position:e(T)?e(m):void 0,climbs:e(T)?void 0:JSON.parse(JSON.stringify(e(g)))},b={date:e(d),venue:e(P)==="Other"?e(H):e(P),customVenue:e(P)==="Other"?e(H):void 0,type:e(le),fingerLoad:e(T)?void 0:e(B),shoulderLoad:e(T)?void 0:e(S),forearmLoad:e(T)?void 0:e(z),rounds:[u]},j=Wa(b);if(na()){const J=await Za(b);J.ok?(ma(j.id,J.id),ga(J.id),a(W,"success"),a(y,"Competition saved and synced!")):(ba(j.id),a(W,"success"),a(y,"Saved locally. Sync failed: "+(J.error||"Unknown error")))}else a(W,"success"),a(y,"Saved locally. Will sync when online.");window.dispatchEvent(new CustomEvent("session-saved")),setTimeout(()=>{D()},2e3)}catch(u){a(W,"error"),a(y,"Failed to save session"),console.error("Save error:",u)}}function D(){a(d,new Date().toISOString().split("T")[0],!0),a(P,""),a(H,""),a(m,null),a(g,[{name:"#1",status:"Flash",attemptCount:1,notes:""}],!0),a(W,"idle"),a(y,"")}var x=ql(),w=s(l(x),2),N=l(w),A=s(l(N),2);I(A),t(N);var X=s(N,2),ie=s(l(X),2),re=l(ie);re.value=re.__value="";var Z=s(re);pe(Z,17,()=>c,_e,(u,b)=>{var j=pl(),J=l(j,!0);t(j);var ke={};L(()=>{Q(J,e(b)),ke!==(ke=e(b))&&(j.value=(j.__value=e(b))??"")}),i(u,j)}),t(ie);var Ce=s(ie,2);{var De=u=>{var b=fl();I(b),M(b,()=>e(H),j=>a(H,j)),i(u,b)};E(Ce,u=>{e(ce)&&u(De)})}t(X),t(w);var Me=s(w,2),Ie=s(l(Me),2);pe(Ie,21,()=>G,_e,(u,b)=>{var j=_l(),J=l(j,!0);t(j);var ke={};L(()=>{Q(J,e(b)),ke!==(ke=e(b))&&(j.value=(j.__value=e(b))??"")}),i(u,j)}),t(Ie),t(Me);var fe=s(Me,2),Te=l(fe),Fe=s(l(Te),2);pe(Fe,21,()=>C,_e,(u,b)=>{var j=ml(),J=l(j,!0);t(j);var ke={};L(()=>{Q(J,e(b)),ke!==(ke=e(b))&&(j.value=(j.__value=e(b))??"")}),i(u,j)}),t(Fe);var ge=s(Fe,2);{var v=u=>{var b=gl();I(b),M(b,()=>e(h),j=>a(h,j)),i(u,b)};E(ge,u=>{e(ne)&&u(v)})}t(Te);var O=s(Te,2);{var U=u=>{var b=bl(),j=l(b),J=s(l(j),2);I(J),t(j),t(b),M(J,()=>e(m),ke=>a(m,ke)),i(u,b)},ae=u=>{var b=xl(),j=st(b),J=l(j),ke=s(l(J),2);I(ke),t(J);var Ee=s(J,2),We=s(l(Ee),2);I(We),t(Ee);var yt=s(Ee,2),Tt=s(l(yt),2);I(Tt),t(yt),t(j);var pt=s(j,2),ft=s(l(pt),2),kt=s(l(ft));pe(kt,21,()=>e(g),_e,(Ue,Ve,St)=>{var _t=Sl(),mt=l(_t),xt=l(mt);I(xt),t(mt);var wt=s(mt),He=l(wt);He.__change=Ne=>ee(St,Ne.target.value),pe(He,21,()=>f,_e,(Ne,Ke)=>{var Pe=hl(),Rt=l(Pe,!0);t(Pe);var ht={};L(()=>{Q(Rt,e(Ke)),ht!==(ht=e(Ke))&&(Pe.value=(Pe.__value=e(Ke))??"")}),i(Ne,Pe)}),t(He);var Nt;Ca(He),t(wt);var gt=s(wt),At=l(gt);{var qt=Ne=>{var Ke=yl();I(Ke),M(Ke,()=>e(Ve).attemptCount,Pe=>e(Ve).attemptCount=Pe),i(Ne,Ke)},Et=Ne=>{var Ke=kl();i(Ne,Ke)};E(At,Ne=>{e(Ve).status!=="Flash"?Ne(qt):Ne(Et,!1)})}t(gt);var dt=s(gt),Vt=l(dt);I(Vt),t(dt);var bt=s(dt),Ft=l(bt);Ft.__click=()=>K(St),t(bt),t(_t),L(()=>{Nt!==(Nt=e(Ve).status)&&(He.value=(He.__value=e(Ve).status)??"",Ta(He,e(Ve).status))}),M(xt,()=>e(Ve).name,Ne=>e(Ve).name=Ne),M(Vt,()=>e(Ve).notes,Ne=>e(Ve).notes=Ne),i(Ue,_t)}),t(kt),t(ft);var Gt=s(ft,2);Gt.__click=$,t(pt),M(ke,()=>e(B),Ue=>a(B,Ue)),M(We,()=>e(S),Ue=>a(S,Ue)),M(Tt,()=>e(z),Ue=>a(z,Ue)),i(u,b)};E(O,u=>{e(T)?u(U):u(ae,!1)})}t(fe);var oe=s(fe,2),be=l(oe);{var ve=u=>{var b=wl();let j;var J=l(b,!0);t(b),L(()=>{j=Be(b,1,"save-message svelte-1fje4dh",null,j,{success:e(W)==="success",error:e(W)==="error"}),Q(J,e(y))}),i(u,b)};E(be,u=>{e(y)&&u(ve)})}var we=s(be,2);we.__click=se;var Ye=l(we);{var Ze=u=>{var b=je("Saving...");i(u,b)},qe=u=>{var b=nt(),j=st(b);{var J=Ee=>{var We=je("‚úì Saved!");i(Ee,We)},ke=Ee=>{var We=je("Save Session");i(Ee,We)};E(j,Ee=>{e(W)==="success"?Ee(J):Ee(ke,!1)},!0)}i(u,b)};E(Ye,u=>{e(W)==="saving"?u(Ze):u(qe,!1)})}t(we),t(oe),t(x),L(()=>we.disabled=e(W)==="saving"),M(A,()=>e(d),u=>a(d,u)),Xe(ie,()=>e(P),u=>a(P,u)),Xe(Ie,()=>e(le),u=>a(le,u)),Xe(Fe,()=>e(F),u=>a(F,u)),i(me,x),ct()}Jt(["change","click"]);var Tl=n('<span class="spinner svelte-b2zgdd"></span> Syncing...',1),Nl=n("<button><!></button>"),Fl=n("<div> </div>"),Ol=n('<div><div class="sync-info svelte-b2zgdd"><span class="sync-icon svelte-b2zgdd"> </span> <span class="sync-text svelte-b2zgdd"><!></span></div> <!> <!></div>'),jl=n("<option> </option>"),zl=n('<div class="form-container svelte-b2zgdd"><!></div>'),Al=n('<div class="page svelte-b2zgdd"><div class="page-header svelte-b2zgdd"><h1 class="svelte-b2zgdd">üìù Log Data</h1> <p class="subtitle svelte-b2zgdd">Record your training sessions</p></div> <!> <div class="content-card svelte-b2zgdd"><div class="form-group svelte-b2zgdd"><label for="activity-type" class="svelte-b2zgdd">Activity Type</label> <select id="activity-type" class="svelte-b2zgdd"><option disabled>Select an activity...</option><!></select></div> <!></div></div>');function Wl(me,V){vt(V,!0);const c=[{value:"indoor_climb",label:"Indoor Climb",icon:"üßó"},{value:"outdoor_climb",label:"Outdoor Climb",icon:"‚õ∞Ô∏è"},{value:"gym_session",label:"Gym Session",icon:"üèãÔ∏è"},{value:"fingerboarding",label:"Fingerboarding",icon:"ü§è"},{value:"competition",label:"Competition",icon:"üèÜ"}];let G=_(""),C=_(0),f=_("idle"),d=_(""),P=_(!0);za(()=>{H(),a(P,na(),!0);const q=()=>{a(P,!0),H()},$=()=>{a(P,!1)},K=()=>{H()};return window.addEventListener("online",q),window.addEventListener("offline",$),window.addEventListener("session-saved",K),()=>{window.removeEventListener("online",q),window.removeEventListener("offline",$),window.removeEventListener("session-saved",K)}});function H(){a(C,es(),!0)}async function le(){if(!e(P)){a(f,"error"),a(d,"No network connection");return}a(f,"syncing"),a(d,"");try{const q=await ts();q.failed===0&&q.success>0?(a(f,"success"),a(d,`Synced ${q.success} session${q.success>1?"s":""}!`)):q.failed>0&&q.success>0?(a(f,"error"),a(d,`Synced ${q.success}, failed ${q.failed}`)):q.failed>0?(a(f,"error"),a(d,`Failed to sync ${q.failed} session${q.failed>1?"s":""}`)):(a(f,"idle"),a(d,"")),H(),e(f)==="success"&&setTimeout(()=>{a(f,"idle"),a(d,"")},3e3)}catch(q){a(f,"error"),a(d,"Sync failed"),console.error("Sync error:",q)}}var B=Al(),S=s(l(B),2);{var z=q=>{var $=Ol();let K;var ee=l($),W=l(ee),y=l(W,!0);t(W);var se=s(W,2),D=l(se);{var x=re=>{var Z=je();L(()=>Q(Z,`${e(C)??""} session${e(C)>1?"s":""} waiting to sync`)),i(re,Z)},w=re=>{var Z=je();L(()=>Q(Z,`Offline - ${e(C)??""} session${e(C)>1?"s":""} saved locally`)),i(re,Z)};E(D,re=>{e(P)?re(x):re(w,!1)})}t(se),t(ee);var N=s(ee,2);{var A=re=>{var Z=Nl();let Ce;Z.__click=le;var De=l(Z);{var Me=fe=>{var Te=Tl();Ae(),i(fe,Te)},Ie=fe=>{var Te=nt(),Fe=st(Te);{var ge=O=>{var U=je("‚úì Synced!");i(O,U)},v=O=>{var U=je("Sync Now");i(O,U)};E(Fe,O=>{e(f)==="success"?O(ge):O(v,!1)},!0)}i(fe,Te)};E(De,fe=>{e(f)==="syncing"?fe(Me):fe(Ie,!1)})}t(Z),L(()=>{Ce=Be(Z,1,"sync-btn svelte-b2zgdd",null,Ce,{syncing:e(f)==="syncing"}),Z.disabled=e(f)==="syncing"}),i(re,Z)};E(N,re=>{e(P)&&re(A)})}var X=s(N,2);{var ie=re=>{var Z=Fl();let Ce;var De=l(Z,!0);t(Z),L(()=>{Ce=Be(Z,1,"sync-message svelte-b2zgdd",null,Ce,{error:e(f)==="error",success:e(f)==="success"}),Q(De,e(d))}),i(re,Z)};E(X,re=>{e(d)&&re(ie)})}t($),L(()=>{K=Be($,1,"sync-banner svelte-b2zgdd",null,K,{offline:!e(P)}),Q(y,e(P)?"üîÑ":"üì¥")}),i(q,$)};E(S,q=>{e(C)>0&&q(z)})}var F=s(S,2),h=l(F),m=s(l(h),2),g=l(m);g.value=g.__value="";var T=s(g);pe(T,17,()=>c,q=>q.value,(q,$)=>{var K=jl(),ee=l(K);t(K);var W={};L(()=>{Q(ee,`${e($).icon??""} ${e($).label??""}`),W!==(W=e($).value)&&(K.value=(K.__value=e($).value)??"")}),i(q,K)}),t(m),t(h);var ce=s(h,2);{var ne=q=>{var $=zl(),K=l($);{var ee=y=>{ys(y,{})},W=y=>{var se=nt(),D=st(se);{var x=N=>{Ls(N,{})},w=N=>{var A=nt(),X=st(A);{var ie=Z=>{ll(Z,{})},re=Z=>{var Ce=nt(),De=st(Ce);{var Me=fe=>{ul(fe,{})},Ie=fe=>{var Te=nt(),Fe=st(Te);{var ge=v=>{Cl(v,{})};E(Fe,v=>{e(G)==="competition"&&v(ge)},!0)}i(fe,Te)};E(De,fe=>{e(G)==="fingerboarding"?fe(Me):fe(Ie,!1)},!0)}i(Z,Ce)};E(X,Z=>{e(G)==="gym_session"?Z(ie):Z(re,!1)},!0)}i(N,A)};E(D,N=>{e(G)==="outdoor_climb"?N(x):N(w,!1)},!0)}i(y,se)};E(K,y=>{e(G)==="indoor_climb"?y(ee):y(W,!1)})}t($),i(q,$)};E(ce,q=>{e(G)&&q(ne)})}t(F),t(B),Xe(m,()=>e(G),q=>a(G,q)),i(me,B),ct()}Jt(["click"]);export{Wl as component};
