import{f as n,a as i,c as Te,t as ga}from"../chunks/BXdXZntb.js";import{z as Ua,ak as Ha,aZ as Za,as as Ka,au as Ya,e as Ja,a_ as Qa,aN as Ga,a$ as Xa,ac as $a,b0 as ka,G as ja,p as sa,c as t,s as r,i as e,aV as P,r as a,t as T,a as ra,x as v,f as xe,aW as fa,w as da,aG as Sa}from"../chunks/Uw_kZyi_.js";import{a as et,d as Qe,s as o}from"../chunks/DPirsh8J.js";import{i as p}from"../chunks/YwdRV5Fi.js";import{s as Ne,r as Ye,e as ye,i as we}from"../chunks/DQsiYeU_.js";import{b as wa,r as za,u as Ba,t as Ca,q as La,v as at,w as Aa,g as tt,j as st,x as rt,y as Oa,z as it,A as Na,B as nt}from"../chunks/Dt1-E3yB.js";import{o as Ma}from"../chunks/D0dKXudF.js";import{t as lt,b as Je,s as Be}from"../chunks/CLsJli5y.js";import{p as Ta}from"../chunks/Def57eX4.js";import"../chunks/BXNNvvj2.js";const vt=()=>performance.now(),ua={tick:y=>requestAnimationFrame(y),now:()=>vt(),tasks:new Set};function Pa(){const y=ua.now();ua.tasks.forEach(s=>{s.c(y)||(ua.tasks.delete(s),s.f())}),ua.tasks.size!==0&&ua.tick(Pa)}function ot(y){let s;return ua.tasks.size===0&&ua.tick(Pa),{promise:new Promise(f=>{ua.tasks.add(s={c:y,f})}),abort(){ua.tasks.delete(s)}}}function Fa(y,s){Ga(()=>{y.dispatchEvent(new CustomEvent(s))})}function dt(y){if(y==="float")return"cssFloat";if(y==="offset")return"cssOffset";if(y.startsWith("--"))return y;const s=y.split("-");return s.length===1?s[0]:s[0]+s.slice(1).map(f=>f[0].toUpperCase()+f.slice(1)).join("")}function Ra(y){const s={},f=y.split(";");for(const u of f){const[m,h]=u.split(":");if(!m||h===void 0)break;const c=dt(m.trim());s[c]=h.trim()}return s}const ct=y=>y;function He(y,s,f,u){var m=(y&Qa)!==0,h="both",c,w=s.inert,I=s.style.overflow,D,L;function S(){return Ga(()=>c??=f()(s,u?.()??{},{direction:h}))}var q={is_global:m,in(){s.inert=w,Fa(s,"introstart"),D=Ia(s,S(),L,1,()=>{Fa(s,"introend"),D?.abort(),D=c=void 0,s.style.overflow=I})},out(G){s.inert=!0,Fa(s,"outrostart"),L=Ia(s,S(),D,0,()=>{Fa(s,"outroend"),G?.()})},stop:()=>{D?.abort(),L?.abort()}},F=Ua;if((F.nodes.t??=[]).push(q),et){var k=m;if(!k){for(var z=F.parent;z&&(z.f&Ha)!==0;)for(;(z=z.parent)&&(z.f&Za)===0;);k=!z||(z.f&Ka)!==0}k&&Ya(()=>{Ja(()=>q.in())})}}function Ia(y,s,f,u,m){var h=u===1;if(Xa(s)){var c,w=!1;return $a(()=>{if(!w){var G=s({direction:h?"in":"out"});c=Ia(y,G,f,u,m)}}),{abort:()=>{w=!0,c?.abort()},deactivate:()=>c.deactivate(),reset:()=>c.reset(),t:()=>c.t()}}if(f?.deactivate(),!s?.duration)return m(),{abort:ka,deactivate:ka,reset:ka,t:()=>u};const{delay:I=0,css:D,tick:L,easing:S=ct}=s;var q=[];if(h&&f===void 0&&(L&&L(0,1),D)){var F=Ra(D(0,1));q.push(F,F)}var k=()=>1-u,z=y.animate(q,{duration:I,fill:"forwards"});return z.onfinish=()=>{z.cancel();var G=f?.t()??1-u;f?.abort();var V=u-G,R=s.duration*Math.abs(V),ue=[];if(R>0){var J=!1;if(D)for(var O=Math.ceil(R/16.666666666666668),g=0;g<=O;g+=1){var A=G+V*S(g/O),U=Ra(D(A,1-A));ue.push(U),J||=U.overflow==="hidden"}J&&(y.style.overflow="hidden"),k=()=>{var H=z.currentTime;return G+V*S(H/R)},L&&ot(()=>{if(z.playState!=="running")return!1;var H=k();return L(H,1-H),!0})}z=y.animate(ue,{duration:R,fill:"forwards"}),z.onfinish=()=>{k=()=>u,L?.(u,1-u),m()}},{abort:()=>{z&&(z.cancel(),z.effect=null,z.onfinish=ka)},deactivate:()=>{m=ka},reset:()=>{u===0&&L?.(1,0)},t:()=>k()}}function Da(y,s,f,u){var m=y.__style;if(ja||m!==s){var h=lt(s);(!ja||h!==y.getAttribute("style"))&&(h==null?y.removeAttribute("style"):y.style.cssText=h),y.__style=s}return u}const _t=y=>y;function Va(y){const s=y-1;return s*s*s+1}function ut(y,{delay:s=0,duration:f=400,easing:u=_t}={}){const m=+getComputedStyle(y).opacity;return{delay:s,duration:f,easing:u,css:h=>`opacity: ${h*m}`}}function ia(y,{delay:s=0,duration:f=400,easing:u=Va,axis:m="y"}={}){const h=getComputedStyle(y),c=+h.opacity,w=m==="y"?"height":"width",I=parseFloat(h[w]),D=m==="y"?["top","bottom"]:["left","right"],L=D.map(V=>`${V[0].toUpperCase()}${V.slice(1)}`),S=parseFloat(h[`padding${L[0]}`]),q=parseFloat(h[`padding${L[1]}`]),F=parseFloat(h[`margin${L[0]}`]),k=parseFloat(h[`margin${L[1]}`]),z=parseFloat(h[`border${L[0]}Width`]),G=parseFloat(h[`border${L[1]}Width`]);return{delay:s,duration:f,easing:u,css:V=>`overflow: hidden;opacity: ${Math.min(V*20,1)*c};${w}: ${V*I}px;padding-${D[0]}: ${V*S}px;padding-${D[1]}: ${V*q}px;margin-${D[0]}: ${V*F}px;margin-${D[1]}: ${V*k}px;border-${D[0]}-width: ${V*z}px;border-${D[1]}-width: ${V*G}px;min-${w}: 0`}}function ft(y,{delay:s=0,duration:f=400,easing:u=Va,start:m=0,opacity:h=0}={}){const c=getComputedStyle(y),w=+c.opacity,I=c.transform==="none"?"":c.transform,D=1-m,L=w*(1-h);return{delay:s,duration:f,easing:u,css:(S,q)=>`
			transform: ${I} scale(${1-D*q});
			opacity: ${w-L*q}
		`}}var gt=n('<span class="chevron svelte-12crvy">â–²</span>'),pt=n('<span class="chevron svelte-12crvy">â–¼</span>'),mt=n("<option> </option>"),ht=n("<option> </option>"),yt=n('<div class="filter-body svelte-12crvy"><div class="filter-grid svelte-12crvy"><div class="filter-item svelte-12crvy"><label for="start-date" class="svelte-12crvy">Start Date</label> <input type="date" id="start-date" class="svelte-12crvy"/></div> <div class="filter-item svelte-12crvy"><label for="end-date" class="svelte-12crvy">End Date</label> <input type="date" id="end-date" class="svelte-12crvy"/></div> <div class="filter-item svelte-12crvy"><label for="location-filter" class="svelte-12crvy">Location</label> <select id="location-filter" class="svelte-12crvy"><option>Any Location</option><!></select></div> <div class="filter-item svelte-12crvy"><label for="session-type-filter" class="svelte-12crvy">Session Type</label> <select id="session-type-filter" class="svelte-12crvy"><option>Any Type</option><!></select></div> <div class="filter-item svelte-12crvy"><label for="grade-filter" class="svelte-12crvy">Grade (Exact)</label> <input type="text" id="grade-filter" placeholder="e.g. V4" class="svelte-12crvy"/></div></div> <div class="filter-actions svelte-12crvy"><button class="reset-btn svelte-12crvy">Reset Filters</button></div></div>'),bt=n('<div class="filter-container svelte-12crvy"><button class="filter-header svelte-12crvy"><div class="header-content svelte-12crvy"><span class="icon svelte-12crvy">ğŸ”</span> <span class="title svelte-12crvy">Filters</span> <!></div></button> <!></div>');function xt(y,s){sa(s,!0);const f=["Rockstar Swindon","Flashpoint Swindon","Flashpoint Bristol","Redpoint Bristol","TCH Bristol","Other"],u=["Projecting","Onsighting","Campusing","Repeaters"];let m=P(!1),h=P(""),c=P(""),w=P(""),I=P(""),D=P("");function L(){v(m,!e(m))}function S(){v(h,""),v(c,""),v(w,""),v(I,""),v(D,""),q()}function q(){s.onFilterParamsChange({startDate:e(h),endDate:e(c),location:e(w),sessionType:e(I),grade:e(D)})}var F=bt(),k=t(F);k.__click=L;var z=t(k),G=r(t(z),4);{var V=O=>{var g=gt();i(O,g)},R=O=>{var g=pt();i(O,g)};p(G,O=>{e(m)?O(V):O(R,!1)})}a(z),a(k);var ue=r(k,2);{var J=O=>{var g=yt(),A=t(g),U=t(A),H=r(t(U),2);Ye(H),H.__change=q,a(U);var Q=r(U,2),Z=r(t(Q),2);Ye(Z),Z.__change=q,a(Q);var l=r(Q,2),b=r(t(l),2);b.__change=q;var C=t(b);C.value=C.__value="";var _=r(C);ye(_,17,()=>f,we,(ee,de)=>{var M=mt(),re=t(M,!0);a(M);var ge={};T(()=>{o(re,e(de)),ge!==(ge=e(de))&&(M.value=(M.__value=e(de))??"")}),i(ee,M)}),a(b),a(l);var d=r(l,2),x=r(t(d),2);x.__change=q;var K=t(x);K.value=K.__value="";var De=r(K);ye(De,17,()=>u,we,(ee,de)=>{var M=ht(),re=t(M,!0);a(M);var ge={};T(()=>{o(re,e(de)),ge!==(ge=e(de))&&(M.value=(M.__value=e(de))??"")}),i(ee,M)}),a(x),a(d);var fe=r(d,2),be=r(t(fe),2);Ye(be),be.__input=q,a(fe),a(A);var _e=r(A,2),te=t(_e);te.__click=S,a(_e),a(g),Je(H,()=>e(h),ee=>v(h,ee)),Je(Z,()=>e(c),ee=>v(c,ee)),wa(b,()=>e(w),ee=>v(w,ee)),wa(x,()=>e(I),ee=>v(I,ee)),Je(be,()=>e(D),ee=>v(D,ee)),He(3,g,()=>ia,()=>({duration:200})),i(O,g)};p(ue,O=>{e(m)&&O(J)})}a(F),T(()=>Ne(k,"aria-expanded",e(m))),i(y,F),ra()}Qe(["click","change","input"]);var wt=n('<span class="climb-type-tag svelte-yz0xxt"> </span>'),Dt=n('<span class="notes-preview svelte-yz0xxt"> </span>'),St=n('<span class="attempts-count svelte-yz0xxt"> </span>'),qt=n('<div class="detail-row svelte-yz0xxt"><span class="label svelte-yz0xxt">Notes:</span> <p class="notes svelte-yz0xxt"> </p></div>'),kt=n('<p class="empty-notes svelte-yz0xxt">No notes for this climb.</p>'),Tt=n('<div class="climb-details svelte-yz0xxt"><!> <div class="tags svelte-yz0xxt"><span class="tag type svelte-yz0xxt"> </span> <span class="tag attempt-text svelte-yz0xxt"> </span></div></div>'),Ft=n('<div><div class="climb-header svelte-yz0xxt" role="button" tabindex="0"><div class="climb-main-info svelte-yz0xxt"><span> </span> <span class="climb-name svelte-yz0xxt"> </span> <!> <!></div> <div class="climb-meta svelte-yz0xxt"><span><span class="icon svelte-yz0xxt"> </span> <!></span> <button class="delete-btn svelte-yz0xxt" aria-label="Delete climb" title="Delete climb">ğŸ—‘ï¸</button> <span class="chevron svelte-yz0xxt"> </span></div></div> <!></div>');function Ct(y,s){sa(s,!0);let f=Ta(s,"showClimbType",3,!1),u=P(!1);function m(){v(u,!e(u))}function h(d){d.stopPropagation(),s.onDelete()}const c={Flash:"âš¡",Onsight:"ğŸ‘ï¸",Redpoint:"ğŸ”´",Dogged:"ğŸ› ï¸",DNF:"âŒ"};var w=Ft();let I;var D=t(w);D.__click=m,D.__keydown=d=>(d.key==="Enter"||d.key===" ")&&m();var L=t(D),S=t(L);let q;var F=t(S,!0);a(S);var k=r(S,2),z=t(k,!0);a(k);var G=r(k,2);{var V=d=>{var x=wt(),K=t(x,!0);a(x),T(()=>o(K,s.climb.isSport?"Sport":"Boulder")),i(d,x)};p(G,d=>{f()&&d(V)})}var R=r(G,2);{var ue=d=>{var x=Dt(),K=t(x);a(x),T(()=>o(K,`- ${s.climb.notes??""}`)),i(d,x)};p(R,d=>{!e(u)&&s.climb.notes&&d(ue)})}a(L);var J=r(L,2),O=t(J);let g;var A=t(O),U=t(A,!0);a(A);var H=r(A,2);{var Q=d=>{var x=St(),K=t(x,!0);a(x),T(()=>o(K,s.climb.attemptsNum)),i(d,x)};p(H,d=>{s.climb.attemptType!=="Flash"&&s.climb.attemptType!=="Onsight"&&d(Q)})}a(O);var Z=r(O,2);Z.__click=h;var l=r(Z,2),b=t(l,!0);a(l),a(J),a(D);var C=r(D,2);{var _=d=>{var x=Tt(),K=t(x);{var De=M=>{var re=qt(),ge=r(t(re),2),Me=t(ge,!0);a(ge),a(re),T(()=>o(Me,s.climb.notes)),i(M,re)},fe=M=>{var re=kt();i(M,re)};p(K,M=>{s.climb.notes?M(De):M(fe,!1)})}var be=r(K,2),_e=t(be),te=t(_e,!0);a(_e);var ee=r(_e,2),de=t(ee,!0);a(ee),a(be),a(x),T(()=>{o(te,s.climb.isSport?"Sport":"Boulder"),o(de,s.climb.attemptType)}),He(3,x,()=>ia,()=>({duration:150})),i(d,x)};p(C,d=>{e(u)&&d(_)})}a(w),T(()=>{I=Be(w,1,"climb-entry svelte-yz0xxt",null,I,{expanded:e(u)}),Ne(D,"aria-expanded",e(u)),q=Be(S,1,"grade-badge svelte-yz0xxt",null,q,{sport:s.climb.isSport}),o(F,s.climb.grade),o(z,s.climb.name||"Unnamed Route"),g=Be(O,1,"attempt-type svelte-yz0xxt",null,g,{flash:s.climb.attemptType==="Flash"}),o(U,c[s.climb.attemptType]||s.climb.attemptType),o(b,e(u)?"â–²":"â–¼")}),i(y,w),ra()}Qe(["click","keydown"]);var zt=n('<button class="backdrop svelte-12q9g58" aria-label="Close modal"></button> <div class="modal svelte-12q9g58" role="dialog" aria-modal="true"><h3 class="svelte-12q9g58"> </h3> <p class="svelte-12q9g58"> </p> <div class="input-group svelte-12q9g58"><label for="delete-confirm" class="svelte-12q9g58">Type <strong>delete</strong> to confirm:</label> <input type="text" id="delete-confirm" placeholder="delete" autocomplete="off" class="svelte-12q9g58"/></div> <div class="actions svelte-12q9g58"><button class="btn-cancel svelte-12q9g58">Cancel</button> <button class="btn-delete svelte-12q9g58">Delete</button></div></div>',1);function Ea(y,s){sa(s,!0);let f=Ta(s,"isOpen",3,!1),u=Ta(s,"title",3,"Confirm Delete"),m=Ta(s,"message",3,"Are you sure you want to delete this item? This action cannot be undone."),h=P(""),c=fa(()=>e(h).toLowerCase()==="delete");function w(){e(c)&&(s.onConfirm(),v(h,""))}function I(){s.onCancel(),v(h,"")}var D=Te(),L=xe(D);{var S=q=>{var F=zt(),k=xe(F);k.__click=I;var z=r(k,2),G=t(z),V=t(G,!0);a(G);var R=r(G,2),ue=t(R,!0);a(R);var J=r(R,2),O=r(t(J),2);Ye(O),a(J);var g=r(J,2),A=t(g);A.__click=I;var U=r(A,2);U.__click=w,a(g),a(z),T(()=>{o(V,u()),o(ue,m()),U.disabled=!e(c)}),He(3,k,()=>ut,()=>({duration:200})),Je(O,()=>e(h),H=>v(h,H)),He(3,z,()=>ft,()=>({duration:200,start:.9})),i(q,F)};p(L,q=>{f()&&q(S)})}i(y,D),ra()}Qe(["click"]);var Lt=n('<span class="stat svelte-7vqogn"> </span>'),At=n('<span class="status-icon pending svelte-7vqogn" title="Waiting to sync">ğŸ”„</span>'),Et=n('<span class="status-icon error svelte-7vqogn" title="Sync error">âš ï¸</span>'),Ot=n('<span class="chip svelte-7vqogn"> </span>'),Nt=n('<span class="text-none svelte-7vqogn">None</span>'),It=n('<div class="detail-item svelte-7vqogn"><span class="label svelte-7vqogn">Difficulty</span> <span class="value svelte-7vqogn"> </span></div>'),jt=n('<span class="chip svelte-7vqogn"> </span>'),Rt=n('<span class="text-none svelte-7vqogn">None</span>'),Gt=n('<div class="detail-item svelte-7vqogn"><span class="label svelte-7vqogn">Category</span> <div class="value-chips svelte-7vqogn"><!></div></div>'),Bt=n('<span class="chip svelte-7vqogn"> </span>'),Mt=n('<span class="text-none svelte-7vqogn">None</span>'),Pt=n('<div class="detail-item svelte-7vqogn"><span class="label svelte-7vqogn">Focus</span> <div class="value-chips svelte-7vqogn"><!></div></div>'),Vt=n('<span class="chip svelte-7vqogn"> </span>'),Wt=n('<span class="text-none svelte-7vqogn">None</span>'),Ut=n('<div class="detail-item svelte-7vqogn"><span class="label svelte-7vqogn">Energy System</span> <div class="value-chips svelte-7vqogn"><!></div></div>'),Ht=n('<span class="chip svelte-7vqogn"> </span>'),Zt=n('<span class="text-none svelte-7vqogn">None</span>'),Kt=n('<div class="detail-item svelte-7vqogn"><span class="label svelte-7vqogn">Wall Angle</span> <div class="value-chips svelte-7vqogn"><!></div></div>'),Yt=n('<p class="no-climbs svelte-7vqogn">No climbs logged for this session.</p>'),Jt=n('<div class="card-body svelte-7vqogn"><div class="details-grid svelte-7vqogn"><div class="detail-item svelte-7vqogn"><span class="label svelte-7vqogn">Training Type</span> <div class="value-chips svelte-7vqogn"><!></div></div> <!> <!> <!> <!> <!></div> <div class="metrics-container svelte-7vqogn"><div class="metric svelte-7vqogn"><span class="label svelte-7vqogn">Finger Load</span> <div class="bar-container svelte-7vqogn"><div class="bar-fill svelte-7vqogn"></div></div> <span class="score svelte-7vqogn"> </span></div> <div class="metric svelte-7vqogn"><span class="label svelte-7vqogn">Shoulder Load</span> <div class="bar-container svelte-7vqogn"><div class="bar-fill svelte-7vqogn"></div></div> <span class="score svelte-7vqogn"> </span></div> <div class="metric svelte-7vqogn"><span class="label svelte-7vqogn">Forearm Load</span> <div class="bar-container svelte-7vqogn"><div class="bar-fill svelte-7vqogn"></div></div> <span class="score svelte-7vqogn"> </span></div></div> <div class="climbs-list svelte-7vqogn"><h4 class="svelte-7vqogn">Climbs</h4> <div class="climbs-container svelte-7vqogn"><!> <!></div></div></div>'),Qt=n('<div><div class="card-header svelte-7vqogn" role="button" tabindex="0"><div class="header-main svelte-7vqogn"><div class="date-badge svelte-7vqogn"><span class="day svelte-7vqogn"> </span> <span class="month svelte-7vqogn"> </span></div> <div class="session-info svelte-7vqogn"><div class="session-text svelte-7vqogn"><h3 class="location svelte-7vqogn"> </h3> <div class="session-meta svelte-7vqogn"><span class="type-tag svelte-7vqogn"> </span> <span class="stat svelte-7vqogn"> </span> <!></div></div> <div class="load-summary svelte-7vqogn"><div class="load-badge finger svelte-7vqogn"> </div> <div class="load-badge shoulder svelte-7vqogn"> </div> <div class="load-badge forearm svelte-7vqogn"> </div></div></div></div> <div class="header-actions"><div class="header-status svelte-7vqogn"><!></div>  <button class="btn-icon delete-session" title="Delete Session">ğŸ—‘ï¸</button> <span class="chevron svelte-7vqogn"> </span></div></div> <!></div> <!>',1);function Xt(y,s){sa(s,!0);let f=P(!1),u=P(!1);function m(){v(f,!e(f))}function h(){v(u,!0)}function c(){za(s.session.id),v(u,!1),s.onDelete()}function w(se){const j=[...s.session.climbs];j.splice(se,1),Ba(s.session.id,{climbs:j}),s.onDelete()}let I=fa(()=>s.session.climbs.length),D=fa(()=>s.session.climbs.reduce((se,j)=>{const X=parseInt(j.grade.replace(/\D/g,""))||0,ae=parseInt(se.replace(/\D/g,""))||0;return X>ae?j.grade:se},"V0"));var L=Qt(),S=xe(L);let q;var F=t(S);F.__click=m,F.__keydown=se=>se.key==="Enter"&&m();var k=t(F),z=t(k),G=t(z),V=t(G,!0);a(G);var R=r(G,2),ue=t(R,!0);a(R),a(z);var J=r(z,2),O=t(J),g=t(O),A=t(g,!0);a(g);var U=r(g,2),H=t(U),Q=t(H,!0);a(H);var Z=r(H,2),l=t(Z);a(Z);var b=r(Z,2);{var C=se=>{var j=Lt(),X=t(j);a(j),T(()=>o(X,`Max: ${e(D)??""}`)),i(se,j)};p(b,se=>{e(I)>0&&se(C)})}a(U),a(O);var _=r(O,2),d=t(_),x=t(d,!0);a(d);var K=r(d,2),De=t(K,!0);a(K);var fe=r(K,2),be=t(fe,!0);a(fe),a(_),a(J),a(k);var _e=r(k,2),te=t(_e),ee=t(te);{var de=se=>{var j=At();i(se,j)},M=se=>{var j=Te(),X=xe(j);{var ae=N=>{var E=Et();i(N,E)};p(X,N=>{s.session.syncStatus==="error"&&N(ae)},!0)}i(se,j)};p(ee,se=>{s.session.syncStatus==="pending"?se(de):se(M,!1)})}a(te);var re=r(te,2);re.__click=se=>{se.stopPropagation(),h()};var ge=r(re,2),Me=t(ge,!0);a(ge),a(_e),a(F);var Ze=r(F,2);{var Ie=se=>{var j=Jt(),X=t(j),ae=t(X),N=r(t(ae),2),E=t(N);{var ie=$=>{var le=Te(),B=xe(le);ye(B,17,()=>s.session.trainingTypes,we,(Y,he)=>{var oe=Ot(),W=t(oe,!0);a(oe),T(()=>o(W,e(he))),i(Y,oe)}),i($,le)},ne=$=>{var le=Nt();i($,le)};p(E,$=>{s.session.trainingTypes&&s.session.trainingTypes.length>0&&!s.session.trainingTypes.includes("None")?$(ie):$(ne,!1)})}a(N),a(ae);var pe=r(ae,2);{var me=$=>{var le=It(),B=r(t(le),2),Y=t(B,!0);a(B),a(le),T(()=>o(Y,s.session.difficulty)),i($,le)};p(pe,$=>{s.session.difficulty&&$(me)})}var Se=r(pe,2);{var je=$=>{var le=Gt(),B=r(t(le),2),Y=t(B);{var he=W=>{var ve=Te(),ce=xe(ve);ye(ce,17,()=>s.session.categories,we,(qe,We)=>{var ke=jt(),Ue=t(ke,!0);a(ke),T(()=>o(Ue,e(We))),i(qe,ke)}),i(W,ve)},oe=W=>{var ve=Rt();i(W,ve)};p(Y,W=>{s.session.categories.length>0&&!s.session.categories.includes("None")?W(he):W(oe,!1)})}a(B),a(le),i($,le)};p(Se,$=>{s.session.categories?.length&&$(je)})}var ze=r(Se,2);{var Fe=$=>{var le=Pt(),B=r(t(le),2),Y=t(B);{var he=W=>{var ve=Te(),ce=xe(ve);ye(ce,17,()=>s.session.techniqueFocuses,we,(qe,We)=>{var ke=Bt(),Ue=t(ke,!0);a(ke),T(()=>o(Ue,e(We))),i(qe,ke)}),i(W,ve)},oe=W=>{var ve=Mt();i(W,ve)};p(Y,W=>{s.session.techniqueFocuses.length>0&&!s.session.techniqueFocuses.includes("None")?W(he):W(oe,!1)})}a(B),a(le),i($,le)};p(ze,$=>{s.session.techniqueFocuses?.length&&$(Fe)})}var Pe=r(ze,2);{var Ce=$=>{var le=Ut(),B=r(t(le),2),Y=t(B);{var he=W=>{var ve=Te(),ce=xe(ve);ye(ce,17,()=>s.session.energySystems,we,(qe,We)=>{var ke=Vt(),Ue=t(ke,!0);a(ke),T(()=>o(Ue,e(We))),i(qe,ke)}),i(W,ve)},oe=W=>{var ve=Wt();i(W,ve)};p(Y,W=>{s.session.energySystems.length>0&&!s.session.energySystems.includes("None")?W(he):W(oe,!1)})}a(B),a(le),i($,le)};p(Pe,$=>{s.session.energySystems?.length&&$(Ce)})}var Le=r(Pe,2);{var na=$=>{var le=Kt(),B=r(t(le),2),Y=t(B);{var he=W=>{var ve=Te(),ce=xe(ve);ye(ce,17,()=>s.session.wallAngles,we,(qe,We)=>{var ke=Ht(),Ue=t(ke,!0);a(ke),T(()=>o(Ue,e(We))),i(qe,ke)}),i(W,ve)},oe=W=>{var ve=Zt();i(W,ve)};p(Y,W=>{s.session.wallAngles.length>0&&!s.session.wallAngles.includes("None")?W(he):W(oe,!1)})}a(B),a(le),i($,le)};p(Le,$=>{s.session.wallAngles?.length&&$(na)})}a(X);var Ae=r(X,2),Xe=t(Ae),Re=r(t(Xe),2),$e=t(Re);a(Re);var la=r(Re,2),ea=t(la);a(la),a(Xe);var Ee=r(Xe,2),Ve=r(t(Ee),2),va=t(Ve);a(Ve);var Oe=r(Ve,2),aa=t(Oe);a(Oe),a(Ee);var ca=r(Ee,2),Ge=r(t(ca),2),pa=t(Ge);a(Ge);var oa=r(Ge,2),ma=t(oa);a(oa),a(ca),a(Ae);var _a=r(Ae,2),ba=r(t(_a),2),ha=t(ba);ye(ha,17,()=>s.session.climbs,we,($,le,B)=>{{let Y=fa(()=>s.session.climbingType==="Mixed");Ct($,{get climb(){return e(le)},onDelete:()=>w(B),get showClimbType(){return e(Y)}})}});var xa=r(ha,2);{var ya=$=>{var le=Yt();i($,le)};p(xa,$=>{s.session.climbs.length===0&&$(ya)})}a(ba),a(_a),a(j),T(()=>{Da($e,`width: ${s.session.fingerLoad/5*100}%`),o(ea,`${s.session.fingerLoad??""}/5`),Da(va,`width: ${s.session.shoulderLoad/5*100}%`),o(aa,`${s.session.shoulderLoad??""}/5`),Da(pa,`width: ${s.session.forearmLoad/5*100}%`),o(ma,`${s.session.forearmLoad??""}/5`)}),He(3,j,()=>ia,()=>({duration:200})),i(se,j)};p(Ze,se=>{e(f)&&se(Ie)})}a(S);var Ke=r(S,2);Ea(Ke,{get isOpen(){return e(u)},title:"Delete Session",message:"Are you sure you want to delete this session and all its climbs? This cannot be undone.",onConfirm:c,onCancel:()=>v(u,!1)}),T((se,j)=>{q=Be(S,1,"session-card svelte-7vqogn",null,q,{expanded:e(f)}),Ne(F,"aria-expanded",e(f)),o(V,se),o(ue,j),o(A,s.session.location),o(Q,s.session.climbingType),o(l,`${e(I)??""} climbs`),Ne(d,"title",`Finger Load: ${s.session.fingerLoad??""}`),o(x,s.session.fingerLoad),Ne(K,"title",`Shoulder Load: ${s.session.shoulderLoad??""}`),o(De,s.session.shoulderLoad),Ne(fe,"title",`Forearm Load: ${s.session.forearmLoad??""}`),o(be,s.session.forearmLoad),o(Me,e(f)?"â–²":"â–¼")},[()=>new Date(s.session.date).getDate(),()=>new Date(s.session.date).toLocaleDateString("en-GB",{month:"short"})]),i(y,L),ra()}Qe(["click","keydown"]);var $t=n('<div class="legend-item svelte-11p9lqi"><span class="l-icon svelte-11p9lqi"> </span> <span class="l-label svelte-11p9lqi"> </span></div>'),es=n('<div class="legend-content svelte-11p9lqi"><div class="legend-grid svelte-11p9lqi"></div></div>'),as=n('<div class="legend-container svelte-11p9lqi"><button class="legend-toggle svelte-11p9lqi"><span class="icon">â„¹ï¸</span> <span class="text">Icon Legend</span> <span class="chevron svelte-11p9lqi"> </span></button> <!></div>');function Wa(y){let s=P(!1);const f=[{icon:"ğŸ‘ï¸",label:"Onsight"},{icon:"âš¡",label:"Flash"},{icon:"ğŸ”´",label:"Redpoint"},{icon:"ğŸ› ï¸",label:"Dogged"},{icon:"âŒ",label:"DNF"}];var u=as(),m=t(u);m.__click=()=>v(s,!e(s));var h=r(t(m),4),c=t(h,!0);a(h),a(m);var w=r(m,2);{var I=D=>{var L=es(),S=t(L);ye(S,21,()=>f,we,(q,F)=>{var k=$t(),z=t(k),G=t(z,!0);a(z);var V=r(z,2),R=t(V,!0);a(V),a(k),T(()=>{o(G,e(F).icon),o(R,e(F).label)}),i(q,k)}),a(S),a(L),He(3,L,()=>ia),i(D,L)};p(w,D=>{e(s)&&D(I)})}a(u),T(()=>{Ne(m,"aria-expanded",e(s)),o(c,e(s)?"â–¼":"â–¶")}),i(y,u)}Qe(["click"]);var ts=n('<span class="spinner svelte-14fqz8w"></span> Fetching...',1),ss=n('<div class="error-banner svelte-14fqz8w"> </div>'),rs=n('<small class="svelte-14fqz8w">Try adjusting your filters.</small>'),is=n('<div class="empty-state svelte-14fqz8w"><p class="svelte-14fqz8w">No indoor climbing sessions found.</p> <!></div>'),ns=n('<div class="view-container svelte-14fqz8w"><div class="view-header svelte-14fqz8w"><h2 class="view-title svelte-14fqz8w">ğŸ§— Indoor Climbing History</h2> <button class="fetch-btn svelte-14fqz8w" title="Fetch data from cloud"><!></button></div> <!> <!> <div class="info-bar svelte-14fqz8w"><div class="legend-wrapper svelte-14fqz8w"><!></div> <div class="load-key svelte-14fqz8w"><span class="key-label svelte-14fqz8w">Load:</span> <div class="key-item svelte-14fqz8w"><span class="dot finger svelte-14fqz8w"></span> Finger</div> <div class="key-item svelte-14fqz8w"><span class="dot shoulder svelte-14fqz8w"></span> Shoulder</div> <div class="key-item svelte-14fqz8w"><span class="dot forearm svelte-14fqz8w"></span> Forearm</div></div></div> <div class="sessions-list"><!> <!></div></div>');function ls(y,s){sa(s,!0);let f=P(da([])),u=P(da([])),m=P(!1),h=P(""),c=P(da({startDate:"",endDate:"",location:"",sessionType:"",grade:""}));Ma(()=>{w()});function w(){const l=Ca("indoor_climb");v(f,l.sort((b,C)=>new Date(C.date).getTime()-new Date(b.date).getTime()),!0),S()}async function I(){v(m,!0),v(h,"");try{await La();const l=await at();l.ok&&l.data?D(l.data):v(h,l.error||"Failed to fetch data",!0)}catch(l){v(h,l instanceof Error?l.message:"Unknown error",!0)}finally{v(m,!1)}}function D(l){const b=l.map(_=>({..._,activityType:"indoor_climb",createdAt:new Date().toISOString(),updatedAt:new Date().toISOString(),syncStatus:"synced",syncedAt:new Date().toISOString()}));Aa(b);const C=Ca("indoor_climb");v(f,C.sort((_,d)=>new Date(d.date).getTime()-new Date(_.date).getTime()),!0),S()}function L(l){v(c,l,!0),S()}function S(){v(u,e(f).filter(l=>{if(e(c).startDate&&l.date<e(c).startDate||e(c).endDate&&l.date>e(c).endDate||e(c).location&&l.location!==e(c).location||e(c).sessionType&&!l.trainingTypes?.includes(e(c).sessionType))return!1;if(e(c).grade){const b=e(c).grade.trim().toLowerCase();if(!l.climbs.some(_=>_.grade.trim().toLowerCase()===b))return!1}return!0}),!0)}var q=ns(),F=t(q),k=r(t(F),2);k.__click=I;var z=t(k);{var G=l=>{var b=ts();Sa(),i(l,b)},V=l=>{var b=ga("â˜ï¸ Fetch Data");i(l,b)};p(z,l=>{e(m)?l(G):l(V,!1)})}a(k),a(F);var R=r(F,2);{var ue=l=>{var b=ss(),C=t(b,!0);a(b),T(()=>o(C,e(h))),He(3,b,()=>ia),i(l,b)};p(R,l=>{e(h)&&l(ue)})}var J=r(R,2);xt(J,{onFilterParamsChange:L});var O=r(J,2),g=t(O),A=t(g);Wa(A),a(g),Sa(2),a(O);var U=r(O,2),H=t(U);ye(H,17,()=>e(u),l=>l.id,(l,b)=>{Xt(l,{get session(){return e(b)},onDelete:w})});var Q=r(H,2);{var Z=l=>{var b=is(),C=r(t(b),2);{var _=d=>{var x=rs();i(d,x)};p(C,d=>{e(f).length>0&&d(_)})}a(b),i(l,b)};p(Q,l=>{e(u).length===0&&l(Z)})}a(U),a(q),T(()=>k.disabled=e(m)),i(y,q),ra()}Qe(["click"]);var vs=n('<span class="chevron svelte-1frtlim">â–²</span>'),os=n('<span class="chevron svelte-1frtlim">â–¼</span>'),ds=n('<div class="input-with-action svelte-1frtlim"><input type="text" id="area-filter-text" placeholder="Type area name..." class="flat-left svelte-1frtlim"/> <button class="action-btn flat-right svelte-1frtlim" title="Back to list">âœ•</button></div>'),cs=n("<option> </option>"),_s=n('<select id="area-filter" class="svelte-1frtlim"><option>All Areas</option><!><option>Other (Manual Entry)</option></select>'),us=n('<div class="input-with-action svelte-1frtlim"><input type="text" id="crag-filter-text" placeholder="Type crag name..." class="flat-left svelte-1frtlim"/> <button class="action-btn flat-right svelte-1frtlim" title="Back to list">âœ•</button></div>'),fs=n("<option> </option>"),gs=n('<select id="crag-filter" class="svelte-1frtlim"><option>All Crags</option><!><option>Other (Manual Entry)</option></select>'),ps=n('<input type="text" id="crag-filter-text" class="svelte-1frtlim"/>'),ms=n("<option> </option>"),hs=n('<div class="filter-body svelte-1frtlim"><div class="filter-grid svelte-1frtlim"><div class="filter-item svelte-1frtlim"><label for="start-date" class="svelte-1frtlim">Start Date</label> <input type="date" id="start-date" class="svelte-1frtlim"/></div> <div class="filter-item svelte-1frtlim"><label for="end-date" class="svelte-1frtlim">End Date</label> <input type="date" id="end-date" class="svelte-1frtlim"/></div> <div class="filter-item svelte-1frtlim"><label for="area-filter" class="svelte-1frtlim">Area</label> <!></div> <div class="filter-item svelte-1frtlim"><label for="crag-filter" class="svelte-1frtlim">Crag</label> <!></div> <div class="filter-item svelte-1frtlim"><label for="session-type-filter" class="svelte-1frtlim">Session Type</label> <select id="session-type-filter" class="svelte-1frtlim"><option>Any Type</option><!></select></div> <div class="filter-item svelte-1frtlim"><label for="grade-filter" class="svelte-1frtlim">Grade (Exact)</label> <input type="text" id="grade-filter" placeholder="e.g. 7a" class="svelte-1frtlim"/></div></div> <div class="filter-actions svelte-1frtlim"><button class="reset-btn svelte-1frtlim">Reset Filters</button></div></div>'),ys=n('<div class="filter-container svelte-1frtlim"><button class="filter-header svelte-1frtlim"><div class="header-content svelte-1frtlim"><span class="icon svelte-1frtlim">ğŸ”</span> <span class="title svelte-1frtlim">Filters</span> <!></div></button> <!></div>');function bs(y,s){sa(s,!0);const f=tt(),u=["Projecting","Onsighting","Campusing","Repeaters","Fun","Volume"];let m=P(!1),h=P(""),c=P(""),w=P(""),I=P(""),D=P(""),L=P(""),S=P(!1),q=P(!1),F=fa(()=>e(w)&&e(w)!=="Other"?st(e(w)):[]);function k(){e(w)==="Other"?(v(S,!0),v(w,"")):v(S,!1),v(I,""),v(q,!1),R()}function z(){e(I)==="Other"?(v(q,!0),v(I,"")):v(q,!1),R()}function G(){v(m,!e(m))}function V(){v(h,""),v(c,""),v(w,""),v(I,""),v(D,""),v(L,""),v(S,!1),v(q,!1),R()}function R(){s.onFilterParamsChange({startDate:e(h),endDate:e(c),area:e(w),crag:e(I),sessionType:e(D),grade:e(L)})}var ue=ys(),J=t(ue);J.__click=G;var O=t(J),g=r(t(O),4);{var A=Z=>{var l=vs();i(Z,l)},U=Z=>{var l=os();i(Z,l)};p(g,Z=>{e(m)?Z(A):Z(U,!1)})}a(O),a(J);var H=r(J,2);{var Q=Z=>{var l=hs(),b=t(l),C=t(b),_=r(t(C),2);Ye(_),_.__change=R,a(C);var d=r(C,2),x=r(t(d),2);Ye(x),x.__change=R,a(d);var K=r(d,2),De=r(t(K),2);{var fe=j=>{var X=ds(),ae=t(X);Ye(ae),ae.__input=R;var N=r(ae,2);N.__click=()=>{v(S,!1),v(w,""),R()},a(X),Je(ae,()=>e(w),E=>v(w,E)),i(j,X)},be=j=>{var X=_s();X.__change=k;var ae=t(X);ae.value=ae.__value="";var N=r(ae);ye(N,17,()=>f,we,(ie,ne)=>{var pe=cs(),me=t(pe,!0);a(pe);var Se={};T(()=>{o(me,e(ne)),Se!==(Se=e(ne))&&(pe.value=(pe.__value=e(ne))??"")}),i(ie,pe)});var E=r(N);E.value=E.__value="Other",a(X),wa(X,()=>e(w),ie=>v(w,ie)),i(j,X)};p(De,j=>{e(S)?j(fe):j(be,!1)})}a(K);var _e=r(K,2),te=r(t(_e),2);{var ee=j=>{var X=us(),ae=t(X);Ye(ae),ae.__input=R;var N=r(ae,2);N.__click=()=>{v(q,!1),v(I,""),R()},a(X),Je(ae,()=>e(I),E=>v(I,E)),i(j,X)},de=j=>{var X=Te(),ae=xe(X);{var N=ie=>{var ne=gs();ne.__change=z;var pe=t(ne);pe.value=pe.__value="";var me=r(pe);ye(me,17,()=>e(F),we,(je,ze)=>{var Fe=fs(),Pe=t(Fe,!0);a(Fe);var Ce={};T(()=>{o(Pe,e(ze)),Ce!==(Ce=e(ze))&&(Fe.value=(Fe.__value=e(ze))??"")}),i(je,Fe)});var Se=r(me);Se.value=Se.__value="Other",a(ne),wa(ne,()=>e(I),je=>v(I,je)),i(ie,ne)},E=ie=>{var ne=ps();Ye(ne),ne.__input=R,T(()=>{Ne(ne,"placeholder",e(w)?"Filter crag...":"Select area first"),ne.disabled=!e(S)&&!e(w)}),Je(ne,()=>e(I),pe=>v(I,pe)),i(ie,ne)};p(ae,ie=>{!e(S)&&e(w)&&e(F).length>0?ie(N):ie(E,!1)},!0)}i(j,X)};p(te,j=>{e(q)?j(ee):j(de,!1)})}a(_e);var M=r(_e,2),re=r(t(M),2);re.__change=R;var ge=t(re);ge.value=ge.__value="";var Me=r(ge);ye(Me,17,()=>u,we,(j,X)=>{var ae=ms(),N=t(ae,!0);a(ae);var E={};T(()=>{o(N,e(X)),E!==(E=e(X))&&(ae.value=(ae.__value=e(X))??"")}),i(j,ae)}),a(re),a(M);var Ze=r(M,2),Ie=r(t(Ze),2);Ye(Ie),Ie.__input=R,a(Ze),a(b);var Ke=r(b,2),se=t(Ke);se.__click=V,a(Ke),a(l),Je(_,()=>e(h),j=>v(h,j)),Je(x,()=>e(c),j=>v(c,j)),wa(re,()=>e(D),j=>v(D,j)),Je(Ie,()=>e(L),j=>v(L,j)),He(3,l,()=>ia,()=>({duration:200})),i(Z,l)};p(H,Z=>{e(m)&&Z(Q)})}a(ue),T(()=>Ne(J,"aria-expanded",e(m))),i(y,ue),ra()}Qe(["click","change","input"]);var xs=n('<span class="climb-type-tag svelte-1k6anfh"> </span>'),ws=n('<span class="notes-preview svelte-1k6anfh"> </span>'),Ds=n('<span class="attempts-count svelte-1k6anfh"> </span>'),Ss=n('<div class="detail-row svelte-1k6anfh"><span class="label svelte-1k6anfh">Notes:</span> <p class="notes svelte-1k6anfh"> </p></div>'),qs=n('<p class="empty-notes svelte-1k6anfh">No notes for this climb.</p>'),ks=n('<div class="climb-details svelte-1k6anfh"><!> <div class="tags svelte-1k6anfh"><span class="tag type svelte-1k6anfh"> </span> <span class="tag attempt-text svelte-1k6anfh"> </span></div></div>'),Ts=n('<div><div class="climb-header svelte-1k6anfh" role="button" tabindex="0"><div class="climb-main-info svelte-1k6anfh"><span> </span> <span class="climb-name svelte-1k6anfh"> </span> <!> <!></div> <div class="climb-meta svelte-1k6anfh"><span><span class="icon svelte-1k6anfh"> </span> <!></span> <button class="delete-btn svelte-1k6anfh" aria-label="Delete climb" title="Delete climb">ğŸ—‘ï¸</button> <span class="chevron svelte-1k6anfh"> </span></div></div> <!></div>');function Fs(y,s){sa(s,!0);let f=Ta(s,"showClimbType",3,!1),u=P(!1);function m(){v(u,!e(u))}function h(d){d.stopPropagation(),s.onDelete()}const c={Flash:"âš¡",Onsight:"ğŸ‘ï¸",Redpoint:"ğŸ”´",Dogged:"ğŸ› ï¸",DNF:"âŒ"};var w=Ts();let I;var D=t(w);D.__click=m,D.__keydown=d=>(d.key==="Enter"||d.key===" ")&&m();var L=t(D),S=t(L);let q;var F=t(S,!0);a(S);var k=r(S,2),z=t(k,!0);a(k);var G=r(k,2);{var V=d=>{var x=xs(),K=t(x,!0);a(x),T(()=>o(K,s.climb.isSport?"Sport":"Boulder")),i(d,x)};p(G,d=>{f()&&d(V)})}var R=r(G,2);{var ue=d=>{var x=ws(),K=t(x);a(x),T(()=>o(K,`- ${s.climb.notes??""}`)),i(d,x)};p(R,d=>{!e(u)&&s.climb.notes&&d(ue)})}a(L);var J=r(L,2),O=t(J);let g;var A=t(O),U=t(A,!0);a(A);var H=r(A,2);{var Q=d=>{var x=Ds(),K=t(x,!0);a(x),T(()=>o(K,s.climb.attemptsNum)),i(d,x)};p(H,d=>{s.climb.attemptType!=="Flash"&&s.climb.attemptType!=="Onsight"&&d(Q)})}a(O);var Z=r(O,2);Z.__click=h;var l=r(Z,2),b=t(l,!0);a(l),a(J),a(D);var C=r(D,2);{var _=d=>{var x=ks(),K=t(x);{var De=M=>{var re=Ss(),ge=r(t(re),2),Me=t(ge,!0);a(ge),a(re),T(()=>o(Me,s.climb.notes)),i(M,re)},fe=M=>{var re=qs();i(M,re)};p(K,M=>{s.climb.notes?M(De):M(fe,!1)})}var be=r(K,2),_e=t(be),te=t(_e,!0);a(_e);var ee=r(_e,2),de=t(ee,!0);a(ee),a(be),a(x),T(()=>{o(te,s.climb.isSport?"Sport":"Boulder"),o(de,s.climb.attemptType)}),He(3,x,()=>ia,()=>({duration:150})),i(d,x)};p(C,d=>{e(u)&&d(_)})}a(w),T(()=>{I=Be(w,1,"climb-entry svelte-1k6anfh",null,I,{expanded:e(u)}),Ne(D,"aria-expanded",e(u)),q=Be(S,1,"grade-badge svelte-1k6anfh",null,q,{sport:s.climb.isSport}),o(F,s.climb.grade),o(z,s.climb.name||"Unnamed Route"),g=Be(O,1,"attempt-type svelte-1k6anfh",null,g,{flash:s.climb.attemptType==="Flash"}),o(U,c[s.climb.attemptType]||s.climb.attemptType),o(b,e(u)?"â–²":"â–¼")}),i(y,w),ra()}Qe(["click","keydown"]);var Cs=n('<div class="sector-meta svelte-d5hg2r"> </div>'),zs=n('<span class="stat svelte-d5hg2r"> </span>'),Ls=n('<span class="status-icon pending svelte-d5hg2r" title="Waiting to sync">ğŸ”„</span>'),As=n('<span class="status-icon error svelte-d5hg2r" title="Sync error">âš ï¸</span>'),Es=n('<span class="chip svelte-d5hg2r"> </span>'),Os=n('<span class="text-none svelte-d5hg2r">None</span>'),Ns=n('<div class="detail-item svelte-d5hg2r"><span class="label svelte-d5hg2r">Difficulty</span> <span class="value svelte-d5hg2r"> </span></div>'),Is=n('<span class="chip svelte-d5hg2r"> </span>'),js=n('<span class="text-none svelte-d5hg2r">None</span>'),Rs=n('<div class="detail-item svelte-d5hg2r"><span class="label svelte-d5hg2r">Category</span> <div class="value-chips svelte-d5hg2r"><!></div></div>'),Gs=n('<span class="chip svelte-d5hg2r"> </span>'),Bs=n('<span class="text-none svelte-d5hg2r">None</span>'),Ms=n('<div class="detail-item svelte-d5hg2r"><span class="label svelte-d5hg2r">Focus</span> <div class="value-chips svelte-d5hg2r"><!></div></div>'),Ps=n('<span class="chip svelte-d5hg2r"> </span>'),Vs=n('<span class="text-none svelte-d5hg2r">None</span>'),Ws=n('<div class="detail-item svelte-d5hg2r"><span class="label svelte-d5hg2r">Energy System</span> <div class="value-chips svelte-d5hg2r"><!></div></div>'),Us=n('<p class="no-climbs svelte-d5hg2r">No climbs logged for this session.</p>'),Hs=n('<div class="card-body svelte-d5hg2r"><div class="details-grid svelte-d5hg2r"><div class="detail-item svelte-d5hg2r"><span class="label svelte-d5hg2r">Training Type</span> <div class="value-chips svelte-d5hg2r"><!></div></div> <!> <!> <!> <!></div> <div class="metrics-container svelte-d5hg2r"><div class="metric svelte-d5hg2r"><span class="label svelte-d5hg2r">Finger Load</span> <div class="bar-container svelte-d5hg2r"><div class="bar-fill svelte-d5hg2r"></div></div> <span class="score svelte-d5hg2r"> </span></div> <div class="metric svelte-d5hg2r"><span class="label svelte-d5hg2r">Shoulder Load</span> <div class="bar-container svelte-d5hg2r"><div class="bar-fill svelte-d5hg2r"></div></div> <span class="score svelte-d5hg2r"> </span></div> <div class="metric svelte-d5hg2r"><span class="label svelte-d5hg2r">Forearm Load</span> <div class="bar-container svelte-d5hg2r"><div class="bar-fill svelte-d5hg2r"></div></div> <span class="score svelte-d5hg2r"> </span></div></div> <div class="climbs-list svelte-d5hg2r"><h4 class="svelte-d5hg2r">Climbs</h4> <div class="climbs-container svelte-d5hg2r"><!> <!></div></div></div>'),Zs=n('<div><div class="card-header svelte-d5hg2r" role="button" tabindex="0"><div class="header-main svelte-d5hg2r"><div class="date-badge svelte-d5hg2r"><span class="day svelte-d5hg2r"> </span> <span class="month svelte-d5hg2r"> </span></div> <div class="session-info svelte-d5hg2r"><div class="session-text svelte-d5hg2r"><h3 class="location svelte-d5hg2r"> <!></h3> <!> <div class="session-meta svelte-d5hg2r"><span class="type-tag svelte-d5hg2r"> </span> <span class="stat svelte-d5hg2r"> </span> <!></div></div> <div class="load-summary svelte-d5hg2r"><div class="load-badge finger svelte-d5hg2r"> </div> <div class="load-badge shoulder svelte-d5hg2r"> </div> <div class="load-badge forearm svelte-d5hg2r"> </div></div></div></div> <div class="header-actions svelte-d5hg2r"><div class="header-status svelte-d5hg2r"><!></div> <button class="btn-icon delete-session svelte-d5hg2r" title="Delete Session">ğŸ—‘ï¸</button> <span class="chevron svelte-d5hg2r"> </span></div></div> <!></div> <!>',1);function Ks(y,s){sa(s,!0);let f=P(!1),u=P(!1);function m(){v(f,!e(f))}function h(){v(u,!0)}function c(){za(s.session.id),v(u,!1),s.onDelete()}function w(N){const E=[...s.session.climbs];E.splice(N,1),Ba(s.session.id,{climbs:E}),s.onDelete()}let I=fa(()=>s.session.climbs.length),D=fa(()=>s.session.climbs.reduce((N,E)=>{const ie=parseInt(E.grade.replace(/\D/g,""))||0,ne=parseInt(N.replace(/\D/g,""))||0;return ie>ne?E.grade:N},"V0/4a"));var L=Zs(),S=xe(L);let q;var F=t(S);F.__click=m,F.__keydown=N=>N.key==="Enter"&&m();var k=t(F),z=t(k),G=t(z),V=t(G,!0);a(G);var R=r(G,2),ue=t(R,!0);a(R),a(z);var J=r(z,2),O=t(J),g=t(O),A=t(g),U=r(A);{var H=N=>{var E=ga();T(()=>o(E,`- ${s.session.crag??""}`)),i(N,E)};p(U,N=>{s.session.crag&&N(H)})}a(g);var Q=r(g,2);{var Z=N=>{var E=Cs(),ie=t(E);a(E),T(()=>o(ie,`ğŸ“ ${s.session.sector??""}`)),i(N,E)};p(Q,N=>{s.session.sector&&N(Z)})}var l=r(Q,2),b=t(l),C=t(b,!0);a(b);var _=r(b,2),d=t(_);a(_);var x=r(_,2);{var K=N=>{var E=zs(),ie=t(E);a(E),T(()=>o(ie,`Max: ${e(D)??""}`)),i(N,E)};p(x,N=>{e(I)>0&&N(K)})}a(l),a(O);var De=r(O,2),fe=t(De),be=t(fe,!0);a(fe);var _e=r(fe,2),te=t(_e,!0);a(_e);var ee=r(_e,2),de=t(ee,!0);a(ee),a(De),a(J),a(k);var M=r(k,2),re=t(M),ge=t(re);{var Me=N=>{var E=Ls();i(N,E)},Ze=N=>{var E=Te(),ie=xe(E);{var ne=pe=>{var me=As();i(pe,me)};p(ie,pe=>{s.session.syncStatus==="error"&&pe(ne)},!0)}i(N,E)};p(ge,N=>{s.session.syncStatus==="pending"?N(Me):N(Ze,!1)})}a(re);var Ie=r(re,2);Ie.__click=N=>{N.stopPropagation(),h()};var Ke=r(Ie,2),se=t(Ke,!0);a(Ke),a(M),a(F);var j=r(F,2);{var X=N=>{var E=Hs(),ie=t(E),ne=t(ie),pe=r(t(ne),2),me=t(pe);{var Se=B=>{var Y=Te(),he=xe(Y);ye(he,17,()=>s.session.trainingTypes,we,(oe,W)=>{var ve=Es(),ce=t(ve,!0);a(ve),T(()=>o(ce,e(W))),i(oe,ve)}),i(B,Y)},je=B=>{var Y=Os();i(B,Y)};p(me,B=>{s.session.trainingTypes&&s.session.trainingTypes.length>0&&!s.session.trainingTypes.includes("None")?B(Se):B(je,!1)})}a(pe),a(ne);var ze=r(ne,2);{var Fe=B=>{var Y=Ns(),he=r(t(Y),2),oe=t(he,!0);a(he),a(Y),T(()=>o(oe,s.session.difficulty)),i(B,Y)};p(ze,B=>{s.session.difficulty&&B(Fe)})}var Pe=r(ze,2);{var Ce=B=>{var Y=Rs(),he=r(t(Y),2),oe=t(he);{var W=ce=>{var qe=Te(),We=xe(qe);ye(We,17,()=>s.session.categories,we,(ke,Ue)=>{var ta=Is(),qa=t(ta,!0);a(ta),T(()=>o(qa,e(Ue))),i(ke,ta)}),i(ce,qe)},ve=ce=>{var qe=js();i(ce,qe)};p(oe,ce=>{s.session.categories.length>0&&!s.session.categories.includes("None")?ce(W):ce(ve,!1)})}a(he),a(Y),i(B,Y)};p(Pe,B=>{s.session.categories?.length&&B(Ce)})}var Le=r(Pe,2);{var na=B=>{var Y=Ms(),he=r(t(Y),2),oe=t(he);{var W=ce=>{var qe=Te(),We=xe(qe);ye(We,17,()=>s.session.techniqueFocuses,we,(ke,Ue)=>{var ta=Gs(),qa=t(ta,!0);a(ta),T(()=>o(qa,e(Ue))),i(ke,ta)}),i(ce,qe)},ve=ce=>{var qe=Bs();i(ce,qe)};p(oe,ce=>{s.session.techniqueFocuses.length>0&&!s.session.techniqueFocuses.includes("None")?ce(W):ce(ve,!1)})}a(he),a(Y),i(B,Y)};p(Le,B=>{s.session.techniqueFocuses?.length&&B(na)})}var Ae=r(Le,2);{var Xe=B=>{var Y=Ws(),he=r(t(Y),2),oe=t(he);{var W=ce=>{var qe=Te(),We=xe(qe);ye(We,17,()=>s.session.energySystems,we,(ke,Ue)=>{var ta=Ps(),qa=t(ta,!0);a(ta),T(()=>o(qa,e(Ue))),i(ke,ta)}),i(ce,qe)},ve=ce=>{var qe=Vs();i(ce,qe)};p(oe,ce=>{s.session.energySystems.length>0&&!s.session.energySystems.includes("None")?ce(W):ce(ve,!1)})}a(he),a(Y),i(B,Y)};p(Ae,B=>{s.session.energySystems?.length&&B(Xe)})}a(ie);var Re=r(ie,2),$e=t(Re),la=r(t($e),2),ea=t(la);a(la);var Ee=r(la,2),Ve=t(Ee);a(Ee),a($e);var va=r($e,2),Oe=r(t(va),2),aa=t(Oe);a(Oe);var ca=r(Oe,2),Ge=t(ca);a(ca),a(va);var pa=r(va,2),oa=r(t(pa),2),ma=t(oa);a(oa);var _a=r(oa,2),ba=t(_a);a(_a),a(pa),a(Re);var ha=r(Re,2),xa=r(t(ha),2),ya=t(xa);ye(ya,17,()=>s.session.climbs,we,(B,Y,he)=>{{let oe=fa(()=>s.session.climbingType==="Mixed");Fs(B,{get climb(){return e(Y)},onDelete:()=>w(he),get showClimbType(){return e(oe)}})}});var $=r(ya,2);{var le=B=>{var Y=Us();i(B,Y)};p($,B=>{s.session.climbs.length===0&&B(le)})}a(xa),a(ha),a(E),T(()=>{Da(ea,`width: ${s.session.fingerLoad/5*100}%`),o(Ve,`${s.session.fingerLoad??""}/5`),Da(aa,`width: ${s.session.shoulderLoad/5*100}%`),o(Ge,`${s.session.shoulderLoad??""}/5`),Da(ma,`width: ${s.session.forearmLoad/5*100}%`),o(ba,`${s.session.forearmLoad??""}/5`)}),He(3,E,()=>ia,()=>({duration:200})),i(N,E)};p(j,N=>{e(f)&&N(X)})}a(S);var ae=r(S,2);Ea(ae,{get isOpen(){return e(u)},title:"Delete Session",message:"Are you sure you want to delete this session and all its climbs? This cannot be undone.",onConfirm:c,onCancel:()=>v(u,!1)}),T((N,E)=>{q=Be(S,1,"session-card svelte-d5hg2r",null,q,{expanded:e(f)}),Ne(F,"aria-expanded",e(f)),o(V,N),o(ue,E),o(A,`${s.session.area??""} `),o(C,s.session.climbingType),o(d,`${e(I)??""} climbs`),Ne(fe,"title",`Finger Load: ${s.session.fingerLoad??""}`),o(be,s.session.fingerLoad),Ne(_e,"title",`Shoulder Load: ${s.session.shoulderLoad??""}`),o(te,s.session.shoulderLoad),Ne(ee,"title",`Forearm Load: ${s.session.forearmLoad??""}`),o(de,s.session.forearmLoad),o(se,e(f)?"â–²":"â–¼")},[()=>new Date(s.session.date).getDate(),()=>new Date(s.session.date).toLocaleDateString(void 0,{month:"short"})]),i(y,L),ra()}Qe(["click","keydown"]);var Ys=n('<span class="spinner svelte-1s7jdlh"></span> Fetching...',1),Js=n('<div class="error-banner svelte-1s7jdlh"> </div>'),Qs=n('<small class="svelte-1s7jdlh">Try adjusting your filters.</small>'),Xs=n('<div class="empty-state svelte-1s7jdlh"><p class="svelte-1s7jdlh">No outdoor climbing sessions found.</p> <!></div>'),$s=n('<div class="view-container svelte-1s7jdlh"><div class="view-header svelte-1s7jdlh"><h2 class="view-title svelte-1s7jdlh">â›°ï¸ Outdoor Climbing History</h2> <button class="fetch-btn svelte-1s7jdlh" title="Fetch data from cloud"><!></button></div> <!> <!> <div class="info-bar svelte-1s7jdlh"><div class="legend-wrapper svelte-1s7jdlh"><!></div> <div class="load-key svelte-1s7jdlh"><span class="key-label svelte-1s7jdlh">Load:</span> <div class="key-item svelte-1s7jdlh"><span class="dot finger svelte-1s7jdlh"></span> Finger</div> <div class="key-item svelte-1s7jdlh"><span class="dot shoulder svelte-1s7jdlh"></span> Shoulder</div> <div class="key-item svelte-1s7jdlh"><span class="dot forearm svelte-1s7jdlh"></span> Forearm</div></div></div> <div class="sessions-list"><!> <!></div></div>');function er(y,s){sa(s,!0);let f=P(da([])),u=P(da([])),m=P(!1),h=P(""),c=P(da({startDate:"",endDate:"",area:"",crag:"",sessionType:"",grade:""}));Ma(()=>{w()});function w(){const l=Ca("outdoor_climb");v(f,l.sort((b,C)=>new Date(C.date).getTime()-new Date(b.date).getTime()),!0),S()}async function I(){v(m,!0),v(h,"");try{await La();const l=await rt();l.ok&&l.data?D(l.data):v(h,l.error||"Failed to fetch data",!0)}catch(l){v(h,l instanceof Error?l.message:"Unknown error",!0)}finally{v(m,!1)}}function D(l){const b=l.map(_=>({..._,activityType:"outdoor_climb",createdAt:new Date().toISOString(),updatedAt:new Date().toISOString(),syncStatus:"synced",syncedAt:new Date().toISOString()}));Aa(b);const C=Ca("outdoor_climb");v(f,C.sort((_,d)=>new Date(d.date).getTime()-new Date(_.date).getTime()),!0),S()}function L(l){v(c,l,!0),S()}function S(){v(u,e(f).filter(l=>{if(e(c).startDate&&l.date<e(c).startDate||e(c).endDate&&l.date>e(c).endDate||e(c).area&&!l.area.toLowerCase().includes(e(c).area.toLowerCase())||e(c).crag&&!l.crag.toLowerCase().includes(e(c).crag.toLowerCase())||e(c).sessionType&&!l.trainingTypes?.includes(e(c).sessionType))return!1;if(e(c).grade){const b=e(c).grade.trim().toLowerCase();if(!l.climbs.some(_=>_.grade.trim().toLowerCase()===b))return!1}return!0}),!0)}var q=$s(),F=t(q),k=r(t(F),2);k.__click=I;var z=t(k);{var G=l=>{var b=Ys();Sa(),i(l,b)},V=l=>{var b=ga("â˜ï¸ Fetch Data");i(l,b)};p(z,l=>{e(m)?l(G):l(V,!1)})}a(k),a(F);var R=r(F,2);{var ue=l=>{var b=Js(),C=t(b,!0);a(b),T(()=>o(C,e(h))),He(3,b,()=>ia),i(l,b)};p(R,l=>{e(h)&&l(ue)})}var J=r(R,2);bs(J,{onFilterParamsChange:L});var O=r(J,2),g=t(O),A=t(g);Wa(A),a(g),Sa(2),a(O);var U=r(O,2),H=t(U);ye(H,17,()=>e(u),l=>l.id,(l,b)=>{Ks(l,{get session(){return e(b)},onDelete:w})});var Q=r(H,2);{var Z=l=>{var b=Xs(),C=r(t(b),2);{var _=d=>{var x=Qs();i(d,x)};p(C,d=>{e(f).length>0&&d(_)})}a(b),i(l,b)};p(Q,l=>{e(u).length===0&&l(Z)})}a(U),a(q),T(()=>k.disabled=e(m)),i(y,q),ra()}Qe(["click"]);var ar=n('<div class="view-container svelte-133enjd"><h2 class="view-title svelte-133enjd">ğŸ‹ï¸ Gym Session History</h2> <p class="placeholder-text svelte-133enjd">Your gym sessions will appear here</p></div>');function tr(y){var s=ar();i(y,s)}var sr=n('<span class="spinner svelte-1szs0u9"></span> Fetching...',1),rr=n('<div class="loading svelte-1szs0u9">Loading sessions...</div>'),ir=n('<div class="empty-state svelte-1szs0u9"><!></div>'),nr=n('<span class="set-tag svelte-1szs0u9"> <span class="x svelte-1szs0u9">x</span> </span>'),lr=n('<div class="ex-notes svelte-1szs0u9"> </div>'),vr=n('<div class="exercise-item svelte-1szs0u9"><div class="ex-header svelte-1szs0u9"><span class="ex-name svelte-1szs0u9"> </span> <span class="ex-grip svelte-1szs0u9"> </span></div> <div class="ex-sets svelte-1szs0u9"></div> <!></div>'),or=n('<div class="card-body svelte-1szs0u9"><div class="exercises-list svelte-1szs0u9"></div></div>'),dr=n('<div><div class="card-header" role="button" tabindex="0"><div class="header-main"><span class="session-date svelte-1szs0u9"> </span> <span class="meta svelte-1szs0u9"><!> </span></div> <div class="header-status svelte-1szs0u9"><span>â—</span> <button class="btn-icon delete-btn svelte-1szs0u9" title="Delete Session">ğŸ—‘ï¸</button> <span class="chevron svelte-1szs0u9"> </span></div></div> <!></div>'),cr=n('<div class="timeline svelte-1szs0u9"></div>'),_r=n('<div class="view-content svelte-1szs0u9"><div class="header svelte-1szs0u9"><h3 class="svelte-1szs0u9">ğŸ¤ Fingerboarding Log</h3> <button class="fetch-btn svelte-1szs0u9" title="Fetch data from cloud"><!></button></div> <div class="filters svelte-1szs0u9"><div class="filter-group svelte-1szs0u9"><label for="start-date" class="svelte-1szs0u9">From</label> <input type="date" id="start-date" class="svelte-1szs0u9"/></div> <div class="filter-group svelte-1szs0u9"><label for="end-date" class="svelte-1szs0u9">To</label> <input type="date" id="end-date" class="svelte-1szs0u9"/></div></div> <!></div> <!>',1);function ur(y,s){sa(s,!0);let f=P(da([])),u=P(!0),m=P(""),h=P(""),c=P(da(new Set)),w=P(!1),I=P(null);function D(_){v(I,_,!0),v(w,!0)}function L(){e(I)&&(za(e(I)),v(I,null),v(w,!1),v(f,Oa().sort((_,d)=>new Date(d.date).getTime()-new Date(_.date).getTime()),!0))}async function S(){v(u,!0),v(f,Oa().sort((_,d)=>new Date(d.date).getTime()-new Date(_.date).getTime()),!0);try{await La();const _=await it();if(_.ok&&_.data){const d=_.data.map(x=>({...x,activityType:"fingerboarding",createdAt:x.createdAt||new Date().toISOString(),updatedAt:x.updatedAt||new Date().toISOString(),syncStatus:"synced"}));Aa(d),v(f,Oa().sort((x,K)=>new Date(K.date).getTime()-new Date(x.date).getTime()),!0)}}catch(_){console.error("Failed to sync",_)}finally{v(u,!1)}}S();let q=fa(()=>e(f).filter(_=>!(e(m)&&new Date(_.date)<new Date(e(m))||e(h)&&new Date(_.date)>new Date(e(h)))));function F(_){e(c).has(_)?e(c).delete(_):e(c).add(_),v(c,new Set(e(c)),!0)}function k(_){return _.exercises.reduce((d,x)=>d+x.details.length,0)}var z=_r(),G=xe(z),V=t(G),R=r(t(V),2);R.__click=S;var ue=t(R);{var J=_=>{var d=sr();Sa(),i(_,d)},O=_=>{var d=ga("â˜ï¸ Fetch Data");i(_,d)};p(ue,_=>{e(u)?_(J):_(O,!1)})}a(R),a(V);var g=r(V,2),A=t(g),U=r(t(A),2);Ye(U),a(A);var H=r(A,2),Q=r(t(H),2);Ye(Q),a(H),a(g);var Z=r(g,2);{var l=_=>{var d=rr();i(_,d)},b=_=>{var d=Te(),x=xe(d);{var K=fe=>{var be=ir(),_e=t(be);{var te=de=>{var M=ga("No sessions match filter.");i(de,M)},ee=de=>{var M=ga("No fingerboarding sessions logged yet.");i(de,M)};p(_e,de=>{e(f).length>0?de(te):de(ee,!1)})}a(be),i(fe,be)},De=fe=>{var be=cr();ye(be,21,()=>e(q),we,(_e,te)=>{var ee=dr();let de;var M=t(ee);M.__click=()=>F(e(te).id),M.__keydown=me=>me.key==="Enter"&&F(e(te).id);var re=t(M),ge=t(re),Me=t(ge,!0);a(ge);var Ze=r(ge,2),Ie=t(Ze);{var Ke=me=>{var Se=ga();T(()=>o(Se,`${e(te).location??""} Â·`)),i(me,Se)};p(Ie,me=>{e(te).location&&e(te).location!=="N/A"&&e(te).location!=="Home"&&me(Ke)})}var se=r(Ie);a(Ze),a(re);var j=r(re,2),X=t(j);let ae;var N=r(X,2);N.__click=me=>{me.stopPropagation(),D(e(te).id)};var E=r(N,2),ie=t(E,!0);a(E),a(j),a(M);var ne=r(M,2);{var pe=me=>{var Se=or(),je=t(Se);ye(je,21,()=>e(te).exercises,we,(ze,Fe)=>{var Pe=vr(),Ce=t(Pe),Le=t(Ce),na=t(Le,!0);a(Le);var Ae=r(Le,2),Xe=t(Ae,!0);a(Ae),a(Ce);var Re=r(Ce,2);ye(Re,21,()=>e(Fe).details,we,(ea,Ee)=>{var Ve=nr(),va=t(Ve),Oe=r(va,2);a(Ve),T(()=>{o(va,`${e(Ee).weight>0?`+${e(Ee).weight}kg`:"BW"} `),o(Oe,` ${e(Ee).reps??""}s/reps`)}),i(ea,Ve)}),a(Re);var $e=r(Re,2);{var la=ea=>{var Ee=lr(),Ve=t(Ee);a(Ee),T(()=>o(Ve,`"${e(Fe).notes??""}"`)),i(ea,Ee)};p($e,ea=>{e(Fe).notes&&ea(la)})}a(Pe),T(()=>{o(na,e(Fe).name),o(Xe,e(Fe).gripType)}),i(ze,Pe)}),a(je),a(Se),He(3,Se,()=>ia,()=>({duration:200})),i(me,Se)};p(ne,me=>{e(c).has(e(te).id)&&me(pe)})}a(ee),T((me,Se,je,ze)=>{de=Be(ee,1,"session-card",null,de,me),o(Me,Se),o(se,` ${e(te).exercises.length??""} Exercises Â· ${je??""} Sets`),ae=Be(X,1,"sync-dot svelte-1szs0u9",null,ae,{synced:e(te).syncStatus==="synced"}),Ne(X,"title",e(te).syncStatus==="synced"?"Synced":"Local"),o(ie,ze)},[()=>({expanded:e(c).has(e(te).id)}),()=>new Date(e(te).date).toLocaleDateString(void 0,{weekday:"short",month:"short",day:"numeric"}),()=>k(e(te)),()=>e(c).has(e(te).id)?"â–²":"â–¼"]),i(_e,ee)}),a(be),i(fe,be)};p(x,fe=>{e(q).length===0?fe(K):fe(De,!1)},!0)}i(_,d)};p(Z,_=>{e(u)&&e(f).length===0?_(l):_(b,!1)})}a(G);var C=r(G,2);Ea(C,{get isOpen(){return e(w)},title:"Delete Fingerboard Session",message:"Are you sure you want to delete this session? This cannot be undone.",onConfirm:L,onCancel:()=>v(w,!1)}),T(()=>R.disabled=e(u)),Je(U,()=>e(m),_=>v(m,_)),Je(Q,()=>e(h),_=>v(h,_)),i(y,z),ra()}Qe(["click","keydown"]);var fr=n('<span class="spinner svelte-xyvf5r"></span> Fetching...',1),gr=n('<div class="loading svelte-xyvf5r">Loading sessions...</div>'),pr=n('<div class="empty-state svelte-xyvf5r">No competitions logged yet.</div>'),mr=n('<span class="round-pos svelte-xyvf5r"> </span>'),hr=n('<span class="c-attempts svelte-xyvf5r"> </span>'),yr=n('<div class="climb-notes svelte-xyvf5r"> </div>'),br=n('<div class="climb-row svelte-xyvf5r"><div class="climb-info svelte-xyvf5r"><span class="c-name svelte-xyvf5r"> </span> <!></div> <div class="climb-result"><span> </span></div></div> <!>',1),xr=n('<div class="climbs-list"></div>'),wr=n('<div class="round-item svelte-xyvf5r"><div class="round-header svelte-xyvf5r"><span class="round-name"> </span> <!></div> <!></div>'),Dr=n('<div class="rounds-list svelte-xyvf5r"></div>'),Sr=n('<div class="load-meta svelte-xyvf5r"><span> </span></div>'),qr=n('<div class="card-body svelte-xyvf5r"><!> <!> <div class="session-footer svelte-xyvf5r"><span> </span></div></div>'),kr=n('<div><div class="card-header svelte-xyvf5r" role="button" tabindex="0"><div class="header-main svelte-xyvf5r"><div class="left-col svelte-xyvf5r"><span class="venue svelte-xyvf5r"> </span> <span class="date svelte-xyvf5r"> </span></div> <div class="right-col svelte-xyvf5r"><div class="badges svelte-xyvf5r"><span class="type-tag svelte-xyvf5r"> </span> <span class="result-tag svelte-xyvf5r"> </span></div></div></div> <div class="header-status svelte-xyvf5r"><span>â—</span> <button class="btn-icon delete-btn svelte-xyvf5r" title="Delete Session">ğŸ—‘ï¸</button> <span class="chevron svelte-xyvf5r"> </span></div></div> <!></div>'),Tr=n('<div class="timeline svelte-xyvf5r"></div>'),Fr=n('<div class="view-content svelte-xyvf5r"><div class="header svelte-xyvf5r"><h3 class="svelte-xyvf5r">ğŸ† Competition Log</h3> <button class="fetch-btn svelte-xyvf5r" title="Fetch data from cloud"><!></button></div> <!> <!></div>');function Cr(y,s){sa(s,!0);let f=P(da([])),u=P(!0),m=P(da(new Set)),h=P(!1),c=P(null);function w(g){v(c,g,!0),v(h,!0)}function I(){e(c)&&(za(e(c)),v(c,null),v(h,!1),v(f,Na().sort((g,A)=>new Date(A.date).getTime()-new Date(g.date).getTime()),!0))}async function D(){v(u,!0),v(f,Na().sort((g,A)=>new Date(A.date).getTime()-new Date(g.date).getTime()),!0);try{await La();const g=await nt();if(g.ok&&g.data){const A=g.data.map(U=>({...U,activityType:"competition",type:U.type,rounds:U.rounds.map(H=>({...H,climbs:H.climbs?.map(Q=>({...Q,status:Q.status}))})),createdAt:U.createdAt||new Date().toISOString(),updatedAt:U.updatedAt||new Date().toISOString(),syncStatus:"synced"}));Aa(A),v(f,Na().sort((U,H)=>new Date(H.date).getTime()-new Date(U.date).getTime()),!0)}}catch(g){console.error("Failed to sync",g)}finally{v(u,!1)}}D();function L(g){e(m).has(g)?e(m).delete(g):e(m).add(g),v(m,new Set(e(m)),!0)}function S(g){if(!g.rounds||g.rounds.length===0)return"No rounds";const A=g.rounds[g.rounds.length-1];if(A.position)return`#${A.position} ${A.name}`;if(A.climbs){const U=A.climbs.filter(Q=>Q.status==="Top"||Q.status==="Flash").length,H=A.climbs.filter(Q=>Q.status==="Zone").length;return`${g.rounds.length} Rnds Â· Final: ${U}T ${H+U}Z`}return A.name}var q=Fr(),F=t(q),k=r(t(F),2);k.__click=D;var z=t(k);{var G=g=>{var A=fr();Sa(),i(g,A)},V=g=>{var A=ga("â˜ï¸ Fetch Data");i(g,A)};p(z,g=>{e(u)?g(G):g(V,!1)})}a(k),a(F);var R=r(F,2);{var ue=g=>{var A=gr();i(g,A)},J=g=>{var A=Te(),U=xe(A);{var H=Z=>{var l=pr();i(Z,l)},Q=Z=>{var l=Tr();ye(l,21,()=>e(f),we,(b,C)=>{var _=kr();let d;var x=t(_);x.__click=()=>L(e(C).id),x.__keydown=E=>E.key==="Enter"&&L(e(C).id);var K=t(x),De=t(K),fe=t(De),be=t(fe,!0);a(fe);var _e=r(fe,2),te=t(_e,!0);a(_e),a(De);var ee=r(De,2),de=t(ee),M=t(de),re=t(M,!0);a(M);var ge=r(M,2),Me=t(ge,!0);a(ge),a(de),a(ee),a(K);var Ze=r(K,2),Ie=t(Ze);let Ke;var se=r(Ie,2);se.__click=E=>{E.stopPropagation(),w(e(C).id)};var j=r(se,2),X=t(j,!0);a(j),a(Ze),a(x);var ae=r(x,2);{var N=E=>{var ie=qr(),ne=t(ie);{var pe=Ce=>{var Le=Dr();ye(Le,21,()=>e(C).rounds,we,(na,Ae)=>{var Xe=wr(),Re=t(Xe),$e=t(Re),la=t($e,!0);a($e);var ea=r($e,2);{var Ee=Oe=>{var aa=mr(),ca=t(aa);a(aa),T(()=>o(ca,`#${e(Ae).position??""}`)),i(Oe,aa)};p(ea,Oe=>{e(Ae).position&&Oe(Ee)})}a(Re);var Ve=r(Re,2);{var va=Oe=>{var aa=xr();ye(aa,21,()=>e(Ae).climbs,we,(ca,Ge)=>{var pa=br(),oa=xe(pa),ma=t(oa),_a=t(ma),ba=t(_a,!0);a(_a);var ha=r(_a,2);{var xa=oe=>{var W=hr(),ve=t(W);a(W),T(()=>o(ve,`(${e(Ge).attemptCount??""} tries)`)),i(oe,W)};p(ha,oe=>{e(Ge).attemptCount>1&&oe(xa)})}a(ma);var ya=r(ma,2),$=t(ya);let le;var B=t($,!0);a($),a(ya),a(oa);var Y=r(oa,2);{var he=oe=>{var W=yr(),ve=t(W);a(W),T(()=>o(ve,`"${e(Ge).notes??""}"`)),i(oe,W)};p(Y,oe=>{e(Ge).notes&&oe(he)})}T(()=>{o(ba,e(Ge).name),le=Be($,1,"status-badge svelte-xyvf5r",null,le,{top:e(Ge).status==="Top"||e(Ge).status==="Flash",zone:e(Ge).status==="Zone"}),o(B,e(Ge).status)}),i(ca,pa)}),a(aa),i(Oe,aa)};p(Ve,Oe=>{e(Ae).climbs&&Oe(va)})}a(Xe),T(()=>o(la,e(Ae).name)),i(na,Xe)}),a(Le),i(Ce,Le)};p(ne,Ce=>{e(C).rounds&&Ce(pe)})}var me=r(ne,2);{var Se=Ce=>{var Le=Sr(),na=t(Le),Ae=t(na);a(na),a(Le),T(()=>o(Ae,`Detailed Load: Fingers ${e(C).fingerLoad??""}/5, Shoulders ${e(C).shoulderLoad??""}/5, Forearms ${e(C).forearmLoad??""}/5`)),i(Ce,Le)};p(me,Ce=>{(e(C).fingerLoad||e(C).shoulderLoad)&&Ce(Se)})}var je=r(me,2),ze=t(je);let Fe;var Pe=t(ze,!0);a(ze),a(je),a(ie),T(()=>{Fe=Be(ze,1,"sync-status svelte-xyvf5r",null,Fe,{synced:e(C).syncStatus==="synced"}),o(Pe,e(C).syncStatus==="synced"?"âœ“ Synced":"â˜ Local")}),He(3,ie,()=>ia,()=>({duration:200})),i(E,ie)};p(ae,E=>{e(m).has(e(C).id)&&E(N)})}a(_),T((E,ie,ne,pe)=>{d=Be(_,1,"session-card svelte-xyvf5r",null,d,E),o(be,e(C).customVenue||e(C).venue),o(te,ie),o(re,e(C).type),o(Me,ne),Ke=Be(Ie,1,"sync-dot",null,Ke,{synced:e(C).syncStatus==="synced"}),Ne(Ie,"title",e(C).syncStatus==="synced"?"Synced":"Local"),o(X,pe)},[()=>({expanded:e(m).has(e(C).id)}),()=>new Date(e(C).date).toLocaleDateString(void 0,{weekday:"short",day:"numeric",month:"short"}),()=>S(e(C)),()=>e(m).has(e(C).id)?"â–²":"â–¼"]),i(b,_)}),a(l),i(Z,l)};p(U,Z=>{e(f).length===0?Z(H):Z(Q,!1)},!0)}i(g,A)};p(R,g=>{e(u)&&e(f).length===0?g(ue):g(J,!1)})}var O=r(R,2);Ea(O,{get isOpen(){return e(h)},title:"Delete Competition",message:"Are you sure you want to delete this competition session? This action cannot be undone.",onConfirm:I,onCancel:()=>v(h,!1)}),a(q),T(()=>k.disabled=e(u)),i(y,q),ra()}Qe(["click","keydown"]);var zr=n("<option> </option>"),Lr=n('<div class="view-container svelte-108px9u"><!></div>'),Ar=n('<div class="page svelte-108px9u"><div class="page-header svelte-108px9u"><h1 class="svelte-108px9u">ğŸ“Š View Data</h1> <p class="subtitle svelte-108px9u">Browse your training history</p></div> <div class="content-card svelte-108px9u"><div class="form-group svelte-108px9u"><label for="activity-type" class="svelte-108px9u">Activity Type</label> <select id="activity-type" class="svelte-108px9u"><option disabled>Select an activity...</option><!></select></div> <!></div></div>');function Vr(y){const s=[{value:"indoor_climb",label:"Indoor Climb",icon:"ğŸ§—"},{value:"outdoor_climb",label:"Outdoor Climb",icon:"â›°ï¸"},{value:"gym_session",label:"Gym Session",icon:"ğŸ‹ï¸"},{value:"fingerboarding",label:"Fingerboarding",icon:"ğŸ¤"},{value:"competition",label:"Competition",icon:"ğŸ†"}];let f=P("");var u=Ar(),m=r(t(u),2),h=t(m),c=r(t(h),2),w=t(c);w.value=w.__value="";var I=r(w);ye(I,17,()=>s,S=>S.value,(S,q)=>{var F=zr(),k=t(F);a(F);var z={};T(()=>{o(k,`${e(q).icon??""} ${e(q).label??""}`),z!==(z=e(q).value)&&(F.value=(F.__value=e(q).value)??"")}),i(S,F)}),a(c),a(h);var D=r(h,2);{var L=S=>{var q=Lr(),F=t(q);{var k=G=>{ls(G,{})},z=G=>{var V=Te(),R=xe(V);{var ue=O=>{er(O,{})},J=O=>{var g=Te(),A=xe(g);{var U=Q=>{tr(Q)},H=Q=>{var Z=Te(),l=xe(Z);{var b=_=>{ur(_,{})},C=_=>{var d=Te(),x=xe(d);{var K=De=>{Cr(De,{})};p(x,De=>{e(f)==="competition"&&De(K)},!0)}i(_,d)};p(l,_=>{e(f)==="fingerboarding"?_(b):_(C,!1)},!0)}i(Q,Z)};p(A,Q=>{e(f)==="gym_session"?Q(U):Q(H,!1)},!0)}i(O,g)};p(R,O=>{e(f)==="outdoor_climb"?O(ue):O(J,!1)},!0)}i(G,V)};p(F,G=>{e(f)==="indoor_climb"?G(k):G(z,!1)})}a(q),i(S,q)};p(D,S=>{e(f)&&S(L)})}a(m),a(u),wa(c,()=>e(f),S=>v(f,S)),i(y,u)}export{Vr as component};
