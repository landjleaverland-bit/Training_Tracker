import{f as n,a as r,c as Re,t as Sa}from"../chunks/DlIpowWv.js";import{a2 as ss,k as ts,p as Ke,c as a,s as t,g as s,e as O,r as e,t as u,a as Qe,d as v,f as Pe,aM as Xe,A as ga,o as Ka,as as Pa,b8 as $a,j as is}from"../chunks/BSXnj9bA.js";import{d as Ze,s as l,e as rs}from"../chunks/DY3SdbM1.js";import{i as d}from"../chunks/Bnb5Vf_a.js";import{i as Ue,r as sa,e as qe,j as Me}from"../chunks/DBB2y30b.js";import{c as ta,b as ka,q as ns,h as je,r as ls,t as vs,v as os,w as ds,j as cs,x as _s,y as gs,z as us,A as fs}from"../chunks/BHK6Hdfp.js";import{t as ra,s as la,I as ps,f as ms,O as hs,G as bs,F as ys,C as xs,D as Ja,g as ws,a as ks,E as Ss}from"../chunks/CCAwI-3L.js";import{s as ia}from"../chunks/C5lbgwQY.js";import{i as Ua}from"../chunks/BaP_aK8k.js";import{p as es}from"../chunks/DrybqwuO.js";function qs(_e,i,m){ss(()=>{var f=ts(()=>i(_e,m?.())||{});if(f?.destroy)return()=>f.destroy()})}var Ds=n('<span class="chevron svelte-12crvy">‚ñ≤</span>'),Ts=n('<span class="chevron svelte-12crvy">‚ñº</span>'),Cs=n('<div class="input-with-action svelte-12crvy"><input type="text" id="location-manual" placeholder="Custom location..." class="flat-left svelte-12crvy"/> <button type="button" class="action-btn flat-right svelte-12crvy" title="Back to list">‚úï</button></div>'),Fs=n("<option> </option>"),Es=n('<select id="location-filter" class="svelte-12crvy"><option>Any Location</option><!></select>'),Ls=n("<option> </option>"),zs=n("<option> </option>"),Gs=n('<div class="filter-body svelte-12crvy"><div class="filter-grid svelte-12crvy"><div class="filter-item svelte-12crvy"><label for="start-date" class="svelte-12crvy">Start Date</label> <input type="date" id="start-date" class="svelte-12crvy"/></div> <div class="filter-item svelte-12crvy"><label for="end-date" class="svelte-12crvy">End Date</label> <input type="date" id="end-date" class="svelte-12crvy"/></div> <div class="filter-item svelte-12crvy"><label for="location-filter" class="svelte-12crvy">Location</label> <!></div> <div class="filter-item svelte-12crvy"><label for="climbing-type-filter" class="svelte-12crvy">Climb Type</label> <select id="climbing-type-filter" class="svelte-12crvy"><option>Any Type</option><!></select></div> <div class="filter-item svelte-12crvy"><label for="session-type-filter" class="svelte-12crvy">Session Type</label> <select id="session-type-filter" class="svelte-12crvy"><option>Any Type</option><!></select></div> <div class="filter-item svelte-12crvy"><label for="grade-filter" class="svelte-12crvy">Grade (Exact)</label> <input type="text" id="grade-filter" placeholder="e.g. V4" class="svelte-12crvy"/></div></div> <div class="filter-actions svelte-12crvy"><button class="reset-btn svelte-12crvy">Reset Filters</button></div></div>'),js=n('<div class="filter-container svelte-12crvy"><button class="filter-header svelte-12crvy"><div class="header-content svelte-12crvy"><span class="icon svelte-12crvy">üîç</span> <span class="title svelte-12crvy">Filters</span> <!></div></button> <!></div>');function Ms(_e,i){Ke(i,!0);const m=["Rockstar Swindon","Flashpoint Swindon","Flashpoint Bristol","Redpoint Bristol","TCH Bristol","Other"],f=["Bouldering","Sport","Mixed"],S=["Projecting","Onsighting","Campusing","Repeaters"];let D=O(!1),g=O(""),j=O(""),p=O(""),F=O(""),J=O(""),I=O(""),te=O(!1);function N(){v(D,!s(D))}function R(){v(g,""),v(j,""),v(p,""),v(F,""),v(te,!1),v(J,""),v(I,""),w()}function w(){i.onFilterParamsChange({startDate:s(g),endDate:s(j),location:s(p),climbingType:s(F),sessionType:s(J),grade:s(I)})}function K(){s(p)==="Other"?(v(te,!0),v(p,"")):w()}function q(){v(te,!1),v(p,""),w()}var E=js(),B=a(E);B.__click=N;var L=a(B),Q=t(a(L),4);{var H=k=>{var A=Ds();r(k,A)},ie=k=>{var A=Ts();r(k,A)};d(Q,k=>{s(D)?k(H):k(ie,!1)})}e(L),e(B);var de=t(B,2);{var ne=k=>{var A=Gs(),Y=a(A),Z=a(Y),_=t(a(Z),2);sa(_),_.__change=w,e(Z);var h=t(Z,2),P=t(a(h),2);sa(P),P.__change=w,e(h);var o=t(h,2),c=t(a(o),2);{var b=ue=>{var he=Cs(),be=a(he);sa(be),be.__input=w;var Ee=t(be,2);Ee.__click=q,e(he),ta(be,()=>s(p),we=>v(p,we)),r(ue,he)},G=ue=>{var he=Es();he.__change=K;var be=a(he);be.value=be.__value="";var Ee=t(be);qe(Ee,17,()=>m,Me,(we,ze)=>{var Te=Fs(),V=a(Te,!0);e(Te);var re={};u(()=>{l(V,s(ze)),re!==(re=s(ze))&&(Te.value=(Te.__value=s(ze))??"")}),r(we,Te)}),e(he),ka(he,()=>s(p),we=>v(p,we)),r(ue,he)};d(c,ue=>{s(te)?ue(b):ue(G,!1)})}e(o);var ge=t(o,2),T=t(a(ge),2);T.__change=w;var $=a(T);$.value=$.__value="";var me=t($);qe(me,17,()=>f,Me,(ue,he)=>{var be=Ls(),Ee=a(be,!0);e(be);var we={};u(()=>{l(Ee,s(he)),we!==(we=s(he))&&(be.value=(be.__value=s(he))??"")}),r(ue,be)}),e(T),e(ge);var De=t(ge,2),xe=t(a(De),2);xe.__change=w;var Fe=a(xe);Fe.value=Fe.__value="";var ee=t(Fe);qe(ee,17,()=>S,Me,(ue,he)=>{var be=zs(),Ee=a(be,!0);e(be);var we={};u(()=>{l(Ee,s(he)),we!==(we=s(he))&&(be.value=(be.__value=s(he))??"")}),r(ue,be)}),e(xe),e(De);var ae=t(De,2),ye=t(a(ae),2);sa(ye),ye.__input=w,e(ae),e(Y);var Ne=t(Y,2),Be=a(Ne);Be.__click=R,e(Ne),e(A),ta(_,()=>s(g),ue=>v(g,ue)),ta(P,()=>s(j),ue=>v(j,ue)),ka(T,()=>s(F),ue=>v(F,ue)),ka(xe,()=>s(J),ue=>v(J,ue)),ta(ye,()=>s(I),ue=>v(I,ue)),ra(3,A,()=>la,()=>({duration:200})),r(k,A)};d(de,k=>{s(D)&&k(ne)})}e(E),u(()=>Ue(B,"aria-expanded",s(D))),r(_e,E),Qe()}Ze(["click","change","input"]);var Os=n('<span class="climb-type-tag svelte-yz0xxt"> </span>'),Ns=n('<span class="notes-preview svelte-yz0xxt"> </span>'),As=n('<span class="wall-tag svelte-yz0xxt"> </span>'),Ps=n('<span class="technique-tag svelte-yz0xxt"> </span>'),Bs=n('<span class="attempts-count svelte-yz0xxt"> </span>'),Is=n('<div class="detail-row svelte-yz0xxt"><span class="label svelte-yz0xxt">Notes:</span> <p class="notes svelte-yz0xxt"> </p></div>'),Rs=n('<p class="empty-notes svelte-yz0xxt">No notes for this climb.</p>'),Vs=n('<div class="climb-details svelte-yz0xxt"><!> <div class="tags svelte-yz0xxt"><span class="tag type svelte-yz0xxt"> </span> <span class="tag attempt-text svelte-yz0xxt"> </span></div></div>'),Us=n('<div><div class="climb-header svelte-yz0xxt" role="button" tabindex="0"><div class="climb-main-info svelte-yz0xxt"><span> </span> <span class="climb-name svelte-yz0xxt"> </span> <!> <!> <!> <!></div> <div class="climb-meta svelte-yz0xxt"><span><span class="icon svelte-yz0xxt"> </span> <!></span> <span class="chevron svelte-yz0xxt"> </span></div></div> <!></div>');function Ws(_e,i){Ke(i,!0);let m=es(i,"showClimbType",3,!1),f=O(!1);function S(){v(f,!s(f))}const D={Flash:"‚ö°",Onsight:"üëÅÔ∏è",Redpoint:"üî¥",Dogged:"üõ†Ô∏è",DNF:"‚ùå"};var g=Us();let j;var p=a(g);p.__click=S,p.__keydown=c=>(c.key==="Enter"||c.key===" ")&&S();var F=a(p),J=a(F);let I;var te=a(J,!0);e(J);var N=t(J,2),R=a(N,!0);e(N);var w=t(N,2);{var K=c=>{var b=Os(),G=a(b,!0);e(b),u(()=>l(G,i.climb.isSport?"Sport":"Boulder")),r(c,b)};d(w,c=>{m()&&c(K)})}var q=t(w,2);{var E=c=>{var b=Ns(),G=a(b);e(b),u(()=>l(G,`- ${i.climb.notes??""}`)),r(c,b)};d(q,c=>{!s(f)&&i.climb.notes&&c(E)})}var B=t(q,2);{var L=c=>{var b=As(),G=a(b,!0);e(b),u(()=>l(G,i.climb.wall)),r(c,b)};d(B,c=>{i.climb.wall&&c(L)})}var Q=t(B,2);{var H=c=>{var b=Ps(),G=a(b,!0);e(b),u(()=>l(G,i.climb.techniqueFocus)),r(c,b)};d(Q,c=>{i.climb.techniqueFocus&&c(H)})}e(F);var ie=t(F,2),de=a(ie);let ne;var k=a(de),A=a(k,!0);e(k);var Y=t(k,2);{var Z=c=>{var b=Bs(),G=a(b,!0);e(b),u(()=>l(G,i.climb.attemptsNum)),r(c,b)};d(Y,c=>{i.climb.attemptType!=="Flash"&&i.climb.attemptType!=="Onsight"&&c(Z)})}e(de);var _=t(de,2),h=a(_,!0);e(_),e(ie),e(p);var P=t(p,2);{var o=c=>{var b=Vs(),G=a(b);{var ge=ee=>{var ae=Is(),ye=t(a(ae),2),Ne=a(ye,!0);e(ye),e(ae),u(()=>l(Ne,i.climb.notes)),r(ee,ae)},T=ee=>{var ae=Rs();r(ee,ae)};d(G,ee=>{i.climb.notes?ee(ge):ee(T,!1)})}var $=t(G,2),me=a($),De=a(me,!0);e(me);var xe=t(me,2),Fe=a(xe,!0);e(xe),e($),e(b),u(()=>{l(De,i.climb.isSport?"Sport":"Boulder"),l(Fe,i.climb.attemptType)}),ra(3,b,()=>la,()=>({duration:150})),r(c,b)};d(P,c=>{s(f)&&c(o)})}e(g),u(()=>{j=ia(g,1,"climb-entry svelte-yz0xxt",null,j,{expanded:s(f)}),Ue(p,"aria-expanded",s(f)),I=ia(J,1,"grade-badge svelte-yz0xxt",null,I,{sport:i.climb.isSport}),l(te,i.climb.grade),l(R,i.climb.name||"Unnamed Route"),ne=ia(de,1,"attempt-type svelte-yz0xxt",null,ne,{flash:i.climb.attemptType==="Flash"}),l(A,D[i.climb.attemptType]||i.climb.attemptType),l(h,s(f)?"‚ñ≤":"‚ñº")}),r(_e,g),Qe()}Ze(["click","keydown"]);var Hs=n('<dialog class="edit-dialog svelte-1kpd5rv"><div class="dialog-content svelte-1kpd5rv"><div class="modal-header svelte-1kpd5rv"><h2 class="svelte-1kpd5rv">Edit Session</h2> <button class="close-btn svelte-1kpd5rv">&times;</button></div> <div class="modal-body svelte-1kpd5rv"><!></div></div></dialog>');function Ya(_e,i){Ke(i,!0);function m(g){return g.showModal(),{destroy(){g.open&&g.close()}}}var f=Re(),S=Pe(f);{var D=g=>{var j=Hs();j.__click=w=>{w.target===w.currentTarget&&i.onClose()};var p=a(j);p.__click=w=>w.stopPropagation();var F=a(p),J=t(a(F),2);J.__click=function(...w){i.onClose?.apply(this,w)},e(F);var I=t(F,2),te=a(I);{var N=w=>{ps(w,{get initialData(){return i.initialData},get onCancel(){return i.onClose},get onSaved(){return i.onSaved}})},R=w=>{var K=Re(),q=Pe(K);{var E=L=>{hs(L,{get initialData(){return i.initialData},get onCancel(){return i.onClose},get onSaved(){return i.onSaved}})},B=L=>{var Q=Re(),H=Pe(Q);{var ie=ne=>{bs(ne,{get initialData(){return i.initialData},get onCancel(){return i.onClose},get onSaved(){return i.onSaved}})},de=ne=>{var k=Re(),A=Pe(k);{var Y=_=>{ys(_,{get initialData(){return i.initialData},get onCancel(){return i.onClose},get onSaved(){return i.onSaved}})},Z=_=>{var h=Re(),P=Pe(h);{var o=c=>{xs(c,{get initialData(){return i.initialData},get onCancel(){return i.onClose},get onSaved(){return i.onSaved}})};d(P,c=>{i.activityType==="competition"&&c(o)},!0)}r(_,h)};d(A,_=>{i.activityType==="fingerboarding"?_(Y):_(Z,!1)},!0)}r(ne,k)};d(H,ne=>{i.activityType==="gym_session"?ne(ie):ne(de,!1)},!0)}r(L,Q)};d(q,L=>{i.activityType==="outdoor_climb"?L(E):L(B,!1)},!0)}r(w,K)};d(te,w=>{i.activityType==="indoor_climb"?w(N):w(R,!1)})}e(I),e(p),e(j),qs(j,w=>m?.(w)),rs("close",j,function(...w){i.onClose?.apply(this,w)}),ra(3,p,()=>ms,()=>({duration:250,y:50,opacity:0})),r(g,j)};d(S,g=>{i.isOpen&&g(D)})}r(_e,f),Qe()}Ze(["click"]);var Js=n('<span class="stat svelte-7vqogn"> </span>'),Ys=n('<span class="status-icon pending svelte-7vqogn" title="Waiting to sync">üîÑ</span>'),Zs=n('<span class="status-icon error svelte-7vqogn" title="Sync error">‚ö†Ô∏è</span>'),Xs=n('<span class="chip svelte-7vqogn"> </span>'),Ks=n('<span class="text-none svelte-7vqogn">None</span>'),Qs=n('<div class="detail-item svelte-7vqogn"><span class="label svelte-7vqogn">Difficulty</span> <span class="value svelte-7vqogn"> </span></div>'),$s=n('<span class="chip svelte-7vqogn"> </span>'),et=n('<span class="text-none svelte-7vqogn">None</span>'),at=n('<div class="detail-item svelte-7vqogn"><span class="label svelte-7vqogn">Category</span> <div class="value-chips svelte-7vqogn"><!></div></div>'),st=n('<span class="chip svelte-7vqogn"> </span>'),tt=n('<span class="text-none svelte-7vqogn">None</span>'),it=n('<div class="detail-item svelte-7vqogn"><span class="label svelte-7vqogn">Energy System</span> <div class="value-chips svelte-7vqogn"><!></div></div>'),rt=n('<span class="chip svelte-7vqogn"> </span>'),nt=n('<span class="text-none svelte-7vqogn">None</span>'),lt=n('<div class="detail-item svelte-7vqogn"><span class="label svelte-7vqogn">Wall</span> <div class="value-chips svelte-7vqogn"><!></div></div>'),vt=n('<p class="notes-text"> </p>'),ot=n('<p class="notes-placeholder">No notes.</p>'),dt=n('<div class="metric svelte-7vqogn"><span class="label svelte-7vqogn">Open Grip</span> <div class="bar-container svelte-7vqogn"><div class="bar-fill svelte-7vqogn"></div></div> <span class="score svelte-7vqogn"> </span></div>'),ct=n('<div class="metric svelte-7vqogn"><span class="label svelte-7vqogn">Crimp Grip</span> <div class="bar-container svelte-7vqogn"><div class="bar-fill svelte-7vqogn"></div></div> <span class="score svelte-7vqogn"> </span></div>'),_t=n('<div class="metric svelte-7vqogn"><span class="label svelte-7vqogn">Pinch Grip</span> <div class="bar-container svelte-7vqogn"><div class="bar-fill svelte-7vqogn"></div></div> <span class="score svelte-7vqogn"> </span></div>'),gt=n('<div class="metric svelte-7vqogn"><span class="label svelte-7vqogn">Sloper Grip</span> <div class="bar-container svelte-7vqogn"><div class="bar-fill svelte-7vqogn"></div></div> <span class="score svelte-7vqogn"> </span></div>'),ut=n('<div class="metric svelte-7vqogn"><span class="label svelte-7vqogn">Jug Grip</span> <div class="bar-container svelte-7vqogn"><div class="bar-fill svelte-7vqogn"></div></div> <span class="score svelte-7vqogn"> </span></div>'),ft=n('<p class="no-climbs svelte-7vqogn">No climbs logged for this session.</p>'),pt=n('<div class="card-body svelte-7vqogn"><div class="details-grid svelte-7vqogn"><div class="detail-item svelte-7vqogn"><span class="label svelte-7vqogn">Training Type</span> <div class="value-chips svelte-7vqogn"><!></div></div> <!> <!> <!> <!></div> <div class="notes-container svelte-7vqogn"><div class="notes-header svelte-7vqogn"><span class="label svelte-7vqogn">Session Notes</span></div> <!></div> <div class="metrics-container svelte-7vqogn"><div class="metric svelte-7vqogn"><span class="label svelte-7vqogn">Finger Load</span> <div class="bar-container svelte-7vqogn"><div class="bar-fill svelte-7vqogn"></div></div> <span class="score svelte-7vqogn"> </span></div> <div class="metric svelte-7vqogn"><span class="label svelte-7vqogn">Shoulder Load</span> <div class="bar-container svelte-7vqogn"><div class="bar-fill svelte-7vqogn"></div></div> <span class="score svelte-7vqogn"> </span></div> <div class="metric svelte-7vqogn"><span class="label svelte-7vqogn">Forearm Load</span> <div class="bar-container svelte-7vqogn"><div class="bar-fill svelte-7vqogn"></div></div> <span class="score svelte-7vqogn"> </span></div> <!> <!> <!> <!> <!></div> <div class="climbs-list svelte-7vqogn"><h4 class="svelte-7vqogn">Climbs</h4> <div class="climbs-container svelte-7vqogn"><!> <!></div></div></div>'),mt=n('<div><div class="card-header svelte-7vqogn" role="button" tabindex="0"><div class="header-main svelte-7vqogn"><div class="date-badge svelte-7vqogn"><span class="day svelte-7vqogn"> </span> <span class="month svelte-7vqogn"> </span> <span class="year svelte-7vqogn"> </span></div> <div class="session-info svelte-7vqogn"><div class="session-text svelte-7vqogn"><h3 class="location svelte-7vqogn"> </h3> <div class="meta-row svelte-7vqogn"><span class="time-tag svelte-7vqogn"> </span> <span class="type-tag svelte-7vqogn"> </span></div> <div class="meta-row lowercase svelte-7vqogn"><span class="stat svelte-7vqogn"> </span> <!></div></div> <div class="load-summary svelte-7vqogn"><div class="load-badge finger svelte-7vqogn"> </div> <div class="load-badge shoulder svelte-7vqogn"> </div> <div class="load-badge forearm svelte-7vqogn"> </div></div></div></div> <div class="header-actions"><div class="header-status svelte-7vqogn"><!></div>  <button class="btn-icon edit-session" title="Edit Session">‚úèÔ∏è</button> <button class="btn-icon delete-session" title="Delete Session">üóëÔ∏è</button> <span class="chevron svelte-7vqogn"> </span></div></div> <!> <!> <!></div>');function ht(_e,i){Ke(i,!0);let m=O(!1),f=O(!1),S=O(!1);function D(){v(m,!s(m))}function g(){v(f,!0)}function j(){v(S,!0)}function p(){v(S,!1)}async function F(){v(S,!1),await Ua()}async function J(){try{const C=await ns(i.session.id);C.ok?(v(f,!1),i.onDelete()):(console.error("Failed to delete session:",C.error),alert("Failed to delete session: "+C.error))}catch(C){console.error("Exception deleting session:",C),alert("Error deleting session")}}function I(C){}function te(C,X){}let N=Xe(()=>i.session.climbs?.length??0),R=Xe(()=>(i.session.climbs||[]).reduce((C,X)=>{const ve=parseInt(X.grade.replace(/\D/g,""))||0,fe=parseInt(C.replace(/\D/g,""))||0;return ve>fe?X.grade:C},"V0"));var w=mt();let K;var q=a(w);q.__click=D,q.__keydown=C=>C.key==="Enter"&&D();var E=a(q),B=a(E),L=a(B),Q=a(L,!0);e(L);var H=t(L,2),ie=a(H,!0);e(H);var de=t(H,2),ne=a(de,!0);e(de),e(B);var k=t(B,2),A=a(k),Y=a(A),Z=a(Y,!0);e(Y);var _=t(Y,2),h=a(_),P=a(h);e(h);var o=t(h,2),c=a(o,!0);e(o),e(_);var b=t(_,2),G=a(b),ge=a(G);e(G);var T=t(G,2);{var $=C=>{var X=Js(),ve=a(X);e(X),u(()=>l(ve,`Max: ${s(R)??""}`)),r(C,X)};d(T,C=>{s(N)>0&&C($)})}e(b),e(A);var me=t(A,2),De=a(me),xe=a(De,!0);e(De);var Fe=t(De,2),ee=a(Fe,!0);e(Fe);var ae=t(Fe,2),ye=a(ae,!0);e(ae),e(me),e(k),e(E);var Ne=t(E,2),Be=a(Ne),ue=a(Be);{var he=C=>{var X=Ys();r(C,X)},be=C=>{var X=Re(),ve=Pe(X);{var fe=z=>{var oe=Zs();r(z,oe)};d(ve,z=>{i.session.syncStatus==="error"&&z(fe)},!0)}r(C,X)};d(ue,C=>{i.session.syncStatus==="pending"?C(he):C(be,!1)})}e(Be);var Ee=t(Be,2);Ee.__click=C=>{C.stopPropagation(),j()};var we=t(Ee,2);we.__click=C=>{C.stopPropagation(),g()};var ze=t(we,2),Te=a(ze,!0);e(ze),e(Ne),e(q);var V=t(q,2);{var re=C=>{var X=pt(),ve=a(X),fe=a(ve),z=t(a(fe),2),oe=a(z);{var Ce=U=>{var se=Re(),y=Pe(se);qe(y,17,()=>i.session.trainingTypes,Me,(M,W)=>{var pe=Xs(),ce=a(pe,!0);e(pe),u(()=>l(ce,s(W))),r(M,pe)}),r(U,se)},Ie=U=>{var se=Ks();r(U,se)};d(oe,U=>{i.session.trainingTypes&&i.session.trainingTypes.length>0&&!i.session.trainingTypes.includes("None")?U(Ce):U(Ie,!1)})}e(z),e(fe);var Ae=t(fe,2);{var $e=U=>{var se=Qs(),y=t(a(se),2),M=a(y,!0);e(y),e(se),u(()=>l(M,i.session.difficulty)),r(U,se)};d(Ae,U=>{i.session.difficulty&&U($e)})}var ke=t(Ae,2);{var Oe=U=>{var se=at(),y=t(a(se),2),M=a(y);{var W=ce=>{var Se=Re(),Ve=Pe(Se);qe(Ve,17,()=>i.session.categories,Me,(ea,xa)=>{var aa=$s(),wa=a(aa,!0);e(aa),u(()=>l(wa,s(xa))),r(ea,aa)}),r(ce,Se)},pe=ce=>{var Se=et();r(ce,Se)};d(M,ce=>{i.session.categories.length>0&&!i.session.categories.includes("None")?ce(W):ce(pe,!1)})}e(y),e(se),r(U,se)};d(ke,U=>{i.session.categories?.length&&U(Oe)})}var Le=t(ke,2);{var He=U=>{var se=it(),y=t(a(se),2),M=a(y);{var W=ce=>{var Se=Re(),Ve=Pe(Se);qe(Ve,17,()=>i.session.energySystems,Me,(ea,xa)=>{var aa=st(),wa=a(aa,!0);e(aa),u(()=>l(wa,s(xa))),r(ea,aa)}),r(ce,Se)},pe=ce=>{var Se=tt();r(ce,Se)};d(M,ce=>{i.session.energySystems.length>0&&!i.session.energySystems.includes("None")?ce(W):ce(pe,!1)})}e(y),e(se),r(U,se)};d(Le,U=>{i.session.energySystems?.length&&U(He)})}var Ge=t(Le,2);{var We=U=>{var se=lt(),y=t(a(se),2),M=a(y);{var W=ce=>{var Se=Re(),Ve=Pe(Se);qe(Ve,17,()=>i.session.wallAngles,Me,(ea,xa)=>{var aa=rt(),wa=a(aa,!0);e(aa),u(()=>l(wa,s(xa))),r(ea,aa)}),r(ce,Se)},pe=ce=>{var Se=nt();r(ce,Se)};d(M,ce=>{i.session.wallAngles.length>0&&!i.session.wallAngles.includes("None")?ce(W):ce(pe,!1)})}e(y),e(se),r(U,se)};d(Ge,U=>{i.session.wallAngles?.length&&U(We)})}e(ve);var ba=t(ve,2),Fa=t(a(ba),2);{var ya=U=>{var se=vt(),y=a(se,!0);e(se),u(()=>l(y,i.session.notes)),r(U,se)},Wa=U=>{var se=ot();r(U,se)};d(Fa,U=>{i.session.notes?U(ya):U(Wa,!1)})}e(ba);var Ea=t(ba,2),La=a(Ea),_a=t(a(La),2),ua=a(_a);e(_a);var fa=t(_a,2),za=a(fa);e(fa),e(La);var pa=t(La,2),Ga=t(a(pa),2),ja=a(Ga);e(Ga);var qa=t(Ga,2),Ba=a(qa);e(qa),e(pa);var da=t(pa,2),Je=t(a(da),2),ma=a(Je);e(Je);var va=t(Je,2),Da=a(va);e(va),e(da);var na=t(da,2);{var ca=U=>{var se=dt(),y=t(a(se),2),M=a(y);e(y);var W=t(y,2),pe=a(W);e(W),e(se),u(()=>{je(M,`width: ${i.session.openGrip/5*100}%`),l(pe,`${i.session.openGrip??""}/5`)}),r(U,se)};d(na,U=>{i.session.openGrip&&U(ca)})}var oa=t(na,2);{var Ta=U=>{var se=ct(),y=t(a(se),2),M=a(y);e(y);var W=t(y,2),pe=a(W);e(W),e(se),u(()=>{je(M,`width: ${i.session.crimpGrip/5*100}%`),l(pe,`${i.session.crimpGrip??""}/5`)}),r(U,se)};d(oa,U=>{i.session.crimpGrip&&U(Ta)})}var Ma=t(oa,2);{var Ia=U=>{var se=_t(),y=t(a(se),2),M=a(y);e(y);var W=t(y,2),pe=a(W);e(W),e(se),u(()=>{je(M,`width: ${i.session.pinchGrip/5*100}%`),l(pe,`${i.session.pinchGrip??""}/5`)}),r(U,se)};d(Ma,U=>{i.session.pinchGrip&&U(Ia)})}var Oa=t(Ma,2);{var Ra=U=>{var se=gt(),y=t(a(se),2),M=a(y);e(y);var W=t(y,2),pe=a(W);e(W),e(se),u(()=>{je(M,`width: ${i.session.sloperGrip/5*100}%`),l(pe,`${i.session.sloperGrip??""}/5`)}),r(U,se)};d(Oa,U=>{i.session.sloperGrip&&U(Ra)})}var Ca=t(Oa,2);{var Ha=U=>{var se=ut(),y=t(a(se),2),M=a(y);e(y);var W=t(y,2),pe=a(W);e(W),e(se),u(()=>{je(M,`width: ${i.session.jugGrip/5*100}%`),l(pe,`${i.session.jugGrip??""}/5`)}),r(U,se)};d(Ca,U=>{i.session.jugGrip&&U(Ha)})}e(Ea);var Na=t(Ea,2),Va=t(a(Na),2),Ye=a(Va);qe(Ye,17,()=>i.session.climbs||[],Me,(U,se,y)=>{{let M=Xe(()=>i.session.climbingType==="Mixed");Ws(U,{get climb(){return s(se)},onDelete:()=>void 0,onUpdate:W=>void 0,get showClimbType(){return s(M)}})}});var ha=t(Ye,2);{var Za=U=>{var se=ft();r(U,se)};d(ha,U=>{(i.session.climbs||[]).length===0&&U(Za)})}e(Va),e(Na),e(X),u(()=>{je(ua,`width: ${i.session.fingerLoad/5*100}%`),l(za,`${i.session.fingerLoad??""}/5`),je(ja,`width: ${i.session.shoulderLoad/5*100}%`),l(Ba,`${i.session.shoulderLoad??""}/5`),je(ma,`width: ${i.session.forearmLoad/5*100}%`),l(Da,`${i.session.forearmLoad??""}/5`)}),ra(3,X,()=>la,()=>({duration:150})),r(C,X)};d(V,C=>{s(m)&&C(re)})}var x=t(V,2);Ja(x,{get isOpen(){return s(f)},title:"Delete Session",message:"Are you sure you want to delete this session? This action cannot be undone.",onConfirm:J,onCancel:()=>v(f,!1)});var le=t(x,2);Ya(le,{get isOpen(){return s(S)},activityType:"indoor_climb",get initialData(){return i.session},onClose:p,onSaved:F}),e(w),u((C,X,ve)=>{K=ia(w,1,"session-card svelte-7vqogn",null,K,{expanded:s(m)}),Ue(q,"aria-expanded",s(m)),l(Q,C),l(ie,X),l(ne,ve),l(Z,i.session.location),l(P,`üïí ${(i.session.time||"12:00")??""}`),l(c,i.session.climbingType),l(ge,`${s(N)??""} climbs`),Ue(De,"title",`Finger Load: ${i.session.fingerLoad??""}`),l(xe,i.session.fingerLoad),Ue(Fe,"title",`Shoulder Load: ${i.session.shoulderLoad??""}`),l(ee,i.session.shoulderLoad),Ue(ae,"title",`Forearm Load: ${i.session.forearmLoad??""}`),l(ye,i.session.forearmLoad),l(Te,s(m)?"‚ñ≤":"‚ñº")},[()=>new Date(i.session.date).getDate(),()=>new Date(i.session.date).toLocaleDateString("en-GB",{month:"short"}),()=>new Date(i.session.date).getFullYear()]),r(_e,w),Qe()}Ze(["click","keydown"]);var bt=n('<div class="legend-item svelte-11p9lqi"><span class="l-icon svelte-11p9lqi"> </span> <span class="l-label svelte-11p9lqi"> </span></div>'),yt=n('<div class="legend-content svelte-11p9lqi"><div class="legend-grid svelte-11p9lqi"></div></div>'),xt=n('<div class="legend-container svelte-11p9lqi"><button class="legend-toggle svelte-11p9lqi"><span class="icon">‚ÑπÔ∏è</span> <span class="text">Icon Legend</span> <span class="chevron svelte-11p9lqi"> </span></button> <!></div>');function as(_e){let i=O(!1);const m=[{icon:"üëÅÔ∏è",label:"Onsight"},{icon:"‚ö°",label:"Flash"},{icon:"üî¥",label:"Redpoint"},{icon:"üõ†Ô∏è",label:"Dogged"},{icon:"‚ùå",label:"DNF"}];var f=xt(),S=a(f);S.__click=()=>v(i,!s(i));var D=t(a(S),4),g=a(D,!0);e(D),e(S);var j=t(S,2);{var p=F=>{var J=yt(),I=a(J);qe(I,21,()=>m,Me,(te,N)=>{var R=bt(),w=a(R),K=a(w,!0);e(w);var q=t(w,2),E=a(q,!0);e(q),e(R),u(()=>{l(K,s(N).icon),l(E,s(N).label)}),r(te,R)}),e(I),e(J),ra(3,J,()=>la),r(F,J)};d(j,F=>{s(i)&&F(p)})}e(f),u(()=>{Ue(S,"aria-expanded",s(i)),l(g,s(i)?"‚ñº":"‚ñ∂")}),r(_e,f)}Ze(["click"]);function Qa(_e,i){if(!_e||_e.length===0){alert("No data to export");return}const m=Array.from(new Set(_e.flatMap(Object.keys))),f=[m.join(","),..._e.map(g=>m.map(j=>{let p=g[j];if(p==null)return"";if(typeof p=="object"){if(p instanceof Date)return p.toISOString();p=JSON.stringify(p).replace(/"/g,'""')}else typeof p=="string"&&(p=p.replace(/"/g,'""'));return typeof p=="string"&&(p.includes(",")||p.includes('"')||p.includes(`
`))?`"${p}"`:p}).join(","))].join(`
`),S=new Blob([f],{type:"text/csv;charset=utf-8;"}),D=document.createElement("a");if(D.download!==void 0){const g=URL.createObjectURL(S);D.setAttribute("href",g),D.setAttribute("download",i.endsWith(".csv")?i:`${i}.csv`),D.style.visibility="hidden",document.body.appendChild(D),D.click(),document.body.removeChild(D)}}var wt=n('<span class="spinner svelte-14fqz8w"></span> Fetching...',1),kt=n('<div class="error-banner svelte-14fqz8w"> </div>'),St=n('<small class="svelte-14fqz8w">Try adjusting your filters.</small>'),qt=n('<div class="empty-state svelte-14fqz8w"><p class="svelte-14fqz8w">No indoor climbing sessions found.</p> <!></div>'),Dt=n('<div class="load-more-container svelte-14fqz8w"><button class="load-more-btn svelte-14fqz8w"> </button></div>'),Tt=n('<div class="view-container svelte-14fqz8w"><div class="view-header svelte-14fqz8w"><h2 class="view-title svelte-14fqz8w">üßó Indoor Climbing History</h2> <div class="header-actions svelte-14fqz8w"><button class="action-btn secondary svelte-14fqz8w" title="Export filtered data to CSV">üì• Export</button> <button class="action-btn svelte-14fqz8w" title="Fetch data from cloud"><!></button></div></div> <!> <!> <div class="info-bar svelte-14fqz8w"><div class="legend-wrapper svelte-14fqz8w"><!></div> <div class="load-key svelte-14fqz8w"><span class="key-label svelte-14fqz8w">Load:</span> <div class="key-item svelte-14fqz8w"><span class="dot finger svelte-14fqz8w"></span> Finger</div> <div class="key-item svelte-14fqz8w"><span class="dot shoulder svelte-14fqz8w"></span> Shoulder</div> <div class="key-item svelte-14fqz8w"><span class="dot forearm svelte-14fqz8w"></span> Forearm</div></div></div> <div class="sessions-list"><!> <!> <!></div></div>');function Ct(_e,i){Ke(i,!0);let m=O(ga([])),f=O(ga([])),S=O(!1),D=O(""),g=O(ga({startDate:"",endDate:"",location:"",climbingType:"",sessionType:"",grade:""})),j=O(20);const p=20;Ka(()=>{F()});async function F(){v(S,!0),v(D,"");try{const o=await ls();o.ok&&o.data?(v(m,o.data.map(c=>({...c,activityType:"indoor_climb"})),!0),s(m).sort((c,b)=>new Date(b.date).getTime()-new Date(c.date).getTime()),I()):v(D,o.error||"Failed to fetch data",!0)}catch(o){v(D,o instanceof Error?o.message:"Unknown error",!0)}finally{v(S,!1)}}function J(o){v(g,o,!0),I()}function I(){v(j,p),v(f,s(m).filter(o=>{if(s(g).startDate&&o.date<s(g).startDate||s(g).endDate&&o.date>s(g).endDate||s(g).location&&o.location!==s(g).location)return!1;if(s(g).climbingType&&(o.climbingType==="Leading"?"Sport":o.climbingType)!==s(g).climbingType)if(o.climbingType==="Mixed")if(s(g).climbingType==="Bouldering"){if(!o.climbs.some(b=>!b.isSport))return!1}else if(s(g).climbingType==="Sport"){if(!o.climbs.some(b=>b.isSport))return!1}else return!1;else return!1;if(s(g).sessionType&&!o.trainingTypes?.includes(s(g).sessionType))return!1;if(s(g).grade){const c=s(g).grade.trim().toLowerCase();if(!o.climbs.some(G=>G.grade.trim().toLowerCase()===c))return!1}return!0}),!0)}function te(){v(j,s(j)+p)}var N=Tt(),R=a(N),w=t(a(R),2),K=a(w);K.__click=()=>Qa(s(f),"indoor_climbs");var q=t(K,2);q.__click=F;var E=a(q);{var B=o=>{var c=wt();Pa(),r(o,c)},L=o=>{var c=Sa("‚òÅÔ∏è Fetch Data");r(o,c)};d(E,o=>{s(S)?o(B):o(L,!1)})}e(q),e(w),e(R);var Q=t(R,2);{var H=o=>{var c=kt(),b=a(c,!0);e(c),u(()=>l(b,s(D))),ra(3,c,()=>la),r(o,c)};d(Q,o=>{s(D)&&o(H)})}var ie=t(Q,2);Ms(ie,{onFilterParamsChange:J});var de=t(ie,2),ne=a(de),k=a(ne);as(k),e(ne),Pa(2),e(de);var A=t(de,2),Y=a(A);qe(Y,17,()=>s(f).slice(0,s(j)),o=>o.id,(o,c)=>{ht(o,{get session(){return s(c)},onDelete:F})});var Z=t(Y,2);{var _=o=>{var c=qt(),b=t(a(c),2);{var G=ge=>{var T=St();r(ge,T)};d(b,ge=>{s(m).length>0&&ge(G)})}e(c),r(o,c)};d(Z,o=>{s(f).length===0&&o(_)})}var h=t(Z,2);{var P=o=>{var c=Dt(),b=a(c);b.__click=te;var G=a(b);e(b),e(c),u(()=>l(G,`Load More (${s(f).length-s(j)} remaining)`)),r(o,c)};d(h,o=>{s(j)<s(f).length&&o(P)})}e(A),e(N),u(()=>q.disabled=s(S)),r(_e,N),Qe()}Ze(["click"]);var Ft=n('<span class="chevron svelte-1frtlim">‚ñ≤</span>'),Et=n('<span class="chevron svelte-1frtlim">‚ñº</span>'),Lt=n('<div class="input-with-action svelte-1frtlim"><input type="text" id="area-filter-text" placeholder="Type area name..." class="flat-left svelte-1frtlim"/> <button class="action-btn flat-right svelte-1frtlim" title="Back to list">‚úï</button></div>'),zt=n("<option> </option>"),Gt=n('<select id="area-filter" class="svelte-1frtlim"><option>All Areas</option><!><option>Other (Manual Entry)</option></select>'),jt=n('<div class="input-with-action svelte-1frtlim"><input type="text" id="crag-filter-text" placeholder="Type crag name..." class="flat-left svelte-1frtlim"/> <button class="action-btn flat-right svelte-1frtlim" title="Back to list">‚úï</button></div>'),Mt=n("<option> </option>"),Ot=n('<select id="crag-filter" class="svelte-1frtlim"><option>All Crags</option><!><option>Other (Manual Entry)</option></select>'),Nt=n('<input type="text" id="crag-filter-text" class="svelte-1frtlim"/>'),At=n("<option> </option>"),Pt=n("<option> </option>"),Bt=n('<div class="filter-body svelte-1frtlim"><div class="filter-grid svelte-1frtlim"><div class="filter-item svelte-1frtlim"><label for="start-date" class="svelte-1frtlim">Start Date</label> <input type="date" id="start-date" class="svelte-1frtlim"/></div> <div class="filter-item svelte-1frtlim"><label for="end-date" class="svelte-1frtlim">End Date</label> <input type="date" id="end-date" class="svelte-1frtlim"/></div> <div class="filter-item svelte-1frtlim"><label for="area-filter" class="svelte-1frtlim">Area</label> <!></div> <div class="filter-item svelte-1frtlim"><label for="crag-filter" class="svelte-1frtlim">Crag</label> <!></div> <div class="filter-item svelte-1frtlim"><label for="climbing-type-filter" class="svelte-1frtlim">Climb Type</label> <select id="climbing-type-filter" class="svelte-1frtlim"><option>Any Type</option><!></select></div> <div class="filter-item svelte-1frtlim"><label for="session-type-filter" class="svelte-1frtlim">Session Type</label> <select id="session-type-filter" class="svelte-1frtlim"><option>Any Type</option><!></select></div> <div class="filter-item svelte-1frtlim"><label for="grade-filter" class="svelte-1frtlim">Grade (Exact)</label> <input type="text" id="grade-filter" placeholder="e.g. 7a" class="svelte-1frtlim"/></div></div> <div class="filter-actions svelte-1frtlim"><button class="reset-btn svelte-1frtlim">Reset Filters</button></div></div>'),It=n('<div class="filter-container svelte-1frtlim"><button class="filter-header svelte-1frtlim"><div class="header-content svelte-1frtlim"><span class="icon svelte-1frtlim">üîç</span> <span class="title svelte-1frtlim">Filters</span> <!></div></button> <!></div>');function Rt(_e,i){Ke(i,!0);const m=ws(),f=["Bouldering","Sport","Mixed","Trad"],S=["Projecting","Onsighting","Campusing","Repeaters","Fun","Volume"];let D=O(!1),g=O(""),j=O(""),p=O(""),F=O(""),J=O(""),I=O(""),te=O(""),N=O(!1),R=O(!1),w=Xe(()=>s(p)&&s(p)!=="Other"?ks(s(p)):[]);function K(){s(p)==="Other"?(v(N,!0),v(p,"")):v(N,!1),v(F,""),v(R,!1),L()}function q(){s(F)==="Other"?(v(R,!0),v(F,"")):v(R,!1),L()}function E(){v(D,!s(D))}function B(){v(g,""),v(j,""),v(p,""),v(F,""),v(J,""),v(I,""),v(te,""),v(N,!1),v(R,!1),L()}function L(){i.onFilterParamsChange({startDate:s(g),endDate:s(j),area:s(p),crag:s(F),climbingType:s(J),sessionType:s(I),grade:s(te)})}var Q=It(),H=a(Q);H.__click=E;var ie=a(H),de=t(a(ie),4);{var ne=Z=>{var _=Ft();r(Z,_)},k=Z=>{var _=Et();r(Z,_)};d(de,Z=>{s(D)?Z(ne):Z(k,!1)})}e(ie),e(H);var A=t(H,2);{var Y=Z=>{var _=Bt(),h=a(_),P=a(h),o=t(a(P),2);sa(o),o.__change=L,e(P);var c=t(P,2),b=t(a(c),2);sa(b),b.__change=L,e(c);var G=t(c,2),ge=t(a(G),2);{var T=V=>{var re=Lt(),x=a(re);sa(x),x.__input=L;var le=t(x,2);le.__click=()=>{v(N,!1),v(p,""),L()},e(re),ta(x,()=>s(p),C=>v(p,C)),r(V,re)},$=V=>{var re=Gt();re.__change=K;var x=a(re);x.value=x.__value="";var le=t(x);qe(le,17,()=>m,Me,(X,ve)=>{var fe=zt(),z=a(fe,!0);e(fe);var oe={};u(()=>{l(z,s(ve)),oe!==(oe=s(ve))&&(fe.value=(fe.__value=s(ve))??"")}),r(X,fe)});var C=t(le);C.value=C.__value="Other",e(re),ka(re,()=>s(p),X=>v(p,X)),r(V,re)};d(ge,V=>{s(N)?V(T):V($,!1)})}e(G);var me=t(G,2),De=t(a(me),2);{var xe=V=>{var re=jt(),x=a(re);sa(x),x.__input=L;var le=t(x,2);le.__click=()=>{v(R,!1),v(F,""),L()},e(re),ta(x,()=>s(F),C=>v(F,C)),r(V,re)},Fe=V=>{var re=Re(),x=Pe(re);{var le=X=>{var ve=Ot();ve.__change=q;var fe=a(ve);fe.value=fe.__value="";var z=t(fe);qe(z,17,()=>s(w),Me,(Ce,Ie)=>{var Ae=Mt(),$e=a(Ae,!0);e(Ae);var ke={};u(()=>{l($e,s(Ie)),ke!==(ke=s(Ie))&&(Ae.value=(Ae.__value=s(Ie))??"")}),r(Ce,Ae)});var oe=t(z);oe.value=oe.__value="Other",e(ve),ka(ve,()=>s(F),Ce=>v(F,Ce)),r(X,ve)},C=X=>{var ve=Nt();sa(ve),ve.__input=L,u(()=>{Ue(ve,"placeholder",s(p)?"Filter crag...":"Select area first"),ve.disabled=!s(N)&&!s(p)}),ta(ve,()=>s(F),fe=>v(F,fe)),r(X,ve)};d(x,X=>{!s(N)&&s(p)&&s(w).length>0?X(le):X(C,!1)},!0)}r(V,re)};d(De,V=>{s(R)?V(xe):V(Fe,!1)})}e(me);var ee=t(me,2),ae=t(a(ee),2);ae.__change=L;var ye=a(ae);ye.value=ye.__value="";var Ne=t(ye);qe(Ne,17,()=>f,Me,(V,re)=>{var x=At(),le=a(x,!0);e(x);var C={};u(()=>{l(le,s(re)),C!==(C=s(re))&&(x.value=(x.__value=s(re))??"")}),r(V,x)}),e(ae),e(ee);var Be=t(ee,2),ue=t(a(Be),2);ue.__change=L;var he=a(ue);he.value=he.__value="";var be=t(he);qe(be,17,()=>S,Me,(V,re)=>{var x=Pt(),le=a(x,!0);e(x);var C={};u(()=>{l(le,s(re)),C!==(C=s(re))&&(x.value=(x.__value=s(re))??"")}),r(V,x)}),e(ue),e(Be);var Ee=t(Be,2),we=t(a(Ee),2);sa(we),we.__input=L,e(Ee),e(h);var ze=t(h,2),Te=a(ze);Te.__click=B,e(ze),e(_),ta(o,()=>s(g),V=>v(g,V)),ta(b,()=>s(j),V=>v(j,V)),ka(ae,()=>s(J),V=>v(J,V)),ka(ue,()=>s(I),V=>v(I,V)),ta(we,()=>s(te),V=>v(te,V)),ra(3,_,()=>la,()=>({duration:200})),r(Z,_)};d(A,Z=>{s(D)&&Z(Y)})}e(Q),u(()=>Ue(H,"aria-expanded",s(D))),r(_e,Q),Qe()}Ze(["click","change","input"]);var Vt=n('<span class="climb-type-tag svelte-1k6anfh"> </span>'),Ut=n('<span class="notes-preview svelte-1k6anfh"> </span>'),Wt=n('<span class="attempts-count svelte-1k6anfh"> </span>'),Ht=n('<div class="detail-row svelte-1k6anfh"><span class="label svelte-1k6anfh">Notes:</span> <p class="notes svelte-1k6anfh"> </p></div>'),Jt=n('<p class="empty-notes svelte-1k6anfh">No notes for this climb.</p>'),Yt=n('<span class="tag wall-tag svelte-1k6anfh"> </span>'),Zt=n('<span class="tag technique-tag svelte-1k6anfh"> </span>'),Xt=n('<div class="climb-details svelte-1k6anfh"><!> <div class="tags svelte-1k6anfh"><span class="tag type svelte-1k6anfh"> </span> <!> <!> <span class="tag attempt-text svelte-1k6anfh"> </span></div></div>'),Kt=n('<div><div class="climb-header svelte-1k6anfh" role="button" tabindex="0"><div class="climb-main-info svelte-1k6anfh"><span> </span> <span class="climb-name svelte-1k6anfh"> </span> <!> <!></div> <div class="climb-meta svelte-1k6anfh"><span><span class="icon svelte-1k6anfh"> </span> <!></span> <span class="chevron svelte-1k6anfh"> </span></div></div> <!></div>');function Qt(_e,i){Ke(i,!0);let m=es(i,"showClimbType",3,!1),f=O(!1);function S(){v(f,!s(f))}const D={Flash:"‚ö°",Onsight:"üëÅÔ∏è",Redpoint:"üî¥",Dogged:"üõ†Ô∏è",DNF:"‚ùå"};var g=Kt();let j;var p=a(g);p.__click=S,p.__keydown=_=>(_.key==="Enter"||_.key===" ")&&S();var F=a(p),J=a(F);let I;var te=a(J,!0);e(J);var N=t(J,2),R=a(N,!0);e(N);var w=t(N,2);{var K=_=>{var h=Vt(),P=a(h,!0);e(h),u(()=>l(P,i.climb.isSport?"Sport":"Boulder")),r(_,h)};d(w,_=>{m()&&_(K)})}var q=t(w,2);{var E=_=>{var h=Ut(),P=a(h);e(h),u(()=>l(P,`- ${i.climb.notes??""}`)),r(_,h)};d(q,_=>{!s(f)&&i.climb.notes&&_(E)})}e(F);var B=t(F,2),L=a(B);let Q;var H=a(L),ie=a(H,!0);e(H);var de=t(H,2);{var ne=_=>{var h=Wt(),P=a(h,!0);e(h),u(()=>l(P,i.climb.attemptsNum)),r(_,h)};d(de,_=>{i.climb.attemptType!=="Flash"&&i.climb.attemptType!=="Onsight"&&_(ne)})}e(L);var k=t(L,2),A=a(k,!0);e(k),e(B),e(p);var Y=t(p,2);{var Z=_=>{var h=Xt(),P=a(h);{var o=ee=>{var ae=Ht(),ye=t(a(ae),2),Ne=a(ye,!0);e(ye),e(ae),u(()=>l(Ne,i.climb.notes)),r(ee,ae)},c=ee=>{var ae=Jt();r(ee,ae)};d(P,ee=>{i.climb.notes?ee(o):ee(c,!1)})}var b=t(P,2),G=a(b),ge=a(G,!0);e(G);var T=t(G,2);{var $=ee=>{var ae=Yt(),ye=a(ae,!0);e(ae),u(()=>l(ye,i.climb.wall)),r(ee,ae)};d(T,ee=>{i.climb.wall&&ee($)})}var me=t(T,2);{var De=ee=>{var ae=Zt(),ye=a(ae,!0);e(ae),u(()=>l(ye,i.climb.techniqueFocus)),r(ee,ae)};d(me,ee=>{i.climb.techniqueFocus&&ee(De)})}var xe=t(me,2),Fe=a(xe,!0);e(xe),e(b),e(h),u(()=>{l(ge,i.climb.isSport?"Sport":"Boulder"),l(Fe,i.climb.attemptType)}),ra(3,h,()=>la,()=>({duration:150})),r(_,h)};d(Y,_=>{s(f)&&_(Z)})}e(g),u(()=>{j=ia(g,1,"climb-entry svelte-1k6anfh",null,j,{expanded:s(f)}),Ue(p,"aria-expanded",s(f)),I=ia(J,1,"grade-badge svelte-1k6anfh",null,I,{sport:i.climb.isSport}),l(te,i.climb.grade),l(R,i.climb.name||"Unnamed Route"),Q=ia(L,1,"attempt-type svelte-1k6anfh",null,Q,{flash:i.climb.attemptType==="Flash"}),l(ie,D[i.climb.attemptType]||i.climb.attemptType),l(A,s(f)?"‚ñ≤":"‚ñº")}),r(_e,g),Qe()}Ze(["click","keydown"]);var $t=n('<div class="sector-meta"> </div>'),ei=n('<span class="stat svelte-d5hg2r"> </span>'),ai=n('<span class="status-icon pending svelte-d5hg2r" title="Waiting to sync">üîÑ</span>'),si=n('<span class="status-icon error svelte-d5hg2r" title="Sync error">‚ö†Ô∏è</span>'),ti=n('<span class="chip svelte-d5hg2r"> </span>'),ii=n('<span class="text-none svelte-d5hg2r">None</span>'),ri=n('<div class="detail-item svelte-d5hg2r"><span class="label svelte-d5hg2r">Difficulty</span> <span class="value svelte-d5hg2r"> </span></div>'),ni=n('<span class="chip svelte-d5hg2r"> </span>'),li=n('<span class="text-none svelte-d5hg2r">None</span>'),vi=n('<div class="detail-item svelte-d5hg2r"><span class="label svelte-d5hg2r">Category</span> <div class="value-chips svelte-d5hg2r"><!></div></div>'),oi=n('<span class="chip svelte-d5hg2r"> </span>'),di=n('<span class="text-none svelte-d5hg2r">None</span>'),ci=n('<div class="detail-item svelte-d5hg2r"><span class="label svelte-d5hg2r">Energy System</span> <div class="value-chips svelte-d5hg2r"><!></div></div>'),_i=n('<p class="notes-text"> </p>'),gi=n('<p class="notes-placeholder">No notes.</p>'),ui=n('<div class="metric svelte-d5hg2r"><span class="label svelte-d5hg2r">Open Grip</span> <div class="bar-container svelte-d5hg2r"><div class="bar-fill svelte-d5hg2r"></div></div> <span class="score svelte-d5hg2r"> </span></div>'),fi=n('<div class="metric svelte-d5hg2r"><span class="label svelte-d5hg2r">Crimp Grip</span> <div class="bar-container svelte-d5hg2r"><div class="bar-fill svelte-d5hg2r"></div></div> <span class="score svelte-d5hg2r"> </span></div>'),pi=n('<div class="metric svelte-d5hg2r"><span class="label svelte-d5hg2r">Pinch Grip</span> <div class="bar-container svelte-d5hg2r"><div class="bar-fill svelte-d5hg2r"></div></div> <span class="score svelte-d5hg2r"> </span></div>'),mi=n('<div class="metric svelte-d5hg2r"><span class="label svelte-d5hg2r">Sloper Grip</span> <div class="bar-container svelte-d5hg2r"><div class="bar-fill svelte-d5hg2r"></div></div> <span class="score svelte-d5hg2r"> </span></div>'),hi=n('<div class="metric svelte-d5hg2r"><span class="label svelte-d5hg2r">Jug Grip</span> <div class="bar-container svelte-d5hg2r"><div class="bar-fill svelte-d5hg2r"></div></div> <span class="score svelte-d5hg2r"> </span></div>'),bi=n('<p class="no-climbs svelte-d5hg2r">No climbs logged for this session.</p>'),yi=n('<div class="card-body svelte-d5hg2r"><div class="details-grid svelte-d5hg2r"><div class="detail-item svelte-d5hg2r"><span class="label svelte-d5hg2r">Training Type</span> <div class="value-chips svelte-d5hg2r"><!></div></div> <!> <!> <!></div> <div class="notes-container svelte-d5hg2r"><div class="notes-header svelte-d5hg2r"><span class="label svelte-d5hg2r">Session Notes</span></div> <!></div> <div class="metrics-container svelte-d5hg2r"><div class="metric svelte-d5hg2r"><span class="label svelte-d5hg2r">Finger Load</span> <div class="bar-container svelte-d5hg2r"><div class="bar-fill svelte-d5hg2r"></div></div> <span class="score svelte-d5hg2r"> </span></div> <div class="metric svelte-d5hg2r"><span class="label svelte-d5hg2r">Shoulder Load</span> <div class="bar-container svelte-d5hg2r"><div class="bar-fill svelte-d5hg2r"></div></div> <span class="score svelte-d5hg2r"> </span></div> <div class="metric svelte-d5hg2r"><span class="label svelte-d5hg2r">Forearm Load</span> <div class="bar-container svelte-d5hg2r"><div class="bar-fill svelte-d5hg2r"></div></div> <span class="score svelte-d5hg2r"> </span></div> <!> <!> <!> <!> <!></div> <div class="climbs-list svelte-d5hg2r"><h4 class="svelte-d5hg2r">Climbs</h4> <div class="climbs-container svelte-d5hg2r"><!> <!></div></div></div>'),xi=n('<div><div class="card-header svelte-d5hg2r" role="button" tabindex="0"><div class="header-main svelte-d5hg2r"><div class="date-badge svelte-d5hg2r"><span class="day svelte-d5hg2r"> </span> <span class="month svelte-d5hg2r"> </span> <span class="year svelte-d5hg2r"> </span></div> <div class="session-info svelte-d5hg2r"><div class="session-text svelte-d5hg2r"><h3 class="location svelte-d5hg2r"> <!></h3> <!> <div class="meta-row svelte-d5hg2r"><span class="time-tag svelte-d5hg2r"> </span> <span class="type-tag svelte-d5hg2r"> </span></div> <div class="meta-row lowercase svelte-d5hg2r"><span class="stat svelte-d5hg2r"> </span> <!></div></div> <div class="load-summary svelte-d5hg2r"><div class="load-badge finger svelte-d5hg2r"> </div> <div class="load-badge shoulder svelte-d5hg2r"> </div> <div class="load-badge forearm svelte-d5hg2r"> </div></div></div></div> <div class="header-actions"><div class="header-status svelte-d5hg2r"><!></div> <button class="btn-icon edit-session" title="Edit Session">‚úèÔ∏è</button> <button class="btn-icon delete-session" title="Delete Session">üóëÔ∏è</button> <span class="chevron svelte-d5hg2r"> </span></div></div> <!> <!> <!></div>');function wi(_e,i){Ke(i,!0);let m=O(!1),f=O(!1),S=O(!1);function D(){v(m,!s(m))}function g(){v(f,!0)}function j(){v(S,!0)}function p(){v(S,!1)}async function F(){v(S,!1),await Ua()}async function J(){try{const z=await vs(i.session.id);z.ok?(v(f,!1),i.onDelete()):(console.error("Failed to delete session:",z.error),alert("Failed to delete session: "+z.error))}catch(z){console.error("Exception deleting session:",z),alert("Error deleting session")}}function I(z){}function te(z,oe){}let N=Xe(()=>i.session.climbs?.length??0),R=Xe(()=>(i.session.climbs||[]).reduce((z,oe)=>{const Ce=parseInt(oe.grade.replace(/\D/g,""))||0,Ie=parseInt(z.replace(/\D/g,""))||0;return Ce>Ie?oe.grade:z},"V0"));var w=xi();let K;var q=a(w);q.__click=D,q.__keydown=z=>z.key==="Enter"&&D();var E=a(q),B=a(E),L=a(B),Q=a(L,!0);e(L);var H=t(L,2),ie=a(H,!0);e(H);var de=t(H,2),ne=a(de,!0);e(de),e(B);var k=t(B,2),A=a(k),Y=a(A),Z=a(Y),_=t(Z);{var h=z=>{var oe=Sa();u(()=>l(oe,`- ${i.session.crag??""}`)),r(z,oe)};d(_,z=>{i.session.crag&&z(h)})}e(Y);var P=t(Y,2);{var o=z=>{var oe=$t(),Ce=a(oe);e(oe),u(()=>l(Ce,`üìç ${i.session.sector??""}`)),r(z,oe)};d(P,z=>{i.session.sector&&z(o)})}var c=t(P,2),b=a(c),G=a(b);e(b);var ge=t(b,2),T=a(ge,!0);e(ge),e(c);var $=t(c,2),me=a($),De=a(me);e(me);var xe=t(me,2);{var Fe=z=>{var oe=ei(),Ce=a(oe);e(oe),u(()=>l(Ce,`Max: ${s(R)??""}`)),r(z,oe)};d(xe,z=>{s(N)>0&&z(Fe)})}e($),e(A);var ee=t(A,2),ae=a(ee),ye=a(ae,!0);e(ae);var Ne=t(ae,2),Be=a(Ne,!0);e(Ne);var ue=t(Ne,2),he=a(ue,!0);e(ue),e(ee),e(k),e(E);var be=t(E,2),Ee=a(be),we=a(Ee);{var ze=z=>{var oe=ai();r(z,oe)},Te=z=>{var oe=Re(),Ce=Pe(oe);{var Ie=Ae=>{var $e=si();r(Ae,$e)};d(Ce,Ae=>{i.session.syncStatus==="error"&&Ae(Ie)},!0)}r(z,oe)};d(we,z=>{i.session.syncStatus==="pending"?z(ze):z(Te,!1)})}e(Ee);var V=t(Ee,2);V.__click=z=>{z.stopPropagation(),j()};var re=t(V,2);re.__click=z=>{z.stopPropagation(),g()};var x=t(re,2),le=a(x,!0);e(x),e(be),e(q);var C=t(q,2);{var X=z=>{var oe=yi(),Ce=a(oe),Ie=a(Ce),Ae=t(a(Ie),2),$e=a(Ae);{var ke=y=>{var M=Re(),W=Pe(M);qe(W,17,()=>i.session.trainingTypes,Me,(pe,ce)=>{var Se=ti(),Ve=a(Se,!0);e(Se),u(()=>l(Ve,s(ce))),r(pe,Se)}),r(y,M)},Oe=y=>{var M=ii();r(y,M)};d($e,y=>{i.session.trainingTypes&&i.session.trainingTypes.length>0&&!i.session.trainingTypes.includes("None")?y(ke):y(Oe,!1)})}e(Ae),e(Ie);var Le=t(Ie,2);{var He=y=>{var M=ri(),W=t(a(M),2),pe=a(W,!0);e(W),e(M),u(()=>l(pe,i.session.difficulty)),r(y,M)};d(Le,y=>{i.session.difficulty&&y(He)})}var Ge=t(Le,2);{var We=y=>{var M=vi(),W=t(a(M),2),pe=a(W);{var ce=Ve=>{var ea=Re(),xa=Pe(ea);qe(xa,17,()=>i.session.categories,Me,(aa,wa)=>{var Aa=ni(),Xa=a(Aa,!0);e(Aa),u(()=>l(Xa,s(wa))),r(aa,Aa)}),r(Ve,ea)},Se=Ve=>{var ea=li();r(Ve,ea)};d(pe,Ve=>{i.session.categories.length>0&&!i.session.categories.includes("None")?Ve(ce):Ve(Se,!1)})}e(W),e(M),r(y,M)};d(Ge,y=>{i.session.categories?.length&&y(We)})}var ba=t(Ge,2);{var Fa=y=>{var M=ci(),W=t(a(M),2),pe=a(W);{var ce=Ve=>{var ea=Re(),xa=Pe(ea);qe(xa,17,()=>i.session.energySystems,Me,(aa,wa)=>{var Aa=oi(),Xa=a(Aa,!0);e(Aa),u(()=>l(Xa,s(wa))),r(aa,Aa)}),r(Ve,ea)},Se=Ve=>{var ea=di();r(Ve,ea)};d(pe,Ve=>{i.session.energySystems.length>0&&!i.session.energySystems.includes("None")?Ve(ce):Ve(Se,!1)})}e(W),e(M),r(y,M)};d(ba,y=>{i.session.energySystems?.length&&y(Fa)})}e(Ce);var ya=t(Ce,2),Wa=t(a(ya),2);{var Ea=y=>{var M=_i(),W=a(M,!0);e(M),u(()=>l(W,i.session.notes)),r(y,M)},La=y=>{var M=gi();r(y,M)};d(Wa,y=>{i.session.notes?y(Ea):y(La,!1)})}e(ya);var _a=t(ya,2),ua=a(_a),fa=t(a(ua),2),za=a(fa);e(fa);var pa=t(fa,2),Ga=a(pa);e(pa),e(ua);var ja=t(ua,2),qa=t(a(ja),2),Ba=a(qa);e(qa);var da=t(qa,2),Je=a(da);e(da),e(ja);var ma=t(ja,2),va=t(a(ma),2),Da=a(va);e(va);var na=t(va,2),ca=a(na);e(na),e(ma);var oa=t(ma,2);{var Ta=y=>{var M=ui(),W=t(a(M),2),pe=a(W);e(W);var ce=t(W,2),Se=a(ce);e(ce),e(M),u(()=>{je(pe,`width: ${i.session.openGrip/5*100}%`),l(Se,`${i.session.openGrip??""}/5`)}),r(y,M)};d(oa,y=>{i.session.openGrip&&y(Ta)})}var Ma=t(oa,2);{var Ia=y=>{var M=fi(),W=t(a(M),2),pe=a(W);e(W);var ce=t(W,2),Se=a(ce);e(ce),e(M),u(()=>{je(pe,`width: ${i.session.crimpGrip/5*100}%`),l(Se,`${i.session.crimpGrip??""}/5`)}),r(y,M)};d(Ma,y=>{i.session.crimpGrip&&y(Ia)})}var Oa=t(Ma,2);{var Ra=y=>{var M=pi(),W=t(a(M),2),pe=a(W);e(W);var ce=t(W,2),Se=a(ce);e(ce),e(M),u(()=>{je(pe,`width: ${i.session.pinchGrip/5*100}%`),l(Se,`${i.session.pinchGrip??""}/5`)}),r(y,M)};d(Oa,y=>{i.session.pinchGrip&&y(Ra)})}var Ca=t(Oa,2);{var Ha=y=>{var M=mi(),W=t(a(M),2),pe=a(W);e(W);var ce=t(W,2),Se=a(ce);e(ce),e(M),u(()=>{je(pe,`width: ${i.session.sloperGrip/5*100}%`),l(Se,`${i.session.sloperGrip??""}/5`)}),r(y,M)};d(Ca,y=>{i.session.sloperGrip&&y(Ha)})}var Na=t(Ca,2);{var Va=y=>{var M=hi(),W=t(a(M),2),pe=a(W);e(W);var ce=t(W,2),Se=a(ce);e(ce),e(M),u(()=>{je(pe,`width: ${i.session.jugGrip/5*100}%`),l(Se,`${i.session.jugGrip??""}/5`)}),r(y,M)};d(Na,y=>{i.session.jugGrip&&y(Va)})}e(_a);var Ye=t(_a,2),ha=t(a(Ye),2),Za=a(ha);qe(Za,17,()=>i.session.climbs||[],Me,(y,M,W)=>{{let pe=Xe(()=>i.session.climbingType==="Mixed");Qt(y,{get climb(){return s(M)},onDelete:()=>void 0,onUpdate:ce=>void 0,get showClimbType(){return s(pe)}})}});var U=t(Za,2);{var se=y=>{var M=bi();r(y,M)};d(U,y=>{(i.session.climbs||[]).length===0&&y(se)})}e(ha),e(Ye),e(oe),u(()=>{je(za,`width: ${i.session.fingerLoad/5*100}%`),l(Ga,`${i.session.fingerLoad??""}/5`),je(Ba,`width: ${i.session.shoulderLoad/5*100}%`),l(Je,`${i.session.shoulderLoad??""}/5`),je(Da,`width: ${i.session.forearmLoad/5*100}%`),l(ca,`${i.session.forearmLoad??""}/5`)}),ra(3,oe,()=>la,()=>({duration:150})),r(z,oe)};d(C,z=>{s(m)&&z(X)})}var ve=t(C,2);Ja(ve,{get isOpen(){return s(f)},title:"Delete Session",message:"Are you sure you want to delete this session? This action cannot be undone.",onConfirm:J,onCancel:()=>v(f,!1)});var fe=t(ve,2);Ya(fe,{get isOpen(){return s(S)},activityType:"outdoor_climb",get initialData(){return i.session},onClose:p,onSaved:F}),e(w),u((z,oe,Ce)=>{K=ia(w,1,"session-card svelte-d5hg2r",null,K,{expanded:s(m)}),Ue(q,"aria-expanded",s(m)),l(Q,z),l(ie,oe),l(ne,Ce),l(Z,`${i.session.area??""} `),l(G,`üïí ${(i.session.time||"12:00")??""}`),l(T,i.session.climbingType),l(De,`${s(N)??""} climbs`),Ue(ae,"title",`Finger Load: ${i.session.fingerLoad??""}`),l(ye,i.session.fingerLoad),Ue(Ne,"title",`Shoulder Load: ${i.session.shoulderLoad??""}`),l(Be,i.session.shoulderLoad),Ue(ue,"title",`Forearm Load: ${i.session.forearmLoad??""}`),l(he,i.session.forearmLoad),l(le,s(m)?"‚ñ≤":"‚ñº")},[()=>new Date(i.session.date).getDate(),()=>new Date(i.session.date).toLocaleDateString(void 0,{month:"short"}),()=>new Date(i.session.date).getFullYear()]),r(_e,w),Qe()}Ze(["click","keydown"]);var ki=n('<span class="spinner svelte-1s7jdlh"></span> Fetching...',1),Si=n('<div class="error-banner svelte-1s7jdlh"> </div>'),qi=n('<small class="svelte-1s7jdlh">Try adjusting your filters.</small>'),Di=n('<div class="empty-state svelte-1s7jdlh"><p class="svelte-1s7jdlh">No outdoor climbing sessions found.</p> <!></div>'),Ti=n('<div class="load-more-container svelte-1s7jdlh"><button class="load-more-btn svelte-1s7jdlh"> </button></div>'),Ci=n('<div class="view-container svelte-1s7jdlh"><div class="view-header svelte-1s7jdlh"><h2 class="view-title svelte-1s7jdlh">‚õ∞Ô∏è Outdoor Climbing History</h2> <div class="header-actions svelte-1s7jdlh"><button class="action-btn secondary svelte-1s7jdlh" title="Export filtered data to CSV">üì• Export</button> <button class="action-btn svelte-1s7jdlh" title="Fetch data from cloud"><!></button></div></div> <!> <!> <div class="info-bar svelte-1s7jdlh"><div class="legend-wrapper svelte-1s7jdlh"><!></div> <div class="load-key svelte-1s7jdlh"><span class="key-label svelte-1s7jdlh">Load:</span> <div class="key-item svelte-1s7jdlh"><span class="dot finger svelte-1s7jdlh"></span> Finger</div> <div class="key-item svelte-1s7jdlh"><span class="dot shoulder svelte-1s7jdlh"></span> Shoulder</div> <div class="key-item svelte-1s7jdlh"><span class="dot forearm svelte-1s7jdlh"></span> Forearm</div></div></div> <div class="sessions-list"><!> <!> <!></div></div>');function Fi(_e,i){Ke(i,!0);let m=O(ga([])),f=O(ga([])),S=O(!1),D=O(""),g=O(ga({startDate:"",endDate:"",area:"",crag:"",climbingType:"",sessionType:"",grade:""})),j=O(20);const p=20;Ka(()=>{F()});async function F(){v(S,!0),v(D,"");try{const o=await os();o.ok&&o.data?(v(m,o.data.map(c=>({...c,activityType:"outdoor_climb"})),!0),s(m).sort((c,b)=>new Date(b.date).getTime()-new Date(c.date).getTime()),I()):v(D,o.error||"Failed to fetch data",!0)}catch(o){v(D,o instanceof Error?o.message:"Unknown error",!0)}finally{v(S,!1)}}function J(o){v(g,o,!0),I()}function I(){v(j,p),v(f,s(m).filter(o=>{if(s(g).startDate&&o.date<s(g).startDate||s(g).endDate&&o.date>s(g).endDate||s(g).area&&!o.area.toLowerCase().includes(s(g).area.toLowerCase())||s(g).crag&&!o.crag.toLowerCase().includes(s(g).crag.toLowerCase()))return!1;if(s(g).climbingType&&(o.climbingType==="Leading"?"Sport":o.climbingType)!==s(g).climbingType)if(o.climbingType==="Mixed")if(s(g).climbingType==="Bouldering"){if(!o.climbs.some(b=>!b.isSport))return!1}else if(s(g).climbingType==="Sport"||s(g).climbingType==="Trad"){if(!o.climbs.some(b=>b.isSport))return!1}else return!1;else return!1;if(s(g).sessionType&&!o.trainingTypes?.includes(s(g).sessionType))return!1;if(s(g).grade){const c=s(g).grade.trim().toLowerCase();if(!o.climbs.some(G=>G.grade.trim().toLowerCase()===c))return!1}return!0}),!0)}function te(){v(j,s(j)+p)}var N=Ci(),R=a(N),w=t(a(R),2),K=a(w);K.__click=()=>Qa(s(f),"outdoor_climbs");var q=t(K,2);q.__click=F;var E=a(q);{var B=o=>{var c=ki();Pa(),r(o,c)},L=o=>{var c=Sa("‚òÅÔ∏è Fetch Data");r(o,c)};d(E,o=>{s(S)?o(B):o(L,!1)})}e(q),e(w),e(R);var Q=t(R,2);{var H=o=>{var c=Si(),b=a(c,!0);e(c),u(()=>l(b,s(D))),ra(3,c,()=>la),r(o,c)};d(Q,o=>{s(D)&&o(H)})}var ie=t(Q,2);Rt(ie,{onFilterParamsChange:J});var de=t(ie,2),ne=a(de),k=a(ne);as(k),e(ne),Pa(2),e(de);var A=t(de,2),Y=a(A);qe(Y,17,()=>s(f).slice(0,s(j)),o=>o.id,(o,c)=>{wi(o,{get session(){return s(c)},onDelete:F})});var Z=t(Y,2);{var _=o=>{var c=Di(),b=t(a(c),2);{var G=ge=>{var T=qi();r(ge,T)};d(b,ge=>{s(m).length>0&&ge(G)})}e(c),r(o,c)};d(Z,o=>{s(f).length===0&&o(_)})}var h=t(Z,2);{var P=o=>{var c=Ti(),b=a(c);b.__click=te;var G=a(b);e(b),e(c),u(()=>l(G,`Load More (${s(f).length-s(j)} remaining)`)),r(o,c)};d(h,o=>{s(j)<s(f).length&&o(P)})}e(A),e(N),u(()=>q.disabled=s(S)),r(_e,N),Qe()}Ze(["click"]);var Ei=n('<span class="chevron svelte-11rkzid">‚ñ≤</span>'),Li=n('<span class="chevron svelte-11rkzid">‚ñº</span>'),zi=n('<div class="filter-body svelte-11rkzid"><div class="filter-grid svelte-11rkzid"><div class="filter-item svelte-11rkzid"><label for="start-date" class="svelte-11rkzid">Start Date</label> <input type="date" id="start-date" class="svelte-11rkzid"/></div> <div class="filter-item svelte-11rkzid"><label for="end-date" class="svelte-11rkzid">End Date</label> <input type="date" id="end-date" class="svelte-11rkzid"/></div> <div class="filter-item svelte-11rkzid"><label for="name-filter" class="svelte-11rkzid">Session Name</label> <input type="text" id="name-filter" placeholder="e.g. Leg Day" class="svelte-11rkzid"/></div> <div class="filter-item svelte-11rkzid"><label for="block-filter" class="svelte-11rkzid">Training Block</label> <select id="block-filter" class="svelte-11rkzid"><option>All Blocks</option><option>Strength</option><option>Power</option><option>Power Endurance</option><option>Muscular Endurance</option></select></div></div> <div class="filter-actions svelte-11rkzid"><button class="reset-btn svelte-11rkzid">Reset Filters</button></div></div>'),Gi=n('<div class="filter-container svelte-11rkzid"><button class="filter-header svelte-11rkzid"><div class="header-content svelte-11rkzid"><span class="icon svelte-11rkzid">üîç</span> <span class="title svelte-11rkzid">Filters</span> <!></div></button> <!></div>');function ji(_e,i){Ke(i,!0);let m=O(!1),f=O(""),S=O(""),D=O(""),g=O("");function j(){v(m,!s(m))}function p(){v(f,""),v(S,""),v(D,""),v(g,""),F()}function F(){i.onFilterParamsChange({startDate:s(f),endDate:s(S),name:s(D),trainingBlock:s(g)})}var J=Gi(),I=a(J);I.__click=j;var te=a(I),N=t(a(te),4);{var R=E=>{var B=Ei();r(E,B)},w=E=>{var B=Li();r(E,B)};d(N,E=>{s(m)?E(R):E(w,!1)})}e(te),e(I);var K=t(I,2);{var q=E=>{var B=zi(),L=a(B),Q=a(L),H=t(a(Q),2);sa(H),H.__change=F,e(Q);var ie=t(Q,2),de=t(a(ie),2);sa(de),de.__change=F,e(ie);var ne=t(ie,2),k=t(a(ne),2);sa(k),k.__input=F,e(ne);var A=t(ne,2),Y=t(a(A),2);Y.__change=F;var Z=a(Y);Z.value=Z.__value="";var _=t(Z);_.value=_.__value="Strength";var h=t(_);h.value=h.__value="Power";var P=t(h);P.value=P.__value="Power Endurance";var o=t(P);o.value=o.__value="Muscular Endurance",e(Y),e(A),e(L);var c=t(L,2),b=a(c);b.__click=p,e(c),e(B),ta(H,()=>s(f),G=>v(f,G)),ta(de,()=>s(S),G=>v(S,G)),ta(k,()=>s(D),G=>v(D,G)),ka(Y,()=>s(g),G=>v(g,G)),ra(3,B,()=>la,()=>({duration:200})),r(E,B)};d(K,E=>{s(m)&&E(q)})}e(J),u(()=>Ue(I,"aria-expanded",s(m))),r(_e,J),Qe()}Ze(["click","change","input"]);var Mi=n('<span class="block-tag svelte-cirrfc"> </span>'),Oi=n('<span class="status-icon pending svelte-cirrfc" title="Waiting to sync">üîÑ</span>'),Ni=n('<span class="status-icon error svelte-cirrfc" title="Sync error">‚ö†Ô∏è</span>'),Ai=n('<div class="bw-info svelte-cirrfc"><span class="label svelte-cirrfc">Bodyweight:</span> </div>'),Pi=n('<span class="muscle-tag svelte-cirrfc"> </span>'),Bi=n('<span class="muscle-tag svelte-cirrfc"> </span>'),Ii=n('<div class="muscle-tags svelte-cirrfc"><!> <!></div>'),Ri=n('<span class="tag w svelte-cirrfc">W</span>'),Vi=n('<span class="tag f svelte-cirrfc">F</span>'),Ui=n('<span class="tag d svelte-cirrfc">D</span>'),Wi=n('<div><span class="set-num svelte-cirrfc"></span> <!> <!> <!> <span class="val svelte-cirrfc"><span class="weight"> </span> <span class="x svelte-cirrfc">x</span> <span class="reps"> </span></span></div>'),Hi=n('<div class="exercise-item svelte-cirrfc"><div class="exercise-header svelte-cirrfc"><h4 class="svelte-cirrfc"> </h4> <!></div> <div class="sets-grid svelte-cirrfc"></div></div>'),Ji=n('<div class="subcategory-group svelte-cirrfc"><h5 class="subcategory-header svelte-cirrfc"> </h5> <!></div>'),Yi=n('<div class="category-group svelte-cirrfc"><h4 class="category-header svelte-cirrfc"> </h4> <!></div>'),Zi=n('<div class="card-body svelte-cirrfc"><!> <div class="exercises-list svelte-cirrfc"></div></div>'),Xi=n('<div><div class="card-header svelte-cirrfc" role="button" tabindex="0"><div class="header-main svelte-cirrfc"><div class="date-badge svelte-cirrfc"><span class="day svelte-cirrfc"> </span> <span class="month svelte-cirrfc"> </span> <span class="year svelte-cirrfc"> </span></div> <div class="session-info svelte-cirrfc"><div class="session-text"><div class="name-display svelte-cirrfc"><h3 class="name svelte-cirrfc"> </h3></div> <div class="session-meta svelte-cirrfc"><span class="time-tag svelte-cirrfc"> </span> <!> <span class="stat svelte-cirrfc"> </span> <span class="stat svelte-cirrfc"> </span> <span class="stat svelte-cirrfc"> </span></div></div></div></div> <div class="header-actions svelte-cirrfc"><div class="header-status"><!></div> <button class="btn-icon edit-session svelte-cirrfc" title="Edit Session">‚úèÔ∏è</button> <button class="btn-icon delete-session svelte-cirrfc" title="Delete Session">üóëÔ∏è</button> <span class="chevron svelte-cirrfc"> </span></div></div> <!></div> <!> <!>',1);function Ki(_e,i){Ke(i,!0);let m=O(!1),f=O(!1),S=O(!1);function D(){v(m,!s(m))}function g(){v(f,!0)}function j(){v(S,!0)}function p(){v(S,!1)}async function F(){v(S,!1),await Ua()}async function J(){try{const x=await ds(i.session.id);x.ok?(v(f,!1),i.onDelete()):(console.error("Failed to delete session:",x.error),alert("Failed to delete session"))}catch(x){console.error("Exception deleting session:",x),alert("Error deleting session")}}function I(x){return Ss.find(le=>le.name===x)}function te(x){switch(x){case"Strength":return{bg:"rgba(99, 102, 241, 0.1)",color:"#4338ca",border:"rgba(99, 102, 241, 0.2)"};case"Power":return{bg:"rgba(239, 68, 68, 0.1)",color:"#b91c1c",border:"rgba(239, 68, 68, 0.2)"};case"Power Endurance":return{bg:"rgba(245, 158, 11, 0.1)",color:"#b45309",border:"rgba(245, 158, 11, 0.2)"};case"Muscular Endurance":return{bg:"rgba(16, 185, 129, 0.1)",color:"#047857",border:"rgba(16, 185, 129, 0.2)"};default:return{bg:"rgba(107, 114, 128, 0.1)",color:"#374151",border:"rgba(107, 114, 128, 0.2)"}}}let N=Xe(()=>i.session.exercises?.length??0),R=Xe(()=>(i.session.exercises||[]).reduce((x,le)=>x+(le.sets?.length||0),0)),w=Xe(()=>(i.session.exercises||[]).reduce((x,le)=>x+(le.sets||[]).reduce((C,X)=>C+(X.weight||0)*(X.reps||0),0),0)),K=Xe(()=>(i.session.exercises||[]).reduce((x,le)=>{const C=I(le.name),X=C?.category||"Other",ve=C?.subcategory||"Misc";return x[X]||(x[X]={}),x[X][ve]||(x[X][ve]=[]),x[X][ve].push(le),x},{}));var q=Xi(),E=Pe(q);let B;var L=a(E);L.__click=D,L.__keydown=x=>x.key==="Enter"&&D();var Q=a(L),H=a(Q),ie=a(H),de=a(ie,!0);e(ie);var ne=t(ie,2),k=a(ne,!0);e(ne);var A=t(ne,2),Y=a(A,!0);e(A),e(H);var Z=t(H,2),_=a(Z),h=a(_),P=a(h),o=a(P,!0);e(P),e(h);var c=t(h,2),b=a(c),G=a(b);e(b);var ge=t(b,2);{var T=x=>{const le=Xe(()=>te(i.session.trainingBlock));var C=Mi(),X=a(C,!0);e(C),u(()=>{je(C,`--bg-color: ${s(le).bg??""}; --text-color: ${s(le).color??""}; --border-color: ${s(le).border??""};`),l(X,i.session.trainingBlock)}),r(x,C)};d(ge,x=>{i.session.trainingBlock&&x(T)})}var $=t(ge,2),me=a($);e($);var De=t($,2),xe=a(De);e(De);var Fe=t(De,2),ee=a(Fe);e(Fe),e(c),e(_),e(Z),e(Q);var ae=t(Q,2),ye=a(ae),Ne=a(ye);{var Be=x=>{var le=Oi();r(x,le)},ue=x=>{var le=Re(),C=Pe(le);{var X=ve=>{var fe=Ni();r(ve,fe)};d(C,ve=>{i.session.syncStatus==="error"&&ve(X)},!0)}r(x,le)};d(Ne,x=>{i.session.syncStatus==="pending"?x(Be):x(ue,!1)})}e(ye);var he=t(ye,2);he.__click=x=>{x.stopPropagation(),j()};var be=t(he,2);be.__click=x=>{x.stopPropagation(),g()};var Ee=t(be,2),we=a(Ee,!0);e(Ee),e(ae),e(L);var ze=t(L,2);{var Te=x=>{var le=Zi(),C=a(le);{var X=fe=>{var z=Ai(),oe=t(a(z));e(z),u(()=>l(oe,` ${i.session.bodyweight??""}kg`)),r(fe,z)};d(C,fe=>{i.session.bodyweight&&fe(X)})}var ve=t(C,2);qe(ve,21,()=>Object.entries(s(K)),Me,(fe,z)=>{var oe=Xe(()=>$a(s(z),2));let Ce=()=>s(oe)[0],Ie=()=>s(oe)[1];var Ae=Yi(),$e=a(Ae),ke=a($e,!0);e($e);var Oe=t($e,2);qe(Oe,17,()=>Object.entries(Ie()),Me,(Le,He)=>{var Ge=Xe(()=>$a(s(He),2));let We=()=>s(Ge)[0],ba=()=>s(Ge)[1];var Fa=Ji(),ya=a(Fa),Wa=a(ya,!0);e(ya);var Ea=t(ya,2);qe(Ea,17,ba,Me,(La,_a)=>{const ua=Xe(()=>I(s(_a).name));var fa=Hi(),za=a(fa),pa=a(za),Ga=a(pa,!0);e(pa);var ja=t(pa,2);{var qa=da=>{var Je=Ii(),ma=a(Je);qe(ma,17,()=>s(ua).targetMuscles.slice(0,3),Me,(na,ca)=>{var oa=Pi(),Ta=a(oa,!0);e(oa),u(()=>l(Ta,s(ca))),r(na,oa)});var va=t(ma,2);{var Da=na=>{var ca=Bi(),oa=a(ca);e(ca),u(()=>l(oa,`+${s(ua).targetMuscles.length-3}`)),r(na,ca)};d(va,na=>{s(ua).targetMuscles.length>3&&na(Da)})}e(Je),r(da,Je)};d(ja,da=>{s(ua)&&da(qa)})}e(za);var Ba=t(za,2);qe(Ba,21,()=>s(_a).sets,Me,(da,Je,ma)=>{var va=Wi();let Da;var na=a(va);na.textContent=ma+1;var ca=t(na,2);{var oa=Ye=>{var ha=Ri();r(Ye,ha)};d(ca,Ye=>{s(Je).isWarmup&&Ye(oa)})}var Ta=t(ca,2);{var Ma=Ye=>{var ha=Vi();r(Ye,ha)};d(Ta,Ye=>{s(Je).isFailure&&Ye(Ma)})}var Ia=t(Ta,2);{var Oa=Ye=>{var ha=Ui();r(Ye,ha)};d(Ia,Ye=>{s(Je).isDropSet&&Ye(Oa)})}var Ra=t(Ia,2),Ca=a(Ra),Ha=a(Ca);e(Ca);var Na=t(Ca,4),Va=a(Na,!0);e(Na),e(Ra),e(va),u(()=>{Da=ia(va,1,"set-pill svelte-cirrfc",null,Da,{completed:s(Je).completed,warmup:s(Je).isWarmup}),l(Ha,`${s(Je).weight??""}kg`),l(Va,s(Je).reps)}),r(da,va)}),e(Ba),e(fa),u(()=>l(Ga,s(_a).name)),r(La,fa)}),e(Fa),u(()=>l(Wa,We())),r(Le,Fa)}),e(Ae),u(()=>l(ke,Ce())),r(fe,Ae)}),e(ve),e(le),ra(3,le,()=>la,()=>({duration:150})),r(x,le)};d(ze,x=>{s(m)&&x(Te)})}e(E);var V=t(E,2);Ja(V,{get isOpen(){return s(f)},title:"Delete Session",message:"Are you sure you want to delete this session? This cannot be undone.",onConfirm:J,onCancel:()=>v(f,!1)});var re=t(V,2);Ya(re,{get isOpen(){return s(S)},activityType:"gym_session",get initialData(){return i.session},onClose:p,onSaved:F}),u((x,le,C,X)=>{B=ia(E,1,"session-card svelte-cirrfc",null,B,{expanded:s(m)}),Ue(L,"aria-expanded",s(m)),l(de,x),l(k,le),l(Y,C),l(o,i.session.name),l(G,`üïí ${(i.session.time||"12:00")??""}`),l(me,`${s(N)??""} Exercises`),l(xe,`${s(R)??""} Sets`),l(ee,`~${X??""}kg Vol`),l(we,s(m)?"‚ñ≤":"‚ñº")},[()=>new Date(i.session.date).getDate(),()=>new Date(i.session.date).toLocaleDateString("en-GB",{month:"short"}),()=>new Date(i.session.date).getFullYear(),()=>Math.round(s(w)).toLocaleString()]),r(_e,q),Qe()}Ze(["click","keydown"]);var Qi=n('<span class="spinner svelte-133enjd"></span> Fetching...',1),$i=n('<div class="error-banner svelte-133enjd"> </div>'),er=n('<small class="svelte-133enjd">Try adjusting your filters.</small>'),ar=n('<div class="empty-state svelte-133enjd"><p class="svelte-133enjd">No gym sessions found.</p> <!></div>'),sr=n('<div class="load-more-container svelte-133enjd"><button class="load-more-btn svelte-133enjd"> </button></div>'),tr=n('<div class="view-container svelte-133enjd"><div class="view-header svelte-133enjd"><h2 class="view-title svelte-133enjd">üèãÔ∏è Gym Session History</h2> <div class="header-actions svelte-133enjd"><button class="action-btn secondary svelte-133enjd" title="Export filtered data to CSV">üì• Export</button> <button class="action-btn svelte-133enjd" title="Fetch data from cloud"><!></button></div></div> <!> <!> <div class="sessions-list"><!> <!> <!></div></div>');function ir(_e,i){Ke(i,!0);let m=O(ga([])),f=O(ga([])),S=O(!1),D=O(""),g=O(ga({startDate:"",endDate:"",name:"",trainingBlock:""})),j=O(20);const p=20;Ka(()=>{F()});async function F(){v(S,!0),v(D,"");try{const _=await cs();_.ok&&_.data?(v(m,_.data.map(h=>({...h,activityType:"gym_session"})),!0),s(m).sort((h,P)=>new Date(P.date).getTime()-new Date(h.date).getTime()),I()):v(D,_.error||"Failed to fetch data",!0)}catch(_){v(D,_ instanceof Error?_.message:"Unknown error",!0)}finally{v(S,!1)}}function J(_){v(g,_,!0),I()}function I(){v(j,p),v(f,s(m).filter(_=>!(s(g).startDate&&_.date<s(g).startDate||s(g).endDate&&_.date>s(g).endDate||s(g).name&&!_.name.toLowerCase().includes(s(g).name.toLowerCase())||s(g).trainingBlock&&_.trainingBlock!==s(g).trainingBlock)),!0)}function te(){v(j,s(j)+p)}var N=tr(),R=a(N),w=t(a(R),2),K=a(w);K.__click=()=>Qa(s(f),"gym_sessions");var q=t(K,2);q.__click=F;var E=a(q);{var B=_=>{var h=Qi();Pa(),r(_,h)},L=_=>{var h=Sa("‚òÅÔ∏è Fetch Data");r(_,h)};d(E,_=>{s(S)?_(B):_(L,!1)})}e(q),e(w),e(R);var Q=t(R,2);{var H=_=>{var h=$i(),P=a(h,!0);e(h),u(()=>l(P,s(D))),ra(3,h,()=>la),r(_,h)};d(Q,_=>{s(D)&&_(H)})}var ie=t(Q,2);ji(ie,{onFilterParamsChange:J});var de=t(ie,2),ne=a(de);qe(ne,17,()=>s(f).slice(0,s(j)),_=>_.id,(_,h)=>{Ki(_,{get session(){return s(h)},onDelete:F})});var k=t(ne,2);{var A=_=>{var h=ar(),P=t(a(h),2);{var o=c=>{var b=er();r(c,b)};d(P,c=>{s(m).length>0&&c(o)})}e(h),r(_,h)};d(k,_=>{s(f).length===0&&_(A)})}var Y=t(k,2);{var Z=_=>{var h=sr(),P=a(h);P.__click=te;var o=a(P);e(P),e(h),u(()=>l(o,`Load More (${s(f).length-s(j)} remaining)`)),r(_,h)};d(Y,_=>{s(j)<s(f).length&&_(Z)})}e(de),e(N),u(()=>q.disabled=s(S)),r(_e,N),Qe()}Ze(["click"]);var rr=n('<div class="load-summary svelte-1tiisng"><div class="load-badge finger svelte-1tiisng"> </div> <div class="load-badge shoulder svelte-1tiisng"> </div> <div class="load-badge forearm svelte-1tiisng"> </div></div>'),nr=n('<div class="metric svelte-1tiisng"><span class="label svelte-1tiisng">Open Grip</span> <div class="bar-container svelte-1tiisng"><div class="bar-fill svelte-1tiisng"></div></div> <span class="score svelte-1tiisng"> </span></div>'),lr=n('<div class="metric svelte-1tiisng"><span class="label svelte-1tiisng">Crimp Grip</span> <div class="bar-container svelte-1tiisng"><div class="bar-fill svelte-1tiisng"></div></div> <span class="score svelte-1tiisng"> </span></div>'),vr=n('<div class="metric svelte-1tiisng"><span class="label svelte-1tiisng">Pinch Grip</span> <div class="bar-container svelte-1tiisng"><div class="bar-fill svelte-1tiisng"></div></div> <span class="score svelte-1tiisng"> </span></div>'),or=n('<div class="metric svelte-1tiisng"><span class="label svelte-1tiisng">Sloper Grip</span> <div class="bar-container svelte-1tiisng"><div class="bar-fill svelte-1tiisng"></div></div> <span class="score svelte-1tiisng"> </span></div>'),dr=n('<div class="metric svelte-1tiisng"><span class="label svelte-1tiisng">Jug Grip</span> <div class="bar-container svelte-1tiisng"><div class="bar-fill svelte-1tiisng"></div></div> <span class="score svelte-1tiisng"> </span></div>'),cr=n('<div class="metrics-container svelte-1tiisng"><div class="metric svelte-1tiisng"><span class="label svelte-1tiisng">Finger Load</span> <div class="bar-container svelte-1tiisng"><div class="bar-fill svelte-1tiisng"></div></div> <span class="score svelte-1tiisng"> </span></div> <div class="metric svelte-1tiisng"><span class="label svelte-1tiisng">Shoulder Load</span> <div class="bar-container svelte-1tiisng"><div class="bar-fill svelte-1tiisng"></div></div> <span class="score svelte-1tiisng"> </span></div> <div class="metric svelte-1tiisng"><span class="label svelte-1tiisng">Forearm Load</span> <div class="bar-container svelte-1tiisng"><div class="bar-fill svelte-1tiisng"></div></div> <span class="score svelte-1tiisng"> </span></div> <!> <!> <!> <!> <!></div>'),_r=n('<span class="set-tag svelte-1tiisng"> <span class="x svelte-1tiisng">x</span> </span>'),gr=n('<div class="ex-notes svelte-1tiisng"> </div>'),ur=n('<div class="exercise-item svelte-1tiisng"><div class="ex-header svelte-1tiisng"><div class="ex-title-group svelte-1tiisng"><span class="ex-name svelte-1tiisng"> </span> <span class="ex-grip svelte-1tiisng"> </span></div></div> <div class="ex-sets svelte-1tiisng"></div> <!></div>'),fr=n('<div class="card-body svelte-1tiisng"><!> <div class="exercises-list svelte-1tiisng"></div></div>'),pr=n('<div><div class="card-header svelte-1tiisng" role="button" tabindex="0"><div class="header-main svelte-1tiisng"><span class="session-date svelte-1tiisng"> <span class="time-tag svelte-1tiisng"> </span></span> <span class="meta svelte-1tiisng"><!> </span> <!></div> <div class="header-status svelte-1tiisng"><span>‚óè</span> <button class="btn-icon edit-session svelte-1tiisng" title="Edit Session">‚úèÔ∏è</button> <button class="btn-icon delete-btn svelte-1tiisng" title="Delete Session">üóëÔ∏è</button> <span class="chevron svelte-1tiisng"> </span></div></div> <!></div> <!> <!>',1);function mr(_e,i){Ke(i,!0);let m=O(!1),f=O(!1),S=O(!1);function D(){v(m,!s(m))}function g(){v(f,!0)}function j(){v(S,!0)}function p(){v(S,!1)}async function F(){v(S,!1),await Ua()}async function J(){try{const T=await _s(i.session.id);T.ok?(v(f,!1),i.onDelete()):(console.error("Failed to delete session:",T.error),alert("Failed to delete session"))}catch(T){console.error("Exception deleting session:",T),alert("Error deleting session")}}function I(T){return T.exercises.reduce(($,me)=>$+me.details.length,0)}var te=pr(),N=Pe(te);let R;var w=a(N);w.__click=D,w.__keydown=T=>T.key==="Enter"&&D();var K=a(w),q=a(K),E=a(q),B=t(E),L=a(B,!0);e(B),e(q);var Q=t(q,2),H=a(Q);{var ie=T=>{var $=Sa();u(()=>l($,`${i.session.location??""} ¬∑`)),r(T,$)};d(H,T=>{i.session.location&&i.session.location!=="N/A"&&i.session.location!=="Home"&&T(ie)})}var de=t(H);e(Q);var ne=t(Q,2);{var k=T=>{var $=rr(),me=a($),De=a(me,!0);e(me);var xe=t(me,2),Fe=a(xe,!0);e(xe);var ee=t(xe,2),ae=a(ee,!0);e(ee),e($),u(()=>{Ue(me,"title",`Finger Load: ${i.session.fingerLoad??""}`),l(De,i.session.fingerLoad),Ue(xe,"title",`Shoulder Load: ${i.session.shoulderLoad??""}`),l(Fe,i.session.shoulderLoad||"-"),Ue(ee,"title",`Forearm Load: ${i.session.forearmLoad??""}`),l(ae,i.session.forearmLoad||"-")}),r(T,$)};d(ne,T=>{i.session.fingerLoad&&T(k)})}e(K);var A=t(K,2),Y=a(A);let Z;var _=t(Y,2);_.__click=T=>{T.stopPropagation(),j()};var h=t(_,2);h.__click=T=>{T.stopPropagation(),g()};var P=t(h,2),o=a(P,!0);e(P),e(A),e(w);var c=t(w,2);{var b=T=>{var $=fr(),me=a($);{var De=Fe=>{var ee=cr(),ae=a(ee),ye=t(a(ae),2),Ne=a(ye);e(ye);var Be=t(ye,2),ue=a(Be);e(Be),e(ae);var he=t(ae,2),be=t(a(he),2),Ee=a(be);e(be);var we=t(be,2),ze=a(we);e(we),e(he);var Te=t(he,2),V=t(a(Te),2),re=a(V);e(V);var x=t(V,2),le=a(x);e(x),e(Te);var C=t(Te,2);{var X=ke=>{var Oe=nr(),Le=t(a(Oe),2),He=a(Le);e(Le);var Ge=t(Le,2),We=a(Ge);e(Ge),e(Oe),u(()=>{je(He,`width: ${i.session.openGrip/5*100}%`),l(We,`${i.session.openGrip??""}/5`)}),r(ke,Oe)};d(C,ke=>{i.session.openGrip&&ke(X)})}var ve=t(C,2);{var fe=ke=>{var Oe=lr(),Le=t(a(Oe),2),He=a(Le);e(Le);var Ge=t(Le,2),We=a(Ge);e(Ge),e(Oe),u(()=>{je(He,`width: ${i.session.crimpGrip/5*100}%`),l(We,`${i.session.crimpGrip??""}/5`)}),r(ke,Oe)};d(ve,ke=>{i.session.crimpGrip&&ke(fe)})}var z=t(ve,2);{var oe=ke=>{var Oe=vr(),Le=t(a(Oe),2),He=a(Le);e(Le);var Ge=t(Le,2),We=a(Ge);e(Ge),e(Oe),u(()=>{je(He,`width: ${i.session.pinchGrip/5*100}%`),l(We,`${i.session.pinchGrip??""}/5`)}),r(ke,Oe)};d(z,ke=>{i.session.pinchGrip&&ke(oe)})}var Ce=t(z,2);{var Ie=ke=>{var Oe=or(),Le=t(a(Oe),2),He=a(Le);e(Le);var Ge=t(Le,2),We=a(Ge);e(Ge),e(Oe),u(()=>{je(He,`width: ${i.session.sloperGrip/5*100}%`),l(We,`${i.session.sloperGrip??""}/5`)}),r(ke,Oe)};d(Ce,ke=>{i.session.sloperGrip&&ke(Ie)})}var Ae=t(Ce,2);{var $e=ke=>{var Oe=dr(),Le=t(a(Oe),2),He=a(Le);e(Le);var Ge=t(Le,2),We=a(Ge);e(Ge),e(Oe),u(()=>{je(He,`width: ${i.session.jugGrip/5*100}%`),l(We,`${i.session.jugGrip??""}/5`)}),r(ke,Oe)};d(Ae,ke=>{i.session.jugGrip&&ke($e)})}e(ee),u(()=>{je(Ne,`width: ${(i.session.fingerLoad||0)/5*100}%`),l(ue,`${i.session.fingerLoad??""}/5`),je(Ee,`width: ${(i.session.shoulderLoad||0)/5*100}%`),l(ze,`${(i.session.shoulderLoad||0)??""}/5`),je(re,`width: ${(i.session.forearmLoad||0)/5*100}%`),l(le,`${(i.session.forearmLoad||0)??""}/5`)}),r(Fe,ee)};d(me,Fe=>{i.session.fingerLoad&&Fe(De)})}var xe=t(me,2);qe(xe,21,()=>i.session.exercises||[],Me,(Fe,ee)=>{var ae=ur(),ye=a(ae),Ne=a(ye),Be=a(Ne),ue=a(Be,!0);e(Be);var he=t(Be,2),be=a(he,!0);e(he),e(Ne),e(ye);var Ee=t(ye,2);qe(Ee,21,()=>s(ee).details,Me,(Te,V)=>{var re=_r(),x=a(re),le=t(x,2);e(re),u(()=>{l(x,`${s(V).weight>0?`+${s(V).weight}kg`:"BW"} `),l(le,` ${s(V).reps??""}s/reps`)}),r(Te,re)}),e(Ee);var we=t(Ee,2);{var ze=Te=>{var V=gr(),re=a(V);e(V),u(()=>l(re,`"${s(ee).notes??""}"`)),r(Te,V)};d(we,Te=>{s(ee).notes&&Te(ze)})}e(ae),u(()=>{l(ue,s(ee).name),l(be,s(ee).gripType)}),r(Fe,ae)}),e(xe),e($),ra(3,$,()=>la,()=>({duration:150})),r(T,$)};d(c,T=>{s(m)&&T(b)})}e(N);var G=t(N,2);Ja(G,{get isOpen(){return s(f)},title:"Delete Fingerboard Session",message:"Are you sure you want to delete this session? This cannot be undone.",onConfirm:J,onCancel:()=>v(f,!1)});var ge=t(G,2);Ya(ge,{get isOpen(){return s(S)},activityType:"fingerboarding",get initialData(){return i.session},onClose:p,onSaved:F}),u((T,$)=>{R=ia(N,1,"session-card svelte-1tiisng",null,R,{expanded:s(m)}),l(E,`${T??""} `),l(L,i.session.time||"12:00"),l(de,` ${i.session.exercises.length??""} Exercises ¬∑ ${$??""} Sets`),Z=ia(Y,1,"sync-dot svelte-1tiisng",null,Z,{synced:i.session.syncStatus==="synced"}),Ue(Y,"title",i.session.syncStatus==="synced"?"Synced":"Local"),l(o,s(m)?"‚ñ≤":"‚ñº")},[()=>new Date(i.session.date).toLocaleDateString(void 0,{weekday:"short",month:"short",day:"numeric",year:"numeric"}),()=>I(i.session)]),r(_e,te),Qe()}Ze(["click","keydown"]);var hr=n('<span class="spinner svelte-1szs0u9"></span> Fetching...',1),br=n('<div class="loading svelte-1szs0u9">Loading sessions...</div>'),yr=n('<div class="empty-state svelte-1szs0u9"><!></div>'),xr=n('<div class="load-more-container svelte-1szs0u9"><button class="load-more-btn svelte-1szs0u9"> </button></div>'),wr=n('<div class="timeline svelte-1szs0u9"><!> <!></div>'),kr=n('<div class="view-content svelte-1szs0u9"><div class="header svelte-1szs0u9"><h3 class="svelte-1szs0u9">ü§è Fingerboarding Log</h3> <button class="fetch-btn svelte-1szs0u9" title="Fetch data from cloud"><!></button></div> <div class="filters svelte-1szs0u9"><div class="filter-group svelte-1szs0u9"><label for="start-date" class="svelte-1szs0u9">From</label> <input type="date" id="start-date" class="svelte-1szs0u9"/></div> <div class="filter-group svelte-1szs0u9"><label for="end-date" class="svelte-1szs0u9">To</label> <input type="date" id="end-date" class="svelte-1szs0u9"/></div></div> <!></div>');function Sr(_e,i){Ke(i,!0);let m=O(ga([])),f=O(!0),S=O(""),D=O(""),g=O(20);const j=20;is(()=>{s(S),s(D),v(g,j)});async function p(){v(f,!0);try{const k=await gs();k.ok&&k.data&&v(m,k.data.map(A=>({...A,activityType:"fingerboarding",syncStatus:"synced"})).sort((A,Y)=>new Date(Y.date).getTime()-new Date(A.date).getTime()),!0)}catch(k){console.error("Failed to fetch sessions",k)}finally{v(f,!1)}}p();let F=Xe(()=>s(m).filter(k=>!(s(S)&&new Date(k.date)<new Date(s(S))||s(D)&&new Date(k.date)>new Date(s(D)))));function J(){v(g,s(g)+j)}function I(){p()}var te=kr(),N=a(te),R=t(a(N),2);R.__click=p;var w=a(R);{var K=k=>{var A=hr();Pa(),r(k,A)},q=k=>{var A=Sa("‚òÅÔ∏è Fetch Data");r(k,A)};d(w,k=>{s(f)?k(K):k(q,!1)})}e(R),e(N);var E=t(N,2),B=a(E),L=t(a(B),2);sa(L),e(B);var Q=t(B,2),H=t(a(Q),2);sa(H),e(Q),e(E);var ie=t(E,2);{var de=k=>{var A=br();r(k,A)},ne=k=>{var A=Re(),Y=Pe(A);{var Z=h=>{var P=yr(),o=a(P);{var c=G=>{var ge=Sa("No sessions match filter.");r(G,ge)},b=G=>{var ge=Sa("No fingerboarding sessions logged yet.");r(G,ge)};d(o,G=>{s(m).length>0?G(c):G(b,!1)})}e(P),r(h,P)},_=h=>{var P=wr(),o=a(P);qe(o,17,()=>s(F).slice(0,s(g)),Me,(G,ge)=>{mr(G,{get session(){return s(ge)},onDelete:I})});var c=t(o,2);{var b=G=>{var ge=xr(),T=a(ge);T.__click=J;var $=a(T);e(T),e(ge),u(()=>l($,`Load More (${s(F).length-s(g)} remaining)`)),r(G,ge)};d(c,G=>{s(g)<s(F).length&&G(b)})}e(P),r(h,P)};d(Y,h=>{s(F).length===0?h(Z):h(_,!1)},!0)}r(k,A)};d(ie,k=>{s(f)&&s(m).length===0?k(de):k(ne,!1)})}e(te),u(()=>R.disabled=s(f)),ta(L,()=>s(S),k=>v(S,k)),ta(H,()=>s(D),k=>v(D,k)),r(_e,te),Qe()}Ze(["click"]);var qr=n('<div class="notes-section svelte-5f8qag"><div class="notes-display svelte-5f8qag"><span class="note-icon svelte-5f8qag">üìù</span> <p class="svelte-5f8qag"> </p></div></div>'),Dr=n('<span class="position-badge svelte-5f8qag"> </span>'),Tr=n('<span class="climb-attempts svelte-5f8qag"> </span>'),Cr=n('<div><span class="climb-name svelte-5f8qag"> </span> <span class="climb-status"> </span> <!></div>'),Fr=n('<div class="climbs-grid svelte-5f8qag"></div>'),Er=n('<div class="round-card svelte-5f8qag"><div class="round-header svelte-5f8qag"><h4 class="svelte-5f8qag"> </h4> <!></div> <!></div>'),Lr=n('<div class="card-body svelte-5f8qag"><div class="loads-row svelte-5f8qag"><div class="load-item svelte-5f8qag"><span class="label svelte-5f8qag">Fingers</span> <div class="bar-container svelte-5f8qag"><div class="bar svelte-5f8qag"></div></div></div> <div class="load-item svelte-5f8qag"><span class="label svelte-5f8qag">Shoulders</span> <div class="bar-container svelte-5f8qag"><div class="bar svelte-5f8qag"></div></div></div> <div class="load-item svelte-5f8qag"><span class="label svelte-5f8qag">Forearms</span> <div class="bar-container svelte-5f8qag"><div class="bar svelte-5f8qag"></div></div></div></div> <!> <div class="rounds-list svelte-5f8qag"></div></div>'),zr=n('<div><div class="card-header svelte-5f8qag" role="button" tabindex="0"><div class="header-main svelte-5f8qag"><span class="session-date svelte-5f8qag"> <span class="type-tag svelte-5f8qag"> </span></span> <div class="venue-row svelte-5f8qag"><span class="venue"> </span> <span class="result-summary svelte-5f8qag"> </span></div></div> <div class="header-status svelte-5f8qag"><span>‚óè</span> <button class="btn-icon edit-session svelte-5f8qag" title="Edit Session">‚úèÔ∏è</button> <button class="btn-icon delete-btn svelte-5f8qag" title="Delete Session">üóëÔ∏è</button> <span class="chevron svelte-5f8qag"> </span></div></div> <!></div> <!> <!>',1);function Gr(_e,i){Ke(i,!0);let m=O(!1),f=O(!1),S=O(!1);function D(){v(m,!s(m))}function g(){v(f,!0)}function j(){v(S,!0)}function p(){v(S,!1)}async function F(){v(S,!1),await Ua()}async function J(){try{const T=await us(i.session.id);T.ok?(v(f,!1),await Ua()):(console.error("Failed to delete session:",T.error),alert("Failed to delete session"))}catch(T){console.error("Exception deleting session:",T),alert("Error deleting session")}}function I(T){if(!T.rounds||T.rounds.length===0)return"No rounds";const $=T.rounds[T.rounds.length-1];if($.position)return`#${$.position} ${$.name}`;if($.climbs){const me=$.climbs.filter(xe=>xe.status==="Top"||xe.status==="Flash").length,De=$.climbs.filter(xe=>xe.status==="Zone").length;return`${T.rounds.length} Rnds ¬∑ Final: ${me}T ${De+me}Z`}return $.name}function te(T){switch(T){case"Flash":return"status-flash";case"Top":return"status-top";case"Zone":return"status-zone";default:return"status-attempt"}}var N=zr(),R=Pe(N);let w;var K=a(R);K.__click=D,K.__keydown=T=>T.key==="Enter"&&D();var q=a(K),E=a(q),B=a(E),L=t(B),Q=a(L,!0);e(L),e(E);var H=t(E,2),ie=a(H),de=a(ie,!0);e(ie);var ne=t(ie,2),k=a(ne,!0);e(ne),e(H),e(q);var A=t(q,2),Y=a(A);let Z;var _=t(Y,2);_.__click=T=>{T.stopPropagation(),j()};var h=t(_,2);h.__click=T=>{T.stopPropagation(),g()};var P=t(h,2),o=a(P,!0);e(P),e(A),e(K);var c=t(K,2);{var b=T=>{var $=Lr(),me=a($),De=a(me),xe=t(a(De),2),Fe=a(xe);e(xe),e(De);var ee=t(De,2),ae=t(a(ee),2),ye=a(ae);e(ae),e(ee);var Ne=t(ee,2),Be=t(a(Ne),2),ue=a(Be);e(Be),e(Ne),e(me);var he=t(me,2);{var be=we=>{var ze=qr(),Te=a(ze),V=t(a(Te),2),re=a(V,!0);e(V),e(Te),e(ze),u(()=>l(re,i.session.notes)),r(we,ze)};d(he,we=>{i.session.notes&&we(be)})}var Ee=t(he,2);qe(Ee,21,()=>i.session.rounds,Me,(we,ze)=>{var Te=Er(),V=a(Te),re=a(V),x=a(re,!0);e(re);var le=t(re,2);{var C=fe=>{var z=Dr(),oe=a(z);e(z),u(()=>l(oe,`#${s(ze).position??""}`)),r(fe,z)};d(le,fe=>{s(ze).position&&fe(C)})}e(V);var X=t(V,2);{var ve=fe=>{var z=Fr();qe(z,21,()=>s(ze).climbs,Me,(oe,Ce)=>{var Ie=Cr(),Ae=a(Ie),$e=a(Ae,!0);e(Ae);var ke=t(Ae,2),Oe=a(ke,!0);e(ke);var Le=t(ke,2);{var He=Ge=>{var We=Tr(),ba=a(We);e(We),u(()=>l(ba,`(${s(Ce).attemptCount??""})`)),r(Ge,We)};d(Le,Ge=>{s(Ce).attemptCount>1&&Ge(He)})}e(Ie),u(Ge=>{ia(Ie,1,`climb-chip ${Ge??""}`,"svelte-5f8qag"),l($e,s(Ce).name),l(Oe,s(Ce).status)},[()=>te(s(Ce).status)]),r(oe,Ie)}),e(z),r(fe,z)};d(X,fe=>{s(ze).climbs&&s(ze).climbs.length>0&&fe(ve)})}e(Te),u(()=>l(x,s(ze).name)),r(we,Te)}),e(Ee),e($),u(()=>{je(Fe,`width: ${(i.session.fingerLoad||0)*20}%`),je(ye,`width: ${(i.session.shoulderLoad||0)*20}%`),je(ue,`width: ${(i.session.forearmLoad||0)*20}%`)}),ra(3,$,()=>la,()=>({duration:150})),r(T,$)};d(c,T=>{s(m)&&T(b)})}e(R);var G=t(R,2);Ja(G,{get isOpen(){return s(f)},title:"Delete Competition Session",message:"Are you sure you want to delete this session? This cannot be undone.",onConfirm:J,onCancel:()=>v(f,!1)});var ge=t(G,2);Ya(ge,{get isOpen(){return s(S)},activityType:"competition",get initialData(){return i.session},onClose:p,onSaved:F}),u((T,$)=>{w=ia(R,1,"session-card svelte-5f8qag",null,w,{expanded:s(m)}),l(B,`${T??""} `),l(Q,i.session.type),l(de,i.session.venue==="Other"?i.session.customVenue:i.session.venue),l(k,$),Z=ia(Y,1,"sync-dot svelte-5f8qag",null,Z,{synced:i.session.syncStatus==="synced"}),Ue(Y,"title",i.session.syncStatus==="synced"?"Synced":"Local"),l(o,s(m)?"‚ñ≤":"‚ñº")},[()=>new Date(i.session.date).toLocaleDateString(void 0,{weekday:"short",month:"short",day:"numeric",year:"numeric"}),()=>I(i.session)]),r(_e,N),Qe()}Ze(["click","keydown"]);var jr=n('<span class="spinner svelte-xyvf5r"></span> Fetching...',1),Mr=n('<div class="loading svelte-xyvf5r">Loading sessions...</div>'),Or=n('<div class="empty-state svelte-xyvf5r">No competitions logged yet.</div>'),Nr=n('<div class="load-more-container svelte-xyvf5r"><button class="load-more-btn svelte-xyvf5r"> </button></div>'),Ar=n('<div class="timeline svelte-xyvf5r"><!> <!></div>'),Pr=n('<div class="view-content svelte-xyvf5r"><div class="header svelte-xyvf5r"><h3 class="svelte-xyvf5r">üèÜ Competition Log</h3> <button class="fetch-btn svelte-xyvf5r" title="Fetch data from cloud"><!></button></div> <!></div>');function Br(_e,i){Ke(i,!0);let m=O(ga([])),f=O(!0),S=O(20);const D=20;async function g(){v(f,!0),v(S,D);try{const q=await fs();q.ok&&q.data&&v(m,q.data.map(E=>({...E,activityType:"competition",syncStatus:"synced",type:E.type,rounds:E.rounds.map(B=>({...B,climbs:B.climbs?.map(L=>({...L,status:L.status}))}))})).sort((E,B)=>new Date(B.date).getTime()-new Date(E.date).getTime()),!0)}catch(q){console.error("Failed to fetch sessions",q)}finally{v(f,!1)}}g();function j(){v(S,s(S)+D)}var p=Pr(),F=a(p),J=t(a(F),2);J.__click=g;var I=a(J);{var te=q=>{var E=jr();Pa(),r(q,E)},N=q=>{var E=Sa("‚òÅÔ∏è Fetch Data");r(q,E)};d(I,q=>{s(f)?q(te):q(N,!1)})}e(J),e(F);var R=t(F,2);{var w=q=>{var E=Mr();r(q,E)},K=q=>{var E=Re(),B=Pe(E);{var L=H=>{var ie=Or();r(H,ie)},Q=H=>{var ie=Ar(),de=a(ie);qe(de,17,()=>s(m).slice(0,s(S)),Me,(A,Y)=>{Gr(A,{get session(){return s(Y)}})});var ne=t(de,2);{var k=A=>{var Y=Nr(),Z=a(Y);Z.__click=j;var _=a(Z);e(Z),e(Y),u(()=>l(_,`Load More (${s(m).length-s(S)} remaining)`)),r(A,Y)};d(ne,A=>{s(S)<s(m).length&&A(k)})}e(ie),r(H,ie)};d(B,H=>{s(m).length===0?H(L):H(Q,!1)},!0)}r(q,E)};d(R,q=>{s(f)&&s(m).length===0?q(w):q(K,!1)})}e(p),u(()=>J.disabled=s(f)),r(_e,p),Qe()}Ze(["click"]);var Ir=n("<option> </option>"),Rr=n('<div class="view-container svelte-108px9u"><!></div>'),Vr=n('<div class="page svelte-108px9u"><div class="page-header svelte-108px9u"><div><h1 class="svelte-108px9u">üìä View Data</h1> <p class="subtitle svelte-108px9u">Browse your training history</p></div></div> <div class="content-card svelte-108px9u"><div class="form-group svelte-108px9u"><label for="activity-type" class="svelte-108px9u">Activity Type</label> <select id="activity-type" class="svelte-108px9u"><option disabled>Select an activity...</option><!></select></div> <!></div></div>');function en(_e){const i=[{value:"indoor_climb",label:"Indoor Climb",icon:"üßó"},{value:"outdoor_climb",label:"Outdoor Climb",icon:"‚õ∞Ô∏è"},{value:"gym_session",label:"Gym Session",icon:"üèãÔ∏è"},{value:"fingerboarding",label:"Fingerboarding",icon:"ü§è"},{value:"competition",label:"Competition",icon:"üèÜ"}];let m=O("");var f=Vr(),S=t(a(f),2),D=a(S),g=t(a(D),2),j=a(g);j.value=j.__value="";var p=t(j);qe(p,17,()=>i,I=>I.value,(I,te)=>{var N=Ir(),R=a(N);e(N);var w={};u(()=>{l(R,`${s(te).icon??""} ${s(te).label??""}`),w!==(w=s(te).value)&&(N.value=(N.__value=s(te).value)??"")}),r(I,N)}),e(g),e(D);var F=t(D,2);{var J=I=>{var te=Rr(),N=a(te);{var R=K=>{Ct(K,{})},w=K=>{var q=Re(),E=Pe(q);{var B=Q=>{Fi(Q,{})},L=Q=>{var H=Re(),ie=Pe(H);{var de=k=>{ir(k,{})},ne=k=>{var A=Re(),Y=Pe(A);{var Z=h=>{Sr(h,{})},_=h=>{var P=Re(),o=Pe(P);{var c=b=>{Br(b,{})};d(o,b=>{s(m)==="competition"&&b(c)},!0)}r(h,P)};d(Y,h=>{s(m)==="fingerboarding"?h(Z):h(_,!1)},!0)}r(k,A)};d(ie,k=>{s(m)==="gym_session"?k(de):k(ne,!1)},!0)}r(Q,H)};d(E,Q=>{s(m)==="outdoor_climb"?Q(B):Q(L,!1)},!0)}r(K,q)};d(N,K=>{s(m)==="indoor_climb"?K(R):K(w,!1)})}e(te),r(I,te)};d(F,I=>{s(m)&&I(J)})}e(S),e(f),ka(g,()=>s(m),I=>v(m,I)),r(_e,f)}export{en as component};
