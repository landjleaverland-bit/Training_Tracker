import{f as u,a as o,t as Ne,c as ft}from"../chunks/DFOW_6n2.js";import{o as aa}from"../chunks/b6ntCrib.js";import{p as Rt,aV as p,w as Tt,s as l,c as s,r as t,t as b,i as e,ao as mt,aW as Ft,aY as Kt,x as a,a as Et,f as it,d as Xt}from"../chunks/CLLqIroS.js";import{d as Bt,s as T,e as Mt}from"../chunks/B3P2p6-W.js";import{i as q}from"../chunks/CFKLpgVY.js";import{r as N,e as z,i as G,a as et,b as V,d as ea,s as Ct,f as sa}from"../chunks/B1uQ-_P3.js";import{i as Qt,s as Yt,b as oe,c as la,a as It,d as oa,m as Wt,e as Ut,g as ra,f as ia,h as na,j as va,k as da,l as ca,n as ua,o as _a,p as pa,q as fa}from"../chunks/DnqHxCXM.js";import"../chunks/X8RR7YZ-.js";var ma=u("<option> </option>"),ga=u('<div class="form-group svelte-1lf3qka"><label for="custom-location" class="svelte-1lf3qka">Custom Location</label> <input type="text" id="custom-location" placeholder="Enter location name..." class="svelte-1lf3qka"/></div>'),ya=u("<option> </option>"),ha=u("<option> </option>"),ba=u("<option> </option>"),Sa=u("<option> </option>"),qa=u("<option> </option>"),ka=u("<option> </option>"),wa=u("<option> </option>"),xa=u('<th class="svelte-1lf3qka">Sport?</th>'),Ca=u('<td class="center svelte-1lf3qka"><input type="checkbox" class="svelte-1lf3qka"/></td>'),Ta=u('<span class="grade-error svelte-1lf3qka">Invalid</span>'),Na=u("<option> </option>"),Fa=u('<button type="button" class="remove-btn svelte-1lf3qka">‚úï</button>'),ja=u('<tr><!><td class="svelte-1lf3qka"><input type="text" placeholder="Route name..." class="svelte-1lf3qka"/></td><td class="svelte-1lf3qka"><input type="text" placeholder="V3"/> <!></td><td class="svelte-1lf3qka"><select class="svelte-1lf3qka"></select></td><td class="svelte-1lf3qka"><input type="number" min="1" class="svelte-1lf3qka"/></td><td><textarea placeholder="Notes..." class="svelte-1lf3qka"></textarea></td><td class="center svelte-1lf3qka"><!></td></tr>'),Oa=u("<div> </div>"),Va=u('<div class="form-content svelte-1lf3qka"><h3 class="svelte-1lf3qka">üßó Indoor Climb</h3> <div class="form-row svelte-1lf3qka"><div class="form-group svelte-1lf3qka"><label for="date" class="svelte-1lf3qka">Date</label> <input type="date" id="date" class="svelte-1lf3qka"/></div> <div class="form-group svelte-1lf3qka"><label for="location" class="svelte-1lf3qka">Location</label> <select id="location" class="svelte-1lf3qka"><option disabled>Select location...</option><!></select></div></div> <!> <div class="form-group svelte-1lf3qka"><label for="climbing-type" class="svelte-1lf3qka">Climbing Type</label> <select id="climbing-type" class="svelte-1lf3qka"><option disabled>Select type...</option><!></select></div> <div class="load-section svelte-1lf3qka"><h4 class="svelte-1lf3qka">Load Metrics</h4> <div class="load-metrics svelte-1lf3qka"><div class="load-item svelte-1lf3qka"><label for="finger-load" class="svelte-1lf3qka">Finger</label> <input type="number" id="finger-load" min="1" max="5" class="svelte-1lf3qka"/> <span class="load-scale svelte-1lf3qka">/ 5</span></div> <div class="load-item svelte-1lf3qka"><label for="shoulder-load" class="svelte-1lf3qka">Shoulder</label> <input type="number" id="shoulder-load" min="1" max="5" class="svelte-1lf3qka"/> <span class="load-scale svelte-1lf3qka">/ 5</span></div> <div class="load-item svelte-1lf3qka"><label for="forearm-load" class="svelte-1lf3qka">Forearm</label> <input type="number" id="forearm-load" min="1" max="5" class="svelte-1lf3qka"/> <span class="load-scale svelte-1lf3qka">/ 5</span></div></div></div> <div class="training-section svelte-1lf3qka"><h4 class="svelte-1lf3qka">Training Details</h4> <div class="training-grid svelte-1lf3qka"><div class="training-item svelte-1lf3qka"><label for="training-type" class="svelte-1lf3qka">Training Type</label> <select id="training-type" class="svelte-1lf3qka"></select></div> <div class="training-item svelte-1lf3qka"><label for="difficulty" class="svelte-1lf3qka">Difficulty</label> <select id="difficulty" class="svelte-1lf3qka"></select></div> <div class="training-item svelte-1lf3qka"><label for="category" class="svelte-1lf3qka">Category</label> <select id="category" class="svelte-1lf3qka"></select></div> <div class="training-item svelte-1lf3qka"><label for="energy-system" class="svelte-1lf3qka">Energy System</label> <select id="energy-system" class="svelte-1lf3qka"></select></div> <div class="training-item svelte-1lf3qka"><label for="technique-focus" class="svelte-1lf3qka">Technique Focus</label> <select id="technique-focus" class="svelte-1lf3qka"></select></div> <div class="training-item svelte-1lf3qka"><label for="wall-angle" class="svelte-1lf3qka">Wall Angle</label> <select id="wall-angle" class="svelte-1lf3qka"></select></div></div></div> <div class="climbs-section svelte-1lf3qka"><h4 class="svelte-1lf3qka">Climbs</h4> <div class="table-container svelte-1lf3qka"><table class="climbs-table svelte-1lf3qka"><thead><tr><!><th class="svelte-1lf3qka">Name</th><th class="svelte-1lf3qka">Grade</th><th class="svelte-1lf3qka">Attempt</th><th class="svelte-1lf3qka">#</th><th class="svelte-1lf3qka">Notes</th><th class="svelte-1lf3qka"></th></tr></thead><tbody></tbody></table></div> <button type="button" class="add-btn svelte-1lf3qka">+ Add Climb</button></div> <div class="submit-section svelte-1lf3qka"><!> <button type="button" class="submit-btn svelte-1lf3qka"><!></button></div></div>');function Aa(Ue,He){Rt(He,!0);const tt=["Rockstar Swindon","Flashpoint Swindon","Flashpoint Bristol","Redpoint Bristol","TCH Bristol","Other"],me=["Bouldering","Sport","Mixed"],ge=["Onsight","Flash","Redpoint","Dogged","DNF"],A=["None","Projecting","Onsighting","Campusing","Repeaters"],ae=["None","Easy","Medium","Hard","Max","Limit+"],ee=["None","Technique","Strength","Strength-endurance","Warm-up","Power"],ye=["None","Aerobic capacity","Aerobic lactic power","Anaerobic alactic capacity","Anaerobic alactic power","Anaerobic power","Anaerobic lactic capacity"],Je=["None","Double-clutch","Standing on volumes","Trusting feet"],se=["None","Overhang","Slab","Roof"],$e=["V0-","4-","V0","4","V0+","4+","V1","5","V2","5+","V3","6A","V4","6B","V5","6C","V6","7A","V7","7A+","V8","7B","7B+","V9","7C","V10","7C+","V11","8A","V12","8A+","V13","8B","V14","8B+","V15","8C","V16","8C+","V17","9A"].map(n=>n.toLowerCase());let ve=p(null),M=p(Tt(new Date().toISOString().split("T")[0])),x=p(""),D=p(""),R=p(""),Ce=p("None"),be=p("None"),y=p("None"),$=p("None"),U=p("None"),te=p("None"),F=p(3),P=p(3),H=p(3),h=p(Tt([{isSport:!1,name:"",grade:"",attemptType:"Flash",attemptsNum:1,notes:""}]));function m(){a(h,[...e(h),{isSport:!1,name:"",grade:"",attemptType:"Flash",attemptsNum:1,notes:""}],!0)}function S(n){a(h,e(h).filter((v,d)=>d!==n),!0)}function J(n,v){e(h)[n].attemptType=v,(v==="Flash"||v==="Onsight")&&(e(h)[n].attemptsNum=1)}function ce(n){a(ve,n,!0)}function re(){a(ve,null)}let le=Ft(()=>e(R)==="Mixed");function W(n){return e(R)==="Sport"?!0:e(R)==="Bouldering"?!1:n.isSport}function C(n){return n.trim()?$e.includes(n.trim().toLowerCase()):!0}let E=p("idle"),ie=p("");function Fe(){return e(x)?e(x)==="Other"&&!e(D).trim()?"Please enter a custom location":e(R)?e(h).filter(v=>v.grade.trim()&&!C(v.grade)).length>0?"Please fix invalid grades":null:"Please select a climbing type":"Please select a location"}async function Y(){const n=Fe();if(n){a(E,"error"),a(ie,n,!0);return}a(E,"saving");try{const v=e(h).map(w=>({...w,isSport:W(w)})),d={date:e(M),location:e(x)==="Other"?e(D):e(x),customLocation:e(x)==="Other"?e(D):void 0,climbingType:e(R),trainingType:e(Ce),difficulty:e(be),category:e(y),energySystem:e($),techniqueFocus:e(U),wallAngle:e(te),fingerLoad:e(F),shoulderLoad:e(P),forearmLoad:e(H),climbs:v},B=la(d);if(It()){const w=await oa(d);w.ok?(Wt(B.id),a(E,"success"),a(ie,"Session saved and synced!")):(Ut(B.id),a(E,"success"),a(ie,"Saved locally. Sync failed: "+(w.error||"Unknown error")))}else a(E,"success"),a(ie,"Saved locally. Will sync when online.");window.dispatchEvent(new CustomEvent("session-saved")),setTimeout(()=>{L()},2e3)}catch(v){a(E,"error"),a(ie,"Failed to save session"),console.error("Save error:",v)}}function L(){a(M,new Date().toISOString().split("T")[0],!0),a(x,""),a(D,""),a(R,""),a(Ce,"None"),a(be,"None"),a(y,"None"),a($,"None"),a(U,"None"),a(te,"None"),a(F,3),a(P,3),a(H,3),a(h,[{isSport:!1,name:"",grade:"",attemptType:"Flash",attemptsNum:1,notes:""}],!0),a(E,"idle"),a(ie,"")}var de=Va(),fe=l(s(de),2),Oe=s(fe),Se=l(s(Oe),2);N(Se),t(Oe);var ue=l(Oe,2),Z=l(s(ue),2),ne=s(Z);ne.value=ne.__value="";var K=l(ne);z(K,17,()=>tt,G,(n,v)=>{var d=ma(),B=s(d,!0);t(d);var w={};b(()=>{T(B,e(v)),w!==(w=e(v))&&(d.value=(d.__value=e(v))??"")}),o(n,d)}),t(Z),t(ue),t(fe);var qe=l(fe,2);{var ke=n=>{var v=ga(),d=l(s(v),2);N(d),t(v),V(d,()=>e(D),B=>a(D,B)),o(n,v)};q(qe,n=>{e(x)==="Other"&&n(ke)})}var De=l(qe,2),Re=l(s(De),2),Ee=s(Re);Ee.value=Ee.__value="";var gt=l(Ee);z(gt,17,()=>me,G,(n,v)=>{var d=ya(),B=s(d,!0);t(d);var w={};b(()=>{T(B,e(v)),w!==(w=e(v))&&(d.value=(d.__value=e(v))??"")}),o(n,d)}),t(Re),t(De);var _=l(De,2),f=l(s(_),2),g=s(f),j=l(s(g),2);N(j),mt(2),t(g);var Q=l(g,2),we=l(s(Q),2);N(we),mt(2),t(Q);var Be=l(Q,2),Nt=l(s(Be),2);N(Nt),mt(2),t(Be),t(f),t(_);var at=l(_,2),yt=l(s(at),2),Qe=s(yt),nt=l(s(Qe),2);z(nt,21,()=>A,G,(n,v)=>{var d=ha(),B=s(d,!0);t(d);var w={};b(()=>{T(B,e(v)),w!==(w=e(v))&&(d.value=(d.__value=e(v))??"")}),o(n,d)}),t(nt),t(Qe);var vt=l(Qe,2),Ve=l(s(vt),2);z(Ve,21,()=>ae,G,(n,v)=>{var d=ba(),B=s(d,!0);t(d);var w={};b(()=>{T(B,e(v)),w!==(w=e(v))&&(d.value=(d.__value=e(v))??"")}),o(n,d)}),t(Ve),t(vt);var xe=l(vt,2),dt=l(s(xe),2);z(dt,21,()=>ee,G,(n,v)=>{var d=Sa(),B=s(d,!0);t(d);var w={};b(()=>{T(B,e(v)),w!==(w=e(v))&&(d.value=(d.__value=e(v))??"")}),o(n,d)}),t(dt),t(xe);var Ye=l(xe,2),st=l(s(Ye),2);z(st,21,()=>ye,G,(n,v)=>{var d=qa(),B=s(d,!0);t(d);var w={};b(()=>{T(B,e(v)),w!==(w=e(v))&&(d.value=(d.__value=e(v))??"")}),o(n,d)}),t(st),t(Ye);var lt=l(Ye,2),Ze=l(s(lt),2);z(Ze,21,()=>Je,G,(n,v)=>{var d=ka(),B=s(d,!0);t(d);var w={};b(()=>{T(B,e(v)),w!==(w=e(v))&&(d.value=(d.__value=e(v))??"")}),o(n,d)}),t(Ze),t(lt);var Ae=l(lt,2),ot=l(s(Ae),2);z(ot,21,()=>se,G,(n,v)=>{var d=wa(),B=s(d,!0);t(d);var w={};b(()=>{T(B,e(v)),w!==(w=e(v))&&(d.value=(d.__value=e(v))??"")}),o(n,d)}),t(ot),t(Ae),t(yt),t(at);var Ke=l(at,2),ct=l(s(Ke),2),ht=s(ct),ut=s(ht),_t=s(ut),bt=s(_t);{var St=n=>{var v=xa();o(n,v)};q(bt,n=>{e(le)&&n(St)})}mt(6),t(_t),t(ut);var qt=l(ut);z(qt,21,()=>e(h),G,(n,v,d)=>{var B=ja(),w=s(B);{var rt=I=>{var je=Ca(),Pe=s(je);N(Pe),t(je),ea(Pe,()=>e(v).isSport,Vt=>e(v).isSport=Vt),o(I,je)};q(w,I=>{e(le)&&I(rt)})}var r=l(w),i=s(r);N(i),t(r);var c=l(r),O=s(c);N(O);let k;var Ge=l(O,2);{var Xe=I=>{var je=Ta();o(I,je)};q(Ge,I=>{C(e(v).grade)||I(Xe)})}t(c);var Le=l(c),pe=s(Le);pe.__change=I=>J(d,I.target.value),z(pe,21,()=>ge,G,(I,je)=>{var Pe=Na(),Vt=s(Pe,!0);t(Pe);var Gt={};b(()=>{T(Vt,e(je)),Gt!==(Gt=e(je))&&(Pe.value=(Pe.__value=e(je))??"")}),o(I,Pe)}),t(pe);var ze;Qt(pe),t(Le);var kt=l(Le),wt=s(kt);N(wt),t(kt);var jt=l(kt);let Ot;var Me=s(jt);Kt(Me),t(jt);var Lt=l(jt),$t=s(Lt);{var Dt=I=>{var je=Fa();je.__click=()=>S(d),o(I,je)};q($t,I=>{e(h).length>1&&I(Dt)})}t(Lt),t(B),b(I=>{k=et(O,1,"grade-input svelte-1lf3qka",null,k,I),ze!==(ze=e(v).attemptType)&&(pe.value=(pe.__value=e(v).attemptType)??"",Yt(pe,e(v).attemptType)),wt.disabled=e(v).attemptType==="Flash",Ot=et(jt,1,"notes-cell svelte-1lf3qka",null,Ot,{expanded:e(ve)===d})},[()=>({invalid:!C(e(v).grade)})]),V(i,()=>e(v).name,I=>e(v).name=I),V(O,()=>e(v).grade,I=>e(v).grade=I),V(wt,()=>e(v).attemptsNum,I=>e(v).attemptsNum=I),Mt("focus",Me,()=>ce(d)),Mt("blur",Me,re),V(Me,()=>e(v).notes,I=>e(v).notes=I),o(n,B)}),t(qt),t(ht),t(ct);var _e=l(ct,2);_e.__click=m,t(Ke);var Te=l(Ke,2),Ie=s(Te);{var At=n=>{var v=Oa();let d;var B=s(v,!0);t(v),b(()=>{d=et(v,1,"save-message svelte-1lf3qka",null,d,{success:e(E)==="success",error:e(E)==="error"}),T(B,e(ie))}),o(n,v)};q(Ie,n=>{e(ie)&&n(At)})}var pt=l(Ie,2);pt.__click=Y;var zt=s(pt);{var Ht=n=>{var v=Ne("Saving...");o(n,v)},Pt=n=>{var v=ft(),d=it(v);{var B=rt=>{var r=Ne("‚úì Saved!");o(rt,r)},w=rt=>{var r=Ne("Save Session");o(rt,r)};q(d,rt=>{e(E)==="success"?rt(B):rt(w,!1)},!0)}o(n,v)};q(zt,n=>{e(E)==="saving"?n(Ht):n(Pt,!1)})}t(pt),t(Te),t(de),b(()=>pt.disabled=e(E)==="saving"),V(Se,()=>e(M),n=>a(M,n)),oe(Z,()=>e(x),n=>a(x,n)),oe(Re,()=>e(R),n=>a(R,n)),V(j,()=>e(F),n=>a(F,n)),V(we,()=>e(P),n=>a(P,n)),V(Nt,()=>e(H),n=>a(H,n)),oe(nt,()=>e(Ce),n=>a(Ce,n)),oe(Ve,()=>e(be),n=>a(be,n)),oe(dt,()=>e(y),n=>a(y,n)),oe(st,()=>e($),n=>a($,n)),oe(Ze,()=>e(U),n=>a(U,n)),oe(ot,()=>e(te),n=>a(te,n)),o(Ue,de),Et()}Bt(["change","click"]);var La=u("<option> </option>"),$a=u('<div class="input-with-action svelte-15o2ys1"><input type="text" id="crag-manual" placeholder="Enter custom crag name..." class="flat-left svelte-15o2ys1"/> <button type="button" class="action-btn flat-right svelte-15o2ys1" title="Back to list">‚úï</button></div>'),Da=u("<option> </option>"),Ra=u("<option>Other (Manual Entry)</option>"),Ea=u('<select id="crag" class="svelte-15o2ys1"><option disabled> </option><!><!></select>'),Ba=u("<option> </option>"),Ia=u("<option> </option>"),za=u("<option> </option>"),Pa=u("<option> </option>"),Ga=u("<option> </option>"),Ma=u("<option> </option>"),Wa=u('<th class="svelte-15o2ys1">Sport?</th>'),Ua=u('<td class="center svelte-15o2ys1"><input type="checkbox" class="svelte-15o2ys1"/></td>'),Ha=u('<span class="grade-error svelte-15o2ys1">Invalid</span>'),Ja=u("<option> </option>"),Qa=u('<button type="button" class="remove-btn svelte-15o2ys1">‚úï</button>'),Ya=u('<tr><!><td class="svelte-15o2ys1"><input type="text" placeholder="Route name..." class="svelte-15o2ys1"/></td><td class="svelte-15o2ys1"><input type="text" placeholder="V3"/> <!></td><td class="svelte-15o2ys1"><select class="svelte-15o2ys1"></select></td><td class="svelte-15o2ys1"><input type="number" min="1" class="svelte-15o2ys1"/></td><td><textarea placeholder="Notes..." class="svelte-15o2ys1"></textarea></td><td class="center svelte-15o2ys1"><!></td></tr>'),Za=u("<div> </div>"),Ka=u('<div class="form-content svelte-15o2ys1"><h3 class="svelte-15o2ys1">‚õ∞Ô∏è Outdoor Climb</h3> <div class="form-row svelte-15o2ys1"><div class="form-group svelte-15o2ys1"><label for="date" class="svelte-15o2ys1">Date</label> <input type="date" id="date" class="svelte-15o2ys1"/></div> <div class="form-group svelte-15o2ys1"><label for="area" class="svelte-15o2ys1">Area</label> <select id="area" class="svelte-15o2ys1"><option disabled>Select area...</option><!></select></div></div> <div class="form-row svelte-15o2ys1"><div class="form-group svelte-15o2ys1"><label for="crag" class="svelte-15o2ys1">Crag</label> <!></div> <div class="form-group svelte-15o2ys1"><label for="sector" class="svelte-15o2ys1">Wall / Sector</label> <input type="text" id="sector" placeholder="Enter sector or wall name..." class="svelte-15o2ys1"/></div></div> <div class="form-group svelte-15o2ys1"><label for="climbing-type" class="svelte-15o2ys1">Climbing Type</label> <select id="climbing-type" class="svelte-15o2ys1"><option disabled>Select type...</option><!></select></div> <div class="load-section svelte-15o2ys1"><h4 class="svelte-15o2ys1">Load Metrics</h4> <div class="load-metrics svelte-15o2ys1"><div class="load-item svelte-15o2ys1"><label for="finger-load" class="svelte-15o2ys1">Finger</label> <input type="number" id="finger-load" min="1" max="5" class="svelte-15o2ys1"/> <span class="load-scale svelte-15o2ys1">/ 5</span></div> <div class="load-item svelte-15o2ys1"><label for="shoulder-load" class="svelte-15o2ys1">Shoulder</label> <input type="number" id="shoulder-load" min="1" max="5" class="svelte-15o2ys1"/> <span class="load-scale svelte-15o2ys1">/ 5</span></div> <div class="load-item svelte-15o2ys1"><label for="forearm-load" class="svelte-15o2ys1">Forearm</label> <input type="number" id="forearm-load" min="1" max="5" class="svelte-15o2ys1"/> <span class="load-scale svelte-15o2ys1">/ 5</span></div></div></div> <div class="training-section svelte-15o2ys1"><h4 class="svelte-15o2ys1">Training Details</h4> <div class="training-grid svelte-15o2ys1"><div class="training-item svelte-15o2ys1"><label for="training-type" class="svelte-15o2ys1">Training Type</label> <select id="training-type" class="svelte-15o2ys1"></select></div> <div class="training-item svelte-15o2ys1"><label for="difficulty" class="svelte-15o2ys1">Difficulty</label> <select id="difficulty" class="svelte-15o2ys1"></select></div> <div class="training-item svelte-15o2ys1"><label for="category" class="svelte-15o2ys1">Category</label> <select id="category" class="svelte-15o2ys1"></select></div> <div class="training-item svelte-15o2ys1"><label for="energy-system" class="svelte-15o2ys1">Energy System</label> <select id="energy-system" class="svelte-15o2ys1"></select></div> <div class="training-item svelte-15o2ys1"><label for="technique-focus" class="svelte-15o2ys1">Technique Focus</label> <select id="technique-focus" class="svelte-15o2ys1"></select></div></div></div> <div class="climbs-section svelte-15o2ys1"><h4 class="svelte-15o2ys1">Climbs</h4> <div class="table-container svelte-15o2ys1"><table class="climbs-table svelte-15o2ys1"><thead><tr><!><th class="svelte-15o2ys1">Name</th><th class="svelte-15o2ys1">Grade</th><th class="svelte-15o2ys1">Attempt</th><th class="svelte-15o2ys1">#</th><th class="svelte-15o2ys1">Notes</th><th class="svelte-15o2ys1"></th></tr></thead><tbody></tbody></table></div> <button type="button" class="add-btn svelte-15o2ys1">+ Add Climb</button></div> <div class="submit-section svelte-15o2ys1"><!> <button type="button" class="submit-btn svelte-15o2ys1"><!></button></div></div>');function Xa(Ue,He){Rt(He,!0);const tt=ra(),me=["Boulder","Sport","Trad"],ge=["Onsight","Flash","Redpoint","Dogged","DNF"],A=["None","Projecting","Onsighting","Campusing","Repeaters"],ae=["None","Easy","Medium","Hard","Max","Limit+"],ee=["None","Technique","Strength","Strength-endurance","Warm-up","Power"],ye=["None","Aerobic capacity","Aerobic lactic power","Anaerobic alactic capacity","Anaerobic alactic power","Anaerobic power","Anaerobic lactic capacity"],Je=["None","Double-clutch","Standing on volumes","Trusting feet"],he=["V0-","4-","V0","4","V0+","4+","V1","5","V2","5+","V3","6A","V4","6B","V5","6C","V6","7A","V7","7A+","V8","7B","7B+","V9","7C","V10","7C+","V11","8A","V12","8A+","V13","8B","V14","8B+","V15","8C","V16","8C+","V17","9A"].map(r=>r.toLowerCase());let $e=p(null),ve=p(Tt(new Date().toISOString().split("T")[0])),M=p(""),x=p(""),D=p(""),R=p(""),Ce=p("None"),be=p("None"),y=p("None"),$=p("None"),U=p("None"),te=p(3),F=p(3),P=p(3),H=p(Tt([{isSport:!1,name:"",grade:"",attemptType:"Flash",attemptsNum:1,notes:""}])),h=Ft(()=>e(M)?va(e(M)):[]),m=p(!1);Xt(()=>{e(M)&&(a(x,""),a(m,!1))});function S(){e(x)==="Other"&&(a(m,!0),a(x,""))}function J(){a(m,!1),a(x,"")}function ce(){a(H,[...e(H),{isSport:!1,name:"",grade:"",attemptType:"Flash",attemptsNum:1,notes:""}],!0)}function re(r){a(H,e(H).filter((i,c)=>c!==r),!0)}function le(r,i){e(H)[r].attemptType=i,(i==="Flash"||i==="Onsight")&&(e(H)[r].attemptsNum=1)}function W(r){a($e,r,!0)}function C(){a($e,null)}let E=Ft(()=>e(R)==="Trad");function ie(r){return e(R)==="Sport"?!0:e(R)==="Boulder"?!1:r.isSport}function Fe(r){return r.trim()?he.includes(r.trim().toLowerCase()):!0}let Y=p("idle"),L=p("");function de(){return e(M)?e(x)?e(R)?e(H).filter(i=>i.grade.trim()&&!Fe(i.grade)).length>0?"Please fix invalid grades":null:"Please select a climbing type":"Please select a crag":"Please select an area"}async function fe(){const r=de();if(r){a(Y,"error"),a(L,r,!0);return}a(Y,"saving");try{const i=e(H).map(k=>({...k,isSport:ie(k)})),c={date:e(ve),area:e(M),crag:e(x),sector:e(D)||void 0,climbingType:e(R),trainingType:e(Ce),difficulty:e(be),category:e(y),energySystem:e($),techniqueFocus:e(U),fingerLoad:e(te),shoulderLoad:e(F),forearmLoad:e(P),climbs:i},O=ia(c);if(It()){const k=await na(c);k.ok?(Wt(O.id),a(Y,"success"),a(L,"Session saved and synced!")):(Ut(O.id),a(Y,"success"),a(L,"Saved locally. Sync failed: "+(k.error||"Unknown error")))}else a(Y,"success"),a(L,"Saved locally. Will sync when online.");window.dispatchEvent(new CustomEvent("session-saved")),setTimeout(()=>{Oe()},2e3)}catch(i){a(Y,"error"),a(L,"Failed to save session"),console.error("Save error:",i)}}function Oe(){a(ve,new Date().toISOString().split("T")[0],!0),a(M,""),a(x,""),a(D,""),a(R,""),a(Ce,"None"),a(be,"None"),a(y,"None"),a($,"None"),a(U,"None"),a(te,3),a(F,3),a(P,3),a(H,[{isSport:!1,name:"",grade:"",attemptType:"Flash",attemptsNum:1,notes:""}],!0),a(Y,"idle"),a(L,"")}var Se=Ka(),ue=l(s(Se),2),Z=s(ue),ne=l(s(Z),2);N(ne),t(Z);var K=l(Z,2),qe=l(s(K),2),ke=s(qe);ke.value=ke.__value="";var De=l(ke);z(De,17,()=>tt,G,(r,i)=>{var c=La(),O=s(c,!0);t(c);var k={};b(()=>{T(O,e(i)),k!==(k=e(i))&&(c.value=(c.__value=e(i))??"")}),o(r,c)}),t(qe),t(K),t(ue);var Re=l(ue,2),Ee=s(Re),gt=l(s(Ee),2);{var _=r=>{var i=$a(),c=s(i);N(c);var O=l(c,2);O.__click=J,t(i),V(c,()=>e(x),k=>a(x,k)),o(r,i)},f=r=>{var i=Ea();i.__change=S;var c=s(i),O=s(c,!0);t(c),c.value=c.__value="";var k=l(c);z(k,17,()=>e(h),G,(Le,pe)=>{var ze=Da(),kt=s(ze,!0);t(ze);var wt={};b(()=>{T(kt,e(pe)),wt!==(wt=e(pe))&&(ze.value=(ze.__value=e(pe))??"")}),o(Le,ze)});var Ge=l(k);{var Xe=Le=>{var pe=Ra();pe.value=pe.__value="Other",o(Le,pe)};q(Ge,Le=>{e(M)&&Le(Xe)})}t(i),b(()=>{i.disabled=!e(M),T(O,e(M)?"Select crag...":"Select area first...")}),oe(i,()=>e(x),Le=>a(x,Le)),o(r,i)};q(gt,r=>{e(m)?r(_):r(f,!1)})}t(Ee);var g=l(Ee,2),j=l(s(g),2);N(j),t(g),t(Re);var Q=l(Re,2),we=l(s(Q),2),Be=s(we);Be.value=Be.__value="";var Nt=l(Be);z(Nt,17,()=>me,G,(r,i)=>{var c=Ba(),O=s(c,!0);t(c);var k={};b(()=>{T(O,e(i)),k!==(k=e(i))&&(c.value=(c.__value=e(i))??"")}),o(r,c)}),t(we),t(Q);var at=l(Q,2),yt=l(s(at),2),Qe=s(yt),nt=l(s(Qe),2);N(nt),mt(2),t(Qe);var vt=l(Qe,2),Ve=l(s(vt),2);N(Ve),mt(2),t(vt);var xe=l(vt,2),dt=l(s(xe),2);N(dt),mt(2),t(xe),t(yt),t(at);var Ye=l(at,2),st=l(s(Ye),2),lt=s(st),Ze=l(s(lt),2);z(Ze,21,()=>A,G,(r,i)=>{var c=Ia(),O=s(c,!0);t(c);var k={};b(()=>{T(O,e(i)),k!==(k=e(i))&&(c.value=(c.__value=e(i))??"")}),o(r,c)}),t(Ze),t(lt);var Ae=l(lt,2),ot=l(s(Ae),2);z(ot,21,()=>ae,G,(r,i)=>{var c=za(),O=s(c,!0);t(c);var k={};b(()=>{T(O,e(i)),k!==(k=e(i))&&(c.value=(c.__value=e(i))??"")}),o(r,c)}),t(ot),t(Ae);var Ke=l(Ae,2),ct=l(s(Ke),2);z(ct,21,()=>ee,G,(r,i)=>{var c=Pa(),O=s(c,!0);t(c);var k={};b(()=>{T(O,e(i)),k!==(k=e(i))&&(c.value=(c.__value=e(i))??"")}),o(r,c)}),t(ct),t(Ke);var ht=l(Ke,2),ut=l(s(ht),2);z(ut,21,()=>ye,G,(r,i)=>{var c=Ga(),O=s(c,!0);t(c);var k={};b(()=>{T(O,e(i)),k!==(k=e(i))&&(c.value=(c.__value=e(i))??"")}),o(r,c)}),t(ut),t(ht);var _t=l(ht,2),bt=l(s(_t),2);z(bt,21,()=>Je,G,(r,i)=>{var c=Ma(),O=s(c,!0);t(c);var k={};b(()=>{T(O,e(i)),k!==(k=e(i))&&(c.value=(c.__value=e(i))??"")}),o(r,c)}),t(bt),t(_t),t(st),t(Ye);var St=l(Ye,2),qt=l(s(St),2),_e=s(qt),Te=s(_e),Ie=s(Te),At=s(Ie);{var pt=r=>{var i=Wa();o(r,i)};q(At,r=>{e(E)&&r(pt)})}mt(6),t(Ie),t(Te);var zt=l(Te);z(zt,21,()=>e(H),G,(r,i,c)=>{var O=Ya(),k=s(O);{var Ge=X=>{var We=Ua(),xt=s(We);N(xt),t(We),ea(xt,()=>e(i).isSport,Jt=>e(i).isSport=Jt),o(X,We)};q(k,X=>{e(E)&&X(Ge)})}var Xe=l(k),Le=s(Xe);N(Le),t(Xe);var pe=l(Xe),ze=s(pe);N(ze);let kt;var wt=l(ze,2);{var jt=X=>{var We=Ha();o(X,We)};q(wt,X=>{Fe(e(i).grade)||X(jt)})}t(pe);var Ot=l(pe),Me=s(Ot);Me.__change=X=>le(c,X.target.value),z(Me,21,()=>ge,G,(X,We)=>{var xt=Ja(),Jt=s(xt,!0);t(xt);var Zt={};b(()=>{T(Jt,e(We)),Zt!==(Zt=e(We))&&(xt.value=(xt.__value=e(We))??"")}),o(X,xt)}),t(Me);var Lt;Qt(Me),t(Ot);var $t=l(Ot),Dt=s($t);N(Dt),t($t);var I=l($t);let je;var Pe=s(I);Kt(Pe),t(I);var Vt=l(I),Gt=s(Vt);{var ta=X=>{var We=Qa();We.__click=()=>re(c),o(X,We)};q(Gt,X=>{e(H).length>1&&X(ta)})}t(Vt),t(O),b(X=>{kt=et(ze,1,"grade-input svelte-15o2ys1",null,kt,X),Lt!==(Lt=e(i).attemptType)&&(Me.value=(Me.__value=e(i).attemptType)??"",Yt(Me,e(i).attemptType)),Dt.disabled=e(i).attemptType==="Flash",je=et(I,1,"notes-cell svelte-15o2ys1",null,je,{expanded:e($e)===c})},[()=>({invalid:!Fe(e(i).grade)})]),V(Le,()=>e(i).name,X=>e(i).name=X),V(ze,()=>e(i).grade,X=>e(i).grade=X),V(Dt,()=>e(i).attemptsNum,X=>e(i).attemptsNum=X),Mt("focus",Pe,()=>W(c)),Mt("blur",Pe,C),V(Pe,()=>e(i).notes,X=>e(i).notes=X),o(r,O)}),t(zt),t(_e),t(qt);var Ht=l(qt,2);Ht.__click=ce,t(St);var Pt=l(St,2),n=s(Pt);{var v=r=>{var i=Za();let c;var O=s(i,!0);t(i),b(()=>{c=et(i,1,"save-message svelte-15o2ys1",null,c,{success:e(Y)==="success",error:e(Y)==="error"}),T(O,e(L))}),o(r,i)};q(n,r=>{e(L)&&r(v)})}var d=l(n,2);d.__click=fe;var B=s(d);{var w=r=>{var i=Ne("Saving...");o(r,i)},rt=r=>{var i=ft(),c=it(i);{var O=Ge=>{var Xe=Ne("‚úì Saved!");o(Ge,Xe)},k=Ge=>{var Xe=Ne("Save Session");o(Ge,Xe)};q(c,Ge=>{e(Y)==="success"?Ge(O):Ge(k,!1)},!0)}o(r,i)};q(B,r=>{e(Y)==="saving"?r(w):r(rt,!1)})}t(d),t(Pt),t(Se),b(()=>d.disabled=e(Y)==="saving"),V(ne,()=>e(ve),r=>a(ve,r)),oe(qe,()=>e(M),r=>a(M,r)),V(j,()=>e(D),r=>a(D,r)),oe(we,()=>e(R),r=>a(R,r)),V(nt,()=>e(te),r=>a(te,r)),V(Ve,()=>e(F),r=>a(F,r)),V(dt,()=>e(P),r=>a(P,r)),oe(Ze,()=>e(Ce),r=>a(Ce,r)),oe(ot,()=>e(be),r=>a(be,r)),oe(ct,()=>e(y),r=>a(y,r)),oe(ut,()=>e($),r=>a($,r)),oe(bt,()=>e(U),r=>a(U,r)),o(Ue,Se),Et()}Bt(["click","change"]);var es=u('<div class="form-content svelte-1w0zsmt"><h3 class="svelte-1w0zsmt">üèãÔ∏è Gym Session</h3> <p class="form-placeholder svelte-1w0zsmt">Gym session form fields will go here</p></div>');function ts(Ue){var He=es();o(Ue,He)}var as=u("<option> </option>"),ss=u("<option> </option>"),ls=u('<button class="remove-set-btn svelte-1m63nqt">‚úï</button>'),os=u('<div class="set-row svelte-1m63nqt"><div class="input-wrap svelte-1m63nqt"><label class="svelte-1m63nqt">Weight</label> <input type="number" placeholder="0" class="svelte-1m63nqt"/></div> <div class="input-wrap svelte-1m63nqt"><label class="svelte-1m63nqt">Reps/Secs</label> <input type="number" placeholder="1" class="svelte-1m63nqt"/></div> <!></div>'),rs=u('<div class="exercise-card svelte-1m63nqt"><div class="card-header svelte-1m63nqt"><div class="header-inputs svelte-1m63nqt"><select class="svelte-1m63nqt"></select> <select class="svelte-1m63nqt"></select></div> <button class="remove-card-btn svelte-1m63nqt" title="Remove Exercise">‚úï</button></div> <div class="sets-list svelte-1m63nqt"><!> <button class="add-set-btn svelte-1m63nqt">+ Add Set</button></div> <div class="card-footer svelte-1m63nqt"><div class="meta-input svelte-1m63nqt"><label class="svelte-1m63nqt">Total Sets</label> <input type="number" readonly="" disabled class="svelte-1m63nqt"/></div> <div class="notes-input svelte-1m63nqt"><label class="svelte-1m63nqt">Notes</label> <input type="text" placeholder="Notes..." class="svelte-1m63nqt"/></div></div></div>'),is=u("<div> </div>"),ns=u('<div class="form-content svelte-1m63nqt"><div class="header-row svelte-1m63nqt"><h3 class="svelte-1m63nqt">ü§è Fingerboarding</h3> <button class="add-row-btn svelte-1m63nqt">+ Add Exercise</button></div> <div class="form-group date-group svelte-1m63nqt"><label for="date">Date</label> <input type="date" id="date" class="svelte-1m63nqt"/></div> <div class="cards-container svelte-1m63nqt"></div> <div class="submit-section"><!> <button type="button" class="submit-btn svelte-1m63nqt"><!></button></div></div>');function vs(Ue,He){Rt(He,!0);const tt=["Max hangs","Recruitment pulls","Max pick-ups"],me=["Full-crimp","Half-crimp","Three finger drag","Pinch","Open hand","Sloper"];let ge=p(Tt(new Date().toISOString().split("T")[0])),A=p(Tt([]));function ae(){a(A,[...e(A),{id:crypto.randomUUID(),name:tt[0],gripType:me[1],sets:1,details:[{weight:0,reps:5}],notes:""}],!0)}Xt(()=>{e(A).length===0&&ae()});function ee(h){a(A,e(A).filter((m,S)=>S!==h),!0)}function ye(h){const m=e(A)[h],S=m.details[m.details.length-1];m.details=[...m.details,{...S}],m.sets=m.details.length}function Je(h,m){const S=e(A)[h];S.details.length>1&&(S.details=S.details.filter((J,ce)=>ce!==m),S.sets=S.details.length)}let se=p("idle"),he=p("");async function $e(){a(se,"saving");try{const h={date:e(ge),location:"N/A",exercises:JSON.parse(JSON.stringify(e(A)))},m=da(h);if(It()){const S=await ca(h);S.ok?(Wt(m.id),a(se,"success"),a(he,"Session saved and synced!")):(Ut(m.id),a(se,"success"),a(he,"Saved locally. Sync failed: "+(S.error||"Unknown error")))}else a(se,"success"),a(he,"Saved locally. Will sync when online.");window.dispatchEvent(new CustomEvent("session-saved")),setTimeout(()=>{ve()},2e3)}catch(h){a(se,"error"),a(he,"Failed to save session"),console.error("Save error:",h)}}function ve(){a(ge,new Date().toISOString().split("T")[0],!0),a(A,[],!0),ae(),a(se,"idle"),a(he,"")}var M=ns(),x=s(M),D=l(s(x),2);D.__click=ae,t(x);var R=l(x,2),Ce=l(s(R),2);N(Ce),t(R);var be=l(R,2);z(be,21,()=>e(A),G,(h,m,S)=>{var J=rs(),ce=s(J),re=s(ce),le=s(re);z(le,21,()=>tt,G,(Z,ne)=>{var K=as(),qe=s(K,!0);t(K);var ke={};b(()=>{T(qe,e(ne)),ke!==(ke=e(ne))&&(K.value=(K.__value=e(ne))??"")}),o(Z,K)}),t(le);var W=l(le,2);z(W,21,()=>me,G,(Z,ne)=>{var K=ss(),qe=s(K,!0);t(K);var ke={};b(()=>{T(qe,e(ne)),ke!==(ke=e(ne))&&(K.value=(K.__value=e(ne))??"")}),o(Z,K)}),t(W),t(re);var C=l(re,2);C.__click=()=>ee(S),t(ce);var E=l(ce,2),ie=s(E);z(ie,17,()=>e(m).details,G,(Z,ne,K)=>{var qe=os(),ke=s(qe),De=s(ke);Ct(De,"for",`weight-${S}-${K}`);var Re=l(De,2);N(Re),Ct(Re,"id",`weight-${S}-${K}`),t(ke);var Ee=l(ke,2),gt=s(Ee);Ct(gt,"for",`reps-${S}-${K}`);var _=l(gt,2);N(_),Ct(_,"id",`reps-${S}-${K}`),t(Ee);var f=l(Ee,2);{var g=j=>{var Q=ls();Q.__click=()=>Je(S,K),o(j,Q)};q(f,j=>{e(m).details.length>1&&j(g)})}t(qe),V(Re,()=>e(ne).weight,j=>e(ne).weight=j),V(_,()=>e(ne).reps,j=>e(ne).reps=j),o(Z,qe)});var Fe=l(ie,2);Fe.__click=()=>ye(S),t(E);var Y=l(E,2),L=s(Y),de=s(L);Ct(de,"for",`total-sets-${S}`);var fe=l(de,2);N(fe),Ct(fe,"id",`total-sets-${S}`),t(L);var Oe=l(L,2),Se=s(Oe);Ct(Se,"for",`notes-${S}`);var ue=l(Se,2);N(ue),Ct(ue,"id",`notes-${S}`),t(Oe),t(Y),t(J),b(()=>sa(fe,e(m).sets)),oe(le,()=>e(m).name,Z=>e(m).name=Z),oe(W,()=>e(m).gripType,Z=>e(m).gripType=Z),V(ue,()=>e(m).notes,Z=>e(m).notes=Z),o(h,J)}),t(be);var y=l(be,2),$=s(y);{var U=h=>{var m=is();let S;var J=s(m,!0);t(m),b(()=>{S=et(m,1,"save-message svelte-1m63nqt",null,S,{success:e(se)==="success",error:e(se)==="error"}),T(J,e(he))}),o(h,m)};q($,h=>{e(he)&&h(U)})}var te=l($,2);te.__click=$e;var F=s(te);{var P=h=>{var m=Ne("Saving...");o(h,m)},H=h=>{var m=ft(),S=it(m);{var J=re=>{var le=Ne("‚úì Saved!");o(re,le)},ce=re=>{var le=Ne("Save Session");o(re,le)};q(S,re=>{e(se)==="success"?re(J):re(ce,!1)},!0)}o(h,m)};q(F,h=>{e(se)==="saving"?h(P):h(H,!1)})}t(te),t(y),t(M),b(()=>te.disabled=e(se)==="saving"),V(Ce,()=>e(ge),h=>a(ge,h)),o(Ue,M),Et()}Bt(["click"]);var ds=u("<option> </option>"),cs=u('<input type="text" placeholder="Enter venue name" class="mt-2 svelte-1fje4dh"/>'),us=u("<option> </option>"),_s=u("<option> </option>"),ps=u('<input type="text" placeholder="Round name" class="mt-2 svelte-1fje4dh"/>'),fs=u('<div class="result-mode-content svelte-1fje4dh"><div class="form-group svelte-1fje4dh"><label for="position" class="svelte-1fje4dh">Final Position</label> <input type="number" id="position" placeholder="#" class="large-input svelte-1fje4dh"/></div></div>'),ms=u("<option> </option>"),gs=u('<input type="number" min="1" class="svelte-1fje4dh"/>'),ys=u('<span class="flash-dash">-</span>'),hs=u('<tr><td class="col-name svelte-1fje4dh"><input type="text" class="svelte-1fje4dh"/></td><td class="col-status svelte-1fje4dh"><select class="svelte-1fje4dh"></select></td><td class="col-attempt svelte-1fje4dh"><!></td><td class="col-notes svelte-1fje4dh"><input type="text" placeholder="..." class="svelte-1fje4dh"/></td><td class="col-action svelte-1fje4dh"><button class="svelte-1fje4dh">‚úï</button></td></tr>'),bs=u('<div class="load-metrics-compact svelte-1fje4dh"><div class="metric svelte-1fje4dh"><label for="finger">Finger Load</label> <input type="number" id="finger" min="0" max="5" step="0.5" class="svelte-1fje4dh"/></div> <div class="metric svelte-1fje4dh"><label for="shoulder">Shoulder Load</label> <input type="number" id="shoulder" min="0" max="5" step="0.5" class="svelte-1fje4dh"/></div> <div class="metric svelte-1fje4dh"><label for="forearm">Forearm Load</label> <input type="number" id="forearm" min="0" max="5" step="0.5" class="svelte-1fje4dh"/></div></div> <div class="climbs-table-container svelte-1fje4dh"><div class="section-header svelte-1fje4dh"><h4 class="svelte-1fje4dh">Boulders / Routes</h4></div> <table class="climbs-table svelte-1fje4dh"><thead><tr><th class="svelte-1fje4dh">#</th><th class="svelte-1fje4dh">Result</th><th class="svelte-1fje4dh">Att.</th><th class="svelte-1fje4dh">Notes</th><th class="svelte-1fje4dh"></th></tr></thead><tbody></tbody></table> <button class="add-row-btn svelte-1fje4dh">+ Add Row</button></div>',1),Ss=u("<div> </div>"),qs=u('<div class="form-content svelte-1fje4dh"><h3 class="svelte-1fje4dh">üèÜ Competition</h3> <div class="form-grid svelte-1fje4dh"><div class="form-group svelte-1fje4dh"><label for="date" class="svelte-1fje4dh">Date</label> <input type="date" id="date" class="svelte-1fje4dh"/></div> <div class="form-group svelte-1fje4dh"><label for="venue" class="svelte-1fje4dh">Venue</label> <select id="venue" class="svelte-1fje4dh"><option disabled>Select venue...</option><!></select> <!></div></div> <div class="form-group mb-4 svelte-1fje4dh"><label for="type" class="svelte-1fje4dh">Type</label> <select id="type" class="svelte-1fje4dh"></select></div> <div class="round-section svelte-1fje4dh"><div class="form-group svelte-1fje4dh"><label for="round" class="svelte-1fje4dh">Round</label> <select id="round" class="svelte-1fje4dh"></select> <!></div> <!></div> <div class="submit-section"><!> <button type="button" class="submit-btn svelte-1fje4dh"><!></button></div></div>');function ks(Ue,He){Rt(He,!0);const tt=["Flashpoint Bristol","Rockstar Techno","Rockstar Unit 3","Rockstar Unit 5","Bloc","TCA","Other"],me=["Bouldering","Lead","Speed"],ge=["Qualifiers","Semi-Finals","Finals","Result","Other"],A=["Flash","Top","Zone","Attempt"];let ae=p(Tt(new Date().toISOString().split("T")[0])),ee=p(""),ye=p(""),Je=p("Bouldering"),se=p(4),he=p(4),$e=p(4),ve=p("Qualifiers"),M=p(""),x=p(null),D=p(Tt([{name:"#1",status:"Flash",attemptCount:1,notes:""}])),R=Ft(()=>e(ve)==="Result"),Ce=Ft(()=>e(ee)==="Other"),be=Ft(()=>e(ve)==="Other"),y=Ft(()=>e(ve)==="Other"?e(M):e(ve));function $(){const _=e(D).length+1;a(D,[...e(D),{name:`#${_}`,status:"Flash",attemptCount:1,notes:""}],!0)}function U(_){e(D).length>1?a(D,e(D).filter((f,g)=>g!==_),!0):e(D)[0]={name:"#1",status:"Flash",attemptCount:1,notes:""}}function te(_,f){e(D)[_].status=f,f==="Flash"&&(e(D)[_].attemptCount=1)}let F=p("idle"),P=p("");async function H(){if(!e(ee)||e(ee)==="Other"&&!e(ye)){a(F,"error"),a(P,"Please specify a venue");return}a(F,"saving");try{const _={name:e(y),position:e(R)?e(x):void 0,climbs:e(R)?void 0:JSON.parse(JSON.stringify(e(D)))},f={date:e(ae),venue:e(ee)==="Other"?e(ye):e(ee),customVenue:e(ee)==="Other"?e(ye):void 0,type:e(Je),fingerLoad:e(R)?void 0:e(se),shoulderLoad:e(R)?void 0:e(he),forearmLoad:e(R)?void 0:e($e),rounds:[_]},g=ua(f);if(It()){const j=await _a(f);j.ok?(Wt(g.id),a(F,"success"),a(P,"Competition saved and synced!")):(Ut(g.id),a(F,"success"),a(P,"Saved locally. Sync failed: "+(j.error||"Unknown error")))}else a(F,"success"),a(P,"Saved locally. Will sync when online.");window.dispatchEvent(new CustomEvent("session-saved")),setTimeout(()=>{h()},2e3)}catch(_){a(F,"error"),a(P,"Failed to save session"),console.error("Save error:",_)}}function h(){a(ae,new Date().toISOString().split("T")[0],!0),a(ee,""),a(ye,""),a(x,null),a(D,[{name:"#1",status:"Flash",attemptCount:1,notes:""}],!0),a(F,"idle"),a(P,"")}var m=qs(),S=l(s(m),2),J=s(S),ce=l(s(J),2);N(ce),t(J);var re=l(J,2),le=l(s(re),2),W=s(le);W.value=W.__value="";var C=l(W);z(C,17,()=>tt,G,(_,f)=>{var g=ds(),j=s(g,!0);t(g);var Q={};b(()=>{T(j,e(f)),Q!==(Q=e(f))&&(g.value=(g.__value=e(f))??"")}),o(_,g)}),t(le);var E=l(le,2);{var ie=_=>{var f=cs();N(f),V(f,()=>e(ye),g=>a(ye,g)),o(_,f)};q(E,_=>{e(Ce)&&_(ie)})}t(re),t(S);var Fe=l(S,2),Y=l(s(Fe),2);z(Y,21,()=>me,G,(_,f)=>{var g=us(),j=s(g,!0);t(g);var Q={};b(()=>{T(j,e(f)),Q!==(Q=e(f))&&(g.value=(g.__value=e(f))??"")}),o(_,g)}),t(Y),t(Fe);var L=l(Fe,2),de=s(L),fe=l(s(de),2);z(fe,21,()=>ge,G,(_,f)=>{var g=_s(),j=s(g,!0);t(g);var Q={};b(()=>{T(j,e(f)),Q!==(Q=e(f))&&(g.value=(g.__value=e(f))??"")}),o(_,g)}),t(fe);var Oe=l(fe,2);{var Se=_=>{var f=ps();N(f),V(f,()=>e(M),g=>a(M,g)),o(_,f)};q(Oe,_=>{e(be)&&_(Se)})}t(de);var ue=l(de,2);{var Z=_=>{var f=fs(),g=s(f),j=l(s(g),2);N(j),t(g),t(f),V(j,()=>e(x),Q=>a(x,Q)),o(_,f)},ne=_=>{var f=bs(),g=it(f),j=s(g),Q=l(s(j),2);N(Q),t(j);var we=l(j,2),Be=l(s(we),2);N(Be),t(we);var Nt=l(we,2),at=l(s(Nt),2);N(at),t(Nt),t(g);var yt=l(g,2),Qe=l(s(yt),2),nt=l(s(Qe));z(nt,21,()=>e(D),G,(Ve,xe,dt)=>{var Ye=hs(),st=s(Ye),lt=s(st);N(lt),t(st);var Ze=l(st),Ae=s(Ze);Ae.__change=_e=>te(dt,_e.target.value),z(Ae,21,()=>A,G,(_e,Te)=>{var Ie=ms(),At=s(Ie,!0);t(Ie);var pt={};b(()=>{T(At,e(Te)),pt!==(pt=e(Te))&&(Ie.value=(Ie.__value=e(Te))??"")}),o(_e,Ie)}),t(Ae);var ot;Qt(Ae),t(Ze);var Ke=l(Ze),ct=s(Ke);{var ht=_e=>{var Te=gs();N(Te),V(Te,()=>e(xe).attemptCount,Ie=>e(xe).attemptCount=Ie),o(_e,Te)},ut=_e=>{var Te=ys();o(_e,Te)};q(ct,_e=>{e(xe).status!=="Flash"?_e(ht):_e(ut,!1)})}t(Ke);var _t=l(Ke),bt=s(_t);N(bt),t(_t);var St=l(_t),qt=s(St);qt.__click=()=>U(dt),t(St),t(Ye),b(()=>{ot!==(ot=e(xe).status)&&(Ae.value=(Ae.__value=e(xe).status)??"",Yt(Ae,e(xe).status))}),V(lt,()=>e(xe).name,_e=>e(xe).name=_e),V(bt,()=>e(xe).notes,_e=>e(xe).notes=_e),o(Ve,Ye)}),t(nt),t(Qe);var vt=l(Qe,2);vt.__click=$,t(yt),V(Q,()=>e(se),Ve=>a(se,Ve)),V(Be,()=>e(he),Ve=>a(he,Ve)),V(at,()=>e($e),Ve=>a($e,Ve)),o(_,f)};q(ue,_=>{e(R)?_(Z):_(ne,!1)})}t(L);var K=l(L,2),qe=s(K);{var ke=_=>{var f=Ss();let g;var j=s(f,!0);t(f),b(()=>{g=et(f,1,"save-message svelte-1fje4dh",null,g,{success:e(F)==="success",error:e(F)==="error"}),T(j,e(P))}),o(_,f)};q(qe,_=>{e(P)&&_(ke)})}var De=l(qe,2);De.__click=H;var Re=s(De);{var Ee=_=>{var f=Ne("Saving...");o(_,f)},gt=_=>{var f=ft(),g=it(f);{var j=we=>{var Be=Ne("‚úì Saved!");o(we,Be)},Q=we=>{var Be=Ne("Save Session");o(we,Be)};q(g,we=>{e(F)==="success"?we(j):we(Q,!1)},!0)}o(_,f)};q(Re,_=>{e(F)==="saving"?_(Ee):_(gt,!1)})}t(De),t(K),t(m),b(()=>De.disabled=e(F)==="saving"),V(ce,()=>e(ae),_=>a(ae,_)),oe(le,()=>e(ee),_=>a(ee,_)),oe(Y,()=>e(Je),_=>a(Je,_)),oe(fe,()=>e(ve),_=>a(ve,_)),o(Ue,m),Et()}Bt(["change","click"]);var ws=u('<span class="spinner svelte-b2zgdd"></span> Syncing...',1),xs=u("<button><!></button>"),Cs=u("<div> </div>"),Ts=u('<div><div class="sync-info svelte-b2zgdd"><span class="sync-icon svelte-b2zgdd"> </span> <span class="sync-text svelte-b2zgdd"><!></span></div> <!> <!></div>'),Ns=u("<option> </option>"),Fs=u('<div class="form-container svelte-b2zgdd"><!></div>'),js=u('<div class="page svelte-b2zgdd"><div class="page-header svelte-b2zgdd"><h1 class="svelte-b2zgdd">üìù Log Data</h1> <p class="subtitle svelte-b2zgdd">Record your training sessions</p></div> <!> <div class="content-card svelte-b2zgdd"><div class="form-group svelte-b2zgdd"><label for="activity-type" class="svelte-b2zgdd">Activity Type</label> <select id="activity-type" class="svelte-b2zgdd"><option disabled>Select an activity...</option><!></select></div> <!></div></div>');function Bs(Ue,He){Rt(He,!0);const tt=[{value:"indoor_climb",label:"Indoor Climb",icon:"üßó"},{value:"outdoor_climb",label:"Outdoor Climb",icon:"‚õ∞Ô∏è"},{value:"gym_session",label:"Gym Session",icon:"üèãÔ∏è"},{value:"fingerboarding",label:"Fingerboarding",icon:"ü§è"},{value:"competition",label:"Competition",icon:"üèÜ"}];let me=p(""),ge=p(0),A=p("idle"),ae=p(""),ee=p(!0);aa(()=>{ye(),a(ee,It(),!0);const y=()=>{a(ee,!0),ye()},$=()=>{a(ee,!1)},U=()=>{ye()};return window.addEventListener("online",y),window.addEventListener("offline",$),window.addEventListener("session-saved",U),()=>{window.removeEventListener("online",y),window.removeEventListener("offline",$),window.removeEventListener("session-saved",U)}});function ye(){a(ge,pa(),!0)}async function Je(){if(!e(ee)){a(A,"error"),a(ae,"No network connection");return}a(A,"syncing"),a(ae,"");try{const y=await fa();y.failed===0&&y.success>0?(a(A,"success"),a(ae,`Synced ${y.success} session${y.success>1?"s":""}!`)):y.failed>0&&y.success>0?(a(A,"error"),a(ae,`Synced ${y.success}, failed ${y.failed}`)):y.failed>0?(a(A,"error"),a(ae,`Failed to sync ${y.failed} session${y.failed>1?"s":""}`)):(a(A,"idle"),a(ae,"")),ye(),e(A)==="success"&&setTimeout(()=>{a(A,"idle"),a(ae,"")},3e3)}catch(y){a(A,"error"),a(ae,"Sync failed"),console.error("Sync error:",y)}}var se=js(),he=l(s(se),2);{var $e=y=>{var $=Ts();let U;var te=s($),F=s(te),P=s(F,!0);t(F);var H=l(F,2),h=s(H);{var m=W=>{var C=Ne();b(()=>T(C,`${e(ge)??""} session${e(ge)>1?"s":""} waiting to sync`)),o(W,C)},S=W=>{var C=Ne();b(()=>T(C,`Offline - ${e(ge)??""} session${e(ge)>1?"s":""} saved locally`)),o(W,C)};q(h,W=>{e(ee)?W(m):W(S,!1)})}t(H),t(te);var J=l(te,2);{var ce=W=>{var C=xs();let E;C.__click=Je;var ie=s(C);{var Fe=L=>{var de=ws();mt(),o(L,de)},Y=L=>{var de=ft(),fe=it(de);{var Oe=ue=>{var Z=Ne("‚úì Synced!");o(ue,Z)},Se=ue=>{var Z=Ne("Sync Now");o(ue,Z)};q(fe,ue=>{e(A)==="success"?ue(Oe):ue(Se,!1)},!0)}o(L,de)};q(ie,L=>{e(A)==="syncing"?L(Fe):L(Y,!1)})}t(C),b(()=>{E=et(C,1,"sync-btn svelte-b2zgdd",null,E,{syncing:e(A)==="syncing"}),C.disabled=e(A)==="syncing"}),o(W,C)};q(J,W=>{e(ee)&&W(ce)})}var re=l(J,2);{var le=W=>{var C=Cs();let E;var ie=s(C,!0);t(C),b(()=>{E=et(C,1,"sync-message svelte-b2zgdd",null,E,{error:e(A)==="error",success:e(A)==="success"}),T(ie,e(ae))}),o(W,C)};q(re,W=>{e(ae)&&W(le)})}t($),b(()=>{U=et($,1,"sync-banner svelte-b2zgdd",null,U,{offline:!e(ee)}),T(P,e(ee)?"üîÑ":"üì¥")}),o(y,$)};q(he,y=>{e(ge)>0&&y($e)})}var ve=l(he,2),M=s(ve),x=l(s(M),2),D=s(x);D.value=D.__value="";var R=l(D);z(R,17,()=>tt,y=>y.value,(y,$)=>{var U=Ns(),te=s(U);t(U);var F={};b(()=>{T(te,`${e($).icon??""} ${e($).label??""}`),F!==(F=e($).value)&&(U.value=(U.__value=e($).value)??"")}),o(y,U)}),t(x),t(M);var Ce=l(M,2);{var be=y=>{var $=Fs(),U=s($);{var te=P=>{Aa(P,{})},F=P=>{var H=ft(),h=it(H);{var m=J=>{Xa(J,{})},S=J=>{var ce=ft(),re=it(ce);{var le=C=>{ts(C)},W=C=>{var E=ft(),ie=it(E);{var Fe=L=>{vs(L,{})},Y=L=>{var de=ft(),fe=it(de);{var Oe=Se=>{ks(Se,{})};q(fe,Se=>{e(me)==="competition"&&Se(Oe)},!0)}o(L,de)};q(ie,L=>{e(me)==="fingerboarding"?L(Fe):L(Y,!1)},!0)}o(C,E)};q(re,C=>{e(me)==="gym_session"?C(le):C(W,!1)},!0)}o(J,ce)};q(h,J=>{e(me)==="outdoor_climb"?J(m):J(S,!1)},!0)}o(P,H)};q(U,P=>{e(me)==="indoor_climb"?P(te):P(F,!1)})}t($),o(y,$)};q(Ce,y=>{e(me)&&y(be)})}t(ve),t(se),oe(x,()=>e(me),y=>a(me,y)),o(Ue,se),Et()}Bt(["click"]);export{Bs as component};
