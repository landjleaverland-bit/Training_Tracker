import{f as v,a as i,c as ea,t as Ta}from"../chunks/CSQvsE9s.js";import{p as fa,c as t,s,i as e,aV as k,r as a,t as _,a as ga,x as l,b0 as Za,f as Me,aG as qa,aW as pa,w as ha,o as Ua,b8 as Ja,d as Qa}from"../chunks/DGPNV_z9.js";import{d as _a,s as o}from"../chunks/DSMXtqZM.js";import{i as c}from"../chunks/D9GEZg6r.js";import{s as $e,r as Ne,e as qe,i as Fe,b as Ie,c as Ka}from"../chunks/_iMURHzE.js";import{t as va,l as ma,i as Xa,u as et,k as Aa,m as at,g as tt,b as st,n as rt,o as it,D as Ma,E as lt,p as vt,q as nt,r as ot,f as dt,s as ct}from"../chunks/CaDyynqW.js";import{c as xa,f as ia,n as Na,m as Ya,b as Ia,o as Oa,p as ja,q as Wa,t as Ba,v as Va,w as pt}from"../chunks/Cn4iyW3Z.js";import{s as la}from"../chunks/Ct8JfZaa.js";import{p as Pa}from"../chunks/Dd0awD9h.js";var _t=v('<span class="chevron svelte-12crvy">‚ñ≤</span>'),ut=v('<span class="chevron svelte-12crvy">‚ñº</span>'),ft=v('<div class="input-with-action svelte-12crvy"><input type="text" id="location-manual" placeholder="Custom location..." class="flat-left svelte-12crvy"/> <button type="button" class="action-btn flat-right svelte-12crvy" title="Back to list">‚úï</button></div>'),gt=v("<option> </option>"),mt=v('<select id="location-filter" class="svelte-12crvy"><option>Any Location</option><!></select>'),ht=v("<option> </option>"),bt=v("<option> </option>"),yt=v('<div class="filter-body svelte-12crvy"><div class="filter-grid svelte-12crvy"><div class="filter-item svelte-12crvy"><label for="start-date" class="svelte-12crvy">Start Date</label> <input type="date" id="start-date" class="svelte-12crvy"/></div> <div class="filter-item svelte-12crvy"><label for="end-date" class="svelte-12crvy">End Date</label> <input type="date" id="end-date" class="svelte-12crvy"/></div> <div class="filter-item svelte-12crvy"><label for="location-filter" class="svelte-12crvy">Location</label> <!></div> <div class="filter-item svelte-12crvy"><label for="climbing-type-filter" class="svelte-12crvy">Climb Type</label> <select id="climbing-type-filter" class="svelte-12crvy"><option>Any Type</option><!></select></div> <div class="filter-item svelte-12crvy"><label for="session-type-filter" class="svelte-12crvy">Session Type</label> <select id="session-type-filter" class="svelte-12crvy"><option>Any Type</option><!></select></div> <div class="filter-item svelte-12crvy"><label for="grade-filter" class="svelte-12crvy">Grade (Exact)</label> <input type="text" id="grade-filter" placeholder="e.g. V4" class="svelte-12crvy"/></div></div> <div class="filter-actions svelte-12crvy"><button class="reset-btn svelte-12crvy">Reset Filters</button></div></div>'),xt=v('<div class="filter-container svelte-12crvy"><button class="filter-header svelte-12crvy"><div class="header-content svelte-12crvy"><span class="icon svelte-12crvy">üîç</span> <span class="title svelte-12crvy">Filters</span> <!></div></button> <!></div>');function wt(Te,p){fa(p,!0);const r=["Rockstar Swindon","Flashpoint Swindon","Flashpoint Bristol","Redpoint Bristol","TCH Bristol","Other"],f=["Bouldering","Sport","Mixed"],E=["Projecting","Onsighting","Campusing","Repeaters"];let D=k(!1),u=k(""),z=k(""),w=k(""),U=k(""),Y=k(""),ne=k(""),ue=k(!1);function se(){l(D,!e(D))}function ae(){l(u,""),l(z,""),l(w,""),l(U,""),l(ue,!1),l(Y,""),l(ne,""),J()}function J(){p.onFilterParamsChange({startDate:e(u),endDate:e(z),location:e(w),climbingType:e(U),sessionType:e(Y),grade:e(ne)})}function oe(){e(w)==="Other"?(l(ue,!0),l(w,"")):J()}function fe(){l(ue,!1),l(w,""),J()}var ie=xt(),H=t(ie);H.__click=se;var le=t(H),we=s(t(le),4);{var ye=m=>{var G=_t();i(m,G)},te=m=>{var G=ut();i(m,G)};c(we,m=>{e(D)?m(ye):m(te,!1)})}a(le),a(H);var I=s(H,2);{var g=m=>{var G=yt(),R=t(G),B=t(R),K=s(t(B),2);Ne(K),K.__change=J,a(B);var X=s(B,2),b=s(t(X),2);Ne(b),b.__change=J,a(X);var O=s(X,2),y=s(t(O),2);{var n=q=>{var x=ft(),A=t(x);Ne(A),A.__input=J;var be=s(A,2);be.__click=fe,a(x),Ie(A,()=>e(w),L=>l(w,L)),i(q,x)},d=q=>{var x=mt();x.__change=oe;var A=t(x);A.value=A.__value="";var be=s(A);qe(be,17,()=>r,Fe,(L,S)=>{var P=gt(),V=t(P,!0);a(P);var re={};_(()=>{o(V,e(S)),re!==(re=e(S))&&(P.value=(P.__value=e(S))??"")}),i(L,P)}),a(x),xa(x,()=>e(w),L=>l(w,L)),i(q,x)};c(y,q=>{e(ue)?q(n):q(d,!1)})}a(O);var T=s(O,2),W=s(t(T),2);W.__change=J;var $=t(W);$.value=$.__value="";var j=s($);qe(j,17,()=>f,Fe,(q,x)=>{var A=ht(),be=t(A,!0);a(A);var L={};_(()=>{o(be,e(x)),L!==(L=e(x))&&(A.value=(A.__value=e(x))??"")}),i(q,A)}),a(W),a(T);var de=s(T,2),ve=s(t(de),2);ve.__change=J;var xe=t(ve);xe.value=xe.__value="";var F=s(xe);qe(F,17,()=>E,Fe,(q,x)=>{var A=bt(),be=t(A,!0);a(A);var L={};_(()=>{o(be,e(x)),L!==(L=e(x))&&(A.value=(A.__value=e(x))??"")}),i(q,A)}),a(ve),a(de);var M=s(de,2),me=s(t(M),2);Ne(me),me.__input=J,a(M),a(R);var Se=s(R,2),ke=t(Se);ke.__click=ae,a(Se),a(G),Ie(K,()=>e(u),q=>l(u,q)),Ie(b,()=>e(z),q=>l(z,q)),xa(W,()=>e(U),q=>l(U,q)),xa(ve,()=>e(Y),q=>l(Y,q)),Ie(me,()=>e(ne),q=>l(ne,q)),va(3,G,()=>ma,()=>({duration:200})),i(m,G)};c(I,m=>{e(D)&&m(g)})}a(ie),_(()=>$e(H,"aria-expanded",e(D))),i(Te,ie),ga()}_a(["click","change","input"]);var St=v('<label class="type-toggle svelte-yz0xxt"><input type="checkbox"/> <span>Sport?</span></label>'),kt=v("<option> </option>"),Dt=v('<div class="edit-form svelte-yz0xxt"><div class="edit-row main svelte-yz0xxt"><input type="text" class="edit-input grade svelte-yz0xxt" placeholder="Grade"/> <input type="text" class="edit-input name svelte-yz0xxt" placeholder="Route Name"/> <!></div> <div class="edit-row meta svelte-yz0xxt"><select class="edit-select svelte-yz0xxt"></select> <div class="attempts-input-wrapper svelte-yz0xxt"><span>#</span> <input type="number" min="1" class="edit-input num svelte-yz0xxt"/></div></div> <div class="edit-row notes svelte-yz0xxt"><textarea class="edit-input notes-area svelte-yz0xxt" placeholder="Notes..."></textarea></div> <div class="edit-actions svelte-yz0xxt"><button class="action-btn cancel svelte-yz0xxt">Cancel</button> <button class="action-btn save svelte-yz0xxt">Save</button></div></div>'),Tt=v('<span class="climb-type-tag svelte-yz0xxt"> </span>'),qt=v('<span class="notes-preview svelte-yz0xxt"> </span>'),zt=v('<span class="wall-tag svelte-yz0xxt"> </span>'),Ct=v('<span class="technique-tag svelte-yz0xxt"> </span>'),Lt=v('<span class="attempts-count svelte-yz0xxt"> </span>'),Ft=v('<div class="detail-row svelte-yz0xxt"><span class="label svelte-yz0xxt">Notes:</span> <p class="notes svelte-yz0xxt"> </p></div>'),Et=v('<p class="empty-notes svelte-yz0xxt">No notes for this climb.</p>'),Gt=v('<div class="climb-details svelte-yz0xxt"><!> <div class="tags svelte-yz0xxt"><span class="tag type svelte-yz0xxt"> </span> <span class="tag attempt-text svelte-yz0xxt"> </span></div></div>'),Ot=v('<div class="climb-header svelte-yz0xxt" role="button" tabindex="0"><div class="climb-main-info svelte-yz0xxt"><span> </span> <span class="climb-name svelte-yz0xxt"> </span> <!> <!> <!> <!></div> <div class="climb-meta svelte-yz0xxt"><span><span class="icon svelte-yz0xxt"> </span> <!></span> <button class="icon-btn edit-btn svelte-yz0xxt" aria-label="Edit climb" title="Edit climb">‚úé</button> <button class="icon-btn delete-btn svelte-yz0xxt" aria-label="Delete climb" title="Delete climb">üóëÔ∏è</button> <span class="chevron svelte-yz0xxt"> </span></div></div> <!>',1),At=v("<div><!></div>");function jt(Te,p){fa(p,!0);let r=Pa(p,"showClimbType",3,!1),f=k(!1),E=k(!1),D=k(""),u=k(""),z=k(""),w=k(1),U=k(""),Y=k(!1);function ne(){e(E)||l(f,!e(f))}function ue(I){I.stopPropagation(),p.onDelete()}function se(I){I.stopPropagation(),l(D,p.climb.name,!0),l(u,p.climb.grade,!0),l(z,p.climb.attemptType,!0),l(w,p.climb.attemptsNum,!0),l(U,p.climb.notes,!0),l(Y,p.climb.isSport,!0),l(E,!0),l(f,!0)}function ae(I){I.stopPropagation(),l(E,!1)}function J(I){I.stopPropagation();const g={...p.climb,name:e(D),grade:e(u),attemptType:e(z),attemptsNum:e(w),notes:e(U),isSport:e(Y)};p.onUpdate(g),l(E,!1)}function oe(){(e(z)==="Flash"||e(z)==="Onsight")&&l(w,1)}const fe={Flash:"‚ö°",Onsight:"üëÅÔ∏è",Redpoint:"üî¥",Dogged:"üõ†Ô∏è",DNF:"‚ùå"},ie=["Flash","Onsight","Redpoint","Dogged","DNF"];var H=At();let le;var we=t(H);{var ye=I=>{var g=Dt(),m=t(g),G=t(m);Ne(G);var R=s(G,2);Ne(R);var B=s(R,2);{var K=j=>{var de=St(),ve=t(de);Ne(ve),qa(2),a(de),Ka(ve,()=>e(Y),xe=>l(Y,xe)),i(j,de)};c(B,j=>{r()&&j(K)})}a(m);var X=s(m,2),b=t(X);b.__change=oe,qe(b,21,()=>ie,Fe,(j,de)=>{var ve=kt(),xe=t(ve,!0);a(ve);var F={};_(()=>{o(xe,e(de)),F!==(F=e(de))&&(ve.value=(ve.__value=e(de))??"")}),i(j,ve)}),a(b);var O=s(b,2),y=s(t(O),2);Ne(y),a(O),a(X);var n=s(X,2),d=t(n);Za(d),a(n);var T=s(n,2),W=t(T);W.__click=ae;var $=s(W,2);$.__click=J,a(T),a(g),_(()=>y.disabled=e(z)==="Flash"||e(z)==="Onsight"),Ie(G,()=>e(u),j=>l(u,j)),Ie(R,()=>e(D),j=>l(D,j)),xa(b,()=>e(z),j=>l(z,j)),Ie(y,()=>e(w),j=>l(w,j)),Ie(d,()=>e(U),j=>l(U,j)),i(I,g)},te=I=>{var g=Ot(),m=Me(g);m.__click=ne,m.__keydown=S=>(S.key==="Enter"||S.key===" ")&&ne();var G=t(m),R=t(G);let B;var K=t(R,!0);a(R);var X=s(R,2),b=t(X,!0);a(X);var O=s(X,2);{var y=S=>{var P=Tt(),V=t(P,!0);a(P),_(()=>o(V,p.climb.isSport?"Sport":"Boulder")),i(S,P)};c(O,S=>{r()&&S(y)})}var n=s(O,2);{var d=S=>{var P=qt(),V=t(P);a(P),_(()=>o(V,`- ${p.climb.notes??""}`)),i(S,P)};c(n,S=>{!e(f)&&p.climb.notes&&S(d)})}var T=s(n,2);{var W=S=>{var P=zt(),V=t(P,!0);a(P),_(()=>o(V,p.climb.wall)),i(S,P)};c(T,S=>{p.climb.wall&&S(W)})}var $=s(T,2);{var j=S=>{var P=Ct(),V=t(P,!0);a(P),_(()=>o(V,p.climb.techniqueFocus)),i(S,P)};c($,S=>{p.climb.techniqueFocus&&S(j)})}a(G);var de=s(G,2),ve=t(de);let xe;var F=t(ve),M=t(F,!0);a(F);var me=s(F,2);{var Se=S=>{var P=Lt(),V=t(P,!0);a(P),_(()=>o(V,p.climb.attemptsNum)),i(S,P)};c(me,S=>{p.climb.attemptType!=="Flash"&&p.climb.attemptType!=="Onsight"&&S(Se)})}a(ve);var ke=s(ve,2);ke.__click=se;var q=s(ke,2);q.__click=ue;var x=s(q,2),A=t(x,!0);a(x),a(de),a(m);var be=s(m,2);{var L=S=>{var P=Gt(),V=t(P);{var re=ee=>{var ge=Ft(),Oe=s(t(ge),2),Pe=t(Oe,!0);a(Oe),a(ge),_(()=>o(Pe,p.climb.notes)),i(ee,ge)},ce=ee=>{var ge=Et();i(ee,ge)};c(V,ee=>{p.climb.notes?ee(re):ee(ce,!1)})}var Ee=s(V,2),he=t(Ee),Ce=t(he,!0);a(he);var De=s(he,2),Le=t(De,!0);a(De),a(Ee),a(P),_(()=>{o(Ce,p.climb.isSport?"Sport":"Boulder"),o(Le,p.climb.attemptType)}),va(3,P,()=>ma,()=>({duration:150})),i(S,P)};c(be,S=>{e(f)&&S(L)})}_(()=>{$e(m,"aria-expanded",e(f)),B=la(R,1,"grade-badge svelte-yz0xxt",null,B,{sport:p.climb.isSport}),o(K,p.climb.grade),o(b,p.climb.name||"Unnamed Route"),xe=la(ve,1,"attempt-type svelte-yz0xxt",null,xe,{flash:p.climb.attemptType==="Flash"}),o(M,fe[p.climb.attemptType]||p.climb.attemptType),o(A,e(f)?"‚ñ≤":"‚ñº")}),i(I,g)};c(we,I=>{e(E)?I(ye):I(te,!1)})}a(H),_(()=>le=la(H,1,"climb-entry svelte-yz0xxt",null,le,{expanded:e(f),editing:e(E)})),i(Te,H),ga()}_a(["change","click","keydown"]);var Nt=v('<span class="stat svelte-7vqogn"> </span>'),It=v('<span class="status-icon pending svelte-7vqogn" title="Waiting to sync">üîÑ</span>'),Mt=v('<span class="status-icon error svelte-7vqogn" title="Sync error">‚ö†Ô∏è</span>'),Pt=v('<span class="chip svelte-7vqogn"> </span>'),Rt=v('<span class="text-none svelte-7vqogn">None</span>'),Bt=v('<div class="detail-item svelte-7vqogn"><span class="label svelte-7vqogn">Difficulty</span> <span class="value svelte-7vqogn"> </span></div>'),Vt=v('<span class="chip svelte-7vqogn"> </span>'),Ut=v('<span class="text-none svelte-7vqogn">None</span>'),Wt=v('<div class="detail-item svelte-7vqogn"><span class="label svelte-7vqogn">Category</span> <div class="value-chips svelte-7vqogn"><!></div></div>'),Ht=v('<span class="chip svelte-7vqogn"> </span>'),Jt=v('<span class="text-none svelte-7vqogn">None</span>'),Zt=v('<div class="detail-item svelte-7vqogn"><span class="label svelte-7vqogn">Energy System</span> <div class="value-chips svelte-7vqogn"><!></div></div>'),Kt=v('<span class="chip svelte-7vqogn"> </span>'),Xt=v('<span class="text-none svelte-7vqogn">None</span>'),Yt=v('<div class="detail-item svelte-7vqogn"><span class="label svelte-7vqogn">Wall</span> <div class="value-chips svelte-7vqogn"><!></div></div>'),$t=v('<div class="notes-container svelte-7vqogn"><span class="label svelte-7vqogn">Session Notes</span> <p class="notes-text svelte-7vqogn"> </p></div>'),Qt=v('<div class="metric svelte-7vqogn"><span class="label svelte-7vqogn">Open Grip</span> <div class="bar-container svelte-7vqogn"><div class="bar-fill svelte-7vqogn"></div></div> <span class="score svelte-7vqogn"> </span></div>'),es=v('<div class="metric svelte-7vqogn"><span class="label svelte-7vqogn">Crimp Grip</span> <div class="bar-container svelte-7vqogn"><div class="bar-fill svelte-7vqogn"></div></div> <span class="score svelte-7vqogn"> </span></div>'),as=v('<div class="metric svelte-7vqogn"><span class="label svelte-7vqogn">Pinch Grip</span> <div class="bar-container svelte-7vqogn"><div class="bar-fill svelte-7vqogn"></div></div> <span class="score svelte-7vqogn"> </span></div>'),ts=v('<div class="metric svelte-7vqogn"><span class="label svelte-7vqogn">Sloper Grip</span> <div class="bar-container svelte-7vqogn"><div class="bar-fill svelte-7vqogn"></div></div> <span class="score svelte-7vqogn"> </span></div>'),ss=v('<div class="metric svelte-7vqogn"><span class="label svelte-7vqogn">Jug Grip</span> <div class="bar-container svelte-7vqogn"><div class="bar-fill svelte-7vqogn"></div></div> <span class="score svelte-7vqogn"> </span></div>'),rs=v('<p class="no-climbs svelte-7vqogn">No climbs logged for this session.</p>'),is=v('<div class="card-body svelte-7vqogn"><div class="details-grid svelte-7vqogn"><div class="detail-item svelte-7vqogn"><span class="label svelte-7vqogn">Training Type</span> <div class="value-chips svelte-7vqogn"><!></div></div> <!> <!> <!> <!></div> <!> <div class="metrics-container svelte-7vqogn"><div class="metric svelte-7vqogn"><span class="label svelte-7vqogn">Finger Load</span> <div class="bar-container svelte-7vqogn"><div class="bar-fill svelte-7vqogn"></div></div> <span class="score svelte-7vqogn"> </span></div> <div class="metric svelte-7vqogn"><span class="label svelte-7vqogn">Shoulder Load</span> <div class="bar-container svelte-7vqogn"><div class="bar-fill svelte-7vqogn"></div></div> <span class="score svelte-7vqogn"> </span></div> <div class="metric svelte-7vqogn"><span class="label svelte-7vqogn">Forearm Load</span> <div class="bar-container svelte-7vqogn"><div class="bar-fill svelte-7vqogn"></div></div> <span class="score svelte-7vqogn"> </span></div> <!> <!> <!> <!> <!></div> <div class="climbs-list svelte-7vqogn"><h4 class="svelte-7vqogn">Climbs</h4> <div class="climbs-container svelte-7vqogn"><!> <!></div></div></div>'),ls=v('<div><div class="card-header svelte-7vqogn" role="button" tabindex="0"><div class="header-main svelte-7vqogn"><div class="date-badge svelte-7vqogn"><span class="day svelte-7vqogn"> </span> <span class="month svelte-7vqogn"> </span></div> <div class="session-info svelte-7vqogn"><div class="session-text svelte-7vqogn"><h3 class="location svelte-7vqogn"> </h3> <div class="session-meta svelte-7vqogn"><span class="type-tag svelte-7vqogn"> </span> <span class="stat svelte-7vqogn"> </span> <!></div></div> <div class="load-summary svelte-7vqogn"><div class="load-badge finger svelte-7vqogn"> </div> <div class="load-badge shoulder svelte-7vqogn"> </div> <div class="load-badge forearm svelte-7vqogn"> </div></div></div></div> <div class="header-actions"><div class="header-status svelte-7vqogn"><!></div>  <button class="btn-icon delete-session" title="Delete Session">üóëÔ∏è</button> <span class="chevron svelte-7vqogn"> </span></div></div> <!></div>');function vs(Te,p){fa(p,!0);let r=Pa(p,"session",7),f=k(!1),E=k(!1);function D(){l(f,!e(f))}function u(){l(E,!0)}function z(q){const x=[...r().climbs];x.splice(q,1),Na(r().id,{climbs:x}),p.onDelete()}function w(q,x){const A=[...r().climbs];A[q]=x,U(A)}async function U(q){if(Na(r().id,{climbs:q}),r().climbs=q,Xa()){const x={date:r().date,location:r().location,customLocation:r().customLocation,climbingType:r().climbingType,trainingTypes:r().trainingTypes||[],difficulty:r().difficulty,categories:r().categories||[],energySystems:r().energySystems||[],wallAngles:r().wallAngles||[],fingerLoad:r().fingerLoad,shoulderLoad:r().shoulderLoad,forearmLoad:r().forearmLoad,openGrip:r().openGrip,crimpGrip:r().crimpGrip,pinchGrip:r().pinchGrip,sloperGrip:r().sloperGrip,jugGrip:r().jugGrip,climbs:q};try{const A=await et(r().id,x);A.ok?(Ya(r().id),r().syncStatus="synced"):(console.error("Failed to sync update:",A.error),Ia(r().id),r().syncStatus="error")}catch(A){console.error("Exception syncing update:",A),Ia(r().id),r().syncStatus="error"}}}let Y=pa(()=>r().climbs?.length??0),ne=pa(()=>(r().climbs||[]).reduce((q,x)=>{const A=parseInt(x.grade.replace(/\D/g,""))||0,be=parseInt(q.replace(/\D/g,""))||0;return A>be?x.grade:q},"V0"));var ue=ls();let se;var ae=t(ue);ae.__click=D,ae.__keydown=q=>q.key==="Enter"&&D();var J=t(ae),oe=t(J),fe=t(oe),ie=t(fe,!0);a(fe);var H=s(fe,2),le=t(H,!0);a(H),a(oe);var we=s(oe,2),ye=t(we),te=t(ye),I=t(te,!0);a(te);var g=s(te,2),m=t(g),G=t(m,!0);a(m);var R=s(m,2),B=t(R);a(R);var K=s(R,2);{var X=q=>{var x=Nt(),A=t(x);a(x),_(()=>o(A,`Max: ${e(ne)??""}`)),i(q,x)};c(K,q=>{e(Y)>0&&q(X)})}a(g),a(ye);var b=s(ye,2),O=t(b),y=t(O,!0);a(O);var n=s(O,2),d=t(n,!0);a(n);var T=s(n,2),W=t(T,!0);a(T),a(b),a(we),a(J);var $=s(J,2),j=t($),de=t(j);{var ve=q=>{var x=It();i(q,x)},xe=q=>{var x=ea(),A=Me(x);{var be=L=>{var S=Mt();i(L,S)};c(A,L=>{r().syncStatus==="error"&&L(be)},!0)}i(q,x)};c(de,q=>{r().syncStatus==="pending"?q(ve):q(xe,!1)})}a(j);var F=s(j,2);F.__click=q=>{q.stopPropagation(),u()};var M=s(F,2),me=t(M,!0);a(M),a($),a(ae);var Se=s(ae,2);{var ke=q=>{var x=is(),A=t(x),be=t(A),L=s(t(be),2),S=t(L);{var P=Z=>{var Q=ea(),h=Me(Q);qe(h,17,()=>r().trainingTypes,Fe,(C,N)=>{var pe=Pt(),_e=t(pe,!0);a(pe),_(()=>o(_e,e(N))),i(C,pe)}),i(Z,Q)},V=Z=>{var Q=Rt();i(Z,Q)};c(S,Z=>{r().trainingTypes&&r().trainingTypes.length>0&&!r().trainingTypes.includes("None")?Z(P):Z(V,!1)})}a(L),a(be);var re=s(be,2);{var ce=Z=>{var Q=Bt(),h=s(t(Q),2),C=t(h,!0);a(h),a(Q),_(()=>o(C,r().difficulty)),i(Z,Q)};c(re,Z=>{r().difficulty&&Z(ce)})}var Ee=s(re,2);{var he=Z=>{var Q=Wt(),h=s(t(Q),2),C=t(h);{var N=_e=>{var ze=ea(),Ue=Me(ze);qe(Ue,17,()=>r().categories,Fe,(da,ka)=>{var ca=Vt(),Da=t(ca,!0);a(ca),_(()=>o(Da,e(ka))),i(da,ca)}),i(_e,ze)},pe=_e=>{var ze=Ut();i(_e,ze)};c(C,_e=>{r().categories.length>0&&!r().categories.includes("None")?_e(N):_e(pe,!1)})}a(h),a(Q),i(Z,Q)};c(Ee,Z=>{r().categories?.length&&Z(he)})}var Ce=s(Ee,2);{var De=Z=>{var Q=Zt(),h=s(t(Q),2),C=t(h);{var N=_e=>{var ze=ea(),Ue=Me(ze);qe(Ue,17,()=>r().energySystems,Fe,(da,ka)=>{var ca=Ht(),Da=t(ca,!0);a(ca),_(()=>o(Da,e(ka))),i(da,ca)}),i(_e,ze)},pe=_e=>{var ze=Jt();i(_e,ze)};c(C,_e=>{r().energySystems.length>0&&!r().energySystems.includes("None")?_e(N):_e(pe,!1)})}a(h),a(Q),i(Z,Q)};c(Ce,Z=>{r().energySystems?.length&&Z(De)})}var Le=s(Ce,2);{var ee=Z=>{var Q=Yt(),h=s(t(Q),2),C=t(h);{var N=_e=>{var ze=ea(),Ue=Me(ze);qe(Ue,17,()=>r().wallAngles,Fe,(da,ka)=>{var ca=Kt(),Da=t(ca,!0);a(ca),_(()=>o(Da,e(ka))),i(da,ca)}),i(_e,ze)},pe=_e=>{var ze=Xt();i(_e,ze)};c(C,_e=>{r().wallAngles.length>0&&!r().wallAngles.includes("None")?_e(N):_e(pe,!1)})}a(h),a(Q),i(Z,Q)};c(Le,Z=>{r().wallAngles?.length&&Z(ee)})}a(A);var ge=s(A,2);{var Oe=Z=>{var Q=$t(),h=s(t(Q),2),C=t(h,!0);a(h),a(Q),_(()=>o(C,r().notes)),i(Z,Q)};c(ge,Z=>{r().notes&&Z(Oe)})}var Pe=s(ge,2),Ae=t(Pe),Re=s(t(Ae),2),Je=t(Re);a(Re);var aa=s(Re,2),Be=t(aa);a(aa),a(Ae);var je=s(Ae,2),Qe=s(t(je),2),Ve=t(Qe);a(Qe);var na=s(Qe,2),oa=t(na);a(na),a(je);var Ge=s(je,2),We=s(t(Ge),2),He=t(We);a(We);var ta=s(We,2),sa=t(ta);a(ta),a(Ge);var ra=s(Ge,2);{var Ze=Z=>{var Q=Qt(),h=s(t(Q),2),C=t(h);a(h);var N=s(h,2),pe=t(N);a(N),a(Q),_(()=>{ia(C,`width: ${r().openGrip/5*100}%`),o(pe,`${r().openGrip??""}/5`)}),i(Z,Q)};c(ra,Z=>{r().openGrip&&Z(Ze)})}var Ke=s(ra,2);{var Sa=Z=>{var Q=es(),h=s(t(Q),2),C=t(h);a(h);var N=s(h,2),pe=t(N);a(N),a(Q),_(()=>{ia(C,`width: ${r().crimpGrip/5*100}%`),o(pe,`${r().crimpGrip??""}/5`)}),i(Z,Q)};c(Ke,Z=>{r().crimpGrip&&Z(Sa)})}var Xe=s(Ke,2);{var za=Z=>{var Q=as(),h=s(t(Q),2),C=t(h);a(h);var N=s(h,2),pe=t(N);a(N),a(Q),_(()=>{ia(C,`width: ${r().pinchGrip/5*100}%`),o(pe,`${r().pinchGrip??""}/5`)}),i(Z,Q)};c(Xe,Z=>{r().pinchGrip&&Z(za)})}var ba=s(Xe,2);{var ya=Z=>{var Q=ts(),h=s(t(Q),2),C=t(h);a(h);var N=s(h,2),pe=t(N);a(N),a(Q),_(()=>{ia(C,`width: ${r().sloperGrip/5*100}%`),o(pe,`${r().sloperGrip??""}/5`)}),i(Z,Q)};c(ba,Z=>{r().sloperGrip&&Z(ya)})}var wa=s(ba,2);{var Ca=Z=>{var Q=ss(),h=s(t(Q),2),C=t(h);a(h);var N=s(h,2),pe=t(N);a(N),a(Q),_(()=>{ia(C,`width: ${r().jugGrip/5*100}%`),o(pe,`${r().jugGrip??""}/5`)}),i(Z,Q)};c(wa,Z=>{r().jugGrip&&Z(Ca)})}a(Pe);var La=s(Pe,2),Ye=s(t(La),2),ua=t(Ye);qe(ua,17,()=>r().climbs||[],Fe,(Z,Q,h)=>{{let C=pa(()=>r().climbingType==="Mixed");jt(Z,{get climb(){return e(Q)},onDelete:()=>z(h),onUpdate:N=>w(h,N),get showClimbType(){return e(C)}})}});var Fa=s(ua,2);{var Ea=Z=>{var Q=rs();i(Z,Q)};c(Fa,Z=>{(r().climbs||[]).length===0&&Z(Ea)})}a(Ye),a(La),a(x),_(()=>{ia(Je,`width: ${r().fingerLoad/5*100}%`),o(Be,`${r().fingerLoad??""}/5`),ia(Ve,`width: ${r().shoulderLoad/5*100}%`),o(oa,`${r().shoulderLoad??""}/5`),ia(He,`width: ${r().forearmLoad/5*100}%`),o(sa,`${r().forearmLoad??""}/5`)}),va(3,x,()=>ma,()=>({duration:150})),i(q,x)};c(Se,q=>{e(f)&&q(ke)})}a(ue),_((q,x)=>{se=la(ue,1,"session-card svelte-7vqogn",null,se,{expanded:e(f)}),$e(ae,"aria-expanded",e(f)),o(ie,q),o(le,x),o(I,r().location),o(G,r().climbingType),o(B,`${e(Y)??""} climbs`),$e(O,"title",`Finger Load: ${r().fingerLoad??""}`),o(y,r().fingerLoad),$e(n,"title",`Shoulder Load: ${r().shoulderLoad??""}`),o(d,r().shoulderLoad),$e(T,"title",`Forearm Load: ${r().forearmLoad??""}`),o(W,r().forearmLoad),o(me,e(f)?"‚ñ≤":"‚ñº")},[()=>new Date(r().date).getDate(),()=>new Date(r().date).toLocaleDateString("en-GB",{month:"short"})]),i(Te,ue),ga()}_a(["click","keydown"]);var ns=v('<div class="legend-item svelte-11p9lqi"><span class="l-icon svelte-11p9lqi"> </span> <span class="l-label svelte-11p9lqi"> </span></div>'),os=v('<div class="legend-content svelte-11p9lqi"><div class="legend-grid svelte-11p9lqi"></div></div>'),ds=v('<div class="legend-container svelte-11p9lqi"><button class="legend-toggle svelte-11p9lqi"><span class="icon">‚ÑπÔ∏è</span> <span class="text">Icon Legend</span> <span class="chevron svelte-11p9lqi"> </span></button> <!></div>');function $a(Te){let p=k(!1);const r=[{icon:"üëÅÔ∏è",label:"Onsight"},{icon:"‚ö°",label:"Flash"},{icon:"üî¥",label:"Redpoint"},{icon:"üõ†Ô∏è",label:"Dogged"},{icon:"‚ùå",label:"DNF"}];var f=ds(),E=t(f);E.__click=()=>l(p,!e(p));var D=s(t(E),4),u=t(D,!0);a(D),a(E);var z=s(E,2);{var w=U=>{var Y=os(),ne=t(Y);qe(ne,21,()=>r,Fe,(ue,se)=>{var ae=ns(),J=t(ae),oe=t(J,!0);a(J);var fe=s(J,2),ie=t(fe,!0);a(fe),a(ae),_(()=>{o(oe,e(se).icon),o(ie,e(se).label)}),i(ue,ae)}),a(ne),a(Y),va(3,Y,()=>ma),i(U,Y)};c(z,U=>{e(p)&&U(w)})}a(f),_(()=>{$e(E,"aria-expanded",e(p)),o(u,e(p)?"‚ñº":"‚ñ∂")}),i(Te,f)}_a(["click"]);function Ha(Te,p){if(!Te||Te.length===0){alert("No data to export");return}const r=Array.from(new Set(Te.flatMap(Object.keys))),f=[r.join(","),...Te.map(u=>r.map(z=>{let w=u[z];if(w==null)return"";if(typeof w=="object"){if(w instanceof Date)return w.toISOString();w=JSON.stringify(w).replace(/"/g,'""')}else typeof w=="string"&&(w=w.replace(/"/g,'""'));return typeof w=="string"&&(w.includes(",")||w.includes('"')||w.includes(`
`))?`"${w}"`:w}).join(","))].join(`
`),E=new Blob([f],{type:"text/csv;charset=utf-8;"}),D=document.createElement("a");if(D.download!==void 0){const u=URL.createObjectURL(E);D.setAttribute("href",u),D.setAttribute("download",p.endsWith(".csv")?p:`${p}.csv`),D.style.visibility="hidden",document.body.appendChild(D),D.click(),document.body.removeChild(D)}}var cs=v('<span class="spinner svelte-14fqz8w"></span> Fetching...',1),ps=v('<div class="error-banner svelte-14fqz8w"> </div>'),_s=v('<small class="svelte-14fqz8w">Try adjusting your filters.</small>'),us=v('<div class="empty-state svelte-14fqz8w"><p class="svelte-14fqz8w">No indoor climbing sessions found.</p> <!></div>'),fs=v('<div class="load-more-container svelte-14fqz8w"><button class="load-more-btn svelte-14fqz8w"> </button></div>'),gs=v('<div class="view-container svelte-14fqz8w"><div class="view-header svelte-14fqz8w"><h2 class="view-title svelte-14fqz8w">üßó Indoor Climbing History</h2> <div class="header-actions svelte-14fqz8w"><button class="action-btn secondary svelte-14fqz8w" title="Export filtered data to CSV">üì• Export</button> <button class="action-btn svelte-14fqz8w" title="Fetch data from cloud"><!></button></div></div> <!> <!> <div class="info-bar svelte-14fqz8w"><div class="legend-wrapper svelte-14fqz8w"><!></div> <div class="load-key svelte-14fqz8w"><span class="key-label svelte-14fqz8w">Load:</span> <div class="key-item svelte-14fqz8w"><span class="dot finger svelte-14fqz8w"></span> Finger</div> <div class="key-item svelte-14fqz8w"><span class="dot shoulder svelte-14fqz8w"></span> Shoulder</div> <div class="key-item svelte-14fqz8w"><span class="dot forearm svelte-14fqz8w"></span> Forearm</div></div></div> <div class="sessions-list"><!> <!> <!></div></div>');function ms(Te,p){fa(p,!0);let r=k(ha([])),f=k(ha([])),E=k(!1),D=k(""),u=k(ha({startDate:"",endDate:"",location:"",climbingType:"",sessionType:"",grade:""})),z=k(20);const w=20;Ua(()=>{U()});function U(){const n=Oa("indoor_climb");l(r,n.sort((d,T)=>new Date(T.date).getTime()-new Date(d.date).getTime()),!0),se()}async function Y(){l(E,!0),l(D,"");try{await Aa();const n=await at();n.ok&&n.data?ne(n.data):l(D,n.error||"Failed to fetch data",!0)}catch(n){l(D,n instanceof Error?n.message:"Unknown error",!0)}finally{l(E,!1)}}function ne(n){const d=n.map(W=>({...W,activityType:"indoor_climb",createdAt:new Date().toISOString(),updatedAt:new Date().toISOString(),syncStatus:"synced",syncedAt:new Date().toISOString(),openGrip:0,crimpGrip:0,pinchGrip:0,sloperGrip:0,jugGrip:0}));ja(d);const T=Oa("indoor_climb");l(r,T.sort((W,$)=>new Date($.date).getTime()-new Date(W.date).getTime()),!0),se()}function ue(n){l(u,n,!0),se()}function se(){l(z,w),l(f,e(r).filter(n=>{if(e(u).startDate&&n.date<e(u).startDate||e(u).endDate&&n.date>e(u).endDate||e(u).location&&n.location!==e(u).location)return!1;if(e(u).climbingType&&(n.climbingType==="Leading"?"Sport":n.climbingType)!==e(u).climbingType)if(n.climbingType==="Mixed")if(e(u).climbingType==="Bouldering"){if(!n.climbs.some(T=>!T.isSport))return!1}else if(e(u).climbingType==="Sport"){if(!n.climbs.some(T=>T.isSport))return!1}else return!1;else return!1;if(e(u).sessionType&&!n.trainingTypes?.includes(e(u).sessionType))return!1;if(e(u).grade){const d=e(u).grade.trim().toLowerCase();if(!n.climbs.some(W=>W.grade.trim().toLowerCase()===d))return!1}return!0}),!0)}function ae(){l(z,e(z)+w)}var J=gs(),oe=t(J),fe=s(t(oe),2),ie=t(fe);ie.__click=()=>Ha(e(f),"indoor_climbs");var H=s(ie,2);H.__click=Y;var le=t(H);{var we=n=>{var d=cs();qa(),i(n,d)},ye=n=>{var d=Ta("‚òÅÔ∏è Fetch Data");i(n,d)};c(le,n=>{e(E)?n(we):n(ye,!1)})}a(H),a(fe),a(oe);var te=s(oe,2);{var I=n=>{var d=ps(),T=t(d,!0);a(d),_(()=>o(T,e(D))),va(3,d,()=>ma),i(n,d)};c(te,n=>{e(D)&&n(I)})}var g=s(te,2);wt(g,{onFilterParamsChange:ue});var m=s(g,2),G=t(m),R=t(G);$a(R),a(G),qa(2),a(m);var B=s(m,2),K=t(B);qe(K,17,()=>e(f).slice(0,e(z)),n=>n.id,(n,d)=>{vs(n,{get session(){return e(d)},onDelete:U})});var X=s(K,2);{var b=n=>{var d=us(),T=s(t(d),2);{var W=$=>{var j=_s();i($,j)};c(T,$=>{e(r).length>0&&$(W)})}a(d),i(n,d)};c(X,n=>{e(f).length===0&&n(b)})}var O=s(X,2);{var y=n=>{var d=fs(),T=t(d);T.__click=ae;var W=t(T);a(T),a(d),_(()=>o(W,`Load More (${e(f).length-e(z)} remaining)`)),i(n,d)};c(O,n=>{e(z)<e(f).length&&n(y)})}a(B),a(J),_(()=>H.disabled=e(E)),i(Te,J),ga()}_a(["click"]);var hs=v('<span class="chevron svelte-1frtlim">‚ñ≤</span>'),bs=v('<span class="chevron svelte-1frtlim">‚ñº</span>'),ys=v('<div class="input-with-action svelte-1frtlim"><input type="text" id="area-filter-text" placeholder="Type area name..." class="flat-left svelte-1frtlim"/> <button class="action-btn flat-right svelte-1frtlim" title="Back to list">‚úï</button></div>'),xs=v("<option> </option>"),ws=v('<select id="area-filter" class="svelte-1frtlim"><option>All Areas</option><!><option>Other (Manual Entry)</option></select>'),Ss=v('<div class="input-with-action svelte-1frtlim"><input type="text" id="crag-filter-text" placeholder="Type crag name..." class="flat-left svelte-1frtlim"/> <button class="action-btn flat-right svelte-1frtlim" title="Back to list">‚úï</button></div>'),ks=v("<option> </option>"),Ds=v('<select id="crag-filter" class="svelte-1frtlim"><option>All Crags</option><!><option>Other (Manual Entry)</option></select>'),Ts=v('<input type="text" id="crag-filter-text" class="svelte-1frtlim"/>'),qs=v("<option> </option>"),zs=v("<option> </option>"),Cs=v('<div class="filter-body svelte-1frtlim"><div class="filter-grid svelte-1frtlim"><div class="filter-item svelte-1frtlim"><label for="start-date" class="svelte-1frtlim">Start Date</label> <input type="date" id="start-date" class="svelte-1frtlim"/></div> <div class="filter-item svelte-1frtlim"><label for="end-date" class="svelte-1frtlim">End Date</label> <input type="date" id="end-date" class="svelte-1frtlim"/></div> <div class="filter-item svelte-1frtlim"><label for="area-filter" class="svelte-1frtlim">Area</label> <!></div> <div class="filter-item svelte-1frtlim"><label for="crag-filter" class="svelte-1frtlim">Crag</label> <!></div> <div class="filter-item svelte-1frtlim"><label for="climbing-type-filter" class="svelte-1frtlim">Climb Type</label> <select id="climbing-type-filter" class="svelte-1frtlim"><option>Any Type</option><!></select></div> <div class="filter-item svelte-1frtlim"><label for="session-type-filter" class="svelte-1frtlim">Session Type</label> <select id="session-type-filter" class="svelte-1frtlim"><option>Any Type</option><!></select></div> <div class="filter-item svelte-1frtlim"><label for="grade-filter" class="svelte-1frtlim">Grade (Exact)</label> <input type="text" id="grade-filter" placeholder="e.g. 7a" class="svelte-1frtlim"/></div></div> <div class="filter-actions svelte-1frtlim"><button class="reset-btn svelte-1frtlim">Reset Filters</button></div></div>'),Ls=v('<div class="filter-container svelte-1frtlim"><button class="filter-header svelte-1frtlim"><div class="header-content svelte-1frtlim"><span class="icon svelte-1frtlim">üîç</span> <span class="title svelte-1frtlim">Filters</span> <!></div></button> <!></div>');function Fs(Te,p){fa(p,!0);const r=tt(),f=["Bouldering","Sport","Mixed","Trad"],E=["Projecting","Onsighting","Campusing","Repeaters","Fun","Volume"];let D=k(!1),u=k(""),z=k(""),w=k(""),U=k(""),Y=k(""),ne=k(""),ue=k(""),se=k(!1),ae=k(!1),J=pa(()=>e(w)&&e(w)!=="Other"?st(e(w)):[]);function oe(){e(w)==="Other"?(l(se,!0),l(w,"")):l(se,!1),l(U,""),l(ae,!1),le()}function fe(){e(U)==="Other"?(l(ae,!0),l(U,"")):l(ae,!1),le()}function ie(){l(D,!e(D))}function H(){l(u,""),l(z,""),l(w,""),l(U,""),l(Y,""),l(ne,""),l(ue,""),l(se,!1),l(ae,!1),le()}function le(){p.onFilterParamsChange({startDate:e(u),endDate:e(z),area:e(w),crag:e(U),climbingType:e(Y),sessionType:e(ne),grade:e(ue)})}var we=Ls(),ye=t(we);ye.__click=ie;var te=t(ye),I=s(t(te),4);{var g=B=>{var K=hs();i(B,K)},m=B=>{var K=bs();i(B,K)};c(I,B=>{e(D)?B(g):B(m,!1)})}a(te),a(ye);var G=s(ye,2);{var R=B=>{var K=Cs(),X=t(K),b=t(X),O=s(t(b),2);Ne(O),O.__change=le,a(b);var y=s(b,2),n=s(t(y),2);Ne(n),n.__change=le,a(y);var d=s(y,2),T=s(t(d),2);{var W=V=>{var re=ys(),ce=t(re);Ne(ce),ce.__input=le;var Ee=s(ce,2);Ee.__click=()=>{l(se,!1),l(w,""),le()},a(re),Ie(ce,()=>e(w),he=>l(w,he)),i(V,re)},$=V=>{var re=ws();re.__change=oe;var ce=t(re);ce.value=ce.__value="";var Ee=s(ce);qe(Ee,17,()=>r,Fe,(Ce,De)=>{var Le=xs(),ee=t(Le,!0);a(Le);var ge={};_(()=>{o(ee,e(De)),ge!==(ge=e(De))&&(Le.value=(Le.__value=e(De))??"")}),i(Ce,Le)});var he=s(Ee);he.value=he.__value="Other",a(re),xa(re,()=>e(w),Ce=>l(w,Ce)),i(V,re)};c(T,V=>{e(se)?V(W):V($,!1)})}a(d);var j=s(d,2),de=s(t(j),2);{var ve=V=>{var re=Ss(),ce=t(re);Ne(ce),ce.__input=le;var Ee=s(ce,2);Ee.__click=()=>{l(ae,!1),l(U,""),le()},a(re),Ie(ce,()=>e(U),he=>l(U,he)),i(V,re)},xe=V=>{var re=ea(),ce=Me(re);{var Ee=Ce=>{var De=Ds();De.__change=fe;var Le=t(De);Le.value=Le.__value="";var ee=s(Le);qe(ee,17,()=>e(J),Fe,(Oe,Pe)=>{var Ae=ks(),Re=t(Ae,!0);a(Ae);var Je={};_(()=>{o(Re,e(Pe)),Je!==(Je=e(Pe))&&(Ae.value=(Ae.__value=e(Pe))??"")}),i(Oe,Ae)});var ge=s(ee);ge.value=ge.__value="Other",a(De),xa(De,()=>e(U),Oe=>l(U,Oe)),i(Ce,De)},he=Ce=>{var De=Ts();Ne(De),De.__input=le,_(()=>{$e(De,"placeholder",e(w)?"Filter crag...":"Select area first"),De.disabled=!e(se)&&!e(w)}),Ie(De,()=>e(U),Le=>l(U,Le)),i(Ce,De)};c(ce,Ce=>{!e(se)&&e(w)&&e(J).length>0?Ce(Ee):Ce(he,!1)},!0)}i(V,re)};c(de,V=>{e(ae)?V(ve):V(xe,!1)})}a(j);var F=s(j,2),M=s(t(F),2);M.__change=le;var me=t(M);me.value=me.__value="";var Se=s(me);qe(Se,17,()=>f,Fe,(V,re)=>{var ce=qs(),Ee=t(ce,!0);a(ce);var he={};_(()=>{o(Ee,e(re)),he!==(he=e(re))&&(ce.value=(ce.__value=e(re))??"")}),i(V,ce)}),a(M),a(F);var ke=s(F,2),q=s(t(ke),2);q.__change=le;var x=t(q);x.value=x.__value="";var A=s(x);qe(A,17,()=>E,Fe,(V,re)=>{var ce=zs(),Ee=t(ce,!0);a(ce);var he={};_(()=>{o(Ee,e(re)),he!==(he=e(re))&&(ce.value=(ce.__value=e(re))??"")}),i(V,ce)}),a(q),a(ke);var be=s(ke,2),L=s(t(be),2);Ne(L),L.__input=le,a(be),a(X);var S=s(X,2),P=t(S);P.__click=H,a(S),a(K),Ie(O,()=>e(u),V=>l(u,V)),Ie(n,()=>e(z),V=>l(z,V)),xa(M,()=>e(Y),V=>l(Y,V)),xa(q,()=>e(ne),V=>l(ne,V)),Ie(L,()=>e(ue),V=>l(ue,V)),va(3,K,()=>ma,()=>({duration:200})),i(B,K)};c(G,B=>{e(D)&&B(R)})}a(we),_(()=>$e(ye,"aria-expanded",e(D))),i(Te,we),ga()}_a(["click","change","input"]);var Es=v('<label class="type-toggle svelte-1k6anfh"><input type="checkbox"/> <span>Sport?</span></label>'),Gs=v("<option> </option>"),Os=v('<div class="edit-form svelte-1k6anfh"><div class="edit-row main svelte-1k6anfh"><input type="text" class="edit-input grade svelte-1k6anfh" placeholder="Grade"/> <input type="text" class="edit-input name svelte-1k6anfh" placeholder="Route Name"/> <!></div> <div class="edit-row meta svelte-1k6anfh"><select class="edit-select svelte-1k6anfh"></select> <div class="attempts-input-wrapper svelte-1k6anfh"><span>#</span> <input type="number" min="1" class="edit-input num svelte-1k6anfh"/></div></div> <div class="edit-row notes svelte-1k6anfh"><textarea class="edit-input notes-area svelte-1k6anfh" placeholder="Notes..."></textarea></div> <div class="edit-actions svelte-1k6anfh"><button class="action-btn cancel svelte-1k6anfh">Cancel</button> <button class="action-btn save svelte-1k6anfh">Save</button></div></div>'),As=v('<span class="climb-type-tag svelte-1k6anfh"> </span>'),js=v('<span class="notes-preview svelte-1k6anfh"> </span>'),Ns=v('<span class="attempts-count svelte-1k6anfh"> </span>'),Is=v('<div class="detail-row svelte-1k6anfh"><span class="label svelte-1k6anfh">Notes:</span> <p class="notes svelte-1k6anfh"> </p></div>'),Ms=v('<p class="empty-notes svelte-1k6anfh">No notes for this climb.</p>'),Ps=v('<span class="tag wall-tag svelte-1k6anfh"> </span>'),Rs=v('<span class="tag technique-tag svelte-1k6anfh"> </span>'),Bs=v('<div class="climb-details svelte-1k6anfh"><!> <div class="tags svelte-1k6anfh"><span class="tag type svelte-1k6anfh"> </span> <!> <!> <span class="tag attempt-text svelte-1k6anfh"> </span></div></div>'),Vs=v('<div class="climb-header svelte-1k6anfh" role="button" tabindex="0"><div class="climb-main-info svelte-1k6anfh"><span> </span> <span class="climb-name svelte-1k6anfh"> </span> <!> <!></div> <div class="climb-meta svelte-1k6anfh"><span><span class="icon svelte-1k6anfh"> </span> <!></span> <button class="icon-btn edit-btn svelte-1k6anfh" aria-label="Edit climb" title="Edit climb">‚úé</button> <button class="icon-btn delete-btn svelte-1k6anfh" aria-label="Delete climb" title="Delete climb">üóëÔ∏è</button> <span class="chevron svelte-1k6anfh"> </span></div></div> <!>',1),Us=v("<div><!></div>");function Ws(Te,p){fa(p,!0);let r=Pa(p,"showClimbType",3,!1),f=k(!1),E=k(!1),D=k(""),u=k(""),z=k(""),w=k(1),U=k(""),Y=k(!1);function ne(){e(E)||l(f,!e(f))}function ue(I){I.stopPropagation(),p.onDelete()}function se(I){I.stopPropagation(),l(D,p.climb.name,!0),l(u,p.climb.grade,!0),l(z,p.climb.attemptType,!0),l(w,p.climb.attemptsNum,!0),l(U,p.climb.notes,!0),l(Y,p.climb.isSport,!0),l(E,!0),l(f,!0)}function ae(I){I.stopPropagation(),l(E,!1)}function J(I){I.stopPropagation();const g={...p.climb,name:e(D),grade:e(u),attemptType:e(z),attemptsNum:e(w),notes:e(U),isSport:e(Y)};p.onUpdate(g),l(E,!1)}function oe(){(e(z)==="Flash"||e(z)==="Onsight")&&l(w,1)}const fe={Flash:"‚ö°",Onsight:"üëÅÔ∏è",Redpoint:"üî¥",Dogged:"üõ†Ô∏è",DNF:"‚ùå"},ie=["Flash","Onsight","Redpoint","Dogged","DNF"];var H=Us();let le;var we=t(H);{var ye=I=>{var g=Os(),m=t(g),G=t(m);Ne(G);var R=s(G,2);Ne(R);var B=s(R,2);{var K=j=>{var de=Es(),ve=t(de);Ne(ve),qa(2),a(de),Ka(ve,()=>e(Y),xe=>l(Y,xe)),i(j,de)};c(B,j=>{r()&&j(K)})}a(m);var X=s(m,2),b=t(X);b.__change=oe,qe(b,21,()=>ie,Fe,(j,de)=>{var ve=Gs(),xe=t(ve,!0);a(ve);var F={};_(()=>{o(xe,e(de)),F!==(F=e(de))&&(ve.value=(ve.__value=e(de))??"")}),i(j,ve)}),a(b);var O=s(b,2),y=s(t(O),2);Ne(y),a(O),a(X);var n=s(X,2),d=t(n);Za(d),a(n);var T=s(n,2),W=t(T);W.__click=ae;var $=s(W,2);$.__click=J,a(T),a(g),_(()=>y.disabled=e(z)==="Flash"||e(z)==="Onsight"),Ie(G,()=>e(u),j=>l(u,j)),Ie(R,()=>e(D),j=>l(D,j)),xa(b,()=>e(z),j=>l(z,j)),Ie(y,()=>e(w),j=>l(w,j)),Ie(d,()=>e(U),j=>l(U,j)),i(I,g)},te=I=>{var g=Vs(),m=Me(g);m.__click=ne,m.__keydown=x=>(x.key==="Enter"||x.key===" ")&&ne();var G=t(m),R=t(G);let B;var K=t(R,!0);a(R);var X=s(R,2),b=t(X,!0);a(X);var O=s(X,2);{var y=x=>{var A=As(),be=t(A,!0);a(A),_(()=>o(be,p.climb.isSport?"Sport":"Boulder")),i(x,A)};c(O,x=>{r()&&x(y)})}var n=s(O,2);{var d=x=>{var A=js(),be=t(A);a(A),_(()=>o(be,`- ${p.climb.notes??""}`)),i(x,A)};c(n,x=>{!e(f)&&p.climb.notes&&x(d)})}a(G);var T=s(G,2),W=t(T);let $;var j=t(W),de=t(j,!0);a(j);var ve=s(j,2);{var xe=x=>{var A=Ns(),be=t(A,!0);a(A),_(()=>o(be,p.climb.attemptsNum)),i(x,A)};c(ve,x=>{p.climb.attemptType!=="Flash"&&p.climb.attemptType!=="Onsight"&&x(xe)})}a(W);var F=s(W,2);F.__click=se;var M=s(F,2);M.__click=ue;var me=s(M,2),Se=t(me,!0);a(me),a(T),a(m);var ke=s(m,2);{var q=x=>{var A=Bs(),be=t(A);{var L=ee=>{var ge=Is(),Oe=s(t(ge),2),Pe=t(Oe,!0);a(Oe),a(ge),_(()=>o(Pe,p.climb.notes)),i(ee,ge)},S=ee=>{var ge=Ms();i(ee,ge)};c(be,ee=>{p.climb.notes?ee(L):ee(S,!1)})}var P=s(be,2),V=t(P),re=t(V,!0);a(V);var ce=s(V,2);{var Ee=ee=>{var ge=Ps(),Oe=t(ge,!0);a(ge),_(()=>o(Oe,p.climb.wall)),i(ee,ge)};c(ce,ee=>{p.climb.wall&&ee(Ee)})}var he=s(ce,2);{var Ce=ee=>{var ge=Rs(),Oe=t(ge,!0);a(ge),_(()=>o(Oe,p.climb.techniqueFocus)),i(ee,ge)};c(he,ee=>{p.climb.techniqueFocus&&ee(Ce)})}var De=s(he,2),Le=t(De,!0);a(De),a(P),a(A),_(()=>{o(re,p.climb.isSport?"Sport":"Boulder"),o(Le,p.climb.attemptType)}),va(3,A,()=>ma,()=>({duration:150})),i(x,A)};c(ke,x=>{e(f)&&x(q)})}_(()=>{$e(m,"aria-expanded",e(f)),B=la(R,1,"grade-badge svelte-1k6anfh",null,B,{sport:p.climb.isSport}),o(K,p.climb.grade),o(b,p.climb.name||"Unnamed Route"),$=la(W,1,"attempt-type svelte-1k6anfh",null,$,{flash:p.climb.attemptType==="Flash"}),o(de,fe[p.climb.attemptType]||p.climb.attemptType),o(Se,e(f)?"‚ñ≤":"‚ñº")}),i(I,g)};c(we,I=>{e(E)?I(ye):I(te,!1)})}a(H),_(()=>le=la(H,1,"climb-entry svelte-1k6anfh",null,le,{expanded:e(f),editing:e(E)})),i(Te,H),ga()}_a(["change","click","keydown"]);var Hs=v('<div class="sector-meta"> </div>'),Js=v('<span class="stat svelte-d5hg2r"> </span>'),Zs=v('<span class="status-icon pending svelte-d5hg2r" title="Waiting to sync">üîÑ</span>'),Ks=v('<span class="status-icon error svelte-d5hg2r" title="Sync error">‚ö†Ô∏è</span>'),Xs=v('<span class="chip svelte-d5hg2r"> </span>'),Ys=v('<span class="text-none svelte-d5hg2r">None</span>'),$s=v('<div class="detail-item svelte-d5hg2r"><span class="label svelte-d5hg2r">Difficulty</span> <span class="value svelte-d5hg2r"> </span></div>'),Qs=v('<span class="chip svelte-d5hg2r"> </span>'),er=v('<span class="text-none svelte-d5hg2r">None</span>'),ar=v('<div class="detail-item svelte-d5hg2r"><span class="label svelte-d5hg2r">Category</span> <div class="value-chips svelte-d5hg2r"><!></div></div>'),tr=v('<span class="chip svelte-d5hg2r"> </span>'),sr=v('<span class="text-none svelte-d5hg2r">None</span>'),rr=v('<div class="detail-item svelte-d5hg2r"><span class="label svelte-d5hg2r">Energy System</span> <div class="value-chips svelte-d5hg2r"><!></div></div>'),ir=v('<div class="notes-container svelte-d5hg2r"><span class="label svelte-d5hg2r">Session Notes</span> <p class="notes-text svelte-d5hg2r"> </p></div>'),lr=v('<div class="metric svelte-d5hg2r"><span class="label svelte-d5hg2r">Open Grip</span> <div class="bar-container svelte-d5hg2r"><div class="bar-fill svelte-d5hg2r"></div></div> <span class="score svelte-d5hg2r"> </span></div>'),vr=v('<div class="metric svelte-d5hg2r"><span class="label svelte-d5hg2r">Crimp Grip</span> <div class="bar-container svelte-d5hg2r"><div class="bar-fill svelte-d5hg2r"></div></div> <span class="score svelte-d5hg2r"> </span></div>'),nr=v('<div class="metric svelte-d5hg2r"><span class="label svelte-d5hg2r">Pinch Grip</span> <div class="bar-container svelte-d5hg2r"><div class="bar-fill svelte-d5hg2r"></div></div> <span class="score svelte-d5hg2r"> </span></div>'),or=v('<div class="metric svelte-d5hg2r"><span class="label svelte-d5hg2r">Sloper Grip</span> <div class="bar-container svelte-d5hg2r"><div class="bar-fill svelte-d5hg2r"></div></div> <span class="score svelte-d5hg2r"> </span></div>'),dr=v('<div class="metric svelte-d5hg2r"><span class="label svelte-d5hg2r">Jug Grip</span> <div class="bar-container svelte-d5hg2r"><div class="bar-fill svelte-d5hg2r"></div></div> <span class="score svelte-d5hg2r"> </span></div>'),cr=v('<p class="no-climbs svelte-d5hg2r">No climbs logged for this session.</p>'),pr=v('<div class="card-body svelte-d5hg2r"><div class="details-grid svelte-d5hg2r"><div class="detail-item svelte-d5hg2r"><span class="label svelte-d5hg2r">Training Type</span> <div class="value-chips svelte-d5hg2r"><!></div></div> <!> <!> <!></div> <!> <div class="metrics-container svelte-d5hg2r"><div class="metric svelte-d5hg2r"><span class="label svelte-d5hg2r">Finger Load</span> <div class="bar-container svelte-d5hg2r"><div class="bar-fill svelte-d5hg2r"></div></div> <span class="score svelte-d5hg2r"> </span></div> <div class="metric svelte-d5hg2r"><span class="label svelte-d5hg2r">Shoulder Load</span> <div class="bar-container svelte-d5hg2r"><div class="bar-fill svelte-d5hg2r"></div></div> <span class="score svelte-d5hg2r"> </span></div> <div class="metric svelte-d5hg2r"><span class="label svelte-d5hg2r">Forearm Load</span> <div class="bar-container svelte-d5hg2r"><div class="bar-fill svelte-d5hg2r"></div></div> <span class="score svelte-d5hg2r"> </span></div> <!> <!> <!> <!> <!></div> <div class="climbs-list svelte-d5hg2r"><h4 class="svelte-d5hg2r">Climbs</h4> <div class="climbs-container svelte-d5hg2r"><!> <!></div></div></div>'),_r=v('<div><div class="card-header svelte-d5hg2r" role="button" tabindex="0"><div class="header-main svelte-d5hg2r"><div class="date-badge svelte-d5hg2r"><span class="day svelte-d5hg2r"> </span> <span class="month svelte-d5hg2r"> </span></div> <div class="session-info svelte-d5hg2r"><div class="session-text svelte-d5hg2r"><h3 class="location svelte-d5hg2r"> <!></h3> <!> <div class="session-meta svelte-d5hg2r"><span class="type-tag svelte-d5hg2r"> </span> <span class="stat svelte-d5hg2r"> </span> <!></div></div> <div class="load-summary svelte-d5hg2r"><div class="load-badge finger svelte-d5hg2r"> </div> <div class="load-badge shoulder svelte-d5hg2r"> </div> <div class="load-badge forearm svelte-d5hg2r"> </div></div></div></div> <div class="header-actions"><div class="header-status svelte-d5hg2r"><!></div> <button class="btn-icon delete-session" title="Delete Session">üóëÔ∏è</button> <span class="chevron svelte-d5hg2r"> </span></div></div> <!></div>');function ur(Te,p){fa(p,!0);let r=Pa(p,"session",7),f=k(!1),E=k(!1);function D(){l(f,!e(f))}function u(){l(E,!0)}function z(L){const S=[...r().climbs];S.splice(L,1),Na(r().id,{climbs:S}),p.onDelete()}function w(L,S){const P=[...r().climbs];P[L]=S,U(P)}async function U(L){if(Na(r().id,{climbs:L}),r().climbs=L,Xa()){const S={date:r().date,area:r().area,crag:r().crag,sector:r().sector,climbingType:r().climbingType,trainingTypes:r().trainingTypes||[],difficulty:r().difficulty,categories:r().categories||[],energySystems:r().energySystems||[],fingerLoad:r().fingerLoad,shoulderLoad:r().shoulderLoad,forearmLoad:r().forearmLoad,climbs:L};try{const P=await rt(r().id,S);P.ok?(Ya(r().id),r().syncStatus="synced"):(console.error("Failed to sync update:",P.error),Ia(r().id),r().syncStatus="error")}catch(P){console.error("Exception syncing update:",P),Ia(r().id),r().syncStatus="error"}}}let Y=pa(()=>r().climbs?.length??0),ne=pa(()=>(r().climbs||[]).reduce((L,S)=>{const P=parseInt(S.grade.replace(/\D/g,""))||0,V=parseInt(L.replace(/\D/g,""))||0;return P>V?S.grade:L},"V0/4a"));var ue=_r();let se;var ae=t(ue);ae.__click=D,ae.__keydown=L=>L.key==="Enter"&&D();var J=t(ae),oe=t(J),fe=t(oe),ie=t(fe,!0);a(fe);var H=s(fe,2),le=t(H,!0);a(H),a(oe);var we=s(oe,2),ye=t(we),te=t(ye),I=t(te),g=s(I);{var m=L=>{var S=Ta();_(()=>o(S,`- ${r().crag??""}`)),i(L,S)};c(g,L=>{r().crag&&L(m)})}a(te);var G=s(te,2);{var R=L=>{var S=Hs(),P=t(S);a(S),_(()=>o(P,`üìç ${r().sector??""}`)),i(L,S)};c(G,L=>{r().sector&&L(R)})}var B=s(G,2),K=t(B),X=t(K,!0);a(K);var b=s(K,2),O=t(b);a(b);var y=s(b,2);{var n=L=>{var S=Js(),P=t(S);a(S),_(()=>o(P,`Max: ${e(ne)??""}`)),i(L,S)};c(y,L=>{e(Y)>0&&L(n)})}a(B),a(ye);var d=s(ye,2),T=t(d),W=t(T,!0);a(T);var $=s(T,2),j=t($,!0);a($);var de=s($,2),ve=t(de,!0);a(de),a(d),a(we),a(J);var xe=s(J,2),F=t(xe),M=t(F);{var me=L=>{var S=Zs();i(L,S)},Se=L=>{var S=ea(),P=Me(S);{var V=re=>{var ce=Ks();i(re,ce)};c(P,re=>{r().syncStatus==="error"&&re(V)},!0)}i(L,S)};c(M,L=>{r().syncStatus==="pending"?L(me):L(Se,!1)})}a(F);var ke=s(F,2);ke.__click=L=>{L.stopPropagation(),u()};var q=s(ke,2),x=t(q,!0);a(q),a(xe),a(ae);var A=s(ae,2);{var be=L=>{var S=pr(),P=t(S),V=t(P),re=s(t(V),2),ce=t(re);{var Ee=h=>{var C=ea(),N=Me(C);qe(N,17,()=>r().trainingTypes,Fe,(pe,_e)=>{var ze=Xs(),Ue=t(ze,!0);a(ze),_(()=>o(Ue,e(_e))),i(pe,ze)}),i(h,C)},he=h=>{var C=Ys();i(h,C)};c(ce,h=>{r().trainingTypes&&r().trainingTypes.length>0&&!r().trainingTypes.includes("None")?h(Ee):h(he,!1)})}a(re),a(V);var Ce=s(V,2);{var De=h=>{var C=$s(),N=s(t(C),2),pe=t(N,!0);a(N),a(C),_(()=>o(pe,r().difficulty)),i(h,C)};c(Ce,h=>{r().difficulty&&h(De)})}var Le=s(Ce,2);{var ee=h=>{var C=ar(),N=s(t(C),2),pe=t(N);{var _e=Ue=>{var da=ea(),ka=Me(da);qe(ka,17,()=>r().categories,Fe,(ca,Da)=>{var Ga=Qs(),Ra=t(Ga,!0);a(Ga),_(()=>o(Ra,e(Da))),i(ca,Ga)}),i(Ue,da)},ze=Ue=>{var da=er();i(Ue,da)};c(pe,Ue=>{r().categories.length>0&&!r().categories.includes("None")?Ue(_e):Ue(ze,!1)})}a(N),a(C),i(h,C)};c(Le,h=>{r().categories?.length&&h(ee)})}var ge=s(Le,2);{var Oe=h=>{var C=rr(),N=s(t(C),2),pe=t(N);{var _e=Ue=>{var da=ea(),ka=Me(da);qe(ka,17,()=>r().energySystems,Fe,(ca,Da)=>{var Ga=tr(),Ra=t(Ga,!0);a(Ga),_(()=>o(Ra,e(Da))),i(ca,Ga)}),i(Ue,da)},ze=Ue=>{var da=sr();i(Ue,da)};c(pe,Ue=>{r().energySystems.length>0&&!r().energySystems.includes("None")?Ue(_e):Ue(ze,!1)})}a(N),a(C),i(h,C)};c(ge,h=>{r().energySystems?.length&&h(Oe)})}a(P);var Pe=s(P,2);{var Ae=h=>{var C=ir(),N=s(t(C),2),pe=t(N,!0);a(N),a(C),_(()=>o(pe,r().notes)),i(h,C)};c(Pe,h=>{r().notes&&h(Ae)})}var Re=s(Pe,2),Je=t(Re),aa=s(t(Je),2),Be=t(aa);a(aa);var je=s(aa,2),Qe=t(je);a(je),a(Je);var Ve=s(Je,2),na=s(t(Ve),2),oa=t(na);a(na);var Ge=s(na,2),We=t(Ge);a(Ge),a(Ve);var He=s(Ve,2),ta=s(t(He),2),sa=t(ta);a(ta);var ra=s(ta,2),Ze=t(ra);a(ra),a(He);var Ke=s(He,2);{var Sa=h=>{var C=lr(),N=s(t(C),2),pe=t(N);a(N);var _e=s(N,2),ze=t(_e);a(_e),a(C),_(()=>{ia(pe,`width: ${r().openGrip/5*100}%`),o(ze,`${r().openGrip??""}/5`)}),i(h,C)};c(Ke,h=>{r().openGrip&&h(Sa)})}var Xe=s(Ke,2);{var za=h=>{var C=vr(),N=s(t(C),2),pe=t(N);a(N);var _e=s(N,2),ze=t(_e);a(_e),a(C),_(()=>{ia(pe,`width: ${r().crimpGrip/5*100}%`),o(ze,`${r().crimpGrip??""}/5`)}),i(h,C)};c(Xe,h=>{r().crimpGrip&&h(za)})}var ba=s(Xe,2);{var ya=h=>{var C=nr(),N=s(t(C),2),pe=t(N);a(N);var _e=s(N,2),ze=t(_e);a(_e),a(C),_(()=>{ia(pe,`width: ${r().pinchGrip/5*100}%`),o(ze,`${r().pinchGrip??""}/5`)}),i(h,C)};c(ba,h=>{r().pinchGrip&&h(ya)})}var wa=s(ba,2);{var Ca=h=>{var C=or(),N=s(t(C),2),pe=t(N);a(N);var _e=s(N,2),ze=t(_e);a(_e),a(C),_(()=>{ia(pe,`width: ${r().sloperGrip/5*100}%`),o(ze,`${r().sloperGrip??""}/5`)}),i(h,C)};c(wa,h=>{r().sloperGrip&&h(Ca)})}var La=s(wa,2);{var Ye=h=>{var C=dr(),N=s(t(C),2),pe=t(N);a(N);var _e=s(N,2),ze=t(_e);a(_e),a(C),_(()=>{ia(pe,`width: ${r().jugGrip/5*100}%`),o(ze,`${r().jugGrip??""}/5`)}),i(h,C)};c(La,h=>{r().jugGrip&&h(Ye)})}a(Re);var ua=s(Re,2),Fa=s(t(ua),2),Ea=t(Fa);qe(Ea,17,()=>r().climbs||[],Fe,(h,C,N)=>{{let pe=pa(()=>r().climbingType==="Mixed");Ws(h,{get climb(){return e(C)},onDelete:()=>z(N),onUpdate:_e=>w(N,_e),get showClimbType(){return e(pe)}})}});var Z=s(Ea,2);{var Q=h=>{var C=cr();i(h,C)};c(Z,h=>{(r().climbs||[]).length===0&&h(Q)})}a(Fa),a(ua),a(S),_(()=>{ia(Be,`width: ${r().fingerLoad/5*100}%`),o(Qe,`${r().fingerLoad??""}/5`),ia(oa,`width: ${r().shoulderLoad/5*100}%`),o(We,`${r().shoulderLoad??""}/5`),ia(sa,`width: ${r().forearmLoad/5*100}%`),o(Ze,`${r().forearmLoad??""}/5`)}),va(3,S,()=>ma,()=>({duration:150})),i(L,S)};c(A,L=>{e(f)&&L(be)})}a(ue),_((L,S)=>{se=la(ue,1,"session-card svelte-d5hg2r",null,se,{expanded:e(f)}),$e(ae,"aria-expanded",e(f)),o(ie,L),o(le,S),o(I,`${r().area??""} `),o(X,r().climbingType),o(O,`${e(Y)??""} climbs`),$e(T,"title",`Finger Load: ${r().fingerLoad??""}`),o(W,r().fingerLoad),$e($,"title",`Shoulder Load: ${r().shoulderLoad??""}`),o(j,r().shoulderLoad),$e(de,"title",`Forearm Load: ${r().forearmLoad??""}`),o(ve,r().forearmLoad),o(x,e(f)?"‚ñ≤":"‚ñº")},[()=>new Date(r().date).getDate(),()=>new Date(r().date).toLocaleDateString(void 0,{month:"short"})]),i(Te,ue),ga()}_a(["click","keydown"]);var fr=v('<span class="spinner svelte-1s7jdlh"></span> Fetching...',1),gr=v('<div class="error-banner svelte-1s7jdlh"> </div>'),mr=v('<small class="svelte-1s7jdlh">Try adjusting your filters.</small>'),hr=v('<div class="empty-state svelte-1s7jdlh"><p class="svelte-1s7jdlh">No outdoor climbing sessions found.</p> <!></div>'),br=v('<div class="load-more-container svelte-1s7jdlh"><button class="load-more-btn svelte-1s7jdlh"> </button></div>'),yr=v('<div class="view-container svelte-1s7jdlh"><div class="view-header svelte-1s7jdlh"><h2 class="view-title svelte-1s7jdlh">‚õ∞Ô∏è Outdoor Climbing History</h2> <div class="header-actions svelte-1s7jdlh"><button class="action-btn secondary svelte-1s7jdlh" title="Export filtered data to CSV">üì• Export</button> <button class="action-btn svelte-1s7jdlh" title="Fetch data from cloud"><!></button></div></div> <!> <!> <div class="info-bar svelte-1s7jdlh"><div class="legend-wrapper svelte-1s7jdlh"><!></div> <div class="load-key svelte-1s7jdlh"><span class="key-label svelte-1s7jdlh">Load:</span> <div class="key-item svelte-1s7jdlh"><span class="dot finger svelte-1s7jdlh"></span> Finger</div> <div class="key-item svelte-1s7jdlh"><span class="dot shoulder svelte-1s7jdlh"></span> Shoulder</div> <div class="key-item svelte-1s7jdlh"><span class="dot forearm svelte-1s7jdlh"></span> Forearm</div></div></div> <div class="sessions-list"><!> <!> <!></div></div>');function xr(Te,p){fa(p,!0);let r=k(ha([])),f=k(ha([])),E=k(!1),D=k(""),u=k(ha({startDate:"",endDate:"",area:"",crag:"",climbingType:"",sessionType:"",grade:""})),z=k(20);const w=20;Ua(()=>{U()});function U(){const n=Oa("outdoor_climb");l(r,n.sort((d,T)=>new Date(T.date).getTime()-new Date(d.date).getTime()),!0),se()}async function Y(){l(E,!0),l(D,"");try{await Aa();const n=await it();n.ok&&n.data?ne(n.data):l(D,n.error||"Failed to fetch data",!0)}catch(n){l(D,n instanceof Error?n.message:"Unknown error",!0)}finally{l(E,!1)}}function ne(n){const d=n.map(W=>({...W,activityType:"outdoor_climb",createdAt:new Date().toISOString(),updatedAt:new Date().toISOString(),syncStatus:"synced",syncedAt:new Date().toISOString(),openGrip:0,crimpGrip:0,pinchGrip:0,sloperGrip:0,jugGrip:0}));ja(d);const T=Oa("outdoor_climb");l(r,T.sort((W,$)=>new Date($.date).getTime()-new Date(W.date).getTime()),!0),se()}function ue(n){l(u,n,!0),se()}function se(){l(z,w),l(f,e(r).filter(n=>{if(e(u).startDate&&n.date<e(u).startDate||e(u).endDate&&n.date>e(u).endDate||e(u).area&&!n.area.toLowerCase().includes(e(u).area.toLowerCase())||e(u).crag&&!n.crag.toLowerCase().includes(e(u).crag.toLowerCase()))return!1;if(e(u).climbingType&&(n.climbingType==="Leading"?"Sport":n.climbingType)!==e(u).climbingType)if(n.climbingType==="Mixed")if(e(u).climbingType==="Bouldering"){if(!n.climbs.some(T=>!T.isSport))return!1}else if(e(u).climbingType==="Sport"||e(u).climbingType==="Trad"){if(!n.climbs.some(T=>T.isSport))return!1}else return!1;else return!1;if(e(u).sessionType&&!n.trainingTypes?.includes(e(u).sessionType))return!1;if(e(u).grade){const d=e(u).grade.trim().toLowerCase();if(!n.climbs.some(W=>W.grade.trim().toLowerCase()===d))return!1}return!0}),!0)}function ae(){l(z,e(z)+w)}var J=yr(),oe=t(J),fe=s(t(oe),2),ie=t(fe);ie.__click=()=>Ha(e(f),"outdoor_climbs");var H=s(ie,2);H.__click=Y;var le=t(H);{var we=n=>{var d=fr();qa(),i(n,d)},ye=n=>{var d=Ta("‚òÅÔ∏è Fetch Data");i(n,d)};c(le,n=>{e(E)?n(we):n(ye,!1)})}a(H),a(fe),a(oe);var te=s(oe,2);{var I=n=>{var d=gr(),T=t(d,!0);a(d),_(()=>o(T,e(D))),va(3,d,()=>ma),i(n,d)};c(te,n=>{e(D)&&n(I)})}var g=s(te,2);Fs(g,{onFilterParamsChange:ue});var m=s(g,2),G=t(m),R=t(G);$a(R),a(G),qa(2),a(m);var B=s(m,2),K=t(B);qe(K,17,()=>e(f).slice(0,e(z)),n=>n.id,(n,d)=>{ur(n,{get session(){return e(d)},onDelete:U})});var X=s(K,2);{var b=n=>{var d=hr(),T=s(t(d),2);{var W=$=>{var j=mr();i($,j)};c(T,$=>{e(r).length>0&&$(W)})}a(d),i(n,d)};c(X,n=>{e(f).length===0&&n(b)})}var O=s(X,2);{var y=n=>{var d=br(),T=t(d);T.__click=ae;var W=t(T);a(T),a(d),_(()=>o(W,`Load More (${e(f).length-e(z)} remaining)`)),i(n,d)};c(O,n=>{e(z)<e(f).length&&n(y)})}a(B),a(J),_(()=>H.disabled=e(E)),i(Te,J),ga()}_a(["click"]);var wr=v('<span class="chevron svelte-11rkzid">‚ñ≤</span>'),Sr=v('<span class="chevron svelte-11rkzid">‚ñº</span>'),kr=v('<div class="filter-body svelte-11rkzid"><div class="filter-grid svelte-11rkzid"><div class="filter-item svelte-11rkzid"><label for="start-date" class="svelte-11rkzid">Start Date</label> <input type="date" id="start-date" class="svelte-11rkzid"/></div> <div class="filter-item svelte-11rkzid"><label for="end-date" class="svelte-11rkzid">End Date</label> <input type="date" id="end-date" class="svelte-11rkzid"/></div> <div class="filter-item svelte-11rkzid"><label for="name-filter" class="svelte-11rkzid">Session Name</label> <input type="text" id="name-filter" placeholder="e.g. Leg Day" class="svelte-11rkzid"/></div> <div class="filter-item svelte-11rkzid"><label for="block-filter" class="svelte-11rkzid">Training Block</label> <select id="block-filter" class="svelte-11rkzid"><option>All Blocks</option><option>Strength</option><option>Power</option><option>Power Endurance</option><option>Muscular Endurance</option></select></div></div> <div class="filter-actions svelte-11rkzid"><button class="reset-btn svelte-11rkzid">Reset Filters</button></div></div>'),Dr=v('<div class="filter-container svelte-11rkzid"><button class="filter-header svelte-11rkzid"><div class="header-content svelte-11rkzid"><span class="icon svelte-11rkzid">üîç</span> <span class="title svelte-11rkzid">Filters</span> <!></div></button> <!></div>');function Tr(Te,p){fa(p,!0);let r=k(!1),f=k(""),E=k(""),D=k(""),u=k("");function z(){l(r,!e(r))}function w(){l(f,""),l(E,""),l(D,""),l(u,""),U()}function U(){p.onFilterParamsChange({startDate:e(f),endDate:e(E),name:e(D),trainingBlock:e(u)})}var Y=Dr(),ne=t(Y);ne.__click=z;var ue=t(ne),se=s(t(ue),4);{var ae=ie=>{var H=wr();i(ie,H)},J=ie=>{var H=Sr();i(ie,H)};c(se,ie=>{e(r)?ie(ae):ie(J,!1)})}a(ue),a(ne);var oe=s(ne,2);{var fe=ie=>{var H=kr(),le=t(H),we=t(le),ye=s(t(we),2);Ne(ye),ye.__change=U,a(we);var te=s(we,2),I=s(t(te),2);Ne(I),I.__change=U,a(te);var g=s(te,2),m=s(t(g),2);Ne(m),m.__input=U,a(g);var G=s(g,2),R=s(t(G),2);R.__change=U;var B=t(R);B.value=B.__value="";var K=s(B);K.value=K.__value="Strength";var X=s(K);X.value=X.__value="Power";var b=s(X);b.value=b.__value="Power Endurance";var O=s(b);O.value=O.__value="Muscular Endurance",a(R),a(G),a(le);var y=s(le,2),n=t(y);n.__click=w,a(y),a(H),Ie(ye,()=>e(f),d=>l(f,d)),Ie(I,()=>e(E),d=>l(E,d)),Ie(m,()=>e(D),d=>l(D,d)),xa(R,()=>e(u),d=>l(u,d)),va(3,H,()=>ma,()=>({duration:200})),i(ie,H)};c(oe,ie=>{e(r)&&ie(fe)})}a(Y),_(()=>$e(ne,"aria-expanded",e(r))),i(Te,Y),ga()}_a(["click","change","input"]);var qr=v('<span class="status-icon pending svelte-cirrfc" title="Waiting to sync">üîÑ</span>'),zr=v('<span class="status-icon error svelte-cirrfc" title="Sync error">‚ö†Ô∏è</span>'),Cr=v('<div class="bw-info svelte-cirrfc"><span class="label svelte-cirrfc">Bodyweight:</span> </div>'),Lr=v('<span class="muscle-tag svelte-cirrfc"> </span>'),Fr=v('<span class="muscle-tag svelte-cirrfc"> </span>'),Er=v('<div class="muscle-tags svelte-cirrfc"><!> <!></div>'),Gr=v('<span class="tag w svelte-cirrfc">W</span>'),Or=v('<span class="tag f svelte-cirrfc">F</span>'),Ar=v('<span class="tag d svelte-cirrfc">D</span>'),jr=v('<div><span class="set-num svelte-cirrfc"></span> <!> <!> <!> <span class="val svelte-cirrfc"><span class="weight"> </span> <span class="x svelte-cirrfc">x</span> <span class="reps"> </span></span></div>'),Nr=v('<div class="exercise-item svelte-cirrfc"><div class="exercise-header svelte-cirrfc"><h4 class="svelte-cirrfc"> </h4> <!></div> <div class="sets-grid svelte-cirrfc"></div></div>'),Ir=v('<div class="subcategory-group svelte-cirrfc"><h5 class="subcategory-header svelte-cirrfc"> </h5> <!></div>'),Mr=v('<div class="category-group svelte-cirrfc"><h4 class="category-header svelte-cirrfc"> </h4> <!></div>'),Pr=v('<div class="card-body svelte-cirrfc"><!> <div class="exercises-list svelte-cirrfc"></div></div>'),Rr=v('<div><div class="card-header svelte-cirrfc" role="button" tabindex="0"><div class="header-main svelte-cirrfc"><div class="date-badge svelte-cirrfc"><span class="day svelte-cirrfc"> </span> <span class="month svelte-cirrfc"> </span></div> <div class="session-info svelte-cirrfc"><div class="session-text"><h3 class="name svelte-cirrfc"> </h3> <div class="session-meta svelte-cirrfc"><span class="stat svelte-cirrfc"> </span> <span class="stat svelte-cirrfc"> </span> <span class="stat svelte-cirrfc"> </span></div></div></div></div> <div class="header-actions svelte-cirrfc"><div class="header-status"><!></div> <button class="btn-icon delete-session svelte-cirrfc" title="Delete Session">üóëÔ∏è</button> <span class="chevron svelte-cirrfc"> </span></div></div> <!></div> <!>',1);function Br(Te,p){fa(p,!0);let r=k(!1),f=k(!1);function E(){l(r,!e(r))}function D(){l(f,!0)}function u(){Wa(p.session.id),l(f,!1),p.onDelete()}function z(F){return lt.find(M=>M.name===F)}let w=pa(()=>p.session.exercises?.length??0),U=pa(()=>(p.session.exercises||[]).reduce((F,M)=>F+(M.sets?.length||0),0)),Y=pa(()=>(p.session.exercises||[]).reduce((F,M)=>F+(M.sets||[]).reduce((me,Se)=>me+(Se.weight||0)*(Se.reps||0),0),0)),ne=pa(()=>(p.session.exercises||[]).reduce((F,M)=>{const me=z(M.name),Se=me?.category||"Other",ke=me?.subcategory||"Misc";return F[Se]||(F[Se]={}),F[Se][ke]||(F[Se][ke]=[]),F[Se][ke].push(M),F},{}));var ue=Rr(),se=Me(ue);let ae;var J=t(se);J.__click=E,J.__keydown=F=>F.key==="Enter"&&E();var oe=t(J),fe=t(oe),ie=t(fe),H=t(ie,!0);a(ie);var le=s(ie,2),we=t(le,!0);a(le),a(fe);var ye=s(fe,2),te=t(ye),I=t(te),g=t(I,!0);a(I);var m=s(I,2),G=t(m),R=t(G);a(G);var B=s(G,2),K=t(B);a(B);var X=s(B,2),b=t(X);a(X),a(m),a(te),a(ye),a(oe);var O=s(oe,2),y=t(O),n=t(y);{var d=F=>{var M=qr();i(F,M)},T=F=>{var M=ea(),me=Me(M);{var Se=ke=>{var q=zr();i(ke,q)};c(me,ke=>{p.session.syncStatus==="error"&&ke(Se)},!0)}i(F,M)};c(n,F=>{p.session.syncStatus==="pending"?F(d):F(T,!1)})}a(y);var W=s(y,2);W.__click=F=>{F.stopPropagation(),D()};var $=s(W,2),j=t($,!0);a($),a(O),a(J);var de=s(J,2);{var ve=F=>{var M=Pr(),me=t(M);{var Se=q=>{var x=Cr(),A=s(t(x));a(x),_(()=>o(A,` ${p.session.bodyweight??""}kg`)),i(q,x)};c(me,q=>{p.session.bodyweight&&q(Se)})}var ke=s(me,2);qe(ke,21,()=>Object.entries(e(ne)),Fe,(q,x)=>{var A=pa(()=>Ja(e(x),2));let be=()=>e(A)[0],L=()=>e(A)[1];var S=Mr(),P=t(S),V=t(P,!0);a(P);var re=s(P,2);qe(re,17,()=>Object.entries(L()),Fe,(ce,Ee)=>{var he=pa(()=>Ja(e(Ee),2));let Ce=()=>e(he)[0],De=()=>e(he)[1];var Le=Ir(),ee=t(Le),ge=t(ee,!0);a(ee);var Oe=s(ee,2);qe(Oe,17,De,Fe,(Pe,Ae)=>{const Re=pa(()=>z(e(Ae).name));var Je=Nr(),aa=t(Je),Be=t(aa),je=t(Be,!0);a(Be);var Qe=s(Be,2);{var Ve=oa=>{var Ge=Er(),We=t(Ge);qe(We,17,()=>e(Re).targetMuscles.slice(0,3),Fe,(sa,ra)=>{var Ze=Lr(),Ke=t(Ze,!0);a(Ze),_(()=>o(Ke,e(ra))),i(sa,Ze)});var He=s(We,2);{var ta=sa=>{var ra=Fr(),Ze=t(ra);a(ra),_(()=>o(Ze,`+${e(Re).targetMuscles.length-3}`)),i(sa,ra)};c(He,sa=>{e(Re).targetMuscles.length>3&&sa(ta)})}a(Ge),i(oa,Ge)};c(Qe,oa=>{e(Re)&&oa(Ve)})}a(aa);var na=s(aa,2);qe(na,21,()=>e(Ae).sets,Fe,(oa,Ge,We)=>{var He=jr();let ta;var sa=t(He);sa.textContent=We+1;var ra=s(sa,2);{var Ze=Ye=>{var ua=Gr();i(Ye,ua)};c(ra,Ye=>{e(Ge).isWarmup&&Ye(Ze)})}var Ke=s(ra,2);{var Sa=Ye=>{var ua=Or();i(Ye,ua)};c(Ke,Ye=>{e(Ge).isFailure&&Ye(Sa)})}var Xe=s(Ke,2);{var za=Ye=>{var ua=Ar();i(Ye,ua)};c(Xe,Ye=>{e(Ge).isDropSet&&Ye(za)})}var ba=s(Xe,2),ya=t(ba),wa=t(ya);a(ya);var Ca=s(ya,4),La=t(Ca,!0);a(Ca),a(ba),a(He),_(()=>{ta=la(He,1,"set-pill svelte-cirrfc",null,ta,{completed:e(Ge).completed,warmup:e(Ge).isWarmup}),o(wa,`${e(Ge).weight??""}kg`),o(La,e(Ge).reps)}),i(oa,He)}),a(na),a(Je),_(()=>o(je,e(Ae).name)),i(Pe,Je)}),a(Le),_(()=>o(ge,Ce())),i(ce,Le)}),a(S),_(()=>o(V,be())),i(q,S)}),a(ke),a(M),va(3,M,()=>ma,()=>({duration:150})),i(F,M)};c(de,F=>{e(r)&&F(ve)})}a(se);var xe=s(se,2);Ma(xe,{get isOpen(){return e(f)},title:"Delete Session",message:"Are you sure you want to delete this session? This cannot be undone.",onConfirm:u,onCancel:()=>l(f,!1)}),_((F,M,me)=>{ae=la(se,1,"session-card svelte-cirrfc",null,ae,{expanded:e(r)}),$e(J,"aria-expanded",e(r)),o(H,F),o(we,M),o(g,p.session.name),o(R,`${e(w)??""} Exercises`),o(K,`${e(U)??""} Sets`),o(b,`~${me??""}kg Vol`),o(j,e(r)?"‚ñ≤":"‚ñº")},[()=>new Date(p.session.date).getDate(),()=>new Date(p.session.date).toLocaleDateString("en-GB",{month:"short"}),()=>Math.round(e(Y)).toLocaleString()]),i(Te,ue),ga()}_a(["click","keydown"]);var Vr=v('<span class="spinner svelte-133enjd"></span> Fetching...',1),Ur=v('<div class="error-banner svelte-133enjd"> </div>'),Wr=v('<small class="svelte-133enjd">Try adjusting your filters.</small>'),Hr=v('<div class="empty-state svelte-133enjd"><p class="svelte-133enjd">No gym sessions found.</p> <!></div>'),Jr=v('<div class="load-more-container svelte-133enjd"><button class="load-more-btn svelte-133enjd"> </button></div>'),Zr=v('<div class="view-container svelte-133enjd"><div class="view-header svelte-133enjd"><h2 class="view-title svelte-133enjd">üèãÔ∏è Gym Session History</h2> <div class="header-actions svelte-133enjd"><button class="action-btn secondary svelte-133enjd" title="Export filtered data to CSV">üì• Export</button> <button class="action-btn svelte-133enjd" title="Fetch data from cloud"><!></button></div></div> <!> <!> <div class="sessions-list"><!> <!> <!></div></div>');function Kr(Te,p){fa(p,!0);let r=k(ha([])),f=k(ha([])),E=k(!1),D=k(""),u=k(ha({startDate:"",endDate:"",name:"",trainingBlock:""})),z=k(20);const w=20;Ua(()=>{U()});function U(){const b=Oa("gym_session");l(r,b.sort((O,y)=>new Date(y.date).getTime()-new Date(O.date).getTime()),!0),se()}async function Y(){l(E,!0),l(D,"");try{await Aa();const b=await vt();b.ok&&b.data?ne(b.data):l(D,b.error||"Failed to fetch data",!0)}catch(b){l(D,b instanceof Error?b.message:"Unknown error",!0)}finally{l(E,!1)}}function ne(b){const O=b.map(n=>({...n,activityType:"gym_session",syncStatus:"synced",syncedAt:new Date().toISOString(),createdAt:n.createdAt||new Date().toISOString(),updatedAt:n.updatedAt||new Date().toISOString()}));ja(O);const y=Oa("gym_session");l(r,y.sort((n,d)=>new Date(d.date).getTime()-new Date(n.date).getTime()),!0),se()}function ue(b){l(u,b,!0),se()}function se(){l(z,w),l(f,e(r).filter(b=>!(e(u).startDate&&b.date<e(u).startDate||e(u).endDate&&b.date>e(u).endDate||e(u).name&&!b.name.toLowerCase().includes(e(u).name.toLowerCase())||e(u).trainingBlock&&b.trainingBlock!==e(u).trainingBlock)),!0)}function ae(){l(z,e(z)+w)}var J=Zr(),oe=t(J),fe=s(t(oe),2),ie=t(fe);ie.__click=()=>Ha(e(f),"gym_sessions");var H=s(ie,2);H.__click=Y;var le=t(H);{var we=b=>{var O=Vr();qa(),i(b,O)},ye=b=>{var O=Ta("‚òÅÔ∏è Fetch Data");i(b,O)};c(le,b=>{e(E)?b(we):b(ye,!1)})}a(H),a(fe),a(oe);var te=s(oe,2);{var I=b=>{var O=Ur(),y=t(O,!0);a(O),_(()=>o(y,e(D))),va(3,O,()=>ma),i(b,O)};c(te,b=>{e(D)&&b(I)})}var g=s(te,2);Tr(g,{onFilterParamsChange:ue});var m=s(g,2),G=t(m);qe(G,17,()=>e(f).slice(0,e(z)),b=>b.id,(b,O)=>{Br(b,{get session(){return e(O)},onDelete:U})});var R=s(G,2);{var B=b=>{var O=Hr(),y=s(t(O),2);{var n=d=>{var T=Wr();i(d,T)};c(y,d=>{e(r).length>0&&d(n)})}a(O),i(b,O)};c(R,b=>{e(f).length===0&&b(B)})}var K=s(R,2);{var X=b=>{var O=Jr(),y=t(O);y.__click=ae;var n=t(y);a(y),a(O),_(()=>o(n,`Load More (${e(f).length-e(z)} remaining)`)),i(b,O)};c(K,b=>{e(z)<e(f).length&&b(X)})}a(m),a(J),_(()=>H.disabled=e(E)),i(Te,J),ga()}_a(["click"]);var Xr=v('<span class="spinner svelte-1szs0u9"></span> Fetching...',1),Yr=v('<div class="loading svelte-1szs0u9">Loading sessions...</div>'),$r=v('<div class="empty-state svelte-1szs0u9"><!></div>'),Qr=v('<span class="set-tag svelte-1szs0u9"> <span class="x svelte-1szs0u9">x</span> </span>'),ei=v('<div class="ex-notes svelte-1szs0u9"> </div>'),ai=v('<div class="exercise-item svelte-1szs0u9"><div class="ex-header svelte-1szs0u9"><span class="ex-name svelte-1szs0u9"> </span> <span class="ex-grip svelte-1szs0u9"> </span></div> <div class="ex-sets svelte-1szs0u9"></div> <!></div>'),ti=v('<div class="card-body svelte-1szs0u9"><div class="exercises-list svelte-1szs0u9"></div></div>'),si=v('<div><div class="card-header svelte-1szs0u9" role="button" tabindex="0"><div class="header-main"><span class="session-date svelte-1szs0u9"> </span> <span class="meta svelte-1szs0u9"><!> </span></div> <div class="header-status svelte-1szs0u9"><span>‚óè</span> <button class="btn-icon delete-btn svelte-1szs0u9" title="Delete Session">üóëÔ∏è</button> <span class="chevron svelte-1szs0u9"> </span></div></div> <!></div>'),ri=v('<div class="load-more-container svelte-1szs0u9"><button class="load-more-btn svelte-1szs0u9"> </button></div>'),ii=v('<div class="timeline svelte-1szs0u9"><!> <!></div>'),li=v('<div class="view-content svelte-1szs0u9"><div class="header svelte-1szs0u9"><h3 class="svelte-1szs0u9">ü§è Fingerboarding Log</h3> <button class="fetch-btn svelte-1szs0u9" title="Fetch data from cloud"><!></button></div> <div class="filters svelte-1szs0u9"><div class="filter-group svelte-1szs0u9"><label for="start-date" class="svelte-1szs0u9">From</label> <input type="date" id="start-date" class="svelte-1szs0u9"/></div> <div class="filter-group svelte-1szs0u9"><label for="end-date" class="svelte-1szs0u9">To</label> <input type="date" id="end-date" class="svelte-1szs0u9"/></div></div> <!></div> <!>',1);function vi(Te,p){fa(p,!0);let r=k(ha([])),f=k(!0),E=k(""),D=k(""),u=k(ha(new Set)),z=k(20);const w=20;Qa(()=>{e(E),e(D),l(z,w)});let U=k(!1),Y=k(null);function ne(y){l(Y,y,!0),l(U,!0)}function ue(){e(Y)&&(Wa(e(Y)),l(Y,null),l(U,!1),l(r,Ba().sort((y,n)=>new Date(n.date).getTime()-new Date(y.date).getTime()),!0))}async function se(){l(f,!0),l(r,Ba().sort((y,n)=>new Date(n.date).getTime()-new Date(y.date).getTime()),!0);try{await Aa();const y=await nt();if(y.ok&&y.data){const n=y.data.map(d=>({...d,activityType:"fingerboarding",createdAt:d.createdAt||new Date().toISOString(),updatedAt:d.updatedAt||new Date().toISOString(),syncStatus:"synced"}));ja(n),l(r,Ba().sort((d,T)=>new Date(T.date).getTime()-new Date(d.date).getTime()),!0)}}catch(y){console.error("Failed to sync",y)}finally{l(f,!1)}}se();let ae=pa(()=>e(r).filter(y=>!(e(E)&&new Date(y.date)<new Date(e(E))||e(D)&&new Date(y.date)>new Date(e(D)))));function J(){l(z,e(z)+w)}function oe(y){e(u).has(y)?e(u).delete(y):e(u).add(y),l(u,new Set(e(u)),!0)}function fe(y){return y.exercises.reduce((n,d)=>n+d.details.length,0)}var ie=li(),H=Me(ie),le=t(H),we=s(t(le),2);we.__click=se;var ye=t(we);{var te=y=>{var n=Xr();qa(),i(y,n)},I=y=>{var n=Ta("‚òÅÔ∏è Fetch Data");i(y,n)};c(ye,y=>{e(f)?y(te):y(I,!1)})}a(we),a(le);var g=s(le,2),m=t(g),G=s(t(m),2);Ne(G),a(m);var R=s(m,2),B=s(t(R),2);Ne(B),a(R),a(g);var K=s(g,2);{var X=y=>{var n=Yr();i(y,n)},b=y=>{var n=ea(),d=Me(n);{var T=$=>{var j=$r(),de=t(j);{var ve=F=>{var M=Ta("No sessions match filter.");i(F,M)},xe=F=>{var M=Ta("No fingerboarding sessions logged yet.");i(F,M)};c(de,F=>{e(r).length>0?F(ve):F(xe,!1)})}a(j),i($,j)},W=$=>{var j=ii(),de=t(j);qe(de,17,()=>e(ae).slice(0,e(z)),Fe,(F,M)=>{var me=si();let Se;var ke=t(me);ke.__click=()=>oe(e(M).id),ke.__keydown=ee=>ee.key==="Enter"&&oe(e(M).id);var q=t(ke),x=t(q),A=t(x,!0);a(x);var be=s(x,2),L=t(be);{var S=ee=>{var ge=Ta();_(()=>o(ge,`${e(M).location??""} ¬∑`)),i(ee,ge)};c(L,ee=>{e(M).location&&e(M).location!=="N/A"&&e(M).location!=="Home"&&ee(S)})}var P=s(L);a(be),a(q);var V=s(q,2),re=t(V);let ce;var Ee=s(re,2);Ee.__click=ee=>{ee.stopPropagation(),ne(e(M).id)};var he=s(Ee,2),Ce=t(he,!0);a(he),a(V),a(ke);var De=s(ke,2);{var Le=ee=>{var ge=ti(),Oe=t(ge);qe(Oe,21,()=>e(M).exercises||[],Fe,(Pe,Ae)=>{var Re=ai(),Je=t(Re),aa=t(Je),Be=t(aa,!0);a(aa);var je=s(aa,2),Qe=t(je,!0);a(je),a(Je);var Ve=s(Je,2);qe(Ve,21,()=>e(Ae).details,Fe,(Ge,We)=>{var He=Qr(),ta=t(He),sa=s(ta,2);a(He),_(()=>{o(ta,`${e(We).weight>0?`+${e(We).weight}kg`:"BW"} `),o(sa,` ${e(We).reps??""}s/reps`)}),i(Ge,He)}),a(Ve);var na=s(Ve,2);{var oa=Ge=>{var We=ei(),He=t(We);a(We),_(()=>o(He,`"${e(Ae).notes??""}"`)),i(Ge,We)};c(na,Ge=>{e(Ae).notes&&Ge(oa)})}a(Re),_(()=>{o(Be,e(Ae).name),o(Qe,e(Ae).gripType)}),i(Pe,Re)}),a(Oe),a(ge),va(3,ge,()=>ma,()=>({duration:150})),i(ee,ge)};c(De,ee=>{e(u).has(e(M).id)&&ee(Le)})}a(me),_((ee,ge,Oe,Pe)=>{Se=la(me,1,"session-card svelte-1szs0u9",null,Se,ee),o(A,ge),o(P,` ${e(M).exercises.length??""} Exercises ¬∑ ${Oe??""} Sets`),ce=la(re,1,"sync-dot svelte-1szs0u9",null,ce,{synced:e(M).syncStatus==="synced"}),$e(re,"title",e(M).syncStatus==="synced"?"Synced":"Local"),o(Ce,Pe)},[()=>({expanded:e(u).has(e(M).id)}),()=>new Date(e(M).date).toLocaleDateString(void 0,{weekday:"short",month:"short",day:"numeric"}),()=>fe(e(M)),()=>e(u).has(e(M).id)?"‚ñ≤":"‚ñº"]),i(F,me)});var ve=s(de,2);{var xe=F=>{var M=ri(),me=t(M);me.__click=J;var Se=t(me);a(me),a(M),_(()=>o(Se,`Load More (${e(ae).length-e(z)} remaining)`)),i(F,M)};c(ve,F=>{e(z)<e(ae).length&&F(xe)})}a(j),i($,j)};c(d,$=>{e(ae).length===0?$(T):$(W,!1)},!0)}i(y,n)};c(K,y=>{e(f)&&e(r).length===0?y(X):y(b,!1)})}a(H);var O=s(H,2);Ma(O,{get isOpen(){return e(U)},title:"Delete Fingerboard Session",message:"Are you sure you want to delete this session? This cannot be undone.",onConfirm:ue,onCancel:()=>l(U,!1)}),_(()=>we.disabled=e(f)),Ie(G,()=>e(E),y=>l(E,y)),Ie(B,()=>e(D),y=>l(D,y)),i(Te,ie),ga()}_a(["click","keydown"]);var ni=v('<span class="spinner svelte-xyvf5r"></span> Fetching...',1),oi=v('<div class="loading svelte-xyvf5r">Loading sessions...</div>'),di=v('<div class="empty-state svelte-xyvf5r">No competitions logged yet.</div>'),ci=v('<div class="session-notes-container svelte-xyvf5r"><span class="note-label svelte-xyvf5r">Session Notes</span> <p class="note-text svelte-xyvf5r"> </p></div>'),pi=v('<span class="round-pos svelte-xyvf5r"> </span>'),_i=v('<span class="c-attempts svelte-xyvf5r"> </span>'),ui=v('<div class="climb-notes svelte-xyvf5r"> </div>'),fi=v('<div class="climb-row svelte-xyvf5r"><div class="climb-info svelte-xyvf5r"><span class="c-name svelte-xyvf5r"> </span> <!></div> <div class="climb-result"><span> </span></div></div> <!>',1),gi=v('<div class="climbs-list"></div>'),mi=v('<div class="round-item svelte-xyvf5r"><div class="round-header svelte-xyvf5r"><span class="round-name"> </span> <!></div> <!></div>'),hi=v('<div class="rounds-list svelte-xyvf5r"></div>'),bi=v('<div class="load-meta svelte-xyvf5r"><span> </span></div>'),yi=v('<div class="card-body svelte-xyvf5r"><!> <!> <!> <div class="session-footer svelte-xyvf5r"><span> </span></div></div>'),xi=v('<div><div class="card-header svelte-xyvf5r" role="button" tabindex="0"><div class="header-main svelte-xyvf5r"><div class="left-col svelte-xyvf5r"><span class="venue svelte-xyvf5r"> </span> <span class="date svelte-xyvf5r"> </span></div> <div class="right-col svelte-xyvf5r"><div class="badges svelte-xyvf5r"><span class="type-tag svelte-xyvf5r"> </span> <span class="result-tag svelte-xyvf5r"> </span></div></div></div> <div class="header-status svelte-xyvf5r"><span>‚óè</span> <button class="btn-icon delete-btn svelte-xyvf5r" title="Delete Session">üóëÔ∏è</button> <span class="chevron svelte-xyvf5r"> </span></div></div> <!></div>'),wi=v('<div class="load-more-container svelte-xyvf5r"><button class="load-more-btn svelte-xyvf5r"> </button></div>'),Si=v('<div class="timeline svelte-xyvf5r"><!> <!></div>'),ki=v('<div class="view-content svelte-xyvf5r"><div class="header svelte-xyvf5r"><h3 class="svelte-xyvf5r">üèÜ Competition Log</h3> <button class="fetch-btn svelte-xyvf5r" title="Fetch data from cloud"><!></button></div> <!> <!></div>');function Di(Te,p){fa(p,!0);let r=k(ha([])),f=k(!0),E=k(ha(new Set)),D=k(20);const u=20;let z=k(!1),w=k(null);function U(g){l(w,g,!0),l(z,!0)}function Y(){e(w)&&(Wa(e(w)),l(w,null),l(z,!1),l(r,Va().sort((g,m)=>new Date(m.date).getTime()-new Date(g.date).getTime()),!0))}async function ne(){l(f,!0),l(D,u),l(r,Va().sort((g,m)=>new Date(m.date).getTime()-new Date(g.date).getTime()),!0);try{await Aa();const g=await ot();if(g.ok&&g.data){const m=g.data.map(G=>({...G,activityType:"competition",type:G.type,rounds:G.rounds.map(R=>({...R,climbs:R.climbs?.map(B=>({...B,status:B.status}))})),createdAt:G.createdAt||new Date().toISOString(),updatedAt:G.updatedAt||new Date().toISOString(),syncStatus:"synced"}));ja(m),l(r,Va().sort((G,R)=>new Date(R.date).getTime()-new Date(G.date).getTime()),!0)}}catch(g){console.error("Failed to sync",g)}finally{l(f,!1)}}ne();function ue(g){e(E).has(g)?e(E).delete(g):e(E).add(g),l(E,new Set(e(E)),!0)}function se(){l(D,e(D)+u)}function ae(g){if(!g.rounds||g.rounds.length===0)return"No rounds";const m=g.rounds[g.rounds.length-1];if(m.position)return`#${m.position} ${m.name}`;if(m.climbs){const G=m.climbs.filter(B=>B.status==="Top"||B.status==="Flash").length,R=m.climbs.filter(B=>B.status==="Zone").length;return`${g.rounds.length} Rnds ¬∑ Final: ${G}T ${R+G}Z`}return m.name}var J=ki(),oe=t(J),fe=s(t(oe),2);fe.__click=ne;var ie=t(fe);{var H=g=>{var m=ni();qa(),i(g,m)},le=g=>{var m=Ta("‚òÅÔ∏è Fetch Data");i(g,m)};c(ie,g=>{e(f)?g(H):g(le,!1)})}a(fe),a(oe);var we=s(oe,2);{var ye=g=>{var m=oi();i(g,m)},te=g=>{var m=ea(),G=Me(m);{var R=K=>{var X=di();i(K,X)},B=K=>{var X=Si(),b=t(X);qe(b,17,()=>e(r).slice(0,e(D)),Fe,(n,d)=>{var T=xi();let W;var $=t(T);$.__click=()=>ue(e(d).id),$.__keydown=he=>he.key==="Enter"&&ue(e(d).id);var j=t($),de=t(j),ve=t(de),xe=t(ve,!0);a(ve);var F=s(ve,2),M=t(F,!0);a(F),a(de);var me=s(de,2),Se=t(me),ke=t(Se),q=t(ke,!0);a(ke);var x=s(ke,2),A=t(x,!0);a(x),a(Se),a(me),a(j);var be=s(j,2),L=t(be);let S;var P=s(L,2);P.__click=he=>{he.stopPropagation(),U(e(d).id)};var V=s(P,2),re=t(V,!0);a(V),a(be),a($);var ce=s($,2);{var Ee=he=>{var Ce=yi(),De=t(Ce);{var Le=Be=>{var je=ci(),Qe=s(t(je),2),Ve=t(Qe,!0);a(Qe),a(je),_(()=>o(Ve,e(d).notes)),i(Be,je)};c(De,Be=>{e(d).notes&&Be(Le)})}var ee=s(De,2);{var ge=Be=>{var je=hi();qe(je,21,()=>e(d).rounds||[],Fe,(Qe,Ve)=>{var na=mi(),oa=t(na),Ge=t(oa),We=t(Ge,!0);a(Ge);var He=s(Ge,2);{var ta=Ze=>{var Ke=pi(),Sa=t(Ke);a(Ke),_(()=>o(Sa,`#${e(Ve).position??""}`)),i(Ze,Ke)};c(He,Ze=>{e(Ve).position&&Ze(ta)})}a(oa);var sa=s(oa,2);{var ra=Ze=>{var Ke=gi();qe(Ke,21,()=>e(Ve).climbs||[],Fe,(Sa,Xe)=>{var za=fi(),ba=Me(za),ya=t(ba),wa=t(ya),Ca=t(wa,!0);a(wa);var La=s(wa,2);{var Ye=C=>{var N=_i(),pe=t(N);a(N),_(()=>o(pe,`(${e(Xe).attemptCount??""} tries)`)),i(C,N)};c(La,C=>{e(Xe).attemptCount>1&&C(Ye)})}a(ya);var ua=s(ya,2),Fa=t(ua);let Ea;var Z=t(Fa,!0);a(Fa),a(ua),a(ba);var Q=s(ba,2);{var h=C=>{var N=ui(),pe=t(N);a(N),_(()=>o(pe,`"${e(Xe).notes??""}"`)),i(C,N)};c(Q,C=>{e(Xe).notes&&C(h)})}_(()=>{o(Ca,e(Xe).name),Ea=la(Fa,1,"status-badge svelte-xyvf5r",null,Ea,{top:e(Xe).status==="Top"||e(Xe).status==="Flash",zone:e(Xe).status==="Zone"}),o(Z,e(Xe).status)}),i(Sa,za)}),a(Ke),i(Ze,Ke)};c(sa,Ze=>{e(Ve).climbs&&Ze(ra)})}a(na),_(()=>o(We,e(Ve).name)),i(Qe,na)}),a(je),i(Be,je)};c(ee,Be=>{e(d).rounds&&Be(ge)})}var Oe=s(ee,2);{var Pe=Be=>{var je=bi(),Qe=t(je),Ve=t(Qe);a(Qe),a(je),_(()=>o(Ve,`Detailed Load: Fingers ${e(d).fingerLoad??""}/5, Shoulders ${e(d).shoulderLoad??""}/5, Forearms ${e(d).forearmLoad??""}/5`)),i(Be,je)};c(Oe,Be=>{(e(d).fingerLoad||e(d).shoulderLoad)&&Be(Pe)})}var Ae=s(Oe,2),Re=t(Ae);let Je;var aa=t(Re,!0);a(Re),a(Ae),a(Ce),_(()=>{Je=la(Re,1,"sync-status svelte-xyvf5r",null,Je,{synced:e(d).syncStatus==="synced"}),o(aa,e(d).syncStatus==="synced"?"‚úì Synced":"‚òÅ Local")}),va(3,Ce,()=>ma,()=>({duration:150})),i(he,Ce)};c(ce,he=>{e(E).has(e(d).id)&&he(Ee)})}a(T),_((he,Ce,De,Le)=>{W=la(T,1,"session-card svelte-xyvf5r",null,W,he),o(xe,e(d).customVenue||e(d).venue),o(M,Ce),o(q,e(d).type),o(A,De),S=la(L,1,"sync-dot",null,S,{synced:e(d).syncStatus==="synced"}),$e(L,"title",e(d).syncStatus==="synced"?"Synced":"Local"),o(re,Le)},[()=>({expanded:e(E).has(e(d).id)}),()=>new Date(e(d).date).toLocaleDateString(void 0,{weekday:"short",day:"numeric",month:"short"}),()=>ae(e(d)),()=>e(E).has(e(d).id)?"‚ñ≤":"‚ñº"]),i(n,T)});var O=s(b,2);{var y=n=>{var d=wi(),T=t(d);T.__click=se;var W=t(T);a(T),a(d),_(()=>o(W,`Load More (${e(r).length-e(D)} remaining)`)),i(n,d)};c(O,n=>{e(D)<e(r).length&&n(y)})}a(X),i(K,X)};c(G,K=>{e(r).length===0?K(R):K(B,!1)},!0)}i(g,m)};c(we,g=>{e(f)&&e(r).length===0?g(ye):g(te,!1)})}var I=s(we,2);Ma(I,{get isOpen(){return e(z)},title:"Delete Competition",message:"Are you sure you want to delete this competition session? This action cannot be undone.",onConfirm:Y,onCancel:()=>l(z,!1)}),a(J),_(()=>fe.disabled=e(f)),i(Te,J),ga()}_a(["click","keydown"]);var Ti=v('<button class="backdrop svelte-108px9u" aria-label="Close settings"></button> <div class="settings-modal svelte-108px9u" role="dialog" aria-modal="true"><div class="settings-header svelte-108px9u"><h3 class="svelte-108px9u">Settings</h3> <button class="close-btn svelte-108px9u">‚úï</button></div> <div class="settings-content"><div class="setting-item svelte-108px9u"><div class="setting-info svelte-108px9u"><span class="setting-label svelte-108px9u">Local Data</span> <span class="setting-desc svelte-108px9u">Clear all cached data on this device</span></div> <button class="btn-clear-cache svelte-108px9u">Clear Cache</button></div></div></div>',1),qi=v("<option> </option>"),zi=v('<div class="view-container svelte-108px9u"><!></div>'),Ci=v('<div class="page svelte-108px9u"><div class="page-header svelte-108px9u"><div><h1 class="svelte-108px9u">üìä View Data</h1> <p class="subtitle svelte-108px9u">Browse your training history</p></div> <button class="settings-btn svelte-108px9u" aria-label="Settings">‚öôÔ∏è</button></div> <!> <!> <div class="content-card svelte-108px9u"><div class="form-group svelte-108px9u"><label for="activity-type" class="svelte-108px9u">Activity Type</label> <select id="activity-type" class="svelte-108px9u"><option disabled>Select an activity...</option><!></select></div> <!></div></div>');function Mi(Te,p){fa(p,!0);const r=[{value:"indoor_climb",label:"Indoor Climb",icon:"üßó"},{value:"outdoor_climb",label:"Outdoor Climb",icon:"‚õ∞Ô∏è"},{value:"gym_session",label:"Gym Session",icon:"üèãÔ∏è"},{value:"fingerboarding",label:"Fingerboarding",icon:"ü§è"},{value:"competition",label:"Competition",icon:"üèÜ"}];let f=k(""),E=k(!1),D=k(!1);function u(){l(E,!0)}function z(){l(E,!1)}function w(){l(E,!1),l(D,!0)}function U(){pt()}var Y=Ci(),ne=t(Y),ue=s(t(ne),2);ue.__click=u,a(ne);var se=s(ne,2);{var ae=te=>{var I=Ti(),g=Me(I);g.__click=z;var m=s(g,2),G=t(m),R=s(t(G),2);R.__click=z,a(G);var B=s(G,2),K=t(B),X=s(t(K),2);X.__click=w,a(K),a(B),a(m),va(3,g,()=>dt,()=>({duration:200})),va(3,m,()=>ct,()=>({duration:200,start:.9})),i(te,I)};c(se,te=>{e(E)&&te(ae)})}var J=s(se,2);Ma(J,{get isOpen(){return e(D)},title:"Clear all local data?",message:"Are you sure you want to clear all locally cached data? This will remove all sessions stored on this device. Data already synced to the cloud will be preserved.",confirmKeyword:"clear",onConfirm:U,onCancel:()=>l(D,!1)});var oe=s(J,2),fe=t(oe),ie=s(t(fe),2),H=t(ie);H.value=H.__value="";var le=s(H);qe(le,17,()=>r,te=>te.value,(te,I)=>{var g=qi(),m=t(g);a(g);var G={};_(()=>{o(m,`${e(I).icon??""} ${e(I).label??""}`),G!==(G=e(I).value)&&(g.value=(g.__value=e(I).value)??"")}),i(te,g)}),a(ie),a(fe);var we=s(fe,2);{var ye=te=>{var I=zi(),g=t(I);{var m=R=>{ms(R,{})},G=R=>{var B=ea(),K=Me(B);{var X=O=>{xr(O,{})},b=O=>{var y=ea(),n=Me(y);{var d=W=>{Kr(W,{})},T=W=>{var $=ea(),j=Me($);{var de=xe=>{vi(xe,{})},ve=xe=>{var F=ea(),M=Me(F);{var me=Se=>{Di(Se,{})};c(M,Se=>{e(f)==="competition"&&Se(me)},!0)}i(xe,F)};c(j,xe=>{e(f)==="fingerboarding"?xe(de):xe(ve,!1)},!0)}i(W,$)};c(n,W=>{e(f)==="gym_session"?W(d):W(T,!1)},!0)}i(O,y)};c(K,O=>{e(f)==="outdoor_climb"?O(X):O(b,!1)},!0)}i(R,B)};c(g,R=>{e(f)==="indoor_climb"?R(m):R(G,!1)})}a(I),i(te,I)};c(we,te=>{e(f)&&te(ye)})}a(oe),a(Y),xa(ie,()=>e(f),te=>l(f,te)),i(Te,Y),ga()}_a(["click"]);export{Mi as component};
