import{f as l,a as r,c as We,t as ba}from"../chunks/CKcnA5P_.js";import{p as sa,c as t,s,j as e,aV as z,r as a,t as h,a as ia,F as n,f as Ae,aW as fa,E as _a,o as Ba,aG as qa,d as Ja}from"../chunks/4c6jdw0Z.js";import{d as aa,s as d}from"../chunks/K94srNfd.js";import{i as _}from"../chunks/CK8hGvwc.js";import{s as He,r as $e,e as ke,i as Ee,b as ea}from"../chunks/BVSa1UsB.js";import{t as Xe,k as ra,D as Ga,s as Na,l as Za,g as Ka,b as Xa,m as Ya,E as Qa,n as $a,o as et,p as at,d as tt,q as st}from"../chunks/C_Xd1Smc.js";import{c as ya,l as Ia,n as Wa,o as Ea,p as Ma,q as Ra,t as Pa,v as it}from"../chunks/ChylFdpu.js";import{s as Ke}from"../chunks/9PGhKrW6.js";import{s as Ze}from"../chunks/CzX-2X6y.js";import{p as Ua}from"../chunks/CfB7tKQ8.js";var rt=l('<span class="chevron svelte-12crvy">‚ñ≤</span>'),lt=l('<span class="chevron svelte-12crvy">‚ñº</span>'),vt=l('<div class="input-with-action svelte-12crvy"><input type="text" id="location-manual" placeholder="Custom location..." class="flat-left svelte-12crvy"/> <button type="button" class="action-btn flat-right svelte-12crvy" title="Back to list">‚úï</button></div>'),nt=l("<option> </option>"),ot=l('<select id="location-filter" class="svelte-12crvy"><option>Any Location</option><!></select>'),dt=l("<option> </option>"),ct=l("<option> </option>"),_t=l('<div class="filter-body svelte-12crvy"><div class="filter-grid svelte-12crvy"><div class="filter-item svelte-12crvy"><label for="start-date" class="svelte-12crvy">Start Date</label> <input type="date" id="start-date" class="svelte-12crvy"/></div> <div class="filter-item svelte-12crvy"><label for="end-date" class="svelte-12crvy">End Date</label> <input type="date" id="end-date" class="svelte-12crvy"/></div> <div class="filter-item svelte-12crvy"><label for="location-filter" class="svelte-12crvy">Location</label> <!></div> <div class="filter-item svelte-12crvy"><label for="climbing-type-filter" class="svelte-12crvy">Climb Type</label> <select id="climbing-type-filter" class="svelte-12crvy"><option>Any Type</option><!></select></div> <div class="filter-item svelte-12crvy"><label for="session-type-filter" class="svelte-12crvy">Session Type</label> <select id="session-type-filter" class="svelte-12crvy"><option>Any Type</option><!></select></div> <div class="filter-item svelte-12crvy"><label for="grade-filter" class="svelte-12crvy">Grade (Exact)</label> <input type="text" id="grade-filter" placeholder="e.g. V4" class="svelte-12crvy"/></div></div> <div class="filter-actions svelte-12crvy"><button class="reset-btn svelte-12crvy">Reset Filters</button></div></div>'),ut=l('<div class="filter-container svelte-12crvy"><button class="filter-header svelte-12crvy"><div class="header-content svelte-12crvy"><span class="icon svelte-12crvy">üîç</span> <span class="title svelte-12crvy">Filters</span> <!></div></button> <!></div>');function ft(he,i){sa(i,!0);const w=["Rockstar Swindon","Flashpoint Swindon","Flashpoint Bristol","Redpoint Bristol","TCH Bristol","Other"],m=["Bouldering","Sport","Mixed"],F=["Projecting","Onsighting","Campusing","Repeaters"];let S=z(!1),g=z(""),T=z(""),y=z(""),L=z(""),X=z(""),M=z(""),le=z(!1);function P(){n(S,!e(S))}function H(){n(g,""),n(T,""),n(y,""),n(L,""),n(le,!1),n(X,""),n(M,""),B()}function B(){i.onFilterParamsChange({startDate:e(g),endDate:e(T),location:e(y),climbingType:e(L),sessionType:e(X),grade:e(M)})}function ee(){e(y)==="Other"?(n(le,!0),n(y,"")):B()}function ce(){n(le,!1),n(y,""),B()}var Q=ut(),J=t(Q);J.__click=P;var $=t(J),te=s(t($),4);{var _e=x=>{var E=rt();r(x,E)},Z=x=>{var E=lt();r(x,E)};_(te,x=>{e(S)?x(_e):x(Z,!1)})}a($),a(J);var ue=s(J,2);{var b=x=>{var E=_t(),V=t(E),I=t(V),Y=s(t(I),2);$e(Y),Y.__change=B,a(I);var ve=s(I,2),c=s(t(ve),2);$e(c),c.__change=B,a(ve);var p=s(ve,2),u=s(t(p),2);{var v=q=>{var O=vt(),de=t(O);$e(de),de.__input=B;var Te=s(de,2);Te.__click=ce,a(O),ea(de,()=>e(y),C=>n(y,C)),r(q,O)},o=q=>{var O=ot();O.__change=ee;var de=t(O);de.value=de.__value="";var Te=s(de);ke(Te,17,()=>w,Ee,(C,se)=>{var Le=nt(),ae=t(Le,!0);a(Le);var ie={};h(()=>{d(ae,e(se)),ie!==(ie=e(se))&&(Le.value=(Le.__value=e(se))??"")}),r(C,Le)}),a(O),ya(O,()=>e(y),C=>n(y,C)),r(q,O)};_(u,q=>{e(le)?q(v):q(o,!1)})}a(p);var k=s(p,2),A=s(t(k),2);A.__change=B;var re=t(A);re.value=re.__value="";var pe=s(re);ke(pe,17,()=>m,Ee,(q,O)=>{var de=dt(),Te=t(de,!0);a(de);var C={};h(()=>{d(Te,e(O)),C!==(C=e(O))&&(de.value=(de.__value=e(O))??"")}),r(q,de)}),a(A),a(k);var Ge=s(k,2),ge=s(t(Ge),2);ge.__change=B;var G=t(ge);G.value=G.__value="";var W=s(G);ke(W,17,()=>F,Ee,(q,O)=>{var de=ct(),Te=t(de,!0);a(de);var C={};h(()=>{d(Te,e(O)),C!==(C=e(O))&&(de.value=(de.__value=e(O))??"")}),r(q,de)}),a(ge),a(Ge);var U=s(Ge,2),xe=s(t(U),2);$e(xe),xe.__input=B,a(U),a(V);var ze=s(V,2),Fe=t(ze);Fe.__click=H,a(ze),a(E),ea(Y,()=>e(g),q=>n(g,q)),ea(c,()=>e(T),q=>n(T,q)),ya(A,()=>e(L),q=>n(L,q)),ya(ge,()=>e(X),q=>n(X,q)),ea(xe,()=>e(M),q=>n(M,q)),Xe(3,E,()=>ra,()=>({duration:200})),r(x,E)};_(ue,x=>{e(S)&&x(b)})}a(Q),h(()=>He(J,"aria-expanded",e(S))),r(he,Q),ia()}aa(["click","change","input"]);var pt=l('<span class="climb-type-tag svelte-yz0xxt"> </span>'),gt=l('<span class="notes-preview svelte-yz0xxt"> </span>'),mt=l('<span class="attempts-count svelte-yz0xxt"> </span>'),ht=l('<div class="detail-row svelte-yz0xxt"><span class="label svelte-yz0xxt">Notes:</span> <p class="notes svelte-yz0xxt"> </p></div>'),bt=l('<p class="empty-notes svelte-yz0xxt">No notes for this climb.</p>'),yt=l('<div class="climb-details svelte-yz0xxt"><!> <div class="tags svelte-yz0xxt"><span class="tag type svelte-yz0xxt"> </span> <span class="tag attempt-text svelte-yz0xxt"> </span></div></div>'),xt=l('<div><div class="climb-header svelte-yz0xxt" role="button" tabindex="0"><div class="climb-main-info svelte-yz0xxt"><span> </span> <span class="climb-name svelte-yz0xxt"> </span> <!> <!></div> <div class="climb-meta svelte-yz0xxt"><span><span class="icon svelte-yz0xxt"> </span> <!></span> <button class="delete-btn svelte-yz0xxt" aria-label="Delete climb" title="Delete climb">üóëÔ∏è</button> <span class="chevron svelte-yz0xxt"> </span></div></div> <!></div>');function wt(he,i){sa(i,!0);let w=Ua(i,"showClimbType",3,!1),m=z(!1);function F(){n(m,!e(m))}function S(c){c.stopPropagation(),i.onDelete()}const g={Flash:"‚ö°",Onsight:"üëÅÔ∏è",Redpoint:"üî¥",Dogged:"üõ†Ô∏è",DNF:"‚ùå"};var T=xt();let y;var L=t(T);L.__click=F,L.__keydown=c=>(c.key==="Enter"||c.key===" ")&&F();var X=t(L),M=t(X);let le;var P=t(M,!0);a(M);var H=s(M,2),B=t(H,!0);a(H);var ee=s(H,2);{var ce=c=>{var p=pt(),u=t(p,!0);a(p),h(()=>d(u,i.climb.isSport?"Sport":"Boulder")),r(c,p)};_(ee,c=>{w()&&c(ce)})}var Q=s(ee,2);{var J=c=>{var p=gt(),u=t(p);a(p),h(()=>d(u,`- ${i.climb.notes??""}`)),r(c,p)};_(Q,c=>{!e(m)&&i.climb.notes&&c(J)})}a(X);var $=s(X,2),te=t($);let _e;var Z=t(te),ue=t(Z,!0);a(Z);var b=s(Z,2);{var x=c=>{var p=mt(),u=t(p,!0);a(p),h(()=>d(u,i.climb.attemptsNum)),r(c,p)};_(b,c=>{i.climb.attemptType!=="Flash"&&i.climb.attemptType!=="Onsight"&&c(x)})}a(te);var E=s(te,2);E.__click=S;var V=s(E,2),I=t(V,!0);a(V),a($),a(L);var Y=s(L,2);{var ve=c=>{var p=yt(),u=t(p);{var v=ge=>{var G=ht(),W=s(t(G),2),U=t(W,!0);a(W),a(G),h(()=>d(U,i.climb.notes)),r(ge,G)},o=ge=>{var G=bt();r(ge,G)};_(u,ge=>{i.climb.notes?ge(v):ge(o,!1)})}var k=s(u,2),A=t(k),re=t(A,!0);a(A);var pe=s(A,2),Ge=t(pe,!0);a(pe),a(k),a(p),h(()=>{d(re,i.climb.isSport?"Sport":"Boulder"),d(Ge,i.climb.attemptType)}),Xe(3,p,()=>ra,()=>({duration:150})),r(c,p)};_(Y,c=>{e(m)&&c(ve)})}a(T),h(()=>{y=Ke(T,1,"climb-entry svelte-yz0xxt",null,y,{expanded:e(m)}),He(L,"aria-expanded",e(m)),le=Ke(M,1,"grade-badge svelte-yz0xxt",null,le,{sport:i.climb.isSport}),d(P,i.climb.grade),d(B,i.climb.name||"Unnamed Route"),_e=Ke(te,1,"attempt-type svelte-yz0xxt",null,_e,{flash:i.climb.attemptType==="Flash"}),d(ue,g[i.climb.attemptType]||i.climb.attemptType),d(I,e(m)?"‚ñ≤":"‚ñº")}),r(he,T),ia()}aa(["click","keydown"]);var St=l('<span class="stat svelte-7vqogn"> </span>'),Dt=l('<span class="status-icon pending svelte-7vqogn" title="Waiting to sync">üîÑ</span>'),kt=l('<span class="status-icon error svelte-7vqogn" title="Sync error">‚ö†Ô∏è</span>'),Tt=l('<span class="chip svelte-7vqogn"> </span>'),qt=l('<span class="text-none svelte-7vqogn">None</span>'),Ct=l('<div class="detail-item svelte-7vqogn"><span class="label svelte-7vqogn">Difficulty</span> <span class="value svelte-7vqogn"> </span></div>'),zt=l('<span class="chip svelte-7vqogn"> </span>'),Ft=l('<span class="text-none svelte-7vqogn">None</span>'),Lt=l('<div class="detail-item svelte-7vqogn"><span class="label svelte-7vqogn">Category</span> <div class="value-chips svelte-7vqogn"><!></div></div>'),Et=l('<span class="chip svelte-7vqogn"> </span>'),Gt=l('<span class="text-none svelte-7vqogn">None</span>'),jt=l('<div class="detail-item svelte-7vqogn"><span class="label svelte-7vqogn">Focus</span> <div class="value-chips svelte-7vqogn"><!></div></div>'),At=l('<span class="chip svelte-7vqogn"> </span>'),Ot=l('<span class="text-none svelte-7vqogn">None</span>'),Nt=l('<div class="detail-item svelte-7vqogn"><span class="label svelte-7vqogn">Energy System</span> <div class="value-chips svelte-7vqogn"><!></div></div>'),It=l('<span class="chip svelte-7vqogn"> </span>'),Mt=l('<span class="text-none svelte-7vqogn">None</span>'),Rt=l('<div class="detail-item svelte-7vqogn"><span class="label svelte-7vqogn">Wall Angle</span> <div class="value-chips svelte-7vqogn"><!></div></div>'),Pt=l('<div class="metric svelte-7vqogn"><span class="label svelte-7vqogn">Open Grip</span> <div class="bar-container svelte-7vqogn"><div class="bar-fill svelte-7vqogn"></div></div> <span class="score svelte-7vqogn"> </span></div>'),Bt=l('<div class="metric svelte-7vqogn"><span class="label svelte-7vqogn">Crimp Grip</span> <div class="bar-container svelte-7vqogn"><div class="bar-fill svelte-7vqogn"></div></div> <span class="score svelte-7vqogn"> </span></div>'),Vt=l('<div class="metric svelte-7vqogn"><span class="label svelte-7vqogn">Pinch Grip</span> <div class="bar-container svelte-7vqogn"><div class="bar-fill svelte-7vqogn"></div></div> <span class="score svelte-7vqogn"> </span></div>'),Wt=l('<div class="metric svelte-7vqogn"><span class="label svelte-7vqogn">Sloper Grip</span> <div class="bar-container svelte-7vqogn"><div class="bar-fill svelte-7vqogn"></div></div> <span class="score svelte-7vqogn"> </span></div>'),Ut=l('<div class="metric svelte-7vqogn"><span class="label svelte-7vqogn">Jug Grip</span> <div class="bar-container svelte-7vqogn"><div class="bar-fill svelte-7vqogn"></div></div> <span class="score svelte-7vqogn"> </span></div>'),Ht=l('<p class="no-climbs svelte-7vqogn">No climbs logged for this session.</p>'),Jt=l('<div class="card-body svelte-7vqogn"><div class="details-grid svelte-7vqogn"><div class="detail-item svelte-7vqogn"><span class="label svelte-7vqogn">Training Type</span> <div class="value-chips svelte-7vqogn"><!></div></div> <!> <!> <!> <!> <!></div> <div class="metrics-container svelte-7vqogn"><div class="metric svelte-7vqogn"><span class="label svelte-7vqogn">Finger Load</span> <div class="bar-container svelte-7vqogn"><div class="bar-fill svelte-7vqogn"></div></div> <span class="score svelte-7vqogn"> </span></div> <div class="metric svelte-7vqogn"><span class="label svelte-7vqogn">Shoulder Load</span> <div class="bar-container svelte-7vqogn"><div class="bar-fill svelte-7vqogn"></div></div> <span class="score svelte-7vqogn"> </span></div> <div class="metric svelte-7vqogn"><span class="label svelte-7vqogn">Forearm Load</span> <div class="bar-container svelte-7vqogn"><div class="bar-fill svelte-7vqogn"></div></div> <span class="score svelte-7vqogn"> </span></div> <!> <!> <!> <!> <!></div> <div class="climbs-list svelte-7vqogn"><h4 class="svelte-7vqogn">Climbs</h4> <div class="climbs-container svelte-7vqogn"><!> <!></div></div></div>'),Zt=l('<div><div class="card-header svelte-7vqogn" role="button" tabindex="0"><div class="header-main svelte-7vqogn"><div class="date-badge svelte-7vqogn"><span class="day svelte-7vqogn"> </span> <span class="month svelte-7vqogn"> </span></div> <div class="session-info svelte-7vqogn"><div class="session-text svelte-7vqogn"><h3 class="location svelte-7vqogn"> </h3> <div class="session-meta svelte-7vqogn"><span class="type-tag svelte-7vqogn"> </span> <span class="stat svelte-7vqogn"> </span> <!></div></div> <div class="load-summary svelte-7vqogn"><div class="load-badge finger svelte-7vqogn"> </div> <div class="load-badge shoulder svelte-7vqogn"> </div> <div class="load-badge forearm svelte-7vqogn"> </div></div></div></div> <div class="header-actions"><div class="header-status svelte-7vqogn"><!></div>  <button class="btn-icon delete-session" title="Delete Session">üóëÔ∏è</button> <span class="chevron svelte-7vqogn"> </span></div></div> <!></div> <!>',1);function Kt(he,i){sa(i,!0);let w=z(!1),m=z(!1);function F(){n(w,!e(w))}function S(){n(m,!0)}function g(){Ia(i.session.id),n(m,!1),i.onDelete()}function T(q){const O=[...i.session.climbs];O.splice(q,1),Wa(i.session.id,{climbs:O}),i.onDelete()}let y=fa(()=>i.session.climbs?.length??0),L=fa(()=>(i.session.climbs||[]).reduce((q,O)=>{const de=parseInt(O.grade.replace(/\D/g,""))||0,Te=parseInt(q.replace(/\D/g,""))||0;return de>Te?O.grade:q},"V0"));var X=Zt(),M=Ae(X);let le;var P=t(M);P.__click=F,P.__keydown=q=>q.key==="Enter"&&F();var H=t(P),B=t(H),ee=t(B),ce=t(ee,!0);a(ee);var Q=s(ee,2),J=t(Q,!0);a(Q),a(B);var $=s(B,2),te=t($),_e=t(te),Z=t(_e,!0);a(_e);var ue=s(_e,2),b=t(ue),x=t(b,!0);a(b);var E=s(b,2),V=t(E);a(E);var I=s(E,2);{var Y=q=>{var O=St(),de=t(O);a(O),h(()=>d(de,`Max: ${e(L)??""}`)),r(q,O)};_(I,q=>{e(y)>0&&q(Y)})}a(ue),a(te);var ve=s(te,2),c=t(ve),p=t(c,!0);a(c);var u=s(c,2),v=t(u,!0);a(u);var o=s(u,2),k=t(o,!0);a(o),a(ve),a($),a(H);var A=s(H,2),re=t(A),pe=t(re);{var Ge=q=>{var O=Dt();r(q,O)},ge=q=>{var O=We(),de=Ae(O);{var Te=C=>{var se=kt();r(C,se)};_(de,C=>{i.session.syncStatus==="error"&&C(Te)},!0)}r(q,O)};_(pe,q=>{i.session.syncStatus==="pending"?q(Ge):q(ge,!1)})}a(re);var G=s(re,2);G.__click=q=>{q.stopPropagation(),S()};var W=s(G,2),U=t(W,!0);a(W),a(A),a(P);var xe=s(P,2);{var ze=q=>{var O=Jt(),de=t(O),Te=t(de),C=s(t(Te),2),se=t(C);{var Le=R=>{var N=We(),f=Ae(N);ke(f,17,()=>i.session.trainingTypes,Ee,(D,j)=>{var oe=Tt(),K=t(oe,!0);a(oe),h(()=>d(K,e(j))),r(D,oe)}),r(R,N)},ae=R=>{var N=qt();r(R,N)};_(se,R=>{i.session.trainingTypes&&i.session.trainingTypes.length>0&&!i.session.trainingTypes.includes("None")?R(Le):R(ae,!1)})}a(C),a(Te);var ie=s(Te,2);{var ne=R=>{var N=Ct(),f=s(t(N),2),D=t(f,!0);a(f),a(N),h(()=>d(D,i.session.difficulty)),r(R,N)};_(ie,R=>{i.session.difficulty&&R(ne)})}var be=s(ie,2);{var me=R=>{var N=Lt(),f=s(t(N),2),D=t(f);{var j=K=>{var fe=We(),Ce=Ae(fe);ke(Ce,17,()=>i.session.categories,Ee,(Me,da)=>{var Re=zt(),ca=t(Re,!0);a(Re),h(()=>d(ca,e(da))),r(Me,Re)}),r(K,fe)},oe=K=>{var fe=Ft();r(K,fe)};_(D,K=>{i.session.categories.length>0&&!i.session.categories.includes("None")?K(j):K(oe,!1)})}a(f),a(N),r(R,N)};_(be,R=>{i.session.categories?.length&&R(me)})}var we=s(be,2);{var Se=R=>{var N=jt(),f=s(t(N),2),D=t(f);{var j=K=>{var fe=We(),Ce=Ae(fe);ke(Ce,17,()=>i.session.techniqueFocuses,Ee,(Me,da)=>{var Re=Et(),ca=t(Re,!0);a(Re),h(()=>d(ca,e(da))),r(Me,Re)}),r(K,fe)},oe=K=>{var fe=Gt();r(K,fe)};_(D,K=>{i.session.techniqueFocuses.length>0&&!i.session.techniqueFocuses.includes("None")?K(j):K(oe,!1)})}a(f),a(N),r(R,N)};_(we,R=>{i.session.techniqueFocuses?.length&&R(Se)})}var De=s(we,2);{var ye=R=>{var N=Nt(),f=s(t(N),2),D=t(f);{var j=K=>{var fe=We(),Ce=Ae(fe);ke(Ce,17,()=>i.session.energySystems,Ee,(Me,da)=>{var Re=At(),ca=t(Re,!0);a(Re),h(()=>d(ca,e(da))),r(Me,Re)}),r(K,fe)},oe=K=>{var fe=Ot();r(K,fe)};_(D,K=>{i.session.energySystems.length>0&&!i.session.energySystems.includes("None")?K(j):K(oe,!1)})}a(f),a(N),r(R,N)};_(De,R=>{i.session.energySystems?.length&&R(ye)})}var qe=s(De,2);{var Pe=R=>{var N=Rt(),f=s(t(N),2),D=t(f);{var j=K=>{var fe=We(),Ce=Ae(fe);ke(Ce,17,()=>i.session.wallAngles,Ee,(Me,da)=>{var Re=It(),ca=t(Re,!0);a(Re),h(()=>d(ca,e(da))),r(Me,Re)}),r(K,fe)},oe=K=>{var fe=Mt();r(K,fe)};_(D,K=>{i.session.wallAngles.length>0&&!i.session.wallAngles.includes("None")?K(j):K(oe,!1)})}a(f),a(N),r(R,N)};_(qe,R=>{i.session.wallAngles?.length&&R(Pe)})}a(de);var Ve=s(de,2),Oe=t(Ve),Je=s(t(Oe),2),Ne=t(Je);a(Je);var Ie=s(Je,2),ua=t(Ie);a(Ie),a(Oe);var Be=s(Oe,2),la=s(t(Be),2),je=t(la);a(la);var Ue=s(la,2),Sa=t(Ue);a(Ue),a(Be);var ta=s(Be,2),Ye=s(t(ta),2),va=t(Ye);a(Ye);var pa=s(Ye,2),na=t(pa);a(pa),a(ta);var oa=s(ta,2);{var Da=R=>{var N=Pt(),f=s(t(N),2),D=t(f);a(f);var j=s(f,2),oe=t(j);a(j),a(N),h(()=>{Ze(D,`width: ${i.session.openGrip/5*100}%`),d(oe,`${i.session.openGrip??""}/5`)}),r(R,N)};_(oa,R=>{i.session.openGrip&&R(Da)})}var Qe=s(oa,2);{var Ca=R=>{var N=Bt(),f=s(t(N),2),D=t(f);a(f);var j=s(f,2),oe=t(j);a(j),a(N),h(()=>{Ze(D,`width: ${i.session.crimpGrip/5*100}%`),d(oe,`${i.session.crimpGrip??""}/5`)}),r(R,N)};_(Qe,R=>{i.session.crimpGrip&&R(Ca)})}var ma=s(Qe,2);{var ka=R=>{var N=Vt(),f=s(t(N),2),D=t(f);a(f);var j=s(f,2),oe=t(j);a(j),a(N),h(()=>{Ze(D,`width: ${i.session.pinchGrip/5*100}%`),d(oe,`${i.session.pinchGrip??""}/5`)}),r(R,N)};_(ma,R=>{i.session.pinchGrip&&R(ka)})}var ha=s(ma,2);{var ja=R=>{var N=Wt(),f=s(t(N),2),D=t(f);a(f);var j=s(f,2),oe=t(j);a(j),a(N),h(()=>{Ze(D,`width: ${i.session.sloperGrip/5*100}%`),d(oe,`${i.session.sloperGrip??""}/5`)}),r(R,N)};_(ha,R=>{i.session.sloperGrip&&R(ja)})}var za=s(ha,2);{var Aa=R=>{var N=Ut(),f=s(t(N),2),D=t(f);a(f);var j=s(f,2),oe=t(j);a(j),a(N),h(()=>{Ze(D,`width: ${i.session.jugGrip/5*100}%`),d(oe,`${i.session.jugGrip??""}/5`)}),r(R,N)};_(za,R=>{i.session.jugGrip&&R(Aa)})}a(Ve);var Ta=s(Ve,2),xa=s(t(Ta),2),wa=t(xa);ke(wa,17,()=>i.session.climbs||[],Ee,(R,N,f)=>{{let D=fa(()=>i.session.climbingType==="Mixed");wt(R,{get climb(){return e(N)},onDelete:()=>T(f),get showClimbType(){return e(D)}})}});var Fa=s(wa,2);{var La=R=>{var N=Ht();r(R,N)};_(Fa,R=>{(i.session.climbs||[]).length===0&&R(La)})}a(xa),a(Ta),a(O),h(()=>{Ze(Ne,`width: ${i.session.fingerLoad/5*100}%`),d(ua,`${i.session.fingerLoad??""}/5`),Ze(je,`width: ${i.session.shoulderLoad/5*100}%`),d(Sa,`${i.session.shoulderLoad??""}/5`),Ze(va,`width: ${i.session.forearmLoad/5*100}%`),d(na,`${i.session.forearmLoad??""}/5`)}),Xe(3,O,()=>ra,()=>({duration:150})),r(q,O)};_(xe,q=>{e(w)&&q(ze)})}a(M);var Fe=s(M,2);Ga(Fe,{get isOpen(){return e(m)},title:"Delete Session",message:"Are you sure you want to delete this session and all its climbs? This cannot be undone.",onConfirm:g,onCancel:()=>n(m,!1)}),h((q,O)=>{le=Ke(M,1,"session-card svelte-7vqogn",null,le,{expanded:e(w)}),He(P,"aria-expanded",e(w)),d(ce,q),d(J,O),d(Z,i.session.location),d(x,i.session.climbingType),d(V,`${e(y)??""} climbs`),He(c,"title",`Finger Load: ${i.session.fingerLoad??""}`),d(p,i.session.fingerLoad),He(u,"title",`Shoulder Load: ${i.session.shoulderLoad??""}`),d(v,i.session.shoulderLoad),He(o,"title",`Forearm Load: ${i.session.forearmLoad??""}`),d(k,i.session.forearmLoad),d(U,e(w)?"‚ñ≤":"‚ñº")},[()=>new Date(i.session.date).getDate(),()=>new Date(i.session.date).toLocaleDateString("en-GB",{month:"short"})]),r(he,X),ia()}aa(["click","keydown"]);var Xt=l('<div class="legend-item svelte-11p9lqi"><span class="l-icon svelte-11p9lqi"> </span> <span class="l-label svelte-11p9lqi"> </span></div>'),Yt=l('<div class="legend-content svelte-11p9lqi"><div class="legend-grid svelte-11p9lqi"></div></div>'),Qt=l('<div class="legend-container svelte-11p9lqi"><button class="legend-toggle svelte-11p9lqi"><span class="icon">‚ÑπÔ∏è</span> <span class="text">Icon Legend</span> <span class="chevron svelte-11p9lqi"> </span></button> <!></div>');function Ha(he){let i=z(!1);const w=[{icon:"üëÅÔ∏è",label:"Onsight"},{icon:"‚ö°",label:"Flash"},{icon:"üî¥",label:"Redpoint"},{icon:"üõ†Ô∏è",label:"Dogged"},{icon:"‚ùå",label:"DNF"}];var m=Qt(),F=t(m);F.__click=()=>n(i,!e(i));var S=s(t(F),4),g=t(S,!0);a(S),a(F);var T=s(F,2);{var y=L=>{var X=Yt(),M=t(X);ke(M,21,()=>w,Ee,(le,P)=>{var H=Xt(),B=t(H),ee=t(B,!0);a(B);var ce=s(B,2),Q=t(ce,!0);a(ce),a(H),h(()=>{d(ee,e(P).icon),d(Q,e(P).label)}),r(le,H)}),a(M),a(X),Xe(3,X,()=>ra),r(L,X)};_(T,L=>{e(i)&&L(y)})}a(m),h(()=>{He(F,"aria-expanded",e(i)),d(g,e(i)?"‚ñº":"‚ñ∂")}),r(he,m)}aa(["click"]);function Va(he,i){if(!he||he.length===0){alert("No data to export");return}const w=Array.from(new Set(he.flatMap(Object.keys))),m=[w.join(","),...he.map(g=>w.map(T=>{let y=g[T];if(y==null)return"";if(typeof y=="object"){if(y instanceof Date)return y.toISOString();y=JSON.stringify(y).replace(/"/g,'""')}else typeof y=="string"&&(y=y.replace(/"/g,'""'));return typeof y=="string"&&(y.includes(",")||y.includes('"')||y.includes(`
`))?`"${y}"`:y}).join(","))].join(`
`),F=new Blob([m],{type:"text/csv;charset=utf-8;"}),S=document.createElement("a");if(S.download!==void 0){const g=URL.createObjectURL(F);S.setAttribute("href",g),S.setAttribute("download",i.endsWith(".csv")?i:`${i}.csv`),S.style.visibility="hidden",document.body.appendChild(S),S.click(),document.body.removeChild(S)}}var $t=l('<span class="spinner svelte-14fqz8w"></span> Fetching...',1),es=l('<div class="error-banner svelte-14fqz8w"> </div>'),as=l('<small class="svelte-14fqz8w">Try adjusting your filters.</small>'),ts=l('<div class="empty-state svelte-14fqz8w"><p class="svelte-14fqz8w">No indoor climbing sessions found.</p> <!></div>'),ss=l('<div class="load-more-container svelte-14fqz8w"><button class="load-more-btn svelte-14fqz8w"> </button></div>'),is=l('<div class="view-container svelte-14fqz8w"><div class="view-header svelte-14fqz8w"><h2 class="view-title svelte-14fqz8w">üßó Indoor Climbing History</h2> <div class="header-actions svelte-14fqz8w"><button class="action-btn secondary svelte-14fqz8w" title="Export filtered data to CSV">üì• Export</button> <button class="action-btn svelte-14fqz8w" title="Fetch data from cloud"><!></button></div></div> <!> <!> <div class="info-bar svelte-14fqz8w"><div class="legend-wrapper svelte-14fqz8w"><!></div> <div class="load-key svelte-14fqz8w"><span class="key-label svelte-14fqz8w">Load:</span> <div class="key-item svelte-14fqz8w"><span class="dot finger svelte-14fqz8w"></span> Finger</div> <div class="key-item svelte-14fqz8w"><span class="dot shoulder svelte-14fqz8w"></span> Shoulder</div> <div class="key-item svelte-14fqz8w"><span class="dot forearm svelte-14fqz8w"></span> Forearm</div></div></div> <div class="sessions-list"><!> <!> <!></div></div>');function rs(he,i){sa(i,!0);let w=z(_a([])),m=z(_a([])),F=z(!1),S=z(""),g=z(_a({startDate:"",endDate:"",location:"",climbingType:"",sessionType:"",grade:""})),T=z(20);const y=20;Ba(()=>{L()});function L(){const v=Ea("indoor_climb");n(w,v.sort((o,k)=>new Date(k.date).getTime()-new Date(o.date).getTime()),!0),P()}async function X(){n(F,!0),n(S,"");try{await Na();const v=await Za();v.ok&&v.data?M(v.data):n(S,v.error||"Failed to fetch data",!0)}catch(v){n(S,v instanceof Error?v.message:"Unknown error",!0)}finally{n(F,!1)}}function M(v){const o=v.map(A=>({...A,activityType:"indoor_climb",createdAt:new Date().toISOString(),updatedAt:new Date().toISOString(),syncStatus:"synced",syncedAt:new Date().toISOString(),openGrip:0,crimpGrip:0,pinchGrip:0,sloperGrip:0,jugGrip:0}));Ma(o);const k=Ea("indoor_climb");n(w,k.sort((A,re)=>new Date(re.date).getTime()-new Date(A.date).getTime()),!0),P()}function le(v){n(g,v,!0),P()}function P(){n(T,y),n(m,e(w).filter(v=>{if(e(g).startDate&&v.date<e(g).startDate||e(g).endDate&&v.date>e(g).endDate||e(g).location&&v.location!==e(g).location)return!1;if(e(g).climbingType&&(v.climbingType==="Leading"?"Sport":v.climbingType)!==e(g).climbingType)if(v.climbingType==="Mixed")if(e(g).climbingType==="Bouldering"){if(!v.climbs.some(k=>!k.isSport))return!1}else if(e(g).climbingType==="Sport"){if(!v.climbs.some(k=>k.isSport))return!1}else return!1;else return!1;if(e(g).sessionType&&!v.trainingTypes?.includes(e(g).sessionType))return!1;if(e(g).grade){const o=e(g).grade.trim().toLowerCase();if(!v.climbs.some(A=>A.grade.trim().toLowerCase()===o))return!1}return!0}),!0)}function H(){n(T,e(T)+y)}var B=is(),ee=t(B),ce=s(t(ee),2),Q=t(ce);Q.__click=()=>Va(e(m),"indoor_climbs");var J=s(Q,2);J.__click=X;var $=t(J);{var te=v=>{var o=$t();qa(),r(v,o)},_e=v=>{var o=ba("‚òÅÔ∏è Fetch Data");r(v,o)};_($,v=>{e(F)?v(te):v(_e,!1)})}a(J),a(ce),a(ee);var Z=s(ee,2);{var ue=v=>{var o=es(),k=t(o,!0);a(o),h(()=>d(k,e(S))),Xe(3,o,()=>ra),r(v,o)};_(Z,v=>{e(S)&&v(ue)})}var b=s(Z,2);ft(b,{onFilterParamsChange:le});var x=s(b,2),E=t(x),V=t(E);Ha(V),a(E),qa(2),a(x);var I=s(x,2),Y=t(I);ke(Y,17,()=>e(m).slice(0,e(T)),v=>v.id,(v,o)=>{Kt(v,{get session(){return e(o)},onDelete:L})});var ve=s(Y,2);{var c=v=>{var o=ts(),k=s(t(o),2);{var A=re=>{var pe=as();r(re,pe)};_(k,re=>{e(w).length>0&&re(A)})}a(o),r(v,o)};_(ve,v=>{e(m).length===0&&v(c)})}var p=s(ve,2);{var u=v=>{var o=ss(),k=t(o);k.__click=H;var A=t(k);a(k),a(o),h(()=>d(A,`Load More (${e(m).length-e(T)} remaining)`)),r(v,o)};_(p,v=>{e(T)<e(m).length&&v(u)})}a(I),a(B),h(()=>J.disabled=e(F)),r(he,B),ia()}aa(["click"]);var ls=l('<span class="chevron svelte-1frtlim">‚ñ≤</span>'),vs=l('<span class="chevron svelte-1frtlim">‚ñº</span>'),ns=l('<div class="input-with-action svelte-1frtlim"><input type="text" id="area-filter-text" placeholder="Type area name..." class="flat-left svelte-1frtlim"/> <button class="action-btn flat-right svelte-1frtlim" title="Back to list">‚úï</button></div>'),os=l("<option> </option>"),ds=l('<select id="area-filter" class="svelte-1frtlim"><option>All Areas</option><!><option>Other (Manual Entry)</option></select>'),cs=l('<div class="input-with-action svelte-1frtlim"><input type="text" id="crag-filter-text" placeholder="Type crag name..." class="flat-left svelte-1frtlim"/> <button class="action-btn flat-right svelte-1frtlim" title="Back to list">‚úï</button></div>'),_s=l("<option> </option>"),us=l('<select id="crag-filter" class="svelte-1frtlim"><option>All Crags</option><!><option>Other (Manual Entry)</option></select>'),fs=l('<input type="text" id="crag-filter-text" class="svelte-1frtlim"/>'),ps=l("<option> </option>"),gs=l("<option> </option>"),ms=l('<div class="filter-body svelte-1frtlim"><div class="filter-grid svelte-1frtlim"><div class="filter-item svelte-1frtlim"><label for="start-date" class="svelte-1frtlim">Start Date</label> <input type="date" id="start-date" class="svelte-1frtlim"/></div> <div class="filter-item svelte-1frtlim"><label for="end-date" class="svelte-1frtlim">End Date</label> <input type="date" id="end-date" class="svelte-1frtlim"/></div> <div class="filter-item svelte-1frtlim"><label for="area-filter" class="svelte-1frtlim">Area</label> <!></div> <div class="filter-item svelte-1frtlim"><label for="crag-filter" class="svelte-1frtlim">Crag</label> <!></div> <div class="filter-item svelte-1frtlim"><label for="climbing-type-filter" class="svelte-1frtlim">Climb Type</label> <select id="climbing-type-filter" class="svelte-1frtlim"><option>Any Type</option><!></select></div> <div class="filter-item svelte-1frtlim"><label for="session-type-filter" class="svelte-1frtlim">Session Type</label> <select id="session-type-filter" class="svelte-1frtlim"><option>Any Type</option><!></select></div> <div class="filter-item svelte-1frtlim"><label for="grade-filter" class="svelte-1frtlim">Grade (Exact)</label> <input type="text" id="grade-filter" placeholder="e.g. 7a" class="svelte-1frtlim"/></div></div> <div class="filter-actions svelte-1frtlim"><button class="reset-btn svelte-1frtlim">Reset Filters</button></div></div>'),hs=l('<div class="filter-container svelte-1frtlim"><button class="filter-header svelte-1frtlim"><div class="header-content svelte-1frtlim"><span class="icon svelte-1frtlim">üîç</span> <span class="title svelte-1frtlim">Filters</span> <!></div></button> <!></div>');function bs(he,i){sa(i,!0);const w=Ka(),m=["Bouldering","Sport","Mixed","Trad"],F=["Projecting","Onsighting","Campusing","Repeaters","Fun","Volume"];let S=z(!1),g=z(""),T=z(""),y=z(""),L=z(""),X=z(""),M=z(""),le=z(""),P=z(!1),H=z(!1),B=fa(()=>e(y)&&e(y)!=="Other"?Xa(e(y)):[]);function ee(){e(y)==="Other"?(n(P,!0),n(y,"")):n(P,!1),n(L,""),n(H,!1),$()}function ce(){e(L)==="Other"?(n(H,!0),n(L,"")):n(H,!1),$()}function Q(){n(S,!e(S))}function J(){n(g,""),n(T,""),n(y,""),n(L,""),n(X,""),n(M,""),n(le,""),n(P,!1),n(H,!1),$()}function $(){i.onFilterParamsChange({startDate:e(g),endDate:e(T),area:e(y),crag:e(L),climbingType:e(X),sessionType:e(M),grade:e(le)})}var te=hs(),_e=t(te);_e.__click=Q;var Z=t(_e),ue=s(t(Z),4);{var b=I=>{var Y=ls();r(I,Y)},x=I=>{var Y=vs();r(I,Y)};_(ue,I=>{e(S)?I(b):I(x,!1)})}a(Z),a(_e);var E=s(_e,2);{var V=I=>{var Y=ms(),ve=t(Y),c=t(ve),p=s(t(c),2);$e(p),p.__change=$,a(c);var u=s(c,2),v=s(t(u),2);$e(v),v.__change=$,a(u);var o=s(u,2),k=s(t(o),2);{var A=ae=>{var ie=ns(),ne=t(ie);$e(ne),ne.__input=$;var be=s(ne,2);be.__click=()=>{n(P,!1),n(y,""),$()},a(ie),ea(ne,()=>e(y),me=>n(y,me)),r(ae,ie)},re=ae=>{var ie=ds();ie.__change=ee;var ne=t(ie);ne.value=ne.__value="";var be=s(ne);ke(be,17,()=>w,Ee,(we,Se)=>{var De=os(),ye=t(De,!0);a(De);var qe={};h(()=>{d(ye,e(Se)),qe!==(qe=e(Se))&&(De.value=(De.__value=e(Se))??"")}),r(we,De)});var me=s(be);me.value=me.__value="Other",a(ie),ya(ie,()=>e(y),we=>n(y,we)),r(ae,ie)};_(k,ae=>{e(P)?ae(A):ae(re,!1)})}a(o);var pe=s(o,2),Ge=s(t(pe),2);{var ge=ae=>{var ie=cs(),ne=t(ie);$e(ne),ne.__input=$;var be=s(ne,2);be.__click=()=>{n(H,!1),n(L,""),$()},a(ie),ea(ne,()=>e(L),me=>n(L,me)),r(ae,ie)},G=ae=>{var ie=We(),ne=Ae(ie);{var be=we=>{var Se=us();Se.__change=ce;var De=t(Se);De.value=De.__value="";var ye=s(De);ke(ye,17,()=>e(B),Ee,(Pe,Ve)=>{var Oe=_s(),Je=t(Oe,!0);a(Oe);var Ne={};h(()=>{d(Je,e(Ve)),Ne!==(Ne=e(Ve))&&(Oe.value=(Oe.__value=e(Ve))??"")}),r(Pe,Oe)});var qe=s(ye);qe.value=qe.__value="Other",a(Se),ya(Se,()=>e(L),Pe=>n(L,Pe)),r(we,Se)},me=we=>{var Se=fs();$e(Se),Se.__input=$,h(()=>{He(Se,"placeholder",e(y)?"Filter crag...":"Select area first"),Se.disabled=!e(P)&&!e(y)}),ea(Se,()=>e(L),De=>n(L,De)),r(we,Se)};_(ne,we=>{!e(P)&&e(y)&&e(B).length>0?we(be):we(me,!1)},!0)}r(ae,ie)};_(Ge,ae=>{e(H)?ae(ge):ae(G,!1)})}a(pe);var W=s(pe,2),U=s(t(W),2);U.__change=$;var xe=t(U);xe.value=xe.__value="";var ze=s(xe);ke(ze,17,()=>m,Ee,(ae,ie)=>{var ne=ps(),be=t(ne,!0);a(ne);var me={};h(()=>{d(be,e(ie)),me!==(me=e(ie))&&(ne.value=(ne.__value=e(ie))??"")}),r(ae,ne)}),a(U),a(W);var Fe=s(W,2),q=s(t(Fe),2);q.__change=$;var O=t(q);O.value=O.__value="";var de=s(O);ke(de,17,()=>F,Ee,(ae,ie)=>{var ne=gs(),be=t(ne,!0);a(ne);var me={};h(()=>{d(be,e(ie)),me!==(me=e(ie))&&(ne.value=(ne.__value=e(ie))??"")}),r(ae,ne)}),a(q),a(Fe);var Te=s(Fe,2),C=s(t(Te),2);$e(C),C.__input=$,a(Te),a(ve);var se=s(ve,2),Le=t(se);Le.__click=J,a(se),a(Y),ea(p,()=>e(g),ae=>n(g,ae)),ea(v,()=>e(T),ae=>n(T,ae)),ya(U,()=>e(X),ae=>n(X,ae)),ya(q,()=>e(M),ae=>n(M,ae)),ea(C,()=>e(le),ae=>n(le,ae)),Xe(3,Y,()=>ra,()=>({duration:200})),r(I,Y)};_(E,I=>{e(S)&&I(V)})}a(te),h(()=>He(_e,"aria-expanded",e(S))),r(he,te),ia()}aa(["click","change","input"]);var ys=l('<span class="climb-type-tag svelte-1k6anfh"> </span>'),xs=l('<span class="notes-preview svelte-1k6anfh"> </span>'),ws=l('<span class="attempts-count svelte-1k6anfh"> </span>'),Ss=l('<div class="detail-row svelte-1k6anfh"><span class="label svelte-1k6anfh">Notes:</span> <p class="notes svelte-1k6anfh"> </p></div>'),Ds=l('<p class="empty-notes svelte-1k6anfh">No notes for this climb.</p>'),ks=l('<div class="climb-details svelte-1k6anfh"><!> <div class="tags svelte-1k6anfh"><span class="tag type svelte-1k6anfh"> </span> <span class="tag attempt-text svelte-1k6anfh"> </span></div></div>'),Ts=l('<div><div class="climb-header svelte-1k6anfh" role="button" tabindex="0"><div class="climb-main-info svelte-1k6anfh"><span> </span> <span class="climb-name svelte-1k6anfh"> </span> <!> <!></div> <div class="climb-meta svelte-1k6anfh"><span><span class="icon svelte-1k6anfh"> </span> <!></span> <button class="delete-btn svelte-1k6anfh" aria-label="Delete climb" title="Delete climb">üóëÔ∏è</button> <span class="chevron svelte-1k6anfh"> </span></div></div> <!></div>');function qs(he,i){sa(i,!0);let w=Ua(i,"showClimbType",3,!1),m=z(!1);function F(){n(m,!e(m))}function S(c){c.stopPropagation(),i.onDelete()}const g={Flash:"‚ö°",Onsight:"üëÅÔ∏è",Redpoint:"üî¥",Dogged:"üõ†Ô∏è",DNF:"‚ùå"};var T=Ts();let y;var L=t(T);L.__click=F,L.__keydown=c=>(c.key==="Enter"||c.key===" ")&&F();var X=t(L),M=t(X);let le;var P=t(M,!0);a(M);var H=s(M,2),B=t(H,!0);a(H);var ee=s(H,2);{var ce=c=>{var p=ys(),u=t(p,!0);a(p),h(()=>d(u,i.climb.isSport?"Sport":"Boulder")),r(c,p)};_(ee,c=>{w()&&c(ce)})}var Q=s(ee,2);{var J=c=>{var p=xs(),u=t(p);a(p),h(()=>d(u,`- ${i.climb.notes??""}`)),r(c,p)};_(Q,c=>{!e(m)&&i.climb.notes&&c(J)})}a(X);var $=s(X,2),te=t($);let _e;var Z=t(te),ue=t(Z,!0);a(Z);var b=s(Z,2);{var x=c=>{var p=ws(),u=t(p,!0);a(p),h(()=>d(u,i.climb.attemptsNum)),r(c,p)};_(b,c=>{i.climb.attemptType!=="Flash"&&i.climb.attemptType!=="Onsight"&&c(x)})}a(te);var E=s(te,2);E.__click=S;var V=s(E,2),I=t(V,!0);a(V),a($),a(L);var Y=s(L,2);{var ve=c=>{var p=ks(),u=t(p);{var v=ge=>{var G=Ss(),W=s(t(G),2),U=t(W,!0);a(W),a(G),h(()=>d(U,i.climb.notes)),r(ge,G)},o=ge=>{var G=Ds();r(ge,G)};_(u,ge=>{i.climb.notes?ge(v):ge(o,!1)})}var k=s(u,2),A=t(k),re=t(A,!0);a(A);var pe=s(A,2),Ge=t(pe,!0);a(pe),a(k),a(p),h(()=>{d(re,i.climb.isSport?"Sport":"Boulder"),d(Ge,i.climb.attemptType)}),Xe(3,p,()=>ra,()=>({duration:150})),r(c,p)};_(Y,c=>{e(m)&&c(ve)})}a(T),h(()=>{y=Ke(T,1,"climb-entry svelte-1k6anfh",null,y,{expanded:e(m)}),He(L,"aria-expanded",e(m)),le=Ke(M,1,"grade-badge svelte-1k6anfh",null,le,{sport:i.climb.isSport}),d(P,i.climb.grade),d(B,i.climb.name||"Unnamed Route"),_e=Ke(te,1,"attempt-type svelte-1k6anfh",null,_e,{flash:i.climb.attemptType==="Flash"}),d(ue,g[i.climb.attemptType]||i.climb.attemptType),d(I,e(m)?"‚ñ≤":"‚ñº")}),r(he,T),ia()}aa(["click","keydown"]);var Cs=l('<div class="sector-meta svelte-d5hg2r"> </div>'),zs=l('<span class="stat svelte-d5hg2r"> </span>'),Fs=l('<span class="status-icon pending svelte-d5hg2r" title="Waiting to sync">üîÑ</span>'),Ls=l('<span class="status-icon error svelte-d5hg2r" title="Sync error">‚ö†Ô∏è</span>'),Es=l('<span class="chip svelte-d5hg2r"> </span>'),Gs=l('<span class="text-none svelte-d5hg2r">None</span>'),js=l('<div class="detail-item svelte-d5hg2r"><span class="label svelte-d5hg2r">Difficulty</span> <span class="value svelte-d5hg2r"> </span></div>'),As=l('<span class="chip svelte-d5hg2r"> </span>'),Os=l('<span class="text-none svelte-d5hg2r">None</span>'),Ns=l('<div class="detail-item svelte-d5hg2r"><span class="label svelte-d5hg2r">Category</span> <div class="value-chips svelte-d5hg2r"><!></div></div>'),Is=l('<span class="chip svelte-d5hg2r"> </span>'),Ms=l('<span class="text-none svelte-d5hg2r">None</span>'),Rs=l('<div class="detail-item svelte-d5hg2r"><span class="label svelte-d5hg2r">Focus</span> <div class="value-chips svelte-d5hg2r"><!></div></div>'),Ps=l('<span class="chip svelte-d5hg2r"> </span>'),Bs=l('<span class="text-none svelte-d5hg2r">None</span>'),Vs=l('<div class="detail-item svelte-d5hg2r"><span class="label svelte-d5hg2r">Energy System</span> <div class="value-chips svelte-d5hg2r"><!></div></div>'),Ws=l('<div class="metric svelte-d5hg2r"><span class="label svelte-d5hg2r">Open Grip</span> <div class="bar-container svelte-d5hg2r"><div class="bar-fill svelte-d5hg2r"></div></div> <span class="score svelte-d5hg2r"> </span></div>'),Us=l('<div class="metric svelte-d5hg2r"><span class="label svelte-d5hg2r">Crimp Grip</span> <div class="bar-container svelte-d5hg2r"><div class="bar-fill svelte-d5hg2r"></div></div> <span class="score svelte-d5hg2r"> </span></div>'),Hs=l('<div class="metric svelte-d5hg2r"><span class="label svelte-d5hg2r">Pinch Grip</span> <div class="bar-container svelte-d5hg2r"><div class="bar-fill svelte-d5hg2r"></div></div> <span class="score svelte-d5hg2r"> </span></div>'),Js=l('<div class="metric svelte-d5hg2r"><span class="label svelte-d5hg2r">Sloper Grip</span> <div class="bar-container svelte-d5hg2r"><div class="bar-fill svelte-d5hg2r"></div></div> <span class="score svelte-d5hg2r"> </span></div>'),Zs=l('<div class="metric svelte-d5hg2r"><span class="label svelte-d5hg2r">Jug Grip</span> <div class="bar-container svelte-d5hg2r"><div class="bar-fill svelte-d5hg2r"></div></div> <span class="score svelte-d5hg2r"> </span></div>'),Ks=l('<p class="no-climbs svelte-d5hg2r">No climbs logged for this session.</p>'),Xs=l('<div class="card-body svelte-d5hg2r"><div class="details-grid svelte-d5hg2r"><div class="detail-item svelte-d5hg2r"><span class="label svelte-d5hg2r">Training Type</span> <div class="value-chips svelte-d5hg2r"><!></div></div> <!> <!> <!> <!></div> <div class="metrics-container svelte-d5hg2r"><div class="metric svelte-d5hg2r"><span class="label svelte-d5hg2r">Finger Load</span> <div class="bar-container svelte-d5hg2r"><div class="bar-fill svelte-d5hg2r"></div></div> <span class="score svelte-d5hg2r"> </span></div> <div class="metric svelte-d5hg2r"><span class="label svelte-d5hg2r">Shoulder Load</span> <div class="bar-container svelte-d5hg2r"><div class="bar-fill svelte-d5hg2r"></div></div> <span class="score svelte-d5hg2r"> </span></div> <div class="metric svelte-d5hg2r"><span class="label svelte-d5hg2r">Forearm Load</span> <div class="bar-container svelte-d5hg2r"><div class="bar-fill svelte-d5hg2r"></div></div> <span class="score svelte-d5hg2r"> </span></div> <!> <!> <!> <!> <!></div> <div class="climbs-list svelte-d5hg2r"><h4 class="svelte-d5hg2r">Climbs</h4> <div class="climbs-container svelte-d5hg2r"><!> <!></div></div></div>'),Ys=l('<div><div class="card-header svelte-d5hg2r" role="button" tabindex="0"><div class="header-main svelte-d5hg2r"><div class="date-badge svelte-d5hg2r"><span class="day svelte-d5hg2r"> </span> <span class="month svelte-d5hg2r"> </span></div> <div class="session-info svelte-d5hg2r"><div class="session-text svelte-d5hg2r"><h3 class="location svelte-d5hg2r"> <!></h3> <!> <div class="session-meta svelte-d5hg2r"><span class="type-tag svelte-d5hg2r"> </span> <span class="stat svelte-d5hg2r"> </span> <!></div></div> <div class="load-summary svelte-d5hg2r"><div class="load-badge finger svelte-d5hg2r"> </div> <div class="load-badge shoulder svelte-d5hg2r"> </div> <div class="load-badge forearm svelte-d5hg2r"> </div></div></div></div> <div class="header-actions svelte-d5hg2r"><div class="header-status svelte-d5hg2r"><!></div> <button class="btn-icon delete-session svelte-d5hg2r" title="Delete Session">üóëÔ∏è</button> <span class="chevron svelte-d5hg2r"> </span></div></div> <!></div> <!>',1);function Qs(he,i){sa(i,!0);let w=z(!1),m=z(!1);function F(){n(w,!e(w))}function S(){n(m,!0)}function g(){Ia(i.session.id),n(m,!1),i.onDelete()}function T(C){const se=[...i.session.climbs];se.splice(C,1),Wa(i.session.id,{climbs:se}),i.onDelete()}let y=fa(()=>i.session.climbs?.length??0),L=fa(()=>(i.session.climbs||[]).reduce((C,se)=>{const Le=parseInt(se.grade.replace(/\D/g,""))||0,ae=parseInt(C.replace(/\D/g,""))||0;return Le>ae?se.grade:C},"V0/4a"));var X=Ys(),M=Ae(X);let le;var P=t(M);P.__click=F,P.__keydown=C=>C.key==="Enter"&&F();var H=t(P),B=t(H),ee=t(B),ce=t(ee,!0);a(ee);var Q=s(ee,2),J=t(Q,!0);a(Q),a(B);var $=s(B,2),te=t($),_e=t(te),Z=t(_e),ue=s(Z);{var b=C=>{var se=ba();h(()=>d(se,`- ${i.session.crag??""}`)),r(C,se)};_(ue,C=>{i.session.crag&&C(b)})}a(_e);var x=s(_e,2);{var E=C=>{var se=Cs(),Le=t(se);a(se),h(()=>d(Le,`üìç ${i.session.sector??""}`)),r(C,se)};_(x,C=>{i.session.sector&&C(E)})}var V=s(x,2),I=t(V),Y=t(I,!0);a(I);var ve=s(I,2),c=t(ve);a(ve);var p=s(ve,2);{var u=C=>{var se=zs(),Le=t(se);a(se),h(()=>d(Le,`Max: ${e(L)??""}`)),r(C,se)};_(p,C=>{e(y)>0&&C(u)})}a(V),a(te);var v=s(te,2),o=t(v),k=t(o,!0);a(o);var A=s(o,2),re=t(A,!0);a(A);var pe=s(A,2),Ge=t(pe,!0);a(pe),a(v),a($),a(H);var ge=s(H,2),G=t(ge),W=t(G);{var U=C=>{var se=Fs();r(C,se)},xe=C=>{var se=We(),Le=Ae(se);{var ae=ie=>{var ne=Ls();r(ie,ne)};_(Le,ie=>{i.session.syncStatus==="error"&&ie(ae)},!0)}r(C,se)};_(W,C=>{i.session.syncStatus==="pending"?C(U):C(xe,!1)})}a(G);var ze=s(G,2);ze.__click=C=>{C.stopPropagation(),S()};var Fe=s(ze,2),q=t(Fe,!0);a(Fe),a(ge),a(P);var O=s(P,2);{var de=C=>{var se=Xs(),Le=t(se),ae=t(Le),ie=s(t(ae),2),ne=t(ie);{var be=f=>{var D=We(),j=Ae(D);ke(j,17,()=>i.session.trainingTypes,Ee,(oe,K)=>{var fe=Es(),Ce=t(fe,!0);a(fe),h(()=>d(Ce,e(K))),r(oe,fe)}),r(f,D)},me=f=>{var D=Gs();r(f,D)};_(ne,f=>{i.session.trainingTypes&&i.session.trainingTypes.length>0&&!i.session.trainingTypes.includes("None")?f(be):f(me,!1)})}a(ie),a(ae);var we=s(ae,2);{var Se=f=>{var D=js(),j=s(t(D),2),oe=t(j,!0);a(j),a(D),h(()=>d(oe,i.session.difficulty)),r(f,D)};_(we,f=>{i.session.difficulty&&f(Se)})}var De=s(we,2);{var ye=f=>{var D=Ns(),j=s(t(D),2),oe=t(j);{var K=Ce=>{var Me=We(),da=Ae(Me);ke(da,17,()=>i.session.categories,Ee,(Re,ca)=>{var ga=As(),Oa=t(ga,!0);a(ga),h(()=>d(Oa,e(ca))),r(Re,ga)}),r(Ce,Me)},fe=Ce=>{var Me=Os();r(Ce,Me)};_(oe,Ce=>{i.session.categories.length>0&&!i.session.categories.includes("None")?Ce(K):Ce(fe,!1)})}a(j),a(D),r(f,D)};_(De,f=>{i.session.categories?.length&&f(ye)})}var qe=s(De,2);{var Pe=f=>{var D=Rs(),j=s(t(D),2),oe=t(j);{var K=Ce=>{var Me=We(),da=Ae(Me);ke(da,17,()=>i.session.techniqueFocuses,Ee,(Re,ca)=>{var ga=Is(),Oa=t(ga,!0);a(ga),h(()=>d(Oa,e(ca))),r(Re,ga)}),r(Ce,Me)},fe=Ce=>{var Me=Ms();r(Ce,Me)};_(oe,Ce=>{i.session.techniqueFocuses.length>0&&!i.session.techniqueFocuses.includes("None")?Ce(K):Ce(fe,!1)})}a(j),a(D),r(f,D)};_(qe,f=>{i.session.techniqueFocuses?.length&&f(Pe)})}var Ve=s(qe,2);{var Oe=f=>{var D=Vs(),j=s(t(D),2),oe=t(j);{var K=Ce=>{var Me=We(),da=Ae(Me);ke(da,17,()=>i.session.energySystems,Ee,(Re,ca)=>{var ga=Ps(),Oa=t(ga,!0);a(ga),h(()=>d(Oa,e(ca))),r(Re,ga)}),r(Ce,Me)},fe=Ce=>{var Me=Bs();r(Ce,Me)};_(oe,Ce=>{i.session.energySystems.length>0&&!i.session.energySystems.includes("None")?Ce(K):Ce(fe,!1)})}a(j),a(D),r(f,D)};_(Ve,f=>{i.session.energySystems?.length&&f(Oe)})}a(Le);var Je=s(Le,2),Ne=t(Je),Ie=s(t(Ne),2),ua=t(Ie);a(Ie);var Be=s(Ie,2),la=t(Be);a(Be),a(Ne);var je=s(Ne,2),Ue=s(t(je),2),Sa=t(Ue);a(Ue);var ta=s(Ue,2),Ye=t(ta);a(ta),a(je);var va=s(je,2),pa=s(t(va),2),na=t(pa);a(pa);var oa=s(pa,2),Da=t(oa);a(oa),a(va);var Qe=s(va,2);{var Ca=f=>{var D=Ws(),j=s(t(D),2),oe=t(j);a(j);var K=s(j,2),fe=t(K);a(K),a(D),h(()=>{Ze(oe,`width: ${i.session.openGrip/5*100}%`),d(fe,`${i.session.openGrip??""}/5`)}),r(f,D)};_(Qe,f=>{i.session.openGrip&&f(Ca)})}var ma=s(Qe,2);{var ka=f=>{var D=Us(),j=s(t(D),2),oe=t(j);a(j);var K=s(j,2),fe=t(K);a(K),a(D),h(()=>{Ze(oe,`width: ${i.session.crimpGrip/5*100}%`),d(fe,`${i.session.crimpGrip??""}/5`)}),r(f,D)};_(ma,f=>{i.session.crimpGrip&&f(ka)})}var ha=s(ma,2);{var ja=f=>{var D=Hs(),j=s(t(D),2),oe=t(j);a(j);var K=s(j,2),fe=t(K);a(K),a(D),h(()=>{Ze(oe,`width: ${i.session.pinchGrip/5*100}%`),d(fe,`${i.session.pinchGrip??""}/5`)}),r(f,D)};_(ha,f=>{i.session.pinchGrip&&f(ja)})}var za=s(ha,2);{var Aa=f=>{var D=Js(),j=s(t(D),2),oe=t(j);a(j);var K=s(j,2),fe=t(K);a(K),a(D),h(()=>{Ze(oe,`width: ${i.session.sloperGrip/5*100}%`),d(fe,`${i.session.sloperGrip??""}/5`)}),r(f,D)};_(za,f=>{i.session.sloperGrip&&f(Aa)})}var Ta=s(za,2);{var xa=f=>{var D=Zs(),j=s(t(D),2),oe=t(j);a(j);var K=s(j,2),fe=t(K);a(K),a(D),h(()=>{Ze(oe,`width: ${i.session.jugGrip/5*100}%`),d(fe,`${i.session.jugGrip??""}/5`)}),r(f,D)};_(Ta,f=>{i.session.jugGrip&&f(xa)})}a(Je);var wa=s(Je,2),Fa=s(t(wa),2),La=t(Fa);ke(La,17,()=>i.session.climbs||[],Ee,(f,D,j)=>{{let oe=fa(()=>i.session.climbingType==="Mixed");qs(f,{get climb(){return e(D)},onDelete:()=>T(j),get showClimbType(){return e(oe)}})}});var R=s(La,2);{var N=f=>{var D=Ks();r(f,D)};_(R,f=>{(i.session.climbs||[]).length===0&&f(N)})}a(Fa),a(wa),a(se),h(()=>{Ze(ua,`width: ${i.session.fingerLoad/5*100}%`),d(la,`${i.session.fingerLoad??""}/5`),Ze(Sa,`width: ${i.session.shoulderLoad/5*100}%`),d(Ye,`${i.session.shoulderLoad??""}/5`),Ze(na,`width: ${i.session.forearmLoad/5*100}%`),d(Da,`${i.session.forearmLoad??""}/5`)}),Xe(3,se,()=>ra,()=>({duration:150})),r(C,se)};_(O,C=>{e(w)&&C(de)})}a(M);var Te=s(M,2);Ga(Te,{get isOpen(){return e(m)},title:"Delete Session",message:"Are you sure you want to delete this session and all its climbs? This cannot be undone.",onConfirm:g,onCancel:()=>n(m,!1)}),h((C,se)=>{le=Ke(M,1,"session-card svelte-d5hg2r",null,le,{expanded:e(w)}),He(P,"aria-expanded",e(w)),d(ce,C),d(J,se),d(Z,`${i.session.area??""} `),d(Y,i.session.climbingType),d(c,`${e(y)??""} climbs`),He(o,"title",`Finger Load: ${i.session.fingerLoad??""}`),d(k,i.session.fingerLoad),He(A,"title",`Shoulder Load: ${i.session.shoulderLoad??""}`),d(re,i.session.shoulderLoad),He(pe,"title",`Forearm Load: ${i.session.forearmLoad??""}`),d(Ge,i.session.forearmLoad),d(q,e(w)?"‚ñ≤":"‚ñº")},[()=>new Date(i.session.date).getDate(),()=>new Date(i.session.date).toLocaleDateString(void 0,{month:"short"})]),r(he,X),ia()}aa(["click","keydown"]);var $s=l('<span class="spinner svelte-1s7jdlh"></span> Fetching...',1),ei=l('<div class="error-banner svelte-1s7jdlh"> </div>'),ai=l('<small class="svelte-1s7jdlh">Try adjusting your filters.</small>'),ti=l('<div class="empty-state svelte-1s7jdlh"><p class="svelte-1s7jdlh">No outdoor climbing sessions found.</p> <!></div>'),si=l('<div class="load-more-container svelte-1s7jdlh"><button class="load-more-btn svelte-1s7jdlh"> </button></div>'),ii=l('<div class="view-container svelte-1s7jdlh"><div class="view-header svelte-1s7jdlh"><h2 class="view-title svelte-1s7jdlh">‚õ∞Ô∏è Outdoor Climbing History</h2> <div class="header-actions svelte-1s7jdlh"><button class="action-btn secondary svelte-1s7jdlh" title="Export filtered data to CSV">üì• Export</button> <button class="action-btn svelte-1s7jdlh" title="Fetch data from cloud"><!></button></div></div> <!> <!> <div class="info-bar svelte-1s7jdlh"><div class="legend-wrapper svelte-1s7jdlh"><!></div> <div class="load-key svelte-1s7jdlh"><span class="key-label svelte-1s7jdlh">Load:</span> <div class="key-item svelte-1s7jdlh"><span class="dot finger svelte-1s7jdlh"></span> Finger</div> <div class="key-item svelte-1s7jdlh"><span class="dot shoulder svelte-1s7jdlh"></span> Shoulder</div> <div class="key-item svelte-1s7jdlh"><span class="dot forearm svelte-1s7jdlh"></span> Forearm</div></div></div> <div class="sessions-list"><!> <!> <!></div></div>');function ri(he,i){sa(i,!0);let w=z(_a([])),m=z(_a([])),F=z(!1),S=z(""),g=z(_a({startDate:"",endDate:"",area:"",crag:"",climbingType:"",sessionType:"",grade:""})),T=z(20);const y=20;Ba(()=>{L()});function L(){const v=Ea("outdoor_climb");n(w,v.sort((o,k)=>new Date(k.date).getTime()-new Date(o.date).getTime()),!0),P()}async function X(){n(F,!0),n(S,"");try{await Na();const v=await Ya();v.ok&&v.data?M(v.data):n(S,v.error||"Failed to fetch data",!0)}catch(v){n(S,v instanceof Error?v.message:"Unknown error",!0)}finally{n(F,!1)}}function M(v){const o=v.map(A=>({...A,activityType:"outdoor_climb",createdAt:new Date().toISOString(),updatedAt:new Date().toISOString(),syncStatus:"synced",syncedAt:new Date().toISOString(),openGrip:0,crimpGrip:0,pinchGrip:0,sloperGrip:0,jugGrip:0}));Ma(o);const k=Ea("outdoor_climb");n(w,k.sort((A,re)=>new Date(re.date).getTime()-new Date(A.date).getTime()),!0),P()}function le(v){n(g,v,!0),P()}function P(){n(T,y),n(m,e(w).filter(v=>{if(e(g).startDate&&v.date<e(g).startDate||e(g).endDate&&v.date>e(g).endDate||e(g).area&&!v.area.toLowerCase().includes(e(g).area.toLowerCase())||e(g).crag&&!v.crag.toLowerCase().includes(e(g).crag.toLowerCase()))return!1;if(e(g).climbingType&&(v.climbingType==="Leading"?"Sport":v.climbingType)!==e(g).climbingType)if(v.climbingType==="Mixed")if(e(g).climbingType==="Bouldering"){if(!v.climbs.some(k=>!k.isSport))return!1}else if(e(g).climbingType==="Sport"||e(g).climbingType==="Trad"){if(!v.climbs.some(k=>k.isSport))return!1}else return!1;else return!1;if(e(g).sessionType&&!v.trainingTypes?.includes(e(g).sessionType))return!1;if(e(g).grade){const o=e(g).grade.trim().toLowerCase();if(!v.climbs.some(A=>A.grade.trim().toLowerCase()===o))return!1}return!0}),!0)}function H(){n(T,e(T)+y)}var B=ii(),ee=t(B),ce=s(t(ee),2),Q=t(ce);Q.__click=()=>Va(e(m),"outdoor_climbs");var J=s(Q,2);J.__click=X;var $=t(J);{var te=v=>{var o=$s();qa(),r(v,o)},_e=v=>{var o=ba("‚òÅÔ∏è Fetch Data");r(v,o)};_($,v=>{e(F)?v(te):v(_e,!1)})}a(J),a(ce),a(ee);var Z=s(ee,2);{var ue=v=>{var o=ei(),k=t(o,!0);a(o),h(()=>d(k,e(S))),Xe(3,o,()=>ra),r(v,o)};_(Z,v=>{e(S)&&v(ue)})}var b=s(Z,2);bs(b,{onFilterParamsChange:le});var x=s(b,2),E=t(x),V=t(E);Ha(V),a(E),qa(2),a(x);var I=s(x,2),Y=t(I);ke(Y,17,()=>e(m).slice(0,e(T)),v=>v.id,(v,o)=>{Qs(v,{get session(){return e(o)},onDelete:L})});var ve=s(Y,2);{var c=v=>{var o=ti(),k=s(t(o),2);{var A=re=>{var pe=ai();r(re,pe)};_(k,re=>{e(w).length>0&&re(A)})}a(o),r(v,o)};_(ve,v=>{e(m).length===0&&v(c)})}var p=s(ve,2);{var u=v=>{var o=si(),k=t(o);k.__click=H;var A=t(k);a(k),a(o),h(()=>d(A,`Load More (${e(m).length-e(T)} remaining)`)),r(v,o)};_(p,v=>{e(T)<e(m).length&&v(u)})}a(I),a(B),h(()=>J.disabled=e(F)),r(he,B),ia()}aa(["click"]);var li=l('<span class="chevron svelte-11rkzid">‚ñ≤</span>'),vi=l('<span class="chevron svelte-11rkzid">‚ñº</span>'),ni=l('<div class="filter-body svelte-11rkzid"><div class="filter-grid svelte-11rkzid"><div class="filter-item svelte-11rkzid"><label for="start-date" class="svelte-11rkzid">Start Date</label> <input type="date" id="start-date" class="svelte-11rkzid"/></div> <div class="filter-item svelte-11rkzid"><label for="end-date" class="svelte-11rkzid">End Date</label> <input type="date" id="end-date" class="svelte-11rkzid"/></div> <div class="filter-item svelte-11rkzid"><label for="name-filter" class="svelte-11rkzid">Session Name</label> <input type="text" id="name-filter" placeholder="e.g. Leg Day" class="svelte-11rkzid"/></div> <div class="filter-item svelte-11rkzid"><label for="block-filter" class="svelte-11rkzid">Training Block</label> <select id="block-filter" class="svelte-11rkzid"><option>All Blocks</option><option>Strength</option><option>Power</option><option>Power Endurance</option><option>Muscular Endurance</option></select></div></div> <div class="filter-actions svelte-11rkzid"><button class="reset-btn svelte-11rkzid">Reset Filters</button></div></div>'),oi=l('<div class="filter-container svelte-11rkzid"><button class="filter-header svelte-11rkzid"><div class="header-content svelte-11rkzid"><span class="icon svelte-11rkzid">üîç</span> <span class="title svelte-11rkzid">Filters</span> <!></div></button> <!></div>');function di(he,i){sa(i,!0);let w=z(!1),m=z(""),F=z(""),S=z(""),g=z("");function T(){n(w,!e(w))}function y(){n(m,""),n(F,""),n(S,""),n(g,""),L()}function L(){i.onFilterParamsChange({startDate:e(m),endDate:e(F),name:e(S),trainingBlock:e(g)})}var X=oi(),M=t(X);M.__click=T;var le=t(M),P=s(t(le),4);{var H=Q=>{var J=li();r(Q,J)},B=Q=>{var J=vi();r(Q,J)};_(P,Q=>{e(w)?Q(H):Q(B,!1)})}a(le),a(M);var ee=s(M,2);{var ce=Q=>{var J=ni(),$=t(J),te=t($),_e=s(t(te),2);$e(_e),_e.__change=L,a(te);var Z=s(te,2),ue=s(t(Z),2);$e(ue),ue.__change=L,a(Z);var b=s(Z,2),x=s(t(b),2);$e(x),x.__input=L,a(b);var E=s(b,2),V=s(t(E),2);V.__change=L;var I=t(V);I.value=I.__value="";var Y=s(I);Y.value=Y.__value="Strength";var ve=s(Y);ve.value=ve.__value="Power";var c=s(ve);c.value=c.__value="Power Endurance";var p=s(c);p.value=p.__value="Muscular Endurance",a(V),a(E),a($);var u=s($,2),v=t(u);v.__click=y,a(u),a(J),ea(_e,()=>e(m),o=>n(m,o)),ea(ue,()=>e(F),o=>n(F,o)),ea(x,()=>e(S),o=>n(S,o)),ya(V,()=>e(g),o=>n(g,o)),Xe(3,J,()=>ra,()=>({duration:200})),r(Q,J)};_(ee,Q=>{e(w)&&Q(ce)})}a(X),h(()=>He(M,"aria-expanded",e(w))),r(he,X),ia()}aa(["click","change","input"]);var ci=l('<span class="status-icon pending svelte-cirrfc" title="Waiting to sync">üîÑ</span>'),_i=l('<span class="status-icon error svelte-cirrfc" title="Sync error">‚ö†Ô∏è</span>'),ui=l('<div class="bw-info svelte-cirrfc"><span class="label svelte-cirrfc">Bodyweight:</span> </div>'),fi=l('<span class="muscle-tag svelte-cirrfc"> </span>'),pi=l('<span class="muscle-tag svelte-cirrfc"> </span>'),gi=l('<div class="muscle-tags svelte-cirrfc"><!> <!></div>'),mi=l('<span class="tag w svelte-cirrfc">W</span>'),hi=l('<span class="tag f svelte-cirrfc">F</span>'),bi=l('<span class="tag d svelte-cirrfc">D</span>'),yi=l('<div><span class="set-num svelte-cirrfc"></span> <!> <!> <!> <span class="val svelte-cirrfc"><span class="weight"> </span> <span class="x svelte-cirrfc">x</span> <span class="reps"> </span></span></div>'),xi=l('<div class="exercise-item svelte-cirrfc"><div class="exercise-header svelte-cirrfc"><h4 class="svelte-cirrfc"> </h4> <!></div> <div class="sets-grid svelte-cirrfc"></div></div>'),wi=l('<div class="card-body svelte-cirrfc"><!> <div class="exercises-list svelte-cirrfc"></div></div>'),Si=l('<div><div class="card-header svelte-cirrfc" role="button" tabindex="0"><div class="header-main svelte-cirrfc"><div class="date-badge svelte-cirrfc"><span class="day svelte-cirrfc"> </span> <span class="month svelte-cirrfc"> </span></div> <div class="session-info svelte-cirrfc"><div class="session-text"><h3 class="name svelte-cirrfc"> </h3> <div class="session-meta svelte-cirrfc"><span class="stat svelte-cirrfc"> </span> <span class="stat svelte-cirrfc"> </span> <span class="stat svelte-cirrfc"> </span></div></div></div></div> <div class="header-actions svelte-cirrfc"><div class="header-status"><!></div> <button class="btn-icon delete-session svelte-cirrfc" title="Delete Session">üóëÔ∏è</button> <span class="chevron svelte-cirrfc"> </span></div></div> <!></div> <!>',1);function Di(he,i){sa(i,!0);let w=z(!1),m=z(!1);function F(){n(w,!e(w))}function S(){n(m,!0)}function g(){Ia(i.session.id),n(m,!1),i.onDelete()}function T(G){return Qa.find(W=>W.name===G)}let y=fa(()=>i.session.exercises?.length??0),L=fa(()=>(i.session.exercises||[]).reduce((G,W)=>G+(W.sets?.length||0),0)),X=fa(()=>(i.session.exercises||[]).reduce((G,W)=>G+(W.sets||[]).reduce((U,xe)=>U+(xe.weight||0)*(xe.reps||0),0),0));var M=Si(),le=Ae(M);let P;var H=t(le);H.__click=F,H.__keydown=G=>G.key==="Enter"&&F();var B=t(H),ee=t(B),ce=t(ee),Q=t(ce,!0);a(ce);var J=s(ce,2),$=t(J,!0);a(J),a(ee);var te=s(ee,2),_e=t(te),Z=t(_e),ue=t(Z,!0);a(Z);var b=s(Z,2),x=t(b),E=t(x);a(x);var V=s(x,2),I=t(V);a(V);var Y=s(V,2),ve=t(Y);a(Y),a(b),a(_e),a(te),a(B);var c=s(B,2),p=t(c),u=t(p);{var v=G=>{var W=ci();r(G,W)},o=G=>{var W=We(),U=Ae(W);{var xe=ze=>{var Fe=_i();r(ze,Fe)};_(U,ze=>{i.session.syncStatus==="error"&&ze(xe)},!0)}r(G,W)};_(u,G=>{i.session.syncStatus==="pending"?G(v):G(o,!1)})}a(p);var k=s(p,2);k.__click=G=>{G.stopPropagation(),S()};var A=s(k,2),re=t(A,!0);a(A),a(c),a(H);var pe=s(H,2);{var Ge=G=>{var W=wi(),U=t(W);{var xe=Fe=>{var q=ui(),O=s(t(q));a(q),h(()=>d(O,` ${i.session.bodyweight??""}kg`)),r(Fe,q)};_(U,Fe=>{i.session.bodyweight&&Fe(xe)})}var ze=s(U,2);ke(ze,21,()=>i.session.exercises,Ee,(Fe,q)=>{const O=fa(()=>T(e(q).name));var de=xi(),Te=t(de),C=t(Te),se=t(C,!0);a(C);var Le=s(C,2);{var ae=ne=>{var be=gi(),me=t(be);ke(me,17,()=>e(O).targetMuscles.slice(0,3),Ee,(De,ye)=>{var qe=fi(),Pe=t(qe,!0);a(qe),h(()=>d(Pe,e(ye))),r(De,qe)});var we=s(me,2);{var Se=De=>{var ye=pi(),qe=t(ye);a(ye),h(()=>d(qe,`+${e(O).targetMuscles.length-3}`)),r(De,ye)};_(we,De=>{e(O).targetMuscles.length>3&&De(Se)})}a(be),r(ne,be)};_(Le,ne=>{e(O)&&ne(ae)})}a(Te);var ie=s(Te,2);ke(ie,21,()=>e(q).sets,Ee,(ne,be,me)=>{var we=yi();let Se;var De=t(we);De.textContent=me+1;var ye=s(De,2);{var qe=je=>{var Ue=mi();r(je,Ue)};_(ye,je=>{e(be).isWarmup&&je(qe)})}var Pe=s(ye,2);{var Ve=je=>{var Ue=hi();r(je,Ue)};_(Pe,je=>{e(be).isFailure&&je(Ve)})}var Oe=s(Pe,2);{var Je=je=>{var Ue=bi();r(je,Ue)};_(Oe,je=>{e(be).isDropSet&&je(Je)})}var Ne=s(Oe,2),Ie=t(Ne),ua=t(Ie);a(Ie);var Be=s(Ie,4),la=t(Be,!0);a(Be),a(Ne),a(we),h(()=>{Se=Ke(we,1,"set-pill svelte-cirrfc",null,Se,{completed:e(be).completed,warmup:e(be).isWarmup}),d(ua,`${e(be).weight??""}kg`),d(la,e(be).reps)}),r(ne,we)}),a(ie),a(de),h(()=>d(se,e(q).name)),r(Fe,de)}),a(ze),a(W),Xe(3,W,()=>ra,()=>({duration:150})),r(G,W)};_(pe,G=>{e(w)&&G(Ge)})}a(le);var ge=s(le,2);Ga(ge,{get isOpen(){return e(m)},title:"Delete Session",message:"Are you sure you want to delete this session? This cannot be undone.",onConfirm:g,onCancel:()=>n(m,!1)}),h((G,W,U)=>{P=Ke(le,1,"session-card svelte-cirrfc",null,P,{expanded:e(w)}),He(H,"aria-expanded",e(w)),d(Q,G),d($,W),d(ue,i.session.name),d(E,`${e(y)??""} Exercises`),d(I,`${e(L)??""} Sets`),d(ve,`~${U??""}kg Vol`),d(re,e(w)?"‚ñ≤":"‚ñº")},[()=>new Date(i.session.date).getDate(),()=>new Date(i.session.date).toLocaleDateString("en-GB",{month:"short"}),()=>Math.round(e(X)).toLocaleString()]),r(he,M),ia()}aa(["click","keydown"]);var ki=l('<span class="spinner svelte-133enjd"></span> Fetching...',1),Ti=l('<div class="error-banner svelte-133enjd"> </div>'),qi=l('<small class="svelte-133enjd">Try adjusting your filters.</small>'),Ci=l('<div class="empty-state svelte-133enjd"><p class="svelte-133enjd">No gym sessions found.</p> <!></div>'),zi=l('<div class="load-more-container svelte-133enjd"><button class="load-more-btn svelte-133enjd"> </button></div>'),Fi=l('<div class="view-container svelte-133enjd"><div class="view-header svelte-133enjd"><h2 class="view-title svelte-133enjd">üèãÔ∏è Gym Session History</h2> <div class="header-actions svelte-133enjd"><button class="action-btn secondary svelte-133enjd" title="Export filtered data to CSV">üì• Export</button> <button class="action-btn svelte-133enjd" title="Fetch data from cloud"><!></button></div></div> <!> <!> <div class="sessions-list"><!> <!> <!></div></div>');function Li(he,i){sa(i,!0);let w=z(_a([])),m=z(_a([])),F=z(!1),S=z(""),g=z(_a({startDate:"",endDate:"",name:"",trainingBlock:""})),T=z(20);const y=20;Ba(()=>{L()});function L(){const c=Ea("gym_session");n(w,c.sort((p,u)=>new Date(u.date).getTime()-new Date(p.date).getTime()),!0),P()}async function X(){n(F,!0),n(S,"");try{await Na();const c=await $a();c.ok&&c.data?M(c.data):n(S,c.error||"Failed to fetch data",!0)}catch(c){n(S,c instanceof Error?c.message:"Unknown error",!0)}finally{n(F,!1)}}function M(c){const p=c.map(v=>({...v,activityType:"gym_session",syncStatus:"synced",syncedAt:new Date().toISOString(),createdAt:v.createdAt||new Date().toISOString(),updatedAt:v.updatedAt||new Date().toISOString()}));Ma(p);const u=Ea("gym_session");n(w,u.sort((v,o)=>new Date(o.date).getTime()-new Date(v.date).getTime()),!0),P()}function le(c){n(g,c,!0),P()}function P(){n(T,y),n(m,e(w).filter(c=>!(e(g).startDate&&c.date<e(g).startDate||e(g).endDate&&c.date>e(g).endDate||e(g).name&&!c.name.toLowerCase().includes(e(g).name.toLowerCase())||e(g).trainingBlock&&c.trainingBlock!==e(g).trainingBlock)),!0)}function H(){n(T,e(T)+y)}var B=Fi(),ee=t(B),ce=s(t(ee),2),Q=t(ce);Q.__click=()=>Va(e(m),"gym_sessions");var J=s(Q,2);J.__click=X;var $=t(J);{var te=c=>{var p=ki();qa(),r(c,p)},_e=c=>{var p=ba("‚òÅÔ∏è Fetch Data");r(c,p)};_($,c=>{e(F)?c(te):c(_e,!1)})}a(J),a(ce),a(ee);var Z=s(ee,2);{var ue=c=>{var p=Ti(),u=t(p,!0);a(p),h(()=>d(u,e(S))),Xe(3,p,()=>ra),r(c,p)};_(Z,c=>{e(S)&&c(ue)})}var b=s(Z,2);di(b,{onFilterParamsChange:le});var x=s(b,2),E=t(x);ke(E,17,()=>e(m).slice(0,e(T)),c=>c.id,(c,p)=>{Di(c,{get session(){return e(p)},onDelete:L})});var V=s(E,2);{var I=c=>{var p=Ci(),u=s(t(p),2);{var v=o=>{var k=qi();r(o,k)};_(u,o=>{e(w).length>0&&o(v)})}a(p),r(c,p)};_(V,c=>{e(m).length===0&&c(I)})}var Y=s(V,2);{var ve=c=>{var p=zi(),u=t(p);u.__click=H;var v=t(u);a(u),a(p),h(()=>d(v,`Load More (${e(m).length-e(T)} remaining)`)),r(c,p)};_(Y,c=>{e(T)<e(m).length&&c(ve)})}a(x),a(B),h(()=>J.disabled=e(F)),r(he,B),ia()}aa(["click"]);var Ei=l('<span class="spinner svelte-1szs0u9"></span> Fetching...',1),Gi=l('<div class="loading svelte-1szs0u9">Loading sessions...</div>'),ji=l('<div class="empty-state svelte-1szs0u9"><!></div>'),Ai=l('<span class="set-tag svelte-1szs0u9"> <span class="x svelte-1szs0u9">x</span> </span>'),Oi=l('<div class="ex-notes svelte-1szs0u9"> </div>'),Ni=l('<div class="exercise-item svelte-1szs0u9"><div class="ex-header svelte-1szs0u9"><span class="ex-name svelte-1szs0u9"> </span> <span class="ex-grip svelte-1szs0u9"> </span></div> <div class="ex-sets svelte-1szs0u9"></div> <!></div>'),Ii=l('<div class="card-body svelte-1szs0u9"><div class="exercises-list svelte-1szs0u9"></div></div>'),Mi=l('<div><div class="card-header svelte-1szs0u9" role="button" tabindex="0"><div class="header-main"><span class="session-date svelte-1szs0u9"> </span> <span class="meta svelte-1szs0u9"><!> </span></div> <div class="header-status svelte-1szs0u9"><span>‚óè</span> <button class="btn-icon delete-btn svelte-1szs0u9" title="Delete Session">üóëÔ∏è</button> <span class="chevron svelte-1szs0u9"> </span></div></div> <!></div>'),Ri=l('<div class="load-more-container svelte-1szs0u9"><button class="load-more-btn svelte-1szs0u9"> </button></div>'),Pi=l('<div class="timeline svelte-1szs0u9"><!> <!></div>'),Bi=l('<div class="view-content svelte-1szs0u9"><div class="header svelte-1szs0u9"><h3 class="svelte-1szs0u9">ü§è Fingerboarding Log</h3> <button class="fetch-btn svelte-1szs0u9" title="Fetch data from cloud"><!></button></div> <div class="filters svelte-1szs0u9"><div class="filter-group svelte-1szs0u9"><label for="start-date" class="svelte-1szs0u9">From</label> <input type="date" id="start-date" class="svelte-1szs0u9"/></div> <div class="filter-group svelte-1szs0u9"><label for="end-date" class="svelte-1szs0u9">To</label> <input type="date" id="end-date" class="svelte-1szs0u9"/></div></div> <!></div> <!>',1);function Vi(he,i){sa(i,!0);let w=z(_a([])),m=z(!0),F=z(""),S=z(""),g=z(_a(new Set)),T=z(20);const y=20;Ja(()=>{e(F),e(S),n(T,y)});let L=z(!1),X=z(null);function M(u){n(X,u,!0),n(L,!0)}function le(){e(X)&&(Ia(e(X)),n(X,null),n(L,!1),n(w,Ra().sort((u,v)=>new Date(v.date).getTime()-new Date(u.date).getTime()),!0))}async function P(){n(m,!0),n(w,Ra().sort((u,v)=>new Date(v.date).getTime()-new Date(u.date).getTime()),!0);try{await Na();const u=await et();if(u.ok&&u.data){const v=u.data.map(o=>({...o,activityType:"fingerboarding",createdAt:o.createdAt||new Date().toISOString(),updatedAt:o.updatedAt||new Date().toISOString(),syncStatus:"synced"}));Ma(v),n(w,Ra().sort((o,k)=>new Date(k.date).getTime()-new Date(o.date).getTime()),!0)}}catch(u){console.error("Failed to sync",u)}finally{n(m,!1)}}P();let H=fa(()=>e(w).filter(u=>!(e(F)&&new Date(u.date)<new Date(e(F))||e(S)&&new Date(u.date)>new Date(e(S)))));function B(){n(T,e(T)+y)}function ee(u){e(g).has(u)?e(g).delete(u):e(g).add(u),n(g,new Set(e(g)),!0)}function ce(u){return u.exercises.reduce((v,o)=>v+o.details.length,0)}var Q=Bi(),J=Ae(Q),$=t(J),te=s(t($),2);te.__click=P;var _e=t(te);{var Z=u=>{var v=Ei();qa(),r(u,v)},ue=u=>{var v=ba("‚òÅÔ∏è Fetch Data");r(u,v)};_(_e,u=>{e(m)?u(Z):u(ue,!1)})}a(te),a($);var b=s($,2),x=t(b),E=s(t(x),2);$e(E),a(x);var V=s(x,2),I=s(t(V),2);$e(I),a(V),a(b);var Y=s(b,2);{var ve=u=>{var v=Gi();r(u,v)},c=u=>{var v=We(),o=Ae(v);{var k=re=>{var pe=ji(),Ge=t(pe);{var ge=W=>{var U=ba("No sessions match filter.");r(W,U)},G=W=>{var U=ba("No fingerboarding sessions logged yet.");r(W,U)};_(Ge,W=>{e(w).length>0?W(ge):W(G,!1)})}a(pe),r(re,pe)},A=re=>{var pe=Pi(),Ge=t(pe);ke(Ge,17,()=>e(H).slice(0,e(T)),Ee,(W,U)=>{var xe=Mi();let ze;var Fe=t(xe);Fe.__click=()=>ee(e(U).id),Fe.__keydown=ye=>ye.key==="Enter"&&ee(e(U).id);var q=t(Fe),O=t(q),de=t(O,!0);a(O);var Te=s(O,2),C=t(Te);{var se=ye=>{var qe=ba();h(()=>d(qe,`${e(U).location??""} ¬∑`)),r(ye,qe)};_(C,ye=>{e(U).location&&e(U).location!=="N/A"&&e(U).location!=="Home"&&ye(se)})}var Le=s(C);a(Te),a(q);var ae=s(q,2),ie=t(ae);let ne;var be=s(ie,2);be.__click=ye=>{ye.stopPropagation(),M(e(U).id)};var me=s(be,2),we=t(me,!0);a(me),a(ae),a(Fe);var Se=s(Fe,2);{var De=ye=>{var qe=Ii(),Pe=t(qe);ke(Pe,21,()=>e(U).exercises||[],Ee,(Ve,Oe)=>{var Je=Ni(),Ne=t(Je),Ie=t(Ne),ua=t(Ie,!0);a(Ie);var Be=s(Ie,2),la=t(Be,!0);a(Be),a(Ne);var je=s(Ne,2);ke(je,21,()=>e(Oe).details,Ee,(ta,Ye)=>{var va=Ai(),pa=t(va),na=s(pa,2);a(va),h(()=>{d(pa,`${e(Ye).weight>0?`+${e(Ye).weight}kg`:"BW"} `),d(na,` ${e(Ye).reps??""}s/reps`)}),r(ta,va)}),a(je);var Ue=s(je,2);{var Sa=ta=>{var Ye=Oi(),va=t(Ye);a(Ye),h(()=>d(va,`"${e(Oe).notes??""}"`)),r(ta,Ye)};_(Ue,ta=>{e(Oe).notes&&ta(Sa)})}a(Je),h(()=>{d(ua,e(Oe).name),d(la,e(Oe).gripType)}),r(Ve,Je)}),a(Pe),a(qe),Xe(3,qe,()=>ra,()=>({duration:150})),r(ye,qe)};_(Se,ye=>{e(g).has(e(U).id)&&ye(De)})}a(xe),h((ye,qe,Pe,Ve)=>{ze=Ke(xe,1,"session-card svelte-1szs0u9",null,ze,ye),d(de,qe),d(Le,` ${e(U).exercises.length??""} Exercises ¬∑ ${Pe??""} Sets`),ne=Ke(ie,1,"sync-dot svelte-1szs0u9",null,ne,{synced:e(U).syncStatus==="synced"}),He(ie,"title",e(U).syncStatus==="synced"?"Synced":"Local"),d(we,Ve)},[()=>({expanded:e(g).has(e(U).id)}),()=>new Date(e(U).date).toLocaleDateString(void 0,{weekday:"short",month:"short",day:"numeric"}),()=>ce(e(U)),()=>e(g).has(e(U).id)?"‚ñ≤":"‚ñº"]),r(W,xe)});var ge=s(Ge,2);{var G=W=>{var U=Ri(),xe=t(U);xe.__click=B;var ze=t(xe);a(xe),a(U),h(()=>d(ze,`Load More (${e(H).length-e(T)} remaining)`)),r(W,U)};_(ge,W=>{e(T)<e(H).length&&W(G)})}a(pe),r(re,pe)};_(o,re=>{e(H).length===0?re(k):re(A,!1)},!0)}r(u,v)};_(Y,u=>{e(m)&&e(w).length===0?u(ve):u(c,!1)})}a(J);var p=s(J,2);Ga(p,{get isOpen(){return e(L)},title:"Delete Fingerboard Session",message:"Are you sure you want to delete this session? This cannot be undone.",onConfirm:le,onCancel:()=>n(L,!1)}),h(()=>te.disabled=e(m)),ea(E,()=>e(F),u=>n(F,u)),ea(I,()=>e(S),u=>n(S,u)),r(he,Q),ia()}aa(["click","keydown"]);var Wi=l('<span class="spinner svelte-xyvf5r"></span> Fetching...',1),Ui=l('<div class="loading svelte-xyvf5r">Loading sessions...</div>'),Hi=l('<div class="empty-state svelte-xyvf5r">No competitions logged yet.</div>'),Ji=l('<span class="round-pos svelte-xyvf5r"> </span>'),Zi=l('<span class="c-attempts svelte-xyvf5r"> </span>'),Ki=l('<div class="climb-notes svelte-xyvf5r"> </div>'),Xi=l('<div class="climb-row svelte-xyvf5r"><div class="climb-info svelte-xyvf5r"><span class="c-name svelte-xyvf5r"> </span> <!></div> <div class="climb-result"><span> </span></div></div> <!>',1),Yi=l('<div class="climbs-list"></div>'),Qi=l('<div class="round-item svelte-xyvf5r"><div class="round-header svelte-xyvf5r"><span class="round-name"> </span> <!></div> <!></div>'),$i=l('<div class="rounds-list svelte-xyvf5r"></div>'),er=l('<div class="load-meta svelte-xyvf5r"><span> </span></div>'),ar=l('<div class="card-body svelte-xyvf5r"><!> <!> <div class="session-footer svelte-xyvf5r"><span> </span></div></div>'),tr=l('<div><div class="card-header svelte-xyvf5r" role="button" tabindex="0"><div class="header-main svelte-xyvf5r"><div class="left-col svelte-xyvf5r"><span class="venue svelte-xyvf5r"> </span> <span class="date svelte-xyvf5r"> </span></div> <div class="right-col svelte-xyvf5r"><div class="badges svelte-xyvf5r"><span class="type-tag svelte-xyvf5r"> </span> <span class="result-tag svelte-xyvf5r"> </span></div></div></div> <div class="header-status svelte-xyvf5r"><span>‚óè</span> <button class="btn-icon delete-btn svelte-xyvf5r" title="Delete Session">üóëÔ∏è</button> <span class="chevron svelte-xyvf5r"> </span></div></div> <!></div>'),sr=l('<div class="load-more-container svelte-xyvf5r"><button class="load-more-btn svelte-xyvf5r"> </button></div>'),ir=l('<div class="timeline svelte-xyvf5r"><!> <!></div>'),rr=l('<div class="view-content svelte-xyvf5r"><div class="header svelte-xyvf5r"><h3 class="svelte-xyvf5r">üèÜ Competition Log</h3> <button class="fetch-btn svelte-xyvf5r" title="Fetch data from cloud"><!></button></div> <!> <!></div>');function lr(he,i){sa(i,!0);let w=z(_a([])),m=z(!0),F=z(_a(new Set)),S=z(20);const g=20;let T=z(!1),y=z(null);function L(b){n(y,b,!0),n(T,!0)}function X(){e(y)&&(Ia(e(y)),n(y,null),n(T,!1),n(w,Pa().sort((b,x)=>new Date(x.date).getTime()-new Date(b.date).getTime()),!0))}async function M(){n(m,!0),n(S,g),n(w,Pa().sort((b,x)=>new Date(x.date).getTime()-new Date(b.date).getTime()),!0);try{await Na();const b=await at();if(b.ok&&b.data){const x=b.data.map(E=>({...E,activityType:"competition",type:E.type,rounds:E.rounds.map(V=>({...V,climbs:V.climbs?.map(I=>({...I,status:I.status}))})),createdAt:E.createdAt||new Date().toISOString(),updatedAt:E.updatedAt||new Date().toISOString(),syncStatus:"synced"}));Ma(x),n(w,Pa().sort((E,V)=>new Date(V.date).getTime()-new Date(E.date).getTime()),!0)}}catch(b){console.error("Failed to sync",b)}finally{n(m,!1)}}M();function le(b){e(F).has(b)?e(F).delete(b):e(F).add(b),n(F,new Set(e(F)),!0)}function P(){n(S,e(S)+g)}function H(b){if(!b.rounds||b.rounds.length===0)return"No rounds";const x=b.rounds[b.rounds.length-1];if(x.position)return`#${x.position} ${x.name}`;if(x.climbs){const E=x.climbs.filter(I=>I.status==="Top"||I.status==="Flash").length,V=x.climbs.filter(I=>I.status==="Zone").length;return`${b.rounds.length} Rnds ¬∑ Final: ${E}T ${V+E}Z`}return x.name}var B=rr(),ee=t(B),ce=s(t(ee),2);ce.__click=M;var Q=t(ce);{var J=b=>{var x=Wi();qa(),r(b,x)},$=b=>{var x=ba("‚òÅÔ∏è Fetch Data");r(b,x)};_(Q,b=>{e(m)?b(J):b($,!1)})}a(ce),a(ee);var te=s(ee,2);{var _e=b=>{var x=Ui();r(b,x)},Z=b=>{var x=We(),E=Ae(x);{var V=Y=>{var ve=Hi();r(Y,ve)},I=Y=>{var ve=ir(),c=t(ve);ke(c,17,()=>e(w).slice(0,e(S)),Ee,(v,o)=>{var k=tr();let A;var re=t(k);re.__click=()=>le(e(o).id),re.__keydown=me=>me.key==="Enter"&&le(e(o).id);var pe=t(re),Ge=t(pe),ge=t(Ge),G=t(ge,!0);a(ge);var W=s(ge,2),U=t(W,!0);a(W),a(Ge);var xe=s(Ge,2),ze=t(xe),Fe=t(ze),q=t(Fe,!0);a(Fe);var O=s(Fe,2),de=t(O,!0);a(O),a(ze),a(xe),a(pe);var Te=s(pe,2),C=t(Te);let se;var Le=s(C,2);Le.__click=me=>{me.stopPropagation(),L(e(o).id)};var ae=s(Le,2),ie=t(ae,!0);a(ae),a(Te),a(re);var ne=s(re,2);{var be=me=>{var we=ar(),Se=t(we);{var De=Ne=>{var Ie=$i();ke(Ie,21,()=>e(o).rounds||[],Ee,(ua,Be)=>{var la=Qi(),je=t(la),Ue=t(je),Sa=t(Ue,!0);a(Ue);var ta=s(Ue,2);{var Ye=na=>{var oa=Ji(),Da=t(oa);a(oa),h(()=>d(Da,`#${e(Be).position??""}`)),r(na,oa)};_(ta,na=>{e(Be).position&&na(Ye)})}a(je);var va=s(je,2);{var pa=na=>{var oa=Yi();ke(oa,21,()=>e(Be).climbs||[],Ee,(Da,Qe)=>{var Ca=Xi(),ma=Ae(Ca),ka=t(ma),ha=t(ka),ja=t(ha,!0);a(ha);var za=s(ha,2);{var Aa=N=>{var f=Zi(),D=t(f);a(f),h(()=>d(D,`(${e(Qe).attemptCount??""} tries)`)),r(N,f)};_(za,N=>{e(Qe).attemptCount>1&&N(Aa)})}a(ka);var Ta=s(ka,2),xa=t(Ta);let wa;var Fa=t(xa,!0);a(xa),a(Ta),a(ma);var La=s(ma,2);{var R=N=>{var f=Ki(),D=t(f);a(f),h(()=>d(D,`"${e(Qe).notes??""}"`)),r(N,f)};_(La,N=>{e(Qe).notes&&N(R)})}h(()=>{d(ja,e(Qe).name),wa=Ke(xa,1,"status-badge svelte-xyvf5r",null,wa,{top:e(Qe).status==="Top"||e(Qe).status==="Flash",zone:e(Qe).status==="Zone"}),d(Fa,e(Qe).status)}),r(Da,Ca)}),a(oa),r(na,oa)};_(va,na=>{e(Be).climbs&&na(pa)})}a(la),h(()=>d(Sa,e(Be).name)),r(ua,la)}),a(Ie),r(Ne,Ie)};_(Se,Ne=>{e(o).rounds&&Ne(De)})}var ye=s(Se,2);{var qe=Ne=>{var Ie=er(),ua=t(Ie),Be=t(ua);a(ua),a(Ie),h(()=>d(Be,`Detailed Load: Fingers ${e(o).fingerLoad??""}/5, Shoulders ${e(o).shoulderLoad??""}/5, Forearms ${e(o).forearmLoad??""}/5`)),r(Ne,Ie)};_(ye,Ne=>{(e(o).fingerLoad||e(o).shoulderLoad)&&Ne(qe)})}var Pe=s(ye,2),Ve=t(Pe);let Oe;var Je=t(Ve,!0);a(Ve),a(Pe),a(we),h(()=>{Oe=Ke(Ve,1,"sync-status svelte-xyvf5r",null,Oe,{synced:e(o).syncStatus==="synced"}),d(Je,e(o).syncStatus==="synced"?"‚úì Synced":"‚òÅ Local")}),Xe(3,we,()=>ra,()=>({duration:150})),r(me,we)};_(ne,me=>{e(F).has(e(o).id)&&me(be)})}a(k),h((me,we,Se,De)=>{A=Ke(k,1,"session-card svelte-xyvf5r",null,A,me),d(G,e(o).customVenue||e(o).venue),d(U,we),d(q,e(o).type),d(de,Se),se=Ke(C,1,"sync-dot",null,se,{synced:e(o).syncStatus==="synced"}),He(C,"title",e(o).syncStatus==="synced"?"Synced":"Local"),d(ie,De)},[()=>({expanded:e(F).has(e(o).id)}),()=>new Date(e(o).date).toLocaleDateString(void 0,{weekday:"short",day:"numeric",month:"short"}),()=>H(e(o)),()=>e(F).has(e(o).id)?"‚ñ≤":"‚ñº"]),r(v,k)});var p=s(c,2);{var u=v=>{var o=sr(),k=t(o);k.__click=P;var A=t(k);a(k),a(o),h(()=>d(A,`Load More (${e(w).length-e(S)} remaining)`)),r(v,o)};_(p,v=>{e(S)<e(w).length&&v(u)})}a(ve),r(Y,ve)};_(E,Y=>{e(w).length===0?Y(V):Y(I,!1)},!0)}r(b,x)};_(te,b=>{e(m)&&e(w).length===0?b(_e):b(Z,!1)})}var ue=s(te,2);Ga(ue,{get isOpen(){return e(T)},title:"Delete Competition",message:"Are you sure you want to delete this competition session? This action cannot be undone.",onConfirm:X,onCancel:()=>n(T,!1)}),a(B),h(()=>ce.disabled=e(m)),r(he,B),ia()}aa(["click","keydown"]);var vr=l('<button class="backdrop svelte-108px9u" aria-label="Close settings"></button> <div class="settings-modal svelte-108px9u" role="dialog" aria-modal="true"><div class="settings-header svelte-108px9u"><h3 class="svelte-108px9u">Settings</h3> <button class="close-btn svelte-108px9u">‚úï</button></div> <div class="settings-content"><div class="setting-item svelte-108px9u"><div class="setting-info svelte-108px9u"><span class="setting-label svelte-108px9u">Local Data</span> <span class="setting-desc svelte-108px9u">Clear all cached data on this device</span></div> <button class="btn-clear-cache svelte-108px9u">Clear Cache</button></div></div></div>',1),nr=l("<option> </option>"),or=l('<div class="view-container svelte-108px9u"><!></div>'),dr=l('<div class="page svelte-108px9u"><div class="page-header svelte-108px9u"><div><h1 class="svelte-108px9u">üìä View Data</h1> <p class="subtitle svelte-108px9u">Browse your training history</p></div> <button class="settings-btn svelte-108px9u" aria-label="Settings">‚öôÔ∏è</button></div> <!> <!> <div class="content-card svelte-108px9u"><div class="form-group svelte-108px9u"><label for="activity-type" class="svelte-108px9u">Activity Type</label> <select id="activity-type" class="svelte-108px9u"><option disabled>Select an activity...</option><!></select></div> <!></div></div>');function xr(he,i){sa(i,!0);const w=[{value:"indoor_climb",label:"Indoor Climb",icon:"üßó"},{value:"outdoor_climb",label:"Outdoor Climb",icon:"‚õ∞Ô∏è"},{value:"gym_session",label:"Gym Session",icon:"üèãÔ∏è"},{value:"fingerboarding",label:"Fingerboarding",icon:"ü§è"},{value:"competition",label:"Competition",icon:"üèÜ"}];let m=z(""),F=z(!1),S=z(!1);function g(){n(F,!0)}function T(){n(F,!1)}function y(){n(F,!1),n(S,!0)}function L(){it()}var X=dr(),M=t(X),le=s(t(M),2);le.__click=g,a(M);var P=s(M,2);{var H=Z=>{var ue=vr(),b=Ae(ue);b.__click=T;var x=s(b,2),E=t(x),V=s(t(E),2);V.__click=T,a(E);var I=s(E,2),Y=t(I),ve=s(t(Y),2);ve.__click=y,a(Y),a(I),a(x),Xe(3,b,()=>tt,()=>({duration:200})),Xe(3,x,()=>st,()=>({duration:200,start:.9})),r(Z,ue)};_(P,Z=>{e(F)&&Z(H)})}var B=s(P,2);Ga(B,{get isOpen(){return e(S)},title:"Clear all local data?",message:"Are you sure you want to clear all locally cached data? This will remove all sessions stored on this device. Data already synced to the cloud will be preserved.",confirmKeyword:"clear",onConfirm:L,onCancel:()=>n(S,!1)});var ee=s(B,2),ce=t(ee),Q=s(t(ce),2),J=t(Q);J.value=J.__value="";var $=s(J);ke($,17,()=>w,Z=>Z.value,(Z,ue)=>{var b=nr(),x=t(b);a(b);var E={};h(()=>{d(x,`${e(ue).icon??""} ${e(ue).label??""}`),E!==(E=e(ue).value)&&(b.value=(b.__value=e(ue).value)??"")}),r(Z,b)}),a(Q),a(ce);var te=s(ce,2);{var _e=Z=>{var ue=or(),b=t(ue);{var x=V=>{rs(V,{})},E=V=>{var I=We(),Y=Ae(I);{var ve=p=>{ri(p,{})},c=p=>{var u=We(),v=Ae(u);{var o=A=>{Li(A,{})},k=A=>{var re=We(),pe=Ae(re);{var Ge=G=>{Vi(G,{})},ge=G=>{var W=We(),U=Ae(W);{var xe=ze=>{lr(ze,{})};_(U,ze=>{e(m)==="competition"&&ze(xe)},!0)}r(G,W)};_(pe,G=>{e(m)==="fingerboarding"?G(Ge):G(ge,!1)},!0)}r(A,re)};_(v,A=>{e(m)==="gym_session"?A(o):A(k,!1)},!0)}r(p,u)};_(Y,p=>{e(m)==="outdoor_climb"?p(ve):p(c,!1)},!0)}r(V,I)};_(b,V=>{e(m)==="indoor_climb"?V(x):V(E,!1)})}a(ue),r(Z,ue)};_(te,Z=>{e(m)&&Z(_e)})}a(ee),a(X),ya(Q,()=>e(m),Z=>n(m,Z)),r(he,X),ia()}aa(["click"]);export{xr as component};
