import{f as n,a as i,c as nt,t as Ae}from"../chunks/CKcnA5P_.js";import{w as Da,p as vt,c as l,r as t,s,j as e,t as E,a as ct,f as at,aV as p,E as De,aG as ze,F as a,aW as Dt,b0 as Fa,d as Oa,b1 as oa,k as Le,e as Se,b2 as ja,ac as Xe,o as za,b3 as Aa,b4 as fa,b5 as qa,b6 as Ga,D as Ia,b7 as Ra}from"../chunks/4c6jdw0Z.js";import{d as Jt,s as Q,e as X}from"../chunks/K94srNfd.js";import{i as L}from"../chunks/CK8hGvwc.js";import{e as fe,i as me,r as V,b as P,c as Va,s as tt,d as La}from"../chunks/BVSa1UsB.js";import{s as We}from"../chunks/9PGhKrW6.js";import{i as Ca,s as Na,c as Ye,d as Ba,u as ga,m as ba,b as ha,e as Ma,f as Pa,h as $a,j as Wa}from"../chunks/BqWccOr6.js";import{i as na,c as Ua,g as Ha,a as Ka,b as Ja,t as ra,f as _a,E as pa,d as Qa,e as Xa,h as Ya,j as Za,s as es}from"../chunks/D7cX9OXl.js";import{p as st}from"../chunks/CfB7tKQ8.js";import{i as Qt}from"../chunks/DMFvxL8W.js";function ma(ge){return function(...z){var v=z[0];return v.stopPropagation(),ge?.apply(this,z)}}function Gt(ge,z){var v=ge.$$events?.[z.type],D=Da(v)?v.slice():v==null?[]:[v];for(var w of D)w.call(this,z)}var ts=n('<span class="placeholder svelte-1g8x5ph"> </span>'),as=n('<span class="chip-display"> </span>'),ss=n('<button type="button"> </button>'),ls=n('<div class="multi-select-container svelte-1g8x5ph"><div class="chips svelte-1g8x5ph"><!></div> <div class="options-grid svelte-1g8x5ph"></div></div>');function Ct(ge,z){vt(z,!0);let v=st(z,"selected",19,()=>[]),D=st(z,"placeholder",3,"Select options...");function w(h){let T=[...v()];h==="None"?T.includes("None")?T=[]:T=["None"]:(T=T.filter(q=>q!=="None"),T.includes(h)?T=T.filter(q=>q!==h):T.push(h)),z.onChange(T)}var u=ls(),c=l(u),$=l(c);{var J=h=>{var T=ts(),q=l(T,!0);t(T),E(()=>Q(q,D())),i(h,T)},ie=h=>{var T=nt(),q=at(T);fe(q,17,v,me,(F,y)=>{var m=as(),C=l(m,!0);t(m),E(()=>Q(C,e(y))),i(F,m)}),i(h,T)};L($,h=>{v().length===0?h(J):h(ie,!1)})}t(c);var G=s(c,2);fe(G,21,()=>z.options,me,(h,T)=>{var q=ss();q.__click=()=>w(e(T));var F=l(q,!0);t(q),E(y=>{We(q,1,`option-chip ${y??""}`,"svelte-1g8x5ph"),Q(F,e(T))},[()=>v().includes(e(T))?"selected":""]),i(h,q)}),t(G),t(u),i(ge,u),ct()}Jt(["click"]);var is=n('<div class="input-with-action svelte-1lf3qka"><input type="text" id="location-manual" placeholder="Enter custom location..." class="flat-left svelte-1lf3qka"/> <button type="button" class="action-btn flat-right svelte-1lf3qka" title="Back to list">‚úï</button></div>'),rs=n("<option> </option>"),os=n('<select id="location" class="svelte-1lf3qka"><option disabled>Select location...</option><!></select>'),ns=n("<option> </option>"),vs=n("<option> </option>"),cs=n('<th class="svelte-1lf3qka">Sport?</th>'),ds=n('<td class="center svelte-1lf3qka"><input type="checkbox" class="svelte-1lf3qka"/></td>'),us=n('<span class="grade-error svelte-1lf3qka">Invalid</span>'),ps=n("<option> </option>"),fs=n('<button type="button" class="remove-btn svelte-1lf3qka">‚úï</button>'),_s=n('<tr><!><td class="svelte-1lf3qka"><input type="text" placeholder="Route name..." class="svelte-1lf3qka"/></td><td class="svelte-1lf3qka"><input type="text" placeholder="V3"/> <!></td><td class="svelte-1lf3qka"><select class="svelte-1lf3qka"></select></td><td class="svelte-1lf3qka"><input type="number" min="1" class="svelte-1lf3qka"/></td><td><textarea placeholder="Notes..." class="svelte-1lf3qka"></textarea></td><td class="center svelte-1lf3qka"><!></td></tr>'),ms=n("<div> </div>"),gs=n('<div class="form-content svelte-1lf3qka"><h3 class="svelte-1lf3qka">üßó Indoor Climb</h3> <div class="form-row svelte-1lf3qka"><div class="form-group svelte-1lf3qka"><label for="date" class="svelte-1lf3qka">Date</label> <input type="date" id="date" class="svelte-1lf3qka"/></div> <div class="form-group svelte-1lf3qka"><label for="location" class="svelte-1lf3qka">Location</label> <!></div></div> <div class="form-group svelte-1lf3qka"><label for="climbing-type" class="svelte-1lf3qka">Climbing Type</label> <select id="climbing-type" class="svelte-1lf3qka"><option disabled>Select type...</option><!></select></div> <div class="load-section svelte-1lf3qka"><h4 class="svelte-1lf3qka">Load Metrics</h4> <div class="load-metrics svelte-1lf3qka"><div class="load-item svelte-1lf3qka"><label for="finger-load" class="svelte-1lf3qka">Finger</label> <input type="number" id="finger-load" min="1" max="5" class="svelte-1lf3qka"/> <span class="load-scale svelte-1lf3qka">/ 5</span></div> <div class="load-item svelte-1lf3qka"><label for="shoulder-load" class="svelte-1lf3qka">Shoulder</label> <input type="number" id="shoulder-load" min="1" max="5" class="svelte-1lf3qka"/> <span class="load-scale svelte-1lf3qka">/ 5</span></div> <div class="load-item svelte-1lf3qka"><label for="forearm-load" class="svelte-1lf3qka">Forearm</label> <input type="number" id="forearm-load" min="1" max="5" class="svelte-1lf3qka"/> <span class="load-scale svelte-1lf3qka">/ 5</span></div></div> <h4 class="mt-4 svelte-1lf3qka">Grip Metrics</h4> <div class="load-metrics svelte-1lf3qka"><div class="load-item svelte-1lf3qka"><label for="open-grip" class="svelte-1lf3qka">Open</label> <input type="number" id="open-grip" min="1" max="5" class="svelte-1lf3qka"/> <span class="load-scale svelte-1lf3qka">/ 5</span></div> <div class="load-item svelte-1lf3qka"><label for="crimp-grip" class="svelte-1lf3qka">Crimp</label> <input type="number" id="crimp-grip" min="1" max="5" class="svelte-1lf3qka"/> <span class="load-scale svelte-1lf3qka">/ 5</span></div> <div class="load-item svelte-1lf3qka"><label for="pinch-grip" class="svelte-1lf3qka">Pinch</label> <input type="number" id="pinch-grip" min="1" max="5" class="svelte-1lf3qka"/> <span class="load-scale svelte-1lf3qka">/ 5</span></div> <div class="load-item svelte-1lf3qka"><label for="sloper-grip" class="svelte-1lf3qka">Sloper</label> <input type="number" id="sloper-grip" min="1" max="5" class="svelte-1lf3qka"/> <span class="load-scale svelte-1lf3qka">/ 5</span></div> <div class="load-item svelte-1lf3qka"><label for="jug-grip" class="svelte-1lf3qka">Jug</label> <input type="number" id="jug-grip" min="1" max="5" class="svelte-1lf3qka"/> <span class="load-scale svelte-1lf3qka">/ 5</span></div></div></div> <div class="training-section svelte-1lf3qka"><h4 class="svelte-1lf3qka">Training Details</h4> <div class="training-grid svelte-1lf3qka"><div class="training-item svelte-1lf3qka"><label for="training-type" class="svelte-1lf3qka">Training Type</label> <!></div> <div class="training-item svelte-1lf3qka"><label for="difficulty" class="svelte-1lf3qka">Difficulty</label> <select id="difficulty" class="svelte-1lf3qka"></select></div> <div class="training-item svelte-1lf3qka"><label for="category" class="svelte-1lf3qka">Category</label> <!></div> <div class="training-item svelte-1lf3qka"><label for="energy-system" class="svelte-1lf3qka">Energy System</label> <!></div> <div class="training-item svelte-1lf3qka"><label for="technique-focus" class="svelte-1lf3qka">Technique Focus</label> <!></div> <div class="training-item svelte-1lf3qka"><label for="wall-angle" class="svelte-1lf3qka">Wall</label> <!></div></div></div> <div class="climbs-section svelte-1lf3qka"><h4 class="svelte-1lf3qka">Climbs</h4> <div class="table-container svelte-1lf3qka"><table class="climbs-table svelte-1lf3qka"><thead><tr><!><th class="svelte-1lf3qka">Name</th><th class="svelte-1lf3qka">Grade</th><th class="svelte-1lf3qka">Attempt</th><th class="svelte-1lf3qka">#</th><th class="svelte-1lf3qka">Notes</th><th class="svelte-1lf3qka"></th></tr></thead><tbody></tbody></table></div> <button type="button" class="add-btn svelte-1lf3qka">+ Add Climb</button></div> <div class="submit-section svelte-1lf3qka"><!> <button type="button" class="submit-btn svelte-1lf3qka"><!></button></div></div>');function bs(ge,z){vt(z,!0);const v=["Rockstar Unit 3","Rockstar Unit 5","Rockstar Techno","Flashpoint Bristol","Redpoint Bristol","TCH Bristol","Other"],D=["Bouldering","Sport","Mixed"],w=["Onsight","Flash","Redpoint","Dogged","DNF"],u=["None","Projecting","Onsighting","Campusing","Repeaters"],c=["None","Easy","Medium","Hard","Max","Limit+"],$=["None","Strength","Strength-endurance","Power Endurance","Coordination","Slab Technique","Overhang technique","Warm-up","Power"],J=["None","Aerobic capacity","Aerobic lactic power","Anaerobic alactic capacity","Anaerobic alactic power","Anaerobic power","Anaerobic lactic capacity"],ie=["None","Trusting feet","Double-clutch","Standing on volumes","Deadpointing","Flagging","Swapping feet","Edging","Smearing","Matching","Backstepping","Drop Knee","Stemming","Bridging","Laybacking","Mantling","Kneebar","Dyno","Pogo","Coordination Moves","Gastoning","Underclinging","Compressing","Heel Hook","Toe Hook","Bicycle"],G=["None","Overhang","Slab","Roof","Moon Board","Kilter Board","Beast","Circuit Board"],T=["V0-","4-","V0","4","V0+","4+","V1","5","V2","5+","V3","6A","V4","6B","V5","6C","V6","7A","V7","7A+","V8","7B","7B+","V9","7C","V10","7C+","V11","8A","V12","8A+","V13","8B","V14","8B+","V15","8C","V16","8C+","V17","9A"].map(o=>o.toLowerCase());let q=p(null),F=p(De(new Date().toISOString().split("T")[0])),y=p(""),m=p(""),C=p(De(["None"])),ce=p("None"),ne=p(De(["None"])),x=p(De(["None"])),B=p(De(["None"])),K=p(De(["None"])),ee=p(3),U=p(3),g=p(3),se=p(3),I=p(3),k=p(3),S=p(3),N=p(3),j=p(De([{isSport:!1,name:"",grade:"",attemptType:"Flash",attemptsNum:1,notes:""}])),Y=p(!1);function re(){e(y)==="Other"&&(a(Y,!0),a(y,""))}function oe(){a(Y,!1),a(y,"")}function Z(){a(j,[...e(j),{isSport:!1,name:"",grade:"",attemptType:"Flash",attemptsNum:1,notes:""}],!0)}function qe(o){a(j,e(j).filter((b,ae)=>ae!==o),!0)}function Ee(o,b){e(j)[o].attemptType=b,(b==="Flash"||b==="Onsight")&&(e(j)[o].attemptsNum=1)}function Be(o){a(q,o,!0)}function Ge(){a(q,null)}let f=Dt(()=>e(m)==="Mixed");function W(o){return e(m)==="Sport"?!0:e(m)==="Bouldering"?!1:o.isSport}function te(o){return o.trim()?T.includes(o.trim().toLowerCase()):!0}let M=p("idle"),H=p("");function ue(){return e(y)?e(m)?e(j).filter(b=>b.grade.trim()&&!te(b.grade)).length>0?"Please fix invalid grades":null:"Please select a climbing type":"Please select a location"}async function be(){const o=ue();if(o){a(M,"error"),a(H,o,!0);return}a(M,"saving");try{const b=e(j).map(he=>({...he,isSport:W(he)})),ae={date:e(F),location:e(y),customLocation:e(Y)?e(y):void 0,climbingType:e(m),trainingTypes:e(C),difficulty:e(ce),categories:e(ne),energySystems:e(x),techniqueFocuses:e(B),wallAngles:e(K),fingerLoad:e(ee),shoulderLoad:e(U),forearmLoad:e(g),openGrip:e(se),crimpGrip:e(I),pinchGrip:e(k),sloperGrip:e(S),jugGrip:e(N),climbs:b},Oe=Ba(ae);if(na()){const he=await Ua(ae);he.ok?(ga(Oe.id,he.id),ba(he.id),a(M,"success"),a(H,"Session saved and synced!")):(ha(Oe.id),a(M,"success"),a(H,"Saved locally. Sync failed: "+(he.error||"Unknown error")))}else a(M,"success"),a(H,"Saved locally. Will sync when online.");window.dispatchEvent(new CustomEvent("session-saved")),setTimeout(()=>{xe()},2e3)}catch(b){a(M,"error"),a(H,"Failed to save session"),console.error("Save error:",b)}}function xe(){a(F,new Date().toISOString().split("T")[0],!0),a(y,""),a(Y,!1),a(m,""),a(C,["None"],!0),a(ce,"None"),a(ne,["None"],!0),a(x,["None"],!0),a(B,["None"],!0),a(K,["None"],!0),a(ee,3),a(U,3),a(g,3),a(se,3),a(I,3),a(k,3),a(S,3),a(N,3),a(j,[{isSport:!1,name:"",grade:"",attemptType:"Flash",attemptsNum:1,notes:""}],!0),a(M,"idle"),a(H,"")}var _e=gs(),Te=s(l(_e),2),ve=l(Te),we=s(l(ve),2);V(we),t(ve);var Ce=s(ve,2),Ie=s(l(Ce),2);{var Me=o=>{var b=is(),ae=l(b);V(ae);var Oe=s(ae,2);Oe.__click=oe,t(b),P(ae,()=>e(y),he=>a(y,he)),i(o,b)},_=o=>{var b=os();b.__change=re;var ae=l(b);ae.value=ae.__value="";var Oe=s(ae);fe(Oe,17,()=>v,me,(he,Je)=>{var r=rs(),d=l(r,!0);t(r);var R={};E(()=>{Q(d,e(Je)),R!==(R=e(Je))&&(r.value=(r.__value=e(Je))??"")}),i(he,r)}),t(b),Ye(b,()=>e(y),he=>a(y,he)),i(o,b)};L(Ie,o=>{e(Y)?o(Me):o(_,!1)})}t(Ce),t(Te);var O=s(Te,2),A=s(l(O),2),le=l(A);le.value=le.__value="";var Ne=s(le);fe(Ne,17,()=>D,me,(o,b)=>{var ae=ns(),Oe=l(ae,!0);t(ae);var he={};E(()=>{Q(Oe,e(b)),he!==(he=e(b))&&(ae.value=(ae.__value=e(b))??"")}),i(o,ae)}),t(A),t(O);var Re=s(O,2),lt=s(l(Re),2),yt=l(lt),Nt=s(l(yt),2);V(Nt),ze(2),t(yt);var pt=s(yt,2),ft=s(l(pt),2);V(ft),ze(2),t(pt);var kt=s(pt,2),It=s(l(kt),2);V(It),ze(2),t(kt),t(lt);var Ue=s(lt,4),Ve=l(Ue),St=s(l(Ve),2);V(St),ze(2),t(Ve);var _t=s(Ve,2),mt=s(l(_t),2);V(mt),ze(2),t(_t);var xt=s(_t,2),wt=s(l(xt),2);V(wt),ze(2),t(xt);var He=s(xt,2),Tt=s(l(He),2);V(Tt),ze(2),t(He);var gt=s(He,2),At=s(l(gt),2);V(At),ze(2),t(gt),t(Ue),t(Re);var qt=s(Re,2),Vt=s(l(qt),2),dt=l(Vt),Lt=s(l(dt),2);Ct(Lt,{get options(){return u},get selected(){return e(C)},placeholder:"Select types...",onChange:o=>a(C,o,!0)}),t(dt);var bt=s(dt,2),Ft=s(l(bt),2);fe(Ft,21,()=>c,me,(o,b)=>{var ae=vs(),Oe=l(ae,!0);t(ae);var he={};E(()=>{Q(Oe,e(b)),he!==(he=e(b))&&(ae.value=(ae.__value=e(b))??"")}),i(o,ae)}),t(Ft),t(bt);var Fe=s(bt,2),Ke=s(l(Fe),2);Ct(Ke,{get options(){return $},get selected(){return e(ne)},placeholder:"Select categories...",onChange:o=>a(ne,o,!0)}),t(Fe);var Pe=s(Fe,2),Rt=s(l(Pe),2);Ct(Rt,{get options(){return J},get selected(){return e(x)},placeholder:"Select systems...",onChange:o=>a(x,o,!0)}),t(Pe);var ht=s(Pe,2),ya=s(l(ht),2);Ct(ya,{get options(){return ie},get selected(){return e(B)},placeholder:"Select focus...",onChange:o=>a(B,o,!0)}),t(ht);var Bt=s(ht,2),Xt=s(l(Bt),2);Ct(Xt,{get options(){return G},get selected(){return e(K)},placeholder:"Select angles...",onChange:o=>a(K,o,!0)}),t(Bt),t(Vt),t(qt);var Et=s(qt,2),Yt=s(l(Et),2),Mt=l(Yt),Zt=l(Mt),ea=l(Zt),ka=l(ea);{var ta=o=>{var b=cs();i(o,b)};L(ka,o=>{e(f)&&o(ta)})}ze(6),t(ea),t(Zt);var Pt=s(Zt);fe(Pt,21,()=>e(j),me,(o,b,ae)=>{var Oe=_s(),he=l(Oe);{var Je=de=>{var $e=ds(),et=l($e);V(et),t($e),Va(et,()=>e(b).isSport,Kt=>e(b).isSport=Kt),i(de,$e)};L(he,de=>{e(f)&&de(Je)})}var r=s(he),d=l(r);V(d),t(r);var R=s(r),ye=l(R);V(ye);let pe;var it=s(ye,2);{var ut=de=>{var $e=us();i(de,$e)};L(it,de=>{te(e(b).grade)||de(ut)})}t(R);var Qe=s(R),je=l(Qe);je.__change=de=>Ee(ae,de.target.value),fe(je,21,()=>w,me,(de,$e)=>{var et=ps(),Kt=l(et,!0);t(et);var ua={};E(()=>{Q(Kt,e($e)),ua!==(ua=e($e))&&(et.value=(et.__value=e($e))??"")}),i(de,et)}),t(je);var Ze;Ca(je),t(Qe);var Ot=s(Qe),jt=l(Ot);V(jt),t(Ot);var Ut=s(Ot);let Ht;var rt=l(Ut);Fa(rt),t(Ut);var sa=s(Ut),la=l(sa);{var ia=de=>{var $e=fs();$e.__click=()=>qe(ae),i(de,$e)};L(la,de=>{e(j).length>1&&de(ia)})}t(sa),t(Oe),E(de=>{pe=We(ye,1,"grade-input svelte-1lf3qka",null,pe,de),Ze!==(Ze=e(b).attemptType)&&(je.value=(je.__value=e(b).attemptType)??"",Na(je,e(b).attemptType)),jt.disabled=e(b).attemptType==="Flash",Ht=We(Ut,1,"notes-cell svelte-1lf3qka",null,Ht,{expanded:e(q)===ae})},[()=>({invalid:!te(e(b).grade)})]),P(d,()=>e(b).name,de=>e(b).name=de),P(ye,()=>e(b).grade,de=>e(b).grade=de),P(jt,()=>e(b).attemptsNum,de=>e(b).attemptsNum=de),X("focus",rt,()=>Be(ae)),X("blur",rt,Ge),P(rt,()=>e(b).notes,de=>e(b).notes=de),i(o,Oe)}),t(Pt),t(Mt),t(Yt);var va=s(Yt,2);va.__click=Z,t(Et);var $t=s(Et,2),aa=l($t);{var Sa=o=>{var b=ms();let ae;var Oe=l(b,!0);t(b),E(()=>{ae=We(b,1,"save-message svelte-1lf3qka",null,ae,{success:e(M)==="success",error:e(M)==="error"}),Q(Oe,e(H))}),i(o,b)};L(aa,o=>{e(H)&&o(Sa)})}var Wt=s(aa,2);Wt.__click=be;var ca=l(Wt);{var xa=o=>{var b=Ae("Saving...");i(o,b)},da=o=>{var b=nt(),ae=at(b);{var Oe=Je=>{var r=Ae("‚úì Saved!");i(Je,r)},he=Je=>{var r=Ae("Save Session");i(Je,r)};L(ae,Je=>{e(M)==="success"?Je(Oe):Je(he,!1)},!0)}i(o,b)};L(ca,o=>{e(M)==="saving"?o(xa):o(da,!1)})}t(Wt),t($t),t(_e),E(()=>Wt.disabled=e(M)==="saving"),P(we,()=>e(F),o=>a(F,o)),Ye(A,()=>e(m),o=>a(m,o)),P(Nt,()=>e(ee),o=>a(ee,o)),P(ft,()=>e(U),o=>a(U,o)),P(It,()=>e(g),o=>a(g,o)),P(St,()=>e(se),o=>a(se,o)),P(mt,()=>e(I),o=>a(I,o)),P(wt,()=>e(k),o=>a(k,o)),P(Tt,()=>e(S),o=>a(S,o)),P(At,()=>e(N),o=>a(N,o)),Ye(Ft,()=>e(ce),o=>a(ce,o)),i(ge,_e),ct()}Jt(["click","change"]);var hs=n("<option> </option>"),ys=n('<div class="input-with-action svelte-15o2ys1"><input type="text" id="crag-manual" placeholder="Enter custom crag name..." class="flat-left svelte-15o2ys1"/> <button type="button" class="action-btn flat-right svelte-15o2ys1" title="Back to list">‚úï</button></div>'),ks=n("<option> </option>"),Ss=n("<option>Other (Manual Entry)</option>"),xs=n('<select id="crag" class="svelte-15o2ys1"><option disabled> </option><!><!></select>'),ws=n("<option> </option>"),qs=n("<option> </option>"),Cs=n('<th class="svelte-15o2ys1">Sport?</th>'),Ns=n('<td class="center svelte-15o2ys1"><input type="checkbox" class="svelte-15o2ys1"/></td>'),Ts=n('<span class="grade-error svelte-15o2ys1">Invalid</span>'),Fs=n("<option> </option>"),Os=n('<button type="button" class="remove-btn svelte-15o2ys1">‚úï</button>'),js=n('<tr><!><td class="svelte-15o2ys1"><input type="text" placeholder="Route name..." class="svelte-15o2ys1"/></td><td class="svelte-15o2ys1"><input type="text" placeholder="V3"/> <!></td><td class="svelte-15o2ys1"><select class="svelte-15o2ys1"></select></td><td class="svelte-15o2ys1"><input type="number" min="1" class="svelte-15o2ys1"/></td><td><textarea placeholder="Notes..." class="svelte-15o2ys1"></textarea></td><td class="center svelte-15o2ys1"><!></td></tr>'),zs=n("<div> </div>"),As=n('<div class="form-content svelte-15o2ys1"><h3 class="svelte-15o2ys1">‚õ∞Ô∏è Outdoor Climb</h3> <div class="form-row svelte-15o2ys1"><div class="form-group svelte-15o2ys1"><label for="date" class="svelte-15o2ys1">Date</label> <input type="date" id="date" class="svelte-15o2ys1"/></div> <div class="form-group svelte-15o2ys1"><label for="area" class="svelte-15o2ys1">Area</label> <select id="area" class="svelte-15o2ys1"><option disabled>Select area...</option><!></select></div></div> <div class="form-row svelte-15o2ys1"><div class="form-group svelte-15o2ys1"><label for="crag" class="svelte-15o2ys1">Crag</label> <!></div> <div class="form-group svelte-15o2ys1"><label for="sector" class="svelte-15o2ys1">Wall / Sector</label> <input type="text" id="sector" placeholder="Enter sector or wall name..." class="svelte-15o2ys1"/></div></div> <div class="form-group svelte-15o2ys1"><label for="climbing-type" class="svelte-15o2ys1">Climbing Type</label> <select id="climbing-type" class="svelte-15o2ys1"><option disabled>Select type...</option><!></select></div> <div class="load-section svelte-15o2ys1"><h4 class="svelte-15o2ys1">Load Metrics</h4> <div class="load-metrics svelte-15o2ys1"><div class="load-item svelte-15o2ys1"><label for="finger-load" class="svelte-15o2ys1">Finger</label> <input type="number" id="finger-load" min="1" max="5" class="svelte-15o2ys1"/> <span class="load-scale svelte-15o2ys1">/ 5</span></div> <div class="load-item svelte-15o2ys1"><label for="shoulder-load" class="svelte-15o2ys1">Shoulder</label> <input type="number" id="shoulder-load" min="1" max="5" class="svelte-15o2ys1"/> <span class="load-scale svelte-15o2ys1">/ 5</span></div> <div class="load-item svelte-15o2ys1"><label for="forearm-load" class="svelte-15o2ys1">Forearm</label> <input type="number" id="forearm-load" min="1" max="5" class="svelte-15o2ys1"/> <span class="load-scale svelte-15o2ys1">/ 5</span></div></div> <h4 class="mt-4 svelte-15o2ys1">Grip Metrics</h4> <div class="load-metrics svelte-15o2ys1"><div class="load-item svelte-15o2ys1"><label for="open-grip" class="svelte-15o2ys1">Open</label> <input type="number" id="open-grip" min="1" max="5" class="svelte-15o2ys1"/> <span class="load-scale svelte-15o2ys1">/ 5</span></div> <div class="load-item svelte-15o2ys1"><label for="crimp-grip" class="svelte-15o2ys1">Crimp</label> <input type="number" id="crimp-grip" min="1" max="5" class="svelte-15o2ys1"/> <span class="load-scale svelte-15o2ys1">/ 5</span></div> <div class="load-item svelte-15o2ys1"><label for="pinch-grip" class="svelte-15o2ys1">Pinch</label> <input type="number" id="pinch-grip" min="1" max="5" class="svelte-15o2ys1"/> <span class="load-scale svelte-15o2ys1">/ 5</span></div> <div class="load-item svelte-15o2ys1"><label for="sloper-grip" class="svelte-15o2ys1">Sloper</label> <input type="number" id="sloper-grip" min="1" max="5" class="svelte-15o2ys1"/> <span class="load-scale svelte-15o2ys1">/ 5</span></div> <div class="load-item svelte-15o2ys1"><label for="jug-grip" class="svelte-15o2ys1">Jug</label> <input type="number" id="jug-grip" min="1" max="5" class="svelte-15o2ys1"/> <span class="load-scale svelte-15o2ys1">/ 5</span></div></div></div> <div class="training-section svelte-15o2ys1"><h4 class="svelte-15o2ys1">Training Details</h4> <div class="training-grid svelte-15o2ys1"><div class="training-item svelte-15o2ys1"><label for="training-type" class="svelte-15o2ys1">Training Type</label> <!></div> <div class="training-item svelte-15o2ys1"><label for="difficulty" class="svelte-15o2ys1">Difficulty</label> <select id="difficulty" class="svelte-15o2ys1"></select></div> <div class="training-item svelte-15o2ys1"><label for="category" class="svelte-15o2ys1">Category</label> <!></div> <div class="training-item svelte-15o2ys1"><label for="energy-system" class="svelte-15o2ys1">Energy System</label> <!></div> <div class="training-item svelte-15o2ys1"><label for="technique-focus" class="svelte-15o2ys1">Technique Focus</label> <!></div></div></div> <div class="climbs-section svelte-15o2ys1"><h4 class="svelte-15o2ys1">Climbs</h4> <div class="table-container svelte-15o2ys1"><table class="climbs-table svelte-15o2ys1"><thead><tr><!><th class="svelte-15o2ys1">Name</th><th class="svelte-15o2ys1">Grade</th><th class="svelte-15o2ys1">Attempt</th><th class="svelte-15o2ys1">#</th><th class="svelte-15o2ys1">Notes</th><th class="svelte-15o2ys1"></th></tr></thead><tbody></tbody></table></div> <button type="button" class="add-btn svelte-15o2ys1">+ Add Climb</button></div> <div class="submit-section svelte-15o2ys1"><!> <button type="button" class="submit-btn svelte-15o2ys1"><!></button></div></div>');function Vs(ge,z){vt(z,!0);const v=Ha(),D=["Boulder","Sport","Trad"],w=["Onsight","Flash","Redpoint","Dogged","DNF"],u=["None","Projecting","Onsighting","Campusing","Repeaters"],c=["None","Easy","Medium","Hard","Max","Limit+"],$=["None","Technique","Strength","Strength-endurance","Warm-up","Power"],J=["None","Aerobic capacity","Aerobic lactic power","Anaerobic alactic capacity","Anaerobic alactic power","Anaerobic power","Anaerobic lactic capacity"],ie=["None","Double-clutch","Standing on volumes","Trusting feet"],h=["V0-","4-","V0","4","V0+","4+","V1","5","V2","5+","V3","6A","V4","6B","V5","6C","V6","7A","V7","7A+","V8","7B","7B+","V9","7C","V10","7C+","V11","8A","V12","8A+","V13","8B","V14","8B+","V15","8C","V16","8C+","V17","9A"].map(r=>r.toLowerCase());let T=p(null),q=p(De(new Date().toISOString().split("T")[0])),F=p(""),y=p(""),m=p(""),C=p(""),ce=p(De(["None"])),ne=p("None"),x=p(De(["None"])),B=p(De(["None"])),K=p(De(["None"])),ee=p(3),U=p(3),g=p(3),se=p(3),I=p(3),k=p(3),S=p(3),N=p(3),j=p(De([{isSport:!1,name:"",grade:"",attemptType:"Flash",attemptsNum:1,notes:""}])),Y=Dt(()=>e(F)?Ja(e(F)):[]),re=p(!1);Oa(()=>{e(F)&&(a(y,""),a(re,!1))});function oe(){e(y)==="Other"&&(a(re,!0),a(y,""))}function Z(){a(re,!1),a(y,"")}function qe(){a(j,[...e(j),{isSport:!1,name:"",grade:"",attemptType:"Flash",attemptsNum:1,notes:""}],!0)}function Ee(r){a(j,e(j).filter((d,R)=>R!==r),!0)}function Be(r,d){e(j)[r].attemptType=d,(d==="Flash"||d==="Onsight")&&(e(j)[r].attemptsNum=1)}function Ge(r){a(T,r,!0)}function f(){a(T,null)}let W=Dt(()=>e(C)==="Trad");function te(r){return e(C)==="Sport"?!0:e(C)==="Boulder"?!1:r.isSport}function M(r){return r.trim()?h.includes(r.trim().toLowerCase()):!0}let H=p("idle"),ue=p("");function be(){return e(F)?e(y)?e(C)?e(j).filter(d=>d.grade.trim()&&!M(d.grade)).length>0?"Please fix invalid grades":null:"Please select a climbing type":"Please select a crag":"Please select an area"}async function xe(){const r=be();if(r){a(H,"error"),a(ue,r,!0);return}a(H,"saving");try{const d=e(j).map(pe=>({...pe,isSport:te(pe)})),R={date:e(q),area:e(F),crag:e(y),sector:e(m)||void 0,climbingType:e(C),trainingTypes:e(ce),difficulty:e(ne),categories:e(x),energySystems:e(B),techniqueFocuses:e(K),fingerLoad:e(ee),shoulderLoad:e(U),forearmLoad:e(g),openGrip:e(se),crimpGrip:e(I),pinchGrip:e(k),sloperGrip:e(S),jugGrip:e(N),climbs:d},ye=Ma(R);if(na()){const pe=await Ka(R);pe.ok?(ga(ye.id,pe.id),ba(pe.id),a(H,"success"),a(ue,"Session saved and synced!")):(ha(ye.id),a(H,"success"),a(ue,"Saved locally. Sync failed: "+(pe.error||"Unknown error")))}else a(H,"success"),a(ue,"Saved locally. Will sync when online.");window.dispatchEvent(new CustomEvent("session-saved")),setTimeout(()=>{_e()},2e3)}catch(d){a(H,"error"),a(ue,"Failed to save session"),console.error("Save error:",d)}}function _e(){a(q,new Date().toISOString().split("T")[0],!0),a(F,""),a(y,""),a(m,""),a(C,""),a(ce,["None"],!0),a(ne,"None"),a(x,["None"],!0),a(B,["None"],!0),a(K,["None"],!0),a(ee,3),a(U,3),a(g,3),a(se,3),a(I,3),a(k,3),a(S,3),a(N,3),a(j,[{isSport:!1,name:"",grade:"",attemptType:"Flash",attemptsNum:1,notes:""}],!0),a(H,"idle"),a(ue,"")}var Te=As(),ve=s(l(Te),2),we=l(ve),Ce=s(l(we),2);V(Ce),t(we);var Ie=s(we,2),Me=s(l(Ie),2),_=l(Me);_.value=_.__value="";var O=s(_);fe(O,17,()=>v,me,(r,d)=>{var R=hs(),ye=l(R,!0);t(R);var pe={};E(()=>{Q(ye,e(d)),pe!==(pe=e(d))&&(R.value=(R.__value=e(d))??"")}),i(r,R)}),t(Me),t(Ie),t(ve);var A=s(ve,2),le=l(A),Ne=s(l(le),2);{var Re=r=>{var d=ys(),R=l(d);V(R);var ye=s(R,2);ye.__click=Z,t(d),P(R,()=>e(y),pe=>a(y,pe)),i(r,d)},lt=r=>{var d=xs();d.__change=oe;var R=l(d),ye=l(R,!0);t(R),R.value=R.__value="";var pe=s(R);fe(pe,17,()=>e(Y),me,(Qe,je)=>{var Ze=ks(),Ot=l(Ze,!0);t(Ze);var jt={};E(()=>{Q(Ot,e(je)),jt!==(jt=e(je))&&(Ze.value=(Ze.__value=e(je))??"")}),i(Qe,Ze)});var it=s(pe);{var ut=Qe=>{var je=Ss();je.value=je.__value="Other",i(Qe,je)};L(it,Qe=>{e(F)&&Qe(ut)})}t(d),E(()=>{d.disabled=!e(F),Q(ye,e(F)?"Select crag...":"Select area first...")}),Ye(d,()=>e(y),Qe=>a(y,Qe)),i(r,d)};L(Ne,r=>{e(re)?r(Re):r(lt,!1)})}t(le);var yt=s(le,2),Nt=s(l(yt),2);V(Nt),t(yt),t(A);var pt=s(A,2),ft=s(l(pt),2),kt=l(ft);kt.value=kt.__value="";var It=s(kt);fe(It,17,()=>D,me,(r,d)=>{var R=ws(),ye=l(R,!0);t(R);var pe={};E(()=>{Q(ye,e(d)),pe!==(pe=e(d))&&(R.value=(R.__value=e(d))??"")}),i(r,R)}),t(ft),t(pt);var Ue=s(pt,2),Ve=s(l(Ue),2),St=l(Ve),_t=s(l(St),2);V(_t),ze(2),t(St);var mt=s(St,2),xt=s(l(mt),2);V(xt),ze(2),t(mt);var wt=s(mt,2),He=s(l(wt),2);V(He),ze(2),t(wt),t(Ve);var Tt=s(Ve,4),gt=l(Tt),At=s(l(gt),2);V(At),ze(2),t(gt);var qt=s(gt,2),Vt=s(l(qt),2);V(Vt),ze(2),t(qt);var dt=s(qt,2),Lt=s(l(dt),2);V(Lt),ze(2),t(dt);var bt=s(dt,2),Ft=s(l(bt),2);V(Ft),ze(2),t(bt);var Fe=s(bt,2),Ke=s(l(Fe),2);V(Ke),ze(2),t(Fe),t(Tt),t(Ue);var Pe=s(Ue,2),Rt=s(l(Pe),2),ht=l(Rt),ya=s(l(ht),2);Ct(ya,{get options(){return u},get selected(){return e(ce)},placeholder:"Select types...",onChange:r=>a(ce,r,!0)}),t(ht);var Bt=s(ht,2),Xt=s(l(Bt),2);fe(Xt,21,()=>c,me,(r,d)=>{var R=qs(),ye=l(R,!0);t(R);var pe={};E(()=>{Q(ye,e(d)),pe!==(pe=e(d))&&(R.value=(R.__value=e(d))??"")}),i(r,R)}),t(Xt),t(Bt);var Et=s(Bt,2),Yt=s(l(Et),2);Ct(Yt,{get options(){return $},get selected(){return e(x)},placeholder:"Select categories...",onChange:r=>a(x,r,!0)}),t(Et);var Mt=s(Et,2),Zt=s(l(Mt),2);Ct(Zt,{get options(){return J},get selected(){return e(B)},placeholder:"Select systems...",onChange:r=>a(B,r,!0)}),t(Mt);var ea=s(Mt,2),ka=s(l(ea),2);Ct(ka,{get options(){return ie},get selected(){return e(K)},placeholder:"Select focus...",onChange:r=>a(K,r,!0)}),t(ea),t(Rt),t(Pe);var ta=s(Pe,2),Pt=s(l(ta),2),va=l(Pt),$t=l(va),aa=l($t),Sa=l(aa);{var Wt=r=>{var d=Cs();i(r,d)};L(Sa,r=>{e(W)&&r(Wt)})}ze(6),t(aa),t($t);var ca=s($t);fe(ca,21,()=>e(j),me,(r,d,R)=>{var ye=js(),pe=l(ye);{var it=ke=>{var ot=Ns(),zt=l(ot);V(zt),t(ot),Va(zt,()=>e(d).isSport,wa=>e(d).isSport=wa),i(ke,ot)};L(pe,ke=>{e(W)&&ke(it)})}var ut=s(pe),Qe=l(ut);V(Qe),t(ut);var je=s(ut),Ze=l(je);V(Ze);let Ot;var jt=s(Ze,2);{var Ut=ke=>{var ot=Ts();i(ke,ot)};L(jt,ke=>{M(e(d).grade)||ke(Ut)})}t(je);var Ht=s(je),rt=l(Ht);rt.__change=ke=>Be(R,ke.target.value),fe(rt,21,()=>w,me,(ke,ot)=>{var zt=Fs(),wa=l(zt,!0);t(zt);var Ta={};E(()=>{Q(wa,e(ot)),Ta!==(Ta=e(ot))&&(zt.value=(zt.__value=e(ot))??"")}),i(ke,zt)}),t(rt);var sa;Ca(rt),t(Ht);var la=s(Ht),ia=l(la);V(ia),t(la);var de=s(la);let $e;var et=l(de);Fa(et),t(de);var Kt=s(de),ua=l(Kt);{var Ea=ke=>{var ot=Os();ot.__click=()=>Ee(R),i(ke,ot)};L(ua,ke=>{e(j).length>1&&ke(Ea)})}t(Kt),t(ye),E(ke=>{Ot=We(Ze,1,"grade-input svelte-15o2ys1",null,Ot,ke),sa!==(sa=e(d).attemptType)&&(rt.value=(rt.__value=e(d).attemptType)??"",Na(rt,e(d).attemptType)),ia.disabled=e(d).attemptType==="Flash",$e=We(de,1,"notes-cell svelte-15o2ys1",null,$e,{expanded:e(T)===R})},[()=>({invalid:!M(e(d).grade)})]),P(Qe,()=>e(d).name,ke=>e(d).name=ke),P(Ze,()=>e(d).grade,ke=>e(d).grade=ke),P(ia,()=>e(d).attemptsNum,ke=>e(d).attemptsNum=ke),X("focus",et,()=>Ge(R)),X("blur",et,f),P(et,()=>e(d).notes,ke=>e(d).notes=ke),i(r,ye)}),t(ca),t(va),t(Pt);var xa=s(Pt,2);xa.__click=qe,t(ta);var da=s(ta,2),o=l(da);{var b=r=>{var d=zs();let R;var ye=l(d,!0);t(d),E(()=>{R=We(d,1,"save-message svelte-15o2ys1",null,R,{success:e(H)==="success",error:e(H)==="error"}),Q(ye,e(ue))}),i(r,d)};L(o,r=>{e(ue)&&r(b)})}var ae=s(o,2);ae.__click=xe;var Oe=l(ae);{var he=r=>{var d=Ae("Saving...");i(r,d)},Je=r=>{var d=nt(),R=at(d);{var ye=it=>{var ut=Ae("‚úì Saved!");i(it,ut)},pe=it=>{var ut=Ae("Save Session");i(it,ut)};L(R,it=>{e(H)==="success"?it(ye):it(pe,!1)},!0)}i(r,d)};L(Oe,r=>{e(H)==="saving"?r(he):r(Je,!1)})}t(ae),t(da),t(Te),E(()=>ae.disabled=e(H)==="saving"),P(Ce,()=>e(q),r=>a(q,r)),Ye(Me,()=>e(F),r=>a(F,r)),P(Nt,()=>e(m),r=>a(m,r)),Ye(ft,()=>e(C),r=>a(C,r)),P(_t,()=>e(ee),r=>a(ee,r)),P(xt,()=>e(U),r=>a(U,r)),P(He,()=>e(g),r=>a(g,r)),P(At,()=>e(se),r=>a(se,r)),P(Vt,()=>e(I),r=>a(I,r)),P(Lt,()=>e(k),r=>a(k,r)),P(Ft,()=>e(S),r=>a(S,r)),P(Ke,()=>e(N),r=>a(N,r)),Ye(Xt,()=>e(ne),r=>a(ne,r)),i(ge,Te),ct()}Jt(["click","change"]);var Ls=n('<div><div class="col set-num svelte-ow8x7m"> </div> <div class="col prev svelte-ow8x7m"><!></div> <div class="col weight svelte-ow8x7m"><input type="number" class="svelte-ow8x7m"/></div> <div class="col reps svelte-ow8x7m"><input type="number" class="svelte-ow8x7m"/></div> <div class="col check svelte-ow8x7m"><button><!></button></div></div>');function Es(ge,z){vt(z,!1);let v=st(z,"setNumber",8),D=st(z,"prevSet",8,null),w=st(z,"set",12);const u=oa();function c(){w(w().completed=!w().completed,!0),u("change",w()),w().completed&&u("complete")}function $(g){u("focus",{field:g,value:w()[g],set:w()})}Qt();var J=Ls();let ie;var G=l(J),h=l(G,!0);t(G);var T=s(G,2),q=l(T);{var F=g=>{var se=Ae();E(()=>Q(se,`${Le(D()),Se(()=>D().weight)??""}kg x ${Le(D()),Se(()=>D().reps)??""}`)),i(g,se)},y=g=>{var se=Ae("-");i(g,se)};L(q,g=>{D()?g(F):g(y,!1)})}t(T);var m=s(T,2),C=l(m);V(C),t(m);var ce=s(m,2),ne=l(ce);V(ne),t(ce);var x=s(ce,2),B=l(x);let K;var ee=l(B);{var U=g=>{var se=Ae("‚úì");i(g,se)};L(ee,g=>{Le(w()),Se(()=>w().completed)&&g(U)})}t(B),t(x),t(J),E((g,se)=>{ie=We(J,1,"set-row svelte-ow8x7m",null,ie,{completed:w().completed}),Q(h,v()),tt(C,"placeholder",g),tt(ne,"placeholder",se),K=We(B,1,"check-btn svelte-ow8x7m",null,K,{checked:w().completed})},[()=>(Le(D()),Se(()=>D()?D().weight.toString():"-")),()=>(Le(D()),Se(()=>D()?D().reps.toString():"-"))]),P(C,()=>w().weight,g=>w(w().weight=g,!0)),X("focus",C,()=>$("weight")),P(ne,()=>w().reps,g=>w(w().reps=g,!0)),X("focus",ne,()=>$("reps")),X("click",B,c),i(ge,J),ct()}var Ds=n('<div class="exercise-card svelte-1ni79z8"><div class="header svelte-1ni79z8"><h4 class="svelte-1ni79z8"> </h4> <div class="actions"><button class="icon-btn svelte-1ni79z8">?</button> <button class="icon-btn svelte-1ni79z8">üóëÔ∏è</button></div></div> <div class="table-header svelte-1ni79z8"><div class="col">Set</div> <div class="col">Previous</div> <div class="col">kg</div> <div class="col">Reps</div> <div class="col">‚úì</div></div> <div class="sets"></div> <button class="add-set-btn svelte-1ni79z8">+ Add Set</button></div>');function Gs(ge,z){vt(z,!1);let v=st(z,"exercise",12);const D=oa();function w(){const F=v().sets[v().sets.length-1],y={weight:F?F.weight:0,reps:F?F.reps:0,isWarmup:!1,isFailure:!1,isDropSet:!1,completed:!1};v(v().sets=[...v().sets,y],!0)}Qt();var u=Ds(),c=l(u),$=l(c),J=l($,!0);t($);var ie=s($,2),G=l(ie),h=s(G,2);t(ie),t(c);var T=s(c,4);fe(T,5,()=>(Le(v()),Se(()=>v().sets)),me,(F,y,m)=>{Es(F,{setNumber:m+1,get set(){return(Le(v()),Se(()=>v().sets))[m]},set set(C){(Le(v()),Se(()=>v().sets))[m]=C,ja(()=>v())},$$events:{complete(C){Gt.call(this,z,C)},focus(C){Gt.call(this,z,C)},change(C){Gt.call(this,z,C)}},$$legacy:!0})}),t(T);var q=s(T,2);t(u),E(()=>Q(J,(Le(v()),Se(()=>v().name)))),X("click",G,()=>D("info",v())),X("click",h,()=>D("delete",v())),X("click",q,w),i(ge,u),ct()}var Is=n('<div class="keypad svelte-1fay4f8"><div class="header svelte-1fay4f8"><span class="label svelte-1fay4f8"> </span> <div class="display svelte-1fay4f8" role="textbox" aria-readonly="true"> </div></div> <div class="quick-adds svelte-1fay4f8"><button class="svelte-1fay4f8">+2.5</button> <button class="svelte-1fay4f8">+5</button> <button class="svelte-1fay4f8">+10</button></div> <div class="grid svelte-1fay4f8"><button class="svelte-1fay4f8">1</button> <button class="svelte-1fay4f8">2</button> <button class="svelte-1fay4f8">3</button> <button class="svelte-1fay4f8">4</button> <button class="svelte-1fay4f8">5</button> <button class="svelte-1fay4f8">6</button> <button class="svelte-1fay4f8">7</button> <button class="svelte-1fay4f8">8</button> <button class="svelte-1fay4f8">9</button> <button class="action svelte-1fay4f8">C</button> <button class="svelte-1fay4f8">0</button> <button class="action svelte-1fay4f8">‚å´</button></div></div>');function Rs(ge,z){vt(z,!1);let v=st(z,"value",8,null),D=st(z,"label",8,"Value");const w=oa();function u(Y){const re=v()?.toString()||"";if(re.length>=5)return;const oe=parseFloat(re+Y.toString());w("change",oe)}function c(){w("change",0)}function $(){const Y=v()?.toString()||"";if(Y.length<=1){w("change",0);return}const re=parseFloat(Y.slice(0,-1));w("change",re)}function J(Y){w("change",(v()||0)+Y)}Qt();var ie=Is(),G=l(ie),h=l(G),T=l(h,!0);t(h);var q=s(h,2),F=l(q,!0);t(q),t(G);var y=s(G,2),m=l(y),C=s(m,2),ce=s(C,2);t(y);var ne=s(y,2),x=l(ne),B=s(x,2),K=s(B,2),ee=s(K,2),U=s(ee,2),g=s(U,2),se=s(g,2),I=s(se,2),k=s(I,2),S=s(k,2),N=s(S,2),j=s(N,2);t(ne),t(ie),E(()=>{Q(T,D()),tt(q,"aria-label",D()),Q(F,v()||0)}),X("click",m,()=>J(2.5)),X("click",C,()=>J(5)),X("click",ce,()=>J(10)),X("click",x,()=>u(1)),X("click",B,()=>u(2)),X("click",K,()=>u(3)),X("click",ee,()=>u(4)),X("click",U,()=>u(5)),X("click",g,()=>u(6)),X("click",se,()=>u(7)),X("click",I,()=>u(8)),X("click",k,()=>u(9)),X("click",S,c),X("click",N,()=>u(0)),X("click",j,$),i(ge,ie),ct()}var Bs=n('<div class="rest-timer svelte-18i4gcv"><div class="timer-display svelte-18i4gcv"><span class="label svelte-18i4gcv">Rest</span> <span class="time svelte-18i4gcv"> </span></div> <div class="controls svelte-18i4gcv"><button class="svelte-18i4gcv">-30</button> <button class="svelte-18i4gcv">+30</button> <button class="skip svelte-18i4gcv">Skip</button></div></div>');function Ms(ge,z){vt(z,!1);const v=Xe(),D=Xe();let w=st(z,"duration",8,90),u=st(z,"onComplete",8,()=>{}),c=Xe(w()),$,J=st(z,"visible",12,!0);function ie(){clearInterval($),a(c,w()),$=setInterval(()=>{Ga(c,-1),e(c)<=0&&(clearInterval($),u()())},1e3)}function G(m){a(c,e(c)+m)}function h(m){e(c)>m&&a(c,e(c)-m)}function T(){J(!1),clearInterval($),u()()}za(()=>{ie()}),Aa(()=>{clearInterval($)}),fa(()=>e(c),()=>{a(v,Math.floor(e(c)/60))}),fa(()=>e(c),()=>{a(D,e(c)%60)}),qa(),Qt();var q=nt(),F=at(q);{var y=m=>{var C=Bs(),ce=l(C),ne=s(l(ce),2),x=l(ne);t(ne),t(ce);var B=s(ce,2),K=l(B),ee=s(K,2),U=s(ee,2);t(B),t(C),E(g=>Q(x,`${e(v)??""}:${g??""}`),[()=>(e(D),Se(()=>e(D).toString().padStart(2,"0")))]),X("click",K,()=>h(30)),X("click",ee,()=>G(30)),X("click",U,T),ra(3,C,()=>_a,()=>({y:50,duration:300})),i(m,C)};L(F,m=>{J()&&m(y)})}i(ge,q),ct()}var Ps=n("<img/>"),$s=n('<div class="animation-frame svelte-zbmy0k"></div>'),Ws=n('<div class="visual-placeholder svelte-zbmy0k"><span>No animation available</span></div>'),Us=n("<li> </li>"),Hs=n('<div class="modal-overlay svelte-zbmy0k" role="button" tabindex="0" aria-label="Close modal"><div class="modal-content svelte-zbmy0k" role="dialog" aria-modal="true" tabindex="-1"><div class="header svelte-zbmy0k"><h3 class="svelte-zbmy0k"> </h3> <span class="category svelte-zbmy0k"> </span> <button class="close-btn svelte-zbmy0k" aria-label="Close">√ó</button></div> <div class="visual-container svelte-zbmy0k"><!> <div class="muscles svelte-zbmy0k"> </div></div> <div class="instructions svelte-zbmy0k"><h4>Instructions</h4> <ol class="svelte-zbmy0k"></ol></div></div></div>');function Ks(ge,z){vt(z,!1);let v=st(z,"exercise",8),D=st(z,"visible",8,!1);const w=oa();let u=Xe(0),c;function $(){v().images&&v().images.length>0&&(a(u,0),c=setInterval(()=>{a(u,(e(u)+1)%v().images.length)},800))}function J(){c&&clearInterval(c)}Aa(()=>{J()});function ie(){w("close")}fa(()=>(Le(D()),Le(v())),()=>{D()&&v().images?.length?$():J()}),qa(),Qt();var G=nt(),h=at(G);{var T=q=>{var F=Hs(),y=l(F),m=l(y),C=l(m),ce=l(C,!0);t(C);var ne=s(C,2),x=l(ne,!0);t(ne);var B=s(ne,2);t(m);var K=s(m,2),ee=l(K);{var U=N=>{var j=$s();fe(j,5,()=>(Le(v()),Se(()=>v().images)),me,(Y,re,oe)=>{var Z=Ps();let qe;E(()=>{tt(Z,"src",e(re)),tt(Z,"alt",`${Le(v()),Se(()=>v().name)??""} frame ${oe+1}`),qe=We(Z,1,"svelte-zbmy0k",null,qe,{active:oe===e(u)})}),i(Y,Z)}),t(j),i(N,j)},g=N=>{var j=Ws();i(N,j)};L(ee,N=>{Le(v()),Se(()=>v().images&&v().images.length>0)?N(U):N(g,!1)})}var se=s(ee,2),I=l(se);t(se),t(K);var k=s(K,2),S=s(l(k),2);fe(S,5,()=>(Le(v()),Se(()=>v().instructions)),me,(N,j)=>{var Y=Us(),re=l(Y,!0);t(Y),E(()=>Q(re,e(j))),i(N,Y)}),t(S),t(k),t(y),t(F),E(N=>{Q(ce,(Le(v()),Se(()=>v().name))),Q(x,(Le(v()),Se(()=>v().category))),Q(I,`Targets: ${N??""}`)},[()=>(Le(v()),Se(()=>v().targetMuscles.join(", ")))]),X("click",B,ie),ra(3,y,()=>_a,()=>({y:50,duration:300})),X("click",y,ma(function(N){Gt.call(this,z,N)})),X("keydown",y,ma(function(N){Gt.call(this,z,N)})),X("click",F,ie),X("keydown",F,N=>N.key==="Escape"&&ie()),i(q,F)};L(h,q=>{D()&&q(T)})}i(ge,G),ct()}var Js=n('<button class="save-btn svelte-1w0zsmt">Finish Workout</button>'),Qs=n("<option> </option>"),Xs=n('<button class="exercise-item svelte-1w0zsmt"><span class="name svelte-1w0zsmt"> </span> <span class="muscles svelte-1w0zsmt"> </span></button>'),Ys=n('<div class="modal-overlay svelte-1w0zsmt" role="button" tabindex="0" aria-label="Close modal"><div class="picker-modal svelte-1w0zsmt" role="dialog" aria-modal="true" tabindex="-1"><div class="picker-header svelte-1w0zsmt"><h3>Add Exercise</h3> <div class="search-row svelte-1w0zsmt"><input type="text" placeholder="Search exercises..." class="svelte-1w0zsmt"/> <select class="svelte-1w0zsmt"><option>All Categories</option><!></select></div></div> <div class="picker-list svelte-1w0zsmt"></div></div></div>'),Zs=n('<div class="keypad-overlay svelte-1w0zsmt"><div class="keypad-header svelte-1w0zsmt"><span> </span> <button class="svelte-1w0zsmt">Done</button></div> <!></div>'),el=n('<div class="gym-session-form svelte-1w0zsmt"><div class="session-meta svelte-1w0zsmt"><input type="text" class="session-name svelte-1w0zsmt" placeholder="Workout Name (e.g. Pull Day)"/> <div class="meta-row svelte-1w0zsmt"><label class="svelte-1w0zsmt">Start Time <input type="datetime-local" disabled class="svelte-1w0zsmt"/></label> <label class="svelte-1w0zsmt">Bodyweight (kg) <input type="number" placeholder="Optional" class="svelte-1w0zsmt"/></label></div></div> <div class="exercises-list"></div> <button class="add-exercise-btn svelte-1w0zsmt">+ Add Exercise</button> <!> <!> <!> <!> <!></div>');function tl(ge,z){vt(z,!1);const v=Xe(),D=oa();let w=Xe(""),u=Xe(),c=Xe([]),$=new Date().toISOString(),J=Xe(!1),ie=Xe(""),G=Xe(""),h=Xe(null),T=Xe(!1),q=Xe(null);const F=Array.from(new Set(pa.map(f=>f.category))).sort();function y(f){const W={id:crypto.randomUUID(),name:f.name,sets:[{weight:0,reps:0,isWarmup:!1,isFailure:!1,isDropSet:!1,completed:!1}]};a(c,[...e(c),W]),a(J,!1),a(ie,""),a(G,"")}function m(f,W,te){a(h,{exerciseIndex:W,setIndex:te,field:f.detail.field})}function C(f){if(!e(h))return;const{exerciseIndex:W,setIndex:te,field:M}=e(h);Ra(c,e(c)[W].sets[te][M]=f.detail),a(c,[...e(c)])}function ce(){a(T,!0)}function ne(){e(c).length!==0&&(Pa({date:$.split("T")[0],name:e(w)||"Gym Workout",bodyweight:e(u),exercises:e(c)}),D("save"))}function x(){a(h,null)}fa(()=>(e(ie),e(G)),()=>{a(v,pa.filter(f=>{const W=f.name.toLowerCase().includes(e(ie).toLowerCase())||f.targetMuscles.some(M=>M.toLowerCase().includes(e(ie).toLowerCase())),te=e(G)?f.category===e(G):!0;return W&&te}))}),qa(),Qt();var B=el(),K=l(B),ee=l(K);V(ee);var U=s(ee,2),g=l(U),se=s(l(g));V(se),t(g);var I=s(g,2),k=s(l(I));V(k),t(I),t(U),t(K);var S=s(K,2);fe(S,5,()=>e(c),me,(f,W,te)=>{Gs(f,{get exercise(){return e(W)},$$events:{focus:M=>m(M,te,e(c)[te].sets.indexOf(M.detail.set)),complete:ce,delete:[()=>{a(c,e(c).filter((M,H)=>H!==te))},()=>{a(c,e(c).filter((M,H)=>H!==te))}],info:[()=>{const M=pa.find(H=>H.name===e(W).name);M&&a(q,M)},()=>{const M=pa.find(H=>H.name===e(W).name);M&&a(q,M)}]}})}),t(S);var N=s(S,2),j=s(N,2);{var Y=f=>{var W=Js();X("click",W,ne),i(f,W)};L(j,f=>{e(c),Se(()=>e(c).length>0)&&f(Y)})}var re=s(j,2);{var oe=f=>{var W=Ys(),te=l(W),M=l(te),H=s(l(M),2),ue=l(H);V(ue);var be=s(ue,2);E(()=>{e(G),ja(()=>{})});var xe=l(be);xe.value=xe.__value="";var _e=s(xe);fe(_e,1,()=>F,me,(ve,we)=>{var Ce=Qs(),Ie=l(Ce,!0);t(Ce);var Me={};E(()=>{Q(Ie,e(we)),Me!==(Me=e(we))&&(Ce.value=(Ce.__value=e(we))??"")}),i(ve,Ce)}),t(be),t(H),t(M);var Te=s(M,2);fe(Te,5,()=>e(v),me,(ve,we)=>{var Ce=Xs(),Ie=l(Ce),Me=l(Ie,!0);t(Ie);var _=s(Ie,2),O=l(_,!0);t(_),t(Ce),E(A=>{Q(Me,(e(we),Se(()=>e(we).name))),Q(O,A)},[()=>(e(we),Se(()=>e(we).targetMuscles.join(", ")))]),X("click",Ce,()=>y(e(we))),i(ve,Ce)}),t(Te),t(te),t(W),P(ue,()=>e(ie),ve=>a(ie,ve)),Ye(be,()=>e(G),ve=>a(G,ve)),X("click",te,ma(function(ve){Gt.call(this,z,ve)})),X("keydown",te,ma(function(ve){Gt.call(this,z,ve)})),ra(3,te,()=>_a,()=>({y:100,duration:300})),X("click",W,()=>a(J,!1)),X("keydown",W,ve=>ve.key==="Escape"&&a(J,!1)),ra(3,W,()=>Qa),i(f,W)};L(re,f=>{e(J)&&f(oe)})}var Z=s(re,2);{var qe=f=>{Ks(f,{get exercise(){return e(q)},visible:!0,$$events:{close:()=>a(q,null)}})};L(Z,f=>{e(q)&&f(qe)})}var Ee=s(Z,2);{var Be=f=>{var W=Zs(),te=l(W),M=l(te),H=l(M);t(M);var ue=s(M,2);t(te);var be=s(te,2);{let xe=Ia(()=>(e(h),Se(()=>e(h).field==="weight"?"Weight (kg)":"Reps")));Rs(be,{get value(){return e(c),e(h),Se(()=>e(c)[e(h).exerciseIndex].sets[e(h).setIndex][e(h).field])},get label(){return e(xe)},$$events:{change:C}})}t(W),E(()=>Q(H,`Editing ${e(c),e(h),Se(()=>e(c)[e(h).exerciseIndex].name)??""} - Set ${e(h),Se(()=>e(h).setIndex+1)??""}`)),X("click",ue,x),ra(3,W,()=>_a,()=>({y:200,duration:300})),i(f,W)};L(Ee,f=>{e(h)&&f(Be)})}var Ge=s(Ee,2);Ms(Ge,{get visible(){return e(T)},set visible(f){a(T,f)},$$legacy:!0}),t(B),E(f=>La(se,f),[()=>Se(()=>$.slice(0,16))]),P(ee,()=>e(w),f=>a(w,f)),P(k,()=>e(u),f=>a(u,f)),X("click",N,()=>a(J,!0)),i(ge,B),ct()}var al=n("<option> </option>"),sl=n("<option> </option>"),ll=n('<button class="remove-set-btn svelte-1m63nqt">‚úï</button>'),il=n('<div class="set-row svelte-1m63nqt"><div class="input-wrap svelte-1m63nqt"><label class="svelte-1m63nqt">Weight</label> <input type="number" placeholder="0" class="svelte-1m63nqt"/></div> <div class="input-wrap svelte-1m63nqt"><label class="svelte-1m63nqt">Reps/Secs</label> <input type="number" placeholder="1" class="svelte-1m63nqt"/></div> <!></div>'),rl=n('<div class="exercise-card svelte-1m63nqt"><div class="card-header svelte-1m63nqt"><div class="header-inputs svelte-1m63nqt"><select class="svelte-1m63nqt"></select> <select class="svelte-1m63nqt"></select></div> <button class="remove-card-btn svelte-1m63nqt" title="Remove Exercise">‚úï</button></div> <div class="sets-list svelte-1m63nqt"><!> <button class="add-set-btn svelte-1m63nqt">+ Add Set</button></div> <div class="card-footer svelte-1m63nqt"><div class="meta-input svelte-1m63nqt"><label class="svelte-1m63nqt">Total Sets</label> <input type="number" readonly="" disabled class="svelte-1m63nqt"/></div> <div class="notes-input svelte-1m63nqt"><label class="svelte-1m63nqt">Notes</label> <input type="text" placeholder="Notes..." class="svelte-1m63nqt"/></div></div></div>'),ol=n("<div> </div>"),nl=n('<div class="form-content svelte-1m63nqt"><div class="header-row svelte-1m63nqt"><h3 class="svelte-1m63nqt">ü§è Fingerboarding</h3> <button class="add-row-btn svelte-1m63nqt">+ Add Exercise</button></div> <div class="form-group date-group svelte-1m63nqt"><label for="date">Date</label> <input type="date" id="date" class="svelte-1m63nqt"/></div> <div class="cards-container svelte-1m63nqt"></div> <div class="submit-section"><!> <button type="button" class="submit-btn svelte-1m63nqt"><!></button></div></div>');function vl(ge,z){vt(z,!0);const v=["Max hangs","Recruitment pulls","Max pick-ups"],D=["Full-crimp","Half-crimp","Three finger drag","Pinch","Open hand","Sloper"];let w=p(De(new Date().toISOString().split("T")[0])),u=p(De([]));function c(){a(u,[...e(u),{id:crypto.randomUUID(),name:v[0],gripType:D[1],sets:1,details:[{weight:0,reps:5}],notes:""}],!0)}Oa(()=>{e(u).length===0&&c()});function $(I){a(u,e(u).filter((k,S)=>S!==I),!0)}function J(I){const k=e(u)[I],S=k.details[k.details.length-1];k.details=[...k.details,{...S}],k.sets=k.details.length}function ie(I,k){const S=e(u)[I];S.details.length>1&&(S.details=S.details.filter((N,j)=>j!==k),S.sets=S.details.length)}let G=p("idle"),h=p("");async function T(){a(G,"saving");try{const I={date:e(w),location:"N/A",exercises:JSON.parse(JSON.stringify(e(u)))},k=$a(I);if(na()){const S=await Xa(I);S.ok?(ga(k.id,S.id),ba(S.id),a(G,"success"),a(h,"Session saved and synced!")):(ha(k.id),a(G,"success"),a(h,"Saved locally. Sync failed: "+(S.error||"Unknown error")))}else a(G,"success"),a(h,"Saved locally. Will sync when online.");window.dispatchEvent(new CustomEvent("session-saved")),setTimeout(()=>{q()},2e3)}catch(I){a(G,"error"),a(h,"Failed to save session"),console.error("Save error:",I)}}function q(){a(w,new Date().toISOString().split("T")[0],!0),a(u,[],!0),c(),a(G,"idle"),a(h,"")}var F=nl(),y=l(F),m=s(l(y),2);m.__click=c,t(y);var C=s(y,2),ce=s(l(C),2);V(ce),t(C);var ne=s(C,2);fe(ne,21,()=>e(u),me,(I,k,S)=>{var N=rl(),j=l(N),Y=l(j),re=l(Y);fe(re,21,()=>v,me,(be,xe)=>{var _e=al(),Te=l(_e,!0);t(_e);var ve={};E(()=>{Q(Te,e(xe)),ve!==(ve=e(xe))&&(_e.value=(_e.__value=e(xe))??"")}),i(be,_e)}),t(re);var oe=s(re,2);fe(oe,21,()=>D,me,(be,xe)=>{var _e=sl(),Te=l(_e,!0);t(_e);var ve={};E(()=>{Q(Te,e(xe)),ve!==(ve=e(xe))&&(_e.value=(_e.__value=e(xe))??"")}),i(be,_e)}),t(oe),t(Y);var Z=s(Y,2);Z.__click=()=>$(S),t(j);var qe=s(j,2),Ee=l(qe);fe(Ee,17,()=>e(k).details,me,(be,xe,_e)=>{var Te=il(),ve=l(Te),we=l(ve);tt(we,"for",`weight-${S}-${_e}`);var Ce=s(we,2);V(Ce),tt(Ce,"id",`weight-${S}-${_e}`),t(ve);var Ie=s(ve,2),Me=l(Ie);tt(Me,"for",`reps-${S}-${_e}`);var _=s(Me,2);V(_),tt(_,"id",`reps-${S}-${_e}`),t(Ie);var O=s(Ie,2);{var A=le=>{var Ne=ll();Ne.__click=()=>ie(S,_e),i(le,Ne)};L(O,le=>{e(k).details.length>1&&le(A)})}t(Te),P(Ce,()=>e(xe).weight,le=>e(xe).weight=le),P(_,()=>e(xe).reps,le=>e(xe).reps=le),i(be,Te)});var Be=s(Ee,2);Be.__click=()=>J(S),t(qe);var Ge=s(qe,2),f=l(Ge),W=l(f);tt(W,"for",`total-sets-${S}`);var te=s(W,2);V(te),tt(te,"id",`total-sets-${S}`),t(f);var M=s(f,2),H=l(M);tt(H,"for",`notes-${S}`);var ue=s(H,2);V(ue),tt(ue,"id",`notes-${S}`),t(M),t(Ge),t(N),E(()=>La(te,e(k).sets)),Ye(re,()=>e(k).name,be=>e(k).name=be),Ye(oe,()=>e(k).gripType,be=>e(k).gripType=be),P(ue,()=>e(k).notes,be=>e(k).notes=be),i(I,N)}),t(ne);var x=s(ne,2),B=l(x);{var K=I=>{var k=ol();let S;var N=l(k,!0);t(k),E(()=>{S=We(k,1,"save-message svelte-1m63nqt",null,S,{success:e(G)==="success",error:e(G)==="error"}),Q(N,e(h))}),i(I,k)};L(B,I=>{e(h)&&I(K)})}var ee=s(B,2);ee.__click=T;var U=l(ee);{var g=I=>{var k=Ae("Saving...");i(I,k)},se=I=>{var k=nt(),S=at(k);{var N=Y=>{var re=Ae("‚úì Saved!");i(Y,re)},j=Y=>{var re=Ae("Save Session");i(Y,re)};L(S,Y=>{e(G)==="success"?Y(N):Y(j,!1)},!0)}i(I,k)};L(U,I=>{e(G)==="saving"?I(g):I(se,!1)})}t(ee),t(x),t(F),E(()=>ee.disabled=e(G)==="saving"),P(ce,()=>e(w),I=>a(w,I)),i(ge,F),ct()}Jt(["click"]);var cl=n("<option> </option>"),dl=n('<input type="text" placeholder="Enter venue name" class="mt-2 svelte-1fje4dh"/>'),ul=n("<option> </option>"),pl=n("<option> </option>"),fl=n('<input type="text" placeholder="Round name" class="mt-2 svelte-1fje4dh"/>'),_l=n('<div class="result-mode-content svelte-1fje4dh"><div class="form-group svelte-1fje4dh"><label for="position" class="svelte-1fje4dh">Final Position</label> <input type="number" id="position" placeholder="#" class="large-input svelte-1fje4dh"/></div></div>'),ml=n("<option> </option>"),gl=n('<input type="number" min="1" class="svelte-1fje4dh"/>'),bl=n('<span class="flash-dash">-</span>'),hl=n('<tr><td class="col-name svelte-1fje4dh"><input type="text" class="svelte-1fje4dh"/></td><td class="col-status svelte-1fje4dh"><select class="svelte-1fje4dh"></select></td><td class="col-attempt svelte-1fje4dh"><!></td><td class="col-notes svelte-1fje4dh"><input type="text" placeholder="..." class="svelte-1fje4dh"/></td><td class="col-action svelte-1fje4dh"><button class="svelte-1fje4dh">‚úï</button></td></tr>'),yl=n('<div class="load-metrics-compact svelte-1fje4dh"><div class="metric svelte-1fje4dh"><label for="finger">Finger Load</label> <input type="number" id="finger" min="0" max="5" step="0.5" class="svelte-1fje4dh"/></div> <div class="metric svelte-1fje4dh"><label for="shoulder">Shoulder Load</label> <input type="number" id="shoulder" min="0" max="5" step="0.5" class="svelte-1fje4dh"/></div> <div class="metric svelte-1fje4dh"><label for="forearm">Forearm Load</label> <input type="number" id="forearm" min="0" max="5" step="0.5" class="svelte-1fje4dh"/></div></div> <div class="climbs-table-container svelte-1fje4dh"><div class="section-header svelte-1fje4dh"><h4 class="svelte-1fje4dh">Boulders / Routes</h4></div> <table class="climbs-table svelte-1fje4dh"><thead><tr><th class="svelte-1fje4dh">#</th><th class="svelte-1fje4dh">Result</th><th class="svelte-1fje4dh">Att.</th><th class="svelte-1fje4dh">Notes</th><th class="svelte-1fje4dh"></th></tr></thead><tbody></tbody></table> <button class="add-row-btn svelte-1fje4dh">+ Add Row</button></div>',1),kl=n("<div> </div>"),Sl=n('<div class="form-content svelte-1fje4dh"><h3 class="svelte-1fje4dh">üèÜ Competition</h3> <div class="form-grid svelte-1fje4dh"><div class="form-group svelte-1fje4dh"><label for="date" class="svelte-1fje4dh">Date</label> <input type="date" id="date" class="svelte-1fje4dh"/></div> <div class="form-group svelte-1fje4dh"><label for="venue" class="svelte-1fje4dh">Venue</label> <select id="venue" class="svelte-1fje4dh"><option disabled>Select venue...</option><!></select> <!></div></div> <div class="form-group mb-4 svelte-1fje4dh"><label for="type" class="svelte-1fje4dh">Type</label> <select id="type" class="svelte-1fje4dh"></select></div> <div class="round-section svelte-1fje4dh"><div class="form-group svelte-1fje4dh"><label for="round" class="svelte-1fje4dh">Round</label> <select id="round" class="svelte-1fje4dh"></select> <!></div> <!></div> <div class="submit-section"><!> <button type="button" class="submit-btn svelte-1fje4dh"><!></button></div></div>');function xl(ge,z){vt(z,!0);const v=["Flashpoint Bristol","Rockstar Techno","Rockstar Unit 3","Rockstar Unit 5","Bloc","TCA","Other"],D=["Bouldering","Lead","Speed"],w=["Qualifiers","Semi-Finals","Finals","Result","Other"],u=["Flash","Top","Zone","Attempt"];let c=p(De(new Date().toISOString().split("T")[0])),$=p(""),J=p(""),ie=p("Bouldering"),G=p(4),h=p(4),T=p(4),q=p("Qualifiers"),F=p(""),y=p(null),m=p(De([{name:"#1",status:"Flash",attemptCount:1,notes:""}])),C=Dt(()=>e(q)==="Result"),ce=Dt(()=>e($)==="Other"),ne=Dt(()=>e(q)==="Other"),x=Dt(()=>e(q)==="Other"?e(F):e(q));function B(){const _=e(m).length+1;a(m,[...e(m),{name:`#${_}`,status:"Flash",attemptCount:1,notes:""}],!0)}function K(_){e(m).length>1?a(m,e(m).filter((O,A)=>A!==_),!0):e(m)[0]={name:"#1",status:"Flash",attemptCount:1,notes:""}}function ee(_,O){e(m)[_].status=O,O==="Flash"&&(e(m)[_].attemptCount=1)}let U=p("idle"),g=p("");async function se(){if(!e($)||e($)==="Other"&&!e(J)){a(U,"error"),a(g,"Please specify a venue");return}a(U,"saving");try{const _={name:e(x),position:e(C)?e(y):void 0,climbs:e(C)?void 0:JSON.parse(JSON.stringify(e(m)))},O={date:e(c),venue:e($)==="Other"?e(J):e($),customVenue:e($)==="Other"?e(J):void 0,type:e(ie),fingerLoad:e(C)?void 0:e(G),shoulderLoad:e(C)?void 0:e(h),forearmLoad:e(C)?void 0:e(T),rounds:[_]},A=Wa(O);if(na()){const le=await Ya(O);le.ok?(ga(A.id,le.id),ba(le.id),a(U,"success"),a(g,"Competition saved and synced!")):(ha(A.id),a(U,"success"),a(g,"Saved locally. Sync failed: "+(le.error||"Unknown error")))}else a(U,"success"),a(g,"Saved locally. Will sync when online.");window.dispatchEvent(new CustomEvent("session-saved")),setTimeout(()=>{I()},2e3)}catch(_){a(U,"error"),a(g,"Failed to save session"),console.error("Save error:",_)}}function I(){a(c,new Date().toISOString().split("T")[0],!0),a($,""),a(J,""),a(y,null),a(m,[{name:"#1",status:"Flash",attemptCount:1,notes:""}],!0),a(U,"idle"),a(g,"")}var k=Sl(),S=s(l(k),2),N=l(S),j=s(l(N),2);V(j),t(N);var Y=s(N,2),re=s(l(Y),2),oe=l(re);oe.value=oe.__value="";var Z=s(oe);fe(Z,17,()=>v,me,(_,O)=>{var A=cl(),le=l(A,!0);t(A);var Ne={};E(()=>{Q(le,e(O)),Ne!==(Ne=e(O))&&(A.value=(A.__value=e(O))??"")}),i(_,A)}),t(re);var qe=s(re,2);{var Ee=_=>{var O=dl();V(O),P(O,()=>e(J),A=>a(J,A)),i(_,O)};L(qe,_=>{e(ce)&&_(Ee)})}t(Y),t(S);var Be=s(S,2),Ge=s(l(Be),2);fe(Ge,21,()=>D,me,(_,O)=>{var A=ul(),le=l(A,!0);t(A);var Ne={};E(()=>{Q(le,e(O)),Ne!==(Ne=e(O))&&(A.value=(A.__value=e(O))??"")}),i(_,A)}),t(Ge),t(Be);var f=s(Be,2),W=l(f),te=s(l(W),2);fe(te,21,()=>w,me,(_,O)=>{var A=pl(),le=l(A,!0);t(A);var Ne={};E(()=>{Q(le,e(O)),Ne!==(Ne=e(O))&&(A.value=(A.__value=e(O))??"")}),i(_,A)}),t(te);var M=s(te,2);{var H=_=>{var O=fl();V(O),P(O,()=>e(F),A=>a(F,A)),i(_,O)};L(M,_=>{e(ne)&&_(H)})}t(W);var ue=s(W,2);{var be=_=>{var O=_l(),A=l(O),le=s(l(A),2);V(le),t(A),t(O),P(le,()=>e(y),Ne=>a(y,Ne)),i(_,O)},xe=_=>{var O=yl(),A=at(O),le=l(A),Ne=s(l(le),2);V(Ne),t(le);var Re=s(le,2),lt=s(l(Re),2);V(lt),t(Re);var yt=s(Re,2),Nt=s(l(yt),2);V(Nt),t(yt),t(A);var pt=s(A,2),ft=s(l(pt),2),kt=s(l(ft));fe(kt,21,()=>e(m),me,(Ue,Ve,St)=>{var _t=hl(),mt=l(_t),xt=l(mt);V(xt),t(mt);var wt=s(mt),He=l(wt);He.__change=Fe=>ee(St,Fe.target.value),fe(He,21,()=>u,me,(Fe,Ke)=>{var Pe=ml(),Rt=l(Pe,!0);t(Pe);var ht={};E(()=>{Q(Rt,e(Ke)),ht!==(ht=e(Ke))&&(Pe.value=(Pe.__value=e(Ke))??"")}),i(Fe,Pe)}),t(He);var Tt;Ca(He),t(wt);var gt=s(wt),At=l(gt);{var qt=Fe=>{var Ke=gl();V(Ke),P(Ke,()=>e(Ve).attemptCount,Pe=>e(Ve).attemptCount=Pe),i(Fe,Ke)},Vt=Fe=>{var Ke=bl();i(Fe,Ke)};L(At,Fe=>{e(Ve).status!=="Flash"?Fe(qt):Fe(Vt,!1)})}t(gt);var dt=s(gt),Lt=l(dt);V(Lt),t(dt);var bt=s(dt),Ft=l(bt);Ft.__click=()=>K(St),t(bt),t(_t),E(()=>{Tt!==(Tt=e(Ve).status)&&(He.value=(He.__value=e(Ve).status)??"",Na(He,e(Ve).status))}),P(xt,()=>e(Ve).name,Fe=>e(Ve).name=Fe),P(Lt,()=>e(Ve).notes,Fe=>e(Ve).notes=Fe),i(Ue,_t)}),t(kt),t(ft);var It=s(ft,2);It.__click=B,t(pt),P(Ne,()=>e(G),Ue=>a(G,Ue)),P(lt,()=>e(h),Ue=>a(h,Ue)),P(Nt,()=>e(T),Ue=>a(T,Ue)),i(_,O)};L(ue,_=>{e(C)?_(be):_(xe,!1)})}t(f);var _e=s(f,2),Te=l(_e);{var ve=_=>{var O=kl();let A;var le=l(O,!0);t(O),E(()=>{A=We(O,1,"save-message svelte-1fje4dh",null,A,{success:e(U)==="success",error:e(U)==="error"}),Q(le,e(g))}),i(_,O)};L(Te,_=>{e(g)&&_(ve)})}var we=s(Te,2);we.__click=se;var Ce=l(we);{var Ie=_=>{var O=Ae("Saving...");i(_,O)},Me=_=>{var O=nt(),A=at(O);{var le=Re=>{var lt=Ae("‚úì Saved!");i(Re,lt)},Ne=Re=>{var lt=Ae("Save Session");i(Re,lt)};L(A,Re=>{e(U)==="success"?Re(le):Re(Ne,!1)},!0)}i(_,O)};L(Ce,_=>{e(U)==="saving"?_(Ie):_(Me,!1)})}t(we),t(_e),t(k),E(()=>we.disabled=e(U)==="saving"),P(j,()=>e(c),_=>a(c,_)),Ye(re,()=>e($),_=>a($,_)),Ye(Ge,()=>e(ie),_=>a(ie,_)),Ye(te,()=>e(q),_=>a(q,_)),i(ge,k),ct()}Jt(["change","click"]);var wl=n('<span class="spinner svelte-b2zgdd"></span> Syncing...',1),ql=n("<button><!></button>"),Cl=n("<div> </div>"),Nl=n('<div><div class="sync-info svelte-b2zgdd"><span class="sync-icon svelte-b2zgdd"> </span> <span class="sync-text svelte-b2zgdd"><!></span></div> <!> <!></div>'),Tl=n("<option> </option>"),Fl=n('<div class="form-container svelte-b2zgdd"><!></div>'),Ol=n('<div class="page svelte-b2zgdd"><div class="page-header svelte-b2zgdd"><h1 class="svelte-b2zgdd">üìù Log Data</h1> <p class="subtitle svelte-b2zgdd">Record your training sessions</p></div> <!> <div class="content-card svelte-b2zgdd"><div class="form-group svelte-b2zgdd"><label for="activity-type" class="svelte-b2zgdd">Activity Type</label> <select id="activity-type" class="svelte-b2zgdd"><option disabled>Select an activity...</option><!></select></div> <!></div></div>');function Bl(ge,z){vt(z,!0);const v=[{value:"indoor_climb",label:"Indoor Climb",icon:"üßó"},{value:"outdoor_climb",label:"Outdoor Climb",icon:"‚õ∞Ô∏è"},{value:"gym_session",label:"Gym Session",icon:"üèãÔ∏è"},{value:"fingerboarding",label:"Fingerboarding",icon:"ü§è"},{value:"competition",label:"Competition",icon:"üèÜ"}];let D=p(""),w=p(0),u=p("idle"),c=p(""),$=p(!0);za(()=>{J(),a($,na(),!0);const x=()=>{a($,!0),J()},B=()=>{a($,!1)},K=()=>{J()};return window.addEventListener("online",x),window.addEventListener("offline",B),window.addEventListener("session-saved",K),()=>{window.removeEventListener("online",x),window.removeEventListener("offline",B),window.removeEventListener("session-saved",K)}});function J(){a(w,Za(),!0)}async function ie(){if(!e($)){a(u,"error"),a(c,"No network connection");return}a(u,"syncing"),a(c,"");try{const x=await es();x.failed===0&&x.success>0?(a(u,"success"),a(c,`Synced ${x.success} session${x.success>1?"s":""}!`)):x.failed>0&&x.success>0?(a(u,"error"),a(c,`Synced ${x.success}, failed ${x.failed}`)):x.failed>0?(a(u,"error"),a(c,`Failed to sync ${x.failed} session${x.failed>1?"s":""}`)):(a(u,"idle"),a(c,"")),J(),e(u)==="success"&&setTimeout(()=>{a(u,"idle"),a(c,"")},3e3)}catch(x){a(u,"error"),a(c,"Sync failed"),console.error("Sync error:",x)}}var G=Ol(),h=s(l(G),2);{var T=x=>{var B=Nl();let K;var ee=l(B),U=l(ee),g=l(U,!0);t(U);var se=s(U,2),I=l(se);{var k=oe=>{var Z=Ae();E(()=>Q(Z,`${e(w)??""} session${e(w)>1?"s":""} waiting to sync`)),i(oe,Z)},S=oe=>{var Z=Ae();E(()=>Q(Z,`Offline - ${e(w)??""} session${e(w)>1?"s":""} saved locally`)),i(oe,Z)};L(I,oe=>{e($)?oe(k):oe(S,!1)})}t(se),t(ee);var N=s(ee,2);{var j=oe=>{var Z=ql();let qe;Z.__click=ie;var Ee=l(Z);{var Be=f=>{var W=wl();ze(),i(f,W)},Ge=f=>{var W=nt(),te=at(W);{var M=ue=>{var be=Ae("‚úì Synced!");i(ue,be)},H=ue=>{var be=Ae("Sync Now");i(ue,be)};L(te,ue=>{e(u)==="success"?ue(M):ue(H,!1)},!0)}i(f,W)};L(Ee,f=>{e(u)==="syncing"?f(Be):f(Ge,!1)})}t(Z),E(()=>{qe=We(Z,1,"sync-btn svelte-b2zgdd",null,qe,{syncing:e(u)==="syncing"}),Z.disabled=e(u)==="syncing"}),i(oe,Z)};L(N,oe=>{e($)&&oe(j)})}var Y=s(N,2);{var re=oe=>{var Z=Cl();let qe;var Ee=l(Z,!0);t(Z),E(()=>{qe=We(Z,1,"sync-message svelte-b2zgdd",null,qe,{error:e(u)==="error",success:e(u)==="success"}),Q(Ee,e(c))}),i(oe,Z)};L(Y,oe=>{e(c)&&oe(re)})}t(B),E(()=>{K=We(B,1,"sync-banner svelte-b2zgdd",null,K,{offline:!e($)}),Q(g,e($)?"üîÑ":"üì¥")}),i(x,B)};L(h,x=>{e(w)>0&&x(T)})}var q=s(h,2),F=l(q),y=s(l(F),2),m=l(y);m.value=m.__value="";var C=s(m);fe(C,17,()=>v,x=>x.value,(x,B)=>{var K=Tl(),ee=l(K);t(K);var U={};E(()=>{Q(ee,`${e(B).icon??""} ${e(B).label??""}`),U!==(U=e(B).value)&&(K.value=(K.__value=e(B).value)??"")}),i(x,K)}),t(y),t(F);var ce=s(F,2);{var ne=x=>{var B=Fl(),K=l(B);{var ee=g=>{bs(g,{})},U=g=>{var se=nt(),I=at(se);{var k=N=>{Vs(N,{})},S=N=>{var j=nt(),Y=at(j);{var re=Z=>{tl(Z,{})},oe=Z=>{var qe=nt(),Ee=at(qe);{var Be=f=>{vl(f,{})},Ge=f=>{var W=nt(),te=at(W);{var M=H=>{xl(H,{})};L(te,H=>{e(D)==="competition"&&H(M)},!0)}i(f,W)};L(Ee,f=>{e(D)==="fingerboarding"?f(Be):f(Ge,!1)},!0)}i(Z,qe)};L(Y,Z=>{e(D)==="gym_session"?Z(re):Z(oe,!1)},!0)}i(N,j)};L(I,N=>{e(D)==="outdoor_climb"?N(k):N(S,!1)},!0)}i(g,se)};L(K,g=>{e(D)==="indoor_climb"?g(ee):g(U,!1)})}t(B),i(x,B)};L(ce,x=>{e(D)&&x(ne)})}t(q),t(G),Ye(y,()=>e(D),x=>a(D,x)),i(ge,G),ct()}Jt(["click"]);export{Bl as component};
