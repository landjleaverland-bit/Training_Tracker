import{f as n,a as i,c as He,t as At}from"../chunks/C7ZOrG79.js";import{p as gt,c as a,s,i as e,aV as y,r as t,t as g,a as mt,x as l,b0 as ta,f as Ie,aG as jt,aW as lt,w as nt,o as ca,b8 as ua,d as ya}from"../chunks/DeIY3UD2.js";import{d as _t,s as o}from"../chunks/BL09rjKV.js";import{i as p}from"../chunks/C7-VmZUr.js";import{s as rt,r as Ve,e as Fe,i as Oe,b as Me,c as ga,d as xa}from"../chunks/B2YICR1D.js";import{t as Ye,l as ot,D as aa,i as $t,u as pa,k as sa,m as Sa,g as wa,b as Da,n as fa,o as ka,E as Ta,p as qa,q as za,r as La,v as Ca,f as ma,s as ba}from"../chunks/Da8TToiX.js";import{c as wt,n as ra,f as ct,o as Ut,m as ea,b as Ft,p as Zt,q as ia,t as la,v as na,w as oa,x as da,y as Fa,z as Ea}from"../chunks/D2QrZtpX.js";import{s as vt}from"../chunks/DXqZ3xgB.js";import{p as Xt}from"../chunks/BV00zs06.js";var Ga=n('<span class="chevron svelte-12crvy">‚ñ≤</span>'),Na=n('<span class="chevron svelte-12crvy">‚ñº</span>'),Oa=n('<div class="input-with-action svelte-12crvy"><input type="text" id="location-manual" placeholder="Custom location..." class="flat-left svelte-12crvy"/> <button type="button" class="action-btn flat-right svelte-12crvy" title="Back to list">‚úï</button></div>'),Aa=n("<option> </option>"),ja=n('<select id="location-filter" class="svelte-12crvy"><option>Any Location</option><!></select>'),Ia=n("<option> </option>"),Pa=n("<option> </option>"),Ma=n('<div class="filter-body svelte-12crvy"><div class="filter-grid svelte-12crvy"><div class="filter-item svelte-12crvy"><label for="start-date" class="svelte-12crvy">Start Date</label> <input type="date" id="start-date" class="svelte-12crvy"/></div> <div class="filter-item svelte-12crvy"><label for="end-date" class="svelte-12crvy">End Date</label> <input type="date" id="end-date" class="svelte-12crvy"/></div> <div class="filter-item svelte-12crvy"><label for="location-filter" class="svelte-12crvy">Location</label> <!></div> <div class="filter-item svelte-12crvy"><label for="climbing-type-filter" class="svelte-12crvy">Climb Type</label> <select id="climbing-type-filter" class="svelte-12crvy"><option>Any Type</option><!></select></div> <div class="filter-item svelte-12crvy"><label for="session-type-filter" class="svelte-12crvy">Session Type</label> <select id="session-type-filter" class="svelte-12crvy"><option>Any Type</option><!></select></div> <div class="filter-item svelte-12crvy"><label for="grade-filter" class="svelte-12crvy">Grade (Exact)</label> <input type="text" id="grade-filter" placeholder="e.g. V4" class="svelte-12crvy"/></div></div> <div class="filter-actions svelte-12crvy"><button class="reset-btn svelte-12crvy">Reset Filters</button></div></div>'),Ra=n('<div class="filter-container svelte-12crvy"><button class="filter-header svelte-12crvy"><div class="header-content svelte-12crvy"><span class="icon svelte-12crvy">üîç</span> <span class="title svelte-12crvy">Filters</span> <!></div></button> <!></div>');function Ba(ze,u){gt(u,!0);const r=["Rockstar Swindon","Flashpoint Swindon","Flashpoint Bristol","Redpoint Bristol","TCH Bristol","Other"],h=["Bouldering","Sport","Mixed"],q=["Projecting","Onsighting","Campusing","Repeaters"];let w=y(!1),m=y(""),C=y(""),D=y(""),U=y(""),re=y(""),ce=y(""),ke=y(!1);function te(){l(w,!e(w))}function ie(){l(m,""),l(C,""),l(D,""),l(U,""),l(ke,!1),l(re,""),l(ce,""),F()}function F(){u.onFilterParamsChange({startDate:e(m),endDate:e(C),location:e(D),climbingType:e(U),sessionType:e(re),grade:e(ce)})}function le(){e(D)==="Other"?(l(ke,!0),l(D,"")):F()}function de(){l(ke,!1),l(D,""),F()}var ne=Ra(),G=a(ne);G.__click=te;var $=a(G),_e=s(a($),4);{var fe=k=>{var J=Ga();i(k,J)},Se=k=>{var J=Na();i(k,J)};p(_e,k=>{e(w)?k(fe):k(Se,!1)})}t($),t(G);var L=s(G,2);{var O=k=>{var J=Ma(),V=a(J),M=a(V),ve=s(a(M),2);Ve(ve),ve.__change=F,t(M);var Z=s(M,2),b=s(a(Z),2);Ve(b),b.__change=F,t(Z);var _=s(Z,2),c=s(a(_),2);{var v=K=>{var I=Oa(),ee=a(I);Ve(ee),ee.__input=F;var qe=s(ee,2);qe.__click=de,t(I),Me(ee,()=>e(D),Ce=>l(D,Ce)),i(K,I)},d=K=>{var I=ja();I.__change=le;var ee=a(I);ee.value=ee.__value="";var qe=s(ee);Fe(qe,17,()=>r,Oe,(Ce,ge)=>{var be=Aa(),Y=a(be,!0);t(be);var he={};g(()=>{o(Y,e(ge)),he!==(he=e(ge))&&(be.value=(be.__value=e(ge))??"")}),i(Ce,be)}),t(I),wt(I,()=>e(D),Ce=>l(D,Ce)),i(K,I)};p(c,K=>{e(ke)?K(v):K(d,!1)})}t(_);var x=s(_,2),A=s(a(x),2);A.__change=F;var oe=a(A);oe.value=oe.__value="";var j=s(oe);Fe(j,17,()=>h,Oe,(K,I)=>{var ee=Ia(),qe=a(ee,!0);t(ee);var Ce={};g(()=>{o(qe,e(I)),Ce!==(Ce=e(I))&&(ee.value=(ee.__value=e(I))??"")}),i(K,ee)}),t(A),t(x);var ye=s(x,2),ue=s(a(ye),2);ue.__change=F;var Le=a(ue);Le.value=Le.__value="";var T=s(Le);Fe(T,17,()=>q,Oe,(K,I)=>{var ee=Pa(),qe=a(ee,!0);t(ee);var Ce={};g(()=>{o(qe,e(I)),Ce!==(Ce=e(I))&&(ee.value=(ee.__value=e(I))??"")}),i(K,ee)}),t(ue),t(ye);var ae=s(ye,2),P=s(a(ae),2);Ve(P),P.__input=F,t(ae),t(V);var me=s(V,2),we=a(me);we.__click=ie,t(me),t(J),Me(ve,()=>e(m),K=>l(m,K)),Me(b,()=>e(C),K=>l(C,K)),wt(A,()=>e(U),K=>l(U,K)),wt(ue,()=>e(re),K=>l(re,K)),Me(P,()=>e(ce),K=>l(ce,K)),Ye(3,J,()=>ot,()=>({duration:200})),i(k,J)};p(L,k=>{e(w)&&k(O)})}t(ne),g(()=>rt(G,"aria-expanded",e(w))),i(ze,ne),mt()}_t(["click","change","input"]);var Va=n('<label class="type-toggle svelte-yz0xxt"><input type="checkbox"/> <span>Sport?</span></label>'),Ua=n("<option> </option>"),Wa=n('<div class="edit-form svelte-yz0xxt"><div class="edit-row main svelte-yz0xxt"><input type="text" class="edit-input grade svelte-yz0xxt" placeholder="Grade"/> <input type="text" class="edit-input name svelte-yz0xxt" placeholder="Route Name"/> <!></div> <div class="edit-row meta svelte-yz0xxt"><select class="edit-select svelte-yz0xxt"></select> <div class="attempts-input-wrapper svelte-yz0xxt"><span>#</span> <input type="number" min="1" class="edit-input num svelte-yz0xxt"/></div></div> <div class="edit-row notes svelte-yz0xxt"><textarea class="edit-input notes-area svelte-yz0xxt" placeholder="Notes..."></textarea></div> <div class="edit-actions svelte-yz0xxt"><button class="action-btn cancel svelte-yz0xxt">Cancel</button> <button class="action-btn save svelte-yz0xxt">Save</button></div></div>'),Ha=n('<span class="climb-type-tag svelte-yz0xxt"> </span>'),Ya=n('<span class="notes-preview svelte-yz0xxt"> </span>'),Ja=n('<span class="wall-tag svelte-yz0xxt"> </span>'),Za=n('<span class="technique-tag svelte-yz0xxt"> </span>'),Xa=n('<span class="attempts-count svelte-yz0xxt"> </span>'),Ka=n('<div class="detail-row svelte-yz0xxt"><span class="label svelte-yz0xxt">Notes:</span> <p class="notes svelte-yz0xxt"> </p></div>'),Qa=n('<p class="empty-notes svelte-yz0xxt">No notes for this climb.</p>'),$a=n('<div class="climb-details svelte-yz0xxt"><!> <div class="tags svelte-yz0xxt"><span class="tag type svelte-yz0xxt"> </span> <span class="tag attempt-text svelte-yz0xxt"> </span></div></div>'),es=n('<div class="climb-header svelte-yz0xxt" role="button" tabindex="0"><div class="climb-main-info svelte-yz0xxt"><span> </span> <span class="climb-name svelte-yz0xxt"> </span> <!> <!> <!> <!></div> <div class="climb-meta svelte-yz0xxt"><span><span class="icon svelte-yz0xxt"> </span> <!></span> <button class="icon-btn edit-btn svelte-yz0xxt" aria-label="Edit climb" title="Edit climb">‚úé</button> <button class="icon-btn delete-btn svelte-yz0xxt" aria-label="Delete climb" title="Delete climb">üóëÔ∏è</button> <span class="chevron svelte-yz0xxt"> </span></div></div> <!>',1),ts=n("<div><!></div>");function as(ze,u){gt(u,!0);let r=Xt(u,"showClimbType",3,!1),h=y(!1),q=y(!1),w=y(""),m=y(""),C=y(""),D=y(1),U=y(""),re=y(!1);function ce(){e(q)||l(h,!e(h))}function ke(L){L.stopPropagation(),u.onDelete()}function te(L){L.stopPropagation(),l(w,u.climb.name,!0),l(m,u.climb.grade,!0),l(C,u.climb.attemptType,!0),l(D,u.climb.attemptsNum,!0),l(U,u.climb.notes,!0),l(re,u.climb.isSport,!0),l(q,!0),l(h,!0)}function ie(L){L.stopPropagation(),l(q,!1)}function F(L){L.stopPropagation();const O={...u.climb,name:e(w),grade:e(m),attemptType:e(C),attemptsNum:e(D),notes:e(U),isSport:e(re)};u.onUpdate(O),l(q,!1)}function le(){(e(C)==="Flash"||e(C)==="Onsight")&&l(D,1)}const de={Flash:"‚ö°",Onsight:"üëÅÔ∏è",Redpoint:"üî¥",Dogged:"üõ†Ô∏è",DNF:"‚ùå"},ne=["Flash","Onsight","Redpoint","Dogged","DNF"];var G=ts();let $;var _e=a(G);{var fe=L=>{var O=Wa(),k=a(O),J=a(k);Ve(J);var V=s(J,2);Ve(V);var M=s(V,2);{var ve=j=>{var ye=Va(),ue=a(ye);Ve(ue),jt(2),t(ye),ga(ue,()=>e(re),Le=>l(re,Le)),i(j,ye)};p(M,j=>{r()&&j(ve)})}t(k);var Z=s(k,2),b=a(Z);b.__change=le,Fe(b,21,()=>ne,Oe,(j,ye)=>{var ue=Ua(),Le=a(ue,!0);t(ue);var T={};g(()=>{o(Le,e(ye)),T!==(T=e(ye))&&(ue.value=(ue.__value=e(ye))??"")}),i(j,ue)}),t(b);var _=s(b,2),c=s(a(_),2);Ve(c),t(_),t(Z);var v=s(Z,2),d=a(v);ta(d),t(v);var x=s(v,2),A=a(x);A.__click=ie;var oe=s(A,2);oe.__click=F,t(x),t(O),g(()=>c.disabled=e(C)==="Flash"||e(C)==="Onsight"),Me(J,()=>e(m),j=>l(m,j)),Me(V,()=>e(w),j=>l(w,j)),wt(b,()=>e(C),j=>l(C,j)),Me(c,()=>e(D),j=>l(D,j)),Me(d,()=>e(U),j=>l(U,j)),i(L,O)},Se=L=>{var O=es(),k=Ie(O);k.__click=ce,k.__keydown=ge=>(ge.key==="Enter"||ge.key===" ")&&ce();var J=a(k),V=a(J);let M;var ve=a(V,!0);t(V);var Z=s(V,2),b=a(Z,!0);t(Z);var _=s(Z,2);{var c=ge=>{var be=Ha(),Y=a(be,!0);t(be),g(()=>o(Y,u.climb.isSport?"Sport":"Boulder")),i(ge,be)};p(_,ge=>{r()&&ge(c)})}var v=s(_,2);{var d=ge=>{var be=Ya(),Y=a(be);t(be),g(()=>o(Y,`- ${u.climb.notes??""}`)),i(ge,be)};p(v,ge=>{!e(h)&&u.climb.notes&&ge(d)})}var x=s(v,2);{var A=ge=>{var be=Ja(),Y=a(be,!0);t(be),g(()=>o(Y,u.climb.wall)),i(ge,be)};p(x,ge=>{u.climb.wall&&ge(A)})}var oe=s(x,2);{var j=ge=>{var be=Za(),Y=a(be,!0);t(be),g(()=>o(Y,u.climb.techniqueFocus)),i(ge,be)};p(oe,ge=>{u.climb.techniqueFocus&&ge(j)})}t(J);var ye=s(J,2),ue=a(ye);let Le;var T=a(ue),ae=a(T,!0);t(T);var P=s(T,2);{var me=ge=>{var be=Xa(),Y=a(be,!0);t(be),g(()=>o(Y,u.climb.attemptsNum)),i(ge,be)};p(P,ge=>{u.climb.attemptType!=="Flash"&&u.climb.attemptType!=="Onsight"&&ge(me)})}t(ue);var we=s(ue,2);we.__click=te;var K=s(we,2);K.__click=ke;var I=s(K,2),ee=a(I,!0);t(I),t(ye),t(k);var qe=s(k,2);{var Ce=ge=>{var be=$a(),Y=a(be);{var he=S=>{var R=Ka(),Ee=s(a(R),2),Pe=a(Ee,!0);t(Ee),t(R),g(()=>o(Pe,u.climb.notes)),i(S,R)},xe=S=>{var R=Qa();i(S,R)};p(Y,S=>{u.climb.notes?S(he):S(xe,!1)})}var X=s(Y,2),W=a(X),De=a(W,!0);t(W);var Te=s(W,2),E=a(Te,!0);t(Te),t(X),t(be),g(()=>{o(De,u.climb.isSport?"Sport":"Boulder"),o(E,u.climb.attemptType)}),Ye(3,be,()=>ot,()=>({duration:150})),i(ge,be)};p(qe,ge=>{e(h)&&ge(Ce)})}g(()=>{rt(k,"aria-expanded",e(h)),M=vt(V,1,"grade-badge svelte-yz0xxt",null,M,{sport:u.climb.isSport}),o(ve,u.climb.grade),o(b,u.climb.name||"Unnamed Route"),Le=vt(ue,1,"attempt-type svelte-yz0xxt",null,Le,{flash:u.climb.attemptType==="Flash"}),o(ae,de[u.climb.attemptType]||u.climb.attemptType),o(ee,e(h)?"‚ñ≤":"‚ñº")}),i(L,O)};p(_e,L=>{e(q)?L(fe):L(Se,!1)})}t(G),g(()=>$=vt(G,1,"climb-entry svelte-yz0xxt",null,$,{expanded:e(h),editing:e(q)})),i(ze,G),mt()}_t(["change","click","keydown"]);var ss=n('<span class="stat svelte-7vqogn"> </span>'),rs=n('<span class="status-icon pending svelte-7vqogn" title="Waiting to sync">üîÑ</span>'),is=n('<span class="status-icon error svelte-7vqogn" title="Sync error">‚ö†Ô∏è</span>'),ls=n('<span class="chip svelte-7vqogn"> </span>'),ns=n('<span class="text-none svelte-7vqogn">None</span>'),vs=n('<div class="detail-item svelte-7vqogn"><span class="label svelte-7vqogn">Difficulty</span> <span class="value svelte-7vqogn"> </span></div>'),os=n('<span class="chip svelte-7vqogn"> </span>'),ds=n('<span class="text-none svelte-7vqogn">None</span>'),cs=n('<div class="detail-item svelte-7vqogn"><span class="label svelte-7vqogn">Category</span> <div class="value-chips svelte-7vqogn"><!></div></div>'),_s=n('<span class="chip svelte-7vqogn"> </span>'),us=n('<span class="text-none svelte-7vqogn">None</span>'),ps=n('<div class="detail-item svelte-7vqogn"><span class="label svelte-7vqogn">Energy System</span> <div class="value-chips svelte-7vqogn"><!></div></div>'),fs=n('<span class="chip svelte-7vqogn"> </span>'),gs=n('<span class="text-none svelte-7vqogn">None</span>'),ms=n('<div class="detail-item svelte-7vqogn"><span class="label svelte-7vqogn">Wall</span> <div class="value-chips svelte-7vqogn"><!></div></div>'),bs=n('<button class="icon-btn edit-notes-btn svelte-7vqogn" title="Edit Notes">‚úé</button>'),hs=n('<div class="edit-notes-area"><textarea placeholder="Add session notes..." rows="3" class="notes-editor svelte-7vqogn"></textarea> <div class="edit-actions svelte-7vqogn"><button class="cancel-btn svelte-7vqogn">Cancel</button> <button class="save-btn svelte-7vqogn"> </button></div></div>'),ys=n('<p class="notes-text svelte-7vqogn"> </p>'),xs=n('<p class="notes-placeholder svelte-7vqogn">No notes.</p>'),Ss=n('<div class="metric svelte-7vqogn"><span class="label svelte-7vqogn">Open Grip</span> <div class="bar-container svelte-7vqogn"><div class="bar-fill svelte-7vqogn"></div></div> <span class="score svelte-7vqogn"> </span></div>'),ws=n('<div class="metric svelte-7vqogn"><span class="label svelte-7vqogn">Crimp Grip</span> <div class="bar-container svelte-7vqogn"><div class="bar-fill svelte-7vqogn"></div></div> <span class="score svelte-7vqogn"> </span></div>'),Ds=n('<div class="metric svelte-7vqogn"><span class="label svelte-7vqogn">Pinch Grip</span> <div class="bar-container svelte-7vqogn"><div class="bar-fill svelte-7vqogn"></div></div> <span class="score svelte-7vqogn"> </span></div>'),ks=n('<div class="metric svelte-7vqogn"><span class="label svelte-7vqogn">Sloper Grip</span> <div class="bar-container svelte-7vqogn"><div class="bar-fill svelte-7vqogn"></div></div> <span class="score svelte-7vqogn"> </span></div>'),Ts=n('<div class="metric svelte-7vqogn"><span class="label svelte-7vqogn">Jug Grip</span> <div class="bar-container svelte-7vqogn"><div class="bar-fill svelte-7vqogn"></div></div> <span class="score svelte-7vqogn"> </span></div>'),qs=n('<p class="no-climbs svelte-7vqogn">No climbs logged for this session.</p>'),zs=n('<div class="card-body svelte-7vqogn"><div class="details-grid svelte-7vqogn"><div class="detail-item svelte-7vqogn"><span class="label svelte-7vqogn">Training Type</span> <div class="value-chips svelte-7vqogn"><!></div></div> <!> <!> <!> <!></div> <div class="notes-container svelte-7vqogn"><div class="notes-header svelte-7vqogn"><span class="label svelte-7vqogn">Session Notes</span> <!></div> <!></div> <div class="metrics-container svelte-7vqogn"><div class="metric svelte-7vqogn"><span class="label svelte-7vqogn">Finger Load</span> <div class="bar-container svelte-7vqogn"><div class="bar-fill svelte-7vqogn"></div></div> <span class="score svelte-7vqogn"> </span></div> <div class="metric svelte-7vqogn"><span class="label svelte-7vqogn">Shoulder Load</span> <div class="bar-container svelte-7vqogn"><div class="bar-fill svelte-7vqogn"></div></div> <span class="score svelte-7vqogn"> </span></div> <div class="metric svelte-7vqogn"><span class="label svelte-7vqogn">Forearm Load</span> <div class="bar-container svelte-7vqogn"><div class="bar-fill svelte-7vqogn"></div></div> <span class="score svelte-7vqogn"> </span></div> <!> <!> <!> <!> <!></div> <div class="climbs-list svelte-7vqogn"><h4 class="svelte-7vqogn">Climbs</h4> <div class="climbs-container svelte-7vqogn"><!> <!></div></div></div>'),Ls=n('<div><div class="card-header svelte-7vqogn" role="button" tabindex="0"><div class="header-main svelte-7vqogn"><div class="date-badge svelte-7vqogn"><span class="day svelte-7vqogn"> </span> <span class="month svelte-7vqogn"> </span> <span class="year svelte-7vqogn"> </span></div> <div class="session-info svelte-7vqogn"><div class="session-text svelte-7vqogn"><h3 class="location svelte-7vqogn"> </h3> <div class="session-meta svelte-7vqogn"><span class="type-tag svelte-7vqogn"> </span> <span class="stat svelte-7vqogn"> </span> <!></div></div> <div class="load-summary svelte-7vqogn"><div class="load-badge finger svelte-7vqogn"> </div> <div class="load-badge shoulder svelte-7vqogn"> </div> <div class="load-badge forearm svelte-7vqogn"> </div></div></div></div> <div class="header-actions"><div class="header-status svelte-7vqogn"><!></div>  <button class="btn-icon delete-session" title="Delete Session">üóëÔ∏è</button> <span class="chevron svelte-7vqogn"> </span></div></div> <!> <!></div>');function Cs(ze,u){gt(u,!0);let r=Xt(u,"session",7),h=y(!1),q=y(!1);function w(){l(h,!e(h))}function m(){l(q,!0)}function C(){ra(r().id),l(q,!1),u.onDelete()}function D(X){const W=[...r().climbs];W.splice(X,1),Ut(r().id,{climbs:W}),u.onDelete()}function U(X,W){const De=[...r().climbs];De[X]=W,re(De)}async function re(X){if(Ut(r().id,{climbs:X}),r().climbs=X,$t()){const W={date:r().date,location:r().location,customLocation:r().customLocation,climbingType:r().climbingType,trainingTypes:r().trainingTypes||[],difficulty:r().difficulty,categories:r().categories||[],energySystems:r().energySystems||[],wallAngles:r().wallAngles||[],fingerLoad:r().fingerLoad,shoulderLoad:r().shoulderLoad,forearmLoad:r().forearmLoad,openGrip:r().openGrip,crimpGrip:r().crimpGrip,pinchGrip:r().pinchGrip,sloperGrip:r().sloperGrip,jugGrip:r().jugGrip,climbs:X};try{const De=await pa(r().id,W);De.ok?(ea(r().id),r().syncStatus="synced"):(console.error("Failed to sync update:",De.error),Ft(r().id),r().syncStatus="error")}catch(De){console.error("Exception syncing update:",De),Ft(r().id),r().syncStatus="error"}}}let ce=lt(()=>r().climbs?.length??0),ke=lt(()=>(r().climbs||[]).reduce((X,W)=>{const De=parseInt(W.grade.replace(/\D/g,""))||0,Te=parseInt(X.replace(/\D/g,""))||0;return De>Te?W.grade:X},"V0")),te=y(!1),ie=y(""),F=y(!1);function le(){l(ie,r().notes||"",!0),l(te,!0)}function de(){l(te,!1),l(ie,"")}async function ne(){if(!e(F)){if(l(F,!0),r().notes,r().notes=e(ie),Ut(r().id,{notes:e(ie)}),$t()){const X={date:r().date,location:r().location,customLocation:r().customLocation,climbingType:r().climbingType,trainingTypes:r().trainingTypes||[],difficulty:r().difficulty,categories:r().categories||[],energySystems:r().energySystems||[],wallAngles:r().wallAngles||[],fingerLoad:r().fingerLoad,shoulderLoad:r().shoulderLoad,forearmLoad:r().forearmLoad,openGrip:r().openGrip,crimpGrip:r().crimpGrip,pinchGrip:r().pinchGrip,sloperGrip:r().sloperGrip,jugGrip:r().jugGrip,climbs:r().climbs,notes:e(ie)};try{const W=await pa(r().id,X);W.ok?(ea(r().id),r().syncStatus="synced"):(console.error("Failed to sync note update:",W.error),Ft(r().id),r().syncStatus="error")}catch(W){console.error("Exception syncing note update:",W),Ft(r().id),r().syncStatus="error"}}l(te,!1),l(F,!1)}}var G=Ls();let $;var _e=a(G);_e.__click=w,_e.__keydown=X=>X.key==="Enter"&&w();var fe=a(_e),Se=a(fe),L=a(Se),O=a(L,!0);t(L);var k=s(L,2),J=a(k,!0);t(k);var V=s(k,2),M=a(V,!0);t(V),t(Se);var ve=s(Se,2),Z=a(ve),b=a(Z),_=a(b,!0);t(b);var c=s(b,2),v=a(c),d=a(v,!0);t(v);var x=s(v,2),A=a(x);t(x);var oe=s(x,2);{var j=X=>{var W=ss(),De=a(W);t(W),g(()=>o(De,`Max: ${e(ke)??""}`)),i(X,W)};p(oe,X=>{e(ce)>0&&X(j)})}t(c),t(Z);var ye=s(Z,2),ue=a(ye),Le=a(ue,!0);t(ue);var T=s(ue,2),ae=a(T,!0);t(T);var P=s(T,2),me=a(P,!0);t(P),t(ye),t(ve),t(fe);var we=s(fe,2),K=a(we),I=a(K);{var ee=X=>{var W=rs();i(X,W)},qe=X=>{var W=He(),De=Ie(W);{var Te=E=>{var S=is();i(E,S)};p(De,E=>{r().syncStatus==="error"&&E(Te)},!0)}i(X,W)};p(I,X=>{r().syncStatus==="pending"?X(ee):X(qe,!1)})}t(K);var Ce=s(K,2);Ce.__click=X=>{X.stopPropagation(),m()};var ge=s(Ce,2),be=a(ge,!0);t(ge),t(we),t(_e);var Y=s(_e,2);{var he=X=>{var W=zs(),De=a(W),Te=a(De),E=s(a(Te),2),S=a(E);{var R=H=>{var B=He(),f=Ie(B);Fe(f,17,()=>r().trainingTypes,Oe,(z,N)=>{var se=ls(),Q=a(se,!0);t(se),g(()=>o(Q,e(N))),i(z,se)}),i(H,B)},Ee=H=>{var B=ns();i(H,B)};p(S,H=>{r().trainingTypes&&r().trainingTypes.length>0&&!r().trainingTypes.includes("None")?H(R):H(Ee,!1)})}t(E),t(Te);var Pe=s(Te,2);{var Ae=H=>{var B=vs(),f=s(a(B),2),z=a(f,!0);t(f),t(B),g(()=>o(z,r().difficulty)),i(H,B)};p(Pe,H=>{r().difficulty&&H(Ae)})}var $e=s(Pe,2);{var Je=H=>{var B=cs(),f=s(a(B),2),z=a(f);{var N=Q=>{var pe=He(),je=Ie(pe);Fe(je,17,()=>r().categories,Oe,(et,Nt)=>{var ft=os(),Ot=a(ft,!0);t(ft),g(()=>o(Ot,e(Nt))),i(et,ft)}),i(Q,pe)},se=Q=>{var pe=ds();i(Q,pe)};p(z,Q=>{r().categories.length>0&&!r().categories.includes("None")?Q(N):Q(se,!1)})}t(f),t(B),i(H,B)};p($e,H=>{r().categories?.length&&H(Je)})}var Ze=s($e,2);{var qt=H=>{var B=ps(),f=s(a(B),2),z=a(f);{var N=Q=>{var pe=He(),je=Ie(pe);Fe(je,17,()=>r().energySystems,Oe,(et,Nt)=>{var ft=_s(),Ot=a(ft,!0);t(ft),g(()=>o(Ot,e(Nt))),i(et,ft)}),i(Q,pe)},se=Q=>{var pe=us();i(Q,pe)};p(z,Q=>{r().energySystems.length>0&&!r().energySystems.includes("None")?Q(N):Q(se,!1)})}t(f),t(B),i(H,B)};p(Ze,H=>{r().energySystems?.length&&H(qt)})}var ht=s(Ze,2);{var zt=H=>{var B=ms(),f=s(a(B),2),z=a(f);{var N=Q=>{var pe=He(),je=Ie(pe);Fe(je,17,()=>r().wallAngles,Oe,(et,Nt)=>{var ft=fs(),Ot=a(ft,!0);t(ft),g(()=>o(Ot,e(Nt))),i(et,ft)}),i(Q,pe)},se=Q=>{var pe=gs();i(Q,pe)};p(z,Q=>{r().wallAngles.length>0&&!r().wallAngles.includes("None")?Q(N):Q(se,!1)})}t(f),t(B),i(H,B)};p(ht,H=>{r().wallAngles?.length&&H(zt)})}t(De);var yt=s(De,2),Lt=a(yt),Dt=s(a(Lt),2);{var dt=H=>{var B=bs();B.__click=le,i(H,B)};p(Dt,H=>{e(te)||H(dt)})}t(Lt);var Xe=s(Lt,2);{var Re=H=>{var B=hs(),f=a(B);ta(f);var z=s(f,2),N=a(z);N.__click=de;var se=s(N,2);se.__click=ne;var Q=a(se,!0);t(se),t(z),t(B),g(()=>{N.disabled=e(F),se.disabled=e(F),o(Q,e(F)?"Saving...":"Save")}),Me(f,()=>e(ie),pe=>l(ie,pe)),Ye(3,B,()=>ot,()=>({duration:150})),i(H,B)},bt=H=>{var B=He(),f=Ie(B);{var z=se=>{var Q=ys(),pe=a(Q,!0);t(Q),g(()=>o(pe,r().notes)),i(se,Q)},N=se=>{var Q=xs();i(se,Q)};p(f,se=>{r().notes?se(z):se(N,!1)},!0)}i(H,B)};p(Xe,H=>{e(te)?H(Re):H(bt,!1)})}t(yt);var tt=s(yt,2),xt=a(tt),at=s(a(xt),2),Ge=a(at);t(at);var Ne=s(at,2),Ke=a(Ne);t(Ne),t(xt);var Ue=s(xt,2),st=s(a(Ue),2),Be=a(st);t(st);var We=s(st,2),ut=a(We);t(We),t(Ue);var kt=s(Ue,2),Tt=s(a(kt),2),Ct=a(Tt);t(Tt);var Qe=s(Tt,2),it=a(Qe);t(Qe),t(kt);var St=s(kt,2);{var Mt=H=>{var B=Ss(),f=s(a(B),2),z=a(f);t(f);var N=s(f,2),se=a(N);t(N),t(B),g(()=>{ct(z,`width: ${r().openGrip/5*100}%`),o(se,`${r().openGrip??""}/5`)}),i(H,B)};p(St,H=>{r().openGrip&&H(Mt)})}var pt=s(St,2);{var Wt=H=>{var B=ws(),f=s(a(B),2),z=a(f);t(f);var N=s(f,2),se=a(N);t(N),t(B),g(()=>{ct(z,`width: ${r().crimpGrip/5*100}%`),o(se,`${r().crimpGrip??""}/5`)}),i(H,B)};p(pt,H=>{r().crimpGrip&&H(Wt)})}var Et=s(pt,2);{var Rt=H=>{var B=Ds(),f=s(a(B),2),z=a(f);t(f);var N=s(f,2),se=a(N);t(N),t(B),g(()=>{ct(z,`width: ${r().pinchGrip/5*100}%`),o(se,`${r().pinchGrip??""}/5`)}),i(H,B)};p(Et,H=>{r().pinchGrip&&H(Rt)})}var Gt=s(Et,2);{var Kt=H=>{var B=ks(),f=s(a(B),2),z=a(f);t(f);var N=s(f,2),se=a(N);t(N),t(B),g(()=>{ct(z,`width: ${r().sloperGrip/5*100}%`),o(se,`${r().sloperGrip??""}/5`)}),i(H,B)};p(Gt,H=>{r().sloperGrip&&H(Kt)})}var Ht=s(Gt,2);{var Qt=H=>{var B=Ts(),f=s(a(B),2),z=a(f);t(f);var N=s(f,2),se=a(N);t(N),t(B),g(()=>{ct(z,`width: ${r().jugGrip/5*100}%`),o(se,`${r().jugGrip??""}/5`)}),i(H,B)};p(Ht,H=>{r().jugGrip&&H(Qt)})}t(tt);var Bt=s(tt,2),It=s(a(Bt),2),Pt=a(It);Fe(Pt,17,()=>r().climbs||[],Oe,(H,B,f)=>{{let z=lt(()=>r().climbingType==="Mixed");as(H,{get climb(){return e(B)},onDelete:()=>D(f),onUpdate:N=>U(f,N),get showClimbType(){return e(z)}})}});var Yt=s(Pt,2);{var Jt=H=>{var B=qs();i(H,B)};p(Yt,H=>{(r().climbs||[]).length===0&&H(Jt)})}t(It),t(Bt),t(W),g(()=>{ct(Ge,`width: ${r().fingerLoad/5*100}%`),o(Ke,`${r().fingerLoad??""}/5`),ct(Be,`width: ${r().shoulderLoad/5*100}%`),o(ut,`${r().shoulderLoad??""}/5`),ct(Ct,`width: ${r().forearmLoad/5*100}%`),o(it,`${r().forearmLoad??""}/5`)}),Ye(3,W,()=>ot,()=>({duration:150})),i(X,W)};p(Y,X=>{e(h)&&X(he)})}var xe=s(Y,2);aa(xe,{get isOpen(){return e(q)},title:"Delete Session",message:"Are you sure you want to delete this session? This action cannot be undone.",onConfirm:C,onCancel:()=>l(q,!1)}),t(G),g((X,W,De)=>{$=vt(G,1,"session-card svelte-7vqogn",null,$,{expanded:e(h)}),rt(_e,"aria-expanded",e(h)),o(O,X),o(J,W),o(M,De),o(_,r().location),o(d,r().climbingType),o(A,`${e(ce)??""} climbs`),rt(ue,"title",`Finger Load: ${r().fingerLoad??""}`),o(Le,r().fingerLoad),rt(T,"title",`Shoulder Load: ${r().shoulderLoad??""}`),o(ae,r().shoulderLoad),rt(P,"title",`Forearm Load: ${r().forearmLoad??""}`),o(me,r().forearmLoad),o(be,e(h)?"‚ñ≤":"‚ñº")},[()=>new Date(r().date).getDate(),()=>new Date(r().date).toLocaleDateString("en-GB",{month:"short"}),()=>new Date(r().date).getFullYear()]),i(ze,G),mt()}_t(["click","keydown"]);var Fs=n('<div class="legend-item svelte-11p9lqi"><span class="l-icon svelte-11p9lqi"> </span> <span class="l-label svelte-11p9lqi"> </span></div>'),Es=n('<div class="legend-content svelte-11p9lqi"><div class="legend-grid svelte-11p9lqi"></div></div>'),Gs=n('<div class="legend-container svelte-11p9lqi"><button class="legend-toggle svelte-11p9lqi"><span class="icon">‚ÑπÔ∏è</span> <span class="text">Icon Legend</span> <span class="chevron svelte-11p9lqi"> </span></button> <!></div>');function ha(ze){let u=y(!1);const r=[{icon:"üëÅÔ∏è",label:"Onsight"},{icon:"‚ö°",label:"Flash"},{icon:"üî¥",label:"Redpoint"},{icon:"üõ†Ô∏è",label:"Dogged"},{icon:"‚ùå",label:"DNF"}];var h=Gs(),q=a(h);q.__click=()=>l(u,!e(u));var w=s(a(q),4),m=a(w,!0);t(w),t(q);var C=s(q,2);{var D=U=>{var re=Es(),ce=a(re);Fe(ce,21,()=>r,Oe,(ke,te)=>{var ie=Fs(),F=a(ie),le=a(F,!0);t(F);var de=s(F,2),ne=a(de,!0);t(de),t(ie),g(()=>{o(le,e(te).icon),o(ne,e(te).label)}),i(ke,ie)}),t(ce),t(re),Ye(3,re,()=>ot),i(U,re)};p(C,U=>{e(u)&&U(D)})}t(h),g(()=>{rt(q,"aria-expanded",e(u)),o(m,e(u)?"‚ñº":"‚ñ∂")}),i(ze,h)}_t(["click"]);function _a(ze,u){if(!ze||ze.length===0){alert("No data to export");return}const r=Array.from(new Set(ze.flatMap(Object.keys))),h=[r.join(","),...ze.map(m=>r.map(C=>{let D=m[C];if(D==null)return"";if(typeof D=="object"){if(D instanceof Date)return D.toISOString();D=JSON.stringify(D).replace(/"/g,'""')}else typeof D=="string"&&(D=D.replace(/"/g,'""'));return typeof D=="string"&&(D.includes(",")||D.includes('"')||D.includes(`
`))?`"${D}"`:D}).join(","))].join(`
`),q=new Blob([h],{type:"text/csv;charset=utf-8;"}),w=document.createElement("a");if(w.download!==void 0){const m=URL.createObjectURL(q);w.setAttribute("href",m),w.setAttribute("download",u.endsWith(".csv")?u:`${u}.csv`),w.style.visibility="hidden",document.body.appendChild(w),w.click(),document.body.removeChild(w)}}var Ns=n('<span class="spinner svelte-14fqz8w"></span> Fetching...',1),Os=n('<div class="error-banner svelte-14fqz8w"> </div>'),As=n('<small class="svelte-14fqz8w">Try adjusting your filters.</small>'),js=n('<div class="empty-state svelte-14fqz8w"><p class="svelte-14fqz8w">No indoor climbing sessions found.</p> <!></div>'),Is=n('<div class="load-more-container svelte-14fqz8w"><button class="load-more-btn svelte-14fqz8w"> </button></div>'),Ps=n('<div class="view-container svelte-14fqz8w"><div class="view-header svelte-14fqz8w"><h2 class="view-title svelte-14fqz8w">üßó Indoor Climbing History</h2> <div class="header-actions svelte-14fqz8w"><button class="action-btn secondary svelte-14fqz8w" title="Export filtered data to CSV">üì• Export</button> <button class="action-btn svelte-14fqz8w" title="Fetch data from cloud"><!></button></div></div> <!> <!> <div class="info-bar svelte-14fqz8w"><div class="legend-wrapper svelte-14fqz8w"><!></div> <div class="load-key svelte-14fqz8w"><span class="key-label svelte-14fqz8w">Load:</span> <div class="key-item svelte-14fqz8w"><span class="dot finger svelte-14fqz8w"></span> Finger</div> <div class="key-item svelte-14fqz8w"><span class="dot shoulder svelte-14fqz8w"></span> Shoulder</div> <div class="key-item svelte-14fqz8w"><span class="dot forearm svelte-14fqz8w"></span> Forearm</div></div></div> <div class="sessions-list"><!> <!> <!></div></div>');function Ms(ze,u){gt(u,!0);let r=y(nt([])),h=y(nt([])),q=y(!1),w=y(""),m=y(nt({startDate:"",endDate:"",location:"",climbingType:"",sessionType:"",grade:""})),C=y(20);const D=20;ca(()=>{U()});function U(){const v=Zt("indoor_climb");l(r,v.sort((d,x)=>new Date(x.date).getTime()-new Date(d.date).getTime()),!0),te()}async function re(){l(q,!0),l(w,"");try{await sa();const v=ia("indoor_climb"),d=await Sa(v||void 0);d.ok&&d.data?(ce(d.data),la("indoor_climb",new Date().toISOString())):l(w,d.error||"Failed to fetch data",!0)}catch(v){l(w,v instanceof Error?v.message:"Unknown error",!0)}finally{l(q,!1)}}function ce(v){const d=v.map(A=>({...A,activityType:"indoor_climb",createdAt:new Date().toISOString(),updatedAt:new Date().toISOString(),syncStatus:"synced",syncedAt:new Date().toISOString(),openGrip:0,crimpGrip:0,pinchGrip:0,sloperGrip:0,jugGrip:0}));na(d);const x=Zt("indoor_climb");l(r,x.sort((A,oe)=>new Date(oe.date).getTime()-new Date(A.date).getTime()),!0),te()}function ke(v){l(m,v,!0),te()}function te(){l(C,D),l(h,e(r).filter(v=>{if(e(m).startDate&&v.date<e(m).startDate||e(m).endDate&&v.date>e(m).endDate||e(m).location&&v.location!==e(m).location)return!1;if(e(m).climbingType&&(v.climbingType==="Leading"?"Sport":v.climbingType)!==e(m).climbingType)if(v.climbingType==="Mixed")if(e(m).climbingType==="Bouldering"){if(!v.climbs.some(x=>!x.isSport))return!1}else if(e(m).climbingType==="Sport"){if(!v.climbs.some(x=>x.isSport))return!1}else return!1;else return!1;if(e(m).sessionType&&!v.trainingTypes?.includes(e(m).sessionType))return!1;if(e(m).grade){const d=e(m).grade.trim().toLowerCase();if(!v.climbs.some(A=>A.grade.trim().toLowerCase()===d))return!1}return!0}),!0)}function ie(){l(C,e(C)+D)}var F=Ps(),le=a(F),de=s(a(le),2),ne=a(de);ne.__click=()=>_a(e(h),"indoor_climbs");var G=s(ne,2);G.__click=re;var $=a(G);{var _e=v=>{var d=Ns();jt(),i(v,d)},fe=v=>{var d=At("‚òÅÔ∏è Fetch Data");i(v,d)};p($,v=>{e(q)?v(_e):v(fe,!1)})}t(G),t(de),t(le);var Se=s(le,2);{var L=v=>{var d=Os(),x=a(d,!0);t(d),g(()=>o(x,e(w))),Ye(3,d,()=>ot),i(v,d)};p(Se,v=>{e(w)&&v(L)})}var O=s(Se,2);Ba(O,{onFilterParamsChange:ke});var k=s(O,2),J=a(k),V=a(J);ha(V),t(J),jt(2),t(k);var M=s(k,2),ve=a(M);Fe(ve,17,()=>e(h).slice(0,e(C)),v=>v.id,(v,d)=>{Cs(v,{get session(){return e(d)},onDelete:U})});var Z=s(ve,2);{var b=v=>{var d=js(),x=s(a(d),2);{var A=oe=>{var j=As();i(oe,j)};p(x,oe=>{e(r).length>0&&oe(A)})}t(d),i(v,d)};p(Z,v=>{e(h).length===0&&v(b)})}var _=s(Z,2);{var c=v=>{var d=Is(),x=a(d);x.__click=ie;var A=a(x);t(x),t(d),g(()=>o(A,`Load More (${e(h).length-e(C)} remaining)`)),i(v,d)};p(_,v=>{e(C)<e(h).length&&v(c)})}t(M),t(F),g(()=>G.disabled=e(q)),i(ze,F),mt()}_t(["click"]);var Rs=n('<span class="chevron svelte-1frtlim">‚ñ≤</span>'),Bs=n('<span class="chevron svelte-1frtlim">‚ñº</span>'),Vs=n('<div class="input-with-action svelte-1frtlim"><input type="text" id="area-filter-text" placeholder="Type area name..." class="flat-left svelte-1frtlim"/> <button class="action-btn flat-right svelte-1frtlim" title="Back to list">‚úï</button></div>'),Us=n("<option> </option>"),Ws=n('<select id="area-filter" class="svelte-1frtlim"><option>All Areas</option><!><option>Other (Manual Entry)</option></select>'),Hs=n('<div class="input-with-action svelte-1frtlim"><input type="text" id="crag-filter-text" placeholder="Type crag name..." class="flat-left svelte-1frtlim"/> <button class="action-btn flat-right svelte-1frtlim" title="Back to list">‚úï</button></div>'),Ys=n("<option> </option>"),Js=n('<select id="crag-filter" class="svelte-1frtlim"><option>All Crags</option><!><option>Other (Manual Entry)</option></select>'),Zs=n('<input type="text" id="crag-filter-text" class="svelte-1frtlim"/>'),Xs=n("<option> </option>"),Ks=n("<option> </option>"),Qs=n('<div class="filter-body svelte-1frtlim"><div class="filter-grid svelte-1frtlim"><div class="filter-item svelte-1frtlim"><label for="start-date" class="svelte-1frtlim">Start Date</label> <input type="date" id="start-date" class="svelte-1frtlim"/></div> <div class="filter-item svelte-1frtlim"><label for="end-date" class="svelte-1frtlim">End Date</label> <input type="date" id="end-date" class="svelte-1frtlim"/></div> <div class="filter-item svelte-1frtlim"><label for="area-filter" class="svelte-1frtlim">Area</label> <!></div> <div class="filter-item svelte-1frtlim"><label for="crag-filter" class="svelte-1frtlim">Crag</label> <!></div> <div class="filter-item svelte-1frtlim"><label for="climbing-type-filter" class="svelte-1frtlim">Climb Type</label> <select id="climbing-type-filter" class="svelte-1frtlim"><option>Any Type</option><!></select></div> <div class="filter-item svelte-1frtlim"><label for="session-type-filter" class="svelte-1frtlim">Session Type</label> <select id="session-type-filter" class="svelte-1frtlim"><option>Any Type</option><!></select></div> <div class="filter-item svelte-1frtlim"><label for="grade-filter" class="svelte-1frtlim">Grade (Exact)</label> <input type="text" id="grade-filter" placeholder="e.g. 7a" class="svelte-1frtlim"/></div></div> <div class="filter-actions svelte-1frtlim"><button class="reset-btn svelte-1frtlim">Reset Filters</button></div></div>'),$s=n('<div class="filter-container svelte-1frtlim"><button class="filter-header svelte-1frtlim"><div class="header-content svelte-1frtlim"><span class="icon svelte-1frtlim">üîç</span> <span class="title svelte-1frtlim">Filters</span> <!></div></button> <!></div>');function er(ze,u){gt(u,!0);const r=wa(),h=["Bouldering","Sport","Mixed","Trad"],q=["Projecting","Onsighting","Campusing","Repeaters","Fun","Volume"];let w=y(!1),m=y(""),C=y(""),D=y(""),U=y(""),re=y(""),ce=y(""),ke=y(""),te=y(!1),ie=y(!1),F=lt(()=>e(D)&&e(D)!=="Other"?Da(e(D)):[]);function le(){e(D)==="Other"?(l(te,!0),l(D,"")):l(te,!1),l(U,""),l(ie,!1),$()}function de(){e(U)==="Other"?(l(ie,!0),l(U,"")):l(ie,!1),$()}function ne(){l(w,!e(w))}function G(){l(m,""),l(C,""),l(D,""),l(U,""),l(re,""),l(ce,""),l(ke,""),l(te,!1),l(ie,!1),$()}function $(){u.onFilterParamsChange({startDate:e(m),endDate:e(C),area:e(D),crag:e(U),climbingType:e(re),sessionType:e(ce),grade:e(ke)})}var _e=$s(),fe=a(_e);fe.__click=ne;var Se=a(fe),L=s(a(Se),4);{var O=M=>{var ve=Rs();i(M,ve)},k=M=>{var ve=Bs();i(M,ve)};p(L,M=>{e(w)?M(O):M(k,!1)})}t(Se),t(fe);var J=s(fe,2);{var V=M=>{var ve=Qs(),Z=a(ve),b=a(Z),_=s(a(b),2);Ve(_),_.__change=$,t(b);var c=s(b,2),v=s(a(c),2);Ve(v),v.__change=$,t(c);var d=s(c,2),x=s(a(d),2);{var A=Y=>{var he=Vs(),xe=a(he);Ve(xe),xe.__input=$;var X=s(xe,2);X.__click=()=>{l(te,!1),l(D,""),$()},t(he),Me(xe,()=>e(D),W=>l(D,W)),i(Y,he)},oe=Y=>{var he=Ws();he.__change=le;var xe=a(he);xe.value=xe.__value="";var X=s(xe);Fe(X,17,()=>r,Oe,(De,Te)=>{var E=Us(),S=a(E,!0);t(E);var R={};g(()=>{o(S,e(Te)),R!==(R=e(Te))&&(E.value=(E.__value=e(Te))??"")}),i(De,E)});var W=s(X);W.value=W.__value="Other",t(he),wt(he,()=>e(D),De=>l(D,De)),i(Y,he)};p(x,Y=>{e(te)?Y(A):Y(oe,!1)})}t(d);var j=s(d,2),ye=s(a(j),2);{var ue=Y=>{var he=Hs(),xe=a(he);Ve(xe),xe.__input=$;var X=s(xe,2);X.__click=()=>{l(ie,!1),l(U,""),$()},t(he),Me(xe,()=>e(U),W=>l(U,W)),i(Y,he)},Le=Y=>{var he=He(),xe=Ie(he);{var X=De=>{var Te=Js();Te.__change=de;var E=a(Te);E.value=E.__value="";var S=s(E);Fe(S,17,()=>e(F),Oe,(Ee,Pe)=>{var Ae=Ys(),$e=a(Ae,!0);t(Ae);var Je={};g(()=>{o($e,e(Pe)),Je!==(Je=e(Pe))&&(Ae.value=(Ae.__value=e(Pe))??"")}),i(Ee,Ae)});var R=s(S);R.value=R.__value="Other",t(Te),wt(Te,()=>e(U),Ee=>l(U,Ee)),i(De,Te)},W=De=>{var Te=Zs();Ve(Te),Te.__input=$,g(()=>{rt(Te,"placeholder",e(D)?"Filter crag...":"Select area first"),Te.disabled=!e(te)&&!e(D)}),Me(Te,()=>e(U),E=>l(U,E)),i(De,Te)};p(xe,De=>{!e(te)&&e(D)&&e(F).length>0?De(X):De(W,!1)},!0)}i(Y,he)};p(ye,Y=>{e(ie)?Y(ue):Y(Le,!1)})}t(j);var T=s(j,2),ae=s(a(T),2);ae.__change=$;var P=a(ae);P.value=P.__value="";var me=s(P);Fe(me,17,()=>h,Oe,(Y,he)=>{var xe=Xs(),X=a(xe,!0);t(xe);var W={};g(()=>{o(X,e(he)),W!==(W=e(he))&&(xe.value=(xe.__value=e(he))??"")}),i(Y,xe)}),t(ae),t(T);var we=s(T,2),K=s(a(we),2);K.__change=$;var I=a(K);I.value=I.__value="";var ee=s(I);Fe(ee,17,()=>q,Oe,(Y,he)=>{var xe=Ks(),X=a(xe,!0);t(xe);var W={};g(()=>{o(X,e(he)),W!==(W=e(he))&&(xe.value=(xe.__value=e(he))??"")}),i(Y,xe)}),t(K),t(we);var qe=s(we,2),Ce=s(a(qe),2);Ve(Ce),Ce.__input=$,t(qe),t(Z);var ge=s(Z,2),be=a(ge);be.__click=G,t(ge),t(ve),Me(_,()=>e(m),Y=>l(m,Y)),Me(v,()=>e(C),Y=>l(C,Y)),wt(ae,()=>e(re),Y=>l(re,Y)),wt(K,()=>e(ce),Y=>l(ce,Y)),Me(Ce,()=>e(ke),Y=>l(ke,Y)),Ye(3,ve,()=>ot,()=>({duration:200})),i(M,ve)};p(J,M=>{e(w)&&M(V)})}t(_e),g(()=>rt(fe,"aria-expanded",e(w))),i(ze,_e),mt()}_t(["click","change","input"]);var tr=n('<label class="type-toggle svelte-1k6anfh"><input type="checkbox"/> <span>Sport?</span></label>'),ar=n("<option> </option>"),sr=n('<div class="edit-form svelte-1k6anfh"><div class="edit-row main svelte-1k6anfh"><input type="text" class="edit-input grade svelte-1k6anfh" placeholder="Grade"/> <input type="text" class="edit-input name svelte-1k6anfh" placeholder="Route Name"/> <!></div> <div class="edit-row meta svelte-1k6anfh"><select class="edit-select svelte-1k6anfh"></select> <div class="attempts-input-wrapper svelte-1k6anfh"><span>#</span> <input type="number" min="1" class="edit-input num svelte-1k6anfh"/></div></div> <div class="edit-row notes svelte-1k6anfh"><textarea class="edit-input notes-area svelte-1k6anfh" placeholder="Notes..."></textarea></div> <div class="edit-actions svelte-1k6anfh"><button class="action-btn cancel svelte-1k6anfh">Cancel</button> <button class="action-btn save svelte-1k6anfh">Save</button></div></div>'),rr=n('<span class="climb-type-tag svelte-1k6anfh"> </span>'),ir=n('<span class="notes-preview svelte-1k6anfh"> </span>'),lr=n('<span class="attempts-count svelte-1k6anfh"> </span>'),nr=n('<div class="detail-row svelte-1k6anfh"><span class="label svelte-1k6anfh">Notes:</span> <p class="notes svelte-1k6anfh"> </p></div>'),vr=n('<p class="empty-notes svelte-1k6anfh">No notes for this climb.</p>'),or=n('<span class="tag wall-tag svelte-1k6anfh"> </span>'),dr=n('<span class="tag technique-tag svelte-1k6anfh"> </span>'),cr=n('<div class="climb-details svelte-1k6anfh"><!> <div class="tags svelte-1k6anfh"><span class="tag type svelte-1k6anfh"> </span> <!> <!> <span class="tag attempt-text svelte-1k6anfh"> </span></div></div>'),_r=n('<div class="climb-header svelte-1k6anfh" role="button" tabindex="0"><div class="climb-main-info svelte-1k6anfh"><span> </span> <span class="climb-name svelte-1k6anfh"> </span> <!> <!></div> <div class="climb-meta svelte-1k6anfh"><span><span class="icon svelte-1k6anfh"> </span> <!></span> <button class="icon-btn edit-btn svelte-1k6anfh" aria-label="Edit climb" title="Edit climb">‚úé</button> <button class="icon-btn delete-btn svelte-1k6anfh" aria-label="Delete climb" title="Delete climb">üóëÔ∏è</button> <span class="chevron svelte-1k6anfh"> </span></div></div> <!>',1),ur=n("<div><!></div>");function pr(ze,u){gt(u,!0);let r=Xt(u,"showClimbType",3,!1),h=y(!1),q=y(!1),w=y(""),m=y(""),C=y(""),D=y(1),U=y(""),re=y(!1);function ce(){e(q)||l(h,!e(h))}function ke(L){L.stopPropagation(),u.onDelete()}function te(L){L.stopPropagation(),l(w,u.climb.name,!0),l(m,u.climb.grade,!0),l(C,u.climb.attemptType,!0),l(D,u.climb.attemptsNum,!0),l(U,u.climb.notes,!0),l(re,u.climb.isSport,!0),l(q,!0),l(h,!0)}function ie(L){L.stopPropagation(),l(q,!1)}function F(L){L.stopPropagation();const O={...u.climb,name:e(w),grade:e(m),attemptType:e(C),attemptsNum:e(D),notes:e(U),isSport:e(re)};u.onUpdate(O),l(q,!1)}function le(){(e(C)==="Flash"||e(C)==="Onsight")&&l(D,1)}const de={Flash:"‚ö°",Onsight:"üëÅÔ∏è",Redpoint:"üî¥",Dogged:"üõ†Ô∏è",DNF:"‚ùå"},ne=["Flash","Onsight","Redpoint","Dogged","DNF"];var G=ur();let $;var _e=a(G);{var fe=L=>{var O=sr(),k=a(O),J=a(k);Ve(J);var V=s(J,2);Ve(V);var M=s(V,2);{var ve=j=>{var ye=tr(),ue=a(ye);Ve(ue),jt(2),t(ye),ga(ue,()=>e(re),Le=>l(re,Le)),i(j,ye)};p(M,j=>{r()&&j(ve)})}t(k);var Z=s(k,2),b=a(Z);b.__change=le,Fe(b,21,()=>ne,Oe,(j,ye)=>{var ue=ar(),Le=a(ue,!0);t(ue);var T={};g(()=>{o(Le,e(ye)),T!==(T=e(ye))&&(ue.value=(ue.__value=e(ye))??"")}),i(j,ue)}),t(b);var _=s(b,2),c=s(a(_),2);Ve(c),t(_),t(Z);var v=s(Z,2),d=a(v);ta(d),t(v);var x=s(v,2),A=a(x);A.__click=ie;var oe=s(A,2);oe.__click=F,t(x),t(O),g(()=>c.disabled=e(C)==="Flash"||e(C)==="Onsight"),Me(J,()=>e(m),j=>l(m,j)),Me(V,()=>e(w),j=>l(w,j)),wt(b,()=>e(C),j=>l(C,j)),Me(c,()=>e(D),j=>l(D,j)),Me(d,()=>e(U),j=>l(U,j)),i(L,O)},Se=L=>{var O=_r(),k=Ie(O);k.__click=ce,k.__keydown=I=>(I.key==="Enter"||I.key===" ")&&ce();var J=a(k),V=a(J);let M;var ve=a(V,!0);t(V);var Z=s(V,2),b=a(Z,!0);t(Z);var _=s(Z,2);{var c=I=>{var ee=rr(),qe=a(ee,!0);t(ee),g(()=>o(qe,u.climb.isSport?"Sport":"Boulder")),i(I,ee)};p(_,I=>{r()&&I(c)})}var v=s(_,2);{var d=I=>{var ee=ir(),qe=a(ee);t(ee),g(()=>o(qe,`- ${u.climb.notes??""}`)),i(I,ee)};p(v,I=>{!e(h)&&u.climb.notes&&I(d)})}t(J);var x=s(J,2),A=a(x);let oe;var j=a(A),ye=a(j,!0);t(j);var ue=s(j,2);{var Le=I=>{var ee=lr(),qe=a(ee,!0);t(ee),g(()=>o(qe,u.climb.attemptsNum)),i(I,ee)};p(ue,I=>{u.climb.attemptType!=="Flash"&&u.climb.attemptType!=="Onsight"&&I(Le)})}t(A);var T=s(A,2);T.__click=te;var ae=s(T,2);ae.__click=ke;var P=s(ae,2),me=a(P,!0);t(P),t(x),t(k);var we=s(k,2);{var K=I=>{var ee=cr(),qe=a(ee);{var Ce=S=>{var R=nr(),Ee=s(a(R),2),Pe=a(Ee,!0);t(Ee),t(R),g(()=>o(Pe,u.climb.notes)),i(S,R)},ge=S=>{var R=vr();i(S,R)};p(qe,S=>{u.climb.notes?S(Ce):S(ge,!1)})}var be=s(qe,2),Y=a(be),he=a(Y,!0);t(Y);var xe=s(Y,2);{var X=S=>{var R=or(),Ee=a(R,!0);t(R),g(()=>o(Ee,u.climb.wall)),i(S,R)};p(xe,S=>{u.climb.wall&&S(X)})}var W=s(xe,2);{var De=S=>{var R=dr(),Ee=a(R,!0);t(R),g(()=>o(Ee,u.climb.techniqueFocus)),i(S,R)};p(W,S=>{u.climb.techniqueFocus&&S(De)})}var Te=s(W,2),E=a(Te,!0);t(Te),t(be),t(ee),g(()=>{o(he,u.climb.isSport?"Sport":"Boulder"),o(E,u.climb.attemptType)}),Ye(3,ee,()=>ot,()=>({duration:150})),i(I,ee)};p(we,I=>{e(h)&&I(K)})}g(()=>{rt(k,"aria-expanded",e(h)),M=vt(V,1,"grade-badge svelte-1k6anfh",null,M,{sport:u.climb.isSport}),o(ve,u.climb.grade),o(b,u.climb.name||"Unnamed Route"),oe=vt(A,1,"attempt-type svelte-1k6anfh",null,oe,{flash:u.climb.attemptType==="Flash"}),o(ye,de[u.climb.attemptType]||u.climb.attemptType),o(me,e(h)?"‚ñ≤":"‚ñº")}),i(L,O)};p(_e,L=>{e(q)?L(fe):L(Se,!1)})}t(G),g(()=>$=vt(G,1,"climb-entry svelte-1k6anfh",null,$,{expanded:e(h),editing:e(q)})),i(ze,G),mt()}_t(["change","click","keydown"]);var fr=n('<div class="sector-meta"> </div>'),gr=n('<span class="stat svelte-d5hg2r"> </span>'),mr=n('<span class="status-icon pending svelte-d5hg2r" title="Waiting to sync">üîÑ</span>'),br=n('<span class="status-icon error svelte-d5hg2r" title="Sync error">‚ö†Ô∏è</span>'),hr=n('<span class="chip svelte-d5hg2r"> </span>'),yr=n('<span class="text-none svelte-d5hg2r">None</span>'),xr=n('<div class="detail-item svelte-d5hg2r"><span class="label svelte-d5hg2r">Difficulty</span> <span class="value svelte-d5hg2r"> </span></div>'),Sr=n('<span class="chip svelte-d5hg2r"> </span>'),wr=n('<span class="text-none svelte-d5hg2r">None</span>'),Dr=n('<div class="detail-item svelte-d5hg2r"><span class="label svelte-d5hg2r">Category</span> <div class="value-chips svelte-d5hg2r"><!></div></div>'),kr=n('<span class="chip svelte-d5hg2r"> </span>'),Tr=n('<span class="text-none svelte-d5hg2r">None</span>'),qr=n('<div class="detail-item svelte-d5hg2r"><span class="label svelte-d5hg2r">Energy System</span> <div class="value-chips svelte-d5hg2r"><!></div></div>'),zr=n('<button class="icon-btn edit-notes-btn svelte-d5hg2r" title="Edit Notes">‚úé</button>'),Lr=n('<div class="edit-notes-area"><textarea placeholder="Add session notes..." rows="3" class="notes-editor svelte-d5hg2r"></textarea> <div class="edit-actions svelte-d5hg2r"><button class="cancel-btn svelte-d5hg2r">Cancel</button> <button class="save-btn svelte-d5hg2r"> </button></div></div>'),Cr=n('<p class="notes-text svelte-d5hg2r"> </p>'),Fr=n('<p class="notes-placeholder svelte-d5hg2r">No notes.</p>'),Er=n('<div class="metric svelte-d5hg2r"><span class="label svelte-d5hg2r">Open Grip</span> <div class="bar-container svelte-d5hg2r"><div class="bar-fill svelte-d5hg2r"></div></div> <span class="score svelte-d5hg2r"> </span></div>'),Gr=n('<div class="metric svelte-d5hg2r"><span class="label svelte-d5hg2r">Crimp Grip</span> <div class="bar-container svelte-d5hg2r"><div class="bar-fill svelte-d5hg2r"></div></div> <span class="score svelte-d5hg2r"> </span></div>'),Nr=n('<div class="metric svelte-d5hg2r"><span class="label svelte-d5hg2r">Pinch Grip</span> <div class="bar-container svelte-d5hg2r"><div class="bar-fill svelte-d5hg2r"></div></div> <span class="score svelte-d5hg2r"> </span></div>'),Or=n('<div class="metric svelte-d5hg2r"><span class="label svelte-d5hg2r">Sloper Grip</span> <div class="bar-container svelte-d5hg2r"><div class="bar-fill svelte-d5hg2r"></div></div> <span class="score svelte-d5hg2r"> </span></div>'),Ar=n('<div class="metric svelte-d5hg2r"><span class="label svelte-d5hg2r">Jug Grip</span> <div class="bar-container svelte-d5hg2r"><div class="bar-fill svelte-d5hg2r"></div></div> <span class="score svelte-d5hg2r"> </span></div>'),jr=n('<p class="no-climbs svelte-d5hg2r">No climbs logged for this session.</p>'),Ir=n('<div class="card-body svelte-d5hg2r"><div class="details-grid svelte-d5hg2r"><div class="detail-item svelte-d5hg2r"><span class="label svelte-d5hg2r">Training Type</span> <div class="value-chips svelte-d5hg2r"><!></div></div> <!> <!> <!></div> <div class="notes-container svelte-d5hg2r"><div class="notes-header svelte-d5hg2r"><span class="label svelte-d5hg2r">Session Notes</span> <!></div> <!></div> <div class="metrics-container svelte-d5hg2r"><div class="metric svelte-d5hg2r"><span class="label svelte-d5hg2r">Finger Load</span> <div class="bar-container svelte-d5hg2r"><div class="bar-fill svelte-d5hg2r"></div></div> <span class="score svelte-d5hg2r"> </span></div> <div class="metric svelte-d5hg2r"><span class="label svelte-d5hg2r">Shoulder Load</span> <div class="bar-container svelte-d5hg2r"><div class="bar-fill svelte-d5hg2r"></div></div> <span class="score svelte-d5hg2r"> </span></div> <div class="metric svelte-d5hg2r"><span class="label svelte-d5hg2r">Forearm Load</span> <div class="bar-container svelte-d5hg2r"><div class="bar-fill svelte-d5hg2r"></div></div> <span class="score svelte-d5hg2r"> </span></div> <!> <!> <!> <!> <!></div> <div class="climbs-list svelte-d5hg2r"><h4 class="svelte-d5hg2r">Climbs</h4> <div class="climbs-container svelte-d5hg2r"><!> <!></div></div></div>'),Pr=n('<div><div class="card-header svelte-d5hg2r" role="button" tabindex="0"><div class="header-main svelte-d5hg2r"><div class="date-badge svelte-d5hg2r"><span class="day svelte-d5hg2r"> </span> <span class="month svelte-d5hg2r"> </span> <span class="year svelte-d5hg2r"> </span></div> <div class="session-info svelte-d5hg2r"><div class="session-text svelte-d5hg2r"><h3 class="location svelte-d5hg2r"> <!></h3> <!> <div class="session-meta svelte-d5hg2r"><span class="type-tag svelte-d5hg2r"> </span> <span class="stat svelte-d5hg2r"> </span> <!></div></div> <div class="load-summary svelte-d5hg2r"><div class="load-badge finger svelte-d5hg2r"> </div> <div class="load-badge shoulder svelte-d5hg2r"> </div> <div class="load-badge forearm svelte-d5hg2r"> </div></div></div></div> <div class="header-actions"><div class="header-status svelte-d5hg2r"><!></div> <button class="btn-icon delete-session" title="Delete Session">üóëÔ∏è</button> <span class="chevron svelte-d5hg2r"> </span></div></div> <!> <!></div>');function Mr(ze,u){gt(u,!0);let r=Xt(u,"session",7),h=y(!1),q=y(!1);function w(){l(h,!e(h))}function m(){l(q,!0)}function C(){ra(r().id),l(q,!1),u.onDelete()}function D(E){const S=[...r().climbs];S.splice(E,1),Ut(r().id,{climbs:S}),u.onDelete()}function U(E,S){const R=[...r().climbs];R[E]=S,re(R)}async function re(E){if(Ut(r().id,{climbs:E}),r().climbs=E,$t()){const S={date:r().date,area:r().area,crag:r().crag,sector:r().sector,climbingType:r().climbingType,trainingTypes:r().trainingTypes||[],difficulty:r().difficulty,categories:r().categories||[],energySystems:r().energySystems||[],fingerLoad:r().fingerLoad,shoulderLoad:r().shoulderLoad,forearmLoad:r().forearmLoad,climbs:E};try{const R=await fa(r().id,S);R.ok?(ea(r().id),r().syncStatus="synced"):(console.error("Failed to sync update:",R.error),Ft(r().id),r().syncStatus="error")}catch(R){console.error("Exception syncing update:",R),Ft(r().id),r().syncStatus="error"}}}let ce=lt(()=>r().climbs?.length??0),ke=lt(()=>(r().climbs||[]).reduce((E,S)=>{const R=parseInt(S.grade.replace(/\D/g,""))||0,Ee=parseInt(E.replace(/\D/g,""))||0;return R>Ee?S.grade:E},"V0/4a")),te=y(!1),ie=y(""),F=y(!1);function le(){l(ie,r().notes||"",!0),l(te,!0)}function de(){l(te,!1),l(ie,"")}async function ne(){if(!e(F)){if(l(F,!0),r().notes,r().notes=e(ie),Ut(r().id,{notes:e(ie)}),$t()){const E={date:r().date,area:r().area,crag:r().crag,sector:r().sector,climbingType:r().climbingType,trainingTypes:r().trainingTypes||[],difficulty:r().difficulty,categories:r().categories||[],energySystems:r().energySystems||[],fingerLoad:r().fingerLoad,shoulderLoad:r().shoulderLoad,forearmLoad:r().forearmLoad,climbs:r().climbs,notes:e(ie)};try{const S=await fa(r().id,E);S.ok?(ea(r().id),r().syncStatus="synced"):(console.error("Failed to sync note update:",S.error),Ft(r().id),r().syncStatus="error")}catch(S){console.error("Exception syncing note update:",S),Ft(r().id),r().syncStatus="error"}}l(te,!1),l(F,!1)}}var G=Pr();let $;var _e=a(G);_e.__click=w,_e.__keydown=E=>E.key==="Enter"&&w();var fe=a(_e),Se=a(fe),L=a(Se),O=a(L,!0);t(L);var k=s(L,2),J=a(k,!0);t(k);var V=s(k,2),M=a(V,!0);t(V),t(Se);var ve=s(Se,2),Z=a(ve),b=a(Z),_=a(b),c=s(_);{var v=E=>{var S=At();g(()=>o(S,`- ${r().crag??""}`)),i(E,S)};p(c,E=>{r().crag&&E(v)})}t(b);var d=s(b,2);{var x=E=>{var S=fr(),R=a(S);t(S),g(()=>o(R,`üìç ${r().sector??""}`)),i(E,S)};p(d,E=>{r().sector&&E(x)})}var A=s(d,2),oe=a(A),j=a(oe,!0);t(oe);var ye=s(oe,2),ue=a(ye);t(ye);var Le=s(ye,2);{var T=E=>{var S=gr(),R=a(S);t(S),g(()=>o(R,`Max: ${e(ke)??""}`)),i(E,S)};p(Le,E=>{e(ce)>0&&E(T)})}t(A),t(Z);var ae=s(Z,2),P=a(ae),me=a(P,!0);t(P);var we=s(P,2),K=a(we,!0);t(we);var I=s(we,2),ee=a(I,!0);t(I),t(ae),t(ve),t(fe);var qe=s(fe,2),Ce=a(qe),ge=a(Ce);{var be=E=>{var S=mr();i(E,S)},Y=E=>{var S=He(),R=Ie(S);{var Ee=Pe=>{var Ae=br();i(Pe,Ae)};p(R,Pe=>{r().syncStatus==="error"&&Pe(Ee)},!0)}i(E,S)};p(ge,E=>{r().syncStatus==="pending"?E(be):E(Y,!1)})}t(Ce);var he=s(Ce,2);he.__click=E=>{E.stopPropagation(),m()};var xe=s(he,2),X=a(xe,!0);t(xe),t(qe),t(_e);var W=s(_e,2);{var De=E=>{var S=Ir(),R=a(S),Ee=a(R),Pe=s(a(Ee),2),Ae=a(Pe);{var $e=f=>{var z=He(),N=Ie(z);Fe(N,17,()=>r().trainingTypes,Oe,(se,Q)=>{var pe=hr(),je=a(pe,!0);t(pe),g(()=>o(je,e(Q))),i(se,pe)}),i(f,z)},Je=f=>{var z=yr();i(f,z)};p(Ae,f=>{r().trainingTypes&&r().trainingTypes.length>0&&!r().trainingTypes.includes("None")?f($e):f(Je,!1)})}t(Pe),t(Ee);var Ze=s(Ee,2);{var qt=f=>{var z=xr(),N=s(a(z),2),se=a(N,!0);t(N),t(z),g(()=>o(se,r().difficulty)),i(f,z)};p(Ze,f=>{r().difficulty&&f(qt)})}var ht=s(Ze,2);{var zt=f=>{var z=Dr(),N=s(a(z),2),se=a(N);{var Q=je=>{var et=He(),Nt=Ie(et);Fe(Nt,17,()=>r().categories,Oe,(ft,Ot)=>{var Vt=Sr(),va=a(Vt,!0);t(Vt),g(()=>o(va,e(Ot))),i(ft,Vt)}),i(je,et)},pe=je=>{var et=wr();i(je,et)};p(se,je=>{r().categories.length>0&&!r().categories.includes("None")?je(Q):je(pe,!1)})}t(N),t(z),i(f,z)};p(ht,f=>{r().categories?.length&&f(zt)})}var yt=s(ht,2);{var Lt=f=>{var z=qr(),N=s(a(z),2),se=a(N);{var Q=je=>{var et=He(),Nt=Ie(et);Fe(Nt,17,()=>r().energySystems,Oe,(ft,Ot)=>{var Vt=kr(),va=a(Vt,!0);t(Vt),g(()=>o(va,e(Ot))),i(ft,Vt)}),i(je,et)},pe=je=>{var et=Tr();i(je,et)};p(se,je=>{r().energySystems.length>0&&!r().energySystems.includes("None")?je(Q):je(pe,!1)})}t(N),t(z),i(f,z)};p(yt,f=>{r().energySystems?.length&&f(Lt)})}t(R);var Dt=s(R,2),dt=a(Dt),Xe=s(a(dt),2);{var Re=f=>{var z=zr();z.__click=le,i(f,z)};p(Xe,f=>{e(te)||f(Re)})}t(dt);var bt=s(dt,2);{var tt=f=>{var z=Lr(),N=a(z);ta(N);var se=s(N,2),Q=a(se);Q.__click=de;var pe=s(Q,2);pe.__click=ne;var je=a(pe,!0);t(pe),t(se),t(z),g(()=>{Q.disabled=e(F),pe.disabled=e(F),o(je,e(F)?"Saving...":"Save")}),Me(N,()=>e(ie),et=>l(ie,et)),Ye(3,z,()=>ot,()=>({duration:150})),i(f,z)},xt=f=>{var z=He(),N=Ie(z);{var se=pe=>{var je=Cr(),et=a(je,!0);t(je),g(()=>o(et,r().notes)),i(pe,je)},Q=pe=>{var je=Fr();i(pe,je)};p(N,pe=>{r().notes?pe(se):pe(Q,!1)},!0)}i(f,z)};p(bt,f=>{e(te)?f(tt):f(xt,!1)})}t(Dt);var at=s(Dt,2),Ge=a(at),Ne=s(a(Ge),2),Ke=a(Ne);t(Ne);var Ue=s(Ne,2),st=a(Ue);t(Ue),t(Ge);var Be=s(Ge,2),We=s(a(Be),2),ut=a(We);t(We);var kt=s(We,2),Tt=a(kt);t(kt),t(Be);var Ct=s(Be,2),Qe=s(a(Ct),2),it=a(Qe);t(Qe);var St=s(Qe,2),Mt=a(St);t(St),t(Ct);var pt=s(Ct,2);{var Wt=f=>{var z=Er(),N=s(a(z),2),se=a(N);t(N);var Q=s(N,2),pe=a(Q);t(Q),t(z),g(()=>{ct(se,`width: ${r().openGrip/5*100}%`),o(pe,`${r().openGrip??""}/5`)}),i(f,z)};p(pt,f=>{r().openGrip&&f(Wt)})}var Et=s(pt,2);{var Rt=f=>{var z=Gr(),N=s(a(z),2),se=a(N);t(N);var Q=s(N,2),pe=a(Q);t(Q),t(z),g(()=>{ct(se,`width: ${r().crimpGrip/5*100}%`),o(pe,`${r().crimpGrip??""}/5`)}),i(f,z)};p(Et,f=>{r().crimpGrip&&f(Rt)})}var Gt=s(Et,2);{var Kt=f=>{var z=Nr(),N=s(a(z),2),se=a(N);t(N);var Q=s(N,2),pe=a(Q);t(Q),t(z),g(()=>{ct(se,`width: ${r().pinchGrip/5*100}%`),o(pe,`${r().pinchGrip??""}/5`)}),i(f,z)};p(Gt,f=>{r().pinchGrip&&f(Kt)})}var Ht=s(Gt,2);{var Qt=f=>{var z=Or(),N=s(a(z),2),se=a(N);t(N);var Q=s(N,2),pe=a(Q);t(Q),t(z),g(()=>{ct(se,`width: ${r().sloperGrip/5*100}%`),o(pe,`${r().sloperGrip??""}/5`)}),i(f,z)};p(Ht,f=>{r().sloperGrip&&f(Qt)})}var Bt=s(Ht,2);{var It=f=>{var z=Ar(),N=s(a(z),2),se=a(N);t(N);var Q=s(N,2),pe=a(Q);t(Q),t(z),g(()=>{ct(se,`width: ${r().jugGrip/5*100}%`),o(pe,`${r().jugGrip??""}/5`)}),i(f,z)};p(Bt,f=>{r().jugGrip&&f(It)})}t(at);var Pt=s(at,2),Yt=s(a(Pt),2),Jt=a(Yt);Fe(Jt,17,()=>r().climbs||[],Oe,(f,z,N)=>{{let se=lt(()=>r().climbingType==="Mixed");pr(f,{get climb(){return e(z)},onDelete:()=>D(N),onUpdate:Q=>U(N,Q),get showClimbType(){return e(se)}})}});var H=s(Jt,2);{var B=f=>{var z=jr();i(f,z)};p(H,f=>{(r().climbs||[]).length===0&&f(B)})}t(Yt),t(Pt),t(S),g(()=>{ct(Ke,`width: ${r().fingerLoad/5*100}%`),o(st,`${r().fingerLoad??""}/5`),ct(ut,`width: ${r().shoulderLoad/5*100}%`),o(Tt,`${r().shoulderLoad??""}/5`),ct(it,`width: ${r().forearmLoad/5*100}%`),o(Mt,`${r().forearmLoad??""}/5`)}),Ye(3,S,()=>ot,()=>({duration:150})),i(E,S)};p(W,E=>{e(h)&&E(De)})}var Te=s(W,2);aa(Te,{get isOpen(){return e(q)},title:"Delete Session",message:"Are you sure you want to delete this session? This action cannot be undone.",onConfirm:C,onCancel:()=>l(q,!1)}),t(G),g((E,S,R)=>{$=vt(G,1,"session-card svelte-d5hg2r",null,$,{expanded:e(h)}),rt(_e,"aria-expanded",e(h)),o(O,E),o(J,S),o(M,R),o(_,`${r().area??""} `),o(j,r().climbingType),o(ue,`${e(ce)??""} climbs`),rt(P,"title",`Finger Load: ${r().fingerLoad??""}`),o(me,r().fingerLoad),rt(we,"title",`Shoulder Load: ${r().shoulderLoad??""}`),o(K,r().shoulderLoad),rt(I,"title",`Forearm Load: ${r().forearmLoad??""}`),o(ee,r().forearmLoad),o(X,e(h)?"‚ñ≤":"‚ñº")},[()=>new Date(r().date).getDate(),()=>new Date(r().date).toLocaleDateString(void 0,{month:"short"}),()=>new Date(r().date).getFullYear()]),i(ze,G),mt()}_t(["click","keydown"]);var Rr=n('<span class="spinner svelte-1s7jdlh"></span> Fetching...',1),Br=n('<div class="error-banner svelte-1s7jdlh"> </div>'),Vr=n('<small class="svelte-1s7jdlh">Try adjusting your filters.</small>'),Ur=n('<div class="empty-state svelte-1s7jdlh"><p class="svelte-1s7jdlh">No outdoor climbing sessions found.</p> <!></div>'),Wr=n('<div class="load-more-container svelte-1s7jdlh"><button class="load-more-btn svelte-1s7jdlh"> </button></div>'),Hr=n('<div class="view-container svelte-1s7jdlh"><div class="view-header svelte-1s7jdlh"><h2 class="view-title svelte-1s7jdlh">‚õ∞Ô∏è Outdoor Climbing History</h2> <div class="header-actions svelte-1s7jdlh"><button class="action-btn secondary svelte-1s7jdlh" title="Export filtered data to CSV">üì• Export</button> <button class="action-btn svelte-1s7jdlh" title="Fetch data from cloud"><!></button></div></div> <!> <!> <div class="info-bar svelte-1s7jdlh"><div class="legend-wrapper svelte-1s7jdlh"><!></div> <div class="load-key svelte-1s7jdlh"><span class="key-label svelte-1s7jdlh">Load:</span> <div class="key-item svelte-1s7jdlh"><span class="dot finger svelte-1s7jdlh"></span> Finger</div> <div class="key-item svelte-1s7jdlh"><span class="dot shoulder svelte-1s7jdlh"></span> Shoulder</div> <div class="key-item svelte-1s7jdlh"><span class="dot forearm svelte-1s7jdlh"></span> Forearm</div></div></div> <div class="sessions-list"><!> <!> <!></div></div>');function Yr(ze,u){gt(u,!0);let r=y(nt([])),h=y(nt([])),q=y(!1),w=y(""),m=y(nt({startDate:"",endDate:"",area:"",crag:"",climbingType:"",sessionType:"",grade:""})),C=y(20);const D=20;ca(()=>{U()});function U(){const v=Zt("outdoor_climb");l(r,v.sort((d,x)=>new Date(x.date).getTime()-new Date(d.date).getTime()),!0),te()}async function re(){l(q,!0),l(w,"");try{await sa();const v=ia("outdoor_climb"),d=await ka(v||void 0);d.ok&&d.data?(ce(d.data),la("outdoor_climb",new Date().toISOString())):l(w,d.error||"Failed to fetch data",!0)}catch(v){l(w,v instanceof Error?v.message:"Unknown error",!0)}finally{l(q,!1)}}function ce(v){const d=v.map(A=>({...A,activityType:"outdoor_climb",createdAt:new Date().toISOString(),updatedAt:new Date().toISOString(),syncStatus:"synced",syncedAt:new Date().toISOString(),openGrip:0,crimpGrip:0,pinchGrip:0,sloperGrip:0,jugGrip:0}));na(d);const x=Zt("outdoor_climb");l(r,x.sort((A,oe)=>new Date(oe.date).getTime()-new Date(A.date).getTime()),!0),te()}function ke(v){l(m,v,!0),te()}function te(){l(C,D),l(h,e(r).filter(v=>{if(e(m).startDate&&v.date<e(m).startDate||e(m).endDate&&v.date>e(m).endDate||e(m).area&&!v.area.toLowerCase().includes(e(m).area.toLowerCase())||e(m).crag&&!v.crag.toLowerCase().includes(e(m).crag.toLowerCase()))return!1;if(e(m).climbingType&&(v.climbingType==="Leading"?"Sport":v.climbingType)!==e(m).climbingType)if(v.climbingType==="Mixed")if(e(m).climbingType==="Bouldering"){if(!v.climbs.some(x=>!x.isSport))return!1}else if(e(m).climbingType==="Sport"||e(m).climbingType==="Trad"){if(!v.climbs.some(x=>x.isSport))return!1}else return!1;else return!1;if(e(m).sessionType&&!v.trainingTypes?.includes(e(m).sessionType))return!1;if(e(m).grade){const d=e(m).grade.trim().toLowerCase();if(!v.climbs.some(A=>A.grade.trim().toLowerCase()===d))return!1}return!0}),!0)}function ie(){l(C,e(C)+D)}var F=Hr(),le=a(F),de=s(a(le),2),ne=a(de);ne.__click=()=>_a(e(h),"outdoor_climbs");var G=s(ne,2);G.__click=re;var $=a(G);{var _e=v=>{var d=Rr();jt(),i(v,d)},fe=v=>{var d=At("‚òÅÔ∏è Fetch Data");i(v,d)};p($,v=>{e(q)?v(_e):v(fe,!1)})}t(G),t(de),t(le);var Se=s(le,2);{var L=v=>{var d=Br(),x=a(d,!0);t(d),g(()=>o(x,e(w))),Ye(3,d,()=>ot),i(v,d)};p(Se,v=>{e(w)&&v(L)})}var O=s(Se,2);er(O,{onFilterParamsChange:ke});var k=s(O,2),J=a(k),V=a(J);ha(V),t(J),jt(2),t(k);var M=s(k,2),ve=a(M);Fe(ve,17,()=>e(h).slice(0,e(C)),v=>v.id,(v,d)=>{Mr(v,{get session(){return e(d)},onDelete:U})});var Z=s(ve,2);{var b=v=>{var d=Ur(),x=s(a(d),2);{var A=oe=>{var j=Vr();i(oe,j)};p(x,oe=>{e(r).length>0&&oe(A)})}t(d),i(v,d)};p(Z,v=>{e(h).length===0&&v(b)})}var _=s(Z,2);{var c=v=>{var d=Wr(),x=a(d);x.__click=ie;var A=a(x);t(x),t(d),g(()=>o(A,`Load More (${e(h).length-e(C)} remaining)`)),i(v,d)};p(_,v=>{e(C)<e(h).length&&v(c)})}t(M),t(F),g(()=>G.disabled=e(q)),i(ze,F),mt()}_t(["click"]);var Jr=n('<span class="chevron svelte-11rkzid">‚ñ≤</span>'),Zr=n('<span class="chevron svelte-11rkzid">‚ñº</span>'),Xr=n('<div class="filter-body svelte-11rkzid"><div class="filter-grid svelte-11rkzid"><div class="filter-item svelte-11rkzid"><label for="start-date" class="svelte-11rkzid">Start Date</label> <input type="date" id="start-date" class="svelte-11rkzid"/></div> <div class="filter-item svelte-11rkzid"><label for="end-date" class="svelte-11rkzid">End Date</label> <input type="date" id="end-date" class="svelte-11rkzid"/></div> <div class="filter-item svelte-11rkzid"><label for="name-filter" class="svelte-11rkzid">Session Name</label> <input type="text" id="name-filter" placeholder="e.g. Leg Day" class="svelte-11rkzid"/></div> <div class="filter-item svelte-11rkzid"><label for="block-filter" class="svelte-11rkzid">Training Block</label> <select id="block-filter" class="svelte-11rkzid"><option>All Blocks</option><option>Strength</option><option>Power</option><option>Power Endurance</option><option>Muscular Endurance</option></select></div></div> <div class="filter-actions svelte-11rkzid"><button class="reset-btn svelte-11rkzid">Reset Filters</button></div></div>'),Kr=n('<div class="filter-container svelte-11rkzid"><button class="filter-header svelte-11rkzid"><div class="header-content svelte-11rkzid"><span class="icon svelte-11rkzid">üîç</span> <span class="title svelte-11rkzid">Filters</span> <!></div></button> <!></div>');function Qr(ze,u){gt(u,!0);let r=y(!1),h=y(""),q=y(""),w=y(""),m=y("");function C(){l(r,!e(r))}function D(){l(h,""),l(q,""),l(w,""),l(m,""),U()}function U(){u.onFilterParamsChange({startDate:e(h),endDate:e(q),name:e(w),trainingBlock:e(m)})}var re=Kr(),ce=a(re);ce.__click=C;var ke=a(ce),te=s(a(ke),4);{var ie=ne=>{var G=Jr();i(ne,G)},F=ne=>{var G=Zr();i(ne,G)};p(te,ne=>{e(r)?ne(ie):ne(F,!1)})}t(ke),t(ce);var le=s(ce,2);{var de=ne=>{var G=Xr(),$=a(G),_e=a($),fe=s(a(_e),2);Ve(fe),fe.__change=U,t(_e);var Se=s(_e,2),L=s(a(Se),2);Ve(L),L.__change=U,t(Se);var O=s(Se,2),k=s(a(O),2);Ve(k),k.__input=U,t(O);var J=s(O,2),V=s(a(J),2);V.__change=U;var M=a(V);M.value=M.__value="";var ve=s(M);ve.value=ve.__value="Strength";var Z=s(ve);Z.value=Z.__value="Power";var b=s(Z);b.value=b.__value="Power Endurance";var _=s(b);_.value=_.__value="Muscular Endurance",t(V),t(J),t($);var c=s($,2),v=a(c);v.__click=D,t(c),t(G),Me(fe,()=>e(h),d=>l(h,d)),Me(L,()=>e(q),d=>l(q,d)),Me(k,()=>e(w),d=>l(w,d)),wt(V,()=>e(m),d=>l(m,d)),Ye(3,G,()=>ot,()=>({duration:200})),i(ne,G)};p(le,ne=>{e(r)&&ne(de)})}t(re),g(()=>rt(ce,"aria-expanded",e(r))),i(ze,re),mt()}_t(["click","change","input"]);var $r=n('<span class="status-icon pending svelte-cirrfc" title="Waiting to sync">üîÑ</span>'),ei=n('<span class="status-icon error svelte-cirrfc" title="Sync error">‚ö†Ô∏è</span>'),ti=n('<div class="bw-info svelte-cirrfc"><span class="label svelte-cirrfc">Bodyweight:</span> </div>'),ai=n('<span class="muscle-tag svelte-cirrfc"> </span>'),si=n('<span class="muscle-tag svelte-cirrfc"> </span>'),ri=n('<div class="muscle-tags svelte-cirrfc"><!> <!></div>'),ii=n('<span class="tag w svelte-cirrfc">W</span>'),li=n('<span class="tag f svelte-cirrfc">F</span>'),ni=n('<span class="tag d svelte-cirrfc">D</span>'),vi=n('<div><span class="set-num svelte-cirrfc"></span> <!> <!> <!> <span class="val svelte-cirrfc"><span class="weight"> </span> <span class="x svelte-cirrfc">x</span> <span class="reps"> </span></span></div>'),oi=n('<div class="exercise-item svelte-cirrfc"><div class="exercise-header svelte-cirrfc"><h4 class="svelte-cirrfc"> </h4> <!></div> <div class="sets-grid svelte-cirrfc"></div></div>'),di=n('<div class="subcategory-group svelte-cirrfc"><h5 class="subcategory-header svelte-cirrfc"> </h5> <!></div>'),ci=n('<div class="category-group svelte-cirrfc"><h4 class="category-header svelte-cirrfc"> </h4> <!></div>'),_i=n('<div class="card-body svelte-cirrfc"><!> <div class="exercises-list svelte-cirrfc"></div></div>'),ui=n('<div><div class="card-header svelte-cirrfc" role="button" tabindex="0"><div class="header-main svelte-cirrfc"><div class="date-badge svelte-cirrfc"><span class="day svelte-cirrfc"> </span> <span class="month svelte-cirrfc"> </span> <span class="year svelte-cirrfc"> </span></div> <div class="session-info svelte-cirrfc"><div class="session-text"><h3 class="name svelte-cirrfc"> </h3> <div class="session-meta svelte-cirrfc"><span class="stat svelte-cirrfc"> </span> <span class="stat svelte-cirrfc"> </span> <span class="stat svelte-cirrfc"> </span></div></div></div></div> <div class="header-actions svelte-cirrfc"><div class="header-status"><!></div> <button class="btn-icon delete-session svelte-cirrfc" title="Delete Session">üóëÔ∏è</button> <span class="chevron svelte-cirrfc"> </span></div></div> <!></div> <!>',1);function pi(ze,u){gt(u,!0);let r=y(!1),h=y(!1);function q(){l(r,!e(r))}function w(){l(h,!0)}function m(){ra(u.session.id),l(h,!1),u.onDelete()}function C(P){return Ta.find(me=>me.name===P)}let D=lt(()=>u.session.exercises?.length??0),U=lt(()=>(u.session.exercises||[]).reduce((P,me)=>P+(me.sets?.length||0),0)),re=lt(()=>(u.session.exercises||[]).reduce((P,me)=>P+(me.sets||[]).reduce((we,K)=>we+(K.weight||0)*(K.reps||0),0),0)),ce=lt(()=>(u.session.exercises||[]).reduce((P,me)=>{const we=C(me.name),K=we?.category||"Other",I=we?.subcategory||"Misc";return P[K]||(P[K]={}),P[K][I]||(P[K][I]=[]),P[K][I].push(me),P},{}));var ke=ui(),te=Ie(ke);let ie;var F=a(te);F.__click=q,F.__keydown=P=>P.key==="Enter"&&q();var le=a(F),de=a(le),ne=a(de),G=a(ne,!0);t(ne);var $=s(ne,2),_e=a($,!0);t($);var fe=s($,2),Se=a(fe,!0);t(fe),t(de);var L=s(de,2),O=a(L),k=a(O),J=a(k,!0);t(k);var V=s(k,2),M=a(V),ve=a(M);t(M);var Z=s(M,2),b=a(Z);t(Z);var _=s(Z,2),c=a(_);t(_),t(V),t(O),t(L),t(le);var v=s(le,2),d=a(v),x=a(d);{var A=P=>{var me=$r();i(P,me)},oe=P=>{var me=He(),we=Ie(me);{var K=I=>{var ee=ei();i(I,ee)};p(we,I=>{u.session.syncStatus==="error"&&I(K)},!0)}i(P,me)};p(x,P=>{u.session.syncStatus==="pending"?P(A):P(oe,!1)})}t(d);var j=s(d,2);j.__click=P=>{P.stopPropagation(),w()};var ye=s(j,2),ue=a(ye,!0);t(ye),t(v),t(F);var Le=s(F,2);{var T=P=>{var me=_i(),we=a(me);{var K=ee=>{var qe=ti(),Ce=s(a(qe));t(qe),g(()=>o(Ce,` ${u.session.bodyweight??""}kg`)),i(ee,qe)};p(we,ee=>{u.session.bodyweight&&ee(K)})}var I=s(we,2);Fe(I,21,()=>Object.entries(e(ce)),Oe,(ee,qe)=>{var Ce=lt(()=>ua(e(qe),2));let ge=()=>e(Ce)[0],be=()=>e(Ce)[1];var Y=ci(),he=a(Y),xe=a(he,!0);t(he);var X=s(he,2);Fe(X,17,()=>Object.entries(be()),Oe,(W,De)=>{var Te=lt(()=>ua(e(De),2));let E=()=>e(Te)[0],S=()=>e(Te)[1];var R=di(),Ee=a(R),Pe=a(Ee,!0);t(Ee);var Ae=s(Ee,2);Fe(Ae,17,S,Oe,($e,Je)=>{const Ze=lt(()=>C(e(Je).name));var qt=oi(),ht=a(qt),zt=a(ht),yt=a(zt,!0);t(zt);var Lt=s(zt,2);{var Dt=Xe=>{var Re=ri(),bt=a(Re);Fe(bt,17,()=>e(Ze).targetMuscles.slice(0,3),Oe,(at,Ge)=>{var Ne=ai(),Ke=a(Ne,!0);t(Ne),g(()=>o(Ke,e(Ge))),i(at,Ne)});var tt=s(bt,2);{var xt=at=>{var Ge=si(),Ne=a(Ge);t(Ge),g(()=>o(Ne,`+${e(Ze).targetMuscles.length-3}`)),i(at,Ge)};p(tt,at=>{e(Ze).targetMuscles.length>3&&at(xt)})}t(Re),i(Xe,Re)};p(Lt,Xe=>{e(Ze)&&Xe(Dt)})}t(ht);var dt=s(ht,2);Fe(dt,21,()=>e(Je).sets,Oe,(Xe,Re,bt)=>{var tt=vi();let xt;var at=a(tt);at.textContent=bt+1;var Ge=s(at,2);{var Ne=Qe=>{var it=ii();i(Qe,it)};p(Ge,Qe=>{e(Re).isWarmup&&Qe(Ne)})}var Ke=s(Ge,2);{var Ue=Qe=>{var it=li();i(Qe,it)};p(Ke,Qe=>{e(Re).isFailure&&Qe(Ue)})}var st=s(Ke,2);{var Be=Qe=>{var it=ni();i(Qe,it)};p(st,Qe=>{e(Re).isDropSet&&Qe(Be)})}var We=s(st,2),ut=a(We),kt=a(ut);t(ut);var Tt=s(ut,4),Ct=a(Tt,!0);t(Tt),t(We),t(tt),g(()=>{xt=vt(tt,1,"set-pill svelte-cirrfc",null,xt,{completed:e(Re).completed,warmup:e(Re).isWarmup}),o(kt,`${e(Re).weight??""}kg`),o(Ct,e(Re).reps)}),i(Xe,tt)}),t(dt),t(qt),g(()=>o(yt,e(Je).name)),i($e,qt)}),t(R),g(()=>o(Pe,E())),i(W,R)}),t(Y),g(()=>o(xe,ge())),i(ee,Y)}),t(I),t(me),Ye(3,me,()=>ot,()=>({duration:150})),i(P,me)};p(Le,P=>{e(r)&&P(T)})}t(te);var ae=s(te,2);aa(ae,{get isOpen(){return e(h)},title:"Delete Session",message:"Are you sure you want to delete this session? This cannot be undone.",onConfirm:m,onCancel:()=>l(h,!1)}),g((P,me,we,K)=>{ie=vt(te,1,"session-card svelte-cirrfc",null,ie,{expanded:e(r)}),rt(F,"aria-expanded",e(r)),o(G,P),o(_e,me),o(Se,we),o(J,u.session.name),o(ve,`${e(D)??""} Exercises`),o(b,`${e(U)??""} Sets`),o(c,`~${K??""}kg Vol`),o(ue,e(r)?"‚ñ≤":"‚ñº")},[()=>new Date(u.session.date).getDate(),()=>new Date(u.session.date).toLocaleDateString("en-GB",{month:"short"}),()=>new Date(u.session.date).getFullYear(),()=>Math.round(e(re)).toLocaleString()]),i(ze,ke),mt()}_t(["click","keydown"]);var fi=n('<span class="spinner svelte-133enjd"></span> Fetching...',1),gi=n('<div class="error-banner svelte-133enjd"> </div>'),mi=n('<small class="svelte-133enjd">Try adjusting your filters.</small>'),bi=n('<div class="empty-state svelte-133enjd"><p class="svelte-133enjd">No gym sessions found.</p> <!></div>'),hi=n('<div class="load-more-container svelte-133enjd"><button class="load-more-btn svelte-133enjd"> </button></div>'),yi=n('<div class="view-container svelte-133enjd"><div class="view-header svelte-133enjd"><h2 class="view-title svelte-133enjd">üèãÔ∏è Gym Session History</h2> <div class="header-actions svelte-133enjd"><button class="action-btn secondary svelte-133enjd" title="Export filtered data to CSV">üì• Export</button> <button class="action-btn svelte-133enjd" title="Fetch data from cloud"><!></button></div></div> <!> <!> <div class="sessions-list"><!> <!> <!></div></div>');function xi(ze,u){gt(u,!0);let r=y(nt([])),h=y(nt([])),q=y(!1),w=y(""),m=y(nt({startDate:"",endDate:"",name:"",trainingBlock:""})),C=y(20);const D=20;ca(()=>{U()});function U(){const b=Zt("gym_session");l(r,b.sort((_,c)=>new Date(c.date).getTime()-new Date(_.date).getTime()),!0),te()}async function re(){l(q,!0),l(w,"");try{await sa();const b=ia("gym_session"),_=await qa(b||void 0);_.ok&&_.data?(ce(_.data),la("gym_session",new Date().toISOString())):l(w,_.error||"Failed to fetch data",!0)}catch(b){l(w,b instanceof Error?b.message:"Unknown error",!0)}finally{l(q,!1)}}function ce(b){const _=b.map(v=>({...v,activityType:"gym_session",syncStatus:"synced",syncedAt:new Date().toISOString(),createdAt:v.createdAt||new Date().toISOString(),updatedAt:v.updatedAt||new Date().toISOString()}));na(_);const c=Zt("gym_session");l(r,c.sort((v,d)=>new Date(d.date).getTime()-new Date(v.date).getTime()),!0),te()}function ke(b){l(m,b,!0),te()}function te(){l(C,D),l(h,e(r).filter(b=>!(e(m).startDate&&b.date<e(m).startDate||e(m).endDate&&b.date>e(m).endDate||e(m).name&&!b.name.toLowerCase().includes(e(m).name.toLowerCase())||e(m).trainingBlock&&b.trainingBlock!==e(m).trainingBlock)),!0)}function ie(){l(C,e(C)+D)}var F=yi(),le=a(F),de=s(a(le),2),ne=a(de);ne.__click=()=>_a(e(h),"gym_sessions");var G=s(ne,2);G.__click=re;var $=a(G);{var _e=b=>{var _=fi();jt(),i(b,_)},fe=b=>{var _=At("‚òÅÔ∏è Fetch Data");i(b,_)};p($,b=>{e(q)?b(_e):b(fe,!1)})}t(G),t(de),t(le);var Se=s(le,2);{var L=b=>{var _=gi(),c=a(_,!0);t(_),g(()=>o(c,e(w))),Ye(3,_,()=>ot),i(b,_)};p(Se,b=>{e(w)&&b(L)})}var O=s(Se,2);Qr(O,{onFilterParamsChange:ke});var k=s(O,2),J=a(k);Fe(J,17,()=>e(h).slice(0,e(C)),b=>b.id,(b,_)=>{pi(b,{get session(){return e(_)},onDelete:U})});var V=s(J,2);{var M=b=>{var _=bi(),c=s(a(_),2);{var v=d=>{var x=mi();i(d,x)};p(c,d=>{e(r).length>0&&d(v)})}t(_),i(b,_)};p(V,b=>{e(h).length===0&&b(M)})}var ve=s(V,2);{var Z=b=>{var _=hi(),c=a(_);c.__click=ie;var v=a(c);t(c),t(_),g(()=>o(v,`Load More (${e(h).length-e(C)} remaining)`)),i(b,_)};p(ve,b=>{e(C)<e(h).length&&b(Z)})}t(k),t(F),g(()=>G.disabled=e(q)),i(ze,F),mt()}_t(["click"]);var Si=n('<span class="spinner svelte-1szs0u9"></span> Fetching...',1),wi=n('<div class="loading svelte-1szs0u9">Loading sessions...</div>'),Di=n('<div class="empty-state svelte-1szs0u9"><!></div>'),ki=n('<span class="set-tag svelte-1szs0u9"> <span class="x svelte-1szs0u9">x</span> </span>'),Ti=n('<div class="ex-notes svelte-1szs0u9"> </div>'),qi=n('<div class="exercise-item svelte-1szs0u9"><div class="ex-header svelte-1szs0u9"><span class="ex-name svelte-1szs0u9"> </span> <span class="ex-grip svelte-1szs0u9"> </span></div> <div class="ex-sets svelte-1szs0u9"></div> <!></div>'),zi=n('<div class="card-body svelte-1szs0u9"><div class="exercises-list svelte-1szs0u9"></div></div>'),Li=n('<div><div class="card-header svelte-1szs0u9" role="button" tabindex="0"><div class="header-main"><span class="session-date svelte-1szs0u9"> </span> <span class="meta svelte-1szs0u9"><!> </span></div> <div class="header-status svelte-1szs0u9"><span>‚óè</span> <button class="btn-icon delete-btn svelte-1szs0u9" title="Delete Session">üóëÔ∏è</button> <span class="chevron svelte-1szs0u9"> </span></div></div> <!></div>'),Ci=n('<div class="load-more-container svelte-1szs0u9"><button class="load-more-btn svelte-1szs0u9"> </button></div>'),Fi=n('<div class="timeline svelte-1szs0u9"><!> <!></div>'),Ei=n('<div class="view-content svelte-1szs0u9"><div class="header svelte-1szs0u9"><h3 class="svelte-1szs0u9">ü§è Fingerboarding Log</h3> <button class="fetch-btn svelte-1szs0u9" title="Fetch data from cloud"><!></button></div> <div class="filters svelte-1szs0u9"><div class="filter-group svelte-1szs0u9"><label for="start-date" class="svelte-1szs0u9">From</label> <input type="date" id="start-date" class="svelte-1szs0u9"/></div> <div class="filter-group svelte-1szs0u9"><label for="end-date" class="svelte-1szs0u9">To</label> <input type="date" id="end-date" class="svelte-1szs0u9"/></div></div> <!></div> <!>',1);function Gi(ze,u){gt(u,!0);let r=y(nt([])),h=y(!0),q=y(""),w=y(""),m=y(nt(new Set)),C=y(20);const D=20;ya(()=>{e(q),e(w),l(C,D)});let U=y(!1),re=y(null);function ce(c){l(re,c,!0),l(U,!0)}function ke(){e(re)&&(ra(e(re)),l(re,null),l(U,!1),l(r,oa().sort((c,v)=>new Date(v.date).getTime()-new Date(c.date).getTime()),!0))}async function te(){l(h,!0),l(r,oa().sort((c,v)=>new Date(v.date).getTime()-new Date(c.date).getTime()),!0);try{await sa();const c=ia("fingerboarding"),v=await za(c||void 0);if(v.ok&&v.data){la("fingerboarding",new Date().toISOString());const d=v.data.map(x=>({...x,activityType:"fingerboarding",createdAt:x.createdAt||new Date().toISOString(),updatedAt:x.updatedAt||new Date().toISOString(),syncStatus:"synced"}));na(d),l(r,oa().sort((x,A)=>new Date(A.date).getTime()-new Date(x.date).getTime()),!0)}}catch(c){console.error("Failed to sync",c)}finally{l(h,!1)}}te();let ie=lt(()=>e(r).filter(c=>!(e(q)&&new Date(c.date)<new Date(e(q))||e(w)&&new Date(c.date)>new Date(e(w)))));function F(){l(C,e(C)+D)}function le(c){e(m).has(c)?e(m).delete(c):e(m).add(c),l(m,new Set(e(m)),!0)}function de(c){return c.exercises.reduce((v,d)=>v+d.details.length,0)}var ne=Ei(),G=Ie(ne),$=a(G),_e=s(a($),2);_e.__click=te;var fe=a(_e);{var Se=c=>{var v=Si();jt(),i(c,v)},L=c=>{var v=At("‚òÅÔ∏è Fetch Data");i(c,v)};p(fe,c=>{e(h)?c(Se):c(L,!1)})}t(_e),t($);var O=s($,2),k=a(O),J=s(a(k),2);Ve(J),t(k);var V=s(k,2),M=s(a(V),2);Ve(M),t(V),t(O);var ve=s(O,2);{var Z=c=>{var v=wi();i(c,v)},b=c=>{var v=He(),d=Ie(v);{var x=oe=>{var j=Di(),ye=a(j);{var ue=T=>{var ae=At("No sessions match filter.");i(T,ae)},Le=T=>{var ae=At("No fingerboarding sessions logged yet.");i(T,ae)};p(ye,T=>{e(r).length>0?T(ue):T(Le,!1)})}t(j),i(oe,j)},A=oe=>{var j=Fi(),ye=a(j);Fe(ye,17,()=>e(ie).slice(0,e(C)),Oe,(T,ae)=>{var P=Li();let me;var we=a(P);we.__click=()=>le(e(ae).id),we.__keydown=S=>S.key==="Enter"&&le(e(ae).id);var K=a(we),I=a(K),ee=a(I,!0);t(I);var qe=s(I,2),Ce=a(qe);{var ge=S=>{var R=At();g(()=>o(R,`${e(ae).location??""} ¬∑`)),i(S,R)};p(Ce,S=>{e(ae).location&&e(ae).location!=="N/A"&&e(ae).location!=="Home"&&S(ge)})}var be=s(Ce);t(qe),t(K);var Y=s(K,2),he=a(Y);let xe;var X=s(he,2);X.__click=S=>{S.stopPropagation(),ce(e(ae).id)};var W=s(X,2),De=a(W,!0);t(W),t(Y),t(we);var Te=s(we,2);{var E=S=>{var R=zi(),Ee=a(R);Fe(Ee,21,()=>e(ae).exercises||[],Oe,(Pe,Ae)=>{var $e=qi(),Je=a($e),Ze=a(Je),qt=a(Ze,!0);t(Ze);var ht=s(Ze,2),zt=a(ht,!0);t(ht),t(Je);var yt=s(Je,2);Fe(yt,21,()=>e(Ae).details,Oe,(dt,Xe)=>{var Re=ki(),bt=a(Re),tt=s(bt,2);t(Re),g(()=>{o(bt,`${e(Xe).weight>0?`+${e(Xe).weight}kg`:"BW"} `),o(tt,` ${e(Xe).reps??""}s/reps`)}),i(dt,Re)}),t(yt);var Lt=s(yt,2);{var Dt=dt=>{var Xe=Ti(),Re=a(Xe);t(Xe),g(()=>o(Re,`"${e(Ae).notes??""}"`)),i(dt,Xe)};p(Lt,dt=>{e(Ae).notes&&dt(Dt)})}t($e),g(()=>{o(qt,e(Ae).name),o(zt,e(Ae).gripType)}),i(Pe,$e)}),t(Ee),t(R),Ye(3,R,()=>ot,()=>({duration:150})),i(S,R)};p(Te,S=>{e(m).has(e(ae).id)&&S(E)})}t(P),g((S,R,Ee,Pe)=>{me=vt(P,1,"session-card svelte-1szs0u9",null,me,S),o(ee,R),o(be,` ${e(ae).exercises.length??""} Exercises ¬∑ ${Ee??""} Sets`),xe=vt(he,1,"sync-dot svelte-1szs0u9",null,xe,{synced:e(ae).syncStatus==="synced"}),rt(he,"title",e(ae).syncStatus==="synced"?"Synced":"Local"),o(De,Pe)},[()=>({expanded:e(m).has(e(ae).id)}),()=>new Date(e(ae).date).toLocaleDateString(void 0,{weekday:"short",month:"short",day:"numeric",year:"numeric"}),()=>de(e(ae)),()=>e(m).has(e(ae).id)?"‚ñ≤":"‚ñº"]),i(T,P)});var ue=s(ye,2);{var Le=T=>{var ae=Ci(),P=a(ae);P.__click=F;var me=a(P);t(P),t(ae),g(()=>o(me,`Load More (${e(ie).length-e(C)} remaining)`)),i(T,ae)};p(ue,T=>{e(C)<e(ie).length&&T(Le)})}t(j),i(oe,j)};p(d,oe=>{e(ie).length===0?oe(x):oe(A,!1)},!0)}i(c,v)};p(ve,c=>{e(h)&&e(r).length===0?c(Z):c(b,!1)})}t(G);var _=s(G,2);aa(_,{get isOpen(){return e(U)},title:"Delete Fingerboard Session",message:"Are you sure you want to delete this session? This cannot be undone.",onConfirm:ke,onCancel:()=>l(U,!1)}),g(()=>_e.disabled=e(h)),Me(J,()=>e(q),c=>l(q,c)),Me(M,()=>e(w),c=>l(w,c)),i(ze,ne),mt()}_t(["click","keydown"]);var Ni=n('<span class="spinner svelte-xyvf5r"></span> Fetching...',1),Oi=n('<div class="loading svelte-xyvf5r">Loading sessions...</div>'),Ai=n('<div class="empty-state svelte-xyvf5r">No competitions logged yet.</div>'),ji=n('<button class="icon-btn edit-notes-btn svelte-xyvf5r" title="Edit Notes">‚úé</button>'),Ii=n('<div class="edit-notes-area"><textarea placeholder="Add session notes..." rows="3" class="notes-editor svelte-xyvf5r"></textarea> <div class="edit-actions svelte-xyvf5r"><button class="cancel-btn svelte-xyvf5r">Cancel</button> <button class="save-btn svelte-xyvf5r"> </button></div></div>'),Pi=n('<p class="note-text svelte-xyvf5r"> </p>'),Mi=n('<p class="notes-placeholder svelte-xyvf5r">No notes.</p>'),Ri=n('<span class="round-pos svelte-xyvf5r"> </span>'),Bi=n('<span class="c-attempts svelte-xyvf5r"> </span>'),Vi=n('<div class="climb-notes svelte-xyvf5r"> </div>'),Ui=n('<div class="climb-row svelte-xyvf5r"><div class="climb-info svelte-xyvf5r"><span class="c-name svelte-xyvf5r"> </span> <!></div> <div class="climb-result"><span> </span></div></div> <!>',1),Wi=n('<div class="climbs-list"></div>'),Hi=n('<div class="round-item svelte-xyvf5r"><div class="round-header svelte-xyvf5r"><span class="round-name"> </span> <!></div> <!></div>'),Yi=n('<div class="rounds-list svelte-xyvf5r"></div>'),Ji=n('<div class="load-meta svelte-xyvf5r"><span> </span></div>'),Zi=n('<div class="card-body svelte-xyvf5r"><div class="session-notes-container svelte-xyvf5r"><div class="notes-header svelte-xyvf5r"><span class="note-label svelte-xyvf5r">Session Notes</span> <!></div> <!></div> <!> <!> <div class="session-footer svelte-xyvf5r"><span> </span></div></div>'),Xi=n('<div><div class="card-header svelte-xyvf5r" role="button" tabindex="0"><div class="header-main svelte-xyvf5r"><div class="left-col svelte-xyvf5r"><span class="venue svelte-xyvf5r"> </span> <span class="date svelte-xyvf5r"> </span></div> <div class="right-col svelte-xyvf5r"><div class="badges svelte-xyvf5r"><span class="type-tag svelte-xyvf5r"> </span> <span class="result-tag svelte-xyvf5r"> </span></div></div></div> <div class="header-status svelte-xyvf5r"><span>‚óè</span> <button class="btn-icon delete-btn svelte-xyvf5r" title="Delete Session">üóëÔ∏è</button> <span class="chevron svelte-xyvf5r"> </span></div></div> <!></div>'),Ki=n('<div class="load-more-container svelte-xyvf5r"><button class="load-more-btn svelte-xyvf5r"> </button></div>'),Qi=n('<div class="timeline svelte-xyvf5r"><!> <!></div>'),$i=n('<div class="view-content svelte-xyvf5r"><div class="header svelte-xyvf5r"><h3 class="svelte-xyvf5r">üèÜ Competition Log</h3> <button class="fetch-btn svelte-xyvf5r" title="Fetch data from cloud"><!></button></div> <!> <!></div>');function el(ze,u){gt(u,!0);let r=y(nt([])),h=y(!0),q=y(nt(new Set)),w=y(20);const m=20;let C=y(!1),D=y(null);function U(_){l(D,_,!0),l(C,!0)}function re(){e(D)&&(ra(e(D)),l(D,null),l(C,!1),l(r,da().sort((_,c)=>new Date(c.date).getTime()-new Date(_.date).getTime()),!0))}async function ce(){l(h,!0),l(w,m),l(r,da().sort((_,c)=>new Date(c.date).getTime()-new Date(_.date).getTime()),!0);try{await sa();const _=ia("competition"),c=await La(_||void 0);if(c.ok&&c.data){la("competition",new Date().toISOString());const v=c.data.map(d=>({...d,activityType:"competition",type:d.type,rounds:d.rounds.map(x=>({...x,climbs:x.climbs?.map(A=>({...A,status:A.status}))})),createdAt:d.createdAt||new Date().toISOString(),updatedAt:d.updatedAt||new Date().toISOString(),syncStatus:"synced"}));na(v),l(r,da().sort((d,x)=>new Date(x.date).getTime()-new Date(d.date).getTime()),!0)}}catch(_){console.error("Failed to sync",_)}finally{l(h,!1)}}ce();function ke(_){e(q).has(_)?e(q).delete(_):e(q).add(_),l(q,new Set(e(q)),!0)}function te(){l(w,e(w)+m)}function ie(_){if(!_.rounds||_.rounds.length===0)return"No rounds";const c=_.rounds[_.rounds.length-1];if(c.position)return`#${c.position} ${c.name}`;if(c.climbs){const v=c.climbs.filter(x=>x.status==="Top"||x.status==="Flash").length,d=c.climbs.filter(x=>x.status==="Zone").length;return`${_.rounds.length} Rnds ¬∑ Final: ${v}T ${d+v}Z`}return c.name}let F=y(nt(new Set)),le=y(nt(new Map)),de=y(nt(new Set));function ne(_){e(le).set(_.id,_.notes||""),l(le,new Map(e(le)),!0),e(F).add(_.id),l(F,new Set(e(F)),!0)}function G(_){e(F).delete(_),l(F,new Set(e(F)),!0),e(le).delete(_),l(le,new Map(e(le)),!0)}function $(_){return e(le).get(_)||""}function _e(_,c){e(le).set(_,c),l(le,new Map(e(le)),!0)}async function fe(_){if(e(de).has(_.id))return;const c=e(le).get(_.id);if(c===void 0)return;e(de).add(_.id),l(de,new Set(e(de)),!0),Ut(_.id,{notes:c});const v=e(r).find(d=>d.id===_.id);if(v&&(v.notes=c),$t()){const d={date:_.date,venue:_.venue,customVenue:_.customVenue,type:_.type,fingerLoad:_.fingerLoad,shoulderLoad:_.shoulderLoad,forearmLoad:_.forearmLoad,rounds:_.rounds,notes:c};try{const x=await Ca(_.id,d);x.ok?(ea(_.id),v&&(v.syncStatus="synced")):(console.error("Failed to sync note update:",x.error),Ft(_.id),v&&(v.syncStatus="error"))}catch(x){console.error("Exception syncing note update:",x),Ft(_.id),v&&(v.syncStatus="error")}}e(F).delete(_.id),l(F,new Set(e(F)),!0),e(de).delete(_.id),l(de,new Set(e(de)),!0)}var Se=$i(),L=a(Se),O=s(a(L),2);O.__click=ce;var k=a(O);{var J=_=>{var c=Ni();jt(),i(_,c)},V=_=>{var c=At("‚òÅÔ∏è Fetch Data");i(_,c)};p(k,_=>{e(h)?_(J):_(V,!1)})}t(O),t(L);var M=s(L,2);{var ve=_=>{var c=Oi();i(_,c)},Z=_=>{var c=He(),v=Ie(c);{var d=A=>{var oe=Ai();i(A,oe)},x=A=>{var oe=Qi(),j=a(oe);Fe(j,17,()=>e(r).slice(0,e(w)),Oe,(Le,T)=>{var ae=Xi();let P;var me=a(ae);me.__click=()=>ke(e(T).id),me.__keydown=Ae=>Ae.key==="Enter"&&ke(e(T).id);var we=a(me),K=a(we),I=a(K),ee=a(I,!0);t(I);var qe=s(I,2),Ce=a(qe,!0);t(qe),t(K);var ge=s(K,2),be=a(ge),Y=a(be),he=a(Y,!0);t(Y);var xe=s(Y,2),X=a(xe,!0);t(xe),t(be),t(ge),t(we);var W=s(we,2),De=a(W);let Te;var E=s(De,2);E.__click=Ae=>{Ae.stopPropagation(),U(e(T).id)};var S=s(E,2),R=a(S,!0);t(S),t(W),t(me);var Ee=s(me,2);{var Pe=Ae=>{var $e=Zi(),Je=a($e),Ze=a(Je),qt=s(a(Ze),2);{var ht=Ge=>{var Ne=ji();Ne.__click=()=>ne(e(T)),i(Ge,Ne)};p(qt,Ge=>{e(F).has(e(T).id)||Ge(ht)})}t(Ze);var zt=s(Ze,2);{var yt=Ge=>{var Ne=Ii(),Ke=a(Ne);ta(Ke),Ke.__input=ut=>_e(e(T).id,ut.currentTarget.value);var Ue=s(Ke,2),st=a(Ue);st.__click=()=>G(e(T).id);var Be=s(st,2);Be.__click=()=>fe(e(T));var We=a(Be,!0);t(Be),t(Ue),t(Ne),g((ut,kt,Tt,Ct)=>{xa(Ke,ut),st.disabled=kt,Be.disabled=Tt,o(We,Ct)},[()=>$(e(T).id),()=>e(de).has(e(T).id),()=>e(de).has(e(T).id),()=>e(de).has(e(T).id)?"Saving...":"Save"]),Ye(3,Ne,()=>ot,()=>({duration:150})),i(Ge,Ne)},Lt=Ge=>{var Ne=He(),Ke=Ie(Ne);{var Ue=Be=>{var We=Pi(),ut=a(We,!0);t(We),g(()=>o(ut,e(T).notes)),i(Be,We)},st=Be=>{var We=Mi();i(Be,We)};p(Ke,Be=>{e(T).notes?Be(Ue):Be(st,!1)},!0)}i(Ge,Ne)};p(zt,Ge=>{e(F).has(e(T).id)?Ge(yt):Ge(Lt,!1)})}t(Je);var Dt=s(Je,2);{var dt=Ge=>{var Ne=Yi();Fe(Ne,21,()=>e(T).rounds||[],Oe,(Ke,Ue)=>{var st=Hi(),Be=a(st),We=a(Be),ut=a(We,!0);t(We);var kt=s(We,2);{var Tt=it=>{var St=Ri(),Mt=a(St);t(St),g(()=>o(Mt,`#${e(Ue).position??""}`)),i(it,St)};p(kt,it=>{e(Ue).position&&it(Tt)})}t(Be);var Ct=s(Be,2);{var Qe=it=>{var St=Wi();Fe(St,21,()=>e(Ue).climbs||[],Oe,(Mt,pt)=>{var Wt=Ui(),Et=Ie(Wt),Rt=a(Et),Gt=a(Rt),Kt=a(Gt,!0);t(Gt);var Ht=s(Gt,2);{var Qt=B=>{var f=Bi(),z=a(f);t(f),g(()=>o(z,`(${e(pt).attemptCount??""} tries)`)),i(B,f)};p(Ht,B=>{e(pt).attemptCount>1&&B(Qt)})}t(Rt);var Bt=s(Rt,2),It=a(Bt);let Pt;var Yt=a(It,!0);t(It),t(Bt),t(Et);var Jt=s(Et,2);{var H=B=>{var f=Vi(),z=a(f);t(f),g(()=>o(z,`"${e(pt).notes??""}"`)),i(B,f)};p(Jt,B=>{e(pt).notes&&B(H)})}g(()=>{o(Kt,e(pt).name),Pt=vt(It,1,"status-badge svelte-xyvf5r",null,Pt,{top:e(pt).status==="Top"||e(pt).status==="Flash",zone:e(pt).status==="Zone"}),o(Yt,e(pt).status)}),i(Mt,Wt)}),t(St),i(it,St)};p(Ct,it=>{e(Ue).climbs&&it(Qe)})}t(st),g(()=>o(ut,e(Ue).name)),i(Ke,st)}),t(Ne),i(Ge,Ne)};p(Dt,Ge=>{e(T).rounds&&Ge(dt)})}var Xe=s(Dt,2);{var Re=Ge=>{var Ne=Ji(),Ke=a(Ne),Ue=a(Ke);t(Ke),t(Ne),g(()=>o(Ue,`Detailed Load: Fingers ${e(T).fingerLoad??""}/5, Shoulders ${e(T).shoulderLoad??""}/5,
										Forearms ${e(T).forearmLoad??""}/5`)),i(Ge,Ne)};p(Xe,Ge=>{(e(T).fingerLoad||e(T).shoulderLoad)&&Ge(Re)})}var bt=s(Xe,2),tt=a(bt);let xt;var at=a(tt,!0);t(tt),t(bt),t($e),g(()=>{xt=vt(tt,1,"sync-status svelte-xyvf5r",null,xt,{synced:e(T).syncStatus==="synced"}),o(at,e(T).syncStatus==="synced"?"‚úì Synced":"‚òÅ Local")}),Ye(3,$e,()=>ot,()=>({duration:150})),i(Ae,$e)};p(Ee,Ae=>{e(q).has(e(T).id)&&Ae(Pe)})}t(ae),g((Ae,$e,Je,Ze)=>{P=vt(ae,1,"session-card svelte-xyvf5r",null,P,Ae),o(ee,e(T).customVenue||e(T).venue),o(Ce,$e),o(he,e(T).type),o(X,Je),Te=vt(De,1,"sync-dot",null,Te,{synced:e(T).syncStatus==="synced"}),rt(De,"title",e(T).syncStatus==="synced"?"Synced":"Local"),o(R,Ze)},[()=>({expanded:e(q).has(e(T).id)}),()=>new Date(e(T).date).toLocaleDateString(void 0,{weekday:"short",day:"numeric",month:"short",year:"numeric"}),()=>ie(e(T)),()=>e(q).has(e(T).id)?"‚ñ≤":"‚ñº"]),i(Le,ae)});var ye=s(j,2);{var ue=Le=>{var T=Ki(),ae=a(T);ae.__click=te;var P=a(ae);t(ae),t(T),g(()=>o(P,`Load More (${e(r).length-e(w)} remaining)`)),i(Le,T)};p(ye,Le=>{e(w)<e(r).length&&Le(ue)})}t(oe),i(A,oe)};p(v,A=>{e(r).length===0?A(d):A(x,!1)},!0)}i(_,c)};p(M,_=>{e(h)&&e(r).length===0?_(ve):_(Z,!1)})}var b=s(M,2);aa(b,{get isOpen(){return e(C)},title:"Delete Competition",message:"Are you sure you want to delete this competition session? This action cannot be undone.",onConfirm:re,onCancel:()=>l(C,!1)}),t(Se),g(()=>O.disabled=e(h)),i(ze,Se),mt()}_t(["click","keydown","input"]);var tl=n("<option> </option>"),al=n("<option> </option>"),sl=n('<small class="svelte-uzmgeu">Try adjusting the filters to find data.</small>'),rl=n('<button class="backdrop svelte-uzmgeu" aria-label="Close modal"></button> <div class="modal svelte-uzmgeu" role="dialog" aria-modal="true"><h3 class="svelte-uzmgeu">Delete Data</h3> <p class="subtitle svelte-uzmgeu">Select data to remove from your local cache.</p> <div class="form-group svelte-uzmgeu"><label for="delete-activity" class="svelte-uzmgeu">Activity Type</label> <select id="delete-activity" class="svelte-uzmgeu"></select></div> <div class="form-group svelte-uzmgeu"><label for="delete-range" class="svelte-uzmgeu">Time Range</label> <select id="delete-range" class="svelte-uzmgeu"></select></div> <div><p class="svelte-uzmgeu">This will delete <strong class="svelte-uzmgeu"> </strong> </p> <!></div> <div class="actions svelte-uzmgeu"><button class="btn-cancel svelte-uzmgeu">Cancel</button> <button class="btn-delete svelte-uzmgeu">Delete</button></div></div>',1);function il(ze,u){gt(u,!0);let r=Xt(u,"isOpen",3,!1),h=Xt(u,"sessions",19,()=>[]),q=y("all"),w=y("all_time");const m=[{value:"all",label:"All Activities"},{value:"indoor_climb",label:"Indoor Climb"},{value:"outdoor_climb",label:"Outdoor Climb"},{value:"gym_session",label:"Gym Session"},{value:"fingerboarding",label:"Fingerboarding"},{value:"competition",label:"Competition"}],C=[{value:"24_hours",label:"Past 24 Hours"},{value:"7_days",label:"Past 7 Days"},{value:"30_days",label:"Past 30 Days"},{value:"1_year",label:"Past Year"},{value:"all_time",label:"All Time"}];function D(F,le,de){const ne=new Date;return F.filter(G=>{if(le!=="all"&&G.activityType!==le)return!1;if(de==="all_time")return!0;const $=new Date(G.date),fe=(ne.getTime()-$.getTime())/(1e3*3600*24);switch(de){case"24_hours":return fe<=1;case"7_days":return fe<=7;case"30_days":return fe<=30;case"1_year":return fe<=365;default:return!0}})}let U=lt(()=>D(h(),e(q),e(w))),re=lt(()=>e(U).length);function ce(){u.onDelete({activityType:e(q),timeRange:e(w)})}var ke=He(),te=Ie(ke);{var ie=F=>{var le=rl(),de=Ie(le);de.__click=function(...c){u.onClose?.apply(this,c)};var ne=s(de,2),G=s(a(ne),4),$=s(a(G),2);Fe($,21,()=>m,Oe,(c,v)=>{var d=tl(),x=a(d,!0);t(d);var A={};g(()=>{o(x,e(v).label),A!==(A=e(v).value)&&(d.value=(d.__value=e(v).value)??"")}),i(c,d)}),t($),t(G);var _e=s(G,2),fe=s(a(_e),2);Fe(fe,21,()=>C,Oe,(c,v)=>{var d=al(),x=a(d,!0);t(d);var A={};g(()=>{o(x,e(v).label),A!==(A=e(v).value)&&(d.value=(d.__value=e(v).value)??"")}),i(c,d)}),t(fe),t(_e);var Se=s(_e,2);let L;var O=a(Se),k=s(a(O)),J=a(k,!0);t(k);var V=s(k);t(O);var M=s(O,2);{var ve=c=>{var v=sl();i(c,v)};p(M,c=>{e(re)===0&&c(ve)})}t(Se);var Z=s(Se,2),b=a(Z);b.__click=function(...c){u.onClose?.apply(this,c)};var _=s(b,2);_.__click=ce,t(Z),t(ne),g(()=>{L=vt(Se,1,"summary-box svelte-uzmgeu",null,L,{"has-items":e(re)>0}),o(J,e(re)),o(V,` session${e(re)!==1?"s":""}.`),_.disabled=e(re)===0}),Ye(3,de,()=>ma,()=>({duration:200})),wt($,()=>e(q),c=>l(q,c)),wt(fe,()=>e(w),c=>l(w,c)),Ye(3,ne,()=>ba,()=>({duration:200,start:.9})),i(F,le)};p(te,F=>{r()&&F(ie)})}i(ze,ke),mt()}_t(["click"]);var ll=n('<button class="backdrop svelte-108px9u" aria-label="Close settings"></button> <div class="settings-modal svelte-108px9u" role="dialog" aria-modal="true"><div class="settings-header svelte-108px9u"><h3 class="svelte-108px9u">Settings</h3> <button class="close-btn svelte-108px9u">‚úï</button></div> <div class="settings-content"><div class="setting-item svelte-108px9u"><div class="setting-info svelte-108px9u"><span class="setting-label svelte-108px9u">Local Data</span> <span class="setting-desc svelte-108px9u">Remove specific sessions from this device</span></div> <button class="btn-clear-cache svelte-108px9u">Delete Data</button></div></div></div>',1),nl=n("<option> </option>"),vl=n('<div class="view-container svelte-108px9u"><!></div>'),ol=n('<div class="page svelte-108px9u"><div class="page-header svelte-108px9u"><div><h1 class="svelte-108px9u">üìä View Data</h1> <p class="subtitle svelte-108px9u">Browse your training history</p></div> <button class="settings-btn svelte-108px9u" aria-label="Settings">‚öôÔ∏è</button></div> <!> <!> <div class="content-card svelte-108px9u"><div class="form-group svelte-108px9u"><label for="activity-type" class="svelte-108px9u">Activity Type</label> <select id="activity-type" class="svelte-108px9u"><option disabled>Select an activity...</option><!></select></div> <!></div></div>');function hl(ze,u){gt(u,!0);const r=[{value:"indoor_climb",label:"Indoor Climb",icon:"üßó"},{value:"outdoor_climb",label:"Outdoor Climb",icon:"‚õ∞Ô∏è"},{value:"gym_session",label:"Gym Session",icon:"üèãÔ∏è"},{value:"fingerboarding",label:"Fingerboarding",icon:"ü§è"},{value:"competition",label:"Competition",icon:"üèÜ"}];let h=y(""),q=y(!1),w=y(!1),m=y(nt([]));function C(){l(q,!0)}function D(){l(q,!1)}function U(){l(m,Ea(),!0),l(q,!1),l(w,!0)}function re(L){const{activityType:O,timeRange:k}=L,J=new Date,V=[];e(m).forEach(M=>{if(!(O!=="all"&&M.activityType!==O)){if(k!=="all_time"){const ve=new Date(M.date),b=(J.getTime()-ve.getTime())/(1e3*3600*24);switch(k){case"24_hours":if(b>1)return;break;case"7_days":if(b>7)return;break;case"30_days":if(b>30)return;break;case"1_year":if(b>365)return;break}}V.push(M.id)}}),l(w,!1),V.length>0&&(Fa(V),window.location.reload())}var ce=ol(),ke=a(ce),te=s(a(ke),2);te.__click=C,t(ke);var ie=s(ke,2);{var F=L=>{var O=ll(),k=Ie(O);k.__click=D;var J=s(k,2),V=a(J),M=s(a(V),2);M.__click=D,t(V);var ve=s(V,2),Z=a(ve),b=s(a(Z),2);b.__click=U,t(Z),t(ve),t(J),Ye(3,k,()=>ma,()=>({duration:200})),Ye(3,J,()=>ba,()=>({duration:200,start:.9})),i(L,O)};p(ie,L=>{e(q)&&L(F)})}var le=s(ie,2);il(le,{get isOpen(){return e(w)},get sessions(){return e(m)},onClose:()=>l(w,!1),onDelete:re});var de=s(le,2),ne=a(de),G=s(a(ne),2),$=a(G);$.value=$.__value="";var _e=s($);Fe(_e,17,()=>r,L=>L.value,(L,O)=>{var k=nl(),J=a(k);t(k);var V={};g(()=>{o(J,`${e(O).icon??""} ${e(O).label??""}`),V!==(V=e(O).value)&&(k.value=(k.__value=e(O).value)??"")}),i(L,k)}),t(G),t(ne);var fe=s(ne,2);{var Se=L=>{var O=vl(),k=a(O);{var J=M=>{Ms(M,{})},V=M=>{var ve=He(),Z=Ie(ve);{var b=c=>{Yr(c,{})},_=c=>{var v=He(),d=Ie(v);{var x=oe=>{xi(oe,{})},A=oe=>{var j=He(),ye=Ie(j);{var ue=T=>{Gi(T,{})},Le=T=>{var ae=He(),P=Ie(ae);{var me=we=>{el(we,{})};p(P,we=>{e(h)==="competition"&&we(me)},!0)}i(T,ae)};p(ye,T=>{e(h)==="fingerboarding"?T(ue):T(Le,!1)},!0)}i(oe,j)};p(d,oe=>{e(h)==="gym_session"?oe(x):oe(A,!1)},!0)}i(c,v)};p(Z,c=>{e(h)==="outdoor_climb"?c(b):c(_,!1)},!0)}i(M,ve)};p(k,M=>{e(h)==="indoor_climb"?M(J):M(V,!1)})}t(O),i(L,O)};p(fe,L=>{e(h)&&L(Se)})}t(de),t(ce),wt(G,()=>e(h),L=>l(h,L)),i(ze,ce),mt()}_t(["click"]);export{hl as component};
