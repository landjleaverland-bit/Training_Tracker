import{f as v,a as i,c as Qe,t as qa}from"../chunks/CSQvsE9s.js";import{p as pa,c as t,s,i as e,aV as k,r as a,t as _,a as _a,x as l,b0 as Ha,f as Me,aG as za,aW as oa,w as ma,o as Ba,b8 as Wa,d as Ya}from"../chunks/DGPNV_z9.js";import{d as da,s as d}from"../chunks/DSMXtqZM.js";import{i as p}from"../chunks/D9GEZg6r.js";import{s as Ye,r as Ne,e as qe,i as Fe,b as Ie,c as Ja}from"../chunks/_iMURHzE.js";import{t as ta,k as ua,i as Za,u as Qa,s as Ga,l as $a,g as et,b as at,m as tt,n as st,D as Na,E as rt,o as it,p as lt,q as vt,d as nt,r as ot}from"../chunks/D6TTY3SH.js";import{c as ya,f as ea,n as Aa,m as Ka,b as ja,o as Ea,p as Oa,q as Va,t as Pa,v as Ra,w as dt}from"../chunks/Cn4iyW3Z.js";import{s as aa}from"../chunks/Ct8JfZaa.js";import{p as Ia}from"../chunks/Dd0awD9h.js";var ct=v('<span class="chevron svelte-12crvy">‚ñ≤</span>'),pt=v('<span class="chevron svelte-12crvy">‚ñº</span>'),_t=v('<div class="input-with-action svelte-12crvy"><input type="text" id="location-manual" placeholder="Custom location..." class="flat-left svelte-12crvy"/> <button type="button" class="action-btn flat-right svelte-12crvy" title="Back to list">‚úï</button></div>'),ut=v("<option> </option>"),ft=v('<select id="location-filter" class="svelte-12crvy"><option>Any Location</option><!></select>'),gt=v("<option> </option>"),mt=v("<option> </option>"),ht=v('<div class="filter-body svelte-12crvy"><div class="filter-grid svelte-12crvy"><div class="filter-item svelte-12crvy"><label for="start-date" class="svelte-12crvy">Start Date</label> <input type="date" id="start-date" class="svelte-12crvy"/></div> <div class="filter-item svelte-12crvy"><label for="end-date" class="svelte-12crvy">End Date</label> <input type="date" id="end-date" class="svelte-12crvy"/></div> <div class="filter-item svelte-12crvy"><label for="location-filter" class="svelte-12crvy">Location</label> <!></div> <div class="filter-item svelte-12crvy"><label for="climbing-type-filter" class="svelte-12crvy">Climb Type</label> <select id="climbing-type-filter" class="svelte-12crvy"><option>Any Type</option><!></select></div> <div class="filter-item svelte-12crvy"><label for="session-type-filter" class="svelte-12crvy">Session Type</label> <select id="session-type-filter" class="svelte-12crvy"><option>Any Type</option><!></select></div> <div class="filter-item svelte-12crvy"><label for="grade-filter" class="svelte-12crvy">Grade (Exact)</label> <input type="text" id="grade-filter" placeholder="e.g. V4" class="svelte-12crvy"/></div></div> <div class="filter-actions svelte-12crvy"><button class="reset-btn svelte-12crvy">Reset Filters</button></div></div>'),bt=v('<div class="filter-container svelte-12crvy"><button class="filter-header svelte-12crvy"><div class="header-content svelte-12crvy"><span class="icon svelte-12crvy">üîç</span> <span class="title svelte-12crvy">Filters</span> <!></div></button> <!></div>');function yt(Te,c){pa(c,!0);const r=["Rockstar Swindon","Flashpoint Swindon","Flashpoint Bristol","Redpoint Bristol","TCH Bristol","Other"],f=["Bouldering","Sport","Mixed"],F=["Projecting","Onsighting","Campusing","Repeaters"];let D=k(!1),u=k(""),z=k(""),x=k(""),U=k(""),X=k(""),ne=k(""),ue=k(!1);function te(){l(D,!e(D))}function ee(){l(u,""),l(z,""),l(x,""),l(U,""),l(ue,!1),l(X,""),l(ne,""),J()}function J(){c.onFilterParamsChange({startDate:e(u),endDate:e(z),location:e(x),climbingType:e(U),sessionType:e(X),grade:e(ne)})}function oe(){e(x)==="Other"?(l(ue,!0),l(x,"")):J()}function fe(){l(ue,!1),l(x,""),J()}var re=bt(),H=t(re);H.__click=te;var le=t(H),we=s(t(le),4);{var ye=m=>{var E=ct();i(m,E)},ae=m=>{var E=pt();i(m,E)};p(we,m=>{e(D)?m(ye):m(ae,!1)})}a(le),a(H);var N=s(H,2);{var g=m=>{var E=ht(),R=t(E),B=t(R),Z=s(t(B),2);Ne(Z),Z.__change=J,a(B);var K=s(B,2),h=s(t(K),2);Ne(h),h.__change=J,a(K);var G=s(K,2),b=s(t(G),2);{var n=q=>{var y=_t(),O=t(y);Ne(O),O.__input=J;var be=s(O,2);be.__click=fe,a(y),Ie(O,()=>e(x),C=>l(x,C)),i(q,y)},o=q=>{var y=ft();y.__change=oe;var O=t(y);O.value=O.__value="";var be=s(O);qe(be,17,()=>r,Fe,(C,S)=>{var M=ut(),V=t(M,!0);a(M);var se={};_(()=>{d(V,e(S)),se!==(se=e(S))&&(M.value=(M.__value=e(S))??"")}),i(C,M)}),a(y),ya(y,()=>e(x),C=>l(x,C)),i(q,y)};p(b,q=>{e(ue)?q(n):q(o,!1)})}a(G);var T=s(G,2),W=s(t(T),2);W.__change=J;var Y=t(W);Y.value=Y.__value="";var j=s(Y);qe(j,17,()=>f,Fe,(q,y)=>{var O=gt(),be=t(O,!0);a(O);var C={};_(()=>{d(be,e(y)),C!==(C=e(y))&&(O.value=(O.__value=e(y))??"")}),i(q,O)}),a(W),a(T);var de=s(T,2),ve=s(t(de),2);ve.__change=J;var xe=t(ve);xe.value=xe.__value="";var L=s(xe);qe(L,17,()=>F,Fe,(q,y)=>{var O=mt(),be=t(O,!0);a(O);var C={};_(()=>{d(be,e(y)),C!==(C=e(y))&&(O.value=(O.__value=e(y))??"")}),i(q,O)}),a(ve),a(de);var I=s(de,2),me=s(t(I),2);Ne(me),me.__input=J,a(I),a(R);var Se=s(R,2),ke=t(Se);ke.__click=ee,a(Se),a(E),Ie(Z,()=>e(u),q=>l(u,q)),Ie(h,()=>e(z),q=>l(z,q)),ya(W,()=>e(U),q=>l(U,q)),ya(ve,()=>e(X),q=>l(X,q)),Ie(me,()=>e(ne),q=>l(ne,q)),ta(3,E,()=>ua,()=>({duration:200})),i(m,E)};p(N,m=>{e(D)&&m(g)})}a(re),_(()=>Ye(H,"aria-expanded",e(D))),i(Te,re),_a()}da(["click","change","input"]);var xt=v('<label class="type-toggle svelte-yz0xxt"><input type="checkbox"/> <span>Sport?</span></label>'),wt=v("<option> </option>"),St=v('<div class="edit-form svelte-yz0xxt"><div class="edit-row main svelte-yz0xxt"><input type="text" class="edit-input grade svelte-yz0xxt" placeholder="Grade"/> <input type="text" class="edit-input name svelte-yz0xxt" placeholder="Route Name"/> <!></div> <div class="edit-row meta svelte-yz0xxt"><select class="edit-select svelte-yz0xxt"></select> <div class="attempts-input-wrapper svelte-yz0xxt"><span>#</span> <input type="number" min="1" class="edit-input num svelte-yz0xxt"/></div></div> <div class="edit-row notes svelte-yz0xxt"><textarea class="edit-input notes-area svelte-yz0xxt" placeholder="Notes..."></textarea></div> <div class="edit-actions svelte-yz0xxt"><button class="action-btn cancel svelte-yz0xxt">Cancel</button> <button class="action-btn save svelte-yz0xxt">Save</button></div></div>'),kt=v('<span class="climb-type-tag svelte-yz0xxt"> </span>'),Dt=v('<span class="notes-preview svelte-yz0xxt"> </span>'),Tt=v('<span class="wall-tag svelte-yz0xxt"> </span>'),qt=v('<span class="technique-tag svelte-yz0xxt"> </span>'),zt=v('<span class="attempts-count svelte-yz0xxt"> </span>'),Ct=v('<div class="detail-row svelte-yz0xxt"><span class="label svelte-yz0xxt">Notes:</span> <p class="notes svelte-yz0xxt"> </p></div>'),Lt=v('<p class="empty-notes svelte-yz0xxt">No notes for this climb.</p>'),Ft=v('<div class="climb-details svelte-yz0xxt"><!> <div class="tags svelte-yz0xxt"><span class="tag type svelte-yz0xxt"> </span> <span class="tag attempt-text svelte-yz0xxt"> </span></div></div>'),Et=v('<div class="climb-header svelte-yz0xxt" role="button" tabindex="0"><div class="climb-main-info svelte-yz0xxt"><span> </span> <span class="climb-name svelte-yz0xxt"> </span> <!> <!> <!> <!></div> <div class="climb-meta svelte-yz0xxt"><span><span class="icon svelte-yz0xxt"> </span> <!></span> <button class="icon-btn edit-btn svelte-yz0xxt" aria-label="Edit climb" title="Edit climb">‚úé</button> <button class="icon-btn delete-btn svelte-yz0xxt" aria-label="Delete climb" title="Delete climb">üóëÔ∏è</button> <span class="chevron svelte-yz0xxt"> </span></div></div> <!>',1),Gt=v("<div><!></div>");function Ot(Te,c){pa(c,!0);let r=Ia(c,"showClimbType",3,!1),f=k(!1),F=k(!1),D=k(""),u=k(""),z=k(""),x=k(1),U=k(""),X=k(!1);function ne(){e(F)||l(f,!e(f))}function ue(N){N.stopPropagation(),c.onDelete()}function te(N){N.stopPropagation(),l(D,c.climb.name,!0),l(u,c.climb.grade,!0),l(z,c.climb.attemptType,!0),l(x,c.climb.attemptsNum,!0),l(U,c.climb.notes,!0),l(X,c.climb.isSport,!0),l(F,!0),l(f,!0)}function ee(N){N.stopPropagation(),l(F,!1)}function J(N){N.stopPropagation();const g={...c.climb,name:e(D),grade:e(u),attemptType:e(z),attemptsNum:e(x),notes:e(U),isSport:e(X)};c.onUpdate(g),l(F,!1)}function oe(){(e(z)==="Flash"||e(z)==="Onsight")&&l(x,1)}const fe={Flash:"‚ö°",Onsight:"üëÅÔ∏è",Redpoint:"üî¥",Dogged:"üõ†Ô∏è",DNF:"‚ùå"},re=["Flash","Onsight","Redpoint","Dogged","DNF"];var H=Gt();let le;var we=t(H);{var ye=N=>{var g=St(),m=t(g),E=t(m);Ne(E);var R=s(E,2);Ne(R);var B=s(R,2);{var Z=j=>{var de=xt(),ve=t(de);Ne(ve),za(2),a(de),Ja(ve,()=>e(X),xe=>l(X,xe)),i(j,de)};p(B,j=>{r()&&j(Z)})}a(m);var K=s(m,2),h=t(K);h.__change=oe,qe(h,21,()=>re,Fe,(j,de)=>{var ve=wt(),xe=t(ve,!0);a(ve);var L={};_(()=>{d(xe,e(de)),L!==(L=e(de))&&(ve.value=(ve.__value=e(de))??"")}),i(j,ve)}),a(h);var G=s(h,2),b=s(t(G),2);Ne(b),a(G),a(K);var n=s(K,2),o=t(n);Ha(o),a(n);var T=s(n,2),W=t(T);W.__click=ee;var Y=s(W,2);Y.__click=J,a(T),a(g),_(()=>b.disabled=e(z)==="Flash"||e(z)==="Onsight"),Ie(E,()=>e(u),j=>l(u,j)),Ie(R,()=>e(D),j=>l(D,j)),ya(h,()=>e(z),j=>l(z,j)),Ie(b,()=>e(x),j=>l(x,j)),Ie(o,()=>e(U),j=>l(U,j)),i(N,g)},ae=N=>{var g=Et(),m=Me(g);m.__click=ne,m.__keydown=S=>(S.key==="Enter"||S.key===" ")&&ne();var E=t(m),R=t(E);let B;var Z=t(R,!0);a(R);var K=s(R,2),h=t(K,!0);a(K);var G=s(K,2);{var b=S=>{var M=kt(),V=t(M,!0);a(M),_(()=>d(V,c.climb.isSport?"Sport":"Boulder")),i(S,M)};p(G,S=>{r()&&S(b)})}var n=s(G,2);{var o=S=>{var M=Dt(),V=t(M);a(M),_(()=>d(V,`- ${c.climb.notes??""}`)),i(S,M)};p(n,S=>{!e(f)&&c.climb.notes&&S(o)})}var T=s(n,2);{var W=S=>{var M=Tt(),V=t(M,!0);a(M),_(()=>d(V,c.climb.wall)),i(S,M)};p(T,S=>{c.climb.wall&&S(W)})}var Y=s(T,2);{var j=S=>{var M=qt(),V=t(M,!0);a(M),_(()=>d(V,c.climb.techniqueFocus)),i(S,M)};p(Y,S=>{c.climb.techniqueFocus&&S(j)})}a(E);var de=s(E,2),ve=t(de);let xe;var L=t(ve),I=t(L,!0);a(L);var me=s(L,2);{var Se=S=>{var M=zt(),V=t(M,!0);a(M),_(()=>d(V,c.climb.attemptsNum)),i(S,M)};p(me,S=>{c.climb.attemptType!=="Flash"&&c.climb.attemptType!=="Onsight"&&S(Se)})}a(ve);var ke=s(ve,2);ke.__click=te;var q=s(ke,2);q.__click=ue;var y=s(q,2),O=t(y,!0);a(y),a(de),a(m);var be=s(m,2);{var C=S=>{var M=Ft(),V=t(M);{var se=$=>{var pe=Ct(),Ge=s(t(pe),2),Oe=t(Ge,!0);a(Ge),a(pe),_(()=>d(Oe,c.climb.notes)),i($,pe)},ce=$=>{var pe=Lt();i($,pe)};p(V,$=>{c.climb.notes?$(se):$(ce,!1)})}var Ee=s(V,2),he=t(Ee),Ce=t(he,!0);a(he);var De=s(he,2),Le=t(De,!0);a(De),a(Ee),a(M),_(()=>{d(Ce,c.climb.isSport?"Sport":"Boulder"),d(Le,c.climb.attemptType)}),ta(3,M,()=>ua,()=>({duration:150})),i(S,M)};p(be,S=>{e(f)&&S(C)})}_(()=>{Ye(m,"aria-expanded",e(f)),B=aa(R,1,"grade-badge svelte-yz0xxt",null,B,{sport:c.climb.isSport}),d(Z,c.climb.grade),d(h,c.climb.name||"Unnamed Route"),xe=aa(ve,1,"attempt-type svelte-yz0xxt",null,xe,{flash:c.climb.attemptType==="Flash"}),d(I,fe[c.climb.attemptType]||c.climb.attemptType),d(O,e(f)?"‚ñ≤":"‚ñº")}),i(N,g)};p(we,N=>{e(F)?N(ye):N(ae,!1)})}a(H),_(()=>le=aa(H,1,"climb-entry svelte-yz0xxt",null,le,{expanded:e(f),editing:e(F)})),i(Te,H),_a()}da(["change","click","keydown"]);var At=v('<span class="stat svelte-7vqogn"> </span>'),jt=v('<span class="status-icon pending svelte-7vqogn" title="Waiting to sync">üîÑ</span>'),Nt=v('<span class="status-icon error svelte-7vqogn" title="Sync error">‚ö†Ô∏è</span>'),It=v('<span class="chip svelte-7vqogn"> </span>'),Mt=v('<span class="text-none svelte-7vqogn">None</span>'),Pt=v('<div class="detail-item svelte-7vqogn"><span class="label svelte-7vqogn">Difficulty</span> <span class="value svelte-7vqogn"> </span></div>'),Rt=v('<span class="chip svelte-7vqogn"> </span>'),Bt=v('<span class="text-none svelte-7vqogn">None</span>'),Vt=v('<div class="detail-item svelte-7vqogn"><span class="label svelte-7vqogn">Category</span> <div class="value-chips svelte-7vqogn"><!></div></div>'),Ut=v('<span class="chip svelte-7vqogn"> </span>'),Wt=v('<span class="text-none svelte-7vqogn">None</span>'),Ht=v('<div class="detail-item svelte-7vqogn"><span class="label svelte-7vqogn">Energy System</span> <div class="value-chips svelte-7vqogn"><!></div></div>'),Jt=v('<span class="chip svelte-7vqogn"> </span>'),Zt=v('<span class="text-none svelte-7vqogn">None</span>'),Kt=v('<div class="detail-item svelte-7vqogn"><span class="label svelte-7vqogn">Wall</span> <div class="value-chips svelte-7vqogn"><!></div></div>'),Xt=v('<div class="metric svelte-7vqogn"><span class="label svelte-7vqogn">Open Grip</span> <div class="bar-container svelte-7vqogn"><div class="bar-fill svelte-7vqogn"></div></div> <span class="score svelte-7vqogn"> </span></div>'),Yt=v('<div class="metric svelte-7vqogn"><span class="label svelte-7vqogn">Crimp Grip</span> <div class="bar-container svelte-7vqogn"><div class="bar-fill svelte-7vqogn"></div></div> <span class="score svelte-7vqogn"> </span></div>'),Qt=v('<div class="metric svelte-7vqogn"><span class="label svelte-7vqogn">Pinch Grip</span> <div class="bar-container svelte-7vqogn"><div class="bar-fill svelte-7vqogn"></div></div> <span class="score svelte-7vqogn"> </span></div>'),$t=v('<div class="metric svelte-7vqogn"><span class="label svelte-7vqogn">Sloper Grip</span> <div class="bar-container svelte-7vqogn"><div class="bar-fill svelte-7vqogn"></div></div> <span class="score svelte-7vqogn"> </span></div>'),es=v('<div class="metric svelte-7vqogn"><span class="label svelte-7vqogn">Jug Grip</span> <div class="bar-container svelte-7vqogn"><div class="bar-fill svelte-7vqogn"></div></div> <span class="score svelte-7vqogn"> </span></div>'),as=v('<p class="no-climbs svelte-7vqogn">No climbs logged for this session.</p>'),ts=v('<div class="card-body svelte-7vqogn"><div class="details-grid svelte-7vqogn"><div class="detail-item svelte-7vqogn"><span class="label svelte-7vqogn">Training Type</span> <div class="value-chips svelte-7vqogn"><!></div></div> <!> <!> <!> <!></div> <div class="metrics-container svelte-7vqogn"><div class="metric svelte-7vqogn"><span class="label svelte-7vqogn">Finger Load</span> <div class="bar-container svelte-7vqogn"><div class="bar-fill svelte-7vqogn"></div></div> <span class="score svelte-7vqogn"> </span></div> <div class="metric svelte-7vqogn"><span class="label svelte-7vqogn">Shoulder Load</span> <div class="bar-container svelte-7vqogn"><div class="bar-fill svelte-7vqogn"></div></div> <span class="score svelte-7vqogn"> </span></div> <div class="metric svelte-7vqogn"><span class="label svelte-7vqogn">Forearm Load</span> <div class="bar-container svelte-7vqogn"><div class="bar-fill svelte-7vqogn"></div></div> <span class="score svelte-7vqogn"> </span></div> <!> <!> <!> <!> <!></div> <div class="climbs-list svelte-7vqogn"><h4 class="svelte-7vqogn">Climbs</h4> <div class="climbs-container svelte-7vqogn"><!> <!></div></div></div>'),ss=v('<div><div class="card-header svelte-7vqogn" role="button" tabindex="0"><div class="header-main svelte-7vqogn"><div class="date-badge svelte-7vqogn"><span class="day svelte-7vqogn"> </span> <span class="month svelte-7vqogn"> </span></div> <div class="session-info svelte-7vqogn"><div class="session-text svelte-7vqogn"><h3 class="location svelte-7vqogn"> </h3> <div class="session-meta svelte-7vqogn"><span class="type-tag svelte-7vqogn"> </span> <span class="stat svelte-7vqogn"> </span> <!></div></div> <div class="load-summary svelte-7vqogn"><div class="load-badge finger svelte-7vqogn"> </div> <div class="load-badge shoulder svelte-7vqogn"> </div> <div class="load-badge forearm svelte-7vqogn"> </div></div></div></div> <div class="header-actions"><div class="header-status svelte-7vqogn"><!></div>  <button class="btn-icon delete-session" title="Delete Session">üóëÔ∏è</button> <span class="chevron svelte-7vqogn"> </span></div></div> <!></div>');function rs(Te,c){pa(c,!0);let r=Ia(c,"session",7),f=k(!1),F=k(!1);function D(){l(f,!e(f))}function u(){l(F,!0)}function z(q){const y=[...r().climbs];y.splice(q,1),Aa(r().id,{climbs:y}),c.onDelete()}function x(q,y){const O=[...r().climbs];O[q]=y,U(O)}async function U(q){if(Aa(r().id,{climbs:q}),r().climbs=q,Za()){const y={date:r().date,location:r().location,customLocation:r().customLocation,climbingType:r().climbingType,trainingTypes:r().trainingTypes||[],difficulty:r().difficulty,categories:r().categories||[],energySystems:r().energySystems||[],wallAngles:r().wallAngles||[],fingerLoad:r().fingerLoad,shoulderLoad:r().shoulderLoad,forearmLoad:r().forearmLoad,openGrip:r().openGrip,crimpGrip:r().crimpGrip,pinchGrip:r().pinchGrip,sloperGrip:r().sloperGrip,jugGrip:r().jugGrip,climbs:q};try{const O=await Qa(r().id,y);O.ok?(Ka(r().id),r().syncStatus="synced"):(console.error("Failed to sync update:",O.error),ja(r().id),r().syncStatus="error")}catch(O){console.error("Exception syncing update:",O),ja(r().id),r().syncStatus="error"}}}let X=oa(()=>r().climbs?.length??0),ne=oa(()=>(r().climbs||[]).reduce((q,y)=>{const O=parseInt(y.grade.replace(/\D/g,""))||0,be=parseInt(q.replace(/\D/g,""))||0;return O>be?y.grade:q},"V0"));var ue=ss();let te;var ee=t(ue);ee.__click=D,ee.__keydown=q=>q.key==="Enter"&&D();var J=t(ee),oe=t(J),fe=t(oe),re=t(fe,!0);a(fe);var H=s(fe,2),le=t(H,!0);a(H),a(oe);var we=s(oe,2),ye=t(we),ae=t(ye),N=t(ae,!0);a(ae);var g=s(ae,2),m=t(g),E=t(m,!0);a(m);var R=s(m,2),B=t(R);a(R);var Z=s(R,2);{var K=q=>{var y=At(),O=t(y);a(y),_(()=>d(O,`Max: ${e(ne)??""}`)),i(q,y)};p(Z,q=>{e(X)>0&&q(K)})}a(g),a(ye);var h=s(ye,2),G=t(h),b=t(G,!0);a(G);var n=s(G,2),o=t(n,!0);a(n);var T=s(n,2),W=t(T,!0);a(T),a(h),a(we),a(J);var Y=s(J,2),j=t(Y),de=t(j);{var ve=q=>{var y=jt();i(q,y)},xe=q=>{var y=Qe(),O=Me(y);{var be=C=>{var S=Nt();i(C,S)};p(O,C=>{r().syncStatus==="error"&&C(be)},!0)}i(q,y)};p(de,q=>{r().syncStatus==="pending"?q(ve):q(xe,!1)})}a(j);var L=s(j,2);L.__click=q=>{q.stopPropagation(),u()};var I=s(L,2),me=t(I,!0);a(I),a(Y),a(ee);var Se=s(ee,2);{var ke=q=>{var y=ts(),O=t(y),be=t(O),C=s(t(be),2),S=t(C);{var M=Q=>{var ie=Qe(),w=Me(ie);qe(w,17,()=>r().trainingTypes,Fe,(A,P)=>{var ge=It(),_e=t(ge,!0);a(ge),_(()=>d(_e,e(P))),i(A,ge)}),i(Q,ie)},V=Q=>{var ie=Mt();i(Q,ie)};p(S,Q=>{r().trainingTypes&&r().trainingTypes.length>0&&!r().trainingTypes.includes("None")?Q(M):Q(V,!1)})}a(C),a(be);var se=s(be,2);{var ce=Q=>{var ie=Pt(),w=s(t(ie),2),A=t(w,!0);a(w),a(ie),_(()=>d(A,r().difficulty)),i(Q,ie)};p(se,Q=>{r().difficulty&&Q(ce)})}var Ee=s(se,2);{var he=Q=>{var ie=Vt(),w=s(t(ie),2),A=t(w);{var P=_e=>{var ze=Qe(),We=Me(ze);qe(We,17,()=>r().categories,Fe,(va,Da)=>{var na=Rt(),Ta=t(na,!0);a(na),_(()=>d(Ta,e(Da))),i(va,na)}),i(_e,ze)},ge=_e=>{var ze=Bt();i(_e,ze)};p(A,_e=>{r().categories.length>0&&!r().categories.includes("None")?_e(P):_e(ge,!1)})}a(w),a(ie),i(Q,ie)};p(Ee,Q=>{r().categories?.length&&Q(he)})}var Ce=s(Ee,2);{var De=Q=>{var ie=Ht(),w=s(t(ie),2),A=t(w);{var P=_e=>{var ze=Qe(),We=Me(ze);qe(We,17,()=>r().energySystems,Fe,(va,Da)=>{var na=Ut(),Ta=t(na,!0);a(na),_(()=>d(Ta,e(Da))),i(va,na)}),i(_e,ze)},ge=_e=>{var ze=Wt();i(_e,ze)};p(A,_e=>{r().energySystems.length>0&&!r().energySystems.includes("None")?_e(P):_e(ge,!1)})}a(w),a(ie),i(Q,ie)};p(Ce,Q=>{r().energySystems?.length&&Q(De)})}var Le=s(Ce,2);{var $=Q=>{var ie=Kt(),w=s(t(ie),2),A=t(w);{var P=_e=>{var ze=Qe(),We=Me(ze);qe(We,17,()=>r().wallAngles,Fe,(va,Da)=>{var na=Jt(),Ta=t(na,!0);a(na),_(()=>d(Ta,e(Da))),i(va,na)}),i(_e,ze)},ge=_e=>{var ze=Zt();i(_e,ze)};p(A,_e=>{r().wallAngles.length>0&&!r().wallAngles.includes("None")?_e(P):_e(ge,!1)})}a(w),a(ie),i(Q,ie)};p(Le,Q=>{r().wallAngles?.length&&Q($)})}a(O);var pe=s(O,2),Ge=t(pe),Oe=s(t(Ge),2),je=t(Oe);a(Oe);var Ze=s(Oe,2),Pe=t(Ze);a(Ze),a(Ge);var Re=s(Ge,2),$e=s(t(Re),2),Ke=t($e);a($e);var ca=s($e,2),fa=t(ca);a(ca),a(Re);var sa=s(Re,2),ra=s(t(sa),2),Ae=t(ra);a(ra);var Ue=s(ra,2),Xe=t(Ue);a(Ue),a(sa);var ia=s(sa,2);{var Be=Q=>{var ie=Xt(),w=s(t(ie),2),A=t(w);a(w);var P=s(w,2),ge=t(P);a(P),a(ie),_(()=>{ea(A,`width: ${r().openGrip/5*100}%`),d(ge,`${r().openGrip??""}/5`)}),i(Q,ie)};p(ia,Q=>{r().openGrip&&Q(Be)})}var Ve=s(ia,2);{var la=Q=>{var ie=Yt(),w=s(t(ie),2),A=t(w);a(w);var P=s(w,2),ge=t(P);a(P),a(ie),_(()=>{ea(A,`width: ${r().crimpGrip/5*100}%`),d(ge,`${r().crimpGrip??""}/5`)}),i(Q,ie)};p(Ve,Q=>{r().crimpGrip&&Q(la)})}var He=s(Ve,2);{var Ca=Q=>{var ie=Qt(),w=s(t(ie),2),A=t(w);a(w);var P=s(w,2),ge=t(P);a(P),a(ie),_(()=>{ea(A,`width: ${r().pinchGrip/5*100}%`),d(ge,`${r().pinchGrip??""}/5`)}),i(Q,ie)};p(He,Q=>{r().pinchGrip&&Q(Ca)})}var ha=s(He,2);{var wa=Q=>{var ie=$t(),w=s(t(ie),2),A=t(w);a(w);var P=s(w,2),ge=t(P);a(P),a(ie),_(()=>{ea(A,`width: ${r().sloperGrip/5*100}%`),d(ge,`${r().sloperGrip??""}/5`)}),i(Q,ie)};p(ha,Q=>{r().sloperGrip&&Q(wa)})}var ba=s(ha,2);{var Sa=Q=>{var ie=es(),w=s(t(ie),2),A=t(w);a(w);var P=s(w,2),ge=t(P);a(P),a(ie),_(()=>{ea(A,`width: ${r().jugGrip/5*100}%`),d(ge,`${r().jugGrip??""}/5`)}),i(Q,ie)};p(ba,Q=>{r().jugGrip&&Q(Sa)})}a(pe);var La=s(pe,2),ka=s(t(La),2),xa=t(ka);qe(xa,17,()=>r().climbs||[],Fe,(Q,ie,w)=>{{let A=oa(()=>r().climbingType==="Mixed");Ot(Q,{get climb(){return e(ie)},onDelete:()=>z(w),onUpdate:P=>x(w,P),get showClimbType(){return e(A)}})}});var Je=s(xa,2);{var ga=Q=>{var ie=as();i(Q,ie)};p(Je,Q=>{(r().climbs||[]).length===0&&Q(ga)})}a(ka),a(La),a(y),_(()=>{ea(je,`width: ${r().fingerLoad/5*100}%`),d(Pe,`${r().fingerLoad??""}/5`),ea(Ke,`width: ${r().shoulderLoad/5*100}%`),d(fa,`${r().shoulderLoad??""}/5`),ea(Ae,`width: ${r().forearmLoad/5*100}%`),d(Xe,`${r().forearmLoad??""}/5`)}),ta(3,y,()=>ua,()=>({duration:150})),i(q,y)};p(Se,q=>{e(f)&&q(ke)})}a(ue),_((q,y)=>{te=aa(ue,1,"session-card svelte-7vqogn",null,te,{expanded:e(f)}),Ye(ee,"aria-expanded",e(f)),d(re,q),d(le,y),d(N,r().location),d(E,r().climbingType),d(B,`${e(X)??""} climbs`),Ye(G,"title",`Finger Load: ${r().fingerLoad??""}`),d(b,r().fingerLoad),Ye(n,"title",`Shoulder Load: ${r().shoulderLoad??""}`),d(o,r().shoulderLoad),Ye(T,"title",`Forearm Load: ${r().forearmLoad??""}`),d(W,r().forearmLoad),d(me,e(f)?"‚ñ≤":"‚ñº")},[()=>new Date(r().date).getDate(),()=>new Date(r().date).toLocaleDateString("en-GB",{month:"short"})]),i(Te,ue),_a()}da(["click","keydown"]);var is=v('<div class="legend-item svelte-11p9lqi"><span class="l-icon svelte-11p9lqi"> </span> <span class="l-label svelte-11p9lqi"> </span></div>'),ls=v('<div class="legend-content svelte-11p9lqi"><div class="legend-grid svelte-11p9lqi"></div></div>'),vs=v('<div class="legend-container svelte-11p9lqi"><button class="legend-toggle svelte-11p9lqi"><span class="icon">‚ÑπÔ∏è</span> <span class="text">Icon Legend</span> <span class="chevron svelte-11p9lqi"> </span></button> <!></div>');function Xa(Te){let c=k(!1);const r=[{icon:"üëÅÔ∏è",label:"Onsight"},{icon:"‚ö°",label:"Flash"},{icon:"üî¥",label:"Redpoint"},{icon:"üõ†Ô∏è",label:"Dogged"},{icon:"‚ùå",label:"DNF"}];var f=vs(),F=t(f);F.__click=()=>l(c,!e(c));var D=s(t(F),4),u=t(D,!0);a(D),a(F);var z=s(F,2);{var x=U=>{var X=ls(),ne=t(X);qe(ne,21,()=>r,Fe,(ue,te)=>{var ee=is(),J=t(ee),oe=t(J,!0);a(J);var fe=s(J,2),re=t(fe,!0);a(fe),a(ee),_(()=>{d(oe,e(te).icon),d(re,e(te).label)}),i(ue,ee)}),a(ne),a(X),ta(3,X,()=>ua),i(U,X)};p(z,U=>{e(c)&&U(x)})}a(f),_(()=>{Ye(F,"aria-expanded",e(c)),d(u,e(c)?"‚ñº":"‚ñ∂")}),i(Te,f)}da(["click"]);function Ua(Te,c){if(!Te||Te.length===0){alert("No data to export");return}const r=Array.from(new Set(Te.flatMap(Object.keys))),f=[r.join(","),...Te.map(u=>r.map(z=>{let x=u[z];if(x==null)return"";if(typeof x=="object"){if(x instanceof Date)return x.toISOString();x=JSON.stringify(x).replace(/"/g,'""')}else typeof x=="string"&&(x=x.replace(/"/g,'""'));return typeof x=="string"&&(x.includes(",")||x.includes('"')||x.includes(`
`))?`"${x}"`:x}).join(","))].join(`
`),F=new Blob([f],{type:"text/csv;charset=utf-8;"}),D=document.createElement("a");if(D.download!==void 0){const u=URL.createObjectURL(F);D.setAttribute("href",u),D.setAttribute("download",c.endsWith(".csv")?c:`${c}.csv`),D.style.visibility="hidden",document.body.appendChild(D),D.click(),document.body.removeChild(D)}}var ns=v('<span class="spinner svelte-14fqz8w"></span> Fetching...',1),os=v('<div class="error-banner svelte-14fqz8w"> </div>'),ds=v('<small class="svelte-14fqz8w">Try adjusting your filters.</small>'),cs=v('<div class="empty-state svelte-14fqz8w"><p class="svelte-14fqz8w">No indoor climbing sessions found.</p> <!></div>'),ps=v('<div class="load-more-container svelte-14fqz8w"><button class="load-more-btn svelte-14fqz8w"> </button></div>'),_s=v('<div class="view-container svelte-14fqz8w"><div class="view-header svelte-14fqz8w"><h2 class="view-title svelte-14fqz8w">üßó Indoor Climbing History</h2> <div class="header-actions svelte-14fqz8w"><button class="action-btn secondary svelte-14fqz8w" title="Export filtered data to CSV">üì• Export</button> <button class="action-btn svelte-14fqz8w" title="Fetch data from cloud"><!></button></div></div> <!> <!> <div class="info-bar svelte-14fqz8w"><div class="legend-wrapper svelte-14fqz8w"><!></div> <div class="load-key svelte-14fqz8w"><span class="key-label svelte-14fqz8w">Load:</span> <div class="key-item svelte-14fqz8w"><span class="dot finger svelte-14fqz8w"></span> Finger</div> <div class="key-item svelte-14fqz8w"><span class="dot shoulder svelte-14fqz8w"></span> Shoulder</div> <div class="key-item svelte-14fqz8w"><span class="dot forearm svelte-14fqz8w"></span> Forearm</div></div></div> <div class="sessions-list"><!> <!> <!></div></div>');function us(Te,c){pa(c,!0);let r=k(ma([])),f=k(ma([])),F=k(!1),D=k(""),u=k(ma({startDate:"",endDate:"",location:"",climbingType:"",sessionType:"",grade:""})),z=k(20);const x=20;Ba(()=>{U()});function U(){const n=Ea("indoor_climb");l(r,n.sort((o,T)=>new Date(T.date).getTime()-new Date(o.date).getTime()),!0),te()}async function X(){l(F,!0),l(D,"");try{await Ga();const n=await $a();n.ok&&n.data?ne(n.data):l(D,n.error||"Failed to fetch data",!0)}catch(n){l(D,n instanceof Error?n.message:"Unknown error",!0)}finally{l(F,!1)}}function ne(n){const o=n.map(W=>({...W,activityType:"indoor_climb",createdAt:new Date().toISOString(),updatedAt:new Date().toISOString(),syncStatus:"synced",syncedAt:new Date().toISOString(),openGrip:0,crimpGrip:0,pinchGrip:0,sloperGrip:0,jugGrip:0}));Oa(o);const T=Ea("indoor_climb");l(r,T.sort((W,Y)=>new Date(Y.date).getTime()-new Date(W.date).getTime()),!0),te()}function ue(n){l(u,n,!0),te()}function te(){l(z,x),l(f,e(r).filter(n=>{if(e(u).startDate&&n.date<e(u).startDate||e(u).endDate&&n.date>e(u).endDate||e(u).location&&n.location!==e(u).location)return!1;if(e(u).climbingType&&(n.climbingType==="Leading"?"Sport":n.climbingType)!==e(u).climbingType)if(n.climbingType==="Mixed")if(e(u).climbingType==="Bouldering"){if(!n.climbs.some(T=>!T.isSport))return!1}else if(e(u).climbingType==="Sport"){if(!n.climbs.some(T=>T.isSport))return!1}else return!1;else return!1;if(e(u).sessionType&&!n.trainingTypes?.includes(e(u).sessionType))return!1;if(e(u).grade){const o=e(u).grade.trim().toLowerCase();if(!n.climbs.some(W=>W.grade.trim().toLowerCase()===o))return!1}return!0}),!0)}function ee(){l(z,e(z)+x)}var J=_s(),oe=t(J),fe=s(t(oe),2),re=t(fe);re.__click=()=>Ua(e(f),"indoor_climbs");var H=s(re,2);H.__click=X;var le=t(H);{var we=n=>{var o=ns();za(),i(n,o)},ye=n=>{var o=qa("‚òÅÔ∏è Fetch Data");i(n,o)};p(le,n=>{e(F)?n(we):n(ye,!1)})}a(H),a(fe),a(oe);var ae=s(oe,2);{var N=n=>{var o=os(),T=t(o,!0);a(o),_(()=>d(T,e(D))),ta(3,o,()=>ua),i(n,o)};p(ae,n=>{e(D)&&n(N)})}var g=s(ae,2);yt(g,{onFilterParamsChange:ue});var m=s(g,2),E=t(m),R=t(E);Xa(R),a(E),za(2),a(m);var B=s(m,2),Z=t(B);qe(Z,17,()=>e(f).slice(0,e(z)),n=>n.id,(n,o)=>{rs(n,{get session(){return e(o)},onDelete:U})});var K=s(Z,2);{var h=n=>{var o=cs(),T=s(t(o),2);{var W=Y=>{var j=ds();i(Y,j)};p(T,Y=>{e(r).length>0&&Y(W)})}a(o),i(n,o)};p(K,n=>{e(f).length===0&&n(h)})}var G=s(K,2);{var b=n=>{var o=ps(),T=t(o);T.__click=ee;var W=t(T);a(T),a(o),_(()=>d(W,`Load More (${e(f).length-e(z)} remaining)`)),i(n,o)};p(G,n=>{e(z)<e(f).length&&n(b)})}a(B),a(J),_(()=>H.disabled=e(F)),i(Te,J),_a()}da(["click"]);var fs=v('<span class="chevron svelte-1frtlim">‚ñ≤</span>'),gs=v('<span class="chevron svelte-1frtlim">‚ñº</span>'),ms=v('<div class="input-with-action svelte-1frtlim"><input type="text" id="area-filter-text" placeholder="Type area name..." class="flat-left svelte-1frtlim"/> <button class="action-btn flat-right svelte-1frtlim" title="Back to list">‚úï</button></div>'),hs=v("<option> </option>"),bs=v('<select id="area-filter" class="svelte-1frtlim"><option>All Areas</option><!><option>Other (Manual Entry)</option></select>'),ys=v('<div class="input-with-action svelte-1frtlim"><input type="text" id="crag-filter-text" placeholder="Type crag name..." class="flat-left svelte-1frtlim"/> <button class="action-btn flat-right svelte-1frtlim" title="Back to list">‚úï</button></div>'),xs=v("<option> </option>"),ws=v('<select id="crag-filter" class="svelte-1frtlim"><option>All Crags</option><!><option>Other (Manual Entry)</option></select>'),Ss=v('<input type="text" id="crag-filter-text" class="svelte-1frtlim"/>'),ks=v("<option> </option>"),Ds=v("<option> </option>"),Ts=v('<div class="filter-body svelte-1frtlim"><div class="filter-grid svelte-1frtlim"><div class="filter-item svelte-1frtlim"><label for="start-date" class="svelte-1frtlim">Start Date</label> <input type="date" id="start-date" class="svelte-1frtlim"/></div> <div class="filter-item svelte-1frtlim"><label for="end-date" class="svelte-1frtlim">End Date</label> <input type="date" id="end-date" class="svelte-1frtlim"/></div> <div class="filter-item svelte-1frtlim"><label for="area-filter" class="svelte-1frtlim">Area</label> <!></div> <div class="filter-item svelte-1frtlim"><label for="crag-filter" class="svelte-1frtlim">Crag</label> <!></div> <div class="filter-item svelte-1frtlim"><label for="climbing-type-filter" class="svelte-1frtlim">Climb Type</label> <select id="climbing-type-filter" class="svelte-1frtlim"><option>Any Type</option><!></select></div> <div class="filter-item svelte-1frtlim"><label for="session-type-filter" class="svelte-1frtlim">Session Type</label> <select id="session-type-filter" class="svelte-1frtlim"><option>Any Type</option><!></select></div> <div class="filter-item svelte-1frtlim"><label for="grade-filter" class="svelte-1frtlim">Grade (Exact)</label> <input type="text" id="grade-filter" placeholder="e.g. 7a" class="svelte-1frtlim"/></div></div> <div class="filter-actions svelte-1frtlim"><button class="reset-btn svelte-1frtlim">Reset Filters</button></div></div>'),qs=v('<div class="filter-container svelte-1frtlim"><button class="filter-header svelte-1frtlim"><div class="header-content svelte-1frtlim"><span class="icon svelte-1frtlim">üîç</span> <span class="title svelte-1frtlim">Filters</span> <!></div></button> <!></div>');function zs(Te,c){pa(c,!0);const r=et(),f=["Bouldering","Sport","Mixed","Trad"],F=["Projecting","Onsighting","Campusing","Repeaters","Fun","Volume"];let D=k(!1),u=k(""),z=k(""),x=k(""),U=k(""),X=k(""),ne=k(""),ue=k(""),te=k(!1),ee=k(!1),J=oa(()=>e(x)&&e(x)!=="Other"?at(e(x)):[]);function oe(){e(x)==="Other"?(l(te,!0),l(x,"")):l(te,!1),l(U,""),l(ee,!1),le()}function fe(){e(U)==="Other"?(l(ee,!0),l(U,"")):l(ee,!1),le()}function re(){l(D,!e(D))}function H(){l(u,""),l(z,""),l(x,""),l(U,""),l(X,""),l(ne,""),l(ue,""),l(te,!1),l(ee,!1),le()}function le(){c.onFilterParamsChange({startDate:e(u),endDate:e(z),area:e(x),crag:e(U),climbingType:e(X),sessionType:e(ne),grade:e(ue)})}var we=qs(),ye=t(we);ye.__click=re;var ae=t(ye),N=s(t(ae),4);{var g=B=>{var Z=fs();i(B,Z)},m=B=>{var Z=gs();i(B,Z)};p(N,B=>{e(D)?B(g):B(m,!1)})}a(ae),a(ye);var E=s(ye,2);{var R=B=>{var Z=Ts(),K=t(Z),h=t(K),G=s(t(h),2);Ne(G),G.__change=le,a(h);var b=s(h,2),n=s(t(b),2);Ne(n),n.__change=le,a(b);var o=s(b,2),T=s(t(o),2);{var W=V=>{var se=ms(),ce=t(se);Ne(ce),ce.__input=le;var Ee=s(ce,2);Ee.__click=()=>{l(te,!1),l(x,""),le()},a(se),Ie(ce,()=>e(x),he=>l(x,he)),i(V,se)},Y=V=>{var se=bs();se.__change=oe;var ce=t(se);ce.value=ce.__value="";var Ee=s(ce);qe(Ee,17,()=>r,Fe,(Ce,De)=>{var Le=hs(),$=t(Le,!0);a(Le);var pe={};_(()=>{d($,e(De)),pe!==(pe=e(De))&&(Le.value=(Le.__value=e(De))??"")}),i(Ce,Le)});var he=s(Ee);he.value=he.__value="Other",a(se),ya(se,()=>e(x),Ce=>l(x,Ce)),i(V,se)};p(T,V=>{e(te)?V(W):V(Y,!1)})}a(o);var j=s(o,2),de=s(t(j),2);{var ve=V=>{var se=ys(),ce=t(se);Ne(ce),ce.__input=le;var Ee=s(ce,2);Ee.__click=()=>{l(ee,!1),l(U,""),le()},a(se),Ie(ce,()=>e(U),he=>l(U,he)),i(V,se)},xe=V=>{var se=Qe(),ce=Me(se);{var Ee=Ce=>{var De=ws();De.__change=fe;var Le=t(De);Le.value=Le.__value="";var $=s(Le);qe($,17,()=>e(J),Fe,(Ge,Oe)=>{var je=xs(),Ze=t(je,!0);a(je);var Pe={};_(()=>{d(Ze,e(Oe)),Pe!==(Pe=e(Oe))&&(je.value=(je.__value=e(Oe))??"")}),i(Ge,je)});var pe=s($);pe.value=pe.__value="Other",a(De),ya(De,()=>e(U),Ge=>l(U,Ge)),i(Ce,De)},he=Ce=>{var De=Ss();Ne(De),De.__input=le,_(()=>{Ye(De,"placeholder",e(x)?"Filter crag...":"Select area first"),De.disabled=!e(te)&&!e(x)}),Ie(De,()=>e(U),Le=>l(U,Le)),i(Ce,De)};p(ce,Ce=>{!e(te)&&e(x)&&e(J).length>0?Ce(Ee):Ce(he,!1)},!0)}i(V,se)};p(de,V=>{e(ee)?V(ve):V(xe,!1)})}a(j);var L=s(j,2),I=s(t(L),2);I.__change=le;var me=t(I);me.value=me.__value="";var Se=s(me);qe(Se,17,()=>f,Fe,(V,se)=>{var ce=ks(),Ee=t(ce,!0);a(ce);var he={};_(()=>{d(Ee,e(se)),he!==(he=e(se))&&(ce.value=(ce.__value=e(se))??"")}),i(V,ce)}),a(I),a(L);var ke=s(L,2),q=s(t(ke),2);q.__change=le;var y=t(q);y.value=y.__value="";var O=s(y);qe(O,17,()=>F,Fe,(V,se)=>{var ce=Ds(),Ee=t(ce,!0);a(ce);var he={};_(()=>{d(Ee,e(se)),he!==(he=e(se))&&(ce.value=(ce.__value=e(se))??"")}),i(V,ce)}),a(q),a(ke);var be=s(ke,2),C=s(t(be),2);Ne(C),C.__input=le,a(be),a(K);var S=s(K,2),M=t(S);M.__click=H,a(S),a(Z),Ie(G,()=>e(u),V=>l(u,V)),Ie(n,()=>e(z),V=>l(z,V)),ya(I,()=>e(X),V=>l(X,V)),ya(q,()=>e(ne),V=>l(ne,V)),Ie(C,()=>e(ue),V=>l(ue,V)),ta(3,Z,()=>ua,()=>({duration:200})),i(B,Z)};p(E,B=>{e(D)&&B(R)})}a(we),_(()=>Ye(ye,"aria-expanded",e(D))),i(Te,we),_a()}da(["click","change","input"]);var Cs=v('<label class="type-toggle svelte-1k6anfh"><input type="checkbox"/> <span>Sport?</span></label>'),Ls=v("<option> </option>"),Fs=v('<div class="edit-form svelte-1k6anfh"><div class="edit-row main svelte-1k6anfh"><input type="text" class="edit-input grade svelte-1k6anfh" placeholder="Grade"/> <input type="text" class="edit-input name svelte-1k6anfh" placeholder="Route Name"/> <!></div> <div class="edit-row meta svelte-1k6anfh"><select class="edit-select svelte-1k6anfh"></select> <div class="attempts-input-wrapper svelte-1k6anfh"><span>#</span> <input type="number" min="1" class="edit-input num svelte-1k6anfh"/></div></div> <div class="edit-row notes svelte-1k6anfh"><textarea class="edit-input notes-area svelte-1k6anfh" placeholder="Notes..."></textarea></div> <div class="edit-actions svelte-1k6anfh"><button class="action-btn cancel svelte-1k6anfh">Cancel</button> <button class="action-btn save svelte-1k6anfh">Save</button></div></div>'),Es=v('<span class="climb-type-tag svelte-1k6anfh"> </span>'),Gs=v('<span class="notes-preview svelte-1k6anfh"> </span>'),Os=v('<span class="attempts-count svelte-1k6anfh"> </span>'),As=v('<div class="detail-row svelte-1k6anfh"><span class="label svelte-1k6anfh">Notes:</span> <p class="notes svelte-1k6anfh"> </p></div>'),js=v('<p class="empty-notes svelte-1k6anfh">No notes for this climb.</p>'),Ns=v('<span class="tag wall-tag svelte-1k6anfh"> </span>'),Is=v('<span class="tag technique-tag svelte-1k6anfh"> </span>'),Ms=v('<div class="climb-details svelte-1k6anfh"><!> <div class="tags svelte-1k6anfh"><span class="tag type svelte-1k6anfh"> </span> <!> <!> <span class="tag attempt-text svelte-1k6anfh"> </span></div></div>'),Ps=v('<div class="climb-header svelte-1k6anfh" role="button" tabindex="0"><div class="climb-main-info svelte-1k6anfh"><span> </span> <span class="climb-name svelte-1k6anfh"> </span> <!> <!></div> <div class="climb-meta svelte-1k6anfh"><span><span class="icon svelte-1k6anfh"> </span> <!></span> <button class="icon-btn edit-btn svelte-1k6anfh" aria-label="Edit climb" title="Edit climb">‚úé</button> <button class="icon-btn delete-btn svelte-1k6anfh" aria-label="Delete climb" title="Delete climb">üóëÔ∏è</button> <span class="chevron svelte-1k6anfh"> </span></div></div> <!>',1),Rs=v("<div><!></div>");function Bs(Te,c){pa(c,!0);let r=Ia(c,"showClimbType",3,!1),f=k(!1),F=k(!1),D=k(""),u=k(""),z=k(""),x=k(1),U=k(""),X=k(!1);function ne(){e(F)||l(f,!e(f))}function ue(N){N.stopPropagation(),c.onDelete()}function te(N){N.stopPropagation(),l(D,c.climb.name,!0),l(u,c.climb.grade,!0),l(z,c.climb.attemptType,!0),l(x,c.climb.attemptsNum,!0),l(U,c.climb.notes,!0),l(X,c.climb.isSport,!0),l(F,!0),l(f,!0)}function ee(N){N.stopPropagation(),l(F,!1)}function J(N){N.stopPropagation();const g={...c.climb,name:e(D),grade:e(u),attemptType:e(z),attemptsNum:e(x),notes:e(U),isSport:e(X)};c.onUpdate(g),l(F,!1)}function oe(){(e(z)==="Flash"||e(z)==="Onsight")&&l(x,1)}const fe={Flash:"‚ö°",Onsight:"üëÅÔ∏è",Redpoint:"üî¥",Dogged:"üõ†Ô∏è",DNF:"‚ùå"},re=["Flash","Onsight","Redpoint","Dogged","DNF"];var H=Rs();let le;var we=t(H);{var ye=N=>{var g=Fs(),m=t(g),E=t(m);Ne(E);var R=s(E,2);Ne(R);var B=s(R,2);{var Z=j=>{var de=Cs(),ve=t(de);Ne(ve),za(2),a(de),Ja(ve,()=>e(X),xe=>l(X,xe)),i(j,de)};p(B,j=>{r()&&j(Z)})}a(m);var K=s(m,2),h=t(K);h.__change=oe,qe(h,21,()=>re,Fe,(j,de)=>{var ve=Ls(),xe=t(ve,!0);a(ve);var L={};_(()=>{d(xe,e(de)),L!==(L=e(de))&&(ve.value=(ve.__value=e(de))??"")}),i(j,ve)}),a(h);var G=s(h,2),b=s(t(G),2);Ne(b),a(G),a(K);var n=s(K,2),o=t(n);Ha(o),a(n);var T=s(n,2),W=t(T);W.__click=ee;var Y=s(W,2);Y.__click=J,a(T),a(g),_(()=>b.disabled=e(z)==="Flash"||e(z)==="Onsight"),Ie(E,()=>e(u),j=>l(u,j)),Ie(R,()=>e(D),j=>l(D,j)),ya(h,()=>e(z),j=>l(z,j)),Ie(b,()=>e(x),j=>l(x,j)),Ie(o,()=>e(U),j=>l(U,j)),i(N,g)},ae=N=>{var g=Ps(),m=Me(g);m.__click=ne,m.__keydown=y=>(y.key==="Enter"||y.key===" ")&&ne();var E=t(m),R=t(E);let B;var Z=t(R,!0);a(R);var K=s(R,2),h=t(K,!0);a(K);var G=s(K,2);{var b=y=>{var O=Es(),be=t(O,!0);a(O),_(()=>d(be,c.climb.isSport?"Sport":"Boulder")),i(y,O)};p(G,y=>{r()&&y(b)})}var n=s(G,2);{var o=y=>{var O=Gs(),be=t(O);a(O),_(()=>d(be,`- ${c.climb.notes??""}`)),i(y,O)};p(n,y=>{!e(f)&&c.climb.notes&&y(o)})}a(E);var T=s(E,2),W=t(T);let Y;var j=t(W),de=t(j,!0);a(j);var ve=s(j,2);{var xe=y=>{var O=Os(),be=t(O,!0);a(O),_(()=>d(be,c.climb.attemptsNum)),i(y,O)};p(ve,y=>{c.climb.attemptType!=="Flash"&&c.climb.attemptType!=="Onsight"&&y(xe)})}a(W);var L=s(W,2);L.__click=te;var I=s(L,2);I.__click=ue;var me=s(I,2),Se=t(me,!0);a(me),a(T),a(m);var ke=s(m,2);{var q=y=>{var O=Ms(),be=t(O);{var C=$=>{var pe=As(),Ge=s(t(pe),2),Oe=t(Ge,!0);a(Ge),a(pe),_(()=>d(Oe,c.climb.notes)),i($,pe)},S=$=>{var pe=js();i($,pe)};p(be,$=>{c.climb.notes?$(C):$(S,!1)})}var M=s(be,2),V=t(M),se=t(V,!0);a(V);var ce=s(V,2);{var Ee=$=>{var pe=Ns(),Ge=t(pe,!0);a(pe),_(()=>d(Ge,c.climb.wall)),i($,pe)};p(ce,$=>{c.climb.wall&&$(Ee)})}var he=s(ce,2);{var Ce=$=>{var pe=Is(),Ge=t(pe,!0);a(pe),_(()=>d(Ge,c.climb.techniqueFocus)),i($,pe)};p(he,$=>{c.climb.techniqueFocus&&$(Ce)})}var De=s(he,2),Le=t(De,!0);a(De),a(M),a(O),_(()=>{d(se,c.climb.isSport?"Sport":"Boulder"),d(Le,c.climb.attemptType)}),ta(3,O,()=>ua,()=>({duration:150})),i(y,O)};p(ke,y=>{e(f)&&y(q)})}_(()=>{Ye(m,"aria-expanded",e(f)),B=aa(R,1,"grade-badge svelte-1k6anfh",null,B,{sport:c.climb.isSport}),d(Z,c.climb.grade),d(h,c.climb.name||"Unnamed Route"),Y=aa(W,1,"attempt-type svelte-1k6anfh",null,Y,{flash:c.climb.attemptType==="Flash"}),d(de,fe[c.climb.attemptType]||c.climb.attemptType),d(Se,e(f)?"‚ñ≤":"‚ñº")}),i(N,g)};p(we,N=>{e(F)?N(ye):N(ae,!1)})}a(H),_(()=>le=aa(H,1,"climb-entry svelte-1k6anfh",null,le,{expanded:e(f),editing:e(F)})),i(Te,H),_a()}da(["change","click","keydown"]);var Vs=v('<div class="sector-meta"> </div>'),Us=v('<span class="stat svelte-d5hg2r"> </span>'),Ws=v('<span class="status-icon pending svelte-d5hg2r" title="Waiting to sync">üîÑ</span>'),Hs=v('<span class="status-icon error svelte-d5hg2r" title="Sync error">‚ö†Ô∏è</span>'),Js=v('<span class="chip svelte-d5hg2r"> </span>'),Zs=v('<span class="text-none svelte-d5hg2r">None</span>'),Ks=v('<div class="detail-item svelte-d5hg2r"><span class="label svelte-d5hg2r">Difficulty</span> <span class="value svelte-d5hg2r"> </span></div>'),Xs=v('<span class="chip svelte-d5hg2r"> </span>'),Ys=v('<span class="text-none svelte-d5hg2r">None</span>'),Qs=v('<div class="detail-item svelte-d5hg2r"><span class="label svelte-d5hg2r">Category</span> <div class="value-chips svelte-d5hg2r"><!></div></div>'),$s=v('<span class="chip svelte-d5hg2r"> </span>'),er=v('<span class="text-none svelte-d5hg2r">None</span>'),ar=v('<div class="detail-item svelte-d5hg2r"><span class="label svelte-d5hg2r">Energy System</span> <div class="value-chips svelte-d5hg2r"><!></div></div>'),tr=v('<div class="metric svelte-d5hg2r"><span class="label svelte-d5hg2r">Open Grip</span> <div class="bar-container svelte-d5hg2r"><div class="bar-fill svelte-d5hg2r"></div></div> <span class="score svelte-d5hg2r"> </span></div>'),sr=v('<div class="metric svelte-d5hg2r"><span class="label svelte-d5hg2r">Crimp Grip</span> <div class="bar-container svelte-d5hg2r"><div class="bar-fill svelte-d5hg2r"></div></div> <span class="score svelte-d5hg2r"> </span></div>'),rr=v('<div class="metric svelte-d5hg2r"><span class="label svelte-d5hg2r">Pinch Grip</span> <div class="bar-container svelte-d5hg2r"><div class="bar-fill svelte-d5hg2r"></div></div> <span class="score svelte-d5hg2r"> </span></div>'),ir=v('<div class="metric svelte-d5hg2r"><span class="label svelte-d5hg2r">Sloper Grip</span> <div class="bar-container svelte-d5hg2r"><div class="bar-fill svelte-d5hg2r"></div></div> <span class="score svelte-d5hg2r"> </span></div>'),lr=v('<div class="metric svelte-d5hg2r"><span class="label svelte-d5hg2r">Jug Grip</span> <div class="bar-container svelte-d5hg2r"><div class="bar-fill svelte-d5hg2r"></div></div> <span class="score svelte-d5hg2r"> </span></div>'),vr=v('<p class="no-climbs svelte-d5hg2r">No climbs logged for this session.</p>'),nr=v('<div class="card-body svelte-d5hg2r"><div class="details-grid svelte-d5hg2r"><div class="detail-item svelte-d5hg2r"><span class="label svelte-d5hg2r">Training Type</span> <div class="value-chips svelte-d5hg2r"><!></div></div> <!> <!> <!></div> <div class="metrics-container svelte-d5hg2r"><div class="metric svelte-d5hg2r"><span class="label svelte-d5hg2r">Finger Load</span> <div class="bar-container svelte-d5hg2r"><div class="bar-fill svelte-d5hg2r"></div></div> <span class="score svelte-d5hg2r"> </span></div> <div class="metric svelte-d5hg2r"><span class="label svelte-d5hg2r">Shoulder Load</span> <div class="bar-container svelte-d5hg2r"><div class="bar-fill svelte-d5hg2r"></div></div> <span class="score svelte-d5hg2r"> </span></div> <div class="metric svelte-d5hg2r"><span class="label svelte-d5hg2r">Forearm Load</span> <div class="bar-container svelte-d5hg2r"><div class="bar-fill svelte-d5hg2r"></div></div> <span class="score svelte-d5hg2r"> </span></div> <!> <!> <!> <!> <!></div> <div class="climbs-list svelte-d5hg2r"><h4 class="svelte-d5hg2r">Climbs</h4> <div class="climbs-container svelte-d5hg2r"><!> <!></div></div></div>'),or=v('<div><div class="card-header svelte-d5hg2r" role="button" tabindex="0"><div class="header-main svelte-d5hg2r"><div class="date-badge svelte-d5hg2r"><span class="day svelte-d5hg2r"> </span> <span class="month svelte-d5hg2r"> </span></div> <div class="session-info svelte-d5hg2r"><div class="session-text svelte-d5hg2r"><h3 class="location svelte-d5hg2r"> <!></h3> <!> <div class="session-meta svelte-d5hg2r"><span class="type-tag svelte-d5hg2r"> </span> <span class="stat svelte-d5hg2r"> </span> <!></div></div> <div class="load-summary svelte-d5hg2r"><div class="load-badge finger svelte-d5hg2r"> </div> <div class="load-badge shoulder svelte-d5hg2r"> </div> <div class="load-badge forearm svelte-d5hg2r"> </div></div></div></div> <div class="header-actions"><div class="header-status svelte-d5hg2r"><!></div> <button class="btn-icon delete-session" title="Delete Session">üóëÔ∏è</button> <span class="chevron svelte-d5hg2r"> </span></div></div> <!></div>');function dr(Te,c){pa(c,!0);let r=Ia(c,"session",7),f=k(!1),F=k(!1);function D(){l(f,!e(f))}function u(){l(F,!0)}function z(C){const S=[...r().climbs];S.splice(C,1),Aa(r().id,{climbs:S}),c.onDelete()}function x(C,S){const M=[...r().climbs];M[C]=S,U(M)}async function U(C){if(Aa(r().id,{climbs:C}),r().climbs=C,Za()){const S={date:r().date,area:r().area,crag:r().crag,sector:r().sector,climbingType:r().climbingType,trainingTypes:r().trainingTypes||[],difficulty:r().difficulty,categories:r().categories||[],energySystems:r().energySystems||[],fingerLoad:r().fingerLoad,shoulderLoad:r().shoulderLoad,forearmLoad:r().forearmLoad,climbs:C};try{const M=await tt(r().id,S);M.ok?(Ka(r().id),r().syncStatus="synced"):(console.error("Failed to sync update:",M.error),ja(r().id),r().syncStatus="error")}catch(M){console.error("Exception syncing update:",M),ja(r().id),r().syncStatus="error"}}}let X=oa(()=>r().climbs?.length??0),ne=oa(()=>(r().climbs||[]).reduce((C,S)=>{const M=parseInt(S.grade.replace(/\D/g,""))||0,V=parseInt(C.replace(/\D/g,""))||0;return M>V?S.grade:C},"V0/4a"));var ue=or();let te;var ee=t(ue);ee.__click=D,ee.__keydown=C=>C.key==="Enter"&&D();var J=t(ee),oe=t(J),fe=t(oe),re=t(fe,!0);a(fe);var H=s(fe,2),le=t(H,!0);a(H),a(oe);var we=s(oe,2),ye=t(we),ae=t(ye),N=t(ae),g=s(N);{var m=C=>{var S=qa();_(()=>d(S,`- ${r().crag??""}`)),i(C,S)};p(g,C=>{r().crag&&C(m)})}a(ae);var E=s(ae,2);{var R=C=>{var S=Vs(),M=t(S);a(S),_(()=>d(M,`üìç ${r().sector??""}`)),i(C,S)};p(E,C=>{r().sector&&C(R)})}var B=s(E,2),Z=t(B),K=t(Z,!0);a(Z);var h=s(Z,2),G=t(h);a(h);var b=s(h,2);{var n=C=>{var S=Us(),M=t(S);a(S),_(()=>d(M,`Max: ${e(ne)??""}`)),i(C,S)};p(b,C=>{e(X)>0&&C(n)})}a(B),a(ye);var o=s(ye,2),T=t(o),W=t(T,!0);a(T);var Y=s(T,2),j=t(Y,!0);a(Y);var de=s(Y,2),ve=t(de,!0);a(de),a(o),a(we),a(J);var xe=s(J,2),L=t(xe),I=t(L);{var me=C=>{var S=Ws();i(C,S)},Se=C=>{var S=Qe(),M=Me(S);{var V=se=>{var ce=Hs();i(se,ce)};p(M,se=>{r().syncStatus==="error"&&se(V)},!0)}i(C,S)};p(I,C=>{r().syncStatus==="pending"?C(me):C(Se,!1)})}a(L);var ke=s(L,2);ke.__click=C=>{C.stopPropagation(),u()};var q=s(ke,2),y=t(q,!0);a(q),a(xe),a(ee);var O=s(ee,2);{var be=C=>{var S=nr(),M=t(S),V=t(M),se=s(t(V),2),ce=t(se);{var Ee=w=>{var A=Qe(),P=Me(A);qe(P,17,()=>r().trainingTypes,Fe,(ge,_e)=>{var ze=Js(),We=t(ze,!0);a(ze),_(()=>d(We,e(_e))),i(ge,ze)}),i(w,A)},he=w=>{var A=Zs();i(w,A)};p(ce,w=>{r().trainingTypes&&r().trainingTypes.length>0&&!r().trainingTypes.includes("None")?w(Ee):w(he,!1)})}a(se),a(V);var Ce=s(V,2);{var De=w=>{var A=Ks(),P=s(t(A),2),ge=t(P,!0);a(P),a(A),_(()=>d(ge,r().difficulty)),i(w,A)};p(Ce,w=>{r().difficulty&&w(De)})}var Le=s(Ce,2);{var $=w=>{var A=Qs(),P=s(t(A),2),ge=t(P);{var _e=We=>{var va=Qe(),Da=Me(va);qe(Da,17,()=>r().categories,Fe,(na,Ta)=>{var Fa=Xs(),Ma=t(Fa,!0);a(Fa),_(()=>d(Ma,e(Ta))),i(na,Fa)}),i(We,va)},ze=We=>{var va=Ys();i(We,va)};p(ge,We=>{r().categories.length>0&&!r().categories.includes("None")?We(_e):We(ze,!1)})}a(P),a(A),i(w,A)};p(Le,w=>{r().categories?.length&&w($)})}var pe=s(Le,2);{var Ge=w=>{var A=ar(),P=s(t(A),2),ge=t(P);{var _e=We=>{var va=Qe(),Da=Me(va);qe(Da,17,()=>r().energySystems,Fe,(na,Ta)=>{var Fa=$s(),Ma=t(Fa,!0);a(Fa),_(()=>d(Ma,e(Ta))),i(na,Fa)}),i(We,va)},ze=We=>{var va=er();i(We,va)};p(ge,We=>{r().energySystems.length>0&&!r().energySystems.includes("None")?We(_e):We(ze,!1)})}a(P),a(A),i(w,A)};p(pe,w=>{r().energySystems?.length&&w(Ge)})}a(M);var Oe=s(M,2),je=t(Oe),Ze=s(t(je),2),Pe=t(Ze);a(Ze);var Re=s(Ze,2),$e=t(Re);a(Re),a(je);var Ke=s(je,2),ca=s(t(Ke),2),fa=t(ca);a(ca);var sa=s(ca,2),ra=t(sa);a(sa),a(Ke);var Ae=s(Ke,2),Ue=s(t(Ae),2),Xe=t(Ue);a(Ue);var ia=s(Ue,2),Be=t(ia);a(ia),a(Ae);var Ve=s(Ae,2);{var la=w=>{var A=tr(),P=s(t(A),2),ge=t(P);a(P);var _e=s(P,2),ze=t(_e);a(_e),a(A),_(()=>{ea(ge,`width: ${r().openGrip/5*100}%`),d(ze,`${r().openGrip??""}/5`)}),i(w,A)};p(Ve,w=>{r().openGrip&&w(la)})}var He=s(Ve,2);{var Ca=w=>{var A=sr(),P=s(t(A),2),ge=t(P);a(P);var _e=s(P,2),ze=t(_e);a(_e),a(A),_(()=>{ea(ge,`width: ${r().crimpGrip/5*100}%`),d(ze,`${r().crimpGrip??""}/5`)}),i(w,A)};p(He,w=>{r().crimpGrip&&w(Ca)})}var ha=s(He,2);{var wa=w=>{var A=rr(),P=s(t(A),2),ge=t(P);a(P);var _e=s(P,2),ze=t(_e);a(_e),a(A),_(()=>{ea(ge,`width: ${r().pinchGrip/5*100}%`),d(ze,`${r().pinchGrip??""}/5`)}),i(w,A)};p(ha,w=>{r().pinchGrip&&w(wa)})}var ba=s(ha,2);{var Sa=w=>{var A=ir(),P=s(t(A),2),ge=t(P);a(P);var _e=s(P,2),ze=t(_e);a(_e),a(A),_(()=>{ea(ge,`width: ${r().sloperGrip/5*100}%`),d(ze,`${r().sloperGrip??""}/5`)}),i(w,A)};p(ba,w=>{r().sloperGrip&&w(Sa)})}var La=s(ba,2);{var ka=w=>{var A=lr(),P=s(t(A),2),ge=t(P);a(P);var _e=s(P,2),ze=t(_e);a(_e),a(A),_(()=>{ea(ge,`width: ${r().jugGrip/5*100}%`),d(ze,`${r().jugGrip??""}/5`)}),i(w,A)};p(La,w=>{r().jugGrip&&w(ka)})}a(Oe);var xa=s(Oe,2),Je=s(t(xa),2),ga=t(Je);qe(ga,17,()=>r().climbs||[],Fe,(w,A,P)=>{{let ge=oa(()=>r().climbingType==="Mixed");Bs(w,{get climb(){return e(A)},onDelete:()=>z(P),onUpdate:_e=>x(P,_e),get showClimbType(){return e(ge)}})}});var Q=s(ga,2);{var ie=w=>{var A=vr();i(w,A)};p(Q,w=>{(r().climbs||[]).length===0&&w(ie)})}a(Je),a(xa),a(S),_(()=>{ea(Pe,`width: ${r().fingerLoad/5*100}%`),d($e,`${r().fingerLoad??""}/5`),ea(fa,`width: ${r().shoulderLoad/5*100}%`),d(ra,`${r().shoulderLoad??""}/5`),ea(Xe,`width: ${r().forearmLoad/5*100}%`),d(Be,`${r().forearmLoad??""}/5`)}),ta(3,S,()=>ua,()=>({duration:150})),i(C,S)};p(O,C=>{e(f)&&C(be)})}a(ue),_((C,S)=>{te=aa(ue,1,"session-card svelte-d5hg2r",null,te,{expanded:e(f)}),Ye(ee,"aria-expanded",e(f)),d(re,C),d(le,S),d(N,`${r().area??""} `),d(K,r().climbingType),d(G,`${e(X)??""} climbs`),Ye(T,"title",`Finger Load: ${r().fingerLoad??""}`),d(W,r().fingerLoad),Ye(Y,"title",`Shoulder Load: ${r().shoulderLoad??""}`),d(j,r().shoulderLoad),Ye(de,"title",`Forearm Load: ${r().forearmLoad??""}`),d(ve,r().forearmLoad),d(y,e(f)?"‚ñ≤":"‚ñº")},[()=>new Date(r().date).getDate(),()=>new Date(r().date).toLocaleDateString(void 0,{month:"short"})]),i(Te,ue),_a()}da(["click","keydown"]);var cr=v('<span class="spinner svelte-1s7jdlh"></span> Fetching...',1),pr=v('<div class="error-banner svelte-1s7jdlh"> </div>'),_r=v('<small class="svelte-1s7jdlh">Try adjusting your filters.</small>'),ur=v('<div class="empty-state svelte-1s7jdlh"><p class="svelte-1s7jdlh">No outdoor climbing sessions found.</p> <!></div>'),fr=v('<div class="load-more-container svelte-1s7jdlh"><button class="load-more-btn svelte-1s7jdlh"> </button></div>'),gr=v('<div class="view-container svelte-1s7jdlh"><div class="view-header svelte-1s7jdlh"><h2 class="view-title svelte-1s7jdlh">‚õ∞Ô∏è Outdoor Climbing History</h2> <div class="header-actions svelte-1s7jdlh"><button class="action-btn secondary svelte-1s7jdlh" title="Export filtered data to CSV">üì• Export</button> <button class="action-btn svelte-1s7jdlh" title="Fetch data from cloud"><!></button></div></div> <!> <!> <div class="info-bar svelte-1s7jdlh"><div class="legend-wrapper svelte-1s7jdlh"><!></div> <div class="load-key svelte-1s7jdlh"><span class="key-label svelte-1s7jdlh">Load:</span> <div class="key-item svelte-1s7jdlh"><span class="dot finger svelte-1s7jdlh"></span> Finger</div> <div class="key-item svelte-1s7jdlh"><span class="dot shoulder svelte-1s7jdlh"></span> Shoulder</div> <div class="key-item svelte-1s7jdlh"><span class="dot forearm svelte-1s7jdlh"></span> Forearm</div></div></div> <div class="sessions-list"><!> <!> <!></div></div>');function mr(Te,c){pa(c,!0);let r=k(ma([])),f=k(ma([])),F=k(!1),D=k(""),u=k(ma({startDate:"",endDate:"",area:"",crag:"",climbingType:"",sessionType:"",grade:""})),z=k(20);const x=20;Ba(()=>{U()});function U(){const n=Ea("outdoor_climb");l(r,n.sort((o,T)=>new Date(T.date).getTime()-new Date(o.date).getTime()),!0),te()}async function X(){l(F,!0),l(D,"");try{await Ga();const n=await st();n.ok&&n.data?ne(n.data):l(D,n.error||"Failed to fetch data",!0)}catch(n){l(D,n instanceof Error?n.message:"Unknown error",!0)}finally{l(F,!1)}}function ne(n){const o=n.map(W=>({...W,activityType:"outdoor_climb",createdAt:new Date().toISOString(),updatedAt:new Date().toISOString(),syncStatus:"synced",syncedAt:new Date().toISOString(),openGrip:0,crimpGrip:0,pinchGrip:0,sloperGrip:0,jugGrip:0}));Oa(o);const T=Ea("outdoor_climb");l(r,T.sort((W,Y)=>new Date(Y.date).getTime()-new Date(W.date).getTime()),!0),te()}function ue(n){l(u,n,!0),te()}function te(){l(z,x),l(f,e(r).filter(n=>{if(e(u).startDate&&n.date<e(u).startDate||e(u).endDate&&n.date>e(u).endDate||e(u).area&&!n.area.toLowerCase().includes(e(u).area.toLowerCase())||e(u).crag&&!n.crag.toLowerCase().includes(e(u).crag.toLowerCase()))return!1;if(e(u).climbingType&&(n.climbingType==="Leading"?"Sport":n.climbingType)!==e(u).climbingType)if(n.climbingType==="Mixed")if(e(u).climbingType==="Bouldering"){if(!n.climbs.some(T=>!T.isSport))return!1}else if(e(u).climbingType==="Sport"||e(u).climbingType==="Trad"){if(!n.climbs.some(T=>T.isSport))return!1}else return!1;else return!1;if(e(u).sessionType&&!n.trainingTypes?.includes(e(u).sessionType))return!1;if(e(u).grade){const o=e(u).grade.trim().toLowerCase();if(!n.climbs.some(W=>W.grade.trim().toLowerCase()===o))return!1}return!0}),!0)}function ee(){l(z,e(z)+x)}var J=gr(),oe=t(J),fe=s(t(oe),2),re=t(fe);re.__click=()=>Ua(e(f),"outdoor_climbs");var H=s(re,2);H.__click=X;var le=t(H);{var we=n=>{var o=cr();za(),i(n,o)},ye=n=>{var o=qa("‚òÅÔ∏è Fetch Data");i(n,o)};p(le,n=>{e(F)?n(we):n(ye,!1)})}a(H),a(fe),a(oe);var ae=s(oe,2);{var N=n=>{var o=pr(),T=t(o,!0);a(o),_(()=>d(T,e(D))),ta(3,o,()=>ua),i(n,o)};p(ae,n=>{e(D)&&n(N)})}var g=s(ae,2);zs(g,{onFilterParamsChange:ue});var m=s(g,2),E=t(m),R=t(E);Xa(R),a(E),za(2),a(m);var B=s(m,2),Z=t(B);qe(Z,17,()=>e(f).slice(0,e(z)),n=>n.id,(n,o)=>{dr(n,{get session(){return e(o)},onDelete:U})});var K=s(Z,2);{var h=n=>{var o=ur(),T=s(t(o),2);{var W=Y=>{var j=_r();i(Y,j)};p(T,Y=>{e(r).length>0&&Y(W)})}a(o),i(n,o)};p(K,n=>{e(f).length===0&&n(h)})}var G=s(K,2);{var b=n=>{var o=fr(),T=t(o);T.__click=ee;var W=t(T);a(T),a(o),_(()=>d(W,`Load More (${e(f).length-e(z)} remaining)`)),i(n,o)};p(G,n=>{e(z)<e(f).length&&n(b)})}a(B),a(J),_(()=>H.disabled=e(F)),i(Te,J),_a()}da(["click"]);var hr=v('<span class="chevron svelte-11rkzid">‚ñ≤</span>'),br=v('<span class="chevron svelte-11rkzid">‚ñº</span>'),yr=v('<div class="filter-body svelte-11rkzid"><div class="filter-grid svelte-11rkzid"><div class="filter-item svelte-11rkzid"><label for="start-date" class="svelte-11rkzid">Start Date</label> <input type="date" id="start-date" class="svelte-11rkzid"/></div> <div class="filter-item svelte-11rkzid"><label for="end-date" class="svelte-11rkzid">End Date</label> <input type="date" id="end-date" class="svelte-11rkzid"/></div> <div class="filter-item svelte-11rkzid"><label for="name-filter" class="svelte-11rkzid">Session Name</label> <input type="text" id="name-filter" placeholder="e.g. Leg Day" class="svelte-11rkzid"/></div> <div class="filter-item svelte-11rkzid"><label for="block-filter" class="svelte-11rkzid">Training Block</label> <select id="block-filter" class="svelte-11rkzid"><option>All Blocks</option><option>Strength</option><option>Power</option><option>Power Endurance</option><option>Muscular Endurance</option></select></div></div> <div class="filter-actions svelte-11rkzid"><button class="reset-btn svelte-11rkzid">Reset Filters</button></div></div>'),xr=v('<div class="filter-container svelte-11rkzid"><button class="filter-header svelte-11rkzid"><div class="header-content svelte-11rkzid"><span class="icon svelte-11rkzid">üîç</span> <span class="title svelte-11rkzid">Filters</span> <!></div></button> <!></div>');function wr(Te,c){pa(c,!0);let r=k(!1),f=k(""),F=k(""),D=k(""),u=k("");function z(){l(r,!e(r))}function x(){l(f,""),l(F,""),l(D,""),l(u,""),U()}function U(){c.onFilterParamsChange({startDate:e(f),endDate:e(F),name:e(D),trainingBlock:e(u)})}var X=xr(),ne=t(X);ne.__click=z;var ue=t(ne),te=s(t(ue),4);{var ee=re=>{var H=hr();i(re,H)},J=re=>{var H=br();i(re,H)};p(te,re=>{e(r)?re(ee):re(J,!1)})}a(ue),a(ne);var oe=s(ne,2);{var fe=re=>{var H=yr(),le=t(H),we=t(le),ye=s(t(we),2);Ne(ye),ye.__change=U,a(we);var ae=s(we,2),N=s(t(ae),2);Ne(N),N.__change=U,a(ae);var g=s(ae,2),m=s(t(g),2);Ne(m),m.__input=U,a(g);var E=s(g,2),R=s(t(E),2);R.__change=U;var B=t(R);B.value=B.__value="";var Z=s(B);Z.value=Z.__value="Strength";var K=s(Z);K.value=K.__value="Power";var h=s(K);h.value=h.__value="Power Endurance";var G=s(h);G.value=G.__value="Muscular Endurance",a(R),a(E),a(le);var b=s(le,2),n=t(b);n.__click=x,a(b),a(H),Ie(ye,()=>e(f),o=>l(f,o)),Ie(N,()=>e(F),o=>l(F,o)),Ie(m,()=>e(D),o=>l(D,o)),ya(R,()=>e(u),o=>l(u,o)),ta(3,H,()=>ua,()=>({duration:200})),i(re,H)};p(oe,re=>{e(r)&&re(fe)})}a(X),_(()=>Ye(ne,"aria-expanded",e(r))),i(Te,X),_a()}da(["click","change","input"]);var Sr=v('<span class="status-icon pending svelte-cirrfc" title="Waiting to sync">üîÑ</span>'),kr=v('<span class="status-icon error svelte-cirrfc" title="Sync error">‚ö†Ô∏è</span>'),Dr=v('<div class="bw-info svelte-cirrfc"><span class="label svelte-cirrfc">Bodyweight:</span> </div>'),Tr=v('<span class="muscle-tag svelte-cirrfc"> </span>'),qr=v('<span class="muscle-tag svelte-cirrfc"> </span>'),zr=v('<div class="muscle-tags svelte-cirrfc"><!> <!></div>'),Cr=v('<span class="tag w svelte-cirrfc">W</span>'),Lr=v('<span class="tag f svelte-cirrfc">F</span>'),Fr=v('<span class="tag d svelte-cirrfc">D</span>'),Er=v('<div><span class="set-num svelte-cirrfc"></span> <!> <!> <!> <span class="val svelte-cirrfc"><span class="weight"> </span> <span class="x svelte-cirrfc">x</span> <span class="reps"> </span></span></div>'),Gr=v('<div class="exercise-item svelte-cirrfc"><div class="exercise-header svelte-cirrfc"><h4 class="svelte-cirrfc"> </h4> <!></div> <div class="sets-grid svelte-cirrfc"></div></div>'),Or=v('<div class="subcategory-group svelte-cirrfc"><h5 class="subcategory-header svelte-cirrfc"> </h5> <!></div>'),Ar=v('<div class="category-group svelte-cirrfc"><h4 class="category-header svelte-cirrfc"> </h4> <!></div>'),jr=v('<div class="card-body svelte-cirrfc"><!> <div class="exercises-list svelte-cirrfc"></div></div>'),Nr=v('<div><div class="card-header svelte-cirrfc" role="button" tabindex="0"><div class="header-main svelte-cirrfc"><div class="date-badge svelte-cirrfc"><span class="day svelte-cirrfc"> </span> <span class="month svelte-cirrfc"> </span></div> <div class="session-info svelte-cirrfc"><div class="session-text"><h3 class="name svelte-cirrfc"> </h3> <div class="session-meta svelte-cirrfc"><span class="stat svelte-cirrfc"> </span> <span class="stat svelte-cirrfc"> </span> <span class="stat svelte-cirrfc"> </span></div></div></div></div> <div class="header-actions svelte-cirrfc"><div class="header-status"><!></div> <button class="btn-icon delete-session svelte-cirrfc" title="Delete Session">üóëÔ∏è</button> <span class="chevron svelte-cirrfc"> </span></div></div> <!></div> <!>',1);function Ir(Te,c){pa(c,!0);let r=k(!1),f=k(!1);function F(){l(r,!e(r))}function D(){l(f,!0)}function u(){Va(c.session.id),l(f,!1),c.onDelete()}function z(L){return rt.find(I=>I.name===L)}let x=oa(()=>c.session.exercises?.length??0),U=oa(()=>(c.session.exercises||[]).reduce((L,I)=>L+(I.sets?.length||0),0)),X=oa(()=>(c.session.exercises||[]).reduce((L,I)=>L+(I.sets||[]).reduce((me,Se)=>me+(Se.weight||0)*(Se.reps||0),0),0)),ne=oa(()=>(c.session.exercises||[]).reduce((L,I)=>{const me=z(I.name),Se=me?.category||"Other",ke=me?.subcategory||"Misc";return L[Se]||(L[Se]={}),L[Se][ke]||(L[Se][ke]=[]),L[Se][ke].push(I),L},{}));var ue=Nr(),te=Me(ue);let ee;var J=t(te);J.__click=F,J.__keydown=L=>L.key==="Enter"&&F();var oe=t(J),fe=t(oe),re=t(fe),H=t(re,!0);a(re);var le=s(re,2),we=t(le,!0);a(le),a(fe);var ye=s(fe,2),ae=t(ye),N=t(ae),g=t(N,!0);a(N);var m=s(N,2),E=t(m),R=t(E);a(E);var B=s(E,2),Z=t(B);a(B);var K=s(B,2),h=t(K);a(K),a(m),a(ae),a(ye),a(oe);var G=s(oe,2),b=t(G),n=t(b);{var o=L=>{var I=Sr();i(L,I)},T=L=>{var I=Qe(),me=Me(I);{var Se=ke=>{var q=kr();i(ke,q)};p(me,ke=>{c.session.syncStatus==="error"&&ke(Se)},!0)}i(L,I)};p(n,L=>{c.session.syncStatus==="pending"?L(o):L(T,!1)})}a(b);var W=s(b,2);W.__click=L=>{L.stopPropagation(),D()};var Y=s(W,2),j=t(Y,!0);a(Y),a(G),a(J);var de=s(J,2);{var ve=L=>{var I=jr(),me=t(I);{var Se=q=>{var y=Dr(),O=s(t(y));a(y),_(()=>d(O,` ${c.session.bodyweight??""}kg`)),i(q,y)};p(me,q=>{c.session.bodyweight&&q(Se)})}var ke=s(me,2);qe(ke,21,()=>Object.entries(e(ne)),Fe,(q,y)=>{var O=oa(()=>Wa(e(y),2));let be=()=>e(O)[0],C=()=>e(O)[1];var S=Ar(),M=t(S),V=t(M,!0);a(M);var se=s(M,2);qe(se,17,()=>Object.entries(C()),Fe,(ce,Ee)=>{var he=oa(()=>Wa(e(Ee),2));let Ce=()=>e(he)[0],De=()=>e(he)[1];var Le=Or(),$=t(Le),pe=t($,!0);a($);var Ge=s($,2);qe(Ge,17,De,Fe,(Oe,je)=>{const Ze=oa(()=>z(e(je).name));var Pe=Gr(),Re=t(Pe),$e=t(Re),Ke=t($e,!0);a($e);var ca=s($e,2);{var fa=ra=>{var Ae=zr(),Ue=t(Ae);qe(Ue,17,()=>e(Ze).targetMuscles.slice(0,3),Fe,(Be,Ve)=>{var la=Tr(),He=t(la,!0);a(la),_(()=>d(He,e(Ve))),i(Be,la)});var Xe=s(Ue,2);{var ia=Be=>{var Ve=qr(),la=t(Ve);a(Ve),_(()=>d(la,`+${e(Ze).targetMuscles.length-3}`)),i(Be,Ve)};p(Xe,Be=>{e(Ze).targetMuscles.length>3&&Be(ia)})}a(Ae),i(ra,Ae)};p(ca,ra=>{e(Ze)&&ra(fa)})}a(Re);var sa=s(Re,2);qe(sa,21,()=>e(je).sets,Fe,(ra,Ae,Ue)=>{var Xe=Er();let ia;var Be=t(Xe);Be.textContent=Ue+1;var Ve=s(Be,2);{var la=Je=>{var ga=Cr();i(Je,ga)};p(Ve,Je=>{e(Ae).isWarmup&&Je(la)})}var He=s(Ve,2);{var Ca=Je=>{var ga=Lr();i(Je,ga)};p(He,Je=>{e(Ae).isFailure&&Je(Ca)})}var ha=s(He,2);{var wa=Je=>{var ga=Fr();i(Je,ga)};p(ha,Je=>{e(Ae).isDropSet&&Je(wa)})}var ba=s(ha,2),Sa=t(ba),La=t(Sa);a(Sa);var ka=s(Sa,4),xa=t(ka,!0);a(ka),a(ba),a(Xe),_(()=>{ia=aa(Xe,1,"set-pill svelte-cirrfc",null,ia,{completed:e(Ae).completed,warmup:e(Ae).isWarmup}),d(La,`${e(Ae).weight??""}kg`),d(xa,e(Ae).reps)}),i(ra,Xe)}),a(sa),a(Pe),_(()=>d(Ke,e(je).name)),i(Oe,Pe)}),a(Le),_(()=>d(pe,Ce())),i(ce,Le)}),a(S),_(()=>d(V,be())),i(q,S)}),a(ke),a(I),ta(3,I,()=>ua,()=>({duration:150})),i(L,I)};p(de,L=>{e(r)&&L(ve)})}a(te);var xe=s(te,2);Na(xe,{get isOpen(){return e(f)},title:"Delete Session",message:"Are you sure you want to delete this session? This cannot be undone.",onConfirm:u,onCancel:()=>l(f,!1)}),_((L,I,me)=>{ee=aa(te,1,"session-card svelte-cirrfc",null,ee,{expanded:e(r)}),Ye(J,"aria-expanded",e(r)),d(H,L),d(we,I),d(g,c.session.name),d(R,`${e(x)??""} Exercises`),d(Z,`${e(U)??""} Sets`),d(h,`~${me??""}kg Vol`),d(j,e(r)?"‚ñ≤":"‚ñº")},[()=>new Date(c.session.date).getDate(),()=>new Date(c.session.date).toLocaleDateString("en-GB",{month:"short"}),()=>Math.round(e(X)).toLocaleString()]),i(Te,ue),_a()}da(["click","keydown"]);var Mr=v('<span class="spinner svelte-133enjd"></span> Fetching...',1),Pr=v('<div class="error-banner svelte-133enjd"> </div>'),Rr=v('<small class="svelte-133enjd">Try adjusting your filters.</small>'),Br=v('<div class="empty-state svelte-133enjd"><p class="svelte-133enjd">No gym sessions found.</p> <!></div>'),Vr=v('<div class="load-more-container svelte-133enjd"><button class="load-more-btn svelte-133enjd"> </button></div>'),Ur=v('<div class="view-container svelte-133enjd"><div class="view-header svelte-133enjd"><h2 class="view-title svelte-133enjd">üèãÔ∏è Gym Session History</h2> <div class="header-actions svelte-133enjd"><button class="action-btn secondary svelte-133enjd" title="Export filtered data to CSV">üì• Export</button> <button class="action-btn svelte-133enjd" title="Fetch data from cloud"><!></button></div></div> <!> <!> <div class="sessions-list"><!> <!> <!></div></div>');function Wr(Te,c){pa(c,!0);let r=k(ma([])),f=k(ma([])),F=k(!1),D=k(""),u=k(ma({startDate:"",endDate:"",name:"",trainingBlock:""})),z=k(20);const x=20;Ba(()=>{U()});function U(){const h=Ea("gym_session");l(r,h.sort((G,b)=>new Date(b.date).getTime()-new Date(G.date).getTime()),!0),te()}async function X(){l(F,!0),l(D,"");try{await Ga();const h=await it();h.ok&&h.data?ne(h.data):l(D,h.error||"Failed to fetch data",!0)}catch(h){l(D,h instanceof Error?h.message:"Unknown error",!0)}finally{l(F,!1)}}function ne(h){const G=h.map(n=>({...n,activityType:"gym_session",syncStatus:"synced",syncedAt:new Date().toISOString(),createdAt:n.createdAt||new Date().toISOString(),updatedAt:n.updatedAt||new Date().toISOString()}));Oa(G);const b=Ea("gym_session");l(r,b.sort((n,o)=>new Date(o.date).getTime()-new Date(n.date).getTime()),!0),te()}function ue(h){l(u,h,!0),te()}function te(){l(z,x),l(f,e(r).filter(h=>!(e(u).startDate&&h.date<e(u).startDate||e(u).endDate&&h.date>e(u).endDate||e(u).name&&!h.name.toLowerCase().includes(e(u).name.toLowerCase())||e(u).trainingBlock&&h.trainingBlock!==e(u).trainingBlock)),!0)}function ee(){l(z,e(z)+x)}var J=Ur(),oe=t(J),fe=s(t(oe),2),re=t(fe);re.__click=()=>Ua(e(f),"gym_sessions");var H=s(re,2);H.__click=X;var le=t(H);{var we=h=>{var G=Mr();za(),i(h,G)},ye=h=>{var G=qa("‚òÅÔ∏è Fetch Data");i(h,G)};p(le,h=>{e(F)?h(we):h(ye,!1)})}a(H),a(fe),a(oe);var ae=s(oe,2);{var N=h=>{var G=Pr(),b=t(G,!0);a(G),_(()=>d(b,e(D))),ta(3,G,()=>ua),i(h,G)};p(ae,h=>{e(D)&&h(N)})}var g=s(ae,2);wr(g,{onFilterParamsChange:ue});var m=s(g,2),E=t(m);qe(E,17,()=>e(f).slice(0,e(z)),h=>h.id,(h,G)=>{Ir(h,{get session(){return e(G)},onDelete:U})});var R=s(E,2);{var B=h=>{var G=Br(),b=s(t(G),2);{var n=o=>{var T=Rr();i(o,T)};p(b,o=>{e(r).length>0&&o(n)})}a(G),i(h,G)};p(R,h=>{e(f).length===0&&h(B)})}var Z=s(R,2);{var K=h=>{var G=Vr(),b=t(G);b.__click=ee;var n=t(b);a(b),a(G),_(()=>d(n,`Load More (${e(f).length-e(z)} remaining)`)),i(h,G)};p(Z,h=>{e(z)<e(f).length&&h(K)})}a(m),a(J),_(()=>H.disabled=e(F)),i(Te,J),_a()}da(["click"]);var Hr=v('<span class="spinner svelte-1szs0u9"></span> Fetching...',1),Jr=v('<div class="loading svelte-1szs0u9">Loading sessions...</div>'),Zr=v('<div class="empty-state svelte-1szs0u9"><!></div>'),Kr=v('<span class="set-tag svelte-1szs0u9"> <span class="x svelte-1szs0u9">x</span> </span>'),Xr=v('<div class="ex-notes svelte-1szs0u9"> </div>'),Yr=v('<div class="exercise-item svelte-1szs0u9"><div class="ex-header svelte-1szs0u9"><span class="ex-name svelte-1szs0u9"> </span> <span class="ex-grip svelte-1szs0u9"> </span></div> <div class="ex-sets svelte-1szs0u9"></div> <!></div>'),Qr=v('<div class="card-body svelte-1szs0u9"><div class="exercises-list svelte-1szs0u9"></div></div>'),$r=v('<div><div class="card-header svelte-1szs0u9" role="button" tabindex="0"><div class="header-main"><span class="session-date svelte-1szs0u9"> </span> <span class="meta svelte-1szs0u9"><!> </span></div> <div class="header-status svelte-1szs0u9"><span>‚óè</span> <button class="btn-icon delete-btn svelte-1szs0u9" title="Delete Session">üóëÔ∏è</button> <span class="chevron svelte-1szs0u9"> </span></div></div> <!></div>'),ei=v('<div class="load-more-container svelte-1szs0u9"><button class="load-more-btn svelte-1szs0u9"> </button></div>'),ai=v('<div class="timeline svelte-1szs0u9"><!> <!></div>'),ti=v('<div class="view-content svelte-1szs0u9"><div class="header svelte-1szs0u9"><h3 class="svelte-1szs0u9">ü§è Fingerboarding Log</h3> <button class="fetch-btn svelte-1szs0u9" title="Fetch data from cloud"><!></button></div> <div class="filters svelte-1szs0u9"><div class="filter-group svelte-1szs0u9"><label for="start-date" class="svelte-1szs0u9">From</label> <input type="date" id="start-date" class="svelte-1szs0u9"/></div> <div class="filter-group svelte-1szs0u9"><label for="end-date" class="svelte-1szs0u9">To</label> <input type="date" id="end-date" class="svelte-1szs0u9"/></div></div> <!></div> <!>',1);function si(Te,c){pa(c,!0);let r=k(ma([])),f=k(!0),F=k(""),D=k(""),u=k(ma(new Set)),z=k(20);const x=20;Ya(()=>{e(F),e(D),l(z,x)});let U=k(!1),X=k(null);function ne(b){l(X,b,!0),l(U,!0)}function ue(){e(X)&&(Va(e(X)),l(X,null),l(U,!1),l(r,Pa().sort((b,n)=>new Date(n.date).getTime()-new Date(b.date).getTime()),!0))}async function te(){l(f,!0),l(r,Pa().sort((b,n)=>new Date(n.date).getTime()-new Date(b.date).getTime()),!0);try{await Ga();const b=await lt();if(b.ok&&b.data){const n=b.data.map(o=>({...o,activityType:"fingerboarding",createdAt:o.createdAt||new Date().toISOString(),updatedAt:o.updatedAt||new Date().toISOString(),syncStatus:"synced"}));Oa(n),l(r,Pa().sort((o,T)=>new Date(T.date).getTime()-new Date(o.date).getTime()),!0)}}catch(b){console.error("Failed to sync",b)}finally{l(f,!1)}}te();let ee=oa(()=>e(r).filter(b=>!(e(F)&&new Date(b.date)<new Date(e(F))||e(D)&&new Date(b.date)>new Date(e(D)))));function J(){l(z,e(z)+x)}function oe(b){e(u).has(b)?e(u).delete(b):e(u).add(b),l(u,new Set(e(u)),!0)}function fe(b){return b.exercises.reduce((n,o)=>n+o.details.length,0)}var re=ti(),H=Me(re),le=t(H),we=s(t(le),2);we.__click=te;var ye=t(we);{var ae=b=>{var n=Hr();za(),i(b,n)},N=b=>{var n=qa("‚òÅÔ∏è Fetch Data");i(b,n)};p(ye,b=>{e(f)?b(ae):b(N,!1)})}a(we),a(le);var g=s(le,2),m=t(g),E=s(t(m),2);Ne(E),a(m);var R=s(m,2),B=s(t(R),2);Ne(B),a(R),a(g);var Z=s(g,2);{var K=b=>{var n=Jr();i(b,n)},h=b=>{var n=Qe(),o=Me(n);{var T=Y=>{var j=Zr(),de=t(j);{var ve=L=>{var I=qa("No sessions match filter.");i(L,I)},xe=L=>{var I=qa("No fingerboarding sessions logged yet.");i(L,I)};p(de,L=>{e(r).length>0?L(ve):L(xe,!1)})}a(j),i(Y,j)},W=Y=>{var j=ai(),de=t(j);qe(de,17,()=>e(ee).slice(0,e(z)),Fe,(L,I)=>{var me=$r();let Se;var ke=t(me);ke.__click=()=>oe(e(I).id),ke.__keydown=$=>$.key==="Enter"&&oe(e(I).id);var q=t(ke),y=t(q),O=t(y,!0);a(y);var be=s(y,2),C=t(be);{var S=$=>{var pe=qa();_(()=>d(pe,`${e(I).location??""} ¬∑`)),i($,pe)};p(C,$=>{e(I).location&&e(I).location!=="N/A"&&e(I).location!=="Home"&&$(S)})}var M=s(C);a(be),a(q);var V=s(q,2),se=t(V);let ce;var Ee=s(se,2);Ee.__click=$=>{$.stopPropagation(),ne(e(I).id)};var he=s(Ee,2),Ce=t(he,!0);a(he),a(V),a(ke);var De=s(ke,2);{var Le=$=>{var pe=Qr(),Ge=t(pe);qe(Ge,21,()=>e(I).exercises||[],Fe,(Oe,je)=>{var Ze=Yr(),Pe=t(Ze),Re=t(Pe),$e=t(Re,!0);a(Re);var Ke=s(Re,2),ca=t(Ke,!0);a(Ke),a(Pe);var fa=s(Pe,2);qe(fa,21,()=>e(je).details,Fe,(Ae,Ue)=>{var Xe=Kr(),ia=t(Xe),Be=s(ia,2);a(Xe),_(()=>{d(ia,`${e(Ue).weight>0?`+${e(Ue).weight}kg`:"BW"} `),d(Be,` ${e(Ue).reps??""}s/reps`)}),i(Ae,Xe)}),a(fa);var sa=s(fa,2);{var ra=Ae=>{var Ue=Xr(),Xe=t(Ue);a(Ue),_(()=>d(Xe,`"${e(je).notes??""}"`)),i(Ae,Ue)};p(sa,Ae=>{e(je).notes&&Ae(ra)})}a(Ze),_(()=>{d($e,e(je).name),d(ca,e(je).gripType)}),i(Oe,Ze)}),a(Ge),a(pe),ta(3,pe,()=>ua,()=>({duration:150})),i($,pe)};p(De,$=>{e(u).has(e(I).id)&&$(Le)})}a(me),_(($,pe,Ge,Oe)=>{Se=aa(me,1,"session-card svelte-1szs0u9",null,Se,$),d(O,pe),d(M,` ${e(I).exercises.length??""} Exercises ¬∑ ${Ge??""} Sets`),ce=aa(se,1,"sync-dot svelte-1szs0u9",null,ce,{synced:e(I).syncStatus==="synced"}),Ye(se,"title",e(I).syncStatus==="synced"?"Synced":"Local"),d(Ce,Oe)},[()=>({expanded:e(u).has(e(I).id)}),()=>new Date(e(I).date).toLocaleDateString(void 0,{weekday:"short",month:"short",day:"numeric"}),()=>fe(e(I)),()=>e(u).has(e(I).id)?"‚ñ≤":"‚ñº"]),i(L,me)});var ve=s(de,2);{var xe=L=>{var I=ei(),me=t(I);me.__click=J;var Se=t(me);a(me),a(I),_(()=>d(Se,`Load More (${e(ee).length-e(z)} remaining)`)),i(L,I)};p(ve,L=>{e(z)<e(ee).length&&L(xe)})}a(j),i(Y,j)};p(o,Y=>{e(ee).length===0?Y(T):Y(W,!1)},!0)}i(b,n)};p(Z,b=>{e(f)&&e(r).length===0?b(K):b(h,!1)})}a(H);var G=s(H,2);Na(G,{get isOpen(){return e(U)},title:"Delete Fingerboard Session",message:"Are you sure you want to delete this session? This cannot be undone.",onConfirm:ue,onCancel:()=>l(U,!1)}),_(()=>we.disabled=e(f)),Ie(E,()=>e(F),b=>l(F,b)),Ie(B,()=>e(D),b=>l(D,b)),i(Te,re),_a()}da(["click","keydown"]);var ri=v('<span class="spinner svelte-xyvf5r"></span> Fetching...',1),ii=v('<div class="loading svelte-xyvf5r">Loading sessions...</div>'),li=v('<div class="empty-state svelte-xyvf5r">No competitions logged yet.</div>'),vi=v('<span class="round-pos svelte-xyvf5r"> </span>'),ni=v('<span class="c-attempts svelte-xyvf5r"> </span>'),oi=v('<div class="climb-notes svelte-xyvf5r"> </div>'),di=v('<div class="climb-row svelte-xyvf5r"><div class="climb-info svelte-xyvf5r"><span class="c-name svelte-xyvf5r"> </span> <!></div> <div class="climb-result"><span> </span></div></div> <!>',1),ci=v('<div class="climbs-list"></div>'),pi=v('<div class="round-item svelte-xyvf5r"><div class="round-header svelte-xyvf5r"><span class="round-name"> </span> <!></div> <!></div>'),_i=v('<div class="rounds-list svelte-xyvf5r"></div>'),ui=v('<div class="load-meta svelte-xyvf5r"><span> </span></div>'),fi=v('<div class="card-body svelte-xyvf5r"><!> <!> <div class="session-footer svelte-xyvf5r"><span> </span></div></div>'),gi=v('<div><div class="card-header svelte-xyvf5r" role="button" tabindex="0"><div class="header-main svelte-xyvf5r"><div class="left-col svelte-xyvf5r"><span class="venue svelte-xyvf5r"> </span> <span class="date svelte-xyvf5r"> </span></div> <div class="right-col svelte-xyvf5r"><div class="badges svelte-xyvf5r"><span class="type-tag svelte-xyvf5r"> </span> <span class="result-tag svelte-xyvf5r"> </span></div></div></div> <div class="header-status svelte-xyvf5r"><span>‚óè</span> <button class="btn-icon delete-btn svelte-xyvf5r" title="Delete Session">üóëÔ∏è</button> <span class="chevron svelte-xyvf5r"> </span></div></div> <!></div>'),mi=v('<div class="load-more-container svelte-xyvf5r"><button class="load-more-btn svelte-xyvf5r"> </button></div>'),hi=v('<div class="timeline svelte-xyvf5r"><!> <!></div>'),bi=v('<div class="view-content svelte-xyvf5r"><div class="header svelte-xyvf5r"><h3 class="svelte-xyvf5r">üèÜ Competition Log</h3> <button class="fetch-btn svelte-xyvf5r" title="Fetch data from cloud"><!></button></div> <!> <!></div>');function yi(Te,c){pa(c,!0);let r=k(ma([])),f=k(!0),F=k(ma(new Set)),D=k(20);const u=20;let z=k(!1),x=k(null);function U(g){l(x,g,!0),l(z,!0)}function X(){e(x)&&(Va(e(x)),l(x,null),l(z,!1),l(r,Ra().sort((g,m)=>new Date(m.date).getTime()-new Date(g.date).getTime()),!0))}async function ne(){l(f,!0),l(D,u),l(r,Ra().sort((g,m)=>new Date(m.date).getTime()-new Date(g.date).getTime()),!0);try{await Ga();const g=await vt();if(g.ok&&g.data){const m=g.data.map(E=>({...E,activityType:"competition",type:E.type,rounds:E.rounds.map(R=>({...R,climbs:R.climbs?.map(B=>({...B,status:B.status}))})),createdAt:E.createdAt||new Date().toISOString(),updatedAt:E.updatedAt||new Date().toISOString(),syncStatus:"synced"}));Oa(m),l(r,Ra().sort((E,R)=>new Date(R.date).getTime()-new Date(E.date).getTime()),!0)}}catch(g){console.error("Failed to sync",g)}finally{l(f,!1)}}ne();function ue(g){e(F).has(g)?e(F).delete(g):e(F).add(g),l(F,new Set(e(F)),!0)}function te(){l(D,e(D)+u)}function ee(g){if(!g.rounds||g.rounds.length===0)return"No rounds";const m=g.rounds[g.rounds.length-1];if(m.position)return`#${m.position} ${m.name}`;if(m.climbs){const E=m.climbs.filter(B=>B.status==="Top"||B.status==="Flash").length,R=m.climbs.filter(B=>B.status==="Zone").length;return`${g.rounds.length} Rnds ¬∑ Final: ${E}T ${R+E}Z`}return m.name}var J=bi(),oe=t(J),fe=s(t(oe),2);fe.__click=ne;var re=t(fe);{var H=g=>{var m=ri();za(),i(g,m)},le=g=>{var m=qa("‚òÅÔ∏è Fetch Data");i(g,m)};p(re,g=>{e(f)?g(H):g(le,!1)})}a(fe),a(oe);var we=s(oe,2);{var ye=g=>{var m=ii();i(g,m)},ae=g=>{var m=Qe(),E=Me(m);{var R=Z=>{var K=li();i(Z,K)},B=Z=>{var K=hi(),h=t(K);qe(h,17,()=>e(r).slice(0,e(D)),Fe,(n,o)=>{var T=gi();let W;var Y=t(T);Y.__click=()=>ue(e(o).id),Y.__keydown=he=>he.key==="Enter"&&ue(e(o).id);var j=t(Y),de=t(j),ve=t(de),xe=t(ve,!0);a(ve);var L=s(ve,2),I=t(L,!0);a(L),a(de);var me=s(de,2),Se=t(me),ke=t(Se),q=t(ke,!0);a(ke);var y=s(ke,2),O=t(y,!0);a(y),a(Se),a(me),a(j);var be=s(j,2),C=t(be);let S;var M=s(C,2);M.__click=he=>{he.stopPropagation(),U(e(o).id)};var V=s(M,2),se=t(V,!0);a(V),a(be),a(Y);var ce=s(Y,2);{var Ee=he=>{var Ce=fi(),De=t(Ce);{var Le=Pe=>{var Re=_i();qe(Re,21,()=>e(o).rounds||[],Fe,($e,Ke)=>{var ca=pi(),fa=t(ca),sa=t(fa),ra=t(sa,!0);a(sa);var Ae=s(sa,2);{var Ue=Be=>{var Ve=vi(),la=t(Ve);a(Ve),_(()=>d(la,`#${e(Ke).position??""}`)),i(Be,Ve)};p(Ae,Be=>{e(Ke).position&&Be(Ue)})}a(fa);var Xe=s(fa,2);{var ia=Be=>{var Ve=ci();qe(Ve,21,()=>e(Ke).climbs||[],Fe,(la,He)=>{var Ca=di(),ha=Me(Ca),wa=t(ha),ba=t(wa),Sa=t(ba,!0);a(ba);var La=s(ba,2);{var ka=A=>{var P=ni(),ge=t(P);a(P),_(()=>d(ge,`(${e(He).attemptCount??""} tries)`)),i(A,P)};p(La,A=>{e(He).attemptCount>1&&A(ka)})}a(wa);var xa=s(wa,2),Je=t(xa);let ga;var Q=t(Je,!0);a(Je),a(xa),a(ha);var ie=s(ha,2);{var w=A=>{var P=oi(),ge=t(P);a(P),_(()=>d(ge,`"${e(He).notes??""}"`)),i(A,P)};p(ie,A=>{e(He).notes&&A(w)})}_(()=>{d(Sa,e(He).name),ga=aa(Je,1,"status-badge svelte-xyvf5r",null,ga,{top:e(He).status==="Top"||e(He).status==="Flash",zone:e(He).status==="Zone"}),d(Q,e(He).status)}),i(la,Ca)}),a(Ve),i(Be,Ve)};p(Xe,Be=>{e(Ke).climbs&&Be(ia)})}a(ca),_(()=>d(ra,e(Ke).name)),i($e,ca)}),a(Re),i(Pe,Re)};p(De,Pe=>{e(o).rounds&&Pe(Le)})}var $=s(De,2);{var pe=Pe=>{var Re=ui(),$e=t(Re),Ke=t($e);a($e),a(Re),_(()=>d(Ke,`Detailed Load: Fingers ${e(o).fingerLoad??""}/5, Shoulders ${e(o).shoulderLoad??""}/5, Forearms ${e(o).forearmLoad??""}/5`)),i(Pe,Re)};p($,Pe=>{(e(o).fingerLoad||e(o).shoulderLoad)&&Pe(pe)})}var Ge=s($,2),Oe=t(Ge);let je;var Ze=t(Oe,!0);a(Oe),a(Ge),a(Ce),_(()=>{je=aa(Oe,1,"sync-status svelte-xyvf5r",null,je,{synced:e(o).syncStatus==="synced"}),d(Ze,e(o).syncStatus==="synced"?"‚úì Synced":"‚òÅ Local")}),ta(3,Ce,()=>ua,()=>({duration:150})),i(he,Ce)};p(ce,he=>{e(F).has(e(o).id)&&he(Ee)})}a(T),_((he,Ce,De,Le)=>{W=aa(T,1,"session-card svelte-xyvf5r",null,W,he),d(xe,e(o).customVenue||e(o).venue),d(I,Ce),d(q,e(o).type),d(O,De),S=aa(C,1,"sync-dot",null,S,{synced:e(o).syncStatus==="synced"}),Ye(C,"title",e(o).syncStatus==="synced"?"Synced":"Local"),d(se,Le)},[()=>({expanded:e(F).has(e(o).id)}),()=>new Date(e(o).date).toLocaleDateString(void 0,{weekday:"short",day:"numeric",month:"short"}),()=>ee(e(o)),()=>e(F).has(e(o).id)?"‚ñ≤":"‚ñº"]),i(n,T)});var G=s(h,2);{var b=n=>{var o=mi(),T=t(o);T.__click=te;var W=t(T);a(T),a(o),_(()=>d(W,`Load More (${e(r).length-e(D)} remaining)`)),i(n,o)};p(G,n=>{e(D)<e(r).length&&n(b)})}a(K),i(Z,K)};p(E,Z=>{e(r).length===0?Z(R):Z(B,!1)},!0)}i(g,m)};p(we,g=>{e(f)&&e(r).length===0?g(ye):g(ae,!1)})}var N=s(we,2);Na(N,{get isOpen(){return e(z)},title:"Delete Competition",message:"Are you sure you want to delete this competition session? This action cannot be undone.",onConfirm:X,onCancel:()=>l(z,!1)}),a(J),_(()=>fe.disabled=e(f)),i(Te,J),_a()}da(["click","keydown"]);var xi=v('<button class="backdrop svelte-108px9u" aria-label="Close settings"></button> <div class="settings-modal svelte-108px9u" role="dialog" aria-modal="true"><div class="settings-header svelte-108px9u"><h3 class="svelte-108px9u">Settings</h3> <button class="close-btn svelte-108px9u">‚úï</button></div> <div class="settings-content"><div class="setting-item svelte-108px9u"><div class="setting-info svelte-108px9u"><span class="setting-label svelte-108px9u">Local Data</span> <span class="setting-desc svelte-108px9u">Clear all cached data on this device</span></div> <button class="btn-clear-cache svelte-108px9u">Clear Cache</button></div></div></div>',1),wi=v("<option> </option>"),Si=v('<div class="view-container svelte-108px9u"><!></div>'),ki=v('<div class="page svelte-108px9u"><div class="page-header svelte-108px9u"><div><h1 class="svelte-108px9u">üìä View Data</h1> <p class="subtitle svelte-108px9u">Browse your training history</p></div> <button class="settings-btn svelte-108px9u" aria-label="Settings">‚öôÔ∏è</button></div> <!> <!> <div class="content-card svelte-108px9u"><div class="form-group svelte-108px9u"><label for="activity-type" class="svelte-108px9u">Activity Type</label> <select id="activity-type" class="svelte-108px9u"><option disabled>Select an activity...</option><!></select></div> <!></div></div>');function Oi(Te,c){pa(c,!0);const r=[{value:"indoor_climb",label:"Indoor Climb",icon:"üßó"},{value:"outdoor_climb",label:"Outdoor Climb",icon:"‚õ∞Ô∏è"},{value:"gym_session",label:"Gym Session",icon:"üèãÔ∏è"},{value:"fingerboarding",label:"Fingerboarding",icon:"ü§è"},{value:"competition",label:"Competition",icon:"üèÜ"}];let f=k(""),F=k(!1),D=k(!1);function u(){l(F,!0)}function z(){l(F,!1)}function x(){l(F,!1),l(D,!0)}function U(){dt()}var X=ki(),ne=t(X),ue=s(t(ne),2);ue.__click=u,a(ne);var te=s(ne,2);{var ee=ae=>{var N=xi(),g=Me(N);g.__click=z;var m=s(g,2),E=t(m),R=s(t(E),2);R.__click=z,a(E);var B=s(E,2),Z=t(B),K=s(t(Z),2);K.__click=x,a(Z),a(B),a(m),ta(3,g,()=>nt,()=>({duration:200})),ta(3,m,()=>ot,()=>({duration:200,start:.9})),i(ae,N)};p(te,ae=>{e(F)&&ae(ee)})}var J=s(te,2);Na(J,{get isOpen(){return e(D)},title:"Clear all local data?",message:"Are you sure you want to clear all locally cached data? This will remove all sessions stored on this device. Data already synced to the cloud will be preserved.",confirmKeyword:"clear",onConfirm:U,onCancel:()=>l(D,!1)});var oe=s(J,2),fe=t(oe),re=s(t(fe),2),H=t(re);H.value=H.__value="";var le=s(H);qe(le,17,()=>r,ae=>ae.value,(ae,N)=>{var g=wi(),m=t(g);a(g);var E={};_(()=>{d(m,`${e(N).icon??""} ${e(N).label??""}`),E!==(E=e(N).value)&&(g.value=(g.__value=e(N).value)??"")}),i(ae,g)}),a(re),a(fe);var we=s(fe,2);{var ye=ae=>{var N=Si(),g=t(N);{var m=R=>{us(R,{})},E=R=>{var B=Qe(),Z=Me(B);{var K=G=>{mr(G,{})},h=G=>{var b=Qe(),n=Me(b);{var o=W=>{Wr(W,{})},T=W=>{var Y=Qe(),j=Me(Y);{var de=xe=>{si(xe,{})},ve=xe=>{var L=Qe(),I=Me(L);{var me=Se=>{yi(Se,{})};p(I,Se=>{e(f)==="competition"&&Se(me)},!0)}i(xe,L)};p(j,xe=>{e(f)==="fingerboarding"?xe(de):xe(ve,!1)},!0)}i(W,Y)};p(n,W=>{e(f)==="gym_session"?W(o):W(T,!1)},!0)}i(G,b)};p(Z,G=>{e(f)==="outdoor_climb"?G(K):G(h,!1)},!0)}i(R,B)};p(g,R=>{e(f)==="indoor_climb"?R(m):R(E,!1)})}a(N),i(ae,N)};p(we,ae=>{e(f)&&ae(ye)})}a(oe),a(X),ya(re,()=>e(f),ae=>l(f,ae)),i(Te,X),_a()}da(["click"]);export{Oi as component};
