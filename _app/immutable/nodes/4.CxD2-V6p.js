import{f as z,d as Gt,a as C,c as re}from"../chunks/DlIpowWv.js";import{a2 as zo,k as Wo,p as vn,c as b,r as w,t as gt,g as l,aM as T,s as p,a as gn,f as qt,e as Se,d as ue,b8 as wi,A as Vo,o as Bo,as as Cr}from"../chunks/BSXnj9bA.js";import{s as Pt}from"../chunks/DY3SdbM1.js";import{i as q}from"../chunks/Bnb5Vf_a.js";import{e as Ht,i as I,j as It,r as xi}from"../chunks/DBB2y30b.js";import{h as jr,b as Sr,r as Go,v as qo,j as Xo,y as Zo,A as Jo,c as bi}from"../chunks/BHK6Hdfp.js";import{p as yt}from"../chunks/DrybqwuO.js";class $r{#t=new WeakMap;#e;#n;static entries=new WeakMap;constructor(e){this.#n=e}observe(e,n){var r=this.#t.get(e)||new Set;return r.add(n),this.#t.set(e,r),this.#r().observe(e,this.#n),()=>{var i=this.#t.get(e);i.delete(n),i.size===0&&(this.#t.delete(e),this.#e.unobserve(e))}}#r(){return this.#e??(this.#e=new ResizeObserver(e=>{for(var n of e){$r.entries.set(n.target,n);for(var r of this.#t.get(n.target)||[])r(n)}}))}}var Qo=new $r({box:"border-box"});function ti(t,e,n){var r=Qo.observe(t,()=>n(t[e]));zo(()=>(Wo(()=>n(t[e])),r))}function Cn(t,e){return t==null||e==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function Ko(t,e){return t==null||e==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function ei(t){let e,n,r;t.length!==2?(e=Cn,n=(s,c)=>Cn(t(s),c),r=(s,c)=>t(s)-c):(e=t===Cn||t===Ko?t:jo,n=t,r=t);function i(s,c,u=0,f=s.length){if(u<f){if(e(c,c)!==0)return f;do{const h=u+f>>>1;n(s[h],c)<0?u=h+1:f=h}while(u<f)}return u}function a(s,c,u=0,f=s.length){if(u<f){if(e(c,c)!==0)return f;do{const h=u+f>>>1;n(s[h],c)<=0?u=h+1:f=h}while(u<f)}return u}function o(s,c,u=0,f=s.length){const h=i(s,c,u,f-1);return h>u&&r(s[h-1],c)>-r(s[h],c)?h-1:h}return{left:i,center:o,right:a}}function jo(){return 0}function $o(t){return t===null?NaN:+t}const ts=ei(Cn),es=ts.right;ei($o).center;function ns(t,e){let n,r;if(e===void 0)for(const i of t)i!=null&&(n===void 0?i>=i&&(n=r=i):(n>i&&(n=i),r<i&&(r=i)));else{let i=-1;for(let a of t)(a=e(a,++i,t))!=null&&(n===void 0?a>=a&&(n=r=a):(n>a&&(n=a),r<a&&(r=a)))}return[n,r]}class Hr extends Map{constructor(e,n=as){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),e!=null)for(const[r,i]of e)this.set(r,i)}get(e){return super.get(Ti(this,e))}has(e){return super.has(Ti(this,e))}set(e,n){return super.set(rs(this,e),n)}delete(e){return super.delete(is(this,e))}}function Ti({_intern:t,_key:e},n){const r=e(n);return t.has(r)?t.get(r):n}function rs({_intern:t,_key:e},n){const r=e(n);return t.has(r)?t.get(r):(t.set(r,n),n)}function is({_intern:t,_key:e},n){const r=e(n);return t.has(r)&&(n=t.get(r),t.delete(r)),n}function as(t){return t!==null&&typeof t=="object"?t.valueOf():t}function os(t){return t}function ss(t,...e){return ls(t,Array.from,os,e)}function ls(t,e,n,r){return(function i(a,o){if(o>=r.length)return n(a);const s=new Hr,c=r[o++];let u=-1;for(const f of a){const h=c(f,++u,a),d=s.get(h);d?d.push(f):s.set(h,[f])}for(const[f,h]of s)s.set(f,i(h,o));return e(s)})(t,0)}const cs=Math.sqrt(50),us=Math.sqrt(10),fs=Math.sqrt(2);function Ln(t,e,n){const r=(e-t)/Math.max(0,n),i=Math.floor(Math.log10(r)),a=r/Math.pow(10,i),o=a>=cs?10:a>=us?5:a>=fs?2:1;let s,c,u;return i<0?(u=Math.pow(10,-i)/o,s=Math.round(t*u),c=Math.round(e*u),s/u<t&&++s,c/u>e&&--c,u=-u):(u=Math.pow(10,i)*o,s=Math.round(t/u),c=Math.round(e/u),s*u<t&&++s,c*u>e&&--c),c<s&&.5<=n&&n<2?Ln(t,e,n*2):[s,c,u]}function hs(t,e,n){if(e=+e,t=+t,n=+n,!(n>0))return[];if(t===e)return[t];const r=e<t,[i,a,o]=r?Ln(e,t,n):Ln(t,e,n);if(!(a>=i))return[];const s=a-i+1,c=new Array(s);if(r)if(o<0)for(let u=0;u<s;++u)c[u]=(a-u)/-o;else for(let u=0;u<s;++u)c[u]=(a-u)*o;else if(o<0)for(let u=0;u<s;++u)c[u]=(i+u)/-o;else for(let u=0;u<s;++u)c[u]=(i+u)*o;return c}function Ir(t,e,n){return e=+e,t=+t,n=+n,Ln(t,e,n)[2]}function Pr(t,e,n){e=+e,t=+t,n=+n;const r=e<t,i=r?Ir(e,t,n):Ir(t,e,n);return(r?-1:1)*(i<0?1/-i:i)}function Un(t,e){let n;if(e===void 0)for(const r of t)r!=null&&(n<r||n===void 0&&r>=r)&&(n=r);else{let r=-1;for(let i of t)(i=e(i,++r,t))!=null&&(n<i||n===void 0&&i>=i)&&(n=i)}return n}function ds(t,e,n){t=+t,e=+e,n=(i=arguments.length)<2?(e=t,t=0,1):i<3?1:+n;for(var r=-1,i=Math.max(0,Math.ceil((e-t)/n))|0,a=new Array(i);++r<i;)a[r]=t+r*n;return a}function vs(t,e){let n=0;if(e===void 0)for(let r of t)(r=+r)&&(n+=r);else{let r=-1;for(let i of t)(i=+e(i,++r,t))&&(n+=i)}return n}var gs={value:()=>{}};function ha(){for(var t=0,e=arguments.length,n={},r;t<e;++t){if(!(r=arguments[t]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new Sn(n)}function Sn(t){this._=t}function ms(t,e){return t.trim().split(/^|\s+/).map(function(n){var r="",i=n.indexOf(".");if(i>=0&&(r=n.slice(i+1),n=n.slice(0,i)),n&&!e.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}Sn.prototype=ha.prototype={constructor:Sn,on:function(t,e){var n=this._,r=ms(t+"",n),i,a=-1,o=r.length;if(arguments.length<2){for(;++a<o;)if((i=(t=r[a]).type)&&(i=ys(n[i],t.name)))return i;return}if(e!=null&&typeof e!="function")throw new Error("invalid callback: "+e);for(;++a<o;)if(i=(t=r[a]).type)n[i]=Mi(n[i],t.name,e);else if(e==null)for(i in n)n[i]=Mi(n[i],t.name,null);return this},copy:function(){var t={},e=this._;for(var n in e)t[n]=e[n].slice();return new Sn(t)},call:function(t,e){if((i=arguments.length-2)>0)for(var n=new Array(i),r=0,i,a;r<i;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(a=this._[t],r=0,i=a.length;r<i;++r)a[r].value.apply(e,n)},apply:function(t,e,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var r=this._[t],i=0,a=r.length;i<a;++i)r[i].value.apply(e,n)}};function ys(t,e){for(var n=0,r=t.length,i;n<r;++n)if((i=t[n]).name===e)return i.value}function Mi(t,e,n){for(var r=0,i=t.length;r<i;++r)if(t[r].name===e){t[r]=gs,t=t.slice(0,r).concat(t.slice(r+1));break}return n!=null&&t.push({name:e,value:n}),t}var zr="http://www.w3.org/1999/xhtml";const Ai={svg:"http://www.w3.org/2000/svg",xhtml:zr,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Jn(t){var e=t+="",n=e.indexOf(":");return n>=0&&(e=t.slice(0,n))!=="xmlns"&&(t=t.slice(n+1)),Ai.hasOwnProperty(e)?{space:Ai[e],local:t}:t}function ps(t){return function(){var e=this.ownerDocument,n=this.namespaceURI;return n===zr&&e.documentElement.namespaceURI===zr?e.createElement(t):e.createElementNS(n,t)}}function _s(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function da(t){var e=Jn(t);return(e.local?_s:ps)(e)}function ws(){}function ni(t){return t==null?ws:function(){return this.querySelector(t)}}function xs(t){typeof t!="function"&&(t=ni(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var a=e[i],o=a.length,s=r[i]=new Array(o),c,u,f=0;f<o;++f)(c=a[f])&&(u=t.call(c,c.__data__,f,a))&&("__data__"in c&&(u.__data__=c.__data__),s[f]=u);return new $t(r,this._parents)}function bs(t){return t==null?[]:Array.isArray(t)?t:Array.from(t)}function Ts(){return[]}function va(t){return t==null?Ts:function(){return this.querySelectorAll(t)}}function Ms(t){return function(){return bs(t.apply(this,arguments))}}function As(t){typeof t=="function"?t=Ms(t):t=va(t);for(var e=this._groups,n=e.length,r=[],i=[],a=0;a<n;++a)for(var o=e[a],s=o.length,c,u=0;u<s;++u)(c=o[u])&&(r.push(t.call(c,c.__data__,u,o)),i.push(c));return new $t(r,i)}function ga(t){return function(){return this.matches(t)}}function ma(t){return function(e){return e.matches(t)}}var ks=Array.prototype.find;function Cs(t){return function(){return ks.call(this.children,t)}}function Ss(){return this.firstElementChild}function Ds(t){return this.select(t==null?Ss:Cs(typeof t=="function"?t:ma(t)))}var Ns=Array.prototype.filter;function Fs(){return Array.from(this.children)}function Ls(t){return function(){return Ns.call(this.children,t)}}function Us(t){return this.selectAll(t==null?Fs:Ls(typeof t=="function"?t:ma(t)))}function Es(t){typeof t!="function"&&(t=ga(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var a=e[i],o=a.length,s=r[i]=[],c,u=0;u<o;++u)(c=a[u])&&t.call(c,c.__data__,u,a)&&s.push(c);return new $t(r,this._parents)}function ya(t){return new Array(t.length)}function Ys(){return new $t(this._enter||this._groups.map(ya),this._parents)}function En(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}En.prototype={constructor:En,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};function Os(t){return function(){return t}}function Rs(t,e,n,r,i,a){for(var o=0,s,c=e.length,u=a.length;o<u;++o)(s=e[o])?(s.__data__=a[o],r[o]=s):n[o]=new En(t,a[o]);for(;o<c;++o)(s=e[o])&&(i[o]=s)}function Hs(t,e,n,r,i,a,o){var s,c,u=new Map,f=e.length,h=a.length,d=new Array(f),v;for(s=0;s<f;++s)(c=e[s])&&(d[s]=v=o.call(c,c.__data__,s,e)+"",u.has(v)?i[s]=c:u.set(v,c));for(s=0;s<h;++s)v=o.call(t,a[s],s,a)+"",(c=u.get(v))?(r[s]=c,c.__data__=a[s],u.delete(v)):n[s]=new En(t,a[s]);for(s=0;s<f;++s)(c=e[s])&&u.get(d[s])===c&&(i[s]=c)}function Is(t){return t.__data__}function Ps(t,e){if(!arguments.length)return Array.from(this,Is);var n=e?Hs:Rs,r=this._parents,i=this._groups;typeof t!="function"&&(t=Os(t));for(var a=i.length,o=new Array(a),s=new Array(a),c=new Array(a),u=0;u<a;++u){var f=r[u],h=i[u],d=h.length,v=zs(t.call(f,f&&f.__data__,u,r)),x=v.length,k=s[u]=new Array(x),R=o[u]=new Array(x),F=c[u]=new Array(d);n(f,h,k,R,F,v,e);for(var P=0,H=0,E,U;P<x;++P)if(E=k[P]){for(P>=H&&(H=P+1);!(U=R[H])&&++H<x;);E._next=U||null}}return o=new $t(o,r),o._enter=s,o._exit=c,o}function zs(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function Ws(){return new $t(this._exit||this._groups.map(ya),this._parents)}function Vs(t,e,n){var r=this.enter(),i=this,a=this.exit();return typeof t=="function"?(r=t(r),r&&(r=r.selection())):r=r.append(t+""),e!=null&&(i=e(i),i&&(i=i.selection())),n==null?a.remove():n(a),r&&i?r.merge(i).order():i}function Bs(t){for(var e=t.selection?t.selection():t,n=this._groups,r=e._groups,i=n.length,a=r.length,o=Math.min(i,a),s=new Array(i),c=0;c<o;++c)for(var u=n[c],f=r[c],h=u.length,d=s[c]=new Array(h),v,x=0;x<h;++x)(v=u[x]||f[x])&&(d[x]=v);for(;c<i;++c)s[c]=n[c];return new $t(s,this._parents)}function Gs(){for(var t=this._groups,e=-1,n=t.length;++e<n;)for(var r=t[e],i=r.length-1,a=r[i],o;--i>=0;)(o=r[i])&&(a&&o.compareDocumentPosition(a)^4&&a.parentNode.insertBefore(o,a),a=o);return this}function qs(t){t||(t=Xs);function e(h,d){return h&&d?t(h.__data__,d.__data__):!h-!d}for(var n=this._groups,r=n.length,i=new Array(r),a=0;a<r;++a){for(var o=n[a],s=o.length,c=i[a]=new Array(s),u,f=0;f<s;++f)(u=o[f])&&(c[f]=u);c.sort(e)}return new $t(i,this._parents).order()}function Xs(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function Zs(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this}function Js(){return Array.from(this)}function Qs(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r=t[e],i=0,a=r.length;i<a;++i){var o=r[i];if(o)return o}return null}function Ks(){let t=0;for(const e of this)++t;return t}function js(){return!this.node()}function $s(t){for(var e=this._groups,n=0,r=e.length;n<r;++n)for(var i=e[n],a=0,o=i.length,s;a<o;++a)(s=i[a])&&t.call(s,s.__data__,a,i);return this}function tl(t){return function(){this.removeAttribute(t)}}function el(t){return function(){this.removeAttributeNS(t.space,t.local)}}function nl(t,e){return function(){this.setAttribute(t,e)}}function rl(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}function il(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttribute(t):this.setAttribute(t,n)}}function al(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n)}}function ol(t,e){var n=Jn(t);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((e==null?n.local?el:tl:typeof e=="function"?n.local?al:il:n.local?rl:nl)(n,e))}function pa(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function sl(t){return function(){this.style.removeProperty(t)}}function ll(t,e,n){return function(){this.style.setProperty(t,e,n)}}function cl(t,e,n){return function(){var r=e.apply(this,arguments);r==null?this.style.removeProperty(t):this.style.setProperty(t,r,n)}}function ul(t,e,n){return arguments.length>1?this.each((e==null?sl:typeof e=="function"?cl:ll)(t,e,n??"")):qe(this.node(),t)}function qe(t,e){return t.style.getPropertyValue(e)||pa(t).getComputedStyle(t,null).getPropertyValue(e)}function fl(t){return function(){delete this[t]}}function hl(t,e){return function(){this[t]=e}}function dl(t,e){return function(){var n=e.apply(this,arguments);n==null?delete this[t]:this[t]=n}}function vl(t,e){return arguments.length>1?this.each((e==null?fl:typeof e=="function"?dl:hl)(t,e)):this.node()[t]}function _a(t){return t.trim().split(/^|\s+/)}function ri(t){return t.classList||new wa(t)}function wa(t){this._node=t,this._names=_a(t.getAttribute("class")||"")}wa.prototype={add:function(t){var e=this._names.indexOf(t);e<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var e=this._names.indexOf(t);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};function xa(t,e){for(var n=ri(t),r=-1,i=e.length;++r<i;)n.add(e[r])}function ba(t,e){for(var n=ri(t),r=-1,i=e.length;++r<i;)n.remove(e[r])}function gl(t){return function(){xa(this,t)}}function ml(t){return function(){ba(this,t)}}function yl(t,e){return function(){(e.apply(this,arguments)?xa:ba)(this,t)}}function pl(t,e){var n=_a(t+"");if(arguments.length<2){for(var r=ri(this.node()),i=-1,a=n.length;++i<a;)if(!r.contains(n[i]))return!1;return!0}return this.each((typeof e=="function"?yl:e?gl:ml)(n,e))}function _l(){this.textContent=""}function wl(t){return function(){this.textContent=t}}function xl(t){return function(){var e=t.apply(this,arguments);this.textContent=e??""}}function bl(t){return arguments.length?this.each(t==null?_l:(typeof t=="function"?xl:wl)(t)):this.node().textContent}function Tl(){this.innerHTML=""}function Ml(t){return function(){this.innerHTML=t}}function Al(t){return function(){var e=t.apply(this,arguments);this.innerHTML=e??""}}function kl(t){return arguments.length?this.each(t==null?Tl:(typeof t=="function"?Al:Ml)(t)):this.node().innerHTML}function Cl(){this.nextSibling&&this.parentNode.appendChild(this)}function Sl(){return this.each(Cl)}function Dl(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function Nl(){return this.each(Dl)}function Fl(t){var e=typeof t=="function"?t:da(t);return this.select(function(){return this.appendChild(e.apply(this,arguments))})}function Ll(){return null}function Ul(t,e){var n=typeof t=="function"?t:da(t),r=e==null?Ll:typeof e=="function"?e:ni(e);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})}function El(){var t=this.parentNode;t&&t.removeChild(this)}function Yl(){return this.each(El)}function Ol(){var t=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function Rl(){var t=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function Hl(t){return this.select(t?Rl:Ol)}function Il(t){return arguments.length?this.property("__data__",t):this.node().__data__}function Pl(t){return function(e){t.call(this,e,this.__data__)}}function zl(t){return t.trim().split(/^|\s+/).map(function(e){var n="",r=e.indexOf(".");return r>=0&&(n=e.slice(r+1),e=e.slice(0,r)),{type:e,name:n}})}function Wl(t){return function(){var e=this.__on;if(e){for(var n=0,r=-1,i=e.length,a;n<i;++n)a=e[n],(!t.type||a.type===t.type)&&a.name===t.name?this.removeEventListener(a.type,a.listener,a.options):e[++r]=a;++r?e.length=r:delete this.__on}}}function Vl(t,e,n){return function(){var r=this.__on,i,a=Pl(e);if(r){for(var o=0,s=r.length;o<s;++o)if((i=r[o]).type===t.type&&i.name===t.name){this.removeEventListener(i.type,i.listener,i.options),this.addEventListener(i.type,i.listener=a,i.options=n),i.value=e;return}}this.addEventListener(t.type,a,n),i={type:t.type,name:t.name,value:e,listener:a,options:n},r?r.push(i):this.__on=[i]}}function Bl(t,e,n){var r=zl(t+""),i,a=r.length,o;if(arguments.length<2){var s=this.node().__on;if(s){for(var c=0,u=s.length,f;c<u;++c)for(i=0,f=s[c];i<a;++i)if((o=r[i]).type===f.type&&o.name===f.name)return f.value}return}for(s=e?Vl:Wl,i=0;i<a;++i)this.each(s(r[i],e,n));return this}function Ta(t,e,n){var r=pa(t),i=r.CustomEvent;typeof i=="function"?i=new i(e,n):(i=r.document.createEvent("Event"),n?(i.initEvent(e,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(e,!1,!1)),t.dispatchEvent(i)}function Gl(t,e){return function(){return Ta(this,t,e)}}function ql(t,e){return function(){return Ta(this,t,e.apply(this,arguments))}}function Xl(t,e){return this.each((typeof e=="function"?ql:Gl)(t,e))}function*Zl(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r=t[e],i=0,a=r.length,o;i<a;++i)(o=r[i])&&(yield o)}var Jl=[null];function $t(t,e){this._groups=t,this._parents=e}function mn(){return new $t([[document.documentElement]],Jl)}function Ql(){return this}$t.prototype=mn.prototype={constructor:$t,select:xs,selectAll:As,selectChild:Ds,selectChildren:Us,filter:Es,data:Ps,enter:Ys,exit:Ws,join:Vs,merge:Bs,selection:Ql,order:Gs,sort:qs,call:Zs,nodes:Js,node:Qs,size:Ks,empty:js,each:$s,attr:ol,style:ul,property:vl,classed:pl,text:bl,html:kl,raise:Sl,lower:Nl,append:Fl,insert:Ul,remove:Yl,clone:Hl,datum:Il,on:Bl,dispatch:Xl,[Symbol.iterator]:Zl};function ii(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function Ma(t,e){var n=Object.create(t.prototype);for(var r in e)n[r]=e[r];return n}function yn(){}var ln=.7,Yn=1/ln,Ge="\\s*([+-]?\\d+)\\s*",cn="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",ie="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Kl=/^#([0-9a-f]{3,8})$/,jl=new RegExp(`^rgb\\(${Ge},${Ge},${Ge}\\)$`),$l=new RegExp(`^rgb\\(${ie},${ie},${ie}\\)$`),tc=new RegExp(`^rgba\\(${Ge},${Ge},${Ge},${cn}\\)$`),ec=new RegExp(`^rgba\\(${ie},${ie},${ie},${cn}\\)$`),nc=new RegExp(`^hsl\\(${cn},${ie},${ie}\\)$`),rc=new RegExp(`^hsla\\(${cn},${ie},${ie},${cn}\\)$`),ki={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};ii(yn,Fe,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:Ci,formatHex:Ci,formatHex8:ic,formatHsl:ac,formatRgb:Si,toString:Si});function Ci(){return this.rgb().formatHex()}function ic(){return this.rgb().formatHex8()}function ac(){return Aa(this).formatHsl()}function Si(){return this.rgb().formatRgb()}function Fe(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=Kl.exec(t))?(n=e[1].length,e=parseInt(e[1],16),n===6?Di(e):n===3?new Bt(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):n===8?wn(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):n===4?wn(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=jl.exec(t))?new Bt(e[1],e[2],e[3],1):(e=$l.exec(t))?new Bt(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=tc.exec(t))?wn(e[1],e[2],e[3],e[4]):(e=ec.exec(t))?wn(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=nc.exec(t))?Li(e[1],e[2]/100,e[3]/100,1):(e=rc.exec(t))?Li(e[1],e[2]/100,e[3]/100,e[4]):ki.hasOwnProperty(t)?Di(ki[t]):t==="transparent"?new Bt(NaN,NaN,NaN,0):null}function Di(t){return new Bt(t>>16&255,t>>8&255,t&255,1)}function wn(t,e,n,r){return r<=0&&(t=e=n=NaN),new Bt(t,e,n,r)}function oc(t){return t instanceof yn||(t=Fe(t)),t?(t=t.rgb(),new Bt(t.r,t.g,t.b,t.opacity)):new Bt}function Wr(t,e,n,r){return arguments.length===1?oc(t):new Bt(t,e,n,r??1)}function Bt(t,e,n,r){this.r=+t,this.g=+e,this.b=+n,this.opacity=+r}ii(Bt,Wr,Ma(yn,{brighter(t){return t=t==null?Yn:Math.pow(Yn,t),new Bt(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?ln:Math.pow(ln,t),new Bt(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new Bt(Ne(this.r),Ne(this.g),Ne(this.b),On(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Ni,formatHex:Ni,formatHex8:sc,formatRgb:Fi,toString:Fi}));function Ni(){return`#${De(this.r)}${De(this.g)}${De(this.b)}`}function sc(){return`#${De(this.r)}${De(this.g)}${De(this.b)}${De((isNaN(this.opacity)?1:this.opacity)*255)}`}function Fi(){const t=On(this.opacity);return`${t===1?"rgb(":"rgba("}${Ne(this.r)}, ${Ne(this.g)}, ${Ne(this.b)}${t===1?")":`, ${t})`}`}function On(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function Ne(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function De(t){return t=Ne(t),(t<16?"0":"")+t.toString(16)}function Li(t,e,n,r){return r<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new jt(t,e,n,r)}function Aa(t){if(t instanceof jt)return new jt(t.h,t.s,t.l,t.opacity);if(t instanceof yn||(t=Fe(t)),!t)return new jt;if(t instanceof jt)return t;t=t.rgb();var e=t.r/255,n=t.g/255,r=t.b/255,i=Math.min(e,n,r),a=Math.max(e,n,r),o=NaN,s=a-i,c=(a+i)/2;return s?(e===a?o=(n-r)/s+(n<r)*6:n===a?o=(r-e)/s+2:o=(e-n)/s+4,s/=c<.5?a+i:2-a-i,o*=60):s=c>0&&c<1?0:o,new jt(o,s,c,t.opacity)}function lc(t,e,n,r){return arguments.length===1?Aa(t):new jt(t,e,n,r??1)}function jt(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}ii(jt,lc,Ma(yn,{brighter(t){return t=t==null?Yn:Math.pow(Yn,t),new jt(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?ln:Math.pow(ln,t),new jt(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*e,i=2*n-r;return new Bt(Dr(t>=240?t-240:t+120,i,r),Dr(t,i,r),Dr(t<120?t+240:t-120,i,r),this.opacity)},clamp(){return new jt(Ui(this.h),xn(this.s),xn(this.l),On(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=On(this.opacity);return`${t===1?"hsl(":"hsla("}${Ui(this.h)}, ${xn(this.s)*100}%, ${xn(this.l)*100}%${t===1?")":`, ${t})`}`}}));function Ui(t){return t=(t||0)%360,t<0?t+360:t}function xn(t){return Math.max(0,Math.min(1,t||0))}function Dr(t,e,n){return(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)*255}const ai=t=>()=>t;function cc(t,e){return function(n){return t+n*e}}function uc(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(r){return Math.pow(t+r*e,n)}}function fc(t){return(t=+t)==1?ka:function(e,n){return n-e?uc(e,n,t):ai(isNaN(e)?n:e)}}function ka(t,e){var n=e-t;return n?cc(t,n):ai(isNaN(t)?e:t)}const Rn=(function t(e){var n=fc(e);function r(i,a){var o=n((i=Wr(i)).r,(a=Wr(a)).r),s=n(i.g,a.g),c=n(i.b,a.b),u=ka(i.opacity,a.opacity);return function(f){return i.r=o(f),i.g=s(f),i.b=c(f),i.opacity=u(f),i+""}}return r.gamma=t,r})(1);function hc(t,e){e||(e=[]);var n=t?Math.min(e.length,t.length):0,r=e.slice(),i;return function(a){for(i=0;i<n;++i)r[i]=t[i]*(1-a)+e[i]*a;return r}}function dc(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function vc(t,e){var n=e?e.length:0,r=t?Math.min(n,t.length):0,i=new Array(r),a=new Array(n),o;for(o=0;o<r;++o)i[o]=oi(t[o],e[o]);for(;o<n;++o)a[o]=e[o];return function(s){for(o=0;o<r;++o)a[o]=i[o](s);return a}}function gc(t,e){var n=new Date;return t=+t,e=+e,function(r){return n.setTime(t*(1-r)+e*r),n}}function Kt(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}function mc(t,e){var n={},r={},i;(t===null||typeof t!="object")&&(t={}),(e===null||typeof e!="object")&&(e={});for(i in e)i in t?n[i]=oi(t[i],e[i]):r[i]=e[i];return function(a){for(i in n)r[i]=n[i](a);return r}}var Vr=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Nr=new RegExp(Vr.source,"g");function yc(t){return function(){return t}}function pc(t){return function(e){return t(e)+""}}function Ca(t,e){var n=Vr.lastIndex=Nr.lastIndex=0,r,i,a,o=-1,s=[],c=[];for(t=t+"",e=e+"";(r=Vr.exec(t))&&(i=Nr.exec(e));)(a=i.index)>n&&(a=e.slice(n,a),s[o]?s[o]+=a:s[++o]=a),(r=r[0])===(i=i[0])?s[o]?s[o]+=i:s[++o]=i:(s[++o]=null,c.push({i:o,x:Kt(r,i)})),n=Nr.lastIndex;return n<e.length&&(a=e.slice(n),s[o]?s[o]+=a:s[++o]=a),s.length<2?c[0]?pc(c[0].x):yc(e):(e=c.length,function(u){for(var f=0,h;f<e;++f)s[(h=c[f]).i]=h.x(u);return s.join("")})}function oi(t,e){var n=typeof e,r;return e==null||n==="boolean"?ai(e):(n==="number"?Kt:n==="string"?(r=Fe(e))?(e=r,Rn):Ca:e instanceof Fe?Rn:e instanceof Date?gc:dc(e)?hc:Array.isArray(e)?vc:typeof e.valueOf!="function"&&typeof e.toString!="function"||isNaN(e)?mc:Kt)(t,e)}function _c(t,e){return t=+t,e=+e,function(n){return Math.round(t*(1-n)+e*n)}}var Ei=180/Math.PI,Br={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function Sa(t,e,n,r,i,a){var o,s,c;return(o=Math.sqrt(t*t+e*e))&&(t/=o,e/=o),(c=t*n+e*r)&&(n-=t*c,r-=e*c),(s=Math.sqrt(n*n+r*r))&&(n/=s,r/=s,c/=s),t*r<e*n&&(t=-t,e=-e,c=-c,o=-o),{translateX:i,translateY:a,rotate:Math.atan2(e,t)*Ei,skewX:Math.atan(c)*Ei,scaleX:o,scaleY:s}}var bn;function wc(t){const e=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(t+"");return e.isIdentity?Br:Sa(e.a,e.b,e.c,e.d,e.e,e.f)}function xc(t){return t==null||(bn||(bn=document.createElementNS("http://www.w3.org/2000/svg","g")),bn.setAttribute("transform",t),!(t=bn.transform.baseVal.consolidate()))?Br:(t=t.matrix,Sa(t.a,t.b,t.c,t.d,t.e,t.f))}function Da(t,e,n,r){function i(u){return u.length?u.pop()+" ":""}function a(u,f,h,d,v,x){if(u!==h||f!==d){var k=v.push("translate(",null,e,null,n);x.push({i:k-4,x:Kt(u,h)},{i:k-2,x:Kt(f,d)})}else(h||d)&&v.push("translate("+h+e+d+n)}function o(u,f,h,d){u!==f?(u-f>180?f+=360:f-u>180&&(u+=360),d.push({i:h.push(i(h)+"rotate(",null,r)-2,x:Kt(u,f)})):f&&h.push(i(h)+"rotate("+f+r)}function s(u,f,h,d){u!==f?d.push({i:h.push(i(h)+"skewX(",null,r)-2,x:Kt(u,f)}):f&&h.push(i(h)+"skewX("+f+r)}function c(u,f,h,d,v,x){if(u!==h||f!==d){var k=v.push(i(v)+"scale(",null,",",null,")");x.push({i:k-4,x:Kt(u,h)},{i:k-2,x:Kt(f,d)})}else(h!==1||d!==1)&&v.push(i(v)+"scale("+h+","+d+")")}return function(u,f){var h=[],d=[];return u=t(u),f=t(f),a(u.translateX,u.translateY,f.translateX,f.translateY,h,d),o(u.rotate,f.rotate,h,d),s(u.skewX,f.skewX,h,d),c(u.scaleX,u.scaleY,f.scaleX,f.scaleY,h,d),u=f=null,function(v){for(var x=-1,k=d.length,R;++x<k;)h[(R=d[x]).i]=R.x(v);return h.join("")}}}var bc=Da(wc,"px, ","px)","deg)"),Tc=Da(xc,", ",")",")"),Xe=0,an=0,tn=0,Na=1e3,Hn,on,In=0,Le=0,Qn=0,un=typeof performance=="object"&&performance.now?performance:Date,Fa=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function si(){return Le||(Fa(Mc),Le=un.now()+Qn)}function Mc(){Le=0}function Pn(){this._call=this._time=this._next=null}Pn.prototype=La.prototype={constructor:Pn,restart:function(t,e,n){if(typeof t!="function")throw new TypeError("callback is not a function");n=(n==null?si():+n)+(e==null?0:+e),!this._next&&on!==this&&(on?on._next=this:Hn=this,on=this),this._call=t,this._time=n,Gr()},stop:function(){this._call&&(this._call=null,this._time=1/0,Gr())}};function La(t,e,n){var r=new Pn;return r.restart(t,e,n),r}function Ac(){si(),++Xe;for(var t=Hn,e;t;)(e=Le-t._time)>=0&&t._call.call(void 0,e),t=t._next;--Xe}function Yi(){Le=(In=un.now())+Qn,Xe=an=0;try{Ac()}finally{Xe=0,Cc(),Le=0}}function kc(){var t=un.now(),e=t-In;e>Na&&(Qn-=e,In=t)}function Cc(){for(var t,e=Hn,n,r=1/0;e;)e._call?(r>e._time&&(r=e._time),t=e,e=e._next):(n=e._next,e._next=null,e=t?t._next=n:Hn=n);on=t,Gr(r)}function Gr(t){if(!Xe){an&&(an=clearTimeout(an));var e=t-Le;e>24?(t<1/0&&(an=setTimeout(Yi,t-un.now()-Qn)),tn&&(tn=clearInterval(tn))):(tn||(In=un.now(),tn=setInterval(kc,Na)),Xe=1,Fa(Yi))}}function Oi(t,e,n){var r=new Pn;return e=e==null?0:+e,r.restart(i=>{r.stop(),t(i+e)},e,n),r}var Sc=ha("start","end","cancel","interrupt"),Dc=[],Ua=0,Ri=1,qr=2,Dn=3,Hi=4,Xr=5,Nn=6;function Kn(t,e,n,r,i,a){var o=t.__transition;if(!o)t.__transition={};else if(n in o)return;Nc(t,n,{name:e,index:r,group:i,on:Sc,tween:Dc,time:a.time,delay:a.delay,duration:a.duration,ease:a.ease,timer:null,state:Ua})}function li(t,e){var n=te(t,e);if(n.state>Ua)throw new Error("too late; already scheduled");return n}function ae(t,e){var n=te(t,e);if(n.state>Dn)throw new Error("too late; already running");return n}function te(t,e){var n=t.__transition;if(!n||!(n=n[e]))throw new Error("transition not found");return n}function Nc(t,e,n){var r=t.__transition,i;r[e]=n,n.timer=La(a,0,n.time);function a(u){n.state=Ri,n.timer.restart(o,n.delay,n.time),n.delay<=u&&o(u-n.delay)}function o(u){var f,h,d,v;if(n.state!==Ri)return c();for(f in r)if(v=r[f],v.name===n.name){if(v.state===Dn)return Oi(o);v.state===Hi?(v.state=Nn,v.timer.stop(),v.on.call("interrupt",t,t.__data__,v.index,v.group),delete r[f]):+f<e&&(v.state=Nn,v.timer.stop(),v.on.call("cancel",t,t.__data__,v.index,v.group),delete r[f])}if(Oi(function(){n.state===Dn&&(n.state=Hi,n.timer.restart(s,n.delay,n.time),s(u))}),n.state=qr,n.on.call("start",t,t.__data__,n.index,n.group),n.state===qr){for(n.state=Dn,i=new Array(d=n.tween.length),f=0,h=-1;f<d;++f)(v=n.tween[f].value.call(t,t.__data__,n.index,n.group))&&(i[++h]=v);i.length=h+1}}function s(u){for(var f=u<n.duration?n.ease.call(null,u/n.duration):(n.timer.restart(c),n.state=Xr,1),h=-1,d=i.length;++h<d;)i[h].call(t,f);n.state===Xr&&(n.on.call("end",t,t.__data__,n.index,n.group),c())}function c(){n.state=Nn,n.timer.stop(),delete r[e];for(var u in r)return;delete t.__transition}}function Fc(t,e){var n=t.__transition,r,i,a=!0,o;if(n){e=e==null?null:e+"";for(o in n){if((r=n[o]).name!==e){a=!1;continue}i=r.state>qr&&r.state<Xr,r.state=Nn,r.timer.stop(),r.on.call(i?"interrupt":"cancel",t,t.__data__,r.index,r.group),delete n[o]}a&&delete t.__transition}}function Lc(t){return this.each(function(){Fc(this,t)})}function Uc(t,e){var n,r;return function(){var i=ae(this,t),a=i.tween;if(a!==n){r=n=a;for(var o=0,s=r.length;o<s;++o)if(r[o].name===e){r=r.slice(),r.splice(o,1);break}}i.tween=r}}function Ec(t,e,n){var r,i;if(typeof n!="function")throw new Error;return function(){var a=ae(this,t),o=a.tween;if(o!==r){i=(r=o).slice();for(var s={name:e,value:n},c=0,u=i.length;c<u;++c)if(i[c].name===e){i[c]=s;break}c===u&&i.push(s)}a.tween=i}}function Yc(t,e){var n=this._id;if(t+="",arguments.length<2){for(var r=te(this.node(),n).tween,i=0,a=r.length,o;i<a;++i)if((o=r[i]).name===t)return o.value;return null}return this.each((e==null?Uc:Ec)(n,t,e))}function ci(t,e,n){var r=t._id;return t.each(function(){var i=ae(this,r);(i.value||(i.value={}))[e]=n.apply(this,arguments)}),function(i){return te(i,r).value[e]}}function Ea(t,e){var n;return(typeof e=="number"?Kt:e instanceof Fe?Rn:(n=Fe(e))?(e=n,Rn):Ca)(t,e)}function Oc(t){return function(){this.removeAttribute(t)}}function Rc(t){return function(){this.removeAttributeNS(t.space,t.local)}}function Hc(t,e,n){var r,i=n+"",a;return function(){var o=this.getAttribute(t);return o===i?null:o===r?a:a=e(r=o,n)}}function Ic(t,e,n){var r,i=n+"",a;return function(){var o=this.getAttributeNS(t.space,t.local);return o===i?null:o===r?a:a=e(r=o,n)}}function Pc(t,e,n){var r,i,a;return function(){var o,s=n(this),c;return s==null?void this.removeAttribute(t):(o=this.getAttribute(t),c=s+"",o===c?null:o===r&&c===i?a:(i=c,a=e(r=o,s)))}}function zc(t,e,n){var r,i,a;return function(){var o,s=n(this),c;return s==null?void this.removeAttributeNS(t.space,t.local):(o=this.getAttributeNS(t.space,t.local),c=s+"",o===c?null:o===r&&c===i?a:(i=c,a=e(r=o,s)))}}function Wc(t,e){var n=Jn(t),r=n==="transform"?Tc:Ea;return this.attrTween(t,typeof e=="function"?(n.local?zc:Pc)(n,r,ci(this,"attr."+t,e)):e==null?(n.local?Rc:Oc)(n):(n.local?Ic:Hc)(n,r,e))}function Vc(t,e){return function(n){this.setAttribute(t,e.call(this,n))}}function Bc(t,e){return function(n){this.setAttributeNS(t.space,t.local,e.call(this,n))}}function Gc(t,e){var n,r;function i(){var a=e.apply(this,arguments);return a!==r&&(n=(r=a)&&Bc(t,a)),n}return i._value=e,i}function qc(t,e){var n,r;function i(){var a=e.apply(this,arguments);return a!==r&&(n=(r=a)&&Vc(t,a)),n}return i._value=e,i}function Xc(t,e){var n="attr."+t;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(e==null)return this.tween(n,null);if(typeof e!="function")throw new Error;var r=Jn(t);return this.tween(n,(r.local?Gc:qc)(r,e))}function Zc(t,e){return function(){li(this,t).delay=+e.apply(this,arguments)}}function Jc(t,e){return e=+e,function(){li(this,t).delay=e}}function Qc(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?Zc:Jc)(e,t)):te(this.node(),e).delay}function Kc(t,e){return function(){ae(this,t).duration=+e.apply(this,arguments)}}function jc(t,e){return e=+e,function(){ae(this,t).duration=e}}function $c(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?Kc:jc)(e,t)):te(this.node(),e).duration}function tu(t,e){if(typeof e!="function")throw new Error;return function(){ae(this,t).ease=e}}function eu(t){var e=this._id;return arguments.length?this.each(tu(e,t)):te(this.node(),e).ease}function nu(t,e){return function(){var n=e.apply(this,arguments);if(typeof n!="function")throw new Error;ae(this,t).ease=n}}function ru(t){if(typeof t!="function")throw new Error;return this.each(nu(this._id,t))}function iu(t){typeof t!="function"&&(t=ga(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var a=e[i],o=a.length,s=r[i]=[],c,u=0;u<o;++u)(c=a[u])&&t.call(c,c.__data__,u,a)&&s.push(c);return new de(r,this._parents,this._name,this._id)}function au(t){if(t._id!==this._id)throw new Error;for(var e=this._groups,n=t._groups,r=e.length,i=n.length,a=Math.min(r,i),o=new Array(r),s=0;s<a;++s)for(var c=e[s],u=n[s],f=c.length,h=o[s]=new Array(f),d,v=0;v<f;++v)(d=c[v]||u[v])&&(h[v]=d);for(;s<r;++s)o[s]=e[s];return new de(o,this._parents,this._name,this._id)}function ou(t){return(t+"").trim().split(/^|\s+/).every(function(e){var n=e.indexOf(".");return n>=0&&(e=e.slice(0,n)),!e||e==="start"})}function su(t,e,n){var r,i,a=ou(e)?li:ae;return function(){var o=a(this,t),s=o.on;s!==r&&(i=(r=s).copy()).on(e,n),o.on=i}}function lu(t,e){var n=this._id;return arguments.length<2?te(this.node(),n).on.on(t):this.each(su(n,t,e))}function cu(t){return function(){var e=this.parentNode;for(var n in this.__transition)if(+n!==t)return;e&&e.removeChild(this)}}function uu(){return this.on("end.remove",cu(this._id))}function fu(t){var e=this._name,n=this._id;typeof t!="function"&&(t=ni(t));for(var r=this._groups,i=r.length,a=new Array(i),o=0;o<i;++o)for(var s=r[o],c=s.length,u=a[o]=new Array(c),f,h,d=0;d<c;++d)(f=s[d])&&(h=t.call(f,f.__data__,d,s))&&("__data__"in f&&(h.__data__=f.__data__),u[d]=h,Kn(u[d],e,n,d,u,te(f,n)));return new de(a,this._parents,e,n)}function hu(t){var e=this._name,n=this._id;typeof t!="function"&&(t=va(t));for(var r=this._groups,i=r.length,a=[],o=[],s=0;s<i;++s)for(var c=r[s],u=c.length,f,h=0;h<u;++h)if(f=c[h]){for(var d=t.call(f,f.__data__,h,c),v,x=te(f,n),k=0,R=d.length;k<R;++k)(v=d[k])&&Kn(v,e,n,k,d,x);a.push(d),o.push(f)}return new de(a,o,e,n)}var du=mn.prototype.constructor;function vu(){return new du(this._groups,this._parents)}function gu(t,e){var n,r,i;return function(){var a=qe(this,t),o=(this.style.removeProperty(t),qe(this,t));return a===o?null:a===n&&o===r?i:i=e(n=a,r=o)}}function Ya(t){return function(){this.style.removeProperty(t)}}function mu(t,e,n){var r,i=n+"",a;return function(){var o=qe(this,t);return o===i?null:o===r?a:a=e(r=o,n)}}function yu(t,e,n){var r,i,a;return function(){var o=qe(this,t),s=n(this),c=s+"";return s==null&&(c=s=(this.style.removeProperty(t),qe(this,t))),o===c?null:o===r&&c===i?a:(i=c,a=e(r=o,s))}}function pu(t,e){var n,r,i,a="style."+e,o="end."+a,s;return function(){var c=ae(this,t),u=c.on,f=c.value[a]==null?s||(s=Ya(e)):void 0;(u!==n||i!==f)&&(r=(n=u).copy()).on(o,i=f),c.on=r}}function _u(t,e,n){var r=(t+="")=="transform"?bc:Ea;return e==null?this.styleTween(t,gu(t,r)).on("end.style."+t,Ya(t)):typeof e=="function"?this.styleTween(t,yu(t,r,ci(this,"style."+t,e))).each(pu(this._id,t)):this.styleTween(t,mu(t,r,e),n).on("end.style."+t,null)}function wu(t,e,n){return function(r){this.style.setProperty(t,e.call(this,r),n)}}function xu(t,e,n){var r,i;function a(){var o=e.apply(this,arguments);return o!==i&&(r=(i=o)&&wu(t,o,n)),r}return a._value=e,a}function bu(t,e,n){var r="style."+(t+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(e==null)return this.tween(r,null);if(typeof e!="function")throw new Error;return this.tween(r,xu(t,e,n??""))}function Tu(t){return function(){this.textContent=t}}function Mu(t){return function(){var e=t(this);this.textContent=e??""}}function Au(t){return this.tween("text",typeof t=="function"?Mu(ci(this,"text",t)):Tu(t==null?"":t+""))}function ku(t){return function(e){this.textContent=t.call(this,e)}}function Cu(t){var e,n;function r(){var i=t.apply(this,arguments);return i!==n&&(e=(n=i)&&ku(i)),e}return r._value=t,r}function Su(t){var e="text";if(arguments.length<1)return(e=this.tween(e))&&e._value;if(t==null)return this.tween(e,null);if(typeof t!="function")throw new Error;return this.tween(e,Cu(t))}function Du(){for(var t=this._name,e=this._id,n=Oa(),r=this._groups,i=r.length,a=0;a<i;++a)for(var o=r[a],s=o.length,c,u=0;u<s;++u)if(c=o[u]){var f=te(c,e);Kn(c,t,n,u,o,{time:f.time+f.delay+f.duration,delay:0,duration:f.duration,ease:f.ease})}return new de(r,this._parents,t,n)}function Nu(){var t,e,n=this,r=n._id,i=n.size();return new Promise(function(a,o){var s={value:o},c={value:function(){--i===0&&a()}};n.each(function(){var u=ae(this,r),f=u.on;f!==t&&(e=(t=f).copy(),e._.cancel.push(s),e._.interrupt.push(s),e._.end.push(c)),u.on=e}),i===0&&a()})}var Fu=0;function de(t,e,n,r){this._groups=t,this._parents=e,this._name=n,this._id=r}function Oa(){return++Fu}var ce=mn.prototype;de.prototype={constructor:de,select:fu,selectAll:hu,selectChild:ce.selectChild,selectChildren:ce.selectChildren,filter:iu,merge:au,selection:vu,transition:Du,call:ce.call,nodes:ce.nodes,node:ce.node,size:ce.size,empty:ce.empty,each:ce.each,on:lu,attr:Wc,attrTween:Xc,style:_u,styleTween:bu,text:Au,textTween:Su,remove:uu,tween:Yc,delay:Qc,duration:$c,ease:eu,easeVarying:ru,end:Nu,[Symbol.iterator]:ce[Symbol.iterator]};function Lu(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}var Uu={time:null,delay:0,duration:250,ease:Lu};function Eu(t,e){for(var n;!(n=t.__transition)||!(n=n[e]);)if(!(t=t.parentNode))throw new Error(`transition ${e} not found`);return n}function Yu(t){var e,n;t instanceof de?(e=t._id,t=t._name):(e=Oa(),(n=Uu).time=si(),t=t==null?null:t+"");for(var r=this._groups,i=r.length,a=0;a<i;++a)for(var o=r[a],s=o.length,c,u=0;u<s;++u)(c=o[u])&&Kn(c,t,e,u,o,n||Eu(c,e));return new de(r,this._parents,t,e)}mn.prototype.interrupt=Lc;mn.prototype.transition=Yu;const Zr=Math.PI,Jr=2*Zr,Ce=1e-6,Ou=Jr-Ce;function Ra(t){this._+=t[0];for(let e=1,n=t.length;e<n;++e)this._+=arguments[e]+t[e]}function Ru(t){let e=Math.floor(t);if(!(e>=0))throw new Error(`invalid digits: ${t}`);if(e>15)return Ra;const n=10**e;return function(r){this._+=r[0];for(let i=1,a=r.length;i<a;++i)this._+=Math.round(arguments[i]*n)/n+r[i]}}class Hu{constructor(e){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=e==null?Ra:Ru(e)}moveTo(e,n){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(e,n){this._append`L${this._x1=+e},${this._y1=+n}`}quadraticCurveTo(e,n,r,i){this._append`Q${+e},${+n},${this._x1=+r},${this._y1=+i}`}bezierCurveTo(e,n,r,i,a,o){this._append`C${+e},${+n},${+r},${+i},${this._x1=+a},${this._y1=+o}`}arcTo(e,n,r,i,a){if(e=+e,n=+n,r=+r,i=+i,a=+a,a<0)throw new Error(`negative radius: ${a}`);let o=this._x1,s=this._y1,c=r-e,u=i-n,f=o-e,h=s-n,d=f*f+h*h;if(this._x1===null)this._append`M${this._x1=e},${this._y1=n}`;else if(d>Ce)if(!(Math.abs(h*c-u*f)>Ce)||!a)this._append`L${this._x1=e},${this._y1=n}`;else{let v=r-o,x=i-s,k=c*c+u*u,R=v*v+x*x,F=Math.sqrt(k),P=Math.sqrt(d),H=a*Math.tan((Zr-Math.acos((k+d-R)/(2*F*P)))/2),E=H/P,U=H/F;Math.abs(E-1)>Ce&&this._append`L${e+E*f},${n+E*h}`,this._append`A${a},${a},0,0,${+(h*v>f*x)},${this._x1=e+U*c},${this._y1=n+U*u}`}}arc(e,n,r,i,a,o){if(e=+e,n=+n,r=+r,o=!!o,r<0)throw new Error(`negative radius: ${r}`);let s=r*Math.cos(i),c=r*Math.sin(i),u=e+s,f=n+c,h=1^o,d=o?i-a:a-i;this._x1===null?this._append`M${u},${f}`:(Math.abs(this._x1-u)>Ce||Math.abs(this._y1-f)>Ce)&&this._append`L${u},${f}`,r&&(d<0&&(d=d%Jr+Jr),d>Ou?this._append`A${r},${r},0,1,${h},${e-s},${n-c}A${r},${r},0,1,${h},${this._x1=u},${this._y1=f}`:d>Ce&&this._append`A${r},${r},0,${+(d>=Zr)},${h},${this._x1=e+r*Math.cos(a)},${this._y1=n+r*Math.sin(a)}`)}rect(e,n,r,i){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}h${r=+r}v${+i}h${-r}Z`}toString(){return this._}}function Iu(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)}function zn(t,e){if((n=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var n,r=t.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+t.slice(n+1)]}function Ze(t){return t=zn(Math.abs(t)),t?t[1]:NaN}function Pu(t,e){return function(n,r){for(var i=n.length,a=[],o=0,s=t[0],c=0;i>0&&s>0&&(c+s+1>r&&(s=Math.max(1,r-c)),a.push(n.substring(i-=s,i+s)),!((c+=s+1)>r));)s=t[o=(o+1)%t.length];return a.reverse().join(e)}}function zu(t){return function(e){return e.replace(/[0-9]/g,function(n){return t[+n]})}}var Wu=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Wn(t){if(!(e=Wu.exec(t)))throw new Error("invalid format: "+t);var e;return new ui({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}Wn.prototype=ui.prototype;function ui(t){this.fill=t.fill===void 0?" ":t.fill+"",this.align=t.align===void 0?">":t.align+"",this.sign=t.sign===void 0?"-":t.sign+"",this.symbol=t.symbol===void 0?"":t.symbol+"",this.zero=!!t.zero,this.width=t.width===void 0?void 0:+t.width,this.comma=!!t.comma,this.precision=t.precision===void 0?void 0:+t.precision,this.trim=!!t.trim,this.type=t.type===void 0?"":t.type+""}ui.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function Vu(t){t:for(var e=t.length,n=1,r=-1,i;n<e;++n)switch(t[n]){case".":r=i=n;break;case"0":r===0&&(r=n),i=n;break;default:if(!+t[n])break t;r>0&&(r=0);break}return r>0?t.slice(0,r)+t.slice(i+1):t}var Ha;function Bu(t,e){var n=zn(t,e);if(!n)return t+"";var r=n[0],i=n[1],a=i-(Ha=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,o=r.length;return a===o?r:a>o?r+new Array(a-o+1).join("0"):a>0?r.slice(0,a)+"."+r.slice(a):"0."+new Array(1-a).join("0")+zn(t,Math.max(0,e+a-1))[0]}function Ii(t,e){var n=zn(t,e);if(!n)return t+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}const Pi={"%":(t,e)=>(t*100).toFixed(e),b:t=>Math.round(t).toString(2),c:t=>t+"",d:Iu,e:(t,e)=>t.toExponential(e),f:(t,e)=>t.toFixed(e),g:(t,e)=>t.toPrecision(e),o:t=>Math.round(t).toString(8),p:(t,e)=>Ii(t*100,e),r:Ii,s:Bu,X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function zi(t){return t}var Wi=Array.prototype.map,Vi=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function Gu(t){var e=t.grouping===void 0||t.thousands===void 0?zi:Pu(Wi.call(t.grouping,Number),t.thousands+""),n=t.currency===void 0?"":t.currency[0]+"",r=t.currency===void 0?"":t.currency[1]+"",i=t.decimal===void 0?".":t.decimal+"",a=t.numerals===void 0?zi:zu(Wi.call(t.numerals,String)),o=t.percent===void 0?"%":t.percent+"",s=t.minus===void 0?"−":t.minus+"",c=t.nan===void 0?"NaN":t.nan+"";function u(h){h=Wn(h);var d=h.fill,v=h.align,x=h.sign,k=h.symbol,R=h.zero,F=h.width,P=h.comma,H=h.precision,E=h.trim,U=h.type;U==="n"?(P=!0,U="g"):Pi[U]||(H===void 0&&(H=12),E=!0,U="g"),(R||d==="0"&&v==="=")&&(R=!0,d="0",v="=");var A=k==="$"?n:k==="#"&&/[boxX]/.test(U)?"0"+U.toLowerCase():"",B=k==="$"?r:/[%p]/.test(U)?o:"",J=Pi[U],ft=/[defgprs%]/.test(U);H=H===void 0?6:/[gprs]/.test(U)?Math.max(1,Math.min(21,H)):Math.max(0,Math.min(20,H));function lt(L){var V=A,M=B,W,j,O;if(U==="c")M=J(L)+M,L="";else{L=+L;var N=L<0||1/L<0;if(L=isNaN(L)?c:J(Math.abs(L),H),E&&(L=Vu(L)),N&&+L==0&&x!=="+"&&(N=!1),V=(N?x==="("?x:s:x==="-"||x==="("?"":x)+V,M=(U==="s"?Vi[8+Ha/3]:"")+M+(N&&x==="("?")":""),ft){for(W=-1,j=L.length;++W<j;)if(O=L.charCodeAt(W),48>O||O>57){M=(O===46?i+L.slice(W+1):L.slice(W))+M,L=L.slice(0,W);break}}}P&&!R&&(L=e(L,1/0));var Y=V.length+L.length+M.length,D=Y<F?new Array(F-Y+1).join(d):"";switch(P&&R&&(L=e(D+L,D.length?F-M.length:1/0),D=""),v){case"<":L=V+L+M+D;break;case"=":L=V+D+L+M;break;case"^":L=D.slice(0,Y=D.length>>1)+V+L+M+D.slice(Y);break;default:L=D+V+L+M;break}return a(L)}return lt.toString=function(){return h+""},lt}function f(h,d){var v=u((h=Wn(h),h.type="f",h)),x=Math.max(-8,Math.min(8,Math.floor(Ze(d)/3)))*3,k=Math.pow(10,-x),R=Vi[8+x/3];return function(F){return v(k*F)+R}}return{format:u,formatPrefix:f}}var Tn,Ia,Pa;qu({thousands:",",grouping:[3],currency:["$",""]});function qu(t){return Tn=Gu(t),Ia=Tn.format,Pa=Tn.formatPrefix,Tn}function Xu(t){return Math.max(0,-Ze(Math.abs(t)))}function Zu(t,e){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(Ze(e)/3)))*3-Ze(Math.abs(t)))}function Ju(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,Ze(e)-Ze(t))+1}function jn(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t);break}return this}const Bi=Symbol("implicit");function pn(){var t=new Hr,e=[],n=[],r=Bi;function i(a){let o=t.get(a);if(o===void 0){if(r!==Bi)return r;t.set(a,o=e.push(a)-1)}return n[o%n.length]}return i.domain=function(a){if(!arguments.length)return e.slice();e=[],t=new Hr;for(const o of a)t.has(o)||t.set(o,e.push(o)-1);return i},i.range=function(a){return arguments.length?(n=Array.from(a),i):n.slice()},i.unknown=function(a){return arguments.length?(r=a,i):r},i.copy=function(){return pn(e,n).unknown(r)},jn.apply(i,arguments),i}function Vn(){var t=pn().unknown(void 0),e=t.domain,n=t.range,r=0,i=1,a,o,s=!1,c=0,u=0,f=.5;delete t.unknown;function h(){var d=e().length,v=i<r,x=v?i:r,k=v?r:i;a=(k-x)/Math.max(1,d-c+u*2),s&&(a=Math.floor(a)),x+=(k-x-a*(d-c))*f,o=a*(1-c),s&&(x=Math.round(x),o=Math.round(o));var R=ds(d).map(function(F){return x+a*F});return n(v?R.reverse():R)}return t.domain=function(d){return arguments.length?(e(d),h()):e()},t.range=function(d){return arguments.length?([r,i]=d,r=+r,i=+i,h()):[r,i]},t.rangeRound=function(d){return[r,i]=d,r=+r,i=+i,s=!0,h()},t.bandwidth=function(){return o},t.step=function(){return a},t.round=function(d){return arguments.length?(s=!!d,h()):s},t.padding=function(d){return arguments.length?(c=Math.min(1,u=+d),h()):c},t.paddingInner=function(d){return arguments.length?(c=Math.min(1,d),h()):c},t.paddingOuter=function(d){return arguments.length?(u=+d,h()):u},t.align=function(d){return arguments.length?(f=Math.max(0,Math.min(1,d)),h()):f},t.copy=function(){return Vn(e(),[r,i]).round(s).paddingInner(c).paddingOuter(u).align(f)},jn.apply(h(),arguments)}function Qu(t){return function(){return t}}function Ku(t){return+t}var Gi=[0,1];function We(t){return t}function Qr(t,e){return(e-=t=+t)?function(n){return(n-t)/e}:Qu(isNaN(e)?NaN:.5)}function ju(t,e){var n;return t>e&&(n=t,t=e,e=n),function(r){return Math.max(t,Math.min(e,r))}}function $u(t,e,n){var r=t[0],i=t[1],a=e[0],o=e[1];return i<r?(r=Qr(i,r),a=n(o,a)):(r=Qr(r,i),a=n(a,o)),function(s){return a(r(s))}}function tf(t,e,n){var r=Math.min(t.length,e.length)-1,i=new Array(r),a=new Array(r),o=-1;for(t[r]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++o<r;)i[o]=Qr(t[o],t[o+1]),a[o]=n(e[o],e[o+1]);return function(s){var c=es(t,s,1,r)-1;return a[c](i[c](s))}}function za(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function ef(){var t=Gi,e=Gi,n=oi,r,i,a,o=We,s,c,u;function f(){var d=Math.min(t.length,e.length);return o!==We&&(o=ju(t[0],t[d-1])),s=d>2?tf:$u,c=u=null,h}function h(d){return d==null||isNaN(d=+d)?a:(c||(c=s(t.map(r),e,n)))(r(o(d)))}return h.invert=function(d){return o(i((u||(u=s(e,t.map(r),Kt)))(d)))},h.domain=function(d){return arguments.length?(t=Array.from(d,Ku),f()):t.slice()},h.range=function(d){return arguments.length?(e=Array.from(d),f()):e.slice()},h.rangeRound=function(d){return e=Array.from(d),n=_c,f()},h.clamp=function(d){return arguments.length?(o=d?!0:We,f()):o!==We},h.interpolate=function(d){return arguments.length?(n=d,f()):n},h.unknown=function(d){return arguments.length?(a=d,h):a},function(d,v){return r=d,i=v,f()}}function Wa(){return ef()(We,We)}function nf(t,e,n,r){var i=Pr(t,e,n),a;switch(r=Wn(r??",f"),r.type){case"s":{var o=Math.max(Math.abs(t),Math.abs(e));return r.precision==null&&!isNaN(a=Zu(i,o))&&(r.precision=a),Pa(r,o)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(a=Ju(i,Math.max(Math.abs(t),Math.abs(e))))&&(r.precision=a-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(a=Xu(i))&&(r.precision=a-(r.type==="%")*2);break}}return Ia(r)}function rf(t){var e=t.domain;return t.ticks=function(n){var r=e();return hs(r[0],r[r.length-1],n??10)},t.tickFormat=function(n,r){var i=e();return nf(i[0],i[i.length-1],n??10,r)},t.nice=function(n){n==null&&(n=10);var r=e(),i=0,a=r.length-1,o=r[i],s=r[a],c,u,f=10;for(s<o&&(u=o,o=s,s=u,u=i,i=a,a=u);f-- >0;){if(u=Ir(o,s,n),u===c)return r[i]=o,r[a]=s,e(r);if(u>0)o=Math.floor(o/u)*u,s=Math.ceil(s/u)*u;else if(u<0)o=Math.ceil(o*u)/u,s=Math.floor(s*u)/u;else break;c=u}return t},t}function fn(){var t=Wa();return t.copy=function(){return za(t,fn())},jn.apply(t,arguments),rf(t)}function af(t,e){t=t.slice();var n=0,r=t.length-1,i=t[n],a=t[r],o;return a<i&&(o=n,n=r,r=o,o=i,i=a,a=o),t[n]=e.floor(i),t[r]=e.ceil(a),t}const Fr=new Date,Lr=new Date;function Mt(t,e,n,r){function i(a){return t(a=arguments.length===0?new Date:new Date(+a)),a}return i.floor=a=>(t(a=new Date(+a)),a),i.ceil=a=>(t(a=new Date(a-1)),e(a,1),t(a),a),i.round=a=>{const o=i(a),s=i.ceil(a);return a-o<s-a?o:s},i.offset=(a,o)=>(e(a=new Date(+a),o==null?1:Math.floor(o)),a),i.range=(a,o,s)=>{const c=[];if(a=i.ceil(a),s=s==null?1:Math.floor(s),!(a<o)||!(s>0))return c;let u;do c.push(u=new Date(+a)),e(a,s),t(a);while(u<a&&a<o);return c},i.filter=a=>Mt(o=>{if(o>=o)for(;t(o),!a(o);)o.setTime(o-1)},(o,s)=>{if(o>=o)if(s<0)for(;++s<=0;)for(;e(o,-1),!a(o););else for(;--s>=0;)for(;e(o,1),!a(o););}),n&&(i.count=(a,o)=>(Fr.setTime(+a),Lr.setTime(+o),t(Fr),t(Lr),Math.floor(n(Fr,Lr))),i.every=a=>(a=Math.floor(a),!isFinite(a)||!(a>0)?null:a>1?i.filter(r?o=>r(o)%a===0:o=>i.count(0,o)%a===0):i)),i}const Bn=Mt(()=>{},(t,e)=>{t.setTime(+t+e)},(t,e)=>e-t);Bn.every=t=>(t=Math.floor(t),!isFinite(t)||!(t>0)?null:t>1?Mt(e=>{e.setTime(Math.floor(e/t)*t)},(e,n)=>{e.setTime(+e+n*t)},(e,n)=>(n-e)/t):Bn);Bn.range;const fe=1e3,Jt=fe*60,he=Jt*60,ve=he*24,fi=ve*7,qi=ve*30,Ur=ve*365,Ve=Mt(t=>{t.setTime(t-t.getMilliseconds())},(t,e)=>{t.setTime(+t+e*fe)},(t,e)=>(e-t)/fe,t=>t.getUTCSeconds());Ve.range;const hi=Mt(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*fe)},(t,e)=>{t.setTime(+t+e*Jt)},(t,e)=>(e-t)/Jt,t=>t.getMinutes());hi.range;const of=Mt(t=>{t.setUTCSeconds(0,0)},(t,e)=>{t.setTime(+t+e*Jt)},(t,e)=>(e-t)/Jt,t=>t.getUTCMinutes());of.range;const di=Mt(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*fe-t.getMinutes()*Jt)},(t,e)=>{t.setTime(+t+e*he)},(t,e)=>(e-t)/he,t=>t.getHours());di.range;const sf=Mt(t=>{t.setUTCMinutes(0,0,0)},(t,e)=>{t.setTime(+t+e*he)},(t,e)=>(e-t)/he,t=>t.getUTCHours());sf.range;const _n=Mt(t=>t.setHours(0,0,0,0),(t,e)=>t.setDate(t.getDate()+e),(t,e)=>(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*Jt)/ve,t=>t.getDate()-1);_n.range;const vi=Mt(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/ve,t=>t.getUTCDate()-1);vi.range;const lf=Mt(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/ve,t=>Math.floor(t/ve));lf.range;function Ee(t){return Mt(e=>{e.setDate(e.getDate()-(e.getDay()+7-t)%7),e.setHours(0,0,0,0)},(e,n)=>{e.setDate(e.getDate()+n*7)},(e,n)=>(n-e-(n.getTimezoneOffset()-e.getTimezoneOffset())*Jt)/fi)}const $n=Ee(0),Gn=Ee(1),cf=Ee(2),uf=Ee(3),Je=Ee(4),ff=Ee(5),hf=Ee(6);$n.range;Gn.range;cf.range;uf.range;Je.range;ff.range;hf.range;function Ye(t){return Mt(e=>{e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-t)%7),e.setUTCHours(0,0,0,0)},(e,n)=>{e.setUTCDate(e.getUTCDate()+n*7)},(e,n)=>(n-e)/fi)}const Va=Ye(0),qn=Ye(1),df=Ye(2),vf=Ye(3),Qe=Ye(4),gf=Ye(5),mf=Ye(6);Va.range;qn.range;df.range;vf.range;Qe.range;gf.range;mf.range;const gi=Mt(t=>{t.setDate(1),t.setHours(0,0,0,0)},(t,e)=>{t.setMonth(t.getMonth()+e)},(t,e)=>e.getMonth()-t.getMonth()+(e.getFullYear()-t.getFullYear())*12,t=>t.getMonth());gi.range;const yf=Mt(t=>{t.setUTCDate(1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCMonth(t.getUTCMonth()+e)},(t,e)=>e.getUTCMonth()-t.getUTCMonth()+(e.getUTCFullYear()-t.getUTCFullYear())*12,t=>t.getUTCMonth());yf.range;const ge=Mt(t=>{t.setMonth(0,1),t.setHours(0,0,0,0)},(t,e)=>{t.setFullYear(t.getFullYear()+e)},(t,e)=>e.getFullYear()-t.getFullYear(),t=>t.getFullYear());ge.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:Mt(e=>{e.setFullYear(Math.floor(e.getFullYear()/t)*t),e.setMonth(0,1),e.setHours(0,0,0,0)},(e,n)=>{e.setFullYear(e.getFullYear()+n*t)});ge.range;const Ue=Mt(t=>{t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCFullYear(t.getUTCFullYear()+e)},(t,e)=>e.getUTCFullYear()-t.getUTCFullYear(),t=>t.getUTCFullYear());Ue.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:Mt(e=>{e.setUTCFullYear(Math.floor(e.getUTCFullYear()/t)*t),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,n)=>{e.setUTCFullYear(e.getUTCFullYear()+n*t)});Ue.range;function pf(t,e,n,r,i,a){const o=[[Ve,1,fe],[Ve,5,5*fe],[Ve,15,15*fe],[Ve,30,30*fe],[a,1,Jt],[a,5,5*Jt],[a,15,15*Jt],[a,30,30*Jt],[i,1,he],[i,3,3*he],[i,6,6*he],[i,12,12*he],[r,1,ve],[r,2,2*ve],[n,1,fi],[e,1,qi],[e,3,3*qi],[t,1,Ur]];function s(u,f,h){const d=f<u;d&&([u,f]=[f,u]);const v=h&&typeof h.range=="function"?h:c(u,f,h),x=v?v.range(u,+f+1):[];return d?x.reverse():x}function c(u,f,h){const d=Math.abs(f-u)/h,v=ei(([,,R])=>R).right(o,d);if(v===o.length)return t.every(Pr(u/Ur,f/Ur,h));if(v===0)return Bn.every(Math.max(Pr(u,f,h),1));const[x,k]=o[d/o[v-1][2]<o[v][2]/d?v-1:v];return x.every(k)}return[s,c]}const[_f,wf]=pf(ge,gi,$n,_n,di,hi);function Er(t){if(0<=t.y&&t.y<100){var e=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return e.setFullYear(t.y),e}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function Yr(t){if(0<=t.y&&t.y<100){var e=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return e.setUTCFullYear(t.y),e}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function en(t,e,n){return{y:t,m:e,d:n,H:0,M:0,S:0,L:0}}function xf(t){var e=t.dateTime,n=t.date,r=t.time,i=t.periods,a=t.days,o=t.shortDays,s=t.months,c=t.shortMonths,u=nn(i),f=rn(i),h=nn(a),d=rn(a),v=nn(o),x=rn(o),k=nn(s),R=rn(s),F=nn(c),P=rn(c),H={a:N,A:Y,b:D,B:Q,c:null,d:ji,e:ji,f:Bf,g:th,G:nh,H:zf,I:Wf,j:Vf,L:Ba,m:Gf,M:qf,p:rt,q:ct,Q:ea,s:na,S:Xf,u:Zf,U:Jf,V:Qf,w:Kf,W:jf,x:null,X:null,y:$f,Y:eh,Z:rh,"%":ta},E={a:$,A:it,b:at,B:Et,c:null,d:$i,e:$i,f:sh,g:yh,G:_h,H:ih,I:ah,j:oh,L:qa,m:lh,M:ch,p:bt,q:ee,Q:ea,s:na,S:uh,u:fh,U:hh,V:dh,w:vh,W:gh,x:null,X:null,y:mh,Y:ph,Z:wh,"%":ta},U={a:lt,A:L,b:V,B:M,c:W,d:Qi,e:Qi,f:Rf,g:Ji,G:Zi,H:Ki,I:Ki,j:Uf,L:Of,m:Lf,M:Ef,p:ft,q:Ff,Q:If,s:Pf,S:Yf,u:kf,U:Cf,V:Sf,w:Af,W:Df,x:j,X:O,y:Ji,Y:Zi,Z:Nf,"%":Hf};H.x=A(n,H),H.X=A(r,H),H.c=A(e,H),E.x=A(n,E),E.X=A(r,E),E.c=A(e,E);function A(S,X){return function(Z){var _=[],At=-1,ut=0,Nt=S.length,Ft,Qt,Oe;for(Z instanceof Date||(Z=new Date(+Z));++At<Nt;)S.charCodeAt(At)===37&&(_.push(S.slice(ut,At)),(Qt=Xi[Ft=S.charAt(++At)])!=null?Ft=S.charAt(++At):Qt=Ft==="e"?" ":"0",(Oe=X[Ft])&&(Ft=Oe(Z,Qt)),_.push(Ft),ut=At+1);return _.push(S.slice(ut,At)),_.join("")}}function B(S,X){return function(Z){var _=en(1900,void 0,1),At=J(_,S,Z+="",0),ut,Nt;if(At!=Z.length)return null;if("Q"in _)return new Date(_.Q);if("s"in _)return new Date(_.s*1e3+("L"in _?_.L:0));if(X&&!("Z"in _)&&(_.Z=0),"p"in _&&(_.H=_.H%12+_.p*12),_.m===void 0&&(_.m="q"in _?_.q:0),"V"in _){if(_.V<1||_.V>53)return null;"w"in _||(_.w=1),"Z"in _?(ut=Yr(en(_.y,0,1)),Nt=ut.getUTCDay(),ut=Nt>4||Nt===0?qn.ceil(ut):qn(ut),ut=vi.offset(ut,(_.V-1)*7),_.y=ut.getUTCFullYear(),_.m=ut.getUTCMonth(),_.d=ut.getUTCDate()+(_.w+6)%7):(ut=Er(en(_.y,0,1)),Nt=ut.getDay(),ut=Nt>4||Nt===0?Gn.ceil(ut):Gn(ut),ut=_n.offset(ut,(_.V-1)*7),_.y=ut.getFullYear(),_.m=ut.getMonth(),_.d=ut.getDate()+(_.w+6)%7)}else("W"in _||"U"in _)&&("w"in _||(_.w="u"in _?_.u%7:"W"in _?1:0),Nt="Z"in _?Yr(en(_.y,0,1)).getUTCDay():Er(en(_.y,0,1)).getDay(),_.m=0,_.d="W"in _?(_.w+6)%7+_.W*7-(Nt+5)%7:_.w+_.U*7-(Nt+6)%7);return"Z"in _?(_.H+=_.Z/100|0,_.M+=_.Z%100,Yr(_)):Er(_)}}function J(S,X,Z,_){for(var At=0,ut=X.length,Nt=Z.length,Ft,Qt;At<ut;){if(_>=Nt)return-1;if(Ft=X.charCodeAt(At++),Ft===37){if(Ft=X.charAt(At++),Qt=U[Ft in Xi?X.charAt(At++):Ft],!Qt||(_=Qt(S,Z,_))<0)return-1}else if(Ft!=Z.charCodeAt(_++))return-1}return _}function ft(S,X,Z){var _=u.exec(X.slice(Z));return _?(S.p=f.get(_[0].toLowerCase()),Z+_[0].length):-1}function lt(S,X,Z){var _=v.exec(X.slice(Z));return _?(S.w=x.get(_[0].toLowerCase()),Z+_[0].length):-1}function L(S,X,Z){var _=h.exec(X.slice(Z));return _?(S.w=d.get(_[0].toLowerCase()),Z+_[0].length):-1}function V(S,X,Z){var _=F.exec(X.slice(Z));return _?(S.m=P.get(_[0].toLowerCase()),Z+_[0].length):-1}function M(S,X,Z){var _=k.exec(X.slice(Z));return _?(S.m=R.get(_[0].toLowerCase()),Z+_[0].length):-1}function W(S,X,Z){return J(S,e,X,Z)}function j(S,X,Z){return J(S,n,X,Z)}function O(S,X,Z){return J(S,r,X,Z)}function N(S){return o[S.getDay()]}function Y(S){return a[S.getDay()]}function D(S){return c[S.getMonth()]}function Q(S){return s[S.getMonth()]}function rt(S){return i[+(S.getHours()>=12)]}function ct(S){return 1+~~(S.getMonth()/3)}function $(S){return o[S.getUTCDay()]}function it(S){return a[S.getUTCDay()]}function at(S){return c[S.getUTCMonth()]}function Et(S){return s[S.getUTCMonth()]}function bt(S){return i[+(S.getUTCHours()>=12)]}function ee(S){return 1+~~(S.getUTCMonth()/3)}return{format:function(S){var X=A(S+="",H);return X.toString=function(){return S},X},parse:function(S){var X=B(S+="",!1);return X.toString=function(){return S},X},utcFormat:function(S){var X=A(S+="",E);return X.toString=function(){return S},X},utcParse:function(S){var X=B(S+="",!0);return X.toString=function(){return S},X}}}var Xi={"-":"",_:" ",0:"0"},Dt=/^\s*\d+/,bf=/^%/,Tf=/[\\^$*+?|[\]().{}]/g;function ot(t,e,n){var r=t<0?"-":"",i=(r?-t:t)+"",a=i.length;return r+(a<n?new Array(n-a+1).join(e)+i:i)}function Mf(t){return t.replace(Tf,"\\$&")}function nn(t){return new RegExp("^(?:"+t.map(Mf).join("|")+")","i")}function rn(t){return new Map(t.map((e,n)=>[e.toLowerCase(),n]))}function Af(t,e,n){var r=Dt.exec(e.slice(n,n+1));return r?(t.w=+r[0],n+r[0].length):-1}function kf(t,e,n){var r=Dt.exec(e.slice(n,n+1));return r?(t.u=+r[0],n+r[0].length):-1}function Cf(t,e,n){var r=Dt.exec(e.slice(n,n+2));return r?(t.U=+r[0],n+r[0].length):-1}function Sf(t,e,n){var r=Dt.exec(e.slice(n,n+2));return r?(t.V=+r[0],n+r[0].length):-1}function Df(t,e,n){var r=Dt.exec(e.slice(n,n+2));return r?(t.W=+r[0],n+r[0].length):-1}function Zi(t,e,n){var r=Dt.exec(e.slice(n,n+4));return r?(t.y=+r[0],n+r[0].length):-1}function Ji(t,e,n){var r=Dt.exec(e.slice(n,n+2));return r?(t.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function Nf(t,e,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(e.slice(n,n+6));return r?(t.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function Ff(t,e,n){var r=Dt.exec(e.slice(n,n+1));return r?(t.q=r[0]*3-3,n+r[0].length):-1}function Lf(t,e,n){var r=Dt.exec(e.slice(n,n+2));return r?(t.m=r[0]-1,n+r[0].length):-1}function Qi(t,e,n){var r=Dt.exec(e.slice(n,n+2));return r?(t.d=+r[0],n+r[0].length):-1}function Uf(t,e,n){var r=Dt.exec(e.slice(n,n+3));return r?(t.m=0,t.d=+r[0],n+r[0].length):-1}function Ki(t,e,n){var r=Dt.exec(e.slice(n,n+2));return r?(t.H=+r[0],n+r[0].length):-1}function Ef(t,e,n){var r=Dt.exec(e.slice(n,n+2));return r?(t.M=+r[0],n+r[0].length):-1}function Yf(t,e,n){var r=Dt.exec(e.slice(n,n+2));return r?(t.S=+r[0],n+r[0].length):-1}function Of(t,e,n){var r=Dt.exec(e.slice(n,n+3));return r?(t.L=+r[0],n+r[0].length):-1}function Rf(t,e,n){var r=Dt.exec(e.slice(n,n+6));return r?(t.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function Hf(t,e,n){var r=bf.exec(e.slice(n,n+1));return r?n+r[0].length:-1}function If(t,e,n){var r=Dt.exec(e.slice(n));return r?(t.Q=+r[0],n+r[0].length):-1}function Pf(t,e,n){var r=Dt.exec(e.slice(n));return r?(t.s=+r[0],n+r[0].length):-1}function ji(t,e){return ot(t.getDate(),e,2)}function zf(t,e){return ot(t.getHours(),e,2)}function Wf(t,e){return ot(t.getHours()%12||12,e,2)}function Vf(t,e){return ot(1+_n.count(ge(t),t),e,3)}function Ba(t,e){return ot(t.getMilliseconds(),e,3)}function Bf(t,e){return Ba(t,e)+"000"}function Gf(t,e){return ot(t.getMonth()+1,e,2)}function qf(t,e){return ot(t.getMinutes(),e,2)}function Xf(t,e){return ot(t.getSeconds(),e,2)}function Zf(t){var e=t.getDay();return e===0?7:e}function Jf(t,e){return ot($n.count(ge(t)-1,t),e,2)}function Ga(t){var e=t.getDay();return e>=4||e===0?Je(t):Je.ceil(t)}function Qf(t,e){return t=Ga(t),ot(Je.count(ge(t),t)+(ge(t).getDay()===4),e,2)}function Kf(t){return t.getDay()}function jf(t,e){return ot(Gn.count(ge(t)-1,t),e,2)}function $f(t,e){return ot(t.getFullYear()%100,e,2)}function th(t,e){return t=Ga(t),ot(t.getFullYear()%100,e,2)}function eh(t,e){return ot(t.getFullYear()%1e4,e,4)}function nh(t,e){var n=t.getDay();return t=n>=4||n===0?Je(t):Je.ceil(t),ot(t.getFullYear()%1e4,e,4)}function rh(t){var e=t.getTimezoneOffset();return(e>0?"-":(e*=-1,"+"))+ot(e/60|0,"0",2)+ot(e%60,"0",2)}function $i(t,e){return ot(t.getUTCDate(),e,2)}function ih(t,e){return ot(t.getUTCHours(),e,2)}function ah(t,e){return ot(t.getUTCHours()%12||12,e,2)}function oh(t,e){return ot(1+vi.count(Ue(t),t),e,3)}function qa(t,e){return ot(t.getUTCMilliseconds(),e,3)}function sh(t,e){return qa(t,e)+"000"}function lh(t,e){return ot(t.getUTCMonth()+1,e,2)}function ch(t,e){return ot(t.getUTCMinutes(),e,2)}function uh(t,e){return ot(t.getUTCSeconds(),e,2)}function fh(t){var e=t.getUTCDay();return e===0?7:e}function hh(t,e){return ot(Va.count(Ue(t)-1,t),e,2)}function Xa(t){var e=t.getUTCDay();return e>=4||e===0?Qe(t):Qe.ceil(t)}function dh(t,e){return t=Xa(t),ot(Qe.count(Ue(t),t)+(Ue(t).getUTCDay()===4),e,2)}function vh(t){return t.getUTCDay()}function gh(t,e){return ot(qn.count(Ue(t)-1,t),e,2)}function mh(t,e){return ot(t.getUTCFullYear()%100,e,2)}function yh(t,e){return t=Xa(t),ot(t.getUTCFullYear()%100,e,2)}function ph(t,e){return ot(t.getUTCFullYear()%1e4,e,4)}function _h(t,e){var n=t.getUTCDay();return t=n>=4||n===0?Qe(t):Qe.ceil(t),ot(t.getUTCFullYear()%1e4,e,4)}function wh(){return"+0000"}function ta(){return"%"}function ea(t){return+t}function na(t){return Math.floor(+t/1e3)}var Pe,pe,hn;xh({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function xh(t){return Pe=xf(t),pe=Pe.format,hn=Pe.parse,Pe.utcFormat,Pe.utcParse,Pe}function bh(t){return new Date(t)}function Th(t){return t instanceof Date?+t:+new Date(+t)}function Za(t,e,n,r,i,a,o,s,c,u){var f=Wa(),h=f.invert,d=f.domain,v=u(".%L"),x=u(":%S"),k=u("%I:%M"),R=u("%I %p"),F=u("%a %d"),P=u("%b %d"),H=u("%B"),E=u("%Y");function U(A){return(c(A)<A?v:s(A)<A?x:o(A)<A?k:a(A)<A?R:r(A)<A?i(A)<A?F:P:n(A)<A?H:E)(A)}return f.invert=function(A){return new Date(h(A))},f.domain=function(A){return arguments.length?d(Array.from(A,Th)):d().map(bh)},f.ticks=function(A){var B=d();return t(B[0],B[B.length-1],A??10)},f.tickFormat=function(A,B){return B==null?U:u(B)},f.nice=function(A){var B=d();return(!A||typeof A.range!="function")&&(A=e(B[0],B[B.length-1],A??10)),A?d(af(B,A)):f},f.copy=function(){return za(f,Za(t,e,n,r,i,a,o,s,c,u))},f}function Mh(){return jn.apply(Za(_f,wf,ge,gi,$n,_n,di,hi,Ve,pe).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function Ja(t){for(var e=t.length/6|0,n=new Array(e),r=0;r<e;)n[r]="#"+t.slice(r*6,++r*6);return n}const Ah=Ja("1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf"),kh=Ja("4e79a7f28e2ce1575976b7b259a14fedc949af7aa1ff9da79c755fbab0ab");function dt(t){return function(){return t}}const ra=Math.abs,Rt=Math.atan2,ke=Math.cos,Ch=Math.max,Or=Math.min,ne=Math.sin,Be=Math.sqrt,Vt=1e-12,dn=Math.PI,Xn=dn/2,Fn=2*dn;function Sh(t){return t>1?0:t<-1?dn:Math.acos(t)}function ia(t){return t>=1?Xn:t<=-1?-Xn:Math.asin(t)}function Qa(t){let e=3;return t.digits=function(n){if(!arguments.length)return e;if(n==null)e=null;else{const r=Math.floor(n);if(!(r>=0))throw new RangeError(`invalid digits: ${n}`);e=r}return t},()=>new Hu(e)}function Dh(t){return t.innerRadius}function Nh(t){return t.outerRadius}function Fh(t){return t.startAngle}function Lh(t){return t.endAngle}function Uh(t){return t&&t.padAngle}function Eh(t,e,n,r,i,a,o,s){var c=n-t,u=r-e,f=o-i,h=s-a,d=h*c-f*u;if(!(d*d<Vt))return d=(f*(e-a)-h*(t-i))/d,[t+d*c,e+d*u]}function Mn(t,e,n,r,i,a,o){var s=t-n,c=e-r,u=(o?a:-a)/Be(s*s+c*c),f=u*c,h=-u*s,d=t+f,v=e+h,x=n+f,k=r+h,R=(d+x)/2,F=(v+k)/2,P=x-d,H=k-v,E=P*P+H*H,U=i-a,A=d*k-x*v,B=(H<0?-1:1)*Be(Ch(0,U*U*E-A*A)),J=(A*H-P*B)/E,ft=(-A*P-H*B)/E,lt=(A*H+P*B)/E,L=(-A*P+H*B)/E,V=J-R,M=ft-F,W=lt-R,j=L-F;return V*V+M*M>W*W+j*j&&(J=lt,ft=L),{cx:J,cy:ft,x01:-f,y01:-h,x11:J*(i/U-1),y11:ft*(i/U-1)}}function Yh(){var t=Dh,e=Nh,n=dt(0),r=null,i=Fh,a=Lh,o=Uh,s=null,c=Qa(u);function u(){var f,h,d=+t.apply(this,arguments),v=+e.apply(this,arguments),x=i.apply(this,arguments)-Xn,k=a.apply(this,arguments)-Xn,R=ra(k-x),F=k>x;if(s||(s=f=c()),v<d&&(h=v,v=d,d=h),!(v>Vt))s.moveTo(0,0);else if(R>Fn-Vt)s.moveTo(v*ke(x),v*ne(x)),s.arc(0,0,v,x,k,!F),d>Vt&&(s.moveTo(d*ke(k),d*ne(k)),s.arc(0,0,d,k,x,F));else{var P=x,H=k,E=x,U=k,A=R,B=R,J=o.apply(this,arguments)/2,ft=J>Vt&&(r?+r.apply(this,arguments):Be(d*d+v*v)),lt=Or(ra(v-d)/2,+n.apply(this,arguments)),L=lt,V=lt,M,W;if(ft>Vt){var j=ia(ft/d*ne(J)),O=ia(ft/v*ne(J));(A-=j*2)>Vt?(j*=F?1:-1,E+=j,U-=j):(A=0,E=U=(x+k)/2),(B-=O*2)>Vt?(O*=F?1:-1,P+=O,H-=O):(B=0,P=H=(x+k)/2)}var N=v*ke(P),Y=v*ne(P),D=d*ke(U),Q=d*ne(U);if(lt>Vt){var rt=v*ke(H),ct=v*ne(H),$=d*ke(E),it=d*ne(E),at;if(R<dn)if(at=Eh(N,Y,$,it,rt,ct,D,Q)){var Et=N-at[0],bt=Y-at[1],ee=rt-at[0],S=ct-at[1],X=1/ne(Sh((Et*ee+bt*S)/(Be(Et*Et+bt*bt)*Be(ee*ee+S*S)))/2),Z=Be(at[0]*at[0]+at[1]*at[1]);L=Or(lt,(d-Z)/(X-1)),V=Or(lt,(v-Z)/(X+1))}else L=V=0}B>Vt?V>Vt?(M=Mn($,it,N,Y,v,V,F),W=Mn(rt,ct,D,Q,v,V,F),s.moveTo(M.cx+M.x01,M.cy+M.y01),V<lt?s.arc(M.cx,M.cy,V,Rt(M.y01,M.x01),Rt(W.y01,W.x01),!F):(s.arc(M.cx,M.cy,V,Rt(M.y01,M.x01),Rt(M.y11,M.x11),!F),s.arc(0,0,v,Rt(M.cy+M.y11,M.cx+M.x11),Rt(W.cy+W.y11,W.cx+W.x11),!F),s.arc(W.cx,W.cy,V,Rt(W.y11,W.x11),Rt(W.y01,W.x01),!F))):(s.moveTo(N,Y),s.arc(0,0,v,P,H,!F)):s.moveTo(N,Y),!(d>Vt)||!(A>Vt)?s.lineTo(D,Q):L>Vt?(M=Mn(D,Q,rt,ct,d,-L,F),W=Mn(N,Y,$,it,d,-L,F),s.lineTo(M.cx+M.x01,M.cy+M.y01),L<lt?s.arc(M.cx,M.cy,L,Rt(M.y01,M.x01),Rt(W.y01,W.x01),!F):(s.arc(M.cx,M.cy,L,Rt(M.y01,M.x01),Rt(M.y11,M.x11),!F),s.arc(0,0,d,Rt(M.cy+M.y11,M.cx+M.x11),Rt(W.cy+W.y11,W.cx+W.x11),F),s.arc(W.cx,W.cy,L,Rt(W.y11,W.x11),Rt(W.y01,W.x01),!F))):s.arc(0,0,d,U,E,F)}if(s.closePath(),f)return s=null,f+""||null}return u.centroid=function(){var f=(+t.apply(this,arguments)+ +e.apply(this,arguments))/2,h=(+i.apply(this,arguments)+ +a.apply(this,arguments))/2-dn/2;return[ke(h)*f,ne(h)*f]},u.innerRadius=function(f){return arguments.length?(t=typeof f=="function"?f:dt(+f),u):t},u.outerRadius=function(f){return arguments.length?(e=typeof f=="function"?f:dt(+f),u):e},u.cornerRadius=function(f){return arguments.length?(n=typeof f=="function"?f:dt(+f),u):n},u.padRadius=function(f){return arguments.length?(r=f==null?null:typeof f=="function"?f:dt(+f),u):r},u.startAngle=function(f){return arguments.length?(i=typeof f=="function"?f:dt(+f),u):i},u.endAngle=function(f){return arguments.length?(a=typeof f=="function"?f:dt(+f),u):a},u.padAngle=function(f){return arguments.length?(o=typeof f=="function"?f:dt(+f),u):o},u.context=function(f){return arguments.length?(s=f??null,u):s},u}function mi(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function Ka(t){this._context=t}Ka.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e);break}}};function Oh(t){return new Ka(t)}function Rh(t){return t[0]}function Hh(t){return t[1]}function Ih(t,e){var n=dt(!0),r=null,i=Oh,a=null,o=Qa(s);t=typeof t=="function"?t:t===void 0?Rh:dt(t),e=typeof e=="function"?e:e===void 0?Hh:dt(e);function s(c){var u,f=(c=mi(c)).length,h,d=!1,v;for(r==null&&(a=i(v=o())),u=0;u<=f;++u)!(u<f&&n(h=c[u],u,c))===d&&((d=!d)?a.lineStart():a.lineEnd()),d&&a.point(+t(h,u,c),+e(h,u,c));if(v)return a=null,v+""||null}return s.x=function(c){return arguments.length?(t=typeof c=="function"?c:dt(+c),s):t},s.y=function(c){return arguments.length?(e=typeof c=="function"?c:dt(+c),s):e},s.defined=function(c){return arguments.length?(n=typeof c=="function"?c:dt(!!c),s):n},s.curve=function(c){return arguments.length?(i=c,r!=null&&(a=i(r)),s):i},s.context=function(c){return arguments.length?(c==null?r=a=null:a=i(r=c),s):r},s}function Ph(t,e){return e<t?-1:e>t?1:e>=t?0:NaN}function zh(t){return t}function Wh(){var t=zh,e=Ph,n=null,r=dt(0),i=dt(Fn),a=dt(0);function o(s){var c,u=(s=mi(s)).length,f,h,d=0,v=new Array(u),x=new Array(u),k=+r.apply(this,arguments),R=Math.min(Fn,Math.max(-Fn,i.apply(this,arguments)-k)),F,P=Math.min(Math.abs(R)/u,a.apply(this,arguments)),H=P*(R<0?-1:1),E;for(c=0;c<u;++c)(E=x[v[c]=c]=+t(s[c],c,s))>0&&(d+=E);for(e!=null?v.sort(function(U,A){return e(x[U],x[A])}):n!=null&&v.sort(function(U,A){return n(s[U],s[A])}),c=0,h=d?(R-u*H)/d:0;c<u;++c,k=F)f=v[c],E=x[f],F=k+(E>0?E*h:0)+H,x[f]={data:s[f],index:c,value:E,startAngle:k,endAngle:F,padAngle:P};return x}return o.value=function(s){return arguments.length?(t=typeof s=="function"?s:dt(+s),o):t},o.sortValues=function(s){return arguments.length?(e=s,n=null,o):e},o.sort=function(s){return arguments.length?(n=s,e=null,o):n},o.startAngle=function(s){return arguments.length?(r=typeof s=="function"?s:dt(+s),o):r},o.endAngle=function(s){return arguments.length?(i=typeof s=="function"?s:dt(+s),o):i},o.padAngle=function(s){return arguments.length?(a=typeof s=="function"?s:dt(+s),o):a},o}function aa(t){return t<0?-1:1}function oa(t,e,n){var r=t._x1-t._x0,i=e-t._x1,a=(t._y1-t._y0)/(r||i<0&&-0),o=(n-t._y1)/(i||r<0&&-0),s=(a*i+o*r)/(r+i);return(aa(a)+aa(o))*Math.min(Math.abs(a),Math.abs(o),.5*Math.abs(s))||0}function sa(t,e){var n=t._x1-t._x0;return n?(3*(t._y1-t._y0)/n-e)/2:e}function Rr(t,e,n){var r=t._x0,i=t._y0,a=t._x1,o=t._y1,s=(a-r)/3;t._context.bezierCurveTo(r+s,i+s*e,a-s,o-s*n,a,o)}function Zn(t){this._context=t}Zn.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:Rr(this,this._t0,sa(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){var n=NaN;if(t=+t,e=+e,!(t===this._x1&&e===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,Rr(this,sa(this,n=oa(this,t,e)),n);break;default:Rr(this,this._t0,n=oa(this,t,e));break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e,this._t0=n}}};Object.create(Zn.prototype).point=function(t,e){Zn.prototype.point.call(this,e,t)};function Vh(t){return new Zn(t)}function la(t,e){if((o=t.length)>1)for(var n=1,r,i,a=t[e[0]],o,s=a.length;n<o;++n)for(i=a,a=t[e[n]],r=0;r<s;++r)a[r][1]+=a[r][0]=isNaN(i[r][1])?i[r][0]:i[r][1]}function ca(t){for(var e=t.length,n=new Array(e);--e>=0;)n[e]=e;return n}function Bh(t,e){return t[e]}function Gh(t){const e=[];return e.key=t,e}function qh(){var t=dt([]),e=ca,n=la,r=Bh;function i(a){var o=Array.from(t.apply(this,arguments),Gh),s,c=o.length,u=-1,f;for(const h of a)for(s=0,++u;s<c;++s)(o[s][u]=[0,+r(h,o[s].key,u,a)]).data=h;for(s=0,f=mi(e(o));s<c;++s)o[f[s]].index=s;return n(o,f),o}return i.keys=function(a){return arguments.length?(t=typeof a=="function"?a:dt(Array.from(a)),i):t},i.value=function(a){return arguments.length?(r=typeof a=="function"?a:dt(+a),i):r},i.order=function(a){return arguments.length?(e=a==null?ca:typeof a=="function"?a:dt(Array.from(a)),i):e},i.offset=function(a){return arguments.length?(n=a??la,i):n},i}function sn(t,e,n){this.k=t,this.x=e,this.y=n}sn.prototype={constructor:sn,scale:function(t){return t===1?this:new sn(this.k*t,this.x,this.y)},translate:function(t,e){return t===0&e===0?this:new sn(this.k,this.x+this.k*t,this.y+this.k*e)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};sn.prototype;const tr=t=>(t.activityType==="indoor_climb"||t.activityType==="outdoor_climb"||t.activityType==="competition")&&nr(t.date),er=t=>t.activityType==="fingerboarding"&&nr(t.date),nr=t=>{if(!t)return!1;const e=new Date(t);return e instanceof Date&&!isNaN(e.getTime())},Ke=t=>new Date(t.date);function Xh(t,e){const n=t.filter(u=>nr(u.date));if(n.length===0)return[];let r,i;if(e)r=new Date(e.start),i=new Date(e.end);else{const u=[...n].sort((f,h)=>new Date(f.date).getTime()-new Date(h.date).getTime());r=new Date(u[0].date),i=new Date}const a=1e3*60*60*24;r.setHours(0,0,0,0),i.setHours(23,59,59,999);const o=Math.ceil((i.getTime()-r.getTime())/a),s=new Set(t.filter(u=>{if(!tr(u))return!1;if(!e)return!0;const f=new Date(u.date);return f>=r&&f<=i}).map(u=>u.date.split("T")[0])).size,c=Math.max(0,o-s);return[{label:"Climbing Days",value:s,color:"#4A9B9B"},{label:"Rest Days",value:c,color:"#E5E7EB"}]}function Zh(t,e){const n=t.filter(c=>nr(c.date));if(n.length===0)return[];let r,i;if(e)r=new Date(e.start),i=new Date(e.end);else{const c=[...n].sort((u,f)=>new Date(u.date).getTime()-new Date(f.date).getTime());r=new Date(c[0].date),i=new Date}const a=1e3*60*60*24;r.setHours(0,0,0,0),i.setHours(23,59,59,999);const o=Math.ceil((i.getTime()-r.getTime())/a),s=new Set(t.filter(c=>{if(!er(c))return!1;if(!e)return!0;const u=new Date(c.date);return u>=r&&u<=i}).map(c=>c.date.split("T")[0])).size;return[{label:"Fingerboarding",value:s,color:"#F4C430"},{label:"No Fingerboarding",value:Math.max(0,o-s),color:"#E5E7EB"}]}function Jh(t){const e={};return t.forEach(n=>{if(!n.activityType)return;let r=Qh(n.activityType);if(n.activityType==="indoor_climb"||n.activityType==="outdoor_climb"){const i=n;r=`${n.activityType==="indoor_climb"?"Indoor":"Outdoor"} ${i.climbingType||"Climb"}`}e[r]=(e[r]||0)+1}),Object.entries(e).map(([n,r])=>({label:n,value:r}))}function Qh(t){return t?t.split("_").map(e=>e.charAt(0).toUpperCase()+e.slice(1)).join(" "):"Unknown"}function Kh(t){const e={};return t.forEach(n=>{const r=n;r.energySystems&&r.energySystems.forEach(i=>{e[i]=(e[i]||0)+1})}),Object.entries(e).map(([n,r])=>({label:n,value:r})).sort((n,r)=>r.value-n.value)}const Kr={3:"V-easy","4-":"V0-",4:"V0","4+":"V0+",5:"V1","5+":"V2","6A":"V3","6A+":"V3","6B":"V4","6B+":"V4","6C":"V5","6C+":"V5","7A":"V6","7A+":"V7","7B":"V8","7B+":"V8+","7C":"V9","7C+":"V10","8A":"V11","8A+":"V12","8B":"V13","8B+":"V14","8C":"V15","8C+":"V16","9A":"V17"},ua=Object.entries(Kr).reduce((t,[e,n])=>(t[n]=e,t),{});function An(t,e,n="all"){const r={};return t.forEach(i=>{if(!tr(i)||n==="indoor"&&i.activityType!=="indoor_climb"||n==="outdoor"&&i.activityType!=="outdoor_climb")return;i.climbs?.forEach(o=>{let s=!o.isSport,c=o.isSport;const u=o.climbingType;u&&(u==="Boulder"?(s=!0,c=!1):["Sport","Trad","Lead"].includes(u)&&(s=!1,c=!0));let f=o.grade.toUpperCase();if(e==="boulder"&&s&&Kr[f]&&(f=Kr[f]),e==="lead"&&c&&ua[f]&&(f=ua[f]),e==="lead"&&c||e==="boulder"&&s){r[f]||(r[f]={total:0,flash:0,redpoint:0,dogged:0,dnf:0}),r[f].total++;const h=o.attemptType?o.attemptType.trim().toLowerCase():"";["flash","onsight"].includes(h)?r[f].flash++:h==="redpoint"?r[f].redpoint++:h==="dogged"?r[f].dogged++:h==="dnf"?r[f].dnf++:r[f].redpoint++}})}),Object.entries(r).map(([i,a])=>({label:/^\d+[A-C][+]?$/.test(i)?i.toLowerCase():i,value:a.total,flashCount:a.flash,redpointCount:a.redpoint,doggedCount:a.dogged,dnfCount:a.dnf})).sort((i,a)=>i.label.localeCompare(a.label,void 0,{numeric:!0}))}function jh(t){const e={};return t.forEach(n=>{if(n.activityType==="indoor_climb"){const r=n.location;r&&(e[r]=(e[r]||0)+1)}}),Object.entries(e).map(([n,r])=>({label:n,value:r})).sort((n,r)=>r.value-n.value)}function $h(t){const e={};return t.forEach(n=>{if(n.activityType==="outdoor_climb"){const r=n.crag;r&&(e[r]=(e[r]||0)+1)}}),Object.entries(e).map(([n,r])=>({label:n,value:r})).sort((n,r)=>r.value-n.value)}function td(t){const e={};return t.forEach(n=>{if(n.activityType==="outdoor_climb"){const r=n.area;r&&(e[r]=(e[r]||0)+1)}}),Object.entries(e).map(([n,r])=>({label:n,value:r})).sort((n,r)=>r.value-n.value)}function ed(t){const e={},n=pe("%Y-%W");t.forEach(i=>{const a=Ke(i),o=n(a);let s=0;if(tr(i)){const c=i;s=(c.fingerLoad||0)+(c.shoulderLoad||0)+(c.forearmLoad||0)}else if(i.activityType==="competition"){const c=i;s=(c.fingerLoad||0)+(c.shoulderLoad||0)+(c.forearmLoad||0)}e[o]=(e[o]||0)+s});const r=hn("%Y-%W");return Object.entries(e).map(([i,a])=>({date:r(i)||new Date,value:a,series:"Total Load"})).sort((i,a)=>i.date.getTime()-a.date.getTime())}function nd(t){const e=[];return t.filter(er).forEach(n=>{const r=n,i=Ke(r);r.exercises.forEach(a=>{const o=Math.max(...a.details.map(s=>s.weight));o>0&&e.push({date:i,value:o,series:a.gripType})})}),e.sort((n,r)=>n.date.getTime()-r.date.getTime())}function rd(t){const e={},n=pe("%Y-%W");t.filter(tr).forEach(a=>{const o=a,s=Ke(o),c=n(s);e[c]||(e[c]={}),o.crimpGrip&&(e[c].Crimp=(e[c].Crimp||0)+o.crimpGrip),o.openGrip&&(e[c]["Open Hand"]=(e[c]["Open Hand"]||0)+o.openGrip),o.pinchGrip&&(e[c].Pinch=(e[c].Pinch||0)+o.pinchGrip),o.sloperGrip&&(e[c].Sloper=(e[c].Sloper||0)+o.sloperGrip),o.jugGrip&&(e[c].Jug=(e[c].Jug||0)+o.jugGrip)});const r=[],i=hn("%Y-%W");return Object.entries(e).forEach(([a,o])=>{const s=i(a)||new Date;Object.entries(o).forEach(([c,u])=>{r.push({date:s,value:u,series:c})})}),r.sort((a,o)=>a.date.getTime()-o.date.getTime())}function id(t){const e=[];return t.filter(er).forEach(n=>{const r=n,i=Ke(r);r.exercises.forEach(a=>{if(a.name==="Recruitment Pulls"){const o=Math.max(...a.details.map(s=>s.weight));o>0&&e.push({date:i,value:o,series:"Recruitment Pulls"})}})}),e.sort((n,r)=>n.date.getTime()-r.date.getTime())}function ad(t){const e=[];return t.filter(er).forEach(n=>{const r=n,i=Ke(r);r.exercises.forEach(a=>{if(a.name==="Max pick-ups"){const o=Math.max(...a.details.map(s=>s.weight));o>0&&e.push({date:i,value:o,series:"Max pick-ups"})}})}),e.sort((n,r)=>n.date.getTime()-r.date.getTime())}function od(t,e){if(t.length===0)return[];const n=[...t].sort((i,a)=>i.date.getTime()-a.date.getTime()),r=[];for(let i=0;i<n.length;i++){const a=Math.max(0,i-e+1),o=n.slice(a,i+1),c=o.reduce((u,f)=>u+f.value,0)/o.length;r.push({date:n[i].date,value:c,series:`${n[i].series} (Avg)`})}return r}function zt(t,e,n,r,i="week",a){const o={},s=pe(i==="week"?"%Y-%W":"%Y-%m-%d");if(t.forEach(u=>{if(!e(u))return;const f=Ke(u),h=s(f),d=Number(n(u))||0;o[h]=(o[h]||0)+d}),a){let u=new Date(a.start);const f=new Date(a.end);u.setHours(0,0,0,0),f.setHours(23,59,59,999);let h=0;const d=4e3;for(;u<=f&&h<d;){const v=s(u);o[v]===void 0&&(o[v]=0),u.setDate(u.getDate()+1),h++}}const c=hn(i==="week"?"%Y-%W":"%Y-%m-%d");return Object.entries(o).map(([u,f])=>({date:c(u)||new Date,value:f,series:r})).sort((u,f)=>u.date.getTime()-f.date.getTime())}var sd=Gt('<g><path stroke="white" stroke-width="2"></path></g>'),ld=z('<div class="legend-item svelte-6s3h9y"><span class="color-box svelte-6s3h9y"></span> <span class="label"> </span> <span class="value svelte-6s3h9y"> </span></div>'),cd=z('<div class="chart-wrapper svelte-6s3h9y"><div class="chart-container svelte-6s3h9y" role="img" aria-label="Pie chart"><svg style="max-width: 100%; height: auto;"><!><text text-anchor="middle" dy="0.35em" font-weight="bold" fill="#666"> </text></svg></div> <div class="legend svelte-6s3h9y"></div></div>');function fa(t,e){vn(e,!0);let n=yt(e,"width",3,300),r=yt(e,"height",3,300),i=T(()=>Math.min(n(),r())/2),a=T(()=>l(i)*.6),o=T(()=>Wh().value(e.valueAccessor).sort(null)),s=T(()=>Yh().innerRadius(l(a)).outerRadius(l(i))),c=T(()=>l(o)(e.data)),u=pn(kh);var f=cd(),h=b(f),d=b(h),v=b(d);Ht(v,17,()=>l(c),It,(F,P)=>{const H=T(()=>e.colorAccesor?e.colorAccesor(l(P).data):u(e.labelAccessor(l(P).data)));var E=sd(),U=b(E);w(E),gt(A=>{I(U,"d",A),I(U,"fill",l(H))},[()=>l(s)(l(P))]),C(F,E)});var x=p(v),k=b(x);w(x),w(d),w(h);var R=p(h,2);Ht(R,21,()=>e.data,It,(F,P)=>{const H=T(()=>e.colorAccesor?e.colorAccesor(l(P)):u(e.labelAccessor(l(P))));var E=ld(),U=b(E),A=p(U,2),B=b(A,!0);w(A);var J=p(A,2),ft=b(J);w(J),w(E),gt((lt,L)=>{jr(U,`background-color: ${l(H)??""};`),Pt(B,lt),Pt(ft,`(${L??""})`)},[()=>e.labelAccessor(l(P)),()=>e.valueAccessor(l(P))]),C(F,E)}),w(R),w(f),gt(F=>{I(d,"width",n()),I(d,"height",r()),I(d,"viewBox",`${-n()/2} ${-r()/2} ${n()??""} ${r()??""}`),Pt(k,`${F??""} Total`)},[()=>vs(e.data,e.valueAccessor)]),C(t,f),gn()}var ud=Gt('<text dy="0.71em" y="9" text-anchor="end" transform="rotate(-45)" fill="currentColor"> </text>'),fd=Gt('<line y2="6" stroke="currentColor"></line><text dy="0.71em" y="9" text-anchor="middle" fill="currentColor"> </text>',1),hd=Gt("<g><!></g>"),dd=Gt('<line x2="-6" stroke="currentColor"></line><text x="-9" dy="0.32em" text-anchor="end" fill="currentColor"> </text><line stroke="currentColor" stroke-opacity="0.1"></line>',1),vd=Gt('<text x="-9" dy="0.32em" text-anchor="end" fill="currentColor"> </text>'),gd=Gt("<g><!></g>"),md=Gt('<rect rx="4"></rect>'),yd=z('<div class="chart-container svelte-9fnibp" role="img" aria-label="Bar chart"><svg style="max-width: 100%; height: auto;"><g><g><line x1="0" stroke="currentColor"></line><!></g><g><line stroke="currentColor"></line><!></g><!></g></svg></div>');function ze(t,e){vn(e,!0);let n=yt(e,"width",3,640),r=yt(e,"height",3,400),i=yt(e,"marginTop",3,20),a=yt(e,"marginRight",3,20),o=yt(e,"marginBottom",3,80),s=yt(e,"marginLeft",3,40),c=yt(e,"color",3,"steelblue"),u=yt(e,"orientation",3,"vertical"),f=Se(0),h=T(()=>l(f)||n()),d=T(()=>l(h)-s()-a()),v=T(()=>r()-i()-o()),x=12,k=T(()=>u()==="vertical"),R=T(()=>l(k)?Vn().domain(e.data.map(e.xAccessor)).range([0,l(d)]).padding(.2):fn().domain([0,Un(e.data,e.yAccessor)]).range([0,l(d)])),F=T(()=>l(k)?fn().domain([0,Un(e.data,e.yAccessor)]).range([l(v),0]).nice():Vn().domain(e.data.map(e.xAccessor)).range([0,l(v)]).padding(.2)),P=T(()=>e.data.map(j=>{const O=e.xAccessor(j),N=e.yAccessor(j),Y=l(R),D=l(F);return{x:l(k)?Y(O):0,y:l(k)?D(N):D(O),width:l(k)?Y.bandwidth():Y(N),height:l(k)?l(v)-D(N):D.bandwidth(),label:O,value:N}})),H=T(()=>{if(l(k)){const j=l(R).domain();if(l(h)>0&&l(h)<600&&j.length>0){const O=l(h)/j.length,Y=Math.ceil(30/O);if(Y>1)return j.filter((D,Q)=>Q%Y===0)}return j}else return l(R).ticks(l(h)/80)}),E=T(()=>l(k)?l(F).ticks(5):l(F).domain());var U=yd(),A=b(U),B=b(A),J=b(B),ft=b(J),lt=p(ft);Ht(lt,17,()=>l(H),It,(j,O)=>{const N=T(()=>l(R)),Y=T(()=>l(k)?(l(N)(l(O))||0)+l(N).bandwidth()/2:l(N)(l(O)));var D=hd(),Q=b(D);{var rt=$=>{var it=ud();I(it,"font-size",x);var at=b(it,!0);w(it),gt(()=>Pt(at,l(O))),C($,it)},ct=$=>{var it=fd(),at=p(qt(it));I(at,"font-size",x);var Et=b(at,!0);w(at),gt(()=>Pt(Et,l(O))),C($,it)};q(Q,$=>{l(k)?$(rt):$(ct,!1)})}w(D),gt(()=>I(D,"transform",`translate(${l(Y)??""}, 0)`)),C(j,D)}),w(J);var L=p(J),V=b(L),M=p(V);Ht(M,17,()=>l(E),It,(j,O)=>{const N=T(()=>l(F)),Y=T(()=>l(k)?l(N)(l(O)):(l(N)(l(O))||0)+l(N).bandwidth()/2);var D=gd(),Q=b(D);{var rt=$=>{var it=dd(),at=p(qt(it));I(at,"font-size",x);var Et=b(at,!0);w(at);var bt=p(at);gt(()=>{Pt(Et,l(O)),I(bt,"x2",l(d))}),C($,it)},ct=$=>{var it=vd();I(it,"font-size",x);var at=b(it,!0);w(it),gt(()=>Pt(at,l(O))),C($,it)};q(Q,$=>{l(k)?$(rt):$(ct,!1)})}w(D),gt(()=>I(D,"transform",`translate(0, ${l(Y)??""})`)),C(j,D)}),w(L);var W=p(L);Ht(W,17,()=>l(P),It,(j,O)=>{var N=md();gt(()=>{I(N,"x",l(O).x),I(N,"y",l(O).y),I(N,"width",l(O).width),I(N,"height",l(O).height),I(N,"fill",c())}),C(j,N)}),w(B),w(A),w(U),gt(()=>{I(A,"width",l(h)),I(A,"height",r()),I(A,"viewBox",`0 0 ${l(h)??""} ${r()??""}`),I(B,"transform",`translate(${s()??""}, ${i()??""})`),I(J,"transform",`translate(0, ${l(v)??""})`),I(ft,"x2",l(d)),I(V,"y2",l(v))}),ti(U,"clientWidth",j=>ue(f,j)),C(t,U),gn()}var pd=z('<div class="legend-item svelte-jwzpom"><div class="legend-color svelte-jwzpom"></div> <span class="legend-label"> </span></div>'),_d=Gt('<g><line y2="6" stroke="currentColor"></line><text dy="0.71em" y="9" text-anchor="middle" fill="currentColor"> </text></g>'),wd=Gt('<g><line x2="-6" stroke="currentColor"></line><text x="-9" dy="0.32em" text-anchor="end" fill="currentColor"> </text><line stroke="currentColor" stroke-opacity="0.1"></line></g>'),xd=Gt('<rect rx="1"></rect>'),bd=z('<div class="chart-container svelte-jwzpom" role="img" aria-label="Stacked Bar chart"><div class="legend svelte-jwzpom"></div> <svg style="max-width: 100%; height: auto;"><g><g><line x1="0" stroke="currentColor"></line><!></g><g><line stroke="currentColor"></line><!></g><!></g></svg></div>');function kn(t,e){vn(e,!0);let n=yt(e,"width",3,640),r=yt(e,"height",3,400),i=yt(e,"marginTop",3,20),a=yt(e,"marginRight",3,20),o=yt(e,"marginBottom",3,60),s=yt(e,"marginLeft",3,40),c=T(()=>e.labels||e.keys.map(O=>O.charAt(0).toUpperCase()+O.slice(1))),u=Se(0),f=T(()=>l(u)||n()),h=T(()=>l(f)-s()-a()),d=T(()=>r()-i()-o()),v=12,x=T(()=>Vn().domain(e.data.map(e.xAccessor)).range([0,l(h)]).padding(.2)),k=T(()=>e.data.length===0?0:Un(e.data,N=>e.keys.reduce((Y,D)=>Y+(N[D]||0),0))||10),R=T(()=>fn().domain([0,l(k)]).range([l(d),0]).nice()),F=T(()=>pn().domain(e.keys).range(e.colors)),P=T(()=>qh().keys(e.keys)(e.data)),H=T(()=>{const O=l(x).domain();if(l(f)<500&&O.length>0){const N=Math.ceil(30/(l(f)/O.length));if(N>1)return O.filter((Y,D)=>D%N===0)}return O}),E=T(()=>l(R).ticks(5));var U=bd(),A=b(U);Ht(A,21,()=>e.keys,It,(O,N,Y)=>{var D=pd(),Q=b(D),rt=p(Q,2),ct=b(rt,!0);w(rt),w(D),gt(()=>{jr(Q,`background-color: ${e.colors[Y]??""};`),Pt(ct,l(c)[Y])}),C(O,D)}),w(A);var B=p(A,2),J=b(B),ft=b(J),lt=b(ft),L=p(lt);Ht(L,17,()=>l(H),It,(O,N)=>{var Y=_d(),D=p(b(Y));I(D,"font-size",v);var Q=b(D,!0);w(D),w(Y),gt(rt=>{I(Y,"transform",`translate(${rt??""}, 0)`),Pt(Q,l(N))},[()=>(l(x)(l(N))||0)+l(x).bandwidth()/2]),C(O,Y)}),w(ft);var V=p(ft),M=b(V),W=p(M);Ht(W,17,()=>l(E),It,(O,N)=>{var Y=wd(),D=p(b(Y));I(D,"font-size",v);var Q=b(D,!0);w(D);var rt=p(D);w(Y),gt(ct=>{I(Y,"transform",`translate(0, ${ct??""})`),Pt(Q,l(N)),I(rt,"x2",l(h))},[()=>l(R)(l(N))]),C(O,Y)}),w(V);var j=p(V);Ht(j,17,()=>l(P),It,(O,N)=>{var Y=re(),D=qt(Y);Ht(D,17,()=>l(N),It,(Q,rt)=>{const ct=T(()=>e.xAccessor(l(rt).data)),$=T(()=>l(x)(l(ct))||0),it=T(()=>l(R)(l(rt)[1])),at=T(()=>l(R)(l(rt)[0])),Et=T(()=>l(at)-l(it));var bt=xd();gt((ee,S)=>{I(bt,"x",l($)),I(bt,"y",l(it)),I(bt,"width",ee),I(bt,"height",l(Et)),I(bt,"fill",S)},[()=>l(x).bandwidth(),()=>l(F)(l(N).key)]),C(Q,bt)}),C(O,Y)}),w(J),w(B),w(U),gt(()=>{I(B,"width",l(f)),I(B,"height",r()),I(B,"viewBox",`0 0 ${l(f)??""} ${r()??""}`),I(J,"transform",`translate(${s()??""}, ${i()??""})`),I(ft,"transform",`translate(0, ${l(d)??""})`),I(lt,"x2",l(h)),I(M,"y2",l(d))}),ti(U,"clientWidth",O=>ue(u,O)),C(t,U),gn()}var Td=z('<div class="legend-item svelte-1srghcq"><span class="color-box svelte-1srghcq"></span> <span class="label"> </span></div>'),Md=z('<div class="legend svelte-1srghcq"></div>'),Ad=Gt('<g><line y2="6" stroke="currentColor"></line><text dy="0.71em" y="9" text-anchor="middle" fill="currentColor" font-size="10"> </text></g>'),kd=Gt('<g><line x2="-6" stroke="currentColor"></line><text x="-9" dy="0.32em" text-anchor="end" fill="currentColor" font-size="10"> </text><line stroke="currentColor" stroke-opacity="0.1"></line></g>'),Cd=Gt('<path fill="none" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path>'),Sd=z('<div class="chart-wrapper svelte-1srghcq"><!> <div class="chart-container svelte-1srghcq" role="img" aria-label="Line chart"><svg style="max-width: 100%; height: auto;"><g><g><line x1="0" stroke="currentColor"></line><!></g><g><line stroke="currentColor"></line><!></g><!></g></svg></div></div>');function Tt(t,e){vn(e,!0);let n=yt(e,"width",3,640),r=yt(e,"height",3,400),i=yt(e,"marginTop",3,20),a=yt(e,"marginRight",3,20),o=yt(e,"marginBottom",3,30),s=yt(e,"marginLeft",3,40),c=yt(e,"color",3,"steelblue"),u=Se(0),f=T(()=>l(u)||n()),h=T(()=>l(f)-s()-a()),d=T(()=>r()-i()-o()),v=T(()=>Mh().domain(ns(e.data,e.xAccessor)).range([0,l(h)])),x=T(()=>fn().domain([0,Un(e.data,e.yAccessor)]).range([l(d),0]).nice()),k=pn(Ah),R=T(()=>Ih().x(N=>l(v)(e.xAccessor(N))).y(N=>l(x)(e.yAccessor(N))).curve(Vh)),F=T(()=>e.zAccessor?ss(e.data,e.zAccessor):[[null,e.data]]),P=T(()=>l(v).ticks(l(f)/80)),H=T(()=>l(x).ticks(r()/40));var E=Sd(),U=b(E);{var A=N=>{var Y=Md();Ht(Y,21,()=>l(F),It,(D,Q)=>{var rt=T(()=>wi(l(Q),2));let ct=()=>l(rt)[0];var $=Td(),it=b($),at=p(it,2),Et=b(at,!0);w(at),w($),gt(bt=>{jr(it,`background-color: ${bt??""};`),Pt(Et,ct())},[()=>k(ct())]),C(D,$)}),w(Y),C(N,Y)};q(U,N=>{e.zAccessor&&N(A)})}var B=p(U,2),J=b(B),ft=b(J),lt=b(ft),L=b(lt),V=p(L);Ht(V,17,()=>l(P),It,(N,Y)=>{var D=Ad(),Q=p(b(D)),rt=b(Q,!0);w(Q),w(D),gt((ct,$)=>{I(D,"transform",`translate(${ct??""}, 0)`),Pt(rt,$)},[()=>l(v)(l(Y)),()=>pe("%b %d")(l(Y))]),C(N,D)}),w(lt);var M=p(lt),W=b(M),j=p(W);Ht(j,17,()=>l(H),It,(N,Y)=>{var D=kd(),Q=p(b(D)),rt=b(Q,!0);w(Q);var ct=p(Q);w(D),gt($=>{I(D,"transform",`translate(0, ${$??""})`),Pt(rt,l(Y)),I(ct,"x2",l(h))},[()=>l(x)(l(Y))]),C(N,D)}),w(M);var O=p(M);Ht(O,17,()=>l(F),It,(N,Y)=>{var D=T(()=>wi(l(Y),2));let Q=()=>l(D)[0],rt=()=>l(D)[1];var ct=Cd();gt(($,it)=>{I(ct,"d",$),I(ct,"stroke",it)},[()=>l(R)(rt())??"",()=>e.zAccessor&&Q()?k(Q()):c()]),C(N,ct)}),w(ft),w(J),w(B),w(E),gt(()=>{I(J,"width",l(f)),I(J,"height",r()),I(J,"viewBox",`0 0 ${l(f)??""} ${r()??""}`),I(ft,"transform",`translate(${s()??""}, ${i()??""})`),I(lt,"transform",`translate(0, ${l(d)??""})`),I(L,"x2",l(h)),I(W,"y2",l(d))}),ti(E,"clientWidth",N=>ue(u,N)),C(t,E),gn()}var Dd=z("<option> </option>"),Nd=z('<div class="specific-date-input" style="margin-top: 0.5rem;"><input type="week" class="date-picker"/></div>'),Fd=z('<div class="specific-date-input" style="margin-top: 0.5rem;"><input type="month" class="date-picker"/></div>'),Ld=z("<option> </option>"),Ud=z('<div class="select-wrapper svelte-ryo7lo" style="margin-top: 0.5rem;"><select class="date-picker svelte-ryo7lo"><option disabled selected>Select Year</option><!></select> <div class="select-arrow svelte-ryo7lo">▼</div></div>'),Ed=z('<div class="empty-state svelte-ryo7lo"><p>No sessions found. Log some data to see charts!</p></div>'),Yd=z('<div class="chart-grid svelte-ryo7lo"><div class="chart-card svelte-ryo7lo"><h3 class="svelte-ryo7lo">Climbing vs Rest</h3> <!></div> <div class="chart-card svelte-ryo7lo"><h3 class="svelte-ryo7lo">Fingerboarding Consistency</h3> <!></div> <div class="chart-card full-width svelte-ryo7lo"><h3 class="svelte-ryo7lo">Session Type Breakdown</h3> <!></div></div>'),Od=z('<p class="no-data svelte-ryo7lo">No energy system data recorded.</p>'),Rd=z('<div class="chart-card full-width svelte-ryo7lo"><h3 class="svelte-ryo7lo">Energy Systems Profile</h3> <!></div>'),Hd=z('<p class="no-data svelte-ryo7lo">No indoor boulders recorded.</p>'),Id=z('<p class="no-data svelte-ryo7lo">No outdoor boulders recorded.</p>'),Pd=z('<p class="no-data svelte-ryo7lo">No indoor lead climbs recorded.</p>'),zd=z('<p class="no-data svelte-ryo7lo">No outdoor sport climbs recorded.</p>'),Wd=z('<div class="chart-grid svelte-ryo7lo"><div class="chart-card full-width svelte-ryo7lo"><h3 class="svelte-ryo7lo">🧗 Indoor Boulder Grades</h3> <!></div> <div class="chart-card full-width svelte-ryo7lo"><h3 class="svelte-ryo7lo">⛰️ Outdoor Boulder Grades</h3> <!></div> <div class="chart-card full-width svelte-ryo7lo"><h3 class="svelte-ryo7lo">🧗 Indoor Lead/Sport Grades</h3> <!></div> <div class="chart-card full-width svelte-ryo7lo"><h3 class="svelte-ryo7lo">⛰️ Outdoor Lead/Sport Grades</h3> <!></div></div>'),Vd=z('<p class="no-data svelte-ryo7lo">No indoor sessions recorded.</p>'),Bd=z('<p class="no-data svelte-ryo7lo">No outdoor sessions recorded.</p>'),Gd=z('<p class="no-data svelte-ryo7lo">No outdoor sessions recorded.</p>'),qd=z('<div class="chart-card full-width svelte-ryo7lo"><h3 class="svelte-ryo7lo">Indoor Gym Frequency</h3> <!></div> <div class="chart-card full-width svelte-ryo7lo"><h3 class="svelte-ryo7lo">Outdoor Crag Frequency</h3> <!></div> <div class="chart-card full-width svelte-ryo7lo"><h3 class="svelte-ryo7lo">Outdoor Area Frequency</h3> <!></div>',1),Xd=z('<p class="no-data svelte-ryo7lo">No load metrics available.</p>'),Zd=z('<div class="chart-card full-width svelte-ryo7lo"><h3 class="svelte-ryo7lo">Weekly Training Load</h3> <!></div>'),Jd=z('<p class="no-data svelte-ryo7lo">No grip load data recorded.</p>'),Qd=z('<p class="no-data svelte-ryo7lo">No max hang data recorded in Fingerboarding sessions.</p>'),Kd=z('<p class="no-data svelte-ryo7lo">No recruitment pulls recorded.</p>'),jd=z('<p class="no-data svelte-ryo7lo">No max pick-ups recorded.</p>'),$d=z('<div class="chart-grid svelte-ryo7lo"><div class="chart-card full-width svelte-ryo7lo"><h3 class="svelte-ryo7lo">Weekly Grip Load (Subjective 1-5)</h3> <!></div> <div class="chart-card full-width svelte-ryo7lo"><h3 class="svelte-ryo7lo">Max Hang Progression (Kg)</h3> <!></div> <div class="chart-card full-width svelte-ryo7lo"><h3 class="svelte-ryo7lo">Recruitment Pulls (Max Weight)</h3> <!></div> <div class="chart-card full-width svelte-ryo7lo"><h3 class="svelte-ryo7lo">Max Pick-ups (Max Weight)</h3> <!></div></div>'),tv=z('<p class="no-data svelte-ryo7lo">No data.</p>'),ev=z('<p class="no-data svelte-ryo7lo">No data.</p>'),nv=z('<p class="no-data svelte-ryo7lo">No data.</p>'),rv=z('<p class="no-data svelte-ryo7lo">No data.</p>'),iv=z('<p class="no-data svelte-ryo7lo">No data.</p>'),av=z('<p class="no-data svelte-ryo7lo">No data.</p>'),ov=z('<p class="no-data svelte-ryo7lo">No data.</p>'),sv=z('<p class="no-data svelte-ryo7lo">No data.</p>'),lv=z('<p class="no-data svelte-ryo7lo">No data.</p>'),cv=z('<p class="no-data svelte-ryo7lo">No data.</p>'),uv=z('<p class="no-data svelte-ryo7lo">No data.</p>'),fv=z('<p class="no-data svelte-ryo7lo">No data.</p>'),hv=z('<p class="no-data svelte-ryo7lo">No data.</p>'),dv=z('<p class="no-data svelte-ryo7lo">No data.</p>'),vv=z('<p class="no-data svelte-ryo7lo">No data.</p>'),gv=z('<div class="chart-grid svelte-ryo7lo"><div class="chart-card full-width svelte-ryo7lo"><h3 class="svelte-ryo7lo">Climbing Sessions</h3> <!></div> <div class="chart-card full-width svelte-ryo7lo"><h3 class="svelte-ryo7lo">Fingerboarding Sessions</h3> <!></div> <div class="chart-card full-width svelte-ryo7lo"><h3 class="svelte-ryo7lo">Indoor Bouldering</h3> <!></div> <div class="chart-card full-width svelte-ryo7lo"><h3 class="svelte-ryo7lo">Outdoor Bouldering</h3> <!></div> <div class="chart-card full-width svelte-ryo7lo"><h3 class="svelte-ryo7lo">Indoor Leading</h3> <!></div> <div class="chart-card full-width svelte-ryo7lo"><h3 class="svelte-ryo7lo">Outdoor Leading</h3> <!></div> <div class="chart-card full-width svelte-ryo7lo"><h3 class="svelte-ryo7lo">Competitions</h3> <!></div> <div class="chart-card full-width svelte-ryo7lo"><h3 class="svelte-ryo7lo">Load Tracking - Shoulders</h3> <!></div> <div class="chart-card full-width svelte-ryo7lo"><h3 class="svelte-ryo7lo">Load Tracking - Forearms</h3> <!></div> <div class="chart-card full-width svelte-ryo7lo"><h3 class="svelte-ryo7lo">Load Tracking - Fingers</h3> <!></div> <div class="chart-card full-width svelte-ryo7lo"><h3 class="svelte-ryo7lo">Load Tracking - Open Grips</h3> <!></div> <div class="chart-card full-width svelte-ryo7lo"><h3 class="svelte-ryo7lo">Load Tracking - Crimps</h3> <!></div> <div class="chart-card full-width svelte-ryo7lo"><h3 class="svelte-ryo7lo">Load Tracking - Pinches</h3> <!></div> <div class="chart-card full-width svelte-ryo7lo"><h3 class="svelte-ryo7lo">Load Tracking - Slopers</h3> <!></div> <div class="chart-card full-width svelte-ryo7lo"><h3 class="svelte-ryo7lo">Load Tracking - Jugs</h3> <!></div></div>'),mv=z('<div class="page svelte-ryo7lo"><div class="page-header svelte-ryo7lo"><h1 class="svelte-ryo7lo">📈 Plot Data</h1> <p class="subtitle svelte-ryo7lo">Visualize your progress</p></div> <div class="controls-card svelte-ryo7lo"><label for="view-select" class="svelte-ryo7lo">Select Analysis:</label> <div class="select-wrapper svelte-ryo7lo"><select id="view-select" class="svelte-ryo7lo"></select> <div class="select-arrow svelte-ryo7lo">▼</div></div> <label for="time-select" style="margin-top: 1rem;" class="svelte-ryo7lo">Time Range:</label> <div class="select-wrapper svelte-ryo7lo"><select id="time-select" class="svelte-ryo7lo"><option>Past Week</option><option>Past Month</option><option>Past Year</option><option>Specific Week</option><option>Specific Month</option><option>Specific Year</option><option>All Time</option></select> <div class="select-arrow svelte-ryo7lo">▼</div></div> <!></div> <div class="content-card svelte-ryo7lo"><h2 class="view-title svelte-ryo7lo"> </h2> <!></div></div>');function Mv(t,e){vn(e,!0);const n=["flashCount","redpointCount","doggedCount","dnfCount"],r=["#22C55E","#3B82F6","#F97316","#EF4444"],i=["Flash/Onsight","Redpoint","Dogged","DNF"];let a=Se(Vo([])),o=Se("general"),s=Se("all"),c=Se("");Bo(async()=>{try{console.log("Fetching plot data...");const[y,tt,K,xt,kt]=await Promise.all([Go(),qo(),Xo(),Zo(),Jo()]);console.log("Results:",{indoor:y,outdoor:tt,gym:K,finger:xt,comp:kt});const _t=[...y.data||[],...tt.data||[],...K.data||[],...xt.data||[],...kt.data||[]].filter(ht=>{if(!ht.date)return!1;const vt=new Date(ht.date);return vt instanceof Date&&!isNaN(vt.getTime())});_t.sort((ht,vt)=>new Date(vt.date).getTime()-new Date(ht.date).getTime()),ue(a,_t,!0),console.log("Sessions loaded:",l(a).length)}catch(y){console.error("Error fetching plot data:",y)}});let u=T(()=>{const y=new Set(l(a).map(tt=>new Date(tt.date).getFullYear()));return Array.from(y).sort((tt,K)=>K-tt)}),f=T(()=>{if(l(s)==="all")return l(a);const y=new Date,tt=new Date;if(l(s)==="week")return tt.setDate(y.getDate()-7),l(a).filter(K=>new Date(K.date)>=tt);if(l(s)==="month")return tt.setMonth(y.getMonth()-1),l(a).filter(K=>new Date(K.date)>=tt);if(l(s)==="year")return tt.setFullYear(y.getFullYear()-1),l(a).filter(K=>new Date(K.date)>=tt);if(l(s)==="specific_week"&&l(c)){const[K,xt]=l(c).split("-W"),kt=parseInt(K),pt=parseInt(xt),_t=ht=>{const vt=new Date(ht.getTime());vt.setHours(0,0,0,0),vt.setDate(vt.getDate()+3-(vt.getDay()+6)%7);const Lt=new Date(vt.getFullYear(),0,4);return 1+Math.round(((vt.getTime()-Lt.getTime())/864e5-3+(Lt.getDay()+6)%7)/7)};return l(a).filter(ht=>{const vt=new Date(ht.date);return vt.getFullYear()===kt&&_t(vt)===pt})}else{if(l(s)==="specific_month"&&l(c))return l(a).filter(K=>K.date.startsWith(l(c)));if(l(s)==="specific_year"&&l(c))return l(a).filter(K=>K.date.startsWith(l(c)))}return l(a)}),h=T(()=>{const y=new Date,tt=new Date,K=new Date;if(l(s)==="week")return K.setDate(y.getDate()-6),{start:K,end:tt};if(l(s)==="month")return K.setMonth(y.getMonth()-1),{start:K,end:tt};if(l(s)==="year")return K.setFullYear(y.getFullYear()-1),{start:K,end:tt};if(l(s)==="specific_week"&&l(c)){const[xt,kt]=l(c).split("-W"),pt=parseInt(xt),_t=parseInt(kt),ht=new Date(pt,0,1+(_t-1)*7),vt=ht.getDay(),Lt=ht;vt<=4?Lt.setDate(ht.getDate()-ht.getDay()+1):Lt.setDate(ht.getDate()+8-ht.getDay());const Wt=new Date(Lt),Ut=new Date(Lt);return Ut.setDate(Ut.getDate()+6),{start:Wt,end:Ut}}else if(l(s)==="specific_month"&&l(c)){const[xt,kt]=l(c).split("-"),pt=new Date(parseInt(xt),parseInt(kt)-1,1),_t=new Date(parseInt(xt),parseInt(kt),0);return{start:pt,end:_t}}else if(l(s)==="specific_year"&&l(c)){const xt=parseInt(l(c)),kt=new Date(xt,0,1),pt=new Date(xt,11,31);return{start:kt,end:pt}}}),d=T(()=>Xh(l(f),l(h))),v=T(()=>Zh(l(f),l(h))),x=T(()=>Jh(l(f))),k=T(()=>Kh(l(f))),R=T(()=>An(l(f),"boulder","indoor")),F=T(()=>An(l(f),"boulder","outdoor")),P=T(()=>An(l(f),"lead","indoor")),H=T(()=>An(l(f),"lead","outdoor")),E=T(()=>jh(l(f))),U=T(()=>$h(l(f))),A=T(()=>td(l(f))),B=T(()=>ed(l(f))),J=T(()=>nd(l(f))),ft=T(()=>rd(l(f))),lt=T(()=>id(l(f))),L=T(()=>ad(l(f)));const V=(y,tt)=>y.length===0?[]:[...y,...od(y,4)];let M=T(()=>["week","month","specific_week","specific_month"].includes(l(s))?"day":"week"),W=T(()=>V(zt(l(f),y=>y.activityType.includes("climb"),y=>1,"Climbing Sessions",l(M),l(h)))),j=T(()=>V(zt(l(f),y=>y.activityType==="fingerboarding",y=>1,"Fingerboarding",l(M),l(h)))),O=T(()=>V(zt(l(f),y=>y.activityType==="indoor_climb"&&y.climbingType==="Boulder",y=>1,"Indoor Bouldering",l(M),l(h)))),N=T(()=>V(zt(l(f),y=>y.activityType==="outdoor_climb"&&y.climbingType==="Boulder",y=>1,"Outdoor Bouldering",l(M),l(h)))),Y=T(()=>V(zt(l(f),y=>y.activityType==="indoor_climb"&&y.climbingType==="Lead",y=>1,"Indoor Leading",l(M),l(h)))),D=T(()=>V(zt(l(f),y=>y.activityType==="outdoor_climb"&&["Sport","Trad"].includes(y.climbingType),y=>1,"Outdoor Leading",l(M),l(h)))),Q=T(()=>V(zt(l(f),y=>y.activityType==="competition",y=>1,"Competitions",l(M),l(h)))),rt=T(()=>V(zt(l(f),y=>!!y.shoulderLoad,y=>y.shoulderLoad||0,"Shoulders",l(M),l(h)))),ct=T(()=>V(zt(l(f),y=>!!y.forearmLoad,y=>y.forearmLoad||0,"Forearms",l(M),l(h)))),$=T(()=>V(zt(l(f),y=>!!y.fingerLoad,y=>y.fingerLoad||0,"Fingers",l(M),l(h)))),it=T(()=>V(zt(l(f),y=>!!y.openGrip,y=>y.openGrip||0,"Open Grips",l(M),l(h)))),at=T(()=>V(zt(l(f),y=>!!y.crimpGrip,y=>y.crimpGrip||0,"Crimps",l(M),l(h)))),Et=T(()=>V(zt(l(f),y=>!!y.pinchGrip,y=>y.pinchGrip||0,"Pinches",l(M),l(h)))),bt=T(()=>V(zt(l(f),y=>!!y.sloperGrip,y=>y.sloperGrip||0,"Slopers",l(M),l(h)))),ee=T(()=>V(zt(l(f),y=>!!y.jugGrip,y=>y.jugGrip||0,"Jugs",l(M),l(h))));const S=[{id:"general",label:"General Activity & Volume"},{id:"systems",label:"Training System Breakdown"},{id:"grades",label:"Performance Grade Pyramids"},{id:"venues",label:"Venue & Location Analysis"},{id:"periodization",label:"Periodization & Planning"},{id:"strength",label:"Finger Strength Metrics"},{id:"load",label:"Load Tracking"}];let X=T(()=>S.find(y=>y.id===l(o))?.label);var Z=mv(),_=p(b(Z),2),At=p(b(_),2),ut=b(At);Ht(ut,21,()=>S,It,(y,tt)=>{var K=Dd(),xt=b(K,!0);w(K);var kt={};gt(()=>{Pt(xt,l(tt).label),kt!==(kt=l(tt).id)&&(K.value=(K.__value=l(tt).id)??"")}),C(y,K)}),w(ut),Cr(2),w(At);var Nt=p(At,4),Ft=b(Nt),Qt=b(Ft);Qt.value=Qt.__value="week";var Oe=p(Qt);Oe.value=Oe.__value="month";var rr=p(Oe);rr.value=rr.__value="year";var ir=p(rr);ir.value=ir.__value="specific_week";var ar=p(ir);ar.value=ar.__value="specific_month";var or=p(ar);or.value=or.__value="specific_year";var yi=p(or);yi.value=yi.__value="all",w(Ft),Cr(2),w(Nt);var ja=p(Nt,2);{var $a=y=>{var tt=Nd(),K=b(tt);xi(K),w(tt),bi(K,()=>l(c),xt=>ue(c,xt)),C(y,tt)},to=y=>{var tt=re(),K=qt(tt);{var xt=pt=>{var _t=Fd(),ht=b(_t);xi(ht),w(_t),bi(ht,()=>l(c),vt=>ue(c,vt)),C(pt,_t)},kt=pt=>{var _t=re(),ht=qt(_t);{var vt=Lt=>{var Wt=Ud(),Ut=b(Wt),oe=b(Ut);oe.value=oe.__value="";var wt=p(oe);Ht(wt,17,()=>l(u),It,(_e,Yt)=>{var Ct=Ld(),we=b(Ct,!0);w(Ct);var Re={};gt(He=>{Pt(we,l(Yt)),Re!==(Re=He)&&(Ct.value=(Ct.__value=He)??"")},[()=>String(l(Yt))]),C(_e,Ct)}),w(Ut),Cr(2),w(Wt),Sr(Ut,()=>l(c),_e=>ue(c,_e)),C(Lt,Wt)};q(ht,Lt=>{l(s)==="specific_year"&&Lt(vt)},!0)}C(pt,_t)};q(K,pt=>{l(s)==="specific_month"?pt(xt):pt(kt,!1)},!0)}C(y,tt)};q(ja,y=>{l(s)==="specific_week"?y($a):y(to,!1)})}w(_);var pi=p(_,2),sr=b(pi),eo=b(sr,!0);w(sr);var no=p(sr,2);{var ro=y=>{var tt=Ed();C(y,tt)},io=y=>{var tt=re(),K=qt(tt);{var xt=pt=>{var _t=Yd(),ht=b(_t),vt=p(b(ht),2);fa(vt,{get data(){return l(d)},valueAccessor:wt=>wt.value,labelAccessor:wt=>wt.label,colorAccesor:wt=>wt.color}),w(ht);var Lt=p(ht,2),Wt=p(b(Lt),2);fa(Wt,{get data(){return l(v)},valueAccessor:wt=>wt.value,labelAccessor:wt=>wt.label,colorAccesor:wt=>wt.color}),w(Lt);var Ut=p(Lt,2),oe=p(b(Ut),2);ze(oe,{get data(){return l(x)},xAccessor:wt=>wt.label,yAccessor:wt=>wt.value,orientation:"vertical",height:300}),w(Ut),w(_t),C(pt,_t)},kt=pt=>{var _t=re(),ht=qt(_t);{var vt=Wt=>{var Ut=Rd(),oe=p(b(Ut),2);{var wt=Yt=>{ze(Yt,{get data(){return l(k)},xAccessor:Ct=>Ct.label,yAccessor:Ct=>Ct.value,orientation:"horizontal",marginLeft:140,color:"#E6B72B"})},_e=Yt=>{var Ct=Od();C(Yt,Ct)};q(oe,Yt=>{l(k).length>0?Yt(wt):Yt(_e,!1)})}w(Ut),C(Wt,Ut)},Lt=Wt=>{var Ut=re(),oe=qt(Ut);{var wt=Yt=>{var Ct=Wd(),we=b(Ct),Re=p(b(we),2);{var He=et=>{kn(et,{get data(){return l(R)},xAccessor:G=>G.label,get keys(){return n},get colors(){return r},get labels(){return i}})},me=et=>{var G=Hd();C(et,G)};q(Re,et=>{l(R).length>0?et(He):et(me,!1)})}w(we);var se=p(we,2),xe=p(b(se),2);{var je=et=>{kn(et,{get data(){return l(F)},xAccessor:G=>G.label,get keys(){return n},get colors(){return r},get labels(){return i}})},$e=et=>{var G=Id();C(et,G)};q(xe,et=>{l(F).length>0?et(je):et($e,!1)})}w(se);var Xt=p(se,2),Zt=p(b(Xt),2);{var be=et=>{kn(et,{get data(){return l(P)},xAccessor:G=>G.label,get keys(){return n},get colors(){return r},get labels(){return i}})},Te=et=>{var G=Pd();C(et,G)};q(Zt,et=>{l(P).length>0?et(be):et(Te,!1)})}w(Xt);var ye=p(Xt,2),St=p(b(ye),2);{var Ot=et=>{kn(et,{get data(){return l(H)},xAccessor:G=>G.label,get keys(){return n},get colors(){return r},get labels(){return i}})},le=et=>{var G=zd();C(et,G)};q(St,et=>{l(H).length>0?et(Ot):et(le,!1)})}w(ye),w(Ct),C(Yt,Ct)},_e=Yt=>{var Ct=re(),we=qt(Ct);{var Re=me=>{var se=qd(),xe=qt(se),je=p(b(xe),2);{var $e=G=>{ze(G,{get data(){return l(E)},xAccessor:mt=>mt.label,yAccessor:mt=>mt.value,orientation:"horizontal",marginLeft:150,color:"#2E8B8B"})},Xt=G=>{var mt=Vd();C(G,mt)};q(je,G=>{l(E).length>0?G($e):G(Xt,!1)})}w(xe);var Zt=p(xe,2),be=p(b(Zt),2);{var Te=G=>{ze(G,{get data(){return l(U)},xAccessor:mt=>mt.label,yAccessor:mt=>mt.value,orientation:"horizontal",marginLeft:150,color:"#F4C430"})},ye=G=>{var mt=Bd();C(G,mt)};q(be,G=>{l(U).length>0?G(Te):G(ye,!1)})}w(Zt);var St=p(Zt,2),Ot=p(b(St),2);{var le=G=>{ze(G,{get data(){return l(A)},xAccessor:mt=>mt.label,yAccessor:mt=>mt.value,orientation:"horizontal",marginLeft:150,color:"#8B4513"})},et=G=>{var mt=Gd();C(G,mt)};q(Ot,G=>{l(A).length>0?G(le):G(et,!1)})}w(St),C(me,se)},He=me=>{var se=re(),xe=qt(se);{var je=Xt=>{var Zt=Zd(),be=p(b(Zt),2);{var Te=St=>{ze(St,{get data(){return l(B)},xAccessor:Ot=>pe("%Y-%W")(Ot.date),yAccessor:Ot=>Ot.value,orientation:"vertical",color:"#F4C430"})},ye=St=>{var Ot=Xd();C(St,Ot)};q(be,St=>{l(B).length>0?St(Te):St(ye,!1)})}w(Zt),C(Xt,Zt)},$e=Xt=>{var Zt=re(),be=qt(Zt);{var Te=St=>{var Ot=$d(),le=b(Ot),et=p(b(le),2);{var G=st=>{Tt(st,{get data(){return l(ft)},xAccessor:nt=>nt.date,yAccessor:nt=>nt.value,zAccessor:nt=>nt.series})},mt=st=>{var nt=Jd();C(st,nt)};q(et,st=>{l(ft).length>0?st(G):st(mt,!1)})}w(le);var Me=p(le,2),lr=p(b(Me),2);{var cr=st=>{Tt(st,{get data(){return l(J)},xAccessor:nt=>nt.date,yAccessor:nt=>nt.value,zAccessor:nt=>nt.series})},ur=st=>{var nt=Qd();C(st,nt)};q(lr,st=>{l(J).length>0?st(cr):st(ur,!1)})}w(Me);var Ae=p(Me,2),fr=p(b(Ae),2);{var hr=st=>{Tt(st,{get data(){return l(lt)},xAccessor:nt=>nt.date,yAccessor:nt=>nt.value,zAccessor:nt=>nt.series,color:"#9B59B6"})},dr=st=>{var nt=Kd();C(st,nt)};q(fr,st=>{l(lt).length>0?st(hr):st(dr,!1)})}w(Ae);var Ie=p(Ae,2),vr=p(b(Ie),2);{var gr=st=>{Tt(st,{get data(){return l(L)},xAccessor:nt=>nt.date,yAccessor:nt=>nt.value,zAccessor:nt=>nt.series,color:"#3498DB"})},mr=st=>{var nt=jd();C(st,nt)};q(vr,st=>{l(L).length>0?st(gr):st(mr,!1)})}w(Ie),w(Ot),C(St,Ot)},ye=St=>{var Ot=re(),le=qt(Ot);{var et=G=>{var mt=gv(),Me=b(mt),lr=p(b(Me),2);{var cr=m=>{Tt(m,{get data(){return l(W)},xAccessor:g=>g.date,yAccessor:g=>g.value,zAccessor:g=>g.series})},ur=m=>{var g=tv();C(m,g)};q(lr,m=>{l(W).length>0?m(cr):m(ur,!1)})}w(Me);var Ae=p(Me,2),fr=p(b(Ae),2);{var hr=m=>{Tt(m,{get data(){return l(j)},xAccessor:g=>g.date,yAccessor:g=>g.value,zAccessor:g=>g.series})},dr=m=>{var g=ev();C(m,g)};q(fr,m=>{l(j).length>0?m(hr):m(dr,!1)})}w(Ae);var Ie=p(Ae,2),vr=p(b(Ie),2);{var gr=m=>{Tt(m,{get data(){return l(O)},xAccessor:g=>g.date,yAccessor:g=>g.value,zAccessor:g=>g.series})},mr=m=>{var g=nv();C(m,g)};q(vr,m=>{l(O).length>0?m(gr):m(mr,!1)})}w(Ie);var st=p(Ie,2),nt=p(b(st),2);{var ao=m=>{Tt(m,{get data(){return l(N)},xAccessor:g=>g.date,yAccessor:g=>g.value,zAccessor:g=>g.series})},oo=m=>{var g=rv();C(m,g)};q(nt,m=>{l(N).length>0?m(ao):m(oo,!1)})}w(st);var yr=p(st,2),so=p(b(yr),2);{var lo=m=>{Tt(m,{get data(){return l(Y)},xAccessor:g=>g.date,yAccessor:g=>g.value,zAccessor:g=>g.series})},co=m=>{var g=iv();C(m,g)};q(so,m=>{l(Y).length>0?m(lo):m(co,!1)})}w(yr);var pr=p(yr,2),uo=p(b(pr),2);{var fo=m=>{Tt(m,{get data(){return l(D)},xAccessor:g=>g.date,yAccessor:g=>g.value,zAccessor:g=>g.series})},ho=m=>{var g=av();C(m,g)};q(uo,m=>{l(D).length>0?m(fo):m(ho,!1)})}w(pr);var _r=p(pr,2),vo=p(b(_r),2);{var go=m=>{Tt(m,{get data(){return l(Q)},xAccessor:g=>g.date,yAccessor:g=>g.value,zAccessor:g=>g.series})},mo=m=>{var g=ov();C(m,g)};q(vo,m=>{l(Q).length>0?m(go):m(mo,!1)})}w(_r);var wr=p(_r,2),yo=p(b(wr),2);{var po=m=>{Tt(m,{get data(){return l(rt)},xAccessor:g=>g.date,yAccessor:g=>g.value,zAccessor:g=>g.series})},_o=m=>{var g=sv();C(m,g)};q(yo,m=>{l(rt).length>0?m(po):m(_o,!1)})}w(wr);var xr=p(wr,2),wo=p(b(xr),2);{var xo=m=>{Tt(m,{get data(){return l(ct)},xAccessor:g=>g.date,yAccessor:g=>g.value,zAccessor:g=>g.series})},bo=m=>{var g=lv();C(m,g)};q(wo,m=>{l(ct).length>0?m(xo):m(bo,!1)})}w(xr);var br=p(xr,2),To=p(b(br),2);{var Mo=m=>{Tt(m,{get data(){return l($)},xAccessor:g=>g.date,yAccessor:g=>g.value,zAccessor:g=>g.series})},Ao=m=>{var g=cv();C(m,g)};q(To,m=>{l($).length>0?m(Mo):m(Ao,!1)})}w(br);var Tr=p(br,2),ko=p(b(Tr),2);{var Co=m=>{Tt(m,{get data(){return l(it)},xAccessor:g=>g.date,yAccessor:g=>g.value,zAccessor:g=>g.series})},So=m=>{var g=uv();C(m,g)};q(ko,m=>{l(it).length>0?m(Co):m(So,!1)})}w(Tr);var Mr=p(Tr,2),Do=p(b(Mr),2);{var No=m=>{Tt(m,{get data(){return l(at)},xAccessor:g=>g.date,yAccessor:g=>g.value,zAccessor:g=>g.series})},Fo=m=>{var g=fv();C(m,g)};q(Do,m=>{l(at).length>0?m(No):m(Fo,!1)})}w(Mr);var Ar=p(Mr,2),Lo=p(b(Ar),2);{var Uo=m=>{Tt(m,{get data(){return l(Et)},xAccessor:g=>g.date,yAccessor:g=>g.value,zAccessor:g=>g.series})},Eo=m=>{var g=hv();C(m,g)};q(Lo,m=>{l(Et).length>0?m(Uo):m(Eo,!1)})}w(Ar);var kr=p(Ar,2),Yo=p(b(kr),2);{var Oo=m=>{Tt(m,{get data(){return l(bt)},xAccessor:g=>g.date,yAccessor:g=>g.value,zAccessor:g=>g.series})},Ro=m=>{var g=dv();C(m,g)};q(Yo,m=>{l(bt).length>0?m(Oo):m(Ro,!1)})}w(kr);var _i=p(kr,2),Ho=p(b(_i),2);{var Io=m=>{Tt(m,{get data(){return l(ee)},xAccessor:g=>g.date,yAccessor:g=>g.value,zAccessor:g=>g.series})},Po=m=>{var g=vv();C(m,g)};q(Ho,m=>{l(ee).length>0?m(Io):m(Po,!1)})}w(_i),w(mt),C(G,mt)};q(le,G=>{l(o)==="load"&&G(et)},!0)}C(St,Ot)};q(be,St=>{l(o)==="strength"?St(Te):St(ye,!1)},!0)}C(Xt,Zt)};q(xe,Xt=>{l(o)==="periodization"?Xt(je):Xt($e,!1)},!0)}C(me,se)};q(we,me=>{l(o)==="venues"?me(Re):me(He,!1)},!0)}C(Yt,Ct)};q(oe,Yt=>{l(o)==="grades"?Yt(wt):Yt(_e,!1)},!0)}C(Wt,Ut)};q(ht,Wt=>{l(o)==="systems"?Wt(vt):Wt(Lt,!1)},!0)}C(pt,_t)};q(K,pt=>{l(o)==="general"?pt(xt):pt(kt,!1)})}C(y,tt)};q(no,y=>{l(a).length===0?y(ro):y(io,!1)})}w(pi),w(Z),gt(()=>Pt(eo,l(X))),Sr(ut,()=>l(o),y=>ue(o,y)),Sr(Ft,()=>l(s),y=>ue(s,y)),C(t,Z),gn()}export{Mv as component};
