import{f as v,a as i,c as Ke,t as At}from"../chunks/DUbgAile.js";import{p as zt,c as a,s,k as e,aL as b,r as t,t as p,a as Et,z as l,b1 as Kt,f as He,ar as Ut,aM as ut,y as ft,o as aa,b9 as ra,e as oa}from"../chunks/DaGARe-0.js";import{d as xt,s as o}from"../chunks/Bakgm2wc.js";import{i as c}from"../chunks/CUckLC5A.js";import{h as lt,r as Je,i as je,j as Me,p as da}from"../chunks/DBqONLHR.js";import{b as We,a as Pt,c as na,m as ca,f as ot,u as ia,n as _a,o as pa,p as la,q as ua,r as fa,t as ga,g as ma,v as ba,w as ha,x as ya,y as xa,z as wa,A as ka}from"../chunks/DPE7s4ba.js";import{t as dt,c as ct,D as $t,g as Sa,a as Ta,E as Da}from"../chunks/D95HXmMX.js";import{s as gt}from"../chunks/CD1qkUQ9.js";import{p as ea}from"../chunks/DKI8ZABo.js";var qa=v('<span class="chevron svelte-12crvy">‚ñ≤</span>'),za=v('<span class="chevron svelte-12crvy">‚ñº</span>'),Ea=v('<div class="input-with-action svelte-12crvy"><input type="text" id="location-manual" placeholder="Custom location..." class="flat-left svelte-12crvy"/> <button type="button" class="action-btn flat-right svelte-12crvy" title="Back to list">‚úï</button></div>'),Fa=v("<option> </option>"),La=v('<select id="location-filter" class="svelte-12crvy"><option>Any Location</option><!></select>'),Ca=v("<option> </option>"),Na=v("<option> </option>"),Ga=v('<div class="filter-body svelte-12crvy"><div class="filter-grid svelte-12crvy"><div class="filter-item svelte-12crvy"><label for="start-date" class="svelte-12crvy">Start Date</label> <input type="date" id="start-date" class="svelte-12crvy"/></div> <div class="filter-item svelte-12crvy"><label for="end-date" class="svelte-12crvy">End Date</label> <input type="date" id="end-date" class="svelte-12crvy"/></div> <div class="filter-item svelte-12crvy"><label for="location-filter" class="svelte-12crvy">Location</label> <!></div> <div class="filter-item svelte-12crvy"><label for="climbing-type-filter" class="svelte-12crvy">Climb Type</label> <select id="climbing-type-filter" class="svelte-12crvy"><option>Any Type</option><!></select></div> <div class="filter-item svelte-12crvy"><label for="session-type-filter" class="svelte-12crvy">Session Type</label> <select id="session-type-filter" class="svelte-12crvy"><option>Any Type</option><!></select></div> <div class="filter-item svelte-12crvy"><label for="grade-filter" class="svelte-12crvy">Grade (Exact)</label> <input type="text" id="grade-filter" placeholder="e.g. V4" class="svelte-12crvy"/></div></div> <div class="filter-actions svelte-12crvy"><button class="reset-btn svelte-12crvy">Reset Filters</button></div></div>'),ja=v('<div class="filter-container svelte-12crvy"><button class="filter-header svelte-12crvy"><div class="header-content svelte-12crvy"><span class="icon svelte-12crvy">üîç</span> <span class="title svelte-12crvy">Filters</span> <!></div></button> <!></div>');function Oa(Ne,d){zt(d,!0);const r=["Rockstar Swindon","Flashpoint Swindon","Flashpoint Bristol","Redpoint Bristol","TCH Bristol","Other"],h=["Bouldering","Sport","Mixed"],q=["Projecting","Onsighting","Campusing","Repeaters"];let x=b(!1),f=b(""),F=b(""),w=b(""),P=b(""),re=b(""),B=b(""),ge=b(!1);function W(){l(x,!e(x))}function $(){l(f,""),l(F,""),l(w,""),l(P,""),l(ge,!1),l(re,""),l(B,""),O()}function O(){d.onFilterParamsChange({startDate:e(f),endDate:e(F),location:e(w),climbingType:e(P),sessionType:e(re),grade:e(B)})}function be(){e(w)==="Other"?(l(ge,!0),l(w,"")):O()}function ce(){l(ge,!1),l(w,""),O()}var De=ja(),te=a(De);te.__click=W;var ie=a(te),le=s(a(ie),4);{var he=j=>{var Q=qa();i(j,Q)},Se=j=>{var Q=za();i(j,Q)};c(le,j=>{e(x)?j(he):j(Se,!1)})}t(ie),t(te);var G=s(te,2);{var ae=j=>{var Q=Ga(),ne=a(Q),ve=a(ne),T=s(a(ve),2);Je(T),T.__change=O,t(ve);var z=s(ve,2),H=s(a(z),2);Je(H),H.__change=O,t(z);var n=s(z,2),_=s(a(n),2);{var D=_e=>{var A=Ea(),k=a(A);Je(k),k.__input=O;var we=s(k,2);we.__click=ce,t(A),We(k,()=>e(w),Fe=>l(w,Fe)),i(_e,A)},ee=_e=>{var A=La();A.__change=be;var k=a(A);k.value=k.__value="";var we=s(k);je(we,17,()=>r,Me,(Fe,pe)=>{var ue=Fa(),Y=a(ue,!0);t(ue);var ye={};p(()=>{o(Y,e(pe)),ye!==(ye=e(pe))&&(ue.value=(ue.__value=e(pe))??"")}),i(Fe,ue)}),t(A),Pt(A,()=>e(w),Fe=>l(w,Fe)),i(_e,A)};c(_,_e=>{e(ge)?_e(D):_e(ee,!1)})}t(n);var oe=s(n,2),qe=s(a(oe),2);qe.__change=O;var Oe=a(qe);Oe.value=Oe.__value="";var g=s(Oe);je(g,17,()=>h,Me,(_e,A)=>{var k=Ca(),we=a(k,!0);t(k);var Fe={};p(()=>{o(we,e(A)),Fe!==(Fe=e(A))&&(k.value=(k.__value=e(A))??"")}),i(_e,k)}),t(qe),t(oe);var X=s(oe,2),se=s(a(X),2);se.__change=O;var xe=a(se);xe.value=xe.__value="";var C=s(xe);je(C,17,()=>q,Me,(_e,A)=>{var k=Na(),we=a(k,!0);t(k);var Fe={};p(()=>{o(we,e(A)),Fe!==(Fe=e(A))&&(k.value=(k.__value=e(A))??"")}),i(_e,k)}),t(se),t(X);var Te=s(X,2),ze=s(a(Te),2);Je(ze),ze.__input=O,t(Te),t(ne);var Ae=s(ne,2),Ve=a(Ae);Ve.__click=$,t(Ae),t(Q),We(T,()=>e(f),_e=>l(f,_e)),We(H,()=>e(F),_e=>l(F,_e)),Pt(qe,()=>e(P),_e=>l(P,_e)),Pt(se,()=>e(re),_e=>l(re,_e)),We(ze,()=>e(B),_e=>l(B,_e)),dt(3,Q,()=>ct,()=>({duration:200})),i(j,Q)};c(G,j=>{e(x)&&j(ae)})}t(De),p(()=>lt(te,"aria-expanded",e(x))),i(Ne,De),Et()}xt(["click","change","input"]);var Aa=v('<label class="type-toggle svelte-yz0xxt"><input type="checkbox"/> <span>Sport?</span></label>'),Pa=v("<option> </option>"),Ma=v('<div class="edit-form svelte-yz0xxt"><div class="edit-row main svelte-yz0xxt"><input type="text" class="edit-input grade svelte-yz0xxt" placeholder="Grade"/> <input type="text" class="edit-input name svelte-yz0xxt" placeholder="Route Name"/> <!></div> <div class="edit-row meta svelte-yz0xxt"><select class="edit-select svelte-yz0xxt"></select> <div class="attempts-input-wrapper svelte-yz0xxt"><span>#</span> <input type="number" min="1" class="edit-input num svelte-yz0xxt"/></div></div> <div class="edit-row notes svelte-yz0xxt"><textarea class="edit-input notes-area svelte-yz0xxt" placeholder="Notes..."></textarea></div> <div class="edit-actions svelte-yz0xxt"><button class="action-btn cancel svelte-yz0xxt">Cancel</button> <button class="action-btn save svelte-yz0xxt">Save</button></div></div>'),Ia=v('<span class="climb-type-tag svelte-yz0xxt"> </span>'),Ba=v('<span class="notes-preview svelte-yz0xxt"> </span>'),Ra=v('<span class="wall-tag svelte-yz0xxt"> </span>'),Va=v('<span class="technique-tag svelte-yz0xxt"> </span>'),Ua=v('<span class="attempts-count svelte-yz0xxt"> </span>'),Wa=v('<div class="detail-row svelte-yz0xxt"><span class="label svelte-yz0xxt">Notes:</span> <p class="notes svelte-yz0xxt"> </p></div>'),Ha=v('<p class="empty-notes svelte-yz0xxt">No notes for this climb.</p>'),Ya=v('<div class="climb-details svelte-yz0xxt"><!> <div class="tags svelte-yz0xxt"><span class="tag type svelte-yz0xxt"> </span> <span class="tag attempt-text svelte-yz0xxt"> </span></div></div>'),Ja=v('<div class="climb-header svelte-yz0xxt" role="button" tabindex="0"><div class="climb-main-info svelte-yz0xxt"><span> </span> <span class="climb-name svelte-yz0xxt"> </span> <!> <!> <!> <!></div> <div class="climb-meta svelte-yz0xxt"><span><span class="icon svelte-yz0xxt"> </span> <!></span> <button class="icon-btn edit-btn svelte-yz0xxt" aria-label="Edit climb" title="Edit climb">‚úé</button> <button class="icon-btn delete-btn svelte-yz0xxt" aria-label="Delete climb" title="Delete climb">üóëÔ∏è</button> <span class="chevron svelte-yz0xxt"> </span></div></div> <!>',1),Za=v("<div><!></div>");function Xa(Ne,d){zt(d,!0);let r=ea(d,"showClimbType",3,!1),h=b(!1),q=b(!1),x=b(""),f=b(""),F=b(""),w=b(1),P=b(""),re=b(!1);function B(){e(q)||l(h,!e(h))}function ge(G){G.stopPropagation(),d.onDelete()}function W(G){G.stopPropagation(),l(x,d.climb.name,!0),l(f,d.climb.grade,!0),l(F,d.climb.attemptType,!0),l(w,d.climb.attemptsNum,!0),l(P,d.climb.notes,!0),l(re,d.climb.isSport,!0),l(q,!0),l(h,!0)}function $(G){G.stopPropagation(),l(q,!1)}function O(G){G.stopPropagation();const ae={...d.climb,name:e(x),grade:e(f),attemptType:e(F),attemptsNum:e(w),notes:e(P),isSport:e(re)};d.onUpdate(ae),l(q,!1)}function be(){(e(F)==="Flash"||e(F)==="Onsight")&&l(w,1)}const ce={Flash:"‚ö°",Onsight:"üëÅÔ∏è",Redpoint:"üî¥",Dogged:"üõ†Ô∏è",DNF:"‚ùå"},De=["Flash","Onsight","Redpoint","Dogged","DNF"];var te=Za();let ie;var le=a(te);{var he=G=>{var ae=Ma(),j=a(ae),Q=a(j);Je(Q);var ne=s(Q,2);Je(ne);var ve=s(ne,2);{var T=g=>{var X=Aa(),se=a(X);Je(se),Ut(2),t(X),na(se,()=>e(re),xe=>l(re,xe)),i(g,X)};c(ve,g=>{r()&&g(T)})}t(j);var z=s(j,2),H=a(z);H.__change=be,je(H,21,()=>De,Me,(g,X)=>{var se=Pa(),xe=a(se,!0);t(se);var C={};p(()=>{o(xe,e(X)),C!==(C=e(X))&&(se.value=(se.__value=e(X))??"")}),i(g,se)}),t(H);var n=s(H,2),_=s(a(n),2);Je(_),t(n),t(z);var D=s(z,2),ee=a(D);Kt(ee),t(D);var oe=s(D,2),qe=a(oe);qe.__click=$;var Oe=s(qe,2);Oe.__click=O,t(oe),t(ae),p(()=>_.disabled=e(F)==="Flash"||e(F)==="Onsight"),We(Q,()=>e(f),g=>l(f,g)),We(ne,()=>e(x),g=>l(x,g)),Pt(H,()=>e(F),g=>l(F,g)),We(_,()=>e(w),g=>l(w,g)),We(ee,()=>e(P),g=>l(P,g)),i(G,ae)},Se=G=>{var ae=Ja(),j=He(ae);j.__click=B,j.__keydown=pe=>(pe.key==="Enter"||pe.key===" ")&&B();var Q=a(j),ne=a(Q);let ve;var T=a(ne,!0);t(ne);var z=s(ne,2),H=a(z,!0);t(z);var n=s(z,2);{var _=pe=>{var ue=Ia(),Y=a(ue,!0);t(ue),p(()=>o(Y,d.climb.isSport?"Sport":"Boulder")),i(pe,ue)};c(n,pe=>{r()&&pe(_)})}var D=s(n,2);{var ee=pe=>{var ue=Ba(),Y=a(ue);t(ue),p(()=>o(Y,`- ${d.climb.notes??""}`)),i(pe,ue)};c(D,pe=>{!e(h)&&d.climb.notes&&pe(ee)})}var oe=s(D,2);{var qe=pe=>{var ue=Ra(),Y=a(ue,!0);t(ue),p(()=>o(Y,d.climb.wall)),i(pe,ue)};c(oe,pe=>{d.climb.wall&&pe(qe)})}var Oe=s(oe,2);{var g=pe=>{var ue=Va(),Y=a(ue,!0);t(ue),p(()=>o(Y,d.climb.techniqueFocus)),i(pe,ue)};c(Oe,pe=>{d.climb.techniqueFocus&&pe(g)})}t(Q);var X=s(Q,2),se=a(X);let xe;var C=a(se),Te=a(C,!0);t(C);var ze=s(C,2);{var Ae=pe=>{var ue=Ua(),Y=a(ue,!0);t(ue),p(()=>o(Y,d.climb.attemptsNum)),i(pe,ue)};c(ze,pe=>{d.climb.attemptType!=="Flash"&&d.climb.attemptType!=="Onsight"&&pe(Ae)})}t(se);var Ve=s(se,2);Ve.__click=W;var _e=s(Ve,2);_e.__click=ge;var A=s(_e,2),k=a(A,!0);t(A),t(X),t(j);var we=s(j,2);{var Fe=pe=>{var ue=Ya(),Y=a(ue);{var ye=V=>{var fe=Wa(),E=s(a(fe),2),L=a(E,!0);t(E),t(fe),p(()=>o(L,d.climb.notes)),i(V,fe)},m=V=>{var fe=Ha();i(V,fe)};c(Y,V=>{d.climb.notes?V(ye):V(m,!1)})}var M=s(Y,2),J=a(M),de=a(J,!0);t(J);var y=s(J,2),R=a(y,!0);t(y),t(M),t(ue),p(()=>{o(de,d.climb.isSport?"Sport":"Boulder"),o(R,d.climb.attemptType)}),dt(3,ue,()=>ct,()=>({duration:150})),i(pe,ue)};c(we,pe=>{e(h)&&pe(Fe)})}p(()=>{lt(j,"aria-expanded",e(h)),ve=gt(ne,1,"grade-badge svelte-yz0xxt",null,ve,{sport:d.climb.isSport}),o(T,d.climb.grade),o(H,d.climb.name||"Unnamed Route"),xe=gt(se,1,"attempt-type svelte-yz0xxt",null,xe,{flash:d.climb.attemptType==="Flash"}),o(Te,ce[d.climb.attemptType]||d.climb.attemptType),o(k,e(h)?"‚ñ≤":"‚ñº")}),i(G,ae)};c(le,G=>{e(q)?G(he):G(Se,!1)})}t(te),p(()=>ie=gt(te,1,"climb-entry svelte-yz0xxt",null,ie,{expanded:e(h),editing:e(q)})),i(Ne,te),Et()}xt(["change","click","keydown"]);var Ka=v('<span class="stat svelte-7vqogn"> </span>'),Qa=v('<span class="status-icon pending svelte-7vqogn" title="Waiting to sync">üîÑ</span>'),$a=v('<span class="status-icon error svelte-7vqogn" title="Sync error">‚ö†Ô∏è</span>'),es=v('<span class="chip svelte-7vqogn"> </span>'),ts=v('<span class="text-none svelte-7vqogn">None</span>'),as=v('<div class="detail-item svelte-7vqogn"><span class="label svelte-7vqogn">Difficulty</span> <span class="value svelte-7vqogn"> </span></div>'),ss=v('<span class="chip svelte-7vqogn"> </span>'),rs=v('<span class="text-none svelte-7vqogn">None</span>'),is=v('<div class="detail-item svelte-7vqogn"><span class="label svelte-7vqogn">Category</span> <div class="value-chips svelte-7vqogn"><!></div></div>'),ls=v('<span class="chip svelte-7vqogn"> </span>'),ns=v('<span class="text-none svelte-7vqogn">None</span>'),vs=v('<div class="detail-item svelte-7vqogn"><span class="label svelte-7vqogn">Energy System</span> <div class="value-chips svelte-7vqogn"><!></div></div>'),os=v('<span class="chip svelte-7vqogn"> </span>'),ds=v('<span class="text-none svelte-7vqogn">None</span>'),cs=v('<div class="detail-item svelte-7vqogn"><span class="label svelte-7vqogn">Wall</span> <div class="value-chips svelte-7vqogn"><!></div></div>'),_s=v('<button class="icon-btn edit-notes-btn svelte-7vqogn" title="Edit Notes">‚úé</button>'),ps=v('<div class="edit-notes-area"><textarea placeholder="Add session notes..." rows="3" class="notes-editor svelte-7vqogn"></textarea> <div class="edit-actions svelte-7vqogn"><button class="cancel-btn svelte-7vqogn">Cancel</button> <button class="save-btn svelte-7vqogn"> </button></div></div>'),us=v('<p class="notes-text svelte-7vqogn"> </p>'),fs=v('<p class="notes-placeholder svelte-7vqogn">No notes.</p>'),gs=v('<div class="metric svelte-7vqogn"><span class="label svelte-7vqogn">Open Grip</span> <div class="bar-container svelte-7vqogn"><div class="bar-fill svelte-7vqogn"></div></div> <span class="score svelte-7vqogn"> </span></div>'),ms=v('<div class="metric svelte-7vqogn"><span class="label svelte-7vqogn">Crimp Grip</span> <div class="bar-container svelte-7vqogn"><div class="bar-fill svelte-7vqogn"></div></div> <span class="score svelte-7vqogn"> </span></div>'),bs=v('<div class="metric svelte-7vqogn"><span class="label svelte-7vqogn">Pinch Grip</span> <div class="bar-container svelte-7vqogn"><div class="bar-fill svelte-7vqogn"></div></div> <span class="score svelte-7vqogn"> </span></div>'),hs=v('<div class="metric svelte-7vqogn"><span class="label svelte-7vqogn">Sloper Grip</span> <div class="bar-container svelte-7vqogn"><div class="bar-fill svelte-7vqogn"></div></div> <span class="score svelte-7vqogn"> </span></div>'),ys=v('<div class="metric svelte-7vqogn"><span class="label svelte-7vqogn">Jug Grip</span> <div class="bar-container svelte-7vqogn"><div class="bar-fill svelte-7vqogn"></div></div> <span class="score svelte-7vqogn"> </span></div>'),xs=v('<p class="no-climbs svelte-7vqogn">No climbs logged for this session.</p>'),ws=v('<div class="card-body svelte-7vqogn"><div class="details-grid svelte-7vqogn"><div class="detail-item svelte-7vqogn"><span class="label svelte-7vqogn">Training Type</span> <div class="value-chips svelte-7vqogn"><!></div></div> <!> <!> <!> <!></div> <div class="notes-container svelte-7vqogn"><div class="notes-header svelte-7vqogn"><span class="label svelte-7vqogn">Session Notes</span> <!></div> <!></div> <div class="metrics-container svelte-7vqogn"><div class="metric svelte-7vqogn"><span class="label svelte-7vqogn">Finger Load</span> <div class="bar-container svelte-7vqogn"><div class="bar-fill svelte-7vqogn"></div></div> <span class="score svelte-7vqogn"> </span></div> <div class="metric svelte-7vqogn"><span class="label svelte-7vqogn">Shoulder Load</span> <div class="bar-container svelte-7vqogn"><div class="bar-fill svelte-7vqogn"></div></div> <span class="score svelte-7vqogn"> </span></div> <div class="metric svelte-7vqogn"><span class="label svelte-7vqogn">Forearm Load</span> <div class="bar-container svelte-7vqogn"><div class="bar-fill svelte-7vqogn"></div></div> <span class="score svelte-7vqogn"> </span></div> <!> <!> <!> <!> <!></div> <div class="climbs-list svelte-7vqogn"><h4 class="svelte-7vqogn">Climbs</h4> <div class="climbs-container svelte-7vqogn"><!> <!></div></div></div>'),ks=v('<div><div class="card-header svelte-7vqogn" role="button" tabindex="0"><div class="header-main svelte-7vqogn"><div class="date-badge svelte-7vqogn"><span class="day svelte-7vqogn"> </span> <span class="month svelte-7vqogn"> </span> <span class="year svelte-7vqogn"> </span></div> <div class="session-info svelte-7vqogn"><div class="session-text svelte-7vqogn"><h3 class="location svelte-7vqogn"> </h3> <div class="meta-row svelte-7vqogn"><span class="time-tag svelte-7vqogn"> </span> <span class="type-tag svelte-7vqogn"> </span></div> <div class="meta-row lowercase svelte-7vqogn"><span class="stat svelte-7vqogn"> </span> <!></div></div> <div class="load-summary svelte-7vqogn"><div class="load-badge finger svelte-7vqogn"> </div> <div class="load-badge shoulder svelte-7vqogn"> </div> <div class="load-badge forearm svelte-7vqogn"> </div></div></div></div> <div class="header-actions"><div class="header-status svelte-7vqogn"><!></div>  <button class="btn-icon delete-session" title="Delete Session">üóëÔ∏è</button> <span class="chevron svelte-7vqogn"> </span></div></div> <!> <!></div>');function Ss(Ne,d){zt(d,!0);let r=ea(d,"session",7),h=b(!1),q=b(!1);function x(){l(h,!e(h))}function f(){l(q,!0)}async function F(){try{const y=await ca(r().id);y.ok?(l(q,!1),d.onDelete()):(console.error("Failed to delete session:",y.error),alert("Failed to delete session: "+y.error))}catch(y){console.error("Exception deleting session:",y),alert("Error deleting session")}}function w(y){const R=[...r().climbs];R.splice(y,1),re(R),d.onDelete()}function P(y,R){const V=[...r().climbs];V[y]=R,re(V)}async function re(y){r().climbs=y;const R={date:r().date,time:r().time||"12:00",location:r().location,customLocation:r().customLocation,climbingType:r().climbingType,trainingTypes:r().trainingTypes||[],difficulty:r().difficulty,categories:r().categories||[],energySystems:r().energySystems||[],wallAngles:r().wallAngles||[],fingerLoad:r().fingerLoad,shoulderLoad:r().shoulderLoad,forearmLoad:r().forearmLoad,openGrip:r().openGrip,crimpGrip:r().crimpGrip,pinchGrip:r().pinchGrip,sloperGrip:r().sloperGrip,jugGrip:r().jugGrip,climbs:y};try{const V=await ia(r().id,R);V.ok||console.error("Failed to sync update:",V.error)}catch(V){console.error("Exception syncing update:",V)}}let B=ut(()=>r().climbs?.length??0),ge=ut(()=>(r().climbs||[]).reduce((y,R)=>{const V=parseInt(R.grade.replace(/\D/g,""))||0,fe=parseInt(y.replace(/\D/g,""))||0;return V>fe?R.grade:y},"V0")),W=b(!1),$=b(""),O=b(!1);function be(){l($,r().notes||"",!0),l(W,!0)}function ce(){l(W,!1),l($,"")}async function De(){if(e(O))return;l(O,!0),r().notes=e($);const y={date:r().date,time:r().time||"12:00",location:r().location,customLocation:r().customLocation,climbingType:r().climbingType,trainingTypes:r().trainingTypes||[],difficulty:r().difficulty,categories:r().categories||[],energySystems:r().energySystems||[],wallAngles:r().wallAngles||[],fingerLoad:r().fingerLoad,shoulderLoad:r().shoulderLoad,forearmLoad:r().forearmLoad,openGrip:r().openGrip,crimpGrip:r().crimpGrip,pinchGrip:r().pinchGrip,sloperGrip:r().sloperGrip,jugGrip:r().jugGrip,climbs:r().climbs,notes:e($)};try{const R=await ia(r().id,y);R.ok||console.error("Failed to sync note update:",R.error)}catch(R){console.error("Exception syncing note update:",R)}l(W,!1),l(O,!1)}var te=ks();let ie;var le=a(te);le.__click=x,le.__keydown=y=>y.key==="Enter"&&x();var he=a(le),Se=a(he),G=a(Se),ae=a(G,!0);t(G);var j=s(G,2),Q=a(j,!0);t(j);var ne=s(j,2),ve=a(ne,!0);t(ne),t(Se);var T=s(Se,2),z=a(T),H=a(z),n=a(H,!0);t(H);var _=s(H,2),D=a(_),ee=a(D);t(D);var oe=s(D,2),qe=a(oe,!0);t(oe),t(_);var Oe=s(_,2),g=a(Oe),X=a(g);t(g);var se=s(g,2);{var xe=y=>{var R=Ka(),V=a(R);t(R),p(()=>o(V,`Max: ${e(ge)??""}`)),i(y,R)};c(se,y=>{e(B)>0&&y(xe)})}t(Oe),t(z);var C=s(z,2),Te=a(C),ze=a(Te,!0);t(Te);var Ae=s(Te,2),Ve=a(Ae,!0);t(Ae);var _e=s(Ae,2),A=a(_e,!0);t(_e),t(C),t(T),t(he);var k=s(he,2),we=a(k),Fe=a(we);{var pe=y=>{var R=Qa();i(y,R)},ue=y=>{var R=Ke(),V=He(R);{var fe=E=>{var L=$a();i(E,L)};c(V,E=>{r().syncStatus==="error"&&E(fe)},!0)}i(y,R)};c(Fe,y=>{r().syncStatus==="pending"?y(pe):y(ue,!1)})}t(we);var Y=s(we,2);Y.__click=y=>{y.stopPropagation(),f()};var ye=s(Y,2),m=a(ye,!0);t(ye),t(k),t(le);var M=s(le,2);{var J=y=>{var R=ws(),V=a(R),fe=a(V),E=s(a(fe),2),L=a(E);{var ke=U=>{var I=Ke(),u=He(I);je(u,17,()=>r().trainingTypes,Me,(S,N)=>{var K=es(),Z=a(K,!0);t(K),p(()=>o(Z,e(N))),i(S,K)}),i(U,I)},$e=U=>{var I=ts();i(U,I)};c(L,U=>{r().trainingTypes&&r().trainingTypes.length>0&&!r().trainingTypes.includes("None")?U(ke):U($e,!1)})}t(E),t(fe);var st=s(fe,2);{var et=U=>{var I=as(),u=s(a(I),2),S=a(u,!0);t(u),t(I),p(()=>o(S,r().difficulty)),i(U,I)};c(st,U=>{r().difficulty&&U(et)})}var Ue=s(st,2);{var Xe=U=>{var I=is(),u=s(a(I),2),S=a(u);{var N=Z=>{var me=Ke(),Be=He(me);je(Be,17,()=>r().categories,Me,(at,Rt)=>{var ht=ss(),Vt=a(ht,!0);t(ht),p(()=>o(Vt,e(Rt))),i(at,ht)}),i(Z,me)},K=Z=>{var me=rs();i(Z,me)};c(S,Z=>{r().categories.length>0&&!r().categories.includes("None")?Z(N):Z(K,!1)})}t(u),t(I),i(U,I)};c(Ue,U=>{r().categories?.length&&U(Xe)})}var tt=s(Ue,2);{var Nt=U=>{var I=vs(),u=s(a(I),2),S=a(u);{var N=Z=>{var me=Ke(),Be=He(me);je(Be,17,()=>r().energySystems,Me,(at,Rt)=>{var ht=ls(),Vt=a(ht,!0);t(ht),p(()=>o(Vt,e(Rt))),i(at,ht)}),i(Z,me)},K=Z=>{var me=ns();i(Z,me)};c(S,Z=>{r().energySystems.length>0&&!r().energySystems.includes("None")?Z(N):Z(K,!1)})}t(u),t(I),i(U,I)};c(tt,U=>{r().energySystems?.length&&U(Nt)})}var rt=s(tt,2);{var wt=U=>{var I=cs(),u=s(a(I),2),S=a(u);{var N=Z=>{var me=Ke(),Be=He(me);je(Be,17,()=>r().wallAngles,Me,(at,Rt)=>{var ht=os(),Vt=a(ht,!0);t(ht),p(()=>o(Vt,e(Rt))),i(at,ht)}),i(Z,me)},K=Z=>{var me=ds();i(Z,me)};c(S,Z=>{r().wallAngles.length>0&&!r().wallAngles.includes("None")?Z(N):Z(K,!1)})}t(u),t(I),i(U,I)};c(rt,U=>{r().wallAngles?.length&&U(wt)})}t(V);var mt=s(V,2),kt=a(mt),yt=s(a(kt),2);{var Gt=U=>{var I=_s();I.__click=be,i(U,I)};c(yt,U=>{e(W)||U(Gt)})}t(kt);var St=s(kt,2);{var Ft=U=>{var I=ps(),u=a(I);Kt(u);var S=s(u,2),N=a(S);N.__click=ce;var K=s(N,2);K.__click=De;var Z=a(K,!0);t(K),t(S),t(I),p(()=>{N.disabled=e(O),K.disabled=e(O),o(Z,e(O)?"Saving...":"Save")}),We(u,()=>e($),me=>l($,me)),dt(3,I,()=>ct,()=>({duration:150})),i(U,I)},Lt=U=>{var I=Ke(),u=He(I);{var S=K=>{var Z=us(),me=a(Z,!0);t(Z),p(()=>o(me,r().notes)),i(K,Z)},N=K=>{var Z=fs();i(K,Z)};c(u,K=>{r().notes?K(S):K(N,!1)},!0)}i(U,I)};c(St,U=>{e(W)?U(Ft):U(Lt,!1)})}t(mt);var bt=s(mt,2),_t=a(bt),Tt=s(a(_t),2),Re=a(Tt);t(Tt);var Ie=s(Tt,2),Pe=a(Ie);t(Ie),t(_t);var Ee=s(_t,2),Le=s(a(Ee),2),Ge=a(Le);t(Le);var Ce=s(Le,2),Ze=a(Ce);t(Ce),t(Ee);var Ye=s(Ee,2),Qe=s(a(Ye),2),nt=a(Qe);t(Qe);var Dt=s(Qe,2),qt=a(Dt);t(Dt),t(Ye);var pt=s(Ye,2);{var Bt=U=>{var I=gs(),u=s(a(I),2),S=a(u);t(u);var N=s(u,2),K=a(N);t(N),t(I),p(()=>{ot(S,`width: ${r().openGrip/5*100}%`),o(K,`${r().openGrip??""}/5`)}),i(U,I)};c(pt,U=>{r().openGrip&&U(Bt)})}var it=s(pt,2);{var Mt=U=>{var I=ms(),u=s(a(I),2),S=a(u);t(u);var N=s(u,2),K=a(N);t(N),t(I),p(()=>{ot(S,`width: ${r().crimpGrip/5*100}%`),o(K,`${r().crimpGrip??""}/5`)}),i(U,I)};c(it,U=>{r().crimpGrip&&U(Mt)})}var jt=s(it,2);{var It=U=>{var I=bs(),u=s(a(I),2),S=a(u);t(u);var N=s(u,2),K=a(N);t(N),t(I),p(()=>{ot(S,`width: ${r().pinchGrip/5*100}%`),o(K,`${r().pinchGrip??""}/5`)}),i(U,I)};c(jt,U=>{r().pinchGrip&&U(It)})}var Ot=s(jt,2);{var vt=U=>{var I=hs(),u=s(a(I),2),S=a(u);t(u);var N=s(u,2),K=a(N);t(N),t(I),p(()=>{ot(S,`width: ${r().sloperGrip/5*100}%`),o(K,`${r().sloperGrip??""}/5`)}),i(U,I)};c(Ot,U=>{r().sloperGrip&&U(vt)})}var Ct=s(Ot,2);{var Qt=U=>{var I=ys(),u=s(a(I),2),S=a(u);t(u);var N=s(u,2),K=a(N);t(N),t(I),p(()=>{ot(S,`width: ${r().jugGrip/5*100}%`),o(K,`${r().jugGrip??""}/5`)}),i(U,I)};c(Ct,U=>{r().jugGrip&&U(Qt)})}t(bt);var Yt=s(bt,2),Wt=s(a(Yt),2),Ht=a(Wt);je(Ht,17,()=>r().climbs||[],Me,(U,I,u)=>{{let S=ut(()=>r().climbingType==="Mixed");Xa(U,{get climb(){return e(I)},onDelete:()=>w(u),onUpdate:N=>P(u,N),get showClimbType(){return e(S)}})}});var Zt=s(Ht,2);{var Xt=U=>{var I=xs();i(U,I)};c(Zt,U=>{(r().climbs||[]).length===0&&U(Xt)})}t(Wt),t(Yt),t(R),p(()=>{ot(Re,`width: ${r().fingerLoad/5*100}%`),o(Pe,`${r().fingerLoad??""}/5`),ot(Ge,`width: ${r().shoulderLoad/5*100}%`),o(Ze,`${r().shoulderLoad??""}/5`),ot(nt,`width: ${r().forearmLoad/5*100}%`),o(qt,`${r().forearmLoad??""}/5`)}),dt(3,R,()=>ct,()=>({duration:150})),i(y,R)};c(M,y=>{e(h)&&y(J)})}var de=s(M,2);$t(de,{get isOpen(){return e(q)},title:"Delete Session",message:"Are you sure you want to delete this session? This action cannot be undone.",onConfirm:F,onCancel:()=>l(q,!1)}),t(te),p((y,R,V)=>{ie=gt(te,1,"session-card svelte-7vqogn",null,ie,{expanded:e(h)}),lt(le,"aria-expanded",e(h)),o(ae,y),o(Q,R),o(ve,V),o(n,r().location),o(ee,`üïí ${(r().time||"12:00")??""}`),o(qe,r().climbingType),o(X,`${e(B)??""} climbs`),lt(Te,"title",`Finger Load: ${r().fingerLoad??""}`),o(ze,r().fingerLoad),lt(Ae,"title",`Shoulder Load: ${r().shoulderLoad??""}`),o(Ve,r().shoulderLoad),lt(_e,"title",`Forearm Load: ${r().forearmLoad??""}`),o(A,r().forearmLoad),o(m,e(h)?"‚ñ≤":"‚ñº")},[()=>new Date(r().date).getDate(),()=>new Date(r().date).toLocaleDateString("en-GB",{month:"short"}),()=>new Date(r().date).getFullYear()]),i(Ne,te),Et()}xt(["click","keydown"]);var Ts=v('<div class="legend-item svelte-11p9lqi"><span class="l-icon svelte-11p9lqi"> </span> <span class="l-label svelte-11p9lqi"> </span></div>'),Ds=v('<div class="legend-content svelte-11p9lqi"><div class="legend-grid svelte-11p9lqi"></div></div>'),qs=v('<div class="legend-container svelte-11p9lqi"><button class="legend-toggle svelte-11p9lqi"><span class="icon">‚ÑπÔ∏è</span> <span class="text">Icon Legend</span> <span class="chevron svelte-11p9lqi"> </span></button> <!></div>');function va(Ne){let d=b(!1);const r=[{icon:"üëÅÔ∏è",label:"Onsight"},{icon:"‚ö°",label:"Flash"},{icon:"üî¥",label:"Redpoint"},{icon:"üõ†Ô∏è",label:"Dogged"},{icon:"‚ùå",label:"DNF"}];var h=qs(),q=a(h);q.__click=()=>l(d,!e(d));var x=s(a(q),4),f=a(x,!0);t(x),t(q);var F=s(q,2);{var w=P=>{var re=Ds(),B=a(re);je(B,21,()=>r,Me,(ge,W)=>{var $=Ts(),O=a($),be=a(O,!0);t(O);var ce=s(O,2),De=a(ce,!0);t(ce),t($),p(()=>{o(be,e(W).icon),o(De,e(W).label)}),i(ge,$)}),t(B),t(re),dt(3,re,()=>ct),i(P,re)};c(F,P=>{e(d)&&P(w)})}t(h),p(()=>{lt(q,"aria-expanded",e(d)),o(f,e(d)?"‚ñº":"‚ñ∂")}),i(Ne,h)}xt(["click"]);function sa(Ne,d){if(!Ne||Ne.length===0){alert("No data to export");return}const r=Array.from(new Set(Ne.flatMap(Object.keys))),h=[r.join(","),...Ne.map(f=>r.map(F=>{let w=f[F];if(w==null)return"";if(typeof w=="object"){if(w instanceof Date)return w.toISOString();w=JSON.stringify(w).replace(/"/g,'""')}else typeof w=="string"&&(w=w.replace(/"/g,'""'));return typeof w=="string"&&(w.includes(",")||w.includes('"')||w.includes(`
`))?`"${w}"`:w}).join(","))].join(`
`),q=new Blob([h],{type:"text/csv;charset=utf-8;"}),x=document.createElement("a");if(x.download!==void 0){const f=URL.createObjectURL(q);x.setAttribute("href",f),x.setAttribute("download",d.endsWith(".csv")?d:`${d}.csv`),x.style.visibility="hidden",document.body.appendChild(x),x.click(),document.body.removeChild(x)}}var zs=v('<span class="spinner svelte-14fqz8w"></span> Fetching...',1),Es=v('<div class="error-banner svelte-14fqz8w"> </div>'),Fs=v('<small class="svelte-14fqz8w">Try adjusting your filters.</small>'),Ls=v('<div class="empty-state svelte-14fqz8w"><p class="svelte-14fqz8w">No indoor climbing sessions found.</p> <!></div>'),Cs=v('<div class="load-more-container svelte-14fqz8w"><button class="load-more-btn svelte-14fqz8w"> </button></div>'),Ns=v('<div class="view-container svelte-14fqz8w"><div class="view-header svelte-14fqz8w"><h2 class="view-title svelte-14fqz8w">üßó Indoor Climbing History</h2> <div class="header-actions svelte-14fqz8w"><button class="action-btn secondary svelte-14fqz8w" title="Export filtered data to CSV">üì• Export</button> <button class="action-btn svelte-14fqz8w" title="Fetch data from cloud"><!></button></div></div> <!> <!> <div class="info-bar svelte-14fqz8w"><div class="legend-wrapper svelte-14fqz8w"><!></div> <div class="load-key svelte-14fqz8w"><span class="key-label svelte-14fqz8w">Load:</span> <div class="key-item svelte-14fqz8w"><span class="dot finger svelte-14fqz8w"></span> Finger</div> <div class="key-item svelte-14fqz8w"><span class="dot shoulder svelte-14fqz8w"></span> Shoulder</div> <div class="key-item svelte-14fqz8w"><span class="dot forearm svelte-14fqz8w"></span> Forearm</div></div></div> <div class="sessions-list"><!> <!> <!></div></div>');function Gs(Ne,d){zt(d,!0);let r=b(ft([])),h=b(ft([])),q=b(!1),x=b(""),f=b(ft({startDate:"",endDate:"",location:"",climbingType:"",sessionType:"",grade:""})),F=b(20);const w=20;aa(()=>{P()});async function P(){l(q,!0),l(x,"");try{const n=await _a();n.ok&&n.data?(l(r,n.data.map(_=>({..._,activityType:"indoor_climb"})),!0),e(r).sort((_,D)=>new Date(D.date).getTime()-new Date(_.date).getTime()),B()):l(x,n.error||"Failed to fetch data",!0)}catch(n){l(x,n instanceof Error?n.message:"Unknown error",!0)}finally{l(q,!1)}}function re(n){l(f,n,!0),B()}function B(){l(F,w),l(h,e(r).filter(n=>{if(e(f).startDate&&n.date<e(f).startDate||e(f).endDate&&n.date>e(f).endDate||e(f).location&&n.location!==e(f).location)return!1;if(e(f).climbingType&&(n.climbingType==="Leading"?"Sport":n.climbingType)!==e(f).climbingType)if(n.climbingType==="Mixed")if(e(f).climbingType==="Bouldering"){if(!n.climbs.some(D=>!D.isSport))return!1}else if(e(f).climbingType==="Sport"){if(!n.climbs.some(D=>D.isSport))return!1}else return!1;else return!1;if(e(f).sessionType&&!n.trainingTypes?.includes(e(f).sessionType))return!1;if(e(f).grade){const _=e(f).grade.trim().toLowerCase();if(!n.climbs.some(ee=>ee.grade.trim().toLowerCase()===_))return!1}return!0}),!0)}function ge(){l(F,e(F)+w)}var W=Ns(),$=a(W),O=s(a($),2),be=a(O);be.__click=()=>sa(e(h),"indoor_climbs");var ce=s(be,2);ce.__click=P;var De=a(ce);{var te=n=>{var _=zs();Ut(),i(n,_)},ie=n=>{var _=At("‚òÅÔ∏è Fetch Data");i(n,_)};c(De,n=>{e(q)?n(te):n(ie,!1)})}t(ce),t(O),t($);var le=s($,2);{var he=n=>{var _=Es(),D=a(_,!0);t(_),p(()=>o(D,e(x))),dt(3,_,()=>ct),i(n,_)};c(le,n=>{e(x)&&n(he)})}var Se=s(le,2);Oa(Se,{onFilterParamsChange:re});var G=s(Se,2),ae=a(G),j=a(ae);va(j),t(ae),Ut(2),t(G);var Q=s(G,2),ne=a(Q);je(ne,17,()=>e(h).slice(0,e(F)),n=>n.id,(n,_)=>{Ss(n,{get session(){return e(_)},onDelete:P})});var ve=s(ne,2);{var T=n=>{var _=Ls(),D=s(a(_),2);{var ee=oe=>{var qe=Fs();i(oe,qe)};c(D,oe=>{e(r).length>0&&oe(ee)})}t(_),i(n,_)};c(ve,n=>{e(h).length===0&&n(T)})}var z=s(ve,2);{var H=n=>{var _=Cs(),D=a(_);D.__click=ge;var ee=a(D);t(D),t(_),p(()=>o(ee,`Load More (${e(h).length-e(F)} remaining)`)),i(n,_)};c(z,n=>{e(F)<e(h).length&&n(H)})}t(Q),t(W),p(()=>ce.disabled=e(q)),i(Ne,W),Et()}xt(["click"]);var js=v('<span class="chevron svelte-1frtlim">‚ñ≤</span>'),Os=v('<span class="chevron svelte-1frtlim">‚ñº</span>'),As=v('<div class="input-with-action svelte-1frtlim"><input type="text" id="area-filter-text" placeholder="Type area name..." class="flat-left svelte-1frtlim"/> <button class="action-btn flat-right svelte-1frtlim" title="Back to list">‚úï</button></div>'),Ps=v("<option> </option>"),Ms=v('<select id="area-filter" class="svelte-1frtlim"><option>All Areas</option><!><option>Other (Manual Entry)</option></select>'),Is=v('<div class="input-with-action svelte-1frtlim"><input type="text" id="crag-filter-text" placeholder="Type crag name..." class="flat-left svelte-1frtlim"/> <button class="action-btn flat-right svelte-1frtlim" title="Back to list">‚úï</button></div>'),Bs=v("<option> </option>"),Rs=v('<select id="crag-filter" class="svelte-1frtlim"><option>All Crags</option><!><option>Other (Manual Entry)</option></select>'),Vs=v('<input type="text" id="crag-filter-text" class="svelte-1frtlim"/>'),Us=v("<option> </option>"),Ws=v("<option> </option>"),Hs=v('<div class="filter-body svelte-1frtlim"><div class="filter-grid svelte-1frtlim"><div class="filter-item svelte-1frtlim"><label for="start-date" class="svelte-1frtlim">Start Date</label> <input type="date" id="start-date" class="svelte-1frtlim"/></div> <div class="filter-item svelte-1frtlim"><label for="end-date" class="svelte-1frtlim">End Date</label> <input type="date" id="end-date" class="svelte-1frtlim"/></div> <div class="filter-item svelte-1frtlim"><label for="area-filter" class="svelte-1frtlim">Area</label> <!></div> <div class="filter-item svelte-1frtlim"><label for="crag-filter" class="svelte-1frtlim">Crag</label> <!></div> <div class="filter-item svelte-1frtlim"><label for="climbing-type-filter" class="svelte-1frtlim">Climb Type</label> <select id="climbing-type-filter" class="svelte-1frtlim"><option>Any Type</option><!></select></div> <div class="filter-item svelte-1frtlim"><label for="session-type-filter" class="svelte-1frtlim">Session Type</label> <select id="session-type-filter" class="svelte-1frtlim"><option>Any Type</option><!></select></div> <div class="filter-item svelte-1frtlim"><label for="grade-filter" class="svelte-1frtlim">Grade (Exact)</label> <input type="text" id="grade-filter" placeholder="e.g. 7a" class="svelte-1frtlim"/></div></div> <div class="filter-actions svelte-1frtlim"><button class="reset-btn svelte-1frtlim">Reset Filters</button></div></div>'),Ys=v('<div class="filter-container svelte-1frtlim"><button class="filter-header svelte-1frtlim"><div class="header-content svelte-1frtlim"><span class="icon svelte-1frtlim">üîç</span> <span class="title svelte-1frtlim">Filters</span> <!></div></button> <!></div>');function Js(Ne,d){zt(d,!0);const r=Sa(),h=["Bouldering","Sport","Mixed","Trad"],q=["Projecting","Onsighting","Campusing","Repeaters","Fun","Volume"];let x=b(!1),f=b(""),F=b(""),w=b(""),P=b(""),re=b(""),B=b(""),ge=b(""),W=b(!1),$=b(!1),O=ut(()=>e(w)&&e(w)!=="Other"?Ta(e(w)):[]);function be(){e(w)==="Other"?(l(W,!0),l(w,"")):l(W,!1),l(P,""),l($,!1),ie()}function ce(){e(P)==="Other"?(l($,!0),l(P,"")):l($,!1),ie()}function De(){l(x,!e(x))}function te(){l(f,""),l(F,""),l(w,""),l(P,""),l(re,""),l(B,""),l(ge,""),l(W,!1),l($,!1),ie()}function ie(){d.onFilterParamsChange({startDate:e(f),endDate:e(F),area:e(w),crag:e(P),climbingType:e(re),sessionType:e(B),grade:e(ge)})}var le=Ys(),he=a(le);he.__click=De;var Se=a(he),G=s(a(Se),4);{var ae=ve=>{var T=js();i(ve,T)},j=ve=>{var T=Os();i(ve,T)};c(G,ve=>{e(x)?ve(ae):ve(j,!1)})}t(Se),t(he);var Q=s(he,2);{var ne=ve=>{var T=Hs(),z=a(T),H=a(z),n=s(a(H),2);Je(n),n.__change=ie,t(H);var _=s(H,2),D=s(a(_),2);Je(D),D.__change=ie,t(_);var ee=s(_,2),oe=s(a(ee),2);{var qe=Y=>{var ye=As(),m=a(ye);Je(m),m.__input=ie;var M=s(m,2);M.__click=()=>{l(W,!1),l(w,""),ie()},t(ye),We(m,()=>e(w),J=>l(w,J)),i(Y,ye)},Oe=Y=>{var ye=Ms();ye.__change=be;var m=a(ye);m.value=m.__value="";var M=s(m);je(M,17,()=>r,Me,(de,y)=>{var R=Ps(),V=a(R,!0);t(R);var fe={};p(()=>{o(V,e(y)),fe!==(fe=e(y))&&(R.value=(R.__value=e(y))??"")}),i(de,R)});var J=s(M);J.value=J.__value="Other",t(ye),Pt(ye,()=>e(w),de=>l(w,de)),i(Y,ye)};c(oe,Y=>{e(W)?Y(qe):Y(Oe,!1)})}t(ee);var g=s(ee,2),X=s(a(g),2);{var se=Y=>{var ye=Is(),m=a(ye);Je(m),m.__input=ie;var M=s(m,2);M.__click=()=>{l($,!1),l(P,""),ie()},t(ye),We(m,()=>e(P),J=>l(P,J)),i(Y,ye)},xe=Y=>{var ye=Ke(),m=He(ye);{var M=de=>{var y=Rs();y.__change=ce;var R=a(y);R.value=R.__value="";var V=s(R);je(V,17,()=>e(O),Me,(E,L)=>{var ke=Bs(),$e=a(ke,!0);t(ke);var st={};p(()=>{o($e,e(L)),st!==(st=e(L))&&(ke.value=(ke.__value=e(L))??"")}),i(E,ke)});var fe=s(V);fe.value=fe.__value="Other",t(y),Pt(y,()=>e(P),E=>l(P,E)),i(de,y)},J=de=>{var y=Vs();Je(y),y.__input=ie,p(()=>{lt(y,"placeholder",e(w)?"Filter crag...":"Select area first"),y.disabled=!e(W)&&!e(w)}),We(y,()=>e(P),R=>l(P,R)),i(de,y)};c(m,de=>{!e(W)&&e(w)&&e(O).length>0?de(M):de(J,!1)},!0)}i(Y,ye)};c(X,Y=>{e($)?Y(se):Y(xe,!1)})}t(g);var C=s(g,2),Te=s(a(C),2);Te.__change=ie;var ze=a(Te);ze.value=ze.__value="";var Ae=s(ze);je(Ae,17,()=>h,Me,(Y,ye)=>{var m=Us(),M=a(m,!0);t(m);var J={};p(()=>{o(M,e(ye)),J!==(J=e(ye))&&(m.value=(m.__value=e(ye))??"")}),i(Y,m)}),t(Te),t(C);var Ve=s(C,2),_e=s(a(Ve),2);_e.__change=ie;var A=a(_e);A.value=A.__value="";var k=s(A);je(k,17,()=>q,Me,(Y,ye)=>{var m=Ws(),M=a(m,!0);t(m);var J={};p(()=>{o(M,e(ye)),J!==(J=e(ye))&&(m.value=(m.__value=e(ye))??"")}),i(Y,m)}),t(_e),t(Ve);var we=s(Ve,2),Fe=s(a(we),2);Je(Fe),Fe.__input=ie,t(we),t(z);var pe=s(z,2),ue=a(pe);ue.__click=te,t(pe),t(T),We(n,()=>e(f),Y=>l(f,Y)),We(D,()=>e(F),Y=>l(F,Y)),Pt(Te,()=>e(re),Y=>l(re,Y)),Pt(_e,()=>e(B),Y=>l(B,Y)),We(Fe,()=>e(ge),Y=>l(ge,Y)),dt(3,T,()=>ct,()=>({duration:200})),i(ve,T)};c(Q,ve=>{e(x)&&ve(ne)})}t(le),p(()=>lt(he,"aria-expanded",e(x))),i(Ne,le),Et()}xt(["click","change","input"]);var Zs=v('<label class="type-toggle svelte-1k6anfh"><input type="checkbox"/> <span>Sport?</span></label>'),Xs=v("<option> </option>"),Ks=v('<div class="edit-form svelte-1k6anfh"><div class="edit-row main svelte-1k6anfh"><input type="text" class="edit-input grade svelte-1k6anfh" placeholder="Grade"/> <input type="text" class="edit-input name svelte-1k6anfh" placeholder="Route Name"/> <!></div> <div class="edit-row meta svelte-1k6anfh"><select class="edit-select svelte-1k6anfh"></select> <div class="attempts-input-wrapper svelte-1k6anfh"><span>#</span> <input type="number" min="1" class="edit-input num svelte-1k6anfh"/></div></div> <div class="edit-row notes svelte-1k6anfh"><textarea class="edit-input notes-area svelte-1k6anfh" placeholder="Notes..."></textarea></div> <div class="edit-actions svelte-1k6anfh"><button class="action-btn cancel svelte-1k6anfh">Cancel</button> <button class="action-btn save svelte-1k6anfh">Save</button></div></div>'),Qs=v('<span class="climb-type-tag svelte-1k6anfh"> </span>'),$s=v('<span class="notes-preview svelte-1k6anfh"> </span>'),er=v('<span class="attempts-count svelte-1k6anfh"> </span>'),tr=v('<div class="detail-row svelte-1k6anfh"><span class="label svelte-1k6anfh">Notes:</span> <p class="notes svelte-1k6anfh"> </p></div>'),ar=v('<p class="empty-notes svelte-1k6anfh">No notes for this climb.</p>'),sr=v('<span class="tag wall-tag svelte-1k6anfh"> </span>'),rr=v('<span class="tag technique-tag svelte-1k6anfh"> </span>'),ir=v('<div class="climb-details svelte-1k6anfh"><!> <div class="tags svelte-1k6anfh"><span class="tag type svelte-1k6anfh"> </span> <!> <!> <span class="tag attempt-text svelte-1k6anfh"> </span></div></div>'),lr=v('<div class="climb-header svelte-1k6anfh" role="button" tabindex="0"><div class="climb-main-info svelte-1k6anfh"><span> </span> <span class="climb-name svelte-1k6anfh"> </span> <!> <!></div> <div class="climb-meta svelte-1k6anfh"><span><span class="icon svelte-1k6anfh"> </span> <!></span> <button class="icon-btn edit-btn svelte-1k6anfh" aria-label="Edit climb" title="Edit climb">‚úé</button> <button class="icon-btn delete-btn svelte-1k6anfh" aria-label="Delete climb" title="Delete climb">üóëÔ∏è</button> <span class="chevron svelte-1k6anfh"> </span></div></div> <!>',1),nr=v("<div><!></div>");function vr(Ne,d){zt(d,!0);let r=ea(d,"showClimbType",3,!1),h=b(!1),q=b(!1),x=b(""),f=b(""),F=b(""),w=b(1),P=b(""),re=b(!1);function B(){e(q)||l(h,!e(h))}function ge(G){G.stopPropagation(),d.onDelete()}function W(G){G.stopPropagation(),l(x,d.climb.name,!0),l(f,d.climb.grade,!0),l(F,d.climb.attemptType,!0),l(w,d.climb.attemptsNum,!0),l(P,d.climb.notes,!0),l(re,d.climb.isSport,!0),l(q,!0),l(h,!0)}function $(G){G.stopPropagation(),l(q,!1)}function O(G){G.stopPropagation();const ae={...d.climb,name:e(x),grade:e(f),attemptType:e(F),attemptsNum:e(w),notes:e(P),isSport:e(re)};d.onUpdate(ae),l(q,!1)}function be(){(e(F)==="Flash"||e(F)==="Onsight")&&l(w,1)}const ce={Flash:"‚ö°",Onsight:"üëÅÔ∏è",Redpoint:"üî¥",Dogged:"üõ†Ô∏è",DNF:"‚ùå"},De=["Flash","Onsight","Redpoint","Dogged","DNF"];var te=nr();let ie;var le=a(te);{var he=G=>{var ae=Ks(),j=a(ae),Q=a(j);Je(Q);var ne=s(Q,2);Je(ne);var ve=s(ne,2);{var T=g=>{var X=Zs(),se=a(X);Je(se),Ut(2),t(X),na(se,()=>e(re),xe=>l(re,xe)),i(g,X)};c(ve,g=>{r()&&g(T)})}t(j);var z=s(j,2),H=a(z);H.__change=be,je(H,21,()=>De,Me,(g,X)=>{var se=Xs(),xe=a(se,!0);t(se);var C={};p(()=>{o(xe,e(X)),C!==(C=e(X))&&(se.value=(se.__value=e(X))??"")}),i(g,se)}),t(H);var n=s(H,2),_=s(a(n),2);Je(_),t(n),t(z);var D=s(z,2),ee=a(D);Kt(ee),t(D);var oe=s(D,2),qe=a(oe);qe.__click=$;var Oe=s(qe,2);Oe.__click=O,t(oe),t(ae),p(()=>_.disabled=e(F)==="Flash"||e(F)==="Onsight"),We(Q,()=>e(f),g=>l(f,g)),We(ne,()=>e(x),g=>l(x,g)),Pt(H,()=>e(F),g=>l(F,g)),We(_,()=>e(w),g=>l(w,g)),We(ee,()=>e(P),g=>l(P,g)),i(G,ae)},Se=G=>{var ae=lr(),j=He(ae);j.__click=B,j.__keydown=A=>(A.key==="Enter"||A.key===" ")&&B();var Q=a(j),ne=a(Q);let ve;var T=a(ne,!0);t(ne);var z=s(ne,2),H=a(z,!0);t(z);var n=s(z,2);{var _=A=>{var k=Qs(),we=a(k,!0);t(k),p(()=>o(we,d.climb.isSport?"Sport":"Boulder")),i(A,k)};c(n,A=>{r()&&A(_)})}var D=s(n,2);{var ee=A=>{var k=$s(),we=a(k);t(k),p(()=>o(we,`- ${d.climb.notes??""}`)),i(A,k)};c(D,A=>{!e(h)&&d.climb.notes&&A(ee)})}t(Q);var oe=s(Q,2),qe=a(oe);let Oe;var g=a(qe),X=a(g,!0);t(g);var se=s(g,2);{var xe=A=>{var k=er(),we=a(k,!0);t(k),p(()=>o(we,d.climb.attemptsNum)),i(A,k)};c(se,A=>{d.climb.attemptType!=="Flash"&&d.climb.attemptType!=="Onsight"&&A(xe)})}t(qe);var C=s(qe,2);C.__click=W;var Te=s(C,2);Te.__click=ge;var ze=s(Te,2),Ae=a(ze,!0);t(ze),t(oe),t(j);var Ve=s(j,2);{var _e=A=>{var k=ir(),we=a(k);{var Fe=V=>{var fe=tr(),E=s(a(fe),2),L=a(E,!0);t(E),t(fe),p(()=>o(L,d.climb.notes)),i(V,fe)},pe=V=>{var fe=ar();i(V,fe)};c(we,V=>{d.climb.notes?V(Fe):V(pe,!1)})}var ue=s(we,2),Y=a(ue),ye=a(Y,!0);t(Y);var m=s(Y,2);{var M=V=>{var fe=sr(),E=a(fe,!0);t(fe),p(()=>o(E,d.climb.wall)),i(V,fe)};c(m,V=>{d.climb.wall&&V(M)})}var J=s(m,2);{var de=V=>{var fe=rr(),E=a(fe,!0);t(fe),p(()=>o(E,d.climb.techniqueFocus)),i(V,fe)};c(J,V=>{d.climb.techniqueFocus&&V(de)})}var y=s(J,2),R=a(y,!0);t(y),t(ue),t(k),p(()=>{o(ye,d.climb.isSport?"Sport":"Boulder"),o(R,d.climb.attemptType)}),dt(3,k,()=>ct,()=>({duration:150})),i(A,k)};c(Ve,A=>{e(h)&&A(_e)})}p(()=>{lt(j,"aria-expanded",e(h)),ve=gt(ne,1,"grade-badge svelte-1k6anfh",null,ve,{sport:d.climb.isSport}),o(T,d.climb.grade),o(H,d.climb.name||"Unnamed Route"),Oe=gt(qe,1,"attempt-type svelte-1k6anfh",null,Oe,{flash:d.climb.attemptType==="Flash"}),o(X,ce[d.climb.attemptType]||d.climb.attemptType),o(Ae,e(h)?"‚ñ≤":"‚ñº")}),i(G,ae)};c(le,G=>{e(q)?G(he):G(Se,!1)})}t(te),p(()=>ie=gt(te,1,"climb-entry svelte-1k6anfh",null,ie,{expanded:e(h),editing:e(q)})),i(Ne,te),Et()}xt(["change","click","keydown"]);var or=v('<div class="sector-meta"> </div>'),dr=v('<span class="stat svelte-d5hg2r"> </span>'),cr=v('<span class="status-icon pending svelte-d5hg2r" title="Waiting to sync">üîÑ</span>'),_r=v('<span class="status-icon error svelte-d5hg2r" title="Sync error">‚ö†Ô∏è</span>'),pr=v('<span class="chip svelte-d5hg2r"> </span>'),ur=v('<span class="text-none svelte-d5hg2r">None</span>'),fr=v('<div class="detail-item svelte-d5hg2r"><span class="label svelte-d5hg2r">Difficulty</span> <span class="value svelte-d5hg2r"> </span></div>'),gr=v('<span class="chip svelte-d5hg2r"> </span>'),mr=v('<span class="text-none svelte-d5hg2r">None</span>'),br=v('<div class="detail-item svelte-d5hg2r"><span class="label svelte-d5hg2r">Category</span> <div class="value-chips svelte-d5hg2r"><!></div></div>'),hr=v('<span class="chip svelte-d5hg2r"> </span>'),yr=v('<span class="text-none svelte-d5hg2r">None</span>'),xr=v('<div class="detail-item svelte-d5hg2r"><span class="label svelte-d5hg2r">Energy System</span> <div class="value-chips svelte-d5hg2r"><!></div></div>'),wr=v('<button class="icon-btn edit-notes-btn svelte-d5hg2r" title="Edit Notes">‚úé</button>'),kr=v('<div class="edit-notes-area"><textarea placeholder="Add session notes..." rows="3" class="notes-editor svelte-d5hg2r"></textarea> <div class="edit-actions svelte-d5hg2r"><button class="cancel-btn svelte-d5hg2r">Cancel</button> <button class="save-btn svelte-d5hg2r"> </button></div></div>'),Sr=v('<p class="notes-text svelte-d5hg2r"> </p>'),Tr=v('<p class="notes-placeholder svelte-d5hg2r">No notes.</p>'),Dr=v('<div class="metric svelte-d5hg2r"><span class="label svelte-d5hg2r">Open Grip</span> <div class="bar-container svelte-d5hg2r"><div class="bar-fill svelte-d5hg2r"></div></div> <span class="score svelte-d5hg2r"> </span></div>'),qr=v('<div class="metric svelte-d5hg2r"><span class="label svelte-d5hg2r">Crimp Grip</span> <div class="bar-container svelte-d5hg2r"><div class="bar-fill svelte-d5hg2r"></div></div> <span class="score svelte-d5hg2r"> </span></div>'),zr=v('<div class="metric svelte-d5hg2r"><span class="label svelte-d5hg2r">Pinch Grip</span> <div class="bar-container svelte-d5hg2r"><div class="bar-fill svelte-d5hg2r"></div></div> <span class="score svelte-d5hg2r"> </span></div>'),Er=v('<div class="metric svelte-d5hg2r"><span class="label svelte-d5hg2r">Sloper Grip</span> <div class="bar-container svelte-d5hg2r"><div class="bar-fill svelte-d5hg2r"></div></div> <span class="score svelte-d5hg2r"> </span></div>'),Fr=v('<div class="metric svelte-d5hg2r"><span class="label svelte-d5hg2r">Jug Grip</span> <div class="bar-container svelte-d5hg2r"><div class="bar-fill svelte-d5hg2r"></div></div> <span class="score svelte-d5hg2r"> </span></div>'),Lr=v('<p class="no-climbs svelte-d5hg2r">No climbs logged for this session.</p>'),Cr=v('<div class="card-body svelte-d5hg2r"><div class="details-grid svelte-d5hg2r"><div class="detail-item svelte-d5hg2r"><span class="label svelte-d5hg2r">Training Type</span> <div class="value-chips svelte-d5hg2r"><!></div></div> <!> <!> <!></div> <div class="notes-container svelte-d5hg2r"><div class="notes-header svelte-d5hg2r"><span class="label svelte-d5hg2r">Session Notes</span> <!></div> <!></div> <div class="metrics-container svelte-d5hg2r"><div class="metric svelte-d5hg2r"><span class="label svelte-d5hg2r">Finger Load</span> <div class="bar-container svelte-d5hg2r"><div class="bar-fill svelte-d5hg2r"></div></div> <span class="score svelte-d5hg2r"> </span></div> <div class="metric svelte-d5hg2r"><span class="label svelte-d5hg2r">Shoulder Load</span> <div class="bar-container svelte-d5hg2r"><div class="bar-fill svelte-d5hg2r"></div></div> <span class="score svelte-d5hg2r"> </span></div> <div class="metric svelte-d5hg2r"><span class="label svelte-d5hg2r">Forearm Load</span> <div class="bar-container svelte-d5hg2r"><div class="bar-fill svelte-d5hg2r"></div></div> <span class="score svelte-d5hg2r"> </span></div> <!> <!> <!> <!> <!></div> <div class="climbs-list svelte-d5hg2r"><h4 class="svelte-d5hg2r">Climbs</h4> <div class="climbs-container svelte-d5hg2r"><!> <!></div></div></div>'),Nr=v('<div><div class="card-header svelte-d5hg2r" role="button" tabindex="0"><div class="header-main svelte-d5hg2r"><div class="date-badge svelte-d5hg2r"><span class="day svelte-d5hg2r"> </span> <span class="month svelte-d5hg2r"> </span> <span class="year svelte-d5hg2r"> </span></div> <div class="session-info svelte-d5hg2r"><div class="session-text svelte-d5hg2r"><h3 class="location svelte-d5hg2r"> <!></h3> <!> <div class="meta-row svelte-d5hg2r"><span class="time-tag svelte-d5hg2r"> </span> <span class="type-tag svelte-d5hg2r"> </span></div> <div class="meta-row lowercase svelte-d5hg2r"><span class="stat svelte-d5hg2r"> </span> <!></div></div> <div class="load-summary svelte-d5hg2r"><div class="load-badge finger svelte-d5hg2r"> </div> <div class="load-badge shoulder svelte-d5hg2r"> </div> <div class="load-badge forearm svelte-d5hg2r"> </div></div></div></div> <div class="header-actions"><div class="header-status svelte-d5hg2r"><!></div> <button class="btn-icon delete-session" title="Delete Session">üóëÔ∏è</button> <span class="chevron svelte-d5hg2r"> </span></div></div> <!> <!></div>');function Gr(Ne,d){zt(d,!0);let r=ea(d,"session",7),h=b(!1),q=b(!1);function x(){l(h,!e(h))}function f(){l(q,!0)}async function F(){try{const E=await pa(r().id);E.ok?(l(q,!1),d.onDelete()):(console.error("Failed to delete session:",E.error),alert("Failed to delete session: "+E.error))}catch(E){console.error("Exception deleting session:",E),alert("Error deleting session")}}function w(E){const L=[...r().climbs];L.splice(E,1),re(L),d.onDelete()}function P(E,L){const ke=[...r().climbs];ke[E]=L,re(ke)}async function re(E){r().climbs=E;const L={date:r().date,time:r().time||"12:00",area:r().area,crag:r().crag,sector:r().sector,climbingType:r().climbingType,trainingTypes:r().trainingTypes||[],difficulty:r().difficulty,categories:r().categories||[],energySystems:r().energySystems||[],fingerLoad:r().fingerLoad,shoulderLoad:r().shoulderLoad,forearmLoad:r().forearmLoad,climbs:E,notes:r().notes};try{const ke=await la(r().id,L);ke.ok||console.error("Failed to sync update:",ke.error)}catch(ke){console.error("Exception syncing update:",ke)}}let B=ut(()=>r().climbs?.length??0),ge=ut(()=>(r().climbs||[]).reduce((E,L)=>{const ke=parseInt(L.grade.replace(/\D/g,""))||0,$e=parseInt(E.replace(/\D/g,""))||0;return ke>$e?L.grade:E},"V0/4a")),W=b(!1),$=b(""),O=b(!1);function be(){l($,r().notes||"",!0),l(W,!0)}function ce(){l(W,!1),l($,"")}async function De(){if(e(O))return;l(O,!0),r().notes=e($);const E={date:r().date,time:r().time||"12:00",area:r().area,crag:r().crag,sector:r().sector,climbingType:r().climbingType,trainingTypes:r().trainingTypes||[],difficulty:r().difficulty,categories:r().categories||[],energySystems:r().energySystems||[],fingerLoad:r().fingerLoad,shoulderLoad:r().shoulderLoad,forearmLoad:r().forearmLoad,climbs:r().climbs,notes:e($)};try{const L=await la(r().id,E);L.ok||console.error("Failed to sync note update:",L.error)}catch(L){console.error("Exception syncing note update:",L)}l(W,!1),l(O,!1)}var te=Nr();let ie;var le=a(te);le.__click=x,le.__keydown=E=>E.key==="Enter"&&x();var he=a(le),Se=a(he),G=a(Se),ae=a(G,!0);t(G);var j=s(G,2),Q=a(j,!0);t(j);var ne=s(j,2),ve=a(ne,!0);t(ne),t(Se);var T=s(Se,2),z=a(T),H=a(z),n=a(H),_=s(n);{var D=E=>{var L=At();p(()=>o(L,`- ${r().crag??""}`)),i(E,L)};c(_,E=>{r().crag&&E(D)})}t(H);var ee=s(H,2);{var oe=E=>{var L=or(),ke=a(L);t(L),p(()=>o(ke,`üìç ${r().sector??""}`)),i(E,L)};c(ee,E=>{r().sector&&E(oe)})}var qe=s(ee,2),Oe=a(qe),g=a(Oe);t(Oe);var X=s(Oe,2),se=a(X,!0);t(X),t(qe);var xe=s(qe,2),C=a(xe),Te=a(C);t(C);var ze=s(C,2);{var Ae=E=>{var L=dr(),ke=a(L);t(L),p(()=>o(ke,`Max: ${e(ge)??""}`)),i(E,L)};c(ze,E=>{e(B)>0&&E(Ae)})}t(xe),t(z);var Ve=s(z,2),_e=a(Ve),A=a(_e,!0);t(_e);var k=s(_e,2),we=a(k,!0);t(k);var Fe=s(k,2),pe=a(Fe,!0);t(Fe),t(Ve),t(T),t(he);var ue=s(he,2),Y=a(ue),ye=a(Y);{var m=E=>{var L=cr();i(E,L)},M=E=>{var L=Ke(),ke=He(L);{var $e=st=>{var et=_r();i(st,et)};c(ke,st=>{r().syncStatus==="error"&&st($e)},!0)}i(E,L)};c(ye,E=>{r().syncStatus==="pending"?E(m):E(M,!1)})}t(Y);var J=s(Y,2);J.__click=E=>{E.stopPropagation(),f()};var de=s(J,2),y=a(de,!0);t(de),t(ue),t(le);var R=s(le,2);{var V=E=>{var L=Cr(),ke=a(L),$e=a(ke),st=s(a($e),2),et=a(st);{var Ue=u=>{var S=Ke(),N=He(S);je(N,17,()=>r().trainingTypes,Me,(K,Z)=>{var me=pr(),Be=a(me,!0);t(me),p(()=>o(Be,e(Z))),i(K,me)}),i(u,S)},Xe=u=>{var S=ur();i(u,S)};c(et,u=>{r().trainingTypes&&r().trainingTypes.length>0&&!r().trainingTypes.includes("None")?u(Ue):u(Xe,!1)})}t(st),t($e);var tt=s($e,2);{var Nt=u=>{var S=fr(),N=s(a(S),2),K=a(N,!0);t(N),t(S),p(()=>o(K,r().difficulty)),i(u,S)};c(tt,u=>{r().difficulty&&u(Nt)})}var rt=s(tt,2);{var wt=u=>{var S=br(),N=s(a(S),2),K=a(N);{var Z=Be=>{var at=Ke(),Rt=He(at);je(Rt,17,()=>r().categories,Me,(ht,Vt)=>{var Jt=gr(),ta=a(Jt,!0);t(Jt),p(()=>o(ta,e(Vt))),i(ht,Jt)}),i(Be,at)},me=Be=>{var at=mr();i(Be,at)};c(K,Be=>{r().categories.length>0&&!r().categories.includes("None")?Be(Z):Be(me,!1)})}t(N),t(S),i(u,S)};c(rt,u=>{r().categories?.length&&u(wt)})}var mt=s(rt,2);{var kt=u=>{var S=xr(),N=s(a(S),2),K=a(N);{var Z=Be=>{var at=Ke(),Rt=He(at);je(Rt,17,()=>r().energySystems,Me,(ht,Vt)=>{var Jt=hr(),ta=a(Jt,!0);t(Jt),p(()=>o(ta,e(Vt))),i(ht,Jt)}),i(Be,at)},me=Be=>{var at=yr();i(Be,at)};c(K,Be=>{r().energySystems.length>0&&!r().energySystems.includes("None")?Be(Z):Be(me,!1)})}t(N),t(S),i(u,S)};c(mt,u=>{r().energySystems?.length&&u(kt)})}t(ke);var yt=s(ke,2),Gt=a(yt),St=s(a(Gt),2);{var Ft=u=>{var S=wr();S.__click=be,i(u,S)};c(St,u=>{e(W)||u(Ft)})}t(Gt);var Lt=s(Gt,2);{var bt=u=>{var S=kr(),N=a(S);Kt(N);var K=s(N,2),Z=a(K);Z.__click=ce;var me=s(Z,2);me.__click=De;var Be=a(me,!0);t(me),t(K),t(S),p(()=>{Z.disabled=e(O),me.disabled=e(O),o(Be,e(O)?"Saving...":"Save")}),We(N,()=>e($),at=>l($,at)),dt(3,S,()=>ct,()=>({duration:150})),i(u,S)},_t=u=>{var S=Ke(),N=He(S);{var K=me=>{var Be=Sr(),at=a(Be,!0);t(Be),p(()=>o(at,r().notes)),i(me,Be)},Z=me=>{var Be=Tr();i(me,Be)};c(N,me=>{r().notes?me(K):me(Z,!1)},!0)}i(u,S)};c(Lt,u=>{e(W)?u(bt):u(_t,!1)})}t(yt);var Tt=s(yt,2),Re=a(Tt),Ie=s(a(Re),2),Pe=a(Ie);t(Ie);var Ee=s(Ie,2),Le=a(Ee);t(Ee),t(Re);var Ge=s(Re,2),Ce=s(a(Ge),2),Ze=a(Ce);t(Ce);var Ye=s(Ce,2),Qe=a(Ye);t(Ye),t(Ge);var nt=s(Ge,2),Dt=s(a(nt),2),qt=a(Dt);t(Dt);var pt=s(Dt,2),Bt=a(pt);t(pt),t(nt);var it=s(nt,2);{var Mt=u=>{var S=Dr(),N=s(a(S),2),K=a(N);t(N);var Z=s(N,2),me=a(Z);t(Z),t(S),p(()=>{ot(K,`width: ${r().openGrip/5*100}%`),o(me,`${r().openGrip??""}/5`)}),i(u,S)};c(it,u=>{r().openGrip&&u(Mt)})}var jt=s(it,2);{var It=u=>{var S=qr(),N=s(a(S),2),K=a(N);t(N);var Z=s(N,2),me=a(Z);t(Z),t(S),p(()=>{ot(K,`width: ${r().crimpGrip/5*100}%`),o(me,`${r().crimpGrip??""}/5`)}),i(u,S)};c(jt,u=>{r().crimpGrip&&u(It)})}var Ot=s(jt,2);{var vt=u=>{var S=zr(),N=s(a(S),2),K=a(N);t(N);var Z=s(N,2),me=a(Z);t(Z),t(S),p(()=>{ot(K,`width: ${r().pinchGrip/5*100}%`),o(me,`${r().pinchGrip??""}/5`)}),i(u,S)};c(Ot,u=>{r().pinchGrip&&u(vt)})}var Ct=s(Ot,2);{var Qt=u=>{var S=Er(),N=s(a(S),2),K=a(N);t(N);var Z=s(N,2),me=a(Z);t(Z),t(S),p(()=>{ot(K,`width: ${r().sloperGrip/5*100}%`),o(me,`${r().sloperGrip??""}/5`)}),i(u,S)};c(Ct,u=>{r().sloperGrip&&u(Qt)})}var Yt=s(Ct,2);{var Wt=u=>{var S=Fr(),N=s(a(S),2),K=a(N);t(N);var Z=s(N,2),me=a(Z);t(Z),t(S),p(()=>{ot(K,`width: ${r().jugGrip/5*100}%`),o(me,`${r().jugGrip??""}/5`)}),i(u,S)};c(Yt,u=>{r().jugGrip&&u(Wt)})}t(Tt);var Ht=s(Tt,2),Zt=s(a(Ht),2),Xt=a(Zt);je(Xt,17,()=>r().climbs||[],Me,(u,S,N)=>{{let K=ut(()=>r().climbingType==="Mixed");vr(u,{get climb(){return e(S)},onDelete:()=>w(N),onUpdate:Z=>P(N,Z),get showClimbType(){return e(K)}})}});var U=s(Xt,2);{var I=u=>{var S=Lr();i(u,S)};c(U,u=>{(r().climbs||[]).length===0&&u(I)})}t(Zt),t(Ht),t(L),p(()=>{ot(Pe,`width: ${r().fingerLoad/5*100}%`),o(Le,`${r().fingerLoad??""}/5`),ot(Ze,`width: ${r().shoulderLoad/5*100}%`),o(Qe,`${r().shoulderLoad??""}/5`),ot(qt,`width: ${r().forearmLoad/5*100}%`),o(Bt,`${r().forearmLoad??""}/5`)}),dt(3,L,()=>ct,()=>({duration:150})),i(E,L)};c(R,E=>{e(h)&&E(V)})}var fe=s(R,2);$t(fe,{get isOpen(){return e(q)},title:"Delete Session",message:"Are you sure you want to delete this session? This action cannot be undone.",onConfirm:F,onCancel:()=>l(q,!1)}),t(te),p((E,L,ke)=>{ie=gt(te,1,"session-card svelte-d5hg2r",null,ie,{expanded:e(h)}),lt(le,"aria-expanded",e(h)),o(ae,E),o(Q,L),o(ve,ke),o(n,`${r().area??""} `),o(g,`üïí ${(r().time||"12:00")??""}`),o(se,r().climbingType),o(Te,`${e(B)??""} climbs`),lt(_e,"title",`Finger Load: ${r().fingerLoad??""}`),o(A,r().fingerLoad),lt(k,"title",`Shoulder Load: ${r().shoulderLoad??""}`),o(we,r().shoulderLoad),lt(Fe,"title",`Forearm Load: ${r().forearmLoad??""}`),o(pe,r().forearmLoad),o(y,e(h)?"‚ñ≤":"‚ñº")},[()=>new Date(r().date).getDate(),()=>new Date(r().date).toLocaleDateString(void 0,{month:"short"}),()=>new Date(r().date).getFullYear()]),i(Ne,te),Et()}xt(["click","keydown"]);var jr=v('<span class="spinner svelte-1s7jdlh"></span> Fetching...',1),Or=v('<div class="error-banner svelte-1s7jdlh"> </div>'),Ar=v('<small class="svelte-1s7jdlh">Try adjusting your filters.</small>'),Pr=v('<div class="empty-state svelte-1s7jdlh"><p class="svelte-1s7jdlh">No outdoor climbing sessions found.</p> <!></div>'),Mr=v('<div class="load-more-container svelte-1s7jdlh"><button class="load-more-btn svelte-1s7jdlh"> </button></div>'),Ir=v('<div class="view-container svelte-1s7jdlh"><div class="view-header svelte-1s7jdlh"><h2 class="view-title svelte-1s7jdlh">‚õ∞Ô∏è Outdoor Climbing History</h2> <div class="header-actions svelte-1s7jdlh"><button class="action-btn secondary svelte-1s7jdlh" title="Export filtered data to CSV">üì• Export</button> <button class="action-btn svelte-1s7jdlh" title="Fetch data from cloud"><!></button></div></div> <!> <!> <div class="info-bar svelte-1s7jdlh"><div class="legend-wrapper svelte-1s7jdlh"><!></div> <div class="load-key svelte-1s7jdlh"><span class="key-label svelte-1s7jdlh">Load:</span> <div class="key-item svelte-1s7jdlh"><span class="dot finger svelte-1s7jdlh"></span> Finger</div> <div class="key-item svelte-1s7jdlh"><span class="dot shoulder svelte-1s7jdlh"></span> Shoulder</div> <div class="key-item svelte-1s7jdlh"><span class="dot forearm svelte-1s7jdlh"></span> Forearm</div></div></div> <div class="sessions-list"><!> <!> <!></div></div>');function Br(Ne,d){zt(d,!0);let r=b(ft([])),h=b(ft([])),q=b(!1),x=b(""),f=b(ft({startDate:"",endDate:"",area:"",crag:"",climbingType:"",sessionType:"",grade:""})),F=b(20);const w=20;aa(()=>{P()});async function P(){l(q,!0),l(x,"");try{const n=await ua();n.ok&&n.data?(l(r,n.data.map(_=>({..._,activityType:"outdoor_climb"})),!0),e(r).sort((_,D)=>new Date(D.date).getTime()-new Date(_.date).getTime()),B()):l(x,n.error||"Failed to fetch data",!0)}catch(n){l(x,n instanceof Error?n.message:"Unknown error",!0)}finally{l(q,!1)}}function re(n){l(f,n,!0),B()}function B(){l(F,w),l(h,e(r).filter(n=>{if(e(f).startDate&&n.date<e(f).startDate||e(f).endDate&&n.date>e(f).endDate||e(f).area&&!n.area.toLowerCase().includes(e(f).area.toLowerCase())||e(f).crag&&!n.crag.toLowerCase().includes(e(f).crag.toLowerCase()))return!1;if(e(f).climbingType&&(n.climbingType==="Leading"?"Sport":n.climbingType)!==e(f).climbingType)if(n.climbingType==="Mixed")if(e(f).climbingType==="Bouldering"){if(!n.climbs.some(D=>!D.isSport))return!1}else if(e(f).climbingType==="Sport"||e(f).climbingType==="Trad"){if(!n.climbs.some(D=>D.isSport))return!1}else return!1;else return!1;if(e(f).sessionType&&!n.trainingTypes?.includes(e(f).sessionType))return!1;if(e(f).grade){const _=e(f).grade.trim().toLowerCase();if(!n.climbs.some(ee=>ee.grade.trim().toLowerCase()===_))return!1}return!0}),!0)}function ge(){l(F,e(F)+w)}var W=Ir(),$=a(W),O=s(a($),2),be=a(O);be.__click=()=>sa(e(h),"outdoor_climbs");var ce=s(be,2);ce.__click=P;var De=a(ce);{var te=n=>{var _=jr();Ut(),i(n,_)},ie=n=>{var _=At("‚òÅÔ∏è Fetch Data");i(n,_)};c(De,n=>{e(q)?n(te):n(ie,!1)})}t(ce),t(O),t($);var le=s($,2);{var he=n=>{var _=Or(),D=a(_,!0);t(_),p(()=>o(D,e(x))),dt(3,_,()=>ct),i(n,_)};c(le,n=>{e(x)&&n(he)})}var Se=s(le,2);Js(Se,{onFilterParamsChange:re});var G=s(Se,2),ae=a(G),j=a(ae);va(j),t(ae),Ut(2),t(G);var Q=s(G,2),ne=a(Q);je(ne,17,()=>e(h).slice(0,e(F)),n=>n.id,(n,_)=>{Gr(n,{get session(){return e(_)},onDelete:P})});var ve=s(ne,2);{var T=n=>{var _=Pr(),D=s(a(_),2);{var ee=oe=>{var qe=Ar();i(oe,qe)};c(D,oe=>{e(r).length>0&&oe(ee)})}t(_),i(n,_)};c(ve,n=>{e(h).length===0&&n(T)})}var z=s(ve,2);{var H=n=>{var _=Mr(),D=a(_);D.__click=ge;var ee=a(D);t(D),t(_),p(()=>o(ee,`Load More (${e(h).length-e(F)} remaining)`)),i(n,_)};c(z,n=>{e(F)<e(h).length&&n(H)})}t(Q),t(W),p(()=>ce.disabled=e(q)),i(Ne,W),Et()}xt(["click"]);var Rr=v('<span class="chevron svelte-11rkzid">‚ñ≤</span>'),Vr=v('<span class="chevron svelte-11rkzid">‚ñº</span>'),Ur=v('<div class="filter-body svelte-11rkzid"><div class="filter-grid svelte-11rkzid"><div class="filter-item svelte-11rkzid"><label for="start-date" class="svelte-11rkzid">Start Date</label> <input type="date" id="start-date" class="svelte-11rkzid"/></div> <div class="filter-item svelte-11rkzid"><label for="end-date" class="svelte-11rkzid">End Date</label> <input type="date" id="end-date" class="svelte-11rkzid"/></div> <div class="filter-item svelte-11rkzid"><label for="name-filter" class="svelte-11rkzid">Session Name</label> <input type="text" id="name-filter" placeholder="e.g. Leg Day" class="svelte-11rkzid"/></div> <div class="filter-item svelte-11rkzid"><label for="block-filter" class="svelte-11rkzid">Training Block</label> <select id="block-filter" class="svelte-11rkzid"><option>All Blocks</option><option>Strength</option><option>Power</option><option>Power Endurance</option><option>Muscular Endurance</option></select></div></div> <div class="filter-actions svelte-11rkzid"><button class="reset-btn svelte-11rkzid">Reset Filters</button></div></div>'),Wr=v('<div class="filter-container svelte-11rkzid"><button class="filter-header svelte-11rkzid"><div class="header-content svelte-11rkzid"><span class="icon svelte-11rkzid">üîç</span> <span class="title svelte-11rkzid">Filters</span> <!></div></button> <!></div>');function Hr(Ne,d){zt(d,!0);let r=b(!1),h=b(""),q=b(""),x=b(""),f=b("");function F(){l(r,!e(r))}function w(){l(h,""),l(q,""),l(x,""),l(f,""),P()}function P(){d.onFilterParamsChange({startDate:e(h),endDate:e(q),name:e(x),trainingBlock:e(f)})}var re=Wr(),B=a(re);B.__click=F;var ge=a(B),W=s(a(ge),4);{var $=De=>{var te=Rr();i(De,te)},O=De=>{var te=Vr();i(De,te)};c(W,De=>{e(r)?De($):De(O,!1)})}t(ge),t(B);var be=s(B,2);{var ce=De=>{var te=Ur(),ie=a(te),le=a(ie),he=s(a(le),2);Je(he),he.__change=P,t(le);var Se=s(le,2),G=s(a(Se),2);Je(G),G.__change=P,t(Se);var ae=s(Se,2),j=s(a(ae),2);Je(j),j.__input=P,t(ae);var Q=s(ae,2),ne=s(a(Q),2);ne.__change=P;var ve=a(ne);ve.value=ve.__value="";var T=s(ve);T.value=T.__value="Strength";var z=s(T);z.value=z.__value="Power";var H=s(z);H.value=H.__value="Power Endurance";var n=s(H);n.value=n.__value="Muscular Endurance",t(ne),t(Q),t(ie);var _=s(ie,2),D=a(_);D.__click=w,t(_),t(te),We(he,()=>e(h),ee=>l(h,ee)),We(G,()=>e(q),ee=>l(q,ee)),We(j,()=>e(x),ee=>l(x,ee)),Pt(ne,()=>e(f),ee=>l(f,ee)),dt(3,te,()=>ct,()=>({duration:200})),i(De,te)};c(be,De=>{e(r)&&De(ce)})}t(re),p(()=>lt(B,"aria-expanded",e(r))),i(Ne,re),Et()}xt(["click","change","input"]);var Yr=v('<div class="edit-name-container svelte-cirrfc"><input type="text" class="name-input svelte-cirrfc" placeholder="Session Name"/> <div class="edit-actions svelte-cirrfc"><button class="btn-icon save-name svelte-cirrfc" title="Save"><!></button> <button class="btn-icon cancel-edit svelte-cirrfc" title="Cancel">‚ùå</button></div></div>'),Jr=v('<div class="name-display svelte-cirrfc"><h3 class="name svelte-cirrfc"> </h3> <button class="btn-icon edit-name-btn svelte-cirrfc" title="Edit Name">‚úèÔ∏è</button></div>'),Zr=v('<span class="block-tag svelte-cirrfc"> </span>'),Xr=v('<span class="status-icon pending svelte-cirrfc" title="Waiting to sync">üîÑ</span>'),Kr=v('<span class="status-icon error svelte-cirrfc" title="Sync error">‚ö†Ô∏è</span>'),Qr=v('<div class="bw-info svelte-cirrfc"><span class="label svelte-cirrfc">Bodyweight:</span> </div>'),$r=v('<span class="muscle-tag svelte-cirrfc"> </span>'),ei=v('<span class="muscle-tag svelte-cirrfc"> </span>'),ti=v('<div class="muscle-tags svelte-cirrfc"><!> <!></div>'),ai=v('<span class="tag w svelte-cirrfc">W</span>'),si=v('<span class="tag f svelte-cirrfc">F</span>'),ri=v('<span class="tag d svelte-cirrfc">D</span>'),ii=v('<div><span class="set-num svelte-cirrfc"></span> <!> <!> <!> <span class="val svelte-cirrfc"><span class="weight"> </span> <span class="x svelte-cirrfc">x</span> <span class="reps"> </span></span></div>'),li=v('<div class="exercise-item svelte-cirrfc"><div class="exercise-header svelte-cirrfc"><h4 class="svelte-cirrfc"> </h4> <!></div> <div class="sets-grid svelte-cirrfc"></div></div>'),ni=v('<div class="subcategory-group svelte-cirrfc"><h5 class="subcategory-header svelte-cirrfc"> </h5> <!></div>'),vi=v('<div class="category-group svelte-cirrfc"><h4 class="category-header svelte-cirrfc"> </h4> <!></div>'),oi=v('<div class="card-body svelte-cirrfc"><!> <div class="exercises-list svelte-cirrfc"></div></div>'),di=v('<div><div class="card-header svelte-cirrfc" role="button" tabindex="0"><div class="header-main svelte-cirrfc"><div class="date-badge svelte-cirrfc"><span class="day svelte-cirrfc"> </span> <span class="month svelte-cirrfc"> </span> <span class="year svelte-cirrfc"> </span></div> <div class="session-info svelte-cirrfc"><div class="session-text"><!> <div class="session-meta svelte-cirrfc"><span class="time-tag svelte-cirrfc"> </span> <!> <span class="stat svelte-cirrfc"> </span> <span class="stat svelte-cirrfc"> </span> <span class="stat svelte-cirrfc"> </span></div></div></div></div> <div class="header-actions svelte-cirrfc"><div class="header-status"><!></div> <button class="btn-icon delete-session svelte-cirrfc" title="Delete Session">üóëÔ∏è</button> <span class="chevron svelte-cirrfc"> </span></div></div> <!></div> <!>',1);function ci(Ne,d){zt(d,!0);let r=b(!1),h=b(!1),q=b(!1),x=b(""),f=b(!1);function F(){e(q)||l(r,!e(r))}function w(m){m.stopPropagation(),l(x,d.session.name,!0),l(q,!0)}function P(m){m.stopPropagation(),l(q,!1)}async function re(m){if(m.stopPropagation(),!(!e(x).trim()||e(f))){l(f,!0);try{const M={...d.session,name:e(x).trim()},J={date:d.session.date,time:d.session.time||"",name:e(x).trim(),bodyweight:d.session.bodyweight,trainingBlock:d.session.trainingBlock,exercises:d.session.exercises},de=await ga(d.session.id,J);de.ok?(l(q,!1),d.onUpdate()):(console.error("Failed to update session name:",de.error),alert("Failed to update session name"))}catch(M){console.error("Error updating session name:",M),alert("Error updating session name")}finally{l(f,!1)}}}function B(){l(h,!0)}async function ge(){try{const m=await fa(d.session.id);m.ok?(l(h,!1),d.onDelete()):(console.error("Failed to delete session:",m.error),alert("Failed to delete session"))}catch(m){console.error("Exception deleting session:",m),alert("Error deleting session")}}function W(m){return Da.find(M=>M.name===m)}function $(m){switch(m){case"Strength":return{bg:"rgba(99, 102, 241, 0.1)",color:"#4338ca",border:"rgba(99, 102, 241, 0.2)"};case"Power":return{bg:"rgba(239, 68, 68, 0.1)",color:"#b91c1c",border:"rgba(239, 68, 68, 0.2)"};case"Power Endurance":return{bg:"rgba(245, 158, 11, 0.1)",color:"#b45309",border:"rgba(245, 158, 11, 0.2)"};case"Muscular Endurance":return{bg:"rgba(16, 185, 129, 0.1)",color:"#047857",border:"rgba(16, 185, 129, 0.2)"};default:return{bg:"rgba(107, 114, 128, 0.1)",color:"#374151",border:"rgba(107, 114, 128, 0.2)"}}}let O=ut(()=>d.session.exercises?.length??0),be=ut(()=>(d.session.exercises||[]).reduce((m,M)=>m+(M.sets?.length||0),0)),ce=ut(()=>(d.session.exercises||[]).reduce((m,M)=>m+(M.sets||[]).reduce((J,de)=>J+(de.weight||0)*(de.reps||0),0),0)),De=ut(()=>(d.session.exercises||[]).reduce((m,M)=>{const J=W(M.name),de=J?.category||"Other",y=J?.subcategory||"Misc";return m[de]||(m[de]={}),m[de][y]||(m[de][y]=[]),m[de][y].push(M),m},{}));var te=di(),ie=He(te);let le;var he=a(ie);he.__click=F,he.__keydown=m=>m.key==="Enter"&&F();var Se=a(he),G=a(Se),ae=a(G),j=a(ae,!0);t(ae);var Q=s(ae,2),ne=a(Q,!0);t(Q);var ve=s(Q,2),T=a(ve,!0);t(ve),t(G);var z=s(G,2),H=a(z),n=a(H);{var _=m=>{var M=Yr();M.__click=L=>L.stopPropagation();var J=a(M);Je(J),J.__click=L=>L.stopPropagation(),J.__keydown=L=>L.key==="Enter"&&re(L);var de=s(J,2),y=a(de);y.__click=re;var R=a(y);{var V=L=>{var ke=At("‚è≥");i(L,ke)},fe=L=>{var ke=At("‚úÖ");i(L,ke)};c(R,L=>{e(f)?L(V):L(fe,!1)})}t(y);var E=s(y,2);E.__click=P,t(de),t(M),p(()=>{y.disabled=e(f),E.disabled=e(f)}),We(J,()=>e(x),L=>l(x,L)),i(m,M)},D=m=>{var M=Jr(),J=a(M),de=a(J,!0);t(J);var y=s(J,2);y.__click=w,t(M),p(()=>o(de,d.session.name)),i(m,M)};c(n,m=>{e(q)?m(_):m(D,!1)})}var ee=s(n,2),oe=a(ee),qe=a(oe);t(oe);var Oe=s(oe,2);{var g=m=>{const M=ut(()=>$(d.session.trainingBlock));var J=Zr(),de=a(J,!0);t(J),p(()=>{ot(J,`--bg-color: ${e(M).bg??""}; --text-color: ${e(M).color??""}; --border-color: ${e(M).border??""};`),o(de,d.session.trainingBlock)}),i(m,J)};c(Oe,m=>{d.session.trainingBlock&&m(g)})}var X=s(Oe,2),se=a(X);t(X);var xe=s(X,2),C=a(xe);t(xe);var Te=s(xe,2),ze=a(Te);t(Te),t(ee),t(H),t(z),t(Se);var Ae=s(Se,2),Ve=a(Ae),_e=a(Ve);{var A=m=>{var M=Xr();i(m,M)},k=m=>{var M=Ke(),J=He(M);{var de=y=>{var R=Kr();i(y,R)};c(J,y=>{d.session.syncStatus==="error"&&y(de)},!0)}i(m,M)};c(_e,m=>{d.session.syncStatus==="pending"?m(A):m(k,!1)})}t(Ve);var we=s(Ve,2);we.__click=m=>{m.stopPropagation(),B()};var Fe=s(we,2),pe=a(Fe,!0);t(Fe),t(Ae),t(he);var ue=s(he,2);{var Y=m=>{var M=oi(),J=a(M);{var de=R=>{var V=Qr(),fe=s(a(V));t(V),p(()=>o(fe,` ${d.session.bodyweight??""}kg`)),i(R,V)};c(J,R=>{d.session.bodyweight&&R(de)})}var y=s(J,2);je(y,21,()=>Object.entries(e(De)),Me,(R,V)=>{var fe=ut(()=>ra(e(V),2));let E=()=>e(fe)[0],L=()=>e(fe)[1];var ke=vi(),$e=a(ke),st=a($e,!0);t($e);var et=s($e,2);je(et,17,()=>Object.entries(L()),Me,(Ue,Xe)=>{var tt=ut(()=>ra(e(Xe),2));let Nt=()=>e(tt)[0],rt=()=>e(tt)[1];var wt=ni(),mt=a(wt),kt=a(mt,!0);t(mt);var yt=s(mt,2);je(yt,17,rt,Me,(Gt,St)=>{const Ft=ut(()=>W(e(St).name));var Lt=li(),bt=a(Lt),_t=a(bt),Tt=a(_t,!0);t(_t);var Re=s(_t,2);{var Ie=Ee=>{var Le=ti(),Ge=a(Le);je(Ge,17,()=>e(Ft).targetMuscles.slice(0,3),Me,(Ye,Qe)=>{var nt=$r(),Dt=a(nt,!0);t(nt),p(()=>o(Dt,e(Qe))),i(Ye,nt)});var Ce=s(Ge,2);{var Ze=Ye=>{var Qe=ei(),nt=a(Qe);t(Qe),p(()=>o(nt,`+${e(Ft).targetMuscles.length-3}`)),i(Ye,Qe)};c(Ce,Ye=>{e(Ft).targetMuscles.length>3&&Ye(Ze)})}t(Le),i(Ee,Le)};c(Re,Ee=>{e(Ft)&&Ee(Ie)})}t(bt);var Pe=s(bt,2);je(Pe,21,()=>e(St).sets,Me,(Ee,Le,Ge)=>{var Ce=ii();let Ze;var Ye=a(Ce);Ye.textContent=Ge+1;var Qe=s(Ye,2);{var nt=vt=>{var Ct=ai();i(vt,Ct)};c(Qe,vt=>{e(Le).isWarmup&&vt(nt)})}var Dt=s(Qe,2);{var qt=vt=>{var Ct=si();i(vt,Ct)};c(Dt,vt=>{e(Le).isFailure&&vt(qt)})}var pt=s(Dt,2);{var Bt=vt=>{var Ct=ri();i(vt,Ct)};c(pt,vt=>{e(Le).isDropSet&&vt(Bt)})}var it=s(pt,2),Mt=a(it),jt=a(Mt);t(Mt);var It=s(Mt,4),Ot=a(It,!0);t(It),t(it),t(Ce),p(()=>{Ze=gt(Ce,1,"set-pill svelte-cirrfc",null,Ze,{completed:e(Le).completed,warmup:e(Le).isWarmup}),o(jt,`${e(Le).weight??""}kg`),o(Ot,e(Le).reps)}),i(Ee,Ce)}),t(Pe),t(Lt),p(()=>o(Tt,e(St).name)),i(Gt,Lt)}),t(wt),p(()=>o(kt,Nt())),i(Ue,wt)}),t(ke),p(()=>o(st,E())),i(R,ke)}),t(y),t(M),dt(3,M,()=>ct,()=>({duration:150})),i(m,M)};c(ue,m=>{e(r)&&m(Y)})}t(ie);var ye=s(ie,2);$t(ye,{get isOpen(){return e(h)},title:"Delete Session",message:"Are you sure you want to delete this session? This cannot be undone.",onConfirm:ge,onCancel:()=>l(h,!1)}),p((m,M,J,de)=>{le=gt(ie,1,"session-card svelte-cirrfc",null,le,{expanded:e(r)}),lt(he,"aria-expanded",e(r)),o(j,m),o(ne,M),o(T,J),o(qe,`üïí ${(d.session.time||"12:00")??""}`),o(se,`${e(O)??""} Exercises`),o(C,`${e(be)??""} Sets`),o(ze,`~${de??""}kg Vol`),o(pe,e(r)?"‚ñ≤":"‚ñº")},[()=>new Date(d.session.date).getDate(),()=>new Date(d.session.date).toLocaleDateString("en-GB",{month:"short"}),()=>new Date(d.session.date).getFullYear(),()=>Math.round(e(ce)).toLocaleString()]),i(Ne,te),Et()}xt(["click","keydown"]);var _i=v('<span class="spinner svelte-133enjd"></span> Fetching...',1),pi=v('<div class="error-banner svelte-133enjd"> </div>'),ui=v('<small class="svelte-133enjd">Try adjusting your filters.</small>'),fi=v('<div class="empty-state svelte-133enjd"><p class="svelte-133enjd">No gym sessions found.</p> <!></div>'),gi=v('<div class="load-more-container svelte-133enjd"><button class="load-more-btn svelte-133enjd"> </button></div>'),mi=v('<div class="view-container svelte-133enjd"><div class="view-header svelte-133enjd"><h2 class="view-title svelte-133enjd">üèãÔ∏è Gym Session History</h2> <div class="header-actions svelte-133enjd"><button class="action-btn secondary svelte-133enjd" title="Export filtered data to CSV">üì• Export</button> <button class="action-btn svelte-133enjd" title="Fetch data from cloud"><!></button></div></div> <!> <!> <div class="sessions-list"><!> <!> <!></div></div>');function bi(Ne,d){zt(d,!0);let r=b(ft([])),h=b(ft([])),q=b(!1),x=b(""),f=b(ft({startDate:"",endDate:"",name:"",trainingBlock:""})),F=b(20);const w=20;aa(()=>{P()});async function P(){l(q,!0),l(x,"");try{const T=await ma();T.ok&&T.data?(l(r,T.data.map(z=>({...z,activityType:"gym_session"})),!0),e(r).sort((z,H)=>new Date(H.date).getTime()-new Date(z.date).getTime()),B()):l(x,T.error||"Failed to fetch data",!0)}catch(T){l(x,T instanceof Error?T.message:"Unknown error",!0)}finally{l(q,!1)}}function re(T){l(f,T,!0),B()}function B(){l(F,w),l(h,e(r).filter(T=>!(e(f).startDate&&T.date<e(f).startDate||e(f).endDate&&T.date>e(f).endDate||e(f).name&&!T.name.toLowerCase().includes(e(f).name.toLowerCase())||e(f).trainingBlock&&T.trainingBlock!==e(f).trainingBlock)),!0)}function ge(){l(F,e(F)+w)}var W=mi(),$=a(W),O=s(a($),2),be=a(O);be.__click=()=>sa(e(h),"gym_sessions");var ce=s(be,2);ce.__click=P;var De=a(ce);{var te=T=>{var z=_i();Ut(),i(T,z)},ie=T=>{var z=At("‚òÅÔ∏è Fetch Data");i(T,z)};c(De,T=>{e(q)?T(te):T(ie,!1)})}t(ce),t(O),t($);var le=s($,2);{var he=T=>{var z=pi(),H=a(z,!0);t(z),p(()=>o(H,e(x))),dt(3,z,()=>ct),i(T,z)};c(le,T=>{e(x)&&T(he)})}var Se=s(le,2);Hr(Se,{onFilterParamsChange:re});var G=s(Se,2),ae=a(G);je(ae,17,()=>e(h).slice(0,e(F)),T=>T.id,(T,z)=>{ci(T,{get session(){return e(z)},onDelete:P,onUpdate:P})});var j=s(ae,2);{var Q=T=>{var z=fi(),H=s(a(z),2);{var n=_=>{var D=ui();i(_,D)};c(H,_=>{e(r).length>0&&_(n)})}t(z),i(T,z)};c(j,T=>{e(h).length===0&&T(Q)})}var ne=s(j,2);{var ve=T=>{var z=gi(),H=a(z);H.__click=ge;var n=a(H);t(H),t(z),p(()=>o(n,`Load More (${e(h).length-e(F)} remaining)`)),i(T,z)};c(ne,T=>{e(F)<e(h).length&&T(ve)})}t(G),t(W),p(()=>ce.disabled=e(q)),i(Ne,W),Et()}xt(["click"]);var hi=v('<span class="spinner svelte-1szs0u9"></span> Fetching...',1),yi=v('<div class="loading svelte-1szs0u9">Loading sessions...</div>'),xi=v('<div class="empty-state svelte-1szs0u9"><!></div>'),wi=v('<button class="btn-icon edit-btn svelte-1szs0u9" title="Edit notes">‚úèÔ∏è</button>'),ki=v('<span class="set-tag svelte-1szs0u9"> <span class="x svelte-1szs0u9">x</span> </span>'),Si=v('<div class="edit-notes-container svelte-1szs0u9"><textarea class="notes-input svelte-1szs0u9" placeholder="Add notes..." rows="2"></textarea> <div class="edit-actions svelte-1szs0u9"><button class="action-btn save svelte-1szs0u9"> </button> <button class="action-btn cancel svelte-1szs0u9">Cancel</button></div></div>'),Ti=v('<div class="ex-notes svelte-1szs0u9"> </div>'),Di=v('<div class="exercise-item svelte-1szs0u9"><div class="ex-header svelte-1szs0u9"><div class="ex-title-group svelte-1szs0u9"><span class="ex-name svelte-1szs0u9"> </span> <span class="ex-grip svelte-1szs0u9"> </span></div> <!></div> <div class="ex-sets svelte-1szs0u9"></div> <!></div>'),qi=v('<div class="card-body svelte-1szs0u9"><div class="exercises-list svelte-1szs0u9"></div></div>'),zi=v('<div><div class="card-header svelte-1szs0u9" role="button" tabindex="0"><div class="header-main"><span class="session-date svelte-1szs0u9"> <span class="time-tag svelte-1szs0u9"> </span></span> <span class="meta svelte-1szs0u9"><!> </span></div> <div class="header-status svelte-1szs0u9"><span>‚óè</span> <button class="btn-icon delete-btn svelte-1szs0u9" title="Delete Session">üóëÔ∏è</button> <span class="chevron svelte-1szs0u9"> </span></div></div> <!></div>'),Ei=v('<div class="load-more-container svelte-1szs0u9"><button class="load-more-btn svelte-1szs0u9"> </button></div>'),Fi=v('<div class="timeline svelte-1szs0u9"><!> <!></div>'),Li=v('<div class="view-content svelte-1szs0u9"><div class="header svelte-1szs0u9"><h3 class="svelte-1szs0u9">ü§è Fingerboarding Log</h3> <button class="fetch-btn svelte-1szs0u9" title="Fetch data from cloud"><!></button></div> <div class="filters svelte-1szs0u9"><div class="filter-group svelte-1szs0u9"><label for="start-date" class="svelte-1szs0u9">From</label> <input type="date" id="start-date" class="svelte-1szs0u9"/></div> <div class="filter-group svelte-1szs0u9"><label for="end-date" class="svelte-1szs0u9">To</label> <input type="date" id="end-date" class="svelte-1szs0u9"/></div></div> <!></div> <!>',1);function Ci(Ne,d){zt(d,!0);let r=b(ft([])),h=b(!0),q=b(""),x=b(""),f=b(ft(new Set)),F=b(20);const w=20;oa(()=>{e(q),e(x),l(F,w)});let P=b(!1),re=b(null),B=b(null),ge=b(""),W=b(!1);function $(g,X,se){l(B,{sessionId:g,exerciseId:X},!0),l(ge,se,!0)}function O(){l(B,null),l(ge,"")}async function be(){if(!e(B)||e(W))return;const{sessionId:g,exerciseId:X}=e(B),se=e(r).find(xe=>xe.id===g);if(se){l(W,!0);try{const xe=se.exercises.map(ze=>ze.id===X?{...ze,notes:e(ge).trim()}:ze),C={date:se.date,time:se.time||"",location:se.location,exercises:xe},Te=await ya(g,C);if(Te.ok){const ze=e(r).findIndex(Ae=>Ae.id===g);ze!==-1&&(e(r)[ze]={...e(r)[ze],exercises:xe}),O()}else console.error("Failed to update notes:",Te.error),alert("Failed to update notes")}catch(xe){console.error("Error saving notes:",xe),alert("Error saving notes")}finally{l(W,!1)}}}function ce(g){l(re,g,!0),l(P,!0)}async function De(){if(e(re))try{const g=await ba(e(re));g.ok?(l(re,null),l(P,!1),te()):(console.error("Failed to delete session:",g.error),alert("Failed to delete session"))}catch(g){console.error("Exception deleting session:",g)}}async function te(){l(h,!0);try{const g=await ha();g.ok&&g.data&&l(r,g.data.map(X=>({...X,activityType:"fingerboarding",syncStatus:"synced"})).sort((X,se)=>new Date(se.date).getTime()-new Date(X.date).getTime()),!0)}catch(g){console.error("Failed to fetch sessions",g)}finally{l(h,!1)}}te();let ie=ut(()=>e(r).filter(g=>!(e(q)&&new Date(g.date)<new Date(e(q))||e(x)&&new Date(g.date)>new Date(e(x)))));function le(){l(F,e(F)+w)}function he(g){e(f).has(g)?e(f).delete(g):e(f).add(g),l(f,new Set(e(f)),!0)}function Se(g){return g.exercises.reduce((X,se)=>X+se.details.length,0)}var G=Li(),ae=He(G),j=a(ae),Q=s(a(j),2);Q.__click=te;var ne=a(Q);{var ve=g=>{var X=hi();Ut(),i(g,X)},T=g=>{var X=At("‚òÅÔ∏è Fetch Data");i(g,X)};c(ne,g=>{e(h)?g(ve):g(T,!1)})}t(Q),t(j);var z=s(j,2),H=a(z),n=s(a(H),2);Je(n),t(H);var _=s(H,2),D=s(a(_),2);Je(D),t(_),t(z);var ee=s(z,2);{var oe=g=>{var X=yi();i(g,X)},qe=g=>{var X=Ke(),se=He(X);{var xe=Te=>{var ze=xi(),Ae=a(ze);{var Ve=A=>{var k=At("No sessions match filter.");i(A,k)},_e=A=>{var k=At("No fingerboarding sessions logged yet.");i(A,k)};c(Ae,A=>{e(r).length>0?A(Ve):A(_e,!1)})}t(ze),i(Te,ze)},C=Te=>{var ze=Fi(),Ae=a(ze);je(Ae,17,()=>e(ie).slice(0,e(F)),Me,(A,k)=>{var we=zi();let Fe;var pe=a(we);pe.__click=()=>he(e(k).id),pe.__keydown=Ue=>Ue.key==="Enter"&&he(e(k).id);var ue=a(pe),Y=a(ue),ye=a(Y),m=s(ye),M=a(m,!0);t(m),t(Y);var J=s(Y,2),de=a(J);{var y=Ue=>{var Xe=At();p(()=>o(Xe,`${e(k).location??""} ¬∑`)),i(Ue,Xe)};c(de,Ue=>{e(k).location&&e(k).location!=="N/A"&&e(k).location!=="Home"&&Ue(y)})}var R=s(de);t(J),t(ue);var V=s(ue,2),fe=a(V);let E;var L=s(fe,2);L.__click=Ue=>{Ue.stopPropagation(),ce(e(k).id)};var ke=s(L,2),$e=a(ke,!0);t(ke),t(V),t(pe);var st=s(pe,2);{var et=Ue=>{var Xe=qi(),tt=a(Xe);je(tt,21,()=>e(k).exercises||[],Me,(Nt,rt)=>{var wt=Di(),mt=a(wt),kt=a(mt),yt=a(kt),Gt=a(yt,!0);t(yt);var St=s(yt,2),Ft=a(St,!0);t(St),t(kt);var Lt=s(kt,2);{var bt=Pe=>{var Ee=wi();Ee.__click=()=>$(e(k).id,e(rt).id,e(rt).notes),i(Pe,Ee)};c(Lt,Pe=>{e(B)?.sessionId===e(k).id&&e(B)?.exerciseId===e(rt).id||Pe(bt)})}t(mt);var _t=s(mt,2);je(_t,21,()=>e(rt).details,Me,(Pe,Ee)=>{var Le=ki(),Ge=a(Le),Ce=s(Ge,2);t(Le),p(()=>{o(Ge,`${e(Ee).weight>0?`+${e(Ee).weight}kg`:"BW"} `),o(Ce,` ${e(Ee).reps??""}s/reps`)}),i(Pe,Le)}),t(_t);var Tt=s(_t,2);{var Re=Pe=>{var Ee=Si(),Le=a(Ee);Kt(Le);var Ge=s(Le,2),Ce=a(Ge);Ce.__click=be;var Ze=a(Ce,!0);t(Ce);var Ye=s(Ce,2);Ye.__click=O,t(Ge),t(Ee),p(()=>{Ce.disabled=e(W),o(Ze,e(W)?"Saving...":"Save"),Ye.disabled=e(W)}),We(Le,()=>e(ge),Qe=>l(ge,Qe)),i(Pe,Ee)},Ie=Pe=>{var Ee=Ke(),Le=He(Ee);{var Ge=Ce=>{var Ze=Ti(),Ye=a(Ze);t(Ze),p(()=>o(Ye,`"${e(rt).notes??""}"`)),i(Ce,Ze)};c(Le,Ce=>{e(rt).notes&&Ce(Ge)},!0)}i(Pe,Ee)};c(Tt,Pe=>{e(B)?.sessionId===e(k).id&&e(B)?.exerciseId===e(rt).id?Pe(Re):Pe(Ie,!1)})}t(wt),p(()=>{o(Gt,e(rt).name),o(Ft,e(rt).gripType)}),i(Nt,wt)}),t(tt),t(Xe),dt(3,Xe,()=>ct,()=>({duration:150})),i(Ue,Xe)};c(st,Ue=>{e(f).has(e(k).id)&&Ue(et)})}t(we),p((Ue,Xe,tt,Nt)=>{Fe=gt(we,1,"session-card svelte-1szs0u9",null,Fe,Ue),o(ye,`${Xe??""} `),o(M,e(k).time||"12:00"),o(R,` ${e(k).exercises.length??""} Exercises ¬∑ ${tt??""} Sets`),E=gt(fe,1,"sync-dot svelte-1szs0u9",null,E,{synced:e(k).syncStatus==="synced"}),lt(fe,"title",e(k).syncStatus==="synced"?"Synced":"Local"),o($e,Nt)},[()=>({expanded:e(f).has(e(k).id)}),()=>new Date(e(k).date).toLocaleDateString(void 0,{weekday:"short",month:"short",day:"numeric",year:"numeric"}),()=>Se(e(k)),()=>e(f).has(e(k).id)?"‚ñ≤":"‚ñº"]),i(A,we)});var Ve=s(Ae,2);{var _e=A=>{var k=Ei(),we=a(k);we.__click=le;var Fe=a(we);t(we),t(k),p(()=>o(Fe,`Load More (${e(ie).length-e(F)} remaining)`)),i(A,k)};c(Ve,A=>{e(F)<e(ie).length&&A(_e)})}t(ze),i(Te,ze)};c(se,Te=>{e(ie).length===0?Te(xe):Te(C,!1)},!0)}i(g,X)};c(ee,g=>{e(h)&&e(r).length===0?g(oe):g(qe,!1)})}t(ae);var Oe=s(ae,2);$t(Oe,{get isOpen(){return e(P)},title:"Delete Fingerboard Session",message:"Are you sure you want to delete this session? This cannot be undone.",onConfirm:De,onCancel:()=>l(P,!1)}),p(()=>Q.disabled=e(h)),We(n,()=>e(q),g=>l(q,g)),We(D,()=>e(x),g=>l(x,g)),i(Ne,G),Et()}xt(["click","keydown"]);var Ni=v('<span class="spinner svelte-xyvf5r"></span> Fetching...',1),Gi=v('<div class="loading svelte-xyvf5r">Loading sessions...</div>'),ji=v('<div class="empty-state svelte-xyvf5r">No competitions logged yet.</div>'),Oi=v('<button class="icon-btn edit-notes-btn svelte-xyvf5r" title="Edit Notes">‚úé</button>'),Ai=v('<div class="edit-notes-area"><textarea placeholder="Add session notes..." rows="3" class="notes-editor svelte-xyvf5r"></textarea> <div class="edit-actions svelte-xyvf5r"><button class="cancel-btn svelte-xyvf5r">Cancel</button> <button class="save-btn svelte-xyvf5r"> </button></div></div>'),Pi=v('<p class="note-text svelte-xyvf5r"> </p>'),Mi=v('<p class="notes-placeholder svelte-xyvf5r">No notes.</p>'),Ii=v('<span class="round-pos svelte-xyvf5r"> </span>'),Bi=v('<span class="c-attempts svelte-xyvf5r"> </span>'),Ri=v('<div class="climb-notes svelte-xyvf5r"> </div>'),Vi=v('<div class="climb-row svelte-xyvf5r"><div class="climb-info svelte-xyvf5r"><span class="c-name svelte-xyvf5r"> </span> <!></div> <div class="climb-result"><span> </span></div></div> <!>',1),Ui=v('<div class="climbs-list"></div>'),Wi=v('<div class="round-item svelte-xyvf5r"><div class="round-header svelte-xyvf5r"><span class="round-name"> </span> <!></div> <!></div>'),Hi=v('<div class="rounds-list svelte-xyvf5r"></div>'),Yi=v('<div class="load-meta svelte-xyvf5r"><span> </span></div>'),Ji=v('<div class="card-body svelte-xyvf5r"><div class="session-notes-container svelte-xyvf5r"><div class="notes-header svelte-xyvf5r"><span class="note-label svelte-xyvf5r">Session Notes</span> <!></div> <!></div> <!> <!> <div class="session-footer svelte-xyvf5r"><span> </span></div></div>'),Zi=v('<div><div class="card-header svelte-xyvf5r" role="button" tabindex="0"><div class="header-main svelte-xyvf5r"><div class="left-col svelte-xyvf5r"><span class="venue svelte-xyvf5r"> </span> <div class="datetime-row svelte-xyvf5r"><span class="date svelte-xyvf5r"> </span> <span class="time-tag svelte-xyvf5r"> </span></div></div> <div class="right-col svelte-xyvf5r"><div class="badges svelte-xyvf5r"><span class="type-tag svelte-xyvf5r"> </span> <span class="result-tag svelte-xyvf5r"> </span></div></div></div> <div class="header-status svelte-xyvf5r"><span>‚óè</span> <button class="btn-icon delete-btn svelte-xyvf5r" title="Delete Session">üóëÔ∏è</button> <span class="chevron svelte-xyvf5r"> </span></div></div> <!></div>'),Xi=v('<div class="load-more-container svelte-xyvf5r"><button class="load-more-btn svelte-xyvf5r"> </button></div>'),Ki=v('<div class="timeline svelte-xyvf5r"><!> <!></div>'),Qi=v('<div class="view-content svelte-xyvf5r"><div class="header svelte-xyvf5r"><h3 class="svelte-xyvf5r">üèÜ Competition Log</h3> <button class="fetch-btn svelte-xyvf5r" title="Fetch data from cloud"><!></button></div> <!> <!></div>');function $i(Ne,d){zt(d,!0);let r=b(ft([])),h=b(!0),q=b(ft(new Set)),x=b(20);const f=20;let F=b(!1),w=b(null);function P(n){l(w,n,!0),l(F,!0)}async function re(){if(e(w))try{const n=await xa(e(w));n.ok?(l(w,null),l(F,!1),B()):(console.error("Failed to delete session:",n.error),alert("Failed to delete session"))}catch(n){console.error("Exception deleting session:",n)}}async function B(){l(h,!0),l(x,f);try{const n=await wa();n.ok&&n.data&&l(r,n.data.map(_=>({..._,activityType:"competition",syncStatus:"synced",type:_.type,rounds:_.rounds.map(D=>({...D,climbs:D.climbs?.map(ee=>({...ee,status:ee.status}))}))})).sort((_,D)=>new Date(D.date).getTime()-new Date(_.date).getTime()),!0)}catch(n){console.error("Failed to fetch sessions",n)}finally{l(h,!1)}}B();function ge(n){e(q).has(n)?e(q).delete(n):e(q).add(n),l(q,new Set(e(q)),!0)}function W(){l(x,e(x)+f)}function $(n){if(!n.rounds||n.rounds.length===0)return"No rounds";const _=n.rounds[n.rounds.length-1];if(_.position)return`#${_.position} ${_.name}`;if(_.climbs){const D=_.climbs.filter(oe=>oe.status==="Top"||oe.status==="Flash").length,ee=_.climbs.filter(oe=>oe.status==="Zone").length;return`${n.rounds.length} Rnds ¬∑ Final: ${D}T ${ee+D}Z`}return _.name}let O=b(ft(new Set)),be=b(ft(new Map)),ce=b(ft(new Set));function De(n){e(be).set(n.id,n.notes||""),l(be,new Map(e(be)),!0),e(O).add(n.id),l(O,new Set(e(O)),!0)}function te(n){e(O).delete(n),l(O,new Set(e(O)),!0),e(be).delete(n),l(be,new Map(e(be)),!0)}function ie(n){return e(be).get(n)||""}function le(n,_){e(be).set(n,_),l(be,new Map(e(be)),!0)}async function he(n){if(e(ce).has(n.id))return;const _=e(be).get(n.id);if(_===void 0)return;e(ce).add(n.id),l(ce,new Set(e(ce)),!0);const D=e(r).find(oe=>oe.id===n.id);D&&(D.notes=_);const ee={date:n.date,time:n.time||"12:00",venue:n.venue,customVenue:n.customVenue,type:n.type,fingerLoad:n.fingerLoad,shoulderLoad:n.shoulderLoad,forearmLoad:n.forearmLoad,rounds:n.rounds,notes:_};try{const oe=await ka(n.id,ee);oe.ok||console.error("Failed to sync note update:",oe.error)}catch(oe){console.error("Exception syncing note update:",oe)}e(O).delete(n.id),l(O,new Set(e(O)),!0),e(ce).delete(n.id),l(ce,new Set(e(ce)),!0)}var Se=Qi(),G=a(Se),ae=s(a(G),2);ae.__click=B;var j=a(ae);{var Q=n=>{var _=Ni();Ut(),i(n,_)},ne=n=>{var _=At("‚òÅÔ∏è Fetch Data");i(n,_)};c(j,n=>{e(h)?n(Q):n(ne,!1)})}t(ae),t(G);var ve=s(G,2);{var T=n=>{var _=Gi();i(n,_)},z=n=>{var _=Ke(),D=He(_);{var ee=qe=>{var Oe=ji();i(qe,Oe)},oe=qe=>{var Oe=Ki(),g=a(Oe);je(g,17,()=>e(r).slice(0,e(x)),Me,(xe,C)=>{var Te=Zi();let ze;var Ae=a(Te);Ae.__click=()=>ge(e(C).id),Ae.__keydown=et=>et.key==="Enter"&&ge(e(C).id);var Ve=a(Ae),_e=a(Ve),A=a(_e),k=a(A,!0);t(A);var we=s(A,2),Fe=a(we),pe=a(Fe,!0);t(Fe);var ue=s(Fe,2),Y=a(ue);t(ue),t(we),t(_e);var ye=s(_e,2),m=a(ye),M=a(m),J=a(M,!0);t(M);var de=s(M,2),y=a(de,!0);t(de),t(m),t(ye),t(Ve);var R=s(Ve,2),V=a(R);let fe;var E=s(V,2);E.__click=et=>{et.stopPropagation(),P(e(C).id)};var L=s(E,2),ke=a(L,!0);t(L),t(R),t(Ae);var $e=s(Ae,2);{var st=et=>{var Ue=Ji(),Xe=a(Ue),tt=a(Xe),Nt=s(a(tt),2);{var rt=Re=>{var Ie=Oi();Ie.__click=()=>De(e(C)),i(Re,Ie)};c(Nt,Re=>{e(O).has(e(C).id)||Re(rt)})}t(tt);var wt=s(tt,2);{var mt=Re=>{var Ie=Ai(),Pe=a(Ie);Kt(Pe),Pe.__input=Ze=>le(e(C).id,Ze.currentTarget.value);var Ee=s(Pe,2),Le=a(Ee);Le.__click=()=>te(e(C).id);var Ge=s(Le,2);Ge.__click=()=>he(e(C));var Ce=a(Ge,!0);t(Ge),t(Ee),t(Ie),p((Ze,Ye,Qe,nt)=>{da(Pe,Ze),Le.disabled=Ye,Ge.disabled=Qe,o(Ce,nt)},[()=>ie(e(C).id),()=>e(ce).has(e(C).id),()=>e(ce).has(e(C).id),()=>e(ce).has(e(C).id)?"Saving...":"Save"]),dt(3,Ie,()=>ct,()=>({duration:150})),i(Re,Ie)},kt=Re=>{var Ie=Ke(),Pe=He(Ie);{var Ee=Ge=>{var Ce=Pi(),Ze=a(Ce,!0);t(Ce),p(()=>o(Ze,e(C).notes)),i(Ge,Ce)},Le=Ge=>{var Ce=Mi();i(Ge,Ce)};c(Pe,Ge=>{e(C).notes?Ge(Ee):Ge(Le,!1)},!0)}i(Re,Ie)};c(wt,Re=>{e(O).has(e(C).id)?Re(mt):Re(kt,!1)})}t(Xe);var yt=s(Xe,2);{var Gt=Re=>{var Ie=Hi();je(Ie,21,()=>e(C).rounds||[],Me,(Pe,Ee)=>{var Le=Wi(),Ge=a(Le),Ce=a(Ge),Ze=a(Ce,!0);t(Ce);var Ye=s(Ce,2);{var Qe=qt=>{var pt=Ii(),Bt=a(pt);t(pt),p(()=>o(Bt,`#${e(Ee).position??""}`)),i(qt,pt)};c(Ye,qt=>{e(Ee).position&&qt(Qe)})}t(Ge);var nt=s(Ge,2);{var Dt=qt=>{var pt=Ui();je(pt,21,()=>e(Ee).climbs||[],Me,(Bt,it)=>{var Mt=Vi(),jt=He(Mt),It=a(jt),Ot=a(It),vt=a(Ot,!0);t(Ot);var Ct=s(Ot,2);{var Qt=I=>{var u=Bi(),S=a(u);t(u),p(()=>o(S,`(${e(it).attemptCount??""} tries)`)),i(I,u)};c(Ct,I=>{e(it).attemptCount>1&&I(Qt)})}t(It);var Yt=s(It,2),Wt=a(Yt);let Ht;var Zt=a(Wt,!0);t(Wt),t(Yt),t(jt);var Xt=s(jt,2);{var U=I=>{var u=Ri(),S=a(u);t(u),p(()=>o(S,`"${e(it).notes??""}"`)),i(I,u)};c(Xt,I=>{e(it).notes&&I(U)})}p(()=>{o(vt,e(it).name),Ht=gt(Wt,1,"status-badge svelte-xyvf5r",null,Ht,{top:e(it).status==="Top"||e(it).status==="Flash",zone:e(it).status==="Zone"}),o(Zt,e(it).status)}),i(Bt,Mt)}),t(pt),i(qt,pt)};c(nt,qt=>{e(Ee).climbs&&qt(Dt)})}t(Le),p(()=>o(Ze,e(Ee).name)),i(Pe,Le)}),t(Ie),i(Re,Ie)};c(yt,Re=>{e(C).rounds&&Re(Gt)})}var St=s(yt,2);{var Ft=Re=>{var Ie=Yi(),Pe=a(Ie),Ee=a(Pe);t(Pe),t(Ie),p(()=>o(Ee,`Detailed Load: Fingers ${e(C).fingerLoad??""}/5, Shoulders ${e(C).shoulderLoad??""}/5,
										Forearms ${e(C).forearmLoad??""}/5`)),i(Re,Ie)};c(St,Re=>{(e(C).fingerLoad||e(C).shoulderLoad)&&Re(Ft)})}var Lt=s(St,2),bt=a(Lt);let _t;var Tt=a(bt,!0);t(bt),t(Lt),t(Ue),p(()=>{_t=gt(bt,1,"sync-status svelte-xyvf5r",null,_t,{synced:e(C).syncStatus==="synced"}),o(Tt,e(C).syncStatus==="synced"?"‚úì Synced":"‚òÅ Local")}),dt(3,Ue,()=>ct,()=>({duration:150})),i(et,Ue)};c($e,et=>{e(q).has(e(C).id)&&et(st)})}t(Te),p((et,Ue,Xe,tt)=>{ze=gt(Te,1,"session-card svelte-xyvf5r",null,ze,et),o(k,e(C).customVenue||e(C).venue),o(pe,Ue),o(Y,`@ ${(e(C).time||"12:00")??""}`),o(J,e(C).type),o(y,Xe),fe=gt(V,1,"sync-dot",null,fe,{synced:e(C).syncStatus==="synced"}),lt(V,"title",e(C).syncStatus==="synced"?"Synced":"Local"),o(ke,tt)},[()=>({expanded:e(q).has(e(C).id)}),()=>new Date(e(C).date).toLocaleDateString(void 0,{weekday:"short",day:"numeric",month:"short",year:"numeric"}),()=>$(e(C)),()=>e(q).has(e(C).id)?"‚ñ≤":"‚ñº"]),i(xe,Te)});var X=s(g,2);{var se=xe=>{var C=Xi(),Te=a(C);Te.__click=W;var ze=a(Te);t(Te),t(C),p(()=>o(ze,`Load More (${e(r).length-e(x)} remaining)`)),i(xe,C)};c(X,xe=>{e(x)<e(r).length&&xe(se)})}t(Oe),i(qe,Oe)};c(D,qe=>{e(r).length===0?qe(ee):qe(oe,!1)},!0)}i(n,_)};c(ve,n=>{e(h)&&e(r).length===0?n(T):n(z,!1)})}var H=s(ve,2);$t(H,{get isOpen(){return e(F)},title:"Delete Competition",message:"Are you sure you want to delete this competition session? This action cannot be undone.",onConfirm:re,onCancel:()=>l(F,!1)}),t(Se),p(()=>ae.disabled=e(h)),i(Ne,Se),Et()}xt(["click","keydown","input"]);var el=v("<option> </option>"),tl=v('<div class="view-container svelte-108px9u"><!></div>'),al=v('<div class="page svelte-108px9u"><div class="page-header svelte-108px9u"><div><h1 class="svelte-108px9u">üìä View Data</h1> <p class="subtitle svelte-108px9u">Browse your training history</p></div></div> <div class="content-card svelte-108px9u"><div class="form-group svelte-108px9u"><label for="activity-type" class="svelte-108px9u">Activity Type</label> <select id="activity-type" class="svelte-108px9u"><option disabled>Select an activity...</option><!></select></div> <!></div></div>');function _l(Ne){const d=[{value:"indoor_climb",label:"Indoor Climb",icon:"üßó"},{value:"outdoor_climb",label:"Outdoor Climb",icon:"‚õ∞Ô∏è"},{value:"gym_session",label:"Gym Session",icon:"üèãÔ∏è"},{value:"fingerboarding",label:"Fingerboarding",icon:"ü§è"},{value:"competition",label:"Competition",icon:"üèÜ"}];let r=b("");var h=al(),q=s(a(h),2),x=a(q),f=s(a(x),2),F=a(f);F.value=F.__value="";var w=s(F);je(w,17,()=>d,B=>B.value,(B,ge)=>{var W=el(),$=a(W);t(W);var O={};p(()=>{o($,`${e(ge).icon??""} ${e(ge).label??""}`),O!==(O=e(ge).value)&&(W.value=(W.__value=e(ge).value)??"")}),i(B,W)}),t(f),t(x);var P=s(x,2);{var re=B=>{var ge=tl(),W=a(ge);{var $=be=>{Gs(be,{})},O=be=>{var ce=Ke(),De=He(ce);{var te=le=>{Br(le,{})},ie=le=>{var he=Ke(),Se=He(he);{var G=j=>{bi(j,{})},ae=j=>{var Q=Ke(),ne=He(Q);{var ve=z=>{Ci(z,{})},T=z=>{var H=Ke(),n=He(H);{var _=D=>{$i(D,{})};c(n,D=>{e(r)==="competition"&&D(_)},!0)}i(z,H)};c(ne,z=>{e(r)==="fingerboarding"?z(ve):z(T,!1)},!0)}i(j,Q)};c(Se,j=>{e(r)==="gym_session"?j(G):j(ae,!1)},!0)}i(le,he)};c(De,le=>{e(r)==="outdoor_climb"?le(te):le(ie,!1)},!0)}i(be,ce)};c(W,be=>{e(r)==="indoor_climb"?be($):be(O,!1)})}t(ge),i(B,ge)};c(P,B=>{e(r)&&B(re)})}t(q),t(h),Pt(f,()=>e(r),B=>l(r,B)),i(Ne,h)}export{_l as component};
