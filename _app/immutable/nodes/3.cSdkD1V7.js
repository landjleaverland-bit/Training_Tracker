import{f as u,a as r,t as Ce,c as pt}from"../chunks/DFOW_6n2.js";import{o as ua}from"../chunks/b6ntCrib.js";import{p as Gt,aV as p,w as qt,s as l,c as a,r as t,t as b,i as e,ao as ft,aW as Tt,aY as va,x as s,a as Mt,f as it,d as da}from"../chunks/CLLqIroS.js";import{d as Wt,s as C,e as ta}from"../chunks/B3P2p6-W.js";import{i as k}from"../chunks/CFKLpgVY.js";import{r as T,e as P,i as z,a as et,b as V,d as ca,s as St,f as _a}from"../chunks/B1uQ-_P3.js";import{i as ra,s as ia,b as le,c as pa,a as Ut,d as fa,m as aa,e as sa,g as ma,f as ga,h as ya,j as ha,k as ba,l as Sa,n as qa,o as ka,p as wa,q as xa}from"../chunks/DnqHxCXM.js";import"../chunks/X8RR7YZ-.js";var Ca=u("<option> </option>"),Ta=u('<div class="form-group svelte-1lf3qka"><label for="custom-location" class="svelte-1lf3qka">Custom Location</label> <input type="text" id="custom-location" placeholder="Enter location name..." class="svelte-1lf3qka"/></div>'),Fa=u("<option> </option>"),ja=u("<option> </option>"),Va=u("<option> </option>"),Aa=u("<option> </option>"),Oa=u("<option> </option>"),La=u("<option> </option>"),Na=u("<option> </option>"),$a=u('<th class="svelte-1lf3qka">Sport?</th>'),Ra=u('<td class="center svelte-1lf3qka"><input type="checkbox" class="svelte-1lf3qka"/></td>'),Ea=u('<span class="grade-error svelte-1lf3qka">Invalid</span>'),Da=u("<option> </option>"),Ba=u('<button type="button" class="remove-btn svelte-1lf3qka">‚úï</button>'),Pa=u('<tr><!><td class="svelte-1lf3qka"><input type="text" placeholder="Route name..." class="svelte-1lf3qka"/></td><td class="svelte-1lf3qka"><input type="text" placeholder="V3"/> <!></td><td class="svelte-1lf3qka"><select class="svelte-1lf3qka"></select></td><td class="svelte-1lf3qka"><input type="number" min="1" class="svelte-1lf3qka"/></td><td><textarea placeholder="Notes..." class="svelte-1lf3qka"></textarea></td><td class="center svelte-1lf3qka"><!></td></tr>'),Ia=u("<div> </div>"),za=u('<div class="form-content svelte-1lf3qka"><h3 class="svelte-1lf3qka">üßó Indoor Climb</h3> <div class="form-row svelte-1lf3qka"><div class="form-group svelte-1lf3qka"><label for="date" class="svelte-1lf3qka">Date</label> <input type="date" id="date" class="svelte-1lf3qka"/></div> <div class="form-group svelte-1lf3qka"><label for="location" class="svelte-1lf3qka">Location</label> <select id="location" class="svelte-1lf3qka"><option disabled>Select location...</option><!></select></div></div> <!> <div class="form-group svelte-1lf3qka"><label for="climbing-type" class="svelte-1lf3qka">Climbing Type</label> <select id="climbing-type" class="svelte-1lf3qka"><option disabled>Select type...</option><!></select></div> <div class="load-section svelte-1lf3qka"><h4 class="svelte-1lf3qka">Load Metrics</h4> <div class="load-metrics svelte-1lf3qka"><div class="load-item svelte-1lf3qka"><label for="finger-load" class="svelte-1lf3qka">Finger</label> <input type="number" id="finger-load" min="1" max="5" class="svelte-1lf3qka"/> <span class="load-scale svelte-1lf3qka">/ 5</span></div> <div class="load-item svelte-1lf3qka"><label for="shoulder-load" class="svelte-1lf3qka">Shoulder</label> <input type="number" id="shoulder-load" min="1" max="5" class="svelte-1lf3qka"/> <span class="load-scale svelte-1lf3qka">/ 5</span></div> <div class="load-item svelte-1lf3qka"><label for="forearm-load" class="svelte-1lf3qka">Forearm</label> <input type="number" id="forearm-load" min="1" max="5" class="svelte-1lf3qka"/> <span class="load-scale svelte-1lf3qka">/ 5</span></div></div></div> <div class="training-section svelte-1lf3qka"><h4 class="svelte-1lf3qka">Training Details</h4> <div class="training-grid svelte-1lf3qka"><div class="training-item svelte-1lf3qka"><label for="training-type" class="svelte-1lf3qka">Training Type</label> <select id="training-type" class="svelte-1lf3qka"><option disabled>Select...</option><!></select></div> <div class="training-item svelte-1lf3qka"><label for="difficulty" class="svelte-1lf3qka">Difficulty</label> <select id="difficulty" class="svelte-1lf3qka"><option disabled>Select...</option><!></select></div> <div class="training-item svelte-1lf3qka"><label for="category" class="svelte-1lf3qka">Category</label> <select id="category" class="svelte-1lf3qka"><option disabled>Select...</option><!></select></div> <div class="training-item svelte-1lf3qka"><label for="energy-system" class="svelte-1lf3qka">Energy System</label> <select id="energy-system" class="svelte-1lf3qka"><option disabled>Select...</option><!></select></div> <div class="training-item svelte-1lf3qka"><label for="technique-focus" class="svelte-1lf3qka">Technique Focus</label> <select id="technique-focus" class="svelte-1lf3qka"><option disabled>Select...</option><!></select></div> <div class="training-item svelte-1lf3qka"><label for="wall-angle" class="svelte-1lf3qka">Wall Angle</label> <select id="wall-angle" class="svelte-1lf3qka"><option disabled>Select...</option><!></select></div></div></div> <div class="climbs-section svelte-1lf3qka"><h4 class="svelte-1lf3qka">Climbs</h4> <div class="table-container svelte-1lf3qka"><table class="climbs-table svelte-1lf3qka"><thead><tr><!><th class="svelte-1lf3qka">Name</th><th class="svelte-1lf3qka">Grade</th><th class="svelte-1lf3qka">Attempt</th><th class="svelte-1lf3qka">#</th><th class="svelte-1lf3qka">Notes</th><th class="svelte-1lf3qka"></th></tr></thead><tbody></tbody></table></div> <button type="button" class="add-btn svelte-1lf3qka">+ Add Climb</button></div> <div class="submit-section svelte-1lf3qka"><!> <button type="button" class="submit-btn svelte-1lf3qka"><!></button></div></div>');function Ga(Ue,He){Gt(He,!0);const tt=["Rockstar Swindon","Flashpoint Swindon","Flashpoint Bristol","Redpoint Bristol","TCH Bristol","Other"],fe=["Bouldering","Sport","Mixed"],me=["Flash","Redpoint","Dogged"],A=["Projecting","Onsighting","Campusing","Repeaters"],te=["Easy","Medium","Hard","Max","Limit+"],X=["None","Technique","Strength","Strength-endurance","Warm-up","Power"],ge=["Aerobic capacity","Aerobic lactic power","Anaerobic alactic capacity","Anaerobic alactic power","Anaerobic power","Anaerobic lactic capacity"],Je=["None","Double-clutch","Standing on volumes","Trusting feet"],ae=["None","Overhang","Slab","Roof"],Ne=["V0-","4-","V0","4","V0+","4+","V1","5","V2","5+","V3","6A","V4","6B","V5","6C","V6","7A","V7","7A+","V8","7B","7B+","V9","7C","V10","7C+","V11","8A","V12","8A+","V13","8B","V14","8B+","V15","8C","V16","8C+","V17","9A"].map(n=>n.toLowerCase());let ve=p(null),G=p(qt(new Date().toISOString().split("T")[0])),w=p(""),$=p(""),R=p(""),_e=p(""),he=p(""),y=p(""),L=p(""),U=p(""),ee=p(""),F=p(3),I=p(3),H=p(3),h=p(qt([{isSport:!1,name:"",grade:"",attemptType:"Flash",attemptsNum:1,notes:""}]));function m(){s(h,[...e(h),{isSport:!1,name:"",grade:"",attemptType:"Flash",attemptsNum:1,notes:""}],!0)}function S(n){s(h,e(h).filter((v,c)=>c!==n),!0)}function J(n,v){e(h)[n].attemptType=v,v==="Flash"&&(e(h)[n].attemptsNum=1)}function ce(n){s(ve,n,!0)}function oe(){s(ve,null)}let se=Tt(()=>e(R)==="Mixed");function M(n){return e(R)==="Sport"?!0:e(R)==="Bouldering"?!1:n.isSport}function x(n){return n.trim()?Ne.includes(n.trim().toLowerCase()):!0}let E=p("idle"),re=p("");function Te(){return e(w)?e(w)==="Other"&&!e($).trim()?"Please enter a custom location":e(R)?e(_e)?e(h).filter(v=>v.grade.trim()&&!x(v.grade)).length>0?"Please fix invalid grades":null:"Please select a training type":"Please select a climbing type":"Please select a location"}async function Y(){const n=Te();if(n){s(E,"error"),s(re,n,!0);return}s(E,"saving");try{const v=e(h).map(o=>({...o,isSport:M(o)})),c={date:e(G),location:e(w)==="Other"?e($):e(w),customLocation:e(w)==="Other"?e($):void 0,climbingType:e(R),trainingType:e(_e),difficulty:e(he),category:e(y),energySystem:e(L),techniqueFocus:e(U),wallAngle:e(ee),fingerLoad:e(F),shoulderLoad:e(I),forearmLoad:e(H),climbs:v},D=pa(c);if(Ut()){const o=await fa(c);o.ok?(aa(D.id),s(E,"success"),s(re,"Session saved and synced!")):(sa(D.id),s(E,"success"),s(re,"Saved locally. Sync failed: "+(o.error||"Unknown error")))}else s(E,"success"),s(re,"Saved locally. Will sync when online.");window.dispatchEvent(new CustomEvent("session-saved")),setTimeout(()=>{O()},2e3)}catch(v){s(E,"error"),s(re,"Failed to save session"),console.error("Save error:",v)}}function O(){s(G,new Date().toISOString().split("T")[0],!0),s(w,""),s($,""),s(R,""),s(_e,""),s(he,""),s(y,""),s(L,""),s(U,""),s(ee,""),s(F,3),s(I,3),s(H,3),s(h,[{isSport:!1,name:"",grade:"",attemptType:"Flash",attemptsNum:1,notes:""}],!0),s(E,"idle"),s(re,"")}var de=za(),pe=l(a(de),2),Oe=a(pe),be=l(a(Oe),2);T(be),t(Oe);var ue=l(Oe,2),Z=l(a(ue),2),ie=a(Z);ie.value=ie.__value="";var K=l(ie);P(K,17,()=>tt,z,(n,v)=>{var c=Ca(),D=a(c,!0);t(c);var o={};b(()=>{C(D,e(v)),o!==(o=e(v))&&(c.value=(c.__value=e(v))??"")}),r(n,c)}),t(Z),t(ue),t(pe);var Se=l(pe,2);{var qe=n=>{var v=Ta(),c=l(a(v),2);T(c),t(v),V(c,()=>e($),D=>s($,D)),r(n,v)};k(Se,n=>{e(w)==="Other"&&n(qe)})}var $e=l(Se,2),Re=l(a($e),2),Ee=a(Re);Ee.value=Ee.__value="";var mt=l(Ee);P(mt,17,()=>fe,z,(n,v)=>{var c=Fa(),D=a(c,!0);t(c);var o={};b(()=>{C(D,e(v)),o!==(o=e(v))&&(c.value=(c.__value=e(v))??"")}),r(n,c)}),t(Re),t($e);var _=l($e,2),f=l(a(_),2),g=a(f),j=l(a(g),2);T(j),ft(2),t(g);var Q=l(g,2),ke=l(a(Q),2);T(ke),ft(2),t(Q);var De=l(Q,2),kt=l(a(De),2);T(kt),ft(2),t(De),t(f),t(_);var at=l(_,2),gt=l(a(at),2),Qe=a(gt),nt=l(a(Qe),2),vt=a(nt);vt.value=vt.__value="";var Pe=l(vt);P(Pe,17,()=>A,z,(n,v)=>{var c=ja(),D=a(c,!0);t(c);var o={};b(()=>{C(D,e(v)),o!==(o=e(v))&&(c.value=(c.__value=e(v))??"")}),r(n,c)}),t(nt),t(Qe);var we=l(Qe,2),dt=l(a(we),2),Ye=a(dt);Ye.value=Ye.__value="";var yt=l(Ye);P(yt,17,()=>te,z,(n,v)=>{var c=Va(),D=a(c,!0);t(c);var o={};b(()=>{C(D,e(v)),o!==(o=e(v))&&(c.value=(c.__value=e(v))??"")}),r(n,c)}),t(dt),t(we);var st=l(we,2),Ze=l(a(st),2),Fe=a(Ze);Fe.value=Fe.__value="";var Ft=l(Fe);P(Ft,17,()=>X,z,(n,v)=>{var c=Aa(),D=a(c,!0);t(c);var o={};b(()=>{C(D,e(v)),o!==(o=e(v))&&(c.value=(c.__value=e(v))??"")}),r(n,c)}),t(Ze),t(st);var Ke=l(st,2),ct=l(a(Ke),2),ut=a(ct);ut.value=ut.__value="";var $t=l(ut);P($t,17,()=>ge,z,(n,v)=>{var c=Oa(),D=a(c,!0);t(c);var o={};b(()=>{C(D,e(v)),o!==(o=e(v))&&(c.value=(c.__value=e(v))??"")}),r(n,c)}),t(ct),t(Ke);var Xe=l(Ke,2),lt=l(a(Xe),2),ot=a(lt);ot.value=ot.__value="";var Rt=l(ot);P(Rt,17,()=>Je,z,(n,v)=>{var c=La(),D=a(c,!0);t(c);var o={};b(()=>{C(D,e(v)),o!==(o=e(v))&&(c.value=(c.__value=e(v))??"")}),r(n,c)}),t(lt),t(Xe);var ne=l(Xe,2),xe=l(a(ne),2),je=a(xe);je.value=je.__value="";var Et=l(je);P(Et,17,()=>ae,z,(n,v)=>{var c=Na(),D=a(c,!0);t(c);var o={};b(()=>{C(D,e(v)),o!==(o=e(v))&&(c.value=(c.__value=e(v))??"")}),r(n,c)}),t(xe),t(ne),t(gt),t(at);var _t=l(at,2),wt=l(a(_t),2),jt=a(wt),Dt=a(jt),Vt=a(Dt),Bt=a(Vt);{var Ht=n=>{var v=$a();r(n,v)};k(Bt,n=>{e(se)&&n(Ht)})}ft(6),t(Vt),t(Dt);var At=l(Dt);P(At,21,()=>e(h),z,(n,v,c)=>{var D=Pa(),o=a(D);{var i=B=>{var Ae=Ra(),rt=a(Ae);T(rt),t(Ae),ca(rt,()=>e(v).isSport,zt=>e(v).isSport=zt),r(B,Ae)};k(o,B=>{e(se)&&B(i)})}var d=l(o),N=a(d);T(N),t(d);var q=l(d),Ve=a(q);T(Ve);let Ie;var ze=l(Ve,2);{var Be=B=>{var Ae=Ea();r(B,Ae)};k(ze,B=>{x(e(v).grade)||B(Be)})}t(q);var Le=l(q),Ge=a(Le);Ge.__change=B=>J(c,B.target.value),P(Ge,21,()=>me,z,(B,Ae)=>{var rt=Da(),zt=a(rt,!0);t(rt);var W={};b(()=>{C(zt,e(Ae)),W!==(W=e(Ae))&&(rt.value=(rt.__value=e(Ae))??"")}),r(B,rt)}),t(Ge);var xt;ra(Ge),t(Le);var Pt=l(Le),Ct=a(Pt);T(Ct),t(Pt);var Me=l(Pt);let It;var ht=a(Me);va(ht),t(Me);var Lt=l(Me),Nt=a(Lt);{var ea=B=>{var Ae=Ba();Ae.__click=()=>S(c),r(B,Ae)};k(Nt,B=>{e(h).length>1&&B(ea)})}t(Lt),t(D),b(B=>{Ie=et(Ve,1,"grade-input svelte-1lf3qka",null,Ie,B),xt!==(xt=e(v).attemptType)&&(Ge.value=(Ge.__value=e(v).attemptType)??"",ia(Ge,e(v).attemptType)),Ct.disabled=e(v).attemptType==="Flash",It=et(Me,1,"notes-cell svelte-1lf3qka",null,It,{expanded:e(ve)===c})},[()=>({invalid:!x(e(v).grade)})]),V(N,()=>e(v).name,B=>e(v).name=B),V(Ve,()=>e(v).grade,B=>e(v).grade=B),V(Ct,()=>e(v).attemptsNum,B=>e(v).attemptsNum=B),ta("focus",ht,()=>ce(c)),ta("blur",ht,oe),V(ht,()=>e(v).notes,B=>e(v).notes=B),r(n,D)}),t(At),t(jt),t(wt);var Jt=l(wt,2);Jt.__click=m,t(_t);var Qt=l(_t,2),Yt=a(Qt);{var Zt=n=>{var v=Ia();let c;var D=a(v,!0);t(v),b(()=>{c=et(v,1,"save-message svelte-1lf3qka",null,c,{success:e(E)==="success",error:e(E)==="error"}),C(D,e(re))}),r(n,v)};k(Yt,n=>{e(re)&&n(Zt)})}var Ot=l(Yt,2);Ot.__click=Y;var Kt=a(Ot);{var Xt=n=>{var v=Ce("Saving...");r(n,v)},la=n=>{var v=pt(),c=it(v);{var D=i=>{var d=Ce("‚úì Saved!");r(i,d)},o=i=>{var d=Ce("Save Session");r(i,d)};k(c,i=>{e(E)==="success"?i(D):i(o,!1)},!0)}r(n,v)};k(Kt,n=>{e(E)==="saving"?n(Xt):n(la,!1)})}t(Ot),t(Qt),t(de),b(()=>Ot.disabled=e(E)==="saving"),V(be,()=>e(G),n=>s(G,n)),le(Z,()=>e(w),n=>s(w,n)),le(Re,()=>e(R),n=>s(R,n)),V(j,()=>e(F),n=>s(F,n)),V(ke,()=>e(I),n=>s(I,n)),V(kt,()=>e(H),n=>s(H,n)),le(nt,()=>e(_e),n=>s(_e,n)),le(dt,()=>e(he),n=>s(he,n)),le(Ze,()=>e(y),n=>s(y,n)),le(ct,()=>e(L),n=>s(L,n)),le(lt,()=>e(U),n=>s(U,n)),le(xe,()=>e(ee),n=>s(ee,n)),r(Ue,de),Mt()}Wt(["change","click"]);var Ma=u("<option> </option>"),Wa=u('<div class="input-with-action svelte-15o2ys1"><input type="text" id="crag-manual" placeholder="Enter custom crag name..." class="flat-left svelte-15o2ys1"/> <button type="button" class="action-btn flat-right svelte-15o2ys1" title="Back to list">‚úï</button></div>'),Ua=u("<option> </option>"),Ha=u("<option>Other (Manual Entry)</option>"),Ja=u('<select id="crag" class="svelte-15o2ys1"><option disabled> </option><!><!></select>'),Qa=u("<option> </option>"),Ya=u("<option> </option>"),Za=u("<option> </option>"),Ka=u("<option> </option>"),Xa=u("<option> </option>"),es=u("<option> </option>"),ts=u('<th class="svelte-15o2ys1">Sport?</th>'),as=u('<td class="center svelte-15o2ys1"><input type="checkbox" class="svelte-15o2ys1"/></td>'),ss=u('<span class="grade-error svelte-15o2ys1">Invalid</span>'),ls=u("<option> </option>"),os=u('<button type="button" class="remove-btn svelte-15o2ys1">‚úï</button>'),rs=u('<tr><!><td class="svelte-15o2ys1"><input type="text" placeholder="Route name..." class="svelte-15o2ys1"/></td><td class="svelte-15o2ys1"><input type="text" placeholder="V3"/> <!></td><td class="svelte-15o2ys1"><select class="svelte-15o2ys1"></select></td><td class="svelte-15o2ys1"><input type="number" min="1" class="svelte-15o2ys1"/></td><td><textarea placeholder="Notes..." class="svelte-15o2ys1"></textarea></td><td class="center svelte-15o2ys1"><!></td></tr>'),is=u("<div> </div>"),ns=u('<div class="form-content svelte-15o2ys1"><h3 class="svelte-15o2ys1">‚õ∞Ô∏è Outdoor Climb</h3> <div class="form-row svelte-15o2ys1"><div class="form-group svelte-15o2ys1"><label for="date" class="svelte-15o2ys1">Date</label> <input type="date" id="date" class="svelte-15o2ys1"/></div> <div class="form-group svelte-15o2ys1"><label for="area" class="svelte-15o2ys1">Area</label> <select id="area" class="svelte-15o2ys1"><option disabled>Select area...</option><!></select></div></div> <div class="form-row svelte-15o2ys1"><div class="form-group svelte-15o2ys1"><label for="crag" class="svelte-15o2ys1">Crag</label> <!></div> <div class="form-group svelte-15o2ys1"><label for="sector" class="svelte-15o2ys1">Wall / Sector</label> <input type="text" id="sector" placeholder="Enter sector or wall name..." class="svelte-15o2ys1"/></div></div> <div class="form-group svelte-15o2ys1"><label for="climbing-type" class="svelte-15o2ys1">Climbing Type</label> <select id="climbing-type" class="svelte-15o2ys1"><option disabled>Select type...</option><!></select></div> <div class="load-section svelte-15o2ys1"><h4 class="svelte-15o2ys1">Load Metrics</h4> <div class="load-metrics svelte-15o2ys1"><div class="load-item svelte-15o2ys1"><label for="finger-load" class="svelte-15o2ys1">Finger</label> <input type="number" id="finger-load" min="1" max="5" class="svelte-15o2ys1"/> <span class="load-scale svelte-15o2ys1">/ 5</span></div> <div class="load-item svelte-15o2ys1"><label for="shoulder-load" class="svelte-15o2ys1">Shoulder</label> <input type="number" id="shoulder-load" min="1" max="5" class="svelte-15o2ys1"/> <span class="load-scale svelte-15o2ys1">/ 5</span></div> <div class="load-item svelte-15o2ys1"><label for="forearm-load" class="svelte-15o2ys1">Forearm</label> <input type="number" id="forearm-load" min="1" max="5" class="svelte-15o2ys1"/> <span class="load-scale svelte-15o2ys1">/ 5</span></div></div></div> <div class="training-section svelte-15o2ys1"><h4 class="svelte-15o2ys1">Training Details</h4> <div class="training-grid svelte-15o2ys1"><div class="training-item svelte-15o2ys1"><label for="training-type" class="svelte-15o2ys1">Training Type</label> <select id="training-type" class="svelte-15o2ys1"><option disabled>Select...</option><!></select></div> <div class="training-item svelte-15o2ys1"><label for="difficulty" class="svelte-15o2ys1">Difficulty</label> <select id="difficulty" class="svelte-15o2ys1"><option disabled>Select...</option><!></select></div> <div class="training-item svelte-15o2ys1"><label for="category" class="svelte-15o2ys1">Category</label> <select id="category" class="svelte-15o2ys1"><option disabled>Select...</option><!></select></div> <div class="training-item svelte-15o2ys1"><label for="energy-system" class="svelte-15o2ys1">Energy System</label> <select id="energy-system" class="svelte-15o2ys1"><option disabled>Select...</option><!></select></div> <div class="training-item svelte-15o2ys1"><label for="technique-focus" class="svelte-15o2ys1">Technique Focus</label> <select id="technique-focus" class="svelte-15o2ys1"><option disabled>Select...</option><!></select></div></div></div> <div class="climbs-section svelte-15o2ys1"><h4 class="svelte-15o2ys1">Climbs</h4> <div class="table-container svelte-15o2ys1"><table class="climbs-table svelte-15o2ys1"><thead><tr><!><th class="svelte-15o2ys1">Name</th><th class="svelte-15o2ys1">Grade</th><th class="svelte-15o2ys1">Attempt</th><th class="svelte-15o2ys1">#</th><th class="svelte-15o2ys1">Notes</th><th class="svelte-15o2ys1"></th></tr></thead><tbody></tbody></table></div> <button type="button" class="add-btn svelte-15o2ys1">+ Add Climb</button></div> <div class="submit-section svelte-15o2ys1"><!> <button type="button" class="submit-btn svelte-15o2ys1"><!></button></div></div>');function vs(Ue,He){Gt(He,!0);const tt=ma(),fe=["Boulder","Sport","Trad"],me=["Flash","Redpoint","Dogged"],A=["Projecting","Onsighting","Campusing","Repeaters"],te=["Easy","Medium","Hard","Max","Limit+"],X=["None","Technique","Strength","Strength-endurance","Warm-up","Power"],ge=["Aerobic capacity","Aerobic lactic power","Anaerobic alactic capacity","Anaerobic alactic power","Anaerobic power","Anaerobic lactic capacity"],Je=["None","Double-clutch","Standing on volumes","Trusting feet"],ye=["V0-","4-","V0","4","V0+","4+","V1","5","V2","5+","V3","6A","V4","6B","V5","6C","V6","7A","V7","7A+","V8","7B","7B+","V9","7C","V10","7C+","V11","8A","V12","8A+","V13","8B","V14","8B+","V15","8C","V16","8C+","V17","9A"].map(o=>o.toLowerCase());let Ne=p(null),ve=p(qt(new Date().toISOString().split("T")[0])),G=p(""),w=p(""),$=p(""),R=p(""),_e=p(""),he=p(""),y=p(""),L=p(""),U=p(""),ee=p(3),F=p(3),I=p(3),H=p(qt([{isSport:!1,name:"",grade:"",attemptType:"Flash",attemptsNum:1,notes:""}])),h=Tt(()=>e(G)?ha(e(G)):[]),m=p(!1);da(()=>{e(G)&&(s(w,""),s(m,!1))});function S(){e(w)==="Other"&&(s(m,!0),s(w,""))}function J(){s(m,!1),s(w,"")}function ce(){s(H,[...e(H),{isSport:!1,name:"",grade:"",attemptType:"Flash",attemptsNum:1,notes:""}],!0)}function oe(o){s(H,e(H).filter((i,d)=>d!==o),!0)}function se(o,i){e(H)[o].attemptType=i,i==="Flash"&&(e(H)[o].attemptsNum=1)}function M(o){s(Ne,o,!0)}function x(){s(Ne,null)}let E=Tt(()=>e(R)==="Trad");function re(o){return e(R)==="Sport"?!0:e(R)==="Boulder"?!1:o.isSport}function Te(o){return o.trim()?ye.includes(o.trim().toLowerCase()):!0}let Y=p("idle"),O=p("");function de(){return e(G)?e(w)?e(R)?e(_e)?e(H).filter(i=>i.grade.trim()&&!Te(i.grade)).length>0?"Please fix invalid grades":null:"Please select a training type":"Please select a climbing type":"Please select a crag":"Please select an area"}async function pe(){const o=de();if(o){s(Y,"error"),s(O,o,!0);return}s(Y,"saving");try{const i=e(H).map(q=>({...q,isSport:re(q)})),d={date:e(ve),area:e(G),crag:e(w),sector:e($)||void 0,climbingType:e(R),trainingType:e(_e),difficulty:e(he),category:e(y),energySystem:e(L),techniqueFocus:e(U),fingerLoad:e(ee),shoulderLoad:e(F),forearmLoad:e(I),climbs:i},N=ga(d);if(Ut()){const q=await ya(d);q.ok?(aa(N.id),s(Y,"success"),s(O,"Session saved and synced!")):(sa(N.id),s(Y,"success"),s(O,"Saved locally. Sync failed: "+(q.error||"Unknown error")))}else s(Y,"success"),s(O,"Saved locally. Will sync when online.");window.dispatchEvent(new CustomEvent("session-saved")),setTimeout(()=>{Oe()},2e3)}catch(i){s(Y,"error"),s(O,"Failed to save session"),console.error("Save error:",i)}}function Oe(){s(ve,new Date().toISOString().split("T")[0],!0),s(G,""),s(w,""),s($,""),s(R,""),s(_e,""),s(he,""),s(y,""),s(L,""),s(U,""),s(ee,3),s(F,3),s(I,3),s(H,[{isSport:!1,name:"",grade:"",attemptType:"Flash",attemptsNum:1,notes:""}],!0),s(Y,"idle"),s(O,"")}var be=ns(),ue=l(a(be),2),Z=a(ue),ie=l(a(Z),2);T(ie),t(Z);var K=l(Z,2),Se=l(a(K),2),qe=a(Se);qe.value=qe.__value="";var $e=l(qe);P($e,17,()=>tt,z,(o,i)=>{var d=Ma(),N=a(d,!0);t(d);var q={};b(()=>{C(N,e(i)),q!==(q=e(i))&&(d.value=(d.__value=e(i))??"")}),r(o,d)}),t(Se),t(K),t(ue);var Re=l(ue,2),Ee=a(Re),mt=l(a(Ee),2);{var _=o=>{var i=Wa(),d=a(i);T(d);var N=l(d,2);N.__click=J,t(i),V(d,()=>e(w),q=>s(w,q)),r(o,i)},f=o=>{var i=Ja();i.__change=S;var d=a(i),N=a(d,!0);t(d),d.value=d.__value="";var q=l(d);P(q,17,()=>e(h),z,(ze,Be)=>{var Le=Ua(),Ge=a(Le,!0);t(Le);var xt={};b(()=>{C(Ge,e(Be)),xt!==(xt=e(Be))&&(Le.value=(Le.__value=e(Be))??"")}),r(ze,Le)});var Ve=l(q);{var Ie=ze=>{var Be=Ha();Be.value=Be.__value="Other",r(ze,Be)};k(Ve,ze=>{e(G)&&ze(Ie)})}t(i),b(()=>{i.disabled=!e(G),C(N,e(G)?"Select crag...":"Select area first...")}),le(i,()=>e(w),ze=>s(w,ze)),r(o,i)};k(mt,o=>{e(m)?o(_):o(f,!1)})}t(Ee);var g=l(Ee,2),j=l(a(g),2);T(j),t(g),t(Re);var Q=l(Re,2),ke=l(a(Q),2),De=a(ke);De.value=De.__value="";var kt=l(De);P(kt,17,()=>fe,z,(o,i)=>{var d=Qa(),N=a(d,!0);t(d);var q={};b(()=>{C(N,e(i)),q!==(q=e(i))&&(d.value=(d.__value=e(i))??"")}),r(o,d)}),t(ke),t(Q);var at=l(Q,2),gt=l(a(at),2),Qe=a(gt),nt=l(a(Qe),2);T(nt),ft(2),t(Qe);var vt=l(Qe,2),Pe=l(a(vt),2);T(Pe),ft(2),t(vt);var we=l(vt,2),dt=l(a(we),2);T(dt),ft(2),t(we),t(gt),t(at);var Ye=l(at,2),yt=l(a(Ye),2),st=a(yt),Ze=l(a(st),2),Fe=a(Ze);Fe.value=Fe.__value="";var Ft=l(Fe);P(Ft,17,()=>A,z,(o,i)=>{var d=Ya(),N=a(d,!0);t(d);var q={};b(()=>{C(N,e(i)),q!==(q=e(i))&&(d.value=(d.__value=e(i))??"")}),r(o,d)}),t(Ze),t(st);var Ke=l(st,2),ct=l(a(Ke),2),ut=a(ct);ut.value=ut.__value="";var $t=l(ut);P($t,17,()=>te,z,(o,i)=>{var d=Za(),N=a(d,!0);t(d);var q={};b(()=>{C(N,e(i)),q!==(q=e(i))&&(d.value=(d.__value=e(i))??"")}),r(o,d)}),t(ct),t(Ke);var Xe=l(Ke,2),lt=l(a(Xe),2),ot=a(lt);ot.value=ot.__value="";var Rt=l(ot);P(Rt,17,()=>X,z,(o,i)=>{var d=Ka(),N=a(d,!0);t(d);var q={};b(()=>{C(N,e(i)),q!==(q=e(i))&&(d.value=(d.__value=e(i))??"")}),r(o,d)}),t(lt),t(Xe);var ne=l(Xe,2),xe=l(a(ne),2),je=a(xe);je.value=je.__value="";var Et=l(je);P(Et,17,()=>ge,z,(o,i)=>{var d=Xa(),N=a(d,!0);t(d);var q={};b(()=>{C(N,e(i)),q!==(q=e(i))&&(d.value=(d.__value=e(i))??"")}),r(o,d)}),t(xe),t(ne);var _t=l(ne,2),wt=l(a(_t),2),jt=a(wt);jt.value=jt.__value="";var Dt=l(jt);P(Dt,17,()=>Je,z,(o,i)=>{var d=es(),N=a(d,!0);t(d);var q={};b(()=>{C(N,e(i)),q!==(q=e(i))&&(d.value=(d.__value=e(i))??"")}),r(o,d)}),t(wt),t(_t),t(yt),t(Ye);var Vt=l(Ye,2),Bt=l(a(Vt),2),Ht=a(Bt),At=a(Ht),Jt=a(At),Qt=a(Jt);{var Yt=o=>{var i=ts();r(o,i)};k(Qt,o=>{e(E)&&o(Yt)})}ft(6),t(Jt),t(At);var Zt=l(At);P(Zt,21,()=>e(H),z,(o,i,d)=>{var N=rs(),q=a(N);{var Ve=W=>{var We=as(),bt=a(We);T(bt),t(We),ca(bt,()=>e(i).isSport,oa=>e(i).isSport=oa),r(W,We)};k(q,W=>{e(E)&&W(Ve)})}var Ie=l(q),ze=a(Ie);T(ze),t(Ie);var Be=l(Ie),Le=a(Be);T(Le);let Ge;var xt=l(Le,2);{var Pt=W=>{var We=ss();r(W,We)};k(xt,W=>{Te(e(i).grade)||W(Pt)})}t(Be);var Ct=l(Be),Me=a(Ct);Me.__change=W=>se(d,W.target.value),P(Me,21,()=>me,z,(W,We)=>{var bt=ls(),oa=a(bt,!0);t(bt);var na={};b(()=>{C(oa,e(We)),na!==(na=e(We))&&(bt.value=(bt.__value=e(We))??"")}),r(W,bt)}),t(Me);var It;ra(Me),t(Ct);var ht=l(Ct),Lt=a(ht);T(Lt),t(ht);var Nt=l(ht);let ea;var B=a(Nt);va(B),t(Nt);var Ae=l(Nt),rt=a(Ae);{var zt=W=>{var We=os();We.__click=()=>oe(d),r(W,We)};k(rt,W=>{e(H).length>1&&W(zt)})}t(Ae),t(N),b(W=>{Ge=et(Le,1,"grade-input svelte-15o2ys1",null,Ge,W),It!==(It=e(i).attemptType)&&(Me.value=(Me.__value=e(i).attemptType)??"",ia(Me,e(i).attemptType)),Lt.disabled=e(i).attemptType==="Flash",ea=et(Nt,1,"notes-cell svelte-15o2ys1",null,ea,{expanded:e(Ne)===d})},[()=>({invalid:!Te(e(i).grade)})]),V(ze,()=>e(i).name,W=>e(i).name=W),V(Le,()=>e(i).grade,W=>e(i).grade=W),V(Lt,()=>e(i).attemptsNum,W=>e(i).attemptsNum=W),ta("focus",B,()=>M(d)),ta("blur",B,x),V(B,()=>e(i).notes,W=>e(i).notes=W),r(o,N)}),t(Zt),t(Ht),t(Bt);var Ot=l(Bt,2);Ot.__click=ce,t(Vt);var Kt=l(Vt,2),Xt=a(Kt);{var la=o=>{var i=is();let d;var N=a(i,!0);t(i),b(()=>{d=et(i,1,"save-message svelte-15o2ys1",null,d,{success:e(Y)==="success",error:e(Y)==="error"}),C(N,e(O))}),r(o,i)};k(Xt,o=>{e(O)&&o(la)})}var n=l(Xt,2);n.__click=pe;var v=a(n);{var c=o=>{var i=Ce("Saving...");r(o,i)},D=o=>{var i=pt(),d=it(i);{var N=Ve=>{var Ie=Ce("‚úì Saved!");r(Ve,Ie)},q=Ve=>{var Ie=Ce("Save Session");r(Ve,Ie)};k(d,Ve=>{e(Y)==="success"?Ve(N):Ve(q,!1)},!0)}r(o,i)};k(v,o=>{e(Y)==="saving"?o(c):o(D,!1)})}t(n),t(Kt),t(be),b(()=>n.disabled=e(Y)==="saving"),V(ie,()=>e(ve),o=>s(ve,o)),le(Se,()=>e(G),o=>s(G,o)),V(j,()=>e($),o=>s($,o)),le(ke,()=>e(R),o=>s(R,o)),V(nt,()=>e(ee),o=>s(ee,o)),V(Pe,()=>e(F),o=>s(F,o)),V(dt,()=>e(I),o=>s(I,o)),le(Ze,()=>e(_e),o=>s(_e,o)),le(ct,()=>e(he),o=>s(he,o)),le(lt,()=>e(y),o=>s(y,o)),le(xe,()=>e(L),o=>s(L,o)),le(wt,()=>e(U),o=>s(U,o)),r(Ue,be),Mt()}Wt(["click","change"]);var ds=u('<div class="form-content svelte-1w0zsmt"><h3 class="svelte-1w0zsmt">üèãÔ∏è Gym Session</h3> <p class="form-placeholder svelte-1w0zsmt">Gym session form fields will go here</p></div>');function cs(Ue){var He=ds();r(Ue,He)}var us=u("<option> </option>"),_s=u("<option> </option>"),ps=u('<button class="remove-set-btn svelte-1m63nqt">‚úï</button>'),fs=u('<div class="set-row svelte-1m63nqt"><div class="input-wrap svelte-1m63nqt"><label class="svelte-1m63nqt">Weight</label> <input type="number" placeholder="0" class="svelte-1m63nqt"/></div> <div class="input-wrap svelte-1m63nqt"><label class="svelte-1m63nqt">Reps/Secs</label> <input type="number" placeholder="1" class="svelte-1m63nqt"/></div> <!></div>'),ms=u('<div class="exercise-card svelte-1m63nqt"><div class="card-header svelte-1m63nqt"><div class="header-inputs svelte-1m63nqt"><select class="svelte-1m63nqt"></select> <select class="svelte-1m63nqt"></select></div> <button class="remove-card-btn svelte-1m63nqt" title="Remove Exercise">‚úï</button></div> <div class="sets-list svelte-1m63nqt"><!> <button class="add-set-btn svelte-1m63nqt">+ Add Set</button></div> <div class="card-footer svelte-1m63nqt"><div class="meta-input svelte-1m63nqt"><label class="svelte-1m63nqt">Total Sets</label> <input type="number" readonly="" disabled class="svelte-1m63nqt"/></div> <div class="notes-input svelte-1m63nqt"><label class="svelte-1m63nqt">Notes</label> <input type="text" placeholder="Notes..." class="svelte-1m63nqt"/></div></div></div>'),gs=u("<div> </div>"),ys=u('<div class="form-content svelte-1m63nqt"><div class="header-row svelte-1m63nqt"><h3 class="svelte-1m63nqt">ü§è Fingerboarding</h3> <button class="add-row-btn svelte-1m63nqt">+ Add Exercise</button></div> <div class="form-group date-group svelte-1m63nqt"><label for="date">Date</label> <input type="date" id="date" class="svelte-1m63nqt"/></div> <div class="cards-container svelte-1m63nqt"></div> <div class="submit-section"><!> <button type="button" class="submit-btn svelte-1m63nqt"><!></button></div></div>');function hs(Ue,He){Gt(He,!0);const tt=["Max hangs","Recruitment pulls","Max pick-ups"],fe=["Full-crimp","Half-crimp","Three finger drag","Pinch","Open hand","Sloper"];let me=p(qt(new Date().toISOString().split("T")[0])),A=p(qt([]));function te(){s(A,[...e(A),{id:crypto.randomUUID(),name:tt[0],gripType:fe[1],sets:1,details:[{weight:0,reps:5}],notes:""}],!0)}da(()=>{e(A).length===0&&te()});function X(h){s(A,e(A).filter((m,S)=>S!==h),!0)}function ge(h){const m=e(A)[h],S=m.details[m.details.length-1];m.details=[...m.details,{...S}],m.sets=m.details.length}function Je(h,m){const S=e(A)[h];S.details.length>1&&(S.details=S.details.filter((J,ce)=>ce!==m),S.sets=S.details.length)}let ae=p("idle"),ye=p("");async function Ne(){s(ae,"saving");try{const h={date:e(me),location:"N/A",exercises:JSON.parse(JSON.stringify(e(A)))},m=ba(h);if(Ut()){const S=await Sa(h);S.ok?(aa(m.id),s(ae,"success"),s(ye,"Session saved and synced!")):(sa(m.id),s(ae,"success"),s(ye,"Saved locally. Sync failed: "+(S.error||"Unknown error")))}else s(ae,"success"),s(ye,"Saved locally. Will sync when online.");window.dispatchEvent(new CustomEvent("session-saved")),setTimeout(()=>{ve()},2e3)}catch(h){s(ae,"error"),s(ye,"Failed to save session"),console.error("Save error:",h)}}function ve(){s(me,new Date().toISOString().split("T")[0],!0),s(A,[],!0),te(),s(ae,"idle"),s(ye,"")}var G=ys(),w=a(G),$=l(a(w),2);$.__click=te,t(w);var R=l(w,2),_e=l(a(R),2);T(_e),t(R);var he=l(R,2);P(he,21,()=>e(A),z,(h,m,S)=>{var J=ms(),ce=a(J),oe=a(ce),se=a(oe);P(se,21,()=>tt,z,(Z,ie)=>{var K=us(),Se=a(K,!0);t(K);var qe={};b(()=>{C(Se,e(ie)),qe!==(qe=e(ie))&&(K.value=(K.__value=e(ie))??"")}),r(Z,K)}),t(se);var M=l(se,2);P(M,21,()=>fe,z,(Z,ie)=>{var K=_s(),Se=a(K,!0);t(K);var qe={};b(()=>{C(Se,e(ie)),qe!==(qe=e(ie))&&(K.value=(K.__value=e(ie))??"")}),r(Z,K)}),t(M),t(oe);var x=l(oe,2);x.__click=()=>X(S),t(ce);var E=l(ce,2),re=a(E);P(re,17,()=>e(m).details,z,(Z,ie,K)=>{var Se=fs(),qe=a(Se),$e=a(qe);St($e,"for",`weight-${S}-${K}`);var Re=l($e,2);T(Re),St(Re,"id",`weight-${S}-${K}`),t(qe);var Ee=l(qe,2),mt=a(Ee);St(mt,"for",`reps-${S}-${K}`);var _=l(mt,2);T(_),St(_,"id",`reps-${S}-${K}`),t(Ee);var f=l(Ee,2);{var g=j=>{var Q=ps();Q.__click=()=>Je(S,K),r(j,Q)};k(f,j=>{e(m).details.length>1&&j(g)})}t(Se),V(Re,()=>e(ie).weight,j=>e(ie).weight=j),V(_,()=>e(ie).reps,j=>e(ie).reps=j),r(Z,Se)});var Te=l(re,2);Te.__click=()=>ge(S),t(E);var Y=l(E,2),O=a(Y),de=a(O);St(de,"for",`total-sets-${S}`);var pe=l(de,2);T(pe),St(pe,"id",`total-sets-${S}`),t(O);var Oe=l(O,2),be=a(Oe);St(be,"for",`notes-${S}`);var ue=l(be,2);T(ue),St(ue,"id",`notes-${S}`),t(Oe),t(Y),t(J),b(()=>_a(pe,e(m).sets)),le(se,()=>e(m).name,Z=>e(m).name=Z),le(M,()=>e(m).gripType,Z=>e(m).gripType=Z),V(ue,()=>e(m).notes,Z=>e(m).notes=Z),r(h,J)}),t(he);var y=l(he,2),L=a(y);{var U=h=>{var m=gs();let S;var J=a(m,!0);t(m),b(()=>{S=et(m,1,"save-message svelte-1m63nqt",null,S,{success:e(ae)==="success",error:e(ae)==="error"}),C(J,e(ye))}),r(h,m)};k(L,h=>{e(ye)&&h(U)})}var ee=l(L,2);ee.__click=Ne;var F=a(ee);{var I=h=>{var m=Ce("Saving...");r(h,m)},H=h=>{var m=pt(),S=it(m);{var J=oe=>{var se=Ce("‚úì Saved!");r(oe,se)},ce=oe=>{var se=Ce("Save Session");r(oe,se)};k(S,oe=>{e(ae)==="success"?oe(J):oe(ce,!1)},!0)}r(h,m)};k(F,h=>{e(ae)==="saving"?h(I):h(H,!1)})}t(ee),t(y),t(G),b(()=>ee.disabled=e(ae)==="saving"),V(_e,()=>e(me),h=>s(me,h)),r(Ue,G),Mt()}Wt(["click"]);var bs=u("<option> </option>"),Ss=u('<input type="text" placeholder="Enter venue name" class="mt-2 svelte-1fje4dh"/>'),qs=u("<option> </option>"),ks=u("<option> </option>"),ws=u('<input type="text" placeholder="Round name" class="mt-2 svelte-1fje4dh"/>'),xs=u('<div class="result-mode-content svelte-1fje4dh"><div class="form-group svelte-1fje4dh"><label for="position" class="svelte-1fje4dh">Final Position</label> <input type="number" id="position" placeholder="#" class="large-input svelte-1fje4dh"/></div></div>'),Cs=u("<option> </option>"),Ts=u('<input type="number" min="1" class="svelte-1fje4dh"/>'),Fs=u('<span class="flash-dash">-</span>'),js=u('<tr><td class="col-name svelte-1fje4dh"><input type="text" class="svelte-1fje4dh"/></td><td class="col-status svelte-1fje4dh"><select class="svelte-1fje4dh"></select></td><td class="col-attempt svelte-1fje4dh"><!></td><td class="col-notes svelte-1fje4dh"><input type="text" placeholder="..." class="svelte-1fje4dh"/></td><td class="col-action svelte-1fje4dh"><button class="svelte-1fje4dh">‚úï</button></td></tr>'),Vs=u('<div class="load-metrics-compact svelte-1fje4dh"><div class="metric svelte-1fje4dh"><label for="finger">Finger Load</label> <input type="number" id="finger" min="0" max="5" step="0.5" class="svelte-1fje4dh"/></div> <div class="metric svelte-1fje4dh"><label for="shoulder">Shoulder Load</label> <input type="number" id="shoulder" min="0" max="5" step="0.5" class="svelte-1fje4dh"/></div> <div class="metric svelte-1fje4dh"><label for="forearm">Forearm Load</label> <input type="number" id="forearm" min="0" max="5" step="0.5" class="svelte-1fje4dh"/></div></div> <div class="climbs-table-container svelte-1fje4dh"><div class="section-header svelte-1fje4dh"><h4 class="svelte-1fje4dh">Boulders / Routes</h4></div> <table class="climbs-table svelte-1fje4dh"><thead><tr><th class="svelte-1fje4dh">#</th><th class="svelte-1fje4dh">Result</th><th class="svelte-1fje4dh">Att.</th><th class="svelte-1fje4dh">Notes</th><th class="svelte-1fje4dh"></th></tr></thead><tbody></tbody></table> <button class="add-row-btn svelte-1fje4dh">+ Add Row</button></div>',1),As=u("<div> </div>"),Os=u('<div class="form-content svelte-1fje4dh"><h3 class="svelte-1fje4dh">üèÜ Competition</h3> <div class="form-grid svelte-1fje4dh"><div class="form-group svelte-1fje4dh"><label for="date" class="svelte-1fje4dh">Date</label> <input type="date" id="date" class="svelte-1fje4dh"/></div> <div class="form-group svelte-1fje4dh"><label for="venue" class="svelte-1fje4dh">Venue</label> <select id="venue" class="svelte-1fje4dh"><option disabled>Select venue...</option><!></select> <!></div></div> <div class="form-group mb-4 svelte-1fje4dh"><label for="type" class="svelte-1fje4dh">Type</label> <select id="type" class="svelte-1fje4dh"></select></div> <div class="round-section svelte-1fje4dh"><div class="form-group svelte-1fje4dh"><label for="round" class="svelte-1fje4dh">Round</label> <select id="round" class="svelte-1fje4dh"></select> <!></div> <!></div> <div class="submit-section"><!> <button type="button" class="submit-btn svelte-1fje4dh"><!></button></div></div>');function Ls(Ue,He){Gt(He,!0);const tt=["Flashpoint Bristol","Rockstar Techno","Rockstar Unit 3","Rockstar Unit 5","Bloc","TCA","Other"],fe=["Bouldering","Lead","Speed"],me=["Qualifiers","Semi-Finals","Finals","Result","Other"],A=["Flash","Top","Zone","Attempt"];let te=p(qt(new Date().toISOString().split("T")[0])),X=p(""),ge=p(""),Je=p("Bouldering"),ae=p(4),ye=p(4),Ne=p(4),ve=p("Qualifiers"),G=p(""),w=p(null),$=p(qt([{name:"#1",status:"Flash",attemptCount:1,notes:""}])),R=Tt(()=>e(ve)==="Result"),_e=Tt(()=>e(X)==="Other"),he=Tt(()=>e(ve)==="Other"),y=Tt(()=>e(ve)==="Other"?e(G):e(ve));function L(){const _=e($).length+1;s($,[...e($),{name:`#${_}`,status:"Flash",attemptCount:1,notes:""}],!0)}function U(_){e($).length>1?s($,e($).filter((f,g)=>g!==_),!0):e($)[0]={name:"#1",status:"Flash",attemptCount:1,notes:""}}function ee(_,f){e($)[_].status=f,f==="Flash"&&(e($)[_].attemptCount=1)}let F=p("idle"),I=p("");async function H(){if(!e(X)||e(X)==="Other"&&!e(ge)){s(F,"error"),s(I,"Please specify a venue");return}s(F,"saving");try{const _={name:e(y),position:e(R)?e(w):void 0,climbs:e(R)?void 0:JSON.parse(JSON.stringify(e($)))},f={date:e(te),venue:e(X)==="Other"?e(ge):e(X),customVenue:e(X)==="Other"?e(ge):void 0,type:e(Je),fingerLoad:e(R)?void 0:e(ae),shoulderLoad:e(R)?void 0:e(ye),forearmLoad:e(R)?void 0:e(Ne),rounds:[_]},g=qa(f);if(Ut()){const j=await ka(f);j.ok?(aa(g.id),s(F,"success"),s(I,"Competition saved and synced!")):(sa(g.id),s(F,"success"),s(I,"Saved locally. Sync failed: "+(j.error||"Unknown error")))}else s(F,"success"),s(I,"Saved locally. Will sync when online.");window.dispatchEvent(new CustomEvent("session-saved")),setTimeout(()=>{h()},2e3)}catch(_){s(F,"error"),s(I,"Failed to save session"),console.error("Save error:",_)}}function h(){s(te,new Date().toISOString().split("T")[0],!0),s(X,""),s(ge,""),s(w,null),s($,[{name:"#1",status:"Flash",attemptCount:1,notes:""}],!0),s(F,"idle"),s(I,"")}var m=Os(),S=l(a(m),2),J=a(S),ce=l(a(J),2);T(ce),t(J);var oe=l(J,2),se=l(a(oe),2),M=a(se);M.value=M.__value="";var x=l(M);P(x,17,()=>tt,z,(_,f)=>{var g=bs(),j=a(g,!0);t(g);var Q={};b(()=>{C(j,e(f)),Q!==(Q=e(f))&&(g.value=(g.__value=e(f))??"")}),r(_,g)}),t(se);var E=l(se,2);{var re=_=>{var f=Ss();T(f),V(f,()=>e(ge),g=>s(ge,g)),r(_,f)};k(E,_=>{e(_e)&&_(re)})}t(oe),t(S);var Te=l(S,2),Y=l(a(Te),2);P(Y,21,()=>fe,z,(_,f)=>{var g=qs(),j=a(g,!0);t(g);var Q={};b(()=>{C(j,e(f)),Q!==(Q=e(f))&&(g.value=(g.__value=e(f))??"")}),r(_,g)}),t(Y),t(Te);var O=l(Te,2),de=a(O),pe=l(a(de),2);P(pe,21,()=>me,z,(_,f)=>{var g=ks(),j=a(g,!0);t(g);var Q={};b(()=>{C(j,e(f)),Q!==(Q=e(f))&&(g.value=(g.__value=e(f))??"")}),r(_,g)}),t(pe);var Oe=l(pe,2);{var be=_=>{var f=ws();T(f),V(f,()=>e(G),g=>s(G,g)),r(_,f)};k(Oe,_=>{e(he)&&_(be)})}t(de);var ue=l(de,2);{var Z=_=>{var f=xs(),g=a(f),j=l(a(g),2);T(j),t(g),t(f),V(j,()=>e(w),Q=>s(w,Q)),r(_,f)},ie=_=>{var f=Vs(),g=it(f),j=a(g),Q=l(a(j),2);T(Q),t(j);var ke=l(j,2),De=l(a(ke),2);T(De),t(ke);var kt=l(ke,2),at=l(a(kt),2);T(at),t(kt),t(g);var gt=l(g,2),Qe=l(a(gt),2),nt=l(a(Qe));P(nt,21,()=>e($),z,(Pe,we,dt)=>{var Ye=js(),yt=a(Ye),st=a(yt);T(st),t(yt);var Ze=l(yt),Fe=a(Ze);Fe.__change=ne=>ee(dt,ne.target.value),P(Fe,21,()=>A,z,(ne,xe)=>{var je=Cs(),Et=a(je,!0);t(je);var _t={};b(()=>{C(Et,e(xe)),_t!==(_t=e(xe))&&(je.value=(je.__value=e(xe))??"")}),r(ne,je)}),t(Fe);var Ft;ra(Fe),t(Ze);var Ke=l(Ze),ct=a(Ke);{var ut=ne=>{var xe=Ts();T(xe),V(xe,()=>e(we).attemptCount,je=>e(we).attemptCount=je),r(ne,xe)},$t=ne=>{var xe=Fs();r(ne,xe)};k(ct,ne=>{e(we).status!=="Flash"?ne(ut):ne($t,!1)})}t(Ke);var Xe=l(Ke),lt=a(Xe);T(lt),t(Xe);var ot=l(Xe),Rt=a(ot);Rt.__click=()=>U(dt),t(ot),t(Ye),b(()=>{Ft!==(Ft=e(we).status)&&(Fe.value=(Fe.__value=e(we).status)??"",ia(Fe,e(we).status))}),V(st,()=>e(we).name,ne=>e(we).name=ne),V(lt,()=>e(we).notes,ne=>e(we).notes=ne),r(Pe,Ye)}),t(nt),t(Qe);var vt=l(Qe,2);vt.__click=L,t(gt),V(Q,()=>e(ae),Pe=>s(ae,Pe)),V(De,()=>e(ye),Pe=>s(ye,Pe)),V(at,()=>e(Ne),Pe=>s(Ne,Pe)),r(_,f)};k(ue,_=>{e(R)?_(Z):_(ie,!1)})}t(O);var K=l(O,2),Se=a(K);{var qe=_=>{var f=As();let g;var j=a(f,!0);t(f),b(()=>{g=et(f,1,"save-message svelte-1fje4dh",null,g,{success:e(F)==="success",error:e(F)==="error"}),C(j,e(I))}),r(_,f)};k(Se,_=>{e(I)&&_(qe)})}var $e=l(Se,2);$e.__click=H;var Re=a($e);{var Ee=_=>{var f=Ce("Saving...");r(_,f)},mt=_=>{var f=pt(),g=it(f);{var j=ke=>{var De=Ce("‚úì Saved!");r(ke,De)},Q=ke=>{var De=Ce("Save Session");r(ke,De)};k(g,ke=>{e(F)==="success"?ke(j):ke(Q,!1)},!0)}r(_,f)};k(Re,_=>{e(F)==="saving"?_(Ee):_(mt,!1)})}t($e),t(K),t(m),b(()=>$e.disabled=e(F)==="saving"),V(ce,()=>e(te),_=>s(te,_)),le(se,()=>e(X),_=>s(X,_)),le(Y,()=>e(Je),_=>s(Je,_)),le(pe,()=>e(ve),_=>s(ve,_)),r(Ue,m),Mt()}Wt(["change","click"]);var Ns=u('<span class="spinner svelte-b2zgdd"></span> Syncing...',1),$s=u("<button><!></button>"),Rs=u("<div> </div>"),Es=u('<div><div class="sync-info svelte-b2zgdd"><span class="sync-icon svelte-b2zgdd"> </span> <span class="sync-text svelte-b2zgdd"><!></span></div> <!> <!></div>'),Ds=u("<option> </option>"),Bs=u('<div class="form-container svelte-b2zgdd"><!></div>'),Ps=u('<div class="page svelte-b2zgdd"><div class="page-header svelte-b2zgdd"><h1 class="svelte-b2zgdd">üìù Log Data</h1> <p class="subtitle svelte-b2zgdd">Record your training sessions</p></div> <!> <div class="content-card svelte-b2zgdd"><div class="form-group svelte-b2zgdd"><label for="activity-type" class="svelte-b2zgdd">Activity Type</label> <select id="activity-type" class="svelte-b2zgdd"><option disabled>Select an activity...</option><!></select></div> <!></div></div>');function Qs(Ue,He){Gt(He,!0);const tt=[{value:"indoor_climb",label:"Indoor Climb",icon:"üßó"},{value:"outdoor_climb",label:"Outdoor Climb",icon:"‚õ∞Ô∏è"},{value:"gym_session",label:"Gym Session",icon:"üèãÔ∏è"},{value:"fingerboarding",label:"Fingerboarding",icon:"ü§è"},{value:"competition",label:"Competition",icon:"üèÜ"}];let fe=p(""),me=p(0),A=p("idle"),te=p(""),X=p(!0);ua(()=>{ge(),s(X,Ut(),!0);const y=()=>{s(X,!0),ge()},L=()=>{s(X,!1)},U=()=>{ge()};return window.addEventListener("online",y),window.addEventListener("offline",L),window.addEventListener("session-saved",U),()=>{window.removeEventListener("online",y),window.removeEventListener("offline",L),window.removeEventListener("session-saved",U)}});function ge(){s(me,wa(),!0)}async function Je(){if(!e(X)){s(A,"error"),s(te,"No network connection");return}s(A,"syncing"),s(te,"");try{const y=await xa();y.failed===0&&y.success>0?(s(A,"success"),s(te,`Synced ${y.success} session${y.success>1?"s":""}!`)):y.failed>0&&y.success>0?(s(A,"error"),s(te,`Synced ${y.success}, failed ${y.failed}`)):y.failed>0?(s(A,"error"),s(te,`Failed to sync ${y.failed} session${y.failed>1?"s":""}`)):(s(A,"idle"),s(te,"")),ge(),e(A)==="success"&&setTimeout(()=>{s(A,"idle"),s(te,"")},3e3)}catch(y){s(A,"error"),s(te,"Sync failed"),console.error("Sync error:",y)}}var ae=Ps(),ye=l(a(ae),2);{var Ne=y=>{var L=Es();let U;var ee=a(L),F=a(ee),I=a(F,!0);t(F);var H=l(F,2),h=a(H);{var m=M=>{var x=Ce();b(()=>C(x,`${e(me)??""} session${e(me)>1?"s":""} waiting to sync`)),r(M,x)},S=M=>{var x=Ce();b(()=>C(x,`Offline - ${e(me)??""} session${e(me)>1?"s":""} saved locally`)),r(M,x)};k(h,M=>{e(X)?M(m):M(S,!1)})}t(H),t(ee);var J=l(ee,2);{var ce=M=>{var x=$s();let E;x.__click=Je;var re=a(x);{var Te=O=>{var de=Ns();ft(),r(O,de)},Y=O=>{var de=pt(),pe=it(de);{var Oe=ue=>{var Z=Ce("‚úì Synced!");r(ue,Z)},be=ue=>{var Z=Ce("Sync Now");r(ue,Z)};k(pe,ue=>{e(A)==="success"?ue(Oe):ue(be,!1)},!0)}r(O,de)};k(re,O=>{e(A)==="syncing"?O(Te):O(Y,!1)})}t(x),b(()=>{E=et(x,1,"sync-btn svelte-b2zgdd",null,E,{syncing:e(A)==="syncing"}),x.disabled=e(A)==="syncing"}),r(M,x)};k(J,M=>{e(X)&&M(ce)})}var oe=l(J,2);{var se=M=>{var x=Rs();let E;var re=a(x,!0);t(x),b(()=>{E=et(x,1,"sync-message svelte-b2zgdd",null,E,{error:e(A)==="error",success:e(A)==="success"}),C(re,e(te))}),r(M,x)};k(oe,M=>{e(te)&&M(se)})}t(L),b(()=>{U=et(L,1,"sync-banner svelte-b2zgdd",null,U,{offline:!e(X)}),C(I,e(X)?"üîÑ":"üì¥")}),r(y,L)};k(ye,y=>{e(me)>0&&y(Ne)})}var ve=l(ye,2),G=a(ve),w=l(a(G),2),$=a(w);$.value=$.__value="";var R=l($);P(R,17,()=>tt,y=>y.value,(y,L)=>{var U=Ds(),ee=a(U);t(U);var F={};b(()=>{C(ee,`${e(L).icon??""} ${e(L).label??""}`),F!==(F=e(L).value)&&(U.value=(U.__value=e(L).value)??"")}),r(y,U)}),t(w),t(G);var _e=l(G,2);{var he=y=>{var L=Bs(),U=a(L);{var ee=I=>{Ga(I,{})},F=I=>{var H=pt(),h=it(H);{var m=J=>{vs(J,{})},S=J=>{var ce=pt(),oe=it(ce);{var se=x=>{cs(x)},M=x=>{var E=pt(),re=it(E);{var Te=O=>{hs(O,{})},Y=O=>{var de=pt(),pe=it(de);{var Oe=be=>{Ls(be,{})};k(pe,be=>{e(fe)==="competition"&&be(Oe)},!0)}r(O,de)};k(re,O=>{e(fe)==="fingerboarding"?O(Te):O(Y,!1)},!0)}r(x,E)};k(oe,x=>{e(fe)==="gym_session"?x(se):x(M,!1)},!0)}r(J,ce)};k(h,J=>{e(fe)==="outdoor_climb"?J(m):J(S,!1)},!0)}r(I,H)};k(U,I=>{e(fe)==="indoor_climb"?I(ee):I(F,!1)})}t(L),r(y,L)};k(_e,y=>{e(fe)&&y(he)})}t(ve),t(ae),le(w,()=>e(fe),y=>s(fe,y)),r(Ue,ae),Mt()}Wt(["click"]);export{Qs as component};
