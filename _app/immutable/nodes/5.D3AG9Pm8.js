import{f as n,a as r,c as Re,t as ka}from"../chunks/Daoe3kko.js";import{a8 as ss,k as ts,p as Ke,c as a,s as t,g as s,e as M,r as e,t as u,a as Qe,d as v,f as Be,aM as Xe,A as _a,o as Ka,as as Aa,a_ as $a,j as is}from"../chunks/BD2jSOmL.js";import{d as Ye,s as l,e as rs}from"../chunks/Clw8EWiG.js";import{i as d}from"../chunks/CKIECWdo.js";import{j as Ue,r as aa,e as De,k as Oe}from"../chunks/cSC8pg5z.js";import{a as sa,b as wa,d as ns,s as Me,g as ls,c as vs,e as os,f as ds,h as cs,j as _s,k as gs,l as us,m as fs}from"../chunks/xPE-J_WT.js";import{t as ia,s as na,I as ps,f as ms,O as hs,G as bs,F as ys,C as xs,D as Ya,g as ws,a as ks,E as Ss}from"../chunks/CRto4b9r.js";import{s as ta}from"../chunks/DU6y904K.js";import{i as Wa}from"../chunks/woLbdfQW.js";import{p as es}from"../chunks/9VQmhtgh.js";function qs(_e,i,m){ss(()=>{var f=ts(()=>i(_e,m?.())||{});if(f?.destroy)return()=>f.destroy()})}var Ds=n('<span class="chevron svelte-12crvy">‚ñ≤</span>'),Ts=n('<span class="chevron svelte-12crvy">‚ñº</span>'),Cs=n('<div class="input-with-action svelte-12crvy"><input type="text" id="location-manual" placeholder="Custom location..." class="flat-left svelte-12crvy"/> <button type="button" class="action-btn flat-right svelte-12crvy" title="Back to list">‚úï</button></div>'),Fs=n("<option> </option>"),Es=n('<select id="location-filter" class="svelte-12crvy"><option>Any Location</option><!></select>'),Ls=n("<option> </option>"),zs=n("<option> </option>"),Gs=n('<div class="filter-body svelte-12crvy"><div class="filter-grid svelte-12crvy"><div class="filter-item svelte-12crvy"><label for="start-date" class="svelte-12crvy">Start Date</label> <input type="date" id="start-date" class="svelte-12crvy"/></div> <div class="filter-item svelte-12crvy"><label for="end-date" class="svelte-12crvy">End Date</label> <input type="date" id="end-date" class="svelte-12crvy"/></div> <div class="filter-item svelte-12crvy"><label for="location-filter" class="svelte-12crvy">Location</label> <!></div> <div class="filter-item svelte-12crvy"><label for="climbing-type-filter" class="svelte-12crvy">Climb Type</label> <select id="climbing-type-filter" class="svelte-12crvy"><option>Any Type</option><!></select></div> <div class="filter-item svelte-12crvy"><label for="session-type-filter" class="svelte-12crvy">Session Type</label> <select id="session-type-filter" class="svelte-12crvy"><option>Any Type</option><!></select></div> <div class="filter-item svelte-12crvy"><label for="grade-filter" class="svelte-12crvy">Grade (Exact)</label> <input type="text" id="grade-filter" placeholder="e.g. V4" class="svelte-12crvy"/></div></div> <div class="filter-actions svelte-12crvy"><button class="reset-btn svelte-12crvy">Reset Filters</button></div></div>'),js=n('<div class="filter-container svelte-12crvy"><button class="filter-header svelte-12crvy"><div class="header-content svelte-12crvy"><span class="icon svelte-12crvy">üîç</span> <span class="title svelte-12crvy">Filters</span> <!></div></button> <!></div>');function Ms(_e,i){Ke(i,!0);const m=["Rockstar Swindon","Flashpoint Swindon","Flashpoint Bristol","Redpoint Bristol","TCH Bristol","Other"],f=["Bouldering","Sport","Mixed"],S=["Projecting","Onsighting","Campusing","Repeaters"];let D=M(!1),g=M(""),G=M(""),p=M(""),F=M(""),J=M(""),R=M(""),ie=M(!1);function N(){v(D,!s(D))}function V(){v(g,""),v(G,""),v(p,""),v(F,""),v(ie,!1),v(J,""),v(R,""),w()}function w(){i.onFilterParamsChange({startDate:s(g),endDate:s(G),location:s(p),climbingType:s(F),sessionType:s(J),grade:s(R)})}function K(){s(p)==="Other"?(v(ie,!0),v(p,"")):w()}function q(){v(ie,!1),v(p,""),w()}var E=js(),I=a(E);I.__click=N;var L=a(I),Q=t(a(L),4);{var H=k=>{var P=Ds();r(k,P)},re=k=>{var P=Ts();r(k,P)};d(Q,k=>{s(D)?k(H):k(re,!1)})}e(L),e(I);var de=t(I,2);{var le=k=>{var P=Gs(),Y=a(P),Z=a(Y),_=t(a(Z),2);aa(_),_.__change=w,e(Z);var h=t(Z,2),A=t(a(h),2);aa(A),A.__change=w,e(h);var o=t(h,2),c=t(a(o),2);{var b=ue=>{var me=Cs(),he=a(me);aa(he),he.__input=w;var Ee=t(he,2);Ee.__click=q,e(me),sa(he,()=>s(p),Se=>v(p,Se)),r(ue,me)},z=ue=>{var me=Es();me.__change=K;var he=a(me);he.value=he.__value="";var Ee=t(he);De(Ee,17,()=>m,Oe,(Se,Ge)=>{var Ce=Fs(),U=a(Ce,!0);e(Ce);var ne={};u(()=>{l(U,s(Ge)),ne!==(ne=s(Ge))&&(Ce.value=(Ce.__value=s(Ge))??"")}),r(Se,Ce)}),e(me),wa(me,()=>s(p),Se=>v(p,Se)),r(ue,me)};d(c,ue=>{s(ie)?ue(b):ue(z,!1)})}e(o);var ge=t(o,2),T=t(a(ge),2);T.__change=w;var $=a(T);$.value=$.__value="";var pe=t($);De(pe,17,()=>f,Oe,(ue,me)=>{var he=Ls(),Ee=a(he,!0);e(he);var Se={};u(()=>{l(Ee,s(me)),Se!==(Se=s(me))&&(he.value=(he.__value=s(me))??"")}),r(ue,he)}),e(T),e(ge);var Te=t(ge,2),ke=t(a(Te),2);ke.__change=w;var Fe=a(ke);Fe.value=Fe.__value="";var ee=t(Fe);De(ee,17,()=>S,Oe,(ue,me)=>{var he=zs(),Ee=a(he,!0);e(he);var Se={};u(()=>{l(Ee,s(me)),Se!==(Se=s(me))&&(he.value=(he.__value=s(me))??"")}),r(ue,he)}),e(ke),e(Te);var ae=t(Te,2),ye=t(a(ae),2);aa(ye),ye.__input=w,e(ae),e(Y);var Pe=t(Y,2),Ie=a(Pe);Ie.__click=V,e(Pe),e(P),sa(_,()=>s(g),ue=>v(g,ue)),sa(A,()=>s(G),ue=>v(G,ue)),wa(T,()=>s(F),ue=>v(F,ue)),wa(ke,()=>s(J),ue=>v(J,ue)),sa(ye,()=>s(R),ue=>v(R,ue)),ia(3,P,()=>na,()=>({duration:200})),r(k,P)};d(de,k=>{s(D)&&k(le)})}e(E),u(()=>Ue(I,"aria-expanded",s(D))),r(_e,E),Qe()}Ye(["click","change","input"]);var Os=n('<span class="climb-type-tag svelte-yz0xxt"> </span>'),Ns=n('<span class="notes-preview svelte-yz0xxt"> </span>'),Ps=n('<span class="wall-tag svelte-yz0xxt"> </span>'),As=n('<span class="technique-tag svelte-yz0xxt"> </span>'),Bs=n('<span class="attempts-count svelte-yz0xxt"> </span>'),Is=n('<div class="detail-row svelte-yz0xxt"><span class="label svelte-yz0xxt">Notes:</span> <p class="notes svelte-yz0xxt"> </p></div>'),Rs=n('<p class="empty-notes svelte-yz0xxt">No notes for this climb.</p>'),Vs=n('<div class="climb-details svelte-yz0xxt"><!> <div class="tags svelte-yz0xxt"><span class="tag type svelte-yz0xxt"> </span> <span class="tag attempt-text svelte-yz0xxt"> </span></div></div>'),Us=n('<div><div class="climb-header svelte-yz0xxt" role="button" tabindex="0"><div class="climb-main-info svelte-yz0xxt"><span> </span> <span class="climb-name svelte-yz0xxt"> </span> <!> <!> <!> <!></div> <div class="climb-meta svelte-yz0xxt"><span><span class="icon svelte-yz0xxt"> </span> <!></span> <span class="chevron svelte-yz0xxt"> </span></div></div> <!></div>');function Ws(_e,i){Ke(i,!0);let m=es(i,"showClimbType",3,!1),f=M(!1);function S(){v(f,!s(f))}const D={Flash:"‚ö°",Onsight:"üëÅÔ∏è",Redpoint:"üî¥",Dogged:"üõ†Ô∏è",DNF:"‚ùå"};var g=Us();let G;var p=a(g);p.__click=S,p.__keydown=c=>(c.key==="Enter"||c.key===" ")&&S();var F=a(p),J=a(F);let R;var ie=a(J,!0);e(J);var N=t(J,2),V=a(N,!0);e(N);var w=t(N,2);{var K=c=>{var b=Os(),z=a(b,!0);e(b),u(()=>l(z,i.climb.isSport?"Sport":"Boulder")),r(c,b)};d(w,c=>{m()&&c(K)})}var q=t(w,2);{var E=c=>{var b=Ns(),z=a(b);e(b),u(()=>l(z,`- ${i.climb.notes??""}`)),r(c,b)};d(q,c=>{!s(f)&&i.climb.notes&&c(E)})}var I=t(q,2);{var L=c=>{var b=Ps(),z=a(b,!0);e(b),u(()=>l(z,i.climb.wall)),r(c,b)};d(I,c=>{i.climb.wall&&c(L)})}var Q=t(I,2);{var H=c=>{var b=As(),z=a(b,!0);e(b),u(()=>l(z,i.climb.techniqueFocus)),r(c,b)};d(Q,c=>{i.climb.techniqueFocus&&c(H)})}e(F);var re=t(F,2),de=a(re);let le;var k=a(de),P=a(k,!0);e(k);var Y=t(k,2);{var Z=c=>{var b=Bs(),z=a(b,!0);e(b),u(()=>l(z,i.climb.attemptsNum)),r(c,b)};d(Y,c=>{i.climb.attemptType!=="Flash"&&i.climb.attemptType!=="Onsight"&&c(Z)})}e(de);var _=t(de,2),h=a(_,!0);e(_),e(re),e(p);var A=t(p,2);{var o=c=>{var b=Vs(),z=a(b);{var ge=ee=>{var ae=Is(),ye=t(a(ae),2),Pe=a(ye,!0);e(ye),e(ae),u(()=>l(Pe,i.climb.notes)),r(ee,ae)},T=ee=>{var ae=Rs();r(ee,ae)};d(z,ee=>{i.climb.notes?ee(ge):ee(T,!1)})}var $=t(z,2),pe=a($),Te=a(pe,!0);e(pe);var ke=t(pe,2),Fe=a(ke,!0);e(ke),e($),e(b),u(()=>{l(Te,i.climb.isSport?"Sport":"Boulder"),l(Fe,i.climb.attemptType)}),ia(3,b,()=>na,()=>({duration:150})),r(c,b)};d(A,c=>{s(f)&&c(o)})}e(g),u(()=>{G=ta(g,1,"climb-entry svelte-yz0xxt",null,G,{expanded:s(f)}),Ue(p,"aria-expanded",s(f)),R=ta(J,1,"grade-badge svelte-yz0xxt",null,R,{sport:i.climb.isSport}),l(ie,i.climb.grade),l(V,i.climb.name||"Unnamed Route"),le=ta(de,1,"attempt-type svelte-yz0xxt",null,le,{flash:i.climb.attemptType==="Flash"}),l(P,D[i.climb.attemptType]||i.climb.attemptType),l(h,s(f)?"‚ñ≤":"‚ñº")}),r(_e,g),Qe()}Ye(["click","keydown"]);var Hs=n('<dialog class="edit-dialog svelte-1kpd5rv"><div class="dialog-content svelte-1kpd5rv"><div class="modal-header svelte-1kpd5rv"><h2 class="svelte-1kpd5rv">Edit Session</h2> <button class="close-btn svelte-1kpd5rv">&times;</button></div> <div class="modal-body svelte-1kpd5rv"><!></div></div></dialog>');function Za(_e,i){Ke(i,!0);function m(g){return g.showModal(),{destroy(){g.open&&g.close()}}}var f=Re(),S=Be(f);{var D=g=>{var G=Hs();G.__click=w=>{w.target===w.currentTarget&&i.onClose()};var p=a(G);p.__click=w=>w.stopPropagation();var F=a(p),J=t(a(F),2);J.__click=function(...w){i.onClose?.apply(this,w)},e(F);var R=t(F,2),ie=a(R);{var N=w=>{ps(w,{get initialData(){return i.initialData},get onCancel(){return i.onClose},get onSaved(){return i.onSaved}})},V=w=>{var K=Re(),q=Be(K);{var E=L=>{hs(L,{get initialData(){return i.initialData},get onCancel(){return i.onClose},get onSaved(){return i.onSaved}})},I=L=>{var Q=Re(),H=Be(Q);{var re=le=>{bs(le,{get initialData(){return i.initialData},get onCancel(){return i.onClose},get onSaved(){return i.onSaved}})},de=le=>{var k=Re(),P=Be(k);{var Y=_=>{ys(_,{get initialData(){return i.initialData},get onCancel(){return i.onClose},get onSaved(){return i.onSaved}})},Z=_=>{var h=Re(),A=Be(h);{var o=c=>{xs(c,{get initialData(){return i.initialData},get onCancel(){return i.onClose},get onSaved(){return i.onSaved}})};d(A,c=>{i.activityType==="competition"&&c(o)},!0)}r(_,h)};d(P,_=>{i.activityType==="fingerboarding"?_(Y):_(Z,!1)},!0)}r(le,k)};d(H,le=>{i.activityType==="gym_session"?le(re):le(de,!1)},!0)}r(L,Q)};d(q,L=>{i.activityType==="outdoor_climb"?L(E):L(I,!1)},!0)}r(w,K)};d(ie,w=>{i.activityType==="indoor_climb"?w(N):w(V,!1)})}e(R),e(p),e(G),qs(G,w=>m?.(w)),rs("close",G,function(...w){i.onClose?.apply(this,w)}),ia(3,p,()=>ms,()=>({duration:250,y:50,opacity:0})),r(g,G)};d(S,g=>{i.isOpen&&g(D)})}r(_e,f),Qe()}Ye(["click"]);var Js=n('<span class="stat svelte-7vqogn"> </span>'),Ys=n('<span class="status-icon pending svelte-7vqogn" title="Waiting to sync">üîÑ</span>'),Zs=n('<span class="status-icon error svelte-7vqogn" title="Sync error">‚ö†Ô∏è</span>'),Xs=n('<span class="chip svelte-7vqogn"> </span>'),Ks=n('<span class="text-none svelte-7vqogn">None</span>'),Qs=n('<div class="detail-item svelte-7vqogn"><span class="label svelte-7vqogn">Difficulty</span> <span class="value svelte-7vqogn"> </span></div>'),$s=n('<span class="chip svelte-7vqogn"> </span>'),et=n('<span class="text-none svelte-7vqogn">None</span>'),at=n('<div class="detail-item svelte-7vqogn"><span class="label svelte-7vqogn">Category</span> <div class="value-chips svelte-7vqogn"><!></div></div>'),st=n('<span class="chip svelte-7vqogn"> </span>'),tt=n('<span class="text-none svelte-7vqogn">None</span>'),it=n('<div class="detail-item svelte-7vqogn"><span class="label svelte-7vqogn">Energy System</span> <div class="value-chips svelte-7vqogn"><!></div></div>'),rt=n('<span class="chip svelte-7vqogn"> </span>'),nt=n('<span class="text-none svelte-7vqogn">None</span>'),lt=n('<div class="detail-item svelte-7vqogn"><span class="label svelte-7vqogn">Wall</span> <div class="value-chips svelte-7vqogn"><!></div></div>'),vt=n('<p class="notes-text"> </p>'),ot=n('<p class="notes-placeholder">No notes.</p>'),dt=n('<div class="metric svelte-7vqogn"><span class="label svelte-7vqogn">Open Grip</span> <div class="bar-container svelte-7vqogn"><div class="bar-fill svelte-7vqogn"></div></div> <span class="score svelte-7vqogn"> </span></div>'),ct=n('<div class="metric svelte-7vqogn"><span class="label svelte-7vqogn">Crimp Grip</span> <div class="bar-container svelte-7vqogn"><div class="bar-fill svelte-7vqogn"></div></div> <span class="score svelte-7vqogn"> </span></div>'),_t=n('<div class="metric svelte-7vqogn"><span class="label svelte-7vqogn">Pinch Grip</span> <div class="bar-container svelte-7vqogn"><div class="bar-fill svelte-7vqogn"></div></div> <span class="score svelte-7vqogn"> </span></div>'),gt=n('<div class="metric svelte-7vqogn"><span class="label svelte-7vqogn">Sloper Grip</span> <div class="bar-container svelte-7vqogn"><div class="bar-fill svelte-7vqogn"></div></div> <span class="score svelte-7vqogn"> </span></div>'),ut=n('<div class="metric svelte-7vqogn"><span class="label svelte-7vqogn">Jug Grip</span> <div class="bar-container svelte-7vqogn"><div class="bar-fill svelte-7vqogn"></div></div> <span class="score svelte-7vqogn"> </span></div>'),ft=n('<p class="no-climbs svelte-7vqogn">No climbs logged for this session.</p>'),pt=n('<div class="card-body svelte-7vqogn"><div class="details-grid svelte-7vqogn"><div class="detail-item svelte-7vqogn"><span class="label svelte-7vqogn">Training Type</span> <div class="value-chips svelte-7vqogn"><!></div></div> <!> <!> <!> <!></div> <div class="notes-container svelte-7vqogn"><div class="notes-header svelte-7vqogn"><span class="label svelte-7vqogn">Session Notes</span></div> <!></div> <div class="metrics-container svelte-7vqogn"><div class="metric svelte-7vqogn"><span class="label svelte-7vqogn">Finger Load</span> <div class="bar-container svelte-7vqogn"><div class="bar-fill svelte-7vqogn"></div></div> <span class="score svelte-7vqogn"> </span></div> <div class="metric svelte-7vqogn"><span class="label svelte-7vqogn">Shoulder Load</span> <div class="bar-container svelte-7vqogn"><div class="bar-fill svelte-7vqogn"></div></div> <span class="score svelte-7vqogn"> </span></div> <div class="metric svelte-7vqogn"><span class="label svelte-7vqogn">Forearm Load</span> <div class="bar-container svelte-7vqogn"><div class="bar-fill svelte-7vqogn"></div></div> <span class="score svelte-7vqogn"> </span></div> <!> <!> <!> <!> <!></div> <div class="climbs-list svelte-7vqogn"><h4 class="svelte-7vqogn">Climbs</h4> <div class="climbs-container svelte-7vqogn"><!> <!></div></div></div>'),mt=n('<div><div class="card-header svelte-7vqogn" role="button" tabindex="0"><div class="header-main svelte-7vqogn"><div class="date-badge svelte-7vqogn"><span class="day svelte-7vqogn"> </span> <span class="month svelte-7vqogn"> </span> <span class="year svelte-7vqogn"> </span></div> <div class="session-info svelte-7vqogn"><div class="session-text svelte-7vqogn"><h3 class="location svelte-7vqogn"> </h3> <div class="meta-row svelte-7vqogn"><span class="time-tag svelte-7vqogn"> </span> <span class="type-tag svelte-7vqogn"> </span></div> <div class="meta-row lowercase svelte-7vqogn"><span class="stat svelte-7vqogn"> </span> <!></div></div> <div class="load-summary svelte-7vqogn"><div class="load-badge finger svelte-7vqogn"> </div> <div class="load-badge shoulder svelte-7vqogn"> </div> <div class="load-badge forearm svelte-7vqogn"> </div></div></div></div> <div class="header-actions"><div class="header-status svelte-7vqogn"><!></div>  <button class="btn-icon edit-session" title="Edit Session">‚úèÔ∏è</button> <button class="btn-icon delete-session" title="Delete Session">üóëÔ∏è</button> <span class="chevron svelte-7vqogn"> </span></div></div> <!> <!> <!></div>');function ht(_e,i){Ke(i,!0);let m=M(!1),f=M(!1),S=M(!1);function D(){v(m,!s(m))}function g(){v(f,!0)}function G(){v(S,!0)}function p(){v(S,!1)}async function F(){v(S,!1),await Wa()}async function J(){try{const C=await ns(i.session.id);C.ok?(v(f,!1),i.onDelete()):(console.error("Failed to delete session:",C.error),alert("Failed to delete session: "+C.error))}catch(C){console.error("Exception deleting session:",C),alert("Error deleting session")}}function R(C){}function ie(C,X){}let N=Xe(()=>i.session.climbs?.length??0),V=Xe(()=>(i.session.climbs||[]).reduce((C,X)=>{const oe=parseInt(X.grade.replace(/\D/g,""))||0,xe=parseInt(C.replace(/\D/g,""))||0;return oe>xe?X.grade:C},"V0"));var w=mt();let K;var q=a(w);q.__click=D,q.__keydown=C=>C.key==="Enter"&&D();var E=a(q),I=a(E),L=a(I),Q=a(L,!0);e(L);var H=t(L,2),re=a(H,!0);e(H);var de=t(H,2),le=a(de,!0);e(de),e(I);var k=t(I,2),P=a(k),Y=a(P),Z=a(Y,!0);e(Y);var _=t(Y,2),h=a(_),A=a(h);e(h);var o=t(h,2),c=a(o,!0);e(o),e(_);var b=t(_,2),z=a(b),ge=a(z);e(z);var T=t(z,2);{var $=C=>{var X=Js(),oe=a(X);e(X),u(()=>l(oe,`Max: ${s(V)??""}`)),r(C,X)};d(T,C=>{s(N)>0&&C($)})}e(b),e(P);var pe=t(P,2),Te=a(pe),ke=a(Te,!0);e(Te);var Fe=t(Te,2),ee=a(Fe,!0);e(Fe);var ae=t(Fe,2),ye=a(ae,!0);e(ae),e(pe),e(k),e(E);var Pe=t(E,2),Ie=a(Pe),ue=a(Ie);{var me=C=>{var X=Ys();r(C,X)},he=C=>{var X=Re(),oe=Be(X);{var xe=O=>{var se=Zs();r(O,se)};d(oe,O=>{i.session.syncStatus==="error"&&O(xe)},!0)}r(C,X)};d(ue,C=>{i.session.syncStatus==="pending"?C(me):C(he,!1)})}e(Ie);var Ee=t(Ie,2);Ee.__click=C=>{C.stopPropagation(),G()};var Se=t(Ee,2);Se.__click=C=>{C.stopPropagation(),g()};var Ge=t(Se,2),Ce=a(Ge,!0);e(Ge),e(Pe),e(q);var U=t(q,2);{var ne=C=>{var X=pt(),oe=a(X),xe=a(oe),O=t(a(xe),2),se=a(O);{var be=B=>{var te=Re(),y=Be(te);De(y,17,()=>i.session.trainingTypes,Oe,(j,W)=>{var fe=Xs(),ce=a(fe,!0);e(fe),u(()=>l(ce,s(W))),r(j,fe)}),r(B,te)},je=B=>{var te=Ks();r(B,te)};d(se,B=>{i.session.trainingTypes&&i.session.trainingTypes.length>0&&!i.session.trainingTypes.includes("None")?B(be):B(je,!1)})}e(O),e(xe);var Ae=t(xe,2);{var la=B=>{var te=Qs(),y=t(a(te),2),j=a(y,!0);e(y),e(te),u(()=>l(j,i.session.difficulty)),r(B,te)};d(Ae,B=>{i.session.difficulty&&B(la)})}var we=t(Ae,2);{var Le=B=>{var te=at(),y=t(a(te),2),j=a(y);{var W=ce=>{var qe=Re(),Ve=Be(qe);De(Ve,17,()=>i.session.categories,Oe,($e,ya)=>{var ea=$s(),xa=a(ea,!0);e(ea),u(()=>l(xa,s(ya))),r($e,ea)}),r(ce,qe)},fe=ce=>{var qe=et();r(ce,qe)};d(j,ce=>{i.session.categories.length>0&&!i.session.categories.includes("None")?ce(W):ce(fe,!1)})}e(y),e(te),r(B,te)};d(we,B=>{i.session.categories?.length&&B(Le)})}var ze=t(we,2);{var Je=B=>{var te=it(),y=t(a(te),2),j=a(y);{var W=ce=>{var qe=Re(),Ve=Be(qe);De(Ve,17,()=>i.session.energySystems,Oe,($e,ya)=>{var ea=st(),xa=a(ea,!0);e(ea),u(()=>l(xa,s(ya))),r($e,ea)}),r(ce,qe)},fe=ce=>{var qe=tt();r(ce,qe)};d(j,ce=>{i.session.energySystems.length>0&&!i.session.energySystems.includes("None")?ce(W):ce(fe,!1)})}e(y),e(te),r(B,te)};d(ze,B=>{i.session.energySystems?.length&&B(Je)})}var Ne=t(ze,2);{var We=B=>{var te=lt(),y=t(a(te),2),j=a(y);{var W=ce=>{var qe=Re(),Ve=Be(qe);De(Ve,17,()=>i.session.wallAngles,Oe,($e,ya)=>{var ea=rt(),xa=a(ea,!0);e(ea),u(()=>l(xa,s(ya))),r($e,ea)}),r(ce,qe)},fe=ce=>{var qe=nt();r(ce,qe)};d(j,ce=>{i.session.wallAngles.length>0&&!i.session.wallAngles.includes("None")?ce(W):ce(fe,!1)})}e(y),e(te),r(B,te)};d(Ne,B=>{i.session.wallAngles?.length&&B(We)})}e(oe);var ga=t(oe,2),Ha=t(a(ga),2);{var Ga=B=>{var te=vt(),y=a(te,!0);e(te),u(()=>l(y,i.session.notes)),r(B,te)},ja=B=>{var te=ot();r(B,te)};d(Ha,B=>{i.session.notes?B(Ga):B(ja,!1)})}e(ga);var pa=t(ga,2),Ma=a(pa),ma=t(a(Ma),2),Oa=a(ma);e(ma);var ua=t(ma,2),Sa=a(ua);e(ua),e(Ma);var fa=t(Ma,2),ha=t(a(fa),2),ba=a(ha);e(ha);var qa=t(ha,2),Ja=a(qa);e(qa),e(fa);var Da=t(fa,2),Ta=t(a(Da),2),ca=a(Ta);e(Ta);var He=t(Ta,2),Ca=a(He);e(He),e(Da);var oa=t(Da,2);{var Fa=B=>{var te=dt(),y=t(a(te),2),j=a(y);e(y);var W=t(y,2),fe=a(W);e(W),e(te),u(()=>{Me(j,`width: ${i.session.openGrip/5*100}%`),l(fe,`${i.session.openGrip??""}/5`)}),r(B,te)};d(oa,B=>{i.session.openGrip&&B(Fa)})}var ra=t(oa,2);{var da=B=>{var te=ct(),y=t(a(te),2),j=a(y);e(y);var W=t(y,2),fe=a(W);e(W),e(te),u(()=>{Me(j,`width: ${i.session.crimpGrip/5*100}%`),l(fe,`${i.session.crimpGrip??""}/5`)}),r(B,te)};d(ra,B=>{i.session.crimpGrip&&B(da)})}var va=t(ra,2);{var Ea=B=>{var te=_t(),y=t(a(te),2),j=a(y);e(y);var W=t(y,2),fe=a(W);e(W),e(te),u(()=>{Me(j,`width: ${i.session.pinchGrip/5*100}%`),l(fe,`${i.session.pinchGrip??""}/5`)}),r(B,te)};d(va,B=>{i.session.pinchGrip&&B(Ea)})}var Na=t(va,2);{var Ba=B=>{var te=gt(),y=t(a(te),2),j=a(y);e(y);var W=t(y,2),fe=a(W);e(W),e(te),u(()=>{Me(j,`width: ${i.session.sloperGrip/5*100}%`),l(fe,`${i.session.sloperGrip??""}/5`)}),r(B,te)};d(Na,B=>{i.session.sloperGrip&&B(Ba)})}var Ia=t(Na,2);{var Ra=B=>{var te=ut(),y=t(a(te),2),j=a(y);e(y);var W=t(y,2),fe=a(W);e(W),e(te),u(()=>{Me(j,`width: ${i.session.jugGrip/5*100}%`),l(fe,`${i.session.jugGrip??""}/5`)}),r(B,te)};d(Ia,B=>{i.session.jugGrip&&B(Ra)})}e(pa);var La=t(pa,2),Va=t(a(La),2),za=a(Va);De(za,17,()=>i.session.climbs||[],Oe,(B,te,y)=>{{let j=Xe(()=>i.session.climbingType==="Mixed");Ws(B,{get climb(){return s(te)},onDelete:()=>void 0,onUpdate:W=>void 0,get showClimbType(){return s(j)}})}});var Ua=t(za,2);{var Ze=B=>{var te=ft();r(B,te)};d(Ua,B=>{(i.session.climbs||[]).length===0&&B(Ze)})}e(Va),e(La),e(X),u(()=>{Me(Oa,`width: ${i.session.fingerLoad/5*100}%`),l(Sa,`${i.session.fingerLoad??""}/5`),Me(ba,`width: ${i.session.shoulderLoad/5*100}%`),l(Ja,`${i.session.shoulderLoad??""}/5`),Me(ca,`width: ${i.session.forearmLoad/5*100}%`),l(Ca,`${i.session.forearmLoad??""}/5`)}),ia(3,X,()=>na,()=>({duration:150})),r(C,X)};d(U,C=>{s(m)&&C(ne)})}var x=t(U,2);Ya(x,{get isOpen(){return s(f)},title:"Delete Session",message:"Are you sure you want to delete this session? This action cannot be undone.",onConfirm:J,onCancel:()=>v(f,!1)});var ve=t(x,2);Za(ve,{get isOpen(){return s(S)},activityType:"indoor_climb",get initialData(){return i.session},onClose:p,onSaved:F}),e(w),u((C,X,oe)=>{K=ta(w,1,"session-card svelte-7vqogn",null,K,{expanded:s(m)}),Ue(q,"aria-expanded",s(m)),l(Q,C),l(re,X),l(le,oe),l(Z,i.session.location),l(A,`üïí ${(i.session.time||"12:00")??""}`),l(c,i.session.climbingType),l(ge,`${s(N)??""} climbs`),Ue(Te,"title",`Finger Load: ${i.session.fingerLoad??""}`),l(ke,i.session.fingerLoad),Ue(Fe,"title",`Shoulder Load: ${i.session.shoulderLoad??""}`),l(ee,i.session.shoulderLoad),Ue(ae,"title",`Forearm Load: ${i.session.forearmLoad??""}`),l(ye,i.session.forearmLoad),l(Ce,s(m)?"‚ñ≤":"‚ñº")},[()=>new Date(i.session.date).getDate(),()=>new Date(i.session.date).toLocaleDateString("en-GB",{month:"short"}),()=>new Date(i.session.date).getFullYear()]),r(_e,w),Qe()}Ye(["click","keydown"]);var bt=n('<div class="legend-item svelte-11p9lqi"><span class="l-icon svelte-11p9lqi"> </span> <span class="l-label svelte-11p9lqi"> </span></div>'),yt=n('<div class="legend-content svelte-11p9lqi"><div class="legend-grid svelte-11p9lqi"></div></div>'),xt=n('<div class="legend-container svelte-11p9lqi"><button class="legend-toggle svelte-11p9lqi"><span class="icon">‚ÑπÔ∏è</span> <span class="text">Icon Legend</span> <span class="chevron svelte-11p9lqi"> </span></button> <!></div>');function as(_e){let i=M(!1);const m=[{icon:"üëÅÔ∏è",label:"Onsight"},{icon:"‚ö°",label:"Flash"},{icon:"üî¥",label:"Redpoint"},{icon:"üõ†Ô∏è",label:"Dogged"},{icon:"‚ùå",label:"DNF"}];var f=xt(),S=a(f);S.__click=()=>v(i,!s(i));var D=t(a(S),4),g=a(D,!0);e(D),e(S);var G=t(S,2);{var p=F=>{var J=yt(),R=a(J);De(R,21,()=>m,Oe,(ie,N)=>{var V=bt(),w=a(V),K=a(w,!0);e(w);var q=t(w,2),E=a(q,!0);e(q),e(V),u(()=>{l(K,s(N).icon),l(E,s(N).label)}),r(ie,V)}),e(R),e(J),ia(3,J,()=>na),r(F,J)};d(G,F=>{s(i)&&F(p)})}e(f),u(()=>{Ue(S,"aria-expanded",s(i)),l(g,s(i)?"‚ñº":"‚ñ∂")}),r(_e,f)}Ye(["click"]);function Qa(_e,i){if(!_e||_e.length===0){alert("No data to export");return}const m=Array.from(new Set(_e.flatMap(Object.keys))),f=[m.join(","),..._e.map(g=>m.map(G=>{let p=g[G];if(p==null)return"";if(typeof p=="object"){if(p instanceof Date)return p.toISOString();p=JSON.stringify(p).replace(/"/g,'""')}else typeof p=="string"&&(p=p.replace(/"/g,'""'));return typeof p=="string"&&(p.includes(",")||p.includes('"')||p.includes(`
`))?`"${p}"`:p}).join(","))].join(`
`),S=new Blob([f],{type:"text/csv;charset=utf-8;"}),D=document.createElement("a");if(D.download!==void 0){const g=URL.createObjectURL(S);D.setAttribute("href",g),D.setAttribute("download",i.endsWith(".csv")?i:`${i}.csv`),D.style.visibility="hidden",document.body.appendChild(D),D.click(),document.body.removeChild(D)}}var wt=n('<span class="spinner svelte-14fqz8w"></span> Fetching...',1),kt=n('<div class="error-banner svelte-14fqz8w"> </div>'),St=n('<small class="svelte-14fqz8w">Try adjusting your filters.</small>'),qt=n('<div class="empty-state svelte-14fqz8w"><p class="svelte-14fqz8w">No indoor climbing sessions found.</p> <!></div>'),Dt=n('<div class="load-more-container svelte-14fqz8w"><button class="load-more-btn svelte-14fqz8w"> </button></div>'),Tt=n('<div class="view-container svelte-14fqz8w"><div class="view-header svelte-14fqz8w"><h2 class="view-title svelte-14fqz8w">üßó Indoor Climbing History</h2> <div class="header-actions svelte-14fqz8w"><button class="action-btn secondary svelte-14fqz8w" title="Export filtered data to CSV">üì• Export</button> <button class="action-btn svelte-14fqz8w" title="Fetch data from cloud"><!></button></div></div> <!> <!> <div class="info-bar svelte-14fqz8w"><div class="legend-wrapper svelte-14fqz8w"><!></div> <div class="load-key svelte-14fqz8w"><span class="key-label svelte-14fqz8w">Load:</span> <div class="key-item svelte-14fqz8w"><span class="dot finger svelte-14fqz8w"></span> Finger</div> <div class="key-item svelte-14fqz8w"><span class="dot shoulder svelte-14fqz8w"></span> Shoulder</div> <div class="key-item svelte-14fqz8w"><span class="dot forearm svelte-14fqz8w"></span> Forearm</div></div></div> <div class="sessions-list"><!> <!> <!></div></div>');function Ct(_e,i){Ke(i,!0);let m=M(_a([])),f=M(_a([])),S=M(!1),D=M(""),g=M(_a({startDate:"",endDate:"",location:"",climbingType:"",sessionType:"",grade:""})),G=M(20);const p=20;Ka(()=>{F()});async function F(){v(S,!0),v(D,"");try{const o=await ls();o.ok&&o.data?(v(m,o.data.map(c=>({...c,activityType:"indoor_climb"})),!0),s(m).sort((c,b)=>new Date(b.date).getTime()-new Date(c.date).getTime()),R()):v(D,o.error||"Failed to fetch data",!0)}catch(o){v(D,o instanceof Error?o.message:"Unknown error",!0)}finally{v(S,!1)}}function J(o){v(g,o,!0),R()}function R(){v(G,p),v(f,s(m).filter(o=>{if(s(g).startDate&&o.date<s(g).startDate||s(g).endDate&&o.date>s(g).endDate||s(g).location&&o.location!==s(g).location)return!1;if(s(g).climbingType&&(o.climbingType==="Leading"?"Sport":o.climbingType)!==s(g).climbingType)if(o.climbingType==="Mixed")if(s(g).climbingType==="Bouldering"){if(!o.climbs.some(b=>!b.isSport))return!1}else if(s(g).climbingType==="Sport"){if(!o.climbs.some(b=>b.isSport))return!1}else return!1;else return!1;if(s(g).sessionType&&!o.trainingTypes?.includes(s(g).sessionType))return!1;if(s(g).grade){const c=s(g).grade.trim().toLowerCase();if(!o.climbs.some(z=>z.grade.trim().toLowerCase()===c))return!1}return!0}),!0)}function ie(){v(G,s(G)+p)}var N=Tt(),V=a(N),w=t(a(V),2),K=a(w);K.__click=()=>Qa(s(f),"indoor_climbs");var q=t(K,2);q.__click=F;var E=a(q);{var I=o=>{var c=wt();Aa(),r(o,c)},L=o=>{var c=ka("‚òÅÔ∏è Fetch Data");r(o,c)};d(E,o=>{s(S)?o(I):o(L,!1)})}e(q),e(w),e(V);var Q=t(V,2);{var H=o=>{var c=kt(),b=a(c,!0);e(c),u(()=>l(b,s(D))),ia(3,c,()=>na),r(o,c)};d(Q,o=>{s(D)&&o(H)})}var re=t(Q,2);Ms(re,{onFilterParamsChange:J});var de=t(re,2),le=a(de),k=a(le);as(k),e(le),Aa(2),e(de);var P=t(de,2),Y=a(P);De(Y,17,()=>s(f).slice(0,s(G)),o=>o.id,(o,c)=>{ht(o,{get session(){return s(c)},onDelete:F})});var Z=t(Y,2);{var _=o=>{var c=qt(),b=t(a(c),2);{var z=ge=>{var T=St();r(ge,T)};d(b,ge=>{s(m).length>0&&ge(z)})}e(c),r(o,c)};d(Z,o=>{s(f).length===0&&o(_)})}var h=t(Z,2);{var A=o=>{var c=Dt(),b=a(c);b.__click=ie;var z=a(b);e(b),e(c),u(()=>l(z,`Load More (${s(f).length-s(G)} remaining)`)),r(o,c)};d(h,o=>{s(G)<s(f).length&&o(A)})}e(P),e(N),u(()=>q.disabled=s(S)),r(_e,N),Qe()}Ye(["click"]);var Ft=n('<span class="chevron svelte-1frtlim">‚ñ≤</span>'),Et=n('<span class="chevron svelte-1frtlim">‚ñº</span>'),Lt=n('<div class="input-with-action svelte-1frtlim"><input type="text" id="area-filter-text" placeholder="Type area name..." class="flat-left svelte-1frtlim"/> <button class="action-btn flat-right svelte-1frtlim" title="Back to list">‚úï</button></div>'),zt=n("<option> </option>"),Gt=n('<select id="area-filter" class="svelte-1frtlim"><option>All Areas</option><!><option>Other (Manual Entry)</option></select>'),jt=n('<div class="input-with-action svelte-1frtlim"><input type="text" id="crag-filter-text" placeholder="Type crag name..." class="flat-left svelte-1frtlim"/> <button class="action-btn flat-right svelte-1frtlim" title="Back to list">‚úï</button></div>'),Mt=n("<option> </option>"),Ot=n('<select id="crag-filter" class="svelte-1frtlim"><option>All Crags</option><!><option>Other (Manual Entry)</option></select>'),Nt=n('<input type="text" id="crag-filter-text" class="svelte-1frtlim"/>'),Pt=n("<option> </option>"),At=n("<option> </option>"),Bt=n('<div class="filter-body svelte-1frtlim"><div class="filter-grid svelte-1frtlim"><div class="filter-item svelte-1frtlim"><label for="start-date" class="svelte-1frtlim">Start Date</label> <input type="date" id="start-date" class="svelte-1frtlim"/></div> <div class="filter-item svelte-1frtlim"><label for="end-date" class="svelte-1frtlim">End Date</label> <input type="date" id="end-date" class="svelte-1frtlim"/></div> <div class="filter-item svelte-1frtlim"><label for="area-filter" class="svelte-1frtlim">Area</label> <!></div> <div class="filter-item svelte-1frtlim"><label for="crag-filter" class="svelte-1frtlim">Crag</label> <!></div> <div class="filter-item svelte-1frtlim"><label for="climbing-type-filter" class="svelte-1frtlim">Climb Type</label> <select id="climbing-type-filter" class="svelte-1frtlim"><option>Any Type</option><!></select></div> <div class="filter-item svelte-1frtlim"><label for="session-type-filter" class="svelte-1frtlim">Session Type</label> <select id="session-type-filter" class="svelte-1frtlim"><option>Any Type</option><!></select></div> <div class="filter-item svelte-1frtlim"><label for="grade-filter" class="svelte-1frtlim">Grade (Exact)</label> <input type="text" id="grade-filter" placeholder="e.g. 7a" class="svelte-1frtlim"/></div></div> <div class="filter-actions svelte-1frtlim"><button class="reset-btn svelte-1frtlim">Reset Filters</button></div></div>'),It=n('<div class="filter-container svelte-1frtlim"><button class="filter-header svelte-1frtlim"><div class="header-content svelte-1frtlim"><span class="icon svelte-1frtlim">üîç</span> <span class="title svelte-1frtlim">Filters</span> <!></div></button> <!></div>');function Rt(_e,i){Ke(i,!0);const m=ws(),f=["Bouldering","Sport","Mixed","Trad"],S=["Projecting","Onsighting","Campusing","Repeaters","Fun","Volume"];let D=M(!1),g=M(""),G=M(""),p=M(""),F=M(""),J=M(""),R=M(""),ie=M(""),N=M(!1),V=M(!1),w=Xe(()=>s(p)&&s(p)!=="Other"?ks(s(p)):[]);function K(){s(p)==="Other"?(v(N,!0),v(p,"")):v(N,!1),v(F,""),v(V,!1),L()}function q(){s(F)==="Other"?(v(V,!0),v(F,"")):v(V,!1),L()}function E(){v(D,!s(D))}function I(){v(g,""),v(G,""),v(p,""),v(F,""),v(J,""),v(R,""),v(ie,""),v(N,!1),v(V,!1),L()}function L(){i.onFilterParamsChange({startDate:s(g),endDate:s(G),area:s(p),crag:s(F),climbingType:s(J),sessionType:s(R),grade:s(ie)})}var Q=It(),H=a(Q);H.__click=E;var re=a(H),de=t(a(re),4);{var le=Z=>{var _=Ft();r(Z,_)},k=Z=>{var _=Et();r(Z,_)};d(de,Z=>{s(D)?Z(le):Z(k,!1)})}e(re),e(H);var P=t(H,2);{var Y=Z=>{var _=Bt(),h=a(_),A=a(h),o=t(a(A),2);aa(o),o.__change=L,e(A);var c=t(A,2),b=t(a(c),2);aa(b),b.__change=L,e(c);var z=t(c,2),ge=t(a(z),2);{var T=U=>{var ne=Lt(),x=a(ne);aa(x),x.__input=L;var ve=t(x,2);ve.__click=()=>{v(N,!1),v(p,""),L()},e(ne),sa(x,()=>s(p),C=>v(p,C)),r(U,ne)},$=U=>{var ne=Gt();ne.__change=K;var x=a(ne);x.value=x.__value="";var ve=t(x);De(ve,17,()=>m,Oe,(X,oe)=>{var xe=zt(),O=a(xe,!0);e(xe);var se={};u(()=>{l(O,s(oe)),se!==(se=s(oe))&&(xe.value=(xe.__value=s(oe))??"")}),r(X,xe)});var C=t(ve);C.value=C.__value="Other",e(ne),wa(ne,()=>s(p),X=>v(p,X)),r(U,ne)};d(ge,U=>{s(N)?U(T):U($,!1)})}e(z);var pe=t(z,2),Te=t(a(pe),2);{var ke=U=>{var ne=jt(),x=a(ne);aa(x),x.__input=L;var ve=t(x,2);ve.__click=()=>{v(V,!1),v(F,""),L()},e(ne),sa(x,()=>s(F),C=>v(F,C)),r(U,ne)},Fe=U=>{var ne=Re(),x=Be(ne);{var ve=X=>{var oe=Ot();oe.__change=q;var xe=a(oe);xe.value=xe.__value="";var O=t(xe);De(O,17,()=>s(w),Oe,(be,je)=>{var Ae=Mt(),la=a(Ae,!0);e(Ae);var we={};u(()=>{l(la,s(je)),we!==(we=s(je))&&(Ae.value=(Ae.__value=s(je))??"")}),r(be,Ae)});var se=t(O);se.value=se.__value="Other",e(oe),wa(oe,()=>s(F),be=>v(F,be)),r(X,oe)},C=X=>{var oe=Nt();aa(oe),oe.__input=L,u(()=>{Ue(oe,"placeholder",s(p)?"Filter crag...":"Select area first"),oe.disabled=!s(N)&&!s(p)}),sa(oe,()=>s(F),xe=>v(F,xe)),r(X,oe)};d(x,X=>{!s(N)&&s(p)&&s(w).length>0?X(ve):X(C,!1)},!0)}r(U,ne)};d(Te,U=>{s(V)?U(ke):U(Fe,!1)})}e(pe);var ee=t(pe,2),ae=t(a(ee),2);ae.__change=L;var ye=a(ae);ye.value=ye.__value="";var Pe=t(ye);De(Pe,17,()=>f,Oe,(U,ne)=>{var x=Pt(),ve=a(x,!0);e(x);var C={};u(()=>{l(ve,s(ne)),C!==(C=s(ne))&&(x.value=(x.__value=s(ne))??"")}),r(U,x)}),e(ae),e(ee);var Ie=t(ee,2),ue=t(a(Ie),2);ue.__change=L;var me=a(ue);me.value=me.__value="";var he=t(me);De(he,17,()=>S,Oe,(U,ne)=>{var x=At(),ve=a(x,!0);e(x);var C={};u(()=>{l(ve,s(ne)),C!==(C=s(ne))&&(x.value=(x.__value=s(ne))??"")}),r(U,x)}),e(ue),e(Ie);var Ee=t(Ie,2),Se=t(a(Ee),2);aa(Se),Se.__input=L,e(Ee),e(h);var Ge=t(h,2),Ce=a(Ge);Ce.__click=I,e(Ge),e(_),sa(o,()=>s(g),U=>v(g,U)),sa(b,()=>s(G),U=>v(G,U)),wa(ae,()=>s(J),U=>v(J,U)),wa(ue,()=>s(R),U=>v(R,U)),sa(Se,()=>s(ie),U=>v(ie,U)),ia(3,_,()=>na,()=>({duration:200})),r(Z,_)};d(P,Z=>{s(D)&&Z(Y)})}e(Q),u(()=>Ue(H,"aria-expanded",s(D))),r(_e,Q),Qe()}Ye(["click","change","input"]);var Vt=n('<span class="climb-type-tag svelte-1k6anfh"> </span>'),Ut=n('<span class="notes-preview svelte-1k6anfh"> </span>'),Wt=n('<span class="attempts-count svelte-1k6anfh"> </span>'),Ht=n('<div class="detail-row svelte-1k6anfh"><span class="label svelte-1k6anfh">Notes:</span> <p class="notes svelte-1k6anfh"> </p></div>'),Jt=n('<p class="empty-notes svelte-1k6anfh">No notes for this climb.</p>'),Yt=n('<span class="tag wall-tag svelte-1k6anfh"> </span>'),Zt=n('<span class="tag technique-tag svelte-1k6anfh"> </span>'),Xt=n('<div class="climb-details svelte-1k6anfh"><!> <div class="tags svelte-1k6anfh"><span class="tag type svelte-1k6anfh"> </span> <!> <!> <span class="tag attempt-text svelte-1k6anfh"> </span></div></div>'),Kt=n('<div><div class="climb-header svelte-1k6anfh" role="button" tabindex="0"><div class="climb-main-info svelte-1k6anfh"><span> </span> <span class="climb-name svelte-1k6anfh"> </span> <!> <!></div> <div class="climb-meta svelte-1k6anfh"><span><span class="icon svelte-1k6anfh"> </span> <!></span> <span class="chevron svelte-1k6anfh"> </span></div></div> <!></div>');function Qt(_e,i){Ke(i,!0);let m=es(i,"showClimbType",3,!1),f=M(!1);function S(){v(f,!s(f))}const D={Flash:"‚ö°",Onsight:"üëÅÔ∏è",Redpoint:"üî¥",Dogged:"üõ†Ô∏è",DNF:"‚ùå"};var g=Kt();let G;var p=a(g);p.__click=S,p.__keydown=_=>(_.key==="Enter"||_.key===" ")&&S();var F=a(p),J=a(F);let R;var ie=a(J,!0);e(J);var N=t(J,2),V=a(N,!0);e(N);var w=t(N,2);{var K=_=>{var h=Vt(),A=a(h,!0);e(h),u(()=>l(A,i.climb.isSport?"Sport":"Boulder")),r(_,h)};d(w,_=>{m()&&_(K)})}var q=t(w,2);{var E=_=>{var h=Ut(),A=a(h);e(h),u(()=>l(A,`- ${i.climb.notes??""}`)),r(_,h)};d(q,_=>{!s(f)&&i.climb.notes&&_(E)})}e(F);var I=t(F,2),L=a(I);let Q;var H=a(L),re=a(H,!0);e(H);var de=t(H,2);{var le=_=>{var h=Wt(),A=a(h,!0);e(h),u(()=>l(A,i.climb.attemptsNum)),r(_,h)};d(de,_=>{i.climb.attemptType!=="Flash"&&i.climb.attemptType!=="Onsight"&&_(le)})}e(L);var k=t(L,2),P=a(k,!0);e(k),e(I),e(p);var Y=t(p,2);{var Z=_=>{var h=Xt(),A=a(h);{var o=ee=>{var ae=Ht(),ye=t(a(ae),2),Pe=a(ye,!0);e(ye),e(ae),u(()=>l(Pe,i.climb.notes)),r(ee,ae)},c=ee=>{var ae=Jt();r(ee,ae)};d(A,ee=>{i.climb.notes?ee(o):ee(c,!1)})}var b=t(A,2),z=a(b),ge=a(z,!0);e(z);var T=t(z,2);{var $=ee=>{var ae=Yt(),ye=a(ae,!0);e(ae),u(()=>l(ye,i.climb.wall)),r(ee,ae)};d(T,ee=>{i.climb.wall&&ee($)})}var pe=t(T,2);{var Te=ee=>{var ae=Zt(),ye=a(ae,!0);e(ae),u(()=>l(ye,i.climb.techniqueFocus)),r(ee,ae)};d(pe,ee=>{i.climb.techniqueFocus&&ee(Te)})}var ke=t(pe,2),Fe=a(ke,!0);e(ke),e(b),e(h),u(()=>{l(ge,i.climb.isSport?"Sport":"Boulder"),l(Fe,i.climb.attemptType)}),ia(3,h,()=>na,()=>({duration:150})),r(_,h)};d(Y,_=>{s(f)&&_(Z)})}e(g),u(()=>{G=ta(g,1,"climb-entry svelte-1k6anfh",null,G,{expanded:s(f)}),Ue(p,"aria-expanded",s(f)),R=ta(J,1,"grade-badge svelte-1k6anfh",null,R,{sport:i.climb.isSport}),l(ie,i.climb.grade),l(V,i.climb.name||"Unnamed Route"),Q=ta(L,1,"attempt-type svelte-1k6anfh",null,Q,{flash:i.climb.attemptType==="Flash"}),l(re,D[i.climb.attemptType]||i.climb.attemptType),l(P,s(f)?"‚ñ≤":"‚ñº")}),r(_e,g),Qe()}Ye(["click","keydown"]);var $t=n('<div class="sector-meta"> </div>'),ei=n('<span class="stat svelte-d5hg2r"> </span>'),ai=n('<span class="status-icon pending svelte-d5hg2r" title="Waiting to sync">üîÑ</span>'),si=n('<span class="status-icon error svelte-d5hg2r" title="Sync error">‚ö†Ô∏è</span>'),ti=n('<span class="chip svelte-d5hg2r"> </span>'),ii=n('<span class="text-none svelte-d5hg2r">None</span>'),ri=n('<div class="detail-item svelte-d5hg2r"><span class="label svelte-d5hg2r">Difficulty</span> <span class="value svelte-d5hg2r"> </span></div>'),ni=n('<span class="chip svelte-d5hg2r"> </span>'),li=n('<span class="text-none svelte-d5hg2r">None</span>'),vi=n('<div class="detail-item svelte-d5hg2r"><span class="label svelte-d5hg2r">Category</span> <div class="value-chips svelte-d5hg2r"><!></div></div>'),oi=n('<span class="chip svelte-d5hg2r"> </span>'),di=n('<span class="text-none svelte-d5hg2r">None</span>'),ci=n('<div class="detail-item svelte-d5hg2r"><span class="label svelte-d5hg2r">Energy System</span> <div class="value-chips svelte-d5hg2r"><!></div></div>'),_i=n('<p class="notes-text"> </p>'),gi=n('<p class="notes-placeholder">No notes.</p>'),ui=n('<div class="metric svelte-d5hg2r"><span class="label svelte-d5hg2r">Open Grip</span> <div class="bar-container svelte-d5hg2r"><div class="bar-fill svelte-d5hg2r"></div></div> <span class="score svelte-d5hg2r"> </span></div>'),fi=n('<div class="metric svelte-d5hg2r"><span class="label svelte-d5hg2r">Crimp Grip</span> <div class="bar-container svelte-d5hg2r"><div class="bar-fill svelte-d5hg2r"></div></div> <span class="score svelte-d5hg2r"> </span></div>'),pi=n('<div class="metric svelte-d5hg2r"><span class="label svelte-d5hg2r">Pinch Grip</span> <div class="bar-container svelte-d5hg2r"><div class="bar-fill svelte-d5hg2r"></div></div> <span class="score svelte-d5hg2r"> </span></div>'),mi=n('<div class="metric svelte-d5hg2r"><span class="label svelte-d5hg2r">Sloper Grip</span> <div class="bar-container svelte-d5hg2r"><div class="bar-fill svelte-d5hg2r"></div></div> <span class="score svelte-d5hg2r"> </span></div>'),hi=n('<div class="metric svelte-d5hg2r"><span class="label svelte-d5hg2r">Jug Grip</span> <div class="bar-container svelte-d5hg2r"><div class="bar-fill svelte-d5hg2r"></div></div> <span class="score svelte-d5hg2r"> </span></div>'),bi=n('<p class="no-climbs svelte-d5hg2r">No climbs logged for this session.</p>'),yi=n('<div class="card-body svelte-d5hg2r"><div class="details-grid svelte-d5hg2r"><div class="detail-item svelte-d5hg2r"><span class="label svelte-d5hg2r">Training Type</span> <div class="value-chips svelte-d5hg2r"><!></div></div> <!> <!> <!></div> <div class="notes-container svelte-d5hg2r"><div class="notes-header svelte-d5hg2r"><span class="label svelte-d5hg2r">Session Notes</span></div> <!></div> <div class="metrics-container svelte-d5hg2r"><div class="metric svelte-d5hg2r"><span class="label svelte-d5hg2r">Finger Load</span> <div class="bar-container svelte-d5hg2r"><div class="bar-fill svelte-d5hg2r"></div></div> <span class="score svelte-d5hg2r"> </span></div> <div class="metric svelte-d5hg2r"><span class="label svelte-d5hg2r">Shoulder Load</span> <div class="bar-container svelte-d5hg2r"><div class="bar-fill svelte-d5hg2r"></div></div> <span class="score svelte-d5hg2r"> </span></div> <div class="metric svelte-d5hg2r"><span class="label svelte-d5hg2r">Forearm Load</span> <div class="bar-container svelte-d5hg2r"><div class="bar-fill svelte-d5hg2r"></div></div> <span class="score svelte-d5hg2r"> </span></div> <!> <!> <!> <!> <!></div> <div class="climbs-list svelte-d5hg2r"><h4 class="svelte-d5hg2r">Climbs</h4> <div class="climbs-container svelte-d5hg2r"><!> <!></div></div></div>'),xi=n('<div><div class="card-header svelte-d5hg2r" role="button" tabindex="0"><div class="header-main svelte-d5hg2r"><div class="date-badge svelte-d5hg2r"><span class="day svelte-d5hg2r"> </span> <span class="month svelte-d5hg2r"> </span> <span class="year svelte-d5hg2r"> </span></div> <div class="session-info svelte-d5hg2r"><div class="session-text svelte-d5hg2r"><h3 class="location svelte-d5hg2r"> <!></h3> <!> <div class="meta-row svelte-d5hg2r"><span class="time-tag svelte-d5hg2r"> </span> <span class="type-tag svelte-d5hg2r"> </span></div> <div class="meta-row lowercase svelte-d5hg2r"><span class="stat svelte-d5hg2r"> </span> <!></div></div> <div class="load-summary svelte-d5hg2r"><div class="load-badge finger svelte-d5hg2r"> </div> <div class="load-badge shoulder svelte-d5hg2r"> </div> <div class="load-badge forearm svelte-d5hg2r"> </div></div></div></div> <div class="header-actions"><div class="header-status svelte-d5hg2r"><!></div> <button class="btn-icon edit-session" title="Edit Session">‚úèÔ∏è</button> <button class="btn-icon delete-session" title="Delete Session">üóëÔ∏è</button> <span class="chevron svelte-d5hg2r"> </span></div></div> <!> <!> <!></div>');function wi(_e,i){Ke(i,!0);let m=M(!1),f=M(!1),S=M(!1);function D(){v(m,!s(m))}function g(){v(f,!0)}function G(){v(S,!0)}function p(){v(S,!1)}async function F(){v(S,!1),await Wa()}async function J(){try{const O=await vs(i.session.id);O.ok?(v(f,!1),i.onDelete()):(console.error("Failed to delete session:",O.error),alert("Failed to delete session: "+O.error))}catch(O){console.error("Exception deleting session:",O),alert("Error deleting session")}}function R(O){}function ie(O,se){}let N=Xe(()=>i.session.climbs?.length??0),V=Xe(()=>(i.session.climbs||[]).reduce((O,se)=>{const be=parseInt(se.grade.replace(/\D/g,""))||0,je=parseInt(O.replace(/\D/g,""))||0;return be>je?se.grade:O},"V0"));var w=xi();let K;var q=a(w);q.__click=D,q.__keydown=O=>O.key==="Enter"&&D();var E=a(q),I=a(E),L=a(I),Q=a(L,!0);e(L);var H=t(L,2),re=a(H,!0);e(H);var de=t(H,2),le=a(de,!0);e(de),e(I);var k=t(I,2),P=a(k),Y=a(P),Z=a(Y),_=t(Z);{var h=O=>{var se=ka();u(()=>l(se,`- ${i.session.crag??""}`)),r(O,se)};d(_,O=>{i.session.crag&&O(h)})}e(Y);var A=t(Y,2);{var o=O=>{var se=$t(),be=a(se);e(se),u(()=>l(be,`üìç ${i.session.sector??""}`)),r(O,se)};d(A,O=>{i.session.sector&&O(o)})}var c=t(A,2),b=a(c),z=a(b);e(b);var ge=t(b,2),T=a(ge,!0);e(ge),e(c);var $=t(c,2),pe=a($),Te=a(pe);e(pe);var ke=t(pe,2);{var Fe=O=>{var se=ei(),be=a(se);e(se),u(()=>l(be,`Max: ${s(V)??""}`)),r(O,se)};d(ke,O=>{s(N)>0&&O(Fe)})}e($),e(P);var ee=t(P,2),ae=a(ee),ye=a(ae,!0);e(ae);var Pe=t(ae,2),Ie=a(Pe,!0);e(Pe);var ue=t(Pe,2),me=a(ue,!0);e(ue),e(ee),e(k),e(E);var he=t(E,2),Ee=a(he),Se=a(Ee);{var Ge=O=>{var se=ai();r(O,se)},Ce=O=>{var se=Re(),be=Be(se);{var je=Ae=>{var la=si();r(Ae,la)};d(be,Ae=>{i.session.syncStatus==="error"&&Ae(je)},!0)}r(O,se)};d(Se,O=>{i.session.syncStatus==="pending"?O(Ge):O(Ce,!1)})}e(Ee);var U=t(Ee,2);U.__click=O=>{O.stopPropagation(),G()};var ne=t(U,2);ne.__click=O=>{O.stopPropagation(),g()};var x=t(ne,2),ve=a(x,!0);e(x),e(he),e(q);var C=t(q,2);{var X=O=>{var se=yi(),be=a(se),je=a(be),Ae=t(a(je),2),la=a(Ae);{var we=y=>{var j=Re(),W=Be(j);De(W,17,()=>i.session.trainingTypes,Oe,(fe,ce)=>{var qe=ti(),Ve=a(qe,!0);e(qe),u(()=>l(Ve,s(ce))),r(fe,qe)}),r(y,j)},Le=y=>{var j=ii();r(y,j)};d(la,y=>{i.session.trainingTypes&&i.session.trainingTypes.length>0&&!i.session.trainingTypes.includes("None")?y(we):y(Le,!1)})}e(Ae),e(je);var ze=t(je,2);{var Je=y=>{var j=ri(),W=t(a(j),2),fe=a(W,!0);e(W),e(j),u(()=>l(fe,i.session.difficulty)),r(y,j)};d(ze,y=>{i.session.difficulty&&y(Je)})}var Ne=t(ze,2);{var We=y=>{var j=vi(),W=t(a(j),2),fe=a(W);{var ce=Ve=>{var $e=Re(),ya=Be($e);De(ya,17,()=>i.session.categories,Oe,(ea,xa)=>{var Pa=ni(),Xa=a(Pa,!0);e(Pa),u(()=>l(Xa,s(xa))),r(ea,Pa)}),r(Ve,$e)},qe=Ve=>{var $e=li();r(Ve,$e)};d(fe,Ve=>{i.session.categories.length>0&&!i.session.categories.includes("None")?Ve(ce):Ve(qe,!1)})}e(W),e(j),r(y,j)};d(Ne,y=>{i.session.categories?.length&&y(We)})}var ga=t(Ne,2);{var Ha=y=>{var j=ci(),W=t(a(j),2),fe=a(W);{var ce=Ve=>{var $e=Re(),ya=Be($e);De(ya,17,()=>i.session.energySystems,Oe,(ea,xa)=>{var Pa=oi(),Xa=a(Pa,!0);e(Pa),u(()=>l(Xa,s(xa))),r(ea,Pa)}),r(Ve,$e)},qe=Ve=>{var $e=di();r(Ve,$e)};d(fe,Ve=>{i.session.energySystems.length>0&&!i.session.energySystems.includes("None")?Ve(ce):Ve(qe,!1)})}e(W),e(j),r(y,j)};d(ga,y=>{i.session.energySystems?.length&&y(Ha)})}e(be);var Ga=t(be,2),ja=t(a(Ga),2);{var pa=y=>{var j=_i(),W=a(j,!0);e(j),u(()=>l(W,i.session.notes)),r(y,j)},Ma=y=>{var j=gi();r(y,j)};d(ja,y=>{i.session.notes?y(pa):y(Ma,!1)})}e(Ga);var ma=t(Ga,2),Oa=a(ma),ua=t(a(Oa),2),Sa=a(ua);e(ua);var fa=t(ua,2),ha=a(fa);e(fa),e(Oa);var ba=t(Oa,2),qa=t(a(ba),2),Ja=a(qa);e(qa);var Da=t(qa,2),Ta=a(Da);e(Da),e(ba);var ca=t(ba,2),He=t(a(ca),2),Ca=a(He);e(He);var oa=t(He,2),Fa=a(oa);e(oa),e(ca);var ra=t(ca,2);{var da=y=>{var j=ui(),W=t(a(j),2),fe=a(W);e(W);var ce=t(W,2),qe=a(ce);e(ce),e(j),u(()=>{Me(fe,`width: ${i.session.openGrip/5*100}%`),l(qe,`${i.session.openGrip??""}/5`)}),r(y,j)};d(ra,y=>{i.session.openGrip&&y(da)})}var va=t(ra,2);{var Ea=y=>{var j=fi(),W=t(a(j),2),fe=a(W);e(W);var ce=t(W,2),qe=a(ce);e(ce),e(j),u(()=>{Me(fe,`width: ${i.session.crimpGrip/5*100}%`),l(qe,`${i.session.crimpGrip??""}/5`)}),r(y,j)};d(va,y=>{i.session.crimpGrip&&y(Ea)})}var Na=t(va,2);{var Ba=y=>{var j=pi(),W=t(a(j),2),fe=a(W);e(W);var ce=t(W,2),qe=a(ce);e(ce),e(j),u(()=>{Me(fe,`width: ${i.session.pinchGrip/5*100}%`),l(qe,`${i.session.pinchGrip??""}/5`)}),r(y,j)};d(Na,y=>{i.session.pinchGrip&&y(Ba)})}var Ia=t(Na,2);{var Ra=y=>{var j=mi(),W=t(a(j),2),fe=a(W);e(W);var ce=t(W,2),qe=a(ce);e(ce),e(j),u(()=>{Me(fe,`width: ${i.session.sloperGrip/5*100}%`),l(qe,`${i.session.sloperGrip??""}/5`)}),r(y,j)};d(Ia,y=>{i.session.sloperGrip&&y(Ra)})}var La=t(Ia,2);{var Va=y=>{var j=hi(),W=t(a(j),2),fe=a(W);e(W);var ce=t(W,2),qe=a(ce);e(ce),e(j),u(()=>{Me(fe,`width: ${i.session.jugGrip/5*100}%`),l(qe,`${i.session.jugGrip??""}/5`)}),r(y,j)};d(La,y=>{i.session.jugGrip&&y(Va)})}e(ma);var za=t(ma,2),Ua=t(a(za),2),Ze=a(Ua);De(Ze,17,()=>i.session.climbs||[],Oe,(y,j,W)=>{{let fe=Xe(()=>i.session.climbingType==="Mixed");Qt(y,{get climb(){return s(j)},onDelete:()=>void 0,onUpdate:ce=>void 0,get showClimbType(){return s(fe)}})}});var B=t(Ze,2);{var te=y=>{var j=bi();r(y,j)};d(B,y=>{(i.session.climbs||[]).length===0&&y(te)})}e(Ua),e(za),e(se),u(()=>{Me(Sa,`width: ${i.session.fingerLoad/5*100}%`),l(ha,`${i.session.fingerLoad??""}/5`),Me(Ja,`width: ${i.session.shoulderLoad/5*100}%`),l(Ta,`${i.session.shoulderLoad??""}/5`),Me(Ca,`width: ${i.session.forearmLoad/5*100}%`),l(Fa,`${i.session.forearmLoad??""}/5`)}),ia(3,se,()=>na,()=>({duration:150})),r(O,se)};d(C,O=>{s(m)&&O(X)})}var oe=t(C,2);Ya(oe,{get isOpen(){return s(f)},title:"Delete Session",message:"Are you sure you want to delete this session? This action cannot be undone.",onConfirm:J,onCancel:()=>v(f,!1)});var xe=t(oe,2);Za(xe,{get isOpen(){return s(S)},activityType:"outdoor_climb",get initialData(){return i.session},onClose:p,onSaved:F}),e(w),u((O,se,be)=>{K=ta(w,1,"session-card svelte-d5hg2r",null,K,{expanded:s(m)}),Ue(q,"aria-expanded",s(m)),l(Q,O),l(re,se),l(le,be),l(Z,`${i.session.area??""} `),l(z,`üïí ${(i.session.time||"12:00")??""}`),l(T,i.session.climbingType),l(Te,`${s(N)??""} climbs`),Ue(ae,"title",`Finger Load: ${i.session.fingerLoad??""}`),l(ye,i.session.fingerLoad),Ue(Pe,"title",`Shoulder Load: ${i.session.shoulderLoad??""}`),l(Ie,i.session.shoulderLoad),Ue(ue,"title",`Forearm Load: ${i.session.forearmLoad??""}`),l(me,i.session.forearmLoad),l(ve,s(m)?"‚ñ≤":"‚ñº")},[()=>new Date(i.session.date).getDate(),()=>new Date(i.session.date).toLocaleDateString(void 0,{month:"short"}),()=>new Date(i.session.date).getFullYear()]),r(_e,w),Qe()}Ye(["click","keydown"]);var ki=n('<span class="spinner svelte-1s7jdlh"></span> Fetching...',1),Si=n('<div class="error-banner svelte-1s7jdlh"> </div>'),qi=n('<small class="svelte-1s7jdlh">Try adjusting your filters.</small>'),Di=n('<div class="empty-state svelte-1s7jdlh"><p class="svelte-1s7jdlh">No outdoor climbing sessions found.</p> <!></div>'),Ti=n('<div class="load-more-container svelte-1s7jdlh"><button class="load-more-btn svelte-1s7jdlh"> </button></div>'),Ci=n('<div class="view-container svelte-1s7jdlh"><div class="view-header svelte-1s7jdlh"><h2 class="view-title svelte-1s7jdlh">‚õ∞Ô∏è Outdoor Climbing History</h2> <div class="header-actions svelte-1s7jdlh"><button class="action-btn secondary svelte-1s7jdlh" title="Export filtered data to CSV">üì• Export</button> <button class="action-btn svelte-1s7jdlh" title="Fetch data from cloud"><!></button></div></div> <!> <!> <div class="info-bar svelte-1s7jdlh"><div class="legend-wrapper svelte-1s7jdlh"><!></div> <div class="load-key svelte-1s7jdlh"><span class="key-label svelte-1s7jdlh">Load:</span> <div class="key-item svelte-1s7jdlh"><span class="dot finger svelte-1s7jdlh"></span> Finger</div> <div class="key-item svelte-1s7jdlh"><span class="dot shoulder svelte-1s7jdlh"></span> Shoulder</div> <div class="key-item svelte-1s7jdlh"><span class="dot forearm svelte-1s7jdlh"></span> Forearm</div></div></div> <div class="sessions-list"><!> <!> <!></div></div>');function Fi(_e,i){Ke(i,!0);let m=M(_a([])),f=M(_a([])),S=M(!1),D=M(""),g=M(_a({startDate:"",endDate:"",area:"",crag:"",climbingType:"",sessionType:"",grade:""})),G=M(20);const p=20;Ka(()=>{F()});async function F(){v(S,!0),v(D,"");try{const o=await os();o.ok&&o.data?(v(m,o.data.map(c=>({...c,activityType:"outdoor_climb"})),!0),s(m).sort((c,b)=>new Date(b.date).getTime()-new Date(c.date).getTime()),R()):v(D,o.error||"Failed to fetch data",!0)}catch(o){v(D,o instanceof Error?o.message:"Unknown error",!0)}finally{v(S,!1)}}function J(o){v(g,o,!0),R()}function R(){v(G,p),v(f,s(m).filter(o=>{if(s(g).startDate&&o.date<s(g).startDate||s(g).endDate&&o.date>s(g).endDate||s(g).area&&!o.area.toLowerCase().includes(s(g).area.toLowerCase())||s(g).crag&&!o.crag.toLowerCase().includes(s(g).crag.toLowerCase()))return!1;if(s(g).climbingType&&(o.climbingType==="Leading"?"Sport":o.climbingType)!==s(g).climbingType)if(o.climbingType==="Mixed")if(s(g).climbingType==="Bouldering"){if(!o.climbs.some(b=>!b.isSport))return!1}else if(s(g).climbingType==="Sport"||s(g).climbingType==="Trad"){if(!o.climbs.some(b=>b.isSport))return!1}else return!1;else return!1;if(s(g).sessionType&&!o.trainingTypes?.includes(s(g).sessionType))return!1;if(s(g).grade){const c=s(g).grade.trim().toLowerCase();if(!o.climbs.some(z=>z.grade.trim().toLowerCase()===c))return!1}return!0}),!0)}function ie(){v(G,s(G)+p)}var N=Ci(),V=a(N),w=t(a(V),2),K=a(w);K.__click=()=>Qa(s(f),"outdoor_climbs");var q=t(K,2);q.__click=F;var E=a(q);{var I=o=>{var c=ki();Aa(),r(o,c)},L=o=>{var c=ka("‚òÅÔ∏è Fetch Data");r(o,c)};d(E,o=>{s(S)?o(I):o(L,!1)})}e(q),e(w),e(V);var Q=t(V,2);{var H=o=>{var c=Si(),b=a(c,!0);e(c),u(()=>l(b,s(D))),ia(3,c,()=>na),r(o,c)};d(Q,o=>{s(D)&&o(H)})}var re=t(Q,2);Rt(re,{onFilterParamsChange:J});var de=t(re,2),le=a(de),k=a(le);as(k),e(le),Aa(2),e(de);var P=t(de,2),Y=a(P);De(Y,17,()=>s(f).slice(0,s(G)),o=>o.id,(o,c)=>{wi(o,{get session(){return s(c)},onDelete:F})});var Z=t(Y,2);{var _=o=>{var c=Di(),b=t(a(c),2);{var z=ge=>{var T=qi();r(ge,T)};d(b,ge=>{s(m).length>0&&ge(z)})}e(c),r(o,c)};d(Z,o=>{s(f).length===0&&o(_)})}var h=t(Z,2);{var A=o=>{var c=Ti(),b=a(c);b.__click=ie;var z=a(b);e(b),e(c),u(()=>l(z,`Load More (${s(f).length-s(G)} remaining)`)),r(o,c)};d(h,o=>{s(G)<s(f).length&&o(A)})}e(P),e(N),u(()=>q.disabled=s(S)),r(_e,N),Qe()}Ye(["click"]);var Ei=n('<span class="chevron svelte-11rkzid">‚ñ≤</span>'),Li=n('<span class="chevron svelte-11rkzid">‚ñº</span>'),zi=n('<div class="filter-body svelte-11rkzid"><div class="filter-grid svelte-11rkzid"><div class="filter-item svelte-11rkzid"><label for="start-date" class="svelte-11rkzid">Start Date</label> <input type="date" id="start-date" class="svelte-11rkzid"/></div> <div class="filter-item svelte-11rkzid"><label for="end-date" class="svelte-11rkzid">End Date</label> <input type="date" id="end-date" class="svelte-11rkzid"/></div> <div class="filter-item svelte-11rkzid"><label for="name-filter" class="svelte-11rkzid">Session Name</label> <input type="text" id="name-filter" placeholder="e.g. Leg Day" class="svelte-11rkzid"/></div> <div class="filter-item svelte-11rkzid"><label for="block-filter" class="svelte-11rkzid">Training Block</label> <select id="block-filter" class="svelte-11rkzid"><option>All Blocks</option><option>Strength</option><option>Power</option><option>Power Endurance</option><option>Muscular Endurance</option></select></div></div> <div class="filter-actions svelte-11rkzid"><button class="reset-btn svelte-11rkzid">Reset Filters</button></div></div>'),Gi=n('<div class="filter-container svelte-11rkzid"><button class="filter-header svelte-11rkzid"><div class="header-content svelte-11rkzid"><span class="icon svelte-11rkzid">üîç</span> <span class="title svelte-11rkzid">Filters</span> <!></div></button> <!></div>');function ji(_e,i){Ke(i,!0);let m=M(!1),f=M(""),S=M(""),D=M(""),g=M("");function G(){v(m,!s(m))}function p(){v(f,""),v(S,""),v(D,""),v(g,""),F()}function F(){i.onFilterParamsChange({startDate:s(f),endDate:s(S),name:s(D),trainingBlock:s(g)})}var J=Gi(),R=a(J);R.__click=G;var ie=a(R),N=t(a(ie),4);{var V=E=>{var I=Ei();r(E,I)},w=E=>{var I=Li();r(E,I)};d(N,E=>{s(m)?E(V):E(w,!1)})}e(ie),e(R);var K=t(R,2);{var q=E=>{var I=zi(),L=a(I),Q=a(L),H=t(a(Q),2);aa(H),H.__change=F,e(Q);var re=t(Q,2),de=t(a(re),2);aa(de),de.__change=F,e(re);var le=t(re,2),k=t(a(le),2);aa(k),k.__input=F,e(le);var P=t(le,2),Y=t(a(P),2);Y.__change=F;var Z=a(Y);Z.value=Z.__value="";var _=t(Z);_.value=_.__value="Strength";var h=t(_);h.value=h.__value="Power";var A=t(h);A.value=A.__value="Power Endurance";var o=t(A);o.value=o.__value="Muscular Endurance",e(Y),e(P),e(L);var c=t(L,2),b=a(c);b.__click=p,e(c),e(I),sa(H,()=>s(f),z=>v(f,z)),sa(de,()=>s(S),z=>v(S,z)),sa(k,()=>s(D),z=>v(D,z)),wa(Y,()=>s(g),z=>v(g,z)),ia(3,I,()=>na,()=>({duration:200})),r(E,I)};d(K,E=>{s(m)&&E(q)})}e(J),u(()=>Ue(R,"aria-expanded",s(m))),r(_e,J),Qe()}Ye(["click","change","input"]);var Mi=n('<span class="block-tag svelte-cirrfc"> </span>'),Oi=n('<span class="status-icon pending svelte-cirrfc" title="Waiting to sync">üîÑ</span>'),Ni=n('<span class="status-icon error svelte-cirrfc" title="Sync error">‚ö†Ô∏è</span>'),Pi=n('<div class="bw-info svelte-cirrfc"><span class="label svelte-cirrfc">Bodyweight:</span> </div>'),Ai=n('<div class="notes-info svelte-cirrfc"><span class="label svelte-cirrfc">Notes:</span> <p class="notes-text svelte-cirrfc"> </p></div>'),Bi=n('<span class="muscle-tag svelte-cirrfc"> </span>'),Ii=n('<span class="muscle-tag svelte-cirrfc"> </span>'),Ri=n('<div class="muscle-tags svelte-cirrfc"><!> <!></div>'),Vi=n('<span class="tag w svelte-cirrfc">W</span>'),Ui=n('<span class="tag f svelte-cirrfc">F</span>'),Wi=n('<span class="tag d svelte-cirrfc">D</span>'),Hi=n('<div><span class="set-num svelte-cirrfc"></span> <!> <!> <!> <span class="val svelte-cirrfc"><span class="weight"> </span> <span class="x svelte-cirrfc">x</span> <span class="reps"> </span></span></div>'),Ji=n('<div class="exercise-item svelte-cirrfc"><div class="exercise-header svelte-cirrfc"><h4 class="svelte-cirrfc"> </h4> <!></div> <div class="sets-grid svelte-cirrfc"></div></div>'),Yi=n('<div class="subcategory-group svelte-cirrfc"><h5 class="subcategory-header svelte-cirrfc"> </h5> <!></div>'),Zi=n('<div class="category-group svelte-cirrfc"><h4 class="category-header svelte-cirrfc"> </h4> <!></div>'),Xi=n('<div class="card-body svelte-cirrfc"><!> <!> <div class="exercises-list svelte-cirrfc"></div></div>'),Ki=n('<div><div class="card-header svelte-cirrfc" role="button" tabindex="0"><div class="header-main svelte-cirrfc"><div class="date-badge svelte-cirrfc"><span class="day svelte-cirrfc"> </span> <span class="month svelte-cirrfc"> </span> <span class="year svelte-cirrfc"> </span></div> <div class="session-info svelte-cirrfc"><div class="session-text"><div class="name-display svelte-cirrfc"><h3 class="name svelte-cirrfc"> </h3></div> <div class="session-meta svelte-cirrfc"><span class="time-tag svelte-cirrfc"> </span> <!> <span class="stat svelte-cirrfc"> </span> <span class="stat svelte-cirrfc"> </span> <span class="stat svelte-cirrfc"> </span></div></div></div></div> <div class="header-actions svelte-cirrfc"><div class="header-status"><!></div> <button class="btn-icon edit-session svelte-cirrfc" title="Edit Session">‚úèÔ∏è</button> <button class="btn-icon delete-session svelte-cirrfc" title="Delete Session">üóëÔ∏è</button> <span class="chevron svelte-cirrfc"> </span></div></div> <!></div> <!> <!>',1);function Qi(_e,i){Ke(i,!0);let m=M(!1),f=M(!1),S=M(!1);function D(){v(m,!s(m))}function g(){v(f,!0)}function G(){v(S,!0)}function p(){v(S,!1)}async function F(){v(S,!1),await Wa()}async function J(){try{const x=await ds(i.session.id);x.ok?(v(f,!1),i.onDelete()):(console.error("Failed to delete session:",x.error),alert("Failed to delete session"))}catch(x){console.error("Exception deleting session:",x),alert("Error deleting session")}}function R(x){return Ss.find(ve=>ve.name===x)}function ie(x){switch(x){case"Strength":return{bg:"rgba(99, 102, 241, 0.1)",color:"#4338ca",border:"rgba(99, 102, 241, 0.2)"};case"Power":return{bg:"rgba(239, 68, 68, 0.1)",color:"#b91c1c",border:"rgba(239, 68, 68, 0.2)"};case"Power Endurance":return{bg:"rgba(245, 158, 11, 0.1)",color:"#b45309",border:"rgba(245, 158, 11, 0.2)"};case"Muscular Endurance":return{bg:"rgba(16, 185, 129, 0.1)",color:"#047857",border:"rgba(16, 185, 129, 0.2)"};default:return{bg:"rgba(107, 114, 128, 0.1)",color:"#374151",border:"rgba(107, 114, 128, 0.2)"}}}let N=Xe(()=>i.session.exercises?.length??0),V=Xe(()=>(i.session.exercises||[]).reduce((x,ve)=>x+(ve.sets?.length||0),0)),w=Xe(()=>(i.session.exercises||[]).reduce((x,ve)=>x+(ve.sets||[]).reduce((C,X)=>C+(X.weight||0)*(X.reps||0),0),0)),K=Xe(()=>(i.session.exercises||[]).reduce((x,ve)=>{const C=R(ve.name),X=C?.category||"Other",oe=C?.subcategory||"Misc";return x[X]||(x[X]={}),x[X][oe]||(x[X][oe]=[]),x[X][oe].push(ve),x},{}));var q=Ki(),E=Be(q);let I;var L=a(E);L.__click=D,L.__keydown=x=>x.key==="Enter"&&D();var Q=a(L),H=a(Q),re=a(H),de=a(re,!0);e(re);var le=t(re,2),k=a(le,!0);e(le);var P=t(le,2),Y=a(P,!0);e(P),e(H);var Z=t(H,2),_=a(Z),h=a(_),A=a(h),o=a(A,!0);e(A),e(h);var c=t(h,2),b=a(c),z=a(b);e(b);var ge=t(b,2);{var T=x=>{const ve=Xe(()=>ie(i.session.trainingBlock));var C=Mi(),X=a(C,!0);e(C),u(()=>{Me(C,`--bg-color: ${s(ve).bg??""}; --text-color: ${s(ve).color??""}; --border-color: ${s(ve).border??""};`),l(X,i.session.trainingBlock)}),r(x,C)};d(ge,x=>{i.session.trainingBlock&&x(T)})}var $=t(ge,2),pe=a($);e($);var Te=t($,2),ke=a(Te);e(Te);var Fe=t(Te,2),ee=a(Fe);e(Fe),e(c),e(_),e(Z),e(Q);var ae=t(Q,2),ye=a(ae),Pe=a(ye);{var Ie=x=>{var ve=Oi();r(x,ve)},ue=x=>{var ve=Re(),C=Be(ve);{var X=oe=>{var xe=Ni();r(oe,xe)};d(C,oe=>{i.session.syncStatus==="error"&&oe(X)},!0)}r(x,ve)};d(Pe,x=>{i.session.syncStatus==="pending"?x(Ie):x(ue,!1)})}e(ye);var me=t(ye,2);me.__click=x=>{x.stopPropagation(),G()};var he=t(me,2);he.__click=x=>{x.stopPropagation(),g()};var Ee=t(he,2),Se=a(Ee,!0);e(Ee),e(ae),e(L);var Ge=t(L,2);{var Ce=x=>{var ve=Xi(),C=a(ve);{var X=se=>{var be=Pi(),je=t(a(be));e(be),u(()=>l(je,` ${i.session.bodyweight??""}kg`)),r(se,be)};d(C,se=>{i.session.bodyweight&&se(X)})}var oe=t(C,2);{var xe=se=>{var be=Ai(),je=t(a(be),2),Ae=a(je,!0);e(je),e(be),u(()=>l(Ae,i.session.notes)),r(se,be)};d(oe,se=>{i.session.notes&&se(xe)})}var O=t(oe,2);De(O,21,()=>Object.entries(s(K)),Oe,(se,be)=>{var je=Xe(()=>$a(s(be),2));let Ae=()=>s(je)[0],la=()=>s(je)[1];var we=Zi(),Le=a(we),ze=a(Le,!0);e(Le);var Je=t(Le,2);De(Je,17,()=>Object.entries(la()),Oe,(Ne,We)=>{var ga=Xe(()=>$a(s(We),2));let Ha=()=>s(ga)[0],Ga=()=>s(ga)[1];var ja=Yi(),pa=a(ja),Ma=a(pa,!0);e(pa);var ma=t(pa,2);De(ma,17,Ga,Oe,(Oa,ua)=>{const Sa=Xe(()=>R(s(ua).name));var fa=Ji(),ha=a(fa),ba=a(ha),qa=a(ba,!0);e(ba);var Ja=t(ba,2);{var Da=ca=>{var He=Ri(),Ca=a(He);De(Ca,17,()=>s(Sa).targetMuscles.slice(0,3),Oe,(ra,da)=>{var va=Bi(),Ea=a(va,!0);e(va),u(()=>l(Ea,s(da))),r(ra,va)});var oa=t(Ca,2);{var Fa=ra=>{var da=Ii(),va=a(da);e(da),u(()=>l(va,`+${s(Sa).targetMuscles.length-3}`)),r(ra,da)};d(oa,ra=>{s(Sa).targetMuscles.length>3&&ra(Fa)})}e(He),r(ca,He)};d(Ja,ca=>{s(Sa)&&ca(Da)})}e(ha);var Ta=t(ha,2);De(Ta,21,()=>s(ua).sets,Oe,(ca,He,Ca)=>{var oa=Hi();let Fa;var ra=a(oa);ra.textContent=Ca+1;var da=t(ra,2);{var va=Ze=>{var B=Vi();r(Ze,B)};d(da,Ze=>{s(He).isWarmup&&Ze(va)})}var Ea=t(da,2);{var Na=Ze=>{var B=Ui();r(Ze,B)};d(Ea,Ze=>{s(He).isFailure&&Ze(Na)})}var Ba=t(Ea,2);{var Ia=Ze=>{var B=Wi();r(Ze,B)};d(Ba,Ze=>{s(He).isDropSet&&Ze(Ia)})}var Ra=t(Ba,2),La=a(Ra),Va=a(La);e(La);var za=t(La,4),Ua=a(za,!0);e(za),e(Ra),e(oa),u(()=>{Fa=ta(oa,1,"set-pill svelte-cirrfc",null,Fa,{completed:s(He).completed,warmup:s(He).isWarmup}),l(Va,`${s(He).weight??""}kg`),l(Ua,s(He).reps)}),r(ca,oa)}),e(Ta),e(fa),u(()=>l(qa,s(ua).name)),r(Oa,fa)}),e(ja),u(()=>l(Ma,Ha())),r(Ne,ja)}),e(we),u(()=>l(ze,Ae())),r(se,we)}),e(O),e(ve),ia(3,ve,()=>na,()=>({duration:150})),r(x,ve)};d(Ge,x=>{s(m)&&x(Ce)})}e(E);var U=t(E,2);Ya(U,{get isOpen(){return s(f)},title:"Delete Session",message:"Are you sure you want to delete this session? This cannot be undone.",onConfirm:J,onCancel:()=>v(f,!1)});var ne=t(U,2);Za(ne,{get isOpen(){return s(S)},activityType:"gym_session",get initialData(){return i.session},onClose:p,onSaved:F}),u((x,ve,C,X)=>{I=ta(E,1,"session-card svelte-cirrfc",null,I,{expanded:s(m)}),Ue(L,"aria-expanded",s(m)),l(de,x),l(k,ve),l(Y,C),l(o,i.session.name),l(z,`üïí ${(i.session.time||"12:00")??""}`),l(pe,`${s(N)??""} Exercises`),l(ke,`${s(V)??""} Sets`),l(ee,`~${X??""}kg Vol`),l(Se,s(m)?"‚ñ≤":"‚ñº")},[()=>new Date(i.session.date).getDate(),()=>new Date(i.session.date).toLocaleDateString("en-GB",{month:"short"}),()=>new Date(i.session.date).getFullYear(),()=>Math.round(s(w)).toLocaleString()]),r(_e,q),Qe()}Ye(["click","keydown"]);var $i=n('<span class="spinner svelte-133enjd"></span> Fetching...',1),er=n('<div class="error-banner svelte-133enjd"> </div>'),ar=n('<small class="svelte-133enjd">Try adjusting your filters.</small>'),sr=n('<div class="empty-state svelte-133enjd"><p class="svelte-133enjd">No gym sessions found.</p> <!></div>'),tr=n('<div class="load-more-container svelte-133enjd"><button class="load-more-btn svelte-133enjd"> </button></div>'),ir=n('<div class="view-container svelte-133enjd"><div class="view-header svelte-133enjd"><h2 class="view-title svelte-133enjd">üèãÔ∏è Gym Session History</h2> <div class="header-actions svelte-133enjd"><button class="action-btn secondary svelte-133enjd" title="Export filtered data to CSV">üì• Export</button> <button class="action-btn svelte-133enjd" title="Fetch data from cloud"><!></button></div></div> <!> <!> <div class="sessions-list"><!> <!> <!></div></div>');function rr(_e,i){Ke(i,!0);let m=M(_a([])),f=M(_a([])),S=M(!1),D=M(""),g=M(_a({startDate:"",endDate:"",name:"",trainingBlock:""})),G=M(20);const p=20;Ka(()=>{F()});async function F(){v(S,!0),v(D,"");try{const _=await cs();_.ok&&_.data?(v(m,_.data.map(h=>({...h,activityType:"gym_session"})),!0),s(m).sort((h,A)=>new Date(A.date).getTime()-new Date(h.date).getTime()),R()):v(D,_.error||"Failed to fetch data",!0)}catch(_){v(D,_ instanceof Error?_.message:"Unknown error",!0)}finally{v(S,!1)}}function J(_){v(g,_,!0),R()}function R(){v(G,p),v(f,s(m).filter(_=>!(s(g).startDate&&_.date<s(g).startDate||s(g).endDate&&_.date>s(g).endDate||s(g).name&&!_.name.toLowerCase().includes(s(g).name.toLowerCase())||s(g).trainingBlock&&_.trainingBlock!==s(g).trainingBlock)),!0)}function ie(){v(G,s(G)+p)}var N=ir(),V=a(N),w=t(a(V),2),K=a(w);K.__click=()=>Qa(s(f),"gym_sessions");var q=t(K,2);q.__click=F;var E=a(q);{var I=_=>{var h=$i();Aa(),r(_,h)},L=_=>{var h=ka("‚òÅÔ∏è Fetch Data");r(_,h)};d(E,_=>{s(S)?_(I):_(L,!1)})}e(q),e(w),e(V);var Q=t(V,2);{var H=_=>{var h=er(),A=a(h,!0);e(h),u(()=>l(A,s(D))),ia(3,h,()=>na),r(_,h)};d(Q,_=>{s(D)&&_(H)})}var re=t(Q,2);ji(re,{onFilterParamsChange:J});var de=t(re,2),le=a(de);De(le,17,()=>s(f).slice(0,s(G)),_=>_.id,(_,h)=>{Qi(_,{get session(){return s(h)},onDelete:F})});var k=t(le,2);{var P=_=>{var h=sr(),A=t(a(h),2);{var o=c=>{var b=ar();r(c,b)};d(A,c=>{s(m).length>0&&c(o)})}e(h),r(_,h)};d(k,_=>{s(f).length===0&&_(P)})}var Y=t(k,2);{var Z=_=>{var h=tr(),A=a(h);A.__click=ie;var o=a(A);e(A),e(h),u(()=>l(o,`Load More (${s(f).length-s(G)} remaining)`)),r(_,h)};d(Y,_=>{s(G)<s(f).length&&_(Z)})}e(de),e(N),u(()=>q.disabled=s(S)),r(_e,N),Qe()}Ye(["click"]);var nr=n('<div class="load-summary svelte-1tiisng"><div class="load-badge finger svelte-1tiisng"> </div> <div class="load-badge shoulder svelte-1tiisng"> </div> <div class="load-badge forearm svelte-1tiisng"> </div></div>'),lr=n('<div class="metric svelte-1tiisng"><span class="label svelte-1tiisng">Open Grip</span> <div class="bar-container svelte-1tiisng"><div class="bar-fill svelte-1tiisng"></div></div> <span class="score svelte-1tiisng"> </span></div>'),vr=n('<div class="metric svelte-1tiisng"><span class="label svelte-1tiisng">Crimp Grip</span> <div class="bar-container svelte-1tiisng"><div class="bar-fill svelte-1tiisng"></div></div> <span class="score svelte-1tiisng"> </span></div>'),or=n('<div class="metric svelte-1tiisng"><span class="label svelte-1tiisng">Pinch Grip</span> <div class="bar-container svelte-1tiisng"><div class="bar-fill svelte-1tiisng"></div></div> <span class="score svelte-1tiisng"> </span></div>'),dr=n('<div class="metric svelte-1tiisng"><span class="label svelte-1tiisng">Sloper Grip</span> <div class="bar-container svelte-1tiisng"><div class="bar-fill svelte-1tiisng"></div></div> <span class="score svelte-1tiisng"> </span></div>'),cr=n('<div class="metric svelte-1tiisng"><span class="label svelte-1tiisng">Jug Grip</span> <div class="bar-container svelte-1tiisng"><div class="bar-fill svelte-1tiisng"></div></div> <span class="score svelte-1tiisng"> </span></div>'),_r=n('<div class="metrics-container svelte-1tiisng"><div class="metric svelte-1tiisng"><span class="label svelte-1tiisng">Finger Load</span> <div class="bar-container svelte-1tiisng"><div class="bar-fill svelte-1tiisng"></div></div> <span class="score svelte-1tiisng"> </span></div> <div class="metric svelte-1tiisng"><span class="label svelte-1tiisng">Shoulder Load</span> <div class="bar-container svelte-1tiisng"><div class="bar-fill svelte-1tiisng"></div></div> <span class="score svelte-1tiisng"> </span></div> <div class="metric svelte-1tiisng"><span class="label svelte-1tiisng">Forearm Load</span> <div class="bar-container svelte-1tiisng"><div class="bar-fill svelte-1tiisng"></div></div> <span class="score svelte-1tiisng"> </span></div> <!> <!> <!> <!> <!></div>'),gr=n('<span class="set-tag svelte-1tiisng"> <span class="x svelte-1tiisng">x</span> </span>'),ur=n('<div class="ex-notes svelte-1tiisng"> </div>'),fr=n('<div class="exercise-item svelte-1tiisng"><div class="ex-header svelte-1tiisng"><div class="ex-title-group svelte-1tiisng"><span class="ex-name svelte-1tiisng"> </span> <span class="ex-grip svelte-1tiisng"> </span></div></div> <div class="ex-sets svelte-1tiisng"></div> <!></div>'),pr=n('<div class="card-body svelte-1tiisng"><!> <div class="exercises-list svelte-1tiisng"></div></div>'),mr=n('<div><div class="card-header svelte-1tiisng" role="button" tabindex="0"><div class="header-main svelte-1tiisng"><span class="session-date svelte-1tiisng"> <span class="time-tag svelte-1tiisng"> </span></span> <span class="meta svelte-1tiisng"><!> </span> <!></div> <div class="header-status svelte-1tiisng"><span>‚óè</span> <button class="btn-icon edit-session svelte-1tiisng" title="Edit Session">‚úèÔ∏è</button> <button class="btn-icon delete-btn svelte-1tiisng" title="Delete Session">üóëÔ∏è</button> <span class="chevron svelte-1tiisng"> </span></div></div> <!></div> <!> <!>',1);function hr(_e,i){Ke(i,!0);let m=M(!1),f=M(!1),S=M(!1);function D(){v(m,!s(m))}function g(){v(f,!0)}function G(){v(S,!0)}function p(){v(S,!1)}async function F(){v(S,!1),await Wa()}async function J(){try{const T=await _s(i.session.id);T.ok?(v(f,!1),i.onDelete()):(console.error("Failed to delete session:",T.error),alert("Failed to delete session"))}catch(T){console.error("Exception deleting session:",T),alert("Error deleting session")}}function R(T){return T.exercises.reduce(($,pe)=>$+pe.details.length,0)}var ie=mr(),N=Be(ie);let V;var w=a(N);w.__click=D,w.__keydown=T=>T.key==="Enter"&&D();var K=a(w),q=a(K),E=a(q),I=t(E),L=a(I,!0);e(I),e(q);var Q=t(q,2),H=a(Q);{var re=T=>{var $=ka();u(()=>l($,`${i.session.location??""} ¬∑`)),r(T,$)};d(H,T=>{i.session.location&&i.session.location!=="N/A"&&i.session.location!=="Home"&&T(re)})}var de=t(H);e(Q);var le=t(Q,2);{var k=T=>{var $=nr(),pe=a($),Te=a(pe,!0);e(pe);var ke=t(pe,2),Fe=a(ke,!0);e(ke);var ee=t(ke,2),ae=a(ee,!0);e(ee),e($),u(()=>{Ue(pe,"title",`Finger Load: ${i.session.fingerLoad??""}`),l(Te,i.session.fingerLoad),Ue(ke,"title",`Shoulder Load: ${i.session.shoulderLoad??""}`),l(Fe,i.session.shoulderLoad||"-"),Ue(ee,"title",`Forearm Load: ${i.session.forearmLoad??""}`),l(ae,i.session.forearmLoad||"-")}),r(T,$)};d(le,T=>{i.session.fingerLoad&&T(k)})}e(K);var P=t(K,2),Y=a(P);let Z;var _=t(Y,2);_.__click=T=>{T.stopPropagation(),G()};var h=t(_,2);h.__click=T=>{T.stopPropagation(),g()};var A=t(h,2),o=a(A,!0);e(A),e(P),e(w);var c=t(w,2);{var b=T=>{var $=pr(),pe=a($);{var Te=Fe=>{var ee=_r(),ae=a(ee),ye=t(a(ae),2),Pe=a(ye);e(ye);var Ie=t(ye,2),ue=a(Ie);e(Ie),e(ae);var me=t(ae,2),he=t(a(me),2),Ee=a(he);e(he);var Se=t(he,2),Ge=a(Se);e(Se),e(me);var Ce=t(me,2),U=t(a(Ce),2),ne=a(U);e(U);var x=t(U,2),ve=a(x);e(x),e(Ce);var C=t(Ce,2);{var X=we=>{var Le=lr(),ze=t(a(Le),2),Je=a(ze);e(ze);var Ne=t(ze,2),We=a(Ne);e(Ne),e(Le),u(()=>{Me(Je,`width: ${i.session.openGrip/5*100}%`),l(We,`${i.session.openGrip??""}/5`)}),r(we,Le)};d(C,we=>{i.session.openGrip&&we(X)})}var oe=t(C,2);{var xe=we=>{var Le=vr(),ze=t(a(Le),2),Je=a(ze);e(ze);var Ne=t(ze,2),We=a(Ne);e(Ne),e(Le),u(()=>{Me(Je,`width: ${i.session.crimpGrip/5*100}%`),l(We,`${i.session.crimpGrip??""}/5`)}),r(we,Le)};d(oe,we=>{i.session.crimpGrip&&we(xe)})}var O=t(oe,2);{var se=we=>{var Le=or(),ze=t(a(Le),2),Je=a(ze);e(ze);var Ne=t(ze,2),We=a(Ne);e(Ne),e(Le),u(()=>{Me(Je,`width: ${i.session.pinchGrip/5*100}%`),l(We,`${i.session.pinchGrip??""}/5`)}),r(we,Le)};d(O,we=>{i.session.pinchGrip&&we(se)})}var be=t(O,2);{var je=we=>{var Le=dr(),ze=t(a(Le),2),Je=a(ze);e(ze);var Ne=t(ze,2),We=a(Ne);e(Ne),e(Le),u(()=>{Me(Je,`width: ${i.session.sloperGrip/5*100}%`),l(We,`${i.session.sloperGrip??""}/5`)}),r(we,Le)};d(be,we=>{i.session.sloperGrip&&we(je)})}var Ae=t(be,2);{var la=we=>{var Le=cr(),ze=t(a(Le),2),Je=a(ze);e(ze);var Ne=t(ze,2),We=a(Ne);e(Ne),e(Le),u(()=>{Me(Je,`width: ${i.session.jugGrip/5*100}%`),l(We,`${i.session.jugGrip??""}/5`)}),r(we,Le)};d(Ae,we=>{i.session.jugGrip&&we(la)})}e(ee),u(()=>{Me(Pe,`width: ${(i.session.fingerLoad||0)/5*100}%`),l(ue,`${i.session.fingerLoad??""}/5`),Me(Ee,`width: ${(i.session.shoulderLoad||0)/5*100}%`),l(Ge,`${(i.session.shoulderLoad||0)??""}/5`),Me(ne,`width: ${(i.session.forearmLoad||0)/5*100}%`),l(ve,`${(i.session.forearmLoad||0)??""}/5`)}),r(Fe,ee)};d(pe,Fe=>{i.session.fingerLoad&&Fe(Te)})}var ke=t(pe,2);De(ke,21,()=>i.session.exercises||[],Oe,(Fe,ee)=>{var ae=fr(),ye=a(ae),Pe=a(ye),Ie=a(Pe),ue=a(Ie,!0);e(Ie);var me=t(Ie,2),he=a(me,!0);e(me),e(Pe),e(ye);var Ee=t(ye,2);De(Ee,21,()=>s(ee).details,Oe,(Ce,U)=>{var ne=gr(),x=a(ne),ve=t(x,2);e(ne),u(()=>{l(x,`${s(U).weight>0?`+${s(U).weight}kg`:"BW"} `),l(ve,` ${s(U).reps??""}s/reps`)}),r(Ce,ne)}),e(Ee);var Se=t(Ee,2);{var Ge=Ce=>{var U=ur(),ne=a(U);e(U),u(()=>l(ne,`"${s(ee).notes??""}"`)),r(Ce,U)};d(Se,Ce=>{s(ee).notes&&Ce(Ge)})}e(ae),u(()=>{l(ue,s(ee).name),l(he,s(ee).gripType)}),r(Fe,ae)}),e(ke),e($),ia(3,$,()=>na,()=>({duration:150})),r(T,$)};d(c,T=>{s(m)&&T(b)})}e(N);var z=t(N,2);Ya(z,{get isOpen(){return s(f)},title:"Delete Fingerboard Session",message:"Are you sure you want to delete this session? This cannot be undone.",onConfirm:J,onCancel:()=>v(f,!1)});var ge=t(z,2);Za(ge,{get isOpen(){return s(S)},activityType:"fingerboarding",get initialData(){return i.session},onClose:p,onSaved:F}),u((T,$)=>{V=ta(N,1,"session-card svelte-1tiisng",null,V,{expanded:s(m)}),l(E,`${T??""} `),l(L,i.session.time||"12:00"),l(de,` ${i.session.exercises.length??""} Exercises ¬∑ ${$??""} Sets`),Z=ta(Y,1,"sync-dot svelte-1tiisng",null,Z,{synced:i.session.syncStatus==="synced"}),Ue(Y,"title",i.session.syncStatus==="synced"?"Synced":"Local"),l(o,s(m)?"‚ñ≤":"‚ñº")},[()=>new Date(i.session.date).toLocaleDateString(void 0,{weekday:"short",month:"short",day:"numeric",year:"numeric"}),()=>R(i.session)]),r(_e,ie),Qe()}Ye(["click","keydown"]);var br=n('<span class="spinner svelte-1szs0u9"></span> Fetching...',1),yr=n('<div class="loading svelte-1szs0u9">Loading sessions...</div>'),xr=n('<div class="empty-state svelte-1szs0u9"><!></div>'),wr=n('<div class="load-more-container svelte-1szs0u9"><button class="load-more-btn svelte-1szs0u9"> </button></div>'),kr=n('<div class="timeline svelte-1szs0u9"><!> <!></div>'),Sr=n('<div class="view-content svelte-1szs0u9"><div class="header svelte-1szs0u9"><h3 class="svelte-1szs0u9">ü§è Fingerboarding Log</h3> <button class="fetch-btn svelte-1szs0u9" title="Fetch data from cloud"><!></button></div> <div class="filters svelte-1szs0u9"><div class="filter-group svelte-1szs0u9"><label for="start-date" class="svelte-1szs0u9">From</label> <input type="date" id="start-date" class="svelte-1szs0u9"/></div> <div class="filter-group svelte-1szs0u9"><label for="end-date" class="svelte-1szs0u9">To</label> <input type="date" id="end-date" class="svelte-1szs0u9"/></div></div> <!></div>');function qr(_e,i){Ke(i,!0);let m=M(_a([])),f=M(!0),S=M(""),D=M(""),g=M(20);const G=20;is(()=>{s(S),s(D),v(g,G)});async function p(){v(f,!0);try{const k=await gs();k.ok&&k.data&&v(m,k.data.map(P=>({...P,activityType:"fingerboarding",syncStatus:"synced"})).sort((P,Y)=>new Date(Y.date).getTime()-new Date(P.date).getTime()),!0)}catch(k){console.error("Failed to fetch sessions",k)}finally{v(f,!1)}}p();let F=Xe(()=>s(m).filter(k=>!(s(S)&&new Date(k.date)<new Date(s(S))||s(D)&&new Date(k.date)>new Date(s(D)))));function J(){v(g,s(g)+G)}function R(){p()}var ie=Sr(),N=a(ie),V=t(a(N),2);V.__click=p;var w=a(V);{var K=k=>{var P=br();Aa(),r(k,P)},q=k=>{var P=ka("‚òÅÔ∏è Fetch Data");r(k,P)};d(w,k=>{s(f)?k(K):k(q,!1)})}e(V),e(N);var E=t(N,2),I=a(E),L=t(a(I),2);aa(L),e(I);var Q=t(I,2),H=t(a(Q),2);aa(H),e(Q),e(E);var re=t(E,2);{var de=k=>{var P=yr();r(k,P)},le=k=>{var P=Re(),Y=Be(P);{var Z=h=>{var A=xr(),o=a(A);{var c=z=>{var ge=ka("No sessions match filter.");r(z,ge)},b=z=>{var ge=ka("No fingerboarding sessions logged yet.");r(z,ge)};d(o,z=>{s(m).length>0?z(c):z(b,!1)})}e(A),r(h,A)},_=h=>{var A=kr(),o=a(A);De(o,17,()=>s(F).slice(0,s(g)),Oe,(z,ge)=>{hr(z,{get session(){return s(ge)},onDelete:R})});var c=t(o,2);{var b=z=>{var ge=wr(),T=a(ge);T.__click=J;var $=a(T);e(T),e(ge),u(()=>l($,`Load More (${s(F).length-s(g)} remaining)`)),r(z,ge)};d(c,z=>{s(g)<s(F).length&&z(b)})}e(A),r(h,A)};d(Y,h=>{s(F).length===0?h(Z):h(_,!1)},!0)}r(k,P)};d(re,k=>{s(f)&&s(m).length===0?k(de):k(le,!1)})}e(ie),u(()=>V.disabled=s(f)),sa(L,()=>s(S),k=>v(S,k)),sa(H,()=>s(D),k=>v(D,k)),r(_e,ie),Qe()}Ye(["click"]);var Dr=n('<div class="notes-section svelte-5f8qag"><div class="notes-display svelte-5f8qag"><span class="note-icon svelte-5f8qag">üìù</span> <p class="svelte-5f8qag"> </p></div></div>'),Tr=n('<span class="position-badge svelte-5f8qag"> </span>'),Cr=n('<span class="climb-attempts svelte-5f8qag"> </span>'),Fr=n('<div><span class="climb-name svelte-5f8qag"> </span> <span class="climb-status"> </span> <!></div>'),Er=n('<div class="climbs-grid svelte-5f8qag"></div>'),Lr=n('<div class="round-card svelte-5f8qag"><div class="round-header svelte-5f8qag"><h4 class="svelte-5f8qag"> </h4> <!></div> <!></div>'),zr=n('<div class="card-body svelte-5f8qag"><div class="loads-row svelte-5f8qag"><div class="load-item svelte-5f8qag"><span class="label svelte-5f8qag">Fingers</span> <div class="bar-container svelte-5f8qag"><div class="bar svelte-5f8qag"></div></div></div> <div class="load-item svelte-5f8qag"><span class="label svelte-5f8qag">Shoulders</span> <div class="bar-container svelte-5f8qag"><div class="bar svelte-5f8qag"></div></div></div> <div class="load-item svelte-5f8qag"><span class="label svelte-5f8qag">Forearms</span> <div class="bar-container svelte-5f8qag"><div class="bar svelte-5f8qag"></div></div></div></div> <!> <div class="rounds-list svelte-5f8qag"></div></div>'),Gr=n('<div><div class="card-header svelte-5f8qag" role="button" tabindex="0"><div class="header-main svelte-5f8qag"><span class="session-date svelte-5f8qag"> <span class="type-tag svelte-5f8qag"> </span></span> <div class="venue-row svelte-5f8qag"><span class="venue"> </span> <span class="result-summary svelte-5f8qag"> </span></div></div> <div class="header-status svelte-5f8qag"><span>‚óè</span> <button class="btn-icon edit-session svelte-5f8qag" title="Edit Session">‚úèÔ∏è</button> <button class="btn-icon delete-btn svelte-5f8qag" title="Delete Session">üóëÔ∏è</button> <span class="chevron svelte-5f8qag"> </span></div></div> <!></div> <!> <!>',1);function jr(_e,i){Ke(i,!0);let m=M(!1),f=M(!1),S=M(!1);function D(){v(m,!s(m))}function g(){v(f,!0)}function G(){v(S,!0)}function p(){v(S,!1)}async function F(){v(S,!1),await Wa()}async function J(){try{const T=await us(i.session.id);T.ok?(v(f,!1),await Wa()):(console.error("Failed to delete session:",T.error),alert("Failed to delete session"))}catch(T){console.error("Exception deleting session:",T),alert("Error deleting session")}}function R(T){if(!T.rounds||T.rounds.length===0)return"No rounds";const $=T.rounds[T.rounds.length-1];if($.position)return`#${$.position} ${$.name}`;if($.climbs){const pe=$.climbs.filter(ke=>ke.status==="Top"||ke.status==="Flash").length,Te=$.climbs.filter(ke=>ke.status==="Zone").length;return`${T.rounds.length} Rnds ¬∑ Final: ${pe}T ${Te+pe}Z`}return $.name}function ie(T){switch(T){case"Flash":return"status-flash";case"Top":return"status-top";case"Zone":return"status-zone";default:return"status-attempt"}}var N=Gr(),V=Be(N);let w;var K=a(V);K.__click=D,K.__keydown=T=>T.key==="Enter"&&D();var q=a(K),E=a(q),I=a(E),L=t(I),Q=a(L,!0);e(L),e(E);var H=t(E,2),re=a(H),de=a(re,!0);e(re);var le=t(re,2),k=a(le,!0);e(le),e(H),e(q);var P=t(q,2),Y=a(P);let Z;var _=t(Y,2);_.__click=T=>{T.stopPropagation(),G()};var h=t(_,2);h.__click=T=>{T.stopPropagation(),g()};var A=t(h,2),o=a(A,!0);e(A),e(P),e(K);var c=t(K,2);{var b=T=>{var $=zr(),pe=a($),Te=a(pe),ke=t(a(Te),2),Fe=a(ke);e(ke),e(Te);var ee=t(Te,2),ae=t(a(ee),2),ye=a(ae);e(ae),e(ee);var Pe=t(ee,2),Ie=t(a(Pe),2),ue=a(Ie);e(Ie),e(Pe),e(pe);var me=t(pe,2);{var he=Se=>{var Ge=Dr(),Ce=a(Ge),U=t(a(Ce),2),ne=a(U,!0);e(U),e(Ce),e(Ge),u(()=>l(ne,i.session.notes)),r(Se,Ge)};d(me,Se=>{i.session.notes&&Se(he)})}var Ee=t(me,2);De(Ee,21,()=>i.session.rounds,Oe,(Se,Ge)=>{var Ce=Lr(),U=a(Ce),ne=a(U),x=a(ne,!0);e(ne);var ve=t(ne,2);{var C=xe=>{var O=Tr(),se=a(O);e(O),u(()=>l(se,`#${s(Ge).position??""}`)),r(xe,O)};d(ve,xe=>{s(Ge).position&&xe(C)})}e(U);var X=t(U,2);{var oe=xe=>{var O=Er();De(O,21,()=>s(Ge).climbs,Oe,(se,be)=>{var je=Fr(),Ae=a(je),la=a(Ae,!0);e(Ae);var we=t(Ae,2),Le=a(we,!0);e(we);var ze=t(we,2);{var Je=Ne=>{var We=Cr(),ga=a(We);e(We),u(()=>l(ga,`(${s(be).attemptCount??""})`)),r(Ne,We)};d(ze,Ne=>{s(be).attemptCount>1&&Ne(Je)})}e(je),u(Ne=>{ta(je,1,`climb-chip ${Ne??""}`,"svelte-5f8qag"),l(la,s(be).name),l(Le,s(be).status)},[()=>ie(s(be).status)]),r(se,je)}),e(O),r(xe,O)};d(X,xe=>{s(Ge).climbs&&s(Ge).climbs.length>0&&xe(oe)})}e(Ce),u(()=>l(x,s(Ge).name)),r(Se,Ce)}),e(Ee),e($),u(()=>{Me(Fe,`width: ${(i.session.fingerLoad||0)*20}%`),Me(ye,`width: ${(i.session.shoulderLoad||0)*20}%`),Me(ue,`width: ${(i.session.forearmLoad||0)*20}%`)}),ia(3,$,()=>na,()=>({duration:150})),r(T,$)};d(c,T=>{s(m)&&T(b)})}e(V);var z=t(V,2);Ya(z,{get isOpen(){return s(f)},title:"Delete Competition Session",message:"Are you sure you want to delete this session? This cannot be undone.",onConfirm:J,onCancel:()=>v(f,!1)});var ge=t(z,2);Za(ge,{get isOpen(){return s(S)},activityType:"competition",get initialData(){return i.session},onClose:p,onSaved:F}),u((T,$)=>{w=ta(V,1,"session-card svelte-5f8qag",null,w,{expanded:s(m)}),l(I,`${T??""} `),l(Q,i.session.type),l(de,i.session.venue==="Other"?i.session.customVenue:i.session.venue),l(k,$),Z=ta(Y,1,"sync-dot svelte-5f8qag",null,Z,{synced:i.session.syncStatus==="synced"}),Ue(Y,"title",i.session.syncStatus==="synced"?"Synced":"Local"),l(o,s(m)?"‚ñ≤":"‚ñº")},[()=>new Date(i.session.date).toLocaleDateString(void 0,{weekday:"short",month:"short",day:"numeric",year:"numeric"}),()=>R(i.session)]),r(_e,N),Qe()}Ye(["click","keydown"]);var Mr=n('<span class="spinner svelte-xyvf5r"></span> Fetching...',1),Or=n('<div class="loading svelte-xyvf5r">Loading sessions...</div>'),Nr=n('<div class="empty-state svelte-xyvf5r">No competitions logged yet.</div>'),Pr=n('<div class="load-more-container svelte-xyvf5r"><button class="load-more-btn svelte-xyvf5r"> </button></div>'),Ar=n('<div class="timeline svelte-xyvf5r"><!> <!></div>'),Br=n('<div class="view-content svelte-xyvf5r"><div class="header svelte-xyvf5r"><h3 class="svelte-xyvf5r">üèÜ Competition Log</h3> <button class="fetch-btn svelte-xyvf5r" title="Fetch data from cloud"><!></button></div> <!></div>');function Ir(_e,i){Ke(i,!0);let m=M(_a([])),f=M(!0),S=M(20);const D=20;async function g(){v(f,!0),v(S,D);try{const q=await fs();q.ok&&q.data&&v(m,q.data.map(E=>({...E,activityType:"competition",syncStatus:"synced",type:E.type,rounds:E.rounds.map(I=>({...I,climbs:I.climbs?.map(L=>({...L,status:L.status}))}))})).sort((E,I)=>new Date(I.date).getTime()-new Date(E.date).getTime()),!0)}catch(q){console.error("Failed to fetch sessions",q)}finally{v(f,!1)}}g();function G(){v(S,s(S)+D)}var p=Br(),F=a(p),J=t(a(F),2);J.__click=g;var R=a(J);{var ie=q=>{var E=Mr();Aa(),r(q,E)},N=q=>{var E=ka("‚òÅÔ∏è Fetch Data");r(q,E)};d(R,q=>{s(f)?q(ie):q(N,!1)})}e(J),e(F);var V=t(F,2);{var w=q=>{var E=Or();r(q,E)},K=q=>{var E=Re(),I=Be(E);{var L=H=>{var re=Nr();r(H,re)},Q=H=>{var re=Ar(),de=a(re);De(de,17,()=>s(m).slice(0,s(S)),Oe,(P,Y)=>{jr(P,{get session(){return s(Y)}})});var le=t(de,2);{var k=P=>{var Y=Pr(),Z=a(Y);Z.__click=G;var _=a(Z);e(Z),e(Y),u(()=>l(_,`Load More (${s(m).length-s(S)} remaining)`)),r(P,Y)};d(le,P=>{s(S)<s(m).length&&P(k)})}e(re),r(H,re)};d(I,H=>{s(m).length===0?H(L):H(Q,!1)},!0)}r(q,E)};d(V,q=>{s(f)&&s(m).length===0?q(w):q(K,!1)})}e(p),u(()=>J.disabled=s(f)),r(_e,p),Qe()}Ye(["click"]);var Rr=n("<option> </option>"),Vr=n('<div class="view-container svelte-108px9u"><!></div>'),Ur=n('<div class="page svelte-108px9u"><div class="page-header svelte-108px9u"><div><h1 class="svelte-108px9u">üìä View Data</h1> <p class="subtitle svelte-108px9u">Browse your training history</p></div></div> <div class="content-card svelte-108px9u"><div class="form-group svelte-108px9u"><label for="activity-type" class="svelte-108px9u">Activity Type</label> <select id="activity-type" class="svelte-108px9u"><option disabled>Select an activity...</option><!></select></div> <!></div></div>');function an(_e){const i=[{value:"indoor_climb",label:"Indoor Climb",icon:"üßó"},{value:"outdoor_climb",label:"Outdoor Climb",icon:"‚õ∞Ô∏è"},{value:"gym_session",label:"Gym Session",icon:"üèãÔ∏è"},{value:"fingerboarding",label:"Fingerboarding",icon:"ü§è"},{value:"competition",label:"Competition",icon:"üèÜ"}];let m=M("");var f=Ur(),S=t(a(f),2),D=a(S),g=t(a(D),2),G=a(g);G.value=G.__value="";var p=t(G);De(p,17,()=>i,R=>R.value,(R,ie)=>{var N=Rr(),V=a(N);e(N);var w={};u(()=>{l(V,`${s(ie).icon??""} ${s(ie).label??""}`),w!==(w=s(ie).value)&&(N.value=(N.__value=s(ie).value)??"")}),r(R,N)}),e(g),e(D);var F=t(D,2);{var J=R=>{var ie=Vr(),N=a(ie);{var V=K=>{Ct(K,{})},w=K=>{var q=Re(),E=Be(q);{var I=Q=>{Fi(Q,{})},L=Q=>{var H=Re(),re=Be(H);{var de=k=>{rr(k,{})},le=k=>{var P=Re(),Y=Be(P);{var Z=h=>{qr(h,{})},_=h=>{var A=Re(),o=Be(A);{var c=b=>{Ir(b,{})};d(o,b=>{s(m)==="competition"&&b(c)},!0)}r(h,A)};d(Y,h=>{s(m)==="fingerboarding"?h(Z):h(_,!1)},!0)}r(k,P)};d(re,k=>{s(m)==="gym_session"?k(de):k(le,!1)},!0)}r(Q,H)};d(E,Q=>{s(m)==="outdoor_climb"?Q(I):Q(L,!1)},!0)}r(K,q)};d(N,K=>{s(m)==="indoor_climb"?K(V):K(w,!1)})}e(ie),r(R,ie)};d(F,R=>{s(m)&&R(J)})}e(S),e(f),wa(g,()=>s(m),R=>v(m,R)),r(_e,f)}export{an as component};
