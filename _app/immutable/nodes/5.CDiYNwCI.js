import{f as v,a as i,c as Qe,t as Ca}from"../chunks/CSQvsE9s.js";import{p as _a,c as t,s,i as e,aV as k,r as a,t as u,a as ua,x as l,b0 as Ja,f as Me,aG as Fa,aW as ca,w as ma,o as Ua,b8 as Ha,d as Qa}from"../chunks/DGPNV_z9.js";import{d as pa,s as d}from"../chunks/DSMXtqZM.js";import{i as c}from"../chunks/D9GEZg6r.js";import{s as ea,r as Re,e as De,i as Fe,b as Be,c as Za}from"../chunks/_iMURHzE.js";import{t as va,k as fa,i as Ka,u as et,s as Aa,l as at,g as tt,b as st,m as rt,n as it,D as Pa,E as lt,o as vt,p as nt,q as ot,d as dt,r as ct}from"../chunks/CuiA2Y8F.js";import{c as Sa,f as ia,n as Ia,m as Xa,b as Ma,o as Ea,p as Na,q as Wa,t as Ba,v as Va,w as pt}from"../chunks/Cn4iyW3Z.js";import{s as la}from"../chunks/Ct8JfZaa.js";import{p as Ra}from"../chunks/Dd0awD9h.js";var _t=v('<span class="chevron svelte-12crvy">‚ñ≤</span>'),ut=v('<span class="chevron svelte-12crvy">‚ñº</span>'),ft=v('<div class="input-with-action svelte-12crvy"><input type="text" id="location-manual" placeholder="Custom location..." class="flat-left svelte-12crvy"/> <button type="button" class="action-btn flat-right svelte-12crvy" title="Back to list">‚úï</button></div>'),gt=v("<option> </option>"),mt=v('<select id="location-filter" class="svelte-12crvy"><option>Any Location</option><!></select>'),ht=v("<option> </option>"),bt=v("<option> </option>"),yt=v('<div class="filter-body svelte-12crvy"><div class="filter-grid svelte-12crvy"><div class="filter-item svelte-12crvy"><label for="start-date" class="svelte-12crvy">Start Date</label> <input type="date" id="start-date" class="svelte-12crvy"/></div> <div class="filter-item svelte-12crvy"><label for="end-date" class="svelte-12crvy">End Date</label> <input type="date" id="end-date" class="svelte-12crvy"/></div> <div class="filter-item svelte-12crvy"><label for="location-filter" class="svelte-12crvy">Location</label> <!></div> <div class="filter-item svelte-12crvy"><label for="climbing-type-filter" class="svelte-12crvy">Climb Type</label> <select id="climbing-type-filter" class="svelte-12crvy"><option>Any Type</option><!></select></div> <div class="filter-item svelte-12crvy"><label for="session-type-filter" class="svelte-12crvy">Session Type</label> <select id="session-type-filter" class="svelte-12crvy"><option>Any Type</option><!></select></div> <div class="filter-item svelte-12crvy"><label for="grade-filter" class="svelte-12crvy">Grade (Exact)</label> <input type="text" id="grade-filter" placeholder="e.g. V4" class="svelte-12crvy"/></div></div> <div class="filter-actions svelte-12crvy"><button class="reset-btn svelte-12crvy">Reset Filters</button></div></div>'),xt=v('<div class="filter-container svelte-12crvy"><button class="filter-header svelte-12crvy"><div class="header-content svelte-12crvy"><span class="icon svelte-12crvy">üîç</span> <span class="title svelte-12crvy">Filters</span> <!></div></button> <!></div>');function wt(Te,p){_a(p,!0);const r=["Rockstar Swindon","Flashpoint Swindon","Flashpoint Bristol","Redpoint Bristol","TCH Bristol","Other"],g=["Bouldering","Sport","Mixed"],C=["Projecting","Onsighting","Campusing","Repeaters"];let D=k(!1),_=k(""),z=k(""),x=k(""),R=k(""),K=k(""),ne=k(""),ce=k(!1);function te(){l(D,!e(D))}function Q(){l(_,""),l(z,""),l(x,""),l(R,""),l(ce,!1),l(K,""),l(ne,""),$()}function $(){p.onFilterParamsChange({startDate:e(_),endDate:e(z),location:e(x),climbingType:e(R),sessionType:e(K),grade:e(ne)})}function oe(){e(x)==="Other"?(l(ce,!0),l(x,"")):$()}function pe(){l(ce,!1),l(x,""),$()}var re=xt(),U=t(re);U.__click=te;var ie=t(U),ye=s(t(ie),4);{var he=h=>{var F=_t();i(h,F)},ee=h=>{var F=ut();i(h,F)};c(ye,h=>{e(D)?h(he):h(ee,!1)})}a(ie),a(U);var j=s(U,2);{var m=h=>{var F=yt(),M=t(F),P=t(M),H=s(t(P),2);Re(H),H.__change=$,a(P);var J=s(P,2),b=s(t(J),2);Re(b),b.__change=$,a(J);var G=s(J,2),y=s(t(G),2);{var n=q=>{var w=ft(),O=t(w);Re(O),O.__input=$;var V=s(O,2);V.__click=pe,a(w),Be(O,()=>e(x),f=>l(x,f)),i(q,w)},o=q=>{var w=mt();w.__change=oe;var O=t(w);O.value=O.__value="";var V=s(O);De(V,17,()=>r,Fe,(f,I)=>{var fe=gt(),X=t(fe,!0);a(fe);var ae={};u(()=>{d(X,e(I)),ae!==(ae=e(I))&&(fe.value=(fe.__value=e(I))??"")}),i(f,fe)}),a(w),Sa(w,()=>e(x),f=>l(x,f)),i(q,w)};c(y,q=>{e(ce)?q(n):q(o,!1)})}a(G);var T=s(G,2),B=s(t(T),2);B.__change=$;var Z=t(B);Z.value=Z.__value="";var L=s(Z);De(L,17,()=>g,Fe,(q,w)=>{var O=ht(),V=t(O,!0);a(O);var f={};u(()=>{d(V,e(w)),f!==(f=e(w))&&(O.value=(O.__value=e(w))??"")}),i(q,O)}),a(B),a(T);var de=s(T,2),ve=s(t(de),2);ve.__change=$;var xe=t(ve);xe.value=xe.__value="";var E=s(xe);De(E,17,()=>C,Fe,(q,w)=>{var O=bt(),V=t(O,!0);a(O);var f={};u(()=>{d(V,e(w)),f!==(f=e(w))&&(O.value=(O.__value=e(w))??"")}),i(q,O)}),a(ve),a(de);var N=s(de,2),ue=s(t(N),2);Re(ue),ue.__input=$,a(N),a(M);var be=s(M,2),we=t(be);we.__click=Q,a(be),a(F),Be(H,()=>e(_),q=>l(_,q)),Be(b,()=>e(z),q=>l(z,q)),Sa(B,()=>e(R),q=>l(R,q)),Sa(ve,()=>e(K),q=>l(K,q)),Be(ue,()=>e(ne),q=>l(ne,q)),va(3,F,()=>fa,()=>({duration:200})),i(h,F)};c(j,h=>{e(D)&&h(m)})}a(re),u(()=>ea(U,"aria-expanded",e(D))),i(Te,re),ua()}pa(["click","change","input"]);var St=v('<label class="type-toggle svelte-yz0xxt"><input type="checkbox"/> <span>Sport?</span></label>'),kt=v("<option> </option>"),Dt=v('<div class="edit-form svelte-yz0xxt"><div class="edit-row main svelte-yz0xxt"><input type="text" class="edit-input grade svelte-yz0xxt" placeholder="Grade"/> <input type="text" class="edit-input name svelte-yz0xxt" placeholder="Route Name"/> <!></div> <div class="edit-row meta svelte-yz0xxt"><select class="edit-select svelte-yz0xxt"></select> <div class="attempts-input-wrapper svelte-yz0xxt"><span>#</span> <input type="number" min="1" class="edit-input num svelte-yz0xxt"/></div></div> <div class="edit-row notes svelte-yz0xxt"><textarea class="edit-input notes-area svelte-yz0xxt" placeholder="Notes..."></textarea></div> <div class="edit-actions svelte-yz0xxt"><button class="action-btn cancel svelte-yz0xxt">Cancel</button> <button class="action-btn save svelte-yz0xxt">Save</button></div></div>'),Tt=v('<span class="climb-type-tag svelte-yz0xxt"> </span>'),qt=v('<span class="notes-preview svelte-yz0xxt"> </span>'),zt=v('<span class="wall-tag svelte-yz0xxt"> </span>'),Ct=v('<span class="attempts-count svelte-yz0xxt"> </span>'),Ft=v('<div class="detail-row svelte-yz0xxt"><span class="label svelte-yz0xxt">Notes:</span> <p class="notes svelte-yz0xxt"> </p></div>'),Lt=v('<p class="empty-notes svelte-yz0xxt">No notes for this climb.</p>'),Et=v('<div class="climb-details svelte-yz0xxt"><!> <div class="tags svelte-yz0xxt"><span class="tag type svelte-yz0xxt"> </span> <span class="tag attempt-text svelte-yz0xxt"> </span></div></div>'),Gt=v('<div class="climb-header svelte-yz0xxt" role="button" tabindex="0"><div class="climb-main-info svelte-yz0xxt"><span> </span> <span class="climb-name svelte-yz0xxt"> </span> <!> <!> <!></div> <div class="climb-meta svelte-yz0xxt"><span><span class="icon svelte-yz0xxt"> </span> <!></span> <button class="icon-btn edit-btn svelte-yz0xxt" aria-label="Edit climb" title="Edit climb">‚úé</button> <button class="icon-btn delete-btn svelte-yz0xxt" aria-label="Delete climb" title="Delete climb">üóëÔ∏è</button> <span class="chevron svelte-yz0xxt"> </span></div></div> <!>',1),Ot=v("<div><!></div>");function jt(Te,p){_a(p,!0);let r=Ra(p,"showClimbType",3,!1),g=k(!1),C=k(!1),D=k(""),_=k(""),z=k(""),x=k(1),R=k(""),K=k(!1);function ne(){e(C)||l(g,!e(g))}function ce(j){j.stopPropagation(),p.onDelete()}function te(j){j.stopPropagation(),l(D,p.climb.name,!0),l(_,p.climb.grade,!0),l(z,p.climb.attemptType,!0),l(x,p.climb.attemptsNum,!0),l(R,p.climb.notes,!0),l(K,p.climb.isSport,!0),l(C,!0),l(g,!0)}function Q(j){j.stopPropagation(),l(C,!1)}function $(j){j.stopPropagation();const m={...p.climb,name:e(D),grade:e(_),attemptType:e(z),attemptsNum:e(x),notes:e(R),isSport:e(K)};p.onUpdate(m),l(C,!1)}function oe(){(e(z)==="Flash"||e(z)==="Onsight")&&l(x,1)}const pe={Flash:"‚ö°",Onsight:"üëÅÔ∏è",Redpoint:"üî¥",Dogged:"üõ†Ô∏è",DNF:"‚ùå"},re=["Flash","Onsight","Redpoint","Dogged","DNF"];var U=Ot();let ie;var ye=t(U);{var he=j=>{var m=Dt(),h=t(m),F=t(h);Re(F);var M=s(F,2);Re(M);var P=s(M,2);{var H=L=>{var de=St(),ve=t(de);Re(ve),Fa(2),a(de),Za(ve,()=>e(K),xe=>l(K,xe)),i(L,de)};c(P,L=>{r()&&L(H)})}a(h);var J=s(h,2),b=t(J);b.__change=oe,De(b,21,()=>re,Fe,(L,de)=>{var ve=kt(),xe=t(ve,!0);a(ve);var E={};u(()=>{d(xe,e(de)),E!==(E=e(de))&&(ve.value=(ve.__value=e(de))??"")}),i(L,ve)}),a(b);var G=s(b,2),y=s(t(G),2);Re(y),a(G),a(J);var n=s(J,2),o=t(n);Ja(o),a(n);var T=s(n,2),B=t(T);B.__click=Q;var Z=s(B,2);Z.__click=$,a(T),a(m),u(()=>y.disabled=e(z)==="Flash"||e(z)==="Onsight"),Be(F,()=>e(_),L=>l(_,L)),Be(M,()=>e(D),L=>l(D,L)),Sa(b,()=>e(z),L=>l(z,L)),Be(y,()=>e(x),L=>l(x,L)),Be(o,()=>e(R),L=>l(R,L)),i(j,m)},ee=j=>{var m=Gt(),h=Me(m);h.__click=ne,h.__keydown=V=>(V.key==="Enter"||V.key===" ")&&ne();var F=t(h),M=t(F);let P;var H=t(M,!0);a(M);var J=s(M,2),b=t(J,!0);a(J);var G=s(J,2);{var y=V=>{var f=Tt(),I=t(f,!0);a(f),u(()=>d(I,p.climb.isSport?"Sport":"Boulder")),i(V,f)};c(G,V=>{r()&&V(y)})}var n=s(G,2);{var o=V=>{var f=qt(),I=t(f);a(f),u(()=>d(I,`- ${p.climb.notes??""}`)),i(V,f)};c(n,V=>{!e(g)&&p.climb.notes&&V(o)})}var T=s(n,2);{var B=V=>{var f=zt(),I=t(f,!0);a(f),u(()=>d(I,p.climb.wall)),i(V,f)};c(T,V=>{p.climb.wall&&V(B)})}a(F);var Z=s(F,2),L=t(Z);let de;var ve=t(L),xe=t(ve,!0);a(ve);var E=s(ve,2);{var N=V=>{var f=Ct(),I=t(f,!0);a(f),u(()=>d(I,p.climb.attemptsNum)),i(V,f)};c(E,V=>{p.climb.attemptType!=="Flash"&&p.climb.attemptType!=="Onsight"&&V(N)})}a(L);var ue=s(L,2);ue.__click=te;var be=s(ue,2);be.__click=ce;var we=s(be,2),q=t(we,!0);a(we),a(Z),a(h);var w=s(h,2);{var O=V=>{var f=Et(),I=t(f);{var fe=me=>{var qe=Ft(),ze=s(t(qe),2),Ge=t(ze,!0);a(ze),a(qe),u(()=>d(Ge,p.climb.notes)),i(me,qe)},X=me=>{var qe=Lt();i(me,qe)};c(I,me=>{p.climb.notes?me(fe):me(X,!1)})}var ae=s(I,2),le=t(ae),Ee=t(le,!0);a(le);var _e=s(le,2),ke=t(_e,!0);a(_e),a(ae),a(f),u(()=>{d(Ee,p.climb.isSport?"Sport":"Boulder"),d(ke,p.climb.attemptType)}),va(3,f,()=>fa,()=>({duration:150})),i(V,f)};c(w,V=>{e(g)&&V(O)})}u(()=>{ea(h,"aria-expanded",e(g)),P=la(M,1,"grade-badge svelte-yz0xxt",null,P,{sport:p.climb.isSport}),d(H,p.climb.grade),d(b,p.climb.name||"Unnamed Route"),de=la(L,1,"attempt-type svelte-yz0xxt",null,de,{flash:p.climb.attemptType==="Flash"}),d(xe,pe[p.climb.attemptType]||p.climb.attemptType),d(q,e(g)?"‚ñ≤":"‚ñº")}),i(j,m)};c(ye,j=>{e(C)?j(he):j(ee,!1)})}a(U),u(()=>ie=la(U,1,"climb-entry svelte-yz0xxt",null,ie,{expanded:e(g),editing:e(C)})),i(Te,U),ua()}pa(["change","click","keydown"]);var At=v('<span class="stat svelte-7vqogn"> </span>'),Nt=v('<span class="status-icon pending svelte-7vqogn" title="Waiting to sync">üîÑ</span>'),It=v('<span class="status-icon error svelte-7vqogn" title="Sync error">‚ö†Ô∏è</span>'),Mt=v('<span class="chip svelte-7vqogn"> </span>'),Pt=v('<span class="text-none svelte-7vqogn">None</span>'),Rt=v('<div class="detail-item svelte-7vqogn"><span class="label svelte-7vqogn">Difficulty</span> <span class="value svelte-7vqogn"> </span></div>'),Bt=v('<span class="chip svelte-7vqogn"> </span>'),Vt=v('<span class="text-none svelte-7vqogn">None</span>'),Ut=v('<div class="detail-item svelte-7vqogn"><span class="label svelte-7vqogn">Category</span> <div class="value-chips svelte-7vqogn"><!></div></div>'),Wt=v('<span class="chip svelte-7vqogn"> </span>'),$t=v('<span class="text-none svelte-7vqogn">None</span>'),Ht=v('<div class="detail-item svelte-7vqogn"><span class="label svelte-7vqogn">Focus</span> <div class="value-chips svelte-7vqogn"><!></div></div>'),Jt=v('<span class="chip svelte-7vqogn"> </span>'),Zt=v('<span class="text-none svelte-7vqogn">None</span>'),Kt=v('<div class="detail-item svelte-7vqogn"><span class="label svelte-7vqogn">Energy System</span> <div class="value-chips svelte-7vqogn"><!></div></div>'),Xt=v('<div class="metric svelte-7vqogn"><span class="label svelte-7vqogn">Open Grip</span> <div class="bar-container svelte-7vqogn"><div class="bar-fill svelte-7vqogn"></div></div> <span class="score svelte-7vqogn"> </span></div>'),Yt=v('<div class="metric svelte-7vqogn"><span class="label svelte-7vqogn">Crimp Grip</span> <div class="bar-container svelte-7vqogn"><div class="bar-fill svelte-7vqogn"></div></div> <span class="score svelte-7vqogn"> </span></div>'),Qt=v('<div class="metric svelte-7vqogn"><span class="label svelte-7vqogn">Pinch Grip</span> <div class="bar-container svelte-7vqogn"><div class="bar-fill svelte-7vqogn"></div></div> <span class="score svelte-7vqogn"> </span></div>'),es=v('<div class="metric svelte-7vqogn"><span class="label svelte-7vqogn">Sloper Grip</span> <div class="bar-container svelte-7vqogn"><div class="bar-fill svelte-7vqogn"></div></div> <span class="score svelte-7vqogn"> </span></div>'),as=v('<div class="metric svelte-7vqogn"><span class="label svelte-7vqogn">Jug Grip</span> <div class="bar-container svelte-7vqogn"><div class="bar-fill svelte-7vqogn"></div></div> <span class="score svelte-7vqogn"> </span></div>'),ts=v('<p class="no-climbs svelte-7vqogn">No climbs logged for this session.</p>'),ss=v('<div class="card-body svelte-7vqogn"><div class="details-grid svelte-7vqogn"><div class="detail-item svelte-7vqogn"><span class="label svelte-7vqogn">Training Type</span> <div class="value-chips svelte-7vqogn"><!></div></div> <!> <!> <!> <!></div> <div class="metrics-container svelte-7vqogn"><div class="metric svelte-7vqogn"><span class="label svelte-7vqogn">Finger Load</span> <div class="bar-container svelte-7vqogn"><div class="bar-fill svelte-7vqogn"></div></div> <span class="score svelte-7vqogn"> </span></div> <div class="metric svelte-7vqogn"><span class="label svelte-7vqogn">Shoulder Load</span> <div class="bar-container svelte-7vqogn"><div class="bar-fill svelte-7vqogn"></div></div> <span class="score svelte-7vqogn"> </span></div> <div class="metric svelte-7vqogn"><span class="label svelte-7vqogn">Forearm Load</span> <div class="bar-container svelte-7vqogn"><div class="bar-fill svelte-7vqogn"></div></div> <span class="score svelte-7vqogn"> </span></div> <!> <!> <!> <!> <!></div> <div class="climbs-list svelte-7vqogn"><h4 class="svelte-7vqogn">Climbs</h4> <div class="climbs-container svelte-7vqogn"><!> <!></div></div></div>'),rs=v('<div><div class="card-header svelte-7vqogn" role="button" tabindex="0"><div class="header-main svelte-7vqogn"><div class="date-badge svelte-7vqogn"><span class="day svelte-7vqogn"> </span> <span class="month svelte-7vqogn"> </span></div> <div class="session-info svelte-7vqogn"><div class="session-text svelte-7vqogn"><h3 class="location svelte-7vqogn"> </h3> <div class="session-meta svelte-7vqogn"><span class="type-tag svelte-7vqogn"> </span> <span class="stat svelte-7vqogn"> </span> <!></div></div> <div class="load-summary svelte-7vqogn"><div class="load-badge finger svelte-7vqogn"> </div> <div class="load-badge shoulder svelte-7vqogn"> </div> <div class="load-badge forearm svelte-7vqogn"> </div></div></div></div> <div class="header-actions"><div class="header-status svelte-7vqogn"><!></div>  <button class="btn-icon delete-session" title="Delete Session">üóëÔ∏è</button> <span class="chevron svelte-7vqogn"> </span></div></div> <!></div>');function is(Te,p){_a(p,!0);let r=Ra(p,"session",7),g=k(!1),C=k(!1);function D(){l(g,!e(g))}function _(){l(C,!0)}function z(q){const w=[...r().climbs];w.splice(q,1),Ia(r().id,{climbs:w}),p.onDelete()}function x(q,w){const O=[...r().climbs];O[q]=w,R(O)}async function R(q){if(Ia(r().id,{climbs:q}),r().climbs=q,Ka()){const w={date:r().date,location:r().location,customLocation:r().customLocation,climbingType:r().climbingType,trainingTypes:r().trainingTypes||[],difficulty:r().difficulty,categories:r().categories||[],energySystems:r().energySystems||[],techniqueFocuses:r().techniqueFocuses||[],fingerLoad:r().fingerLoad,shoulderLoad:r().shoulderLoad,forearmLoad:r().forearmLoad,openGrip:r().openGrip,crimpGrip:r().crimpGrip,pinchGrip:r().pinchGrip,sloperGrip:r().sloperGrip,jugGrip:r().jugGrip,climbs:q};try{const O=await et(r().id,w);O.ok?(Xa(r().id),r().syncStatus="synced"):(console.error("Failed to sync update:",O.error),Ma(r().id),r().syncStatus="error")}catch(O){console.error("Exception syncing update:",O),Ma(r().id),r().syncStatus="error"}}}let K=ca(()=>r().climbs?.length??0),ne=ca(()=>(r().climbs||[]).reduce((q,w)=>{const O=parseInt(w.grade.replace(/\D/g,""))||0,V=parseInt(q.replace(/\D/g,""))||0;return O>V?w.grade:q},"V0"));var ce=rs();let te;var Q=t(ce);Q.__click=D,Q.__keydown=q=>q.key==="Enter"&&D();var $=t(Q),oe=t($),pe=t(oe),re=t(pe,!0);a(pe);var U=s(pe,2),ie=t(U,!0);a(U),a(oe);var ye=s(oe,2),he=t(ye),ee=t(he),j=t(ee,!0);a(ee);var m=s(ee,2),h=t(m),F=t(h,!0);a(h);var M=s(h,2),P=t(M);a(M);var H=s(M,2);{var J=q=>{var w=At(),O=t(w);a(w),u(()=>d(O,`Max: ${e(ne)??""}`)),i(q,w)};c(H,q=>{e(K)>0&&q(J)})}a(m),a(he);var b=s(he,2),G=t(b),y=t(G,!0);a(G);var n=s(G,2),o=t(n,!0);a(n);var T=s(n,2),B=t(T,!0);a(T),a(b),a(ye),a($);var Z=s($,2),L=t(Z),de=t(L);{var ve=q=>{var w=Nt();i(q,w)},xe=q=>{var w=Qe(),O=Me(w);{var V=f=>{var I=It();i(f,I)};c(O,f=>{r().syncStatus==="error"&&f(V)},!0)}i(q,w)};c(de,q=>{r().syncStatus==="pending"?q(ve):q(xe,!1)})}a(L);var E=s(L,2);E.__click=q=>{q.stopPropagation(),_()};var N=s(E,2),ue=t(N,!0);a(N),a(Z),a(Q);var be=s(Q,2);{var we=q=>{var w=ss(),O=t(w),V=t(O),f=s(t(V),2),I=t(f);{var fe=Y=>{var se=Qe(),ge=Me(se);De(ge,17,()=>r().trainingTypes,Fe,(Ce,S)=>{var A=Mt(),W=t(A,!0);a(A),u(()=>d(W,e(S))),i(Ce,A)}),i(Y,se)},X=Y=>{var se=Pt();i(Y,se)};c(I,Y=>{r().trainingTypes&&r().trainingTypes.length>0&&!r().trainingTypes.includes("None")?Y(fe):Y(X,!1)})}a(f),a(V);var ae=s(V,2);{var le=Y=>{var se=Rt(),ge=s(t(se),2),Ce=t(ge,!0);a(ge),a(se),u(()=>d(Ce,r().difficulty)),i(Y,se)};c(ae,Y=>{r().difficulty&&Y(le)})}var Ee=s(ae,2);{var _e=Y=>{var se=Ut(),ge=s(t(se),2),Ce=t(ge);{var S=W=>{var Se=Qe(),Le=Me(Se);De(Le,17,()=>r().categories,Fe,(Ae,Oe)=>{var je=Bt(),xa=t(je,!0);a(je),u(()=>d(xa,e(Oe))),i(Ae,je)}),i(W,Se)},A=W=>{var Se=Vt();i(W,Se)};c(Ce,W=>{r().categories.length>0&&!r().categories.includes("None")?W(S):W(A,!1)})}a(ge),a(se),i(Y,se)};c(Ee,Y=>{r().categories?.length&&Y(_e)})}var ke=s(Ee,2);{var me=Y=>{var se=Ht(),ge=s(t(se),2),Ce=t(ge);{var S=W=>{var Se=Qe(),Le=Me(Se);De(Le,17,()=>r().techniqueFocuses,Fe,(Ae,Oe)=>{var je=Wt(),xa=t(je,!0);a(je),u(()=>d(xa,e(Oe))),i(Ae,je)}),i(W,Se)},A=W=>{var Se=$t();i(W,Se)};c(Ce,W=>{r().techniqueFocuses.length>0&&!r().techniqueFocuses.includes("None")?W(S):W(A,!1)})}a(ge),a(se),i(Y,se)};c(ke,Y=>{r().techniqueFocuses?.length&&Y(me)})}var qe=s(ke,2);{var ze=Y=>{var se=Kt(),ge=s(t(se),2),Ce=t(ge);{var S=W=>{var Se=Qe(),Le=Me(Se);De(Le,17,()=>r().energySystems,Fe,(Ae,Oe)=>{var je=Jt(),xa=t(je,!0);a(je),u(()=>d(xa,e(Oe))),i(Ae,je)}),i(W,Se)},A=W=>{var Se=Zt();i(W,Se)};c(Ce,W=>{r().energySystems.length>0&&!r().energySystems.includes("None")?W(S):W(A,!1)})}a(ge),a(se),i(Y,se)};c(qe,Y=>{r().energySystems?.length&&Y(ze)})}a(O);var Ge=s(O,2),Je=t(Ge),Ze=s(t(Je),2),Ve=t(Ze);a(Ze);var Ke=s(Ze,2),Ne=t(Ke);a(Ke),a(Je);var Pe=s(Je,2),ta=s(t(Pe),2),aa=t(ta);a(ta);var ha=s(ta,2),na=t(ha);a(ha),a(Pe);var sa=s(Pe,2),oa=s(t(sa),2),Ie=t(oa);a(oa);var Xe=s(oa,2),$e=t(Xe);a(Xe),a(sa);var ra=s(sa,2);{var Ue=Y=>{var se=Xt(),ge=s(t(se),2),Ce=t(ge);a(ge);var S=s(ge,2),A=t(S);a(S),a(se),u(()=>{ia(Ce,`width: ${r().openGrip/5*100}%`),d(A,`${r().openGrip??""}/5`)}),i(Y,se)};c(ra,Y=>{r().openGrip&&Y(Ue)})}var We=s(ra,2);{var da=Y=>{var se=Yt(),ge=s(t(se),2),Ce=t(ge);a(ge);var S=s(ge,2),A=t(S);a(S),a(se),u(()=>{ia(Ce,`width: ${r().crimpGrip/5*100}%`),d(A,`${r().crimpGrip??""}/5`)}),i(Y,se)};c(We,Y=>{r().crimpGrip&&Y(da)})}var He=s(We,2);{var La=Y=>{var se=Qt(),ge=s(t(se),2),Ce=t(ge);a(ge);var S=s(ge,2),A=t(S);a(S),a(se),u(()=>{ia(Ce,`width: ${r().pinchGrip/5*100}%`),d(A,`${r().pinchGrip??""}/5`)}),i(Y,se)};c(He,Y=>{r().pinchGrip&&Y(La)})}var ba=s(He,2);{var ka=Y=>{var se=es(),ge=s(t(se),2),Ce=t(ge);a(ge);var S=s(ge,2),A=t(S);a(S),a(se),u(()=>{ia(Ce,`width: ${r().sloperGrip/5*100}%`),d(A,`${r().sloperGrip??""}/5`)}),i(Y,se)};c(ba,Y=>{r().sloperGrip&&Y(ka)})}var ya=s(ba,2);{var Da=Y=>{var se=as(),ge=s(t(se),2),Ce=t(ge);a(ge);var S=s(ge,2),A=t(S);a(S),a(se),u(()=>{ia(Ce,`width: ${r().jugGrip/5*100}%`),d(A,`${r().jugGrip??""}/5`)}),i(Y,se)};c(ya,Y=>{r().jugGrip&&Y(Da)})}a(Ge);var Ta=s(Ge,2),qa=s(t(Ta),2),za=t(qa);De(za,17,()=>r().climbs||[],Fe,(Y,se,ge)=>{{let Ce=ca(()=>r().climbingType==="Mixed");jt(Y,{get climb(){return e(se)},onDelete:()=>z(ge),onUpdate:S=>x(ge,S),get showClimbType(){return e(Ce)}})}});var Ye=s(za,2);{var ga=Y=>{var se=ts();i(Y,se)};c(Ye,Y=>{(r().climbs||[]).length===0&&Y(ga)})}a(qa),a(Ta),a(w),u(()=>{ia(Ve,`width: ${r().fingerLoad/5*100}%`),d(Ne,`${r().fingerLoad??""}/5`),ia(aa,`width: ${r().shoulderLoad/5*100}%`),d(na,`${r().shoulderLoad??""}/5`),ia(Ie,`width: ${r().forearmLoad/5*100}%`),d($e,`${r().forearmLoad??""}/5`)}),va(3,w,()=>fa,()=>({duration:150})),i(q,w)};c(be,q=>{e(g)&&q(we)})}a(ce),u((q,w)=>{te=la(ce,1,"session-card svelte-7vqogn",null,te,{expanded:e(g)}),ea(Q,"aria-expanded",e(g)),d(re,q),d(ie,w),d(j,r().location),d(F,r().climbingType),d(P,`${e(K)??""} climbs`),ea(G,"title",`Finger Load: ${r().fingerLoad??""}`),d(y,r().fingerLoad),ea(n,"title",`Shoulder Load: ${r().shoulderLoad??""}`),d(o,r().shoulderLoad),ea(T,"title",`Forearm Load: ${r().forearmLoad??""}`),d(B,r().forearmLoad),d(ue,e(g)?"‚ñ≤":"‚ñº")},[()=>new Date(r().date).getDate(),()=>new Date(r().date).toLocaleDateString("en-GB",{month:"short"})]),i(Te,ce),ua()}pa(["click","keydown"]);var ls=v('<div class="legend-item svelte-11p9lqi"><span class="l-icon svelte-11p9lqi"> </span> <span class="l-label svelte-11p9lqi"> </span></div>'),vs=v('<div class="legend-content svelte-11p9lqi"><div class="legend-grid svelte-11p9lqi"></div></div>'),ns=v('<div class="legend-container svelte-11p9lqi"><button class="legend-toggle svelte-11p9lqi"><span class="icon">‚ÑπÔ∏è</span> <span class="text">Icon Legend</span> <span class="chevron svelte-11p9lqi"> </span></button> <!></div>');function Ya(Te){let p=k(!1);const r=[{icon:"üëÅÔ∏è",label:"Onsight"},{icon:"‚ö°",label:"Flash"},{icon:"üî¥",label:"Redpoint"},{icon:"üõ†Ô∏è",label:"Dogged"},{icon:"‚ùå",label:"DNF"}];var g=ns(),C=t(g);C.__click=()=>l(p,!e(p));var D=s(t(C),4),_=t(D,!0);a(D),a(C);var z=s(C,2);{var x=R=>{var K=vs(),ne=t(K);De(ne,21,()=>r,Fe,(ce,te)=>{var Q=ls(),$=t(Q),oe=t($,!0);a($);var pe=s($,2),re=t(pe,!0);a(pe),a(Q),u(()=>{d(oe,e(te).icon),d(re,e(te).label)}),i(ce,Q)}),a(ne),a(K),va(3,K,()=>fa),i(R,K)};c(z,R=>{e(p)&&R(x)})}a(g),u(()=>{ea(C,"aria-expanded",e(p)),d(_,e(p)?"‚ñº":"‚ñ∂")}),i(Te,g)}pa(["click"]);function $a(Te,p){if(!Te||Te.length===0){alert("No data to export");return}const r=Array.from(new Set(Te.flatMap(Object.keys))),g=[r.join(","),...Te.map(_=>r.map(z=>{let x=_[z];if(x==null)return"";if(typeof x=="object"){if(x instanceof Date)return x.toISOString();x=JSON.stringify(x).replace(/"/g,'""')}else typeof x=="string"&&(x=x.replace(/"/g,'""'));return typeof x=="string"&&(x.includes(",")||x.includes('"')||x.includes(`
`))?`"${x}"`:x}).join(","))].join(`
`),C=new Blob([g],{type:"text/csv;charset=utf-8;"}),D=document.createElement("a");if(D.download!==void 0){const _=URL.createObjectURL(C);D.setAttribute("href",_),D.setAttribute("download",p.endsWith(".csv")?p:`${p}.csv`),D.style.visibility="hidden",document.body.appendChild(D),D.click(),document.body.removeChild(D)}}var os=v('<span class="spinner svelte-14fqz8w"></span> Fetching...',1),ds=v('<div class="error-banner svelte-14fqz8w"> </div>'),cs=v('<small class="svelte-14fqz8w">Try adjusting your filters.</small>'),ps=v('<div class="empty-state svelte-14fqz8w"><p class="svelte-14fqz8w">No indoor climbing sessions found.</p> <!></div>'),_s=v('<div class="load-more-container svelte-14fqz8w"><button class="load-more-btn svelte-14fqz8w"> </button></div>'),us=v('<div class="view-container svelte-14fqz8w"><div class="view-header svelte-14fqz8w"><h2 class="view-title svelte-14fqz8w">üßó Indoor Climbing History</h2> <div class="header-actions svelte-14fqz8w"><button class="action-btn secondary svelte-14fqz8w" title="Export filtered data to CSV">üì• Export</button> <button class="action-btn svelte-14fqz8w" title="Fetch data from cloud"><!></button></div></div> <!> <!> <div class="info-bar svelte-14fqz8w"><div class="legend-wrapper svelte-14fqz8w"><!></div> <div class="load-key svelte-14fqz8w"><span class="key-label svelte-14fqz8w">Load:</span> <div class="key-item svelte-14fqz8w"><span class="dot finger svelte-14fqz8w"></span> Finger</div> <div class="key-item svelte-14fqz8w"><span class="dot shoulder svelte-14fqz8w"></span> Shoulder</div> <div class="key-item svelte-14fqz8w"><span class="dot forearm svelte-14fqz8w"></span> Forearm</div></div></div> <div class="sessions-list"><!> <!> <!></div></div>');function fs(Te,p){_a(p,!0);let r=k(ma([])),g=k(ma([])),C=k(!1),D=k(""),_=k(ma({startDate:"",endDate:"",location:"",climbingType:"",sessionType:"",grade:""})),z=k(20);const x=20;Ua(()=>{R()});function R(){const n=Ea("indoor_climb");l(r,n.sort((o,T)=>new Date(T.date).getTime()-new Date(o.date).getTime()),!0),te()}async function K(){l(C,!0),l(D,"");try{await Aa();const n=await at();n.ok&&n.data?ne(n.data):l(D,n.error||"Failed to fetch data",!0)}catch(n){l(D,n instanceof Error?n.message:"Unknown error",!0)}finally{l(C,!1)}}function ne(n){const o=n.map(B=>({...B,activityType:"indoor_climb",createdAt:new Date().toISOString(),updatedAt:new Date().toISOString(),syncStatus:"synced",syncedAt:new Date().toISOString(),openGrip:0,crimpGrip:0,pinchGrip:0,sloperGrip:0,jugGrip:0}));Na(o);const T=Ea("indoor_climb");l(r,T.sort((B,Z)=>new Date(Z.date).getTime()-new Date(B.date).getTime()),!0),te()}function ce(n){l(_,n,!0),te()}function te(){l(z,x),l(g,e(r).filter(n=>{if(e(_).startDate&&n.date<e(_).startDate||e(_).endDate&&n.date>e(_).endDate||e(_).location&&n.location!==e(_).location)return!1;if(e(_).climbingType&&(n.climbingType==="Leading"?"Sport":n.climbingType)!==e(_).climbingType)if(n.climbingType==="Mixed")if(e(_).climbingType==="Bouldering"){if(!n.climbs.some(T=>!T.isSport))return!1}else if(e(_).climbingType==="Sport"){if(!n.climbs.some(T=>T.isSport))return!1}else return!1;else return!1;if(e(_).sessionType&&!n.trainingTypes?.includes(e(_).sessionType))return!1;if(e(_).grade){const o=e(_).grade.trim().toLowerCase();if(!n.climbs.some(B=>B.grade.trim().toLowerCase()===o))return!1}return!0}),!0)}function Q(){l(z,e(z)+x)}var $=us(),oe=t($),pe=s(t(oe),2),re=t(pe);re.__click=()=>$a(e(g),"indoor_climbs");var U=s(re,2);U.__click=K;var ie=t(U);{var ye=n=>{var o=os();Fa(),i(n,o)},he=n=>{var o=Ca("‚òÅÔ∏è Fetch Data");i(n,o)};c(ie,n=>{e(C)?n(ye):n(he,!1)})}a(U),a(pe),a(oe);var ee=s(oe,2);{var j=n=>{var o=ds(),T=t(o,!0);a(o),u(()=>d(T,e(D))),va(3,o,()=>fa),i(n,o)};c(ee,n=>{e(D)&&n(j)})}var m=s(ee,2);wt(m,{onFilterParamsChange:ce});var h=s(m,2),F=t(h),M=t(F);Ya(M),a(F),Fa(2),a(h);var P=s(h,2),H=t(P);De(H,17,()=>e(g).slice(0,e(z)),n=>n.id,(n,o)=>{is(n,{get session(){return e(o)},onDelete:R})});var J=s(H,2);{var b=n=>{var o=ps(),T=s(t(o),2);{var B=Z=>{var L=cs();i(Z,L)};c(T,Z=>{e(r).length>0&&Z(B)})}a(o),i(n,o)};c(J,n=>{e(g).length===0&&n(b)})}var G=s(J,2);{var y=n=>{var o=_s(),T=t(o);T.__click=Q;var B=t(T);a(T),a(o),u(()=>d(B,`Load More (${e(g).length-e(z)} remaining)`)),i(n,o)};c(G,n=>{e(z)<e(g).length&&n(y)})}a(P),a($),u(()=>U.disabled=e(C)),i(Te,$),ua()}pa(["click"]);var gs=v('<span class="chevron svelte-1frtlim">‚ñ≤</span>'),ms=v('<span class="chevron svelte-1frtlim">‚ñº</span>'),hs=v('<div class="input-with-action svelte-1frtlim"><input type="text" id="area-filter-text" placeholder="Type area name..." class="flat-left svelte-1frtlim"/> <button class="action-btn flat-right svelte-1frtlim" title="Back to list">‚úï</button></div>'),bs=v("<option> </option>"),ys=v('<select id="area-filter" class="svelte-1frtlim"><option>All Areas</option><!><option>Other (Manual Entry)</option></select>'),xs=v('<div class="input-with-action svelte-1frtlim"><input type="text" id="crag-filter-text" placeholder="Type crag name..." class="flat-left svelte-1frtlim"/> <button class="action-btn flat-right svelte-1frtlim" title="Back to list">‚úï</button></div>'),ws=v("<option> </option>"),Ss=v('<select id="crag-filter" class="svelte-1frtlim"><option>All Crags</option><!><option>Other (Manual Entry)</option></select>'),ks=v('<input type="text" id="crag-filter-text" class="svelte-1frtlim"/>'),Ds=v("<option> </option>"),Ts=v("<option> </option>"),qs=v('<div class="filter-body svelte-1frtlim"><div class="filter-grid svelte-1frtlim"><div class="filter-item svelte-1frtlim"><label for="start-date" class="svelte-1frtlim">Start Date</label> <input type="date" id="start-date" class="svelte-1frtlim"/></div> <div class="filter-item svelte-1frtlim"><label for="end-date" class="svelte-1frtlim">End Date</label> <input type="date" id="end-date" class="svelte-1frtlim"/></div> <div class="filter-item svelte-1frtlim"><label for="area-filter" class="svelte-1frtlim">Area</label> <!></div> <div class="filter-item svelte-1frtlim"><label for="crag-filter" class="svelte-1frtlim">Crag</label> <!></div> <div class="filter-item svelte-1frtlim"><label for="climbing-type-filter" class="svelte-1frtlim">Climb Type</label> <select id="climbing-type-filter" class="svelte-1frtlim"><option>Any Type</option><!></select></div> <div class="filter-item svelte-1frtlim"><label for="session-type-filter" class="svelte-1frtlim">Session Type</label> <select id="session-type-filter" class="svelte-1frtlim"><option>Any Type</option><!></select></div> <div class="filter-item svelte-1frtlim"><label for="grade-filter" class="svelte-1frtlim">Grade (Exact)</label> <input type="text" id="grade-filter" placeholder="e.g. 7a" class="svelte-1frtlim"/></div></div> <div class="filter-actions svelte-1frtlim"><button class="reset-btn svelte-1frtlim">Reset Filters</button></div></div>'),zs=v('<div class="filter-container svelte-1frtlim"><button class="filter-header svelte-1frtlim"><div class="header-content svelte-1frtlim"><span class="icon svelte-1frtlim">üîç</span> <span class="title svelte-1frtlim">Filters</span> <!></div></button> <!></div>');function Cs(Te,p){_a(p,!0);const r=tt(),g=["Bouldering","Sport","Mixed","Trad"],C=["Projecting","Onsighting","Campusing","Repeaters","Fun","Volume"];let D=k(!1),_=k(""),z=k(""),x=k(""),R=k(""),K=k(""),ne=k(""),ce=k(""),te=k(!1),Q=k(!1),$=ca(()=>e(x)&&e(x)!=="Other"?st(e(x)):[]);function oe(){e(x)==="Other"?(l(te,!0),l(x,"")):l(te,!1),l(R,""),l(Q,!1),ie()}function pe(){e(R)==="Other"?(l(Q,!0),l(R,"")):l(Q,!1),ie()}function re(){l(D,!e(D))}function U(){l(_,""),l(z,""),l(x,""),l(R,""),l(K,""),l(ne,""),l(ce,""),l(te,!1),l(Q,!1),ie()}function ie(){p.onFilterParamsChange({startDate:e(_),endDate:e(z),area:e(x),crag:e(R),climbingType:e(K),sessionType:e(ne),grade:e(ce)})}var ye=zs(),he=t(ye);he.__click=re;var ee=t(he),j=s(t(ee),4);{var m=P=>{var H=gs();i(P,H)},h=P=>{var H=ms();i(P,H)};c(j,P=>{e(D)?P(m):P(h,!1)})}a(ee),a(he);var F=s(he,2);{var M=P=>{var H=qs(),J=t(H),b=t(J),G=s(t(b),2);Re(G),G.__change=ie,a(b);var y=s(b,2),n=s(t(y),2);Re(n),n.__change=ie,a(y);var o=s(y,2),T=s(t(o),2);{var B=X=>{var ae=hs(),le=t(ae);Re(le),le.__input=ie;var Ee=s(le,2);Ee.__click=()=>{l(te,!1),l(x,""),ie()},a(ae),Be(le,()=>e(x),_e=>l(x,_e)),i(X,ae)},Z=X=>{var ae=ys();ae.__change=oe;var le=t(ae);le.value=le.__value="";var Ee=s(le);De(Ee,17,()=>r,Fe,(ke,me)=>{var qe=bs(),ze=t(qe,!0);a(qe);var Ge={};u(()=>{d(ze,e(me)),Ge!==(Ge=e(me))&&(qe.value=(qe.__value=e(me))??"")}),i(ke,qe)});var _e=s(Ee);_e.value=_e.__value="Other",a(ae),Sa(ae,()=>e(x),ke=>l(x,ke)),i(X,ae)};c(T,X=>{e(te)?X(B):X(Z,!1)})}a(o);var L=s(o,2),de=s(t(L),2);{var ve=X=>{var ae=xs(),le=t(ae);Re(le),le.__input=ie;var Ee=s(le,2);Ee.__click=()=>{l(Q,!1),l(R,""),ie()},a(ae),Be(le,()=>e(R),_e=>l(R,_e)),i(X,ae)},xe=X=>{var ae=Qe(),le=Me(ae);{var Ee=ke=>{var me=Ss();me.__change=pe;var qe=t(me);qe.value=qe.__value="";var ze=s(qe);De(ze,17,()=>e($),Fe,(Je,Ze)=>{var Ve=ws(),Ke=t(Ve,!0);a(Ve);var Ne={};u(()=>{d(Ke,e(Ze)),Ne!==(Ne=e(Ze))&&(Ve.value=(Ve.__value=e(Ze))??"")}),i(Je,Ve)});var Ge=s(ze);Ge.value=Ge.__value="Other",a(me),Sa(me,()=>e(R),Je=>l(R,Je)),i(ke,me)},_e=ke=>{var me=ks();Re(me),me.__input=ie,u(()=>{ea(me,"placeholder",e(x)?"Filter crag...":"Select area first"),me.disabled=!e(te)&&!e(x)}),Be(me,()=>e(R),qe=>l(R,qe)),i(ke,me)};c(le,ke=>{!e(te)&&e(x)&&e($).length>0?ke(Ee):ke(_e,!1)},!0)}i(X,ae)};c(de,X=>{e(Q)?X(ve):X(xe,!1)})}a(L);var E=s(L,2),N=s(t(E),2);N.__change=ie;var ue=t(N);ue.value=ue.__value="";var be=s(ue);De(be,17,()=>g,Fe,(X,ae)=>{var le=Ds(),Ee=t(le,!0);a(le);var _e={};u(()=>{d(Ee,e(ae)),_e!==(_e=e(ae))&&(le.value=(le.__value=e(ae))??"")}),i(X,le)}),a(N),a(E);var we=s(E,2),q=s(t(we),2);q.__change=ie;var w=t(q);w.value=w.__value="";var O=s(w);De(O,17,()=>C,Fe,(X,ae)=>{var le=Ts(),Ee=t(le,!0);a(le);var _e={};u(()=>{d(Ee,e(ae)),_e!==(_e=e(ae))&&(le.value=(le.__value=e(ae))??"")}),i(X,le)}),a(q),a(we);var V=s(we,2),f=s(t(V),2);Re(f),f.__input=ie,a(V),a(J);var I=s(J,2),fe=t(I);fe.__click=U,a(I),a(H),Be(G,()=>e(_),X=>l(_,X)),Be(n,()=>e(z),X=>l(z,X)),Sa(N,()=>e(K),X=>l(K,X)),Sa(q,()=>e(ne),X=>l(ne,X)),Be(f,()=>e(ce),X=>l(ce,X)),va(3,H,()=>fa,()=>({duration:200})),i(P,H)};c(F,P=>{e(D)&&P(M)})}a(ye),u(()=>ea(he,"aria-expanded",e(D))),i(Te,ye),ua()}pa(["click","change","input"]);var Fs=v('<label class="type-toggle svelte-1k6anfh"><input type="checkbox"/> <span>Sport?</span></label>'),Ls=v("<option> </option>"),Es=v('<div class="edit-form svelte-1k6anfh"><div class="edit-row main svelte-1k6anfh"><input type="text" class="edit-input grade svelte-1k6anfh" placeholder="Grade"/> <input type="text" class="edit-input name svelte-1k6anfh" placeholder="Route Name"/> <!></div> <div class="edit-row meta svelte-1k6anfh"><select class="edit-select svelte-1k6anfh"></select> <div class="attempts-input-wrapper svelte-1k6anfh"><span>#</span> <input type="number" min="1" class="edit-input num svelte-1k6anfh"/></div></div> <div class="edit-row notes svelte-1k6anfh"><textarea class="edit-input notes-area svelte-1k6anfh" placeholder="Notes..."></textarea></div> <div class="edit-actions svelte-1k6anfh"><button class="action-btn cancel svelte-1k6anfh">Cancel</button> <button class="action-btn save svelte-1k6anfh">Save</button></div></div>'),Gs=v('<span class="climb-type-tag svelte-1k6anfh"> </span>'),Os=v('<span class="notes-preview svelte-1k6anfh"> </span>'),js=v('<span class="attempts-count svelte-1k6anfh"> </span>'),As=v('<div class="detail-row svelte-1k6anfh"><span class="label svelte-1k6anfh">Notes:</span> <p class="notes svelte-1k6anfh"> </p></div>'),Ns=v('<p class="empty-notes svelte-1k6anfh">No notes for this climb.</p>'),Is=v('<div class="climb-details svelte-1k6anfh"><!> <div class="tags svelte-1k6anfh"><span class="tag type svelte-1k6anfh"> </span> <span class="tag attempt-text svelte-1k6anfh"> </span></div></div>'),Ms=v('<div class="climb-header svelte-1k6anfh" role="button" tabindex="0"><div class="climb-main-info svelte-1k6anfh"><span> </span> <span class="climb-name svelte-1k6anfh"> </span> <!> <!></div> <div class="climb-meta svelte-1k6anfh"><span><span class="icon svelte-1k6anfh"> </span> <!></span> <button class="icon-btn edit-btn svelte-1k6anfh" aria-label="Edit climb" title="Edit climb">‚úé</button> <button class="icon-btn delete-btn svelte-1k6anfh" aria-label="Delete climb" title="Delete climb">üóëÔ∏è</button> <span class="chevron svelte-1k6anfh"> </span></div></div> <!>',1),Ps=v("<div><!></div>");function Rs(Te,p){_a(p,!0);let r=Ra(p,"showClimbType",3,!1),g=k(!1),C=k(!1),D=k(""),_=k(""),z=k(""),x=k(1),R=k(""),K=k(!1);function ne(){e(C)||l(g,!e(g))}function ce(j){j.stopPropagation(),p.onDelete()}function te(j){j.stopPropagation(),l(D,p.climb.name,!0),l(_,p.climb.grade,!0),l(z,p.climb.attemptType,!0),l(x,p.climb.attemptsNum,!0),l(R,p.climb.notes,!0),l(K,p.climb.isSport,!0),l(C,!0),l(g,!0)}function Q(j){j.stopPropagation(),l(C,!1)}function $(j){j.stopPropagation();const m={...p.climb,name:e(D),grade:e(_),attemptType:e(z),attemptsNum:e(x),notes:e(R),isSport:e(K)};p.onUpdate(m),l(C,!1)}function oe(){(e(z)==="Flash"||e(z)==="Onsight")&&l(x,1)}const pe={Flash:"‚ö°",Onsight:"üëÅÔ∏è",Redpoint:"üî¥",Dogged:"üõ†Ô∏è",DNF:"‚ùå"},re=["Flash","Onsight","Redpoint","Dogged","DNF"];var U=Ps();let ie;var ye=t(U);{var he=j=>{var m=Es(),h=t(m),F=t(h);Re(F);var M=s(F,2);Re(M);var P=s(M,2);{var H=L=>{var de=Fs(),ve=t(de);Re(ve),Fa(2),a(de),Za(ve,()=>e(K),xe=>l(K,xe)),i(L,de)};c(P,L=>{r()&&L(H)})}a(h);var J=s(h,2),b=t(J);b.__change=oe,De(b,21,()=>re,Fe,(L,de)=>{var ve=Ls(),xe=t(ve,!0);a(ve);var E={};u(()=>{d(xe,e(de)),E!==(E=e(de))&&(ve.value=(ve.__value=e(de))??"")}),i(L,ve)}),a(b);var G=s(b,2),y=s(t(G),2);Re(y),a(G),a(J);var n=s(J,2),o=t(n);Ja(o),a(n);var T=s(n,2),B=t(T);B.__click=Q;var Z=s(B,2);Z.__click=$,a(T),a(m),u(()=>y.disabled=e(z)==="Flash"||e(z)==="Onsight"),Be(F,()=>e(_),L=>l(_,L)),Be(M,()=>e(D),L=>l(D,L)),Sa(b,()=>e(z),L=>l(z,L)),Be(y,()=>e(x),L=>l(x,L)),Be(o,()=>e(R),L=>l(R,L)),i(j,m)},ee=j=>{var m=Ms(),h=Me(m);h.__click=ne,h.__keydown=w=>(w.key==="Enter"||w.key===" ")&&ne();var F=t(h),M=t(F);let P;var H=t(M,!0);a(M);var J=s(M,2),b=t(J,!0);a(J);var G=s(J,2);{var y=w=>{var O=Gs(),V=t(O,!0);a(O),u(()=>d(V,p.climb.isSport?"Sport":"Boulder")),i(w,O)};c(G,w=>{r()&&w(y)})}var n=s(G,2);{var o=w=>{var O=Os(),V=t(O);a(O),u(()=>d(V,`- ${p.climb.notes??""}`)),i(w,O)};c(n,w=>{!e(g)&&p.climb.notes&&w(o)})}a(F);var T=s(F,2),B=t(T);let Z;var L=t(B),de=t(L,!0);a(L);var ve=s(L,2);{var xe=w=>{var O=js(),V=t(O,!0);a(O),u(()=>d(V,p.climb.attemptsNum)),i(w,O)};c(ve,w=>{p.climb.attemptType!=="Flash"&&p.climb.attemptType!=="Onsight"&&w(xe)})}a(B);var E=s(B,2);E.__click=te;var N=s(E,2);N.__click=ce;var ue=s(N,2),be=t(ue,!0);a(ue),a(T),a(h);var we=s(h,2);{var q=w=>{var O=Is(),V=t(O);{var f=_e=>{var ke=As(),me=s(t(ke),2),qe=t(me,!0);a(me),a(ke),u(()=>d(qe,p.climb.notes)),i(_e,ke)},I=_e=>{var ke=Ns();i(_e,ke)};c(V,_e=>{p.climb.notes?_e(f):_e(I,!1)})}var fe=s(V,2),X=t(fe),ae=t(X,!0);a(X);var le=s(X,2),Ee=t(le,!0);a(le),a(fe),a(O),u(()=>{d(ae,p.climb.isSport?"Sport":"Boulder"),d(Ee,p.climb.attemptType)}),va(3,O,()=>fa,()=>({duration:150})),i(w,O)};c(we,w=>{e(g)&&w(q)})}u(()=>{ea(h,"aria-expanded",e(g)),P=la(M,1,"grade-badge svelte-1k6anfh",null,P,{sport:p.climb.isSport}),d(H,p.climb.grade),d(b,p.climb.name||"Unnamed Route"),Z=la(B,1,"attempt-type svelte-1k6anfh",null,Z,{flash:p.climb.attemptType==="Flash"}),d(de,pe[p.climb.attemptType]||p.climb.attemptType),d(be,e(g)?"‚ñ≤":"‚ñº")}),i(j,m)};c(ye,j=>{e(C)?j(he):j(ee,!1)})}a(U),u(()=>ie=la(U,1,"climb-entry svelte-1k6anfh",null,ie,{expanded:e(g),editing:e(C)})),i(Te,U),ua()}pa(["change","click","keydown"]);var Bs=v('<div class="sector-meta"> </div>'),Vs=v('<span class="stat svelte-d5hg2r"> </span>'),Us=v('<span class="status-icon pending svelte-d5hg2r" title="Waiting to sync">üîÑ</span>'),Ws=v('<span class="status-icon error svelte-d5hg2r" title="Sync error">‚ö†Ô∏è</span>'),$s=v('<span class="chip svelte-d5hg2r"> </span>'),Hs=v('<span class="text-none svelte-d5hg2r">None</span>'),Js=v('<div class="detail-item svelte-d5hg2r"><span class="label svelte-d5hg2r">Difficulty</span> <span class="value svelte-d5hg2r"> </span></div>'),Zs=v('<span class="chip svelte-d5hg2r"> </span>'),Ks=v('<span class="text-none svelte-d5hg2r">None</span>'),Xs=v('<div class="detail-item svelte-d5hg2r"><span class="label svelte-d5hg2r">Category</span> <div class="value-chips svelte-d5hg2r"><!></div></div>'),Ys=v('<span class="chip svelte-d5hg2r"> </span>'),Qs=v('<span class="text-none svelte-d5hg2r">None</span>'),er=v('<div class="detail-item svelte-d5hg2r"><span class="label svelte-d5hg2r">Focus</span> <div class="value-chips svelte-d5hg2r"><!></div></div>'),ar=v('<span class="chip svelte-d5hg2r"> </span>'),tr=v('<span class="text-none svelte-d5hg2r">None</span>'),sr=v('<div class="detail-item svelte-d5hg2r"><span class="label svelte-d5hg2r">Energy System</span> <div class="value-chips svelte-d5hg2r"><!></div></div>'),rr=v('<div class="metric svelte-d5hg2r"><span class="label svelte-d5hg2r">Open Grip</span> <div class="bar-container svelte-d5hg2r"><div class="bar-fill svelte-d5hg2r"></div></div> <span class="score svelte-d5hg2r"> </span></div>'),ir=v('<div class="metric svelte-d5hg2r"><span class="label svelte-d5hg2r">Crimp Grip</span> <div class="bar-container svelte-d5hg2r"><div class="bar-fill svelte-d5hg2r"></div></div> <span class="score svelte-d5hg2r"> </span></div>'),lr=v('<div class="metric svelte-d5hg2r"><span class="label svelte-d5hg2r">Pinch Grip</span> <div class="bar-container svelte-d5hg2r"><div class="bar-fill svelte-d5hg2r"></div></div> <span class="score svelte-d5hg2r"> </span></div>'),vr=v('<div class="metric svelte-d5hg2r"><span class="label svelte-d5hg2r">Sloper Grip</span> <div class="bar-container svelte-d5hg2r"><div class="bar-fill svelte-d5hg2r"></div></div> <span class="score svelte-d5hg2r"> </span></div>'),nr=v('<div class="metric svelte-d5hg2r"><span class="label svelte-d5hg2r">Jug Grip</span> <div class="bar-container svelte-d5hg2r"><div class="bar-fill svelte-d5hg2r"></div></div> <span class="score svelte-d5hg2r"> </span></div>'),or=v('<p class="no-climbs svelte-d5hg2r">No climbs logged for this session.</p>'),dr=v('<div class="card-body svelte-d5hg2r"><div class="details-grid svelte-d5hg2r"><div class="detail-item svelte-d5hg2r"><span class="label svelte-d5hg2r">Training Type</span> <div class="value-chips svelte-d5hg2r"><!></div></div> <!> <!> <!> <!></div> <div class="metrics-container svelte-d5hg2r"><div class="metric svelte-d5hg2r"><span class="label svelte-d5hg2r">Finger Load</span> <div class="bar-container svelte-d5hg2r"><div class="bar-fill svelte-d5hg2r"></div></div> <span class="score svelte-d5hg2r"> </span></div> <div class="metric svelte-d5hg2r"><span class="label svelte-d5hg2r">Shoulder Load</span> <div class="bar-container svelte-d5hg2r"><div class="bar-fill svelte-d5hg2r"></div></div> <span class="score svelte-d5hg2r"> </span></div> <div class="metric svelte-d5hg2r"><span class="label svelte-d5hg2r">Forearm Load</span> <div class="bar-container svelte-d5hg2r"><div class="bar-fill svelte-d5hg2r"></div></div> <span class="score svelte-d5hg2r"> </span></div> <!> <!> <!> <!> <!></div> <div class="climbs-list svelte-d5hg2r"><h4 class="svelte-d5hg2r">Climbs</h4> <div class="climbs-container svelte-d5hg2r"><!> <!></div></div></div>'),cr=v('<div><div class="card-header svelte-d5hg2r" role="button" tabindex="0"><div class="header-main svelte-d5hg2r"><div class="date-badge svelte-d5hg2r"><span class="day svelte-d5hg2r"> </span> <span class="month svelte-d5hg2r"> </span></div> <div class="session-info svelte-d5hg2r"><div class="session-text svelte-d5hg2r"><h3 class="location svelte-d5hg2r"> <!></h3> <!> <div class="session-meta svelte-d5hg2r"><span class="type-tag svelte-d5hg2r"> </span> <span class="stat svelte-d5hg2r"> </span> <!></div></div> <div class="load-summary svelte-d5hg2r"><div class="load-badge finger svelte-d5hg2r"> </div> <div class="load-badge shoulder svelte-d5hg2r"> </div> <div class="load-badge forearm svelte-d5hg2r"> </div></div></div></div> <div class="header-actions"><div class="header-status svelte-d5hg2r"><!></div> <button class="btn-icon delete-session" title="Delete Session">üóëÔ∏è</button> <span class="chevron svelte-d5hg2r"> </span></div></div> <!></div>');function pr(Te,p){_a(p,!0);let r=Ra(p,"session",7),g=k(!1),C=k(!1);function D(){l(g,!e(g))}function _(){l(C,!0)}function z(f){const I=[...r().climbs];I.splice(f,1),Ia(r().id,{climbs:I}),p.onDelete()}function x(f,I){const fe=[...r().climbs];fe[f]=I,R(fe)}async function R(f){if(Ia(r().id,{climbs:f}),r().climbs=f,Ka()){const I={date:r().date,area:r().area,crag:r().crag,sector:r().sector,climbingType:r().climbingType,trainingTypes:r().trainingTypes||[],difficulty:r().difficulty,categories:r().categories||[],energySystems:r().energySystems||[],techniqueFocuses:r().techniqueFocuses||[],fingerLoad:r().fingerLoad,shoulderLoad:r().shoulderLoad,forearmLoad:r().forearmLoad,climbs:f};try{const fe=await rt(r().id,I);fe.ok?(Xa(r().id),r().syncStatus="synced"):(console.error("Failed to sync update:",fe.error),Ma(r().id),r().syncStatus="error")}catch(fe){console.error("Exception syncing update:",fe),Ma(r().id),r().syncStatus="error"}}}let K=ca(()=>r().climbs?.length??0),ne=ca(()=>(r().climbs||[]).reduce((f,I)=>{const fe=parseInt(I.grade.replace(/\D/g,""))||0,X=parseInt(f.replace(/\D/g,""))||0;return fe>X?I.grade:f},"V0/4a"));var ce=cr();let te;var Q=t(ce);Q.__click=D,Q.__keydown=f=>f.key==="Enter"&&D();var $=t(Q),oe=t($),pe=t(oe),re=t(pe,!0);a(pe);var U=s(pe,2),ie=t(U,!0);a(U),a(oe);var ye=s(oe,2),he=t(ye),ee=t(he),j=t(ee),m=s(j);{var h=f=>{var I=Ca();u(()=>d(I,`- ${r().crag??""}`)),i(f,I)};c(m,f=>{r().crag&&f(h)})}a(ee);var F=s(ee,2);{var M=f=>{var I=Bs(),fe=t(I);a(I),u(()=>d(fe,`üìç ${r().sector??""}`)),i(f,I)};c(F,f=>{r().sector&&f(M)})}var P=s(F,2),H=t(P),J=t(H,!0);a(H);var b=s(H,2),G=t(b);a(b);var y=s(b,2);{var n=f=>{var I=Vs(),fe=t(I);a(I),u(()=>d(fe,`Max: ${e(ne)??""}`)),i(f,I)};c(y,f=>{e(K)>0&&f(n)})}a(P),a(he);var o=s(he,2),T=t(o),B=t(T,!0);a(T);var Z=s(T,2),L=t(Z,!0);a(Z);var de=s(Z,2),ve=t(de,!0);a(de),a(o),a(ye),a($);var xe=s($,2),E=t(xe),N=t(E);{var ue=f=>{var I=Us();i(f,I)},be=f=>{var I=Qe(),fe=Me(I);{var X=ae=>{var le=Ws();i(ae,le)};c(fe,ae=>{r().syncStatus==="error"&&ae(X)},!0)}i(f,I)};c(N,f=>{r().syncStatus==="pending"?f(ue):f(be,!1)})}a(E);var we=s(E,2);we.__click=f=>{f.stopPropagation(),_()};var q=s(we,2),w=t(q,!0);a(q),a(xe),a(Q);var O=s(Q,2);{var V=f=>{var I=dr(),fe=t(I),X=t(fe),ae=s(t(X),2),le=t(ae);{var Ee=S=>{var A=Qe(),W=Me(A);De(W,17,()=>r().trainingTypes,Fe,(Se,Le)=>{var Ae=$s(),Oe=t(Ae,!0);a(Ae),u(()=>d(Oe,e(Le))),i(Se,Ae)}),i(S,A)},_e=S=>{var A=Hs();i(S,A)};c(le,S=>{r().trainingTypes&&r().trainingTypes.length>0&&!r().trainingTypes.includes("None")?S(Ee):S(_e,!1)})}a(ae),a(X);var ke=s(X,2);{var me=S=>{var A=Js(),W=s(t(A),2),Se=t(W,!0);a(W),a(A),u(()=>d(Se,r().difficulty)),i(S,A)};c(ke,S=>{r().difficulty&&S(me)})}var qe=s(ke,2);{var ze=S=>{var A=Xs(),W=s(t(A),2),Se=t(W);{var Le=Oe=>{var je=Qe(),xa=Me(je);De(xa,17,()=>r().categories,Fe,(Ga,Oa)=>{var wa=Zs(),ja=t(wa,!0);a(wa),u(()=>d(ja,e(Oa))),i(Ga,wa)}),i(Oe,je)},Ae=Oe=>{var je=Ks();i(Oe,je)};c(Se,Oe=>{r().categories.length>0&&!r().categories.includes("None")?Oe(Le):Oe(Ae,!1)})}a(W),a(A),i(S,A)};c(qe,S=>{r().categories?.length&&S(ze)})}var Ge=s(qe,2);{var Je=S=>{var A=er(),W=s(t(A),2),Se=t(W);{var Le=Oe=>{var je=Qe(),xa=Me(je);De(xa,17,()=>r().techniqueFocuses,Fe,(Ga,Oa)=>{var wa=Ys(),ja=t(wa,!0);a(wa),u(()=>d(ja,e(Oa))),i(Ga,wa)}),i(Oe,je)},Ae=Oe=>{var je=Qs();i(Oe,je)};c(Se,Oe=>{r().techniqueFocuses.length>0&&!r().techniqueFocuses.includes("None")?Oe(Le):Oe(Ae,!1)})}a(W),a(A),i(S,A)};c(Ge,S=>{r().techniqueFocuses?.length&&S(Je)})}var Ze=s(Ge,2);{var Ve=S=>{var A=sr(),W=s(t(A),2),Se=t(W);{var Le=Oe=>{var je=Qe(),xa=Me(je);De(xa,17,()=>r().energySystems,Fe,(Ga,Oa)=>{var wa=ar(),ja=t(wa,!0);a(wa),u(()=>d(ja,e(Oa))),i(Ga,wa)}),i(Oe,je)},Ae=Oe=>{var je=tr();i(Oe,je)};c(Se,Oe=>{r().energySystems.length>0&&!r().energySystems.includes("None")?Oe(Le):Oe(Ae,!1)})}a(W),a(A),i(S,A)};c(Ze,S=>{r().energySystems?.length&&S(Ve)})}a(fe);var Ke=s(fe,2),Ne=t(Ke),Pe=s(t(Ne),2),ta=t(Pe);a(Pe);var aa=s(Pe,2),ha=t(aa);a(aa),a(Ne);var na=s(Ne,2),sa=s(t(na),2),oa=t(sa);a(sa);var Ie=s(sa,2),Xe=t(Ie);a(Ie),a(na);var $e=s(na,2),ra=s(t($e),2),Ue=t(ra);a(ra);var We=s(ra,2),da=t(We);a(We),a($e);var He=s($e,2);{var La=S=>{var A=rr(),W=s(t(A),2),Se=t(W);a(W);var Le=s(W,2),Ae=t(Le);a(Le),a(A),u(()=>{ia(Se,`width: ${r().openGrip/5*100}%`),d(Ae,`${r().openGrip??""}/5`)}),i(S,A)};c(He,S=>{r().openGrip&&S(La)})}var ba=s(He,2);{var ka=S=>{var A=ir(),W=s(t(A),2),Se=t(W);a(W);var Le=s(W,2),Ae=t(Le);a(Le),a(A),u(()=>{ia(Se,`width: ${r().crimpGrip/5*100}%`),d(Ae,`${r().crimpGrip??""}/5`)}),i(S,A)};c(ba,S=>{r().crimpGrip&&S(ka)})}var ya=s(ba,2);{var Da=S=>{var A=lr(),W=s(t(A),2),Se=t(W);a(W);var Le=s(W,2),Ae=t(Le);a(Le),a(A),u(()=>{ia(Se,`width: ${r().pinchGrip/5*100}%`),d(Ae,`${r().pinchGrip??""}/5`)}),i(S,A)};c(ya,S=>{r().pinchGrip&&S(Da)})}var Ta=s(ya,2);{var qa=S=>{var A=vr(),W=s(t(A),2),Se=t(W);a(W);var Le=s(W,2),Ae=t(Le);a(Le),a(A),u(()=>{ia(Se,`width: ${r().sloperGrip/5*100}%`),d(Ae,`${r().sloperGrip??""}/5`)}),i(S,A)};c(Ta,S=>{r().sloperGrip&&S(qa)})}var za=s(Ta,2);{var Ye=S=>{var A=nr(),W=s(t(A),2),Se=t(W);a(W);var Le=s(W,2),Ae=t(Le);a(Le),a(A),u(()=>{ia(Se,`width: ${r().jugGrip/5*100}%`),d(Ae,`${r().jugGrip??""}/5`)}),i(S,A)};c(za,S=>{r().jugGrip&&S(Ye)})}a(Ke);var ga=s(Ke,2),Y=s(t(ga),2),se=t(Y);De(se,17,()=>r().climbs||[],Fe,(S,A,W)=>{{let Se=ca(()=>r().climbingType==="Mixed");Rs(S,{get climb(){return e(A)},onDelete:()=>z(W),onUpdate:Le=>x(W,Le),get showClimbType(){return e(Se)}})}});var ge=s(se,2);{var Ce=S=>{var A=or();i(S,A)};c(ge,S=>{(r().climbs||[]).length===0&&S(Ce)})}a(Y),a(ga),a(I),u(()=>{ia(ta,`width: ${r().fingerLoad/5*100}%`),d(ha,`${r().fingerLoad??""}/5`),ia(oa,`width: ${r().shoulderLoad/5*100}%`),d(Xe,`${r().shoulderLoad??""}/5`),ia(Ue,`width: ${r().forearmLoad/5*100}%`),d(da,`${r().forearmLoad??""}/5`)}),va(3,I,()=>fa,()=>({duration:150})),i(f,I)};c(O,f=>{e(g)&&f(V)})}a(ce),u((f,I)=>{te=la(ce,1,"session-card svelte-d5hg2r",null,te,{expanded:e(g)}),ea(Q,"aria-expanded",e(g)),d(re,f),d(ie,I),d(j,`${r().area??""} `),d(J,r().climbingType),d(G,`${e(K)??""} climbs`),ea(T,"title",`Finger Load: ${r().fingerLoad??""}`),d(B,r().fingerLoad),ea(Z,"title",`Shoulder Load: ${r().shoulderLoad??""}`),d(L,r().shoulderLoad),ea(de,"title",`Forearm Load: ${r().forearmLoad??""}`),d(ve,r().forearmLoad),d(w,e(g)?"‚ñ≤":"‚ñº")},[()=>new Date(r().date).getDate(),()=>new Date(r().date).toLocaleDateString(void 0,{month:"short"})]),i(Te,ce),ua()}pa(["click","keydown"]);var _r=v('<span class="spinner svelte-1s7jdlh"></span> Fetching...',1),ur=v('<div class="error-banner svelte-1s7jdlh"> </div>'),fr=v('<small class="svelte-1s7jdlh">Try adjusting your filters.</small>'),gr=v('<div class="empty-state svelte-1s7jdlh"><p class="svelte-1s7jdlh">No outdoor climbing sessions found.</p> <!></div>'),mr=v('<div class="load-more-container svelte-1s7jdlh"><button class="load-more-btn svelte-1s7jdlh"> </button></div>'),hr=v('<div class="view-container svelte-1s7jdlh"><div class="view-header svelte-1s7jdlh"><h2 class="view-title svelte-1s7jdlh">‚õ∞Ô∏è Outdoor Climbing History</h2> <div class="header-actions svelte-1s7jdlh"><button class="action-btn secondary svelte-1s7jdlh" title="Export filtered data to CSV">üì• Export</button> <button class="action-btn svelte-1s7jdlh" title="Fetch data from cloud"><!></button></div></div> <!> <!> <div class="info-bar svelte-1s7jdlh"><div class="legend-wrapper svelte-1s7jdlh"><!></div> <div class="load-key svelte-1s7jdlh"><span class="key-label svelte-1s7jdlh">Load:</span> <div class="key-item svelte-1s7jdlh"><span class="dot finger svelte-1s7jdlh"></span> Finger</div> <div class="key-item svelte-1s7jdlh"><span class="dot shoulder svelte-1s7jdlh"></span> Shoulder</div> <div class="key-item svelte-1s7jdlh"><span class="dot forearm svelte-1s7jdlh"></span> Forearm</div></div></div> <div class="sessions-list"><!> <!> <!></div></div>');function br(Te,p){_a(p,!0);let r=k(ma([])),g=k(ma([])),C=k(!1),D=k(""),_=k(ma({startDate:"",endDate:"",area:"",crag:"",climbingType:"",sessionType:"",grade:""})),z=k(20);const x=20;Ua(()=>{R()});function R(){const n=Ea("outdoor_climb");l(r,n.sort((o,T)=>new Date(T.date).getTime()-new Date(o.date).getTime()),!0),te()}async function K(){l(C,!0),l(D,"");try{await Aa();const n=await it();n.ok&&n.data?ne(n.data):l(D,n.error||"Failed to fetch data",!0)}catch(n){l(D,n instanceof Error?n.message:"Unknown error",!0)}finally{l(C,!1)}}function ne(n){const o=n.map(B=>({...B,activityType:"outdoor_climb",createdAt:new Date().toISOString(),updatedAt:new Date().toISOString(),syncStatus:"synced",syncedAt:new Date().toISOString(),openGrip:0,crimpGrip:0,pinchGrip:0,sloperGrip:0,jugGrip:0}));Na(o);const T=Ea("outdoor_climb");l(r,T.sort((B,Z)=>new Date(Z.date).getTime()-new Date(B.date).getTime()),!0),te()}function ce(n){l(_,n,!0),te()}function te(){l(z,x),l(g,e(r).filter(n=>{if(e(_).startDate&&n.date<e(_).startDate||e(_).endDate&&n.date>e(_).endDate||e(_).area&&!n.area.toLowerCase().includes(e(_).area.toLowerCase())||e(_).crag&&!n.crag.toLowerCase().includes(e(_).crag.toLowerCase()))return!1;if(e(_).climbingType&&(n.climbingType==="Leading"?"Sport":n.climbingType)!==e(_).climbingType)if(n.climbingType==="Mixed")if(e(_).climbingType==="Bouldering"){if(!n.climbs.some(T=>!T.isSport))return!1}else if(e(_).climbingType==="Sport"||e(_).climbingType==="Trad"){if(!n.climbs.some(T=>T.isSport))return!1}else return!1;else return!1;if(e(_).sessionType&&!n.trainingTypes?.includes(e(_).sessionType))return!1;if(e(_).grade){const o=e(_).grade.trim().toLowerCase();if(!n.climbs.some(B=>B.grade.trim().toLowerCase()===o))return!1}return!0}),!0)}function Q(){l(z,e(z)+x)}var $=hr(),oe=t($),pe=s(t(oe),2),re=t(pe);re.__click=()=>$a(e(g),"outdoor_climbs");var U=s(re,2);U.__click=K;var ie=t(U);{var ye=n=>{var o=_r();Fa(),i(n,o)},he=n=>{var o=Ca("‚òÅÔ∏è Fetch Data");i(n,o)};c(ie,n=>{e(C)?n(ye):n(he,!1)})}a(U),a(pe),a(oe);var ee=s(oe,2);{var j=n=>{var o=ur(),T=t(o,!0);a(o),u(()=>d(T,e(D))),va(3,o,()=>fa),i(n,o)};c(ee,n=>{e(D)&&n(j)})}var m=s(ee,2);Cs(m,{onFilterParamsChange:ce});var h=s(m,2),F=t(h),M=t(F);Ya(M),a(F),Fa(2),a(h);var P=s(h,2),H=t(P);De(H,17,()=>e(g).slice(0,e(z)),n=>n.id,(n,o)=>{pr(n,{get session(){return e(o)},onDelete:R})});var J=s(H,2);{var b=n=>{var o=gr(),T=s(t(o),2);{var B=Z=>{var L=fr();i(Z,L)};c(T,Z=>{e(r).length>0&&Z(B)})}a(o),i(n,o)};c(J,n=>{e(g).length===0&&n(b)})}var G=s(J,2);{var y=n=>{var o=mr(),T=t(o);T.__click=Q;var B=t(T);a(T),a(o),u(()=>d(B,`Load More (${e(g).length-e(z)} remaining)`)),i(n,o)};c(G,n=>{e(z)<e(g).length&&n(y)})}a(P),a($),u(()=>U.disabled=e(C)),i(Te,$),ua()}pa(["click"]);var yr=v('<span class="chevron svelte-11rkzid">‚ñ≤</span>'),xr=v('<span class="chevron svelte-11rkzid">‚ñº</span>'),wr=v('<div class="filter-body svelte-11rkzid"><div class="filter-grid svelte-11rkzid"><div class="filter-item svelte-11rkzid"><label for="start-date" class="svelte-11rkzid">Start Date</label> <input type="date" id="start-date" class="svelte-11rkzid"/></div> <div class="filter-item svelte-11rkzid"><label for="end-date" class="svelte-11rkzid">End Date</label> <input type="date" id="end-date" class="svelte-11rkzid"/></div> <div class="filter-item svelte-11rkzid"><label for="name-filter" class="svelte-11rkzid">Session Name</label> <input type="text" id="name-filter" placeholder="e.g. Leg Day" class="svelte-11rkzid"/></div> <div class="filter-item svelte-11rkzid"><label for="block-filter" class="svelte-11rkzid">Training Block</label> <select id="block-filter" class="svelte-11rkzid"><option>All Blocks</option><option>Strength</option><option>Power</option><option>Power Endurance</option><option>Muscular Endurance</option></select></div></div> <div class="filter-actions svelte-11rkzid"><button class="reset-btn svelte-11rkzid">Reset Filters</button></div></div>'),Sr=v('<div class="filter-container svelte-11rkzid"><button class="filter-header svelte-11rkzid"><div class="header-content svelte-11rkzid"><span class="icon svelte-11rkzid">üîç</span> <span class="title svelte-11rkzid">Filters</span> <!></div></button> <!></div>');function kr(Te,p){_a(p,!0);let r=k(!1),g=k(""),C=k(""),D=k(""),_=k("");function z(){l(r,!e(r))}function x(){l(g,""),l(C,""),l(D,""),l(_,""),R()}function R(){p.onFilterParamsChange({startDate:e(g),endDate:e(C),name:e(D),trainingBlock:e(_)})}var K=Sr(),ne=t(K);ne.__click=z;var ce=t(ne),te=s(t(ce),4);{var Q=re=>{var U=yr();i(re,U)},$=re=>{var U=xr();i(re,U)};c(te,re=>{e(r)?re(Q):re($,!1)})}a(ce),a(ne);var oe=s(ne,2);{var pe=re=>{var U=wr(),ie=t(U),ye=t(ie),he=s(t(ye),2);Re(he),he.__change=R,a(ye);var ee=s(ye,2),j=s(t(ee),2);Re(j),j.__change=R,a(ee);var m=s(ee,2),h=s(t(m),2);Re(h),h.__input=R,a(m);var F=s(m,2),M=s(t(F),2);M.__change=R;var P=t(M);P.value=P.__value="";var H=s(P);H.value=H.__value="Strength";var J=s(H);J.value=J.__value="Power";var b=s(J);b.value=b.__value="Power Endurance";var G=s(b);G.value=G.__value="Muscular Endurance",a(M),a(F),a(ie);var y=s(ie,2),n=t(y);n.__click=x,a(y),a(U),Be(he,()=>e(g),o=>l(g,o)),Be(j,()=>e(C),o=>l(C,o)),Be(h,()=>e(D),o=>l(D,o)),Sa(M,()=>e(_),o=>l(_,o)),va(3,U,()=>fa,()=>({duration:200})),i(re,U)};c(oe,re=>{e(r)&&re(pe)})}a(K),u(()=>ea(ne,"aria-expanded",e(r))),i(Te,K),ua()}pa(["click","change","input"]);var Dr=v('<span class="status-icon pending svelte-cirrfc" title="Waiting to sync">üîÑ</span>'),Tr=v('<span class="status-icon error svelte-cirrfc" title="Sync error">‚ö†Ô∏è</span>'),qr=v('<div class="bw-info svelte-cirrfc"><span class="label svelte-cirrfc">Bodyweight:</span> </div>'),zr=v('<span class="muscle-tag svelte-cirrfc"> </span>'),Cr=v('<span class="muscle-tag svelte-cirrfc"> </span>'),Fr=v('<div class="muscle-tags svelte-cirrfc"><!> <!></div>'),Lr=v('<span class="tag w svelte-cirrfc">W</span>'),Er=v('<span class="tag f svelte-cirrfc">F</span>'),Gr=v('<span class="tag d svelte-cirrfc">D</span>'),Or=v('<div><span class="set-num svelte-cirrfc"></span> <!> <!> <!> <span class="val svelte-cirrfc"><span class="weight"> </span> <span class="x svelte-cirrfc">x</span> <span class="reps"> </span></span></div>'),jr=v('<div class="exercise-item svelte-cirrfc"><div class="exercise-header svelte-cirrfc"><h4 class="svelte-cirrfc"> </h4> <!></div> <div class="sets-grid svelte-cirrfc"></div></div>'),Ar=v('<div class="subcategory-group svelte-cirrfc"><h5 class="subcategory-header svelte-cirrfc"> </h5> <!></div>'),Nr=v('<div class="category-group svelte-cirrfc"><h4 class="category-header svelte-cirrfc"> </h4> <!></div>'),Ir=v('<div class="card-body svelte-cirrfc"><!> <div class="exercises-list svelte-cirrfc"></div></div>'),Mr=v('<div><div class="card-header svelte-cirrfc" role="button" tabindex="0"><div class="header-main svelte-cirrfc"><div class="date-badge svelte-cirrfc"><span class="day svelte-cirrfc"> </span> <span class="month svelte-cirrfc"> </span></div> <div class="session-info svelte-cirrfc"><div class="session-text"><h3 class="name svelte-cirrfc"> </h3> <div class="session-meta svelte-cirrfc"><span class="stat svelte-cirrfc"> </span> <span class="stat svelte-cirrfc"> </span> <span class="stat svelte-cirrfc"> </span></div></div></div></div> <div class="header-actions svelte-cirrfc"><div class="header-status"><!></div> <button class="btn-icon delete-session svelte-cirrfc" title="Delete Session">üóëÔ∏è</button> <span class="chevron svelte-cirrfc"> </span></div></div> <!></div> <!>',1);function Pr(Te,p){_a(p,!0);let r=k(!1),g=k(!1);function C(){l(r,!e(r))}function D(){l(g,!0)}function _(){Wa(p.session.id),l(g,!1),p.onDelete()}function z(E){return lt.find(N=>N.name===E)}let x=ca(()=>p.session.exercises?.length??0),R=ca(()=>(p.session.exercises||[]).reduce((E,N)=>E+(N.sets?.length||0),0)),K=ca(()=>(p.session.exercises||[]).reduce((E,N)=>E+(N.sets||[]).reduce((ue,be)=>ue+(be.weight||0)*(be.reps||0),0),0)),ne=ca(()=>(p.session.exercises||[]).reduce((E,N)=>{const ue=z(N.name),be=ue?.category||"Other",we=ue?.subcategory||"Misc";return E[be]||(E[be]={}),E[be][we]||(E[be][we]=[]),E[be][we].push(N),E},{}));var ce=Mr(),te=Me(ce);let Q;var $=t(te);$.__click=C,$.__keydown=E=>E.key==="Enter"&&C();var oe=t($),pe=t(oe),re=t(pe),U=t(re,!0);a(re);var ie=s(re,2),ye=t(ie,!0);a(ie),a(pe);var he=s(pe,2),ee=t(he),j=t(ee),m=t(j,!0);a(j);var h=s(j,2),F=t(h),M=t(F);a(F);var P=s(F,2),H=t(P);a(P);var J=s(P,2),b=t(J);a(J),a(h),a(ee),a(he),a(oe);var G=s(oe,2),y=t(G),n=t(y);{var o=E=>{var N=Dr();i(E,N)},T=E=>{var N=Qe(),ue=Me(N);{var be=we=>{var q=Tr();i(we,q)};c(ue,we=>{p.session.syncStatus==="error"&&we(be)},!0)}i(E,N)};c(n,E=>{p.session.syncStatus==="pending"?E(o):E(T,!1)})}a(y);var B=s(y,2);B.__click=E=>{E.stopPropagation(),D()};var Z=s(B,2),L=t(Z,!0);a(Z),a(G),a($);var de=s($,2);{var ve=E=>{var N=Ir(),ue=t(N);{var be=q=>{var w=qr(),O=s(t(w));a(w),u(()=>d(O,` ${p.session.bodyweight??""}kg`)),i(q,w)};c(ue,q=>{p.session.bodyweight&&q(be)})}var we=s(ue,2);De(we,21,()=>Object.entries(e(ne)),Fe,(q,w)=>{var O=ca(()=>Ha(e(w),2));let V=()=>e(O)[0],f=()=>e(O)[1];var I=Nr(),fe=t(I),X=t(fe,!0);a(fe);var ae=s(fe,2);De(ae,17,()=>Object.entries(f()),Fe,(le,Ee)=>{var _e=ca(()=>Ha(e(Ee),2));let ke=()=>e(_e)[0],me=()=>e(_e)[1];var qe=Ar(),ze=t(qe),Ge=t(ze,!0);a(ze);var Je=s(ze,2);De(Je,17,me,Fe,(Ze,Ve)=>{const Ke=ca(()=>z(e(Ve).name));var Ne=jr(),Pe=t(Ne),ta=t(Pe),aa=t(ta,!0);a(ta);var ha=s(ta,2);{var na=oa=>{var Ie=Fr(),Xe=t(Ie);De(Xe,17,()=>e(Ke).targetMuscles.slice(0,3),Fe,(Ue,We)=>{var da=zr(),He=t(da,!0);a(da),u(()=>d(He,e(We))),i(Ue,da)});var $e=s(Xe,2);{var ra=Ue=>{var We=Cr(),da=t(We);a(We),u(()=>d(da,`+${e(Ke).targetMuscles.length-3}`)),i(Ue,We)};c($e,Ue=>{e(Ke).targetMuscles.length>3&&Ue(ra)})}a(Ie),i(oa,Ie)};c(ha,oa=>{e(Ke)&&oa(na)})}a(Pe);var sa=s(Pe,2);De(sa,21,()=>e(Ve).sets,Fe,(oa,Ie,Xe)=>{var $e=Or();let ra;var Ue=t($e);Ue.textContent=Xe+1;var We=s(Ue,2);{var da=Ye=>{var ga=Lr();i(Ye,ga)};c(We,Ye=>{e(Ie).isWarmup&&Ye(da)})}var He=s(We,2);{var La=Ye=>{var ga=Er();i(Ye,ga)};c(He,Ye=>{e(Ie).isFailure&&Ye(La)})}var ba=s(He,2);{var ka=Ye=>{var ga=Gr();i(Ye,ga)};c(ba,Ye=>{e(Ie).isDropSet&&Ye(ka)})}var ya=s(ba,2),Da=t(ya),Ta=t(Da);a(Da);var qa=s(Da,4),za=t(qa,!0);a(qa),a(ya),a($e),u(()=>{ra=la($e,1,"set-pill svelte-cirrfc",null,ra,{completed:e(Ie).completed,warmup:e(Ie).isWarmup}),d(Ta,`${e(Ie).weight??""}kg`),d(za,e(Ie).reps)}),i(oa,$e)}),a(sa),a(Ne),u(()=>d(aa,e(Ve).name)),i(Ze,Ne)}),a(qe),u(()=>d(Ge,ke())),i(le,qe)}),a(I),u(()=>d(X,V())),i(q,I)}),a(we),a(N),va(3,N,()=>fa,()=>({duration:150})),i(E,N)};c(de,E=>{e(r)&&E(ve)})}a(te);var xe=s(te,2);Pa(xe,{get isOpen(){return e(g)},title:"Delete Session",message:"Are you sure you want to delete this session? This cannot be undone.",onConfirm:_,onCancel:()=>l(g,!1)}),u((E,N,ue)=>{Q=la(te,1,"session-card svelte-cirrfc",null,Q,{expanded:e(r)}),ea($,"aria-expanded",e(r)),d(U,E),d(ye,N),d(m,p.session.name),d(M,`${e(x)??""} Exercises`),d(H,`${e(R)??""} Sets`),d(b,`~${ue??""}kg Vol`),d(L,e(r)?"‚ñ≤":"‚ñº")},[()=>new Date(p.session.date).getDate(),()=>new Date(p.session.date).toLocaleDateString("en-GB",{month:"short"}),()=>Math.round(e(K)).toLocaleString()]),i(Te,ce),ua()}pa(["click","keydown"]);var Rr=v('<span class="spinner svelte-133enjd"></span> Fetching...',1),Br=v('<div class="error-banner svelte-133enjd"> </div>'),Vr=v('<small class="svelte-133enjd">Try adjusting your filters.</small>'),Ur=v('<div class="empty-state svelte-133enjd"><p class="svelte-133enjd">No gym sessions found.</p> <!></div>'),Wr=v('<div class="load-more-container svelte-133enjd"><button class="load-more-btn svelte-133enjd"> </button></div>'),$r=v('<div class="view-container svelte-133enjd"><div class="view-header svelte-133enjd"><h2 class="view-title svelte-133enjd">üèãÔ∏è Gym Session History</h2> <div class="header-actions svelte-133enjd"><button class="action-btn secondary svelte-133enjd" title="Export filtered data to CSV">üì• Export</button> <button class="action-btn svelte-133enjd" title="Fetch data from cloud"><!></button></div></div> <!> <!> <div class="sessions-list"><!> <!> <!></div></div>');function Hr(Te,p){_a(p,!0);let r=k(ma([])),g=k(ma([])),C=k(!1),D=k(""),_=k(ma({startDate:"",endDate:"",name:"",trainingBlock:""})),z=k(20);const x=20;Ua(()=>{R()});function R(){const b=Ea("gym_session");l(r,b.sort((G,y)=>new Date(y.date).getTime()-new Date(G.date).getTime()),!0),te()}async function K(){l(C,!0),l(D,"");try{await Aa();const b=await vt();b.ok&&b.data?ne(b.data):l(D,b.error||"Failed to fetch data",!0)}catch(b){l(D,b instanceof Error?b.message:"Unknown error",!0)}finally{l(C,!1)}}function ne(b){const G=b.map(n=>({...n,activityType:"gym_session",syncStatus:"synced",syncedAt:new Date().toISOString(),createdAt:n.createdAt||new Date().toISOString(),updatedAt:n.updatedAt||new Date().toISOString()}));Na(G);const y=Ea("gym_session");l(r,y.sort((n,o)=>new Date(o.date).getTime()-new Date(n.date).getTime()),!0),te()}function ce(b){l(_,b,!0),te()}function te(){l(z,x),l(g,e(r).filter(b=>!(e(_).startDate&&b.date<e(_).startDate||e(_).endDate&&b.date>e(_).endDate||e(_).name&&!b.name.toLowerCase().includes(e(_).name.toLowerCase())||e(_).trainingBlock&&b.trainingBlock!==e(_).trainingBlock)),!0)}function Q(){l(z,e(z)+x)}var $=$r(),oe=t($),pe=s(t(oe),2),re=t(pe);re.__click=()=>$a(e(g),"gym_sessions");var U=s(re,2);U.__click=K;var ie=t(U);{var ye=b=>{var G=Rr();Fa(),i(b,G)},he=b=>{var G=Ca("‚òÅÔ∏è Fetch Data");i(b,G)};c(ie,b=>{e(C)?b(ye):b(he,!1)})}a(U),a(pe),a(oe);var ee=s(oe,2);{var j=b=>{var G=Br(),y=t(G,!0);a(G),u(()=>d(y,e(D))),va(3,G,()=>fa),i(b,G)};c(ee,b=>{e(D)&&b(j)})}var m=s(ee,2);kr(m,{onFilterParamsChange:ce});var h=s(m,2),F=t(h);De(F,17,()=>e(g).slice(0,e(z)),b=>b.id,(b,G)=>{Pr(b,{get session(){return e(G)},onDelete:R})});var M=s(F,2);{var P=b=>{var G=Ur(),y=s(t(G),2);{var n=o=>{var T=Vr();i(o,T)};c(y,o=>{e(r).length>0&&o(n)})}a(G),i(b,G)};c(M,b=>{e(g).length===0&&b(P)})}var H=s(M,2);{var J=b=>{var G=Wr(),y=t(G);y.__click=Q;var n=t(y);a(y),a(G),u(()=>d(n,`Load More (${e(g).length-e(z)} remaining)`)),i(b,G)};c(H,b=>{e(z)<e(g).length&&b(J)})}a(h),a($),u(()=>U.disabled=e(C)),i(Te,$),ua()}pa(["click"]);var Jr=v('<span class="spinner svelte-1szs0u9"></span> Fetching...',1),Zr=v('<div class="loading svelte-1szs0u9">Loading sessions...</div>'),Kr=v('<div class="empty-state svelte-1szs0u9"><!></div>'),Xr=v('<span class="set-tag svelte-1szs0u9"> <span class="x svelte-1szs0u9">x</span> </span>'),Yr=v('<div class="ex-notes svelte-1szs0u9"> </div>'),Qr=v('<div class="exercise-item svelte-1szs0u9"><div class="ex-header svelte-1szs0u9"><span class="ex-name svelte-1szs0u9"> </span> <span class="ex-grip svelte-1szs0u9"> </span></div> <div class="ex-sets svelte-1szs0u9"></div> <!></div>'),ei=v('<div class="card-body svelte-1szs0u9"><div class="exercises-list svelte-1szs0u9"></div></div>'),ai=v('<div><div class="card-header svelte-1szs0u9" role="button" tabindex="0"><div class="header-main"><span class="session-date svelte-1szs0u9"> </span> <span class="meta svelte-1szs0u9"><!> </span></div> <div class="header-status svelte-1szs0u9"><span>‚óè</span> <button class="btn-icon delete-btn svelte-1szs0u9" title="Delete Session">üóëÔ∏è</button> <span class="chevron svelte-1szs0u9"> </span></div></div> <!></div>'),ti=v('<div class="load-more-container svelte-1szs0u9"><button class="load-more-btn svelte-1szs0u9"> </button></div>'),si=v('<div class="timeline svelte-1szs0u9"><!> <!></div>'),ri=v('<div class="view-content svelte-1szs0u9"><div class="header svelte-1szs0u9"><h3 class="svelte-1szs0u9">ü§è Fingerboarding Log</h3> <button class="fetch-btn svelte-1szs0u9" title="Fetch data from cloud"><!></button></div> <div class="filters svelte-1szs0u9"><div class="filter-group svelte-1szs0u9"><label for="start-date" class="svelte-1szs0u9">From</label> <input type="date" id="start-date" class="svelte-1szs0u9"/></div> <div class="filter-group svelte-1szs0u9"><label for="end-date" class="svelte-1szs0u9">To</label> <input type="date" id="end-date" class="svelte-1szs0u9"/></div></div> <!></div> <!>',1);function ii(Te,p){_a(p,!0);let r=k(ma([])),g=k(!0),C=k(""),D=k(""),_=k(ma(new Set)),z=k(20);const x=20;Qa(()=>{e(C),e(D),l(z,x)});let R=k(!1),K=k(null);function ne(y){l(K,y,!0),l(R,!0)}function ce(){e(K)&&(Wa(e(K)),l(K,null),l(R,!1),l(r,Ba().sort((y,n)=>new Date(n.date).getTime()-new Date(y.date).getTime()),!0))}async function te(){l(g,!0),l(r,Ba().sort((y,n)=>new Date(n.date).getTime()-new Date(y.date).getTime()),!0);try{await Aa();const y=await nt();if(y.ok&&y.data){const n=y.data.map(o=>({...o,activityType:"fingerboarding",createdAt:o.createdAt||new Date().toISOString(),updatedAt:o.updatedAt||new Date().toISOString(),syncStatus:"synced"}));Na(n),l(r,Ba().sort((o,T)=>new Date(T.date).getTime()-new Date(o.date).getTime()),!0)}}catch(y){console.error("Failed to sync",y)}finally{l(g,!1)}}te();let Q=ca(()=>e(r).filter(y=>!(e(C)&&new Date(y.date)<new Date(e(C))||e(D)&&new Date(y.date)>new Date(e(D)))));function $(){l(z,e(z)+x)}function oe(y){e(_).has(y)?e(_).delete(y):e(_).add(y),l(_,new Set(e(_)),!0)}function pe(y){return y.exercises.reduce((n,o)=>n+o.details.length,0)}var re=ri(),U=Me(re),ie=t(U),ye=s(t(ie),2);ye.__click=te;var he=t(ye);{var ee=y=>{var n=Jr();Fa(),i(y,n)},j=y=>{var n=Ca("‚òÅÔ∏è Fetch Data");i(y,n)};c(he,y=>{e(g)?y(ee):y(j,!1)})}a(ye),a(ie);var m=s(ie,2),h=t(m),F=s(t(h),2);Re(F),a(h);var M=s(h,2),P=s(t(M),2);Re(P),a(M),a(m);var H=s(m,2);{var J=y=>{var n=Zr();i(y,n)},b=y=>{var n=Qe(),o=Me(n);{var T=Z=>{var L=Kr(),de=t(L);{var ve=E=>{var N=Ca("No sessions match filter.");i(E,N)},xe=E=>{var N=Ca("No fingerboarding sessions logged yet.");i(E,N)};c(de,E=>{e(r).length>0?E(ve):E(xe,!1)})}a(L),i(Z,L)},B=Z=>{var L=si(),de=t(L);De(de,17,()=>e(Q).slice(0,e(z)),Fe,(E,N)=>{var ue=ai();let be;var we=t(ue);we.__click=()=>oe(e(N).id),we.__keydown=ze=>ze.key==="Enter"&&oe(e(N).id);var q=t(we),w=t(q),O=t(w,!0);a(w);var V=s(w,2),f=t(V);{var I=ze=>{var Ge=Ca();u(()=>d(Ge,`${e(N).location??""} ¬∑`)),i(ze,Ge)};c(f,ze=>{e(N).location&&e(N).location!=="N/A"&&e(N).location!=="Home"&&ze(I)})}var fe=s(f);a(V),a(q);var X=s(q,2),ae=t(X);let le;var Ee=s(ae,2);Ee.__click=ze=>{ze.stopPropagation(),ne(e(N).id)};var _e=s(Ee,2),ke=t(_e,!0);a(_e),a(X),a(we);var me=s(we,2);{var qe=ze=>{var Ge=ei(),Je=t(Ge);De(Je,21,()=>e(N).exercises||[],Fe,(Ze,Ve)=>{var Ke=Qr(),Ne=t(Ke),Pe=t(Ne),ta=t(Pe,!0);a(Pe);var aa=s(Pe,2),ha=t(aa,!0);a(aa),a(Ne);var na=s(Ne,2);De(na,21,()=>e(Ve).details,Fe,(Ie,Xe)=>{var $e=Xr(),ra=t($e),Ue=s(ra,2);a($e),u(()=>{d(ra,`${e(Xe).weight>0?`+${e(Xe).weight}kg`:"BW"} `),d(Ue,` ${e(Xe).reps??""}s/reps`)}),i(Ie,$e)}),a(na);var sa=s(na,2);{var oa=Ie=>{var Xe=Yr(),$e=t(Xe);a(Xe),u(()=>d($e,`"${e(Ve).notes??""}"`)),i(Ie,Xe)};c(sa,Ie=>{e(Ve).notes&&Ie(oa)})}a(Ke),u(()=>{d(ta,e(Ve).name),d(ha,e(Ve).gripType)}),i(Ze,Ke)}),a(Je),a(Ge),va(3,Ge,()=>fa,()=>({duration:150})),i(ze,Ge)};c(me,ze=>{e(_).has(e(N).id)&&ze(qe)})}a(ue),u((ze,Ge,Je,Ze)=>{be=la(ue,1,"session-card svelte-1szs0u9",null,be,ze),d(O,Ge),d(fe,` ${e(N).exercises.length??""} Exercises ¬∑ ${Je??""} Sets`),le=la(ae,1,"sync-dot svelte-1szs0u9",null,le,{synced:e(N).syncStatus==="synced"}),ea(ae,"title",e(N).syncStatus==="synced"?"Synced":"Local"),d(ke,Ze)},[()=>({expanded:e(_).has(e(N).id)}),()=>new Date(e(N).date).toLocaleDateString(void 0,{weekday:"short",month:"short",day:"numeric"}),()=>pe(e(N)),()=>e(_).has(e(N).id)?"‚ñ≤":"‚ñº"]),i(E,ue)});var ve=s(de,2);{var xe=E=>{var N=ti(),ue=t(N);ue.__click=$;var be=t(ue);a(ue),a(N),u(()=>d(be,`Load More (${e(Q).length-e(z)} remaining)`)),i(E,N)};c(ve,E=>{e(z)<e(Q).length&&E(xe)})}a(L),i(Z,L)};c(o,Z=>{e(Q).length===0?Z(T):Z(B,!1)},!0)}i(y,n)};c(H,y=>{e(g)&&e(r).length===0?y(J):y(b,!1)})}a(U);var G=s(U,2);Pa(G,{get isOpen(){return e(R)},title:"Delete Fingerboard Session",message:"Are you sure you want to delete this session? This cannot be undone.",onConfirm:ce,onCancel:()=>l(R,!1)}),u(()=>ye.disabled=e(g)),Be(F,()=>e(C),y=>l(C,y)),Be(P,()=>e(D),y=>l(D,y)),i(Te,re),ua()}pa(["click","keydown"]);var li=v('<span class="spinner svelte-xyvf5r"></span> Fetching...',1),vi=v('<div class="loading svelte-xyvf5r">Loading sessions...</div>'),ni=v('<div class="empty-state svelte-xyvf5r">No competitions logged yet.</div>'),oi=v('<span class="round-pos svelte-xyvf5r"> </span>'),di=v('<span class="c-attempts svelte-xyvf5r"> </span>'),ci=v('<div class="climb-notes svelte-xyvf5r"> </div>'),pi=v('<div class="climb-row svelte-xyvf5r"><div class="climb-info svelte-xyvf5r"><span class="c-name svelte-xyvf5r"> </span> <!></div> <div class="climb-result"><span> </span></div></div> <!>',1),_i=v('<div class="climbs-list"></div>'),ui=v('<div class="round-item svelte-xyvf5r"><div class="round-header svelte-xyvf5r"><span class="round-name"> </span> <!></div> <!></div>'),fi=v('<div class="rounds-list svelte-xyvf5r"></div>'),gi=v('<div class="load-meta svelte-xyvf5r"><span> </span></div>'),mi=v('<div class="card-body svelte-xyvf5r"><!> <!> <div class="session-footer svelte-xyvf5r"><span> </span></div></div>'),hi=v('<div><div class="card-header svelte-xyvf5r" role="button" tabindex="0"><div class="header-main svelte-xyvf5r"><div class="left-col svelte-xyvf5r"><span class="venue svelte-xyvf5r"> </span> <span class="date svelte-xyvf5r"> </span></div> <div class="right-col svelte-xyvf5r"><div class="badges svelte-xyvf5r"><span class="type-tag svelte-xyvf5r"> </span> <span class="result-tag svelte-xyvf5r"> </span></div></div></div> <div class="header-status svelte-xyvf5r"><span>‚óè</span> <button class="btn-icon delete-btn svelte-xyvf5r" title="Delete Session">üóëÔ∏è</button> <span class="chevron svelte-xyvf5r"> </span></div></div> <!></div>'),bi=v('<div class="load-more-container svelte-xyvf5r"><button class="load-more-btn svelte-xyvf5r"> </button></div>'),yi=v('<div class="timeline svelte-xyvf5r"><!> <!></div>'),xi=v('<div class="view-content svelte-xyvf5r"><div class="header svelte-xyvf5r"><h3 class="svelte-xyvf5r">üèÜ Competition Log</h3> <button class="fetch-btn svelte-xyvf5r" title="Fetch data from cloud"><!></button></div> <!> <!></div>');function wi(Te,p){_a(p,!0);let r=k(ma([])),g=k(!0),C=k(ma(new Set)),D=k(20);const _=20;let z=k(!1),x=k(null);function R(m){l(x,m,!0),l(z,!0)}function K(){e(x)&&(Wa(e(x)),l(x,null),l(z,!1),l(r,Va().sort((m,h)=>new Date(h.date).getTime()-new Date(m.date).getTime()),!0))}async function ne(){l(g,!0),l(D,_),l(r,Va().sort((m,h)=>new Date(h.date).getTime()-new Date(m.date).getTime()),!0);try{await Aa();const m=await ot();if(m.ok&&m.data){const h=m.data.map(F=>({...F,activityType:"competition",type:F.type,rounds:F.rounds.map(M=>({...M,climbs:M.climbs?.map(P=>({...P,status:P.status}))})),createdAt:F.createdAt||new Date().toISOString(),updatedAt:F.updatedAt||new Date().toISOString(),syncStatus:"synced"}));Na(h),l(r,Va().sort((F,M)=>new Date(M.date).getTime()-new Date(F.date).getTime()),!0)}}catch(m){console.error("Failed to sync",m)}finally{l(g,!1)}}ne();function ce(m){e(C).has(m)?e(C).delete(m):e(C).add(m),l(C,new Set(e(C)),!0)}function te(){l(D,e(D)+_)}function Q(m){if(!m.rounds||m.rounds.length===0)return"No rounds";const h=m.rounds[m.rounds.length-1];if(h.position)return`#${h.position} ${h.name}`;if(h.climbs){const F=h.climbs.filter(P=>P.status==="Top"||P.status==="Flash").length,M=h.climbs.filter(P=>P.status==="Zone").length;return`${m.rounds.length} Rnds ¬∑ Final: ${F}T ${M+F}Z`}return h.name}var $=xi(),oe=t($),pe=s(t(oe),2);pe.__click=ne;var re=t(pe);{var U=m=>{var h=li();Fa(),i(m,h)},ie=m=>{var h=Ca("‚òÅÔ∏è Fetch Data");i(m,h)};c(re,m=>{e(g)?m(U):m(ie,!1)})}a(pe),a(oe);var ye=s(oe,2);{var he=m=>{var h=vi();i(m,h)},ee=m=>{var h=Qe(),F=Me(h);{var M=H=>{var J=ni();i(H,J)},P=H=>{var J=yi(),b=t(J);De(b,17,()=>e(r).slice(0,e(D)),Fe,(n,o)=>{var T=hi();let B;var Z=t(T);Z.__click=()=>ce(e(o).id),Z.__keydown=_e=>_e.key==="Enter"&&ce(e(o).id);var L=t(Z),de=t(L),ve=t(de),xe=t(ve,!0);a(ve);var E=s(ve,2),N=t(E,!0);a(E),a(de);var ue=s(de,2),be=t(ue),we=t(be),q=t(we,!0);a(we);var w=s(we,2),O=t(w,!0);a(w),a(be),a(ue),a(L);var V=s(L,2),f=t(V);let I;var fe=s(f,2);fe.__click=_e=>{_e.stopPropagation(),R(e(o).id)};var X=s(fe,2),ae=t(X,!0);a(X),a(V),a(Z);var le=s(Z,2);{var Ee=_e=>{var ke=mi(),me=t(ke);{var qe=Ne=>{var Pe=fi();De(Pe,21,()=>e(o).rounds||[],Fe,(ta,aa)=>{var ha=ui(),na=t(ha),sa=t(na),oa=t(sa,!0);a(sa);var Ie=s(sa,2);{var Xe=Ue=>{var We=oi(),da=t(We);a(We),u(()=>d(da,`#${e(aa).position??""}`)),i(Ue,We)};c(Ie,Ue=>{e(aa).position&&Ue(Xe)})}a(na);var $e=s(na,2);{var ra=Ue=>{var We=_i();De(We,21,()=>e(aa).climbs||[],Fe,(da,He)=>{var La=pi(),ba=Me(La),ka=t(ba),ya=t(ka),Da=t(ya,!0);a(ya);var Ta=s(ya,2);{var qa=Ce=>{var S=di(),A=t(S);a(S),u(()=>d(A,`(${e(He).attemptCount??""} tries)`)),i(Ce,S)};c(Ta,Ce=>{e(He).attemptCount>1&&Ce(qa)})}a(ka);var za=s(ka,2),Ye=t(za);let ga;var Y=t(Ye,!0);a(Ye),a(za),a(ba);var se=s(ba,2);{var ge=Ce=>{var S=ci(),A=t(S);a(S),u(()=>d(A,`"${e(He).notes??""}"`)),i(Ce,S)};c(se,Ce=>{e(He).notes&&Ce(ge)})}u(()=>{d(Da,e(He).name),ga=la(Ye,1,"status-badge svelte-xyvf5r",null,ga,{top:e(He).status==="Top"||e(He).status==="Flash",zone:e(He).status==="Zone"}),d(Y,e(He).status)}),i(da,La)}),a(We),i(Ue,We)};c($e,Ue=>{e(aa).climbs&&Ue(ra)})}a(ha),u(()=>d(oa,e(aa).name)),i(ta,ha)}),a(Pe),i(Ne,Pe)};c(me,Ne=>{e(o).rounds&&Ne(qe)})}var ze=s(me,2);{var Ge=Ne=>{var Pe=gi(),ta=t(Pe),aa=t(ta);a(ta),a(Pe),u(()=>d(aa,`Detailed Load: Fingers ${e(o).fingerLoad??""}/5, Shoulders ${e(o).shoulderLoad??""}/5, Forearms ${e(o).forearmLoad??""}/5`)),i(Ne,Pe)};c(ze,Ne=>{(e(o).fingerLoad||e(o).shoulderLoad)&&Ne(Ge)})}var Je=s(ze,2),Ze=t(Je);let Ve;var Ke=t(Ze,!0);a(Ze),a(Je),a(ke),u(()=>{Ve=la(Ze,1,"sync-status svelte-xyvf5r",null,Ve,{synced:e(o).syncStatus==="synced"}),d(Ke,e(o).syncStatus==="synced"?"‚úì Synced":"‚òÅ Local")}),va(3,ke,()=>fa,()=>({duration:150})),i(_e,ke)};c(le,_e=>{e(C).has(e(o).id)&&_e(Ee)})}a(T),u((_e,ke,me,qe)=>{B=la(T,1,"session-card svelte-xyvf5r",null,B,_e),d(xe,e(o).customVenue||e(o).venue),d(N,ke),d(q,e(o).type),d(O,me),I=la(f,1,"sync-dot",null,I,{synced:e(o).syncStatus==="synced"}),ea(f,"title",e(o).syncStatus==="synced"?"Synced":"Local"),d(ae,qe)},[()=>({expanded:e(C).has(e(o).id)}),()=>new Date(e(o).date).toLocaleDateString(void 0,{weekday:"short",day:"numeric",month:"short"}),()=>Q(e(o)),()=>e(C).has(e(o).id)?"‚ñ≤":"‚ñº"]),i(n,T)});var G=s(b,2);{var y=n=>{var o=bi(),T=t(o);T.__click=te;var B=t(T);a(T),a(o),u(()=>d(B,`Load More (${e(r).length-e(D)} remaining)`)),i(n,o)};c(G,n=>{e(D)<e(r).length&&n(y)})}a(J),i(H,J)};c(F,H=>{e(r).length===0?H(M):H(P,!1)},!0)}i(m,h)};c(ye,m=>{e(g)&&e(r).length===0?m(he):m(ee,!1)})}var j=s(ye,2);Pa(j,{get isOpen(){return e(z)},title:"Delete Competition",message:"Are you sure you want to delete this competition session? This action cannot be undone.",onConfirm:K,onCancel:()=>l(z,!1)}),a($),u(()=>pe.disabled=e(g)),i(Te,$),ua()}pa(["click","keydown"]);var Si=v('<button class="backdrop svelte-108px9u" aria-label="Close settings"></button> <div class="settings-modal svelte-108px9u" role="dialog" aria-modal="true"><div class="settings-header svelte-108px9u"><h3 class="svelte-108px9u">Settings</h3> <button class="close-btn svelte-108px9u">‚úï</button></div> <div class="settings-content"><div class="setting-item svelte-108px9u"><div class="setting-info svelte-108px9u"><span class="setting-label svelte-108px9u">Local Data</span> <span class="setting-desc svelte-108px9u">Clear all cached data on this device</span></div> <button class="btn-clear-cache svelte-108px9u">Clear Cache</button></div></div></div>',1),ki=v("<option> </option>"),Di=v('<div class="view-container svelte-108px9u"><!></div>'),Ti=v('<div class="page svelte-108px9u"><div class="page-header svelte-108px9u"><div><h1 class="svelte-108px9u">üìä View Data</h1> <p class="subtitle svelte-108px9u">Browse your training history</p></div> <button class="settings-btn svelte-108px9u" aria-label="Settings">‚öôÔ∏è</button></div> <!> <!> <div class="content-card svelte-108px9u"><div class="form-group svelte-108px9u"><label for="activity-type" class="svelte-108px9u">Activity Type</label> <select id="activity-type" class="svelte-108px9u"><option disabled>Select an activity...</option><!></select></div> <!></div></div>');function Ai(Te,p){_a(p,!0);const r=[{value:"indoor_climb",label:"Indoor Climb",icon:"üßó"},{value:"outdoor_climb",label:"Outdoor Climb",icon:"‚õ∞Ô∏è"},{value:"gym_session",label:"Gym Session",icon:"üèãÔ∏è"},{value:"fingerboarding",label:"Fingerboarding",icon:"ü§è"},{value:"competition",label:"Competition",icon:"üèÜ"}];let g=k(""),C=k(!1),D=k(!1);function _(){l(C,!0)}function z(){l(C,!1)}function x(){l(C,!1),l(D,!0)}function R(){pt()}var K=Ti(),ne=t(K),ce=s(t(ne),2);ce.__click=_,a(ne);var te=s(ne,2);{var Q=ee=>{var j=Si(),m=Me(j);m.__click=z;var h=s(m,2),F=t(h),M=s(t(F),2);M.__click=z,a(F);var P=s(F,2),H=t(P),J=s(t(H),2);J.__click=x,a(H),a(P),a(h),va(3,m,()=>dt,()=>({duration:200})),va(3,h,()=>ct,()=>({duration:200,start:.9})),i(ee,j)};c(te,ee=>{e(C)&&ee(Q)})}var $=s(te,2);Pa($,{get isOpen(){return e(D)},title:"Clear all local data?",message:"Are you sure you want to clear all locally cached data? This will remove all sessions stored on this device. Data already synced to the cloud will be preserved.",confirmKeyword:"clear",onConfirm:R,onCancel:()=>l(D,!1)});var oe=s($,2),pe=t(oe),re=s(t(pe),2),U=t(re);U.value=U.__value="";var ie=s(U);De(ie,17,()=>r,ee=>ee.value,(ee,j)=>{var m=ki(),h=t(m);a(m);var F={};u(()=>{d(h,`${e(j).icon??""} ${e(j).label??""}`),F!==(F=e(j).value)&&(m.value=(m.__value=e(j).value)??"")}),i(ee,m)}),a(re),a(pe);var ye=s(pe,2);{var he=ee=>{var j=Di(),m=t(j);{var h=M=>{fs(M,{})},F=M=>{var P=Qe(),H=Me(P);{var J=G=>{br(G,{})},b=G=>{var y=Qe(),n=Me(y);{var o=B=>{Hr(B,{})},T=B=>{var Z=Qe(),L=Me(Z);{var de=xe=>{ii(xe,{})},ve=xe=>{var E=Qe(),N=Me(E);{var ue=be=>{wi(be,{})};c(N,be=>{e(g)==="competition"&&be(ue)},!0)}i(xe,E)};c(L,xe=>{e(g)==="fingerboarding"?xe(de):xe(ve,!1)},!0)}i(B,Z)};c(n,B=>{e(g)==="gym_session"?B(o):B(T,!1)},!0)}i(G,y)};c(H,G=>{e(g)==="outdoor_climb"?G(J):G(b,!1)},!0)}i(M,P)};c(m,M=>{e(g)==="indoor_climb"?M(h):M(F,!1)})}a(j),i(ee,j)};c(ye,ee=>{e(g)&&ee(he)})}a(oe),a(K),Sa(re,()=>e(g),ee=>l(g,ee)),i(Te,K),ua()}pa(["click"]);export{Ai as component};
