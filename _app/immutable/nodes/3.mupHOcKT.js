import{f as p,a as i,c as mt,t as Pe}from"../chunks/C7ZOrG79.js";import{a1 as Wa,p as Tt,c as l,r as a,s,i as e,t as C,a as Nt,f as lt,aV as h,w as ct,o as na,x as t,d as Sa,aG as Qe,b0 as ka,aW as Kt,b1 as wa,j as We,e as he,b2 as Oa,ac as Oe,b3 as Ba,b4 as Ut,b5 as Ia,b6 as Ja,v as Va,b7 as Ha}from"../chunks/DeIY3UD2.js";import{d as va,s as W,e as B}from"../chunks/BL09rjKV.js";import{i as O}from"../chunks/C7-VmZUr.js";import{e as de,i as pe,r as U,b as P,c as Ma,s as Ct,d as Ka}from"../chunks/B2YICR1D.js";import{s as He}from"../chunks/DXqZ3xgB.js";import{i as Ra,s as Da,c as Je,d as Ya,u as Ga,m as Ea,b as Fa,e as Qa,f as Pa,h as Xa,j as Za,k as es,l as ts}from"../chunks/Cz46uNnZ.js";import{i as xa,c as as,g as ss,a as ls,b as rs,t as oa,s as is,f as $a,d as za,E as ha,D as os,e as ns,h as vs,j as cs,k as ds}from"../chunks/C2p8zr_t.js";import{p as gt}from"../chunks/BV00zs06.js";import{i as ca}from"../chunks/DWFjyal0.js";import{b as us}from"../chunks/DusjAHnH.js";function ps(Se){return function(...A){var g=A[0];g.target===this&&Se?.apply(this,A)}}function La(Se){return function(...A){var g=A[0];return g.stopPropagation(),Se?.apply(this,A)}}function Qt(Se,A){var g=Se.$$events?.[A.type],T=Wa(g)?g.slice():g==null?[]:[g];for(var X of T)X.call(this,A)}var fs=p('<span class="placeholder svelte-1g8x5ph"> </span>'),_s=p('<span class="chip-display"> </span>'),ms=p('<button type="button"> </button>'),gs=p('<div class="multi-select-container svelte-1g8x5ph"><div class="chips svelte-1g8x5ph"><!></div> <div class="options-grid svelte-1g8x5ph"></div></div>');function Yt(Se,A){Tt(A,!0);let g=gt(A,"selected",19,()=>[]),T=gt(A,"placeholder",3,"Select options...");function X(J){let k=[...g()];J==="None"?k.includes("None")?k=[]:k=["None"]:(k=k.filter(L=>L!=="None"),k.includes(J)?k=k.filter(L=>L!==J):k.push(J)),A.onChange(k)}var w=gs(),V=l(w),I=l(V);{var S=J=>{var k=fs(),L=l(k,!0);a(k),C(()=>W(L,T())),i(J,k)},j=J=>{var k=mt(),L=lt(k);de(L,17,g,pe,(H,x)=>{var f=_s(),G=l(f,!0);a(f),C(()=>W(G,e(x))),i(H,f)}),i(J,k)};O(I,J=>{g().length===0?J(S):J(j,!1)})}a(V);var z=s(V,2);de(z,21,()=>A.options,pe,(J,k)=>{var L=ms();L.__click=()=>X(e(k));var H=l(L,!0);a(L),C(x=>{He(L,1,`option-chip ${x??""}`,"svelte-1g8x5ph"),W(H,e(k))},[()=>g().includes(e(k))?"selected":""]),i(J,L)}),a(z),a(w),i(Se,w),Nt()}va(["click"]);var bs=p('<div class="input-with-action svelte-1lf3qka"><input type="text" id="location-manual" placeholder="Enter custom location..." class="flat-left svelte-1lf3qka"/> <button type="button" class="action-btn flat-right svelte-1lf3qka" title="Back to list">‚úï</button></div>'),ys=p("<option> </option>"),hs=p('<select id="location" class="svelte-1lf3qka"><option disabled>Select location...</option><!></select>'),Ss=p("<option> </option>"),ks=p("<option> </option>"),ws=p('<th class="svelte-1lf3qka">Sport?</th>'),xs=p('<td class="center svelte-1lf3qka"><input type="checkbox" class="svelte-1lf3qka"/></td>'),qs=p('<span class="grade-error svelte-1lf3qka">Invalid</span>'),Cs=p("<option> </option>"),Ts=p("<option> </option>"),Ns=p("<option> </option>"),Os=p('<button type="button" class="remove-btn svelte-1lf3qka">‚úï</button>'),Ls=p('<tr><!><td class="svelte-1lf3qka"><input type="text" placeholder="Route name..." class="svelte-1lf3qka"/></td><td class="svelte-1lf3qka"><input type="text" placeholder="V3"/> <!></td><td class="svelte-1lf3qka"><select class="svelte-1lf3qka"></select></td><td class="svelte-1lf3qka"><input type="number" min="1" class="svelte-1lf3qka"/></td><td class="svelte-1lf3qka"><select class="svelte-1lf3qka"></select></td><td class="svelte-1lf3qka"><select class="svelte-1lf3qka"></select></td><td><textarea placeholder="Notes..." class="svelte-1lf3qka"></textarea></td><td class="center svelte-1lf3qka"><!></td></tr>'),Gs=p("<div> </div>"),Es=p('<div class="form-content svelte-1lf3qka"><h3 class="svelte-1lf3qka">üßó Indoor Climb</h3> <div class="form-row svelte-1lf3qka"><div class="form-group svelte-1lf3qka"><label for="date" class="svelte-1lf3qka">Date</label> <input type="date" id="date" class="svelte-1lf3qka"/></div> <div class="form-group svelte-1lf3qka"><label for="location" class="svelte-1lf3qka">Location</label> <!></div></div> <div class="form-group svelte-1lf3qka"><label for="climbing-type" class="svelte-1lf3qka">Climbing Type</label> <select id="climbing-type" class="svelte-1lf3qka"><option disabled>Select type...</option><!></select></div> <div class="load-section svelte-1lf3qka"><h4 class="svelte-1lf3qka">Load Metrics</h4> <div class="load-metrics svelte-1lf3qka"><div class="load-item svelte-1lf3qka"><label for="finger-load" class="svelte-1lf3qka">Finger</label> <input type="number" id="finger-load" min="1" max="5" class="svelte-1lf3qka"/> <span class="load-scale svelte-1lf3qka">/ 5</span></div> <div class="load-item svelte-1lf3qka"><label for="shoulder-load" class="svelte-1lf3qka">Shoulder</label> <input type="number" id="shoulder-load" min="1" max="5" class="svelte-1lf3qka"/> <span class="load-scale svelte-1lf3qka">/ 5</span></div> <div class="load-item svelte-1lf3qka"><label for="forearm-load" class="svelte-1lf3qka">Forearm</label> <input type="number" id="forearm-load" min="1" max="5" class="svelte-1lf3qka"/> <span class="load-scale svelte-1lf3qka">/ 5</span></div></div> <h4 class="mt-4 svelte-1lf3qka">Grip Metrics</h4> <div class="load-metrics svelte-1lf3qka"><div class="load-item svelte-1lf3qka"><label for="open-grip" class="svelte-1lf3qka">Open</label> <input type="number" id="open-grip" min="1" max="5" class="svelte-1lf3qka"/> <span class="load-scale svelte-1lf3qka">/ 5</span></div> <div class="load-item svelte-1lf3qka"><label for="crimp-grip" class="svelte-1lf3qka">Crimp</label> <input type="number" id="crimp-grip" min="1" max="5" class="svelte-1lf3qka"/> <span class="load-scale svelte-1lf3qka">/ 5</span></div> <div class="load-item svelte-1lf3qka"><label for="pinch-grip" class="svelte-1lf3qka">Pinch</label> <input type="number" id="pinch-grip" min="1" max="5" class="svelte-1lf3qka"/> <span class="load-scale svelte-1lf3qka">/ 5</span></div> <div class="load-item svelte-1lf3qka"><label for="sloper-grip" class="svelte-1lf3qka">Sloper</label> <input type="number" id="sloper-grip" min="1" max="5" class="svelte-1lf3qka"/> <span class="load-scale svelte-1lf3qka">/ 5</span></div> <div class="load-item svelte-1lf3qka"><label for="jug-grip" class="svelte-1lf3qka">Jug</label> <input type="number" id="jug-grip" min="1" max="5" class="svelte-1lf3qka"/> <span class="load-scale svelte-1lf3qka">/ 5</span></div></div></div> <div class="training-section svelte-1lf3qka"><h4 class="svelte-1lf3qka">Training Details</h4> <div class="training-grid svelte-1lf3qka"><div class="training-item svelte-1lf3qka"><label for="training-type" class="svelte-1lf3qka">Training Type</label> <!></div> <div class="training-item svelte-1lf3qka"><label for="difficulty" class="svelte-1lf3qka">Difficulty</label> <select id="difficulty" class="svelte-1lf3qka"></select></div> <div class="training-item svelte-1lf3qka"><label for="category" class="svelte-1lf3qka">Category</label> <!></div> <div class="training-item svelte-1lf3qka"><label for="energy-system" class="svelte-1lf3qka">Energy System</label> <!></div> <div class="training-item svelte-1lf3qka"><label for="wall-angle" class="svelte-1lf3qka">Wall</label> <!></div></div></div> <div class="form-group notes-section svelte-1lf3qka"><label for="session-notes" class="svelte-1lf3qka">Session Notes</label> <textarea id="session-notes" placeholder="How did the session feel? Energy levels, mood, etc." rows="3" class="svelte-1lf3qka"></textarea></div> <div class="climbs-section svelte-1lf3qka"><h4 class="svelte-1lf3qka">Climbs</h4> <div class="table-container svelte-1lf3qka"><table class="climbs-table svelte-1lf3qka"><thead><tr><!><th class="svelte-1lf3qka">Name</th><th class="svelte-1lf3qka">Grade</th><th class="svelte-1lf3qka">Attempt</th><th class="svelte-1lf3qka">#</th><th class="svelte-1lf3qka">Wall Angle</th><th class="svelte-1lf3qka">Technique Focus</th><th class="svelte-1lf3qka">Notes</th><th class="svelte-1lf3qka"></th></tr></thead><tbody></tbody></table></div> <button type="button" class="add-btn svelte-1lf3qka">+ Add Climb</button></div> <div class="submit-section svelte-1lf3qka"><!> <button type="button" class="submit-btn svelte-1lf3qka"><!></button></div></div>');function Fs(Se,A){Tt(A,!0);const g=["Rockstar Unit 3","Rockstar Unit 5","Rockstar Techno","Flashpoint Bristol","Redpoint Bristol","TCH Bristol","TCA Mothership","TCA Church","TCA Arc","Bloc","270 Climbing","Other"],T=["Bouldering","Sport","Mixed"],X=["Onsight","Flash","Redpoint","Repeat","Dogged","DNF"],w=["None","Projecting","Onsighting","Campusing","Repeaters","Comp Sim"],V=["None","Easy","Medium","Hard","Max","Limit+"],I=["None","Strength","Power","Strength Capacity","Power Capacity","Strength Endurance","Power Endurance","Endurance","Coordination","Slab Technique","Overhang Technique"],S=["None","Aerobic Lactic Capacity","Aerobic Lactic Power","Anaerobic Alactic Capacity","Anaerobic Alactic Power","Anaerobic Power","Anaerobic Lactic Capacity"],j=["None","Trusting feet","Double-clutch","Standing on volumes","Deadpointing","Flagging","Swapping feet","Edging","Smearing","Matching","Backstepping","Drop Knee","Bridging","Laybacking","Mantling","Kneebar","Dyno","Pogo","Coordination Moves","Gastoning","Undercutting","Compressing","Heel Hook","Toe Hook","Bicycle"],z=["None","Overhang","Vertical","Slab","Roof"],J=["None","Moon Board","Kilter Board","Tension Board","Beast","Circuit Board","Boulder wall","Lead wall","Comp wall","Auto belays"],L=["V0-","4-","V0","4","V0+","4+","V1","5","V2","5+","V3","6A","6A+","V4","6B","6B+","V5","6C","6C+","V6","7A","V7","7A+","V8","7B","7B+","V9","7C","V10","7C+","V11","8A","V12","8A+","V13","8B","V14","8B+","V15","8C","V16","8C+","V17","9A"].map(_=>_.toLowerCase());let H=h(null),x=h(ct(new Date().toISOString().split("T")[0])),f=h(""),G=h(""),R=h(ct(["None"])),ee=h("None"),u=h(ct(["None"])),y=h(ct(["None"])),N=h(ct(["None"])),M=h(3),$=h(3),Y=h(3),ae=h(3),Z=h(3),re=h(3),q=h(3),d=h(3),m=h(ct([{isSport:!1,name:"",grade:"",attemptType:"Flash",attemptsNum:1,notes:"",wall:"Overhang"}])),Q=h(""),se=h(!1);const D="indoor_climb_draft";let E=h(!1);na(()=>{const _=localStorage.getItem(D);if(_)try{const n=JSON.parse(_);n.location&&t(f,n.location,!0),n.isOtherLocation&&t(se,n.isOtherLocation,!0),n.climbingType&&t(G,n.climbingType,!0),n.trainingTypes&&t(R,n.trainingTypes,!0),n.difficulty&&t(ee,n.difficulty,!0),n.categories&&t(u,n.categories,!0),n.energySystems&&t(y,n.energySystems,!0),n.wallAngles&&t(N,n.wallAngles,!0),n.fingerLoad&&t(M,n.fingerLoad,!0),n.shoulderLoad&&t($,n.shoulderLoad,!0),n.forearmLoad&&t(Y,n.forearmLoad,!0),n.openGrip&&t(ae,n.openGrip,!0),n.crimpGrip&&t(Z,n.crimpGrip,!0),n.pinchGrip&&t(re,n.pinchGrip,!0),n.sloperGrip&&t(q,n.sloperGrip,!0),n.jugGrip&&t(d,n.jugGrip,!0),n.climbs&&t(m,n.climbs,!0),n.notes&&t(Q,n.notes,!0)}catch(n){console.error("Failed to restore draft",n)}t(E,!0)}),Sa(()=>{if(!e(E))return;const _={date:e(x),location:e(f),isOtherLocation:e(se),climbingType:e(G),trainingTypes:e(R),difficulty:e(ee),categories:e(u),energySystems:e(y),fingerLoad:e(M),shoulderLoad:e($),forearmLoad:e(Y),openGrip:e(ae),crimpGrip:e(Z),pinchGrip:e(re),sloperGrip:e(q),jugGrip:e(d),climbs:e(m),notes:e(Q)};localStorage.setItem(D,JSON.stringify(_))});function ye(){e(f)==="Other"&&(t(se,!0),t(f,""))}function De(){t(se,!1),t(f,"")}function Xe(){t(m,[...e(m),{isSport:!1,name:"",grade:"",attemptType:"Flash",attemptsNum:1,notes:"",wall:"Overhang"}],!0)}function Ze(_){t(m,e(m).filter((n,ve)=>ve!==_),!0)}function te(_,n){e(m)[_].attemptType=n,(n==="Flash"||n==="Onsight")&&(e(m)[_].attemptsNum=1)}function ge(_){t(H,_,!0)}function ke(){t(H,null)}let qe=Kt(()=>e(G)==="Mixed");function Ce(_){return e(G)==="Sport"?!0:e(G)==="Bouldering"?!1:_.isSport}function fe(_){return _.trim()?L.includes(_.trim().toLowerCase()):!0}let oe=h("idle"),ce=h("");function ue(){return e(f)?e(G)?e(m).filter(n=>n.grade.trim()&&!fe(n.grade)).length>0?"Please fix invalid grades":null:"Please select a climbing type":"Please select a location"}async function Te(){const _=ue();if(_){t(oe,"error"),t(ce,_,!0);return}t(oe,"saving");try{const n=e(m).map(Le=>({...Le,isSport:Ce(Le)})),ve={date:e(x),location:e(f),customLocation:e(se)?e(f):void 0,climbingType:e(G),trainingTypes:e(R),difficulty:e(ee),categories:e(u),energySystems:e(y),wallAngles:e(N),fingerLoad:e(M),shoulderLoad:e($),forearmLoad:e(Y),openGrip:e(ae),crimpGrip:e(Z),pinchGrip:e(re),sloperGrip:e(q),jugGrip:e(d),climbs:n,notes:e(Q)},Me=Ya(ve);if(xa()){const Le=await as(ve);Le.ok?(Ga(Me.id,Le.id),Ea(Le.id),t(oe,"success"),t(ce,"Session saved and synced!"),localStorage.removeItem(D)):(Fa(Me.id),t(oe,"success"),t(ce,"Saved locally. Sync failed: "+(Le.error||"Unknown error")),localStorage.removeItem(D))}else t(oe,"success"),t(ce,"Saved locally. Will sync when online."),localStorage.removeItem(D);window.dispatchEvent(new CustomEvent("session-saved")),setTimeout(()=>{we()},2e3)}catch(n){t(oe,"error"),t(ce,"Failed to save session"),console.error("Save error:",n)}}function we(){t(x,new Date().toISOString().split("T")[0],!0),t(f,""),t(se,!1),t(G,""),t(R,["None"],!0),t(ee,"None"),t(u,["None"],!0),t(y,["None"],!0),t(N,["None"],!0),t(M,3),t($,3),t(Y,3),t(ae,3),t(Z,3),t(re,3),t(q,3),t(d,3),t(m,[{isSport:!1,name:"",grade:"",attemptType:"Flash",attemptsNum:1,notes:"",wall:"Overhang"}],!0),t(Q,""),t(oe,"idle"),t(ce,"")}var Ke=Es(),Ie=s(l(Ke),2),nt=l(Ie),rt=s(l(nt),2);U(rt),a(nt);var bt=s(nt,2),vt=s(l(bt),2);{var yt=_=>{var n=bs(),ve=l(n);U(ve);var Me=s(ve,2);Me.__click=De,a(n),P(ve,()=>e(f),Le=>t(f,Le)),i(_,n)},kt=_=>{var n=hs();n.__change=ye;var ve=l(n);ve.value=ve.__value="";var Me=s(ve);de(Me,17,()=>g,pe,(Le,ft)=>{var c=ys(),o=l(c,!0);a(c);var K={};C(()=>{W(o,e(ft)),K!==(K=e(ft))&&(c.value=(c.__value=e(ft))??"")}),i(Le,c)}),a(n),Je(n,()=>e(f),Le=>t(f,Le)),i(_,n)};O(vt,_=>{e(se)?_(yt):_(kt,!1)})}a(bt),a(Ie);var Ot=s(Ie,2),b=s(l(Ot),2),r=l(b);r.value=r.__value="";var v=s(r);de(v,17,()=>T,pe,(_,n)=>{var ve=Ss(),Me=l(ve,!0);a(ve);var Le={};C(()=>{W(Me,e(n)),Le!==(Le=e(n))&&(ve.value=(ve.__value=e(n))??"")}),i(_,ve)}),a(b),a(Ot);var F=s(Ot,2),le=s(l(F),2),ne=l(le),be=s(l(ne),2);U(be),Qe(2),a(ne);var Ne=s(ne,2),et=s(l(Ne),2);U(et),Qe(2),a(Ne);var wt=s(Ne,2),Lt=s(l(wt),2);U(Lt),Qe(2),a(wt),a(le);var xt=s(le,4),Gt=l(xt),it=s(l(Gt),2);U(it),Qe(2),a(Gt);var _e=s(Gt,2),Ge=s(l(_e),2);U(Ge),Qe(2),a(_e);var Ae=s(_e,2),tt=s(l(Ae),2);U(tt),Qe(2),a(Ae);var ht=s(Ae,2),ot=s(l(ht),2);U(ot),Qe(2),a(ht);var Be=s(ht,2),dt=s(l(Be),2);U(dt),Qe(2),a(Be),a(xt),a(F);var je=s(F,2),at=s(l(je),2),Ve=l(at),At=s(l(Ve),2);Yt(At,{get options(){return w},get selected(){return e(R)},placeholder:"Select types...",onChange:_=>t(R,_,!0)}),a(Ve);var st=s(Ve,2),Rt=s(l(st),2);de(Rt,21,()=>V,pe,(_,n)=>{var ve=ks(),Me=l(ve,!0);a(ve);var Le={};C(()=>{W(Me,e(n)),Le!==(Le=e(n))&&(ve.value=(ve.__value=e(n))??"")}),i(_,ve)}),a(Rt),a(st);var Dt=s(st,2),Xt=s(l(Dt),2);Yt(Xt,{get options(){return I},get selected(){return e(u)},placeholder:"Select categories...",onChange:_=>t(u,_,!0)}),a(Dt);var Re=s(Dt,2),ut=s(l(Re),2);Yt(ut,{get options(){return S},get selected(){return e(y)},placeholder:"Select systems...",onChange:_=>t(y,_,!0)}),a(Re);var pt=s(Re,2),da=s(l(pt),2);Yt(da,{get options(){return J},get selected(){return e(N)},placeholder:"Select walls...",onChange:_=>t(N,_,!0)}),a(pt),a(at),a(je);var jt=s(je,2),Zt=s(l(jt),2);ka(Zt),a(jt);var Wt=s(jt,2),ua=s(l(Wt),2),pa=l(ua),fa=l(pa),ea=l(fa),qa=l(ea);{var _a=_=>{var n=ws();i(_,n)};O(qa,_=>{e(qe)&&_(_a)})}Qe(8),a(ea),a(fa);var ta=s(fa);de(ta,21,()=>e(m),pe,(_,n,ve)=>{var Me=Ls(),Le=l(Me);{var ft=ie=>{var ze=xs(),Fe=l(ze);U(Fe),a(ze),Ma(Fe,()=>e(n).isSport,zt=>e(n).isSport=zt),i(ie,ze)};O(Le,ie=>{e(qe)&&ie(ft)})}var c=s(Le),o=l(c);U(o),a(c);var K=s(c),Ee=l(K);U(Ee);let xe;var qt=s(Ee,2);{var Et=ie=>{var ze=qs();i(ie,ze)};O(qt,ie=>{fe(e(n).grade)||ie(Et)})}a(K);var _t=s(K),Ye=l(_t);Ye.__change=ie=>te(ve,ie.target.value),de(Ye,21,()=>X,pe,(ie,ze)=>{var Fe=Cs(),zt=l(Fe,!0);a(Fe);var It={};C(()=>{W(zt,e(ze)),It!==(It=e(ze))&&(Fe.value=(Fe.__value=e(ze))??"")}),i(ie,Fe)}),a(Ye);var St;Ra(Ye),a(_t);var Vt=s(_t),Pt=l(Vt);U(Pt),a(Vt);var ga=s(Vt),Jt=l(ga);de(Jt,21,()=>z.filter(ie=>ie!=="None"),pe,(ie,ze)=>{var Fe=Ts(),zt=l(Fe,!0);a(Fe);var It={};C(()=>{W(zt,e(ze)),It!==(It=e(ze))&&(Fe.value=(Fe.__value=e(ze))??"")}),i(ie,Fe)}),a(Jt),a(ga);var Ft=s(ga),la=l(Ft);de(la,21,()=>j,pe,(ie,ze)=>{var Fe=Ns(),zt=l(Fe,!0);a(Fe);var It={};C(()=>{W(zt,e(ze)),It!==(It=e(ze))&&(Fe.value=(Fe.__value=e(ze))??"")}),i(ie,Fe)}),a(la),a(Ft);var Bt=s(Ft);let ra;var Mt=l(Bt);ka(Mt),a(Bt);var ia=s(Bt),ba=l(ia);{var ya=ie=>{var ze=Os();ze.__click=()=>Ze(ve),i(ie,ze)};O(ba,ie=>{e(m).length>1&&ie(ya)})}a(ia),a(Me),C(ie=>{xe=He(Ee,1,"grade-input svelte-1lf3qka",null,xe,ie),St!==(St=e(n).attemptType)&&(Ye.value=(Ye.__value=e(n).attemptType)??"",Da(Ye,e(n).attemptType)),Pt.disabled=e(n).attemptType==="Flash"||e(n).attemptType==="Onsight",ra=He(Bt,1,"notes-cell svelte-1lf3qka",null,ra,{expanded:e(H)===ve})},[()=>({invalid:!fe(e(n).grade)})]),P(o,()=>e(n).name,ie=>e(n).name=ie),P(Ee,()=>e(n).grade,ie=>e(n).grade=ie),P(Pt,()=>e(n).attemptsNum,ie=>e(n).attemptsNum=ie),Je(Jt,()=>e(n).wall,ie=>e(n).wall=ie),Je(la,()=>e(n).techniqueFocus,ie=>e(n).techniqueFocus=ie),B("focus",Mt,()=>ge(ve)),B("blur",Mt,ke),P(Mt,()=>e(n).notes,ie=>e(n).notes=ie),i(_,Me)}),a(ta),a(pa),a(ua);var Ca=s(ua,2);Ca.__click=Xe,a(Wt);var aa=s(Wt,2),ma=l(aa);{var Aa=_=>{var n=Gs();let ve;var Me=l(n,!0);a(n),C(()=>{ve=He(n,1,"save-message svelte-1lf3qka",null,ve,{success:e(oe)==="success",error:e(oe)==="error"}),W(Me,e(ce))}),i(_,n)};O(ma,_=>{e(ce)&&_(Aa)})}var sa=s(ma,2);sa.__click=Te;var Ta=l(sa);{var ja=_=>{var n=Pe("Saving...");i(_,n)},Na=_=>{var n=mt(),ve=lt(n);{var Me=ft=>{var c=Pe("‚úì Saved!");i(ft,c)},Le=ft=>{var c=Pe("Save Session");i(ft,c)};O(ve,ft=>{e(oe)==="success"?ft(Me):ft(Le,!1)},!0)}i(_,n)};O(Ta,_=>{e(oe)==="saving"?_(ja):_(Na,!1)})}a(sa),a(aa),a(Ke),C(()=>sa.disabled=e(oe)==="saving"),P(rt,()=>e(x),_=>t(x,_)),Je(b,()=>e(G),_=>t(G,_)),P(be,()=>e(M),_=>t(M,_)),P(et,()=>e($),_=>t($,_)),P(Lt,()=>e(Y),_=>t(Y,_)),P(it,()=>e(ae),_=>t(ae,_)),P(Ge,()=>e(Z),_=>t(Z,_)),P(tt,()=>e(re),_=>t(re,_)),P(ot,()=>e(q),_=>t(q,_)),P(dt,()=>e(d),_=>t(d,_)),Je(Rt,()=>e(ee),_=>t(ee,_)),P(Zt,()=>e(Q),_=>t(Q,_)),i(Se,Ke),Nt()}va(["click","change"]);var As=p("<option> </option>"),js=p('<div class="input-with-action svelte-15o2ys1"><input type="text" id="crag-manual" placeholder="Enter custom crag name..." class="flat-left svelte-15o2ys1"/> <button type="button" class="action-btn flat-right svelte-15o2ys1" title="Back to list">‚úï</button></div>'),zs=p("<option> </option>"),Is=p("<option>Other (Manual Entry)</option>"),Rs=p('<select id="crag" class="svelte-15o2ys1"><option disabled> </option><!><!></select>'),Ds=p("<option> </option>"),Vs=p("<option> </option>"),Ps=p('<th class="svelte-15o2ys1">Sport?</th>'),Bs=p('<td class="center svelte-15o2ys1"><input type="checkbox" class="svelte-15o2ys1"/></td>'),Ms=p('<span class="grade-error svelte-15o2ys1">Invalid</span>'),$s=p("<option> </option>"),Us=p("<option> </option>"),Ws=p("<option> </option>"),Js=p('<button type="button" class="remove-btn svelte-15o2ys1">‚úï</button>'),Hs=p('<tr><!><td class="svelte-15o2ys1"><input type="text" placeholder="Route name..." class="svelte-15o2ys1"/></td><td class="svelte-15o2ys1"><input type="text" placeholder="V3"/> <!></td><td class="svelte-15o2ys1"><select class="svelte-15o2ys1"></select></td><td class="svelte-15o2ys1"><input type="number" min="1" class="svelte-15o2ys1"/></td><td class="svelte-15o2ys1"><select class="svelte-15o2ys1"></select></td><td class="svelte-15o2ys1"><select class="svelte-15o2ys1"></select></td><td><textarea placeholder="Notes..." class="svelte-15o2ys1"></textarea></td><td class="center svelte-15o2ys1"><!></td></tr>'),Ks=p("<div> </div>"),Ys=p('<div class="form-content svelte-15o2ys1"><h3 class="svelte-15o2ys1">‚õ∞Ô∏è Outdoor Climb</h3> <div class="form-row svelte-15o2ys1"><div class="form-group svelte-15o2ys1"><label for="date" class="svelte-15o2ys1">Date</label> <input type="date" id="date" class="svelte-15o2ys1"/></div> <div class="form-group svelte-15o2ys1"><label for="area" class="svelte-15o2ys1">Area</label> <select id="area" class="svelte-15o2ys1"><option disabled>Select area...</option><!></select></div></div> <div class="form-row svelte-15o2ys1"><div class="form-group svelte-15o2ys1"><label for="crag" class="svelte-15o2ys1">Crag</label> <!></div> <div class="form-group svelte-15o2ys1"><label for="sector" class="svelte-15o2ys1">Wall / Sector</label> <input type="text" id="sector" placeholder="Enter sector or wall name..." class="svelte-15o2ys1"/></div></div> <div class="form-group svelte-15o2ys1"><label for="climbing-type" class="svelte-15o2ys1">Climbing Type</label> <select id="climbing-type" class="svelte-15o2ys1"><option disabled>Select type...</option><!></select></div> <div class="load-section svelte-15o2ys1"><h4 class="svelte-15o2ys1">Load Metrics</h4> <div class="load-metrics svelte-15o2ys1"><div class="load-item svelte-15o2ys1"><label for="finger-load" class="svelte-15o2ys1">Finger</label> <input type="number" id="finger-load" min="1" max="5" class="svelte-15o2ys1"/> <span class="load-scale svelte-15o2ys1">/ 5</span></div> <div class="load-item svelte-15o2ys1"><label for="shoulder-load" class="svelte-15o2ys1">Shoulder</label> <input type="number" id="shoulder-load" min="1" max="5" class="svelte-15o2ys1"/> <span class="load-scale svelte-15o2ys1">/ 5</span></div> <div class="load-item svelte-15o2ys1"><label for="forearm-load" class="svelte-15o2ys1">Forearm</label> <input type="number" id="forearm-load" min="1" max="5" class="svelte-15o2ys1"/> <span class="load-scale svelte-15o2ys1">/ 5</span></div></div> <h4 class="mt-4 svelte-15o2ys1">Grip Metrics</h4> <div class="load-metrics svelte-15o2ys1"><div class="load-item svelte-15o2ys1"><label for="open-grip" class="svelte-15o2ys1">Open</label> <input type="number" id="open-grip" min="1" max="5" class="svelte-15o2ys1"/> <span class="load-scale svelte-15o2ys1">/ 5</span></div> <div class="load-item svelte-15o2ys1"><label for="crimp-grip" class="svelte-15o2ys1">Crimp</label> <input type="number" id="crimp-grip" min="1" max="5" class="svelte-15o2ys1"/> <span class="load-scale svelte-15o2ys1">/ 5</span></div> <div class="load-item svelte-15o2ys1"><label for="pinch-grip" class="svelte-15o2ys1">Pinch</label> <input type="number" id="pinch-grip" min="1" max="5" class="svelte-15o2ys1"/> <span class="load-scale svelte-15o2ys1">/ 5</span></div> <div class="load-item svelte-15o2ys1"><label for="sloper-grip" class="svelte-15o2ys1">Sloper</label> <input type="number" id="sloper-grip" min="1" max="5" class="svelte-15o2ys1"/> <span class="load-scale svelte-15o2ys1">/ 5</span></div> <div class="load-item svelte-15o2ys1"><label for="jug-grip" class="svelte-15o2ys1">Jug</label> <input type="number" id="jug-grip" min="1" max="5" class="svelte-15o2ys1"/> <span class="load-scale svelte-15o2ys1">/ 5</span></div></div></div> <div class="training-section svelte-15o2ys1"><h4 class="svelte-15o2ys1">Training Details</h4> <div class="training-grid svelte-15o2ys1"><div class="training-item svelte-15o2ys1"><label for="training-type" class="svelte-15o2ys1">Training Type</label> <!></div> <div class="training-item svelte-15o2ys1"><label for="difficulty" class="svelte-15o2ys1">Difficulty</label> <select id="difficulty" class="svelte-15o2ys1"></select></div> <div class="training-item svelte-15o2ys1"><label for="category" class="svelte-15o2ys1">Category</label> <!></div> <div class="training-item svelte-15o2ys1"><label for="energy-system" class="svelte-15o2ys1">Energy System</label> <!></div></div></div> <div class="form-group notes-section svelte-15o2ys1"><label for="session-notes" class="svelte-15o2ys1">Session Notes</label> <textarea id="session-notes" placeholder="How did the session feel? Weather, conditions, mood..." rows="3"></textarea></div> <div class="climbs-section svelte-15o2ys1"><h4 class="svelte-15o2ys1">Climbs</h4> <div class="table-container svelte-15o2ys1"><table class="climbs-table svelte-15o2ys1"><thead><tr><!><th class="svelte-15o2ys1">Name</th><th class="svelte-15o2ys1">Grade</th><th class="svelte-15o2ys1">Attempt</th><th class="svelte-15o2ys1">#</th><th class="svelte-15o2ys1">Wall Angle</th><th class="svelte-15o2ys1">Technique Focus</th><th class="svelte-15o2ys1">Notes</th><th class="svelte-15o2ys1"></th></tr></thead><tbody></tbody></table></div> <button type="button" class="add-btn svelte-15o2ys1">+ Add Climb</button></div> <div class="submit-section svelte-15o2ys1"><!> <button type="button" class="submit-btn svelte-15o2ys1"><!></button></div></div>');function Qs(Se,A){Tt(A,!0);const g=ss(),T=["Boulder","Sport","Trad"],X=["Onsight","Flash","Redpoint","Repeat","Dogged","DNF"],w=["None","Overhang","Vertical","Slab","Roof"],V=["None","Projecting","Onsighting","Campusing","Repeaters","Comp Sim"],I=["None","Easy","Medium","Hard","Max","Limit+"],S=["None","Strength","Power","Strength Capacity","Power Capacity","Strength Endurance","Power Endurance","Endurance","Coordination","Slab Technique","Overhang Technique"],j=["None","Aerobic Lactic Capacity","Aerobic Lactic Power","Anaerobic Alactic Capacity","Anaerobic Alactic Power","Anaerobic Power","Anaerobic Lactic Capacity"],z=["None","Trusting feet","Double-clutch","Deadpointing","Flagging","Swapping feet","Edging","Smearing","Matching","Backstepping","Drop Knee","Bridging","Laybacking","Mantling","Kneebar","Dyno","Coordination Moves","Gastoning","Undercutting","Compressing","Heel Hook","Toe Hook","Bicycle"],k=["V0-","4-","V0","4","V0+","4+","V1","5","V2","5+","V3","6A","6A+","V4","6B","6B+","V5","6C","6C+","V6","7A","V7","7A+","V8","7B","7B+","V9","7C","V10","7C+","V11","8A","V12","8A+","V13","8B","V14","8B+","V15","8C","V16","8C+","V17","9A"].map(c=>c.toLowerCase());let L=h(null),H=h(ct(new Date().toISOString().split("T")[0])),x=h(""),f=h(""),G=h(""),R=h(""),ee=h(ct(["None"])),u=h("None"),y=h(ct(["None"])),N=h(ct(["None"])),M=h(3),$=h(3),Y=h(3),ae=h(3),Z=h(3),re=h(3),q=h(3),d=h(3),m=h(ct([{isSport:!1,name:"",grade:"",attemptType:"Flash",attemptsNum:1,notes:""}])),Q=h(""),se=Kt(()=>e(x)?rs(e(x)):[]),D=h(!1);const E="outdoor_climb_draft";let ye=h(!1);na(()=>{const c=localStorage.getItem(E);if(c)try{const o=JSON.parse(c);o.area&&t(x,o.area,!0),o.crag&&t(f,o.crag,!0),o.sector&&t(G,o.sector,!0),o.isOtherCrag&&t(D,o.isOtherCrag,!0),o.climbingType&&t(R,o.climbingType,!0),o.trainingTypes&&t(ee,o.trainingTypes,!0),o.difficulty&&t(u,o.difficulty,!0),o.categories&&t(y,o.categories,!0),o.energySystems&&t(N,o.energySystems,!0),o.fingerLoad&&t(M,o.fingerLoad,!0),o.shoulderLoad&&t($,o.shoulderLoad,!0),o.forearmLoad&&t(Y,o.forearmLoad,!0),o.openGrip&&t(ae,o.openGrip,!0),o.crimpGrip&&t(Z,o.crimpGrip,!0),o.pinchGrip&&t(re,o.pinchGrip,!0),o.sloperGrip&&t(q,o.sloperGrip,!0),o.jugGrip&&t(d,o.jugGrip,!0),o.climbs&&t(m,o.climbs,!0),o.notes&&t(Q,o.notes,!0)}catch(o){console.error("Failed to restore draft",o)}t(ye,!0)}),Sa(()=>{if(!e(ye))return;const c={date:e(H),area:e(x),crag:e(f),sector:e(G),isOtherCrag:e(D),climbingType:e(R),trainingTypes:e(ee),difficulty:e(u),categories:e(y),energySystems:e(N),fingerLoad:e(M),shoulderLoad:e($),forearmLoad:e(Y),openGrip:e(ae),crimpGrip:e(Z),pinchGrip:e(re),sloperGrip:e(q),jugGrip:e(d),climbs:e(m),notes:e(Q)};localStorage.setItem(E,JSON.stringify(c))}),Sa(()=>{e(x)&&(t(f,""),t(D,!1))});function De(){e(f)==="Other"&&(t(D,!0),t(f,""))}function Xe(){t(D,!1),t(f,"")}function Ze(){t(m,[...e(m),{isSport:!1,name:"",grade:"",attemptType:"Flash",attemptsNum:1,notes:""}],!0)}function te(c){t(m,e(m).filter((o,K)=>K!==c),!0)}function ge(c,o){e(m)[c].attemptType=o,(o==="Flash"||o==="Onsight")&&(e(m)[c].attemptsNum=1)}function ke(c){t(L,c,!0)}function qe(){t(L,null)}let Ce=Kt(()=>e(R)==="Trad");function fe(c){return e(R)==="Sport"?!0:e(R)==="Boulder"?!1:c.isSport}function oe(c){return c.trim()?k.includes(c.trim().toLowerCase()):!0}let ce=h("idle"),ue=h("");function Te(){return e(x)?e(f)?e(R)?e(m).filter(o=>o.grade.trim()&&!oe(o.grade)).length>0?"Please fix invalid grades":null:"Please select a climbing type":"Please select a crag":"Please select an area"}async function we(){const c=Te();if(c){t(ce,"error"),t(ue,c,!0);return}t(ce,"saving");try{const o=e(m).map(xe=>({...xe,isSport:fe(xe)})),K={date:e(H),area:e(x),crag:e(f),sector:e(G)||void 0,climbingType:e(R),trainingTypes:e(ee),difficulty:e(u),categories:e(y),energySystems:e(N),fingerLoad:e(M),shoulderLoad:e($),forearmLoad:e(Y),openGrip:e(ae),crimpGrip:e(Z),pinchGrip:e(re),sloperGrip:e(q),jugGrip:e(d),climbs:o,notes:e(Q)},Ee=Qa(K);if(xa()){const xe=await ls(K);xe.ok?(Ga(Ee.id,xe.id),Ea(xe.id),t(ce,"success"),t(ue,"Session saved and synced!"),localStorage.removeItem(E)):(Fa(Ee.id),t(ce,"success"),t(ue,"Saved locally. Sync failed: "+(xe.error||"Unknown error")),localStorage.removeItem(E))}else t(ce,"success"),t(ue,"Saved locally. Will sync when online."),localStorage.removeItem(E);window.dispatchEvent(new CustomEvent("session-saved")),setTimeout(()=>{Ke()},2e3)}catch(o){t(ce,"error"),t(ue,"Failed to save session"),console.error("Save error:",o)}}function Ke(){t(H,new Date().toISOString().split("T")[0],!0),t(x,""),t(f,""),t(G,""),t(R,""),t(ee,["None"],!0),t(u,"None"),t(y,["None"],!0),t(N,["None"],!0),t(M,3),t($,3),t(Y,3),t(ae,3),t(Z,3),t(re,3),t(q,3),t(d,3),t(m,[{isSport:!1,name:"",grade:"",attemptType:"Flash",attemptsNum:1,notes:""}],!0),t(Q,""),t(ce,"idle"),t(ue,"")}var Ie=Ys(),nt=s(l(Ie),2),rt=l(nt),bt=s(l(rt),2);U(bt),a(rt);var vt=s(rt,2),yt=s(l(vt),2),kt=l(yt);kt.value=kt.__value="";var Ot=s(kt);de(Ot,17,()=>g,pe,(c,o)=>{var K=As(),Ee=l(K,!0);a(K);var xe={};C(()=>{W(Ee,e(o)),xe!==(xe=e(o))&&(K.value=(K.__value=e(o))??"")}),i(c,K)}),a(yt),a(vt),a(nt);var b=s(nt,2),r=l(b),v=s(l(r),2);{var F=c=>{var o=js(),K=l(o);U(K);var Ee=s(K,2);Ee.__click=Xe,a(o),P(K,()=>e(f),xe=>t(f,xe)),i(c,o)},le=c=>{var o=Rs();o.__change=De;var K=l(o),Ee=l(K,!0);a(K),K.value=K.__value="";var xe=s(K);de(xe,17,()=>e(se),pe,(_t,Ye)=>{var St=zs(),Vt=l(St,!0);a(St);var Pt={};C(()=>{W(Vt,e(Ye)),Pt!==(Pt=e(Ye))&&(St.value=(St.__value=e(Ye))??"")}),i(_t,St)});var qt=s(xe);{var Et=_t=>{var Ye=Is();Ye.value=Ye.__value="Other",i(_t,Ye)};O(qt,_t=>{e(x)&&_t(Et)})}a(o),C(()=>{o.disabled=!e(x),W(Ee,e(x)?"Select crag...":"Select area first...")}),Je(o,()=>e(f),_t=>t(f,_t)),i(c,o)};O(v,c=>{e(D)?c(F):c(le,!1)})}a(r);var ne=s(r,2),be=s(l(ne),2);U(be),a(ne),a(b);var Ne=s(b,2),et=s(l(Ne),2),wt=l(et);wt.value=wt.__value="";var Lt=s(wt);de(Lt,17,()=>T,pe,(c,o)=>{var K=Ds(),Ee=l(K,!0);a(K);var xe={};C(()=>{W(Ee,e(o)),xe!==(xe=e(o))&&(K.value=(K.__value=e(o))??"")}),i(c,K)}),a(et),a(Ne);var xt=s(Ne,2),Gt=s(l(xt),2),it=l(Gt),_e=s(l(it),2);U(_e),Qe(2),a(it);var Ge=s(it,2),Ae=s(l(Ge),2);U(Ae),Qe(2),a(Ge);var tt=s(Ge,2),ht=s(l(tt),2);U(ht),Qe(2),a(tt),a(Gt);var ot=s(Gt,4),Be=l(ot),dt=s(l(Be),2);U(dt),Qe(2),a(Be);var je=s(Be,2),at=s(l(je),2);U(at),Qe(2),a(je);var Ve=s(je,2),At=s(l(Ve),2);U(At),Qe(2),a(Ve);var st=s(Ve,2),Rt=s(l(st),2);U(Rt),Qe(2),a(st);var Dt=s(st,2),Xt=s(l(Dt),2);U(Xt),Qe(2),a(Dt),a(ot),a(xt);var Re=s(xt,2),ut=s(l(Re),2),pt=l(ut),da=s(l(pt),2);Yt(da,{get options(){return V},get selected(){return e(ee)},placeholder:"Select types...",onChange:c=>t(ee,c,!0)}),a(pt);var jt=s(pt,2),Zt=s(l(jt),2);de(Zt,21,()=>I,pe,(c,o)=>{var K=Vs(),Ee=l(K,!0);a(K);var xe={};C(()=>{W(Ee,e(o)),xe!==(xe=e(o))&&(K.value=(K.__value=e(o))??"")}),i(c,K)}),a(Zt),a(jt);var Wt=s(jt,2),ua=s(l(Wt),2);Yt(ua,{get options(){return S},get selected(){return e(y)},placeholder:"Select categories...",onChange:c=>t(y,c,!0)}),a(Wt);var pa=s(Wt,2),fa=s(l(pa),2);Yt(fa,{get options(){return j},get selected(){return e(N)},placeholder:"Select systems...",onChange:c=>t(N,c,!0)}),a(pa),a(ut),a(Re);var ea=s(Re,2),qa=s(l(ea),2);ka(qa),a(ea);var _a=s(ea,2),ta=s(l(_a),2),Ca=l(ta),aa=l(Ca),ma=l(aa),Aa=l(ma);{var sa=c=>{var o=Ps();i(c,o)};O(Aa,c=>{e(Ce)&&c(sa)})}Qe(8),a(ma),a(aa);var Ta=s(aa);de(Ta,21,()=>e(m),pe,(c,o,K)=>{var Ee=Hs(),xe=l(Ee);{var qt=me=>{var $e=Bs(),Ue=l($e);U(Ue),a($e),Ma(Ue,()=>e(o).isSport,Ht=>e(o).isSport=Ht),i(me,$e)};O(xe,me=>{e(Ce)&&me(qt)})}var Et=s(xe),_t=l(Et);U(_t),a(Et);var Ye=s(Et),St=l(Ye);U(St);let Vt;var Pt=s(St,2);{var ga=me=>{var $e=Ms();i(me,$e)};O(Pt,me=>{oe(e(o).grade)||me(ga)})}a(Ye);var Jt=s(Ye),Ft=l(Jt);Ft.__change=me=>ge(K,me.target.value),de(Ft,21,()=>X,pe,(me,$e)=>{var Ue=$s(),Ht=l(Ue,!0);a(Ue);var $t={};C(()=>{W(Ht,e($e)),$t!==($t=e($e))&&(Ue.value=(Ue.__value=e($e))??"")}),i(me,Ue)}),a(Ft);var la;Ra(Ft),a(Jt);var Bt=s(Jt),ra=l(Bt);U(ra),a(Bt);var Mt=s(Bt),ia=l(Mt);de(ia,21,()=>w.filter(me=>me!=="None"),pe,(me,$e)=>{var Ue=Us(),Ht=l(Ue,!0);a(Ue);var $t={};C(()=>{W(Ht,e($e)),$t!==($t=e($e))&&(Ue.value=(Ue.__value=e($e))??"")}),i(me,Ue)}),a(ia),a(Mt);var ba=s(Mt),ya=l(ba);de(ya,21,()=>z,pe,(me,$e)=>{var Ue=Ws(),Ht=l(Ue,!0);a(Ue);var $t={};C(()=>{W(Ht,e($e)),$t!==($t=e($e))&&(Ue.value=(Ue.__value=e($e))??"")}),i(me,Ue)}),a(ya),a(ba);var ie=s(ba);let ze;var Fe=l(ie);ka(Fe),a(ie);var zt=s(ie),It=l(zt);{var Ua=me=>{var $e=Js();$e.__click=()=>te(K),i(me,$e)};O(It,me=>{e(m).length>1&&me(Ua)})}a(zt),a(Ee),C(me=>{Vt=He(St,1,"grade-input svelte-15o2ys1",null,Vt,me),la!==(la=e(o).attemptType)&&(Ft.value=(Ft.__value=e(o).attemptType)??"",Da(Ft,e(o).attemptType)),ra.disabled=e(o).attemptType==="Flash"||e(o).attemptType==="Onsight",ze=He(ie,1,"notes-cell svelte-15o2ys1",null,ze,{expanded:e(L)===K})},[()=>({invalid:!oe(e(o).grade)})]),P(_t,()=>e(o).name,me=>e(o).name=me),P(St,()=>e(o).grade,me=>e(o).grade=me),P(ra,()=>e(o).attemptsNum,me=>e(o).attemptsNum=me),Je(ia,()=>e(o).wall,me=>e(o).wall=me),Je(ya,()=>e(o).techniqueFocus,me=>e(o).techniqueFocus=me),B("focus",Fe,()=>ke(K)),B("blur",Fe,qe),P(Fe,()=>e(o).notes,me=>e(o).notes=me),i(c,Ee)}),a(Ta),a(Ca),a(ta);var ja=s(ta,2);ja.__click=Ze,a(_a);var Na=s(_a,2),_=l(Na);{var n=c=>{var o=Ks();let K;var Ee=l(o,!0);a(o),C(()=>{K=He(o,1,"save-message svelte-15o2ys1",null,K,{success:e(ce)==="success",error:e(ce)==="error"}),W(Ee,e(ue))}),i(c,o)};O(_,c=>{e(ue)&&c(n)})}var ve=s(_,2);ve.__click=we;var Me=l(ve);{var Le=c=>{var o=Pe("Saving...");i(c,o)},ft=c=>{var o=mt(),K=lt(o);{var Ee=qt=>{var Et=Pe("‚úì Saved!");i(qt,Et)},xe=qt=>{var Et=Pe("Save Session");i(qt,Et)};O(K,qt=>{e(ce)==="success"?qt(Ee):qt(xe,!1)},!0)}i(c,o)};O(Me,c=>{e(ce)==="saving"?c(Le):c(ft,!1)})}a(ve),a(Na),a(Ie),C(()=>ve.disabled=e(ce)==="saving"),P(bt,()=>e(H),c=>t(H,c)),Je(yt,()=>e(x),c=>t(x,c)),P(be,()=>e(G),c=>t(G,c)),Je(et,()=>e(R),c=>t(R,c)),P(_e,()=>e(M),c=>t(M,c)),P(Ae,()=>e($),c=>t($,c)),P(ht,()=>e(Y),c=>t(Y,c)),P(dt,()=>e(ae),c=>t(ae,c)),P(at,()=>e(Z),c=>t(Z,c)),P(At,()=>e(re),c=>t(re,c)),P(Rt,()=>e(q),c=>t(q,c)),P(Xt,()=>e(d),c=>t(d,c)),Je(Zt,()=>e(u),c=>t(u,c)),P(qa,()=>e(Q),c=>t(Q,c)),i(Se,Ie),Nt()}va(["click","change"]);var Xs=p('<div><div class="col set-num svelte-ow8x7m"> </div> <div class="col weight svelte-ow8x7m"><input type="number" placeholder="-" class="svelte-ow8x7m"/></div> <div class="col reps svelte-ow8x7m"><input type="number" placeholder="-" class="svelte-ow8x7m"/></div> <div class="col check svelte-ow8x7m"><button><!></button></div></div>');function Zs(Se,A){Tt(A,!1);let g=gt(A,"setNumber",8),T=gt(A,"set",12);const X=wa();function w(){T(T().completed=!T().completed,!0),X("change",T()),T().completed&&X("complete")}function V(u){X("focus",{field:u,value:T()[u],set:T()})}ca();var I=Xs();let S;var j=l(I),z=l(j,!0);a(j);var J=s(j,2),k=l(J);U(k),a(J);var L=s(J,2),H=l(L);U(H),a(L);var x=s(L,2),f=l(x);let G;var R=l(f);{var ee=u=>{var y=Pe("‚úì");i(u,y)};O(R,u=>{We(T()),he(()=>T().completed)&&u(ee)})}a(f),a(x),a(I),C(()=>{S=He(I,1,"set-row svelte-ow8x7m",null,S,{completed:T().completed}),W(z,g()),G=He(f,1,"check-btn svelte-ow8x7m",null,G,{checked:T().completed})}),P(k,()=>T().weight,u=>T(T().weight=u,!0)),B("focus",k,()=>V("weight")),P(H,()=>T().reps,u=>T(T().reps=u,!0)),B("focus",H,()=>V("reps")),B("click",f,w),i(Se,I),Nt()}var el=p('<div><span class="dot svelte-1ni79z8"></span> <span class="text"> </span></div>'),tl=p("<button></button>"),al=p('<div class="exercise-card svelte-1ni79z8"><div class="header svelte-1ni79z8"><div class="title-group svelte-1ni79z8"><button class="icon-btn info-btn svelte-1ni79z8" aria-label="Exercise Info"><div class="info-icon svelte-1ni79z8">?</div></button> <div><h4 class="svelte-1ni79z8"> </h4> <div class="benchmarks svelte-1ni79z8"></div></div></div> <button class="icon-btn delete-btn svelte-1ni79z8" aria-label="Delete Exercise">üóëÔ∏è</button></div> <div class="table-header svelte-1ni79z8"><div class="col">Set</div> <div class="col">kg</div> <div class="col">Reps</div> <div class="col">‚úì</div></div> <div class="sets"></div> <button class="add-set-btn svelte-1ni79z8">+ Add Set</button> <div class="difficulty-footer svelte-1ni79z8"><span class="diff-label svelte-1ni79z8">How did it feel?</span> <div class="diff-circles svelte-1ni79z8"></div></div></div>');function sl(Se,A){Tt(A,!1);let g=gt(A,"exercise",12),T=gt(A,"benchmarks",24,()=>({}));const X=wa();function w(){const u=g().sets[g().sets.length-1],y={weight:u?u.weight:0,reps:u?u.reps:0,isWarmup:!1,isFailure:!1,isDropSet:!1,completed:!1};g(g().sets=[...g().sets,y],!0)}const V=["Green","Yellow","Orange","Red"];ca();var I=al(),S=l(I),j=l(S),z=l(j),J=s(z,2),k=l(J),L=l(k,!0);a(k);var H=s(k,2);de(H,5,()=>V,pe,(u,y)=>{var N=mt(),M=lt(N);{var $=Y=>{var ae=el();He(ae,1,"benchmark-pill svelte-1ni79z8",null,{},{"has-data":!0});var Z=s(l(ae),2),re=l(Z);a(Z),a(ae),C(q=>{Pa(ae,`--pill-color: var(--color-${q??""})`),W(re,`${We(T()),e(y),he(()=>T()[e(y)]?.weight)??""}kg x ${We(T()),e(y),he(()=>T()[e(y)]?.reps)??""}`)},[()=>(e(y),he(()=>e(y).toLowerCase()))]),i(Y,ae)};O(M,Y=>{We(T()),e(y),he(()=>T()[e(y)])&&Y($)})}i(u,N)}),a(H),a(J),a(j);var x=s(j,2);a(S);var f=s(S,4);de(f,5,()=>(We(g()),he(()=>g().sets)),pe,(u,y,N)=>{Zs(u,{setNumber:N+1,get set(){return(We(g()),he(()=>g().sets))[N]},set set(M){(We(g()),he(()=>g().sets))[N]=M,Oa(()=>g())},$$events:{complete(M){Qt.call(this,A,M)},focus(M){Qt.call(this,A,M)},change(M){Qt.call(this,A,M)}},$$legacy:!0})}),a(f);var G=s(f,2),R=s(G,2),ee=s(l(R),2);de(ee,5,()=>V,pe,(u,y)=>{var N=tl();let M;C($=>{M=He(N,1,"diff-circle svelte-1ni79z8",null,M,{selected:g().difficulty===e(y)}),Pa(N,`--circle-color: var(--color-${$??""})`),Ct(N,"aria-label",`Mark as ${e(y)??""}`)},[()=>(e(y),he(()=>e(y).toLowerCase()))]),B("click",N,()=>g(g().difficulty=e(y),!0)),i(u,N)}),a(ee),a(R),a(I),C(()=>W(L,(We(g()),he(()=>g().name)))),B("click",z,()=>X("info",g())),B("click",x,()=>X("delete",g())),B("click",G,w),i(Se,I),Nt()}var ll=p('<div class="keypad svelte-1fay4f8"><div class="header svelte-1fay4f8"><span class="label svelte-1fay4f8"> </span> <div class="display svelte-1fay4f8" role="textbox" aria-readonly="true"> </div></div> <div class="quick-adds svelte-1fay4f8"><button class="svelte-1fay4f8">+2.5</button> <button class="svelte-1fay4f8">+5</button> <button class="svelte-1fay4f8">+10</button></div> <div class="grid svelte-1fay4f8"><button class="svelte-1fay4f8">1</button> <button class="svelte-1fay4f8">2</button> <button class="svelte-1fay4f8">3</button> <button class="svelte-1fay4f8">4</button> <button class="svelte-1fay4f8">5</button> <button class="svelte-1fay4f8">6</button> <button class="svelte-1fay4f8">7</button> <button class="svelte-1fay4f8">8</button> <button class="svelte-1fay4f8">9</button> <button class="action svelte-1fay4f8">C</button> <button class="svelte-1fay4f8">0</button> <button class="action svelte-1fay4f8">‚å´</button></div></div>');function rl(Se,A){Tt(A,!1);let g=gt(A,"value",8,null),T=gt(A,"label",8,"Value");const X=wa();function w(Q){const se=g()?.toString()||"";if(se.length>=5)return;const D=parseFloat(se+Q.toString());X("change",D)}function V(){X("change",0)}function I(){const Q=g()?.toString()||"";if(Q.length<=1){X("change",0);return}const se=parseFloat(Q.slice(0,-1));X("change",se)}function S(Q){X("change",(g()||0)+Q)}ca();var j=ll(),z=l(j),J=l(z),k=l(J,!0);a(J);var L=s(J,2),H=l(L,!0);a(L),a(z);var x=s(z,2),f=l(x),G=s(f,2),R=s(G,2);a(x);var ee=s(x,2),u=l(ee),y=s(u,2),N=s(y,2),M=s(N,2),$=s(M,2),Y=s($,2),ae=s(Y,2),Z=s(ae,2),re=s(Z,2),q=s(re,2),d=s(q,2),m=s(d,2);a(ee),a(j),C(()=>{W(k,T()),Ct(L,"aria-label",T()),W(H,g()||0)}),B("click",f,()=>S(2.5)),B("click",G,()=>S(5)),B("click",R,()=>S(10)),B("click",u,()=>w(1)),B("click",y,()=>w(2)),B("click",N,()=>w(3)),B("click",M,()=>w(4)),B("click",$,()=>w(5)),B("click",Y,()=>w(6)),B("click",ae,()=>w(7)),B("click",Z,()=>w(8)),B("click",re,()=>w(9)),B("click",q,V),B("click",d,()=>w(0)),B("click",m,I),i(Se,j),Nt()}var il=p("<button> </button>"),ol=p('<div class="presets-grid svelte-18i4gcv"></div> <div class="manual-adjust svelte-18i4gcv"><button class="adjust-btn svelte-18i4gcv">-</button> <span class="adjust-label svelte-18i4gcv">10s</span> <button class="adjust-btn svelte-18i4gcv">+</button></div> <button class="action-btn start svelte-18i4gcv">Start Timer</button>',1),nl=p('<div class="quick-adjust svelte-18i4gcv"><button class="adjust-btn svelte-18i4gcv">-10</button> <button class="adjust-btn svelte-18i4gcv">+10</button></div> <div class="running-controls svelte-18i4gcv"><button class="action-btn secondary svelte-18i4gcv">Stop</button> <button class="action-btn primary svelte-18i4gcv"> </button></div>',1),vl=p('<div class="timer-overlay svelte-18i4gcv" role="button" tabindex="0" aria-label="Close timer"><div class="rest-timer svelte-18i4gcv"><div class="header svelte-18i4gcv"><span class="title svelte-18i4gcv">Rest Timer</span> <button class="close-btn svelte-18i4gcv">‚úï</button></div> <div class="display-container svelte-18i4gcv"><div> </div> <div class="status-label svelte-18i4gcv"><!></div></div> <!></div></div>');function cl(Se,A){Tt(A,!1);const g=Oe(),T=Oe();let X=gt(A,"duration",8,90),w=gt(A,"autoStart",8,!0),V=gt(A,"visible",12,!0),I=gt(A,"onComplete",8,()=>{}),S=Oe("SETUP"),j=Oe(X()),z=Oe(X()),J,k=Oe(!1);const L=[30,60,90,120,180];function H($){clearInterval(J),t(z,$),t(j,$),t(S,"RUNNING"),t(k,!1),J=setInterval(()=>{e(k)||(Ja(j,-1),e(j)<=0&&(clearInterval(J),u(),I()()))},1e3)}function x(){t(k,!e(k))}function f($){t(j,e(j)+$)}function G($){e(j)>$&&t(j,e(j)-$)}function R(){clearInterval(J),t(S,"SETUP"),t(j,e(z))}function ee(){V(!1),clearInterval(J)}function u(){navigator.vibrate&&navigator.vibrate([200,100,200])}Ba(()=>{clearInterval(J)}),Ut(()=>(We(V()),We(w()),We(X())),()=>{V()&&(w()?H(X()):(t(S,"SETUP"),t(z,X()),t(j,X())))}),Ut(()=>e(j),()=>{t(g,Math.floor(e(j)/60))}),Ut(()=>e(j),()=>{t(T,e(j)%60)}),Ia(),ca();var y=mt(),N=lt(y);{var M=$=>{var Y=vl(),ae=l(Y),Z=l(ae),re=s(l(Z),2);a(Z);var q=s(Z,2),d=l(q);let m;var Q=l(d);a(d);var se=s(d,2),D=l(se);{var E=te=>{var ge=Pe("Set Duration");i(te,ge)},ye=te=>{var ge=mt(),ke=lt(ge);{var qe=fe=>{var oe=Pe("Paused");i(fe,oe)},Ce=fe=>{var oe=Pe("Resting...");i(fe,oe)};O(ke,fe=>{e(k)?fe(qe):fe(Ce,!1)},!0)}i(te,ge)};O(D,te=>{e(S)==="SETUP"?te(E):te(ye,!1)})}a(se),a(q);var De=s(q,2);{var Xe=te=>{var ge=ol(),ke=lt(ge);de(ke,5,()=>L,pe,(ce,ue)=>{var Te=il();let we;var Ke=l(Te,!0);a(Te),C(()=>{we=He(Te,1,"preset-btn svelte-18i4gcv",null,we,{active:e(z)===e(ue)}),W(Ke,e(ue)>=60?`${e(ue)/60}m`:`${e(ue)}s`)}),B("click",Te,()=>t(z,e(ue))),i(ce,Te)}),a(ke);var qe=s(ke,2),Ce=l(qe),fe=s(Ce,4);a(qe);var oe=s(qe,2);B("click",Ce,()=>t(z,Math.max(10,e(z)-10))),B("click",fe,()=>t(z,e(z)+10)),B("click",oe,()=>H(e(z))),i(te,ge)},Ze=te=>{var ge=nl(),ke=lt(ge),qe=l(ke),Ce=s(qe,2);a(ke);var fe=s(ke,2),oe=l(fe),ce=s(oe,2),ue=l(ce,!0);a(ce),a(fe),C(()=>W(ue,e(k)?"Resume":"Pause")),B("click",qe,()=>G(10)),B("click",Ce,()=>f(10)),B("click",oe,R),B("click",ce,x),i(te,ge)};O(De,te=>{e(S)==="SETUP"?te(Xe):te(Ze,!1)})}a(ae),a(Y),C((te,ge)=>{m=He(d,1,"time-display svelte-18i4gcv",null,m,{paused:e(k)&&e(S)==="RUNNING"}),W(Q,`${te??""}:${ge??""}`)},[()=>(e(S),e(z),e(g),he(()=>e(S)==="SETUP"?Math.floor(e(z)/60):e(g))),()=>(e(S),e(z),e(T),he(()=>e(S)==="SETUP"?(e(z)%60).toString().padStart(2,"0"):e(T).toString().padStart(2,"0")))]),B("click",re,ee),oa(3,ae,()=>is,()=>({start:.9,duration:200})),oa(3,Y,()=>$a,()=>({duration:200})),B("click",Y,ps(ee)),B("keydown",Y,te=>{te.key==="Escape"&&ee()}),i($,Y)};O(N,$=>{V()&&$(M)})}i(Se,y),Nt()}var dl=p("<img/>"),ul=p('<div class="animation-frame svelte-zbmy0k"></div>'),pl=p('<div class="visual-placeholder svelte-zbmy0k"><span>No animation available</span></div>'),fl=p("<li> </li>"),_l=p('<div class="modal-overlay svelte-zbmy0k" role="button" tabindex="0" aria-label="Close modal"><div class="modal-content svelte-zbmy0k" role="dialog" aria-modal="true" tabindex="-1"><div class="header svelte-zbmy0k"><h3 class="svelte-zbmy0k"> </h3> <span class="category svelte-zbmy0k"> </span> <button class="close-btn svelte-zbmy0k" aria-label="Close">√ó</button></div> <div class="visual-container svelte-zbmy0k"><!> <div class="muscles svelte-zbmy0k"> </div></div> <div class="instructions svelte-zbmy0k"><h4>Instructions</h4> <ol class="svelte-zbmy0k"></ol></div></div></div>');function ml(Se,A){Tt(A,!1);let g=gt(A,"exercise",8),T=gt(A,"visible",8,!1);const X=wa();let w=Oe(0),V;function I(){g().images&&g().images.length>0&&(t(w,0),V=setInterval(()=>{t(w,(e(w)+1)%g().images.length)},800))}function S(){V&&clearInterval(V)}Ba(()=>{S()});function j(){X("close")}Ut(()=>(We(T()),We(g())),()=>{T()&&g().images?.length?I():S()}),Ia(),ca();var z=mt(),J=lt(z);{var k=L=>{var H=_l(),x=l(H),f=l(x),G=l(f),R=l(G,!0);a(G);var ee=s(G,2),u=l(ee,!0);a(ee);var y=s(ee,2);a(f);var N=s(f,2),M=l(N);{var $=d=>{var m=ul();de(m,5,()=>(We(g()),he(()=>g().images)),pe,(Q,se,D)=>{var E=dl();let ye;C(()=>{Ct(E,"src",`${us??""}${e(se)??""}`),Ct(E,"alt",`${We(g()),he(()=>g().name)??""} frame ${D+1}`),ye=He(E,1,"svelte-zbmy0k",null,ye,{active:D===e(w)})}),i(Q,E)}),a(m),i(d,m)},Y=d=>{var m=pl();i(d,m)};O(M,d=>{We(g()),he(()=>g().images&&g().images.length>0)?d($):d(Y,!1)})}var ae=s(M,2),Z=l(ae);a(ae),a(N);var re=s(N,2),q=s(l(re),2);de(q,5,()=>(We(g()),he(()=>g().instructions)),pe,(d,m)=>{var Q=fl(),se=l(Q,!0);a(Q),C(()=>W(se,e(m))),i(d,Q)}),a(q),a(re),a(x),a(H),C(d=>{W(R,(We(g()),he(()=>g().name))),W(u,(We(g()),he(()=>g().category))),W(Z,`Targets: ${d??""}`)},[()=>(We(g()),he(()=>g().targetMuscles.join(", ")))]),B("click",y,j),oa(3,x,()=>za,()=>({y:50,duration:300})),B("click",x,La(function(d){Qt.call(this,A,d)})),B("keydown",x,La(function(d){Qt.call(this,A,d)})),B("click",H,j),B("keydown",H,d=>d.key==="Escape"&&j()),i(L,H)};O(J,L=>{T()&&L(k)})}i(Se,z),Nt()}var gl=p("<span>Saved! ‚úì</span>"),bl=p("<button><!></button>"),yl=p("<option> </option>"),hl=p("<option> </option>"),Sl=p('<div class="filter-row svelte-1w0zsmt"><select class="category-select svelte-1w0zsmt"><option>Select Category...</option><!></select> <select class="subcategory-select svelte-1w0zsmt"><option>Select Subcategory...</option><!></select></div>'),kl=p('<span class="details svelte-1w0zsmt"> </span>'),wl=p('<button class="exercise-item-simple svelte-1w0zsmt"><span class="name svelte-1w0zsmt"> </span> <!></button>'),xl=p('<div class="no-results svelte-1w0zsmt"> </div>'),ql=p('<div class="modal-overlay svelte-1w0zsmt" role="button" tabindex="0" aria-label="Close modal"><div class="picker-modal svelte-1w0zsmt" role="dialog" aria-modal="true" tabindex="-1"><div class="picker-header svelte-1w0zsmt"><h3>Add Exercise</h3> <div class="search-row svelte-1w0zsmt"><input type="text" placeholder="Search exercises..." class="svelte-1w0zsmt"/></div> <!></div> <div class="picker-content svelte-1w0zsmt"><div class="exercise-list-simple svelte-1w0zsmt"><!> <!></div></div></div></div>'),Cl=p('<div class="keypad-overlay svelte-1w0zsmt"><div class="keypad-header svelte-1w0zsmt"><span> </span> <button class="svelte-1w0zsmt">Done</button></div> <!></div>'),Tl=p('<div class="gym-session-form svelte-1w0zsmt"><div class="session-meta svelte-1w0zsmt"><input type="text" class="session-name svelte-1w0zsmt" placeholder="Workout Name (e.g. Pull Day)"/> <div class="meta-row svelte-1w0zsmt"><label class="svelte-1w0zsmt">Date <input type="date" class="svelte-1w0zsmt"/></label> <label class="svelte-1w0zsmt">Bodyweight (kg) <input type="number" placeholder="Optional" class="svelte-1w0zsmt"/></label> <label class="svelte-1w0zsmt">Block <select class="svelte-1w0zsmt"><option>Strength</option><option>Power</option><option>Power Endurance</option><option>Muscular Endurance</option></select></label></div> <button class="timer-btn svelte-1w0zsmt">‚è± Open Timer</button></div> <div class="exercises-list"></div> <button class="add-exercise-btn svelte-1w0zsmt">+ Add Exercise</button> <!> <!> <!> <!> <!> <!></div>');function Nl(Se,A){Tt(A,!1);const g=Oe(),T=Oe(),X=wa(),w="gym_session_draft";let V=Oe(""),I=Oe(),S=Oe([]),j=Oe(new Date().toISOString().split("T")[0]),z=Oe("Strength"),J=Oe(null),k=Oe([]);function L(r){const v={Green:null,Yellow:null,Orange:null,Red:null},F=[...e(k)].sort((le,ne)=>new Date(ne.date).getTime()-new Date(le.date).getTime());for(const le of F){if(v.Green&&v.Yellow&&v.Orange&&v.Red)break;const ne=le.exercises.find(be=>be.name===r);if(ne&&ne.difficulty&&!v[ne.difficulty]){let be=null;for(const Ne of ne.sets)(!be||Ne.weight>be.weight||Ne.weight===be.weight&&Ne.reps>be.reps)&&(be=Ne);be&&(v[ne.difficulty]={weight:be.weight,reps:be.reps})}}return v}let H=Oe(!1),x=Oe(""),f=Oe(""),G=Oe(""),R=Oe(null),ee=Oe(!1),u=Oe(null),y=Oe(null),N=Oe(!1),M=Oe(!0),$=Oe(!1);na(()=>{const r=localStorage.getItem(w);if(r)try{const v=JSON.parse(r);v.sessionName&&t(V,v.sessionName),v.bodyweight&&t(I,v.bodyweight),v.startTime&&t(j,v.startTime),v.trainingBlock&&t(z,v.trainingBlock),v.exercises&&t(S,v.exercises)}catch(v){console.error("Failed to restore draft",v)}t($,!0)});const Y=Array.from(new Set(ha.map(r=>r.category))).sort();function ae(){t(G,"")}function Z(r){const v={id:crypto.randomUUID(),name:r.name,sets:[{weight:0,reps:0,isWarmup:!1,isFailure:!1,isDropSet:!1,completed:!1}]};t(S,[...e(S),v]),t(H,!1),t(x,""),t(f,""),t(G,"")}function re(r,v,F){t(R,{exerciseIndex:v,setIndex:F,field:r.detail.field})}function q(r){if(!e(R))return;const{exerciseIndex:v,setIndex:F,field:le}=e(R);Ha(S,e(S)[v].sets[F][le]=r.detail),t(S,[...e(S)])}function d(){t(M,!0),t(ee,!0)}function m(){e(S).length!==0&&(Xa({date:e(j),name:e(V)||"Gym Workout",bodyweight:e(I),trainingBlock:e(z),exercises:e(S)}),t(N,!0),localStorage.removeItem(w),setTimeout(()=>{t(N,!1),X("save")},1500))}function Q(){t(R,null)}Ut(()=>(e(k),e(z),e(j)),()=>{t(k,Za());const r=e(k).filter(v=>(v.trainingBlock||"Strength")===e(z)&&v.date<e(j));r.sort((v,F)=>new Date(F.date).getTime()-new Date(v.date).getTime()),t(J,r.length>0?r[0]:null)}),Ut(()=>(e($),e(V),e(I),e(j),e(z),e(S)),()=>{if(e($)&&typeof localStorage<"u"){const r={sessionName:e(V),bodyweight:e(I),startTime:e(j),trainingBlock:e(z),exercises:e(S)};localStorage.setItem(w,JSON.stringify(r))}}),Ut(()=>(e(x),e(f),e(G)),()=>{t(g,ha.filter(r=>{if(e(x))return r.name.toLowerCase().includes(e(x).toLowerCase())||r.targetMuscles.some(le=>le.toLowerCase().includes(e(x).toLowerCase()));const v=e(f)?r.category===e(f):!0,F=e(G)?r.subcategory===e(G):!0;return v&&F}))}),Ut(()=>(e(f),ha),()=>{t(T,e(f)?Array.from(new Set(ha.filter(r=>r.category===e(f)).map(r=>r.subcategory))).sort():[])}),Ia(),ca();var se=Tl(),D=l(se),E=l(D);U(E);var ye=s(E,2),De=l(ye),Xe=s(l(De));U(Xe),a(De);var Ze=s(De,2),te=s(l(Ze));U(te),a(Ze);var ge=s(Ze,2),ke=s(l(ge));C(()=>{e(z),Oa(()=>{})});var qe=l(ke);qe.value=qe.__value="Strength";var Ce=s(qe);Ce.value=Ce.__value="Power";var fe=s(Ce);fe.value=fe.__value="Power Endurance";var oe=s(fe);oe.value=oe.__value="Muscular Endurance",a(ke),a(ge),a(ye);var ce=s(ye,2);a(D);var ue=s(D,2);de(ue,5,()=>e(S),pe,(r,v,F)=>{{let le=Va(()=>(e(v),he(()=>L(e(v).name))));sl(r,{get exercise(){return e(v)},get benchmarks(){return e(le)},$$events:{focus:ne=>re(ne,F,e(S)[F].sets.indexOf(ne.detail.set)),complete:d,delete:()=>{t(y,F)},info:()=>{const ne=ha.find(be=>be.name===e(v).name);ne&&t(u,ne)}}})}}),a(ue);var Te=s(ue,2),we=s(Te,2);{var Ke=r=>{var v=bl();let F;var le=l(v);{var ne=Ne=>{var et=gl();i(Ne,et)},be=Ne=>{var et=Pe("Finish Workout");i(Ne,et)};O(le,Ne=>{e(N)?Ne(ne):Ne(be,!1)})}a(v),C(()=>{F=He(v,1,"save-btn svelte-1w0zsmt",null,F,{success:e(N)}),v.disabled=e(N)}),B("click",v,m),i(r,v)};O(we,r=>{e(S),he(()=>e(S).length>0)&&r(Ke)})}var Ie=s(we,2);{var nt=r=>{var v=ql(),F=l(v),le=l(F),ne=s(l(le),2),be=l(ne);U(be),a(ne);var Ne=s(ne,2);{var et=_e=>{var Ge=Sl(),Ae=l(Ge);C(()=>{e(f),Oa(()=>{})});var tt=l(Ae);tt.value=tt.__value="";var ht=s(tt);de(ht,1,()=>Y,pe,(je,at)=>{var Ve=yl(),At=l(Ve,!0);a(Ve);var st={};C(()=>{W(At,e(at)),st!==(st=e(at))&&(Ve.value=(Ve.__value=e(at))??"")}),i(je,Ve)}),a(Ae);var ot=s(Ae,2);C(()=>{e(G),Oa(()=>{e(f),e(T)})});var Be=l(ot);Be.value=Be.__value="";var dt=s(Be);de(dt,1,()=>e(T),pe,(je,at)=>{var Ve=hl(),At=l(Ve,!0);a(Ve);var st={};C(()=>{W(At,e(at)),st!==(st=e(at))&&(Ve.value=(Ve.__value=e(at))??"")}),i(je,Ve)}),a(ot),a(Ge),C(()=>ot.disabled=!e(f)),Je(Ae,()=>e(f),je=>t(f,je)),B("change",Ae,ae),Je(ot,()=>e(G),je=>t(G,je)),i(_e,Ge)};O(Ne,_e=>{e(x)||_e(et)})}a(le);var wt=s(le,2),Lt=l(wt),xt=l(Lt);de(xt,1,()=>e(g),pe,(_e,Ge)=>{var Ae=wl(),tt=l(Ae),ht=l(tt,!0);a(tt);var ot=s(tt,2);{var Be=dt=>{var je=kl(),at=l(je);a(je),C(()=>W(at,`${e(Ge),he(()=>e(Ge).category)??""} - ${e(Ge),he(()=>e(Ge).subcategory)??""}`)),i(dt,je)};O(ot,dt=>{e(x)&&dt(Be)})}a(Ae),C(()=>W(ht,(e(Ge),he(()=>e(Ge).name)))),B("click",Ae,()=>Z(e(Ge))),i(_e,Ae)});var Gt=s(xt,2);{var it=_e=>{var Ge=xl(),Ae=l(Ge,!0);a(Ge),C(()=>W(Ae,e(x)?"No exercises found":"Select a category and subcategory to view exercises.")),i(_e,Ge)};O(Gt,_e=>{e(g),he(()=>e(g).length===0)&&_e(it)})}a(Lt),a(wt),a(F),a(v),P(be,()=>e(x),_e=>t(x,_e)),B("click",F,La(function(_e){Qt.call(this,A,_e)})),B("keydown",F,La(function(_e){Qt.call(this,A,_e)})),oa(3,F,()=>za,()=>({y:100,duration:300})),B("click",v,()=>t(H,!1)),B("keydown",v,_e=>_e.key==="Escape"&&t(H,!1)),oa(3,v,()=>$a),i(r,v)};O(Ie,r=>{e(H)&&r(nt)})}var rt=s(Ie,2);{var bt=r=>{ml(r,{get exercise(){return e(u)},visible:!0,$$events:{close:()=>t(u,null)}})};O(rt,r=>{e(u)&&r(bt)})}var vt=s(rt,2);{var yt=r=>{var v=Cl(),F=l(v),le=l(F),ne=l(le);a(le);var be=s(le,2);a(F);var Ne=s(F,2);{let et=Va(()=>(e(R),he(()=>e(R).field==="weight"?"Weight (kg)":"Reps")));rl(Ne,{get value(){return e(S),e(R),he(()=>e(S)[e(R).exerciseIndex].sets[e(R).setIndex][e(R).field])},get label(){return e(et)},$$events:{change:q}})}a(v),C(()=>W(ne,`Editing ${e(S),e(R),he(()=>e(S)[e(R).exerciseIndex].name)??""} - Set ${e(R),he(()=>e(R).setIndex+1)??""}`)),B("click",be,Q),oa(3,v,()=>za,()=>({y:200,duration:300})),i(r,v)};O(vt,r=>{e(R)&&r(yt)})}var kt=s(vt,2);cl(kt,{get autoStart(){return e(M)},get visible(){return e(ee)},set visible(r){t(ee,r)},$$legacy:!0});var Ot=s(kt,2);{var b=r=>{os(r,{isOpen:!0,title:"Delete Exercise",get message(){return`Are you sure you want to delete ${e(S),e(y),he(()=>e(S)[e(y)].name)??""}?`},requireInput:!1,onConfirm:()=>{e(y)!==null&&(t(S,e(S).filter((v,F)=>F!==e(y))),t(y,null))},onCancel:()=>t(y,null)})};O(Ot,r=>{e(y)!==null&&r(b)})}a(se),P(E,()=>e(V),r=>t(V,r)),P(Xe,()=>e(j),r=>t(j,r)),P(te,()=>e(I),r=>t(I,r)),Je(ke,()=>e(z),r=>t(z,r)),B("click",ce,()=>{t(M,!1),t(ee,!0)}),B("click",Te,()=>t(H,!0)),i(Se,se),Nt()}var Ol=p("<option> </option>"),Ll=p("<option> </option>"),Gl=p('<button class="remove-set-btn svelte-1m63nqt">‚úï</button>'),El=p('<div class="set-row svelte-1m63nqt"><div class="input-wrap svelte-1m63nqt"><label class="svelte-1m63nqt">Weight</label> <input type="number" placeholder="0" class="svelte-1m63nqt"/></div> <div class="input-wrap svelte-1m63nqt"><label class="svelte-1m63nqt">Reps/Secs</label> <input type="number" placeholder="1" class="svelte-1m63nqt"/></div> <!></div>'),Fl=p('<div class="exercise-card svelte-1m63nqt"><div class="card-header svelte-1m63nqt"><div class="header-inputs svelte-1m63nqt"><select class="svelte-1m63nqt"></select> <select class="svelte-1m63nqt"></select></div> <button class="remove-card-btn svelte-1m63nqt" title="Remove Exercise">‚úï</button></div> <div class="sets-list svelte-1m63nqt"><!> <button class="add-set-btn svelte-1m63nqt">+ Add Set</button></div> <div class="card-footer svelte-1m63nqt"><div class="meta-input svelte-1m63nqt"><label class="svelte-1m63nqt">Total Sets</label> <input type="number" readonly="" disabled class="svelte-1m63nqt"/></div> <div class="notes-input svelte-1m63nqt"><label class="svelte-1m63nqt">Notes</label> <input type="text" placeholder="Notes..." class="svelte-1m63nqt"/></div></div></div>'),Al=p("<div> </div>"),jl=p('<div class="form-content svelte-1m63nqt"><div class="header-row svelte-1m63nqt"><h3 class="svelte-1m63nqt">ü§è Fingerboarding</h3> <button class="add-row-btn svelte-1m63nqt">+ Add Exercise</button></div> <div class="form-group date-group svelte-1m63nqt"><label for="date">Date</label> <input type="date" id="date" class="svelte-1m63nqt"/></div> <div class="cards-container svelte-1m63nqt"></div> <div class="submit-section"><!> <button type="button" class="submit-btn svelte-1m63nqt"><!></button></div></div>');function zl(Se,A){Tt(A,!0);const g=["Max hangs","Recruitment pulls","Max pick-ups"],T=["Full-crimp","Half-crimp","Three finger drag","Pinch","Open hand","Sloper"];let X=h(ct(new Date().toISOString().split("T")[0])),w=h(ct([]));function V(){t(w,[...e(w),{id:crypto.randomUUID(),name:g[0],gripType:T[1],sets:1,details:[{weight:0,reps:5}],notes:""}],!0)}const I="fingerboard_session_draft";let S=h(!1);na(()=>{const q=localStorage.getItem(I);if(q)try{const d=JSON.parse(q);d.exercises&&Array.isArray(d.exercises)&&t(w,d.exercises,!0)}catch(d){console.error("Failed to restore draft",d)}e(w).length===0&&V(),t(S,!0)}),Sa(()=>{if(!e(S))return;const q={date:e(X),exercises:e(w)};localStorage.setItem(I,JSON.stringify(q))});function j(q){t(w,e(w).filter((d,m)=>m!==q),!0)}function z(q){const d=e(w)[q],m=d.details[d.details.length-1];d.details=[...d.details,{...m}],d.sets=d.details.length}function J(q,d){const m=e(w)[q];m.details.length>1&&(m.details=m.details.filter((Q,se)=>se!==d),m.sets=m.details.length)}let k=h("idle"),L=h("");async function H(){t(k,"saving");try{const q={date:e(X),location:"N/A",exercises:JSON.parse(JSON.stringify(e(w)))},d=es(q);if(xa()){const m=await ns(q);m.ok?(Ga(d.id,m.id),Ea(m.id),t(k,"success"),t(L,"Session saved and synced!"),localStorage.removeItem(I)):(Fa(d.id),t(k,"success"),t(L,"Saved locally. Sync failed: "+(m.error||"Unknown error")),localStorage.removeItem(I))}else t(k,"success"),t(L,"Saved locally. Will sync when online."),localStorage.removeItem(I);window.dispatchEvent(new CustomEvent("session-saved")),setTimeout(()=>{x()},2e3)}catch(q){t(k,"error"),t(L,"Failed to save session"),console.error("Save error:",q)}}function x(){t(X,new Date().toISOString().split("T")[0],!0),t(w,[],!0),V(),t(k,"idle"),t(L,"")}var f=jl(),G=l(f),R=s(l(G),2);R.__click=V,a(G);var ee=s(G,2),u=s(l(ee),2);U(u),a(ee);var y=s(ee,2);de(y,21,()=>e(w),pe,(q,d,m)=>{var Q=Fl(),se=l(Q),D=l(se),E=l(D);de(E,21,()=>g,pe,(ue,Te)=>{var we=Ol(),Ke=l(we,!0);a(we);var Ie={};C(()=>{W(Ke,e(Te)),Ie!==(Ie=e(Te))&&(we.value=(we.__value=e(Te))??"")}),i(ue,we)}),a(E);var ye=s(E,2);de(ye,21,()=>T,pe,(ue,Te)=>{var we=Ll(),Ke=l(we,!0);a(we);var Ie={};C(()=>{W(Ke,e(Te)),Ie!==(Ie=e(Te))&&(we.value=(we.__value=e(Te))??"")}),i(ue,we)}),a(ye),a(D);var De=s(D,2);De.__click=()=>j(m),a(se);var Xe=s(se,2),Ze=l(Xe);de(Ze,17,()=>e(d).details,pe,(ue,Te,we)=>{var Ke=El(),Ie=l(Ke),nt=l(Ie);Ct(nt,"for",`weight-${m}-${we}`);var rt=s(nt,2);U(rt),Ct(rt,"id",`weight-${m}-${we}`),a(Ie);var bt=s(Ie,2),vt=l(bt);Ct(vt,"for",`reps-${m}-${we}`);var yt=s(vt,2);U(yt),Ct(yt,"id",`reps-${m}-${we}`),a(bt);var kt=s(bt,2);{var Ot=b=>{var r=Gl();r.__click=()=>J(m,we),i(b,r)};O(kt,b=>{e(d).details.length>1&&b(Ot)})}a(Ke),P(rt,()=>e(Te).weight,b=>e(Te).weight=b),P(yt,()=>e(Te).reps,b=>e(Te).reps=b),i(ue,Ke)});var te=s(Ze,2);te.__click=()=>z(m),a(Xe);var ge=s(Xe,2),ke=l(ge),qe=l(ke);Ct(qe,"for",`total-sets-${m}`);var Ce=s(qe,2);U(Ce),Ct(Ce,"id",`total-sets-${m}`),a(ke);var fe=s(ke,2),oe=l(fe);Ct(oe,"for",`notes-${m}`);var ce=s(oe,2);U(ce),Ct(ce,"id",`notes-${m}`),a(fe),a(ge),a(Q),C(()=>Ka(Ce,e(d).sets)),Je(E,()=>e(d).name,ue=>e(d).name=ue),Je(ye,()=>e(d).gripType,ue=>e(d).gripType=ue),P(ce,()=>e(d).notes,ue=>e(d).notes=ue),i(q,Q)}),a(y);var N=s(y,2),M=l(N);{var $=q=>{var d=Al();let m;var Q=l(d,!0);a(d),C(()=>{m=He(d,1,"save-message svelte-1m63nqt",null,m,{success:e(k)==="success",error:e(k)==="error"}),W(Q,e(L))}),i(q,d)};O(M,q=>{e(L)&&q($)})}var Y=s(M,2);Y.__click=H;var ae=l(Y);{var Z=q=>{var d=Pe("Saving...");i(q,d)},re=q=>{var d=mt(),m=lt(d);{var Q=D=>{var E=Pe("‚úì Saved!");i(D,E)},se=D=>{var E=Pe("Save Session");i(D,E)};O(m,D=>{e(k)==="success"?D(Q):D(se,!1)},!0)}i(q,d)};O(ae,q=>{e(k)==="saving"?q(Z):q(re,!1)})}a(Y),a(N),a(f),C(()=>Y.disabled=e(k)==="saving"),P(u,()=>e(X),q=>t(X,q)),i(Se,f),Nt()}va(["click"]);var Il=p("<option> </option>"),Rl=p('<input type="text" placeholder="Enter venue name" class="mt-2 svelte-1fje4dh"/>'),Dl=p("<option> </option>"),Vl=p("<option> </option>"),Pl=p('<input type="text" placeholder="Round name" class="mt-2 svelte-1fje4dh"/>'),Bl=p('<div class="result-mode-content svelte-1fje4dh"><div class="form-group svelte-1fje4dh"><label for="position" class="svelte-1fje4dh">Final Position</label> <input type="number" id="position" placeholder="#" class="large-input svelte-1fje4dh"/></div></div>'),Ml=p("<option> </option>"),$l=p('<input type="number" min="1" class="svelte-1fje4dh"/>'),Ul=p('<span class="flash-dash">-</span>'),Wl=p('<tr><td class="col-name svelte-1fje4dh"><input type="text" class="svelte-1fje4dh"/></td><td class="col-status svelte-1fje4dh"><select class="svelte-1fje4dh"></select></td><td class="col-attempt svelte-1fje4dh"><!></td><td class="col-notes svelte-1fje4dh"><input type="text" placeholder="..." class="svelte-1fje4dh"/></td><td class="col-action svelte-1fje4dh"><button class="svelte-1fje4dh">‚úï</button></td></tr>'),Jl=p('<div class="load-metrics-compact svelte-1fje4dh"><div class="metric svelte-1fje4dh"><label for="finger">Finger Load</label> <input type="number" id="finger" min="0" max="5" step="0.5" class="svelte-1fje4dh"/></div> <div class="metric svelte-1fje4dh"><label for="shoulder">Shoulder Load</label> <input type="number" id="shoulder" min="0" max="5" step="0.5" class="svelte-1fje4dh"/></div> <div class="metric svelte-1fje4dh"><label for="forearm">Forearm Load</label> <input type="number" id="forearm" min="0" max="5" step="0.5" class="svelte-1fje4dh"/></div></div> <div class="climbs-table-container svelte-1fje4dh"><div class="section-header svelte-1fje4dh"><h4 class="svelte-1fje4dh">Boulders / Routes</h4></div> <table class="climbs-table svelte-1fje4dh"><thead><tr><th class="svelte-1fje4dh">#</th><th class="svelte-1fje4dh">Result</th><th class="svelte-1fje4dh">Att.</th><th class="svelte-1fje4dh">Notes</th><th class="svelte-1fje4dh"></th></tr></thead><tbody></tbody></table> <button class="add-row-btn svelte-1fje4dh">+ Add Row</button></div>',1),Hl=p("<div> </div>"),Kl=p('<div class="form-content svelte-1fje4dh"><h3 class="svelte-1fje4dh">üèÜ Competition</h3> <div class="form-grid svelte-1fje4dh"><div class="form-group svelte-1fje4dh"><label for="date" class="svelte-1fje4dh">Date</label> <input type="date" id="date" class="svelte-1fje4dh"/></div> <div class="form-group svelte-1fje4dh"><label for="venue" class="svelte-1fje4dh">Venue</label> <select id="venue" class="svelte-1fje4dh"><option disabled>Select venue...</option><!></select> <!></div></div> <div class="form-group mb-4 svelte-1fje4dh"><label for="type" class="svelte-1fje4dh">Type</label> <select id="type" class="svelte-1fje4dh"></select></div> <div class="form-group mb-4 svelte-1fje4dh"><label for="session-notes" class="svelte-1fje4dh">Session Notes</label> <textarea id="session-notes" placeholder="How did the comp go? Strategy, mindset, etc." rows="3" class="svelte-1fje4dh"></textarea></div> <div class="round-section svelte-1fje4dh"><div class="form-group svelte-1fje4dh"><label for="round" class="svelte-1fje4dh">Round</label> <select id="round" class="svelte-1fje4dh"></select> <!></div> <!></div> <div class="submit-section"><!> <button type="button" class="submit-btn svelte-1fje4dh"><!></button></div></div>');function Yl(Se,A){Tt(A,!0);const g=["Flashpoint Bristol","Rockstar Techno","Rockstar Unit 3","Rockstar Unit 5","Bloc","TCA","Other"],T=["Bouldering","Lead","Speed"],X=["Qualifiers","Semi-Finals","Finals","Result","Other"],w=["Flash","Top","Zone","Attempt"];let V=h(ct(new Date().toISOString().split("T")[0])),I=h(""),S=h(""),j=h("Bouldering"),z=h(4),J=h(4),k=h(4),L=h("Qualifiers"),H=h(""),x=h(null),f=h(ct([{name:"#1",status:"Flash",attemptCount:1,notes:""}])),G=h("");const R="competition_session_draft";let ee=h(!1);na(()=>{const b=localStorage.getItem(R);if(b)try{const r=JSON.parse(b);r.venue&&t(I,r.venue,!0),r.customVenue&&t(S,r.customVenue,!0),r.type&&t(j,r.type,!0),r.fingerLoad&&t(z,r.fingerLoad,!0),r.shoulderLoad&&t(J,r.shoulderLoad,!0),r.forearmLoad&&t(k,r.forearmLoad,!0),r.roundName&&t(L,r.roundName,!0),r.customRoundName&&t(H,r.customRoundName,!0),r.finalPosition&&t(x,r.finalPosition,!0),r.climbs&&t(f,r.climbs,!0),r.notes&&t(G,r.notes,!0)}catch(r){console.error("Failed to restore draft",r)}t(ee,!0)}),Sa(()=>{if(!e(ee))return;const b={date:e(V),venue:e(I),customVenue:e(S),type:e(j),fingerLoad:e(z),shoulderLoad:e(J),forearmLoad:e(k),roundName:e(L),customRoundName:e(H),finalPosition:e(x),climbs:e(f),notes:e(G)};localStorage.setItem(R,JSON.stringify(b))});let u=Kt(()=>e(L)==="Result"),y=Kt(()=>e(I)==="Other"),N=Kt(()=>e(L)==="Other"),M=Kt(()=>e(L)==="Other"?e(H):e(L));function $(){const b=e(f).length+1;t(f,[...e(f),{name:`#${b}`,status:"Flash",attemptCount:1,notes:""}],!0)}function Y(b){e(f).length>1?t(f,e(f).filter((r,v)=>v!==b),!0):e(f)[0]={name:"#1",status:"Flash",attemptCount:1,notes:""}}function ae(b,r){e(f)[b].status=r,r==="Flash"&&(e(f)[b].attemptCount=1)}let Z=h("idle"),re=h("");async function q(){if(!e(I)||e(I)==="Other"&&!e(S)){t(Z,"error"),t(re,"Please specify a venue");return}t(Z,"saving");try{const b={name:e(M),position:e(u)?e(x):void 0,climbs:e(u)?void 0:JSON.parse(JSON.stringify(e(f)))},r={date:e(V),venue:e(I)==="Other"?e(S):e(I),customVenue:e(I)==="Other"?e(S):void 0,type:e(j),fingerLoad:e(u)?void 0:e(z),shoulderLoad:e(u)?void 0:e(J),forearmLoad:e(u)?void 0:e(k),rounds:[b],notes:e(G)},v=ts(r);if(xa()){const F=await vs(r);F.ok?(Ga(v.id,F.id),Ea(F.id),t(Z,"success"),t(re,"Competition saved and synced!"),localStorage.removeItem(R)):(Fa(v.id),t(Z,"success"),t(re,"Saved locally. Sync failed: "+(F.error||"Unknown error")),localStorage.removeItem(R))}else t(Z,"success"),t(re,"Saved locally. Will sync when online."),localStorage.removeItem(R);window.dispatchEvent(new CustomEvent("session-saved")),setTimeout(()=>{d()},2e3)}catch(b){t(Z,"error"),t(re,"Failed to save session"),console.error("Save error:",b)}}function d(){t(V,new Date().toISOString().split("T")[0],!0),t(I,""),t(S,""),t(x,null),t(f,[{name:"#1",status:"Flash",attemptCount:1,notes:""}],!0),t(G,""),t(Z,"idle"),t(re,"")}var m=Kl(),Q=s(l(m),2),se=l(Q),D=s(l(se),2);U(D),a(se);var E=s(se,2),ye=s(l(E),2),De=l(ye);De.value=De.__value="";var Xe=s(De);de(Xe,17,()=>g,pe,(b,r)=>{var v=Il(),F=l(v,!0);a(v);var le={};C(()=>{W(F,e(r)),le!==(le=e(r))&&(v.value=(v.__value=e(r))??"")}),i(b,v)}),a(ye);var Ze=s(ye,2);{var te=b=>{var r=Rl();U(r),P(r,()=>e(S),v=>t(S,v)),i(b,r)};O(Ze,b=>{e(y)&&b(te)})}a(E),a(Q);var ge=s(Q,2),ke=s(l(ge),2);de(ke,21,()=>T,pe,(b,r)=>{var v=Dl(),F=l(v,!0);a(v);var le={};C(()=>{W(F,e(r)),le!==(le=e(r))&&(v.value=(v.__value=e(r))??"")}),i(b,v)}),a(ke),a(ge);var qe=s(ge,2),Ce=s(l(qe),2);ka(Ce),a(qe);var fe=s(qe,2),oe=l(fe),ce=s(l(oe),2);de(ce,21,()=>X,pe,(b,r)=>{var v=Vl(),F=l(v,!0);a(v);var le={};C(()=>{W(F,e(r)),le!==(le=e(r))&&(v.value=(v.__value=e(r))??"")}),i(b,v)}),a(ce);var ue=s(ce,2);{var Te=b=>{var r=Pl();U(r),P(r,()=>e(H),v=>t(H,v)),i(b,r)};O(ue,b=>{e(N)&&b(Te)})}a(oe);var we=s(oe,2);{var Ke=b=>{var r=Bl(),v=l(r),F=s(l(v),2);U(F),a(v),a(r),P(F,()=>e(x),le=>t(x,le)),i(b,r)},Ie=b=>{var r=Jl(),v=lt(r),F=l(v),le=s(l(F),2);U(le),a(F);var ne=s(F,2),be=s(l(ne),2);U(be),a(ne);var Ne=s(ne,2),et=s(l(Ne),2);U(et),a(Ne),a(v);var wt=s(v,2),Lt=s(l(wt),2),xt=s(l(Lt));de(xt,21,()=>e(f),pe,(it,_e,Ge)=>{var Ae=Wl(),tt=l(Ae),ht=l(tt);U(ht),a(tt);var ot=s(tt),Be=l(ot);Be.__change=Re=>ae(Ge,Re.target.value),de(Be,21,()=>w,pe,(Re,ut)=>{var pt=Ml(),da=l(pt,!0);a(pt);var jt={};C(()=>{W(da,e(ut)),jt!==(jt=e(ut))&&(pt.value=(pt.__value=e(ut))??"")}),i(Re,pt)}),a(Be);var dt;Ra(Be),a(ot);var je=s(ot),at=l(je);{var Ve=Re=>{var ut=$l();U(ut),P(ut,()=>e(_e).attemptCount,pt=>e(_e).attemptCount=pt),i(Re,ut)},At=Re=>{var ut=Ul();i(Re,ut)};O(at,Re=>{e(_e).status!=="Flash"?Re(Ve):Re(At,!1)})}a(je);var st=s(je),Rt=l(st);U(Rt),a(st);var Dt=s(st),Xt=l(Dt);Xt.__click=()=>Y(Ge),a(Dt),a(Ae),C(()=>{dt!==(dt=e(_e).status)&&(Be.value=(Be.__value=e(_e).status)??"",Da(Be,e(_e).status))}),P(ht,()=>e(_e).name,Re=>e(_e).name=Re),P(Rt,()=>e(_e).notes,Re=>e(_e).notes=Re),i(it,Ae)}),a(xt),a(Lt);var Gt=s(Lt,2);Gt.__click=$,a(wt),P(le,()=>e(z),it=>t(z,it)),P(be,()=>e(J),it=>t(J,it)),P(et,()=>e(k),it=>t(k,it)),i(b,r)};O(we,b=>{e(u)?b(Ke):b(Ie,!1)})}a(fe);var nt=s(fe,2),rt=l(nt);{var bt=b=>{var r=Hl();let v;var F=l(r,!0);a(r),C(()=>{v=He(r,1,"save-message svelte-1fje4dh",null,v,{success:e(Z)==="success",error:e(Z)==="error"}),W(F,e(re))}),i(b,r)};O(rt,b=>{e(re)&&b(bt)})}var vt=s(rt,2);vt.__click=q;var yt=l(vt);{var kt=b=>{var r=Pe("Saving...");i(b,r)},Ot=b=>{var r=mt(),v=lt(r);{var F=ne=>{var be=Pe("‚úì Saved!");i(ne,be)},le=ne=>{var be=Pe("Save Session");i(ne,be)};O(v,ne=>{e(Z)==="success"?ne(F):ne(le,!1)},!0)}i(b,r)};O(yt,b=>{e(Z)==="saving"?b(kt):b(Ot,!1)})}a(vt),a(nt),a(m),C(()=>vt.disabled=e(Z)==="saving"),P(D,()=>e(V),b=>t(V,b)),Je(ye,()=>e(I),b=>t(I,b)),Je(ke,()=>e(j),b=>t(j,b)),P(Ce,()=>e(G),b=>t(G,b)),Je(ce,()=>e(L),b=>t(L,b)),i(Se,m),Nt()}va(["change","click"]);var Ql=p('<span class="spinner svelte-b2zgdd"></span> Syncing...',1),Xl=p("<button><!></button>"),Zl=p("<div> </div>"),er=p('<div><div class="sync-info svelte-b2zgdd"><span class="sync-icon svelte-b2zgdd"> </span> <span class="sync-text svelte-b2zgdd"><!></span></div> <!> <!></div>'),tr=p("<option> </option>"),ar=p('<div class="form-container svelte-b2zgdd"><!></div>'),sr=p('<div class="page svelte-b2zgdd"><div class="page-header svelte-b2zgdd"><h1 class="svelte-b2zgdd">üìù Log Data</h1> <p class="subtitle svelte-b2zgdd">Record your training sessions</p></div> <!> <div class="content-card svelte-b2zgdd"><div class="form-group svelte-b2zgdd"><label for="activity-type" class="svelte-b2zgdd">Activity Type</label> <select id="activity-type" class="svelte-b2zgdd"><option disabled>Select an activity...</option><!></select></div> <!></div></div>');function _r(Se,A){Tt(A,!0);const g=[{value:"indoor_climb",label:"Indoor Climb",icon:"üßó"},{value:"outdoor_climb",label:"Outdoor Climb",icon:"‚õ∞Ô∏è"},{value:"gym_session",label:"Gym Session",icon:"üèãÔ∏è"},{value:"fingerboarding",label:"Fingerboarding",icon:"ü§è"},{value:"competition",label:"Competition",icon:"üèÜ"}];let T=h(""),X=h(0),w=h("idle"),V=h(""),I=h(!0);na(()=>{S(),t(I,xa(),!0);const u=()=>{t(I,!0),S()},y=()=>{t(I,!1)},N=()=>{S()};return window.addEventListener("online",u),window.addEventListener("offline",y),window.addEventListener("session-saved",N),()=>{window.removeEventListener("online",u),window.removeEventListener("offline",y),window.removeEventListener("session-saved",N)}});function S(){t(X,cs(),!0)}async function j(){if(!e(I)){t(w,"error"),t(V,"No network connection");return}t(w,"syncing"),t(V,"");try{const u=await ds();u.failed===0&&u.success>0?(t(w,"success"),t(V,`Synced ${u.success} session${u.success>1?"s":""}!`)):u.failed>0&&u.success>0?(t(w,"error"),t(V,`Synced ${u.success}, failed ${u.failed}`)):u.failed>0?(t(w,"error"),t(V,`Failed to sync ${u.failed} session${u.failed>1?"s":""}`)):(t(w,"idle"),t(V,"")),S(),e(w)==="success"&&setTimeout(()=>{t(w,"idle"),t(V,"")},3e3)}catch(u){t(w,"error"),t(V,"Sync failed"),console.error("Sync error:",u)}}var z=sr(),J=s(l(z),2);{var k=u=>{var y=er();let N;var M=l(y),$=l(M),Y=l($,!0);a($);var ae=s($,2),Z=l(ae);{var re=D=>{var E=Pe();C(()=>W(E,`${e(X)??""} session${e(X)>1?"s":""} waiting to sync`)),i(D,E)},q=D=>{var E=Pe();C(()=>W(E,`Offline - ${e(X)??""} session${e(X)>1?"s":""} saved locally`)),i(D,E)};O(Z,D=>{e(I)?D(re):D(q,!1)})}a(ae),a(M);var d=s(M,2);{var m=D=>{var E=Xl();let ye;E.__click=j;var De=l(E);{var Xe=te=>{var ge=Ql();Qe(),i(te,ge)},Ze=te=>{var ge=mt(),ke=lt(ge);{var qe=fe=>{var oe=Pe("‚úì Synced!");i(fe,oe)},Ce=fe=>{var oe=Pe("Sync Now");i(fe,oe)};O(ke,fe=>{e(w)==="success"?fe(qe):fe(Ce,!1)},!0)}i(te,ge)};O(De,te=>{e(w)==="syncing"?te(Xe):te(Ze,!1)})}a(E),C(()=>{ye=He(E,1,"sync-btn svelte-b2zgdd",null,ye,{syncing:e(w)==="syncing"}),E.disabled=e(w)==="syncing"}),i(D,E)};O(d,D=>{e(I)&&D(m)})}var Q=s(d,2);{var se=D=>{var E=Zl();let ye;var De=l(E,!0);a(E),C(()=>{ye=He(E,1,"sync-message svelte-b2zgdd",null,ye,{error:e(w)==="error",success:e(w)==="success"}),W(De,e(V))}),i(D,E)};O(Q,D=>{e(V)&&D(se)})}a(y),C(()=>{N=He(y,1,"sync-banner svelte-b2zgdd",null,N,{offline:!e(I)}),W(Y,e(I)?"üîÑ":"üì¥")}),i(u,y)};O(J,u=>{e(X)>0&&u(k)})}var L=s(J,2),H=l(L),x=s(l(H),2),f=l(x);f.value=f.__value="";var G=s(f);de(G,17,()=>g,u=>u.value,(u,y)=>{var N=tr(),M=l(N);a(N);var $={};C(()=>{W(M,`${e(y).icon??""} ${e(y).label??""}`),$!==($=e(y).value)&&(N.value=(N.__value=e(y).value)??"")}),i(u,N)}),a(x),a(H);var R=s(H,2);{var ee=u=>{var y=ar(),N=l(y);{var M=Y=>{Fs(Y,{})},$=Y=>{var ae=mt(),Z=lt(ae);{var re=d=>{Qs(d,{})},q=d=>{var m=mt(),Q=lt(m);{var se=E=>{Nl(E,{})},D=E=>{var ye=mt(),De=lt(ye);{var Xe=te=>{zl(te,{})},Ze=te=>{var ge=mt(),ke=lt(ge);{var qe=Ce=>{Yl(Ce,{})};O(ke,Ce=>{e(T)==="competition"&&Ce(qe)},!0)}i(te,ge)};O(De,te=>{e(T)==="fingerboarding"?te(Xe):te(Ze,!1)},!0)}i(E,ye)};O(Q,E=>{e(T)==="gym_session"?E(se):E(D,!1)},!0)}i(d,m)};O(Z,d=>{e(T)==="outdoor_climb"?d(re):d(q,!1)},!0)}i(Y,ae)};O(N,Y=>{e(T)==="indoor_climb"?Y(M):Y($,!1)})}a(y),i(u,y)};O(R,u=>{e(T)&&u(ee)})}a(L),a(z),Je(x,()=>e(T),u=>t(T,u)),i(Se,z),Nt()}va(["click"]);export{_r as component};
