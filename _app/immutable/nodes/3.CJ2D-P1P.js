import{f as c,a as r,c as yt,t as Ue}from"../chunks/CSQvsE9s.js";import{a1 as Ma,p as Ot,c as s,r as a,s as l,i as e,t as T,a as Lt,f as nt,aV as k,w as ut,o as ia,x as t,d as ga,aG as at,aW as Kt,b0 as Ra,b1 as ba,j as He,e as Se,b2 as wa,ac as Ge,b3 as Da,b4 as Mt,b5 as Fa,b6 as $a,v as Ia,b7 as Ua}from"../chunks/DGPNV_z9.js";import{d as oa,s as J,e as V}from"../chunks/DSMXtqZM.js";import{i as L}from"../chunks/D9GEZg6r.js";import{e as de,i as ue,r as W,b as Q,c as Va,s as Nt,d as Wa}from"../chunks/_iMURHzE.js";import{s as Qe}from"../chunks/Ct8JfZaa.js";import{i as za,s as ja,c as Ye,d as Ja,u as qa,m as Ca,b as Ta,e as Ka,f as Aa,h as Ha,j as Ya,k as Qa,l as Xa}from"../chunks/Cn4iyW3Z.js";import{i as ya,c as Za,g as es,a as ts,b as as,t as ra,s as ss,f as Pa,d as Ea,E as ma,D as ls,e as rs,h as is,j as os,k as ns}from"../chunks/CiC_EaJf.js";import{p as ht}from"../chunks/Dd0awD9h.js";import{i as na}from"../chunks/BH8c2ae4.js";import{b as vs}from"../chunks/DtzH7dKC.js";function cs(ke){return function(...E){var m=E[0];m.target===this&&ke?.apply(this,E)}}function xa(ke){return function(...E){var m=E[0];return m.stopPropagation(),ke?.apply(this,E)}}function Yt(ke,E){var m=ke.$$events?.[E.type],N=Ma(m)?m.slice():m==null?[]:[m];for(var ee of N)ee.call(this,E)}var ds=c('<span class="placeholder svelte-1g8x5ph"> </span>'),us=c('<span class="chip-display"> </span>'),ps=c('<button type="button"> </button>'),fs=c('<div class="multi-select-container svelte-1g8x5ph"><div class="chips svelte-1g8x5ph"><!></div> <div class="options-grid svelte-1g8x5ph"></div></div>');function Ht(ke,E){Ot(E,!0);let m=ht(E,"selected",19,()=>[]),N=ht(E,"placeholder",3,"Select options...");function ee(K){let S=[...m()];K==="None"?S.includes("None")?S=[]:S=["None"]:(S=S.filter(G=>G!=="None"),S.includes(K)?S=S.filter(G=>G!==K):S.push(K)),E.onChange(S)}var x=fs(),R=s(x),I=s(R);{var h=K=>{var S=ds(),G=s(S,!0);a(S),T(()=>J(G,N())),r(K,S)},F=K=>{var S=yt(),G=nt(S);de(G,17,m,ue,(H,q)=>{var d=us(),j=s(d,!0);a(d),T(()=>J(j,e(q))),r(H,d)}),r(K,S)};L(I,K=>{m().length===0?K(h):K(F,!1)})}a(R);var z=l(R,2);de(z,21,()=>E.options,ue,(K,S)=>{var G=ps();G.__click=()=>ee(e(S));var H=s(G,!0);a(G),T(q=>{Qe(G,1,`option-chip ${q??""}`,"svelte-1g8x5ph"),J(H,e(S))},[()=>m().includes(e(S))?"selected":""]),r(K,G)}),a(z),a(x),r(ke,x),Lt()}oa(["click"]);var _s=c('<div class="input-with-action svelte-1lf3qka"><input type="text" id="location-manual" placeholder="Enter custom location..." class="flat-left svelte-1lf3qka"/> <button type="button" class="action-btn flat-right svelte-1lf3qka" title="Back to list">‚úï</button></div>'),ms=c("<option> </option>"),gs=c('<select id="location" class="svelte-1lf3qka"><option disabled>Select location...</option><!></select>'),bs=c("<option> </option>"),ys=c("<option> </option>"),hs=c('<th class="svelte-1lf3qka">Sport?</th>'),Ss=c('<td class="center svelte-1lf3qka"><input type="checkbox" class="svelte-1lf3qka"/></td>'),ks=c('<span class="grade-error svelte-1lf3qka">Invalid</span>'),ws=c("<option> </option>"),xs=c("<option> </option>"),qs=c("<option> </option>"),Cs=c('<button type="button" class="remove-btn svelte-1lf3qka">‚úï</button>'),Ts=c('<tr><!><td class="svelte-1lf3qka"><input type="text" placeholder="Route name..." class="svelte-1lf3qka"/></td><td class="svelte-1lf3qka"><input type="text" placeholder="V3"/> <!></td><td class="svelte-1lf3qka"><select class="svelte-1lf3qka"></select></td><td class="svelte-1lf3qka"><input type="number" min="1" class="svelte-1lf3qka"/></td><td class="svelte-1lf3qka"><select class="svelte-1lf3qka"></select></td><td class="svelte-1lf3qka"><select class="svelte-1lf3qka"></select></td><td><textarea placeholder="Notes..." class="svelte-1lf3qka"></textarea></td><td class="center svelte-1lf3qka"><!></td></tr>'),Ns=c("<div> </div>"),Os=c('<div class="form-content svelte-1lf3qka"><h3 class="svelte-1lf3qka">üßó Indoor Climb</h3> <div class="form-row svelte-1lf3qka"><div class="form-group svelte-1lf3qka"><label for="date" class="svelte-1lf3qka">Date</label> <input type="date" id="date" class="svelte-1lf3qka"/></div> <div class="form-group svelte-1lf3qka"><label for="location" class="svelte-1lf3qka">Location</label> <!></div></div> <div class="form-group svelte-1lf3qka"><label for="climbing-type" class="svelte-1lf3qka">Climbing Type</label> <select id="climbing-type" class="svelte-1lf3qka"><option disabled>Select type...</option><!></select></div> <div class="load-section svelte-1lf3qka"><h4 class="svelte-1lf3qka">Load Metrics</h4> <div class="load-metrics svelte-1lf3qka"><div class="load-item svelte-1lf3qka"><label for="finger-load" class="svelte-1lf3qka">Finger</label> <input type="number" id="finger-load" min="1" max="5" class="svelte-1lf3qka"/> <span class="load-scale svelte-1lf3qka">/ 5</span></div> <div class="load-item svelte-1lf3qka"><label for="shoulder-load" class="svelte-1lf3qka">Shoulder</label> <input type="number" id="shoulder-load" min="1" max="5" class="svelte-1lf3qka"/> <span class="load-scale svelte-1lf3qka">/ 5</span></div> <div class="load-item svelte-1lf3qka"><label for="forearm-load" class="svelte-1lf3qka">Forearm</label> <input type="number" id="forearm-load" min="1" max="5" class="svelte-1lf3qka"/> <span class="load-scale svelte-1lf3qka">/ 5</span></div></div> <h4 class="mt-4 svelte-1lf3qka">Grip Metrics</h4> <div class="load-metrics svelte-1lf3qka"><div class="load-item svelte-1lf3qka"><label for="open-grip" class="svelte-1lf3qka">Open</label> <input type="number" id="open-grip" min="1" max="5" class="svelte-1lf3qka"/> <span class="load-scale svelte-1lf3qka">/ 5</span></div> <div class="load-item svelte-1lf3qka"><label for="crimp-grip" class="svelte-1lf3qka">Crimp</label> <input type="number" id="crimp-grip" min="1" max="5" class="svelte-1lf3qka"/> <span class="load-scale svelte-1lf3qka">/ 5</span></div> <div class="load-item svelte-1lf3qka"><label for="pinch-grip" class="svelte-1lf3qka">Pinch</label> <input type="number" id="pinch-grip" min="1" max="5" class="svelte-1lf3qka"/> <span class="load-scale svelte-1lf3qka">/ 5</span></div> <div class="load-item svelte-1lf3qka"><label for="sloper-grip" class="svelte-1lf3qka">Sloper</label> <input type="number" id="sloper-grip" min="1" max="5" class="svelte-1lf3qka"/> <span class="load-scale svelte-1lf3qka">/ 5</span></div> <div class="load-item svelte-1lf3qka"><label for="jug-grip" class="svelte-1lf3qka">Jug</label> <input type="number" id="jug-grip" min="1" max="5" class="svelte-1lf3qka"/> <span class="load-scale svelte-1lf3qka">/ 5</span></div></div></div> <div class="training-section svelte-1lf3qka"><h4 class="svelte-1lf3qka">Training Details</h4> <div class="training-grid svelte-1lf3qka"><div class="training-item svelte-1lf3qka"><label for="training-type" class="svelte-1lf3qka">Training Type</label> <!></div> <div class="training-item svelte-1lf3qka"><label for="difficulty" class="svelte-1lf3qka">Difficulty</label> <select id="difficulty" class="svelte-1lf3qka"></select></div> <div class="training-item svelte-1lf3qka"><label for="category" class="svelte-1lf3qka">Category</label> <!></div> <div class="training-item svelte-1lf3qka"><label for="energy-system" class="svelte-1lf3qka">Energy System</label> <!></div> <div class="training-item svelte-1lf3qka"><label for="wall-angle" class="svelte-1lf3qka">Wall</label> <!></div></div></div> <div class="climbs-section svelte-1lf3qka"><h4 class="svelte-1lf3qka">Climbs</h4> <div class="table-container svelte-1lf3qka"><table class="climbs-table svelte-1lf3qka"><thead><tr><!><th class="svelte-1lf3qka">Name</th><th class="svelte-1lf3qka">Grade</th><th class="svelte-1lf3qka">Attempt</th><th class="svelte-1lf3qka">#</th><th class="svelte-1lf3qka">Wall Angle</th><th class="svelte-1lf3qka">Technique Focus</th><th class="svelte-1lf3qka">Notes</th><th class="svelte-1lf3qka"></th></tr></thead><tbody></tbody></table></div> <button type="button" class="add-btn svelte-1lf3qka">+ Add Climb</button></div> <div class="submit-section svelte-1lf3qka"><!> <button type="button" class="submit-btn svelte-1lf3qka"><!></button></div></div>');function Ls(ke,E){Ot(E,!0);const m=["Rockstar Unit 3","Rockstar Unit 5","Rockstar Techno","Flashpoint Bristol","Redpoint Bristol","TCH Bristol","Other"],N=["Bouldering","Sport","Mixed"],ee=["Onsight","Flash","Redpoint","Repeat","Dogged","DNF"],x=["None","Projecting","Onsighting","Campusing","Repeaters","Comp Sim"],R=["None","Easy","Medium","Hard","Max","Limit+"],I=["None","Strength","Power","Strength Capacity","Power Capacity","Strength Endurance","Power Endurance","Endurance","Coordination","Slab Technique","Overhang Technique"],h=["None","Aerobic Lactic Capacity","Aerobic Lactic Power","Anaerobic Alactic Capacity","Anaerobic Alactic Power","Anaerobic Power","Anaerobic Lactic Capacity"],F=["None","Trusting feet","Double-clutch","Standing on volumes","Deadpointing","Flagging","Swapping feet","Edging","Smearing","Matching","Backstepping","Drop Knee","Bridging","Laybacking","Mantling","Kneebar","Dyno","Pogo","Coordination Moves","Gastoning","Undercutting","Compressing","Heel Hook","Toe Hook","Bicycle"],z=["None","Overhang","Vertical","Slab","Roof"],K=["None","Moon Board","Kilter Board","Beast","Circuit Board","Boulder wall","Lead wall","Comp wall","Auto belays"],G=["V0-","4-","V0","4","V0+","4+","V1","5","V2","5+","V3","6A","V4","6B","V5","6C","V6","7A","V7","7A+","V8","7B","7B+","V9","7C","V10","7C+","V11","8A","V12","8A+","V13","8B","V14","8B+","V15","8C","V16","8C+","V17","9A"].map(f=>f.toLowerCase());let H=k(null),q=k(ut(new Date().toISOString().split("T")[0])),d=k(""),j=k(""),P=k(ut(["None"])),X=k("None"),u=k(ut(["None"])),y=k(ut(["None"])),O=k(ut(["None"])),B=k(3),M=k(3),Z=k(3),D=k(3),re=k(3),_e=k(3),C=k(3),v=k(3),p=k(ut([{isSport:!1,name:"",grade:"",attemptType:"Flash",attemptsNum:1,notes:"",wall:"Overhang"}])),se=k(!1);const le="indoor_climb_draft";let $=k(!1);ia(()=>{const f=localStorage.getItem(le);if(f)try{const o=JSON.parse(f);o.location&&t(d,o.location,!0),o.isOtherLocation&&t(se,o.isOtherLocation,!0),o.climbingType&&t(j,o.climbingType,!0),o.trainingTypes&&t(P,o.trainingTypes,!0),o.difficulty&&t(X,o.difficulty,!0),o.categories&&t(u,o.categories,!0),o.energySystems&&t(y,o.energySystems,!0),o.wallAngles&&t(O,o.wallAngles,!0),o.fingerLoad&&t(B,o.fingerLoad,!0),o.shoulderLoad&&t(M,o.shoulderLoad,!0),o.forearmLoad&&t(Z,o.forearmLoad,!0),o.openGrip&&t(D,o.openGrip,!0),o.crimpGrip&&t(re,o.crimpGrip,!0),o.pinchGrip&&t(_e,o.pinchGrip,!0),o.sloperGrip&&t(C,o.sloperGrip,!0),o.jugGrip&&t(v,o.jugGrip,!0),o.climbs&&t(p,o.climbs,!0)}catch(o){console.error("Failed to restore draft",o)}t($,!0)}),ga(()=>{if(!e($))return;const f={date:e(q),location:e(d),isOtherLocation:e(se),climbingType:e(j),trainingTypes:e(P),difficulty:e(X),categories:e(u),energySystems:e(y),fingerLoad:e(B),shoulderLoad:e(M),forearmLoad:e(Z),openGrip:e(D),crimpGrip:e(re),pinchGrip:e(_e),sloperGrip:e(C),jugGrip:e(v),climbs:e(p)};localStorage.setItem(le,JSON.stringify(f))});function A(){e(d)==="Other"&&(t(se,!0),t(d,""))}function we(){t(se,!1),t(d,"")}function Xe(){t(p,[...e(p),{isSport:!1,name:"",grade:"",attemptType:"Flash",attemptsNum:1,notes:"",wall:"Overhang"}],!0)}function st(f){t(p,e(p).filter((o,ce)=>ce!==f),!0)}function lt(f,o){e(p)[f].attemptType=o,(o==="Flash"||o==="Onsight")&&(e(p)[f].attemptsNum=1)}function te(f){t(H,f,!0)}function fe(){t(H,null)}let ye=Kt(()=>e(j)==="Mixed");function Te(f){return e(j)==="Sport"?!0:e(j)==="Bouldering"?!1:f.isSport}function ge(f){return f.trim()?G.includes(f.trim().toLowerCase()):!0}let ae=k("idle"),ie=k("");function Ie(){return e(d)?e(j)?e(p).filter(o=>o.grade.trim()&&!ge(o.grade)).length>0?"Please fix invalid grades":null:"Please select a climbing type":"Please select a location"}async function xe(){const f=Ie();if(f){t(ae,"error"),t(ie,f,!0);return}t(ae,"saving");try{const o=e(p).map(Ee=>({...Ee,isSport:Te(Ee)})),ce={date:e(q),location:e(d),customLocation:e(se)?e(d):void 0,climbingType:e(j),trainingTypes:e(P),difficulty:e(X),categories:e(u),energySystems:e(y),wallAngles:e(O),fingerLoad:e(B),shoulderLoad:e(M),forearmLoad:e(Z),openGrip:e(D),crimpGrip:e(re),pinchGrip:e(_e),sloperGrip:e(C),jugGrip:e(v),climbs:o},We=Ja(ce);if(ya()){const Ee=await Za(ce);Ee.ok?(qa(We.id,Ee.id),Ca(Ee.id),t(ae,"success"),t(ie,"Session saved and synced!"),localStorage.removeItem(le)):(Ta(We.id),t(ae,"success"),t(ie,"Saved locally. Sync failed: "+(Ee.error||"Unknown error")),localStorage.removeItem(le))}else t(ae,"success"),t(ie,"Saved locally. Will sync when online."),localStorage.removeItem(le);window.dispatchEvent(new CustomEvent("session-saved")),setTimeout(()=>{Oe()},2e3)}catch(o){t(ae,"error"),t(ie,"Failed to save session"),console.error("Save error:",o)}}function Oe(){t(q,new Date().toISOString().split("T")[0],!0),t(d,""),t(se,!1),t(j,""),t(P,["None"],!0),t(X,"None"),t(u,["None"],!0),t(y,["None"],!0),t(O,["None"],!0),t(B,3),t(M,3),t(Z,3),t(D,3),t(re,3),t(_e,3),t(C,3),t(v,3),t(p,[{isSport:!1,name:"",grade:"",attemptType:"Flash",attemptsNum:1,notes:"",wall:"Overhang"}],!0),t(ae,"idle"),t(ie,"")}var me=Os(),Re=l(s(me),2),De=s(Re),vt=l(s(De),2);W(vt),a(De);var pt=l(De,2),xt=l(s(pt),2);{var St=f=>{var o=_s(),ce=s(o);W(ce);var We=l(ce,2);We.__click=we,a(o),Q(ce,()=>e(d),Ee=>t(d,Ee)),r(f,o)},w=f=>{var o=gs();o.__change=A;var ce=s(o);ce.value=ce.__value="";var We=l(ce);de(We,17,()=>m,ue,(Ee,gt)=>{var n=ms(),i=s(n,!0);a(n);var Y={};T(()=>{J(i,e(gt)),Y!==(Y=e(gt))&&(n.value=(n.__value=e(gt))??"")}),r(Ee,n)}),a(o),Ye(o,()=>e(d),Ee=>t(d,Ee)),r(f,o)};L(xt,f=>{e(se)?f(St):f(w,!1)})}a(pt),a(Re);var g=l(Re,2),U=l(s(g),2),ve=s(U);ve.value=ve.__value="";var _=l(ve);de(_,17,()=>N,ue,(f,o)=>{var ce=bs(),We=s(ce,!0);a(ce);var Ee={};T(()=>{J(We,e(o)),Ee!==(Ee=e(o))&&(ce.value=(ce.__value=e(o))??"")}),r(f,ce)}),a(U),a(g);var b=l(g,2),oe=l(s(b),2),qe=s(oe),he=l(s(qe),2);W(he),at(2),a(qe);var be=l(qe,2),Le=l(s(be),2);W(Le),at(2),a(be);var rt=l(be,2),It=l(s(rt),2);W(It),at(2),a(rt),a(oe);var it=l(oe,4),Be=s(it),Gt=l(s(Be),2);W(Gt),at(2),a(Be);var qt=l(Be,2),Ne=l(s(qt),2);W(Ne),at(2),a(qt);var Fe=l(qt,2),Ve=l(s(Fe),2);W(Ve),at(2),a(Fe);var Pe=l(Fe,2),Ct=l(s(Pe),2);W(Ct),at(2),a(Pe);var ot=l(Pe,2),kt=l(s(ot),2);W(kt),at(2),a(ot),a(it),a(b);var ct=l(b,2),Ze=l(s(ct),2),Me=s(Ze),et=l(s(Me),2);Ht(et,{get options(){return x},get selected(){return e(P)},placeholder:"Select types...",onChange:f=>t(P,f,!0)}),a(Me);var ft=l(Me,2),_t=l(s(ft),2);de(_t,21,()=>R,ue,(f,o)=>{var ce=ys(),We=s(ce,!0);a(ce);var Ee={};T(()=>{J(We,e(o)),Ee!==(Ee=e(o))&&(ce.value=(ce.__value=e(o))??"")}),r(f,ce)}),a(_t),a(ft);var $e=l(ft,2),mt=l(s($e),2);Ht(mt,{get options(){return I},get selected(){return e(u)},placeholder:"Select categories...",onChange:f=>t(u,f,!0)}),a($e);var dt=l($e,2),Qt=l(s(dt),2);Ht(Qt,{get options(){return h},get selected(){return e(y)},placeholder:"Select systems...",onChange:f=>t(y,f,!0)}),a(dt);var At=l(dt,2),Na=l(s(At),2);Ht(Na,{get options(){return K},get selected(){return e(O)},placeholder:"Select walls...",onChange:f=>t(O,f,!0)}),a(At),a(Ze),a(ct);var $t=l(ct,2),Ut=l(s($t),2),Xt=s(Ut),va=s(Xt),ca=s(va),Oa=s(ca);{var da=f=>{var o=hs();r(f,o)};L(Oa,f=>{e(ye)&&f(da)})}at(8),a(ca),a(va);var Zt=l(va);de(Zt,21,()=>e(p),ue,(f,o,ce)=>{var We=Ts(),Ee=s(We);{var gt=ne=>{var Ae=Ss(),je=s(Ae);W(je),a(Ae),Va(je,()=>e(o).isSport,zt=>e(o).isSport=zt),r(ne,Ae)};L(Ee,ne=>{e(ye)&&ne(gt)})}var n=l(Ee),i=s(n);W(i),a(n);var Y=l(n),ze=s(Y);W(ze);let Ce;var Tt=l(ze,2);{var Et=ne=>{var Ae=ks();r(ne,Ae)};L(Tt,ne=>{ge(e(o).grade)||ne(Et)})}a(Y);var bt=l(Y),tt=s(bt);tt.__change=ne=>lt(ce,ne.target.value),de(tt,21,()=>ee,ue,(ne,Ae)=>{var je=ws(),zt=s(je,!0);a(je);var jt={};T(()=>{J(zt,e(Ae)),jt!==(jt=e(Ae))&&(je.value=(je.__value=e(Ae))??"")}),r(ne,je)}),a(tt);var wt;za(tt),a(bt);var Rt=l(bt),Dt=s(Rt);W(Dt),a(Rt);var pa=l(Rt),Wt=s(pa);de(Wt,21,()=>z.filter(ne=>ne!=="None"),ue,(ne,Ae)=>{var je=xs(),zt=s(je,!0);a(je);var jt={};T(()=>{J(zt,e(Ae)),jt!==(jt=e(Ae))&&(je.value=(je.__value=e(Ae))??"")}),r(ne,je)}),a(Wt),a(pa);var Ft=l(pa),aa=s(Ft);de(aa,21,()=>F,ue,(ne,Ae)=>{var je=qs(),zt=s(je,!0);a(je);var jt={};T(()=>{J(zt,e(Ae)),jt!==(jt=e(Ae))&&(je.value=(je.__value=e(Ae))??"")}),r(ne,je)}),a(aa),a(Ft);var Vt=l(Ft);let sa;var Pt=s(Vt);Ra(Pt),a(Vt);var la=l(Vt),fa=s(la);{var _a=ne=>{var Ae=Cs();Ae.__click=()=>st(ce),r(ne,Ae)};L(fa,ne=>{e(p).length>1&&ne(_a)})}a(la),a(We),T(ne=>{Ce=Qe(ze,1,"grade-input svelte-1lf3qka",null,Ce,ne),wt!==(wt=e(o).attemptType)&&(tt.value=(tt.__value=e(o).attemptType)??"",ja(tt,e(o).attemptType)),Dt.disabled=e(o).attemptType==="Flash"||e(o).attemptType==="Onsight",sa=Qe(Vt,1,"notes-cell svelte-1lf3qka",null,sa,{expanded:e(H)===ce})},[()=>({invalid:!ge(e(o).grade)})]),Q(i,()=>e(o).name,ne=>e(o).name=ne),Q(ze,()=>e(o).grade,ne=>e(o).grade=ne),Q(Dt,()=>e(o).attemptsNum,ne=>e(o).attemptsNum=ne),Ye(Wt,()=>e(o).wall,ne=>e(o).wall=ne),Ye(aa,()=>e(o).techniqueFocus,ne=>e(o).techniqueFocus=ne),V("focus",Pt,()=>te(ce)),V("blur",Pt,fe),Q(Pt,()=>e(o).notes,ne=>e(o).notes=ne),r(f,We)}),a(Zt),a(Xt),a(Ut);var ha=l(Ut,2);ha.__click=Xe,a($t);var ea=l($t,2),ua=s(ea);{var La=f=>{var o=Ns();let ce;var We=s(o,!0);a(o),T(()=>{ce=Qe(o,1,"save-message svelte-1lf3qka",null,ce,{success:e(ae)==="success",error:e(ae)==="error"}),J(We,e(ie))}),r(f,o)};L(ua,f=>{e(ie)&&f(La)})}var ta=l(ua,2);ta.__click=xe;var Sa=s(ta);{var Ga=f=>{var o=Ue("Saving...");r(f,o)},ka=f=>{var o=yt(),ce=nt(o);{var We=gt=>{var n=Ue("‚úì Saved!");r(gt,n)},Ee=gt=>{var n=Ue("Save Session");r(gt,n)};L(ce,gt=>{e(ae)==="success"?gt(We):gt(Ee,!1)},!0)}r(f,o)};L(Sa,f=>{e(ae)==="saving"?f(Ga):f(ka,!1)})}a(ta),a(ea),a(me),T(()=>ta.disabled=e(ae)==="saving"),Q(vt,()=>e(q),f=>t(q,f)),Ye(U,()=>e(j),f=>t(j,f)),Q(he,()=>e(B),f=>t(B,f)),Q(Le,()=>e(M),f=>t(M,f)),Q(It,()=>e(Z),f=>t(Z,f)),Q(Gt,()=>e(D),f=>t(D,f)),Q(Ne,()=>e(re),f=>t(re,f)),Q(Ve,()=>e(_e),f=>t(_e,f)),Q(Ct,()=>e(C),f=>t(C,f)),Q(kt,()=>e(v),f=>t(v,f)),Ye(_t,()=>e(X),f=>t(X,f)),r(ke,me),Lt()}oa(["click","change"]);var Gs=c("<option> </option>"),Es=c('<div class="input-with-action svelte-15o2ys1"><input type="text" id="crag-manual" placeholder="Enter custom crag name..." class="flat-left svelte-15o2ys1"/> <button type="button" class="action-btn flat-right svelte-15o2ys1" title="Back to list">‚úï</button></div>'),Fs=c("<option> </option>"),zs=c("<option>Other (Manual Entry)</option>"),js=c('<select id="crag" class="svelte-15o2ys1"><option disabled> </option><!><!></select>'),Is=c("<option> </option>"),As=c("<option> </option>"),Rs=c('<th class="svelte-15o2ys1">Sport?</th>'),Ds=c('<td class="center svelte-15o2ys1"><input type="checkbox" class="svelte-15o2ys1"/></td>'),Vs=c('<span class="grade-error svelte-15o2ys1">Invalid</span>'),Ps=c("<option> </option>"),Bs=c("<option> </option>"),Ms=c("<option> </option>"),$s=c('<button type="button" class="remove-btn svelte-15o2ys1">‚úï</button>'),Us=c('<tr><!><td class="svelte-15o2ys1"><input type="text" placeholder="Route name..." class="svelte-15o2ys1"/></td><td class="svelte-15o2ys1"><input type="text" placeholder="V3"/> <!></td><td class="svelte-15o2ys1"><select class="svelte-15o2ys1"></select></td><td class="svelte-15o2ys1"><input type="number" min="1" class="svelte-15o2ys1"/></td><td class="svelte-15o2ys1"><select class="svelte-15o2ys1"></select></td><td class="svelte-15o2ys1"><select class="svelte-15o2ys1"></select></td><td><textarea placeholder="Notes..." class="svelte-15o2ys1"></textarea></td><td class="center svelte-15o2ys1"><!></td></tr>'),Ws=c("<div> </div>"),Js=c('<div class="form-content svelte-15o2ys1"><h3 class="svelte-15o2ys1">‚õ∞Ô∏è Outdoor Climb</h3> <div class="form-row svelte-15o2ys1"><div class="form-group svelte-15o2ys1"><label for="date" class="svelte-15o2ys1">Date</label> <input type="date" id="date" class="svelte-15o2ys1"/></div> <div class="form-group svelte-15o2ys1"><label for="area" class="svelte-15o2ys1">Area</label> <select id="area" class="svelte-15o2ys1"><option disabled>Select area...</option><!></select></div></div> <div class="form-row svelte-15o2ys1"><div class="form-group svelte-15o2ys1"><label for="crag" class="svelte-15o2ys1">Crag</label> <!></div> <div class="form-group svelte-15o2ys1"><label for="sector" class="svelte-15o2ys1">Wall / Sector</label> <input type="text" id="sector" placeholder="Enter sector or wall name..." class="svelte-15o2ys1"/></div></div> <div class="form-group svelte-15o2ys1"><label for="climbing-type" class="svelte-15o2ys1">Climbing Type</label> <select id="climbing-type" class="svelte-15o2ys1"><option disabled>Select type...</option><!></select></div> <div class="load-section svelte-15o2ys1"><h4 class="svelte-15o2ys1">Load Metrics</h4> <div class="load-metrics svelte-15o2ys1"><div class="load-item svelte-15o2ys1"><label for="finger-load" class="svelte-15o2ys1">Finger</label> <input type="number" id="finger-load" min="1" max="5" class="svelte-15o2ys1"/> <span class="load-scale svelte-15o2ys1">/ 5</span></div> <div class="load-item svelte-15o2ys1"><label for="shoulder-load" class="svelte-15o2ys1">Shoulder</label> <input type="number" id="shoulder-load" min="1" max="5" class="svelte-15o2ys1"/> <span class="load-scale svelte-15o2ys1">/ 5</span></div> <div class="load-item svelte-15o2ys1"><label for="forearm-load" class="svelte-15o2ys1">Forearm</label> <input type="number" id="forearm-load" min="1" max="5" class="svelte-15o2ys1"/> <span class="load-scale svelte-15o2ys1">/ 5</span></div></div> <h4 class="mt-4 svelte-15o2ys1">Grip Metrics</h4> <div class="load-metrics svelte-15o2ys1"><div class="load-item svelte-15o2ys1"><label for="open-grip" class="svelte-15o2ys1">Open</label> <input type="number" id="open-grip" min="1" max="5" class="svelte-15o2ys1"/> <span class="load-scale svelte-15o2ys1">/ 5</span></div> <div class="load-item svelte-15o2ys1"><label for="crimp-grip" class="svelte-15o2ys1">Crimp</label> <input type="number" id="crimp-grip" min="1" max="5" class="svelte-15o2ys1"/> <span class="load-scale svelte-15o2ys1">/ 5</span></div> <div class="load-item svelte-15o2ys1"><label for="pinch-grip" class="svelte-15o2ys1">Pinch</label> <input type="number" id="pinch-grip" min="1" max="5" class="svelte-15o2ys1"/> <span class="load-scale svelte-15o2ys1">/ 5</span></div> <div class="load-item svelte-15o2ys1"><label for="sloper-grip" class="svelte-15o2ys1">Sloper</label> <input type="number" id="sloper-grip" min="1" max="5" class="svelte-15o2ys1"/> <span class="load-scale svelte-15o2ys1">/ 5</span></div> <div class="load-item svelte-15o2ys1"><label for="jug-grip" class="svelte-15o2ys1">Jug</label> <input type="number" id="jug-grip" min="1" max="5" class="svelte-15o2ys1"/> <span class="load-scale svelte-15o2ys1">/ 5</span></div></div></div> <div class="training-section svelte-15o2ys1"><h4 class="svelte-15o2ys1">Training Details</h4> <div class="training-grid svelte-15o2ys1"><div class="training-item svelte-15o2ys1"><label for="training-type" class="svelte-15o2ys1">Training Type</label> <!></div> <div class="training-item svelte-15o2ys1"><label for="difficulty" class="svelte-15o2ys1">Difficulty</label> <select id="difficulty" class="svelte-15o2ys1"></select></div> <div class="training-item svelte-15o2ys1"><label for="category" class="svelte-15o2ys1">Category</label> <!></div> <div class="training-item svelte-15o2ys1"><label for="energy-system" class="svelte-15o2ys1">Energy System</label> <!></div></div></div> <div class="climbs-section svelte-15o2ys1"><h4 class="svelte-15o2ys1">Climbs</h4> <div class="table-container svelte-15o2ys1"><table class="climbs-table svelte-15o2ys1"><thead><tr><!><th class="svelte-15o2ys1">Name</th><th class="svelte-15o2ys1">Grade</th><th class="svelte-15o2ys1">Attempt</th><th class="svelte-15o2ys1">#</th><th class="svelte-15o2ys1">Wall Angle</th><th class="svelte-15o2ys1">Technique Focus</th><th class="svelte-15o2ys1">Notes</th><th class="svelte-15o2ys1"></th></tr></thead><tbody></tbody></table></div> <button type="button" class="add-btn svelte-15o2ys1">+ Add Climb</button></div> <div class="submit-section svelte-15o2ys1"><!> <button type="button" class="submit-btn svelte-15o2ys1"><!></button></div></div>');function Ks(ke,E){Ot(E,!0);const m=es(),N=["Boulder","Sport","Trad"],ee=["Onsight","Flash","Redpoint","Repeat","Dogged","DNF"],x=["None","Overhang","Vertical","Slab","Roof"],R=["None","Projecting","Onsighting","Campusing","Repeaters","Comp Sim"],I=["None","Easy","Medium","Hard","Max","Limit+"],h=["None","Strength","Power","Strength Capacity","Power Capacity","Strength Endurance","Power Endurance","Endurance","Coordination","Slab Technique","Overhang Technique"],F=["None","Aerobic Lactic Capacity","Aerobic Lactic Power","Anaerobic Alactic Capacity","Anaerobic Alactic Power","Anaerobic Power","Anaerobic Lactic Capacity"],z=["None","Trusting feet","Double-clutch","Deadpointing","Flagging","Swapping feet","Edging","Smearing","Matching","Backstepping","Drop Knee","Bridging","Laybacking","Mantling","Kneebar","Dyno","Coordination Moves","Gastoning","Undercutting","Compressing","Heel Hook","Toe Hook","Bicycle"],S=["V0-","4-","V0","4","V0+","4+","V1","5","V2","5+","V3","6A","V4","6B","V5","6C","V6","7A","V7","7A+","V8","7B","7B+","V9","7C","V10","7C+","V11","8A","V12","8A+","V13","8B","V14","8B+","V15","8C","V16","8C+","V17","9A"].map(n=>n.toLowerCase());let G=k(null),H=k(ut(new Date().toISOString().split("T")[0])),q=k(""),d=k(""),j=k(""),P=k(""),X=k(ut(["None"])),u=k("None"),y=k(ut(["None"])),O=k(ut(["None"])),B=k(3),M=k(3),Z=k(3),D=k(3),re=k(3),_e=k(3),C=k(3),v=k(3),p=k(ut([{isSport:!1,name:"",grade:"",attemptType:"Flash",attemptsNum:1,notes:""}])),se=Kt(()=>e(q)?as(e(q)):[]),le=k(!1);const $="outdoor_climb_draft";let A=k(!1);ia(()=>{const n=localStorage.getItem($);if(n)try{const i=JSON.parse(n);i.area&&t(q,i.area,!0),i.crag&&t(d,i.crag,!0),i.sector&&t(j,i.sector,!0),i.isOtherCrag&&t(le,i.isOtherCrag,!0),i.climbingType&&t(P,i.climbingType,!0),i.trainingTypes&&t(X,i.trainingTypes,!0),i.difficulty&&t(u,i.difficulty,!0),i.categories&&t(y,i.categories,!0),i.energySystems&&t(O,i.energySystems,!0),i.fingerLoad&&t(B,i.fingerLoad,!0),i.shoulderLoad&&t(M,i.shoulderLoad,!0),i.forearmLoad&&t(Z,i.forearmLoad,!0),i.openGrip&&t(D,i.openGrip,!0),i.crimpGrip&&t(re,i.crimpGrip,!0),i.pinchGrip&&t(_e,i.pinchGrip,!0),i.sloperGrip&&t(C,i.sloperGrip,!0),i.jugGrip&&t(v,i.jugGrip,!0),i.climbs&&t(p,i.climbs,!0)}catch(i){console.error("Failed to restore draft",i)}t(A,!0)}),ga(()=>{if(!e(A))return;const n={date:e(H),area:e(q),crag:e(d),sector:e(j),isOtherCrag:e(le),climbingType:e(P),trainingTypes:e(X),difficulty:e(u),categories:e(y),energySystems:e(O),fingerLoad:e(B),shoulderLoad:e(M),forearmLoad:e(Z),openGrip:e(D),crimpGrip:e(re),pinchGrip:e(_e),sloperGrip:e(C),jugGrip:e(v),climbs:e(p)};localStorage.setItem($,JSON.stringify(n))}),ga(()=>{e(q)&&(t(d,""),t(le,!1))});function we(){e(d)==="Other"&&(t(le,!0),t(d,""))}function Xe(){t(le,!1),t(d,"")}function st(){t(p,[...e(p),{isSport:!1,name:"",grade:"",attemptType:"Flash",attemptsNum:1,notes:""}],!0)}function lt(n){t(p,e(p).filter((i,Y)=>Y!==n),!0)}function te(n,i){e(p)[n].attemptType=i,(i==="Flash"||i==="Onsight")&&(e(p)[n].attemptsNum=1)}function fe(n){t(G,n,!0)}function ye(){t(G,null)}let Te=Kt(()=>e(P)==="Trad");function ge(n){return e(P)==="Sport"?!0:e(P)==="Boulder"?!1:n.isSport}function ae(n){return n.trim()?S.includes(n.trim().toLowerCase()):!0}let ie=k("idle"),Ie=k("");function xe(){return e(q)?e(d)?e(P)?e(p).filter(i=>i.grade.trim()&&!ae(i.grade)).length>0?"Please fix invalid grades":null:"Please select a climbing type":"Please select a crag":"Please select an area"}async function Oe(){const n=xe();if(n){t(ie,"error"),t(Ie,n,!0);return}t(ie,"saving");try{const i=e(p).map(Ce=>({...Ce,isSport:ge(Ce)})),Y={date:e(H),area:e(q),crag:e(d),sector:e(j)||void 0,climbingType:e(P),trainingTypes:e(X),difficulty:e(u),categories:e(y),energySystems:e(O),fingerLoad:e(B),shoulderLoad:e(M),forearmLoad:e(Z),openGrip:e(D),crimpGrip:e(re),pinchGrip:e(_e),sloperGrip:e(C),jugGrip:e(v),climbs:i},ze=Ka(Y);if(ya()){const Ce=await ts(Y);Ce.ok?(qa(ze.id,Ce.id),Ca(Ce.id),t(ie,"success"),t(Ie,"Session saved and synced!"),localStorage.removeItem($)):(Ta(ze.id),t(ie,"success"),t(Ie,"Saved locally. Sync failed: "+(Ce.error||"Unknown error")),localStorage.removeItem($))}else t(ie,"success"),t(Ie,"Saved locally. Will sync when online."),localStorage.removeItem($);window.dispatchEvent(new CustomEvent("session-saved")),setTimeout(()=>{me()},2e3)}catch(i){t(ie,"error"),t(Ie,"Failed to save session"),console.error("Save error:",i)}}function me(){t(H,new Date().toISOString().split("T")[0],!0),t(q,""),t(d,""),t(j,""),t(P,""),t(X,["None"],!0),t(u,"None"),t(y,["None"],!0),t(O,["None"],!0),t(B,3),t(M,3),t(Z,3),t(D,3),t(re,3),t(_e,3),t(C,3),t(v,3),t(p,[{isSport:!1,name:"",grade:"",attemptType:"Flash",attemptsNum:1,notes:""}],!0),t(ie,"idle"),t(Ie,"")}var Re=Js(),De=l(s(Re),2),vt=s(De),pt=l(s(vt),2);W(pt),a(vt);var xt=l(vt,2),St=l(s(xt),2),w=s(St);w.value=w.__value="";var g=l(w);de(g,17,()=>m,ue,(n,i)=>{var Y=Gs(),ze=s(Y,!0);a(Y);var Ce={};T(()=>{J(ze,e(i)),Ce!==(Ce=e(i))&&(Y.value=(Y.__value=e(i))??"")}),r(n,Y)}),a(St),a(xt),a(De);var U=l(De,2),ve=s(U),_=l(s(ve),2);{var b=n=>{var i=Es(),Y=s(i);W(Y);var ze=l(Y,2);ze.__click=Xe,a(i),Q(Y,()=>e(d),Ce=>t(d,Ce)),r(n,i)},oe=n=>{var i=js();i.__change=we;var Y=s(i),ze=s(Y,!0);a(Y),Y.value=Y.__value="";var Ce=l(Y);de(Ce,17,()=>e(se),ue,(bt,tt)=>{var wt=Fs(),Rt=s(wt,!0);a(wt);var Dt={};T(()=>{J(Rt,e(tt)),Dt!==(Dt=e(tt))&&(wt.value=(wt.__value=e(tt))??"")}),r(bt,wt)});var Tt=l(Ce);{var Et=bt=>{var tt=zs();tt.value=tt.__value="Other",r(bt,tt)};L(Tt,bt=>{e(q)&&bt(Et)})}a(i),T(()=>{i.disabled=!e(q),J(ze,e(q)?"Select crag...":"Select area first...")}),Ye(i,()=>e(d),bt=>t(d,bt)),r(n,i)};L(_,n=>{e(le)?n(b):n(oe,!1)})}a(ve);var qe=l(ve,2),he=l(s(qe),2);W(he),a(qe),a(U);var be=l(U,2),Le=l(s(be),2),rt=s(Le);rt.value=rt.__value="";var It=l(rt);de(It,17,()=>N,ue,(n,i)=>{var Y=Is(),ze=s(Y,!0);a(Y);var Ce={};T(()=>{J(ze,e(i)),Ce!==(Ce=e(i))&&(Y.value=(Y.__value=e(i))??"")}),r(n,Y)}),a(Le),a(be);var it=l(be,2),Be=l(s(it),2),Gt=s(Be),qt=l(s(Gt),2);W(qt),at(2),a(Gt);var Ne=l(Gt,2),Fe=l(s(Ne),2);W(Fe),at(2),a(Ne);var Ve=l(Ne,2),Pe=l(s(Ve),2);W(Pe),at(2),a(Ve),a(Be);var Ct=l(Be,4),ot=s(Ct),kt=l(s(ot),2);W(kt),at(2),a(ot);var ct=l(ot,2),Ze=l(s(ct),2);W(Ze),at(2),a(ct);var Me=l(ct,2),et=l(s(Me),2);W(et),at(2),a(Me);var ft=l(Me,2),_t=l(s(ft),2);W(_t),at(2),a(ft);var $e=l(ft,2),mt=l(s($e),2);W(mt),at(2),a($e),a(Ct),a(it);var dt=l(it,2),Qt=l(s(dt),2),At=s(Qt),Na=l(s(At),2);Ht(Na,{get options(){return R},get selected(){return e(X)},placeholder:"Select types...",onChange:n=>t(X,n,!0)}),a(At);var $t=l(At,2),Ut=l(s($t),2);de(Ut,21,()=>I,ue,(n,i)=>{var Y=As(),ze=s(Y,!0);a(Y);var Ce={};T(()=>{J(ze,e(i)),Ce!==(Ce=e(i))&&(Y.value=(Y.__value=e(i))??"")}),r(n,Y)}),a(Ut),a($t);var Xt=l($t,2),va=l(s(Xt),2);Ht(va,{get options(){return h},get selected(){return e(y)},placeholder:"Select categories...",onChange:n=>t(y,n,!0)}),a(Xt);var ca=l(Xt,2),Oa=l(s(ca),2);Ht(Oa,{get options(){return F},get selected(){return e(O)},placeholder:"Select systems...",onChange:n=>t(O,n,!0)}),a(ca),a(Qt),a(dt);var da=l(dt,2),Zt=l(s(da),2),ha=s(Zt),ea=s(ha),ua=s(ea),La=s(ua);{var ta=n=>{var i=Rs();r(n,i)};L(La,n=>{e(Te)&&n(ta)})}at(8),a(ua),a(ea);var Sa=l(ea);de(Sa,21,()=>e(p),ue,(n,i,Y)=>{var ze=Us(),Ce=s(ze);{var Tt=pe=>{var Je=Ds(),Ke=s(Je);W(Ke),a(Je),Va(Ke,()=>e(i).isSport,Jt=>e(i).isSport=Jt),r(pe,Je)};L(Ce,pe=>{e(Te)&&pe(Tt)})}var Et=l(Ce),bt=s(Et);W(bt),a(Et);var tt=l(Et),wt=s(tt);W(wt);let Rt;var Dt=l(wt,2);{var pa=pe=>{var Je=Vs();r(pe,Je)};L(Dt,pe=>{ae(e(i).grade)||pe(pa)})}a(tt);var Wt=l(tt),Ft=s(Wt);Ft.__change=pe=>te(Y,pe.target.value),de(Ft,21,()=>ee,ue,(pe,Je)=>{var Ke=Ps(),Jt=s(Ke,!0);a(Ke);var Bt={};T(()=>{J(Jt,e(Je)),Bt!==(Bt=e(Je))&&(Ke.value=(Ke.__value=e(Je))??"")}),r(pe,Ke)}),a(Ft);var aa;za(Ft),a(Wt);var Vt=l(Wt),sa=s(Vt);W(sa),a(Vt);var Pt=l(Vt),la=s(Pt);de(la,21,()=>x.filter(pe=>pe!=="None"),ue,(pe,Je)=>{var Ke=Bs(),Jt=s(Ke,!0);a(Ke);var Bt={};T(()=>{J(Jt,e(Je)),Bt!==(Bt=e(Je))&&(Ke.value=(Ke.__value=e(Je))??"")}),r(pe,Ke)}),a(la),a(Pt);var fa=l(Pt),_a=s(fa);de(_a,21,()=>z,ue,(pe,Je)=>{var Ke=Ms(),Jt=s(Ke,!0);a(Ke);var Bt={};T(()=>{J(Jt,e(Je)),Bt!==(Bt=e(Je))&&(Ke.value=(Ke.__value=e(Je))??"")}),r(pe,Ke)}),a(_a),a(fa);var ne=l(fa);let Ae;var je=s(ne);Ra(je),a(ne);var zt=l(ne),jt=s(zt);{var Ba=pe=>{var Je=$s();Je.__click=()=>lt(Y),r(pe,Je)};L(jt,pe=>{e(p).length>1&&pe(Ba)})}a(zt),a(ze),T(pe=>{Rt=Qe(wt,1,"grade-input svelte-15o2ys1",null,Rt,pe),aa!==(aa=e(i).attemptType)&&(Ft.value=(Ft.__value=e(i).attemptType)??"",ja(Ft,e(i).attemptType)),sa.disabled=e(i).attemptType==="Flash"||e(i).attemptType==="Onsight",Ae=Qe(ne,1,"notes-cell svelte-15o2ys1",null,Ae,{expanded:e(G)===Y})},[()=>({invalid:!ae(e(i).grade)})]),Q(bt,()=>e(i).name,pe=>e(i).name=pe),Q(wt,()=>e(i).grade,pe=>e(i).grade=pe),Q(sa,()=>e(i).attemptsNum,pe=>e(i).attemptsNum=pe),Ye(la,()=>e(i).wall,pe=>e(i).wall=pe),Ye(_a,()=>e(i).techniqueFocus,pe=>e(i).techniqueFocus=pe),V("focus",je,()=>fe(Y)),V("blur",je,ye),Q(je,()=>e(i).notes,pe=>e(i).notes=pe),r(n,ze)}),a(Sa),a(ha),a(Zt);var Ga=l(Zt,2);Ga.__click=st,a(da);var ka=l(da,2),f=s(ka);{var o=n=>{var i=Ws();let Y;var ze=s(i,!0);a(i),T(()=>{Y=Qe(i,1,"save-message svelte-15o2ys1",null,Y,{success:e(ie)==="success",error:e(ie)==="error"}),J(ze,e(Ie))}),r(n,i)};L(f,n=>{e(Ie)&&n(o)})}var ce=l(f,2);ce.__click=Oe;var We=s(ce);{var Ee=n=>{var i=Ue("Saving...");r(n,i)},gt=n=>{var i=yt(),Y=nt(i);{var ze=Tt=>{var Et=Ue("‚úì Saved!");r(Tt,Et)},Ce=Tt=>{var Et=Ue("Save Session");r(Tt,Et)};L(Y,Tt=>{e(ie)==="success"?Tt(ze):Tt(Ce,!1)},!0)}r(n,i)};L(We,n=>{e(ie)==="saving"?n(Ee):n(gt,!1)})}a(ce),a(ka),a(Re),T(()=>ce.disabled=e(ie)==="saving"),Q(pt,()=>e(H),n=>t(H,n)),Ye(St,()=>e(q),n=>t(q,n)),Q(he,()=>e(j),n=>t(j,n)),Ye(Le,()=>e(P),n=>t(P,n)),Q(qt,()=>e(B),n=>t(B,n)),Q(Fe,()=>e(M),n=>t(M,n)),Q(Pe,()=>e(Z),n=>t(Z,n)),Q(kt,()=>e(D),n=>t(D,n)),Q(Ze,()=>e(re),n=>t(re,n)),Q(et,()=>e(_e),n=>t(_e,n)),Q(_t,()=>e(C),n=>t(C,n)),Q(mt,()=>e(v),n=>t(v,n)),Ye(Ut,()=>e(u),n=>t(u,n)),r(ke,Re),Lt()}oa(["click","change"]);var Hs=c('<div><div class="col set-num svelte-ow8x7m"> </div> <div class="col weight svelte-ow8x7m"><input type="number" placeholder="-" class="svelte-ow8x7m"/></div> <div class="col reps svelte-ow8x7m"><input type="number" placeholder="-" class="svelte-ow8x7m"/></div> <div class="col check svelte-ow8x7m"><button><!></button></div></div>');function Ys(ke,E){Ot(E,!1);let m=ht(E,"setNumber",8),N=ht(E,"set",12);const ee=ba();function x(){N(N().completed=!N().completed,!0),ee("change",N()),N().completed&&ee("complete")}function R(u){ee("focus",{field:u,value:N()[u],set:N()})}na();var I=Hs();let h;var F=s(I),z=s(F,!0);a(F);var K=l(F,2),S=s(K);W(S),a(K);var G=l(K,2),H=s(G);W(H),a(G);var q=l(G,2),d=s(q);let j;var P=s(d);{var X=u=>{var y=Ue("‚úì");r(u,y)};L(P,u=>{He(N()),Se(()=>N().completed)&&u(X)})}a(d),a(q),a(I),T(()=>{h=Qe(I,1,"set-row svelte-ow8x7m",null,h,{completed:N().completed}),J(z,m()),j=Qe(d,1,"check-btn svelte-ow8x7m",null,j,{checked:N().completed})}),Q(S,()=>N().weight,u=>N(N().weight=u,!0)),V("focus",S,()=>R("weight")),Q(H,()=>N().reps,u=>N(N().reps=u,!0)),V("focus",H,()=>R("reps")),V("click",d,x),r(ke,I),Lt()}var Qs=c('<div><span class="dot svelte-1ni79z8"></span> <span class="text"> </span></div>'),Xs=c("<button></button>"),Zs=c('<div class="exercise-card svelte-1ni79z8"><div class="header svelte-1ni79z8"><div class="title-group svelte-1ni79z8"><button class="icon-btn info-btn svelte-1ni79z8" aria-label="Exercise Info"><div class="info-icon svelte-1ni79z8">?</div></button> <div><h4 class="svelte-1ni79z8"> </h4> <div class="benchmarks svelte-1ni79z8"></div></div></div> <button class="icon-btn delete-btn svelte-1ni79z8" aria-label="Delete Exercise">üóëÔ∏è</button></div> <div class="table-header svelte-1ni79z8"><div class="col">Set</div> <div class="col">kg</div> <div class="col">Reps</div> <div class="col">‚úì</div></div> <div class="sets"></div> <button class="add-set-btn svelte-1ni79z8">+ Add Set</button> <div class="difficulty-footer svelte-1ni79z8"><span class="diff-label svelte-1ni79z8">How did it feel?</span> <div class="diff-circles svelte-1ni79z8"></div></div></div>');function el(ke,E){Ot(E,!1);let m=ht(E,"exercise",12),N=ht(E,"benchmarks",24,()=>({}));const ee=ba();function x(){const u=m().sets[m().sets.length-1],y={weight:u?u.weight:0,reps:u?u.reps:0,isWarmup:!1,isFailure:!1,isDropSet:!1,completed:!1};m(m().sets=[...m().sets,y],!0)}const R=["Green","Yellow","Orange","Red"];na();var I=Zs(),h=s(I),F=s(h),z=s(F),K=l(z,2),S=s(K),G=s(S,!0);a(S);var H=l(S,2);de(H,5,()=>R,ue,(u,y)=>{var O=yt(),B=nt(O);{var M=Z=>{var D=Qs();Qe(D,1,"benchmark-pill svelte-1ni79z8",null,{},{"has-data":!0});var re=l(s(D),2),_e=s(re);a(re),a(D),T(C=>{Aa(D,`--pill-color: var(--color-${C??""})`),J(_e,`${He(N()),e(y),Se(()=>N()[e(y)]?.weight)??""}kg x ${He(N()),e(y),Se(()=>N()[e(y)]?.reps)??""}`)},[()=>(e(y),Se(()=>e(y).toLowerCase()))]),r(Z,D)};L(B,Z=>{He(N()),e(y),Se(()=>N()[e(y)])&&Z(M)})}r(u,O)}),a(H),a(K),a(F);var q=l(F,2);a(h);var d=l(h,4);de(d,5,()=>(He(m()),Se(()=>m().sets)),ue,(u,y,O)=>{Ys(u,{setNumber:O+1,get set(){return(He(m()),Se(()=>m().sets))[O]},set set(B){(He(m()),Se(()=>m().sets))[O]=B,wa(()=>m())},$$events:{complete(B){Yt.call(this,E,B)},focus(B){Yt.call(this,E,B)},change(B){Yt.call(this,E,B)}},$$legacy:!0})}),a(d);var j=l(d,2),P=l(j,2),X=l(s(P),2);de(X,5,()=>R,ue,(u,y)=>{var O=Xs();let B;T(M=>{B=Qe(O,1,"diff-circle svelte-1ni79z8",null,B,{selected:m().difficulty===e(y)}),Aa(O,`--circle-color: var(--color-${M??""})`),Nt(O,"aria-label",`Mark as ${e(y)??""}`)},[()=>(e(y),Se(()=>e(y).toLowerCase()))]),V("click",O,()=>m(m().difficulty=e(y),!0)),r(u,O)}),a(X),a(P),a(I),T(()=>J(G,(He(m()),Se(()=>m().name)))),V("click",z,()=>ee("info",m())),V("click",q,()=>ee("delete",m())),V("click",j,x),r(ke,I),Lt()}var tl=c('<div class="keypad svelte-1fay4f8"><div class="header svelte-1fay4f8"><span class="label svelte-1fay4f8"> </span> <div class="display svelte-1fay4f8" role="textbox" aria-readonly="true"> </div></div> <div class="quick-adds svelte-1fay4f8"><button class="svelte-1fay4f8">+2.5</button> <button class="svelte-1fay4f8">+5</button> <button class="svelte-1fay4f8">+10</button></div> <div class="grid svelte-1fay4f8"><button class="svelte-1fay4f8">1</button> <button class="svelte-1fay4f8">2</button> <button class="svelte-1fay4f8">3</button> <button class="svelte-1fay4f8">4</button> <button class="svelte-1fay4f8">5</button> <button class="svelte-1fay4f8">6</button> <button class="svelte-1fay4f8">7</button> <button class="svelte-1fay4f8">8</button> <button class="svelte-1fay4f8">9</button> <button class="action svelte-1fay4f8">C</button> <button class="svelte-1fay4f8">0</button> <button class="action svelte-1fay4f8">‚å´</button></div></div>');function al(ke,E){Ot(E,!1);let m=ht(E,"value",8,null),N=ht(E,"label",8,"Value");const ee=ba();function x(se){const le=m()?.toString()||"";if(le.length>=5)return;const $=parseFloat(le+se.toString());ee("change",$)}function R(){ee("change",0)}function I(){const se=m()?.toString()||"";if(se.length<=1){ee("change",0);return}const le=parseFloat(se.slice(0,-1));ee("change",le)}function h(se){ee("change",(m()||0)+se)}na();var F=tl(),z=s(F),K=s(z),S=s(K,!0);a(K);var G=l(K,2),H=s(G,!0);a(G),a(z);var q=l(z,2),d=s(q),j=l(d,2),P=l(j,2);a(q);var X=l(q,2),u=s(X),y=l(u,2),O=l(y,2),B=l(O,2),M=l(B,2),Z=l(M,2),D=l(Z,2),re=l(D,2),_e=l(re,2),C=l(_e,2),v=l(C,2),p=l(v,2);a(X),a(F),T(()=>{J(S,N()),Nt(G,"aria-label",N()),J(H,m()||0)}),V("click",d,()=>h(2.5)),V("click",j,()=>h(5)),V("click",P,()=>h(10)),V("click",u,()=>x(1)),V("click",y,()=>x(2)),V("click",O,()=>x(3)),V("click",B,()=>x(4)),V("click",M,()=>x(5)),V("click",Z,()=>x(6)),V("click",D,()=>x(7)),V("click",re,()=>x(8)),V("click",_e,()=>x(9)),V("click",C,R),V("click",v,()=>x(0)),V("click",p,I),r(ke,F),Lt()}var sl=c("<button> </button>"),ll=c('<div class="presets-grid svelte-18i4gcv"></div> <div class="manual-adjust svelte-18i4gcv"><button class="adjust-btn svelte-18i4gcv">-</button> <span class="adjust-label svelte-18i4gcv">10s</span> <button class="adjust-btn svelte-18i4gcv">+</button></div> <button class="action-btn start svelte-18i4gcv">Start Timer</button>',1),rl=c('<div class="quick-adjust svelte-18i4gcv"><button class="adjust-btn svelte-18i4gcv">-10</button> <button class="adjust-btn svelte-18i4gcv">+10</button></div> <div class="running-controls svelte-18i4gcv"><button class="action-btn secondary svelte-18i4gcv">Stop</button> <button class="action-btn primary svelte-18i4gcv"> </button></div>',1),il=c('<div class="timer-overlay svelte-18i4gcv" role="button" tabindex="0" aria-label="Close timer"><div class="rest-timer svelte-18i4gcv"><div class="header svelte-18i4gcv"><span class="title svelte-18i4gcv">Rest Timer</span> <button class="close-btn svelte-18i4gcv">‚úï</button></div> <div class="display-container svelte-18i4gcv"><div> </div> <div class="status-label svelte-18i4gcv"><!></div></div> <!></div></div>');function ol(ke,E){Ot(E,!1);const m=Ge(),N=Ge();let ee=ht(E,"duration",8,90),x=ht(E,"autoStart",8,!0),R=ht(E,"visible",12,!0),I=ht(E,"onComplete",8,()=>{}),h=Ge("SETUP"),F=Ge(ee()),z=Ge(ee()),K,S=Ge(!1);const G=[30,60,90,120,180];function H(M){clearInterval(K),t(z,M),t(F,M),t(h,"RUNNING"),t(S,!1),K=setInterval(()=>{e(S)||($a(F,-1),e(F)<=0&&(clearInterval(K),u(),I()()))},1e3)}function q(){t(S,!e(S))}function d(M){t(F,e(F)+M)}function j(M){e(F)>M&&t(F,e(F)-M)}function P(){clearInterval(K),t(h,"SETUP"),t(F,e(z))}function X(){R(!1),clearInterval(K)}function u(){navigator.vibrate&&navigator.vibrate([200,100,200])}Da(()=>{clearInterval(K)}),Mt(()=>(He(R()),He(x()),He(ee())),()=>{R()&&(x()?H(ee()):(t(h,"SETUP"),t(z,ee()),t(F,ee())))}),Mt(()=>e(F),()=>{t(m,Math.floor(e(F)/60))}),Mt(()=>e(F),()=>{t(N,e(F)%60)}),Fa(),na();var y=yt(),O=nt(y);{var B=M=>{var Z=il(),D=s(Z),re=s(D),_e=l(s(re),2);a(re);var C=l(re,2),v=s(C);let p;var se=s(v);a(v);var le=l(v,2),$=s(le);{var A=te=>{var fe=Ue("Set Duration");r(te,fe)},we=te=>{var fe=yt(),ye=nt(fe);{var Te=ae=>{var ie=Ue("Paused");r(ae,ie)},ge=ae=>{var ie=Ue("Resting...");r(ae,ie)};L(ye,ae=>{e(S)?ae(Te):ae(ge,!1)},!0)}r(te,fe)};L($,te=>{e(h)==="SETUP"?te(A):te(we,!1)})}a(le),a(C);var Xe=l(C,2);{var st=te=>{var fe=ll(),ye=nt(fe);de(ye,5,()=>G,ue,(Ie,xe)=>{var Oe=sl();let me;var Re=s(Oe,!0);a(Oe),T(()=>{me=Qe(Oe,1,"preset-btn svelte-18i4gcv",null,me,{active:e(z)===e(xe)}),J(Re,e(xe)>=60?`${e(xe)/60}m`:`${e(xe)}s`)}),V("click",Oe,()=>t(z,e(xe))),r(Ie,Oe)}),a(ye);var Te=l(ye,2),ge=s(Te),ae=l(ge,4);a(Te);var ie=l(Te,2);V("click",ge,()=>t(z,Math.max(10,e(z)-10))),V("click",ae,()=>t(z,e(z)+10)),V("click",ie,()=>H(e(z))),r(te,fe)},lt=te=>{var fe=rl(),ye=nt(fe),Te=s(ye),ge=l(Te,2);a(ye);var ae=l(ye,2),ie=s(ae),Ie=l(ie,2),xe=s(Ie,!0);a(Ie),a(ae),T(()=>J(xe,e(S)?"Resume":"Pause")),V("click",Te,()=>j(10)),V("click",ge,()=>d(10)),V("click",ie,P),V("click",Ie,q),r(te,fe)};L(Xe,te=>{e(h)==="SETUP"?te(st):te(lt,!1)})}a(D),a(Z),T((te,fe)=>{p=Qe(v,1,"time-display svelte-18i4gcv",null,p,{paused:e(S)&&e(h)==="RUNNING"}),J(se,`${te??""}:${fe??""}`)},[()=>(e(h),e(z),e(m),Se(()=>e(h)==="SETUP"?Math.floor(e(z)/60):e(m))),()=>(e(h),e(z),e(N),Se(()=>e(h)==="SETUP"?(e(z)%60).toString().padStart(2,"0"):e(N).toString().padStart(2,"0")))]),V("click",_e,X),ra(3,D,()=>ss,()=>({start:.9,duration:200})),ra(3,Z,()=>Pa,()=>({duration:200})),V("click",Z,cs(X)),V("keydown",Z,te=>{te.key==="Escape"&&X()}),r(M,Z)};L(O,M=>{R()&&M(B)})}r(ke,y),Lt()}var nl=c("<img/>"),vl=c('<div class="animation-frame svelte-zbmy0k"></div>'),cl=c('<div class="visual-placeholder svelte-zbmy0k"><span>No animation available</span></div>'),dl=c("<li> </li>"),ul=c('<div class="modal-overlay svelte-zbmy0k" role="button" tabindex="0" aria-label="Close modal"><div class="modal-content svelte-zbmy0k" role="dialog" aria-modal="true" tabindex="-1"><div class="header svelte-zbmy0k"><h3 class="svelte-zbmy0k"> </h3> <span class="category svelte-zbmy0k"> </span> <button class="close-btn svelte-zbmy0k" aria-label="Close">√ó</button></div> <div class="visual-container svelte-zbmy0k"><!> <div class="muscles svelte-zbmy0k"> </div></div> <div class="instructions svelte-zbmy0k"><h4>Instructions</h4> <ol class="svelte-zbmy0k"></ol></div></div></div>');function pl(ke,E){Ot(E,!1);let m=ht(E,"exercise",8),N=ht(E,"visible",8,!1);const ee=ba();let x=Ge(0),R;function I(){m().images&&m().images.length>0&&(t(x,0),R=setInterval(()=>{t(x,(e(x)+1)%m().images.length)},800))}function h(){R&&clearInterval(R)}Da(()=>{h()});function F(){ee("close")}Mt(()=>(He(N()),He(m())),()=>{N()&&m().images?.length?I():h()}),Fa(),na();var z=yt(),K=nt(z);{var S=G=>{var H=ul(),q=s(H),d=s(q),j=s(d),P=s(j,!0);a(j);var X=l(j,2),u=s(X,!0);a(X);var y=l(X,2);a(d);var O=l(d,2),B=s(O);{var M=v=>{var p=vl();de(p,5,()=>(He(m()),Se(()=>m().images)),ue,(se,le,$)=>{var A=nl();let we;T(()=>{Nt(A,"src",`${vs??""}${e(le)??""}`),Nt(A,"alt",`${He(m()),Se(()=>m().name)??""} frame ${$+1}`),we=Qe(A,1,"svelte-zbmy0k",null,we,{active:$===e(x)})}),r(se,A)}),a(p),r(v,p)},Z=v=>{var p=cl();r(v,p)};L(B,v=>{He(m()),Se(()=>m().images&&m().images.length>0)?v(M):v(Z,!1)})}var D=l(B,2),re=s(D);a(D),a(O);var _e=l(O,2),C=l(s(_e),2);de(C,5,()=>(He(m()),Se(()=>m().instructions)),ue,(v,p)=>{var se=dl(),le=s(se,!0);a(se),T(()=>J(le,e(p))),r(v,se)}),a(C),a(_e),a(q),a(H),T(v=>{J(P,(He(m()),Se(()=>m().name))),J(u,(He(m()),Se(()=>m().category))),J(re,`Targets: ${v??""}`)},[()=>(He(m()),Se(()=>m().targetMuscles.join(", ")))]),V("click",y,F),ra(3,q,()=>Ea,()=>({y:50,duration:300})),V("click",q,xa(function(v){Yt.call(this,E,v)})),V("keydown",q,xa(function(v){Yt.call(this,E,v)})),V("click",H,F),V("keydown",H,v=>v.key==="Escape"&&F()),r(G,H)};L(K,G=>{N()&&G(S)})}r(ke,z),Lt()}var fl=c("<span>Saved! ‚úì</span>"),_l=c("<button><!></button>"),ml=c("<option> </option>"),gl=c("<option> </option>"),bl=c('<div class="filter-row svelte-1w0zsmt"><select class="category-select svelte-1w0zsmt"><option>Select Category...</option><!></select> <select class="subcategory-select svelte-1w0zsmt"><option>Select Subcategory...</option><!></select></div>'),yl=c('<span class="details svelte-1w0zsmt"> </span>'),hl=c('<button class="exercise-item-simple svelte-1w0zsmt"><span class="name svelte-1w0zsmt"> </span> <!></button>'),Sl=c('<div class="no-results svelte-1w0zsmt"> </div>'),kl=c('<div class="modal-overlay svelte-1w0zsmt" role="button" tabindex="0" aria-label="Close modal"><div class="picker-modal svelte-1w0zsmt" role="dialog" aria-modal="true" tabindex="-1"><div class="picker-header svelte-1w0zsmt"><h3>Add Exercise</h3> <div class="search-row svelte-1w0zsmt"><input type="text" placeholder="Search exercises..." class="svelte-1w0zsmt"/></div> <!></div> <div class="picker-content svelte-1w0zsmt"><div class="exercise-list-simple svelte-1w0zsmt"><!> <!></div></div></div></div>'),wl=c('<div class="keypad-overlay svelte-1w0zsmt"><div class="keypad-header svelte-1w0zsmt"><span> </span> <button class="svelte-1w0zsmt">Done</button></div> <!></div>'),xl=c('<div class="gym-session-form svelte-1w0zsmt"><div class="session-meta svelte-1w0zsmt"><input type="text" class="session-name svelte-1w0zsmt" placeholder="Workout Name (e.g. Pull Day)"/> <div class="meta-row svelte-1w0zsmt"><label class="svelte-1w0zsmt">Date <input type="date" class="svelte-1w0zsmt"/></label> <label class="svelte-1w0zsmt">Bodyweight (kg) <input type="number" placeholder="Optional" class="svelte-1w0zsmt"/></label> <label class="svelte-1w0zsmt">Block <select class="svelte-1w0zsmt"><option>Strength</option><option>Power</option><option>Power Endurance</option><option>Muscular Endurance</option></select></label></div> <button class="timer-btn svelte-1w0zsmt">‚è± Open Timer</button></div> <div class="exercises-list"></div> <button class="add-exercise-btn svelte-1w0zsmt">+ Add Exercise</button> <!> <!> <!> <!> <!> <!></div>');function ql(ke,E){Ot(E,!1);const m=Ge(),N=Ge(),ee=ba(),x="gym_session_draft";let R=Ge(""),I=Ge(),h=Ge([]),F=Ge(new Date().toISOString().split("T")[0]),z=Ge("Strength"),K=Ge(null),S=Ge([]);function G(_){const b={Green:null,Yellow:null,Orange:null,Red:null},oe=[...e(S)].sort((qe,he)=>new Date(he.date).getTime()-new Date(qe.date).getTime());for(const qe of oe){if(b.Green&&b.Yellow&&b.Orange&&b.Red)break;const he=qe.exercises.find(be=>be.name===_);if(he&&he.difficulty&&!b[he.difficulty]){let be=null;for(const Le of he.sets)(!be||Le.weight>be.weight||Le.weight===be.weight&&Le.reps>be.reps)&&(be=Le);be&&(b[he.difficulty]={weight:be.weight,reps:be.reps})}}return b}let H=Ge(!1),q=Ge(""),d=Ge(""),j=Ge(""),P=Ge(null),X=Ge(!1),u=Ge(null),y=Ge(null),O=Ge(!1),B=Ge(!0),M=Ge(!1);ia(()=>{const _=localStorage.getItem(x);if(_)try{const b=JSON.parse(_);b.sessionName&&t(R,b.sessionName),b.bodyweight&&t(I,b.bodyweight),b.startTime&&t(F,b.startTime),b.trainingBlock&&t(z,b.trainingBlock),b.exercises&&t(h,b.exercises)}catch(b){console.error("Failed to restore draft",b)}t(M,!0)});const Z=Array.from(new Set(ma.map(_=>_.category))).sort();function D(){t(j,"")}function re(_){const b={id:crypto.randomUUID(),name:_.name,sets:[{weight:0,reps:0,isWarmup:!1,isFailure:!1,isDropSet:!1,completed:!1}]};t(h,[...e(h),b]),t(H,!1),t(q,""),t(d,""),t(j,"")}function _e(_,b,oe){t(P,{exerciseIndex:b,setIndex:oe,field:_.detail.field})}function C(_){if(!e(P))return;const{exerciseIndex:b,setIndex:oe,field:qe}=e(P);Ua(h,e(h)[b].sets[oe][qe]=_.detail),t(h,[...e(h)])}function v(){t(B,!0),t(X,!0)}function p(){e(h).length!==0&&(Ha({date:e(F),name:e(R)||"Gym Workout",bodyweight:e(I),trainingBlock:e(z),exercises:e(h)}),t(O,!0),localStorage.removeItem(x),setTimeout(()=>{t(O,!1),ee("save")},1500))}function se(){t(P,null)}Mt(()=>(e(S),e(z),e(F)),()=>{t(S,Ya());const _=e(S).filter(b=>(b.trainingBlock||"Strength")===e(z)&&b.date<e(F));_.sort((b,oe)=>new Date(oe.date).getTime()-new Date(b.date).getTime()),t(K,_.length>0?_[0]:null)}),Mt(()=>(e(M),e(R),e(I),e(F),e(z),e(h)),()=>{if(e(M)&&typeof localStorage<"u"){const _={sessionName:e(R),bodyweight:e(I),startTime:e(F),trainingBlock:e(z),exercises:e(h)};localStorage.setItem(x,JSON.stringify(_))}}),Mt(()=>(e(q),e(d),e(j)),()=>{t(m,ma.filter(_=>{if(e(q))return _.name.toLowerCase().includes(e(q).toLowerCase())||_.targetMuscles.some(qe=>qe.toLowerCase().includes(e(q).toLowerCase()));const b=e(d)?_.category===e(d):!0,oe=e(j)?_.subcategory===e(j):!0;return b&&oe}))}),Mt(()=>(e(d),ma),()=>{t(N,e(d)?Array.from(new Set(ma.filter(_=>_.category===e(d)).map(_=>_.subcategory))).sort():[])}),Fa(),na();var le=xl(),$=s(le),A=s($);W(A);var we=l(A,2),Xe=s(we),st=l(s(Xe));W(st),a(Xe);var lt=l(Xe,2),te=l(s(lt));W(te),a(lt);var fe=l(lt,2),ye=l(s(fe));T(()=>{e(z),wa(()=>{})});var Te=s(ye);Te.value=Te.__value="Strength";var ge=l(Te);ge.value=ge.__value="Power";var ae=l(ge);ae.value=ae.__value="Power Endurance";var ie=l(ae);ie.value=ie.__value="Muscular Endurance",a(ye),a(fe),a(we);var Ie=l(we,2);a($);var xe=l($,2);de(xe,5,()=>e(h),ue,(_,b,oe)=>{{let qe=Ia(()=>(e(b),Se(()=>G(e(b).name))));el(_,{get exercise(){return e(b)},get benchmarks(){return e(qe)},$$events:{focus:he=>_e(he,oe,e(h)[oe].sets.indexOf(he.detail.set)),complete:v,delete:()=>{t(y,oe)},info:()=>{const he=ma.find(be=>be.name===e(b).name);he&&t(u,he)}}})}}),a(xe);var Oe=l(xe,2),me=l(Oe,2);{var Re=_=>{var b=_l();let oe;var qe=s(b);{var he=Le=>{var rt=fl();r(Le,rt)},be=Le=>{var rt=Ue("Finish Workout");r(Le,rt)};L(qe,Le=>{e(O)?Le(he):Le(be,!1)})}a(b),T(()=>{oe=Qe(b,1,"save-btn svelte-1w0zsmt",null,oe,{success:e(O)}),b.disabled=e(O)}),V("click",b,p),r(_,b)};L(me,_=>{e(h),Se(()=>e(h).length>0)&&_(Re)})}var De=l(me,2);{var vt=_=>{var b=kl(),oe=s(b),qe=s(oe),he=l(s(qe),2),be=s(he);W(be),a(he);var Le=l(he,2);{var rt=Ne=>{var Fe=bl(),Ve=s(Fe);T(()=>{e(d),wa(()=>{})});var Pe=s(Ve);Pe.value=Pe.__value="";var Ct=l(Pe);de(Ct,1,()=>Z,ue,(Ze,Me)=>{var et=ml(),ft=s(et,!0);a(et);var _t={};T(()=>{J(ft,e(Me)),_t!==(_t=e(Me))&&(et.value=(et.__value=e(Me))??"")}),r(Ze,et)}),a(Ve);var ot=l(Ve,2);T(()=>{e(j),wa(()=>{e(d),e(N)})});var kt=s(ot);kt.value=kt.__value="";var ct=l(kt);de(ct,1,()=>e(N),ue,(Ze,Me)=>{var et=gl(),ft=s(et,!0);a(et);var _t={};T(()=>{J(ft,e(Me)),_t!==(_t=e(Me))&&(et.value=(et.__value=e(Me))??"")}),r(Ze,et)}),a(ot),a(Fe),T(()=>ot.disabled=!e(d)),Ye(Ve,()=>e(d),Ze=>t(d,Ze)),V("change",Ve,D),Ye(ot,()=>e(j),Ze=>t(j,Ze)),r(Ne,Fe)};L(Le,Ne=>{e(q)||Ne(rt)})}a(qe);var It=l(qe,2),it=s(It),Be=s(it);de(Be,1,()=>e(m),ue,(Ne,Fe)=>{var Ve=hl(),Pe=s(Ve),Ct=s(Pe,!0);a(Pe);var ot=l(Pe,2);{var kt=ct=>{var Ze=yl(),Me=s(Ze);a(Ze),T(()=>J(Me,`${e(Fe),Se(()=>e(Fe).category)??""} - ${e(Fe),Se(()=>e(Fe).subcategory)??""}`)),r(ct,Ze)};L(ot,ct=>{e(q)&&ct(kt)})}a(Ve),T(()=>J(Ct,(e(Fe),Se(()=>e(Fe).name)))),V("click",Ve,()=>re(e(Fe))),r(Ne,Ve)});var Gt=l(Be,2);{var qt=Ne=>{var Fe=Sl(),Ve=s(Fe,!0);a(Fe),T(()=>J(Ve,e(q)?"No exercises found":"Select a category and subcategory to view exercises.")),r(Ne,Fe)};L(Gt,Ne=>{e(m),Se(()=>e(m).length===0)&&Ne(qt)})}a(it),a(It),a(oe),a(b),Q(be,()=>e(q),Ne=>t(q,Ne)),V("click",oe,xa(function(Ne){Yt.call(this,E,Ne)})),V("keydown",oe,xa(function(Ne){Yt.call(this,E,Ne)})),ra(3,oe,()=>Ea,()=>({y:100,duration:300})),V("click",b,()=>t(H,!1)),V("keydown",b,Ne=>Ne.key==="Escape"&&t(H,!1)),ra(3,b,()=>Pa),r(_,b)};L(De,_=>{e(H)&&_(vt)})}var pt=l(De,2);{var xt=_=>{pl(_,{get exercise(){return e(u)},visible:!0,$$events:{close:()=>t(u,null)}})};L(pt,_=>{e(u)&&_(xt)})}var St=l(pt,2);{var w=_=>{var b=wl(),oe=s(b),qe=s(oe),he=s(qe);a(qe);var be=l(qe,2);a(oe);var Le=l(oe,2);{let rt=Ia(()=>(e(P),Se(()=>e(P).field==="weight"?"Weight (kg)":"Reps")));al(Le,{get value(){return e(h),e(P),Se(()=>e(h)[e(P).exerciseIndex].sets[e(P).setIndex][e(P).field])},get label(){return e(rt)},$$events:{change:C}})}a(b),T(()=>J(he,`Editing ${e(h),e(P),Se(()=>e(h)[e(P).exerciseIndex].name)??""} - Set ${e(P),Se(()=>e(P).setIndex+1)??""}`)),V("click",be,se),ra(3,b,()=>Ea,()=>({y:200,duration:300})),r(_,b)};L(St,_=>{e(P)&&_(w)})}var g=l(St,2);ol(g,{get autoStart(){return e(B)},get visible(){return e(X)},set visible(_){t(X,_)},$$legacy:!0});var U=l(g,2);{var ve=_=>{ls(_,{isOpen:!0,title:"Delete Exercise",get message(){return`Are you sure you want to delete ${e(h),e(y),Se(()=>e(h)[e(y)].name)??""}?`},requireInput:!1,onConfirm:()=>{e(y)!==null&&(t(h,e(h).filter((b,oe)=>oe!==e(y))),t(y,null))},onCancel:()=>t(y,null)})};L(U,_=>{e(y)!==null&&_(ve)})}a(le),Q(A,()=>e(R),_=>t(R,_)),Q(st,()=>e(F),_=>t(F,_)),Q(te,()=>e(I),_=>t(I,_)),Ye(ye,()=>e(z),_=>t(z,_)),V("click",Ie,()=>{t(B,!1),t(X,!0)}),V("click",Oe,()=>t(H,!0)),r(ke,le),Lt()}var Cl=c("<option> </option>"),Tl=c("<option> </option>"),Nl=c('<button class="remove-set-btn svelte-1m63nqt">‚úï</button>'),Ol=c('<div class="set-row svelte-1m63nqt"><div class="input-wrap svelte-1m63nqt"><label class="svelte-1m63nqt">Weight</label> <input type="number" placeholder="0" class="svelte-1m63nqt"/></div> <div class="input-wrap svelte-1m63nqt"><label class="svelte-1m63nqt">Reps/Secs</label> <input type="number" placeholder="1" class="svelte-1m63nqt"/></div> <!></div>'),Ll=c('<div class="exercise-card svelte-1m63nqt"><div class="card-header svelte-1m63nqt"><div class="header-inputs svelte-1m63nqt"><select class="svelte-1m63nqt"></select> <select class="svelte-1m63nqt"></select></div> <button class="remove-card-btn svelte-1m63nqt" title="Remove Exercise">‚úï</button></div> <div class="sets-list svelte-1m63nqt"><!> <button class="add-set-btn svelte-1m63nqt">+ Add Set</button></div> <div class="card-footer svelte-1m63nqt"><div class="meta-input svelte-1m63nqt"><label class="svelte-1m63nqt">Total Sets</label> <input type="number" readonly="" disabled class="svelte-1m63nqt"/></div> <div class="notes-input svelte-1m63nqt"><label class="svelte-1m63nqt">Notes</label> <input type="text" placeholder="Notes..." class="svelte-1m63nqt"/></div></div></div>'),Gl=c("<div> </div>"),El=c('<div class="form-content svelte-1m63nqt"><div class="header-row svelte-1m63nqt"><h3 class="svelte-1m63nqt">ü§è Fingerboarding</h3> <button class="add-row-btn svelte-1m63nqt">+ Add Exercise</button></div> <div class="form-group date-group svelte-1m63nqt"><label for="date">Date</label> <input type="date" id="date" class="svelte-1m63nqt"/></div> <div class="cards-container svelte-1m63nqt"></div> <div class="submit-section"><!> <button type="button" class="submit-btn svelte-1m63nqt"><!></button></div></div>');function Fl(ke,E){Ot(E,!0);const m=["Max hangs","Recruitment pulls","Max pick-ups"],N=["Full-crimp","Half-crimp","Three finger drag","Pinch","Open hand","Sloper"];let ee=k(ut(new Date().toISOString().split("T")[0])),x=k(ut([]));function R(){t(x,[...e(x),{id:crypto.randomUUID(),name:m[0],gripType:N[1],sets:1,details:[{weight:0,reps:5}],notes:""}],!0)}const I="fingerboard_session_draft";let h=k(!1);ia(()=>{const C=localStorage.getItem(I);if(C)try{const v=JSON.parse(C);v.exercises&&Array.isArray(v.exercises)&&t(x,v.exercises,!0)}catch(v){console.error("Failed to restore draft",v)}e(x).length===0&&R(),t(h,!0)}),ga(()=>{if(!e(h))return;const C={date:e(ee),exercises:e(x)};localStorage.setItem(I,JSON.stringify(C))});function F(C){t(x,e(x).filter((v,p)=>p!==C),!0)}function z(C){const v=e(x)[C],p=v.details[v.details.length-1];v.details=[...v.details,{...p}],v.sets=v.details.length}function K(C,v){const p=e(x)[C];p.details.length>1&&(p.details=p.details.filter((se,le)=>le!==v),p.sets=p.details.length)}let S=k("idle"),G=k("");async function H(){t(S,"saving");try{const C={date:e(ee),location:"N/A",exercises:JSON.parse(JSON.stringify(e(x)))},v=Qa(C);if(ya()){const p=await rs(C);p.ok?(qa(v.id,p.id),Ca(p.id),t(S,"success"),t(G,"Session saved and synced!"),localStorage.removeItem(I)):(Ta(v.id),t(S,"success"),t(G,"Saved locally. Sync failed: "+(p.error||"Unknown error")),localStorage.removeItem(I))}else t(S,"success"),t(G,"Saved locally. Will sync when online."),localStorage.removeItem(I);window.dispatchEvent(new CustomEvent("session-saved")),setTimeout(()=>{q()},2e3)}catch(C){t(S,"error"),t(G,"Failed to save session"),console.error("Save error:",C)}}function q(){t(ee,new Date().toISOString().split("T")[0],!0),t(x,[],!0),R(),t(S,"idle"),t(G,"")}var d=El(),j=s(d),P=l(s(j),2);P.__click=R,a(j);var X=l(j,2),u=l(s(X),2);W(u),a(X);var y=l(X,2);de(y,21,()=>e(x),ue,(C,v,p)=>{var se=Ll(),le=s(se),$=s(le),A=s($);de(A,21,()=>m,ue,(xe,Oe)=>{var me=Cl(),Re=s(me,!0);a(me);var De={};T(()=>{J(Re,e(Oe)),De!==(De=e(Oe))&&(me.value=(me.__value=e(Oe))??"")}),r(xe,me)}),a(A);var we=l(A,2);de(we,21,()=>N,ue,(xe,Oe)=>{var me=Tl(),Re=s(me,!0);a(me);var De={};T(()=>{J(Re,e(Oe)),De!==(De=e(Oe))&&(me.value=(me.__value=e(Oe))??"")}),r(xe,me)}),a(we),a($);var Xe=l($,2);Xe.__click=()=>F(p),a(le);var st=l(le,2),lt=s(st);de(lt,17,()=>e(v).details,ue,(xe,Oe,me)=>{var Re=Ol(),De=s(Re),vt=s(De);Nt(vt,"for",`weight-${p}-${me}`);var pt=l(vt,2);W(pt),Nt(pt,"id",`weight-${p}-${me}`),a(De);var xt=l(De,2),St=s(xt);Nt(St,"for",`reps-${p}-${me}`);var w=l(St,2);W(w),Nt(w,"id",`reps-${p}-${me}`),a(xt);var g=l(xt,2);{var U=ve=>{var _=Nl();_.__click=()=>K(p,me),r(ve,_)};L(g,ve=>{e(v).details.length>1&&ve(U)})}a(Re),Q(pt,()=>e(Oe).weight,ve=>e(Oe).weight=ve),Q(w,()=>e(Oe).reps,ve=>e(Oe).reps=ve),r(xe,Re)});var te=l(lt,2);te.__click=()=>z(p),a(st);var fe=l(st,2),ye=s(fe),Te=s(ye);Nt(Te,"for",`total-sets-${p}`);var ge=l(Te,2);W(ge),Nt(ge,"id",`total-sets-${p}`),a(ye);var ae=l(ye,2),ie=s(ae);Nt(ie,"for",`notes-${p}`);var Ie=l(ie,2);W(Ie),Nt(Ie,"id",`notes-${p}`),a(ae),a(fe),a(se),T(()=>Wa(ge,e(v).sets)),Ye(A,()=>e(v).name,xe=>e(v).name=xe),Ye(we,()=>e(v).gripType,xe=>e(v).gripType=xe),Q(Ie,()=>e(v).notes,xe=>e(v).notes=xe),r(C,se)}),a(y);var O=l(y,2),B=s(O);{var M=C=>{var v=Gl();let p;var se=s(v,!0);a(v),T(()=>{p=Qe(v,1,"save-message svelte-1m63nqt",null,p,{success:e(S)==="success",error:e(S)==="error"}),J(se,e(G))}),r(C,v)};L(B,C=>{e(G)&&C(M)})}var Z=l(B,2);Z.__click=H;var D=s(Z);{var re=C=>{var v=Ue("Saving...");r(C,v)},_e=C=>{var v=yt(),p=nt(v);{var se=$=>{var A=Ue("‚úì Saved!");r($,A)},le=$=>{var A=Ue("Save Session");r($,A)};L(p,$=>{e(S)==="success"?$(se):$(le,!1)},!0)}r(C,v)};L(D,C=>{e(S)==="saving"?C(re):C(_e,!1)})}a(Z),a(O),a(d),T(()=>Z.disabled=e(S)==="saving"),Q(u,()=>e(ee),C=>t(ee,C)),r(ke,d),Lt()}oa(["click"]);var zl=c("<option> </option>"),jl=c('<input type="text" placeholder="Enter venue name" class="mt-2 svelte-1fje4dh"/>'),Il=c("<option> </option>"),Al=c("<option> </option>"),Rl=c('<input type="text" placeholder="Round name" class="mt-2 svelte-1fje4dh"/>'),Dl=c('<div class="result-mode-content svelte-1fje4dh"><div class="form-group svelte-1fje4dh"><label for="position" class="svelte-1fje4dh">Final Position</label> <input type="number" id="position" placeholder="#" class="large-input svelte-1fje4dh"/></div></div>'),Vl=c("<option> </option>"),Pl=c('<input type="number" min="1" class="svelte-1fje4dh"/>'),Bl=c('<span class="flash-dash">-</span>'),Ml=c('<tr><td class="col-name svelte-1fje4dh"><input type="text" class="svelte-1fje4dh"/></td><td class="col-status svelte-1fje4dh"><select class="svelte-1fje4dh"></select></td><td class="col-attempt svelte-1fje4dh"><!></td><td class="col-notes svelte-1fje4dh"><input type="text" placeholder="..." class="svelte-1fje4dh"/></td><td class="col-action svelte-1fje4dh"><button class="svelte-1fje4dh">‚úï</button></td></tr>'),$l=c('<div class="load-metrics-compact svelte-1fje4dh"><div class="metric svelte-1fje4dh"><label for="finger">Finger Load</label> <input type="number" id="finger" min="0" max="5" step="0.5" class="svelte-1fje4dh"/></div> <div class="metric svelte-1fje4dh"><label for="shoulder">Shoulder Load</label> <input type="number" id="shoulder" min="0" max="5" step="0.5" class="svelte-1fje4dh"/></div> <div class="metric svelte-1fje4dh"><label for="forearm">Forearm Load</label> <input type="number" id="forearm" min="0" max="5" step="0.5" class="svelte-1fje4dh"/></div></div> <div class="climbs-table-container svelte-1fje4dh"><div class="section-header svelte-1fje4dh"><h4 class="svelte-1fje4dh">Boulders / Routes</h4></div> <table class="climbs-table svelte-1fje4dh"><thead><tr><th class="svelte-1fje4dh">#</th><th class="svelte-1fje4dh">Result</th><th class="svelte-1fje4dh">Att.</th><th class="svelte-1fje4dh">Notes</th><th class="svelte-1fje4dh"></th></tr></thead><tbody></tbody></table> <button class="add-row-btn svelte-1fje4dh">+ Add Row</button></div>',1),Ul=c("<div> </div>"),Wl=c('<div class="form-content svelte-1fje4dh"><h3 class="svelte-1fje4dh">üèÜ Competition</h3> <div class="form-grid svelte-1fje4dh"><div class="form-group svelte-1fje4dh"><label for="date" class="svelte-1fje4dh">Date</label> <input type="date" id="date" class="svelte-1fje4dh"/></div> <div class="form-group svelte-1fje4dh"><label for="venue" class="svelte-1fje4dh">Venue</label> <select id="venue" class="svelte-1fje4dh"><option disabled>Select venue...</option><!></select> <!></div></div> <div class="form-group mb-4 svelte-1fje4dh"><label for="type" class="svelte-1fje4dh">Type</label> <select id="type" class="svelte-1fje4dh"></select></div> <div class="round-section svelte-1fje4dh"><div class="form-group svelte-1fje4dh"><label for="round" class="svelte-1fje4dh">Round</label> <select id="round" class="svelte-1fje4dh"></select> <!></div> <!></div> <div class="submit-section"><!> <button type="button" class="submit-btn svelte-1fje4dh"><!></button></div></div>');function Jl(ke,E){Ot(E,!0);const m=["Flashpoint Bristol","Rockstar Techno","Rockstar Unit 3","Rockstar Unit 5","Bloc","TCA","Other"],N=["Bouldering","Lead","Speed"],ee=["Qualifiers","Semi-Finals","Finals","Result","Other"],x=["Flash","Top","Zone","Attempt"];let R=k(ut(new Date().toISOString().split("T")[0])),I=k(""),h=k(""),F=k("Bouldering"),z=k(4),K=k(4),S=k(4),G=k("Qualifiers"),H=k(""),q=k(null),d=k(ut([{name:"#1",status:"Flash",attemptCount:1,notes:""}]));const j="competition_session_draft";let P=k(!1);ia(()=>{const w=localStorage.getItem(j);if(w)try{const g=JSON.parse(w);g.venue&&t(I,g.venue,!0),g.customVenue&&t(h,g.customVenue,!0),g.type&&t(F,g.type,!0),g.fingerLoad&&t(z,g.fingerLoad,!0),g.shoulderLoad&&t(K,g.shoulderLoad,!0),g.forearmLoad&&t(S,g.forearmLoad,!0),g.roundName&&t(G,g.roundName,!0),g.customRoundName&&t(H,g.customRoundName,!0),g.finalPosition&&t(q,g.finalPosition,!0),g.finalPosition&&t(q,g.finalPosition,!0),g.climbs&&t(d,g.climbs,!0)}catch(g){console.error("Failed to restore draft",g)}t(P,!0)}),ga(()=>{if(!e(P))return;const w={date:e(R),venue:e(I),customVenue:e(h),type:e(F),fingerLoad:e(z),shoulderLoad:e(K),forearmLoad:e(S),roundName:e(G),customRoundName:e(H),finalPosition:e(q),climbs:e(d)};localStorage.setItem(j,JSON.stringify(w))});let X=Kt(()=>e(G)==="Result"),u=Kt(()=>e(I)==="Other"),y=Kt(()=>e(G)==="Other"),O=Kt(()=>e(G)==="Other"?e(H):e(G));function B(){const w=e(d).length+1;t(d,[...e(d),{name:`#${w}`,status:"Flash",attemptCount:1,notes:""}],!0)}function M(w){e(d).length>1?t(d,e(d).filter((g,U)=>U!==w),!0):e(d)[0]={name:"#1",status:"Flash",attemptCount:1,notes:""}}function Z(w,g){e(d)[w].status=g,g==="Flash"&&(e(d)[w].attemptCount=1)}let D=k("idle"),re=k("");async function _e(){if(!e(I)||e(I)==="Other"&&!e(h)){t(D,"error"),t(re,"Please specify a venue");return}t(D,"saving");try{const w={name:e(O),position:e(X)?e(q):void 0,climbs:e(X)?void 0:JSON.parse(JSON.stringify(e(d)))},g={date:e(R),venue:e(I)==="Other"?e(h):e(I),customVenue:e(I)==="Other"?e(h):void 0,type:e(F),fingerLoad:e(X)?void 0:e(z),shoulderLoad:e(X)?void 0:e(K),forearmLoad:e(X)?void 0:e(S),rounds:[w]},U=Xa(g);if(ya()){const ve=await is(g);ve.ok?(qa(U.id,ve.id),Ca(ve.id),t(D,"success"),t(re,"Competition saved and synced!"),localStorage.removeItem(j)):(Ta(U.id),t(D,"success"),t(re,"Saved locally. Sync failed: "+(ve.error||"Unknown error")),localStorage.removeItem(j))}else t(D,"success"),t(re,"Saved locally. Will sync when online."),localStorage.removeItem(j);window.dispatchEvent(new CustomEvent("session-saved")),setTimeout(()=>{C()},2e3)}catch(w){t(D,"error"),t(re,"Failed to save session"),console.error("Save error:",w)}}function C(){t(R,new Date().toISOString().split("T")[0],!0),t(I,""),t(h,""),t(q,null),t(d,[{name:"#1",status:"Flash",attemptCount:1,notes:""}],!0),t(D,"idle"),t(re,"")}var v=Wl(),p=l(s(v),2),se=s(p),le=l(s(se),2);W(le),a(se);var $=l(se,2),A=l(s($),2),we=s(A);we.value=we.__value="";var Xe=l(we);de(Xe,17,()=>m,ue,(w,g)=>{var U=zl(),ve=s(U,!0);a(U);var _={};T(()=>{J(ve,e(g)),_!==(_=e(g))&&(U.value=(U.__value=e(g))??"")}),r(w,U)}),a(A);var st=l(A,2);{var lt=w=>{var g=jl();W(g),Q(g,()=>e(h),U=>t(h,U)),r(w,g)};L(st,w=>{e(u)&&w(lt)})}a($),a(p);var te=l(p,2),fe=l(s(te),2);de(fe,21,()=>N,ue,(w,g)=>{var U=Il(),ve=s(U,!0);a(U);var _={};T(()=>{J(ve,e(g)),_!==(_=e(g))&&(U.value=(U.__value=e(g))??"")}),r(w,U)}),a(fe),a(te);var ye=l(te,2),Te=s(ye),ge=l(s(Te),2);de(ge,21,()=>ee,ue,(w,g)=>{var U=Al(),ve=s(U,!0);a(U);var _={};T(()=>{J(ve,e(g)),_!==(_=e(g))&&(U.value=(U.__value=e(g))??"")}),r(w,U)}),a(ge);var ae=l(ge,2);{var ie=w=>{var g=Rl();W(g),Q(g,()=>e(H),U=>t(H,U)),r(w,g)};L(ae,w=>{e(y)&&w(ie)})}a(Te);var Ie=l(Te,2);{var xe=w=>{var g=Dl(),U=s(g),ve=l(s(U),2);W(ve),a(U),a(g),Q(ve,()=>e(q),_=>t(q,_)),r(w,g)},Oe=w=>{var g=$l(),U=nt(g),ve=s(U),_=l(s(ve),2);W(_),a(ve);var b=l(ve,2),oe=l(s(b),2);W(oe),a(b);var qe=l(b,2),he=l(s(qe),2);W(he),a(qe),a(U);var be=l(U,2),Le=l(s(be),2),rt=l(s(Le));de(rt,21,()=>e(d),ue,(it,Be,Gt)=>{var qt=Ml(),Ne=s(qt),Fe=s(Ne);W(Fe),a(Ne);var Ve=l(Ne),Pe=s(Ve);Pe.__change=$e=>Z(Gt,$e.target.value),de(Pe,21,()=>x,ue,($e,mt)=>{var dt=Vl(),Qt=s(dt,!0);a(dt);var At={};T(()=>{J(Qt,e(mt)),At!==(At=e(mt))&&(dt.value=(dt.__value=e(mt))??"")}),r($e,dt)}),a(Pe);var Ct;za(Pe),a(Ve);var ot=l(Ve),kt=s(ot);{var ct=$e=>{var mt=Pl();W(mt),Q(mt,()=>e(Be).attemptCount,dt=>e(Be).attemptCount=dt),r($e,mt)},Ze=$e=>{var mt=Bl();r($e,mt)};L(kt,$e=>{e(Be).status!=="Flash"?$e(ct):$e(Ze,!1)})}a(ot);var Me=l(ot),et=s(Me);W(et),a(Me);var ft=l(Me),_t=s(ft);_t.__click=()=>M(Gt),a(ft),a(qt),T(()=>{Ct!==(Ct=e(Be).status)&&(Pe.value=(Pe.__value=e(Be).status)??"",ja(Pe,e(Be).status))}),Q(Fe,()=>e(Be).name,$e=>e(Be).name=$e),Q(et,()=>e(Be).notes,$e=>e(Be).notes=$e),r(it,qt)}),a(rt),a(Le);var It=l(Le,2);It.__click=B,a(be),Q(_,()=>e(z),it=>t(z,it)),Q(oe,()=>e(K),it=>t(K,it)),Q(he,()=>e(S),it=>t(S,it)),r(w,g)};L(Ie,w=>{e(X)?w(xe):w(Oe,!1)})}a(ye);var me=l(ye,2),Re=s(me);{var De=w=>{var g=Ul();let U;var ve=s(g,!0);a(g),T(()=>{U=Qe(g,1,"save-message svelte-1fje4dh",null,U,{success:e(D)==="success",error:e(D)==="error"}),J(ve,e(re))}),r(w,g)};L(Re,w=>{e(re)&&w(De)})}var vt=l(Re,2);vt.__click=_e;var pt=s(vt);{var xt=w=>{var g=Ue("Saving...");r(w,g)},St=w=>{var g=yt(),U=nt(g);{var ve=b=>{var oe=Ue("‚úì Saved!");r(b,oe)},_=b=>{var oe=Ue("Save Session");r(b,oe)};L(U,b=>{e(D)==="success"?b(ve):b(_,!1)},!0)}r(w,g)};L(pt,w=>{e(D)==="saving"?w(xt):w(St,!1)})}a(vt),a(me),a(v),T(()=>vt.disabled=e(D)==="saving"),Q(le,()=>e(R),w=>t(R,w)),Ye(A,()=>e(I),w=>t(I,w)),Ye(fe,()=>e(F),w=>t(F,w)),Ye(ge,()=>e(G),w=>t(G,w)),r(ke,v),Lt()}oa(["change","click"]);var Kl=c('<span class="spinner svelte-b2zgdd"></span> Syncing...',1),Hl=c("<button><!></button>"),Yl=c("<div> </div>"),Ql=c('<div><div class="sync-info svelte-b2zgdd"><span class="sync-icon svelte-b2zgdd"> </span> <span class="sync-text svelte-b2zgdd"><!></span></div> <!> <!></div>'),Xl=c("<option> </option>"),Zl=c('<div class="form-container svelte-b2zgdd"><!></div>'),er=c('<div class="page svelte-b2zgdd"><div class="page-header svelte-b2zgdd"><h1 class="svelte-b2zgdd">üìù Log Data</h1> <p class="subtitle svelte-b2zgdd">Record your training sessions</p></div> <!> <div class="content-card svelte-b2zgdd"><div class="form-group svelte-b2zgdd"><label for="activity-type" class="svelte-b2zgdd">Activity Type</label> <select id="activity-type" class="svelte-b2zgdd"><option disabled>Select an activity...</option><!></select></div> <!></div></div>');function ur(ke,E){Ot(E,!0);const m=[{value:"indoor_climb",label:"Indoor Climb",icon:"üßó"},{value:"outdoor_climb",label:"Outdoor Climb",icon:"‚õ∞Ô∏è"},{value:"gym_session",label:"Gym Session",icon:"üèãÔ∏è"},{value:"fingerboarding",label:"Fingerboarding",icon:"ü§è"},{value:"competition",label:"Competition",icon:"üèÜ"}];let N=k(""),ee=k(0),x=k("idle"),R=k(""),I=k(!0);ia(()=>{h(),t(I,ya(),!0);const u=()=>{t(I,!0),h()},y=()=>{t(I,!1)},O=()=>{h()};return window.addEventListener("online",u),window.addEventListener("offline",y),window.addEventListener("session-saved",O),()=>{window.removeEventListener("online",u),window.removeEventListener("offline",y),window.removeEventListener("session-saved",O)}});function h(){t(ee,os(),!0)}async function F(){if(!e(I)){t(x,"error"),t(R,"No network connection");return}t(x,"syncing"),t(R,"");try{const u=await ns();u.failed===0&&u.success>0?(t(x,"success"),t(R,`Synced ${u.success} session${u.success>1?"s":""}!`)):u.failed>0&&u.success>0?(t(x,"error"),t(R,`Synced ${u.success}, failed ${u.failed}`)):u.failed>0?(t(x,"error"),t(R,`Failed to sync ${u.failed} session${u.failed>1?"s":""}`)):(t(x,"idle"),t(R,"")),h(),e(x)==="success"&&setTimeout(()=>{t(x,"idle"),t(R,"")},3e3)}catch(u){t(x,"error"),t(R,"Sync failed"),console.error("Sync error:",u)}}var z=er(),K=l(s(z),2);{var S=u=>{var y=Ql();let O;var B=s(y),M=s(B),Z=s(M,!0);a(M);var D=l(M,2),re=s(D);{var _e=$=>{var A=Ue();T(()=>J(A,`${e(ee)??""} session${e(ee)>1?"s":""} waiting to sync`)),r($,A)},C=$=>{var A=Ue();T(()=>J(A,`Offline - ${e(ee)??""} session${e(ee)>1?"s":""} saved locally`)),r($,A)};L(re,$=>{e(I)?$(_e):$(C,!1)})}a(D),a(B);var v=l(B,2);{var p=$=>{var A=Hl();let we;A.__click=F;var Xe=s(A);{var st=te=>{var fe=Kl();at(),r(te,fe)},lt=te=>{var fe=yt(),ye=nt(fe);{var Te=ae=>{var ie=Ue("‚úì Synced!");r(ae,ie)},ge=ae=>{var ie=Ue("Sync Now");r(ae,ie)};L(ye,ae=>{e(x)==="success"?ae(Te):ae(ge,!1)},!0)}r(te,fe)};L(Xe,te=>{e(x)==="syncing"?te(st):te(lt,!1)})}a(A),T(()=>{we=Qe(A,1,"sync-btn svelte-b2zgdd",null,we,{syncing:e(x)==="syncing"}),A.disabled=e(x)==="syncing"}),r($,A)};L(v,$=>{e(I)&&$(p)})}var se=l(v,2);{var le=$=>{var A=Yl();let we;var Xe=s(A,!0);a(A),T(()=>{we=Qe(A,1,"sync-message svelte-b2zgdd",null,we,{error:e(x)==="error",success:e(x)==="success"}),J(Xe,e(R))}),r($,A)};L(se,$=>{e(R)&&$(le)})}a(y),T(()=>{O=Qe(y,1,"sync-banner svelte-b2zgdd",null,O,{offline:!e(I)}),J(Z,e(I)?"üîÑ":"üì¥")}),r(u,y)};L(K,u=>{e(ee)>0&&u(S)})}var G=l(K,2),H=s(G),q=l(s(H),2),d=s(q);d.value=d.__value="";var j=l(d);de(j,17,()=>m,u=>u.value,(u,y)=>{var O=Xl(),B=s(O);a(O);var M={};T(()=>{J(B,`${e(y).icon??""} ${e(y).label??""}`),M!==(M=e(y).value)&&(O.value=(O.__value=e(y).value)??"")}),r(u,O)}),a(q),a(H);var P=l(H,2);{var X=u=>{var y=Zl(),O=s(y);{var B=Z=>{Ls(Z,{})},M=Z=>{var D=yt(),re=nt(D);{var _e=v=>{Ks(v,{})},C=v=>{var p=yt(),se=nt(p);{var le=A=>{ql(A,{})},$=A=>{var we=yt(),Xe=nt(we);{var st=te=>{Fl(te,{})},lt=te=>{var fe=yt(),ye=nt(fe);{var Te=ge=>{Jl(ge,{})};L(ye,ge=>{e(N)==="competition"&&ge(Te)},!0)}r(te,fe)};L(Xe,te=>{e(N)==="fingerboarding"?te(st):te(lt,!1)},!0)}r(A,we)};L(se,A=>{e(N)==="gym_session"?A(le):A($,!1)},!0)}r(v,p)};L(re,v=>{e(N)==="outdoor_climb"?v(_e):v(C,!1)},!0)}r(Z,D)};L(O,Z=>{e(N)==="indoor_climb"?Z(B):Z(M,!1)})}a(y),r(u,y)};L(P,u=>{e(N)&&u(X)})}a(G),a(z),Ye(q,()=>e(N),u=>t(N,u)),r(ke,z),Lt()}oa(["click"]);export{ur as component};
