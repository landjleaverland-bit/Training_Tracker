import{f as v,a as i,c as Qe,t as Nt}from"../chunks/CSQvsE9s.js";import{p as bt,c as a,s,i as e,aV as y,r as t,t as g,a as ht,x as l,b0 as $t,f as Me,aG as At,aW as ft,w as ct,o as na,b8 as oa,d as ua}from"../chunks/DGPNV_z9.js";import{d as gt,s as o}from"../chunks/DSMXtqZM.js";import{i as c}from"../chunks/D9GEZg6r.js";import{s as rt,r as Ve,e as ze,i as Ee,b as Pe,c as pa,d as fa}from"../chunks/_iMURHzE.js";import{t as at,l as lt,D as Kt,i as Yt,u as da,k as ea,m as ga,g as ma,b as ba,n as ca,o as ha,E as ya,p as xa,q as wa,r as Sa,v as ka,f as Da,s as Ta}from"../chunks/B15gayJy.js";import{c as Lt,n as ta,f as dt,o as Ut,m as Qt,b as zt,p as Zt,q as aa,t as ia,v as la,w as qa}from"../chunks/CuHccZ7x.js";import{s as pt}from"../chunks/Ct8JfZaa.js";import{p as sa}from"../chunks/Dd0awD9h.js";var Ca=v('<span class="chevron svelte-12crvy">‚ñ≤</span>'),La=v('<span class="chevron svelte-12crvy">‚ñº</span>'),za=v('<div class="input-with-action svelte-12crvy"><input type="text" id="location-manual" placeholder="Custom location..." class="flat-left svelte-12crvy"/> <button type="button" class="action-btn flat-right svelte-12crvy" title="Back to list">‚úï</button></div>'),Fa=v("<option> </option>"),Ea=v('<select id="location-filter" class="svelte-12crvy"><option>Any Location</option><!></select>'),Ga=v("<option> </option>"),Na=v("<option> </option>"),Aa=v('<div class="filter-body svelte-12crvy"><div class="filter-grid svelte-12crvy"><div class="filter-item svelte-12crvy"><label for="start-date" class="svelte-12crvy">Start Date</label> <input type="date" id="start-date" class="svelte-12crvy"/></div> <div class="filter-item svelte-12crvy"><label for="end-date" class="svelte-12crvy">End Date</label> <input type="date" id="end-date" class="svelte-12crvy"/></div> <div class="filter-item svelte-12crvy"><label for="location-filter" class="svelte-12crvy">Location</label> <!></div> <div class="filter-item svelte-12crvy"><label for="climbing-type-filter" class="svelte-12crvy">Climb Type</label> <select id="climbing-type-filter" class="svelte-12crvy"><option>Any Type</option><!></select></div> <div class="filter-item svelte-12crvy"><label for="session-type-filter" class="svelte-12crvy">Session Type</label> <select id="session-type-filter" class="svelte-12crvy"><option>Any Type</option><!></select></div> <div class="filter-item svelte-12crvy"><label for="grade-filter" class="svelte-12crvy">Grade (Exact)</label> <input type="text" id="grade-filter" placeholder="e.g. V4" class="svelte-12crvy"/></div></div> <div class="filter-actions svelte-12crvy"><button class="reset-btn svelte-12crvy">Reset Filters</button></div></div>'),Oa=v('<div class="filter-container svelte-12crvy"><button class="filter-header svelte-12crvy"><div class="header-content svelte-12crvy"><span class="icon svelte-12crvy">üîç</span> <span class="title svelte-12crvy">Filters</span> <!></div></button> <!></div>');function ja(Ce,p){bt(p,!0);const r=["Rockstar Swindon","Flashpoint Swindon","Flashpoint Bristol","Redpoint Bristol","TCH Bristol","Other"],h=["Bouldering","Sport","Mixed"],T=["Projecting","Onsighting","Campusing","Repeaters"];let D=y(!1),b=y(""),C=y(""),S=y(""),B=y(""),se=y(""),ge=y(""),De=y(!1);function $(){l(D,!e(D))}function ee(){l(b,""),l(C,""),l(S,""),l(B,""),l(De,!1),l(se,""),l(ge,""),G()}function G(){p.onFilterParamsChange({startDate:e(b),endDate:e(C),location:e(S),climbingType:e(B),sessionType:e(se),grade:e(ge)})}function ne(){e(S)==="Other"?(l(De,!0),l(S,"")):G()}function me(){l(De,!1),l(S,""),G()}var pe=Oa(),M=a(pe);M.__click=$;var ve=a(M),he=s(a(ve),4);{var Te=N=>{var U=Ca();i(N,U)},te=N=>{var U=La();i(N,U)};c(he,N=>{e(D)?N(Te):N(te,!1)})}t(ve),t(M);var F=s(M,2);{var V=N=>{var U=Aa(),X=a(U),W=a(X),re=s(a(W),2);Ve(re),re.__change=G,t(W);var ie=s(W,2),x=s(a(ie),2);Ve(x),x.__change=G,t(ie);var d=s(ie,2),_=s(a(d),2);{var n=le=>{var R=za(),Y=a(R);Ve(Y),Y.__input=G;var Le=s(Y,2);Le.__click=me,t(R),Pe(Y,()=>e(S),Fe=>l(S,Fe)),i(le,R)},u=le=>{var R=Ea();R.__change=ne;var Y=a(R);Y.value=Y.__value="";var Le=s(Y);ze(Le,17,()=>r,Ee,(Fe,oe)=>{var de=Fa(),H=a(de,!0);t(de);var L={};g(()=>{o(H,e(oe)),L!==(L=e(oe))&&(de.value=(de.__value=e(oe))??"")}),i(Fe,de)}),t(R),Lt(R,()=>e(S),Fe=>l(S,Fe)),i(le,R)};c(_,le=>{e(De)?le(n):le(u,!1)})}t(d);var k=s(d,2),I=s(a(k),2);I.__change=G;var ae=a(I);ae.value=ae.__value="";var j=s(ae);ze(j,17,()=>h,Ee,(le,R)=>{var Y=Ga(),Le=a(Y,!0);t(Y);var Fe={};g(()=>{o(Le,e(R)),Fe!==(Fe=e(R))&&(Y.value=(Y.__value=e(R))??"")}),i(le,Y)}),t(I),t(k);var Se=s(k,2),_e=s(a(Se),2);_e.__change=G;var xe=a(_e);xe.value=xe.__value="";var f=s(xe);ze(f,17,()=>T,Ee,(le,R)=>{var Y=Na(),Le=a(Y,!0);t(Y);var Fe={};g(()=>{o(Le,e(R)),Fe!==(Fe=e(R))&&(Y.value=(Y.__value=e(R))??"")}),i(le,Y)}),t(_e),t(Se);var E=s(Se,2),ue=s(a(E),2);Ve(ue),ue.__input=G,t(E),t(X);var we=s(X,2),qe=a(we);qe.__click=ee,t(we),t(U),Pe(re,()=>e(b),le=>l(b,le)),Pe(x,()=>e(C),le=>l(C,le)),Lt(I,()=>e(B),le=>l(B,le)),Lt(_e,()=>e(se),le=>l(se,le)),Pe(ue,()=>e(ge),le=>l(ge,le)),at(3,U,()=>lt,()=>({duration:200})),i(N,U)};c(F,N=>{e(D)&&N(V)})}t(pe),g(()=>rt(M,"aria-expanded",e(D))),i(Ce,pe),ht()}gt(["click","change","input"]);var Ma=v('<label class="type-toggle svelte-yz0xxt"><input type="checkbox"/> <span>Sport?</span></label>'),Pa=v("<option> </option>"),Ia=v('<div class="edit-form svelte-yz0xxt"><div class="edit-row main svelte-yz0xxt"><input type="text" class="edit-input grade svelte-yz0xxt" placeholder="Grade"/> <input type="text" class="edit-input name svelte-yz0xxt" placeholder="Route Name"/> <!></div> <div class="edit-row meta svelte-yz0xxt"><select class="edit-select svelte-yz0xxt"></select> <div class="attempts-input-wrapper svelte-yz0xxt"><span>#</span> <input type="number" min="1" class="edit-input num svelte-yz0xxt"/></div></div> <div class="edit-row notes svelte-yz0xxt"><textarea class="edit-input notes-area svelte-yz0xxt" placeholder="Notes..."></textarea></div> <div class="edit-actions svelte-yz0xxt"><button class="action-btn cancel svelte-yz0xxt">Cancel</button> <button class="action-btn save svelte-yz0xxt">Save</button></div></div>'),Ra=v('<span class="climb-type-tag svelte-yz0xxt"> </span>'),Ba=v('<span class="notes-preview svelte-yz0xxt"> </span>'),Va=v('<span class="wall-tag svelte-yz0xxt"> </span>'),Ua=v('<span class="technique-tag svelte-yz0xxt"> </span>'),Wa=v('<span class="attempts-count svelte-yz0xxt"> </span>'),Ha=v('<div class="detail-row svelte-yz0xxt"><span class="label svelte-yz0xxt">Notes:</span> <p class="notes svelte-yz0xxt"> </p></div>'),Ja=v('<p class="empty-notes svelte-yz0xxt">No notes for this climb.</p>'),Za=v('<div class="climb-details svelte-yz0xxt"><!> <div class="tags svelte-yz0xxt"><span class="tag type svelte-yz0xxt"> </span> <span class="tag attempt-text svelte-yz0xxt"> </span></div></div>'),Ka=v('<div class="climb-header svelte-yz0xxt" role="button" tabindex="0"><div class="climb-main-info svelte-yz0xxt"><span> </span> <span class="climb-name svelte-yz0xxt"> </span> <!> <!> <!> <!></div> <div class="climb-meta svelte-yz0xxt"><span><span class="icon svelte-yz0xxt"> </span> <!></span> <button class="icon-btn edit-btn svelte-yz0xxt" aria-label="Edit climb" title="Edit climb">‚úé</button> <button class="icon-btn delete-btn svelte-yz0xxt" aria-label="Delete climb" title="Delete climb">üóëÔ∏è</button> <span class="chevron svelte-yz0xxt"> </span></div></div> <!>',1),Xa=v("<div><!></div>");function Ya(Ce,p){bt(p,!0);let r=sa(p,"showClimbType",3,!1),h=y(!1),T=y(!1),D=y(""),b=y(""),C=y(""),S=y(1),B=y(""),se=y(!1);function ge(){e(T)||l(h,!e(h))}function De(F){F.stopPropagation(),p.onDelete()}function $(F){F.stopPropagation(),l(D,p.climb.name,!0),l(b,p.climb.grade,!0),l(C,p.climb.attemptType,!0),l(S,p.climb.attemptsNum,!0),l(B,p.climb.notes,!0),l(se,p.climb.isSport,!0),l(T,!0),l(h,!0)}function ee(F){F.stopPropagation(),l(T,!1)}function G(F){F.stopPropagation();const V={...p.climb,name:e(D),grade:e(b),attemptType:e(C),attemptsNum:e(S),notes:e(B),isSport:e(se)};p.onUpdate(V),l(T,!1)}function ne(){(e(C)==="Flash"||e(C)==="Onsight")&&l(S,1)}const me={Flash:"‚ö°",Onsight:"üëÅÔ∏è",Redpoint:"üî¥",Dogged:"üõ†Ô∏è",DNF:"‚ùå"},pe=["Flash","Onsight","Redpoint","Dogged","DNF"];var M=Xa();let ve;var he=a(M);{var Te=F=>{var V=Ia(),N=a(V),U=a(N);Ve(U);var X=s(U,2);Ve(X);var W=s(X,2);{var re=j=>{var Se=Ma(),_e=a(Se);Ve(_e),At(2),t(Se),pa(_e,()=>e(se),xe=>l(se,xe)),i(j,Se)};c(W,j=>{r()&&j(re)})}t(N);var ie=s(N,2),x=a(ie);x.__change=ne,ze(x,21,()=>pe,Ee,(j,Se)=>{var _e=Pa(),xe=a(_e,!0);t(_e);var f={};g(()=>{o(xe,e(Se)),f!==(f=e(Se))&&(_e.value=(_e.__value=e(Se))??"")}),i(j,_e)}),t(x);var d=s(x,2),_=s(a(d),2);Ve(_),t(d),t(ie);var n=s(ie,2),u=a(n);$t(u),t(n);var k=s(n,2),I=a(k);I.__click=ee;var ae=s(I,2);ae.__click=G,t(k),t(V),g(()=>_.disabled=e(C)==="Flash"||e(C)==="Onsight"),Pe(U,()=>e(b),j=>l(b,j)),Pe(X,()=>e(D),j=>l(D,j)),Lt(x,()=>e(C),j=>l(C,j)),Pe(_,()=>e(S),j=>l(S,j)),Pe(u,()=>e(B),j=>l(B,j)),i(F,V)},te=F=>{var V=Ka(),N=Me(V);N.__click=ge,N.__keydown=oe=>(oe.key==="Enter"||oe.key===" ")&&ge();var U=a(N),X=a(U);let W;var re=a(X,!0);t(X);var ie=s(X,2),x=a(ie,!0);t(ie);var d=s(ie,2);{var _=oe=>{var de=Ra(),H=a(de,!0);t(de),g(()=>o(H,p.climb.isSport?"Sport":"Boulder")),i(oe,de)};c(d,oe=>{r()&&oe(_)})}var n=s(d,2);{var u=oe=>{var de=Ba(),H=a(de);t(de),g(()=>o(H,`- ${p.climb.notes??""}`)),i(oe,de)};c(n,oe=>{!e(h)&&p.climb.notes&&oe(u)})}var k=s(n,2);{var I=oe=>{var de=Va(),H=a(de,!0);t(de),g(()=>o(H,p.climb.wall)),i(oe,de)};c(k,oe=>{p.climb.wall&&oe(I)})}var ae=s(k,2);{var j=oe=>{var de=Ua(),H=a(de,!0);t(de),g(()=>o(H,p.climb.techniqueFocus)),i(oe,de)};c(ae,oe=>{p.climb.techniqueFocus&&oe(j)})}t(U);var Se=s(U,2),_e=a(Se);let xe;var f=a(_e),E=a(f,!0);t(f);var ue=s(f,2);{var we=oe=>{var de=Wa(),H=a(de,!0);t(de),g(()=>o(H,p.climb.attemptsNum)),i(oe,de)};c(ue,oe=>{p.climb.attemptType!=="Flash"&&p.climb.attemptType!=="Onsight"&&oe(we)})}t(_e);var qe=s(_e,2);qe.__click=$;var le=s(qe,2);le.__click=De;var R=s(le,2),Y=a(R,!0);t(R),t(Se),t(N);var Le=s(N,2);{var Fe=oe=>{var de=Za(),H=a(de);{var L=Q=>{var ce=Ha(),Ae=s(a(ce),2),He=a(Ae,!0);t(Ae),t(ce),g(()=>o(He,p.climb.notes)),i(Q,ce)},z=Q=>{var ce=Ja();i(Q,ce)};c(H,Q=>{p.climb.notes?Q(L):Q(z,!1)})}var ye=s(H,2),ke=a(ye),A=a(ke,!0);t(ke);var O=s(ke,2),be=a(O,!0);t(O),t(ye),t(de),g(()=>{o(A,p.climb.isSport?"Sport":"Boulder"),o(be,p.climb.attemptType)}),at(3,de,()=>lt,()=>({duration:150})),i(oe,de)};c(Le,oe=>{e(h)&&oe(Fe)})}g(()=>{rt(N,"aria-expanded",e(h)),W=pt(X,1,"grade-badge svelte-yz0xxt",null,W,{sport:p.climb.isSport}),o(re,p.climb.grade),o(x,p.climb.name||"Unnamed Route"),xe=pt(_e,1,"attempt-type svelte-yz0xxt",null,xe,{flash:p.climb.attemptType==="Flash"}),o(E,me[p.climb.attemptType]||p.climb.attemptType),o(Y,e(h)?"‚ñ≤":"‚ñº")}),i(F,V)};c(he,F=>{e(T)?F(Te):F(te,!1)})}t(M),g(()=>ve=pt(M,1,"climb-entry svelte-yz0xxt",null,ve,{expanded:e(h),editing:e(T)})),i(Ce,M),ht()}gt(["change","click","keydown"]);var Qa=v('<span class="stat svelte-7vqogn"> </span>'),$a=v('<span class="status-icon pending svelte-7vqogn" title="Waiting to sync">üîÑ</span>'),es=v('<span class="status-icon error svelte-7vqogn" title="Sync error">‚ö†Ô∏è</span>'),ts=v('<span class="chip svelte-7vqogn"> </span>'),as=v('<span class="text-none svelte-7vqogn">None</span>'),ss=v('<div class="detail-item svelte-7vqogn"><span class="label svelte-7vqogn">Difficulty</span> <span class="value svelte-7vqogn"> </span></div>'),rs=v('<span class="chip svelte-7vqogn"> </span>'),is=v('<span class="text-none svelte-7vqogn">None</span>'),ls=v('<div class="detail-item svelte-7vqogn"><span class="label svelte-7vqogn">Category</span> <div class="value-chips svelte-7vqogn"><!></div></div>'),ns=v('<span class="chip svelte-7vqogn"> </span>'),vs=v('<span class="text-none svelte-7vqogn">None</span>'),os=v('<div class="detail-item svelte-7vqogn"><span class="label svelte-7vqogn">Energy System</span> <div class="value-chips svelte-7vqogn"><!></div></div>'),ds=v('<span class="chip svelte-7vqogn"> </span>'),cs=v('<span class="text-none svelte-7vqogn">None</span>'),ps=v('<div class="detail-item svelte-7vqogn"><span class="label svelte-7vqogn">Wall</span> <div class="value-chips svelte-7vqogn"><!></div></div>'),_s=v('<button class="icon-btn edit-notes-btn svelte-7vqogn" title="Edit Notes">‚úé</button>'),us=v('<div class="edit-notes-area"><textarea placeholder="Add session notes..." rows="3" class="notes-editor svelte-7vqogn"></textarea> <div class="edit-actions svelte-7vqogn"><button class="cancel-btn svelte-7vqogn">Cancel</button> <button class="save-btn svelte-7vqogn"> </button></div></div>'),fs=v('<p class="notes-text svelte-7vqogn"> </p>'),gs=v('<p class="notes-placeholder svelte-7vqogn">No notes.</p>'),ms=v('<div class="metric svelte-7vqogn"><span class="label svelte-7vqogn">Open Grip</span> <div class="bar-container svelte-7vqogn"><div class="bar-fill svelte-7vqogn"></div></div> <span class="score svelte-7vqogn"> </span></div>'),bs=v('<div class="metric svelte-7vqogn"><span class="label svelte-7vqogn">Crimp Grip</span> <div class="bar-container svelte-7vqogn"><div class="bar-fill svelte-7vqogn"></div></div> <span class="score svelte-7vqogn"> </span></div>'),hs=v('<div class="metric svelte-7vqogn"><span class="label svelte-7vqogn">Pinch Grip</span> <div class="bar-container svelte-7vqogn"><div class="bar-fill svelte-7vqogn"></div></div> <span class="score svelte-7vqogn"> </span></div>'),ys=v('<div class="metric svelte-7vqogn"><span class="label svelte-7vqogn">Sloper Grip</span> <div class="bar-container svelte-7vqogn"><div class="bar-fill svelte-7vqogn"></div></div> <span class="score svelte-7vqogn"> </span></div>'),xs=v('<div class="metric svelte-7vqogn"><span class="label svelte-7vqogn">Jug Grip</span> <div class="bar-container svelte-7vqogn"><div class="bar-fill svelte-7vqogn"></div></div> <span class="score svelte-7vqogn"> </span></div>'),ws=v('<p class="no-climbs svelte-7vqogn">No climbs logged for this session.</p>'),Ss=v('<div class="card-body svelte-7vqogn"><div class="details-grid svelte-7vqogn"><div class="detail-item svelte-7vqogn"><span class="label svelte-7vqogn">Training Type</span> <div class="value-chips svelte-7vqogn"><!></div></div> <!> <!> <!> <!></div> <div class="notes-container svelte-7vqogn"><div class="notes-header svelte-7vqogn"><span class="label svelte-7vqogn">Session Notes</span> <!></div> <!></div> <div class="metrics-container svelte-7vqogn"><div class="metric svelte-7vqogn"><span class="label svelte-7vqogn">Finger Load</span> <div class="bar-container svelte-7vqogn"><div class="bar-fill svelte-7vqogn"></div></div> <span class="score svelte-7vqogn"> </span></div> <div class="metric svelte-7vqogn"><span class="label svelte-7vqogn">Shoulder Load</span> <div class="bar-container svelte-7vqogn"><div class="bar-fill svelte-7vqogn"></div></div> <span class="score svelte-7vqogn"> </span></div> <div class="metric svelte-7vqogn"><span class="label svelte-7vqogn">Forearm Load</span> <div class="bar-container svelte-7vqogn"><div class="bar-fill svelte-7vqogn"></div></div> <span class="score svelte-7vqogn"> </span></div> <!> <!> <!> <!> <!></div> <div class="climbs-list svelte-7vqogn"><h4 class="svelte-7vqogn">Climbs</h4> <div class="climbs-container svelte-7vqogn"><!> <!></div></div></div>'),ks=v('<div><div class="card-header svelte-7vqogn" role="button" tabindex="0"><div class="header-main svelte-7vqogn"><div class="date-badge svelte-7vqogn"><span class="day svelte-7vqogn"> </span> <span class="month svelte-7vqogn"> </span></div> <div class="session-info svelte-7vqogn"><div class="session-text svelte-7vqogn"><h3 class="location svelte-7vqogn"> </h3> <div class="session-meta svelte-7vqogn"><span class="type-tag svelte-7vqogn"> </span> <span class="stat svelte-7vqogn"> </span> <!></div></div> <div class="load-summary svelte-7vqogn"><div class="load-badge finger svelte-7vqogn"> </div> <div class="load-badge shoulder svelte-7vqogn"> </div> <div class="load-badge forearm svelte-7vqogn"> </div></div></div></div> <div class="header-actions"><div class="header-status svelte-7vqogn"><!></div>  <button class="btn-icon delete-session" title="Delete Session">üóëÔ∏è</button> <span class="chevron svelte-7vqogn"> </span></div></div> <!> <!></div>');function Ds(Ce,p){bt(p,!0);let r=sa(p,"session",7),h=y(!1),T=y(!1);function D(){l(h,!e(h))}function b(){l(T,!0)}function C(){ta(r().id),l(T,!1),p.onDelete()}function S(L){const z=[...r().climbs];z.splice(L,1),Ut(r().id,{climbs:z}),p.onDelete()}function B(L,z){const ye=[...r().climbs];ye[L]=z,se(ye)}async function se(L){if(Ut(r().id,{climbs:L}),r().climbs=L,Yt()){const z={date:r().date,location:r().location,customLocation:r().customLocation,climbingType:r().climbingType,trainingTypes:r().trainingTypes||[],difficulty:r().difficulty,categories:r().categories||[],energySystems:r().energySystems||[],wallAngles:r().wallAngles||[],fingerLoad:r().fingerLoad,shoulderLoad:r().shoulderLoad,forearmLoad:r().forearmLoad,openGrip:r().openGrip,crimpGrip:r().crimpGrip,pinchGrip:r().pinchGrip,sloperGrip:r().sloperGrip,jugGrip:r().jugGrip,climbs:L};try{const ye=await da(r().id,z);ye.ok?(Qt(r().id),r().syncStatus="synced"):(console.error("Failed to sync update:",ye.error),zt(r().id),r().syncStatus="error")}catch(ye){console.error("Exception syncing update:",ye),zt(r().id),r().syncStatus="error"}}}let ge=ft(()=>r().climbs?.length??0),De=ft(()=>(r().climbs||[]).reduce((L,z)=>{const ye=parseInt(z.grade.replace(/\D/g,""))||0,ke=parseInt(L.replace(/\D/g,""))||0;return ye>ke?z.grade:L},"V0")),$=y(!1),ee=y(""),G=y(!1);function ne(){l(ee,r().notes||"",!0),l($,!0)}function me(){l($,!1),l(ee,"")}async function pe(){if(!e(G)){if(l(G,!0),r().notes,r().notes=e(ee),Ut(r().id,{notes:e(ee)}),Yt()){const L={date:r().date,location:r().location,customLocation:r().customLocation,climbingType:r().climbingType,trainingTypes:r().trainingTypes||[],difficulty:r().difficulty,categories:r().categories||[],energySystems:r().energySystems||[],wallAngles:r().wallAngles||[],fingerLoad:r().fingerLoad,shoulderLoad:r().shoulderLoad,forearmLoad:r().forearmLoad,openGrip:r().openGrip,crimpGrip:r().crimpGrip,pinchGrip:r().pinchGrip,sloperGrip:r().sloperGrip,jugGrip:r().jugGrip,climbs:r().climbs,notes:e(ee)};try{const z=await da(r().id,L);z.ok?(Qt(r().id),r().syncStatus="synced"):(console.error("Failed to sync note update:",z.error),zt(r().id),r().syncStatus="error")}catch(z){console.error("Exception syncing note update:",z),zt(r().id),r().syncStatus="error"}}l($,!1),l(G,!1)}}var M=ks();let ve;var he=a(M);he.__click=D,he.__keydown=L=>L.key==="Enter"&&D();var Te=a(he),te=a(Te),F=a(te),V=a(F,!0);t(F);var N=s(F,2),U=a(N,!0);t(N),t(te);var X=s(te,2),W=a(X),re=a(W),ie=a(re,!0);t(re);var x=s(re,2),d=a(x),_=a(d,!0);t(d);var n=s(d,2),u=a(n);t(n);var k=s(n,2);{var I=L=>{var z=Qa(),ye=a(z);t(z),g(()=>o(ye,`Max: ${e(De)??""}`)),i(L,z)};c(k,L=>{e(ge)>0&&L(I)})}t(x),t(W);var ae=s(W,2),j=a(ae),Se=a(j,!0);t(j);var _e=s(j,2),xe=a(_e,!0);t(_e);var f=s(_e,2),E=a(f,!0);t(f),t(ae),t(X),t(Te);var ue=s(Te,2),we=a(ue),qe=a(we);{var le=L=>{var z=$a();i(L,z)},R=L=>{var z=Qe(),ye=Me(z);{var ke=A=>{var O=es();i(A,O)};c(ye,A=>{r().syncStatus==="error"&&A(ke)},!0)}i(L,z)};c(qe,L=>{r().syncStatus==="pending"?L(le):L(R,!1)})}t(we);var Y=s(we,2);Y.__click=L=>{L.stopPropagation(),b()};var Le=s(Y,2),Fe=a(Le,!0);t(Le),t(ue),t(he);var oe=s(he,2);{var de=L=>{var z=Ss(),ye=a(z),ke=a(ye),A=s(a(ke),2),O=a(A);{var be=P=>{var Z=Qe(),m=Me(Z);ze(m,17,()=>r().trainingTypes,Ee,(w,q)=>{var J=ts(),K=a(J,!0);t(J),g(()=>o(K,e(q))),i(w,J)}),i(P,Z)},Q=P=>{var Z=as();i(P,Z)};c(O,P=>{r().trainingTypes&&r().trainingTypes.length>0&&!r().trainingTypes.includes("None")?P(be):P(Q,!1)})}t(A),t(ke);var ce=s(ke,2);{var Ae=P=>{var Z=ss(),m=s(a(Z),2),w=a(m,!0);t(m),t(Z),g(()=>o(w,r().difficulty)),i(P,Z)};c(ce,P=>{r().difficulty&&P(Ae)})}var He=s(ce,2);{var Ge=P=>{var Z=ls(),m=s(a(Z),2),w=a(m);{var q=K=>{var fe=Qe(),Ne=Me(fe);ze(Ne,17,()=>r().categories,Ee,(tt,Et)=>{var ut=rs(),Gt=a(ut,!0);t(ut),g(()=>o(Gt,e(Et))),i(tt,ut)}),i(K,fe)},J=K=>{var fe=is();i(K,fe)};c(w,K=>{r().categories.length>0&&!r().categories.includes("None")?K(q):K(J,!1)})}t(m),t(Z),i(P,Z)};c(He,P=>{r().categories?.length&&P(Ge)})}var Ie=s(He,2);{var Je=P=>{var Z=os(),m=s(a(Z),2),w=a(m);{var q=K=>{var fe=Qe(),Ne=Me(fe);ze(Ne,17,()=>r().energySystems,Ee,(tt,Et)=>{var ut=ns(),Gt=a(ut,!0);t(ut),g(()=>o(Gt,e(Et))),i(tt,ut)}),i(K,fe)},J=K=>{var fe=vs();i(K,fe)};c(w,K=>{r().energySystems.length>0&&!r().energySystems.includes("None")?K(q):K(J,!1)})}t(m),t(Z),i(P,Z)};c(Ie,P=>{r().energySystems?.length&&P(Je)})}var st=s(Ie,2);{var Dt=P=>{var Z=ps(),m=s(a(Z),2),w=a(m);{var q=K=>{var fe=Qe(),Ne=Me(fe);ze(Ne,17,()=>r().wallAngles,Ee,(tt,Et)=>{var ut=ds(),Gt=a(ut,!0);t(ut),g(()=>o(Gt,e(Et))),i(tt,ut)}),i(K,fe)},J=K=>{var fe=cs();i(K,fe)};c(w,K=>{r().wallAngles.length>0&&!r().wallAngles.includes("None")?K(q):K(J,!1)})}t(m),t(Z),i(P,Z)};c(st,P=>{r().wallAngles?.length&&P(Dt)})}t(ye);var St=s(ye,2),Tt=a(St),yt=s(a(Tt),2);{var kt=P=>{var Z=_s();Z.__click=ne,i(P,Z)};c(yt,P=>{e($)||P(kt)})}t(Tt);var mt=s(Tt,2);{var Re=P=>{var Z=us(),m=a(Z);$t(m);var w=s(m,2),q=a(w);q.__click=me;var J=s(q,2);J.__click=pe;var K=a(J,!0);t(J),t(w),t(Z),g(()=>{q.disabled=e(G),J.disabled=e(G),o(K,e(G)?"Saving...":"Save")}),Pe(m,()=>e(ee),fe=>l(ee,fe)),at(3,Z,()=>lt,()=>({duration:150})),i(P,Z)},$e=P=>{var Z=Qe(),m=Me(Z);{var w=J=>{var K=fs(),fe=a(K,!0);t(K),g(()=>o(fe,r().notes)),i(J,K)},q=J=>{var K=gs();i(J,K)};c(m,J=>{r().notes?J(w):J(q,!1)})}i(P,Z)};c(mt,P=>{e($)?P(Re):P($e,!1)})}t(St);var Ze=s(St,2),nt=a(Ze),Ue=s(a(nt),2),it=a(Ue);t(Ue);var vt=s(Ue,2),Oe=a(vt);t(vt),t(nt);var je=s(nt,2),Ke=s(a(je),2),Xe=a(Ke);t(Ke);var et=s(Ke,2),Be=a(et);t(et),t(je);var Ye=s(je,2),ot=s(a(Ye),2),qt=a(ot);t(ot);var We=s(ot,2),xt=a(We);t(We),t(Ye);var Pt=s(Ye,2);{var Ct=P=>{var Z=ms(),m=s(a(Z),2),w=a(m);t(m);var q=s(m,2),J=a(q);t(q),t(Z),g(()=>{dt(w,`width: ${r().openGrip/5*100}%`),o(J,`${r().openGrip??""}/5`)}),i(P,Z)};c(Pt,P=>{r().openGrip&&P(Ct)})}var wt=s(Pt,2);{var It=P=>{var Z=bs(),m=s(a(Z),2),w=a(m);t(m);var q=s(m,2),J=a(q);t(q),t(Z),g(()=>{dt(w,`width: ${r().crimpGrip/5*100}%`),o(J,`${r().crimpGrip??""}/5`)}),i(P,Z)};c(wt,P=>{r().crimpGrip&&P(It)})}var _t=s(wt,2);{var Wt=P=>{var Z=hs(),m=s(a(Z),2),w=a(m);t(m);var q=s(m,2),J=a(q);t(q),t(Z),g(()=>{dt(w,`width: ${r().pinchGrip/5*100}%`),o(J,`${r().pinchGrip??""}/5`)}),i(P,Z)};c(_t,P=>{r().pinchGrip&&P(Wt)})}var Ft=s(_t,2);{var Rt=P=>{var Z=ys(),m=s(a(Z),2),w=a(m);t(m);var q=s(m,2),J=a(q);t(q),t(Z),g(()=>{dt(w,`width: ${r().sloperGrip/5*100}%`),o(J,`${r().sloperGrip??""}/5`)}),i(P,Z)};c(Ft,P=>{r().sloperGrip&&P(Rt)})}var Ot=s(Ft,2);{var Xt=P=>{var Z=xs(),m=s(a(Z),2),w=a(m);t(m);var q=s(m,2),J=a(q);t(q),t(Z),g(()=>{dt(w,`width: ${r().jugGrip/5*100}%`),o(J,`${r().jugGrip??""}/5`)}),i(P,Z)};c(Ot,P=>{r().jugGrip&&P(Xt)})}t(Ze);var Ht=s(Ze,2),Jt=s(a(Ht),2),jt=a(Jt);ze(jt,17,()=>r().climbs||[],Ee,(P,Z,m)=>{{let w=ft(()=>r().climbingType==="Mixed");Ya(P,{get climb(){return e(Z)},onDelete:()=>S(m),onUpdate:q=>B(m,q),get showClimbType(){return e(w)}})}});var Mt=s(jt,2);{var Bt=P=>{var Z=ws();i(P,Z)};c(Mt,P=>{(r().climbs||[]).length===0&&P(Bt)})}t(Jt),t(Ht),t(z),g(()=>{dt(it,`width: ${r().fingerLoad/5*100}%`),o(Oe,`${r().fingerLoad??""}/5`),dt(Xe,`width: ${r().shoulderLoad/5*100}%`),o(Be,`${r().shoulderLoad??""}/5`),dt(qt,`width: ${r().forearmLoad/5*100}%`),o(xt,`${r().forearmLoad??""}/5`)}),at(3,z,()=>lt,()=>({duration:150})),i(L,z)};c(oe,L=>{e(h)&&L(de)})}var H=s(oe,2);Kt(H,{get isOpen(){return e(T)},title:"Delete Session",message:"Are you sure you want to delete this session? This action cannot be undone.",onConfirm:C,onCancel:()=>l(T,!1)}),t(M),g((L,z)=>{ve=pt(M,1,"session-card svelte-7vqogn",null,ve,{expanded:e(h)}),rt(he,"aria-expanded",e(h)),o(V,L),o(U,z),o(ie,r().location),o(_,r().climbingType),o(u,`${e(ge)??""} climbs`),rt(j,"title",`Finger Load: ${r().fingerLoad??""}`),o(Se,r().fingerLoad),rt(_e,"title",`Shoulder Load: ${r().shoulderLoad??""}`),o(xe,r().shoulderLoad),rt(f,"title",`Forearm Load: ${r().forearmLoad??""}`),o(E,r().forearmLoad),o(Fe,e(h)?"‚ñ≤":"‚ñº")},[()=>new Date(r().date).getDate(),()=>new Date(r().date).toLocaleDateString("en-GB",{month:"short"})]),i(Ce,M),ht()}gt(["click","keydown"]);var Ts=v('<div class="legend-item svelte-11p9lqi"><span class="l-icon svelte-11p9lqi"> </span> <span class="l-label svelte-11p9lqi"> </span></div>'),qs=v('<div class="legend-content svelte-11p9lqi"><div class="legend-grid svelte-11p9lqi"></div></div>'),Cs=v('<div class="legend-container svelte-11p9lqi"><button class="legend-toggle svelte-11p9lqi"><span class="icon">‚ÑπÔ∏è</span> <span class="text">Icon Legend</span> <span class="chevron svelte-11p9lqi"> </span></button> <!></div>');function _a(Ce){let p=y(!1);const r=[{icon:"üëÅÔ∏è",label:"Onsight"},{icon:"‚ö°",label:"Flash"},{icon:"üî¥",label:"Redpoint"},{icon:"üõ†Ô∏è",label:"Dogged"},{icon:"‚ùå",label:"DNF"}];var h=Cs(),T=a(h);T.__click=()=>l(p,!e(p));var D=s(a(T),4),b=a(D,!0);t(D),t(T);var C=s(T,2);{var S=B=>{var se=qs(),ge=a(se);ze(ge,21,()=>r,Ee,(De,$)=>{var ee=Ts(),G=a(ee),ne=a(G,!0);t(G);var me=s(G,2),pe=a(me,!0);t(me),t(ee),g(()=>{o(ne,e($).icon),o(pe,e($).label)}),i(De,ee)}),t(ge),t(se),at(3,se,()=>lt),i(B,se)};c(C,B=>{e(p)&&B(S)})}t(h),g(()=>{rt(T,"aria-expanded",e(p)),o(b,e(p)?"‚ñº":"‚ñ∂")}),i(Ce,h)}gt(["click"]);function va(Ce,p){if(!Ce||Ce.length===0){alert("No data to export");return}const r=Array.from(new Set(Ce.flatMap(Object.keys))),h=[r.join(","),...Ce.map(b=>r.map(C=>{let S=b[C];if(S==null)return"";if(typeof S=="object"){if(S instanceof Date)return S.toISOString();S=JSON.stringify(S).replace(/"/g,'""')}else typeof S=="string"&&(S=S.replace(/"/g,'""'));return typeof S=="string"&&(S.includes(",")||S.includes('"')||S.includes(`
`))?`"${S}"`:S}).join(","))].join(`
`),T=new Blob([h],{type:"text/csv;charset=utf-8;"}),D=document.createElement("a");if(D.download!==void 0){const b=URL.createObjectURL(T);D.setAttribute("href",b),D.setAttribute("download",p.endsWith(".csv")?p:`${p}.csv`),D.style.visibility="hidden",document.body.appendChild(D),D.click(),document.body.removeChild(D)}}var Ls=v('<span class="spinner svelte-14fqz8w"></span> Fetching...',1),zs=v('<div class="error-banner svelte-14fqz8w"> </div>'),Fs=v('<small class="svelte-14fqz8w">Try adjusting your filters.</small>'),Es=v('<div class="empty-state svelte-14fqz8w"><p class="svelte-14fqz8w">No indoor climbing sessions found.</p> <!></div>'),Gs=v('<div class="load-more-container svelte-14fqz8w"><button class="load-more-btn svelte-14fqz8w"> </button></div>'),Ns=v('<div class="view-container svelte-14fqz8w"><div class="view-header svelte-14fqz8w"><h2 class="view-title svelte-14fqz8w">üßó Indoor Climbing History</h2> <div class="header-actions svelte-14fqz8w"><button class="action-btn secondary svelte-14fqz8w" title="Export filtered data to CSV">üì• Export</button> <button class="action-btn svelte-14fqz8w" title="Fetch data from cloud"><!></button></div></div> <!> <!> <div class="info-bar svelte-14fqz8w"><div class="legend-wrapper svelte-14fqz8w"><!></div> <div class="load-key svelte-14fqz8w"><span class="key-label svelte-14fqz8w">Load:</span> <div class="key-item svelte-14fqz8w"><span class="dot finger svelte-14fqz8w"></span> Finger</div> <div class="key-item svelte-14fqz8w"><span class="dot shoulder svelte-14fqz8w"></span> Shoulder</div> <div class="key-item svelte-14fqz8w"><span class="dot forearm svelte-14fqz8w"></span> Forearm</div></div></div> <div class="sessions-list"><!> <!> <!></div></div>');function As(Ce,p){bt(p,!0);let r=y(ct([])),h=y(ct([])),T=y(!1),D=y(""),b=y(ct({startDate:"",endDate:"",location:"",climbingType:"",sessionType:"",grade:""})),C=y(20);const S=20;na(()=>{B()});function B(){const n=Zt("indoor_climb");l(r,n.sort((u,k)=>new Date(k.date).getTime()-new Date(u.date).getTime()),!0),$()}async function se(){l(T,!0),l(D,"");try{await ea();const n=await ga();n.ok&&n.data?ge(n.data):l(D,n.error||"Failed to fetch data",!0)}catch(n){l(D,n instanceof Error?n.message:"Unknown error",!0)}finally{l(T,!1)}}function ge(n){const u=n.map(I=>({...I,activityType:"indoor_climb",createdAt:new Date().toISOString(),updatedAt:new Date().toISOString(),syncStatus:"synced",syncedAt:new Date().toISOString(),openGrip:0,crimpGrip:0,pinchGrip:0,sloperGrip:0,jugGrip:0}));aa(u);const k=Zt("indoor_climb");l(r,k.sort((I,ae)=>new Date(ae.date).getTime()-new Date(I.date).getTime()),!0),$()}function De(n){l(b,n,!0),$()}function $(){l(C,S),l(h,e(r).filter(n=>{if(e(b).startDate&&n.date<e(b).startDate||e(b).endDate&&n.date>e(b).endDate||e(b).location&&n.location!==e(b).location)return!1;if(e(b).climbingType&&(n.climbingType==="Leading"?"Sport":n.climbingType)!==e(b).climbingType)if(n.climbingType==="Mixed")if(e(b).climbingType==="Bouldering"){if(!n.climbs.some(k=>!k.isSport))return!1}else if(e(b).climbingType==="Sport"){if(!n.climbs.some(k=>k.isSport))return!1}else return!1;else return!1;if(e(b).sessionType&&!n.trainingTypes?.includes(e(b).sessionType))return!1;if(e(b).grade){const u=e(b).grade.trim().toLowerCase();if(!n.climbs.some(I=>I.grade.trim().toLowerCase()===u))return!1}return!0}),!0)}function ee(){l(C,e(C)+S)}var G=Ns(),ne=a(G),me=s(a(ne),2),pe=a(me);pe.__click=()=>va(e(h),"indoor_climbs");var M=s(pe,2);M.__click=se;var ve=a(M);{var he=n=>{var u=Ls();At(),i(n,u)},Te=n=>{var u=Nt("‚òÅÔ∏è Fetch Data");i(n,u)};c(ve,n=>{e(T)?n(he):n(Te,!1)})}t(M),t(me),t(ne);var te=s(ne,2);{var F=n=>{var u=zs(),k=a(u,!0);t(u),g(()=>o(k,e(D))),at(3,u,()=>lt),i(n,u)};c(te,n=>{e(D)&&n(F)})}var V=s(te,2);ja(V,{onFilterParamsChange:De});var N=s(V,2),U=a(N),X=a(U);_a(X),t(U),At(2),t(N);var W=s(N,2),re=a(W);ze(re,17,()=>e(h).slice(0,e(C)),n=>n.id,(n,u)=>{Ds(n,{get session(){return e(u)},onDelete:B})});var ie=s(re,2);{var x=n=>{var u=Es(),k=s(a(u),2);{var I=ae=>{var j=Fs();i(ae,j)};c(k,ae=>{e(r).length>0&&ae(I)})}t(u),i(n,u)};c(ie,n=>{e(h).length===0&&n(x)})}var d=s(ie,2);{var _=n=>{var u=Gs(),k=a(u);k.__click=ee;var I=a(k);t(k),t(u),g(()=>o(I,`Load More (${e(h).length-e(C)} remaining)`)),i(n,u)};c(d,n=>{e(C)<e(h).length&&n(_)})}t(W),t(G),g(()=>M.disabled=e(T)),i(Ce,G),ht()}gt(["click"]);var Os=v('<span class="chevron svelte-1frtlim">‚ñ≤</span>'),js=v('<span class="chevron svelte-1frtlim">‚ñº</span>'),Ms=v('<div class="input-with-action svelte-1frtlim"><input type="text" id="area-filter-text" placeholder="Type area name..." class="flat-left svelte-1frtlim"/> <button class="action-btn flat-right svelte-1frtlim" title="Back to list">‚úï</button></div>'),Ps=v("<option> </option>"),Is=v('<select id="area-filter" class="svelte-1frtlim"><option>All Areas</option><!><option>Other (Manual Entry)</option></select>'),Rs=v('<div class="input-with-action svelte-1frtlim"><input type="text" id="crag-filter-text" placeholder="Type crag name..." class="flat-left svelte-1frtlim"/> <button class="action-btn flat-right svelte-1frtlim" title="Back to list">‚úï</button></div>'),Bs=v("<option> </option>"),Vs=v('<select id="crag-filter" class="svelte-1frtlim"><option>All Crags</option><!><option>Other (Manual Entry)</option></select>'),Us=v('<input type="text" id="crag-filter-text" class="svelte-1frtlim"/>'),Ws=v("<option> </option>"),Hs=v("<option> </option>"),Js=v('<div class="filter-body svelte-1frtlim"><div class="filter-grid svelte-1frtlim"><div class="filter-item svelte-1frtlim"><label for="start-date" class="svelte-1frtlim">Start Date</label> <input type="date" id="start-date" class="svelte-1frtlim"/></div> <div class="filter-item svelte-1frtlim"><label for="end-date" class="svelte-1frtlim">End Date</label> <input type="date" id="end-date" class="svelte-1frtlim"/></div> <div class="filter-item svelte-1frtlim"><label for="area-filter" class="svelte-1frtlim">Area</label> <!></div> <div class="filter-item svelte-1frtlim"><label for="crag-filter" class="svelte-1frtlim">Crag</label> <!></div> <div class="filter-item svelte-1frtlim"><label for="climbing-type-filter" class="svelte-1frtlim">Climb Type</label> <select id="climbing-type-filter" class="svelte-1frtlim"><option>Any Type</option><!></select></div> <div class="filter-item svelte-1frtlim"><label for="session-type-filter" class="svelte-1frtlim">Session Type</label> <select id="session-type-filter" class="svelte-1frtlim"><option>Any Type</option><!></select></div> <div class="filter-item svelte-1frtlim"><label for="grade-filter" class="svelte-1frtlim">Grade (Exact)</label> <input type="text" id="grade-filter" placeholder="e.g. 7a" class="svelte-1frtlim"/></div></div> <div class="filter-actions svelte-1frtlim"><button class="reset-btn svelte-1frtlim">Reset Filters</button></div></div>'),Zs=v('<div class="filter-container svelte-1frtlim"><button class="filter-header svelte-1frtlim"><div class="header-content svelte-1frtlim"><span class="icon svelte-1frtlim">üîç</span> <span class="title svelte-1frtlim">Filters</span> <!></div></button> <!></div>');function Ks(Ce,p){bt(p,!0);const r=ma(),h=["Bouldering","Sport","Mixed","Trad"],T=["Projecting","Onsighting","Campusing","Repeaters","Fun","Volume"];let D=y(!1),b=y(""),C=y(""),S=y(""),B=y(""),se=y(""),ge=y(""),De=y(""),$=y(!1),ee=y(!1),G=ft(()=>e(S)&&e(S)!=="Other"?ba(e(S)):[]);function ne(){e(S)==="Other"?(l($,!0),l(S,"")):l($,!1),l(B,""),l(ee,!1),ve()}function me(){e(B)==="Other"?(l(ee,!0),l(B,"")):l(ee,!1),ve()}function pe(){l(D,!e(D))}function M(){l(b,""),l(C,""),l(S,""),l(B,""),l(se,""),l(ge,""),l(De,""),l($,!1),l(ee,!1),ve()}function ve(){p.onFilterParamsChange({startDate:e(b),endDate:e(C),area:e(S),crag:e(B),climbingType:e(se),sessionType:e(ge),grade:e(De)})}var he=Zs(),Te=a(he);Te.__click=pe;var te=a(Te),F=s(a(te),4);{var V=W=>{var re=Os();i(W,re)},N=W=>{var re=js();i(W,re)};c(F,W=>{e(D)?W(V):W(N,!1)})}t(te),t(Te);var U=s(Te,2);{var X=W=>{var re=Js(),ie=a(re),x=a(ie),d=s(a(x),2);Ve(d),d.__change=ve,t(x);var _=s(x,2),n=s(a(_),2);Ve(n),n.__change=ve,t(_);var u=s(_,2),k=s(a(u),2);{var I=H=>{var L=Ms(),z=a(L);Ve(z),z.__input=ve;var ye=s(z,2);ye.__click=()=>{l($,!1),l(S,""),ve()},t(L),Pe(z,()=>e(S),ke=>l(S,ke)),i(H,L)},ae=H=>{var L=Is();L.__change=ne;var z=a(L);z.value=z.__value="";var ye=s(z);ze(ye,17,()=>r,Ee,(A,O)=>{var be=Ps(),Q=a(be,!0);t(be);var ce={};g(()=>{o(Q,e(O)),ce!==(ce=e(O))&&(be.value=(be.__value=e(O))??"")}),i(A,be)});var ke=s(ye);ke.value=ke.__value="Other",t(L),Lt(L,()=>e(S),A=>l(S,A)),i(H,L)};c(k,H=>{e($)?H(I):H(ae,!1)})}t(u);var j=s(u,2),Se=s(a(j),2);{var _e=H=>{var L=Rs(),z=a(L);Ve(z),z.__input=ve;var ye=s(z,2);ye.__click=()=>{l(ee,!1),l(B,""),ve()},t(L),Pe(z,()=>e(B),ke=>l(B,ke)),i(H,L)},xe=H=>{var L=Qe(),z=Me(L);{var ye=A=>{var O=Vs();O.__change=me;var be=a(O);be.value=be.__value="";var Q=s(be);ze(Q,17,()=>e(G),Ee,(Ae,He)=>{var Ge=Bs(),Ie=a(Ge,!0);t(Ge);var Je={};g(()=>{o(Ie,e(He)),Je!==(Je=e(He))&&(Ge.value=(Ge.__value=e(He))??"")}),i(Ae,Ge)});var ce=s(Q);ce.value=ce.__value="Other",t(O),Lt(O,()=>e(B),Ae=>l(B,Ae)),i(A,O)},ke=A=>{var O=Us();Ve(O),O.__input=ve,g(()=>{rt(O,"placeholder",e(S)?"Filter crag...":"Select area first"),O.disabled=!e($)&&!e(S)}),Pe(O,()=>e(B),be=>l(B,be)),i(A,O)};c(z,A=>{!e($)&&e(S)&&e(G).length>0?A(ye):A(ke,!1)},!0)}i(H,L)};c(Se,H=>{e(ee)?H(_e):H(xe,!1)})}t(j);var f=s(j,2),E=s(a(f),2);E.__change=ve;var ue=a(E);ue.value=ue.__value="";var we=s(ue);ze(we,17,()=>h,Ee,(H,L)=>{var z=Ws(),ye=a(z,!0);t(z);var ke={};g(()=>{o(ye,e(L)),ke!==(ke=e(L))&&(z.value=(z.__value=e(L))??"")}),i(H,z)}),t(E),t(f);var qe=s(f,2),le=s(a(qe),2);le.__change=ve;var R=a(le);R.value=R.__value="";var Y=s(R);ze(Y,17,()=>T,Ee,(H,L)=>{var z=Hs(),ye=a(z,!0);t(z);var ke={};g(()=>{o(ye,e(L)),ke!==(ke=e(L))&&(z.value=(z.__value=e(L))??"")}),i(H,z)}),t(le),t(qe);var Le=s(qe,2),Fe=s(a(Le),2);Ve(Fe),Fe.__input=ve,t(Le),t(ie);var oe=s(ie,2),de=a(oe);de.__click=M,t(oe),t(re),Pe(d,()=>e(b),H=>l(b,H)),Pe(n,()=>e(C),H=>l(C,H)),Lt(E,()=>e(se),H=>l(se,H)),Lt(le,()=>e(ge),H=>l(ge,H)),Pe(Fe,()=>e(De),H=>l(De,H)),at(3,re,()=>lt,()=>({duration:200})),i(W,re)};c(U,W=>{e(D)&&W(X)})}t(he),g(()=>rt(Te,"aria-expanded",e(D))),i(Ce,he),ht()}gt(["click","change","input"]);var Xs=v('<label class="type-toggle svelte-1k6anfh"><input type="checkbox"/> <span>Sport?</span></label>'),Ys=v("<option> </option>"),Qs=v('<div class="edit-form svelte-1k6anfh"><div class="edit-row main svelte-1k6anfh"><input type="text" class="edit-input grade svelte-1k6anfh" placeholder="Grade"/> <input type="text" class="edit-input name svelte-1k6anfh" placeholder="Route Name"/> <!></div> <div class="edit-row meta svelte-1k6anfh"><select class="edit-select svelte-1k6anfh"></select> <div class="attempts-input-wrapper svelte-1k6anfh"><span>#</span> <input type="number" min="1" class="edit-input num svelte-1k6anfh"/></div></div> <div class="edit-row notes svelte-1k6anfh"><textarea class="edit-input notes-area svelte-1k6anfh" placeholder="Notes..."></textarea></div> <div class="edit-actions svelte-1k6anfh"><button class="action-btn cancel svelte-1k6anfh">Cancel</button> <button class="action-btn save svelte-1k6anfh">Save</button></div></div>'),$s=v('<span class="climb-type-tag svelte-1k6anfh"> </span>'),er=v('<span class="notes-preview svelte-1k6anfh"> </span>'),tr=v('<span class="attempts-count svelte-1k6anfh"> </span>'),ar=v('<div class="detail-row svelte-1k6anfh"><span class="label svelte-1k6anfh">Notes:</span> <p class="notes svelte-1k6anfh"> </p></div>'),sr=v('<p class="empty-notes svelte-1k6anfh">No notes for this climb.</p>'),rr=v('<span class="tag wall-tag svelte-1k6anfh"> </span>'),ir=v('<span class="tag technique-tag svelte-1k6anfh"> </span>'),lr=v('<div class="climb-details svelte-1k6anfh"><!> <div class="tags svelte-1k6anfh"><span class="tag type svelte-1k6anfh"> </span> <!> <!> <span class="tag attempt-text svelte-1k6anfh"> </span></div></div>'),nr=v('<div class="climb-header svelte-1k6anfh" role="button" tabindex="0"><div class="climb-main-info svelte-1k6anfh"><span> </span> <span class="climb-name svelte-1k6anfh"> </span> <!> <!></div> <div class="climb-meta svelte-1k6anfh"><span><span class="icon svelte-1k6anfh"> </span> <!></span> <button class="icon-btn edit-btn svelte-1k6anfh" aria-label="Edit climb" title="Edit climb">‚úé</button> <button class="icon-btn delete-btn svelte-1k6anfh" aria-label="Delete climb" title="Delete climb">üóëÔ∏è</button> <span class="chevron svelte-1k6anfh"> </span></div></div> <!>',1),vr=v("<div><!></div>");function or(Ce,p){bt(p,!0);let r=sa(p,"showClimbType",3,!1),h=y(!1),T=y(!1),D=y(""),b=y(""),C=y(""),S=y(1),B=y(""),se=y(!1);function ge(){e(T)||l(h,!e(h))}function De(F){F.stopPropagation(),p.onDelete()}function $(F){F.stopPropagation(),l(D,p.climb.name,!0),l(b,p.climb.grade,!0),l(C,p.climb.attemptType,!0),l(S,p.climb.attemptsNum,!0),l(B,p.climb.notes,!0),l(se,p.climb.isSport,!0),l(T,!0),l(h,!0)}function ee(F){F.stopPropagation(),l(T,!1)}function G(F){F.stopPropagation();const V={...p.climb,name:e(D),grade:e(b),attemptType:e(C),attemptsNum:e(S),notes:e(B),isSport:e(se)};p.onUpdate(V),l(T,!1)}function ne(){(e(C)==="Flash"||e(C)==="Onsight")&&l(S,1)}const me={Flash:"‚ö°",Onsight:"üëÅÔ∏è",Redpoint:"üî¥",Dogged:"üõ†Ô∏è",DNF:"‚ùå"},pe=["Flash","Onsight","Redpoint","Dogged","DNF"];var M=vr();let ve;var he=a(M);{var Te=F=>{var V=Qs(),N=a(V),U=a(N);Ve(U);var X=s(U,2);Ve(X);var W=s(X,2);{var re=j=>{var Se=Xs(),_e=a(Se);Ve(_e),At(2),t(Se),pa(_e,()=>e(se),xe=>l(se,xe)),i(j,Se)};c(W,j=>{r()&&j(re)})}t(N);var ie=s(N,2),x=a(ie);x.__change=ne,ze(x,21,()=>pe,Ee,(j,Se)=>{var _e=Ys(),xe=a(_e,!0);t(_e);var f={};g(()=>{o(xe,e(Se)),f!==(f=e(Se))&&(_e.value=(_e.__value=e(Se))??"")}),i(j,_e)}),t(x);var d=s(x,2),_=s(a(d),2);Ve(_),t(d),t(ie);var n=s(ie,2),u=a(n);$t(u),t(n);var k=s(n,2),I=a(k);I.__click=ee;var ae=s(I,2);ae.__click=G,t(k),t(V),g(()=>_.disabled=e(C)==="Flash"||e(C)==="Onsight"),Pe(U,()=>e(b),j=>l(b,j)),Pe(X,()=>e(D),j=>l(D,j)),Lt(x,()=>e(C),j=>l(C,j)),Pe(_,()=>e(S),j=>l(S,j)),Pe(u,()=>e(B),j=>l(B,j)),i(F,V)},te=F=>{var V=nr(),N=Me(V);N.__click=ge,N.__keydown=R=>(R.key==="Enter"||R.key===" ")&&ge();var U=a(N),X=a(U);let W;var re=a(X,!0);t(X);var ie=s(X,2),x=a(ie,!0);t(ie);var d=s(ie,2);{var _=R=>{var Y=$s(),Le=a(Y,!0);t(Y),g(()=>o(Le,p.climb.isSport?"Sport":"Boulder")),i(R,Y)};c(d,R=>{r()&&R(_)})}var n=s(d,2);{var u=R=>{var Y=er(),Le=a(Y);t(Y),g(()=>o(Le,`- ${p.climb.notes??""}`)),i(R,Y)};c(n,R=>{!e(h)&&p.climb.notes&&R(u)})}t(U);var k=s(U,2),I=a(k);let ae;var j=a(I),Se=a(j,!0);t(j);var _e=s(j,2);{var xe=R=>{var Y=tr(),Le=a(Y,!0);t(Y),g(()=>o(Le,p.climb.attemptsNum)),i(R,Y)};c(_e,R=>{p.climb.attemptType!=="Flash"&&p.climb.attemptType!=="Onsight"&&R(xe)})}t(I);var f=s(I,2);f.__click=$;var E=s(f,2);E.__click=De;var ue=s(E,2),we=a(ue,!0);t(ue),t(k),t(N);var qe=s(N,2);{var le=R=>{var Y=lr(),Le=a(Y);{var Fe=Q=>{var ce=ar(),Ae=s(a(ce),2),He=a(Ae,!0);t(Ae),t(ce),g(()=>o(He,p.climb.notes)),i(Q,ce)},oe=Q=>{var ce=sr();i(Q,ce)};c(Le,Q=>{p.climb.notes?Q(Fe):Q(oe,!1)})}var de=s(Le,2),H=a(de),L=a(H,!0);t(H);var z=s(H,2);{var ye=Q=>{var ce=rr(),Ae=a(ce,!0);t(ce),g(()=>o(Ae,p.climb.wall)),i(Q,ce)};c(z,Q=>{p.climb.wall&&Q(ye)})}var ke=s(z,2);{var A=Q=>{var ce=ir(),Ae=a(ce,!0);t(ce),g(()=>o(Ae,p.climb.techniqueFocus)),i(Q,ce)};c(ke,Q=>{p.climb.techniqueFocus&&Q(A)})}var O=s(ke,2),be=a(O,!0);t(O),t(de),t(Y),g(()=>{o(L,p.climb.isSport?"Sport":"Boulder"),o(be,p.climb.attemptType)}),at(3,Y,()=>lt,()=>({duration:150})),i(R,Y)};c(qe,R=>{e(h)&&R(le)})}g(()=>{rt(N,"aria-expanded",e(h)),W=pt(X,1,"grade-badge svelte-1k6anfh",null,W,{sport:p.climb.isSport}),o(re,p.climb.grade),o(x,p.climb.name||"Unnamed Route"),ae=pt(I,1,"attempt-type svelte-1k6anfh",null,ae,{flash:p.climb.attemptType==="Flash"}),o(Se,me[p.climb.attemptType]||p.climb.attemptType),o(we,e(h)?"‚ñ≤":"‚ñº")}),i(F,V)};c(he,F=>{e(T)?F(Te):F(te,!1)})}t(M),g(()=>ve=pt(M,1,"climb-entry svelte-1k6anfh",null,ve,{expanded:e(h),editing:e(T)})),i(Ce,M),ht()}gt(["change","click","keydown"]);var dr=v('<div class="sector-meta"> </div>'),cr=v('<span class="stat svelte-d5hg2r"> </span>'),pr=v('<span class="status-icon pending svelte-d5hg2r" title="Waiting to sync">üîÑ</span>'),_r=v('<span class="status-icon error svelte-d5hg2r" title="Sync error">‚ö†Ô∏è</span>'),ur=v('<span class="chip svelte-d5hg2r"> </span>'),fr=v('<span class="text-none svelte-d5hg2r">None</span>'),gr=v('<div class="detail-item svelte-d5hg2r"><span class="label svelte-d5hg2r">Difficulty</span> <span class="value svelte-d5hg2r"> </span></div>'),mr=v('<span class="chip svelte-d5hg2r"> </span>'),br=v('<span class="text-none svelte-d5hg2r">None</span>'),hr=v('<div class="detail-item svelte-d5hg2r"><span class="label svelte-d5hg2r">Category</span> <div class="value-chips svelte-d5hg2r"><!></div></div>'),yr=v('<span class="chip svelte-d5hg2r"> </span>'),xr=v('<span class="text-none svelte-d5hg2r">None</span>'),wr=v('<div class="detail-item svelte-d5hg2r"><span class="label svelte-d5hg2r">Energy System</span> <div class="value-chips svelte-d5hg2r"><!></div></div>'),Sr=v('<button class="icon-btn edit-notes-btn svelte-d5hg2r" title="Edit Notes">‚úé</button>'),kr=v('<div class="edit-notes-area"><textarea placeholder="Add session notes..." rows="3" class="notes-editor svelte-d5hg2r"></textarea> <div class="edit-actions svelte-d5hg2r"><button class="cancel-btn svelte-d5hg2r">Cancel</button> <button class="save-btn svelte-d5hg2r"> </button></div></div>'),Dr=v('<p class="notes-text svelte-d5hg2r"> </p>'),Tr=v('<p class="notes-placeholder svelte-d5hg2r">No notes.</p>'),qr=v('<div class="metric svelte-d5hg2r"><span class="label svelte-d5hg2r">Open Grip</span> <div class="bar-container svelte-d5hg2r"><div class="bar-fill svelte-d5hg2r"></div></div> <span class="score svelte-d5hg2r"> </span></div>'),Cr=v('<div class="metric svelte-d5hg2r"><span class="label svelte-d5hg2r">Crimp Grip</span> <div class="bar-container svelte-d5hg2r"><div class="bar-fill svelte-d5hg2r"></div></div> <span class="score svelte-d5hg2r"> </span></div>'),Lr=v('<div class="metric svelte-d5hg2r"><span class="label svelte-d5hg2r">Pinch Grip</span> <div class="bar-container svelte-d5hg2r"><div class="bar-fill svelte-d5hg2r"></div></div> <span class="score svelte-d5hg2r"> </span></div>'),zr=v('<div class="metric svelte-d5hg2r"><span class="label svelte-d5hg2r">Sloper Grip</span> <div class="bar-container svelte-d5hg2r"><div class="bar-fill svelte-d5hg2r"></div></div> <span class="score svelte-d5hg2r"> </span></div>'),Fr=v('<div class="metric svelte-d5hg2r"><span class="label svelte-d5hg2r">Jug Grip</span> <div class="bar-container svelte-d5hg2r"><div class="bar-fill svelte-d5hg2r"></div></div> <span class="score svelte-d5hg2r"> </span></div>'),Er=v('<p class="no-climbs svelte-d5hg2r">No climbs logged for this session.</p>'),Gr=v('<div class="card-body svelte-d5hg2r"><div class="details-grid svelte-d5hg2r"><div class="detail-item svelte-d5hg2r"><span class="label svelte-d5hg2r">Training Type</span> <div class="value-chips svelte-d5hg2r"><!></div></div> <!> <!> <!></div> <div class="notes-container svelte-d5hg2r"><div class="notes-header svelte-d5hg2r"><span class="label svelte-d5hg2r">Session Notes</span> <!></div> <!></div> <div class="metrics-container svelte-d5hg2r"><div class="metric svelte-d5hg2r"><span class="label svelte-d5hg2r">Finger Load</span> <div class="bar-container svelte-d5hg2r"><div class="bar-fill svelte-d5hg2r"></div></div> <span class="score svelte-d5hg2r"> </span></div> <div class="metric svelte-d5hg2r"><span class="label svelte-d5hg2r">Shoulder Load</span> <div class="bar-container svelte-d5hg2r"><div class="bar-fill svelte-d5hg2r"></div></div> <span class="score svelte-d5hg2r"> </span></div> <div class="metric svelte-d5hg2r"><span class="label svelte-d5hg2r">Forearm Load</span> <div class="bar-container svelte-d5hg2r"><div class="bar-fill svelte-d5hg2r"></div></div> <span class="score svelte-d5hg2r"> </span></div> <!> <!> <!> <!> <!></div> <div class="climbs-list svelte-d5hg2r"><h4 class="svelte-d5hg2r">Climbs</h4> <div class="climbs-container svelte-d5hg2r"><!> <!></div></div></div>'),Nr=v('<div><div class="card-header svelte-d5hg2r" role="button" tabindex="0"><div class="header-main svelte-d5hg2r"><div class="date-badge svelte-d5hg2r"><span class="day svelte-d5hg2r"> </span> <span class="month svelte-d5hg2r"> </span></div> <div class="session-info svelte-d5hg2r"><div class="session-text svelte-d5hg2r"><h3 class="location svelte-d5hg2r"> <!></h3> <!> <div class="session-meta svelte-d5hg2r"><span class="type-tag svelte-d5hg2r"> </span> <span class="stat svelte-d5hg2r"> </span> <!></div></div> <div class="load-summary svelte-d5hg2r"><div class="load-badge finger svelte-d5hg2r"> </div> <div class="load-badge shoulder svelte-d5hg2r"> </div> <div class="load-badge forearm svelte-d5hg2r"> </div></div></div></div> <div class="header-actions"><div class="header-status svelte-d5hg2r"><!></div> <button class="btn-icon delete-session" title="Delete Session">üóëÔ∏è</button> <span class="chevron svelte-d5hg2r"> </span></div></div> <!> <!></div>');function Ar(Ce,p){bt(p,!0);let r=sa(p,"session",7),h=y(!1),T=y(!1);function D(){l(h,!e(h))}function b(){l(T,!0)}function C(){ta(r().id),l(T,!1),p.onDelete()}function S(A){const O=[...r().climbs];O.splice(A,1),Ut(r().id,{climbs:O}),p.onDelete()}function B(A,O){const be=[...r().climbs];be[A]=O,se(be)}async function se(A){if(Ut(r().id,{climbs:A}),r().climbs=A,Yt()){const O={date:r().date,area:r().area,crag:r().crag,sector:r().sector,climbingType:r().climbingType,trainingTypes:r().trainingTypes||[],difficulty:r().difficulty,categories:r().categories||[],energySystems:r().energySystems||[],fingerLoad:r().fingerLoad,shoulderLoad:r().shoulderLoad,forearmLoad:r().forearmLoad,climbs:A};try{const be=await ca(r().id,O);be.ok?(Qt(r().id),r().syncStatus="synced"):(console.error("Failed to sync update:",be.error),zt(r().id),r().syncStatus="error")}catch(be){console.error("Exception syncing update:",be),zt(r().id),r().syncStatus="error"}}}let ge=ft(()=>r().climbs?.length??0),De=ft(()=>(r().climbs||[]).reduce((A,O)=>{const be=parseInt(O.grade.replace(/\D/g,""))||0,Q=parseInt(A.replace(/\D/g,""))||0;return be>Q?O.grade:A},"V0/4a")),$=y(!1),ee=y(""),G=y(!1);function ne(){l(ee,r().notes||"",!0),l($,!0)}function me(){l($,!1),l(ee,"")}async function pe(){if(!e(G)){if(l(G,!0),r().notes,r().notes=e(ee),Ut(r().id,{notes:e(ee)}),Yt()){const A={date:r().date,area:r().area,crag:r().crag,sector:r().sector,climbingType:r().climbingType,trainingTypes:r().trainingTypes||[],difficulty:r().difficulty,categories:r().categories||[],energySystems:r().energySystems||[],fingerLoad:r().fingerLoad,shoulderLoad:r().shoulderLoad,forearmLoad:r().forearmLoad,climbs:r().climbs,notes:e(ee)};try{const O=await ca(r().id,A);O.ok?(Qt(r().id),r().syncStatus="synced"):(console.error("Failed to sync note update:",O.error),zt(r().id),r().syncStatus="error")}catch(O){console.error("Exception syncing note update:",O),zt(r().id),r().syncStatus="error"}}l($,!1),l(G,!1)}}var M=Nr();let ve;var he=a(M);he.__click=D,he.__keydown=A=>A.key==="Enter"&&D();var Te=a(he),te=a(Te),F=a(te),V=a(F,!0);t(F);var N=s(F,2),U=a(N,!0);t(N),t(te);var X=s(te,2),W=a(X),re=a(W),ie=a(re),x=s(ie);{var d=A=>{var O=Nt();g(()=>o(O,`- ${r().crag??""}`)),i(A,O)};c(x,A=>{r().crag&&A(d)})}t(re);var _=s(re,2);{var n=A=>{var O=dr(),be=a(O);t(O),g(()=>o(be,`üìç ${r().sector??""}`)),i(A,O)};c(_,A=>{r().sector&&A(n)})}var u=s(_,2),k=a(u),I=a(k,!0);t(k);var ae=s(k,2),j=a(ae);t(ae);var Se=s(ae,2);{var _e=A=>{var O=cr(),be=a(O);t(O),g(()=>o(be,`Max: ${e(De)??""}`)),i(A,O)};c(Se,A=>{e(ge)>0&&A(_e)})}t(u),t(W);var xe=s(W,2),f=a(xe),E=a(f,!0);t(f);var ue=s(f,2),we=a(ue,!0);t(ue);var qe=s(ue,2),le=a(qe,!0);t(qe),t(xe),t(X),t(Te);var R=s(Te,2),Y=a(R),Le=a(Y);{var Fe=A=>{var O=pr();i(A,O)},oe=A=>{var O=Qe(),be=Me(O);{var Q=ce=>{var Ae=_r();i(ce,Ae)};c(be,ce=>{r().syncStatus==="error"&&ce(Q)},!0)}i(A,O)};c(Le,A=>{r().syncStatus==="pending"?A(Fe):A(oe,!1)})}t(Y);var de=s(Y,2);de.__click=A=>{A.stopPropagation(),b()};var H=s(de,2),L=a(H,!0);t(H),t(R),t(he);var z=s(he,2);{var ye=A=>{var O=Gr(),be=a(O),Q=a(be),ce=s(a(Q),2),Ae=a(ce);{var He=m=>{var w=Qe(),q=Me(w);ze(q,17,()=>r().trainingTypes,Ee,(J,K)=>{var fe=ur(),Ne=a(fe,!0);t(fe),g(()=>o(Ne,e(K))),i(J,fe)}),i(m,w)},Ge=m=>{var w=fr();i(m,w)};c(Ae,m=>{r().trainingTypes&&r().trainingTypes.length>0&&!r().trainingTypes.includes("None")?m(He):m(Ge,!1)})}t(ce),t(Q);var Ie=s(Q,2);{var Je=m=>{var w=gr(),q=s(a(w),2),J=a(q,!0);t(q),t(w),g(()=>o(J,r().difficulty)),i(m,w)};c(Ie,m=>{r().difficulty&&m(Je)})}var st=s(Ie,2);{var Dt=m=>{var w=hr(),q=s(a(w),2),J=a(q);{var K=Ne=>{var tt=Qe(),Et=Me(tt);ze(Et,17,()=>r().categories,Ee,(ut,Gt)=>{var Vt=mr(),ra=a(Vt,!0);t(Vt),g(()=>o(ra,e(Gt))),i(ut,Vt)}),i(Ne,tt)},fe=Ne=>{var tt=br();i(Ne,tt)};c(J,Ne=>{r().categories.length>0&&!r().categories.includes("None")?Ne(K):Ne(fe,!1)})}t(q),t(w),i(m,w)};c(st,m=>{r().categories?.length&&m(Dt)})}var St=s(st,2);{var Tt=m=>{var w=wr(),q=s(a(w),2),J=a(q);{var K=Ne=>{var tt=Qe(),Et=Me(tt);ze(Et,17,()=>r().energySystems,Ee,(ut,Gt)=>{var Vt=yr(),ra=a(Vt,!0);t(Vt),g(()=>o(ra,e(Gt))),i(ut,Vt)}),i(Ne,tt)},fe=Ne=>{var tt=xr();i(Ne,tt)};c(J,Ne=>{r().energySystems.length>0&&!r().energySystems.includes("None")?Ne(K):Ne(fe,!1)})}t(q),t(w),i(m,w)};c(St,m=>{r().energySystems?.length&&m(Tt)})}t(be);var yt=s(be,2),kt=a(yt),mt=s(a(kt),2);{var Re=m=>{var w=Sr();w.__click=ne,i(m,w)};c(mt,m=>{e($)||m(Re)})}t(kt);var $e=s(kt,2);{var Ze=m=>{var w=kr(),q=a(w);$t(q);var J=s(q,2),K=a(J);K.__click=me;var fe=s(K,2);fe.__click=pe;var Ne=a(fe,!0);t(fe),t(J),t(w),g(()=>{K.disabled=e(G),fe.disabled=e(G),o(Ne,e(G)?"Saving...":"Save")}),Pe(q,()=>e(ee),tt=>l(ee,tt)),at(3,w,()=>lt,()=>({duration:150})),i(m,w)},nt=m=>{var w=Qe(),q=Me(w);{var J=fe=>{var Ne=Dr(),tt=a(Ne,!0);t(Ne),g(()=>o(tt,r().notes)),i(fe,Ne)},K=fe=>{var Ne=Tr();i(fe,Ne)};c(q,fe=>{r().notes?fe(J):fe(K,!1)})}i(m,w)};c($e,m=>{e($)?m(Ze):m(nt,!1)})}t(yt);var Ue=s(yt,2),it=a(Ue),vt=s(a(it),2),Oe=a(vt);t(vt);var je=s(vt,2),Ke=a(je);t(je),t(it);var Xe=s(it,2),et=s(a(Xe),2),Be=a(et);t(et);var Ye=s(et,2),ot=a(Ye);t(Ye),t(Xe);var qt=s(Xe,2),We=s(a(qt),2),xt=a(We);t(We);var Pt=s(We,2),Ct=a(Pt);t(Pt),t(qt);var wt=s(qt,2);{var It=m=>{var w=qr(),q=s(a(w),2),J=a(q);t(q);var K=s(q,2),fe=a(K);t(K),t(w),g(()=>{dt(J,`width: ${r().openGrip/5*100}%`),o(fe,`${r().openGrip??""}/5`)}),i(m,w)};c(wt,m=>{r().openGrip&&m(It)})}var _t=s(wt,2);{var Wt=m=>{var w=Cr(),q=s(a(w),2),J=a(q);t(q);var K=s(q,2),fe=a(K);t(K),t(w),g(()=>{dt(J,`width: ${r().crimpGrip/5*100}%`),o(fe,`${r().crimpGrip??""}/5`)}),i(m,w)};c(_t,m=>{r().crimpGrip&&m(Wt)})}var Ft=s(_t,2);{var Rt=m=>{var w=Lr(),q=s(a(w),2),J=a(q);t(q);var K=s(q,2),fe=a(K);t(K),t(w),g(()=>{dt(J,`width: ${r().pinchGrip/5*100}%`),o(fe,`${r().pinchGrip??""}/5`)}),i(m,w)};c(Ft,m=>{r().pinchGrip&&m(Rt)})}var Ot=s(Ft,2);{var Xt=m=>{var w=zr(),q=s(a(w),2),J=a(q);t(q);var K=s(q,2),fe=a(K);t(K),t(w),g(()=>{dt(J,`width: ${r().sloperGrip/5*100}%`),o(fe,`${r().sloperGrip??""}/5`)}),i(m,w)};c(Ot,m=>{r().sloperGrip&&m(Xt)})}var Ht=s(Ot,2);{var Jt=m=>{var w=Fr(),q=s(a(w),2),J=a(q);t(q);var K=s(q,2),fe=a(K);t(K),t(w),g(()=>{dt(J,`width: ${r().jugGrip/5*100}%`),o(fe,`${r().jugGrip??""}/5`)}),i(m,w)};c(Ht,m=>{r().jugGrip&&m(Jt)})}t(Ue);var jt=s(Ue,2),Mt=s(a(jt),2),Bt=a(Mt);ze(Bt,17,()=>r().climbs||[],Ee,(m,w,q)=>{{let J=ft(()=>r().climbingType==="Mixed");or(m,{get climb(){return e(w)},onDelete:()=>S(q),onUpdate:K=>B(q,K),get showClimbType(){return e(J)}})}});var P=s(Bt,2);{var Z=m=>{var w=Er();i(m,w)};c(P,m=>{(r().climbs||[]).length===0&&m(Z)})}t(Mt),t(jt),t(O),g(()=>{dt(Oe,`width: ${r().fingerLoad/5*100}%`),o(Ke,`${r().fingerLoad??""}/5`),dt(Be,`width: ${r().shoulderLoad/5*100}%`),o(ot,`${r().shoulderLoad??""}/5`),dt(xt,`width: ${r().forearmLoad/5*100}%`),o(Ct,`${r().forearmLoad??""}/5`)}),at(3,O,()=>lt,()=>({duration:150})),i(A,O)};c(z,A=>{e(h)&&A(ye)})}var ke=s(z,2);Kt(ke,{get isOpen(){return e(T)},title:"Delete Session",message:"Are you sure you want to delete this session? This action cannot be undone.",onConfirm:C,onCancel:()=>l(T,!1)}),t(M),g((A,O)=>{ve=pt(M,1,"session-card svelte-d5hg2r",null,ve,{expanded:e(h)}),rt(he,"aria-expanded",e(h)),o(V,A),o(U,O),o(ie,`${r().area??""} `),o(I,r().climbingType),o(j,`${e(ge)??""} climbs`),rt(f,"title",`Finger Load: ${r().fingerLoad??""}`),o(E,r().fingerLoad),rt(ue,"title",`Shoulder Load: ${r().shoulderLoad??""}`),o(we,r().shoulderLoad),rt(qe,"title",`Forearm Load: ${r().forearmLoad??""}`),o(le,r().forearmLoad),o(L,e(h)?"‚ñ≤":"‚ñº")},[()=>new Date(r().date).getDate(),()=>new Date(r().date).toLocaleDateString(void 0,{month:"short"})]),i(Ce,M),ht()}gt(["click","keydown"]);var Or=v('<span class="spinner svelte-1s7jdlh"></span> Fetching...',1),jr=v('<div class="error-banner svelte-1s7jdlh"> </div>'),Mr=v('<small class="svelte-1s7jdlh">Try adjusting your filters.</small>'),Pr=v('<div class="empty-state svelte-1s7jdlh"><p class="svelte-1s7jdlh">No outdoor climbing sessions found.</p> <!></div>'),Ir=v('<div class="load-more-container svelte-1s7jdlh"><button class="load-more-btn svelte-1s7jdlh"> </button></div>'),Rr=v('<div class="view-container svelte-1s7jdlh"><div class="view-header svelte-1s7jdlh"><h2 class="view-title svelte-1s7jdlh">‚õ∞Ô∏è Outdoor Climbing History</h2> <div class="header-actions svelte-1s7jdlh"><button class="action-btn secondary svelte-1s7jdlh" title="Export filtered data to CSV">üì• Export</button> <button class="action-btn svelte-1s7jdlh" title="Fetch data from cloud"><!></button></div></div> <!> <!> <div class="info-bar svelte-1s7jdlh"><div class="legend-wrapper svelte-1s7jdlh"><!></div> <div class="load-key svelte-1s7jdlh"><span class="key-label svelte-1s7jdlh">Load:</span> <div class="key-item svelte-1s7jdlh"><span class="dot finger svelte-1s7jdlh"></span> Finger</div> <div class="key-item svelte-1s7jdlh"><span class="dot shoulder svelte-1s7jdlh"></span> Shoulder</div> <div class="key-item svelte-1s7jdlh"><span class="dot forearm svelte-1s7jdlh"></span> Forearm</div></div></div> <div class="sessions-list"><!> <!> <!></div></div>');function Br(Ce,p){bt(p,!0);let r=y(ct([])),h=y(ct([])),T=y(!1),D=y(""),b=y(ct({startDate:"",endDate:"",area:"",crag:"",climbingType:"",sessionType:"",grade:""})),C=y(20);const S=20;na(()=>{B()});function B(){const n=Zt("outdoor_climb");l(r,n.sort((u,k)=>new Date(k.date).getTime()-new Date(u.date).getTime()),!0),$()}async function se(){l(T,!0),l(D,"");try{await ea();const n=await ha();n.ok&&n.data?ge(n.data):l(D,n.error||"Failed to fetch data",!0)}catch(n){l(D,n instanceof Error?n.message:"Unknown error",!0)}finally{l(T,!1)}}function ge(n){const u=n.map(I=>({...I,activityType:"outdoor_climb",createdAt:new Date().toISOString(),updatedAt:new Date().toISOString(),syncStatus:"synced",syncedAt:new Date().toISOString(),openGrip:0,crimpGrip:0,pinchGrip:0,sloperGrip:0,jugGrip:0}));aa(u);const k=Zt("outdoor_climb");l(r,k.sort((I,ae)=>new Date(ae.date).getTime()-new Date(I.date).getTime()),!0),$()}function De(n){l(b,n,!0),$()}function $(){l(C,S),l(h,e(r).filter(n=>{if(e(b).startDate&&n.date<e(b).startDate||e(b).endDate&&n.date>e(b).endDate||e(b).area&&!n.area.toLowerCase().includes(e(b).area.toLowerCase())||e(b).crag&&!n.crag.toLowerCase().includes(e(b).crag.toLowerCase()))return!1;if(e(b).climbingType&&(n.climbingType==="Leading"?"Sport":n.climbingType)!==e(b).climbingType)if(n.climbingType==="Mixed")if(e(b).climbingType==="Bouldering"){if(!n.climbs.some(k=>!k.isSport))return!1}else if(e(b).climbingType==="Sport"||e(b).climbingType==="Trad"){if(!n.climbs.some(k=>k.isSport))return!1}else return!1;else return!1;if(e(b).sessionType&&!n.trainingTypes?.includes(e(b).sessionType))return!1;if(e(b).grade){const u=e(b).grade.trim().toLowerCase();if(!n.climbs.some(I=>I.grade.trim().toLowerCase()===u))return!1}return!0}),!0)}function ee(){l(C,e(C)+S)}var G=Rr(),ne=a(G),me=s(a(ne),2),pe=a(me);pe.__click=()=>va(e(h),"outdoor_climbs");var M=s(pe,2);M.__click=se;var ve=a(M);{var he=n=>{var u=Or();At(),i(n,u)},Te=n=>{var u=Nt("‚òÅÔ∏è Fetch Data");i(n,u)};c(ve,n=>{e(T)?n(he):n(Te,!1)})}t(M),t(me),t(ne);var te=s(ne,2);{var F=n=>{var u=jr(),k=a(u,!0);t(u),g(()=>o(k,e(D))),at(3,u,()=>lt),i(n,u)};c(te,n=>{e(D)&&n(F)})}var V=s(te,2);Ks(V,{onFilterParamsChange:De});var N=s(V,2),U=a(N),X=a(U);_a(X),t(U),At(2),t(N);var W=s(N,2),re=a(W);ze(re,17,()=>e(h).slice(0,e(C)),n=>n.id,(n,u)=>{Ar(n,{get session(){return e(u)},onDelete:B})});var ie=s(re,2);{var x=n=>{var u=Pr(),k=s(a(u),2);{var I=ae=>{var j=Mr();i(ae,j)};c(k,ae=>{e(r).length>0&&ae(I)})}t(u),i(n,u)};c(ie,n=>{e(h).length===0&&n(x)})}var d=s(ie,2);{var _=n=>{var u=Ir(),k=a(u);k.__click=ee;var I=a(k);t(k),t(u),g(()=>o(I,`Load More (${e(h).length-e(C)} remaining)`)),i(n,u)};c(d,n=>{e(C)<e(h).length&&n(_)})}t(W),t(G),g(()=>M.disabled=e(T)),i(Ce,G),ht()}gt(["click"]);var Vr=v('<span class="chevron svelte-11rkzid">‚ñ≤</span>'),Ur=v('<span class="chevron svelte-11rkzid">‚ñº</span>'),Wr=v('<div class="filter-body svelte-11rkzid"><div class="filter-grid svelte-11rkzid"><div class="filter-item svelte-11rkzid"><label for="start-date" class="svelte-11rkzid">Start Date</label> <input type="date" id="start-date" class="svelte-11rkzid"/></div> <div class="filter-item svelte-11rkzid"><label for="end-date" class="svelte-11rkzid">End Date</label> <input type="date" id="end-date" class="svelte-11rkzid"/></div> <div class="filter-item svelte-11rkzid"><label for="name-filter" class="svelte-11rkzid">Session Name</label> <input type="text" id="name-filter" placeholder="e.g. Leg Day" class="svelte-11rkzid"/></div> <div class="filter-item svelte-11rkzid"><label for="block-filter" class="svelte-11rkzid">Training Block</label> <select id="block-filter" class="svelte-11rkzid"><option>All Blocks</option><option>Strength</option><option>Power</option><option>Power Endurance</option><option>Muscular Endurance</option></select></div></div> <div class="filter-actions svelte-11rkzid"><button class="reset-btn svelte-11rkzid">Reset Filters</button></div></div>'),Hr=v('<div class="filter-container svelte-11rkzid"><button class="filter-header svelte-11rkzid"><div class="header-content svelte-11rkzid"><span class="icon svelte-11rkzid">üîç</span> <span class="title svelte-11rkzid">Filters</span> <!></div></button> <!></div>');function Jr(Ce,p){bt(p,!0);let r=y(!1),h=y(""),T=y(""),D=y(""),b=y("");function C(){l(r,!e(r))}function S(){l(h,""),l(T,""),l(D,""),l(b,""),B()}function B(){p.onFilterParamsChange({startDate:e(h),endDate:e(T),name:e(D),trainingBlock:e(b)})}var se=Hr(),ge=a(se);ge.__click=C;var De=a(ge),$=s(a(De),4);{var ee=pe=>{var M=Vr();i(pe,M)},G=pe=>{var M=Ur();i(pe,M)};c($,pe=>{e(r)?pe(ee):pe(G,!1)})}t(De),t(ge);var ne=s(ge,2);{var me=pe=>{var M=Wr(),ve=a(M),he=a(ve),Te=s(a(he),2);Ve(Te),Te.__change=B,t(he);var te=s(he,2),F=s(a(te),2);Ve(F),F.__change=B,t(te);var V=s(te,2),N=s(a(V),2);Ve(N),N.__input=B,t(V);var U=s(V,2),X=s(a(U),2);X.__change=B;var W=a(X);W.value=W.__value="";var re=s(W);re.value=re.__value="Strength";var ie=s(re);ie.value=ie.__value="Power";var x=s(ie);x.value=x.__value="Power Endurance";var d=s(x);d.value=d.__value="Muscular Endurance",t(X),t(U),t(ve);var _=s(ve,2),n=a(_);n.__click=S,t(_),t(M),Pe(Te,()=>e(h),u=>l(h,u)),Pe(F,()=>e(T),u=>l(T,u)),Pe(N,()=>e(D),u=>l(D,u)),Lt(X,()=>e(b),u=>l(b,u)),at(3,M,()=>lt,()=>({duration:200})),i(pe,M)};c(ne,pe=>{e(r)&&pe(me)})}t(se),g(()=>rt(ge,"aria-expanded",e(r))),i(Ce,se),ht()}gt(["click","change","input"]);var Zr=v('<span class="status-icon pending svelte-cirrfc" title="Waiting to sync">üîÑ</span>'),Kr=v('<span class="status-icon error svelte-cirrfc" title="Sync error">‚ö†Ô∏è</span>'),Xr=v('<div class="bw-info svelte-cirrfc"><span class="label svelte-cirrfc">Bodyweight:</span> </div>'),Yr=v('<span class="muscle-tag svelte-cirrfc"> </span>'),Qr=v('<span class="muscle-tag svelte-cirrfc"> </span>'),$r=v('<div class="muscle-tags svelte-cirrfc"><!> <!></div>'),ei=v('<span class="tag w svelte-cirrfc">W</span>'),ti=v('<span class="tag f svelte-cirrfc">F</span>'),ai=v('<span class="tag d svelte-cirrfc">D</span>'),si=v('<div><span class="set-num svelte-cirrfc"></span> <!> <!> <!> <span class="val svelte-cirrfc"><span class="weight"> </span> <span class="x svelte-cirrfc">x</span> <span class="reps"> </span></span></div>'),ri=v('<div class="exercise-item svelte-cirrfc"><div class="exercise-header svelte-cirrfc"><h4 class="svelte-cirrfc"> </h4> <!></div> <div class="sets-grid svelte-cirrfc"></div></div>'),ii=v('<div class="subcategory-group svelte-cirrfc"><h5 class="subcategory-header svelte-cirrfc"> </h5> <!></div>'),li=v('<div class="category-group svelte-cirrfc"><h4 class="category-header svelte-cirrfc"> </h4> <!></div>'),ni=v('<div class="card-body svelte-cirrfc"><!> <div class="exercises-list svelte-cirrfc"></div></div>'),vi=v('<div><div class="card-header svelte-cirrfc" role="button" tabindex="0"><div class="header-main svelte-cirrfc"><div class="date-badge svelte-cirrfc"><span class="day svelte-cirrfc"> </span> <span class="month svelte-cirrfc"> </span></div> <div class="session-info svelte-cirrfc"><div class="session-text"><h3 class="name svelte-cirrfc"> </h3> <div class="session-meta svelte-cirrfc"><span class="stat svelte-cirrfc"> </span> <span class="stat svelte-cirrfc"> </span> <span class="stat svelte-cirrfc"> </span></div></div></div></div> <div class="header-actions svelte-cirrfc"><div class="header-status"><!></div> <button class="btn-icon delete-session svelte-cirrfc" title="Delete Session">üóëÔ∏è</button> <span class="chevron svelte-cirrfc"> </span></div></div> <!></div> <!>',1);function oi(Ce,p){bt(p,!0);let r=y(!1),h=y(!1);function T(){l(r,!e(r))}function D(){l(h,!0)}function b(){ta(p.session.id),l(h,!1),p.onDelete()}function C(f){return ya.find(E=>E.name===f)}let S=ft(()=>p.session.exercises?.length??0),B=ft(()=>(p.session.exercises||[]).reduce((f,E)=>f+(E.sets?.length||0),0)),se=ft(()=>(p.session.exercises||[]).reduce((f,E)=>f+(E.sets||[]).reduce((ue,we)=>ue+(we.weight||0)*(we.reps||0),0),0)),ge=ft(()=>(p.session.exercises||[]).reduce((f,E)=>{const ue=C(E.name),we=ue?.category||"Other",qe=ue?.subcategory||"Misc";return f[we]||(f[we]={}),f[we][qe]||(f[we][qe]=[]),f[we][qe].push(E),f},{}));var De=vi(),$=Me(De);let ee;var G=a($);G.__click=T,G.__keydown=f=>f.key==="Enter"&&T();var ne=a(G),me=a(ne),pe=a(me),M=a(pe,!0);t(pe);var ve=s(pe,2),he=a(ve,!0);t(ve),t(me);var Te=s(me,2),te=a(Te),F=a(te),V=a(F,!0);t(F);var N=s(F,2),U=a(N),X=a(U);t(U);var W=s(U,2),re=a(W);t(W);var ie=s(W,2),x=a(ie);t(ie),t(N),t(te),t(Te),t(ne);var d=s(ne,2),_=a(d),n=a(_);{var u=f=>{var E=Zr();i(f,E)},k=f=>{var E=Qe(),ue=Me(E);{var we=qe=>{var le=Kr();i(qe,le)};c(ue,qe=>{p.session.syncStatus==="error"&&qe(we)},!0)}i(f,E)};c(n,f=>{p.session.syncStatus==="pending"?f(u):f(k,!1)})}t(_);var I=s(_,2);I.__click=f=>{f.stopPropagation(),D()};var ae=s(I,2),j=a(ae,!0);t(ae),t(d),t(G);var Se=s(G,2);{var _e=f=>{var E=ni(),ue=a(E);{var we=le=>{var R=Xr(),Y=s(a(R));t(R),g(()=>o(Y,` ${p.session.bodyweight??""}kg`)),i(le,R)};c(ue,le=>{p.session.bodyweight&&le(we)})}var qe=s(ue,2);ze(qe,21,()=>Object.entries(e(ge)),Ee,(le,R)=>{var Y=ft(()=>oa(e(R),2));let Le=()=>e(Y)[0],Fe=()=>e(Y)[1];var oe=li(),de=a(oe),H=a(de,!0);t(de);var L=s(de,2);ze(L,17,()=>Object.entries(Fe()),Ee,(z,ye)=>{var ke=ft(()=>oa(e(ye),2));let A=()=>e(ke)[0],O=()=>e(ke)[1];var be=ii(),Q=a(be),ce=a(Q,!0);t(Q);var Ae=s(Q,2);ze(Ae,17,O,Ee,(He,Ge)=>{const Ie=ft(()=>C(e(Ge).name));var Je=ri(),st=a(Je),Dt=a(st),St=a(Dt,!0);t(Dt);var Tt=s(Dt,2);{var yt=mt=>{var Re=$r(),$e=a(Re);ze($e,17,()=>e(Ie).targetMuscles.slice(0,3),Ee,(Ue,it)=>{var vt=Yr(),Oe=a(vt,!0);t(vt),g(()=>o(Oe,e(it))),i(Ue,vt)});var Ze=s($e,2);{var nt=Ue=>{var it=Qr(),vt=a(it);t(it),g(()=>o(vt,`+${e(Ie).targetMuscles.length-3}`)),i(Ue,it)};c(Ze,Ue=>{e(Ie).targetMuscles.length>3&&Ue(nt)})}t(Re),i(mt,Re)};c(Tt,mt=>{e(Ie)&&mt(yt)})}t(st);var kt=s(st,2);ze(kt,21,()=>e(Ge).sets,Ee,(mt,Re,$e)=>{var Ze=si();let nt;var Ue=a(Ze);Ue.textContent=$e+1;var it=s(Ue,2);{var vt=We=>{var xt=ei();i(We,xt)};c(it,We=>{e(Re).isWarmup&&We(vt)})}var Oe=s(it,2);{var je=We=>{var xt=ti();i(We,xt)};c(Oe,We=>{e(Re).isFailure&&We(je)})}var Ke=s(Oe,2);{var Xe=We=>{var xt=ai();i(We,xt)};c(Ke,We=>{e(Re).isDropSet&&We(Xe)})}var et=s(Ke,2),Be=a(et),Ye=a(Be);t(Be);var ot=s(Be,4),qt=a(ot,!0);t(ot),t(et),t(Ze),g(()=>{nt=pt(Ze,1,"set-pill svelte-cirrfc",null,nt,{completed:e(Re).completed,warmup:e(Re).isWarmup}),o(Ye,`${e(Re).weight??""}kg`),o(qt,e(Re).reps)}),i(mt,Ze)}),t(kt),t(Je),g(()=>o(St,e(Ge).name)),i(He,Je)}),t(be),g(()=>o(ce,A())),i(z,be)}),t(oe),g(()=>o(H,Le())),i(le,oe)}),t(qe),t(E),at(3,E,()=>lt,()=>({duration:150})),i(f,E)};c(Se,f=>{e(r)&&f(_e)})}t($);var xe=s($,2);Kt(xe,{get isOpen(){return e(h)},title:"Delete Session",message:"Are you sure you want to delete this session? This cannot be undone.",onConfirm:b,onCancel:()=>l(h,!1)}),g((f,E,ue)=>{ee=pt($,1,"session-card svelte-cirrfc",null,ee,{expanded:e(r)}),rt(G,"aria-expanded",e(r)),o(M,f),o(he,E),o(V,p.session.name),o(X,`${e(S)??""} Exercises`),o(re,`${e(B)??""} Sets`),o(x,`~${ue??""}kg Vol`),o(j,e(r)?"‚ñ≤":"‚ñº")},[()=>new Date(p.session.date).getDate(),()=>new Date(p.session.date).toLocaleDateString("en-GB",{month:"short"}),()=>Math.round(e(se)).toLocaleString()]),i(Ce,De),ht()}gt(["click","keydown"]);var di=v('<span class="spinner svelte-133enjd"></span> Fetching...',1),ci=v('<div class="error-banner svelte-133enjd"> </div>'),pi=v('<small class="svelte-133enjd">Try adjusting your filters.</small>'),_i=v('<div class="empty-state svelte-133enjd"><p class="svelte-133enjd">No gym sessions found.</p> <!></div>'),ui=v('<div class="load-more-container svelte-133enjd"><button class="load-more-btn svelte-133enjd"> </button></div>'),fi=v('<div class="view-container svelte-133enjd"><div class="view-header svelte-133enjd"><h2 class="view-title svelte-133enjd">üèãÔ∏è Gym Session History</h2> <div class="header-actions svelte-133enjd"><button class="action-btn secondary svelte-133enjd" title="Export filtered data to CSV">üì• Export</button> <button class="action-btn svelte-133enjd" title="Fetch data from cloud"><!></button></div></div> <!> <!> <div class="sessions-list"><!> <!> <!></div></div>');function gi(Ce,p){bt(p,!0);let r=y(ct([])),h=y(ct([])),T=y(!1),D=y(""),b=y(ct({startDate:"",endDate:"",name:"",trainingBlock:""})),C=y(20);const S=20;na(()=>{B()});function B(){const x=Zt("gym_session");l(r,x.sort((d,_)=>new Date(_.date).getTime()-new Date(d.date).getTime()),!0),$()}async function se(){l(T,!0),l(D,"");try{await ea();const x=await xa();x.ok&&x.data?ge(x.data):l(D,x.error||"Failed to fetch data",!0)}catch(x){l(D,x instanceof Error?x.message:"Unknown error",!0)}finally{l(T,!1)}}function ge(x){const d=x.map(n=>({...n,activityType:"gym_session",syncStatus:"synced",syncedAt:new Date().toISOString(),createdAt:n.createdAt||new Date().toISOString(),updatedAt:n.updatedAt||new Date().toISOString()}));aa(d);const _=Zt("gym_session");l(r,_.sort((n,u)=>new Date(u.date).getTime()-new Date(n.date).getTime()),!0),$()}function De(x){l(b,x,!0),$()}function $(){l(C,S),l(h,e(r).filter(x=>!(e(b).startDate&&x.date<e(b).startDate||e(b).endDate&&x.date>e(b).endDate||e(b).name&&!x.name.toLowerCase().includes(e(b).name.toLowerCase())||e(b).trainingBlock&&x.trainingBlock!==e(b).trainingBlock)),!0)}function ee(){l(C,e(C)+S)}var G=fi(),ne=a(G),me=s(a(ne),2),pe=a(me);pe.__click=()=>va(e(h),"gym_sessions");var M=s(pe,2);M.__click=se;var ve=a(M);{var he=x=>{var d=di();At(),i(x,d)},Te=x=>{var d=Nt("‚òÅÔ∏è Fetch Data");i(x,d)};c(ve,x=>{e(T)?x(he):x(Te,!1)})}t(M),t(me),t(ne);var te=s(ne,2);{var F=x=>{var d=ci(),_=a(d,!0);t(d),g(()=>o(_,e(D))),at(3,d,()=>lt),i(x,d)};c(te,x=>{e(D)&&x(F)})}var V=s(te,2);Jr(V,{onFilterParamsChange:De});var N=s(V,2),U=a(N);ze(U,17,()=>e(h).slice(0,e(C)),x=>x.id,(x,d)=>{oi(x,{get session(){return e(d)},onDelete:B})});var X=s(U,2);{var W=x=>{var d=_i(),_=s(a(d),2);{var n=u=>{var k=pi();i(u,k)};c(_,u=>{e(r).length>0&&u(n)})}t(d),i(x,d)};c(X,x=>{e(h).length===0&&x(W)})}var re=s(X,2);{var ie=x=>{var d=ui(),_=a(d);_.__click=ee;var n=a(_);t(_),t(d),g(()=>o(n,`Load More (${e(h).length-e(C)} remaining)`)),i(x,d)};c(re,x=>{e(C)<e(h).length&&x(ie)})}t(N),t(G),g(()=>M.disabled=e(T)),i(Ce,G),ht()}gt(["click"]);var mi=v('<span class="spinner svelte-1szs0u9"></span> Fetching...',1),bi=v('<div class="loading svelte-1szs0u9">Loading sessions...</div>'),hi=v('<div class="empty-state svelte-1szs0u9"><!></div>'),yi=v('<span class="set-tag svelte-1szs0u9"> <span class="x svelte-1szs0u9">x</span> </span>'),xi=v('<div class="ex-notes svelte-1szs0u9"> </div>'),wi=v('<div class="exercise-item svelte-1szs0u9"><div class="ex-header svelte-1szs0u9"><span class="ex-name svelte-1szs0u9"> </span> <span class="ex-grip svelte-1szs0u9"> </span></div> <div class="ex-sets svelte-1szs0u9"></div> <!></div>'),Si=v('<div class="card-body svelte-1szs0u9"><div class="exercises-list svelte-1szs0u9"></div></div>'),ki=v('<div><div class="card-header svelte-1szs0u9" role="button" tabindex="0"><div class="header-main"><span class="session-date svelte-1szs0u9"> </span> <span class="meta svelte-1szs0u9"><!> </span></div> <div class="header-status svelte-1szs0u9"><span>‚óè</span> <button class="btn-icon delete-btn svelte-1szs0u9" title="Delete Session">üóëÔ∏è</button> <span class="chevron svelte-1szs0u9"> </span></div></div> <!></div>'),Di=v('<div class="load-more-container svelte-1szs0u9"><button class="load-more-btn svelte-1szs0u9"> </button></div>'),Ti=v('<div class="timeline svelte-1szs0u9"><!> <!></div>'),qi=v('<div class="view-content svelte-1szs0u9"><div class="header svelte-1szs0u9"><h3 class="svelte-1szs0u9">ü§è Fingerboarding Log</h3> <button class="fetch-btn svelte-1szs0u9" title="Fetch data from cloud"><!></button></div> <div class="filters svelte-1szs0u9"><div class="filter-group svelte-1szs0u9"><label for="start-date" class="svelte-1szs0u9">From</label> <input type="date" id="start-date" class="svelte-1szs0u9"/></div> <div class="filter-group svelte-1szs0u9"><label for="end-date" class="svelte-1szs0u9">To</label> <input type="date" id="end-date" class="svelte-1szs0u9"/></div></div> <!></div> <!>',1);function Ci(Ce,p){bt(p,!0);let r=y(ct([])),h=y(!0),T=y(""),D=y(""),b=y(ct(new Set)),C=y(20);const S=20;ua(()=>{e(T),e(D),l(C,S)});let B=y(!1),se=y(null);function ge(_){l(se,_,!0),l(B,!0)}function De(){e(se)&&(ta(e(se)),l(se,null),l(B,!1),l(r,ia().sort((_,n)=>new Date(n.date).getTime()-new Date(_.date).getTime()),!0))}async function $(){l(h,!0),l(r,ia().sort((_,n)=>new Date(n.date).getTime()-new Date(_.date).getTime()),!0);try{await ea();const _=await wa();if(_.ok&&_.data){const n=_.data.map(u=>({...u,activityType:"fingerboarding",createdAt:u.createdAt||new Date().toISOString(),updatedAt:u.updatedAt||new Date().toISOString(),syncStatus:"synced"}));aa(n),l(r,ia().sort((u,k)=>new Date(k.date).getTime()-new Date(u.date).getTime()),!0)}}catch(_){console.error("Failed to sync",_)}finally{l(h,!1)}}$();let ee=ft(()=>e(r).filter(_=>!(e(T)&&new Date(_.date)<new Date(e(T))||e(D)&&new Date(_.date)>new Date(e(D)))));function G(){l(C,e(C)+S)}function ne(_){e(b).has(_)?e(b).delete(_):e(b).add(_),l(b,new Set(e(b)),!0)}function me(_){return _.exercises.reduce((n,u)=>n+u.details.length,0)}var pe=qi(),M=Me(pe),ve=a(M),he=s(a(ve),2);he.__click=$;var Te=a(he);{var te=_=>{var n=mi();At(),i(_,n)},F=_=>{var n=Nt("‚òÅÔ∏è Fetch Data");i(_,n)};c(Te,_=>{e(h)?_(te):_(F,!1)})}t(he),t(ve);var V=s(ve,2),N=a(V),U=s(a(N),2);Ve(U),t(N);var X=s(N,2),W=s(a(X),2);Ve(W),t(X),t(V);var re=s(V,2);{var ie=_=>{var n=bi();i(_,n)},x=_=>{var n=Qe(),u=Me(n);{var k=ae=>{var j=hi(),Se=a(j);{var _e=f=>{var E=Nt("No sessions match filter.");i(f,E)},xe=f=>{var E=Nt("No fingerboarding sessions logged yet.");i(f,E)};c(Se,f=>{e(r).length>0?f(_e):f(xe,!1)})}t(j),i(ae,j)},I=ae=>{var j=Ti(),Se=a(j);ze(Se,17,()=>e(ee).slice(0,e(C)),Ee,(f,E)=>{var ue=ki();let we;var qe=a(ue);qe.__click=()=>ne(e(E).id),qe.__keydown=Q=>Q.key==="Enter"&&ne(e(E).id);var le=a(qe),R=a(le),Y=a(R,!0);t(R);var Le=s(R,2),Fe=a(Le);{var oe=Q=>{var ce=Nt();g(()=>o(ce,`${e(E).location??""} ¬∑`)),i(Q,ce)};c(Fe,Q=>{e(E).location&&e(E).location!=="N/A"&&e(E).location!=="Home"&&Q(oe)})}var de=s(Fe);t(Le),t(le);var H=s(le,2),L=a(H);let z;var ye=s(L,2);ye.__click=Q=>{Q.stopPropagation(),ge(e(E).id)};var ke=s(ye,2),A=a(ke,!0);t(ke),t(H),t(qe);var O=s(qe,2);{var be=Q=>{var ce=Si(),Ae=a(ce);ze(Ae,21,()=>e(E).exercises||[],Ee,(He,Ge)=>{var Ie=wi(),Je=a(Ie),st=a(Je),Dt=a(st,!0);t(st);var St=s(st,2),Tt=a(St,!0);t(St),t(Je);var yt=s(Je,2);ze(yt,21,()=>e(Ge).details,Ee,(Re,$e)=>{var Ze=yi(),nt=a(Ze),Ue=s(nt,2);t(Ze),g(()=>{o(nt,`${e($e).weight>0?`+${e($e).weight}kg`:"BW"} `),o(Ue,` ${e($e).reps??""}s/reps`)}),i(Re,Ze)}),t(yt);var kt=s(yt,2);{var mt=Re=>{var $e=xi(),Ze=a($e);t($e),g(()=>o(Ze,`"${e(Ge).notes??""}"`)),i(Re,$e)};c(kt,Re=>{e(Ge).notes&&Re(mt)})}t(Ie),g(()=>{o(Dt,e(Ge).name),o(Tt,e(Ge).gripType)}),i(He,Ie)}),t(Ae),t(ce),at(3,ce,()=>lt,()=>({duration:150})),i(Q,ce)};c(O,Q=>{e(b).has(e(E).id)&&Q(be)})}t(ue),g((Q,ce,Ae,He)=>{we=pt(ue,1,"session-card svelte-1szs0u9",null,we,Q),o(Y,ce),o(de,` ${e(E).exercises.length??""} Exercises ¬∑ ${Ae??""} Sets`),z=pt(L,1,"sync-dot svelte-1szs0u9",null,z,{synced:e(E).syncStatus==="synced"}),rt(L,"title",e(E).syncStatus==="synced"?"Synced":"Local"),o(A,He)},[()=>({expanded:e(b).has(e(E).id)}),()=>new Date(e(E).date).toLocaleDateString(void 0,{weekday:"short",month:"short",day:"numeric"}),()=>me(e(E)),()=>e(b).has(e(E).id)?"‚ñ≤":"‚ñº"]),i(f,ue)});var _e=s(Se,2);{var xe=f=>{var E=Di(),ue=a(E);ue.__click=G;var we=a(ue);t(ue),t(E),g(()=>o(we,`Load More (${e(ee).length-e(C)} remaining)`)),i(f,E)};c(_e,f=>{e(C)<e(ee).length&&f(xe)})}t(j),i(ae,j)};c(u,ae=>{e(ee).length===0?ae(k):ae(I,!1)},!0)}i(_,n)};c(re,_=>{e(h)&&e(r).length===0?_(ie):_(x,!1)})}t(M);var d=s(M,2);Kt(d,{get isOpen(){return e(B)},title:"Delete Fingerboard Session",message:"Are you sure you want to delete this session? This cannot be undone.",onConfirm:De,onCancel:()=>l(B,!1)}),g(()=>he.disabled=e(h)),Pe(U,()=>e(T),_=>l(T,_)),Pe(W,()=>e(D),_=>l(D,_)),i(Ce,pe),ht()}gt(["click","keydown"]);var Li=v('<span class="spinner svelte-xyvf5r"></span> Fetching...',1),zi=v('<div class="loading svelte-xyvf5r">Loading sessions...</div>'),Fi=v('<div class="empty-state svelte-xyvf5r">No competitions logged yet.</div>'),Ei=v('<button class="icon-btn edit-notes-btn svelte-xyvf5r" title="Edit Notes">‚úé</button>'),Gi=v('<div class="edit-notes-area"><textarea placeholder="Add session notes..." rows="3" class="notes-editor svelte-xyvf5r"></textarea> <div class="edit-actions svelte-xyvf5r"><button class="cancel-btn svelte-xyvf5r">Cancel</button> <button class="save-btn svelte-xyvf5r"> </button></div></div>'),Ni=v('<p class="note-text svelte-xyvf5r"> </p>'),Ai=v('<p class="notes-placeholder svelte-xyvf5r">No notes.</p>'),Oi=v('<span class="round-pos svelte-xyvf5r"> </span>'),ji=v('<span class="c-attempts svelte-xyvf5r"> </span>'),Mi=v('<div class="climb-notes svelte-xyvf5r"> </div>'),Pi=v('<div class="climb-row svelte-xyvf5r"><div class="climb-info svelte-xyvf5r"><span class="c-name svelte-xyvf5r"> </span> <!></div> <div class="climb-result"><span> </span></div></div> <!>',1),Ii=v('<div class="climbs-list"></div>'),Ri=v('<div class="round-item svelte-xyvf5r"><div class="round-header svelte-xyvf5r"><span class="round-name"> </span> <!></div> <!></div>'),Bi=v('<div class="rounds-list svelte-xyvf5r"></div>'),Vi=v('<div class="load-meta svelte-xyvf5r"><span> </span></div>'),Ui=v('<div class="card-body svelte-xyvf5r"><div class="session-notes-container svelte-xyvf5r"><div class="notes-header svelte-xyvf5r"><span class="note-label svelte-xyvf5r">Session Notes</span> <!></div> <!></div> <!> <!> <div class="session-footer svelte-xyvf5r"><span> </span></div></div>'),Wi=v('<div><div class="card-header svelte-xyvf5r" role="button" tabindex="0"><div class="header-main svelte-xyvf5r"><div class="left-col svelte-xyvf5r"><span class="venue svelte-xyvf5r"> </span> <span class="date svelte-xyvf5r"> </span></div> <div class="right-col svelte-xyvf5r"><div class="badges svelte-xyvf5r"><span class="type-tag svelte-xyvf5r"> </span> <span class="result-tag svelte-xyvf5r"> </span></div></div></div> <div class="header-status svelte-xyvf5r"><span>‚óè</span> <button class="btn-icon delete-btn svelte-xyvf5r" title="Delete Session">üóëÔ∏è</button> <span class="chevron svelte-xyvf5r"> </span></div></div> <!></div>'),Hi=v('<div class="load-more-container svelte-xyvf5r"><button class="load-more-btn svelte-xyvf5r"> </button></div>'),Ji=v('<div class="timeline svelte-xyvf5r"><!> <!></div>'),Zi=v('<div class="view-content svelte-xyvf5r"><div class="header svelte-xyvf5r"><h3 class="svelte-xyvf5r">üèÜ Competition Log</h3> <button class="fetch-btn svelte-xyvf5r" title="Fetch data from cloud"><!></button></div> <!> <!></div>');function Ki(Ce,p){bt(p,!0);let r=y(ct([])),h=y(!0),T=y(ct(new Set)),D=y(20);const b=20;let C=y(!1),S=y(null);function B(d){l(S,d,!0),l(C,!0)}function se(){e(S)&&(ta(e(S)),l(S,null),l(C,!1),l(r,la().sort((d,_)=>new Date(_.date).getTime()-new Date(d.date).getTime()),!0))}async function ge(){l(h,!0),l(D,b),l(r,la().sort((d,_)=>new Date(_.date).getTime()-new Date(d.date).getTime()),!0);try{await ea();const d=await Sa();if(d.ok&&d.data){const _=d.data.map(n=>({...n,activityType:"competition",type:n.type,rounds:n.rounds.map(u=>({...u,climbs:u.climbs?.map(k=>({...k,status:k.status}))})),createdAt:n.createdAt||new Date().toISOString(),updatedAt:n.updatedAt||new Date().toISOString(),syncStatus:"synced"}));aa(_),l(r,la().sort((n,u)=>new Date(u.date).getTime()-new Date(n.date).getTime()),!0)}}catch(d){console.error("Failed to sync",d)}finally{l(h,!1)}}ge();function De(d){e(T).has(d)?e(T).delete(d):e(T).add(d),l(T,new Set(e(T)),!0)}function $(){l(D,e(D)+b)}function ee(d){if(!d.rounds||d.rounds.length===0)return"No rounds";const _=d.rounds[d.rounds.length-1];if(_.position)return`#${_.position} ${_.name}`;if(_.climbs){const n=_.climbs.filter(k=>k.status==="Top"||k.status==="Flash").length,u=_.climbs.filter(k=>k.status==="Zone").length;return`${d.rounds.length} Rnds ¬∑ Final: ${n}T ${u+n}Z`}return _.name}let G=y(ct(new Set)),ne=y(ct(new Map)),me=y(ct(new Set));function pe(d){e(ne).set(d.id,d.notes||""),l(ne,new Map(e(ne)),!0),e(G).add(d.id),l(G,new Set(e(G)),!0)}function M(d){e(G).delete(d),l(G,new Set(e(G)),!0),e(ne).delete(d),l(ne,new Map(e(ne)),!0)}function ve(d){return e(ne).get(d)||""}function he(d,_){e(ne).set(d,_),l(ne,new Map(e(ne)),!0)}async function Te(d){if(e(me).has(d.id))return;const _=e(ne).get(d.id);if(_===void 0)return;e(me).add(d.id),l(me,new Set(e(me)),!0),Ut(d.id,{notes:_});const n=e(r).find(u=>u.id===d.id);if(n&&(n.notes=_),Yt()){const u={date:d.date,venue:d.venue,customVenue:d.customVenue,type:d.type,fingerLoad:d.fingerLoad,shoulderLoad:d.shoulderLoad,forearmLoad:d.forearmLoad,rounds:d.rounds,notes:_};try{const k=await ka(d.id,u);k.ok?(Qt(d.id),n&&(n.syncStatus="synced")):(console.error("Failed to sync note update:",k.error),zt(d.id),n&&(n.syncStatus="error"))}catch(k){console.error("Exception syncing note update:",k),zt(d.id),n&&(n.syncStatus="error")}}e(G).delete(d.id),l(G,new Set(e(G)),!0),e(me).delete(d.id),l(me,new Set(e(me)),!0)}var te=Zi(),F=a(te),V=s(a(F),2);V.__click=ge;var N=a(V);{var U=d=>{var _=Li();At(),i(d,_)},X=d=>{var _=Nt("‚òÅÔ∏è Fetch Data");i(d,_)};c(N,d=>{e(h)?d(U):d(X,!1)})}t(V),t(F);var W=s(F,2);{var re=d=>{var _=zi();i(d,_)},ie=d=>{var _=Qe(),n=Me(_);{var u=I=>{var ae=Fi();i(I,ae)},k=I=>{var ae=Ji(),j=a(ae);ze(j,17,()=>e(r).slice(0,e(D)),Ee,(xe,f)=>{var E=Wi();let ue;var we=a(E);we.__click=()=>De(e(f).id),we.__keydown=Ge=>Ge.key==="Enter"&&De(e(f).id);var qe=a(we),le=a(qe),R=a(le),Y=a(R,!0);t(R);var Le=s(R,2),Fe=a(Le,!0);t(Le),t(le);var oe=s(le,2),de=a(oe),H=a(de),L=a(H,!0);t(H);var z=s(H,2),ye=a(z,!0);t(z),t(de),t(oe),t(qe);var ke=s(qe,2),A=a(ke);let O;var be=s(A,2);be.__click=Ge=>{Ge.stopPropagation(),B(e(f).id)};var Q=s(be,2),ce=a(Q,!0);t(Q),t(ke),t(we);var Ae=s(we,2);{var He=Ge=>{var Ie=Ui(),Je=a(Ie),st=a(Je),Dt=s(a(st),2);{var St=Oe=>{var je=Ei();je.__click=()=>pe(e(f)),i(Oe,je)};c(Dt,Oe=>{e(G).has(e(f).id)||Oe(St)})}t(st);var Tt=s(st,2);{var yt=Oe=>{var je=Gi(),Ke=a(je);$t(Ke),Ke.__input=ot=>he(e(f).id,ot.currentTarget.value);var Xe=s(Ke,2),et=a(Xe);et.__click=()=>M(e(f).id);var Be=s(et,2);Be.__click=()=>Te(e(f));var Ye=a(Be,!0);t(Be),t(Xe),t(je),g((ot,qt,We,xt)=>{fa(Ke,ot),et.disabled=qt,Be.disabled=We,o(Ye,xt)},[()=>ve(e(f).id),()=>e(me).has(e(f).id),()=>e(me).has(e(f).id),()=>e(me).has(e(f).id)?"Saving...":"Save"]),at(3,je,()=>lt,()=>({duration:150})),i(Oe,je)},kt=Oe=>{var je=Qe(),Ke=Me(je);{var Xe=Be=>{var Ye=Ni(),ot=a(Ye,!0);t(Ye),g(()=>o(ot,e(f).notes)),i(Be,Ye)},et=Be=>{var Ye=Ai();i(Be,Ye)};c(Ke,Be=>{e(f).notes?Be(Xe):Be(et,!1)})}i(Oe,je)};c(Tt,Oe=>{e(G).has(e(f).id)?Oe(yt):Oe(kt,!1)})}t(Je);var mt=s(Je,2);{var Re=Oe=>{var je=Bi();ze(je,21,()=>e(f).rounds||[],Ee,(Ke,Xe)=>{var et=Ri(),Be=a(et),Ye=a(Be),ot=a(Ye,!0);t(Ye);var qt=s(Ye,2);{var We=Ct=>{var wt=Oi(),It=a(wt);t(wt),g(()=>o(It,`#${e(Xe).position??""}`)),i(Ct,wt)};c(qt,Ct=>{e(Xe).position&&Ct(We)})}t(Be);var xt=s(Be,2);{var Pt=Ct=>{var wt=Ii();ze(wt,21,()=>e(Xe).climbs||[],Ee,(It,_t)=>{var Wt=Pi(),Ft=Me(Wt),Rt=a(Ft),Ot=a(Rt),Xt=a(Ot,!0);t(Ot);var Ht=s(Ot,2);{var Jt=w=>{var q=ji(),J=a(q);t(q),g(()=>o(J,`(${e(_t).attemptCount??""} tries)`)),i(w,q)};c(Ht,w=>{e(_t).attemptCount>1&&w(Jt)})}t(Rt);var jt=s(Rt,2),Mt=a(jt);let Bt;var P=a(Mt,!0);t(Mt),t(jt),t(Ft);var Z=s(Ft,2);{var m=w=>{var q=Mi(),J=a(q);t(q),g(()=>o(J,`"${e(_t).notes??""}"`)),i(w,q)};c(Z,w=>{e(_t).notes&&w(m)})}g(()=>{o(Xt,e(_t).name),Bt=pt(Mt,1,"status-badge svelte-xyvf5r",null,Bt,{top:e(_t).status==="Top"||e(_t).status==="Flash",zone:e(_t).status==="Zone"}),o(P,e(_t).status)}),i(It,Wt)}),t(wt),i(Ct,wt)};c(xt,Ct=>{e(Xe).climbs&&Ct(Pt)})}t(et),g(()=>o(ot,e(Xe).name)),i(Ke,et)}),t(je),i(Oe,je)};c(mt,Oe=>{e(f).rounds&&Oe(Re)})}var $e=s(mt,2);{var Ze=Oe=>{var je=Vi(),Ke=a(je),Xe=a(Ke);t(Ke),t(je),g(()=>o(Xe,`Detailed Load: Fingers ${e(f).fingerLoad??""}/5, Shoulders ${e(f).shoulderLoad??""}/5, Forearms ${e(f).forearmLoad??""}/5`)),i(Oe,je)};c($e,Oe=>{(e(f).fingerLoad||e(f).shoulderLoad)&&Oe(Ze)})}var nt=s($e,2),Ue=a(nt);let it;var vt=a(Ue,!0);t(Ue),t(nt),t(Ie),g(()=>{it=pt(Ue,1,"sync-status svelte-xyvf5r",null,it,{synced:e(f).syncStatus==="synced"}),o(vt,e(f).syncStatus==="synced"?"‚úì Synced":"‚òÅ Local")}),at(3,Ie,()=>lt,()=>({duration:150})),i(Ge,Ie)};c(Ae,Ge=>{e(T).has(e(f).id)&&Ge(He)})}t(E),g((Ge,Ie,Je,st)=>{ue=pt(E,1,"session-card svelte-xyvf5r",null,ue,Ge),o(Y,e(f).customVenue||e(f).venue),o(Fe,Ie),o(L,e(f).type),o(ye,Je),O=pt(A,1,"sync-dot",null,O,{synced:e(f).syncStatus==="synced"}),rt(A,"title",e(f).syncStatus==="synced"?"Synced":"Local"),o(ce,st)},[()=>({expanded:e(T).has(e(f).id)}),()=>new Date(e(f).date).toLocaleDateString(void 0,{weekday:"short",day:"numeric",month:"short"}),()=>ee(e(f)),()=>e(T).has(e(f).id)?"‚ñ≤":"‚ñº"]),i(xe,E)});var Se=s(j,2);{var _e=xe=>{var f=Hi(),E=a(f);E.__click=$;var ue=a(E);t(E),t(f),g(()=>o(ue,`Load More (${e(r).length-e(D)} remaining)`)),i(xe,f)};c(Se,xe=>{e(D)<e(r).length&&xe(_e)})}t(ae),i(I,ae)};c(n,I=>{e(r).length===0?I(u):I(k,!1)},!0)}i(d,_)};c(W,d=>{e(h)&&e(r).length===0?d(re):d(ie,!1)})}var x=s(W,2);Kt(x,{get isOpen(){return e(C)},title:"Delete Competition",message:"Are you sure you want to delete this competition session? This action cannot be undone.",onConfirm:se,onCancel:()=>l(C,!1)}),t(te),g(()=>V.disabled=e(h)),i(Ce,te),ht()}gt(["click","keydown","input"]);var Xi=v('<button class="backdrop svelte-108px9u" aria-label="Close settings"></button> <div class="settings-modal svelte-108px9u" role="dialog" aria-modal="true"><div class="settings-header svelte-108px9u"><h3 class="svelte-108px9u">Settings</h3> <button class="close-btn svelte-108px9u">‚úï</button></div> <div class="settings-content"><div class="setting-item svelte-108px9u"><div class="setting-info svelte-108px9u"><span class="setting-label svelte-108px9u">Local Data</span> <span class="setting-desc svelte-108px9u">Clear all cached data on this device</span></div> <button class="btn-clear-cache svelte-108px9u">Clear Cache</button></div></div></div>',1),Yi=v("<option> </option>"),Qi=v('<div class="view-container svelte-108px9u"><!></div>'),$i=v('<div class="page svelte-108px9u"><div class="page-header svelte-108px9u"><div><h1 class="svelte-108px9u">üìä View Data</h1> <p class="subtitle svelte-108px9u">Browse your training history</p></div> <button class="settings-btn svelte-108px9u" aria-label="Settings">‚öôÔ∏è</button></div> <!> <!> <div class="content-card svelte-108px9u"><div class="form-group svelte-108px9u"><label for="activity-type" class="svelte-108px9u">Activity Type</label> <select id="activity-type" class="svelte-108px9u"><option disabled>Select an activity...</option><!></select></div> <!></div></div>');function ol(Ce,p){bt(p,!0);const r=[{value:"indoor_climb",label:"Indoor Climb",icon:"üßó"},{value:"outdoor_climb",label:"Outdoor Climb",icon:"‚õ∞Ô∏è"},{value:"gym_session",label:"Gym Session",icon:"üèãÔ∏è"},{value:"fingerboarding",label:"Fingerboarding",icon:"ü§è"},{value:"competition",label:"Competition",icon:"üèÜ"}];let h=y(""),T=y(!1),D=y(!1);function b(){l(T,!0)}function C(){l(T,!1)}function S(){l(T,!1),l(D,!0)}function B(){qa()}var se=$i(),ge=a(se),De=s(a(ge),2);De.__click=b,t(ge);var $=s(ge,2);{var ee=te=>{var F=Xi(),V=Me(F);V.__click=C;var N=s(V,2),U=a(N),X=s(a(U),2);X.__click=C,t(U);var W=s(U,2),re=a(W),ie=s(a(re),2);ie.__click=S,t(re),t(W),t(N),at(3,V,()=>Da,()=>({duration:200})),at(3,N,()=>Ta,()=>({duration:200,start:.9})),i(te,F)};c($,te=>{e(T)&&te(ee)})}var G=s($,2);Kt(G,{get isOpen(){return e(D)},title:"Clear all local data?",message:"Are you sure you want to clear all locally cached data? This will remove all sessions stored on this device. Data already synced to the cloud will be preserved.",confirmKeyword:"clear",onConfirm:B,onCancel:()=>l(D,!1)});var ne=s(G,2),me=a(ne),pe=s(a(me),2),M=a(pe);M.value=M.__value="";var ve=s(M);ze(ve,17,()=>r,te=>te.value,(te,F)=>{var V=Yi(),N=a(V);t(V);var U={};g(()=>{o(N,`${e(F).icon??""} ${e(F).label??""}`),U!==(U=e(F).value)&&(V.value=(V.__value=e(F).value)??"")}),i(te,V)}),t(pe),t(me);var he=s(me,2);{var Te=te=>{var F=Qi(),V=a(F);{var N=X=>{As(X,{})},U=X=>{var W=Qe(),re=Me(W);{var ie=d=>{Br(d,{})},x=d=>{var _=Qe(),n=Me(_);{var u=I=>{gi(I,{})},k=I=>{var ae=Qe(),j=Me(ae);{var Se=xe=>{Ci(xe,{})},_e=xe=>{var f=Qe(),E=Me(f);{var ue=we=>{Ki(we,{})};c(E,we=>{e(h)==="competition"&&we(ue)},!0)}i(xe,f)};c(j,xe=>{e(h)==="fingerboarding"?xe(Se):xe(_e,!1)},!0)}i(I,ae)};c(n,I=>{e(h)==="gym_session"?I(u):I(k,!1)},!0)}i(d,_)};c(re,d=>{e(h)==="outdoor_climb"?d(ie):d(x,!1)},!0)}i(X,W)};c(V,X=>{e(h)==="indoor_climb"?X(N):X(U,!1)})}t(F),i(te,F)};c(he,te=>{e(h)&&te(Te)})}t(ne),t(se),Lt(pe,()=>e(h),te=>l(h,te)),i(Ce,se),ht()}gt(["click"]);export{ol as component};
