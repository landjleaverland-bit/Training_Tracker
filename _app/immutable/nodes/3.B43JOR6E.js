import{f as n,a as i,c as nt,t as Ae}from"../chunks/CKcnA5P_.js";import{w as Da,p as vt,c as l,r as t,s,j as e,t as D,a as ct,f as at,aV as _,E as De,aG as ze,F as a,aW as Dt,b0 as Fa,d as Oa,b1 as oa,k as Le,e as ge,b2 as ja,ac as $e,o as za,b3 as Aa,b4 as pa,b5 as qa,b6 as Ia,D as Ga,b7 as Ra}from"../chunks/4c6jdw0Z.js";import{d as Jt,s as J,e as X}from"../chunks/K94srNfd.js";import{i as V}from"../chunks/CK8hGvwc.js";import{e as pe,i as fe,r as L,b as M,c as Ea,s as tt,d as Va}from"../chunks/BVSa1UsB.js";import{s as We}from"../chunks/9PGhKrW6.js";import{i as Ca,s as Ta,c as Ye,d as Ba,u as ma,m as ga,b as ba,e as Ma,f as Pa,h as $a,j as Wa}from"../chunks/BqWccOr6.js";import{i as na,c as Ua,g as Ha,a as Ka,b as Ja,t as ra,f as fa,E as wa,d as Qa,D as Xa,e as Ya,h as Za,j as es,s as ts}from"../chunks/9PYLJcFu.js";import{p as st}from"../chunks/CfB7tKQ8.js";import{i as Qt}from"../chunks/DMFvxL8W.js";import{b as as}from"../chunks/DBBH7WGn.js";function _a(_e){return function(...E){var v=E[0];return v.stopPropagation(),_e?.apply(this,E)}}function It(_e,E){var v=_e.$$events?.[E.type],I=Da(v)?v.slice():v==null?[]:[v];for(var T of I)T.call(this,E)}var ss=n('<span class="placeholder svelte-1g8x5ph"> </span>'),ls=n('<span class="chip-display"> </span>'),is=n('<button type="button"> </button>'),rs=n('<div class="multi-select-container svelte-1g8x5ph"><div class="chips svelte-1g8x5ph"><!></div> <div class="options-grid svelte-1g8x5ph"></div></div>');function Ct(_e,E){vt(E,!0);let v=st(E,"selected",19,()=>[]),I=st(E,"placeholder",3,"Select options...");function T(h){let j=[...v()];h==="None"?j.includes("None")?j=[]:j=["None"]:(j=j.filter(O=>O!=="None"),j.includes(h)?j=j.filter(O=>O!==h):j.push(h)),E.onChange(j)}var p=rs(),c=l(p),P=l(c);{var K=h=>{var j=ss(),O=l(j,!0);t(j),D(()=>J(O,I())),i(h,j)},le=h=>{var j=nt(),O=at(j);pe(O,17,v,fe,(g,y)=>{var m=ls(),F=l(m,!0);t(m),D(()=>J(F,e(y))),i(g,m)}),i(h,j)};V(P,h=>{v().length===0?h(K):h(le,!1)})}t(c);var B=s(c,2);pe(B,21,()=>E.options,fe,(h,j)=>{var O=is();O.__click=()=>T(e(j));var g=l(O,!0);t(O),D(y=>{We(O,1,`option-chip ${y??""}`,"svelte-1g8x5ph"),J(g,e(j))},[()=>v().includes(e(j))?"selected":""]),i(h,O)}),t(B),t(p),i(_e,p),ct()}Jt(["click"]);var os=n('<div class="input-with-action svelte-1lf3qka"><input type="text" id="location-manual" placeholder="Enter custom location..." class="flat-left svelte-1lf3qka"/> <button type="button" class="action-btn flat-right svelte-1lf3qka" title="Back to list">‚úï</button></div>'),ns=n("<option> </option>"),vs=n('<select id="location" class="svelte-1lf3qka"><option disabled>Select location...</option><!></select>'),cs=n("<option> </option>"),ds=n("<option> </option>"),us=n('<th class="svelte-1lf3qka">Sport?</th>'),ps=n('<td class="center svelte-1lf3qka"><input type="checkbox" class="svelte-1lf3qka"/></td>'),fs=n('<span class="grade-error svelte-1lf3qka">Invalid</span>'),_s=n("<option> </option>"),ms=n('<button type="button" class="remove-btn svelte-1lf3qka">‚úï</button>'),gs=n('<tr><!><td class="svelte-1lf3qka"><input type="text" placeholder="Route name..." class="svelte-1lf3qka"/></td><td class="svelte-1lf3qka"><input type="text" placeholder="V3"/> <!></td><td class="svelte-1lf3qka"><select class="svelte-1lf3qka"></select></td><td class="svelte-1lf3qka"><input type="number" min="1" class="svelte-1lf3qka"/></td><td><textarea placeholder="Notes..." class="svelte-1lf3qka"></textarea></td><td class="center svelte-1lf3qka"><!></td></tr>'),bs=n("<div> </div>"),hs=n('<div class="form-content svelte-1lf3qka"><h3 class="svelte-1lf3qka">üßó Indoor Climb</h3> <div class="form-row svelte-1lf3qka"><div class="form-group svelte-1lf3qka"><label for="date" class="svelte-1lf3qka">Date</label> <input type="date" id="date" class="svelte-1lf3qka"/></div> <div class="form-group svelte-1lf3qka"><label for="location" class="svelte-1lf3qka">Location</label> <!></div></div> <div class="form-group svelte-1lf3qka"><label for="climbing-type" class="svelte-1lf3qka">Climbing Type</label> <select id="climbing-type" class="svelte-1lf3qka"><option disabled>Select type...</option><!></select></div> <div class="load-section svelte-1lf3qka"><h4 class="svelte-1lf3qka">Load Metrics</h4> <div class="load-metrics svelte-1lf3qka"><div class="load-item svelte-1lf3qka"><label for="finger-load" class="svelte-1lf3qka">Finger</label> <input type="number" id="finger-load" min="1" max="5" class="svelte-1lf3qka"/> <span class="load-scale svelte-1lf3qka">/ 5</span></div> <div class="load-item svelte-1lf3qka"><label for="shoulder-load" class="svelte-1lf3qka">Shoulder</label> <input type="number" id="shoulder-load" min="1" max="5" class="svelte-1lf3qka"/> <span class="load-scale svelte-1lf3qka">/ 5</span></div> <div class="load-item svelte-1lf3qka"><label for="forearm-load" class="svelte-1lf3qka">Forearm</label> <input type="number" id="forearm-load" min="1" max="5" class="svelte-1lf3qka"/> <span class="load-scale svelte-1lf3qka">/ 5</span></div></div> <h4 class="mt-4 svelte-1lf3qka">Grip Metrics</h4> <div class="load-metrics svelte-1lf3qka"><div class="load-item svelte-1lf3qka"><label for="open-grip" class="svelte-1lf3qka">Open</label> <input type="number" id="open-grip" min="1" max="5" class="svelte-1lf3qka"/> <span class="load-scale svelte-1lf3qka">/ 5</span></div> <div class="load-item svelte-1lf3qka"><label for="crimp-grip" class="svelte-1lf3qka">Crimp</label> <input type="number" id="crimp-grip" min="1" max="5" class="svelte-1lf3qka"/> <span class="load-scale svelte-1lf3qka">/ 5</span></div> <div class="load-item svelte-1lf3qka"><label for="pinch-grip" class="svelte-1lf3qka">Pinch</label> <input type="number" id="pinch-grip" min="1" max="5" class="svelte-1lf3qka"/> <span class="load-scale svelte-1lf3qka">/ 5</span></div> <div class="load-item svelte-1lf3qka"><label for="sloper-grip" class="svelte-1lf3qka">Sloper</label> <input type="number" id="sloper-grip" min="1" max="5" class="svelte-1lf3qka"/> <span class="load-scale svelte-1lf3qka">/ 5</span></div> <div class="load-item svelte-1lf3qka"><label for="jug-grip" class="svelte-1lf3qka">Jug</label> <input type="number" id="jug-grip" min="1" max="5" class="svelte-1lf3qka"/> <span class="load-scale svelte-1lf3qka">/ 5</span></div></div></div> <div class="training-section svelte-1lf3qka"><h4 class="svelte-1lf3qka">Training Details</h4> <div class="training-grid svelte-1lf3qka"><div class="training-item svelte-1lf3qka"><label for="training-type" class="svelte-1lf3qka">Training Type</label> <!></div> <div class="training-item svelte-1lf3qka"><label for="difficulty" class="svelte-1lf3qka">Difficulty</label> <select id="difficulty" class="svelte-1lf3qka"></select></div> <div class="training-item svelte-1lf3qka"><label for="category" class="svelte-1lf3qka">Category</label> <!></div> <div class="training-item svelte-1lf3qka"><label for="energy-system" class="svelte-1lf3qka">Energy System</label> <!></div> <div class="training-item svelte-1lf3qka"><label for="technique-focus" class="svelte-1lf3qka">Technique Focus</label> <!></div> <div class="training-item svelte-1lf3qka"><label for="wall-angle" class="svelte-1lf3qka">Wall</label> <!></div></div></div> <div class="climbs-section svelte-1lf3qka"><h4 class="svelte-1lf3qka">Climbs</h4> <div class="table-container svelte-1lf3qka"><table class="climbs-table svelte-1lf3qka"><thead><tr><!><th class="svelte-1lf3qka">Name</th><th class="svelte-1lf3qka">Grade</th><th class="svelte-1lf3qka">Attempt</th><th class="svelte-1lf3qka">#</th><th class="svelte-1lf3qka">Notes</th><th class="svelte-1lf3qka"></th></tr></thead><tbody></tbody></table></div> <button type="button" class="add-btn svelte-1lf3qka">+ Add Climb</button></div> <div class="submit-section svelte-1lf3qka"><!> <button type="button" class="submit-btn svelte-1lf3qka"><!></button></div></div>');function ys(_e,E){vt(E,!0);const v=["Rockstar Unit 3","Rockstar Unit 5","Rockstar Techno","Flashpoint Bristol","Redpoint Bristol","TCH Bristol","Other"],I=["Bouldering","Sport","Mixed"],T=["Onsight","Flash","Redpoint","Dogged","DNF"],p=["None","Projecting","Onsighting","Campusing","Repeaters"],c=["None","Easy","Medium","Hard","Max","Limit+"],P=["None","Strength","Strength-endurance","Power Endurance","Coordination","Slab Technique","Overhang technique","Warm-up","Power"],K=["None","Aerobic capacity","Aerobic lactic power","Anaerobic alactic capacity","Anaerobic alactic power","Anaerobic power","Anaerobic lactic capacity"],le=["None","Trusting feet","Double-clutch","Standing on volumes","Deadpointing","Flagging","Swapping feet","Edging","Smearing","Matching","Backstepping","Drop Knee","Stemming","Bridging","Laybacking","Mantling","Kneebar","Dyno","Pogo","Coordination Moves","Gastoning","Underclinging","Compressing","Heel Hook","Toe Hook","Bicycle"],B=["None","Overhang","Slab","Roof","Moon Board","Kilter Board","Beast","Circuit Board"],j=["V0-","4-","V0","4","V0+","4+","V1","5","V2","5+","V3","6A","V4","6B","V5","6C","V6","7A","V7","7A+","V8","7B","7B+","V9","7C","V10","7C+","V11","8A","V12","8A+","V13","8B","V14","8B+","V15","8C","V16","8C+","V17","9A"].map(o=>o.toLowerCase());let O=_(null),g=_(De(new Date().toISOString().split("T")[0])),y=_(""),m=_(""),F=_(De(["None"])),ve=_("None"),oe=_(De(["None"])),q=_(De(["None"])),$=_(De(["None"])),H=_(De(["None"])),Z=_(3),W=_(3),k=_(3),se=_(3),G=_(3),S=_(3),w=_(3),N=_(3),A=_(De([{isSport:!1,name:"",grade:"",attemptType:"Flash",attemptsNum:1,notes:""}])),Q=_(!1);function re(){e(y)==="Other"&&(a(Q,!0),a(y,""))}function ie(){a(Q,!1),a(y,"")}function ee(){a(A,[...e(A),{isSport:!1,name:"",grade:"",attemptType:"Flash",attemptsNum:1,notes:""}],!0)}function Se(o){a(A,e(A).filter((b,ae)=>ae!==o),!0)}function Ie(o,b){e(A)[o].attemptType=b,(b==="Flash"||b==="Onsight")&&(e(A)[o].attemptsNum=1)}function Ge(o){a(O,o,!0)}function Re(){a(O,null)}let de=Dt(()=>e(m)==="Mixed");function Ce(o){return e(m)==="Sport"?!0:e(m)==="Bouldering"?!1:o.isSport}function Ne(o){return o.trim()?j.includes(o.trim().toLowerCase()):!0}let f=_("idle"),x=_("");function U(){return e(y)?e(m)?e(A).filter(b=>b.grade.trim()&&!Ne(b.grade)).length>0?"Please fix invalid grades":null:"Please select a climbing type":"Please select a location"}async function te(){const o=U();if(o){a(f,"error"),a(x,o,!0);return}a(f,"saving");try{const b=e(A).map(me=>({...me,isSport:Ce(me)})),ae={date:e(g),location:e(y),customLocation:e(Q)?e(y):void 0,climbingType:e(m),trainingTypes:e(F),difficulty:e(ve),categories:e(oe),energySystems:e(q),techniqueFocuses:e($),wallAngles:e(H),fingerLoad:e(Z),shoulderLoad:e(W),forearmLoad:e(k),openGrip:e(se),crimpGrip:e(G),pinchGrip:e(S),sloperGrip:e(w),jugGrip:e(N),climbs:b},Oe=Ba(ae);if(na()){const me=await Ua(ae);me.ok?(ma(Oe.id,me.id),ga(me.id),a(f,"success"),a(x,"Session saved and synced!")):(ba(Oe.id),a(f,"success"),a(x,"Saved locally. Sync failed: "+(me.error||"Unknown error")))}else a(f,"success"),a(x,"Saved locally. Will sync when online.");window.dispatchEvent(new CustomEvent("session-saved")),setTimeout(()=>{be()},2e3)}catch(b){a(f,"error"),a(x,"Failed to save session"),console.error("Save error:",b)}}function be(){a(g,new Date().toISOString().split("T")[0],!0),a(y,""),a(Q,!1),a(m,""),a(F,["None"],!0),a(ve,"None"),a(oe,["None"],!0),a(q,["None"],!0),a($,["None"],!0),a(H,["None"],!0),a(Z,3),a(W,3),a(k,3),a(se,3),a(G,3),a(S,3),a(w,3),a(N,3),a(A,[{isSport:!1,name:"",grade:"",attemptType:"Flash",attemptsNum:1,notes:""}],!0),a(f,"idle"),a(x,"")}var ne=hs(),xe=s(l(ne),2),he=l(xe),Be=s(l(he),2);L(Be),t(he);var Ue=s(he,2),we=s(l(Ue),2);{var Fe=o=>{var b=os(),ae=l(b);L(ae);var Oe=s(ae,2);Oe.__click=ie,t(b),M(ae,()=>e(y),me=>a(y,me)),i(o,b)},d=o=>{var b=vs();b.__change=re;var ae=l(b);ae.value=ae.__value="";var Oe=s(ae);pe(Oe,17,()=>v,fe,(me,Qe)=>{var r=ns(),u=l(r,!0);t(r);var R={};D(()=>{J(u,e(Qe)),R!==(R=e(Qe))&&(r.value=(r.__value=e(Qe))??"")}),i(me,r)}),t(b),Ye(b,()=>e(y),me=>a(y,me)),i(o,b)};V(we,o=>{e(Q)?o(Fe):o(d,!1)})}t(Ue),t(xe);var C=s(xe,2),z=s(l(C),2),Y=l(z);Y.value=Y.__value="";var qe=s(Y);pe(qe,17,()=>I,fe,(o,b)=>{var ae=cs(),Oe=l(ae,!0);t(ae);var me={};D(()=>{J(Oe,e(b)),me!==(me=e(b))&&(ae.value=(ae.__value=e(b))??"")}),i(o,ae)}),t(z),t(C);var Ee=s(C,2),lt=s(l(Ee),2),yt=l(lt),Tt=s(l(yt),2);L(Tt),ze(2),t(yt);var pt=s(yt,2),ft=s(l(pt),2);L(ft),ze(2),t(pt);var kt=s(pt,2),Gt=s(l(kt),2);L(Gt),ze(2),t(kt),t(lt);var He=s(lt,4),Ve=l(He),St=s(l(Ve),2);L(St),ze(2),t(Ve);var _t=s(Ve,2),mt=s(l(_t),2);L(mt),ze(2),t(_t);var xt=s(_t,2),wt=s(l(xt),2);L(wt),ze(2),t(xt);var Ke=s(xt,2),Nt=s(l(Ke),2);L(Nt),ze(2),t(Ke);var gt=s(Ke,2),At=s(l(gt),2);L(At),ze(2),t(gt),t(He),t(Ee);var qt=s(Ee,2),Et=s(l(qt),2),dt=l(Et),Vt=s(l(dt),2);Ct(Vt,{get options(){return p},get selected(){return e(F)},placeholder:"Select types...",onChange:o=>a(F,o,!0)}),t(dt);var bt=s(dt,2),Ft=s(l(bt),2);pe(Ft,21,()=>c,fe,(o,b)=>{var ae=ds(),Oe=l(ae,!0);t(ae);var me={};D(()=>{J(Oe,e(b)),me!==(me=e(b))&&(ae.value=(ae.__value=e(b))??"")}),i(o,ae)}),t(Ft),t(bt);var Te=s(bt,2),Je=s(l(Te),2);Ct(Je,{get options(){return P},get selected(){return e(oe)},placeholder:"Select categories...",onChange:o=>a(oe,o,!0)}),t(Te);var Me=s(Te,2),Rt=s(l(Me),2);Ct(Rt,{get options(){return K},get selected(){return e(q)},placeholder:"Select systems...",onChange:o=>a(q,o,!0)}),t(Me);var ht=s(Me,2),ha=s(l(ht),2);Ct(ha,{get options(){return le},get selected(){return e($)},placeholder:"Select focus...",onChange:o=>a($,o,!0)}),t(ht);var Bt=s(ht,2),Xt=s(l(Bt),2);Ct(Xt,{get options(){return B},get selected(){return e(H)},placeholder:"Select angles...",onChange:o=>a(H,o,!0)}),t(Bt),t(Et),t(qt);var Lt=s(qt,2),Yt=s(l(Lt),2),Mt=l(Yt),Zt=l(Mt),ea=l(Zt),ya=l(ea);{var ta=o=>{var b=us();i(o,b)};V(ya,o=>{e(de)&&o(ta)})}ze(6),t(ea),t(Zt);var Pt=s(Zt);pe(Pt,21,()=>e(A),fe,(o,b,ae)=>{var Oe=gs(),me=l(Oe);{var Qe=ce=>{var Pe=ps(),et=l(Pe);L(et),t(Pe),Ea(et,()=>e(b).isSport,Kt=>e(b).isSport=Kt),i(ce,Pe)};V(me,ce=>{e(de)&&ce(Qe)})}var r=s(me),u=l(r);L(u),t(r);var R=s(r),ye=l(R);L(ye);let ue;var it=s(ye,2);{var ut=ce=>{var Pe=fs();i(ce,Pe)};V(it,ce=>{Ne(e(b).grade)||ce(ut)})}t(R);var Xe=s(R),je=l(Xe);je.__change=ce=>Ie(ae,ce.target.value),pe(je,21,()=>T,fe,(ce,Pe)=>{var et=_s(),Kt=l(et,!0);t(et);var ua={};D(()=>{J(Kt,e(Pe)),ua!==(ua=e(Pe))&&(et.value=(et.__value=e(Pe))??"")}),i(ce,et)}),t(je);var Ze;Ca(je),t(Xe);var Ot=s(Xe),jt=l(Ot);L(jt),t(Ot);var Ut=s(Ot);let Ht;var rt=l(Ut);Fa(rt),t(Ut);var sa=s(Ut),la=l(sa);{var ia=ce=>{var Pe=ms();Pe.__click=()=>Se(ae),i(ce,Pe)};V(la,ce=>{e(A).length>1&&ce(ia)})}t(sa),t(Oe),D(ce=>{ue=We(ye,1,"grade-input svelte-1lf3qka",null,ue,ce),Ze!==(Ze=e(b).attemptType)&&(je.value=(je.__value=e(b).attemptType)??"",Ta(je,e(b).attemptType)),jt.disabled=e(b).attemptType==="Flash",Ht=We(Ut,1,"notes-cell svelte-1lf3qka",null,Ht,{expanded:e(O)===ae})},[()=>({invalid:!Ne(e(b).grade)})]),M(u,()=>e(b).name,ce=>e(b).name=ce),M(ye,()=>e(b).grade,ce=>e(b).grade=ce),M(jt,()=>e(b).attemptsNum,ce=>e(b).attemptsNum=ce),X("focus",rt,()=>Ge(ae)),X("blur",rt,Re),M(rt,()=>e(b).notes,ce=>e(b).notes=ce),i(o,Oe)}),t(Pt),t(Mt),t(Yt);var va=s(Yt,2);va.__click=ee,t(Lt);var $t=s(Lt,2),aa=l($t);{var ka=o=>{var b=bs();let ae;var Oe=l(b,!0);t(b),D(()=>{ae=We(b,1,"save-message svelte-1lf3qka",null,ae,{success:e(f)==="success",error:e(f)==="error"}),J(Oe,e(x))}),i(o,b)};V(aa,o=>{e(x)&&o(ka)})}var Wt=s(aa,2);Wt.__click=te;var ca=l(Wt);{var Sa=o=>{var b=Ae("Saving...");i(o,b)},da=o=>{var b=nt(),ae=at(b);{var Oe=Qe=>{var r=Ae("‚úì Saved!");i(Qe,r)},me=Qe=>{var r=Ae("Save Session");i(Qe,r)};V(ae,Qe=>{e(f)==="success"?Qe(Oe):Qe(me,!1)},!0)}i(o,b)};V(ca,o=>{e(f)==="saving"?o(Sa):o(da,!1)})}t(Wt),t($t),t(ne),D(()=>Wt.disabled=e(f)==="saving"),M(Be,()=>e(g),o=>a(g,o)),Ye(z,()=>e(m),o=>a(m,o)),M(Tt,()=>e(Z),o=>a(Z,o)),M(ft,()=>e(W),o=>a(W,o)),M(Gt,()=>e(k),o=>a(k,o)),M(St,()=>e(se),o=>a(se,o)),M(mt,()=>e(G),o=>a(G,o)),M(wt,()=>e(S),o=>a(S,o)),M(Nt,()=>e(w),o=>a(w,o)),M(At,()=>e(N),o=>a(N,o)),Ye(Ft,()=>e(ve),o=>a(ve,o)),i(_e,ne),ct()}Jt(["click","change"]);var ks=n("<option> </option>"),Ss=n('<div class="input-with-action svelte-15o2ys1"><input type="text" id="crag-manual" placeholder="Enter custom crag name..." class="flat-left svelte-15o2ys1"/> <button type="button" class="action-btn flat-right svelte-15o2ys1" title="Back to list">‚úï</button></div>'),xs=n("<option> </option>"),ws=n("<option>Other (Manual Entry)</option>"),qs=n('<select id="crag" class="svelte-15o2ys1"><option disabled> </option><!><!></select>'),Cs=n("<option> </option>"),Ts=n("<option> </option>"),Ns=n('<th class="svelte-15o2ys1">Sport?</th>'),Fs=n('<td class="center svelte-15o2ys1"><input type="checkbox" class="svelte-15o2ys1"/></td>'),Os=n('<span class="grade-error svelte-15o2ys1">Invalid</span>'),js=n("<option> </option>"),zs=n('<button type="button" class="remove-btn svelte-15o2ys1">‚úï</button>'),As=n('<tr><!><td class="svelte-15o2ys1"><input type="text" placeholder="Route name..." class="svelte-15o2ys1"/></td><td class="svelte-15o2ys1"><input type="text" placeholder="V3"/> <!></td><td class="svelte-15o2ys1"><select class="svelte-15o2ys1"></select></td><td class="svelte-15o2ys1"><input type="number" min="1" class="svelte-15o2ys1"/></td><td><textarea placeholder="Notes..." class="svelte-15o2ys1"></textarea></td><td class="center svelte-15o2ys1"><!></td></tr>'),Es=n("<div> </div>"),Vs=n('<div class="form-content svelte-15o2ys1"><h3 class="svelte-15o2ys1">‚õ∞Ô∏è Outdoor Climb</h3> <div class="form-row svelte-15o2ys1"><div class="form-group svelte-15o2ys1"><label for="date" class="svelte-15o2ys1">Date</label> <input type="date" id="date" class="svelte-15o2ys1"/></div> <div class="form-group svelte-15o2ys1"><label for="area" class="svelte-15o2ys1">Area</label> <select id="area" class="svelte-15o2ys1"><option disabled>Select area...</option><!></select></div></div> <div class="form-row svelte-15o2ys1"><div class="form-group svelte-15o2ys1"><label for="crag" class="svelte-15o2ys1">Crag</label> <!></div> <div class="form-group svelte-15o2ys1"><label for="sector" class="svelte-15o2ys1">Wall / Sector</label> <input type="text" id="sector" placeholder="Enter sector or wall name..." class="svelte-15o2ys1"/></div></div> <div class="form-group svelte-15o2ys1"><label for="climbing-type" class="svelte-15o2ys1">Climbing Type</label> <select id="climbing-type" class="svelte-15o2ys1"><option disabled>Select type...</option><!></select></div> <div class="load-section svelte-15o2ys1"><h4 class="svelte-15o2ys1">Load Metrics</h4> <div class="load-metrics svelte-15o2ys1"><div class="load-item svelte-15o2ys1"><label for="finger-load" class="svelte-15o2ys1">Finger</label> <input type="number" id="finger-load" min="1" max="5" class="svelte-15o2ys1"/> <span class="load-scale svelte-15o2ys1">/ 5</span></div> <div class="load-item svelte-15o2ys1"><label for="shoulder-load" class="svelte-15o2ys1">Shoulder</label> <input type="number" id="shoulder-load" min="1" max="5" class="svelte-15o2ys1"/> <span class="load-scale svelte-15o2ys1">/ 5</span></div> <div class="load-item svelte-15o2ys1"><label for="forearm-load" class="svelte-15o2ys1">Forearm</label> <input type="number" id="forearm-load" min="1" max="5" class="svelte-15o2ys1"/> <span class="load-scale svelte-15o2ys1">/ 5</span></div></div> <h4 class="mt-4 svelte-15o2ys1">Grip Metrics</h4> <div class="load-metrics svelte-15o2ys1"><div class="load-item svelte-15o2ys1"><label for="open-grip" class="svelte-15o2ys1">Open</label> <input type="number" id="open-grip" min="1" max="5" class="svelte-15o2ys1"/> <span class="load-scale svelte-15o2ys1">/ 5</span></div> <div class="load-item svelte-15o2ys1"><label for="crimp-grip" class="svelte-15o2ys1">Crimp</label> <input type="number" id="crimp-grip" min="1" max="5" class="svelte-15o2ys1"/> <span class="load-scale svelte-15o2ys1">/ 5</span></div> <div class="load-item svelte-15o2ys1"><label for="pinch-grip" class="svelte-15o2ys1">Pinch</label> <input type="number" id="pinch-grip" min="1" max="5" class="svelte-15o2ys1"/> <span class="load-scale svelte-15o2ys1">/ 5</span></div> <div class="load-item svelte-15o2ys1"><label for="sloper-grip" class="svelte-15o2ys1">Sloper</label> <input type="number" id="sloper-grip" min="1" max="5" class="svelte-15o2ys1"/> <span class="load-scale svelte-15o2ys1">/ 5</span></div> <div class="load-item svelte-15o2ys1"><label for="jug-grip" class="svelte-15o2ys1">Jug</label> <input type="number" id="jug-grip" min="1" max="5" class="svelte-15o2ys1"/> <span class="load-scale svelte-15o2ys1">/ 5</span></div></div></div> <div class="training-section svelte-15o2ys1"><h4 class="svelte-15o2ys1">Training Details</h4> <div class="training-grid svelte-15o2ys1"><div class="training-item svelte-15o2ys1"><label for="training-type" class="svelte-15o2ys1">Training Type</label> <!></div> <div class="training-item svelte-15o2ys1"><label for="difficulty" class="svelte-15o2ys1">Difficulty</label> <select id="difficulty" class="svelte-15o2ys1"></select></div> <div class="training-item svelte-15o2ys1"><label for="category" class="svelte-15o2ys1">Category</label> <!></div> <div class="training-item svelte-15o2ys1"><label for="energy-system" class="svelte-15o2ys1">Energy System</label> <!></div> <div class="training-item svelte-15o2ys1"><label for="technique-focus" class="svelte-15o2ys1">Technique Focus</label> <!></div></div></div> <div class="climbs-section svelte-15o2ys1"><h4 class="svelte-15o2ys1">Climbs</h4> <div class="table-container svelte-15o2ys1"><table class="climbs-table svelte-15o2ys1"><thead><tr><!><th class="svelte-15o2ys1">Name</th><th class="svelte-15o2ys1">Grade</th><th class="svelte-15o2ys1">Attempt</th><th class="svelte-15o2ys1">#</th><th class="svelte-15o2ys1">Notes</th><th class="svelte-15o2ys1"></th></tr></thead><tbody></tbody></table></div> <button type="button" class="add-btn svelte-15o2ys1">+ Add Climb</button></div> <div class="submit-section svelte-15o2ys1"><!> <button type="button" class="submit-btn svelte-15o2ys1"><!></button></div></div>');function Ls(_e,E){vt(E,!0);const v=Ha(),I=["Boulder","Sport","Trad"],T=["Onsight","Flash","Redpoint","Dogged","DNF"],p=["None","Projecting","Onsighting","Campusing","Repeaters"],c=["None","Easy","Medium","Hard","Max","Limit+"],P=["None","Technique","Strength","Strength-endurance","Warm-up","Power"],K=["None","Aerobic capacity","Aerobic lactic power","Anaerobic alactic capacity","Anaerobic alactic power","Anaerobic power","Anaerobic lactic capacity"],le=["None","Double-clutch","Standing on volumes","Trusting feet"],h=["V0-","4-","V0","4","V0+","4+","V1","5","V2","5+","V3","6A","V4","6B","V5","6C","V6","7A","V7","7A+","V8","7B","7B+","V9","7C","V10","7C+","V11","8A","V12","8A+","V13","8B","V14","8B+","V15","8C","V16","8C+","V17","9A"].map(r=>r.toLowerCase());let j=_(null),O=_(De(new Date().toISOString().split("T")[0])),g=_(""),y=_(""),m=_(""),F=_(""),ve=_(De(["None"])),oe=_("None"),q=_(De(["None"])),$=_(De(["None"])),H=_(De(["None"])),Z=_(3),W=_(3),k=_(3),se=_(3),G=_(3),S=_(3),w=_(3),N=_(3),A=_(De([{isSport:!1,name:"",grade:"",attemptType:"Flash",attemptsNum:1,notes:""}])),Q=Dt(()=>e(g)?Ja(e(g)):[]),re=_(!1);Oa(()=>{e(g)&&(a(y,""),a(re,!1))});function ie(){e(y)==="Other"&&(a(re,!0),a(y,""))}function ee(){a(re,!1),a(y,"")}function Se(){a(A,[...e(A),{isSport:!1,name:"",grade:"",attemptType:"Flash",attemptsNum:1,notes:""}],!0)}function Ie(r){a(A,e(A).filter((u,R)=>R!==r),!0)}function Ge(r,u){e(A)[r].attemptType=u,(u==="Flash"||u==="Onsight")&&(e(A)[r].attemptsNum=1)}function Re(r){a(j,r,!0)}function de(){a(j,null)}let Ce=Dt(()=>e(F)==="Trad");function Ne(r){return e(F)==="Sport"?!0:e(F)==="Boulder"?!1:r.isSport}function f(r){return r.trim()?h.includes(r.trim().toLowerCase()):!0}let x=_("idle"),U=_("");function te(){return e(g)?e(y)?e(F)?e(A).filter(u=>u.grade.trim()&&!f(u.grade)).length>0?"Please fix invalid grades":null:"Please select a climbing type":"Please select a crag":"Please select an area"}async function be(){const r=te();if(r){a(x,"error"),a(U,r,!0);return}a(x,"saving");try{const u=e(A).map(ue=>({...ue,isSport:Ne(ue)})),R={date:e(O),area:e(g),crag:e(y),sector:e(m)||void 0,climbingType:e(F),trainingTypes:e(ve),difficulty:e(oe),categories:e(q),energySystems:e($),techniqueFocuses:e(H),fingerLoad:e(Z),shoulderLoad:e(W),forearmLoad:e(k),openGrip:e(se),crimpGrip:e(G),pinchGrip:e(S),sloperGrip:e(w),jugGrip:e(N),climbs:u},ye=Ma(R);if(na()){const ue=await Ka(R);ue.ok?(ma(ye.id,ue.id),ga(ue.id),a(x,"success"),a(U,"Session saved and synced!")):(ba(ye.id),a(x,"success"),a(U,"Saved locally. Sync failed: "+(ue.error||"Unknown error")))}else a(x,"success"),a(U,"Saved locally. Will sync when online.");window.dispatchEvent(new CustomEvent("session-saved")),setTimeout(()=>{ne()},2e3)}catch(u){a(x,"error"),a(U,"Failed to save session"),console.error("Save error:",u)}}function ne(){a(O,new Date().toISOString().split("T")[0],!0),a(g,""),a(y,""),a(m,""),a(F,""),a(ve,["None"],!0),a(oe,"None"),a(q,["None"],!0),a($,["None"],!0),a(H,["None"],!0),a(Z,3),a(W,3),a(k,3),a(se,3),a(G,3),a(S,3),a(w,3),a(N,3),a(A,[{isSport:!1,name:"",grade:"",attemptType:"Flash",attemptsNum:1,notes:""}],!0),a(x,"idle"),a(U,"")}var xe=Vs(),he=s(l(xe),2),Be=l(he),Ue=s(l(Be),2);L(Ue),t(Be);var we=s(Be,2),Fe=s(l(we),2),d=l(Fe);d.value=d.__value="";var C=s(d);pe(C,17,()=>v,fe,(r,u)=>{var R=ks(),ye=l(R,!0);t(R);var ue={};D(()=>{J(ye,e(u)),ue!==(ue=e(u))&&(R.value=(R.__value=e(u))??"")}),i(r,R)}),t(Fe),t(we),t(he);var z=s(he,2),Y=l(z),qe=s(l(Y),2);{var Ee=r=>{var u=Ss(),R=l(u);L(R);var ye=s(R,2);ye.__click=ee,t(u),M(R,()=>e(y),ue=>a(y,ue)),i(r,u)},lt=r=>{var u=qs();u.__change=ie;var R=l(u),ye=l(R,!0);t(R),R.value=R.__value="";var ue=s(R);pe(ue,17,()=>e(Q),fe,(Xe,je)=>{var Ze=xs(),Ot=l(Ze,!0);t(Ze);var jt={};D(()=>{J(Ot,e(je)),jt!==(jt=e(je))&&(Ze.value=(Ze.__value=e(je))??"")}),i(Xe,Ze)});var it=s(ue);{var ut=Xe=>{var je=ws();je.value=je.__value="Other",i(Xe,je)};V(it,Xe=>{e(g)&&Xe(ut)})}t(u),D(()=>{u.disabled=!e(g),J(ye,e(g)?"Select crag...":"Select area first...")}),Ye(u,()=>e(y),Xe=>a(y,Xe)),i(r,u)};V(qe,r=>{e(re)?r(Ee):r(lt,!1)})}t(Y);var yt=s(Y,2),Tt=s(l(yt),2);L(Tt),t(yt),t(z);var pt=s(z,2),ft=s(l(pt),2),kt=l(ft);kt.value=kt.__value="";var Gt=s(kt);pe(Gt,17,()=>I,fe,(r,u)=>{var R=Cs(),ye=l(R,!0);t(R);var ue={};D(()=>{J(ye,e(u)),ue!==(ue=e(u))&&(R.value=(R.__value=e(u))??"")}),i(r,R)}),t(ft),t(pt);var He=s(pt,2),Ve=s(l(He),2),St=l(Ve),_t=s(l(St),2);L(_t),ze(2),t(St);var mt=s(St,2),xt=s(l(mt),2);L(xt),ze(2),t(mt);var wt=s(mt,2),Ke=s(l(wt),2);L(Ke),ze(2),t(wt),t(Ve);var Nt=s(Ve,4),gt=l(Nt),At=s(l(gt),2);L(At),ze(2),t(gt);var qt=s(gt,2),Et=s(l(qt),2);L(Et),ze(2),t(qt);var dt=s(qt,2),Vt=s(l(dt),2);L(Vt),ze(2),t(dt);var bt=s(dt,2),Ft=s(l(bt),2);L(Ft),ze(2),t(bt);var Te=s(bt,2),Je=s(l(Te),2);L(Je),ze(2),t(Te),t(Nt),t(He);var Me=s(He,2),Rt=s(l(Me),2),ht=l(Rt),ha=s(l(ht),2);Ct(ha,{get options(){return p},get selected(){return e(ve)},placeholder:"Select types...",onChange:r=>a(ve,r,!0)}),t(ht);var Bt=s(ht,2),Xt=s(l(Bt),2);pe(Xt,21,()=>c,fe,(r,u)=>{var R=Ts(),ye=l(R,!0);t(R);var ue={};D(()=>{J(ye,e(u)),ue!==(ue=e(u))&&(R.value=(R.__value=e(u))??"")}),i(r,R)}),t(Xt),t(Bt);var Lt=s(Bt,2),Yt=s(l(Lt),2);Ct(Yt,{get options(){return P},get selected(){return e(q)},placeholder:"Select categories...",onChange:r=>a(q,r,!0)}),t(Lt);var Mt=s(Lt,2),Zt=s(l(Mt),2);Ct(Zt,{get options(){return K},get selected(){return e($)},placeholder:"Select systems...",onChange:r=>a($,r,!0)}),t(Mt);var ea=s(Mt,2),ya=s(l(ea),2);Ct(ya,{get options(){return le},get selected(){return e(H)},placeholder:"Select focus...",onChange:r=>a(H,r,!0)}),t(ea),t(Rt),t(Me);var ta=s(Me,2),Pt=s(l(ta),2),va=l(Pt),$t=l(va),aa=l($t),ka=l(aa);{var Wt=r=>{var u=Ns();i(r,u)};V(ka,r=>{e(Ce)&&r(Wt)})}ze(6),t(aa),t($t);var ca=s($t);pe(ca,21,()=>e(A),fe,(r,u,R)=>{var ye=As(),ue=l(ye);{var it=ke=>{var ot=Fs(),zt=l(ot);L(zt),t(ot),Ea(zt,()=>e(u).isSport,xa=>e(u).isSport=xa),i(ke,ot)};V(ue,ke=>{e(Ce)&&ke(it)})}var ut=s(ue),Xe=l(ut);L(Xe),t(ut);var je=s(ut),Ze=l(je);L(Ze);let Ot;var jt=s(Ze,2);{var Ut=ke=>{var ot=Os();i(ke,ot)};V(jt,ke=>{f(e(u).grade)||ke(Ut)})}t(je);var Ht=s(je),rt=l(Ht);rt.__change=ke=>Ge(R,ke.target.value),pe(rt,21,()=>T,fe,(ke,ot)=>{var zt=js(),xa=l(zt,!0);t(zt);var Na={};D(()=>{J(xa,e(ot)),Na!==(Na=e(ot))&&(zt.value=(zt.__value=e(ot))??"")}),i(ke,zt)}),t(rt);var sa;Ca(rt),t(Ht);var la=s(Ht),ia=l(la);L(ia),t(la);var ce=s(la);let Pe;var et=l(ce);Fa(et),t(ce);var Kt=s(ce),ua=l(Kt);{var La=ke=>{var ot=zs();ot.__click=()=>Ie(R),i(ke,ot)};V(ua,ke=>{e(A).length>1&&ke(La)})}t(Kt),t(ye),D(ke=>{Ot=We(Ze,1,"grade-input svelte-15o2ys1",null,Ot,ke),sa!==(sa=e(u).attemptType)&&(rt.value=(rt.__value=e(u).attemptType)??"",Ta(rt,e(u).attemptType)),ia.disabled=e(u).attemptType==="Flash",Pe=We(ce,1,"notes-cell svelte-15o2ys1",null,Pe,{expanded:e(j)===R})},[()=>({invalid:!f(e(u).grade)})]),M(Xe,()=>e(u).name,ke=>e(u).name=ke),M(Ze,()=>e(u).grade,ke=>e(u).grade=ke),M(ia,()=>e(u).attemptsNum,ke=>e(u).attemptsNum=ke),X("focus",et,()=>Re(R)),X("blur",et,de),M(et,()=>e(u).notes,ke=>e(u).notes=ke),i(r,ye)}),t(ca),t(va),t(Pt);var Sa=s(Pt,2);Sa.__click=Se,t(ta);var da=s(ta,2),o=l(da);{var b=r=>{var u=Es();let R;var ye=l(u,!0);t(u),D(()=>{R=We(u,1,"save-message svelte-15o2ys1",null,R,{success:e(x)==="success",error:e(x)==="error"}),J(ye,e(U))}),i(r,u)};V(o,r=>{e(U)&&r(b)})}var ae=s(o,2);ae.__click=be;var Oe=l(ae);{var me=r=>{var u=Ae("Saving...");i(r,u)},Qe=r=>{var u=nt(),R=at(u);{var ye=it=>{var ut=Ae("‚úì Saved!");i(it,ut)},ue=it=>{var ut=Ae("Save Session");i(it,ut)};V(R,it=>{e(x)==="success"?it(ye):it(ue,!1)},!0)}i(r,u)};V(Oe,r=>{e(x)==="saving"?r(me):r(Qe,!1)})}t(ae),t(da),t(xe),D(()=>ae.disabled=e(x)==="saving"),M(Ue,()=>e(O),r=>a(O,r)),Ye(Fe,()=>e(g),r=>a(g,r)),M(Tt,()=>e(m),r=>a(m,r)),Ye(ft,()=>e(F),r=>a(F,r)),M(_t,()=>e(Z),r=>a(Z,r)),M(xt,()=>e(W),r=>a(W,r)),M(Ke,()=>e(k),r=>a(k,r)),M(At,()=>e(se),r=>a(se,r)),M(Et,()=>e(G),r=>a(G,r)),M(Vt,()=>e(S),r=>a(S,r)),M(Ft,()=>e(w),r=>a(w,r)),M(Je,()=>e(N),r=>a(N,r)),Ye(Xt,()=>e(oe),r=>a(oe,r)),i(_e,xe),ct()}Jt(["click","change"]);var Ds=n('<div><div class="col set-num svelte-ow8x7m"> </div> <div class="col prev svelte-ow8x7m"><!></div> <div class="col weight svelte-ow8x7m"><input type="number" class="svelte-ow8x7m"/></div> <div class="col reps svelte-ow8x7m"><input type="number" class="svelte-ow8x7m"/></div> <div class="col check svelte-ow8x7m"><button><!></button></div></div>');function Is(_e,E){vt(E,!1);let v=st(E,"setNumber",8),I=st(E,"prevSet",8,null),T=st(E,"set",12);const p=oa();function c(){T(T().completed=!T().completed,!0),p("change",T()),T().completed&&p("complete")}function P(k){p("focus",{field:k,value:T()[k],set:T()})}Qt();var K=Ds();let le;var B=l(K),h=l(B,!0);t(B);var j=s(B,2),O=l(j);{var g=k=>{var se=Ae();D(()=>J(se,`${Le(I()),ge(()=>I().weight)??""}kg x ${Le(I()),ge(()=>I().reps)??""}`)),i(k,se)},y=k=>{var se=Ae("-");i(k,se)};V(O,k=>{I()?k(g):k(y,!1)})}t(j);var m=s(j,2),F=l(m);L(F),t(m);var ve=s(m,2),oe=l(ve);L(oe),t(ve);var q=s(ve,2),$=l(q);let H;var Z=l($);{var W=k=>{var se=Ae("‚úì");i(k,se)};V(Z,k=>{Le(T()),ge(()=>T().completed)&&k(W)})}t($),t(q),t(K),D((k,se)=>{le=We(K,1,"set-row svelte-ow8x7m",null,le,{completed:T().completed}),J(h,v()),tt(F,"placeholder",k),tt(oe,"placeholder",se),H=We($,1,"check-btn svelte-ow8x7m",null,H,{checked:T().completed})},[()=>(Le(I()),ge(()=>I()?I().weight.toString():"-")),()=>(Le(I()),ge(()=>I()?I().reps.toString():"-"))]),M(F,()=>T().weight,k=>T(T().weight=k,!0)),X("focus",F,()=>P("weight")),M(oe,()=>T().reps,k=>T(T().reps=k,!0)),X("focus",oe,()=>P("reps")),X("click",$,c),i(_e,K),ct()}var Gs=n('<div class="exercise-card svelte-1ni79z8"><div class="header svelte-1ni79z8"><div class="title-group svelte-1ni79z8"><button class="icon-btn info-btn svelte-1ni79z8" aria-label="Exercise Info"><div class="info-icon svelte-1ni79z8">?</div></button> <h4 class="svelte-1ni79z8"> </h4></div> <button class="icon-btn delete-btn svelte-1ni79z8" aria-label="Delete Exercise">üóëÔ∏è</button></div> <div class="table-header svelte-1ni79z8"><div class="col">Set</div> <div class="col">Previous</div> <div class="col">kg</div> <div class="col">Reps</div> <div class="col">‚úì</div></div> <div class="sets"></div> <button class="add-set-btn svelte-1ni79z8">+ Add Set</button></div>');function Rs(_e,E){vt(E,!1);let v=st(E,"exercise",12);const I=oa();function T(){const g=v().sets[v().sets.length-1],y={weight:g?g.weight:0,reps:g?g.reps:0,isWarmup:!1,isFailure:!1,isDropSet:!1,completed:!1};v(v().sets=[...v().sets,y],!0)}Qt();var p=Gs(),c=l(p),P=l(c),K=l(P),le=s(K,2),B=l(le,!0);t(le),t(P);var h=s(P,2);t(c);var j=s(c,4);pe(j,5,()=>(Le(v()),ge(()=>v().sets)),fe,(g,y,m)=>{Is(g,{setNumber:m+1,get set(){return(Le(v()),ge(()=>v().sets))[m]},set set(F){(Le(v()),ge(()=>v().sets))[m]=F,ja(()=>v())},$$events:{complete(F){It.call(this,E,F)},focus(F){It.call(this,E,F)},change(F){It.call(this,E,F)}},$$legacy:!0})}),t(j);var O=s(j,2);t(p),D(()=>J(B,(Le(v()),ge(()=>v().name)))),X("click",K,()=>I("info",v())),X("click",h,()=>I("delete",v())),X("click",O,T),i(_e,p),ct()}var Bs=n('<div class="keypad svelte-1fay4f8"><div class="header svelte-1fay4f8"><span class="label svelte-1fay4f8"> </span> <div class="display svelte-1fay4f8" role="textbox" aria-readonly="true"> </div></div> <div class="quick-adds svelte-1fay4f8"><button class="svelte-1fay4f8">+2.5</button> <button class="svelte-1fay4f8">+5</button> <button class="svelte-1fay4f8">+10</button></div> <div class="grid svelte-1fay4f8"><button class="svelte-1fay4f8">1</button> <button class="svelte-1fay4f8">2</button> <button class="svelte-1fay4f8">3</button> <button class="svelte-1fay4f8">4</button> <button class="svelte-1fay4f8">5</button> <button class="svelte-1fay4f8">6</button> <button class="svelte-1fay4f8">7</button> <button class="svelte-1fay4f8">8</button> <button class="svelte-1fay4f8">9</button> <button class="action svelte-1fay4f8">C</button> <button class="svelte-1fay4f8">0</button> <button class="action svelte-1fay4f8">‚å´</button></div></div>');function Ms(_e,E){vt(E,!1);let v=st(E,"value",8,null),I=st(E,"label",8,"Value");const T=oa();function p(Q){const re=v()?.toString()||"";if(re.length>=5)return;const ie=parseFloat(re+Q.toString());T("change",ie)}function c(){T("change",0)}function P(){const Q=v()?.toString()||"";if(Q.length<=1){T("change",0);return}const re=parseFloat(Q.slice(0,-1));T("change",re)}function K(Q){T("change",(v()||0)+Q)}Qt();var le=Bs(),B=l(le),h=l(B),j=l(h,!0);t(h);var O=s(h,2),g=l(O,!0);t(O),t(B);var y=s(B,2),m=l(y),F=s(m,2),ve=s(F,2);t(y);var oe=s(y,2),q=l(oe),$=s(q,2),H=s($,2),Z=s(H,2),W=s(Z,2),k=s(W,2),se=s(k,2),G=s(se,2),S=s(G,2),w=s(S,2),N=s(w,2),A=s(N,2);t(oe),t(le),D(()=>{J(j,I()),tt(O,"aria-label",I()),J(g,v()||0)}),X("click",m,()=>K(2.5)),X("click",F,()=>K(5)),X("click",ve,()=>K(10)),X("click",q,()=>p(1)),X("click",$,()=>p(2)),X("click",H,()=>p(3)),X("click",Z,()=>p(4)),X("click",W,()=>p(5)),X("click",k,()=>p(6)),X("click",se,()=>p(7)),X("click",G,()=>p(8)),X("click",S,()=>p(9)),X("click",w,c),X("click",N,()=>p(0)),X("click",A,P),i(_e,le),ct()}var Ps=n('<div class="rest-timer svelte-18i4gcv"><div class="timer-display svelte-18i4gcv"><span class="label svelte-18i4gcv">Rest</span> <span class="time svelte-18i4gcv"> </span></div> <div class="controls svelte-18i4gcv"><button class="svelte-18i4gcv">-30</button> <button class="svelte-18i4gcv">+30</button> <button class="skip svelte-18i4gcv">Skip</button></div></div>');function $s(_e,E){vt(E,!1);const v=$e(),I=$e();let T=st(E,"duration",8,90),p=st(E,"onComplete",8,()=>{}),c=$e(T()),P,K=st(E,"visible",12,!0);function le(){clearInterval(P),a(c,T()),P=setInterval(()=>{Ia(c,-1),e(c)<=0&&(clearInterval(P),p()())},1e3)}function B(m){a(c,e(c)+m)}function h(m){e(c)>m&&a(c,e(c)-m)}function j(){K(!1),clearInterval(P),p()()}za(()=>{le()}),Aa(()=>{clearInterval(P)}),pa(()=>e(c),()=>{a(v,Math.floor(e(c)/60))}),pa(()=>e(c),()=>{a(I,e(c)%60)}),qa(),Qt();var O=nt(),g=at(O);{var y=m=>{var F=Ps(),ve=l(F),oe=s(l(ve),2),q=l(oe);t(oe),t(ve);var $=s(ve,2),H=l($),Z=s(H,2),W=s(Z,2);t($),t(F),D(k=>J(q,`${e(v)??""}:${k??""}`),[()=>(e(I),ge(()=>e(I).toString().padStart(2,"0")))]),X("click",H,()=>h(30)),X("click",Z,()=>B(30)),X("click",W,j),ra(3,F,()=>fa,()=>({y:50,duration:300})),i(m,F)};V(g,m=>{K()&&m(y)})}i(_e,O),ct()}var Ws=n("<img/>"),Us=n('<div class="animation-frame svelte-zbmy0k"></div>'),Hs=n('<div class="visual-placeholder svelte-zbmy0k"><span>No animation available</span></div>'),Ks=n("<li> </li>"),Js=n('<div class="modal-overlay svelte-zbmy0k" role="button" tabindex="0" aria-label="Close modal"><div class="modal-content svelte-zbmy0k" role="dialog" aria-modal="true" tabindex="-1"><div class="header svelte-zbmy0k"><h3 class="svelte-zbmy0k"> </h3> <span class="category svelte-zbmy0k"> </span> <button class="close-btn svelte-zbmy0k" aria-label="Close">√ó</button></div> <div class="visual-container svelte-zbmy0k"><!> <div class="muscles svelte-zbmy0k"> </div></div> <div class="instructions svelte-zbmy0k"><h4>Instructions</h4> <ol class="svelte-zbmy0k"></ol></div></div></div>');function Qs(_e,E){vt(E,!1);let v=st(E,"exercise",8),I=st(E,"visible",8,!1);const T=oa();let p=$e(0),c;function P(){v().images&&v().images.length>0&&(a(p,0),c=setInterval(()=>{a(p,(e(p)+1)%v().images.length)},800))}function K(){c&&clearInterval(c)}Aa(()=>{K()});function le(){T("close")}pa(()=>(Le(I()),Le(v())),()=>{I()&&v().images?.length?P():K()}),qa(),Qt();var B=nt(),h=at(B);{var j=O=>{var g=Js(),y=l(g),m=l(y),F=l(m),ve=l(F,!0);t(F);var oe=s(F,2),q=l(oe,!0);t(oe);var $=s(oe,2);t(m);var H=s(m,2),Z=l(H);{var W=N=>{var A=Us();pe(A,5,()=>(Le(v()),ge(()=>v().images)),fe,(Q,re,ie)=>{var ee=Ws();let Se;D(()=>{tt(ee,"src",`${as??""}${e(re)??""}`),tt(ee,"alt",`${Le(v()),ge(()=>v().name)??""} frame ${ie+1}`),Se=We(ee,1,"svelte-zbmy0k",null,Se,{active:ie===e(p)})}),i(Q,ee)}),t(A),i(N,A)},k=N=>{var A=Hs();i(N,A)};V(Z,N=>{Le(v()),ge(()=>v().images&&v().images.length>0)?N(W):N(k,!1)})}var se=s(Z,2),G=l(se);t(se),t(H);var S=s(H,2),w=s(l(S),2);pe(w,5,()=>(Le(v()),ge(()=>v().instructions)),fe,(N,A)=>{var Q=Ks(),re=l(Q,!0);t(Q),D(()=>J(re,e(A))),i(N,Q)}),t(w),t(S),t(y),t(g),D(N=>{J(ve,(Le(v()),ge(()=>v().name))),J(q,(Le(v()),ge(()=>v().category))),J(G,`Targets: ${N??""}`)},[()=>(Le(v()),ge(()=>v().targetMuscles.join(", ")))]),X("click",$,le),ra(3,y,()=>fa,()=>({y:50,duration:300})),X("click",y,_a(function(N){It.call(this,E,N)})),X("keydown",y,_a(function(N){It.call(this,E,N)})),X("click",g,le),X("keydown",g,N=>N.key==="Escape"&&le()),i(O,g)};V(h,O=>{I()&&O(j)})}i(_e,B),ct()}var Xs=n('<button class="save-btn svelte-1w0zsmt">Finish Workout</button>'),Ys=n("<option> </option>"),Zs=n('<button class="exercise-item svelte-1w0zsmt"><span class="name svelte-1w0zsmt"> </span> <span class="muscles svelte-1w0zsmt"> </span></button>'),el=n('<div class="modal-overlay svelte-1w0zsmt" role="button" tabindex="0" aria-label="Close modal"><div class="picker-modal svelte-1w0zsmt" role="dialog" aria-modal="true" tabindex="-1"><div class="picker-header svelte-1w0zsmt"><h3>Add Exercise</h3> <div class="search-row svelte-1w0zsmt"><input type="text" placeholder="Search exercises..." class="svelte-1w0zsmt"/> <select class="svelte-1w0zsmt"><option>All Categories</option><!></select></div></div> <div class="picker-list svelte-1w0zsmt"></div></div></div>'),tl=n('<div class="keypad-overlay svelte-1w0zsmt"><div class="keypad-header svelte-1w0zsmt"><span> </span> <button class="svelte-1w0zsmt">Done</button></div> <!></div>'),al=n('<div class="gym-session-form svelte-1w0zsmt"><div class="session-meta svelte-1w0zsmt"><input type="text" class="session-name svelte-1w0zsmt" placeholder="Workout Name (e.g. Pull Day)"/> <div class="meta-row svelte-1w0zsmt"><label class="svelte-1w0zsmt">Start Time <input type="datetime-local" disabled class="svelte-1w0zsmt"/></label> <label class="svelte-1w0zsmt">Bodyweight (kg) <input type="number" placeholder="Optional" class="svelte-1w0zsmt"/></label></div></div> <div class="exercises-list"></div> <button class="add-exercise-btn svelte-1w0zsmt">+ Add Exercise</button> <!> <!> <!> <!> <!> <!></div>');function sl(_e,E){vt(E,!1);const v=$e(),I=oa();let T=$e(""),p=$e(),c=$e([]),P=new Date().toISOString(),K=$e(!1),le=$e(""),B=$e(""),h=$e(null),j=$e(!1),O=$e(null),g=$e(null);const y=Array.from(new Set(wa.map(f=>f.category))).sort();function m(f){const x={id:crypto.randomUUID(),name:f.name,sets:[{weight:0,reps:0,isWarmup:!1,isFailure:!1,isDropSet:!1,completed:!1}]};a(c,[...e(c),x]),a(K,!1),a(le,""),a(B,"")}function F(f,x,U){a(h,{exerciseIndex:x,setIndex:U,field:f.detail.field})}function ve(f){if(!e(h))return;const{exerciseIndex:x,setIndex:U,field:te}=e(h);Ra(c,e(c)[x].sets[U][te]=f.detail),a(c,[...e(c)])}function oe(){a(j,!0)}function q(){e(c).length!==0&&(Pa({date:P.split("T")[0],name:e(T)||"Gym Workout",bodyweight:e(p),exercises:e(c)}),I("save"))}function $(){a(h,null)}pa(()=>(e(le),e(B)),()=>{a(v,wa.filter(f=>{const x=f.name.toLowerCase().includes(e(le).toLowerCase())||f.targetMuscles.some(te=>te.toLowerCase().includes(e(le).toLowerCase())),U=e(B)?f.category===e(B):!0;return x&&U}))}),qa(),Qt();var H=al(),Z=l(H),W=l(Z);L(W);var k=s(W,2),se=l(k),G=s(l(se));L(G),t(se);var S=s(se,2),w=s(l(S));L(w),t(S),t(k),t(Z);var N=s(Z,2);pe(N,5,()=>e(c),fe,(f,x,U)=>{Rs(f,{get exercise(){return e(x)},$$events:{focus:te=>F(te,U,e(c)[U].sets.indexOf(te.detail.set)),complete:oe,delete:()=>{a(g,U)},info:()=>{const te=wa.find(be=>be.name===e(x).name);te&&a(O,te)}}})}),t(N);var A=s(N,2),Q=s(A,2);{var re=f=>{var x=Xs();X("click",x,q),i(f,x)};V(Q,f=>{e(c),ge(()=>e(c).length>0)&&f(re)})}var ie=s(Q,2);{var ee=f=>{var x=el(),U=l(x),te=l(U),be=s(l(te),2),ne=l(be);L(ne);var xe=s(ne,2);D(()=>{e(B),ja(()=>{})});var he=l(xe);he.value=he.__value="";var Be=s(he);pe(Be,1,()=>y,fe,(we,Fe)=>{var d=Ys(),C=l(d,!0);t(d);var z={};D(()=>{J(C,e(Fe)),z!==(z=e(Fe))&&(d.value=(d.__value=e(Fe))??"")}),i(we,d)}),t(xe),t(be),t(te);var Ue=s(te,2);pe(Ue,5,()=>e(v),fe,(we,Fe)=>{var d=Zs(),C=l(d),z=l(C,!0);t(C);var Y=s(C,2),qe=l(Y,!0);t(Y),t(d),D(Ee=>{J(z,(e(Fe),ge(()=>e(Fe).name))),J(qe,Ee)},[()=>(e(Fe),ge(()=>e(Fe).targetMuscles.join(", ")))]),X("click",d,()=>m(e(Fe))),i(we,d)}),t(Ue),t(U),t(x),M(ne,()=>e(le),we=>a(le,we)),Ye(xe,()=>e(B),we=>a(B,we)),X("click",U,_a(function(we){It.call(this,E,we)})),X("keydown",U,_a(function(we){It.call(this,E,we)})),ra(3,U,()=>fa,()=>({y:100,duration:300})),X("click",x,()=>a(K,!1)),X("keydown",x,we=>we.key==="Escape"&&a(K,!1)),ra(3,x,()=>Qa),i(f,x)};V(ie,f=>{e(K)&&f(ee)})}var Se=s(ie,2);{var Ie=f=>{Qs(f,{get exercise(){return e(O)},visible:!0,$$events:{close:()=>a(O,null)}})};V(Se,f=>{e(O)&&f(Ie)})}var Ge=s(Se,2);{var Re=f=>{var x=tl(),U=l(x),te=l(U),be=l(te);t(te);var ne=s(te,2);t(U);var xe=s(U,2);{let he=Ga(()=>(e(h),ge(()=>e(h).field==="weight"?"Weight (kg)":"Reps")));Ms(xe,{get value(){return e(c),e(h),ge(()=>e(c)[e(h).exerciseIndex].sets[e(h).setIndex][e(h).field])},get label(){return e(he)},$$events:{change:ve}})}t(x),D(()=>J(be,`Editing ${e(c),e(h),ge(()=>e(c)[e(h).exerciseIndex].name)??""} - Set ${e(h),ge(()=>e(h).setIndex+1)??""}`)),X("click",ne,$),ra(3,x,()=>fa,()=>({y:200,duration:300})),i(f,x)};V(Ge,f=>{e(h)&&f(Re)})}var de=s(Ge,2);$s(de,{get visible(){return e(j)},set visible(f){a(j,f)},$$legacy:!0});var Ce=s(de,2);{var Ne=f=>{Xa(f,{isOpen:!0,title:"Delete Exercise",get message(){return`Are you sure you want to delete ${e(c),e(g),ge(()=>e(c)[e(g)].name)??""}?`},requireInput:!1,onConfirm:()=>{e(g)!==null&&(a(c,e(c).filter((x,U)=>U!==e(g))),a(g,null))},onCancel:()=>a(g,null)})};V(Ce,f=>{e(g)!==null&&f(Ne)})}t(H),D(f=>Va(G,f),[()=>ge(()=>P.slice(0,16))]),M(W,()=>e(T),f=>a(T,f)),M(w,()=>e(p),f=>a(p,f)),X("click",A,()=>a(K,!0)),i(_e,H),ct()}var ll=n("<option> </option>"),il=n("<option> </option>"),rl=n('<button class="remove-set-btn svelte-1m63nqt">‚úï</button>'),ol=n('<div class="set-row svelte-1m63nqt"><div class="input-wrap svelte-1m63nqt"><label class="svelte-1m63nqt">Weight</label> <input type="number" placeholder="0" class="svelte-1m63nqt"/></div> <div class="input-wrap svelte-1m63nqt"><label class="svelte-1m63nqt">Reps/Secs</label> <input type="number" placeholder="1" class="svelte-1m63nqt"/></div> <!></div>'),nl=n('<div class="exercise-card svelte-1m63nqt"><div class="card-header svelte-1m63nqt"><div class="header-inputs svelte-1m63nqt"><select class="svelte-1m63nqt"></select> <select class="svelte-1m63nqt"></select></div> <button class="remove-card-btn svelte-1m63nqt" title="Remove Exercise">‚úï</button></div> <div class="sets-list svelte-1m63nqt"><!> <button class="add-set-btn svelte-1m63nqt">+ Add Set</button></div> <div class="card-footer svelte-1m63nqt"><div class="meta-input svelte-1m63nqt"><label class="svelte-1m63nqt">Total Sets</label> <input type="number" readonly="" disabled class="svelte-1m63nqt"/></div> <div class="notes-input svelte-1m63nqt"><label class="svelte-1m63nqt">Notes</label> <input type="text" placeholder="Notes..." class="svelte-1m63nqt"/></div></div></div>'),vl=n("<div> </div>"),cl=n('<div class="form-content svelte-1m63nqt"><div class="header-row svelte-1m63nqt"><h3 class="svelte-1m63nqt">ü§è Fingerboarding</h3> <button class="add-row-btn svelte-1m63nqt">+ Add Exercise</button></div> <div class="form-group date-group svelte-1m63nqt"><label for="date">Date</label> <input type="date" id="date" class="svelte-1m63nqt"/></div> <div class="cards-container svelte-1m63nqt"></div> <div class="submit-section"><!> <button type="button" class="submit-btn svelte-1m63nqt"><!></button></div></div>');function dl(_e,E){vt(E,!0);const v=["Max hangs","Recruitment pulls","Max pick-ups"],I=["Full-crimp","Half-crimp","Three finger drag","Pinch","Open hand","Sloper"];let T=_(De(new Date().toISOString().split("T")[0])),p=_(De([]));function c(){a(p,[...e(p),{id:crypto.randomUUID(),name:v[0],gripType:I[1],sets:1,details:[{weight:0,reps:5}],notes:""}],!0)}Oa(()=>{e(p).length===0&&c()});function P(G){a(p,e(p).filter((S,w)=>w!==G),!0)}function K(G){const S=e(p)[G],w=S.details[S.details.length-1];S.details=[...S.details,{...w}],S.sets=S.details.length}function le(G,S){const w=e(p)[G];w.details.length>1&&(w.details=w.details.filter((N,A)=>A!==S),w.sets=w.details.length)}let B=_("idle"),h=_("");async function j(){a(B,"saving");try{const G={date:e(T),location:"N/A",exercises:JSON.parse(JSON.stringify(e(p)))},S=$a(G);if(na()){const w=await Ya(G);w.ok?(ma(S.id,w.id),ga(w.id),a(B,"success"),a(h,"Session saved and synced!")):(ba(S.id),a(B,"success"),a(h,"Saved locally. Sync failed: "+(w.error||"Unknown error")))}else a(B,"success"),a(h,"Saved locally. Will sync when online.");window.dispatchEvent(new CustomEvent("session-saved")),setTimeout(()=>{O()},2e3)}catch(G){a(B,"error"),a(h,"Failed to save session"),console.error("Save error:",G)}}function O(){a(T,new Date().toISOString().split("T")[0],!0),a(p,[],!0),c(),a(B,"idle"),a(h,"")}var g=cl(),y=l(g),m=s(l(y),2);m.__click=c,t(y);var F=s(y,2),ve=s(l(F),2);L(ve),t(F);var oe=s(F,2);pe(oe,21,()=>e(p),fe,(G,S,w)=>{var N=nl(),A=l(N),Q=l(A),re=l(Q);pe(re,21,()=>v,fe,(te,be)=>{var ne=ll(),xe=l(ne,!0);t(ne);var he={};D(()=>{J(xe,e(be)),he!==(he=e(be))&&(ne.value=(ne.__value=e(be))??"")}),i(te,ne)}),t(re);var ie=s(re,2);pe(ie,21,()=>I,fe,(te,be)=>{var ne=il(),xe=l(ne,!0);t(ne);var he={};D(()=>{J(xe,e(be)),he!==(he=e(be))&&(ne.value=(ne.__value=e(be))??"")}),i(te,ne)}),t(ie),t(Q);var ee=s(Q,2);ee.__click=()=>P(w),t(A);var Se=s(A,2),Ie=l(Se);pe(Ie,17,()=>e(S).details,fe,(te,be,ne)=>{var xe=ol(),he=l(xe),Be=l(he);tt(Be,"for",`weight-${w}-${ne}`);var Ue=s(Be,2);L(Ue),tt(Ue,"id",`weight-${w}-${ne}`),t(he);var we=s(he,2),Fe=l(we);tt(Fe,"for",`reps-${w}-${ne}`);var d=s(Fe,2);L(d),tt(d,"id",`reps-${w}-${ne}`),t(we);var C=s(we,2);{var z=Y=>{var qe=rl();qe.__click=()=>le(w,ne),i(Y,qe)};V(C,Y=>{e(S).details.length>1&&Y(z)})}t(xe),M(Ue,()=>e(be).weight,Y=>e(be).weight=Y),M(d,()=>e(be).reps,Y=>e(be).reps=Y),i(te,xe)});var Ge=s(Ie,2);Ge.__click=()=>K(w),t(Se);var Re=s(Se,2),de=l(Re),Ce=l(de);tt(Ce,"for",`total-sets-${w}`);var Ne=s(Ce,2);L(Ne),tt(Ne,"id",`total-sets-${w}`),t(de);var f=s(de,2),x=l(f);tt(x,"for",`notes-${w}`);var U=s(x,2);L(U),tt(U,"id",`notes-${w}`),t(f),t(Re),t(N),D(()=>Va(Ne,e(S).sets)),Ye(re,()=>e(S).name,te=>e(S).name=te),Ye(ie,()=>e(S).gripType,te=>e(S).gripType=te),M(U,()=>e(S).notes,te=>e(S).notes=te),i(G,N)}),t(oe);var q=s(oe,2),$=l(q);{var H=G=>{var S=vl();let w;var N=l(S,!0);t(S),D(()=>{w=We(S,1,"save-message svelte-1m63nqt",null,w,{success:e(B)==="success",error:e(B)==="error"}),J(N,e(h))}),i(G,S)};V($,G=>{e(h)&&G(H)})}var Z=s($,2);Z.__click=j;var W=l(Z);{var k=G=>{var S=Ae("Saving...");i(G,S)},se=G=>{var S=nt(),w=at(S);{var N=Q=>{var re=Ae("‚úì Saved!");i(Q,re)},A=Q=>{var re=Ae("Save Session");i(Q,re)};V(w,Q=>{e(B)==="success"?Q(N):Q(A,!1)},!0)}i(G,S)};V(W,G=>{e(B)==="saving"?G(k):G(se,!1)})}t(Z),t(q),t(g),D(()=>Z.disabled=e(B)==="saving"),M(ve,()=>e(T),G=>a(T,G)),i(_e,g),ct()}Jt(["click"]);var ul=n("<option> </option>"),pl=n('<input type="text" placeholder="Enter venue name" class="mt-2 svelte-1fje4dh"/>'),fl=n("<option> </option>"),_l=n("<option> </option>"),ml=n('<input type="text" placeholder="Round name" class="mt-2 svelte-1fje4dh"/>'),gl=n('<div class="result-mode-content svelte-1fje4dh"><div class="form-group svelte-1fje4dh"><label for="position" class="svelte-1fje4dh">Final Position</label> <input type="number" id="position" placeholder="#" class="large-input svelte-1fje4dh"/></div></div>'),bl=n("<option> </option>"),hl=n('<input type="number" min="1" class="svelte-1fje4dh"/>'),yl=n('<span class="flash-dash">-</span>'),kl=n('<tr><td class="col-name svelte-1fje4dh"><input type="text" class="svelte-1fje4dh"/></td><td class="col-status svelte-1fje4dh"><select class="svelte-1fje4dh"></select></td><td class="col-attempt svelte-1fje4dh"><!></td><td class="col-notes svelte-1fje4dh"><input type="text" placeholder="..." class="svelte-1fje4dh"/></td><td class="col-action svelte-1fje4dh"><button class="svelte-1fje4dh">‚úï</button></td></tr>'),Sl=n('<div class="load-metrics-compact svelte-1fje4dh"><div class="metric svelte-1fje4dh"><label for="finger">Finger Load</label> <input type="number" id="finger" min="0" max="5" step="0.5" class="svelte-1fje4dh"/></div> <div class="metric svelte-1fje4dh"><label for="shoulder">Shoulder Load</label> <input type="number" id="shoulder" min="0" max="5" step="0.5" class="svelte-1fje4dh"/></div> <div class="metric svelte-1fje4dh"><label for="forearm">Forearm Load</label> <input type="number" id="forearm" min="0" max="5" step="0.5" class="svelte-1fje4dh"/></div></div> <div class="climbs-table-container svelte-1fje4dh"><div class="section-header svelte-1fje4dh"><h4 class="svelte-1fje4dh">Boulders / Routes</h4></div> <table class="climbs-table svelte-1fje4dh"><thead><tr><th class="svelte-1fje4dh">#</th><th class="svelte-1fje4dh">Result</th><th class="svelte-1fje4dh">Att.</th><th class="svelte-1fje4dh">Notes</th><th class="svelte-1fje4dh"></th></tr></thead><tbody></tbody></table> <button class="add-row-btn svelte-1fje4dh">+ Add Row</button></div>',1),xl=n("<div> </div>"),wl=n('<div class="form-content svelte-1fje4dh"><h3 class="svelte-1fje4dh">üèÜ Competition</h3> <div class="form-grid svelte-1fje4dh"><div class="form-group svelte-1fje4dh"><label for="date" class="svelte-1fje4dh">Date</label> <input type="date" id="date" class="svelte-1fje4dh"/></div> <div class="form-group svelte-1fje4dh"><label for="venue" class="svelte-1fje4dh">Venue</label> <select id="venue" class="svelte-1fje4dh"><option disabled>Select venue...</option><!></select> <!></div></div> <div class="form-group mb-4 svelte-1fje4dh"><label for="type" class="svelte-1fje4dh">Type</label> <select id="type" class="svelte-1fje4dh"></select></div> <div class="round-section svelte-1fje4dh"><div class="form-group svelte-1fje4dh"><label for="round" class="svelte-1fje4dh">Round</label> <select id="round" class="svelte-1fje4dh"></select> <!></div> <!></div> <div class="submit-section"><!> <button type="button" class="submit-btn svelte-1fje4dh"><!></button></div></div>');function ql(_e,E){vt(E,!0);const v=["Flashpoint Bristol","Rockstar Techno","Rockstar Unit 3","Rockstar Unit 5","Bloc","TCA","Other"],I=["Bouldering","Lead","Speed"],T=["Qualifiers","Semi-Finals","Finals","Result","Other"],p=["Flash","Top","Zone","Attempt"];let c=_(De(new Date().toISOString().split("T")[0])),P=_(""),K=_(""),le=_("Bouldering"),B=_(4),h=_(4),j=_(4),O=_("Qualifiers"),g=_(""),y=_(null),m=_(De([{name:"#1",status:"Flash",attemptCount:1,notes:""}])),F=Dt(()=>e(O)==="Result"),ve=Dt(()=>e(P)==="Other"),oe=Dt(()=>e(O)==="Other"),q=Dt(()=>e(O)==="Other"?e(g):e(O));function $(){const d=e(m).length+1;a(m,[...e(m),{name:`#${d}`,status:"Flash",attemptCount:1,notes:""}],!0)}function H(d){e(m).length>1?a(m,e(m).filter((C,z)=>z!==d),!0):e(m)[0]={name:"#1",status:"Flash",attemptCount:1,notes:""}}function Z(d,C){e(m)[d].status=C,C==="Flash"&&(e(m)[d].attemptCount=1)}let W=_("idle"),k=_("");async function se(){if(!e(P)||e(P)==="Other"&&!e(K)){a(W,"error"),a(k,"Please specify a venue");return}a(W,"saving");try{const d={name:e(q),position:e(F)?e(y):void 0,climbs:e(F)?void 0:JSON.parse(JSON.stringify(e(m)))},C={date:e(c),venue:e(P)==="Other"?e(K):e(P),customVenue:e(P)==="Other"?e(K):void 0,type:e(le),fingerLoad:e(F)?void 0:e(B),shoulderLoad:e(F)?void 0:e(h),forearmLoad:e(F)?void 0:e(j),rounds:[d]},z=Wa(C);if(na()){const Y=await Za(C);Y.ok?(ma(z.id,Y.id),ga(Y.id),a(W,"success"),a(k,"Competition saved and synced!")):(ba(z.id),a(W,"success"),a(k,"Saved locally. Sync failed: "+(Y.error||"Unknown error")))}else a(W,"success"),a(k,"Saved locally. Will sync when online.");window.dispatchEvent(new CustomEvent("session-saved")),setTimeout(()=>{G()},2e3)}catch(d){a(W,"error"),a(k,"Failed to save session"),console.error("Save error:",d)}}function G(){a(c,new Date().toISOString().split("T")[0],!0),a(P,""),a(K,""),a(y,null),a(m,[{name:"#1",status:"Flash",attemptCount:1,notes:""}],!0),a(W,"idle"),a(k,"")}var S=wl(),w=s(l(S),2),N=l(w),A=s(l(N),2);L(A),t(N);var Q=s(N,2),re=s(l(Q),2),ie=l(re);ie.value=ie.__value="";var ee=s(ie);pe(ee,17,()=>v,fe,(d,C)=>{var z=ul(),Y=l(z,!0);t(z);var qe={};D(()=>{J(Y,e(C)),qe!==(qe=e(C))&&(z.value=(z.__value=e(C))??"")}),i(d,z)}),t(re);var Se=s(re,2);{var Ie=d=>{var C=pl();L(C),M(C,()=>e(K),z=>a(K,z)),i(d,C)};V(Se,d=>{e(ve)&&d(Ie)})}t(Q),t(w);var Ge=s(w,2),Re=s(l(Ge),2);pe(Re,21,()=>I,fe,(d,C)=>{var z=fl(),Y=l(z,!0);t(z);var qe={};D(()=>{J(Y,e(C)),qe!==(qe=e(C))&&(z.value=(z.__value=e(C))??"")}),i(d,z)}),t(Re),t(Ge);var de=s(Ge,2),Ce=l(de),Ne=s(l(Ce),2);pe(Ne,21,()=>T,fe,(d,C)=>{var z=_l(),Y=l(z,!0);t(z);var qe={};D(()=>{J(Y,e(C)),qe!==(qe=e(C))&&(z.value=(z.__value=e(C))??"")}),i(d,z)}),t(Ne);var f=s(Ne,2);{var x=d=>{var C=ml();L(C),M(C,()=>e(g),z=>a(g,z)),i(d,C)};V(f,d=>{e(oe)&&d(x)})}t(Ce);var U=s(Ce,2);{var te=d=>{var C=gl(),z=l(C),Y=s(l(z),2);L(Y),t(z),t(C),M(Y,()=>e(y),qe=>a(y,qe)),i(d,C)},be=d=>{var C=Sl(),z=at(C),Y=l(z),qe=s(l(Y),2);L(qe),t(Y);var Ee=s(Y,2),lt=s(l(Ee),2);L(lt),t(Ee);var yt=s(Ee,2),Tt=s(l(yt),2);L(Tt),t(yt),t(z);var pt=s(z,2),ft=s(l(pt),2),kt=s(l(ft));pe(kt,21,()=>e(m),fe,(He,Ve,St)=>{var _t=kl(),mt=l(_t),xt=l(mt);L(xt),t(mt);var wt=s(mt),Ke=l(wt);Ke.__change=Te=>Z(St,Te.target.value),pe(Ke,21,()=>p,fe,(Te,Je)=>{var Me=bl(),Rt=l(Me,!0);t(Me);var ht={};D(()=>{J(Rt,e(Je)),ht!==(ht=e(Je))&&(Me.value=(Me.__value=e(Je))??"")}),i(Te,Me)}),t(Ke);var Nt;Ca(Ke),t(wt);var gt=s(wt),At=l(gt);{var qt=Te=>{var Je=hl();L(Je),M(Je,()=>e(Ve).attemptCount,Me=>e(Ve).attemptCount=Me),i(Te,Je)},Et=Te=>{var Je=yl();i(Te,Je)};V(At,Te=>{e(Ve).status!=="Flash"?Te(qt):Te(Et,!1)})}t(gt);var dt=s(gt),Vt=l(dt);L(Vt),t(dt);var bt=s(dt),Ft=l(bt);Ft.__click=()=>H(St),t(bt),t(_t),D(()=>{Nt!==(Nt=e(Ve).status)&&(Ke.value=(Ke.__value=e(Ve).status)??"",Ta(Ke,e(Ve).status))}),M(xt,()=>e(Ve).name,Te=>e(Ve).name=Te),M(Vt,()=>e(Ve).notes,Te=>e(Ve).notes=Te),i(He,_t)}),t(kt),t(ft);var Gt=s(ft,2);Gt.__click=$,t(pt),M(qe,()=>e(B),He=>a(B,He)),M(lt,()=>e(h),He=>a(h,He)),M(Tt,()=>e(j),He=>a(j,He)),i(d,C)};V(U,d=>{e(F)?d(te):d(be,!1)})}t(de);var ne=s(de,2),xe=l(ne);{var he=d=>{var C=xl();let z;var Y=l(C,!0);t(C),D(()=>{z=We(C,1,"save-message svelte-1fje4dh",null,z,{success:e(W)==="success",error:e(W)==="error"}),J(Y,e(k))}),i(d,C)};V(xe,d=>{e(k)&&d(he)})}var Be=s(xe,2);Be.__click=se;var Ue=l(Be);{var we=d=>{var C=Ae("Saving...");i(d,C)},Fe=d=>{var C=nt(),z=at(C);{var Y=Ee=>{var lt=Ae("‚úì Saved!");i(Ee,lt)},qe=Ee=>{var lt=Ae("Save Session");i(Ee,lt)};V(z,Ee=>{e(W)==="success"?Ee(Y):Ee(qe,!1)},!0)}i(d,C)};V(Ue,d=>{e(W)==="saving"?d(we):d(Fe,!1)})}t(Be),t(ne),t(S),D(()=>Be.disabled=e(W)==="saving"),M(A,()=>e(c),d=>a(c,d)),Ye(re,()=>e(P),d=>a(P,d)),Ye(Re,()=>e(le),d=>a(le,d)),Ye(Ne,()=>e(O),d=>a(O,d)),i(_e,S),ct()}Jt(["change","click"]);var Cl=n('<span class="spinner svelte-b2zgdd"></span> Syncing...',1),Tl=n("<button><!></button>"),Nl=n("<div> </div>"),Fl=n('<div><div class="sync-info svelte-b2zgdd"><span class="sync-icon svelte-b2zgdd"> </span> <span class="sync-text svelte-b2zgdd"><!></span></div> <!> <!></div>'),Ol=n("<option> </option>"),jl=n('<div class="form-container svelte-b2zgdd"><!></div>'),zl=n('<div class="page svelte-b2zgdd"><div class="page-header svelte-b2zgdd"><h1 class="svelte-b2zgdd">üìù Log Data</h1> <p class="subtitle svelte-b2zgdd">Record your training sessions</p></div> <!> <div class="content-card svelte-b2zgdd"><div class="form-group svelte-b2zgdd"><label for="activity-type" class="svelte-b2zgdd">Activity Type</label> <select id="activity-type" class="svelte-b2zgdd"><option disabled>Select an activity...</option><!></select></div> <!></div></div>');function $l(_e,E){vt(E,!0);const v=[{value:"indoor_climb",label:"Indoor Climb",icon:"üßó"},{value:"outdoor_climb",label:"Outdoor Climb",icon:"‚õ∞Ô∏è"},{value:"gym_session",label:"Gym Session",icon:"üèãÔ∏è"},{value:"fingerboarding",label:"Fingerboarding",icon:"ü§è"},{value:"competition",label:"Competition",icon:"üèÜ"}];let I=_(""),T=_(0),p=_("idle"),c=_(""),P=_(!0);za(()=>{K(),a(P,na(),!0);const q=()=>{a(P,!0),K()},$=()=>{a(P,!1)},H=()=>{K()};return window.addEventListener("online",q),window.addEventListener("offline",$),window.addEventListener("session-saved",H),()=>{window.removeEventListener("online",q),window.removeEventListener("offline",$),window.removeEventListener("session-saved",H)}});function K(){a(T,es(),!0)}async function le(){if(!e(P)){a(p,"error"),a(c,"No network connection");return}a(p,"syncing"),a(c,"");try{const q=await ts();q.failed===0&&q.success>0?(a(p,"success"),a(c,`Synced ${q.success} session${q.success>1?"s":""}!`)):q.failed>0&&q.success>0?(a(p,"error"),a(c,`Synced ${q.success}, failed ${q.failed}`)):q.failed>0?(a(p,"error"),a(c,`Failed to sync ${q.failed} session${q.failed>1?"s":""}`)):(a(p,"idle"),a(c,"")),K(),e(p)==="success"&&setTimeout(()=>{a(p,"idle"),a(c,"")},3e3)}catch(q){a(p,"error"),a(c,"Sync failed"),console.error("Sync error:",q)}}var B=zl(),h=s(l(B),2);{var j=q=>{var $=Fl();let H;var Z=l($),W=l(Z),k=l(W,!0);t(W);var se=s(W,2),G=l(se);{var S=ie=>{var ee=Ae();D(()=>J(ee,`${e(T)??""} session${e(T)>1?"s":""} waiting to sync`)),i(ie,ee)},w=ie=>{var ee=Ae();D(()=>J(ee,`Offline - ${e(T)??""} session${e(T)>1?"s":""} saved locally`)),i(ie,ee)};V(G,ie=>{e(P)?ie(S):ie(w,!1)})}t(se),t(Z);var N=s(Z,2);{var A=ie=>{var ee=Tl();let Se;ee.__click=le;var Ie=l(ee);{var Ge=de=>{var Ce=Cl();ze(),i(de,Ce)},Re=de=>{var Ce=nt(),Ne=at(Ce);{var f=U=>{var te=Ae("‚úì Synced!");i(U,te)},x=U=>{var te=Ae("Sync Now");i(U,te)};V(Ne,U=>{e(p)==="success"?U(f):U(x,!1)},!0)}i(de,Ce)};V(Ie,de=>{e(p)==="syncing"?de(Ge):de(Re,!1)})}t(ee),D(()=>{Se=We(ee,1,"sync-btn svelte-b2zgdd",null,Se,{syncing:e(p)==="syncing"}),ee.disabled=e(p)==="syncing"}),i(ie,ee)};V(N,ie=>{e(P)&&ie(A)})}var Q=s(N,2);{var re=ie=>{var ee=Nl();let Se;var Ie=l(ee,!0);t(ee),D(()=>{Se=We(ee,1,"sync-message svelte-b2zgdd",null,Se,{error:e(p)==="error",success:e(p)==="success"}),J(Ie,e(c))}),i(ie,ee)};V(Q,ie=>{e(c)&&ie(re)})}t($),D(()=>{H=We($,1,"sync-banner svelte-b2zgdd",null,H,{offline:!e(P)}),J(k,e(P)?"üîÑ":"üì¥")}),i(q,$)};V(h,q=>{e(T)>0&&q(j)})}var O=s(h,2),g=l(O),y=s(l(g),2),m=l(y);m.value=m.__value="";var F=s(m);pe(F,17,()=>v,q=>q.value,(q,$)=>{var H=Ol(),Z=l(H);t(H);var W={};D(()=>{J(Z,`${e($).icon??""} ${e($).label??""}`),W!==(W=e($).value)&&(H.value=(H.__value=e($).value)??"")}),i(q,H)}),t(y),t(g);var ve=s(g,2);{var oe=q=>{var $=jl(),H=l($);{var Z=k=>{ys(k,{})},W=k=>{var se=nt(),G=at(se);{var S=N=>{Ls(N,{})},w=N=>{var A=nt(),Q=at(A);{var re=ee=>{sl(ee,{})},ie=ee=>{var Se=nt(),Ie=at(Se);{var Ge=de=>{dl(de,{})},Re=de=>{var Ce=nt(),Ne=at(Ce);{var f=x=>{ql(x,{})};V(Ne,x=>{e(I)==="competition"&&x(f)},!0)}i(de,Ce)};V(Ie,de=>{e(I)==="fingerboarding"?de(Ge):de(Re,!1)},!0)}i(ee,Se)};V(Q,ee=>{e(I)==="gym_session"?ee(re):ee(ie,!1)},!0)}i(N,A)};V(G,N=>{e(I)==="outdoor_climb"?N(S):N(w,!1)},!0)}i(k,se)};V(H,k=>{e(I)==="indoor_climb"?k(Z):k(W,!1)})}t($),i(q,$)};V(ve,q=>{e(I)&&q(oe)})}t(O),t(B),Ye(y,()=>e(I),q=>a(I,q)),i(_e,B),ct()}Jt(["click"]);export{$l as component};
