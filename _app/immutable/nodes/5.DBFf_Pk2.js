import{f as l,a as n,c as Ae,t as ka}from"../chunks/DlIpowWv.js";import{a2 as it,k as nt,p as Ye,c as a,s,g as t,e as D,r as e,t as f,a as Je,d as r,b1 as et,f as ze,as as wa,aM as He,A as da,o as Ka,b8 as $a,j as rt}from"../chunks/BSXnj9bA.js";import{d as We,s as v,e as lt}from"../chunks/DY3SdbM1.js";import{i as d}from"../chunks/Bnb5Vf_a.js";import{i as Re,r as Me,e as qe,j as Ee}from"../chunks/DBB2y30b.js";import{c as Pe,b as oa,d as at,q as vt,h as Ie,r as ot,t as dt,v as ct,w as _t,j as ut,x as ft,y as gt,z as pt,A as mt}from"../chunks/BHK6Hdfp.js";import{t as Qe,s as ea,I as bt,f as ht,O as yt,G as xt,F as kt,C as wt,D as Ya,g as St,a as qt,E as Dt}from"../chunks/DX_mQTCr.js";import{s as Ke}from"../chunks/C5lbgwQY.js";import{i as Ua}from"../chunks/yT800EMq.js";import{p as tt}from"../chunks/DrybqwuO.js";function Tt(me,i,m){it(()=>{var u=nt(()=>i(me,m?.())||{});if(u?.destroy)return()=>u.destroy()})}var Ct=l('<span class="chevron svelte-12crvy">‚ñ≤</span>'),Et=l('<span class="chevron svelte-12crvy">‚ñº</span>'),Ft=l('<div class="input-with-action svelte-12crvy"><input type="text" id="location-manual" placeholder="Custom location..." class="flat-left svelte-12crvy"/> <button type="button" class="action-btn flat-right svelte-12crvy" title="Back to list">‚úï</button></div>'),zt=l("<option> </option>"),Lt=l('<select id="location-filter" class="svelte-12crvy"><option>Any Location</option><!></select>'),Gt=l("<option> </option>"),jt=l("<option> </option>"),Nt=l('<div class="filter-body svelte-12crvy"><div class="filter-grid svelte-12crvy"><div class="filter-item svelte-12crvy"><label for="start-date" class="svelte-12crvy">Start Date</label> <input type="date" id="start-date" class="svelte-12crvy"/></div> <div class="filter-item svelte-12crvy"><label for="end-date" class="svelte-12crvy">End Date</label> <input type="date" id="end-date" class="svelte-12crvy"/></div> <div class="filter-item svelte-12crvy"><label for="location-filter" class="svelte-12crvy">Location</label> <!></div> <div class="filter-item svelte-12crvy"><label for="climbing-type-filter" class="svelte-12crvy">Climb Type</label> <select id="climbing-type-filter" class="svelte-12crvy"><option>Any Type</option><!></select></div> <div class="filter-item svelte-12crvy"><label for="session-type-filter" class="svelte-12crvy">Session Type</label> <select id="session-type-filter" class="svelte-12crvy"><option>Any Type</option><!></select></div> <div class="filter-item svelte-12crvy"><label for="grade-filter" class="svelte-12crvy">Grade (Exact)</label> <input type="text" id="grade-filter" placeholder="e.g. V4" class="svelte-12crvy"/></div></div> <div class="filter-actions svelte-12crvy"><button class="reset-btn svelte-12crvy">Reset Filters</button></div></div>'),Ot=l('<div class="filter-container svelte-12crvy"><button class="filter-header svelte-12crvy"><div class="header-content svelte-12crvy"><span class="icon svelte-12crvy">üîç</span> <span class="title svelte-12crvy">Filters</span> <!></div></button> <!></div>');function Mt(me,i){Ye(i,!0);const m=["Rockstar Swindon","Flashpoint Swindon","Flashpoint Bristol","Redpoint Bristol","TCH Bristol","Other"],u=["Bouldering","Sport","Mixed"],y=["Projecting","Onsighting","Campusing","Repeaters"];let w=D(!1),c=D(""),T=D(""),b=D(""),G=D(""),ae=D(""),J=D(""),le=D(!1);function U(){r(w,!t(w))}function Z(){r(c,""),r(T,""),r(b,""),r(G,""),r(le,!1),r(ae,""),r(J,""),C()}function C(){i.onFilterParamsChange({startDate:t(c),endDate:t(T),location:t(b),climbingType:t(G),sessionType:t(ae),grade:t(J)})}function ne(){t(b)==="Other"?(r(le,!0),r(b,"")):C()}function E(){r(le,!1),r(b,""),C()}var j=Ot(),R=a(j);R.__click=U;var N=a(R),ve=s(a(N),4);{var ie=g=>{var F=Ct();n(g,F)},ue=g=>{var F=Et();n(g,F)};d(ve,g=>{t(w)?g(ie):g(ue,!1)})}e(N),e(R);var O=s(R,2);{var H=g=>{var F=Nt(),P=a(F),Y=a(P),p=s(a(Y),2);Me(p),p.__change=C,e(Y);var k=s(Y,2),A=s(a(k),2);Me(A),A.__change=C,e(k);var o=s(k,2),_=s(a(o),2);{var L=he=>{var te=Ft(),K=a(te);Me(K),K.__input=C;var ye=s(K,2);ye.__click=E,e(te),Pe(K,()=>t(b),we=>r(b,we)),n(he,te)},q=he=>{var te=Lt();te.__change=ne;var K=a(te);K.value=K.__value="";var ye=s(K);qe(ye,17,()=>m,Ee,(we,ee)=>{var oe=zt(),W=a(oe,!0);e(oe);var ge={};f(()=>{v(W,t(ee)),ge!==(ge=t(ee))&&(oe.value=(oe.__value=t(ee))??"")}),n(we,oe)}),e(te),oa(te,()=>t(b),we=>r(b,we)),n(he,te)};d(_,he=>{t(le)?he(L):he(q,!1)})}e(o);var X=s(o,2),V=s(a(X),2);V.__change=C;var be=a(V);be.value=be.__value="";var B=s(be);qe(B,17,()=>u,Ee,(he,te)=>{var K=Gt(),ye=a(K,!0);e(K);var we={};f(()=>{v(ye,t(te)),we!==(we=t(te))&&(K.value=(K.__value=t(te))??"")}),n(he,K)}),e(V),e(X);var fe=s(X,2),ce=s(a(fe),2);ce.__change=C;var De=a(ce);De.value=De.__value="";var Te=s(De);qe(Te,17,()=>y,Ee,(he,te)=>{var K=jt(),ye=a(K,!0);e(K);var we={};f(()=>{v(ye,t(te)),we!==(we=t(te))&&(K.value=(K.__value=t(te))??"")}),n(he,K)}),e(ce),e(fe);var Fe=s(fe,2),Le=s(a(Fe),2);Me(Le),Le.__input=C,e(Fe),e(P);var Ne=s(P,2),Ge=a(Ne);Ge.__click=Z,e(Ne),e(F),Pe(p,()=>t(c),he=>r(c,he)),Pe(A,()=>t(T),he=>r(T,he)),oa(V,()=>t(G),he=>r(G,he)),oa(ce,()=>t(ae),he=>r(ae,he)),Pe(Le,()=>t(J),he=>r(J,he)),Qe(3,F,()=>ea,()=>({duration:200})),n(g,F)};d(O,g=>{t(w)&&g(H)})}e(j),f(()=>Re(R,"aria-expanded",t(w))),n(me,j),Je()}We(["click","change","input"]);var Pt=l('<label class="type-toggle svelte-yz0xxt"><input type="checkbox"/> <span>Sport?</span></label>'),At=l("<option> </option>"),Bt=l('<div class="edit-form svelte-yz0xxt"><div class="edit-row main svelte-yz0xxt"><input type="text" class="edit-input grade svelte-yz0xxt" placeholder="Grade"/> <input type="text" class="edit-input name svelte-yz0xxt" placeholder="Route Name"/> <!></div> <div class="edit-row meta svelte-yz0xxt"><select class="edit-select svelte-yz0xxt"></select> <div class="attempts-input-wrapper svelte-yz0xxt"><span>#</span> <input type="number" min="1" class="edit-input num svelte-yz0xxt"/></div></div> <div class="edit-row notes svelte-yz0xxt"><textarea class="edit-input notes-area svelte-yz0xxt" placeholder="Notes..."></textarea></div> <div class="edit-actions svelte-yz0xxt"><button class="action-btn cancel svelte-yz0xxt">Cancel</button> <button class="action-btn save svelte-yz0xxt">Save</button></div></div>'),It=l('<span class="climb-type-tag svelte-yz0xxt"> </span>'),Rt=l('<span class="notes-preview svelte-yz0xxt"> </span>'),Vt=l('<span class="wall-tag svelte-yz0xxt"> </span>'),Ut=l('<span class="technique-tag svelte-yz0xxt"> </span>'),Wt=l('<span class="attempts-count svelte-yz0xxt"> </span>'),Ht=l('<div class="detail-row svelte-yz0xxt"><span class="label svelte-yz0xxt">Notes:</span> <p class="notes svelte-yz0xxt"> </p></div>'),Yt=l('<p class="empty-notes svelte-yz0xxt">No notes for this climb.</p>'),Jt=l('<div class="climb-details svelte-yz0xxt"><!> <div class="tags svelte-yz0xxt"><span class="tag type svelte-yz0xxt"> </span> <span class="tag attempt-text svelte-yz0xxt"> </span></div></div>'),Zt=l('<div class="climb-header svelte-yz0xxt" role="button" tabindex="0"><div class="climb-main-info svelte-yz0xxt"><span> </span> <span class="climb-name svelte-yz0xxt"> </span> <!> <!> <!> <!></div> <div class="climb-meta svelte-yz0xxt"><span><span class="icon svelte-yz0xxt"> </span> <!></span> <button class="icon-btn edit-btn svelte-yz0xxt" aria-label="Edit climb" title="Edit climb">‚úé</button> <button class="icon-btn delete-btn svelte-yz0xxt" aria-label="Delete climb" title="Delete climb">üóëÔ∏è</button> <span class="chevron svelte-yz0xxt"> </span></div></div> <!>',1),Xt=l("<div><!></div>");function Kt(me,i){Ye(i,!0);let m=tt(i,"showClimbType",3,!1),u=D(!1),y=D(!1),w=D(""),c=D(""),T=D(""),b=D(1),G=D(""),ae=D(!1);function J(){t(y)||r(u,!t(u))}function le(O){O.stopPropagation(),i.onDelete()}function U(O){O.stopPropagation(),r(w,i.climb.name,!0),r(c,i.climb.grade,!0),r(T,i.climb.attemptType,!0),r(b,i.climb.attemptsNum,!0),r(G,i.climb.notes,!0),r(ae,i.climb.isSport,!0),r(y,!0),r(u,!0)}function Z(O){O.stopPropagation(),r(y,!1)}function C(O){O.stopPropagation();const H={...i.climb,name:t(w),grade:t(c),attemptType:t(T),attemptsNum:t(b),notes:t(G),isSport:t(ae)};i.onUpdate(H),r(y,!1)}function ne(){(t(T)==="Flash"||t(T)==="Onsight")&&r(b,1)}const E={Flash:"‚ö°",Onsight:"üëÅÔ∏è",Redpoint:"üî¥",Dogged:"üõ†Ô∏è",DNF:"‚ùå"},j=["Flash","Onsight","Redpoint","Dogged","DNF"];var R=Xt();let N;var ve=a(R);{var ie=O=>{var H=Bt(),g=a(H),F=a(g);Me(F);var P=s(F,2);Me(P);var Y=s(P,2);{var p=B=>{var fe=Pt(),ce=a(fe);Me(ce),wa(2),e(fe),at(ce,()=>t(ae),De=>r(ae,De)),n(B,fe)};d(Y,B=>{m()&&B(p)})}e(g);var k=s(g,2),A=a(k);A.__change=ne,qe(A,21,()=>j,Ee,(B,fe)=>{var ce=At(),De=a(ce,!0);e(ce);var Te={};f(()=>{v(De,t(fe)),Te!==(Te=t(fe))&&(ce.value=(ce.__value=t(fe))??"")}),n(B,ce)}),e(A);var o=s(A,2),_=s(a(o),2);Me(_),e(o),e(k);var L=s(k,2),q=a(L);et(q),e(L);var X=s(L,2),V=a(X);V.__click=Z;var be=s(V,2);be.__click=C,e(X),e(H),f(()=>_.disabled=t(T)==="Flash"||t(T)==="Onsight"),Pe(F,()=>t(c),B=>r(c,B)),Pe(P,()=>t(w),B=>r(w,B)),oa(A,()=>t(T),B=>r(T,B)),Pe(_,()=>t(b),B=>r(b,B)),Pe(q,()=>t(G),B=>r(G,B)),n(O,H)},ue=O=>{var H=Zt(),g=ze(H);g.__click=J,g.__keydown=ee=>(ee.key==="Enter"||ee.key===" ")&&J();var F=a(g),P=a(F);let Y;var p=a(P,!0);e(P);var k=s(P,2),A=a(k,!0);e(k);var o=s(k,2);{var _=ee=>{var oe=It(),W=a(oe,!0);e(oe),f(()=>v(W,i.climb.isSport?"Sport":"Boulder")),n(ee,oe)};d(o,ee=>{m()&&ee(_)})}var L=s(o,2);{var q=ee=>{var oe=Rt(),W=a(oe);e(oe),f(()=>v(W,`- ${i.climb.notes??""}`)),n(ee,oe)};d(L,ee=>{!t(u)&&i.climb.notes&&ee(q)})}var X=s(L,2);{var V=ee=>{var oe=Vt(),W=a(oe,!0);e(oe),f(()=>v(W,i.climb.wall)),n(ee,oe)};d(X,ee=>{i.climb.wall&&ee(V)})}var be=s(X,2);{var B=ee=>{var oe=Ut(),W=a(oe,!0);e(oe),f(()=>v(W,i.climb.techniqueFocus)),n(ee,oe)};d(be,ee=>{i.climb.techniqueFocus&&ee(B)})}e(F);var fe=s(F,2),ce=a(fe);let De;var Te=a(ce),Fe=a(Te,!0);e(Te);var Le=s(Te,2);{var Ne=ee=>{var oe=Wt(),W=a(oe,!0);e(oe),f(()=>v(W,i.climb.attemptsNum)),n(ee,oe)};d(Le,ee=>{i.climb.attemptType!=="Flash"&&i.climb.attemptType!=="Onsight"&&ee(Ne)})}e(ce);var Ge=s(ce,2);Ge.__click=U;var he=s(Ge,2);he.__click=le;var te=s(he,2),K=a(te,!0);e(te),e(fe),e(g);var ye=s(g,2);{var we=ee=>{var oe=Jt(),W=a(oe);{var ge=h=>{var I=Ht(),Se=s(a(I),2),je=a(Se,!0);e(Se),e(I),f(()=>v(je,i.climb.notes)),n(h,I)},S=h=>{var I=Yt();n(h,I)};d(W,h=>{i.climb.notes?h(ge):h(S,!1)})}var _e=s(W,2),z=a(_e),se=a(z,!0);e(z);var de=s(z,2),xe=a(de,!0);e(de),e(_e),e(oe),f(()=>{v(se,i.climb.isSport?"Sport":"Boulder"),v(xe,i.climb.attemptType)}),Qe(3,oe,()=>ea,()=>({duration:150})),n(ee,oe)};d(ye,ee=>{t(u)&&ee(we)})}f(()=>{Re(g,"aria-expanded",t(u)),Y=Ke(P,1,"grade-badge svelte-yz0xxt",null,Y,{sport:i.climb.isSport}),v(p,i.climb.grade),v(A,i.climb.name||"Unnamed Route"),De=Ke(ce,1,"attempt-type svelte-yz0xxt",null,De,{flash:i.climb.attemptType==="Flash"}),v(Fe,E[i.climb.attemptType]||i.climb.attemptType),v(K,t(u)?"‚ñ≤":"‚ñº")}),n(O,H)};d(ve,O=>{t(y)?O(ie):O(ue,!1)})}e(R),f(()=>N=Ke(R,1,"climb-entry svelte-yz0xxt",null,N,{expanded:t(u),editing:t(y)})),n(me,R),Je()}We(["change","click","keydown"]);var Qt=l('<dialog class="edit-dialog svelte-1kpd5rv"><div class="dialog-content svelte-1kpd5rv"><div class="modal-header svelte-1kpd5rv"><h2 class="svelte-1kpd5rv">Edit Session</h2> <button class="close-btn svelte-1kpd5rv">&times;</button></div> <div class="modal-body svelte-1kpd5rv"><!></div></div></dialog>');function Ja(me,i){Ye(i,!0);function m(c){return c.showModal(),{destroy(){c.open&&c.close()}}}var u=Ae(),y=ze(u);{var w=c=>{var T=Qt();T.__click=C=>{C.target===C.currentTarget&&i.onClose()};var b=a(T);b.__click=C=>C.stopPropagation();var G=a(b),ae=s(a(G),2);ae.__click=function(...C){i.onClose?.apply(this,C)},e(G);var J=s(G,2),le=a(J);{var U=C=>{bt(C,{get initialData(){return i.initialData},get onCancel(){return i.onClose},get onSaved(){return i.onSaved}})},Z=C=>{var ne=Ae(),E=ze(ne);{var j=N=>{yt(N,{get initialData(){return i.initialData},get onCancel(){return i.onClose},get onSaved(){return i.onSaved}})},R=N=>{var ve=Ae(),ie=ze(ve);{var ue=H=>{xt(H,{get initialData(){return i.initialData},get onCancel(){return i.onClose},get onSaved(){return i.onSaved}})},O=H=>{var g=Ae(),F=ze(g);{var P=p=>{kt(p,{get initialData(){return i.initialData},get onCancel(){return i.onClose},get onSaved(){return i.onSaved}})},Y=p=>{var k=Ae(),A=ze(k);{var o=_=>{wt(_,{get initialData(){return i.initialData},get onCancel(){return i.onClose},get onSaved(){return i.onSaved}})};d(A,_=>{i.activityType==="competition"&&_(o)},!0)}n(p,k)};d(F,p=>{i.activityType==="fingerboarding"?p(P):p(Y,!1)},!0)}n(H,g)};d(ie,H=>{i.activityType==="gym_session"?H(ue):H(O,!1)},!0)}n(N,ve)};d(E,N=>{i.activityType==="outdoor_climb"?N(j):N(R,!1)},!0)}n(C,ne)};d(le,C=>{i.activityType==="indoor_climb"?C(U):C(Z,!1)})}e(J),e(b),e(T),Tt(T,C=>m?.(C)),lt("close",T,function(...C){i.onClose?.apply(this,C)}),Qe(3,b,()=>ht,()=>({duration:250,y:50,opacity:0})),n(c,T)};d(y,c=>{i.isOpen&&c(w)})}n(me,u),Je()}We(["click"]);var $t=l('<span class="stat svelte-7vqogn"> </span>'),es=l('<span class="status-icon pending svelte-7vqogn" title="Waiting to sync">üîÑ</span>'),as=l('<span class="status-icon error svelte-7vqogn" title="Sync error">‚ö†Ô∏è</span>'),ts=l('<span class="chip svelte-7vqogn"> </span>'),ss=l('<span class="text-none svelte-7vqogn">None</span>'),is=l('<div class="detail-item svelte-7vqogn"><span class="label svelte-7vqogn">Difficulty</span> <span class="value svelte-7vqogn"> </span></div>'),ns=l('<span class="chip svelte-7vqogn"> </span>'),rs=l('<span class="text-none svelte-7vqogn">None</span>'),ls=l('<div class="detail-item svelte-7vqogn"><span class="label svelte-7vqogn">Category</span> <div class="value-chips svelte-7vqogn"><!></div></div>'),vs=l('<span class="chip svelte-7vqogn"> </span>'),os=l('<span class="text-none svelte-7vqogn">None</span>'),ds=l('<div class="detail-item svelte-7vqogn"><span class="label svelte-7vqogn">Energy System</span> <div class="value-chips svelte-7vqogn"><!></div></div>'),cs=l('<span class="chip svelte-7vqogn"> </span>'),_s=l('<span class="text-none svelte-7vqogn">None</span>'),us=l('<div class="detail-item svelte-7vqogn"><span class="label svelte-7vqogn">Wall</span> <div class="value-chips svelte-7vqogn"><!></div></div>'),fs=l('<p class="notes-text"> </p>'),gs=l('<p class="notes-placeholder">No notes.</p>'),ps=l('<div class="metric svelte-7vqogn"><span class="label svelte-7vqogn">Open Grip</span> <div class="bar-container svelte-7vqogn"><div class="bar-fill svelte-7vqogn"></div></div> <span class="score svelte-7vqogn"> </span></div>'),ms=l('<div class="metric svelte-7vqogn"><span class="label svelte-7vqogn">Crimp Grip</span> <div class="bar-container svelte-7vqogn"><div class="bar-fill svelte-7vqogn"></div></div> <span class="score svelte-7vqogn"> </span></div>'),bs=l('<div class="metric svelte-7vqogn"><span class="label svelte-7vqogn">Pinch Grip</span> <div class="bar-container svelte-7vqogn"><div class="bar-fill svelte-7vqogn"></div></div> <span class="score svelte-7vqogn"> </span></div>'),hs=l('<div class="metric svelte-7vqogn"><span class="label svelte-7vqogn">Sloper Grip</span> <div class="bar-container svelte-7vqogn"><div class="bar-fill svelte-7vqogn"></div></div> <span class="score svelte-7vqogn"> </span></div>'),ys=l('<div class="metric svelte-7vqogn"><span class="label svelte-7vqogn">Jug Grip</span> <div class="bar-container svelte-7vqogn"><div class="bar-fill svelte-7vqogn"></div></div> <span class="score svelte-7vqogn"> </span></div>'),xs=l('<p class="no-climbs svelte-7vqogn">No climbs logged for this session.</p>'),ks=l('<div class="card-body svelte-7vqogn"><div class="details-grid svelte-7vqogn"><div class="detail-item svelte-7vqogn"><span class="label svelte-7vqogn">Training Type</span> <div class="value-chips svelte-7vqogn"><!></div></div> <!> <!> <!> <!></div> <div class="notes-container svelte-7vqogn"><div class="notes-header svelte-7vqogn"><span class="label svelte-7vqogn">Session Notes</span></div> <!></div> <div class="metrics-container svelte-7vqogn"><div class="metric svelte-7vqogn"><span class="label svelte-7vqogn">Finger Load</span> <div class="bar-container svelte-7vqogn"><div class="bar-fill svelte-7vqogn"></div></div> <span class="score svelte-7vqogn"> </span></div> <div class="metric svelte-7vqogn"><span class="label svelte-7vqogn">Shoulder Load</span> <div class="bar-container svelte-7vqogn"><div class="bar-fill svelte-7vqogn"></div></div> <span class="score svelte-7vqogn"> </span></div> <div class="metric svelte-7vqogn"><span class="label svelte-7vqogn">Forearm Load</span> <div class="bar-container svelte-7vqogn"><div class="bar-fill svelte-7vqogn"></div></div> <span class="score svelte-7vqogn"> </span></div> <!> <!> <!> <!> <!></div> <div class="climbs-list svelte-7vqogn"><h4 class="svelte-7vqogn">Climbs</h4> <div class="climbs-container svelte-7vqogn"><!> <!></div></div></div>'),ws=l('<div><div class="card-header svelte-7vqogn" role="button" tabindex="0"><div class="header-main svelte-7vqogn"><div class="date-badge svelte-7vqogn"><span class="day svelte-7vqogn"> </span> <span class="month svelte-7vqogn"> </span> <span class="year svelte-7vqogn"> </span></div> <div class="session-info svelte-7vqogn"><div class="session-text svelte-7vqogn"><h3 class="location svelte-7vqogn"> </h3> <div class="meta-row svelte-7vqogn"><span class="time-tag svelte-7vqogn"> </span> <span class="type-tag svelte-7vqogn"> </span></div> <div class="meta-row lowercase svelte-7vqogn"><span class="stat svelte-7vqogn"> </span> <!></div></div> <div class="load-summary svelte-7vqogn"><div class="load-badge finger svelte-7vqogn"> </div> <div class="load-badge shoulder svelte-7vqogn"> </div> <div class="load-badge forearm svelte-7vqogn"> </div></div></div></div> <div class="header-actions"><div class="header-status svelte-7vqogn"><!></div>  <button class="btn-icon edit-session" title="Edit Session">‚úèÔ∏è</button> <button class="btn-icon delete-session" title="Delete Session">üóëÔ∏è</button> <span class="chevron svelte-7vqogn"> </span></div></div> <!> <!> <!></div>');function Ss(me,i){Ye(i,!0);let m=D(!1),u=D(!1),y=D(!1);function w(){r(m,!t(m))}function c(){r(u,!0)}function T(){r(y,!0)}function b(){r(y,!1)}async function G(){r(y,!1),await Ua()}async function ae(){try{const z=await vt(i.session.id);z.ok?(r(u,!1),i.onDelete()):(console.error("Failed to delete session:",z.error),alert("Failed to delete session: "+z.error))}catch(z){console.error("Exception deleting session:",z),alert("Error deleting session")}}function J(z){}function le(z,se){}let U=He(()=>i.session.climbs?.length??0),Z=He(()=>(i.session.climbs||[]).reduce((z,se)=>{const de=parseInt(se.grade.replace(/\D/g,""))||0,xe=parseInt(z.replace(/\D/g,""))||0;return de>xe?se.grade:z},"V0"));var C=ws();let ne;var E=a(C);E.__click=w,E.__keydown=z=>z.key==="Enter"&&w();var j=a(E),R=a(j),N=a(R),ve=a(N,!0);e(N);var ie=s(N,2),ue=a(ie,!0);e(ie);var O=s(ie,2),H=a(O,!0);e(O),e(R);var g=s(R,2),F=a(g),P=a(F),Y=a(P,!0);e(P);var p=s(P,2),k=a(p),A=a(k);e(k);var o=s(k,2),_=a(o,!0);e(o),e(p);var L=s(p,2),q=a(L),X=a(q);e(q);var V=s(q,2);{var be=z=>{var se=$t(),de=a(se);e(se),f(()=>v(de,`Max: ${t(Z)??""}`)),n(z,se)};d(V,z=>{t(U)>0&&z(be)})}e(L),e(F);var B=s(F,2),fe=a(B),ce=a(fe,!0);e(fe);var De=s(fe,2),Te=a(De,!0);e(De);var Fe=s(De,2),Le=a(Fe,!0);e(Fe),e(B),e(g),e(j);var Ne=s(j,2),Ge=a(Ne),he=a(Ge);{var te=z=>{var se=es();n(z,se)},K=z=>{var se=Ae(),de=ze(se);{var xe=h=>{var I=as();n(h,I)};d(de,h=>{i.session.syncStatus==="error"&&h(xe)},!0)}n(z,se)};d(he,z=>{i.session.syncStatus==="pending"?z(te):z(K,!1)})}e(Ge);var ye=s(Ge,2);ye.__click=z=>{z.stopPropagation(),T()};var we=s(ye,2);we.__click=z=>{z.stopPropagation(),c()};var ee=s(we,2),oe=a(ee,!0);e(ee),e(Ne),e(E);var W=s(E,2);{var ge=z=>{var se=ks(),de=a(se),xe=a(de),h=s(a(xe),2),I=a(h);{var Se=Q=>{var re=Ae(),x=ze(re);qe(x,17,()=>i.session.trainingTypes,Ee,(M,$)=>{var ke=ts(),pe=a(ke,!0);e(ke),f(()=>v(pe,t($))),n(M,ke)}),n(Q,re)},je=Q=>{var re=ss();n(Q,re)};d(I,Q=>{i.session.trainingTypes&&i.session.trainingTypes.length>0&&!i.session.trainingTypes.includes("None")?Q(Se):Q(je,!1)})}e(h),e(xe);var Oe=s(xe,2);{var aa=Q=>{var re=is(),x=s(a(re),2),M=a(x,!0);e(x),e(re),f(()=>v(M,i.session.difficulty)),n(Q,re)};d(Oe,Q=>{i.session.difficulty&&Q(aa)})}var ta=s(Oe,2);{var Ca=Q=>{var re=ls(),x=s(a(re),2),M=a(x);{var $=pe=>{var Ce=Ae(),Be=ze(Ce);qe(Be,17,()=>i.session.categories,Ee,(Ze,ya)=>{var Xe=ns(),xa=a(Xe,!0);e(Xe),f(()=>v(xa,t(ya))),n(Ze,Xe)}),n(pe,Ce)},ke=pe=>{var Ce=rs();n(pe,Ce)};d(M,pe=>{i.session.categories.length>0&&!i.session.categories.includes("None")?pe($):pe(ke,!1)})}e(x),e(re),n(Q,re)};d(ta,Q=>{i.session.categories?.length&&Q(Ca)})}var pa=s(ta,2);{var Ea=Q=>{var re=ds(),x=s(a(re),2),M=a(x);{var $=pe=>{var Ce=Ae(),Be=ze(Ce);qe(Be,17,()=>i.session.energySystems,Ee,(Ze,ya)=>{var Xe=vs(),xa=a(Xe,!0);e(Xe),f(()=>v(xa,t(ya))),n(Ze,Xe)}),n(pe,Ce)},ke=pe=>{var Ce=os();n(pe,Ce)};d(M,pe=>{i.session.energySystems.length>0&&!i.session.energySystems.includes("None")?pe($):pe(ke,!1)})}e(x),e(re),n(Q,re)};d(pa,Q=>{i.session.energySystems?.length&&Q(Ea)})}var sa=s(pa,2);{var ma=Q=>{var re=us(),x=s(a(re),2),M=a(x);{var $=pe=>{var Ce=Ae(),Be=ze(Ce);qe(Be,17,()=>i.session.wallAngles,Ee,(Ze,ya)=>{var Xe=cs(),xa=a(Xe,!0);e(Xe),f(()=>v(xa,t(ya))),n(Ze,Xe)}),n(pe,Ce)},ke=pe=>{var Ce=_s();n(pe,Ce)};d(M,pe=>{i.session.wallAngles.length>0&&!i.session.wallAngles.includes("None")?pe($):pe(ke,!1)})}e(x),e(re),n(Q,re)};d(sa,Q=>{i.session.wallAngles?.length&&Q(ma)})}e(de);var ba=s(de,2),Fa=s(a(ba),2);{var ha=Q=>{var re=fs(),x=a(re,!0);e(re),f(()=>v(x,i.session.notes)),n(Q,re)},Wa=Q=>{var re=gs();n(Q,re)};d(Fa,Q=>{i.session.notes?Q(ha):Q(Wa,!1)})}e(ba);var za=s(ba,2),La=a(za),va=s(a(La),2),ca=a(va);e(va);var _a=s(va,2),Ga=a(_a);e(_a),e(La);var ua=s(La,2),ja=s(a(ua),2),Na=a(ja);e(ja);var Sa=s(ja,2),Ba=a(Sa);e(Sa),e(ua);var ra=s(ua,2),Ve=s(a(ra),2),fa=a(Ve);e(Ve);var ia=s(Ve,2),qa=a(ia);e(ia),e(ra);var $e=s(ra,2);{var la=Q=>{var re=ps(),x=s(a(re),2),M=a(x);e(x);var $=s(x,2),ke=a($);e($),e(re),f(()=>{Ie(M,`width: ${i.session.openGrip/5*100}%`),v(ke,`${i.session.openGrip??""}/5`)}),n(Q,re)};d($e,Q=>{i.session.openGrip&&Q(la)})}var na=s($e,2);{var Da=Q=>{var re=ms(),x=s(a(re),2),M=a(x);e(x);var $=s(x,2),ke=a($);e($),e(re),f(()=>{Ie(M,`width: ${i.session.crimpGrip/5*100}%`),v(ke,`${i.session.crimpGrip??""}/5`)}),n(Q,re)};d(na,Q=>{i.session.crimpGrip&&Q(Da)})}var Oa=s(na,2);{var Ia=Q=>{var re=bs(),x=s(a(re),2),M=a(x);e(x);var $=s(x,2),ke=a($);e($),e(re),f(()=>{Ie(M,`width: ${i.session.pinchGrip/5*100}%`),v(ke,`${i.session.pinchGrip??""}/5`)}),n(Q,re)};d(Oa,Q=>{i.session.pinchGrip&&Q(Ia)})}var Ma=s(Oa,2);{var Ra=Q=>{var re=hs(),x=s(a(re),2),M=a(x);e(x);var $=s(x,2),ke=a($);e($),e(re),f(()=>{Ie(M,`width: ${i.session.sloperGrip/5*100}%`),v(ke,`${i.session.sloperGrip??""}/5`)}),n(Q,re)};d(Ma,Q=>{i.session.sloperGrip&&Q(Ra)})}var Ta=s(Ma,2);{var Ha=Q=>{var re=ys(),x=s(a(re),2),M=a(x);e(x);var $=s(x,2),ke=a($);e($),e(re),f(()=>{Ie(M,`width: ${i.session.jugGrip/5*100}%`),v(ke,`${i.session.jugGrip??""}/5`)}),n(Q,re)};d(Ta,Q=>{i.session.jugGrip&&Q(Ha)})}e(za);var Pa=s(za,2),Va=s(a(Pa),2),Ue=a(Va);qe(Ue,17,()=>i.session.climbs||[],Ee,(Q,re,x)=>{{let M=He(()=>i.session.climbingType==="Mixed");Kt(Q,{get climb(){return t(re)},onDelete:()=>void 0,onUpdate:$=>void 0,get showClimbType(){return t(M)}})}});var ga=s(Ue,2);{var Za=Q=>{var re=xs();n(Q,re)};d(ga,Q=>{(i.session.climbs||[]).length===0&&Q(Za)})}e(Va),e(Pa),e(se),f(()=>{Ie(ca,`width: ${i.session.fingerLoad/5*100}%`),v(Ga,`${i.session.fingerLoad??""}/5`),Ie(Na,`width: ${i.session.shoulderLoad/5*100}%`),v(Ba,`${i.session.shoulderLoad??""}/5`),Ie(fa,`width: ${i.session.forearmLoad/5*100}%`),v(qa,`${i.session.forearmLoad??""}/5`)}),Qe(3,se,()=>ea,()=>({duration:150})),n(z,se)};d(W,z=>{t(m)&&z(ge)})}var S=s(W,2);Ya(S,{get isOpen(){return t(u)},title:"Delete Session",message:"Are you sure you want to delete this session? This action cannot be undone.",onConfirm:ae,onCancel:()=>r(u,!1)});var _e=s(S,2);Ja(_e,{get isOpen(){return t(y)},activityType:"indoor_climb",get initialData(){return i.session},onClose:b,onSaved:G}),e(C),f((z,se,de)=>{ne=Ke(C,1,"session-card svelte-7vqogn",null,ne,{expanded:t(m)}),Re(E,"aria-expanded",t(m)),v(ve,z),v(ue,se),v(H,de),v(Y,i.session.location),v(A,`üïí ${(i.session.time||"12:00")??""}`),v(_,i.session.climbingType),v(X,`${t(U)??""} climbs`),Re(fe,"title",`Finger Load: ${i.session.fingerLoad??""}`),v(ce,i.session.fingerLoad),Re(De,"title",`Shoulder Load: ${i.session.shoulderLoad??""}`),v(Te,i.session.shoulderLoad),Re(Fe,"title",`Forearm Load: ${i.session.forearmLoad??""}`),v(Le,i.session.forearmLoad),v(oe,t(m)?"‚ñ≤":"‚ñº")},[()=>new Date(i.session.date).getDate(),()=>new Date(i.session.date).toLocaleDateString("en-GB",{month:"short"}),()=>new Date(i.session.date).getFullYear()]),n(me,C),Je()}We(["click","keydown"]);var qs=l('<div class="legend-item svelte-11p9lqi"><span class="l-icon svelte-11p9lqi"> </span> <span class="l-label svelte-11p9lqi"> </span></div>'),Ds=l('<div class="legend-content svelte-11p9lqi"><div class="legend-grid svelte-11p9lqi"></div></div>'),Ts=l('<div class="legend-container svelte-11p9lqi"><button class="legend-toggle svelte-11p9lqi"><span class="icon">‚ÑπÔ∏è</span> <span class="text">Icon Legend</span> <span class="chevron svelte-11p9lqi"> </span></button> <!></div>');function st(me){let i=D(!1);const m=[{icon:"üëÅÔ∏è",label:"Onsight"},{icon:"‚ö°",label:"Flash"},{icon:"üî¥",label:"Redpoint"},{icon:"üõ†Ô∏è",label:"Dogged"},{icon:"‚ùå",label:"DNF"}];var u=Ts(),y=a(u);y.__click=()=>r(i,!t(i));var w=s(a(y),4),c=a(w,!0);e(w),e(y);var T=s(y,2);{var b=G=>{var ae=Ds(),J=a(ae);qe(J,21,()=>m,Ee,(le,U)=>{var Z=qs(),C=a(Z),ne=a(C,!0);e(C);var E=s(C,2),j=a(E,!0);e(E),e(Z),f(()=>{v(ne,t(U).icon),v(j,t(U).label)}),n(le,Z)}),e(J),e(ae),Qe(3,ae,()=>ea),n(G,ae)};d(T,G=>{t(i)&&G(b)})}e(u),f(()=>{Re(y,"aria-expanded",t(i)),v(c,t(i)?"‚ñº":"‚ñ∂")}),n(me,u)}We(["click"]);function Qa(me,i){if(!me||me.length===0){alert("No data to export");return}const m=Array.from(new Set(me.flatMap(Object.keys))),u=[m.join(","),...me.map(c=>m.map(T=>{let b=c[T];if(b==null)return"";if(typeof b=="object"){if(b instanceof Date)return b.toISOString();b=JSON.stringify(b).replace(/"/g,'""')}else typeof b=="string"&&(b=b.replace(/"/g,'""'));return typeof b=="string"&&(b.includes(",")||b.includes('"')||b.includes(`
`))?`"${b}"`:b}).join(","))].join(`
`),y=new Blob([u],{type:"text/csv;charset=utf-8;"}),w=document.createElement("a");if(w.download!==void 0){const c=URL.createObjectURL(y);w.setAttribute("href",c),w.setAttribute("download",i.endsWith(".csv")?i:`${i}.csv`),w.style.visibility="hidden",document.body.appendChild(w),w.click(),document.body.removeChild(w)}}var Cs=l('<span class="spinner svelte-14fqz8w"></span> Fetching...',1),Es=l('<div class="error-banner svelte-14fqz8w"> </div>'),Fs=l('<small class="svelte-14fqz8w">Try adjusting your filters.</small>'),zs=l('<div class="empty-state svelte-14fqz8w"><p class="svelte-14fqz8w">No indoor climbing sessions found.</p> <!></div>'),Ls=l('<div class="load-more-container svelte-14fqz8w"><button class="load-more-btn svelte-14fqz8w"> </button></div>'),Gs=l('<div class="view-container svelte-14fqz8w"><div class="view-header svelte-14fqz8w"><h2 class="view-title svelte-14fqz8w">üßó Indoor Climbing History</h2> <div class="header-actions svelte-14fqz8w"><button class="action-btn secondary svelte-14fqz8w" title="Export filtered data to CSV">üì• Export</button> <button class="action-btn svelte-14fqz8w" title="Fetch data from cloud"><!></button></div></div> <!> <!> <div class="info-bar svelte-14fqz8w"><div class="legend-wrapper svelte-14fqz8w"><!></div> <div class="load-key svelte-14fqz8w"><span class="key-label svelte-14fqz8w">Load:</span> <div class="key-item svelte-14fqz8w"><span class="dot finger svelte-14fqz8w"></span> Finger</div> <div class="key-item svelte-14fqz8w"><span class="dot shoulder svelte-14fqz8w"></span> Shoulder</div> <div class="key-item svelte-14fqz8w"><span class="dot forearm svelte-14fqz8w"></span> Forearm</div></div></div> <div class="sessions-list"><!> <!> <!></div></div>');function js(me,i){Ye(i,!0);let m=D(da([])),u=D(da([])),y=D(!1),w=D(""),c=D(da({startDate:"",endDate:"",location:"",climbingType:"",sessionType:"",grade:""})),T=D(20);const b=20;Ka(()=>{G()});async function G(){r(y,!0),r(w,"");try{const o=await ot();o.ok&&o.data?(r(m,o.data.map(_=>({..._,activityType:"indoor_climb"})),!0),t(m).sort((_,L)=>new Date(L.date).getTime()-new Date(_.date).getTime()),J()):r(w,o.error||"Failed to fetch data",!0)}catch(o){r(w,o instanceof Error?o.message:"Unknown error",!0)}finally{r(y,!1)}}function ae(o){r(c,o,!0),J()}function J(){r(T,b),r(u,t(m).filter(o=>{if(t(c).startDate&&o.date<t(c).startDate||t(c).endDate&&o.date>t(c).endDate||t(c).location&&o.location!==t(c).location)return!1;if(t(c).climbingType&&(o.climbingType==="Leading"?"Sport":o.climbingType)!==t(c).climbingType)if(o.climbingType==="Mixed")if(t(c).climbingType==="Bouldering"){if(!o.climbs.some(L=>!L.isSport))return!1}else if(t(c).climbingType==="Sport"){if(!o.climbs.some(L=>L.isSport))return!1}else return!1;else return!1;if(t(c).sessionType&&!o.trainingTypes?.includes(t(c).sessionType))return!1;if(t(c).grade){const _=t(c).grade.trim().toLowerCase();if(!o.climbs.some(q=>q.grade.trim().toLowerCase()===_))return!1}return!0}),!0)}function le(){r(T,t(T)+b)}var U=Gs(),Z=a(U),C=s(a(Z),2),ne=a(C);ne.__click=()=>Qa(t(u),"indoor_climbs");var E=s(ne,2);E.__click=G;var j=a(E);{var R=o=>{var _=Cs();wa(),n(o,_)},N=o=>{var _=ka("‚òÅÔ∏è Fetch Data");n(o,_)};d(j,o=>{t(y)?o(R):o(N,!1)})}e(E),e(C),e(Z);var ve=s(Z,2);{var ie=o=>{var _=Es(),L=a(_,!0);e(_),f(()=>v(L,t(w))),Qe(3,_,()=>ea),n(o,_)};d(ve,o=>{t(w)&&o(ie)})}var ue=s(ve,2);Mt(ue,{onFilterParamsChange:ae});var O=s(ue,2),H=a(O),g=a(H);st(g),e(H),wa(2),e(O);var F=s(O,2),P=a(F);qe(P,17,()=>t(u).slice(0,t(T)),o=>o.id,(o,_)=>{Ss(o,{get session(){return t(_)},onDelete:G})});var Y=s(P,2);{var p=o=>{var _=zs(),L=s(a(_),2);{var q=X=>{var V=Fs();n(X,V)};d(L,X=>{t(m).length>0&&X(q)})}e(_),n(o,_)};d(Y,o=>{t(u).length===0&&o(p)})}var k=s(Y,2);{var A=o=>{var _=Ls(),L=a(_);L.__click=le;var q=a(L);e(L),e(_),f(()=>v(q,`Load More (${t(u).length-t(T)} remaining)`)),n(o,_)};d(k,o=>{t(T)<t(u).length&&o(A)})}e(F),e(U),f(()=>E.disabled=t(y)),n(me,U),Je()}We(["click"]);var Ns=l('<span class="chevron svelte-1frtlim">‚ñ≤</span>'),Os=l('<span class="chevron svelte-1frtlim">‚ñº</span>'),Ms=l('<div class="input-with-action svelte-1frtlim"><input type="text" id="area-filter-text" placeholder="Type area name..." class="flat-left svelte-1frtlim"/> <button class="action-btn flat-right svelte-1frtlim" title="Back to list">‚úï</button></div>'),Ps=l("<option> </option>"),As=l('<select id="area-filter" class="svelte-1frtlim"><option>All Areas</option><!><option>Other (Manual Entry)</option></select>'),Bs=l('<div class="input-with-action svelte-1frtlim"><input type="text" id="crag-filter-text" placeholder="Type crag name..." class="flat-left svelte-1frtlim"/> <button class="action-btn flat-right svelte-1frtlim" title="Back to list">‚úï</button></div>'),Is=l("<option> </option>"),Rs=l('<select id="crag-filter" class="svelte-1frtlim"><option>All Crags</option><!><option>Other (Manual Entry)</option></select>'),Vs=l('<input type="text" id="crag-filter-text" class="svelte-1frtlim"/>'),Us=l("<option> </option>"),Ws=l("<option> </option>"),Hs=l('<div class="filter-body svelte-1frtlim"><div class="filter-grid svelte-1frtlim"><div class="filter-item svelte-1frtlim"><label for="start-date" class="svelte-1frtlim">Start Date</label> <input type="date" id="start-date" class="svelte-1frtlim"/></div> <div class="filter-item svelte-1frtlim"><label for="end-date" class="svelte-1frtlim">End Date</label> <input type="date" id="end-date" class="svelte-1frtlim"/></div> <div class="filter-item svelte-1frtlim"><label for="area-filter" class="svelte-1frtlim">Area</label> <!></div> <div class="filter-item svelte-1frtlim"><label for="crag-filter" class="svelte-1frtlim">Crag</label> <!></div> <div class="filter-item svelte-1frtlim"><label for="climbing-type-filter" class="svelte-1frtlim">Climb Type</label> <select id="climbing-type-filter" class="svelte-1frtlim"><option>Any Type</option><!></select></div> <div class="filter-item svelte-1frtlim"><label for="session-type-filter" class="svelte-1frtlim">Session Type</label> <select id="session-type-filter" class="svelte-1frtlim"><option>Any Type</option><!></select></div> <div class="filter-item svelte-1frtlim"><label for="grade-filter" class="svelte-1frtlim">Grade (Exact)</label> <input type="text" id="grade-filter" placeholder="e.g. 7a" class="svelte-1frtlim"/></div></div> <div class="filter-actions svelte-1frtlim"><button class="reset-btn svelte-1frtlim">Reset Filters</button></div></div>'),Ys=l('<div class="filter-container svelte-1frtlim"><button class="filter-header svelte-1frtlim"><div class="header-content svelte-1frtlim"><span class="icon svelte-1frtlim">üîç</span> <span class="title svelte-1frtlim">Filters</span> <!></div></button> <!></div>');function Js(me,i){Ye(i,!0);const m=St(),u=["Bouldering","Sport","Mixed","Trad"],y=["Projecting","Onsighting","Campusing","Repeaters","Fun","Volume"];let w=D(!1),c=D(""),T=D(""),b=D(""),G=D(""),ae=D(""),J=D(""),le=D(""),U=D(!1),Z=D(!1),C=He(()=>t(b)&&t(b)!=="Other"?qt(t(b)):[]);function ne(){t(b)==="Other"?(r(U,!0),r(b,"")):r(U,!1),r(G,""),r(Z,!1),N()}function E(){t(G)==="Other"?(r(Z,!0),r(G,"")):r(Z,!1),N()}function j(){r(w,!t(w))}function R(){r(c,""),r(T,""),r(b,""),r(G,""),r(ae,""),r(J,""),r(le,""),r(U,!1),r(Z,!1),N()}function N(){i.onFilterParamsChange({startDate:t(c),endDate:t(T),area:t(b),crag:t(G),climbingType:t(ae),sessionType:t(J),grade:t(le)})}var ve=Ys(),ie=a(ve);ie.__click=j;var ue=a(ie),O=s(a(ue),4);{var H=Y=>{var p=Ns();n(Y,p)},g=Y=>{var p=Os();n(Y,p)};d(O,Y=>{t(w)?Y(H):Y(g,!1)})}e(ue),e(ie);var F=s(ie,2);{var P=Y=>{var p=Hs(),k=a(p),A=a(k),o=s(a(A),2);Me(o),o.__change=N,e(A);var _=s(A,2),L=s(a(_),2);Me(L),L.__change=N,e(_);var q=s(_,2),X=s(a(q),2);{var V=W=>{var ge=Ms(),S=a(ge);Me(S),S.__input=N;var _e=s(S,2);_e.__click=()=>{r(U,!1),r(b,""),N()},e(ge),Pe(S,()=>t(b),z=>r(b,z)),n(W,ge)},be=W=>{var ge=As();ge.__change=ne;var S=a(ge);S.value=S.__value="";var _e=s(S);qe(_e,17,()=>m,Ee,(se,de)=>{var xe=Ps(),h=a(xe,!0);e(xe);var I={};f(()=>{v(h,t(de)),I!==(I=t(de))&&(xe.value=(xe.__value=t(de))??"")}),n(se,xe)});var z=s(_e);z.value=z.__value="Other",e(ge),oa(ge,()=>t(b),se=>r(b,se)),n(W,ge)};d(X,W=>{t(U)?W(V):W(be,!1)})}e(q);var B=s(q,2),fe=s(a(B),2);{var ce=W=>{var ge=Bs(),S=a(ge);Me(S),S.__input=N;var _e=s(S,2);_e.__click=()=>{r(Z,!1),r(G,""),N()},e(ge),Pe(S,()=>t(G),z=>r(G,z)),n(W,ge)},De=W=>{var ge=Ae(),S=ze(ge);{var _e=se=>{var de=Rs();de.__change=E;var xe=a(de);xe.value=xe.__value="";var h=s(xe);qe(h,17,()=>t(C),Ee,(Se,je)=>{var Oe=Is(),aa=a(Oe,!0);e(Oe);var ta={};f(()=>{v(aa,t(je)),ta!==(ta=t(je))&&(Oe.value=(Oe.__value=t(je))??"")}),n(Se,Oe)});var I=s(h);I.value=I.__value="Other",e(de),oa(de,()=>t(G),Se=>r(G,Se)),n(se,de)},z=se=>{var de=Vs();Me(de),de.__input=N,f(()=>{Re(de,"placeholder",t(b)?"Filter crag...":"Select area first"),de.disabled=!t(U)&&!t(b)}),Pe(de,()=>t(G),xe=>r(G,xe)),n(se,de)};d(S,se=>{!t(U)&&t(b)&&t(C).length>0?se(_e):se(z,!1)},!0)}n(W,ge)};d(fe,W=>{t(Z)?W(ce):W(De,!1)})}e(B);var Te=s(B,2),Fe=s(a(Te),2);Fe.__change=N;var Le=a(Fe);Le.value=Le.__value="";var Ne=s(Le);qe(Ne,17,()=>u,Ee,(W,ge)=>{var S=Us(),_e=a(S,!0);e(S);var z={};f(()=>{v(_e,t(ge)),z!==(z=t(ge))&&(S.value=(S.__value=t(ge))??"")}),n(W,S)}),e(Fe),e(Te);var Ge=s(Te,2),he=s(a(Ge),2);he.__change=N;var te=a(he);te.value=te.__value="";var K=s(te);qe(K,17,()=>y,Ee,(W,ge)=>{var S=Ws(),_e=a(S,!0);e(S);var z={};f(()=>{v(_e,t(ge)),z!==(z=t(ge))&&(S.value=(S.__value=t(ge))??"")}),n(W,S)}),e(he),e(Ge);var ye=s(Ge,2),we=s(a(ye),2);Me(we),we.__input=N,e(ye),e(k);var ee=s(k,2),oe=a(ee);oe.__click=R,e(ee),e(p),Pe(o,()=>t(c),W=>r(c,W)),Pe(L,()=>t(T),W=>r(T,W)),oa(Fe,()=>t(ae),W=>r(ae,W)),oa(he,()=>t(J),W=>r(J,W)),Pe(we,()=>t(le),W=>r(le,W)),Qe(3,p,()=>ea,()=>({duration:200})),n(Y,p)};d(F,Y=>{t(w)&&Y(P)})}e(ve),f(()=>Re(ie,"aria-expanded",t(w))),n(me,ve),Je()}We(["click","change","input"]);var Zs=l('<label class="type-toggle svelte-1k6anfh"><input type="checkbox"/> <span>Sport?</span></label>'),Xs=l("<option> </option>"),Ks=l('<div class="edit-form svelte-1k6anfh"><div class="edit-row main svelte-1k6anfh"><input type="text" class="edit-input grade svelte-1k6anfh" placeholder="Grade"/> <input type="text" class="edit-input name svelte-1k6anfh" placeholder="Route Name"/> <!></div> <div class="edit-row meta svelte-1k6anfh"><select class="edit-select svelte-1k6anfh"></select> <div class="attempts-input-wrapper svelte-1k6anfh"><span>#</span> <input type="number" min="1" class="edit-input num svelte-1k6anfh"/></div></div> <div class="edit-row notes svelte-1k6anfh"><textarea class="edit-input notes-area svelte-1k6anfh" placeholder="Notes..."></textarea></div> <div class="edit-actions svelte-1k6anfh"><button class="action-btn cancel svelte-1k6anfh">Cancel</button> <button class="action-btn save svelte-1k6anfh">Save</button></div></div>'),Qs=l('<span class="climb-type-tag svelte-1k6anfh"> </span>'),$s=l('<span class="notes-preview svelte-1k6anfh"> </span>'),ei=l('<span class="attempts-count svelte-1k6anfh"> </span>'),ai=l('<div class="detail-row svelte-1k6anfh"><span class="label svelte-1k6anfh">Notes:</span> <p class="notes svelte-1k6anfh"> </p></div>'),ti=l('<p class="empty-notes svelte-1k6anfh">No notes for this climb.</p>'),si=l('<span class="tag wall-tag svelte-1k6anfh"> </span>'),ii=l('<span class="tag technique-tag svelte-1k6anfh"> </span>'),ni=l('<div class="climb-details svelte-1k6anfh"><!> <div class="tags svelte-1k6anfh"><span class="tag type svelte-1k6anfh"> </span> <!> <!> <span class="tag attempt-text svelte-1k6anfh"> </span></div></div>'),ri=l('<div class="climb-header svelte-1k6anfh" role="button" tabindex="0"><div class="climb-main-info svelte-1k6anfh"><span> </span> <span class="climb-name svelte-1k6anfh"> </span> <!> <!></div> <div class="climb-meta svelte-1k6anfh"><span><span class="icon svelte-1k6anfh"> </span> <!></span> <button class="icon-btn edit-btn svelte-1k6anfh" aria-label="Edit climb" title="Edit climb">‚úé</button> <button class="icon-btn delete-btn svelte-1k6anfh" aria-label="Delete climb" title="Delete climb">üóëÔ∏è</button> <span class="chevron svelte-1k6anfh"> </span></div></div> <!>',1),li=l("<div><!></div>");function vi(me,i){Ye(i,!0);let m=tt(i,"showClimbType",3,!1),u=D(!1),y=D(!1),w=D(""),c=D(""),T=D(""),b=D(1),G=D(""),ae=D(!1);function J(){t(y)||r(u,!t(u))}function le(O){O.stopPropagation(),i.onDelete()}function U(O){O.stopPropagation(),r(w,i.climb.name,!0),r(c,i.climb.grade,!0),r(T,i.climb.attemptType,!0),r(b,i.climb.attemptsNum,!0),r(G,i.climb.notes,!0),r(ae,i.climb.isSport,!0),r(y,!0),r(u,!0)}function Z(O){O.stopPropagation(),r(y,!1)}function C(O){O.stopPropagation();const H={...i.climb,name:t(w),grade:t(c),attemptType:t(T),attemptsNum:t(b),notes:t(G),isSport:t(ae)};i.onUpdate(H),r(y,!1)}function ne(){(t(T)==="Flash"||t(T)==="Onsight")&&r(b,1)}const E={Flash:"‚ö°",Onsight:"üëÅÔ∏è",Redpoint:"üî¥",Dogged:"üõ†Ô∏è",DNF:"‚ùå"},j=["Flash","Onsight","Redpoint","Dogged","DNF"];var R=li();let N;var ve=a(R);{var ie=O=>{var H=Ks(),g=a(H),F=a(g);Me(F);var P=s(F,2);Me(P);var Y=s(P,2);{var p=B=>{var fe=Zs(),ce=a(fe);Me(ce),wa(2),e(fe),at(ce,()=>t(ae),De=>r(ae,De)),n(B,fe)};d(Y,B=>{m()&&B(p)})}e(g);var k=s(g,2),A=a(k);A.__change=ne,qe(A,21,()=>j,Ee,(B,fe)=>{var ce=Xs(),De=a(ce,!0);e(ce);var Te={};f(()=>{v(De,t(fe)),Te!==(Te=t(fe))&&(ce.value=(ce.__value=t(fe))??"")}),n(B,ce)}),e(A);var o=s(A,2),_=s(a(o),2);Me(_),e(o),e(k);var L=s(k,2),q=a(L);et(q),e(L);var X=s(L,2),V=a(X);V.__click=Z;var be=s(V,2);be.__click=C,e(X),e(H),f(()=>_.disabled=t(T)==="Flash"||t(T)==="Onsight"),Pe(F,()=>t(c),B=>r(c,B)),Pe(P,()=>t(w),B=>r(w,B)),oa(A,()=>t(T),B=>r(T,B)),Pe(_,()=>t(b),B=>r(b,B)),Pe(q,()=>t(G),B=>r(G,B)),n(O,H)},ue=O=>{var H=ri(),g=ze(H);g.__click=J,g.__keydown=te=>(te.key==="Enter"||te.key===" ")&&J();var F=a(g),P=a(F);let Y;var p=a(P,!0);e(P);var k=s(P,2),A=a(k,!0);e(k);var o=s(k,2);{var _=te=>{var K=Qs(),ye=a(K,!0);e(K),f(()=>v(ye,i.climb.isSport?"Sport":"Boulder")),n(te,K)};d(o,te=>{m()&&te(_)})}var L=s(o,2);{var q=te=>{var K=$s(),ye=a(K);e(K),f(()=>v(ye,`- ${i.climb.notes??""}`)),n(te,K)};d(L,te=>{!t(u)&&i.climb.notes&&te(q)})}e(F);var X=s(F,2),V=a(X);let be;var B=a(V),fe=a(B,!0);e(B);var ce=s(B,2);{var De=te=>{var K=ei(),ye=a(K,!0);e(K),f(()=>v(ye,i.climb.attemptsNum)),n(te,K)};d(ce,te=>{i.climb.attemptType!=="Flash"&&i.climb.attemptType!=="Onsight"&&te(De)})}e(V);var Te=s(V,2);Te.__click=U;var Fe=s(Te,2);Fe.__click=le;var Le=s(Fe,2),Ne=a(Le,!0);e(Le),e(X),e(g);var Ge=s(g,2);{var he=te=>{var K=ni(),ye=a(K);{var we=h=>{var I=ai(),Se=s(a(I),2),je=a(Se,!0);e(Se),e(I),f(()=>v(je,i.climb.notes)),n(h,I)},ee=h=>{var I=ti();n(h,I)};d(ye,h=>{i.climb.notes?h(we):h(ee,!1)})}var oe=s(ye,2),W=a(oe),ge=a(W,!0);e(W);var S=s(W,2);{var _e=h=>{var I=si(),Se=a(I,!0);e(I),f(()=>v(Se,i.climb.wall)),n(h,I)};d(S,h=>{i.climb.wall&&h(_e)})}var z=s(S,2);{var se=h=>{var I=ii(),Se=a(I,!0);e(I),f(()=>v(Se,i.climb.techniqueFocus)),n(h,I)};d(z,h=>{i.climb.techniqueFocus&&h(se)})}var de=s(z,2),xe=a(de,!0);e(de),e(oe),e(K),f(()=>{v(ge,i.climb.isSport?"Sport":"Boulder"),v(xe,i.climb.attemptType)}),Qe(3,K,()=>ea,()=>({duration:150})),n(te,K)};d(Ge,te=>{t(u)&&te(he)})}f(()=>{Re(g,"aria-expanded",t(u)),Y=Ke(P,1,"grade-badge svelte-1k6anfh",null,Y,{sport:i.climb.isSport}),v(p,i.climb.grade),v(A,i.climb.name||"Unnamed Route"),be=Ke(V,1,"attempt-type svelte-1k6anfh",null,be,{flash:i.climb.attemptType==="Flash"}),v(fe,E[i.climb.attemptType]||i.climb.attemptType),v(Ne,t(u)?"‚ñ≤":"‚ñº")}),n(O,H)};d(ve,O=>{t(y)?O(ie):O(ue,!1)})}e(R),f(()=>N=Ke(R,1,"climb-entry svelte-1k6anfh",null,N,{expanded:t(u),editing:t(y)})),n(me,R),Je()}We(["change","click","keydown"]);var oi=l('<div class="sector-meta"> </div>'),di=l('<span class="stat svelte-d5hg2r"> </span>'),ci=l('<span class="status-icon pending svelte-d5hg2r" title="Waiting to sync">üîÑ</span>'),_i=l('<span class="status-icon error svelte-d5hg2r" title="Sync error">‚ö†Ô∏è</span>'),ui=l('<span class="chip svelte-d5hg2r"> </span>'),fi=l('<span class="text-none svelte-d5hg2r">None</span>'),gi=l('<div class="detail-item svelte-d5hg2r"><span class="label svelte-d5hg2r">Difficulty</span> <span class="value svelte-d5hg2r"> </span></div>'),pi=l('<span class="chip svelte-d5hg2r"> </span>'),mi=l('<span class="text-none svelte-d5hg2r">None</span>'),bi=l('<div class="detail-item svelte-d5hg2r"><span class="label svelte-d5hg2r">Category</span> <div class="value-chips svelte-d5hg2r"><!></div></div>'),hi=l('<span class="chip svelte-d5hg2r"> </span>'),yi=l('<span class="text-none svelte-d5hg2r">None</span>'),xi=l('<div class="detail-item svelte-d5hg2r"><span class="label svelte-d5hg2r">Energy System</span> <div class="value-chips svelte-d5hg2r"><!></div></div>'),ki=l('<p class="notes-text"> </p>'),wi=l('<p class="notes-placeholder">No notes.</p>'),Si=l('<div class="metric svelte-d5hg2r"><span class="label svelte-d5hg2r">Open Grip</span> <div class="bar-container svelte-d5hg2r"><div class="bar-fill svelte-d5hg2r"></div></div> <span class="score svelte-d5hg2r"> </span></div>'),qi=l('<div class="metric svelte-d5hg2r"><span class="label svelte-d5hg2r">Crimp Grip</span> <div class="bar-container svelte-d5hg2r"><div class="bar-fill svelte-d5hg2r"></div></div> <span class="score svelte-d5hg2r"> </span></div>'),Di=l('<div class="metric svelte-d5hg2r"><span class="label svelte-d5hg2r">Pinch Grip</span> <div class="bar-container svelte-d5hg2r"><div class="bar-fill svelte-d5hg2r"></div></div> <span class="score svelte-d5hg2r"> </span></div>'),Ti=l('<div class="metric svelte-d5hg2r"><span class="label svelte-d5hg2r">Sloper Grip</span> <div class="bar-container svelte-d5hg2r"><div class="bar-fill svelte-d5hg2r"></div></div> <span class="score svelte-d5hg2r"> </span></div>'),Ci=l('<div class="metric svelte-d5hg2r"><span class="label svelte-d5hg2r">Jug Grip</span> <div class="bar-container svelte-d5hg2r"><div class="bar-fill svelte-d5hg2r"></div></div> <span class="score svelte-d5hg2r"> </span></div>'),Ei=l('<p class="no-climbs svelte-d5hg2r">No climbs logged for this session.</p>'),Fi=l('<div class="card-body svelte-d5hg2r"><div class="details-grid svelte-d5hg2r"><div class="detail-item svelte-d5hg2r"><span class="label svelte-d5hg2r">Training Type</span> <div class="value-chips svelte-d5hg2r"><!></div></div> <!> <!> <!></div> <div class="notes-container svelte-d5hg2r"><div class="notes-header svelte-d5hg2r"><span class="label svelte-d5hg2r">Session Notes</span></div> <!></div> <div class="metrics-container svelte-d5hg2r"><div class="metric svelte-d5hg2r"><span class="label svelte-d5hg2r">Finger Load</span> <div class="bar-container svelte-d5hg2r"><div class="bar-fill svelte-d5hg2r"></div></div> <span class="score svelte-d5hg2r"> </span></div> <div class="metric svelte-d5hg2r"><span class="label svelte-d5hg2r">Shoulder Load</span> <div class="bar-container svelte-d5hg2r"><div class="bar-fill svelte-d5hg2r"></div></div> <span class="score svelte-d5hg2r"> </span></div> <div class="metric svelte-d5hg2r"><span class="label svelte-d5hg2r">Forearm Load</span> <div class="bar-container svelte-d5hg2r"><div class="bar-fill svelte-d5hg2r"></div></div> <span class="score svelte-d5hg2r"> </span></div> <!> <!> <!> <!> <!></div> <div class="climbs-list svelte-d5hg2r"><h4 class="svelte-d5hg2r">Climbs</h4> <div class="climbs-container svelte-d5hg2r"><!> <!></div></div></div>'),zi=l('<div><div class="card-header svelte-d5hg2r" role="button" tabindex="0"><div class="header-main svelte-d5hg2r"><div class="date-badge svelte-d5hg2r"><span class="day svelte-d5hg2r"> </span> <span class="month svelte-d5hg2r"> </span> <span class="year svelte-d5hg2r"> </span></div> <div class="session-info svelte-d5hg2r"><div class="session-text svelte-d5hg2r"><h3 class="location svelte-d5hg2r"> <!></h3> <!> <div class="meta-row svelte-d5hg2r"><span class="time-tag svelte-d5hg2r"> </span> <span class="type-tag svelte-d5hg2r"> </span></div> <div class="meta-row lowercase svelte-d5hg2r"><span class="stat svelte-d5hg2r"> </span> <!></div></div> <div class="load-summary svelte-d5hg2r"><div class="load-badge finger svelte-d5hg2r"> </div> <div class="load-badge shoulder svelte-d5hg2r"> </div> <div class="load-badge forearm svelte-d5hg2r"> </div></div></div></div> <div class="header-actions"><div class="header-status svelte-d5hg2r"><!></div> <button class="btn-icon edit-session" title="Edit Session">‚úèÔ∏è</button> <button class="btn-icon delete-session" title="Delete Session">üóëÔ∏è</button> <span class="chevron svelte-d5hg2r"> </span></div></div> <!> <!> <!></div>');function Li(me,i){Ye(i,!0);let m=D(!1),u=D(!1),y=D(!1);function w(){r(m,!t(m))}function c(){r(u,!0)}function T(){r(y,!0)}function b(){r(y,!1)}async function G(){r(y,!1),await Ua()}async function ae(){try{const h=await dt(i.session.id);h.ok?(r(u,!1),i.onDelete()):(console.error("Failed to delete session:",h.error),alert("Failed to delete session: "+h.error))}catch(h){console.error("Exception deleting session:",h),alert("Error deleting session")}}function J(h){}function le(h,I){}let U=He(()=>i.session.climbs?.length??0),Z=He(()=>(i.session.climbs||[]).reduce((h,I)=>{const Se=parseInt(I.grade.replace(/\D/g,""))||0,je=parseInt(h.replace(/\D/g,""))||0;return Se>je?I.grade:h},"V0"));var C=zi();let ne;var E=a(C);E.__click=w,E.__keydown=h=>h.key==="Enter"&&w();var j=a(E),R=a(j),N=a(R),ve=a(N,!0);e(N);var ie=s(N,2),ue=a(ie,!0);e(ie);var O=s(ie,2),H=a(O,!0);e(O),e(R);var g=s(R,2),F=a(g),P=a(F),Y=a(P),p=s(Y);{var k=h=>{var I=ka();f(()=>v(I,`- ${i.session.crag??""}`)),n(h,I)};d(p,h=>{i.session.crag&&h(k)})}e(P);var A=s(P,2);{var o=h=>{var I=oi(),Se=a(I);e(I),f(()=>v(Se,`üìç ${i.session.sector??""}`)),n(h,I)};d(A,h=>{i.session.sector&&h(o)})}var _=s(A,2),L=a(_),q=a(L);e(L);var X=s(L,2),V=a(X,!0);e(X),e(_);var be=s(_,2),B=a(be),fe=a(B);e(B);var ce=s(B,2);{var De=h=>{var I=di(),Se=a(I);e(I),f(()=>v(Se,`Max: ${t(Z)??""}`)),n(h,I)};d(ce,h=>{t(U)>0&&h(De)})}e(be),e(F);var Te=s(F,2),Fe=a(Te),Le=a(Fe,!0);e(Fe);var Ne=s(Fe,2),Ge=a(Ne,!0);e(Ne);var he=s(Ne,2),te=a(he,!0);e(he),e(Te),e(g),e(j);var K=s(j,2),ye=a(K),we=a(ye);{var ee=h=>{var I=ci();n(h,I)},oe=h=>{var I=Ae(),Se=ze(I);{var je=Oe=>{var aa=_i();n(Oe,aa)};d(Se,Oe=>{i.session.syncStatus==="error"&&Oe(je)},!0)}n(h,I)};d(we,h=>{i.session.syncStatus==="pending"?h(ee):h(oe,!1)})}e(ye);var W=s(ye,2);W.__click=h=>{h.stopPropagation(),T()};var ge=s(W,2);ge.__click=h=>{h.stopPropagation(),c()};var S=s(ge,2),_e=a(S,!0);e(S),e(K),e(E);var z=s(E,2);{var se=h=>{var I=Fi(),Se=a(I),je=a(Se),Oe=s(a(je),2),aa=a(Oe);{var ta=x=>{var M=Ae(),$=ze(M);qe($,17,()=>i.session.trainingTypes,Ee,(ke,pe)=>{var Ce=ui(),Be=a(Ce,!0);e(Ce),f(()=>v(Be,t(pe))),n(ke,Ce)}),n(x,M)},Ca=x=>{var M=fi();n(x,M)};d(aa,x=>{i.session.trainingTypes&&i.session.trainingTypes.length>0&&!i.session.trainingTypes.includes("None")?x(ta):x(Ca,!1)})}e(Oe),e(je);var pa=s(je,2);{var Ea=x=>{var M=gi(),$=s(a(M),2),ke=a($,!0);e($),e(M),f(()=>v(ke,i.session.difficulty)),n(x,M)};d(pa,x=>{i.session.difficulty&&x(Ea)})}var sa=s(pa,2);{var ma=x=>{var M=bi(),$=s(a(M),2),ke=a($);{var pe=Be=>{var Ze=Ae(),ya=ze(Ze);qe(ya,17,()=>i.session.categories,Ee,(Xe,xa)=>{var Aa=pi(),Xa=a(Aa,!0);e(Aa),f(()=>v(Xa,t(xa))),n(Xe,Aa)}),n(Be,Ze)},Ce=Be=>{var Ze=mi();n(Be,Ze)};d(ke,Be=>{i.session.categories.length>0&&!i.session.categories.includes("None")?Be(pe):Be(Ce,!1)})}e($),e(M),n(x,M)};d(sa,x=>{i.session.categories?.length&&x(ma)})}var ba=s(sa,2);{var Fa=x=>{var M=xi(),$=s(a(M),2),ke=a($);{var pe=Be=>{var Ze=Ae(),ya=ze(Ze);qe(ya,17,()=>i.session.energySystems,Ee,(Xe,xa)=>{var Aa=hi(),Xa=a(Aa,!0);e(Aa),f(()=>v(Xa,t(xa))),n(Xe,Aa)}),n(Be,Ze)},Ce=Be=>{var Ze=yi();n(Be,Ze)};d(ke,Be=>{i.session.energySystems.length>0&&!i.session.energySystems.includes("None")?Be(pe):Be(Ce,!1)})}e($),e(M),n(x,M)};d(ba,x=>{i.session.energySystems?.length&&x(Fa)})}e(Se);var ha=s(Se,2),Wa=s(a(ha),2);{var za=x=>{var M=ki(),$=a(M,!0);e(M),f(()=>v($,i.session.notes)),n(x,M)},La=x=>{var M=wi();n(x,M)};d(Wa,x=>{i.session.notes?x(za):x(La,!1)})}e(ha);var va=s(ha,2),ca=a(va),_a=s(a(ca),2),Ga=a(_a);e(_a);var ua=s(_a,2),ja=a(ua);e(ua),e(ca);var Na=s(ca,2),Sa=s(a(Na),2),Ba=a(Sa);e(Sa);var ra=s(Sa,2),Ve=a(ra);e(ra),e(Na);var fa=s(Na,2),ia=s(a(fa),2),qa=a(ia);e(ia);var $e=s(ia,2),la=a($e);e($e),e(fa);var na=s(fa,2);{var Da=x=>{var M=Si(),$=s(a(M),2),ke=a($);e($);var pe=s($,2),Ce=a(pe);e(pe),e(M),f(()=>{Ie(ke,`width: ${i.session.openGrip/5*100}%`),v(Ce,`${i.session.openGrip??""}/5`)}),n(x,M)};d(na,x=>{i.session.openGrip&&x(Da)})}var Oa=s(na,2);{var Ia=x=>{var M=qi(),$=s(a(M),2),ke=a($);e($);var pe=s($,2),Ce=a(pe);e(pe),e(M),f(()=>{Ie(ke,`width: ${i.session.crimpGrip/5*100}%`),v(Ce,`${i.session.crimpGrip??""}/5`)}),n(x,M)};d(Oa,x=>{i.session.crimpGrip&&x(Ia)})}var Ma=s(Oa,2);{var Ra=x=>{var M=Di(),$=s(a(M),2),ke=a($);e($);var pe=s($,2),Ce=a(pe);e(pe),e(M),f(()=>{Ie(ke,`width: ${i.session.pinchGrip/5*100}%`),v(Ce,`${i.session.pinchGrip??""}/5`)}),n(x,M)};d(Ma,x=>{i.session.pinchGrip&&x(Ra)})}var Ta=s(Ma,2);{var Ha=x=>{var M=Ti(),$=s(a(M),2),ke=a($);e($);var pe=s($,2),Ce=a(pe);e(pe),e(M),f(()=>{Ie(ke,`width: ${i.session.sloperGrip/5*100}%`),v(Ce,`${i.session.sloperGrip??""}/5`)}),n(x,M)};d(Ta,x=>{i.session.sloperGrip&&x(Ha)})}var Pa=s(Ta,2);{var Va=x=>{var M=Ci(),$=s(a(M),2),ke=a($);e($);var pe=s($,2),Ce=a(pe);e(pe),e(M),f(()=>{Ie(ke,`width: ${i.session.jugGrip/5*100}%`),v(Ce,`${i.session.jugGrip??""}/5`)}),n(x,M)};d(Pa,x=>{i.session.jugGrip&&x(Va)})}e(va);var Ue=s(va,2),ga=s(a(Ue),2),Za=a(ga);qe(Za,17,()=>i.session.climbs||[],Ee,(x,M,$)=>{{let ke=He(()=>i.session.climbingType==="Mixed");vi(x,{get climb(){return t(M)},onDelete:()=>void 0,onUpdate:pe=>void 0,get showClimbType(){return t(ke)}})}});var Q=s(Za,2);{var re=x=>{var M=Ei();n(x,M)};d(Q,x=>{(i.session.climbs||[]).length===0&&x(re)})}e(ga),e(Ue),e(I),f(()=>{Ie(Ga,`width: ${i.session.fingerLoad/5*100}%`),v(ja,`${i.session.fingerLoad??""}/5`),Ie(Ba,`width: ${i.session.shoulderLoad/5*100}%`),v(Ve,`${i.session.shoulderLoad??""}/5`),Ie(qa,`width: ${i.session.forearmLoad/5*100}%`),v(la,`${i.session.forearmLoad??""}/5`)}),Qe(3,I,()=>ea,()=>({duration:150})),n(h,I)};d(z,h=>{t(m)&&h(se)})}var de=s(z,2);Ya(de,{get isOpen(){return t(u)},title:"Delete Session",message:"Are you sure you want to delete this session? This action cannot be undone.",onConfirm:ae,onCancel:()=>r(u,!1)});var xe=s(de,2);Ja(xe,{get isOpen(){return t(y)},activityType:"outdoor_climb",get initialData(){return i.session},onClose:b,onSaved:G}),e(C),f((h,I,Se)=>{ne=Ke(C,1,"session-card svelte-d5hg2r",null,ne,{expanded:t(m)}),Re(E,"aria-expanded",t(m)),v(ve,h),v(ue,I),v(H,Se),v(Y,`${i.session.area??""} `),v(q,`üïí ${(i.session.time||"12:00")??""}`),v(V,i.session.climbingType),v(fe,`${t(U)??""} climbs`),Re(Fe,"title",`Finger Load: ${i.session.fingerLoad??""}`),v(Le,i.session.fingerLoad),Re(Ne,"title",`Shoulder Load: ${i.session.shoulderLoad??""}`),v(Ge,i.session.shoulderLoad),Re(he,"title",`Forearm Load: ${i.session.forearmLoad??""}`),v(te,i.session.forearmLoad),v(_e,t(m)?"‚ñ≤":"‚ñº")},[()=>new Date(i.session.date).getDate(),()=>new Date(i.session.date).toLocaleDateString(void 0,{month:"short"}),()=>new Date(i.session.date).getFullYear()]),n(me,C),Je()}We(["click","keydown"]);var Gi=l('<span class="spinner svelte-1s7jdlh"></span> Fetching...',1),ji=l('<div class="error-banner svelte-1s7jdlh"> </div>'),Ni=l('<small class="svelte-1s7jdlh">Try adjusting your filters.</small>'),Oi=l('<div class="empty-state svelte-1s7jdlh"><p class="svelte-1s7jdlh">No outdoor climbing sessions found.</p> <!></div>'),Mi=l('<div class="load-more-container svelte-1s7jdlh"><button class="load-more-btn svelte-1s7jdlh"> </button></div>'),Pi=l('<div class="view-container svelte-1s7jdlh"><div class="view-header svelte-1s7jdlh"><h2 class="view-title svelte-1s7jdlh">‚õ∞Ô∏è Outdoor Climbing History</h2> <div class="header-actions svelte-1s7jdlh"><button class="action-btn secondary svelte-1s7jdlh" title="Export filtered data to CSV">üì• Export</button> <button class="action-btn svelte-1s7jdlh" title="Fetch data from cloud"><!></button></div></div> <!> <!> <div class="info-bar svelte-1s7jdlh"><div class="legend-wrapper svelte-1s7jdlh"><!></div> <div class="load-key svelte-1s7jdlh"><span class="key-label svelte-1s7jdlh">Load:</span> <div class="key-item svelte-1s7jdlh"><span class="dot finger svelte-1s7jdlh"></span> Finger</div> <div class="key-item svelte-1s7jdlh"><span class="dot shoulder svelte-1s7jdlh"></span> Shoulder</div> <div class="key-item svelte-1s7jdlh"><span class="dot forearm svelte-1s7jdlh"></span> Forearm</div></div></div> <div class="sessions-list"><!> <!> <!></div></div>');function Ai(me,i){Ye(i,!0);let m=D(da([])),u=D(da([])),y=D(!1),w=D(""),c=D(da({startDate:"",endDate:"",area:"",crag:"",climbingType:"",sessionType:"",grade:""})),T=D(20);const b=20;Ka(()=>{G()});async function G(){r(y,!0),r(w,"");try{const o=await ct();o.ok&&o.data?(r(m,o.data.map(_=>({..._,activityType:"outdoor_climb"})),!0),t(m).sort((_,L)=>new Date(L.date).getTime()-new Date(_.date).getTime()),J()):r(w,o.error||"Failed to fetch data",!0)}catch(o){r(w,o instanceof Error?o.message:"Unknown error",!0)}finally{r(y,!1)}}function ae(o){r(c,o,!0),J()}function J(){r(T,b),r(u,t(m).filter(o=>{if(t(c).startDate&&o.date<t(c).startDate||t(c).endDate&&o.date>t(c).endDate||t(c).area&&!o.area.toLowerCase().includes(t(c).area.toLowerCase())||t(c).crag&&!o.crag.toLowerCase().includes(t(c).crag.toLowerCase()))return!1;if(t(c).climbingType&&(o.climbingType==="Leading"?"Sport":o.climbingType)!==t(c).climbingType)if(o.climbingType==="Mixed")if(t(c).climbingType==="Bouldering"){if(!o.climbs.some(L=>!L.isSport))return!1}else if(t(c).climbingType==="Sport"||t(c).climbingType==="Trad"){if(!o.climbs.some(L=>L.isSport))return!1}else return!1;else return!1;if(t(c).sessionType&&!o.trainingTypes?.includes(t(c).sessionType))return!1;if(t(c).grade){const _=t(c).grade.trim().toLowerCase();if(!o.climbs.some(q=>q.grade.trim().toLowerCase()===_))return!1}return!0}),!0)}function le(){r(T,t(T)+b)}var U=Pi(),Z=a(U),C=s(a(Z),2),ne=a(C);ne.__click=()=>Qa(t(u),"outdoor_climbs");var E=s(ne,2);E.__click=G;var j=a(E);{var R=o=>{var _=Gi();wa(),n(o,_)},N=o=>{var _=ka("‚òÅÔ∏è Fetch Data");n(o,_)};d(j,o=>{t(y)?o(R):o(N,!1)})}e(E),e(C),e(Z);var ve=s(Z,2);{var ie=o=>{var _=ji(),L=a(_,!0);e(_),f(()=>v(L,t(w))),Qe(3,_,()=>ea),n(o,_)};d(ve,o=>{t(w)&&o(ie)})}var ue=s(ve,2);Js(ue,{onFilterParamsChange:ae});var O=s(ue,2),H=a(O),g=a(H);st(g),e(H),wa(2),e(O);var F=s(O,2),P=a(F);qe(P,17,()=>t(u).slice(0,t(T)),o=>o.id,(o,_)=>{Li(o,{get session(){return t(_)},onDelete:G})});var Y=s(P,2);{var p=o=>{var _=Oi(),L=s(a(_),2);{var q=X=>{var V=Ni();n(X,V)};d(L,X=>{t(m).length>0&&X(q)})}e(_),n(o,_)};d(Y,o=>{t(u).length===0&&o(p)})}var k=s(Y,2);{var A=o=>{var _=Mi(),L=a(_);L.__click=le;var q=a(L);e(L),e(_),f(()=>v(q,`Load More (${t(u).length-t(T)} remaining)`)),n(o,_)};d(k,o=>{t(T)<t(u).length&&o(A)})}e(F),e(U),f(()=>E.disabled=t(y)),n(me,U),Je()}We(["click"]);var Bi=l('<span class="chevron svelte-11rkzid">‚ñ≤</span>'),Ii=l('<span class="chevron svelte-11rkzid">‚ñº</span>'),Ri=l('<div class="filter-body svelte-11rkzid"><div class="filter-grid svelte-11rkzid"><div class="filter-item svelte-11rkzid"><label for="start-date" class="svelte-11rkzid">Start Date</label> <input type="date" id="start-date" class="svelte-11rkzid"/></div> <div class="filter-item svelte-11rkzid"><label for="end-date" class="svelte-11rkzid">End Date</label> <input type="date" id="end-date" class="svelte-11rkzid"/></div> <div class="filter-item svelte-11rkzid"><label for="name-filter" class="svelte-11rkzid">Session Name</label> <input type="text" id="name-filter" placeholder="e.g. Leg Day" class="svelte-11rkzid"/></div> <div class="filter-item svelte-11rkzid"><label for="block-filter" class="svelte-11rkzid">Training Block</label> <select id="block-filter" class="svelte-11rkzid"><option>All Blocks</option><option>Strength</option><option>Power</option><option>Power Endurance</option><option>Muscular Endurance</option></select></div></div> <div class="filter-actions svelte-11rkzid"><button class="reset-btn svelte-11rkzid">Reset Filters</button></div></div>'),Vi=l('<div class="filter-container svelte-11rkzid"><button class="filter-header svelte-11rkzid"><div class="header-content svelte-11rkzid"><span class="icon svelte-11rkzid">üîç</span> <span class="title svelte-11rkzid">Filters</span> <!></div></button> <!></div>');function Ui(me,i){Ye(i,!0);let m=D(!1),u=D(""),y=D(""),w=D(""),c=D("");function T(){r(m,!t(m))}function b(){r(u,""),r(y,""),r(w,""),r(c,""),G()}function G(){i.onFilterParamsChange({startDate:t(u),endDate:t(y),name:t(w),trainingBlock:t(c)})}var ae=Vi(),J=a(ae);J.__click=T;var le=a(J),U=s(a(le),4);{var Z=j=>{var R=Bi();n(j,R)},C=j=>{var R=Ii();n(j,R)};d(U,j=>{t(m)?j(Z):j(C,!1)})}e(le),e(J);var ne=s(J,2);{var E=j=>{var R=Ri(),N=a(R),ve=a(N),ie=s(a(ve),2);Me(ie),ie.__change=G,e(ve);var ue=s(ve,2),O=s(a(ue),2);Me(O),O.__change=G,e(ue);var H=s(ue,2),g=s(a(H),2);Me(g),g.__input=G,e(H);var F=s(H,2),P=s(a(F),2);P.__change=G;var Y=a(P);Y.value=Y.__value="";var p=s(Y);p.value=p.__value="Strength";var k=s(p);k.value=k.__value="Power";var A=s(k);A.value=A.__value="Power Endurance";var o=s(A);o.value=o.__value="Muscular Endurance",e(P),e(F),e(N);var _=s(N,2),L=a(_);L.__click=b,e(_),e(R),Pe(ie,()=>t(u),q=>r(u,q)),Pe(O,()=>t(y),q=>r(y,q)),Pe(g,()=>t(w),q=>r(w,q)),oa(P,()=>t(c),q=>r(c,q)),Qe(3,R,()=>ea,()=>({duration:200})),n(j,R)};d(ne,j=>{t(m)&&j(E)})}e(ae),f(()=>Re(J,"aria-expanded",t(m))),n(me,ae),Je()}We(["click","change","input"]);var Wi=l('<span class="block-tag svelte-cirrfc"> </span>'),Hi=l('<span class="status-icon pending svelte-cirrfc" title="Waiting to sync">üîÑ</span>'),Yi=l('<span class="status-icon error svelte-cirrfc" title="Sync error">‚ö†Ô∏è</span>'),Ji=l('<div class="bw-info svelte-cirrfc"><span class="label svelte-cirrfc">Bodyweight:</span> </div>'),Zi=l('<span class="muscle-tag svelte-cirrfc"> </span>'),Xi=l('<span class="muscle-tag svelte-cirrfc"> </span>'),Ki=l('<div class="muscle-tags svelte-cirrfc"><!> <!></div>'),Qi=l('<span class="tag w svelte-cirrfc">W</span>'),$i=l('<span class="tag f svelte-cirrfc">F</span>'),en=l('<span class="tag d svelte-cirrfc">D</span>'),an=l('<div><span class="set-num svelte-cirrfc"></span> <!> <!> <!> <span class="val svelte-cirrfc"><span class="weight"> </span> <span class="x svelte-cirrfc">x</span> <span class="reps"> </span></span></div>'),tn=l('<div class="exercise-item svelte-cirrfc"><div class="exercise-header svelte-cirrfc"><h4 class="svelte-cirrfc"> </h4> <!></div> <div class="sets-grid svelte-cirrfc"></div></div>'),sn=l('<div class="subcategory-group svelte-cirrfc"><h5 class="subcategory-header svelte-cirrfc"> </h5> <!></div>'),nn=l('<div class="category-group svelte-cirrfc"><h4 class="category-header svelte-cirrfc"> </h4> <!></div>'),rn=l('<div class="card-body svelte-cirrfc"><!> <div class="exercises-list svelte-cirrfc"></div></div>'),ln=l('<div><div class="card-header svelte-cirrfc" role="button" tabindex="0"><div class="header-main svelte-cirrfc"><div class="date-badge svelte-cirrfc"><span class="day svelte-cirrfc"> </span> <span class="month svelte-cirrfc"> </span> <span class="year svelte-cirrfc"> </span></div> <div class="session-info svelte-cirrfc"><div class="session-text"><div class="name-display svelte-cirrfc"><h3 class="name svelte-cirrfc"> </h3></div> <div class="session-meta svelte-cirrfc"><span class="time-tag svelte-cirrfc"> </span> <!> <span class="stat svelte-cirrfc"> </span> <span class="stat svelte-cirrfc"> </span> <span class="stat svelte-cirrfc"> </span></div></div></div></div> <div class="header-actions svelte-cirrfc"><div class="header-status"><!></div> <button class="btn-icon edit-session svelte-cirrfc" title="Edit Session">‚úèÔ∏è</button> <button class="btn-icon delete-session svelte-cirrfc" title="Delete Session">üóëÔ∏è</button> <span class="chevron svelte-cirrfc"> </span></div></div> <!></div> <!> <!>',1);function vn(me,i){Ye(i,!0);let m=D(!1),u=D(!1),y=D(!1);function w(){r(m,!t(m))}function c(){r(u,!0)}function T(){r(y,!0)}function b(){r(y,!1)}async function G(){r(y,!1),await Ua()}async function ae(){try{const S=await _t(i.session.id);S.ok?(r(u,!1),i.onDelete()):(console.error("Failed to delete session:",S.error),alert("Failed to delete session"))}catch(S){console.error("Exception deleting session:",S),alert("Error deleting session")}}function J(S){return Dt.find(_e=>_e.name===S)}function le(S){switch(S){case"Strength":return{bg:"rgba(99, 102, 241, 0.1)",color:"#4338ca",border:"rgba(99, 102, 241, 0.2)"};case"Power":return{bg:"rgba(239, 68, 68, 0.1)",color:"#b91c1c",border:"rgba(239, 68, 68, 0.2)"};case"Power Endurance":return{bg:"rgba(245, 158, 11, 0.1)",color:"#b45309",border:"rgba(245, 158, 11, 0.2)"};case"Muscular Endurance":return{bg:"rgba(16, 185, 129, 0.1)",color:"#047857",border:"rgba(16, 185, 129, 0.2)"};default:return{bg:"rgba(107, 114, 128, 0.1)",color:"#374151",border:"rgba(107, 114, 128, 0.2)"}}}let U=He(()=>i.session.exercises?.length??0),Z=He(()=>(i.session.exercises||[]).reduce((S,_e)=>S+(_e.sets?.length||0),0)),C=He(()=>(i.session.exercises||[]).reduce((S,_e)=>S+(_e.sets||[]).reduce((z,se)=>z+(se.weight||0)*(se.reps||0),0),0)),ne=He(()=>(i.session.exercises||[]).reduce((S,_e)=>{const z=J(_e.name),se=z?.category||"Other",de=z?.subcategory||"Misc";return S[se]||(S[se]={}),S[se][de]||(S[se][de]=[]),S[se][de].push(_e),S},{}));var E=ln(),j=ze(E);let R;var N=a(j);N.__click=w,N.__keydown=S=>S.key==="Enter"&&w();var ve=a(N),ie=a(ve),ue=a(ie),O=a(ue,!0);e(ue);var H=s(ue,2),g=a(H,!0);e(H);var F=s(H,2),P=a(F,!0);e(F),e(ie);var Y=s(ie,2),p=a(Y),k=a(p),A=a(k),o=a(A,!0);e(A),e(k);var _=s(k,2),L=a(_),q=a(L);e(L);var X=s(L,2);{var V=S=>{const _e=He(()=>le(i.session.trainingBlock));var z=Wi(),se=a(z,!0);e(z),f(()=>{Ie(z,`--bg-color: ${t(_e).bg??""}; --text-color: ${t(_e).color??""}; --border-color: ${t(_e).border??""};`),v(se,i.session.trainingBlock)}),n(S,z)};d(X,S=>{i.session.trainingBlock&&S(V)})}var be=s(X,2),B=a(be);e(be);var fe=s(be,2),ce=a(fe);e(fe);var De=s(fe,2),Te=a(De);e(De),e(_),e(p),e(Y),e(ve);var Fe=s(ve,2),Le=a(Fe),Ne=a(Le);{var Ge=S=>{var _e=Hi();n(S,_e)},he=S=>{var _e=Ae(),z=ze(_e);{var se=de=>{var xe=Yi();n(de,xe)};d(z,de=>{i.session.syncStatus==="error"&&de(se)},!0)}n(S,_e)};d(Ne,S=>{i.session.syncStatus==="pending"?S(Ge):S(he,!1)})}e(Le);var te=s(Le,2);te.__click=S=>{S.stopPropagation(),T()};var K=s(te,2);K.__click=S=>{S.stopPropagation(),c()};var ye=s(K,2),we=a(ye,!0);e(ye),e(Fe),e(N);var ee=s(N,2);{var oe=S=>{var _e=rn(),z=a(_e);{var se=xe=>{var h=Ji(),I=s(a(h));e(h),f(()=>v(I,` ${i.session.bodyweight??""}kg`)),n(xe,h)};d(z,xe=>{i.session.bodyweight&&xe(se)})}var de=s(z,2);qe(de,21,()=>Object.entries(t(ne)),Ee,(xe,h)=>{var I=He(()=>$a(t(h),2));let Se=()=>t(I)[0],je=()=>t(I)[1];var Oe=nn(),aa=a(Oe),ta=a(aa,!0);e(aa);var Ca=s(aa,2);qe(Ca,17,()=>Object.entries(je()),Ee,(pa,Ea)=>{var sa=He(()=>$a(t(Ea),2));let ma=()=>t(sa)[0],ba=()=>t(sa)[1];var Fa=sn(),ha=a(Fa),Wa=a(ha,!0);e(ha);var za=s(ha,2);qe(za,17,ba,Ee,(La,va)=>{const ca=He(()=>J(t(va).name));var _a=tn(),Ga=a(_a),ua=a(Ga),ja=a(ua,!0);e(ua);var Na=s(ua,2);{var Sa=ra=>{var Ve=Ki(),fa=a(Ve);qe(fa,17,()=>t(ca).targetMuscles.slice(0,3),Ee,($e,la)=>{var na=Zi(),Da=a(na,!0);e(na),f(()=>v(Da,t(la))),n($e,na)});var ia=s(fa,2);{var qa=$e=>{var la=Xi(),na=a(la);e(la),f(()=>v(na,`+${t(ca).targetMuscles.length-3}`)),n($e,la)};d(ia,$e=>{t(ca).targetMuscles.length>3&&$e(qa)})}e(Ve),n(ra,Ve)};d(Na,ra=>{t(ca)&&ra(Sa)})}e(Ga);var Ba=s(Ga,2);qe(Ba,21,()=>t(va).sets,Ee,(ra,Ve,fa)=>{var ia=an();let qa;var $e=a(ia);$e.textContent=fa+1;var la=s($e,2);{var na=Ue=>{var ga=Qi();n(Ue,ga)};d(la,Ue=>{t(Ve).isWarmup&&Ue(na)})}var Da=s(la,2);{var Oa=Ue=>{var ga=$i();n(Ue,ga)};d(Da,Ue=>{t(Ve).isFailure&&Ue(Oa)})}var Ia=s(Da,2);{var Ma=Ue=>{var ga=en();n(Ue,ga)};d(Ia,Ue=>{t(Ve).isDropSet&&Ue(Ma)})}var Ra=s(Ia,2),Ta=a(Ra),Ha=a(Ta);e(Ta);var Pa=s(Ta,4),Va=a(Pa,!0);e(Pa),e(Ra),e(ia),f(()=>{qa=Ke(ia,1,"set-pill svelte-cirrfc",null,qa,{completed:t(Ve).completed,warmup:t(Ve).isWarmup}),v(Ha,`${t(Ve).weight??""}kg`),v(Va,t(Ve).reps)}),n(ra,ia)}),e(Ba),e(_a),f(()=>v(ja,t(va).name)),n(La,_a)}),e(Fa),f(()=>v(Wa,ma())),n(pa,Fa)}),e(Oe),f(()=>v(ta,Se())),n(xe,Oe)}),e(de),e(_e),Qe(3,_e,()=>ea,()=>({duration:150})),n(S,_e)};d(ee,S=>{t(m)&&S(oe)})}e(j);var W=s(j,2);Ya(W,{get isOpen(){return t(u)},title:"Delete Session",message:"Are you sure you want to delete this session? This cannot be undone.",onConfirm:ae,onCancel:()=>r(u,!1)});var ge=s(W,2);Ja(ge,{get isOpen(){return t(y)},activityType:"gym_session",get initialData(){return i.session},onClose:b,onSaved:G}),f((S,_e,z,se)=>{R=Ke(j,1,"session-card svelte-cirrfc",null,R,{expanded:t(m)}),Re(N,"aria-expanded",t(m)),v(O,S),v(g,_e),v(P,z),v(o,i.session.name),v(q,`üïí ${(i.session.time||"12:00")??""}`),v(B,`${t(U)??""} Exercises`),v(ce,`${t(Z)??""} Sets`),v(Te,`~${se??""}kg Vol`),v(we,t(m)?"‚ñ≤":"‚ñº")},[()=>new Date(i.session.date).getDate(),()=>new Date(i.session.date).toLocaleDateString("en-GB",{month:"short"}),()=>new Date(i.session.date).getFullYear(),()=>Math.round(t(C)).toLocaleString()]),n(me,E),Je()}We(["click","keydown"]);var on=l('<span class="spinner svelte-133enjd"></span> Fetching...',1),dn=l('<div class="error-banner svelte-133enjd"> </div>'),cn=l('<small class="svelte-133enjd">Try adjusting your filters.</small>'),_n=l('<div class="empty-state svelte-133enjd"><p class="svelte-133enjd">No gym sessions found.</p> <!></div>'),un=l('<div class="load-more-container svelte-133enjd"><button class="load-more-btn svelte-133enjd"> </button></div>'),fn=l('<div class="view-container svelte-133enjd"><div class="view-header svelte-133enjd"><h2 class="view-title svelte-133enjd">üèãÔ∏è Gym Session History</h2> <div class="header-actions svelte-133enjd"><button class="action-btn secondary svelte-133enjd" title="Export filtered data to CSV">üì• Export</button> <button class="action-btn svelte-133enjd" title="Fetch data from cloud"><!></button></div></div> <!> <!> <div class="sessions-list"><!> <!> <!></div></div>');function gn(me,i){Ye(i,!0);let m=D(da([])),u=D(da([])),y=D(!1),w=D(""),c=D(da({startDate:"",endDate:"",name:"",trainingBlock:""})),T=D(20);const b=20;Ka(()=>{G()});async function G(){r(y,!0),r(w,"");try{const p=await ut();p.ok&&p.data?(r(m,p.data.map(k=>({...k,activityType:"gym_session"})),!0),t(m).sort((k,A)=>new Date(A.date).getTime()-new Date(k.date).getTime()),J()):r(w,p.error||"Failed to fetch data",!0)}catch(p){r(w,p instanceof Error?p.message:"Unknown error",!0)}finally{r(y,!1)}}function ae(p){r(c,p,!0),J()}function J(){r(T,b),r(u,t(m).filter(p=>!(t(c).startDate&&p.date<t(c).startDate||t(c).endDate&&p.date>t(c).endDate||t(c).name&&!p.name.toLowerCase().includes(t(c).name.toLowerCase())||t(c).trainingBlock&&p.trainingBlock!==t(c).trainingBlock)),!0)}function le(){r(T,t(T)+b)}var U=fn(),Z=a(U),C=s(a(Z),2),ne=a(C);ne.__click=()=>Qa(t(u),"gym_sessions");var E=s(ne,2);E.__click=G;var j=a(E);{var R=p=>{var k=on();wa(),n(p,k)},N=p=>{var k=ka("‚òÅÔ∏è Fetch Data");n(p,k)};d(j,p=>{t(y)?p(R):p(N,!1)})}e(E),e(C),e(Z);var ve=s(Z,2);{var ie=p=>{var k=dn(),A=a(k,!0);e(k),f(()=>v(A,t(w))),Qe(3,k,()=>ea),n(p,k)};d(ve,p=>{t(w)&&p(ie)})}var ue=s(ve,2);Ui(ue,{onFilterParamsChange:ae});var O=s(ue,2),H=a(O);qe(H,17,()=>t(u).slice(0,t(T)),p=>p.id,(p,k)=>{vn(p,{get session(){return t(k)},onDelete:G})});var g=s(H,2);{var F=p=>{var k=_n(),A=s(a(k),2);{var o=_=>{var L=cn();n(_,L)};d(A,_=>{t(m).length>0&&_(o)})}e(k),n(p,k)};d(g,p=>{t(u).length===0&&p(F)})}var P=s(g,2);{var Y=p=>{var k=un(),A=a(k);A.__click=le;var o=a(A);e(A),e(k),f(()=>v(o,`Load More (${t(u).length-t(T)} remaining)`)),n(p,k)};d(P,p=>{t(T)<t(u).length&&p(Y)})}e(O),e(U),f(()=>E.disabled=t(y)),n(me,U),Je()}We(["click"]);var pn=l('<span class="set-tag svelte-1tiisng"> <span class="x svelte-1tiisng">x</span> </span>'),mn=l('<div class="ex-notes svelte-1tiisng"> </div>'),bn=l('<div class="exercise-item svelte-1tiisng"><div class="ex-header svelte-1tiisng"><div class="ex-title-group svelte-1tiisng"><span class="ex-name svelte-1tiisng"> </span> <span class="ex-grip svelte-1tiisng"> </span></div></div> <div class="ex-sets svelte-1tiisng"></div> <!></div>'),hn=l('<div class="card-body svelte-1tiisng"><div class="exercises-list svelte-1tiisng"></div></div>'),yn=l('<div><div class="card-header svelte-1tiisng" role="button" tabindex="0"><div class="header-main svelte-1tiisng"><span class="session-date svelte-1tiisng"> <span class="time-tag svelte-1tiisng"> </span></span> <span class="meta svelte-1tiisng"><!> </span></div> <div class="header-status svelte-1tiisng"><span>‚óè</span> <button class="btn-icon edit-session svelte-1tiisng" title="Edit Session">‚úèÔ∏è</button> <button class="btn-icon delete-btn svelte-1tiisng" title="Delete Session">üóëÔ∏è</button> <span class="chevron svelte-1tiisng"> </span></div></div> <!></div> <!> <!>',1);function xn(me,i){Ye(i,!0);let m=D(!1),u=D(!1),y=D(!1);function w(){r(m,!t(m))}function c(){r(u,!0)}function T(){r(y,!0)}function b(){r(y,!1)}async function G(){r(y,!1),await Ua()}async function ae(){try{const q=await ft(i.session.id);q.ok?(r(u,!1),i.onDelete()):(console.error("Failed to delete session:",q.error),alert("Failed to delete session"))}catch(q){console.error("Exception deleting session:",q),alert("Error deleting session")}}function J(q){return q.exercises.reduce((X,V)=>X+V.details.length,0)}var le=yn(),U=ze(le);let Z;var C=a(U);C.__click=w,C.__keydown=q=>q.key==="Enter"&&w();var ne=a(C),E=a(ne),j=a(E),R=s(j),N=a(R,!0);e(R),e(E);var ve=s(E,2),ie=a(ve);{var ue=q=>{var X=ka();f(()=>v(X,`${i.session.location??""} ¬∑`)),n(q,X)};d(ie,q=>{i.session.location&&i.session.location!=="N/A"&&i.session.location!=="Home"&&q(ue)})}var O=s(ie);e(ve),e(ne);var H=s(ne,2),g=a(H);let F;var P=s(g,2);P.__click=q=>{q.stopPropagation(),T()};var Y=s(P,2);Y.__click=q=>{q.stopPropagation(),c()};var p=s(Y,2),k=a(p,!0);e(p),e(H),e(C);var A=s(C,2);{var o=q=>{var X=hn(),V=a(X);qe(V,21,()=>i.session.exercises||[],Ee,(be,B)=>{var fe=bn(),ce=a(fe),De=a(ce),Te=a(De),Fe=a(Te,!0);e(Te);var Le=s(Te,2),Ne=a(Le,!0);e(Le),e(De),e(ce);var Ge=s(ce,2);qe(Ge,21,()=>t(B).details,Ee,(K,ye)=>{var we=pn(),ee=a(we),oe=s(ee,2);e(we),f(()=>{v(ee,`${t(ye).weight>0?`+${t(ye).weight}kg`:"BW"} `),v(oe,` ${t(ye).reps??""}s/reps`)}),n(K,we)}),e(Ge);var he=s(Ge,2);{var te=K=>{var ye=mn(),we=a(ye);e(ye),f(()=>v(we,`"${t(B).notes??""}"`)),n(K,ye)};d(he,K=>{t(B).notes&&K(te)})}e(fe),f(()=>{v(Fe,t(B).name),v(Ne,t(B).gripType)}),n(be,fe)}),e(V),e(X),Qe(3,X,()=>ea,()=>({duration:150})),n(q,X)};d(A,q=>{t(m)&&q(o)})}e(U);var _=s(U,2);Ya(_,{get isOpen(){return t(u)},title:"Delete Fingerboard Session",message:"Are you sure you want to delete this session? This cannot be undone.",onConfirm:ae,onCancel:()=>r(u,!1)});var L=s(_,2);Ja(L,{get isOpen(){return t(y)},activityType:"fingerboarding",get initialData(){return i.session},onClose:b,onSaved:G}),f((q,X)=>{Z=Ke(U,1,"session-card svelte-1tiisng",null,Z,{expanded:t(m)}),v(j,`${q??""} `),v(N,i.session.time||"12:00"),v(O,` ${i.session.exercises.length??""} Exercises ¬∑ ${X??""} Sets`),F=Ke(g,1,"sync-dot svelte-1tiisng",null,F,{synced:i.session.syncStatus==="synced"}),Re(g,"title",i.session.syncStatus==="synced"?"Synced":"Local"),v(k,t(m)?"‚ñ≤":"‚ñº")},[()=>new Date(i.session.date).toLocaleDateString(void 0,{weekday:"short",month:"short",day:"numeric",year:"numeric"}),()=>J(i.session)]),n(me,le),Je()}We(["click","keydown"]);var kn=l('<span class="spinner svelte-1szs0u9"></span> Fetching...',1),wn=l('<div class="loading svelte-1szs0u9">Loading sessions...</div>'),Sn=l('<div class="empty-state svelte-1szs0u9"><!></div>'),qn=l('<div class="load-more-container svelte-1szs0u9"><button class="load-more-btn svelte-1szs0u9"> </button></div>'),Dn=l('<div class="timeline svelte-1szs0u9"><!> <!></div>'),Tn=l('<div class="view-content svelte-1szs0u9"><div class="header svelte-1szs0u9"><h3 class="svelte-1szs0u9">ü§è Fingerboarding Log</h3> <button class="fetch-btn svelte-1szs0u9" title="Fetch data from cloud"><!></button></div> <div class="filters svelte-1szs0u9"><div class="filter-group svelte-1szs0u9"><label for="start-date" class="svelte-1szs0u9">From</label> <input type="date" id="start-date" class="svelte-1szs0u9"/></div> <div class="filter-group svelte-1szs0u9"><label for="end-date" class="svelte-1szs0u9">To</label> <input type="date" id="end-date" class="svelte-1szs0u9"/></div></div> <!></div>');function Cn(me,i){Ye(i,!0);let m=D(da([])),u=D(!0),y=D(""),w=D(""),c=D(20);const T=20;rt(()=>{t(y),t(w),r(c,T)});async function b(){r(u,!0);try{const g=await gt();g.ok&&g.data&&r(m,g.data.map(F=>({...F,activityType:"fingerboarding",syncStatus:"synced"})).sort((F,P)=>new Date(P.date).getTime()-new Date(F.date).getTime()),!0)}catch(g){console.error("Failed to fetch sessions",g)}finally{r(u,!1)}}b();let G=He(()=>t(m).filter(g=>!(t(y)&&new Date(g.date)<new Date(t(y))||t(w)&&new Date(g.date)>new Date(t(w)))));function ae(){r(c,t(c)+T)}function J(){b()}var le=Tn(),U=a(le),Z=s(a(U),2);Z.__click=b;var C=a(Z);{var ne=g=>{var F=kn();wa(),n(g,F)},E=g=>{var F=ka("‚òÅÔ∏è Fetch Data");n(g,F)};d(C,g=>{t(u)?g(ne):g(E,!1)})}e(Z),e(U);var j=s(U,2),R=a(j),N=s(a(R),2);Me(N),e(R);var ve=s(R,2),ie=s(a(ve),2);Me(ie),e(ve),e(j);var ue=s(j,2);{var O=g=>{var F=wn();n(g,F)},H=g=>{var F=Ae(),P=ze(F);{var Y=k=>{var A=Sn(),o=a(A);{var _=q=>{var X=ka("No sessions match filter.");n(q,X)},L=q=>{var X=ka("No fingerboarding sessions logged yet.");n(q,X)};d(o,q=>{t(m).length>0?q(_):q(L,!1)})}e(A),n(k,A)},p=k=>{var A=Dn(),o=a(A);qe(o,17,()=>t(G).slice(0,t(c)),Ee,(q,X)=>{xn(q,{get session(){return t(X)},onDelete:J})});var _=s(o,2);{var L=q=>{var X=qn(),V=a(X);V.__click=ae;var be=a(V);e(V),e(X),f(()=>v(be,`Load More (${t(G).length-t(c)} remaining)`)),n(q,X)};d(_,q=>{t(c)<t(G).length&&q(L)})}e(A),n(k,A)};d(P,k=>{t(G).length===0?k(Y):k(p,!1)},!0)}n(g,F)};d(ue,g=>{t(u)&&t(m).length===0?g(O):g(H,!1)})}e(le),f(()=>Z.disabled=t(u)),Pe(N,()=>t(y),g=>r(y,g)),Pe(ie,()=>t(w),g=>r(w,g)),n(me,le),Je()}We(["click"]);var En=l('<div class="notes-section svelte-5f8qag"><div class="notes-display svelte-5f8qag"><span class="note-icon svelte-5f8qag">üìù</span> <p class="svelte-5f8qag"> </p></div></div>'),Fn=l('<span class="position-badge svelte-5f8qag"> </span>'),zn=l('<span class="climb-attempts svelte-5f8qag"> </span>'),Ln=l('<div><span class="climb-name svelte-5f8qag"> </span> <span class="climb-status"> </span> <!></div>'),Gn=l('<div class="climbs-grid svelte-5f8qag"></div>'),jn=l('<div class="round-card svelte-5f8qag"><div class="round-header svelte-5f8qag"><h4 class="svelte-5f8qag"> </h4> <!></div> <!></div>'),Nn=l('<div class="card-body svelte-5f8qag"><div class="loads-row svelte-5f8qag"><div class="load-item svelte-5f8qag"><span class="label svelte-5f8qag">Fingers</span> <div class="bar-container svelte-5f8qag"><div class="bar svelte-5f8qag"></div></div></div> <div class="load-item svelte-5f8qag"><span class="label svelte-5f8qag">Shoulders</span> <div class="bar-container svelte-5f8qag"><div class="bar svelte-5f8qag"></div></div></div> <div class="load-item svelte-5f8qag"><span class="label svelte-5f8qag">Forearms</span> <div class="bar-container svelte-5f8qag"><div class="bar svelte-5f8qag"></div></div></div></div> <!> <div class="rounds-list svelte-5f8qag"></div></div>'),On=l('<div><div class="card-header svelte-5f8qag" role="button" tabindex="0"><div class="header-main svelte-5f8qag"><span class="session-date svelte-5f8qag"> <span class="type-tag svelte-5f8qag"> </span></span> <div class="venue-row svelte-5f8qag"><span class="venue"> </span> <span class="result-summary svelte-5f8qag"> </span></div></div> <div class="header-status svelte-5f8qag"><span>‚óè</span> <button class="btn-icon edit-session svelte-5f8qag" title="Edit Session">‚úèÔ∏è</button> <button class="btn-icon delete-btn svelte-5f8qag" title="Delete Session">üóëÔ∏è</button> <span class="chevron svelte-5f8qag"> </span></div></div> <!></div> <!> <!>',1);function Mn(me,i){Ye(i,!0);let m=D(!1),u=D(!1),y=D(!1);function w(){r(m,!t(m))}function c(){r(u,!0)}function T(){r(y,!0)}function b(){r(y,!1)}async function G(){r(y,!1),await Ua()}async function ae(){try{const V=await pt(i.session.id);V.ok?(r(u,!1),await Ua()):(console.error("Failed to delete session:",V.error),alert("Failed to delete session"))}catch(V){console.error("Exception deleting session:",V),alert("Error deleting session")}}function J(V){if(!V.rounds||V.rounds.length===0)return"No rounds";const be=V.rounds[V.rounds.length-1];if(be.position)return`#${be.position} ${be.name}`;if(be.climbs){const B=be.climbs.filter(ce=>ce.status==="Top"||ce.status==="Flash").length,fe=be.climbs.filter(ce=>ce.status==="Zone").length;return`${V.rounds.length} Rnds ¬∑ Final: ${B}T ${fe+B}Z`}return be.name}function le(V){switch(V){case"Flash":return"status-flash";case"Top":return"status-top";case"Zone":return"status-zone";default:return"status-attempt"}}var U=On(),Z=ze(U);let C;var ne=a(Z);ne.__click=w,ne.__keydown=V=>V.key==="Enter"&&w();var E=a(ne),j=a(E),R=a(j),N=s(R),ve=a(N,!0);e(N),e(j);var ie=s(j,2),ue=a(ie),O=a(ue,!0);e(ue);var H=s(ue,2),g=a(H,!0);e(H),e(ie),e(E);var F=s(E,2),P=a(F);let Y;var p=s(P,2);p.__click=V=>{V.stopPropagation(),T()};var k=s(p,2);k.__click=V=>{V.stopPropagation(),c()};var A=s(k,2),o=a(A,!0);e(A),e(F),e(ne);var _=s(ne,2);{var L=V=>{var be=Nn(),B=a(be),fe=a(B),ce=s(a(fe),2),De=a(ce);e(ce),e(fe);var Te=s(fe,2),Fe=s(a(Te),2),Le=a(Fe);e(Fe),e(Te);var Ne=s(Te,2),Ge=s(a(Ne),2),he=a(Ge);e(Ge),e(Ne),e(B);var te=s(B,2);{var K=we=>{var ee=En(),oe=a(ee),W=s(a(oe),2),ge=a(W,!0);e(W),e(oe),e(ee),f(()=>v(ge,i.session.notes)),n(we,ee)};d(te,we=>{i.session.notes&&we(K)})}var ye=s(te,2);qe(ye,21,()=>i.session.rounds,Ee,(we,ee)=>{var oe=jn(),W=a(oe),ge=a(W),S=a(ge,!0);e(ge);var _e=s(ge,2);{var z=xe=>{var h=Fn(),I=a(h);e(h),f(()=>v(I,`#${t(ee).position??""}`)),n(xe,h)};d(_e,xe=>{t(ee).position&&xe(z)})}e(W);var se=s(W,2);{var de=xe=>{var h=Gn();qe(h,21,()=>t(ee).climbs,Ee,(I,Se)=>{var je=Ln(),Oe=a(je),aa=a(Oe,!0);e(Oe);var ta=s(Oe,2),Ca=a(ta,!0);e(ta);var pa=s(ta,2);{var Ea=sa=>{var ma=zn(),ba=a(ma);e(ma),f(()=>v(ba,`(${t(Se).attemptCount??""})`)),n(sa,ma)};d(pa,sa=>{t(Se).attemptCount>1&&sa(Ea)})}e(je),f(sa=>{Ke(je,1,`climb-chip ${sa??""}`,"svelte-5f8qag"),v(aa,t(Se).name),v(Ca,t(Se).status)},[()=>le(t(Se).status)]),n(I,je)}),e(h),n(xe,h)};d(se,xe=>{t(ee).climbs&&t(ee).climbs.length>0&&xe(de)})}e(oe),f(()=>v(S,t(ee).name)),n(we,oe)}),e(ye),e(be),f(()=>{Ie(De,`width: ${(i.session.fingerLoad||0)*20}%`),Ie(Le,`width: ${(i.session.shoulderLoad||0)*20}%`),Ie(he,`width: ${(i.session.forearmLoad||0)*20}%`)}),Qe(3,be,()=>ea,()=>({duration:150})),n(V,be)};d(_,V=>{t(m)&&V(L)})}e(Z);var q=s(Z,2);Ya(q,{get isOpen(){return t(u)},title:"Delete Competition Session",message:"Are you sure you want to delete this session? This cannot be undone.",onConfirm:ae,onCancel:()=>r(u,!1)});var X=s(q,2);Ja(X,{get isOpen(){return t(y)},activityType:"competition",get initialData(){return i.session},onClose:b,onSaved:G}),f((V,be)=>{C=Ke(Z,1,"session-card svelte-5f8qag",null,C,{expanded:t(m)}),v(R,`${V??""} `),v(ve,i.session.type),v(O,i.session.venue==="Other"?i.session.customVenue:i.session.venue),v(g,be),Y=Ke(P,1,"sync-dot svelte-5f8qag",null,Y,{synced:i.session.syncStatus==="synced"}),Re(P,"title",i.session.syncStatus==="synced"?"Synced":"Local"),v(o,t(m)?"‚ñ≤":"‚ñº")},[()=>new Date(i.session.date).toLocaleDateString(void 0,{weekday:"short",month:"short",day:"numeric",year:"numeric"}),()=>J(i.session)]),n(me,U),Je()}We(["click","keydown"]);var Pn=l('<span class="spinner svelte-xyvf5r"></span> Fetching...',1),An=l('<div class="loading svelte-xyvf5r">Loading sessions...</div>'),Bn=l('<div class="empty-state svelte-xyvf5r">No competitions logged yet.</div>'),In=l('<div class="load-more-container svelte-xyvf5r"><button class="load-more-btn svelte-xyvf5r"> </button></div>'),Rn=l('<div class="timeline svelte-xyvf5r"><!> <!></div>'),Vn=l('<div class="view-content svelte-xyvf5r"><div class="header svelte-xyvf5r"><h3 class="svelte-xyvf5r">üèÜ Competition Log</h3> <button class="fetch-btn svelte-xyvf5r" title="Fetch data from cloud"><!></button></div> <!></div>');function Un(me,i){Ye(i,!0);let m=D(da([])),u=D(!0),y=D(20);const w=20;async function c(){r(u,!0),r(y,w);try{const E=await mt();E.ok&&E.data&&r(m,E.data.map(j=>({...j,activityType:"competition",syncStatus:"synced",type:j.type,rounds:j.rounds.map(R=>({...R,climbs:R.climbs?.map(N=>({...N,status:N.status}))}))})).sort((j,R)=>new Date(R.date).getTime()-new Date(j.date).getTime()),!0)}catch(E){console.error("Failed to fetch sessions",E)}finally{r(u,!1)}}c();function T(){r(y,t(y)+w)}var b=Vn(),G=a(b),ae=s(a(G),2);ae.__click=c;var J=a(ae);{var le=E=>{var j=Pn();wa(),n(E,j)},U=E=>{var j=ka("‚òÅÔ∏è Fetch Data");n(E,j)};d(J,E=>{t(u)?E(le):E(U,!1)})}e(ae),e(G);var Z=s(G,2);{var C=E=>{var j=An();n(E,j)},ne=E=>{var j=Ae(),R=ze(j);{var N=ie=>{var ue=Bn();n(ie,ue)},ve=ie=>{var ue=Rn(),O=a(ue);qe(O,17,()=>t(m).slice(0,t(y)),Ee,(F,P)=>{Mn(F,{get session(){return t(P)}})});var H=s(O,2);{var g=F=>{var P=In(),Y=a(P);Y.__click=T;var p=a(Y);e(Y),e(P),f(()=>v(p,`Load More (${t(m).length-t(y)} remaining)`)),n(F,P)};d(H,F=>{t(y)<t(m).length&&F(g)})}e(ue),n(ie,ue)};d(R,ie=>{t(m).length===0?ie(N):ie(ve,!1)},!0)}n(E,j)};d(Z,E=>{t(u)&&t(m).length===0?E(C):E(ne,!1)})}e(b),f(()=>ae.disabled=t(u)),n(me,b),Je()}We(["click"]);var Wn=l("<option> </option>"),Hn=l('<div class="view-container svelte-108px9u"><!></div>'),Yn=l('<div class="page svelte-108px9u"><div class="page-header svelte-108px9u"><div><h1 class="svelte-108px9u">üìä View Data</h1> <p class="subtitle svelte-108px9u">Browse your training history</p></div></div> <div class="content-card svelte-108px9u"><div class="form-group svelte-108px9u"><label for="activity-type" class="svelte-108px9u">Activity Type</label> <select id="activity-type" class="svelte-108px9u"><option disabled>Select an activity...</option><!></select></div> <!></div></div>');function ir(me){const i=[{value:"indoor_climb",label:"Indoor Climb",icon:"üßó"},{value:"outdoor_climb",label:"Outdoor Climb",icon:"‚õ∞Ô∏è"},{value:"gym_session",label:"Gym Session",icon:"üèãÔ∏è"},{value:"fingerboarding",label:"Fingerboarding",icon:"ü§è"},{value:"competition",label:"Competition",icon:"üèÜ"}];let m=D("");var u=Yn(),y=s(a(u),2),w=a(y),c=s(a(w),2),T=a(c);T.value=T.__value="";var b=s(T);qe(b,17,()=>i,J=>J.value,(J,le)=>{var U=Wn(),Z=a(U);e(U);var C={};f(()=>{v(Z,`${t(le).icon??""} ${t(le).label??""}`),C!==(C=t(le).value)&&(U.value=(U.__value=t(le).value)??"")}),n(J,U)}),e(c),e(w);var G=s(w,2);{var ae=J=>{var le=Hn(),U=a(le);{var Z=ne=>{js(ne,{})},C=ne=>{var E=Ae(),j=ze(E);{var R=ve=>{Ai(ve,{})},N=ve=>{var ie=Ae(),ue=ze(ie);{var O=g=>{gn(g,{})},H=g=>{var F=Ae(),P=ze(F);{var Y=k=>{Cn(k,{})},p=k=>{var A=Ae(),o=ze(A);{var _=L=>{Un(L,{})};d(o,L=>{t(m)==="competition"&&L(_)},!0)}n(k,A)};d(P,k=>{t(m)==="fingerboarding"?k(Y):k(p,!1)},!0)}n(g,F)};d(ue,g=>{t(m)==="gym_session"?g(O):g(H,!1)},!0)}n(ve,ie)};d(j,ve=>{t(m)==="outdoor_climb"?ve(R):ve(N,!1)},!0)}n(ne,E)};d(U,ne=>{t(m)==="indoor_climb"?ne(Z):ne(C,!1)})}e(le),n(J,le)};d(G,J=>{t(m)&&J(ae)})}e(y),e(u),oa(c,()=>t(m),J=>r(m,J)),n(me,u)}export{ir as component};
