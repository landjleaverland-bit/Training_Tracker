import{f as l,a as n,c as Ue,t as Sa}from"../chunks/DlIpowWv.js";import{a2 as is,k as ns,p as $e,c as a,s as t,g as s,e as D,r as e,t as _,a as ea,d as r,b1 as es,f as Pe,as as qa,aM as Qe,A as ga,o as Ka,b8 as $a,j as rs}from"../chunks/BSXnj9bA.js";import{d as Ke,s as v,e as ls}from"../chunks/DY3SdbM1.js";import{i as d}from"../chunks/Bnb5Vf_a.js";import{i as He,r as Re,e as Ce,j as Le}from"../chunks/DBB2y30b.js";import{c as Ve,b as ua,d as as,q as vs,h as Ne,r as os,t as ds,v as cs,w as _s,j as us,x as gs,y as fs,z as ps,A as ms}from"../chunks/BHK6Hdfp.js";import{t as na,s as la,I as bs,f as hs,O as ys,G as xs,F as ws,C as ks,D as Ja,g as Ss,a as qs,E as Ds}from"../chunks/Bhldz7J_.js";import{s as ia}from"../chunks/C5lbgwQY.js";import{i as Ua}from"../chunks/Dz_Zvk3U.js";import{p as ss}from"../chunks/DrybqwuO.js";function Ts(xe,i,m){is(()=>{var g=ns(()=>i(xe,m?.())||{});if(g?.destroy)return()=>g.destroy()})}var Cs=l('<span class="chevron svelte-12crvy">‚ñ≤</span>'),Fs=l('<span class="chevron svelte-12crvy">‚ñº</span>'),Es=l('<div class="input-with-action svelte-12crvy"><input type="text" id="location-manual" placeholder="Custom location..." class="flat-left svelte-12crvy"/> <button type="button" class="action-btn flat-right svelte-12crvy" title="Back to list">‚úï</button></div>'),zs=l("<option> </option>"),Ls=l('<select id="location-filter" class="svelte-12crvy"><option>Any Location</option><!></select>'),Gs=l("<option> </option>"),js=l("<option> </option>"),Os=l('<div class="filter-body svelte-12crvy"><div class="filter-grid svelte-12crvy"><div class="filter-item svelte-12crvy"><label for="start-date" class="svelte-12crvy">Start Date</label> <input type="date" id="start-date" class="svelte-12crvy"/></div> <div class="filter-item svelte-12crvy"><label for="end-date" class="svelte-12crvy">End Date</label> <input type="date" id="end-date" class="svelte-12crvy"/></div> <div class="filter-item svelte-12crvy"><label for="location-filter" class="svelte-12crvy">Location</label> <!></div> <div class="filter-item svelte-12crvy"><label for="climbing-type-filter" class="svelte-12crvy">Climb Type</label> <select id="climbing-type-filter" class="svelte-12crvy"><option>Any Type</option><!></select></div> <div class="filter-item svelte-12crvy"><label for="session-type-filter" class="svelte-12crvy">Session Type</label> <select id="session-type-filter" class="svelte-12crvy"><option>Any Type</option><!></select></div> <div class="filter-item svelte-12crvy"><label for="grade-filter" class="svelte-12crvy">Grade (Exact)</label> <input type="text" id="grade-filter" placeholder="e.g. V4" class="svelte-12crvy"/></div></div> <div class="filter-actions svelte-12crvy"><button class="reset-btn svelte-12crvy">Reset Filters</button></div></div>'),Ns=l('<div class="filter-container svelte-12crvy"><button class="filter-header svelte-12crvy"><div class="header-content svelte-12crvy"><span class="icon svelte-12crvy">üîç</span> <span class="title svelte-12crvy">Filters</span> <!></div></button> <!></div>');function Ms(xe,i){$e(i,!0);const m=["Rockstar Swindon","Flashpoint Swindon","Flashpoint Bristol","Redpoint Bristol","TCH Bristol","Other"],g=["Bouldering","Sport","Mixed"],x=["Projecting","Onsighting","Campusing","Repeaters"];let S=D(!1),c=D(""),T=D(""),b=D(""),G=D(""),ie=D(""),Z=D(""),ue=D(!1);function U(){r(S,!s(S))}function K(){r(c,""),r(T,""),r(b,""),r(G,""),r(ue,!1),r(ie,""),r(Z,""),F()}function F(){i.onFilterParamsChange({startDate:s(c),endDate:s(T),location:s(b),climbingType:s(G),sessionType:s(ie),grade:s(Z)})}function ve(){s(b)==="Other"?(r(ue,!0),r(b,"")):F()}function E(){r(ue,!1),r(b,""),F()}var O=Ns(),V=a(O);V.__click=U;var N=a(V),_e=t(a(N),4);{var ne=f=>{var z=Cs();n(f,z)},ge=f=>{var z=Fs();n(f,z)};d(_e,f=>{s(S)?f(ne):f(ge,!1)})}e(N),e(V);var M=t(V,2);{var H=f=>{var z=Os(),A=a(z),J=a(A),p=t(a(J),2);Re(p),p.__change=F,e(J);var k=t(J,2),B=t(a(k),2);Re(B),B.__change=F,e(k);var o=t(k,2),u=t(a(o),2);{var L=me=>{var Y=Es(),Q=a(Y);Re(Q),Q.__input=F;var we=t(Q,2);we.__click=E,e(Y),Ve(Q,()=>s(b),Te=>r(b,Te)),n(me,Y)},W=me=>{var Y=Ls();Y.__change=ve;var Q=a(Y);Q.value=Q.__value="";var we=t(Q);Ce(we,17,()=>m,Le,(Te,$)=>{var X=zs(),j=a(X,!0);e(X);var oe={};_(()=>{v(j,s($)),oe!==(oe=s($))&&(X.value=(X.__value=s($))??"")}),n(Te,X)}),e(Y),ua(Y,()=>s(b),Te=>r(b,Te)),n(me,Y)};d(u,me=>{s(ue)?me(L):me(W,!1)})}e(o);var fe=t(o,2),q=t(a(fe),2);q.__change=F;var te=a(q);te.value=te.__value="";var P=t(te);Ce(P,17,()=>g,Le,(me,Y)=>{var Q=Gs(),we=a(Q,!0);e(Q);var Te={};_(()=>{v(we,s(Y)),Te!==(Te=s(Y))&&(Q.value=(Q.__value=s(Y))??"")}),n(me,Q)}),e(q),e(fe);var pe=t(fe,2),re=t(a(pe),2);re.__change=F;var qe=a(re);qe.value=qe.__value="";var he=t(qe);Ce(he,17,()=>x,Le,(me,Y)=>{var Q=js(),we=a(Q,!0);e(Q);var Te={};_(()=>{v(we,s(Y)),Te!==(Te=s(Y))&&(Q.value=(Q.__value=s(Y))??"")}),n(me,Q)}),e(re),e(pe);var De=t(pe,2),ze=t(a(De),2);Re(ze),ze.__input=F,e(De),e(A);var Ae=t(A,2),je=a(Ae);je.__click=K,e(Ae),e(z),Ve(p,()=>s(c),me=>r(c,me)),Ve(B,()=>s(T),me=>r(T,me)),ua(q,()=>s(G),me=>r(G,me)),ua(re,()=>s(ie),me=>r(ie,me)),Ve(ze,()=>s(Z),me=>r(Z,me)),na(3,z,()=>la,()=>({duration:200})),n(f,z)};d(M,f=>{s(S)&&f(H)})}e(O),_(()=>He(V,"aria-expanded",s(S))),n(xe,O),ea()}Ke(["click","change","input"]);var Ps=l('<label class="type-toggle svelte-yz0xxt"><input type="checkbox"/> <span>Sport?</span></label>'),As=l("<option> </option>"),Bs=l('<div class="edit-form svelte-yz0xxt"><div class="edit-row main svelte-yz0xxt"><input type="text" class="edit-input grade svelte-yz0xxt" placeholder="Grade"/> <input type="text" class="edit-input name svelte-yz0xxt" placeholder="Route Name"/> <!></div> <div class="edit-row meta svelte-yz0xxt"><select class="edit-select svelte-yz0xxt"></select> <div class="attempts-input-wrapper svelte-yz0xxt"><span>#</span> <input type="number" min="1" class="edit-input num svelte-yz0xxt"/></div></div> <div class="edit-row notes svelte-yz0xxt"><textarea class="edit-input notes-area svelte-yz0xxt" placeholder="Notes..."></textarea></div> <div class="edit-actions svelte-yz0xxt"><button class="action-btn cancel svelte-yz0xxt">Cancel</button> <button class="action-btn save svelte-yz0xxt">Save</button></div></div>'),Is=l('<span class="climb-type-tag svelte-yz0xxt"> </span>'),Rs=l('<span class="notes-preview svelte-yz0xxt"> </span>'),Vs=l('<span class="wall-tag svelte-yz0xxt"> </span>'),Us=l('<span class="technique-tag svelte-yz0xxt"> </span>'),Ws=l('<span class="attempts-count svelte-yz0xxt"> </span>'),Hs=l('<div class="detail-row svelte-yz0xxt"><span class="label svelte-yz0xxt">Notes:</span> <p class="notes svelte-yz0xxt"> </p></div>'),Js=l('<p class="empty-notes svelte-yz0xxt">No notes for this climb.</p>'),Ys=l('<div class="climb-details svelte-yz0xxt"><!> <div class="tags svelte-yz0xxt"><span class="tag type svelte-yz0xxt"> </span> <span class="tag attempt-text svelte-yz0xxt"> </span></div></div>'),Zs=l('<div class="climb-header svelte-yz0xxt" role="button" tabindex="0"><div class="climb-main-info svelte-yz0xxt"><span> </span> <span class="climb-name svelte-yz0xxt"> </span> <!> <!> <!> <!></div> <div class="climb-meta svelte-yz0xxt"><span><span class="icon svelte-yz0xxt"> </span> <!></span> <button class="icon-btn edit-btn svelte-yz0xxt" aria-label="Edit climb" title="Edit climb">‚úé</button> <button class="icon-btn delete-btn svelte-yz0xxt" aria-label="Delete climb" title="Delete climb">üóëÔ∏è</button> <span class="chevron svelte-yz0xxt"> </span></div></div> <!>',1),Xs=l("<div><!></div>");function Ks(xe,i){$e(i,!0);let m=ss(i,"showClimbType",3,!1),g=D(!1),x=D(!1),S=D(""),c=D(""),T=D(""),b=D(1),G=D(""),ie=D(!1);function Z(){s(x)||r(g,!s(g))}function ue(M){M.stopPropagation(),i.onDelete()}function U(M){M.stopPropagation(),r(S,i.climb.name,!0),r(c,i.climb.grade,!0),r(T,i.climb.attemptType,!0),r(b,i.climb.attemptsNum,!0),r(G,i.climb.notes,!0),r(ie,i.climb.isSport,!0),r(x,!0),r(g,!0)}function K(M){M.stopPropagation(),r(x,!1)}function F(M){M.stopPropagation();const H={...i.climb,name:s(S),grade:s(c),attemptType:s(T),attemptsNum:s(b),notes:s(G),isSport:s(ie)};i.onUpdate(H),r(x,!1)}function ve(){(s(T)==="Flash"||s(T)==="Onsight")&&r(b,1)}const E={Flash:"‚ö°",Onsight:"üëÅÔ∏è",Redpoint:"üî¥",Dogged:"üõ†Ô∏è",DNF:"‚ùå"},O=["Flash","Onsight","Redpoint","Dogged","DNF"];var V=Xs();let N;var _e=a(V);{var ne=M=>{var H=Bs(),f=a(H),z=a(f);Re(z);var A=t(z,2);Re(A);var J=t(A,2);{var p=P=>{var pe=Ps(),re=a(pe);Re(re),qa(2),e(pe),as(re,()=>s(ie),qe=>r(ie,qe)),n(P,pe)};d(J,P=>{m()&&P(p)})}e(f);var k=t(f,2),B=a(k);B.__change=ve,Ce(B,21,()=>O,Le,(P,pe)=>{var re=As(),qe=a(re,!0);e(re);var he={};_(()=>{v(qe,s(pe)),he!==(he=s(pe))&&(re.value=(re.__value=s(pe))??"")}),n(P,re)}),e(B);var o=t(B,2),u=t(a(o),2);Re(u),e(o),e(k);var L=t(k,2),W=a(L);es(W),e(L);var fe=t(L,2),q=a(fe);q.__click=K;var te=t(q,2);te.__click=F,e(fe),e(H),_(()=>u.disabled=s(T)==="Flash"||s(T)==="Onsight"),Ve(z,()=>s(c),P=>r(c,P)),Ve(A,()=>s(S),P=>r(S,P)),ua(B,()=>s(T),P=>r(T,P)),Ve(u,()=>s(b),P=>r(b,P)),Ve(W,()=>s(G),P=>r(G,P)),n(M,H)},ge=M=>{var H=Zs(),f=Pe(H);f.__click=Z,f.__keydown=$=>($.key==="Enter"||$.key===" ")&&Z();var z=a(f),A=a(z);let J;var p=a(A,!0);e(A);var k=t(A,2),B=a(k,!0);e(k);var o=t(k,2);{var u=$=>{var X=Is(),j=a(X,!0);e(X),_(()=>v(j,i.climb.isSport?"Sport":"Boulder")),n($,X)};d(o,$=>{m()&&$(u)})}var L=t(o,2);{var W=$=>{var X=Rs(),j=a(X);e(X),_(()=>v(j,`- ${i.climb.notes??""}`)),n($,X)};d(L,$=>{!s(g)&&i.climb.notes&&$(W)})}var fe=t(L,2);{var q=$=>{var X=Vs(),j=a(X,!0);e(X),_(()=>v(j,i.climb.wall)),n($,X)};d(fe,$=>{i.climb.wall&&$(q)})}var te=t(fe,2);{var P=$=>{var X=Us(),j=a(X,!0);e(X),_(()=>v(j,i.climb.techniqueFocus)),n($,X)};d(te,$=>{i.climb.techniqueFocus&&$(P)})}e(z);var pe=t(z,2),re=a(pe);let qe;var he=a(re),De=a(he,!0);e(he);var ze=t(he,2);{var Ae=$=>{var X=Ws(),j=a(X,!0);e(X),_(()=>v(j,i.climb.attemptsNum)),n($,X)};d(ze,$=>{i.climb.attemptType!=="Flash"&&i.climb.attemptType!=="Onsight"&&$(Ae)})}e(re);var je=t(re,2);je.__click=U;var me=t(je,2);me.__click=ue;var Y=t(me,2),Q=a(Y,!0);e(Y),e(pe),e(f);var we=t(f,2);{var Te=$=>{var X=Ys(),j=a(X);{var oe=h=>{var R=Hs(),ke=t(a(R),2),Be=a(ke,!0);e(ke),e(R),_(()=>v(Be,i.climb.notes)),n(h,R)},y=h=>{var R=Js();n(h,R)};d(j,h=>{i.climb.notes?h(oe):h(y,!1)})}var de=t(j,2),C=a(de),ee=a(C,!0);e(C);var le=t(C,2),ye=a(le,!0);e(le),e(de),e(X),_(()=>{v(ee,i.climb.isSport?"Sport":"Boulder"),v(ye,i.climb.attemptType)}),na(3,X,()=>la,()=>({duration:150})),n($,X)};d(we,$=>{s(g)&&$(Te)})}_(()=>{He(f,"aria-expanded",s(g)),J=ia(A,1,"grade-badge svelte-yz0xxt",null,J,{sport:i.climb.isSport}),v(p,i.climb.grade),v(B,i.climb.name||"Unnamed Route"),qe=ia(re,1,"attempt-type svelte-yz0xxt",null,qe,{flash:i.climb.attemptType==="Flash"}),v(De,E[i.climb.attemptType]||i.climb.attemptType),v(Q,s(g)?"‚ñ≤":"‚ñº")}),n(M,H)};d(_e,M=>{s(x)?M(ne):M(ge,!1)})}e(V),_(()=>N=ia(V,1,"climb-entry svelte-yz0xxt",null,N,{expanded:s(g),editing:s(x)})),n(xe,V),ea()}Ke(["change","click","keydown"]);var Qs=l('<dialog class="edit-dialog svelte-1kpd5rv"><div class="dialog-content svelte-1kpd5rv"><div class="modal-header svelte-1kpd5rv"><h2 class="svelte-1kpd5rv">Edit Session</h2> <button class="close-btn svelte-1kpd5rv">&times;</button></div> <div class="modal-body svelte-1kpd5rv"><!></div></div></dialog>');function Ya(xe,i){$e(i,!0);function m(c){return c.showModal(),{destroy(){c.open&&c.close()}}}var g=Ue(),x=Pe(g);{var S=c=>{var T=Qs();T.__click=F=>{F.target===F.currentTarget&&i.onClose()};var b=a(T);b.__click=F=>F.stopPropagation();var G=a(b),ie=t(a(G),2);ie.__click=function(...F){i.onClose?.apply(this,F)},e(G);var Z=t(G,2),ue=a(Z);{var U=F=>{bs(F,{get initialData(){return i.initialData},get onCancel(){return i.onClose},get onSaved(){return i.onSaved}})},K=F=>{var ve=Ue(),E=Pe(ve);{var O=N=>{ys(N,{get initialData(){return i.initialData},get onCancel(){return i.onClose},get onSaved(){return i.onSaved}})},V=N=>{var _e=Ue(),ne=Pe(_e);{var ge=H=>{xs(H,{get initialData(){return i.initialData},get onCancel(){return i.onClose},get onSaved(){return i.onSaved}})},M=H=>{var f=Ue(),z=Pe(f);{var A=p=>{ws(p,{get initialData(){return i.initialData},get onCancel(){return i.onClose},get onSaved(){return i.onSaved}})},J=p=>{var k=Ue(),B=Pe(k);{var o=u=>{ks(u,{get initialData(){return i.initialData},get onCancel(){return i.onClose},get onSaved(){return i.onSaved}})};d(B,u=>{i.activityType==="competition"&&u(o)},!0)}n(p,k)};d(z,p=>{i.activityType==="fingerboarding"?p(A):p(J,!1)},!0)}n(H,f)};d(ne,H=>{i.activityType==="gym_session"?H(ge):H(M,!1)},!0)}n(N,_e)};d(E,N=>{i.activityType==="outdoor_climb"?N(O):N(V,!1)},!0)}n(F,ve)};d(ue,F=>{i.activityType==="indoor_climb"?F(U):F(K,!1)})}e(Z),e(b),e(T),Ts(T,F=>m?.(F)),ls("close",T,function(...F){i.onClose?.apply(this,F)}),na(3,b,()=>hs,()=>({duration:250,y:50,opacity:0})),n(c,T)};d(x,c=>{i.isOpen&&c(S)})}n(xe,g),ea()}Ke(["click"]);var $s=l('<span class="stat svelte-7vqogn"> </span>'),et=l('<span class="status-icon pending svelte-7vqogn" title="Waiting to sync">üîÑ</span>'),at=l('<span class="status-icon error svelte-7vqogn" title="Sync error">‚ö†Ô∏è</span>'),st=l('<span class="chip svelte-7vqogn"> </span>'),tt=l('<span class="text-none svelte-7vqogn">None</span>'),it=l('<div class="detail-item svelte-7vqogn"><span class="label svelte-7vqogn">Difficulty</span> <span class="value svelte-7vqogn"> </span></div>'),nt=l('<span class="chip svelte-7vqogn"> </span>'),rt=l('<span class="text-none svelte-7vqogn">None</span>'),lt=l('<div class="detail-item svelte-7vqogn"><span class="label svelte-7vqogn">Category</span> <div class="value-chips svelte-7vqogn"><!></div></div>'),vt=l('<span class="chip svelte-7vqogn"> </span>'),ot=l('<span class="text-none svelte-7vqogn">None</span>'),dt=l('<div class="detail-item svelte-7vqogn"><span class="label svelte-7vqogn">Energy System</span> <div class="value-chips svelte-7vqogn"><!></div></div>'),ct=l('<span class="chip svelte-7vqogn"> </span>'),_t=l('<span class="text-none svelte-7vqogn">None</span>'),ut=l('<div class="detail-item svelte-7vqogn"><span class="label svelte-7vqogn">Wall</span> <div class="value-chips svelte-7vqogn"><!></div></div>'),gt=l('<p class="notes-text"> </p>'),ft=l('<p class="notes-placeholder">No notes.</p>'),pt=l('<div class="metric svelte-7vqogn"><span class="label svelte-7vqogn">Open Grip</span> <div class="bar-container svelte-7vqogn"><div class="bar-fill svelte-7vqogn"></div></div> <span class="score svelte-7vqogn"> </span></div>'),mt=l('<div class="metric svelte-7vqogn"><span class="label svelte-7vqogn">Crimp Grip</span> <div class="bar-container svelte-7vqogn"><div class="bar-fill svelte-7vqogn"></div></div> <span class="score svelte-7vqogn"> </span></div>'),bt=l('<div class="metric svelte-7vqogn"><span class="label svelte-7vqogn">Pinch Grip</span> <div class="bar-container svelte-7vqogn"><div class="bar-fill svelte-7vqogn"></div></div> <span class="score svelte-7vqogn"> </span></div>'),ht=l('<div class="metric svelte-7vqogn"><span class="label svelte-7vqogn">Sloper Grip</span> <div class="bar-container svelte-7vqogn"><div class="bar-fill svelte-7vqogn"></div></div> <span class="score svelte-7vqogn"> </span></div>'),yt=l('<div class="metric svelte-7vqogn"><span class="label svelte-7vqogn">Jug Grip</span> <div class="bar-container svelte-7vqogn"><div class="bar-fill svelte-7vqogn"></div></div> <span class="score svelte-7vqogn"> </span></div>'),xt=l('<p class="no-climbs svelte-7vqogn">No climbs logged for this session.</p>'),wt=l('<div class="card-body svelte-7vqogn"><div class="details-grid svelte-7vqogn"><div class="detail-item svelte-7vqogn"><span class="label svelte-7vqogn">Training Type</span> <div class="value-chips svelte-7vqogn"><!></div></div> <!> <!> <!> <!></div> <div class="notes-container svelte-7vqogn"><div class="notes-header svelte-7vqogn"><span class="label svelte-7vqogn">Session Notes</span></div> <!></div> <div class="metrics-container svelte-7vqogn"><div class="metric svelte-7vqogn"><span class="label svelte-7vqogn">Finger Load</span> <div class="bar-container svelte-7vqogn"><div class="bar-fill svelte-7vqogn"></div></div> <span class="score svelte-7vqogn"> </span></div> <div class="metric svelte-7vqogn"><span class="label svelte-7vqogn">Shoulder Load</span> <div class="bar-container svelte-7vqogn"><div class="bar-fill svelte-7vqogn"></div></div> <span class="score svelte-7vqogn"> </span></div> <div class="metric svelte-7vqogn"><span class="label svelte-7vqogn">Forearm Load</span> <div class="bar-container svelte-7vqogn"><div class="bar-fill svelte-7vqogn"></div></div> <span class="score svelte-7vqogn"> </span></div> <!> <!> <!> <!> <!></div> <div class="climbs-list svelte-7vqogn"><h4 class="svelte-7vqogn">Climbs</h4> <div class="climbs-container svelte-7vqogn"><!> <!></div></div></div>'),kt=l('<div><div class="card-header svelte-7vqogn" role="button" tabindex="0"><div class="header-main svelte-7vqogn"><div class="date-badge svelte-7vqogn"><span class="day svelte-7vqogn"> </span> <span class="month svelte-7vqogn"> </span> <span class="year svelte-7vqogn"> </span></div> <div class="session-info svelte-7vqogn"><div class="session-text svelte-7vqogn"><h3 class="location svelte-7vqogn"> </h3> <div class="meta-row svelte-7vqogn"><span class="time-tag svelte-7vqogn"> </span> <span class="type-tag svelte-7vqogn"> </span></div> <div class="meta-row lowercase svelte-7vqogn"><span class="stat svelte-7vqogn"> </span> <!></div></div> <div class="load-summary svelte-7vqogn"><div class="load-badge finger svelte-7vqogn"> </div> <div class="load-badge shoulder svelte-7vqogn"> </div> <div class="load-badge forearm svelte-7vqogn"> </div></div></div></div> <div class="header-actions"><div class="header-status svelte-7vqogn"><!></div>  <button class="btn-icon edit-session" title="Edit Session">‚úèÔ∏è</button> <button class="btn-icon delete-session" title="Delete Session">üóëÔ∏è</button> <span class="chevron svelte-7vqogn"> </span></div></div> <!> <!> <!></div>');function St(xe,i){$e(i,!0);let m=D(!1),g=D(!1),x=D(!1);function S(){r(m,!s(m))}function c(){r(g,!0)}function T(){r(x,!0)}function b(){r(x,!1)}async function G(){r(x,!1),await Ua()}async function ie(){try{const C=await vs(i.session.id);C.ok?(r(g,!1),i.onDelete()):(console.error("Failed to delete session:",C.error),alert("Failed to delete session: "+C.error))}catch(C){console.error("Exception deleting session:",C),alert("Error deleting session")}}function Z(C){}function ue(C,ee){}let U=Qe(()=>i.session.climbs?.length??0),K=Qe(()=>(i.session.climbs||[]).reduce((C,ee)=>{const le=parseInt(ee.grade.replace(/\D/g,""))||0,ye=parseInt(C.replace(/\D/g,""))||0;return le>ye?ee.grade:C},"V0"));var F=kt();let ve;var E=a(F);E.__click=S,E.__keydown=C=>C.key==="Enter"&&S();var O=a(E),V=a(O),N=a(V),_e=a(N,!0);e(N);var ne=t(N,2),ge=a(ne,!0);e(ne);var M=t(ne,2),H=a(M,!0);e(M),e(V);var f=t(V,2),z=a(f),A=a(z),J=a(A,!0);e(A);var p=t(A,2),k=a(p),B=a(k);e(k);var o=t(k,2),u=a(o,!0);e(o),e(p);var L=t(p,2),W=a(L),fe=a(W);e(W);var q=t(W,2);{var te=C=>{var ee=$s(),le=a(ee);e(ee),_(()=>v(le,`Max: ${s(K)??""}`)),n(C,ee)};d(q,C=>{s(U)>0&&C(te)})}e(L),e(z);var P=t(z,2),pe=a(P),re=a(pe,!0);e(pe);var qe=t(pe,2),he=a(qe,!0);e(qe);var De=t(qe,2),ze=a(De,!0);e(De),e(P),e(f),e(O);var Ae=t(O,2),je=a(Ae),me=a(je);{var Y=C=>{var ee=et();n(C,ee)},Q=C=>{var ee=Ue(),le=Pe(ee);{var ye=h=>{var R=at();n(h,R)};d(le,h=>{i.session.syncStatus==="error"&&h(ye)},!0)}n(C,ee)};d(me,C=>{i.session.syncStatus==="pending"?C(Y):C(Q,!1)})}e(je);var we=t(je,2);we.__click=C=>{C.stopPropagation(),T()};var Te=t(we,2);Te.__click=C=>{C.stopPropagation(),c()};var $=t(Te,2),X=a($,!0);e($),e(Ae),e(E);var j=t(E,2);{var oe=C=>{var ee=wt(),le=a(ee),ye=a(le),h=t(a(ye),2),R=a(h);{var ke=ae=>{var ce=Ue(),w=Pe(ce);Ce(w,17,()=>i.session.trainingTypes,Le,(I,se)=>{var Se=st(),be=a(Se,!0);e(Se),_(()=>v(be,s(se))),n(I,Se)}),n(ae,ce)},Be=ae=>{var ce=tt();n(ae,ce)};d(R,ae=>{i.session.trainingTypes&&i.session.trainingTypes.length>0&&!i.session.trainingTypes.includes("None")?ae(ke):ae(Be,!1)})}e(h),e(ye);var Ie=t(ye,2);{var aa=ae=>{var ce=it(),w=t(a(ce),2),I=a(w,!0);e(w),e(ce),_(()=>v(I,i.session.difficulty)),n(ae,ce)};d(Ie,ae=>{i.session.difficulty&&ae(aa)})}var Fe=t(Ie,2);{var Me=ae=>{var ce=lt(),w=t(a(ce),2),I=a(w);{var se=be=>{var Ee=Ue(),We=Pe(Ee);Ce(We,17,()=>i.session.categories,Le,(sa,wa)=>{var ta=nt(),ka=a(ta,!0);e(ta),_(()=>v(ka,s(wa))),n(sa,ta)}),n(be,Ee)},Se=be=>{var Ee=rt();n(be,Ee)};d(I,be=>{i.session.categories.length>0&&!i.session.categories.includes("None")?be(se):be(Se,!1)})}e(w),e(ce),n(ae,ce)};d(Fe,ae=>{i.session.categories?.length&&ae(Me)})}var Ge=t(Fe,2);{var Ye=ae=>{var ce=dt(),w=t(a(ce),2),I=a(w);{var se=be=>{var Ee=Ue(),We=Pe(Ee);Ce(We,17,()=>i.session.energySystems,Le,(sa,wa)=>{var ta=vt(),ka=a(ta,!0);e(ta),_(()=>v(ka,s(wa))),n(sa,ta)}),n(be,Ee)},Se=be=>{var Ee=ot();n(be,Ee)};d(I,be=>{i.session.energySystems.length>0&&!i.session.energySystems.includes("None")?be(se):be(Se,!1)})}e(w),e(ce),n(ae,ce)};d(Ge,ae=>{i.session.energySystems?.length&&ae(Ye)})}var Oe=t(Ge,2);{var Je=ae=>{var ce=ut(),w=t(a(ce),2),I=a(w);{var se=be=>{var Ee=Ue(),We=Pe(Ee);Ce(We,17,()=>i.session.wallAngles,Le,(sa,wa)=>{var ta=ct(),ka=a(ta,!0);e(ta),_(()=>v(ka,s(wa))),n(sa,ta)}),n(be,Ee)},Se=be=>{var Ee=_t();n(be,Ee)};d(I,be=>{i.session.wallAngles.length>0&&!i.session.wallAngles.includes("None")?be(se):be(Se,!1)})}e(w),e(ce),n(ae,ce)};d(Oe,ae=>{i.session.wallAngles?.length&&ae(Je)})}e(le);var ya=t(le,2),Ea=t(a(ya),2);{var xa=ae=>{var ce=gt(),w=a(ce,!0);e(ce),_(()=>v(w,i.session.notes)),n(ae,ce)},Wa=ae=>{var ce=ft();n(ae,ce)};d(Ea,ae=>{i.session.notes?ae(xa):ae(Wa,!1)})}e(ya);var za=t(ya,2),La=a(za),_a=t(a(La),2),fa=a(_a);e(_a);var pa=t(_a,2),Ga=a(pa);e(pa),e(La);var ma=t(La,2),ja=t(a(ma),2),Oa=a(ja);e(ja);var Da=t(ja,2),Ba=a(Da);e(Da),e(ma);var da=t(ma,2),Ze=t(a(da),2),ba=a(Ze);e(Ze);var va=t(Ze,2),Ta=a(va);e(va),e(da);var ra=t(da,2);{var ca=ae=>{var ce=pt(),w=t(a(ce),2),I=a(w);e(w);var se=t(w,2),Se=a(se);e(se),e(ce),_(()=>{Ne(I,`width: ${i.session.openGrip/5*100}%`),v(Se,`${i.session.openGrip??""}/5`)}),n(ae,ce)};d(ra,ae=>{i.session.openGrip&&ae(ca)})}var oa=t(ra,2);{var Ca=ae=>{var ce=mt(),w=t(a(ce),2),I=a(w);e(w);var se=t(w,2),Se=a(se);e(se),e(ce),_(()=>{Ne(I,`width: ${i.session.crimpGrip/5*100}%`),v(Se,`${i.session.crimpGrip??""}/5`)}),n(ae,ce)};d(oa,ae=>{i.session.crimpGrip&&ae(Ca)})}var Na=t(oa,2);{var Ia=ae=>{var ce=bt(),w=t(a(ce),2),I=a(w);e(w);var se=t(w,2),Se=a(se);e(se),e(ce),_(()=>{Ne(I,`width: ${i.session.pinchGrip/5*100}%`),v(Se,`${i.session.pinchGrip??""}/5`)}),n(ae,ce)};d(Na,ae=>{i.session.pinchGrip&&ae(Ia)})}var Ma=t(Na,2);{var Ra=ae=>{var ce=ht(),w=t(a(ce),2),I=a(w);e(w);var se=t(w,2),Se=a(se);e(se),e(ce),_(()=>{Ne(I,`width: ${i.session.sloperGrip/5*100}%`),v(Se,`${i.session.sloperGrip??""}/5`)}),n(ae,ce)};d(Ma,ae=>{i.session.sloperGrip&&ae(Ra)})}var Fa=t(Ma,2);{var Ha=ae=>{var ce=yt(),w=t(a(ce),2),I=a(w);e(w);var se=t(w,2),Se=a(se);e(se),e(ce),_(()=>{Ne(I,`width: ${i.session.jugGrip/5*100}%`),v(Se,`${i.session.jugGrip??""}/5`)}),n(ae,ce)};d(Fa,ae=>{i.session.jugGrip&&ae(Ha)})}e(za);var Pa=t(za,2),Va=t(a(Pa),2),Xe=a(Va);Ce(Xe,17,()=>i.session.climbs||[],Le,(ae,ce,w)=>{{let I=Qe(()=>i.session.climbingType==="Mixed");Ks(ae,{get climb(){return s(ce)},onDelete:()=>void 0,onUpdate:se=>void 0,get showClimbType(){return s(I)}})}});var ha=t(Xe,2);{var Za=ae=>{var ce=xt();n(ae,ce)};d(ha,ae=>{(i.session.climbs||[]).length===0&&ae(Za)})}e(Va),e(Pa),e(ee),_(()=>{Ne(fa,`width: ${i.session.fingerLoad/5*100}%`),v(Ga,`${i.session.fingerLoad??""}/5`),Ne(Oa,`width: ${i.session.shoulderLoad/5*100}%`),v(Ba,`${i.session.shoulderLoad??""}/5`),Ne(ba,`width: ${i.session.forearmLoad/5*100}%`),v(Ta,`${i.session.forearmLoad??""}/5`)}),na(3,ee,()=>la,()=>({duration:150})),n(C,ee)};d(j,C=>{s(m)&&C(oe)})}var y=t(j,2);Ja(y,{get isOpen(){return s(g)},title:"Delete Session",message:"Are you sure you want to delete this session? This action cannot be undone.",onConfirm:ie,onCancel:()=>r(g,!1)});var de=t(y,2);Ya(de,{get isOpen(){return s(x)},activityType:"indoor_climb",get initialData(){return i.session},onClose:b,onSaved:G}),e(F),_((C,ee,le)=>{ve=ia(F,1,"session-card svelte-7vqogn",null,ve,{expanded:s(m)}),He(E,"aria-expanded",s(m)),v(_e,C),v(ge,ee),v(H,le),v(J,i.session.location),v(B,`üïí ${(i.session.time||"12:00")??""}`),v(u,i.session.climbingType),v(fe,`${s(U)??""} climbs`),He(pe,"title",`Finger Load: ${i.session.fingerLoad??""}`),v(re,i.session.fingerLoad),He(qe,"title",`Shoulder Load: ${i.session.shoulderLoad??""}`),v(he,i.session.shoulderLoad),He(De,"title",`Forearm Load: ${i.session.forearmLoad??""}`),v(ze,i.session.forearmLoad),v(X,s(m)?"‚ñ≤":"‚ñº")},[()=>new Date(i.session.date).getDate(),()=>new Date(i.session.date).toLocaleDateString("en-GB",{month:"short"}),()=>new Date(i.session.date).getFullYear()]),n(xe,F),ea()}Ke(["click","keydown"]);var qt=l('<div class="legend-item svelte-11p9lqi"><span class="l-icon svelte-11p9lqi"> </span> <span class="l-label svelte-11p9lqi"> </span></div>'),Dt=l('<div class="legend-content svelte-11p9lqi"><div class="legend-grid svelte-11p9lqi"></div></div>'),Tt=l('<div class="legend-container svelte-11p9lqi"><button class="legend-toggle svelte-11p9lqi"><span class="icon">‚ÑπÔ∏è</span> <span class="text">Icon Legend</span> <span class="chevron svelte-11p9lqi"> </span></button> <!></div>');function ts(xe){let i=D(!1);const m=[{icon:"üëÅÔ∏è",label:"Onsight"},{icon:"‚ö°",label:"Flash"},{icon:"üî¥",label:"Redpoint"},{icon:"üõ†Ô∏è",label:"Dogged"},{icon:"‚ùå",label:"DNF"}];var g=Tt(),x=a(g);x.__click=()=>r(i,!s(i));var S=t(a(x),4),c=a(S,!0);e(S),e(x);var T=t(x,2);{var b=G=>{var ie=Dt(),Z=a(ie);Ce(Z,21,()=>m,Le,(ue,U)=>{var K=qt(),F=a(K),ve=a(F,!0);e(F);var E=t(F,2),O=a(E,!0);e(E),e(K),_(()=>{v(ve,s(U).icon),v(O,s(U).label)}),n(ue,K)}),e(Z),e(ie),na(3,ie,()=>la),n(G,ie)};d(T,G=>{s(i)&&G(b)})}e(g),_(()=>{He(x,"aria-expanded",s(i)),v(c,s(i)?"‚ñº":"‚ñ∂")}),n(xe,g)}Ke(["click"]);function Qa(xe,i){if(!xe||xe.length===0){alert("No data to export");return}const m=Array.from(new Set(xe.flatMap(Object.keys))),g=[m.join(","),...xe.map(c=>m.map(T=>{let b=c[T];if(b==null)return"";if(typeof b=="object"){if(b instanceof Date)return b.toISOString();b=JSON.stringify(b).replace(/"/g,'""')}else typeof b=="string"&&(b=b.replace(/"/g,'""'));return typeof b=="string"&&(b.includes(",")||b.includes('"')||b.includes(`
`))?`"${b}"`:b}).join(","))].join(`
`),x=new Blob([g],{type:"text/csv;charset=utf-8;"}),S=document.createElement("a");if(S.download!==void 0){const c=URL.createObjectURL(x);S.setAttribute("href",c),S.setAttribute("download",i.endsWith(".csv")?i:`${i}.csv`),S.style.visibility="hidden",document.body.appendChild(S),S.click(),document.body.removeChild(S)}}var Ct=l('<span class="spinner svelte-14fqz8w"></span> Fetching...',1),Ft=l('<div class="error-banner svelte-14fqz8w"> </div>'),Et=l('<small class="svelte-14fqz8w">Try adjusting your filters.</small>'),zt=l('<div class="empty-state svelte-14fqz8w"><p class="svelte-14fqz8w">No indoor climbing sessions found.</p> <!></div>'),Lt=l('<div class="load-more-container svelte-14fqz8w"><button class="load-more-btn svelte-14fqz8w"> </button></div>'),Gt=l('<div class="view-container svelte-14fqz8w"><div class="view-header svelte-14fqz8w"><h2 class="view-title svelte-14fqz8w">üßó Indoor Climbing History</h2> <div class="header-actions svelte-14fqz8w"><button class="action-btn secondary svelte-14fqz8w" title="Export filtered data to CSV">üì• Export</button> <button class="action-btn svelte-14fqz8w" title="Fetch data from cloud"><!></button></div></div> <!> <!> <div class="info-bar svelte-14fqz8w"><div class="legend-wrapper svelte-14fqz8w"><!></div> <div class="load-key svelte-14fqz8w"><span class="key-label svelte-14fqz8w">Load:</span> <div class="key-item svelte-14fqz8w"><span class="dot finger svelte-14fqz8w"></span> Finger</div> <div class="key-item svelte-14fqz8w"><span class="dot shoulder svelte-14fqz8w"></span> Shoulder</div> <div class="key-item svelte-14fqz8w"><span class="dot forearm svelte-14fqz8w"></span> Forearm</div></div></div> <div class="sessions-list"><!> <!> <!></div></div>');function jt(xe,i){$e(i,!0);let m=D(ga([])),g=D(ga([])),x=D(!1),S=D(""),c=D(ga({startDate:"",endDate:"",location:"",climbingType:"",sessionType:"",grade:""})),T=D(20);const b=20;Ka(()=>{G()});async function G(){r(x,!0),r(S,"");try{const o=await os();o.ok&&o.data?(r(m,o.data.map(u=>({...u,activityType:"indoor_climb"})),!0),s(m).sort((u,L)=>new Date(L.date).getTime()-new Date(u.date).getTime()),Z()):r(S,o.error||"Failed to fetch data",!0)}catch(o){r(S,o instanceof Error?o.message:"Unknown error",!0)}finally{r(x,!1)}}function ie(o){r(c,o,!0),Z()}function Z(){r(T,b),r(g,s(m).filter(o=>{if(s(c).startDate&&o.date<s(c).startDate||s(c).endDate&&o.date>s(c).endDate||s(c).location&&o.location!==s(c).location)return!1;if(s(c).climbingType&&(o.climbingType==="Leading"?"Sport":o.climbingType)!==s(c).climbingType)if(o.climbingType==="Mixed")if(s(c).climbingType==="Bouldering"){if(!o.climbs.some(L=>!L.isSport))return!1}else if(s(c).climbingType==="Sport"){if(!o.climbs.some(L=>L.isSport))return!1}else return!1;else return!1;if(s(c).sessionType&&!o.trainingTypes?.includes(s(c).sessionType))return!1;if(s(c).grade){const u=s(c).grade.trim().toLowerCase();if(!o.climbs.some(W=>W.grade.trim().toLowerCase()===u))return!1}return!0}),!0)}function ue(){r(T,s(T)+b)}var U=Gt(),K=a(U),F=t(a(K),2),ve=a(F);ve.__click=()=>Qa(s(g),"indoor_climbs");var E=t(ve,2);E.__click=G;var O=a(E);{var V=o=>{var u=Ct();qa(),n(o,u)},N=o=>{var u=Sa("‚òÅÔ∏è Fetch Data");n(o,u)};d(O,o=>{s(x)?o(V):o(N,!1)})}e(E),e(F),e(K);var _e=t(K,2);{var ne=o=>{var u=Ft(),L=a(u,!0);e(u),_(()=>v(L,s(S))),na(3,u,()=>la),n(o,u)};d(_e,o=>{s(S)&&o(ne)})}var ge=t(_e,2);Ms(ge,{onFilterParamsChange:ie});var M=t(ge,2),H=a(M),f=a(H);ts(f),e(H),qa(2),e(M);var z=t(M,2),A=a(z);Ce(A,17,()=>s(g).slice(0,s(T)),o=>o.id,(o,u)=>{St(o,{get session(){return s(u)},onDelete:G})});var J=t(A,2);{var p=o=>{var u=zt(),L=t(a(u),2);{var W=fe=>{var q=Et();n(fe,q)};d(L,fe=>{s(m).length>0&&fe(W)})}e(u),n(o,u)};d(J,o=>{s(g).length===0&&o(p)})}var k=t(J,2);{var B=o=>{var u=Lt(),L=a(u);L.__click=ue;var W=a(L);e(L),e(u),_(()=>v(W,`Load More (${s(g).length-s(T)} remaining)`)),n(o,u)};d(k,o=>{s(T)<s(g).length&&o(B)})}e(z),e(U),_(()=>E.disabled=s(x)),n(xe,U),ea()}Ke(["click"]);var Ot=l('<span class="chevron svelte-1frtlim">‚ñ≤</span>'),Nt=l('<span class="chevron svelte-1frtlim">‚ñº</span>'),Mt=l('<div class="input-with-action svelte-1frtlim"><input type="text" id="area-filter-text" placeholder="Type area name..." class="flat-left svelte-1frtlim"/> <button class="action-btn flat-right svelte-1frtlim" title="Back to list">‚úï</button></div>'),Pt=l("<option> </option>"),At=l('<select id="area-filter" class="svelte-1frtlim"><option>All Areas</option><!><option>Other (Manual Entry)</option></select>'),Bt=l('<div class="input-with-action svelte-1frtlim"><input type="text" id="crag-filter-text" placeholder="Type crag name..." class="flat-left svelte-1frtlim"/> <button class="action-btn flat-right svelte-1frtlim" title="Back to list">‚úï</button></div>'),It=l("<option> </option>"),Rt=l('<select id="crag-filter" class="svelte-1frtlim"><option>All Crags</option><!><option>Other (Manual Entry)</option></select>'),Vt=l('<input type="text" id="crag-filter-text" class="svelte-1frtlim"/>'),Ut=l("<option> </option>"),Wt=l("<option> </option>"),Ht=l('<div class="filter-body svelte-1frtlim"><div class="filter-grid svelte-1frtlim"><div class="filter-item svelte-1frtlim"><label for="start-date" class="svelte-1frtlim">Start Date</label> <input type="date" id="start-date" class="svelte-1frtlim"/></div> <div class="filter-item svelte-1frtlim"><label for="end-date" class="svelte-1frtlim">End Date</label> <input type="date" id="end-date" class="svelte-1frtlim"/></div> <div class="filter-item svelte-1frtlim"><label for="area-filter" class="svelte-1frtlim">Area</label> <!></div> <div class="filter-item svelte-1frtlim"><label for="crag-filter" class="svelte-1frtlim">Crag</label> <!></div> <div class="filter-item svelte-1frtlim"><label for="climbing-type-filter" class="svelte-1frtlim">Climb Type</label> <select id="climbing-type-filter" class="svelte-1frtlim"><option>Any Type</option><!></select></div> <div class="filter-item svelte-1frtlim"><label for="session-type-filter" class="svelte-1frtlim">Session Type</label> <select id="session-type-filter" class="svelte-1frtlim"><option>Any Type</option><!></select></div> <div class="filter-item svelte-1frtlim"><label for="grade-filter" class="svelte-1frtlim">Grade (Exact)</label> <input type="text" id="grade-filter" placeholder="e.g. 7a" class="svelte-1frtlim"/></div></div> <div class="filter-actions svelte-1frtlim"><button class="reset-btn svelte-1frtlim">Reset Filters</button></div></div>'),Jt=l('<div class="filter-container svelte-1frtlim"><button class="filter-header svelte-1frtlim"><div class="header-content svelte-1frtlim"><span class="icon svelte-1frtlim">üîç</span> <span class="title svelte-1frtlim">Filters</span> <!></div></button> <!></div>');function Yt(xe,i){$e(i,!0);const m=Ss(),g=["Bouldering","Sport","Mixed","Trad"],x=["Projecting","Onsighting","Campusing","Repeaters","Fun","Volume"];let S=D(!1),c=D(""),T=D(""),b=D(""),G=D(""),ie=D(""),Z=D(""),ue=D(""),U=D(!1),K=D(!1),F=Qe(()=>s(b)&&s(b)!=="Other"?qs(s(b)):[]);function ve(){s(b)==="Other"?(r(U,!0),r(b,"")):r(U,!1),r(G,""),r(K,!1),N()}function E(){s(G)==="Other"?(r(K,!0),r(G,"")):r(K,!1),N()}function O(){r(S,!s(S))}function V(){r(c,""),r(T,""),r(b,""),r(G,""),r(ie,""),r(Z,""),r(ue,""),r(U,!1),r(K,!1),N()}function N(){i.onFilterParamsChange({startDate:s(c),endDate:s(T),area:s(b),crag:s(G),climbingType:s(ie),sessionType:s(Z),grade:s(ue)})}var _e=Jt(),ne=a(_e);ne.__click=O;var ge=a(ne),M=t(a(ge),4);{var H=J=>{var p=Ot();n(J,p)},f=J=>{var p=Nt();n(J,p)};d(M,J=>{s(S)?J(H):J(f,!1)})}e(ge),e(ne);var z=t(ne,2);{var A=J=>{var p=Ht(),k=a(p),B=a(k),o=t(a(B),2);Re(o),o.__change=N,e(B);var u=t(B,2),L=t(a(u),2);Re(L),L.__change=N,e(u);var W=t(u,2),fe=t(a(W),2);{var q=j=>{var oe=Mt(),y=a(oe);Re(y),y.__input=N;var de=t(y,2);de.__click=()=>{r(U,!1),r(b,""),N()},e(oe),Ve(y,()=>s(b),C=>r(b,C)),n(j,oe)},te=j=>{var oe=At();oe.__change=ve;var y=a(oe);y.value=y.__value="";var de=t(y);Ce(de,17,()=>m,Le,(ee,le)=>{var ye=Pt(),h=a(ye,!0);e(ye);var R={};_(()=>{v(h,s(le)),R!==(R=s(le))&&(ye.value=(ye.__value=s(le))??"")}),n(ee,ye)});var C=t(de);C.value=C.__value="Other",e(oe),ua(oe,()=>s(b),ee=>r(b,ee)),n(j,oe)};d(fe,j=>{s(U)?j(q):j(te,!1)})}e(W);var P=t(W,2),pe=t(a(P),2);{var re=j=>{var oe=Bt(),y=a(oe);Re(y),y.__input=N;var de=t(y,2);de.__click=()=>{r(K,!1),r(G,""),N()},e(oe),Ve(y,()=>s(G),C=>r(G,C)),n(j,oe)},qe=j=>{var oe=Ue(),y=Pe(oe);{var de=ee=>{var le=Rt();le.__change=E;var ye=a(le);ye.value=ye.__value="";var h=t(ye);Ce(h,17,()=>s(F),Le,(ke,Be)=>{var Ie=It(),aa=a(Ie,!0);e(Ie);var Fe={};_(()=>{v(aa,s(Be)),Fe!==(Fe=s(Be))&&(Ie.value=(Ie.__value=s(Be))??"")}),n(ke,Ie)});var R=t(h);R.value=R.__value="Other",e(le),ua(le,()=>s(G),ke=>r(G,ke)),n(ee,le)},C=ee=>{var le=Vt();Re(le),le.__input=N,_(()=>{He(le,"placeholder",s(b)?"Filter crag...":"Select area first"),le.disabled=!s(U)&&!s(b)}),Ve(le,()=>s(G),ye=>r(G,ye)),n(ee,le)};d(y,ee=>{!s(U)&&s(b)&&s(F).length>0?ee(de):ee(C,!1)},!0)}n(j,oe)};d(pe,j=>{s(K)?j(re):j(qe,!1)})}e(P);var he=t(P,2),De=t(a(he),2);De.__change=N;var ze=a(De);ze.value=ze.__value="";var Ae=t(ze);Ce(Ae,17,()=>g,Le,(j,oe)=>{var y=Ut(),de=a(y,!0);e(y);var C={};_(()=>{v(de,s(oe)),C!==(C=s(oe))&&(y.value=(y.__value=s(oe))??"")}),n(j,y)}),e(De),e(he);var je=t(he,2),me=t(a(je),2);me.__change=N;var Y=a(me);Y.value=Y.__value="";var Q=t(Y);Ce(Q,17,()=>x,Le,(j,oe)=>{var y=Wt(),de=a(y,!0);e(y);var C={};_(()=>{v(de,s(oe)),C!==(C=s(oe))&&(y.value=(y.__value=s(oe))??"")}),n(j,y)}),e(me),e(je);var we=t(je,2),Te=t(a(we),2);Re(Te),Te.__input=N,e(we),e(k);var $=t(k,2),X=a($);X.__click=V,e($),e(p),Ve(o,()=>s(c),j=>r(c,j)),Ve(L,()=>s(T),j=>r(T,j)),ua(De,()=>s(ie),j=>r(ie,j)),ua(me,()=>s(Z),j=>r(Z,j)),Ve(Te,()=>s(ue),j=>r(ue,j)),na(3,p,()=>la,()=>({duration:200})),n(J,p)};d(z,J=>{s(S)&&J(A)})}e(_e),_(()=>He(ne,"aria-expanded",s(S))),n(xe,_e),ea()}Ke(["click","change","input"]);var Zt=l('<label class="type-toggle svelte-1k6anfh"><input type="checkbox"/> <span>Sport?</span></label>'),Xt=l("<option> </option>"),Kt=l('<div class="edit-form svelte-1k6anfh"><div class="edit-row main svelte-1k6anfh"><input type="text" class="edit-input grade svelte-1k6anfh" placeholder="Grade"/> <input type="text" class="edit-input name svelte-1k6anfh" placeholder="Route Name"/> <!></div> <div class="edit-row meta svelte-1k6anfh"><select class="edit-select svelte-1k6anfh"></select> <div class="attempts-input-wrapper svelte-1k6anfh"><span>#</span> <input type="number" min="1" class="edit-input num svelte-1k6anfh"/></div></div> <div class="edit-row notes svelte-1k6anfh"><textarea class="edit-input notes-area svelte-1k6anfh" placeholder="Notes..."></textarea></div> <div class="edit-actions svelte-1k6anfh"><button class="action-btn cancel svelte-1k6anfh">Cancel</button> <button class="action-btn save svelte-1k6anfh">Save</button></div></div>'),Qt=l('<span class="climb-type-tag svelte-1k6anfh"> </span>'),$t=l('<span class="notes-preview svelte-1k6anfh"> </span>'),ei=l('<span class="attempts-count svelte-1k6anfh"> </span>'),ai=l('<div class="detail-row svelte-1k6anfh"><span class="label svelte-1k6anfh">Notes:</span> <p class="notes svelte-1k6anfh"> </p></div>'),si=l('<p class="empty-notes svelte-1k6anfh">No notes for this climb.</p>'),ti=l('<span class="tag wall-tag svelte-1k6anfh"> </span>'),ii=l('<span class="tag technique-tag svelte-1k6anfh"> </span>'),ni=l('<div class="climb-details svelte-1k6anfh"><!> <div class="tags svelte-1k6anfh"><span class="tag type svelte-1k6anfh"> </span> <!> <!> <span class="tag attempt-text svelte-1k6anfh"> </span></div></div>'),ri=l('<div class="climb-header svelte-1k6anfh" role="button" tabindex="0"><div class="climb-main-info svelte-1k6anfh"><span> </span> <span class="climb-name svelte-1k6anfh"> </span> <!> <!></div> <div class="climb-meta svelte-1k6anfh"><span><span class="icon svelte-1k6anfh"> </span> <!></span> <button class="icon-btn edit-btn svelte-1k6anfh" aria-label="Edit climb" title="Edit climb">‚úé</button> <button class="icon-btn delete-btn svelte-1k6anfh" aria-label="Delete climb" title="Delete climb">üóëÔ∏è</button> <span class="chevron svelte-1k6anfh"> </span></div></div> <!>',1),li=l("<div><!></div>");function vi(xe,i){$e(i,!0);let m=ss(i,"showClimbType",3,!1),g=D(!1),x=D(!1),S=D(""),c=D(""),T=D(""),b=D(1),G=D(""),ie=D(!1);function Z(){s(x)||r(g,!s(g))}function ue(M){M.stopPropagation(),i.onDelete()}function U(M){M.stopPropagation(),r(S,i.climb.name,!0),r(c,i.climb.grade,!0),r(T,i.climb.attemptType,!0),r(b,i.climb.attemptsNum,!0),r(G,i.climb.notes,!0),r(ie,i.climb.isSport,!0),r(x,!0),r(g,!0)}function K(M){M.stopPropagation(),r(x,!1)}function F(M){M.stopPropagation();const H={...i.climb,name:s(S),grade:s(c),attemptType:s(T),attemptsNum:s(b),notes:s(G),isSport:s(ie)};i.onUpdate(H),r(x,!1)}function ve(){(s(T)==="Flash"||s(T)==="Onsight")&&r(b,1)}const E={Flash:"‚ö°",Onsight:"üëÅÔ∏è",Redpoint:"üî¥",Dogged:"üõ†Ô∏è",DNF:"‚ùå"},O=["Flash","Onsight","Redpoint","Dogged","DNF"];var V=li();let N;var _e=a(V);{var ne=M=>{var H=Kt(),f=a(H),z=a(f);Re(z);var A=t(z,2);Re(A);var J=t(A,2);{var p=P=>{var pe=Zt(),re=a(pe);Re(re),qa(2),e(pe),as(re,()=>s(ie),qe=>r(ie,qe)),n(P,pe)};d(J,P=>{m()&&P(p)})}e(f);var k=t(f,2),B=a(k);B.__change=ve,Ce(B,21,()=>O,Le,(P,pe)=>{var re=Xt(),qe=a(re,!0);e(re);var he={};_(()=>{v(qe,s(pe)),he!==(he=s(pe))&&(re.value=(re.__value=s(pe))??"")}),n(P,re)}),e(B);var o=t(B,2),u=t(a(o),2);Re(u),e(o),e(k);var L=t(k,2),W=a(L);es(W),e(L);var fe=t(L,2),q=a(fe);q.__click=K;var te=t(q,2);te.__click=F,e(fe),e(H),_(()=>u.disabled=s(T)==="Flash"||s(T)==="Onsight"),Ve(z,()=>s(c),P=>r(c,P)),Ve(A,()=>s(S),P=>r(S,P)),ua(B,()=>s(T),P=>r(T,P)),Ve(u,()=>s(b),P=>r(b,P)),Ve(W,()=>s(G),P=>r(G,P)),n(M,H)},ge=M=>{var H=ri(),f=Pe(H);f.__click=Z,f.__keydown=Y=>(Y.key==="Enter"||Y.key===" ")&&Z();var z=a(f),A=a(z);let J;var p=a(A,!0);e(A);var k=t(A,2),B=a(k,!0);e(k);var o=t(k,2);{var u=Y=>{var Q=Qt(),we=a(Q,!0);e(Q),_(()=>v(we,i.climb.isSport?"Sport":"Boulder")),n(Y,Q)};d(o,Y=>{m()&&Y(u)})}var L=t(o,2);{var W=Y=>{var Q=$t(),we=a(Q);e(Q),_(()=>v(we,`- ${i.climb.notes??""}`)),n(Y,Q)};d(L,Y=>{!s(g)&&i.climb.notes&&Y(W)})}e(z);var fe=t(z,2),q=a(fe);let te;var P=a(q),pe=a(P,!0);e(P);var re=t(P,2);{var qe=Y=>{var Q=ei(),we=a(Q,!0);e(Q),_(()=>v(we,i.climb.attemptsNum)),n(Y,Q)};d(re,Y=>{i.climb.attemptType!=="Flash"&&i.climb.attemptType!=="Onsight"&&Y(qe)})}e(q);var he=t(q,2);he.__click=U;var De=t(he,2);De.__click=ue;var ze=t(De,2),Ae=a(ze,!0);e(ze),e(fe),e(f);var je=t(f,2);{var me=Y=>{var Q=ni(),we=a(Q);{var Te=h=>{var R=ai(),ke=t(a(R),2),Be=a(ke,!0);e(ke),e(R),_(()=>v(Be,i.climb.notes)),n(h,R)},$=h=>{var R=si();n(h,R)};d(we,h=>{i.climb.notes?h(Te):h($,!1)})}var X=t(we,2),j=a(X),oe=a(j,!0);e(j);var y=t(j,2);{var de=h=>{var R=ti(),ke=a(R,!0);e(R),_(()=>v(ke,i.climb.wall)),n(h,R)};d(y,h=>{i.climb.wall&&h(de)})}var C=t(y,2);{var ee=h=>{var R=ii(),ke=a(R,!0);e(R),_(()=>v(ke,i.climb.techniqueFocus)),n(h,R)};d(C,h=>{i.climb.techniqueFocus&&h(ee)})}var le=t(C,2),ye=a(le,!0);e(le),e(X),e(Q),_(()=>{v(oe,i.climb.isSport?"Sport":"Boulder"),v(ye,i.climb.attemptType)}),na(3,Q,()=>la,()=>({duration:150})),n(Y,Q)};d(je,Y=>{s(g)&&Y(me)})}_(()=>{He(f,"aria-expanded",s(g)),J=ia(A,1,"grade-badge svelte-1k6anfh",null,J,{sport:i.climb.isSport}),v(p,i.climb.grade),v(B,i.climb.name||"Unnamed Route"),te=ia(q,1,"attempt-type svelte-1k6anfh",null,te,{flash:i.climb.attemptType==="Flash"}),v(pe,E[i.climb.attemptType]||i.climb.attemptType),v(Ae,s(g)?"‚ñ≤":"‚ñº")}),n(M,H)};d(_e,M=>{s(x)?M(ne):M(ge,!1)})}e(V),_(()=>N=ia(V,1,"climb-entry svelte-1k6anfh",null,N,{expanded:s(g),editing:s(x)})),n(xe,V),ea()}Ke(["change","click","keydown"]);var oi=l('<div class="sector-meta"> </div>'),di=l('<span class="stat svelte-d5hg2r"> </span>'),ci=l('<span class="status-icon pending svelte-d5hg2r" title="Waiting to sync">üîÑ</span>'),_i=l('<span class="status-icon error svelte-d5hg2r" title="Sync error">‚ö†Ô∏è</span>'),ui=l('<span class="chip svelte-d5hg2r"> </span>'),gi=l('<span class="text-none svelte-d5hg2r">None</span>'),fi=l('<div class="detail-item svelte-d5hg2r"><span class="label svelte-d5hg2r">Difficulty</span> <span class="value svelte-d5hg2r"> </span></div>'),pi=l('<span class="chip svelte-d5hg2r"> </span>'),mi=l('<span class="text-none svelte-d5hg2r">None</span>'),bi=l('<div class="detail-item svelte-d5hg2r"><span class="label svelte-d5hg2r">Category</span> <div class="value-chips svelte-d5hg2r"><!></div></div>'),hi=l('<span class="chip svelte-d5hg2r"> </span>'),yi=l('<span class="text-none svelte-d5hg2r">None</span>'),xi=l('<div class="detail-item svelte-d5hg2r"><span class="label svelte-d5hg2r">Energy System</span> <div class="value-chips svelte-d5hg2r"><!></div></div>'),wi=l('<p class="notes-text"> </p>'),ki=l('<p class="notes-placeholder">No notes.</p>'),Si=l('<div class="metric svelte-d5hg2r"><span class="label svelte-d5hg2r">Open Grip</span> <div class="bar-container svelte-d5hg2r"><div class="bar-fill svelte-d5hg2r"></div></div> <span class="score svelte-d5hg2r"> </span></div>'),qi=l('<div class="metric svelte-d5hg2r"><span class="label svelte-d5hg2r">Crimp Grip</span> <div class="bar-container svelte-d5hg2r"><div class="bar-fill svelte-d5hg2r"></div></div> <span class="score svelte-d5hg2r"> </span></div>'),Di=l('<div class="metric svelte-d5hg2r"><span class="label svelte-d5hg2r">Pinch Grip</span> <div class="bar-container svelte-d5hg2r"><div class="bar-fill svelte-d5hg2r"></div></div> <span class="score svelte-d5hg2r"> </span></div>'),Ti=l('<div class="metric svelte-d5hg2r"><span class="label svelte-d5hg2r">Sloper Grip</span> <div class="bar-container svelte-d5hg2r"><div class="bar-fill svelte-d5hg2r"></div></div> <span class="score svelte-d5hg2r"> </span></div>'),Ci=l('<div class="metric svelte-d5hg2r"><span class="label svelte-d5hg2r">Jug Grip</span> <div class="bar-container svelte-d5hg2r"><div class="bar-fill svelte-d5hg2r"></div></div> <span class="score svelte-d5hg2r"> </span></div>'),Fi=l('<p class="no-climbs svelte-d5hg2r">No climbs logged for this session.</p>'),Ei=l('<div class="card-body svelte-d5hg2r"><div class="details-grid svelte-d5hg2r"><div class="detail-item svelte-d5hg2r"><span class="label svelte-d5hg2r">Training Type</span> <div class="value-chips svelte-d5hg2r"><!></div></div> <!> <!> <!></div> <div class="notes-container svelte-d5hg2r"><div class="notes-header svelte-d5hg2r"><span class="label svelte-d5hg2r">Session Notes</span></div> <!></div> <div class="metrics-container svelte-d5hg2r"><div class="metric svelte-d5hg2r"><span class="label svelte-d5hg2r">Finger Load</span> <div class="bar-container svelte-d5hg2r"><div class="bar-fill svelte-d5hg2r"></div></div> <span class="score svelte-d5hg2r"> </span></div> <div class="metric svelte-d5hg2r"><span class="label svelte-d5hg2r">Shoulder Load</span> <div class="bar-container svelte-d5hg2r"><div class="bar-fill svelte-d5hg2r"></div></div> <span class="score svelte-d5hg2r"> </span></div> <div class="metric svelte-d5hg2r"><span class="label svelte-d5hg2r">Forearm Load</span> <div class="bar-container svelte-d5hg2r"><div class="bar-fill svelte-d5hg2r"></div></div> <span class="score svelte-d5hg2r"> </span></div> <!> <!> <!> <!> <!></div> <div class="climbs-list svelte-d5hg2r"><h4 class="svelte-d5hg2r">Climbs</h4> <div class="climbs-container svelte-d5hg2r"><!> <!></div></div></div>'),zi=l('<div><div class="card-header svelte-d5hg2r" role="button" tabindex="0"><div class="header-main svelte-d5hg2r"><div class="date-badge svelte-d5hg2r"><span class="day svelte-d5hg2r"> </span> <span class="month svelte-d5hg2r"> </span> <span class="year svelte-d5hg2r"> </span></div> <div class="session-info svelte-d5hg2r"><div class="session-text svelte-d5hg2r"><h3 class="location svelte-d5hg2r"> <!></h3> <!> <div class="meta-row svelte-d5hg2r"><span class="time-tag svelte-d5hg2r"> </span> <span class="type-tag svelte-d5hg2r"> </span></div> <div class="meta-row lowercase svelte-d5hg2r"><span class="stat svelte-d5hg2r"> </span> <!></div></div> <div class="load-summary svelte-d5hg2r"><div class="load-badge finger svelte-d5hg2r"> </div> <div class="load-badge shoulder svelte-d5hg2r"> </div> <div class="load-badge forearm svelte-d5hg2r"> </div></div></div></div> <div class="header-actions"><div class="header-status svelte-d5hg2r"><!></div> <button class="btn-icon edit-session" title="Edit Session">‚úèÔ∏è</button> <button class="btn-icon delete-session" title="Delete Session">üóëÔ∏è</button> <span class="chevron svelte-d5hg2r"> </span></div></div> <!> <!> <!></div>');function Li(xe,i){$e(i,!0);let m=D(!1),g=D(!1),x=D(!1);function S(){r(m,!s(m))}function c(){r(g,!0)}function T(){r(x,!0)}function b(){r(x,!1)}async function G(){r(x,!1),await Ua()}async function ie(){try{const h=await ds(i.session.id);h.ok?(r(g,!1),i.onDelete()):(console.error("Failed to delete session:",h.error),alert("Failed to delete session: "+h.error))}catch(h){console.error("Exception deleting session:",h),alert("Error deleting session")}}function Z(h){}function ue(h,R){}let U=Qe(()=>i.session.climbs?.length??0),K=Qe(()=>(i.session.climbs||[]).reduce((h,R)=>{const ke=parseInt(R.grade.replace(/\D/g,""))||0,Be=parseInt(h.replace(/\D/g,""))||0;return ke>Be?R.grade:h},"V0"));var F=zi();let ve;var E=a(F);E.__click=S,E.__keydown=h=>h.key==="Enter"&&S();var O=a(E),V=a(O),N=a(V),_e=a(N,!0);e(N);var ne=t(N,2),ge=a(ne,!0);e(ne);var M=t(ne,2),H=a(M,!0);e(M),e(V);var f=t(V,2),z=a(f),A=a(z),J=a(A),p=t(J);{var k=h=>{var R=Sa();_(()=>v(R,`- ${i.session.crag??""}`)),n(h,R)};d(p,h=>{i.session.crag&&h(k)})}e(A);var B=t(A,2);{var o=h=>{var R=oi(),ke=a(R);e(R),_(()=>v(ke,`üìç ${i.session.sector??""}`)),n(h,R)};d(B,h=>{i.session.sector&&h(o)})}var u=t(B,2),L=a(u),W=a(L);e(L);var fe=t(L,2),q=a(fe,!0);e(fe),e(u);var te=t(u,2),P=a(te),pe=a(P);e(P);var re=t(P,2);{var qe=h=>{var R=di(),ke=a(R);e(R),_(()=>v(ke,`Max: ${s(K)??""}`)),n(h,R)};d(re,h=>{s(U)>0&&h(qe)})}e(te),e(z);var he=t(z,2),De=a(he),ze=a(De,!0);e(De);var Ae=t(De,2),je=a(Ae,!0);e(Ae);var me=t(Ae,2),Y=a(me,!0);e(me),e(he),e(f),e(O);var Q=t(O,2),we=a(Q),Te=a(we);{var $=h=>{var R=ci();n(h,R)},X=h=>{var R=Ue(),ke=Pe(R);{var Be=Ie=>{var aa=_i();n(Ie,aa)};d(ke,Ie=>{i.session.syncStatus==="error"&&Ie(Be)},!0)}n(h,R)};d(Te,h=>{i.session.syncStatus==="pending"?h($):h(X,!1)})}e(we);var j=t(we,2);j.__click=h=>{h.stopPropagation(),T()};var oe=t(j,2);oe.__click=h=>{h.stopPropagation(),c()};var y=t(oe,2),de=a(y,!0);e(y),e(Q),e(E);var C=t(E,2);{var ee=h=>{var R=Ei(),ke=a(R),Be=a(ke),Ie=t(a(Be),2),aa=a(Ie);{var Fe=w=>{var I=Ue(),se=Pe(I);Ce(se,17,()=>i.session.trainingTypes,Le,(Se,be)=>{var Ee=ui(),We=a(Ee,!0);e(Ee),_(()=>v(We,s(be))),n(Se,Ee)}),n(w,I)},Me=w=>{var I=gi();n(w,I)};d(aa,w=>{i.session.trainingTypes&&i.session.trainingTypes.length>0&&!i.session.trainingTypes.includes("None")?w(Fe):w(Me,!1)})}e(Ie),e(Be);var Ge=t(Be,2);{var Ye=w=>{var I=fi(),se=t(a(I),2),Se=a(se,!0);e(se),e(I),_(()=>v(Se,i.session.difficulty)),n(w,I)};d(Ge,w=>{i.session.difficulty&&w(Ye)})}var Oe=t(Ge,2);{var Je=w=>{var I=bi(),se=t(a(I),2),Se=a(se);{var be=We=>{var sa=Ue(),wa=Pe(sa);Ce(wa,17,()=>i.session.categories,Le,(ta,ka)=>{var Aa=pi(),Xa=a(Aa,!0);e(Aa),_(()=>v(Xa,s(ka))),n(ta,Aa)}),n(We,sa)},Ee=We=>{var sa=mi();n(We,sa)};d(Se,We=>{i.session.categories.length>0&&!i.session.categories.includes("None")?We(be):We(Ee,!1)})}e(se),e(I),n(w,I)};d(Oe,w=>{i.session.categories?.length&&w(Je)})}var ya=t(Oe,2);{var Ea=w=>{var I=xi(),se=t(a(I),2),Se=a(se);{var be=We=>{var sa=Ue(),wa=Pe(sa);Ce(wa,17,()=>i.session.energySystems,Le,(ta,ka)=>{var Aa=hi(),Xa=a(Aa,!0);e(Aa),_(()=>v(Xa,s(ka))),n(ta,Aa)}),n(We,sa)},Ee=We=>{var sa=yi();n(We,sa)};d(Se,We=>{i.session.energySystems.length>0&&!i.session.energySystems.includes("None")?We(be):We(Ee,!1)})}e(se),e(I),n(w,I)};d(ya,w=>{i.session.energySystems?.length&&w(Ea)})}e(ke);var xa=t(ke,2),Wa=t(a(xa),2);{var za=w=>{var I=wi(),se=a(I,!0);e(I),_(()=>v(se,i.session.notes)),n(w,I)},La=w=>{var I=ki();n(w,I)};d(Wa,w=>{i.session.notes?w(za):w(La,!1)})}e(xa);var _a=t(xa,2),fa=a(_a),pa=t(a(fa),2),Ga=a(pa);e(pa);var ma=t(pa,2),ja=a(ma);e(ma),e(fa);var Oa=t(fa,2),Da=t(a(Oa),2),Ba=a(Da);e(Da);var da=t(Da,2),Ze=a(da);e(da),e(Oa);var ba=t(Oa,2),va=t(a(ba),2),Ta=a(va);e(va);var ra=t(va,2),ca=a(ra);e(ra),e(ba);var oa=t(ba,2);{var Ca=w=>{var I=Si(),se=t(a(I),2),Se=a(se);e(se);var be=t(se,2),Ee=a(be);e(be),e(I),_(()=>{Ne(Se,`width: ${i.session.openGrip/5*100}%`),v(Ee,`${i.session.openGrip??""}/5`)}),n(w,I)};d(oa,w=>{i.session.openGrip&&w(Ca)})}var Na=t(oa,2);{var Ia=w=>{var I=qi(),se=t(a(I),2),Se=a(se);e(se);var be=t(se,2),Ee=a(be);e(be),e(I),_(()=>{Ne(Se,`width: ${i.session.crimpGrip/5*100}%`),v(Ee,`${i.session.crimpGrip??""}/5`)}),n(w,I)};d(Na,w=>{i.session.crimpGrip&&w(Ia)})}var Ma=t(Na,2);{var Ra=w=>{var I=Di(),se=t(a(I),2),Se=a(se);e(se);var be=t(se,2),Ee=a(be);e(be),e(I),_(()=>{Ne(Se,`width: ${i.session.pinchGrip/5*100}%`),v(Ee,`${i.session.pinchGrip??""}/5`)}),n(w,I)};d(Ma,w=>{i.session.pinchGrip&&w(Ra)})}var Fa=t(Ma,2);{var Ha=w=>{var I=Ti(),se=t(a(I),2),Se=a(se);e(se);var be=t(se,2),Ee=a(be);e(be),e(I),_(()=>{Ne(Se,`width: ${i.session.sloperGrip/5*100}%`),v(Ee,`${i.session.sloperGrip??""}/5`)}),n(w,I)};d(Fa,w=>{i.session.sloperGrip&&w(Ha)})}var Pa=t(Fa,2);{var Va=w=>{var I=Ci(),se=t(a(I),2),Se=a(se);e(se);var be=t(se,2),Ee=a(be);e(be),e(I),_(()=>{Ne(Se,`width: ${i.session.jugGrip/5*100}%`),v(Ee,`${i.session.jugGrip??""}/5`)}),n(w,I)};d(Pa,w=>{i.session.jugGrip&&w(Va)})}e(_a);var Xe=t(_a,2),ha=t(a(Xe),2),Za=a(ha);Ce(Za,17,()=>i.session.climbs||[],Le,(w,I,se)=>{{let Se=Qe(()=>i.session.climbingType==="Mixed");vi(w,{get climb(){return s(I)},onDelete:()=>void 0,onUpdate:be=>void 0,get showClimbType(){return s(Se)}})}});var ae=t(Za,2);{var ce=w=>{var I=Fi();n(w,I)};d(ae,w=>{(i.session.climbs||[]).length===0&&w(ce)})}e(ha),e(Xe),e(R),_(()=>{Ne(Ga,`width: ${i.session.fingerLoad/5*100}%`),v(ja,`${i.session.fingerLoad??""}/5`),Ne(Ba,`width: ${i.session.shoulderLoad/5*100}%`),v(Ze,`${i.session.shoulderLoad??""}/5`),Ne(Ta,`width: ${i.session.forearmLoad/5*100}%`),v(ca,`${i.session.forearmLoad??""}/5`)}),na(3,R,()=>la,()=>({duration:150})),n(h,R)};d(C,h=>{s(m)&&h(ee)})}var le=t(C,2);Ja(le,{get isOpen(){return s(g)},title:"Delete Session",message:"Are you sure you want to delete this session? This action cannot be undone.",onConfirm:ie,onCancel:()=>r(g,!1)});var ye=t(le,2);Ya(ye,{get isOpen(){return s(x)},activityType:"outdoor_climb",get initialData(){return i.session},onClose:b,onSaved:G}),e(F),_((h,R,ke)=>{ve=ia(F,1,"session-card svelte-d5hg2r",null,ve,{expanded:s(m)}),He(E,"aria-expanded",s(m)),v(_e,h),v(ge,R),v(H,ke),v(J,`${i.session.area??""} `),v(W,`üïí ${(i.session.time||"12:00")??""}`),v(q,i.session.climbingType),v(pe,`${s(U)??""} climbs`),He(De,"title",`Finger Load: ${i.session.fingerLoad??""}`),v(ze,i.session.fingerLoad),He(Ae,"title",`Shoulder Load: ${i.session.shoulderLoad??""}`),v(je,i.session.shoulderLoad),He(me,"title",`Forearm Load: ${i.session.forearmLoad??""}`),v(Y,i.session.forearmLoad),v(de,s(m)?"‚ñ≤":"‚ñº")},[()=>new Date(i.session.date).getDate(),()=>new Date(i.session.date).toLocaleDateString(void 0,{month:"short"}),()=>new Date(i.session.date).getFullYear()]),n(xe,F),ea()}Ke(["click","keydown"]);var Gi=l('<span class="spinner svelte-1s7jdlh"></span> Fetching...',1),ji=l('<div class="error-banner svelte-1s7jdlh"> </div>'),Oi=l('<small class="svelte-1s7jdlh">Try adjusting your filters.</small>'),Ni=l('<div class="empty-state svelte-1s7jdlh"><p class="svelte-1s7jdlh">No outdoor climbing sessions found.</p> <!></div>'),Mi=l('<div class="load-more-container svelte-1s7jdlh"><button class="load-more-btn svelte-1s7jdlh"> </button></div>'),Pi=l('<div class="view-container svelte-1s7jdlh"><div class="view-header svelte-1s7jdlh"><h2 class="view-title svelte-1s7jdlh">‚õ∞Ô∏è Outdoor Climbing History</h2> <div class="header-actions svelte-1s7jdlh"><button class="action-btn secondary svelte-1s7jdlh" title="Export filtered data to CSV">üì• Export</button> <button class="action-btn svelte-1s7jdlh" title="Fetch data from cloud"><!></button></div></div> <!> <!> <div class="info-bar svelte-1s7jdlh"><div class="legend-wrapper svelte-1s7jdlh"><!></div> <div class="load-key svelte-1s7jdlh"><span class="key-label svelte-1s7jdlh">Load:</span> <div class="key-item svelte-1s7jdlh"><span class="dot finger svelte-1s7jdlh"></span> Finger</div> <div class="key-item svelte-1s7jdlh"><span class="dot shoulder svelte-1s7jdlh"></span> Shoulder</div> <div class="key-item svelte-1s7jdlh"><span class="dot forearm svelte-1s7jdlh"></span> Forearm</div></div></div> <div class="sessions-list"><!> <!> <!></div></div>');function Ai(xe,i){$e(i,!0);let m=D(ga([])),g=D(ga([])),x=D(!1),S=D(""),c=D(ga({startDate:"",endDate:"",area:"",crag:"",climbingType:"",sessionType:"",grade:""})),T=D(20);const b=20;Ka(()=>{G()});async function G(){r(x,!0),r(S,"");try{const o=await cs();o.ok&&o.data?(r(m,o.data.map(u=>({...u,activityType:"outdoor_climb"})),!0),s(m).sort((u,L)=>new Date(L.date).getTime()-new Date(u.date).getTime()),Z()):r(S,o.error||"Failed to fetch data",!0)}catch(o){r(S,o instanceof Error?o.message:"Unknown error",!0)}finally{r(x,!1)}}function ie(o){r(c,o,!0),Z()}function Z(){r(T,b),r(g,s(m).filter(o=>{if(s(c).startDate&&o.date<s(c).startDate||s(c).endDate&&o.date>s(c).endDate||s(c).area&&!o.area.toLowerCase().includes(s(c).area.toLowerCase())||s(c).crag&&!o.crag.toLowerCase().includes(s(c).crag.toLowerCase()))return!1;if(s(c).climbingType&&(o.climbingType==="Leading"?"Sport":o.climbingType)!==s(c).climbingType)if(o.climbingType==="Mixed")if(s(c).climbingType==="Bouldering"){if(!o.climbs.some(L=>!L.isSport))return!1}else if(s(c).climbingType==="Sport"||s(c).climbingType==="Trad"){if(!o.climbs.some(L=>L.isSport))return!1}else return!1;else return!1;if(s(c).sessionType&&!o.trainingTypes?.includes(s(c).sessionType))return!1;if(s(c).grade){const u=s(c).grade.trim().toLowerCase();if(!o.climbs.some(W=>W.grade.trim().toLowerCase()===u))return!1}return!0}),!0)}function ue(){r(T,s(T)+b)}var U=Pi(),K=a(U),F=t(a(K),2),ve=a(F);ve.__click=()=>Qa(s(g),"outdoor_climbs");var E=t(ve,2);E.__click=G;var O=a(E);{var V=o=>{var u=Gi();qa(),n(o,u)},N=o=>{var u=Sa("‚òÅÔ∏è Fetch Data");n(o,u)};d(O,o=>{s(x)?o(V):o(N,!1)})}e(E),e(F),e(K);var _e=t(K,2);{var ne=o=>{var u=ji(),L=a(u,!0);e(u),_(()=>v(L,s(S))),na(3,u,()=>la),n(o,u)};d(_e,o=>{s(S)&&o(ne)})}var ge=t(_e,2);Yt(ge,{onFilterParamsChange:ie});var M=t(ge,2),H=a(M),f=a(H);ts(f),e(H),qa(2),e(M);var z=t(M,2),A=a(z);Ce(A,17,()=>s(g).slice(0,s(T)),o=>o.id,(o,u)=>{Li(o,{get session(){return s(u)},onDelete:G})});var J=t(A,2);{var p=o=>{var u=Ni(),L=t(a(u),2);{var W=fe=>{var q=Oi();n(fe,q)};d(L,fe=>{s(m).length>0&&fe(W)})}e(u),n(o,u)};d(J,o=>{s(g).length===0&&o(p)})}var k=t(J,2);{var B=o=>{var u=Mi(),L=a(u);L.__click=ue;var W=a(L);e(L),e(u),_(()=>v(W,`Load More (${s(g).length-s(T)} remaining)`)),n(o,u)};d(k,o=>{s(T)<s(g).length&&o(B)})}e(z),e(U),_(()=>E.disabled=s(x)),n(xe,U),ea()}Ke(["click"]);var Bi=l('<span class="chevron svelte-11rkzid">‚ñ≤</span>'),Ii=l('<span class="chevron svelte-11rkzid">‚ñº</span>'),Ri=l('<div class="filter-body svelte-11rkzid"><div class="filter-grid svelte-11rkzid"><div class="filter-item svelte-11rkzid"><label for="start-date" class="svelte-11rkzid">Start Date</label> <input type="date" id="start-date" class="svelte-11rkzid"/></div> <div class="filter-item svelte-11rkzid"><label for="end-date" class="svelte-11rkzid">End Date</label> <input type="date" id="end-date" class="svelte-11rkzid"/></div> <div class="filter-item svelte-11rkzid"><label for="name-filter" class="svelte-11rkzid">Session Name</label> <input type="text" id="name-filter" placeholder="e.g. Leg Day" class="svelte-11rkzid"/></div> <div class="filter-item svelte-11rkzid"><label for="block-filter" class="svelte-11rkzid">Training Block</label> <select id="block-filter" class="svelte-11rkzid"><option>All Blocks</option><option>Strength</option><option>Power</option><option>Power Endurance</option><option>Muscular Endurance</option></select></div></div> <div class="filter-actions svelte-11rkzid"><button class="reset-btn svelte-11rkzid">Reset Filters</button></div></div>'),Vi=l('<div class="filter-container svelte-11rkzid"><button class="filter-header svelte-11rkzid"><div class="header-content svelte-11rkzid"><span class="icon svelte-11rkzid">üîç</span> <span class="title svelte-11rkzid">Filters</span> <!></div></button> <!></div>');function Ui(xe,i){$e(i,!0);let m=D(!1),g=D(""),x=D(""),S=D(""),c=D("");function T(){r(m,!s(m))}function b(){r(g,""),r(x,""),r(S,""),r(c,""),G()}function G(){i.onFilterParamsChange({startDate:s(g),endDate:s(x),name:s(S),trainingBlock:s(c)})}var ie=Vi(),Z=a(ie);Z.__click=T;var ue=a(Z),U=t(a(ue),4);{var K=O=>{var V=Bi();n(O,V)},F=O=>{var V=Ii();n(O,V)};d(U,O=>{s(m)?O(K):O(F,!1)})}e(ue),e(Z);var ve=t(Z,2);{var E=O=>{var V=Ri(),N=a(V),_e=a(N),ne=t(a(_e),2);Re(ne),ne.__change=G,e(_e);var ge=t(_e,2),M=t(a(ge),2);Re(M),M.__change=G,e(ge);var H=t(ge,2),f=t(a(H),2);Re(f),f.__input=G,e(H);var z=t(H,2),A=t(a(z),2);A.__change=G;var J=a(A);J.value=J.__value="";var p=t(J);p.value=p.__value="Strength";var k=t(p);k.value=k.__value="Power";var B=t(k);B.value=B.__value="Power Endurance";var o=t(B);o.value=o.__value="Muscular Endurance",e(A),e(z),e(N);var u=t(N,2),L=a(u);L.__click=b,e(u),e(V),Ve(ne,()=>s(g),W=>r(g,W)),Ve(M,()=>s(x),W=>r(x,W)),Ve(f,()=>s(S),W=>r(S,W)),ua(A,()=>s(c),W=>r(c,W)),na(3,V,()=>la,()=>({duration:200})),n(O,V)};d(ve,O=>{s(m)&&O(E)})}e(ie),_(()=>He(Z,"aria-expanded",s(m))),n(xe,ie),ea()}Ke(["click","change","input"]);var Wi=l('<span class="block-tag svelte-cirrfc"> </span>'),Hi=l('<span class="status-icon pending svelte-cirrfc" title="Waiting to sync">üîÑ</span>'),Ji=l('<span class="status-icon error svelte-cirrfc" title="Sync error">‚ö†Ô∏è</span>'),Yi=l('<div class="bw-info svelte-cirrfc"><span class="label svelte-cirrfc">Bodyweight:</span> </div>'),Zi=l('<span class="muscle-tag svelte-cirrfc"> </span>'),Xi=l('<span class="muscle-tag svelte-cirrfc"> </span>'),Ki=l('<div class="muscle-tags svelte-cirrfc"><!> <!></div>'),Qi=l('<span class="tag w svelte-cirrfc">W</span>'),$i=l('<span class="tag f svelte-cirrfc">F</span>'),en=l('<span class="tag d svelte-cirrfc">D</span>'),an=l('<div><span class="set-num svelte-cirrfc"></span> <!> <!> <!> <span class="val svelte-cirrfc"><span class="weight"> </span> <span class="x svelte-cirrfc">x</span> <span class="reps"> </span></span></div>'),sn=l('<div class="exercise-item svelte-cirrfc"><div class="exercise-header svelte-cirrfc"><h4 class="svelte-cirrfc"> </h4> <!></div> <div class="sets-grid svelte-cirrfc"></div></div>'),tn=l('<div class="subcategory-group svelte-cirrfc"><h5 class="subcategory-header svelte-cirrfc"> </h5> <!></div>'),nn=l('<div class="category-group svelte-cirrfc"><h4 class="category-header svelte-cirrfc"> </h4> <!></div>'),rn=l('<div class="card-body svelte-cirrfc"><!> <div class="exercises-list svelte-cirrfc"></div></div>'),ln=l('<div><div class="card-header svelte-cirrfc" role="button" tabindex="0"><div class="header-main svelte-cirrfc"><div class="date-badge svelte-cirrfc"><span class="day svelte-cirrfc"> </span> <span class="month svelte-cirrfc"> </span> <span class="year svelte-cirrfc"> </span></div> <div class="session-info svelte-cirrfc"><div class="session-text"><div class="name-display svelte-cirrfc"><h3 class="name svelte-cirrfc"> </h3></div> <div class="session-meta svelte-cirrfc"><span class="time-tag svelte-cirrfc"> </span> <!> <span class="stat svelte-cirrfc"> </span> <span class="stat svelte-cirrfc"> </span> <span class="stat svelte-cirrfc"> </span></div></div></div></div> <div class="header-actions svelte-cirrfc"><div class="header-status"><!></div> <button class="btn-icon edit-session svelte-cirrfc" title="Edit Session">‚úèÔ∏è</button> <button class="btn-icon delete-session svelte-cirrfc" title="Delete Session">üóëÔ∏è</button> <span class="chevron svelte-cirrfc"> </span></div></div> <!></div> <!> <!>',1);function vn(xe,i){$e(i,!0);let m=D(!1),g=D(!1),x=D(!1);function S(){r(m,!s(m))}function c(){r(g,!0)}function T(){r(x,!0)}function b(){r(x,!1)}async function G(){r(x,!1),await Ua()}async function ie(){try{const y=await _s(i.session.id);y.ok?(r(g,!1),i.onDelete()):(console.error("Failed to delete session:",y.error),alert("Failed to delete session"))}catch(y){console.error("Exception deleting session:",y),alert("Error deleting session")}}function Z(y){return Ds.find(de=>de.name===y)}function ue(y){switch(y){case"Strength":return{bg:"rgba(99, 102, 241, 0.1)",color:"#4338ca",border:"rgba(99, 102, 241, 0.2)"};case"Power":return{bg:"rgba(239, 68, 68, 0.1)",color:"#b91c1c",border:"rgba(239, 68, 68, 0.2)"};case"Power Endurance":return{bg:"rgba(245, 158, 11, 0.1)",color:"#b45309",border:"rgba(245, 158, 11, 0.2)"};case"Muscular Endurance":return{bg:"rgba(16, 185, 129, 0.1)",color:"#047857",border:"rgba(16, 185, 129, 0.2)"};default:return{bg:"rgba(107, 114, 128, 0.1)",color:"#374151",border:"rgba(107, 114, 128, 0.2)"}}}let U=Qe(()=>i.session.exercises?.length??0),K=Qe(()=>(i.session.exercises||[]).reduce((y,de)=>y+(de.sets?.length||0),0)),F=Qe(()=>(i.session.exercises||[]).reduce((y,de)=>y+(de.sets||[]).reduce((C,ee)=>C+(ee.weight||0)*(ee.reps||0),0),0)),ve=Qe(()=>(i.session.exercises||[]).reduce((y,de)=>{const C=Z(de.name),ee=C?.category||"Other",le=C?.subcategory||"Misc";return y[ee]||(y[ee]={}),y[ee][le]||(y[ee][le]=[]),y[ee][le].push(de),y},{}));var E=ln(),O=Pe(E);let V;var N=a(O);N.__click=S,N.__keydown=y=>y.key==="Enter"&&S();var _e=a(N),ne=a(_e),ge=a(ne),M=a(ge,!0);e(ge);var H=t(ge,2),f=a(H,!0);e(H);var z=t(H,2),A=a(z,!0);e(z),e(ne);var J=t(ne,2),p=a(J),k=a(p),B=a(k),o=a(B,!0);e(B),e(k);var u=t(k,2),L=a(u),W=a(L);e(L);var fe=t(L,2);{var q=y=>{const de=Qe(()=>ue(i.session.trainingBlock));var C=Wi(),ee=a(C,!0);e(C),_(()=>{Ne(C,`--bg-color: ${s(de).bg??""}; --text-color: ${s(de).color??""}; --border-color: ${s(de).border??""};`),v(ee,i.session.trainingBlock)}),n(y,C)};d(fe,y=>{i.session.trainingBlock&&y(q)})}var te=t(fe,2),P=a(te);e(te);var pe=t(te,2),re=a(pe);e(pe);var qe=t(pe,2),he=a(qe);e(qe),e(u),e(p),e(J),e(_e);var De=t(_e,2),ze=a(De),Ae=a(ze);{var je=y=>{var de=Hi();n(y,de)},me=y=>{var de=Ue(),C=Pe(de);{var ee=le=>{var ye=Ji();n(le,ye)};d(C,le=>{i.session.syncStatus==="error"&&le(ee)},!0)}n(y,de)};d(Ae,y=>{i.session.syncStatus==="pending"?y(je):y(me,!1)})}e(ze);var Y=t(ze,2);Y.__click=y=>{y.stopPropagation(),T()};var Q=t(Y,2);Q.__click=y=>{y.stopPropagation(),c()};var we=t(Q,2),Te=a(we,!0);e(we),e(De),e(N);var $=t(N,2);{var X=y=>{var de=rn(),C=a(de);{var ee=ye=>{var h=Yi(),R=t(a(h));e(h),_(()=>v(R,` ${i.session.bodyweight??""}kg`)),n(ye,h)};d(C,ye=>{i.session.bodyweight&&ye(ee)})}var le=t(C,2);Ce(le,21,()=>Object.entries(s(ve)),Le,(ye,h)=>{var R=Qe(()=>$a(s(h),2));let ke=()=>s(R)[0],Be=()=>s(R)[1];var Ie=nn(),aa=a(Ie),Fe=a(aa,!0);e(aa);var Me=t(aa,2);Ce(Me,17,()=>Object.entries(Be()),Le,(Ge,Ye)=>{var Oe=Qe(()=>$a(s(Ye),2));let Je=()=>s(Oe)[0],ya=()=>s(Oe)[1];var Ea=tn(),xa=a(Ea),Wa=a(xa,!0);e(xa);var za=t(xa,2);Ce(za,17,ya,Le,(La,_a)=>{const fa=Qe(()=>Z(s(_a).name));var pa=sn(),Ga=a(pa),ma=a(Ga),ja=a(ma,!0);e(ma);var Oa=t(ma,2);{var Da=da=>{var Ze=Ki(),ba=a(Ze);Ce(ba,17,()=>s(fa).targetMuscles.slice(0,3),Le,(ra,ca)=>{var oa=Zi(),Ca=a(oa,!0);e(oa),_(()=>v(Ca,s(ca))),n(ra,oa)});var va=t(ba,2);{var Ta=ra=>{var ca=Xi(),oa=a(ca);e(ca),_(()=>v(oa,`+${s(fa).targetMuscles.length-3}`)),n(ra,ca)};d(va,ra=>{s(fa).targetMuscles.length>3&&ra(Ta)})}e(Ze),n(da,Ze)};d(Oa,da=>{s(fa)&&da(Da)})}e(Ga);var Ba=t(Ga,2);Ce(Ba,21,()=>s(_a).sets,Le,(da,Ze,ba)=>{var va=an();let Ta;var ra=a(va);ra.textContent=ba+1;var ca=t(ra,2);{var oa=Xe=>{var ha=Qi();n(Xe,ha)};d(ca,Xe=>{s(Ze).isWarmup&&Xe(oa)})}var Ca=t(ca,2);{var Na=Xe=>{var ha=$i();n(Xe,ha)};d(Ca,Xe=>{s(Ze).isFailure&&Xe(Na)})}var Ia=t(Ca,2);{var Ma=Xe=>{var ha=en();n(Xe,ha)};d(Ia,Xe=>{s(Ze).isDropSet&&Xe(Ma)})}var Ra=t(Ia,2),Fa=a(Ra),Ha=a(Fa);e(Fa);var Pa=t(Fa,4),Va=a(Pa,!0);e(Pa),e(Ra),e(va),_(()=>{Ta=ia(va,1,"set-pill svelte-cirrfc",null,Ta,{completed:s(Ze).completed,warmup:s(Ze).isWarmup}),v(Ha,`${s(Ze).weight??""}kg`),v(Va,s(Ze).reps)}),n(da,va)}),e(Ba),e(pa),_(()=>v(ja,s(_a).name)),n(La,pa)}),e(Ea),_(()=>v(Wa,Je())),n(Ge,Ea)}),e(Ie),_(()=>v(Fe,ke())),n(ye,Ie)}),e(le),e(de),na(3,de,()=>la,()=>({duration:150})),n(y,de)};d($,y=>{s(m)&&y(X)})}e(O);var j=t(O,2);Ja(j,{get isOpen(){return s(g)},title:"Delete Session",message:"Are you sure you want to delete this session? This cannot be undone.",onConfirm:ie,onCancel:()=>r(g,!1)});var oe=t(j,2);Ya(oe,{get isOpen(){return s(x)},activityType:"gym_session",get initialData(){return i.session},onClose:b,onSaved:G}),_((y,de,C,ee)=>{V=ia(O,1,"session-card svelte-cirrfc",null,V,{expanded:s(m)}),He(N,"aria-expanded",s(m)),v(M,y),v(f,de),v(A,C),v(o,i.session.name),v(W,`üïí ${(i.session.time||"12:00")??""}`),v(P,`${s(U)??""} Exercises`),v(re,`${s(K)??""} Sets`),v(he,`~${ee??""}kg Vol`),v(Te,s(m)?"‚ñ≤":"‚ñº")},[()=>new Date(i.session.date).getDate(),()=>new Date(i.session.date).toLocaleDateString("en-GB",{month:"short"}),()=>new Date(i.session.date).getFullYear(),()=>Math.round(s(F)).toLocaleString()]),n(xe,E),ea()}Ke(["click","keydown"]);var on=l('<span class="spinner svelte-133enjd"></span> Fetching...',1),dn=l('<div class="error-banner svelte-133enjd"> </div>'),cn=l('<small class="svelte-133enjd">Try adjusting your filters.</small>'),_n=l('<div class="empty-state svelte-133enjd"><p class="svelte-133enjd">No gym sessions found.</p> <!></div>'),un=l('<div class="load-more-container svelte-133enjd"><button class="load-more-btn svelte-133enjd"> </button></div>'),gn=l('<div class="view-container svelte-133enjd"><div class="view-header svelte-133enjd"><h2 class="view-title svelte-133enjd">üèãÔ∏è Gym Session History</h2> <div class="header-actions svelte-133enjd"><button class="action-btn secondary svelte-133enjd" title="Export filtered data to CSV">üì• Export</button> <button class="action-btn svelte-133enjd" title="Fetch data from cloud"><!></button></div></div> <!> <!> <div class="sessions-list"><!> <!> <!></div></div>');function fn(xe,i){$e(i,!0);let m=D(ga([])),g=D(ga([])),x=D(!1),S=D(""),c=D(ga({startDate:"",endDate:"",name:"",trainingBlock:""})),T=D(20);const b=20;Ka(()=>{G()});async function G(){r(x,!0),r(S,"");try{const p=await us();p.ok&&p.data?(r(m,p.data.map(k=>({...k,activityType:"gym_session"})),!0),s(m).sort((k,B)=>new Date(B.date).getTime()-new Date(k.date).getTime()),Z()):r(S,p.error||"Failed to fetch data",!0)}catch(p){r(S,p instanceof Error?p.message:"Unknown error",!0)}finally{r(x,!1)}}function ie(p){r(c,p,!0),Z()}function Z(){r(T,b),r(g,s(m).filter(p=>!(s(c).startDate&&p.date<s(c).startDate||s(c).endDate&&p.date>s(c).endDate||s(c).name&&!p.name.toLowerCase().includes(s(c).name.toLowerCase())||s(c).trainingBlock&&p.trainingBlock!==s(c).trainingBlock)),!0)}function ue(){r(T,s(T)+b)}var U=gn(),K=a(U),F=t(a(K),2),ve=a(F);ve.__click=()=>Qa(s(g),"gym_sessions");var E=t(ve,2);E.__click=G;var O=a(E);{var V=p=>{var k=on();qa(),n(p,k)},N=p=>{var k=Sa("‚òÅÔ∏è Fetch Data");n(p,k)};d(O,p=>{s(x)?p(V):p(N,!1)})}e(E),e(F),e(K);var _e=t(K,2);{var ne=p=>{var k=dn(),B=a(k,!0);e(k),_(()=>v(B,s(S))),na(3,k,()=>la),n(p,k)};d(_e,p=>{s(S)&&p(ne)})}var ge=t(_e,2);Ui(ge,{onFilterParamsChange:ie});var M=t(ge,2),H=a(M);Ce(H,17,()=>s(g).slice(0,s(T)),p=>p.id,(p,k)=>{vn(p,{get session(){return s(k)},onDelete:G})});var f=t(H,2);{var z=p=>{var k=_n(),B=t(a(k),2);{var o=u=>{var L=cn();n(u,L)};d(B,u=>{s(m).length>0&&u(o)})}e(k),n(p,k)};d(f,p=>{s(g).length===0&&p(z)})}var A=t(f,2);{var J=p=>{var k=un(),B=a(k);B.__click=ue;var o=a(B);e(B),e(k),_(()=>v(o,`Load More (${s(g).length-s(T)} remaining)`)),n(p,k)};d(A,p=>{s(T)<s(g).length&&p(J)})}e(M),e(U),_(()=>E.disabled=s(x)),n(xe,U),ea()}Ke(["click"]);var pn=l('<div class="load-summary svelte-1tiisng"><div class="load-badge finger svelte-1tiisng"> </div> <div class="load-badge shoulder svelte-1tiisng"> </div> <div class="load-badge forearm svelte-1tiisng"> </div></div>'),mn=l('<div class="metric svelte-1tiisng"><span class="label svelte-1tiisng">Open Grip</span> <div class="bar-container svelte-1tiisng"><div class="bar-fill svelte-1tiisng"></div></div> <span class="score svelte-1tiisng"> </span></div>'),bn=l('<div class="metric svelte-1tiisng"><span class="label svelte-1tiisng">Crimp Grip</span> <div class="bar-container svelte-1tiisng"><div class="bar-fill svelte-1tiisng"></div></div> <span class="score svelte-1tiisng"> </span></div>'),hn=l('<div class="metric svelte-1tiisng"><span class="label svelte-1tiisng">Pinch Grip</span> <div class="bar-container svelte-1tiisng"><div class="bar-fill svelte-1tiisng"></div></div> <span class="score svelte-1tiisng"> </span></div>'),yn=l('<div class="metric svelte-1tiisng"><span class="label svelte-1tiisng">Sloper Grip</span> <div class="bar-container svelte-1tiisng"><div class="bar-fill svelte-1tiisng"></div></div> <span class="score svelte-1tiisng"> </span></div>'),xn=l('<div class="metric svelte-1tiisng"><span class="label svelte-1tiisng">Jug Grip</span> <div class="bar-container svelte-1tiisng"><div class="bar-fill svelte-1tiisng"></div></div> <span class="score svelte-1tiisng"> </span></div>'),wn=l('<div class="metrics-container svelte-1tiisng"><div class="metric svelte-1tiisng"><span class="label svelte-1tiisng">Finger Load</span> <div class="bar-container svelte-1tiisng"><div class="bar-fill svelte-1tiisng"></div></div> <span class="score svelte-1tiisng"> </span></div> <div class="metric svelte-1tiisng"><span class="label svelte-1tiisng">Shoulder Load</span> <div class="bar-container svelte-1tiisng"><div class="bar-fill svelte-1tiisng"></div></div> <span class="score svelte-1tiisng"> </span></div> <div class="metric svelte-1tiisng"><span class="label svelte-1tiisng">Forearm Load</span> <div class="bar-container svelte-1tiisng"><div class="bar-fill svelte-1tiisng"></div></div> <span class="score svelte-1tiisng"> </span></div> <!> <!> <!> <!> <!></div>'),kn=l('<span class="set-tag svelte-1tiisng"> <span class="x svelte-1tiisng">x</span> </span>'),Sn=l('<div class="ex-notes svelte-1tiisng"> </div>'),qn=l('<div class="exercise-item svelte-1tiisng"><div class="ex-header svelte-1tiisng"><div class="ex-title-group svelte-1tiisng"><span class="ex-name svelte-1tiisng"> </span> <span class="ex-grip svelte-1tiisng"> </span></div></div> <div class="ex-sets svelte-1tiisng"></div> <!></div>'),Dn=l('<div class="card-body svelte-1tiisng"><!> <div class="exercises-list svelte-1tiisng"></div></div>'),Tn=l('<div><div class="card-header svelte-1tiisng" role="button" tabindex="0"><div class="header-main svelte-1tiisng"><span class="session-date svelte-1tiisng"> <span class="time-tag svelte-1tiisng"> </span></span> <span class="meta svelte-1tiisng"><!> </span> <!></div> <div class="header-status svelte-1tiisng"><span>‚óè</span> <button class="btn-icon edit-session svelte-1tiisng" title="Edit Session">‚úèÔ∏è</button> <button class="btn-icon delete-btn svelte-1tiisng" title="Delete Session">üóëÔ∏è</button> <span class="chevron svelte-1tiisng"> </span></div></div> <!></div> <!> <!>',1);function Cn(xe,i){$e(i,!0);let m=D(!1),g=D(!1),x=D(!1);function S(){r(m,!s(m))}function c(){r(g,!0)}function T(){r(x,!0)}function b(){r(x,!1)}async function G(){r(x,!1),await Ua()}async function ie(){try{const q=await gs(i.session.id);q.ok?(r(g,!1),i.onDelete()):(console.error("Failed to delete session:",q.error),alert("Failed to delete session"))}catch(q){console.error("Exception deleting session:",q),alert("Error deleting session")}}function Z(q){return q.exercises.reduce((te,P)=>te+P.details.length,0)}var ue=Tn(),U=Pe(ue);let K;var F=a(U);F.__click=S,F.__keydown=q=>q.key==="Enter"&&S();var ve=a(F),E=a(ve),O=a(E),V=t(O),N=a(V,!0);e(V),e(E);var _e=t(E,2),ne=a(_e);{var ge=q=>{var te=Sa();_(()=>v(te,`${i.session.location??""} ¬∑`)),n(q,te)};d(ne,q=>{i.session.location&&i.session.location!=="N/A"&&i.session.location!=="Home"&&q(ge)})}var M=t(ne);e(_e);var H=t(_e,2);{var f=q=>{var te=pn(),P=a(te),pe=a(P,!0);e(P);var re=t(P,2),qe=a(re,!0);e(re);var he=t(re,2),De=a(he,!0);e(he),e(te),_(()=>{He(P,"title",`Finger Load: ${i.session.fingerLoad??""}`),v(pe,i.session.fingerLoad),He(re,"title",`Shoulder Load: ${i.session.shoulderLoad??""}`),v(qe,i.session.shoulderLoad||"-"),He(he,"title",`Forearm Load: ${i.session.forearmLoad??""}`),v(De,i.session.forearmLoad||"-")}),n(q,te)};d(H,q=>{i.session.fingerLoad&&q(f)})}e(ve);var z=t(ve,2),A=a(z);let J;var p=t(A,2);p.__click=q=>{q.stopPropagation(),T()};var k=t(p,2);k.__click=q=>{q.stopPropagation(),c()};var B=t(k,2),o=a(B,!0);e(B),e(z),e(F);var u=t(F,2);{var L=q=>{var te=Dn(),P=a(te);{var pe=qe=>{var he=wn(),De=a(he),ze=t(a(De),2),Ae=a(ze);e(ze);var je=t(ze,2),me=a(je);e(je),e(De);var Y=t(De,2),Q=t(a(Y),2),we=a(Q);e(Q);var Te=t(Q,2),$=a(Te);e(Te),e(Y);var X=t(Y,2),j=t(a(X),2),oe=a(j);e(j);var y=t(j,2),de=a(y);e(y),e(X);var C=t(X,2);{var ee=Fe=>{var Me=mn(),Ge=t(a(Me),2),Ye=a(Ge);e(Ge);var Oe=t(Ge,2),Je=a(Oe);e(Oe),e(Me),_(()=>{Ne(Ye,`width: ${i.session.openGrip/5*100}%`),v(Je,`${i.session.openGrip??""}/5`)}),n(Fe,Me)};d(C,Fe=>{i.session.openGrip&&Fe(ee)})}var le=t(C,2);{var ye=Fe=>{var Me=bn(),Ge=t(a(Me),2),Ye=a(Ge);e(Ge);var Oe=t(Ge,2),Je=a(Oe);e(Oe),e(Me),_(()=>{Ne(Ye,`width: ${i.session.crimpGrip/5*100}%`),v(Je,`${i.session.crimpGrip??""}/5`)}),n(Fe,Me)};d(le,Fe=>{i.session.crimpGrip&&Fe(ye)})}var h=t(le,2);{var R=Fe=>{var Me=hn(),Ge=t(a(Me),2),Ye=a(Ge);e(Ge);var Oe=t(Ge,2),Je=a(Oe);e(Oe),e(Me),_(()=>{Ne(Ye,`width: ${i.session.pinchGrip/5*100}%`),v(Je,`${i.session.pinchGrip??""}/5`)}),n(Fe,Me)};d(h,Fe=>{i.session.pinchGrip&&Fe(R)})}var ke=t(h,2);{var Be=Fe=>{var Me=yn(),Ge=t(a(Me),2),Ye=a(Ge);e(Ge);var Oe=t(Ge,2),Je=a(Oe);e(Oe),e(Me),_(()=>{Ne(Ye,`width: ${i.session.sloperGrip/5*100}%`),v(Je,`${i.session.sloperGrip??""}/5`)}),n(Fe,Me)};d(ke,Fe=>{i.session.sloperGrip&&Fe(Be)})}var Ie=t(ke,2);{var aa=Fe=>{var Me=xn(),Ge=t(a(Me),2),Ye=a(Ge);e(Ge);var Oe=t(Ge,2),Je=a(Oe);e(Oe),e(Me),_(()=>{Ne(Ye,`width: ${i.session.jugGrip/5*100}%`),v(Je,`${i.session.jugGrip??""}/5`)}),n(Fe,Me)};d(Ie,Fe=>{i.session.jugGrip&&Fe(aa)})}e(he),_(()=>{Ne(Ae,`width: ${(i.session.fingerLoad||0)/5*100}%`),v(me,`${i.session.fingerLoad??""}/5`),Ne(we,`width: ${(i.session.shoulderLoad||0)/5*100}%`),v($,`${(i.session.shoulderLoad||0)??""}/5`),Ne(oe,`width: ${(i.session.forearmLoad||0)/5*100}%`),v(de,`${(i.session.forearmLoad||0)??""}/5`)}),n(qe,he)};d(P,qe=>{i.session.fingerLoad&&qe(pe)})}var re=t(P,2);Ce(re,21,()=>i.session.exercises||[],Le,(qe,he)=>{var De=qn(),ze=a(De),Ae=a(ze),je=a(Ae),me=a(je,!0);e(je);var Y=t(je,2),Q=a(Y,!0);e(Y),e(Ae),e(ze);var we=t(ze,2);Ce(we,21,()=>s(he).details,Le,(X,j)=>{var oe=kn(),y=a(oe),de=t(y,2);e(oe),_(()=>{v(y,`${s(j).weight>0?`+${s(j).weight}kg`:"BW"} `),v(de,` ${s(j).reps??""}s/reps`)}),n(X,oe)}),e(we);var Te=t(we,2);{var $=X=>{var j=Sn(),oe=a(j);e(j),_(()=>v(oe,`"${s(he).notes??""}"`)),n(X,j)};d(Te,X=>{s(he).notes&&X($)})}e(De),_(()=>{v(me,s(he).name),v(Q,s(he).gripType)}),n(qe,De)}),e(re),e(te),na(3,te,()=>la,()=>({duration:150})),n(q,te)};d(u,q=>{s(m)&&q(L)})}e(U);var W=t(U,2);Ja(W,{get isOpen(){return s(g)},title:"Delete Fingerboard Session",message:"Are you sure you want to delete this session? This cannot be undone.",onConfirm:ie,onCancel:()=>r(g,!1)});var fe=t(W,2);Ya(fe,{get isOpen(){return s(x)},activityType:"fingerboarding",get initialData(){return i.session},onClose:b,onSaved:G}),_((q,te)=>{K=ia(U,1,"session-card svelte-1tiisng",null,K,{expanded:s(m)}),v(O,`${q??""} `),v(N,i.session.time||"12:00"),v(M,` ${i.session.exercises.length??""} Exercises ¬∑ ${te??""} Sets`),J=ia(A,1,"sync-dot svelte-1tiisng",null,J,{synced:i.session.syncStatus==="synced"}),He(A,"title",i.session.syncStatus==="synced"?"Synced":"Local"),v(o,s(m)?"‚ñ≤":"‚ñº")},[()=>new Date(i.session.date).toLocaleDateString(void 0,{weekday:"short",month:"short",day:"numeric",year:"numeric"}),()=>Z(i.session)]),n(xe,ue),ea()}Ke(["click","keydown"]);var Fn=l('<span class="spinner svelte-1szs0u9"></span> Fetching...',1),En=l('<div class="loading svelte-1szs0u9">Loading sessions...</div>'),zn=l('<div class="empty-state svelte-1szs0u9"><!></div>'),Ln=l('<div class="load-more-container svelte-1szs0u9"><button class="load-more-btn svelte-1szs0u9"> </button></div>'),Gn=l('<div class="timeline svelte-1szs0u9"><!> <!></div>'),jn=l('<div class="view-content svelte-1szs0u9"><div class="header svelte-1szs0u9"><h3 class="svelte-1szs0u9">ü§è Fingerboarding Log</h3> <button class="fetch-btn svelte-1szs0u9" title="Fetch data from cloud"><!></button></div> <div class="filters svelte-1szs0u9"><div class="filter-group svelte-1szs0u9"><label for="start-date" class="svelte-1szs0u9">From</label> <input type="date" id="start-date" class="svelte-1szs0u9"/></div> <div class="filter-group svelte-1szs0u9"><label for="end-date" class="svelte-1szs0u9">To</label> <input type="date" id="end-date" class="svelte-1szs0u9"/></div></div> <!></div>');function On(xe,i){$e(i,!0);let m=D(ga([])),g=D(!0),x=D(""),S=D(""),c=D(20);const T=20;rs(()=>{s(x),s(S),r(c,T)});async function b(){r(g,!0);try{const f=await fs();f.ok&&f.data&&r(m,f.data.map(z=>({...z,activityType:"fingerboarding",syncStatus:"synced"})).sort((z,A)=>new Date(A.date).getTime()-new Date(z.date).getTime()),!0)}catch(f){console.error("Failed to fetch sessions",f)}finally{r(g,!1)}}b();let G=Qe(()=>s(m).filter(f=>!(s(x)&&new Date(f.date)<new Date(s(x))||s(S)&&new Date(f.date)>new Date(s(S)))));function ie(){r(c,s(c)+T)}function Z(){b()}var ue=jn(),U=a(ue),K=t(a(U),2);K.__click=b;var F=a(K);{var ve=f=>{var z=Fn();qa(),n(f,z)},E=f=>{var z=Sa("‚òÅÔ∏è Fetch Data");n(f,z)};d(F,f=>{s(g)?f(ve):f(E,!1)})}e(K),e(U);var O=t(U,2),V=a(O),N=t(a(V),2);Re(N),e(V);var _e=t(V,2),ne=t(a(_e),2);Re(ne),e(_e),e(O);var ge=t(O,2);{var M=f=>{var z=En();n(f,z)},H=f=>{var z=Ue(),A=Pe(z);{var J=k=>{var B=zn(),o=a(B);{var u=W=>{var fe=Sa("No sessions match filter.");n(W,fe)},L=W=>{var fe=Sa("No fingerboarding sessions logged yet.");n(W,fe)};d(o,W=>{s(m).length>0?W(u):W(L,!1)})}e(B),n(k,B)},p=k=>{var B=Gn(),o=a(B);Ce(o,17,()=>s(G).slice(0,s(c)),Le,(W,fe)=>{Cn(W,{get session(){return s(fe)},onDelete:Z})});var u=t(o,2);{var L=W=>{var fe=Ln(),q=a(fe);q.__click=ie;var te=a(q);e(q),e(fe),_(()=>v(te,`Load More (${s(G).length-s(c)} remaining)`)),n(W,fe)};d(u,W=>{s(c)<s(G).length&&W(L)})}e(B),n(k,B)};d(A,k=>{s(G).length===0?k(J):k(p,!1)},!0)}n(f,z)};d(ge,f=>{s(g)&&s(m).length===0?f(M):f(H,!1)})}e(ue),_(()=>K.disabled=s(g)),Ve(N,()=>s(x),f=>r(x,f)),Ve(ne,()=>s(S),f=>r(S,f)),n(xe,ue),ea()}Ke(["click"]);var Nn=l('<div class="notes-section svelte-5f8qag"><div class="notes-display svelte-5f8qag"><span class="note-icon svelte-5f8qag">üìù</span> <p class="svelte-5f8qag"> </p></div></div>'),Mn=l('<span class="position-badge svelte-5f8qag"> </span>'),Pn=l('<span class="climb-attempts svelte-5f8qag"> </span>'),An=l('<div><span class="climb-name svelte-5f8qag"> </span> <span class="climb-status"> </span> <!></div>'),Bn=l('<div class="climbs-grid svelte-5f8qag"></div>'),In=l('<div class="round-card svelte-5f8qag"><div class="round-header svelte-5f8qag"><h4 class="svelte-5f8qag"> </h4> <!></div> <!></div>'),Rn=l('<div class="card-body svelte-5f8qag"><div class="loads-row svelte-5f8qag"><div class="load-item svelte-5f8qag"><span class="label svelte-5f8qag">Fingers</span> <div class="bar-container svelte-5f8qag"><div class="bar svelte-5f8qag"></div></div></div> <div class="load-item svelte-5f8qag"><span class="label svelte-5f8qag">Shoulders</span> <div class="bar-container svelte-5f8qag"><div class="bar svelte-5f8qag"></div></div></div> <div class="load-item svelte-5f8qag"><span class="label svelte-5f8qag">Forearms</span> <div class="bar-container svelte-5f8qag"><div class="bar svelte-5f8qag"></div></div></div></div> <!> <div class="rounds-list svelte-5f8qag"></div></div>'),Vn=l('<div><div class="card-header svelte-5f8qag" role="button" tabindex="0"><div class="header-main svelte-5f8qag"><span class="session-date svelte-5f8qag"> <span class="type-tag svelte-5f8qag"> </span></span> <div class="venue-row svelte-5f8qag"><span class="venue"> </span> <span class="result-summary svelte-5f8qag"> </span></div></div> <div class="header-status svelte-5f8qag"><span>‚óè</span> <button class="btn-icon edit-session svelte-5f8qag" title="Edit Session">‚úèÔ∏è</button> <button class="btn-icon delete-btn svelte-5f8qag" title="Delete Session">üóëÔ∏è</button> <span class="chevron svelte-5f8qag"> </span></div></div> <!></div> <!> <!>',1);function Un(xe,i){$e(i,!0);let m=D(!1),g=D(!1),x=D(!1);function S(){r(m,!s(m))}function c(){r(g,!0)}function T(){r(x,!0)}function b(){r(x,!1)}async function G(){r(x,!1),await Ua()}async function ie(){try{const q=await ps(i.session.id);q.ok?(r(g,!1),await Ua()):(console.error("Failed to delete session:",q.error),alert("Failed to delete session"))}catch(q){console.error("Exception deleting session:",q),alert("Error deleting session")}}function Z(q){if(!q.rounds||q.rounds.length===0)return"No rounds";const te=q.rounds[q.rounds.length-1];if(te.position)return`#${te.position} ${te.name}`;if(te.climbs){const P=te.climbs.filter(re=>re.status==="Top"||re.status==="Flash").length,pe=te.climbs.filter(re=>re.status==="Zone").length;return`${q.rounds.length} Rnds ¬∑ Final: ${P}T ${pe+P}Z`}return te.name}function ue(q){switch(q){case"Flash":return"status-flash";case"Top":return"status-top";case"Zone":return"status-zone";default:return"status-attempt"}}var U=Vn(),K=Pe(U);let F;var ve=a(K);ve.__click=S,ve.__keydown=q=>q.key==="Enter"&&S();var E=a(ve),O=a(E),V=a(O),N=t(V),_e=a(N,!0);e(N),e(O);var ne=t(O,2),ge=a(ne),M=a(ge,!0);e(ge);var H=t(ge,2),f=a(H,!0);e(H),e(ne),e(E);var z=t(E,2),A=a(z);let J;var p=t(A,2);p.__click=q=>{q.stopPropagation(),T()};var k=t(p,2);k.__click=q=>{q.stopPropagation(),c()};var B=t(k,2),o=a(B,!0);e(B),e(z),e(ve);var u=t(ve,2);{var L=q=>{var te=Rn(),P=a(te),pe=a(P),re=t(a(pe),2),qe=a(re);e(re),e(pe);var he=t(pe,2),De=t(a(he),2),ze=a(De);e(De),e(he);var Ae=t(he,2),je=t(a(Ae),2),me=a(je);e(je),e(Ae),e(P);var Y=t(P,2);{var Q=Te=>{var $=Nn(),X=a($),j=t(a(X),2),oe=a(j,!0);e(j),e(X),e($),_(()=>v(oe,i.session.notes)),n(Te,$)};d(Y,Te=>{i.session.notes&&Te(Q)})}var we=t(Y,2);Ce(we,21,()=>i.session.rounds,Le,(Te,$)=>{var X=In(),j=a(X),oe=a(j),y=a(oe,!0);e(oe);var de=t(oe,2);{var C=ye=>{var h=Mn(),R=a(h);e(h),_(()=>v(R,`#${s($).position??""}`)),n(ye,h)};d(de,ye=>{s($).position&&ye(C)})}e(j);var ee=t(j,2);{var le=ye=>{var h=Bn();Ce(h,21,()=>s($).climbs,Le,(R,ke)=>{var Be=An(),Ie=a(Be),aa=a(Ie,!0);e(Ie);var Fe=t(Ie,2),Me=a(Fe,!0);e(Fe);var Ge=t(Fe,2);{var Ye=Oe=>{var Je=Pn(),ya=a(Je);e(Je),_(()=>v(ya,`(${s(ke).attemptCount??""})`)),n(Oe,Je)};d(Ge,Oe=>{s(ke).attemptCount>1&&Oe(Ye)})}e(Be),_(Oe=>{ia(Be,1,`climb-chip ${Oe??""}`,"svelte-5f8qag"),v(aa,s(ke).name),v(Me,s(ke).status)},[()=>ue(s(ke).status)]),n(R,Be)}),e(h),n(ye,h)};d(ee,ye=>{s($).climbs&&s($).climbs.length>0&&ye(le)})}e(X),_(()=>v(y,s($).name)),n(Te,X)}),e(we),e(te),_(()=>{Ne(qe,`width: ${(i.session.fingerLoad||0)*20}%`),Ne(ze,`width: ${(i.session.shoulderLoad||0)*20}%`),Ne(me,`width: ${(i.session.forearmLoad||0)*20}%`)}),na(3,te,()=>la,()=>({duration:150})),n(q,te)};d(u,q=>{s(m)&&q(L)})}e(K);var W=t(K,2);Ja(W,{get isOpen(){return s(g)},title:"Delete Competition Session",message:"Are you sure you want to delete this session? This cannot be undone.",onConfirm:ie,onCancel:()=>r(g,!1)});var fe=t(W,2);Ya(fe,{get isOpen(){return s(x)},activityType:"competition",get initialData(){return i.session},onClose:b,onSaved:G}),_((q,te)=>{F=ia(K,1,"session-card svelte-5f8qag",null,F,{expanded:s(m)}),v(V,`${q??""} `),v(_e,i.session.type),v(M,i.session.venue==="Other"?i.session.customVenue:i.session.venue),v(f,te),J=ia(A,1,"sync-dot svelte-5f8qag",null,J,{synced:i.session.syncStatus==="synced"}),He(A,"title",i.session.syncStatus==="synced"?"Synced":"Local"),v(o,s(m)?"‚ñ≤":"‚ñº")},[()=>new Date(i.session.date).toLocaleDateString(void 0,{weekday:"short",month:"short",day:"numeric",year:"numeric"}),()=>Z(i.session)]),n(xe,U),ea()}Ke(["click","keydown"]);var Wn=l('<span class="spinner svelte-xyvf5r"></span> Fetching...',1),Hn=l('<div class="loading svelte-xyvf5r">Loading sessions...</div>'),Jn=l('<div class="empty-state svelte-xyvf5r">No competitions logged yet.</div>'),Yn=l('<div class="load-more-container svelte-xyvf5r"><button class="load-more-btn svelte-xyvf5r"> </button></div>'),Zn=l('<div class="timeline svelte-xyvf5r"><!> <!></div>'),Xn=l('<div class="view-content svelte-xyvf5r"><div class="header svelte-xyvf5r"><h3 class="svelte-xyvf5r">üèÜ Competition Log</h3> <button class="fetch-btn svelte-xyvf5r" title="Fetch data from cloud"><!></button></div> <!></div>');function Kn(xe,i){$e(i,!0);let m=D(ga([])),g=D(!0),x=D(20);const S=20;async function c(){r(g,!0),r(x,S);try{const E=await ms();E.ok&&E.data&&r(m,E.data.map(O=>({...O,activityType:"competition",syncStatus:"synced",type:O.type,rounds:O.rounds.map(V=>({...V,climbs:V.climbs?.map(N=>({...N,status:N.status}))}))})).sort((O,V)=>new Date(V.date).getTime()-new Date(O.date).getTime()),!0)}catch(E){console.error("Failed to fetch sessions",E)}finally{r(g,!1)}}c();function T(){r(x,s(x)+S)}var b=Xn(),G=a(b),ie=t(a(G),2);ie.__click=c;var Z=a(ie);{var ue=E=>{var O=Wn();qa(),n(E,O)},U=E=>{var O=Sa("‚òÅÔ∏è Fetch Data");n(E,O)};d(Z,E=>{s(g)?E(ue):E(U,!1)})}e(ie),e(G);var K=t(G,2);{var F=E=>{var O=Hn();n(E,O)},ve=E=>{var O=Ue(),V=Pe(O);{var N=ne=>{var ge=Jn();n(ne,ge)},_e=ne=>{var ge=Zn(),M=a(ge);Ce(M,17,()=>s(m).slice(0,s(x)),Le,(z,A)=>{Un(z,{get session(){return s(A)}})});var H=t(M,2);{var f=z=>{var A=Yn(),J=a(A);J.__click=T;var p=a(J);e(J),e(A),_(()=>v(p,`Load More (${s(m).length-s(x)} remaining)`)),n(z,A)};d(H,z=>{s(x)<s(m).length&&z(f)})}e(ge),n(ne,ge)};d(V,ne=>{s(m).length===0?ne(N):ne(_e,!1)},!0)}n(E,O)};d(K,E=>{s(g)&&s(m).length===0?E(F):E(ve,!1)})}e(b),_(()=>ie.disabled=s(g)),n(xe,b),ea()}Ke(["click"]);var Qn=l("<option> </option>"),$n=l('<div class="view-container svelte-108px9u"><!></div>'),er=l('<div class="page svelte-108px9u"><div class="page-header svelte-108px9u"><div><h1 class="svelte-108px9u">üìä View Data</h1> <p class="subtitle svelte-108px9u">Browse your training history</p></div></div> <div class="content-card svelte-108px9u"><div class="form-group svelte-108px9u"><label for="activity-type" class="svelte-108px9u">Activity Type</label> <select id="activity-type" class="svelte-108px9u"><option disabled>Select an activity...</option><!></select></div> <!></div></div>');function cr(xe){const i=[{value:"indoor_climb",label:"Indoor Climb",icon:"üßó"},{value:"outdoor_climb",label:"Outdoor Climb",icon:"‚õ∞Ô∏è"},{value:"gym_session",label:"Gym Session",icon:"üèãÔ∏è"},{value:"fingerboarding",label:"Fingerboarding",icon:"ü§è"},{value:"competition",label:"Competition",icon:"üèÜ"}];let m=D("");var g=er(),x=t(a(g),2),S=a(x),c=t(a(S),2),T=a(c);T.value=T.__value="";var b=t(T);Ce(b,17,()=>i,Z=>Z.value,(Z,ue)=>{var U=Qn(),K=a(U);e(U);var F={};_(()=>{v(K,`${s(ue).icon??""} ${s(ue).label??""}`),F!==(F=s(ue).value)&&(U.value=(U.__value=s(ue).value)??"")}),n(Z,U)}),e(c),e(S);var G=t(S,2);{var ie=Z=>{var ue=$n(),U=a(ue);{var K=ve=>{jt(ve,{})},F=ve=>{var E=Ue(),O=Pe(E);{var V=_e=>{Ai(_e,{})},N=_e=>{var ne=Ue(),ge=Pe(ne);{var M=f=>{fn(f,{})},H=f=>{var z=Ue(),A=Pe(z);{var J=k=>{On(k,{})},p=k=>{var B=Ue(),o=Pe(B);{var u=L=>{Kn(L,{})};d(o,L=>{s(m)==="competition"&&L(u)},!0)}n(k,B)};d(A,k=>{s(m)==="fingerboarding"?k(J):k(p,!1)},!0)}n(f,z)};d(ge,f=>{s(m)==="gym_session"?f(M):f(H,!1)},!0)}n(_e,ne)};d(O,_e=>{s(m)==="outdoor_climb"?_e(V):_e(N,!1)},!0)}n(ve,E)};d(U,ve=>{s(m)==="indoor_climb"?ve(K):ve(F,!1)})}e(ue),n(Z,ue)};d(G,Z=>{s(m)&&Z(ie)})}e(x),e(g),ua(c,()=>s(m),Z=>r(m,Z)),n(xe,g)}export{cr as component};
