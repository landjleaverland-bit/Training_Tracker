import{f as d,a as i,c as ft,t as Ge}from"../chunks/CKcnA5P_.js";import{w as Da,p as _t,c as l,r as a,s,j as e,t as I,a as mt,f as nt,aV as b,E as $e,o as va,F as t,d as ma,aG as ze,aW as Bt,b0 as ja,b1 as ca,k as Ie,e as be,b2 as Na,D as Fa,ac as Ae,b3 as Aa,b4 as Yt,b5 as Oa,b6 as Va,b7 as Ba}from"../chunks/4c6jdw0Z.js";import{d as Qt,s as Z,e as ae}from"../chunks/K94srNfd.js";import{i as z}from"../chunks/CK8hGvwc.js";import{e as fe,i as _e,r as V,b as M,c as za,s as ot,d as Ra}from"../chunks/BVSa1UsB.js";import{s as Je}from"../chunks/9PGhKrW6.js";import{i as La,s as Ga,c as Qe,d as Pa,u as ha,m as ya,b as Sa,e as Ma,f as $a,h as Ua,j as Wa,k as Ja}from"../chunks/ChylFdpu.js";import{i as da,c as Ka,g as Ha,a as Ya,b as Qa,t as na,f as ga,E as Ta,d as Xa,D as Za,e as es,h as ts,j as as,s as ss}from"../chunks/C_Xd1Smc.js";import{p as at}from"../chunks/CfB7tKQ8.js";import{i as Xt}from"../chunks/DMFvxL8W.js";import{b as ls}from"../chunks/CrxUiTfK.js";function ba(me){return function(...A){var u=A[0];return u.stopPropagation(),me?.apply(this,A)}}function Rt(me,A){var u=me.$$events?.[A.type],B=Da(u)?u.slice():u==null?[]:[u];for(var L of B)L.call(this,A)}var rs=d('<span class="placeholder svelte-1g8x5ph"> </span>'),is=d('<span class="chip-display"> </span>'),os=d('<button type="button"> </button>'),ns=d('<div class="multi-select-container svelte-1g8x5ph"><div class="chips svelte-1g8x5ph"><!></div> <div class="options-grid svelte-1g8x5ph"></div></div>');function Ot(me,A){_t(A,!0);let u=at(A,"selected",19,()=>[]),B=at(A,"placeholder",3,"Select options...");function L(R){let E=[...u()];R==="None"?E.includes("None")?E=[]:E=["None"]:(E=E.filter(w=>w!=="None"),E.includes(R)?E=E.filter(w=>w!==R):E.push(R)),A.onChange(E)}var _=ns(),F=l(_),g=l(F);{var U=R=>{var E=rs(),w=l(E,!0);a(E),I(()=>Z(w,B())),i(R,E)},re=R=>{var E=ft(),w=nt(E);fe(w,17,u,_e,(h,p)=>{var m=is(),S=l(m,!0);a(m),I(()=>Z(S,e(p))),i(h,m)}),i(R,E)};z(g,R=>{u().length===0?R(U):R(re,!1)})}a(F);var H=s(F,2);fe(H,21,()=>A.options,_e,(R,E)=>{var w=os();w.__click=()=>L(e(E));var h=l(w,!0);a(w),I(p=>{Je(w,1,`option-chip ${p??""}`,"svelte-1g8x5ph"),Z(h,e(E))},[()=>u().includes(e(E))?"selected":""]),i(R,w)}),a(H),a(_),i(me,_),mt()}Qt(["click"]);var vs=d('<div class="input-with-action svelte-1lf3qka"><input type="text" id="location-manual" placeholder="Enter custom location..." class="flat-left svelte-1lf3qka"/> <button type="button" class="action-btn flat-right svelte-1lf3qka" title="Back to list">‚úï</button></div>'),cs=d("<option> </option>"),ds=d('<select id="location" class="svelte-1lf3qka"><option disabled>Select location...</option><!></select>'),us=d("<option> </option>"),ps=d("<option> </option>"),fs=d('<th class="svelte-1lf3qka">Sport?</th>'),_s=d('<td class="center svelte-1lf3qka"><input type="checkbox" class="svelte-1lf3qka"/></td>'),ms=d('<span class="grade-error svelte-1lf3qka">Invalid</span>'),gs=d("<option> </option>"),bs=d('<button type="button" class="remove-btn svelte-1lf3qka">‚úï</button>'),hs=d('<tr><!><td class="svelte-1lf3qka"><input type="text" placeholder="Route name..." class="svelte-1lf3qka"/></td><td class="svelte-1lf3qka"><input type="text" placeholder="V3"/> <!></td><td class="svelte-1lf3qka"><select class="svelte-1lf3qka"></select></td><td class="svelte-1lf3qka"><input type="number" min="1" class="svelte-1lf3qka"/></td><td><textarea placeholder="Notes..." class="svelte-1lf3qka"></textarea></td><td class="center svelte-1lf3qka"><!></td></tr>'),ys=d("<div> </div>"),Ss=d('<div class="form-content svelte-1lf3qka"><h3 class="svelte-1lf3qka">üßó Indoor Climb</h3> <div class="form-row svelte-1lf3qka"><div class="form-group svelte-1lf3qka"><label for="date" class="svelte-1lf3qka">Date</label> <input type="date" id="date" class="svelte-1lf3qka"/></div> <div class="form-group svelte-1lf3qka"><label for="location" class="svelte-1lf3qka">Location</label> <!></div></div> <div class="form-group svelte-1lf3qka"><label for="climbing-type" class="svelte-1lf3qka">Climbing Type</label> <select id="climbing-type" class="svelte-1lf3qka"><option disabled>Select type...</option><!></select></div> <div class="load-section svelte-1lf3qka"><h4 class="svelte-1lf3qka">Load Metrics</h4> <div class="load-metrics svelte-1lf3qka"><div class="load-item svelte-1lf3qka"><label for="finger-load" class="svelte-1lf3qka">Finger</label> <input type="number" id="finger-load" min="1" max="5" class="svelte-1lf3qka"/> <span class="load-scale svelte-1lf3qka">/ 5</span></div> <div class="load-item svelte-1lf3qka"><label for="shoulder-load" class="svelte-1lf3qka">Shoulder</label> <input type="number" id="shoulder-load" min="1" max="5" class="svelte-1lf3qka"/> <span class="load-scale svelte-1lf3qka">/ 5</span></div> <div class="load-item svelte-1lf3qka"><label for="forearm-load" class="svelte-1lf3qka">Forearm</label> <input type="number" id="forearm-load" min="1" max="5" class="svelte-1lf3qka"/> <span class="load-scale svelte-1lf3qka">/ 5</span></div></div> <h4 class="mt-4 svelte-1lf3qka">Grip Metrics</h4> <div class="load-metrics svelte-1lf3qka"><div class="load-item svelte-1lf3qka"><label for="open-grip" class="svelte-1lf3qka">Open</label> <input type="number" id="open-grip" min="1" max="5" class="svelte-1lf3qka"/> <span class="load-scale svelte-1lf3qka">/ 5</span></div> <div class="load-item svelte-1lf3qka"><label for="crimp-grip" class="svelte-1lf3qka">Crimp</label> <input type="number" id="crimp-grip" min="1" max="5" class="svelte-1lf3qka"/> <span class="load-scale svelte-1lf3qka">/ 5</span></div> <div class="load-item svelte-1lf3qka"><label for="pinch-grip" class="svelte-1lf3qka">Pinch</label> <input type="number" id="pinch-grip" min="1" max="5" class="svelte-1lf3qka"/> <span class="load-scale svelte-1lf3qka">/ 5</span></div> <div class="load-item svelte-1lf3qka"><label for="sloper-grip" class="svelte-1lf3qka">Sloper</label> <input type="number" id="sloper-grip" min="1" max="5" class="svelte-1lf3qka"/> <span class="load-scale svelte-1lf3qka">/ 5</span></div> <div class="load-item svelte-1lf3qka"><label for="jug-grip" class="svelte-1lf3qka">Jug</label> <input type="number" id="jug-grip" min="1" max="5" class="svelte-1lf3qka"/> <span class="load-scale svelte-1lf3qka">/ 5</span></div></div></div> <div class="training-section svelte-1lf3qka"><h4 class="svelte-1lf3qka">Training Details</h4> <div class="training-grid svelte-1lf3qka"><div class="training-item svelte-1lf3qka"><label for="training-type" class="svelte-1lf3qka">Training Type</label> <!></div> <div class="training-item svelte-1lf3qka"><label for="difficulty" class="svelte-1lf3qka">Difficulty</label> <select id="difficulty" class="svelte-1lf3qka"></select></div> <div class="training-item svelte-1lf3qka"><label for="category" class="svelte-1lf3qka">Category</label> <!></div> <div class="training-item svelte-1lf3qka"><label for="energy-system" class="svelte-1lf3qka">Energy System</label> <!></div> <div class="training-item svelte-1lf3qka"><label for="technique-focus" class="svelte-1lf3qka">Technique Focus</label> <!></div> <div class="training-item svelte-1lf3qka"><label for="wall-angle" class="svelte-1lf3qka">Wall</label> <!></div></div></div> <div class="climbs-section svelte-1lf3qka"><h4 class="svelte-1lf3qka">Climbs</h4> <div class="table-container svelte-1lf3qka"><table class="climbs-table svelte-1lf3qka"><thead><tr><!><th class="svelte-1lf3qka">Name</th><th class="svelte-1lf3qka">Grade</th><th class="svelte-1lf3qka">Attempt</th><th class="svelte-1lf3qka">#</th><th class="svelte-1lf3qka">Notes</th><th class="svelte-1lf3qka"></th></tr></thead><tbody></tbody></table></div> <button type="button" class="add-btn svelte-1lf3qka">+ Add Climb</button></div> <div class="submit-section svelte-1lf3qka"><!> <button type="button" class="submit-btn svelte-1lf3qka"><!></button></div></div>');function ks(me,A){_t(A,!0);const u=["Rockstar Unit 3","Rockstar Unit 5","Rockstar Techno","Flashpoint Bristol","Redpoint Bristol","TCH Bristol","Other"],B=["Bouldering","Sport","Mixed"],L=["Onsight","Flash","Redpoint","Dogged","DNF"],_=["None","Projecting","Onsighting","Campusing","Repeaters"],F=["None","Easy","Medium","Hard","Max","Limit+"],g=["None","Strength","Strength Endurance","Power Endurance","Coordination","Slab Technique","Overhang Technique","Power","Strength Capacity","Power Capacity"],U=["None","Aerobic Lactic Capacity","Aerobic Lactic Power","Anaerobic Alactic Capacity","Anaerobic Alactic Power","Anaerobic Power","Anaerobic Lactic Capacity"],re=["None","Trusting feet","Double-clutch","Standing on volumes","Deadpointing","Flagging","Swapping feet","Edging","Smearing","Matching","Backstepping","Drop Knee","Bridging","Laybacking","Mantling","Kneebar","Dyno","Pogo","Coordination Moves","Gastoning","Undercutting","Compressing","Heel Hook","Toe Hook","Bicycle"],H=["None","Overhang","Slab","Roof","Moon Board","Kilter Board","Beast","Circuit Board"],E=["V0-","4-","V0","4","V0+","4+","V1","5","V2","5+","V3","6A","V4","6B","V5","6C","V6","7A","V7","7A+","V8","7B","7B+","V9","7C","V10","7C+","V11","8A","V12","8A+","V13","8B","V14","8B+","V15","8C","V16","8C+","V17","9A"].map(c=>c.toLowerCase());let w=b(null),h=b($e(new Date().toISOString().split("T")[0])),p=b(""),m=b(""),S=b($e(["None"])),se=b("None"),J=b($e(["None"])),q=b($e(["None"])),D=b($e(["None"])),K=b($e(["None"])),ee=b(3),$=b(3),k=b(3),Q=b(3),j=b(3),y=b(3),x=b(3),N=b(3),G=b($e([{isSport:!1,name:"",grade:"",attemptType:"Flash",attemptsNum:1,notes:""}])),Y=b(!1);const X="indoor_climb_draft";va(()=>{const c=localStorage.getItem(X);if(c)try{const o=JSON.parse(c);o.date&&t(h,o.date,!0),o.location&&t(p,o.location,!0),o.isOtherLocation&&t(Y,o.isOtherLocation,!0),o.climbingType&&t(m,o.climbingType,!0),o.trainingTypes&&t(S,o.trainingTypes,!0),o.difficulty&&t(se,o.difficulty,!0),o.categories&&t(J,o.categories,!0),o.energySystems&&t(q,o.energySystems,!0),o.techniqueFocuses&&t(D,o.techniqueFocuses,!0),o.wallAngles&&t(K,o.wallAngles,!0),o.fingerLoad&&t(ee,o.fingerLoad,!0),o.shoulderLoad&&t($,o.shoulderLoad,!0),o.forearmLoad&&t(k,o.forearmLoad,!0),o.openGrip&&t(Q,o.openGrip,!0),o.crimpGrip&&t(j,o.crimpGrip,!0),o.pinchGrip&&t(y,o.pinchGrip,!0),o.sloperGrip&&t(x,o.sloperGrip,!0),o.jugGrip&&t(N,o.jugGrip,!0),o.climbs&&t(G,o.climbs,!0)}catch(o){console.error("Failed to restore draft",o)}}),ma(()=>{const c={date:e(h),location:e(p),isOtherLocation:e(Y),climbingType:e(m),trainingTypes:e(S),difficulty:e(se),categories:e(J),energySystems:e(q),techniqueFocuses:e(D),wallAngles:e(K),fingerLoad:e(ee),shoulderLoad:e($),forearmLoad:e(k),openGrip:e(Q),crimpGrip:e(j),pinchGrip:e(y),sloperGrip:e(x),jugGrip:e(N),climbs:e(G)};localStorage.setItem(X,JSON.stringify(c))});function le(){e(p)==="Other"&&(t(Y,!0),t(p,""))}function te(){t(Y,!1),t(p,"")}function ye(){t(G,[...e(G),{isSport:!1,name:"",grade:"",attemptType:"Flash",attemptsNum:1,notes:""}],!0)}function De(c){t(G,e(G).filter((o,oe)=>oe!==c),!0)}function Re(c,o){e(G)[c].attemptType=o,(o==="Flash"||o==="Onsight")&&(e(G)[c].attemptsNum=1)}function Pe(c){t(w,c,!0)}function ue(){t(w,null)}let qe=Bt(()=>e(m)==="Mixed");function Fe(c){return e(m)==="Sport"?!0:e(m)==="Bouldering"?!1:c.isSport}function Ue(c){return c.trim()?E.includes(c.trim().toLowerCase()):!0}let ce=b("idle"),ne=b("");function ve(){return e(p)?e(m)?e(G).filter(o=>o.grade.trim()&&!Ue(o.grade)).length>0?"Please fix invalid grades":null:"Please select a climbing type":"Please select a location"}async function Oe(){const c=ve();if(c){t(ce,"error"),t(ne,c,!0);return}t(ce,"saving");try{const o=e(G).map(he=>({...he,isSport:Fe(he)})),oe={date:e(h),location:e(p),customLocation:e(Y)?e(p):void 0,climbingType:e(m),trainingTypes:e(S),difficulty:e(se),categories:e(J),energySystems:e(q),techniqueFocuses:e(D),wallAngles:e(K),fingerLoad:e(ee),shoulderLoad:e($),forearmLoad:e(k),openGrip:e(Q),crimpGrip:e(j),pinchGrip:e(y),sloperGrip:e(x),jugGrip:e(N),climbs:o},Le=Pa(oe);if(da()){const he=await Ka(oe);he.ok?(ha(Le.id,he.id),ya(he.id),t(ce,"success"),t(ne,"Session saved and synced!"),localStorage.removeItem(X)):(Sa(Le.id),t(ce,"success"),t(ne,"Saved locally. Sync failed: "+(he.error||"Unknown error")),localStorage.removeItem(X))}else t(ce,"success"),t(ne,"Saved locally. Will sync when online."),localStorage.removeItem(X);window.dispatchEvent(new CustomEvent("session-saved")),setTimeout(()=>{ge()},2e3)}catch(o){t(ce,"error"),t(ne,"Failed to save session"),console.error("Save error:",o)}}function ge(){t(h,new Date().toISOString().split("T")[0],!0),t(p,""),t(Y,!1),t(m,""),t(S,["None"],!0),t(se,"None"),t(J,["None"],!0),t(q,["None"],!0),t(D,["None"],!0),t(K,["None"],!0),t(ee,3),t($,3),t(k,3),t(Q,3),t(j,3),t(y,3),t(x,3),t(N,3),t(G,[{isSport:!1,name:"",grade:"",attemptType:"Flash",attemptsNum:1,notes:""}],!0),t(ce,"idle"),t(ne,"")}var Ve=Ss(),Ce=s(l(Ve),2),Me=l(Ce),Xe=s(l(Me),2);V(Xe),a(Me);var C=s(Me,2),O=s(l(C),2);{var v=c=>{var o=vs(),oe=l(o);V(oe);var Le=s(oe,2);Le.__click=te,a(o),M(oe,()=>e(p),he=>t(p,he)),i(c,o)},f=c=>{var o=ds();o.__change=le;var oe=l(o);oe.value=oe.__value="";var Le=s(oe);fe(Le,17,()=>u,_e,(he,et)=>{var n=cs(),r=l(n,!0);a(n);var P={};I(()=>{Z(r,e(et)),P!==(P=e(et))&&(n.value=(n.__value=e(et))??"")}),i(he,n)}),a(o),Qe(o,()=>e(p),he=>t(p,he)),i(c,o)};z(O,c=>{e(Y)?c(v):c(f,!1)})}a(C),a(Ce);var T=s(Ce,2),W=s(l(T),2),ie=l(W);ie.value=ie.__value="";var xe=s(ie);fe(xe,17,()=>B,_e,(c,o)=>{var oe=us(),Le=l(oe,!0);a(oe);var he={};I(()=>{Z(Le,e(o)),he!==(he=e(o))&&(oe.value=(oe.__value=e(o))??"")}),i(c,oe)}),a(W),a(T);var Ze=s(T,2),gt=s(l(Ze),2),we=l(gt),Be=s(l(we),2);V(Be),ze(2),a(we);var Te=s(we,2),Ke=s(l(Te),2);V(Ke),ze(2),a(Te);var st=s(Te,2),He=s(l(st),2);V(He),ze(2),a(st),a(gt);var Ee=s(gt,4),vt=l(Ee),ht=s(l(vt),2);V(ht),ze(2),a(vt);var yt=s(vt,2),xt=s(l(yt),2);V(xt),ze(2),a(yt);var St=s(yt,2),lt=s(l(St),2);V(lt),ze(2),a(St);var wt=s(St,2),qt=s(l(wt),2);V(qt),ze(2),a(wt);var Lt=s(wt,2),At=s(l(Lt),2);V(At),ze(2),a(Lt),a(Ee),a(Ze);var Ct=s(Ze,2),Tt=s(l(Ct),2),kt=l(Tt),zt=s(l(kt),2);Ot(zt,{get options(){return _},get selected(){return e(S)},placeholder:"Select types...",onChange:c=>t(S,c,!0)}),a(kt);var Nt=s(kt,2),Ne=s(l(Nt),2);fe(Ne,21,()=>F,_e,(c,o)=>{var oe=ps(),Le=l(oe,!0);a(oe);var he={};I(()=>{Z(Le,e(o)),he!==(he=e(o))&&(oe.value=(oe.__value=e(o))??"")}),i(c,oe)}),a(Ne),a(Nt);var We=s(Nt,2),ct=s(l(We),2);Ot(ct,{get options(){return g},get selected(){return e(J)},placeholder:"Select categories...",onChange:c=>t(J,c,!0)}),a(We);var Ft=s(We,2),It=s(l(Ft),2);Ot(It,{get options(){return U},get selected(){return e(q)},placeholder:"Select systems...",onChange:c=>t(q,c,!0)}),a(Ft);var Dt=s(Ft,2),ka=s(l(Dt),2);Ot(ka,{get options(){return re},get selected(){return e(D)},placeholder:"Select focus...",onChange:c=>t(D,c,!0)}),a(Dt);var Pt=s(Dt,2),Zt=s(l(Pt),2);Ot(Zt,{get options(){return H},get selected(){return e(K)},placeholder:"Select angles...",onChange:c=>t(K,c,!0)}),a(Pt),a(Tt),a(Ct);var Vt=s(Ct,2),ea=s(l(Vt),2),Mt=l(ea),ta=l(Mt),aa=l(ta),xa=l(aa);{var sa=c=>{var o=fs();i(c,o)};z(xa,c=>{e(qe)&&c(sa)})}ze(6),a(aa),a(ta);var $t=s(ta);fe($t,21,()=>e(G),_e,(c,o,oe)=>{var Le=hs(),he=l(Le);{var et=de=>{var Ye=_s(),it=l(Ye);V(it),a(Ye),za(it,()=>e(o).isSport,Ht=>e(o).isSport=Ht),i(de,Ye)};z(he,de=>{e(qe)&&de(et)})}var n=s(he),r=l(n);V(r),a(n);var P=s(n),Se=l(P);V(Se);let pe;var dt=s(Se,2);{var bt=de=>{var Ye=ms();i(de,Ye)};z(dt,de=>{Ue(e(o).grade)||de(bt)})}a(P);var tt=s(P),je=l(tt);je.__change=de=>Re(oe,de.target.value),fe(je,21,()=>L,_e,(de,Ye)=>{var it=gs(),Ht=l(it,!0);a(it);var _a={};I(()=>{Z(Ht,e(Ye)),_a!==(_a=e(Ye))&&(it.value=(it.__value=e(Ye))??"")}),i(de,it)}),a(je);var rt;La(je),a(tt);var Gt=s(tt),Et=l(Gt);V(Et),a(Gt);var Jt=s(Gt);let Kt;var ut=l(Jt);ja(ut),a(Jt);var ra=s(Jt),ia=l(ra);{var oa=de=>{var Ye=bs();Ye.__click=()=>De(oe),i(de,Ye)};z(ia,de=>{e(G).length>1&&de(oa)})}a(ra),a(Le),I(de=>{pe=Je(Se,1,"grade-input svelte-1lf3qka",null,pe,de),rt!==(rt=e(o).attemptType)&&(je.value=(je.__value=e(o).attemptType)??"",Ga(je,e(o).attemptType)),Et.disabled=e(o).attemptType==="Flash",Kt=Je(Jt,1,"notes-cell svelte-1lf3qka",null,Kt,{expanded:e(w)===oe})},[()=>({invalid:!Ue(e(o).grade)})]),M(r,()=>e(o).name,de=>e(o).name=de),M(Se,()=>e(o).grade,de=>e(o).grade=de),M(Et,()=>e(o).attemptsNum,de=>e(o).attemptsNum=de),ae("focus",ut,()=>Pe(oe)),ae("blur",ut,ue),M(ut,()=>e(o).notes,de=>e(o).notes=de),i(c,Le)}),a($t),a(Mt),a(ea);var ua=s(ea,2);ua.__click=ye,a(Vt);var Ut=s(Vt,2),la=l(Ut);{var wa=c=>{var o=ys();let oe;var Le=l(o,!0);a(o),I(()=>{oe=Je(o,1,"save-message svelte-1lf3qka",null,oe,{success:e(ce)==="success",error:e(ce)==="error"}),Z(Le,e(ne))}),i(c,o)};z(la,c=>{e(ne)&&c(wa)})}var Wt=s(la,2);Wt.__click=Oe;var pa=l(Wt);{var qa=c=>{var o=Ge("Saving...");i(c,o)},fa=c=>{var o=ft(),oe=nt(o);{var Le=et=>{var n=Ge("‚úì Saved!");i(et,n)},he=et=>{var n=Ge("Save Session");i(et,n)};z(oe,et=>{e(ce)==="success"?et(Le):et(he,!1)},!0)}i(c,o)};z(pa,c=>{e(ce)==="saving"?c(qa):c(fa,!1)})}a(Wt),a(Ut),a(Ve),I(()=>Wt.disabled=e(ce)==="saving"),M(Xe,()=>e(h),c=>t(h,c)),Qe(W,()=>e(m),c=>t(m,c)),M(Be,()=>e(ee),c=>t(ee,c)),M(Ke,()=>e($),c=>t($,c)),M(He,()=>e(k),c=>t(k,c)),M(ht,()=>e(Q),c=>t(Q,c)),M(xt,()=>e(j),c=>t(j,c)),M(lt,()=>e(y),c=>t(y,c)),M(qt,()=>e(x),c=>t(x,c)),M(At,()=>e(N),c=>t(N,c)),Qe(Ne,()=>e(se),c=>t(se,c)),i(me,Ve),mt()}Qt(["click","change"]);var xs=d("<option> </option>"),ws=d('<div class="input-with-action svelte-15o2ys1"><input type="text" id="crag-manual" placeholder="Enter custom crag name..." class="flat-left svelte-15o2ys1"/> <button type="button" class="action-btn flat-right svelte-15o2ys1" title="Back to list">‚úï</button></div>'),qs=d("<option> </option>"),Cs=d("<option>Other (Manual Entry)</option>"),Ts=d('<select id="crag" class="svelte-15o2ys1"><option disabled> </option><!><!></select>'),Ns=d("<option> </option>"),Fs=d("<option> </option>"),Os=d('<th class="svelte-15o2ys1">Sport?</th>'),Ls=d('<td class="center svelte-15o2ys1"><input type="checkbox" class="svelte-15o2ys1"/></td>'),Gs=d('<span class="grade-error svelte-15o2ys1">Invalid</span>'),Es=d("<option> </option>"),js=d('<button type="button" class="remove-btn svelte-15o2ys1">‚úï</button>'),As=d('<tr><!><td class="svelte-15o2ys1"><input type="text" placeholder="Route name..." class="svelte-15o2ys1"/></td><td class="svelte-15o2ys1"><input type="text" placeholder="V3"/> <!></td><td class="svelte-15o2ys1"><select class="svelte-15o2ys1"></select></td><td class="svelte-15o2ys1"><input type="number" min="1" class="svelte-15o2ys1"/></td><td><textarea placeholder="Notes..." class="svelte-15o2ys1"></textarea></td><td class="center svelte-15o2ys1"><!></td></tr>'),zs=d("<div> </div>"),Is=d('<div class="form-content svelte-15o2ys1"><h3 class="svelte-15o2ys1">‚õ∞Ô∏è Outdoor Climb</h3> <div class="form-row svelte-15o2ys1"><div class="form-group svelte-15o2ys1"><label for="date" class="svelte-15o2ys1">Date</label> <input type="date" id="date" class="svelte-15o2ys1"/></div> <div class="form-group svelte-15o2ys1"><label for="area" class="svelte-15o2ys1">Area</label> <select id="area" class="svelte-15o2ys1"><option disabled>Select area...</option><!></select></div></div> <div class="form-row svelte-15o2ys1"><div class="form-group svelte-15o2ys1"><label for="crag" class="svelte-15o2ys1">Crag</label> <!></div> <div class="form-group svelte-15o2ys1"><label for="sector" class="svelte-15o2ys1">Wall / Sector</label> <input type="text" id="sector" placeholder="Enter sector or wall name..." class="svelte-15o2ys1"/></div></div> <div class="form-group svelte-15o2ys1"><label for="climbing-type" class="svelte-15o2ys1">Climbing Type</label> <select id="climbing-type" class="svelte-15o2ys1"><option disabled>Select type...</option><!></select></div> <div class="load-section svelte-15o2ys1"><h4 class="svelte-15o2ys1">Load Metrics</h4> <div class="load-metrics svelte-15o2ys1"><div class="load-item svelte-15o2ys1"><label for="finger-load" class="svelte-15o2ys1">Finger</label> <input type="number" id="finger-load" min="1" max="5" class="svelte-15o2ys1"/> <span class="load-scale svelte-15o2ys1">/ 5</span></div> <div class="load-item svelte-15o2ys1"><label for="shoulder-load" class="svelte-15o2ys1">Shoulder</label> <input type="number" id="shoulder-load" min="1" max="5" class="svelte-15o2ys1"/> <span class="load-scale svelte-15o2ys1">/ 5</span></div> <div class="load-item svelte-15o2ys1"><label for="forearm-load" class="svelte-15o2ys1">Forearm</label> <input type="number" id="forearm-load" min="1" max="5" class="svelte-15o2ys1"/> <span class="load-scale svelte-15o2ys1">/ 5</span></div></div> <h4 class="mt-4 svelte-15o2ys1">Grip Metrics</h4> <div class="load-metrics svelte-15o2ys1"><div class="load-item svelte-15o2ys1"><label for="open-grip" class="svelte-15o2ys1">Open</label> <input type="number" id="open-grip" min="1" max="5" class="svelte-15o2ys1"/> <span class="load-scale svelte-15o2ys1">/ 5</span></div> <div class="load-item svelte-15o2ys1"><label for="crimp-grip" class="svelte-15o2ys1">Crimp</label> <input type="number" id="crimp-grip" min="1" max="5" class="svelte-15o2ys1"/> <span class="load-scale svelte-15o2ys1">/ 5</span></div> <div class="load-item svelte-15o2ys1"><label for="pinch-grip" class="svelte-15o2ys1">Pinch</label> <input type="number" id="pinch-grip" min="1" max="5" class="svelte-15o2ys1"/> <span class="load-scale svelte-15o2ys1">/ 5</span></div> <div class="load-item svelte-15o2ys1"><label for="sloper-grip" class="svelte-15o2ys1">Sloper</label> <input type="number" id="sloper-grip" min="1" max="5" class="svelte-15o2ys1"/> <span class="load-scale svelte-15o2ys1">/ 5</span></div> <div class="load-item svelte-15o2ys1"><label for="jug-grip" class="svelte-15o2ys1">Jug</label> <input type="number" id="jug-grip" min="1" max="5" class="svelte-15o2ys1"/> <span class="load-scale svelte-15o2ys1">/ 5</span></div></div></div> <div class="training-section svelte-15o2ys1"><h4 class="svelte-15o2ys1">Training Details</h4> <div class="training-grid svelte-15o2ys1"><div class="training-item svelte-15o2ys1"><label for="training-type" class="svelte-15o2ys1">Training Type</label> <!></div> <div class="training-item svelte-15o2ys1"><label for="difficulty" class="svelte-15o2ys1">Difficulty</label> <select id="difficulty" class="svelte-15o2ys1"></select></div> <div class="training-item svelte-15o2ys1"><label for="category" class="svelte-15o2ys1">Category</label> <!></div> <div class="training-item svelte-15o2ys1"><label for="energy-system" class="svelte-15o2ys1">Energy System</label> <!></div> <div class="training-item svelte-15o2ys1"><label for="technique-focus" class="svelte-15o2ys1">Technique Focus</label> <!></div></div></div> <div class="climbs-section svelte-15o2ys1"><h4 class="svelte-15o2ys1">Climbs</h4> <div class="table-container svelte-15o2ys1"><table class="climbs-table svelte-15o2ys1"><thead><tr><!><th class="svelte-15o2ys1">Name</th><th class="svelte-15o2ys1">Grade</th><th class="svelte-15o2ys1">Attempt</th><th class="svelte-15o2ys1">#</th><th class="svelte-15o2ys1">Notes</th><th class="svelte-15o2ys1"></th></tr></thead><tbody></tbody></table></div> <button type="button" class="add-btn svelte-15o2ys1">+ Add Climb</button></div> <div class="submit-section svelte-15o2ys1"><!> <button type="button" class="submit-btn svelte-15o2ys1"><!></button></div></div>');function Ds(me,A){_t(A,!0);const u=Ha(),B=["Boulder","Sport","Trad"],L=["Onsight","Flash","Redpoint","Dogged","DNF"],_=["None","Projecting","Onsighting","Campusing","Repeaters"],F=["None","Easy","Medium","Hard","Max","Limit+"],g=["None","Strength","Strength Endurance","Power Endurance","Coordination","Slab Technique","Overhang Technique","Power","Strength Capacity","Power Capacity"],U=["None","Aerobic Lactic Capacity","Aerobic Lactic Power","Anaerobic Alactic Capacity","Anaerobic Alactic Power","Anaerobic Power","Anaerobic Lactic Capacity"],re=["None","Trusting feet","Double-clutch","Deadpointing","Flagging","Swapping feet","Edging","Smearing","Matching","Backstepping","Drop Knee","Bridging","Laybacking","Mantling","Kneebar","Dyno","Coordination Moves","Gastoning","Undercutting","Compressing","Heel Hook","Toe Hook","Bicycle"],R=["V0-","4-","V0","4","V0+","4+","V1","5","V2","5+","V3","6A","V4","6B","V5","6C","V6","7A","V7","7A+","V8","7B","7B+","V9","7C","V10","7C+","V11","8A","V12","8A+","V13","8B","V14","8B+","V15","8C","V16","8C+","V17","9A"].map(n=>n.toLowerCase());let E=b(null),w=b($e(new Date().toISOString().split("T")[0])),h=b(""),p=b(""),m=b(""),S=b(""),se=b($e(["None"])),J=b("None"),q=b($e(["None"])),D=b($e(["None"])),K=b($e(["None"])),ee=b(3),$=b(3),k=b(3),Q=b(3),j=b(3),y=b(3),x=b(3),N=b(3),G=b($e([{isSport:!1,name:"",grade:"",attemptType:"Flash",attemptsNum:1,notes:""}])),Y=Bt(()=>e(h)?Qa(e(h)):[]),X=b(!1);const le="outdoor_climb_draft";va(()=>{const n=localStorage.getItem(le);if(n)try{const r=JSON.parse(n);r.date&&t(w,r.date,!0),r.area&&t(h,r.area,!0),r.crag&&t(p,r.crag,!0),r.sector&&t(m,r.sector,!0),r.isOtherCrag&&t(X,r.isOtherCrag,!0),r.climbingType&&t(S,r.climbingType,!0),r.trainingTypes&&t(se,r.trainingTypes,!0),r.difficulty&&t(J,r.difficulty,!0),r.categories&&t(q,r.categories,!0),r.energySystems&&t(D,r.energySystems,!0),r.techniqueFocuses&&t(K,r.techniqueFocuses,!0),r.fingerLoad&&t(ee,r.fingerLoad,!0),r.shoulderLoad&&t($,r.shoulderLoad,!0),r.forearmLoad&&t(k,r.forearmLoad,!0),r.openGrip&&t(Q,r.openGrip,!0),r.crimpGrip&&t(j,r.crimpGrip,!0),r.pinchGrip&&t(y,r.pinchGrip,!0),r.sloperGrip&&t(x,r.sloperGrip,!0),r.jugGrip&&t(N,r.jugGrip,!0),r.climbs&&t(G,r.climbs,!0)}catch(r){console.error("Failed to restore draft",r)}}),ma(()=>{const n={date:e(w),area:e(h),crag:e(p),sector:e(m),isOtherCrag:e(X),climbingType:e(S),trainingTypes:e(se),difficulty:e(J),categories:e(q),energySystems:e(D),techniqueFocuses:e(K),fingerLoad:e(ee),shoulderLoad:e($),forearmLoad:e(k),openGrip:e(Q),crimpGrip:e(j),pinchGrip:e(y),sloperGrip:e(x),jugGrip:e(N),climbs:e(G)};localStorage.setItem(le,JSON.stringify(n))}),ma(()=>{e(h)&&(t(p,""),t(X,!1))});function te(){e(p)==="Other"&&(t(X,!0),t(p,""))}function ye(){t(X,!1),t(p,"")}function De(){t(G,[...e(G),{isSport:!1,name:"",grade:"",attemptType:"Flash",attemptsNum:1,notes:""}],!0)}function Re(n){t(G,e(G).filter((r,P)=>P!==n),!0)}function Pe(n,r){e(G)[n].attemptType=r,(r==="Flash"||r==="Onsight")&&(e(G)[n].attemptsNum=1)}function ue(n){t(E,n,!0)}function qe(){t(E,null)}let Fe=Bt(()=>e(S)==="Trad");function Ue(n){return e(S)==="Sport"?!0:e(S)==="Boulder"?!1:n.isSport}function ce(n){return n.trim()?R.includes(n.trim().toLowerCase()):!0}let ne=b("idle"),ve=b("");function Oe(){return e(h)?e(p)?e(S)?e(G).filter(r=>r.grade.trim()&&!ce(r.grade)).length>0?"Please fix invalid grades":null:"Please select a climbing type":"Please select a crag":"Please select an area"}async function ge(){const n=Oe();if(n){t(ne,"error"),t(ve,n,!0);return}t(ne,"saving");try{const r=e(G).map(pe=>({...pe,isSport:Ue(pe)})),P={date:e(w),area:e(h),crag:e(p),sector:e(m)||void 0,climbingType:e(S),trainingTypes:e(se),difficulty:e(J),categories:e(q),energySystems:e(D),techniqueFocuses:e(K),fingerLoad:e(ee),shoulderLoad:e($),forearmLoad:e(k),openGrip:e(Q),crimpGrip:e(j),pinchGrip:e(y),sloperGrip:e(x),jugGrip:e(N),climbs:r},Se=Ma(P);if(da()){const pe=await Ya(P);pe.ok?(ha(Se.id,pe.id),ya(pe.id),t(ne,"success"),t(ve,"Session saved and synced!"),localStorage.removeItem(le)):(Sa(Se.id),t(ne,"success"),t(ve,"Saved locally. Sync failed: "+(pe.error||"Unknown error")),localStorage.removeItem(le))}else t(ne,"success"),t(ve,"Saved locally. Will sync when online."),localStorage.removeItem(le);window.dispatchEvent(new CustomEvent("session-saved")),setTimeout(()=>{Ve()},2e3)}catch(r){t(ne,"error"),t(ve,"Failed to save session"),console.error("Save error:",r)}}function Ve(){t(w,new Date().toISOString().split("T")[0],!0),t(h,""),t(p,""),t(m,""),t(S,""),t(se,["None"],!0),t(J,"None"),t(q,["None"],!0),t(D,["None"],!0),t(K,["None"],!0),t(ee,3),t($,3),t(k,3),t(Q,3),t(j,3),t(y,3),t(x,3),t(N,3),t(G,[{isSport:!1,name:"",grade:"",attemptType:"Flash",attemptsNum:1,notes:""}],!0),t(ne,"idle"),t(ve,"")}var Ce=Is(),Me=s(l(Ce),2),Xe=l(Me),C=s(l(Xe),2);V(C),a(Xe);var O=s(Xe,2),v=s(l(O),2),f=l(v);f.value=f.__value="";var T=s(f);fe(T,17,()=>u,_e,(n,r)=>{var P=xs(),Se=l(P,!0);a(P);var pe={};I(()=>{Z(Se,e(r)),pe!==(pe=e(r))&&(P.value=(P.__value=e(r))??"")}),i(n,P)}),a(v),a(O),a(Me);var W=s(Me,2),ie=l(W),xe=s(l(ie),2);{var Ze=n=>{var r=ws(),P=l(r);V(P);var Se=s(P,2);Se.__click=ye,a(r),M(P,()=>e(p),pe=>t(p,pe)),i(n,r)},gt=n=>{var r=Ts();r.__change=te;var P=l(r),Se=l(P,!0);a(P),P.value=P.__value="";var pe=s(P);fe(pe,17,()=>e(Y),_e,(tt,je)=>{var rt=qs(),Gt=l(rt,!0);a(rt);var Et={};I(()=>{Z(Gt,e(je)),Et!==(Et=e(je))&&(rt.value=(rt.__value=e(je))??"")}),i(tt,rt)});var dt=s(pe);{var bt=tt=>{var je=Cs();je.value=je.__value="Other",i(tt,je)};z(dt,tt=>{e(h)&&tt(bt)})}a(r),I(()=>{r.disabled=!e(h),Z(Se,e(h)?"Select crag...":"Select area first...")}),Qe(r,()=>e(p),tt=>t(p,tt)),i(n,r)};z(xe,n=>{e(X)?n(Ze):n(gt,!1)})}a(ie);var we=s(ie,2),Be=s(l(we),2);V(Be),a(we),a(W);var Te=s(W,2),Ke=s(l(Te),2),st=l(Ke);st.value=st.__value="";var He=s(st);fe(He,17,()=>B,_e,(n,r)=>{var P=Ns(),Se=l(P,!0);a(P);var pe={};I(()=>{Z(Se,e(r)),pe!==(pe=e(r))&&(P.value=(P.__value=e(r))??"")}),i(n,P)}),a(Ke),a(Te);var Ee=s(Te,2),vt=s(l(Ee),2),ht=l(vt),yt=s(l(ht),2);V(yt),ze(2),a(ht);var xt=s(ht,2),St=s(l(xt),2);V(St),ze(2),a(xt);var lt=s(xt,2),wt=s(l(lt),2);V(wt),ze(2),a(lt),a(vt);var qt=s(vt,4),Lt=l(qt),At=s(l(Lt),2);V(At),ze(2),a(Lt);var Ct=s(Lt,2),Tt=s(l(Ct),2);V(Tt),ze(2),a(Ct);var kt=s(Ct,2),zt=s(l(kt),2);V(zt),ze(2),a(kt);var Nt=s(kt,2),Ne=s(l(Nt),2);V(Ne),ze(2),a(Nt);var We=s(Nt,2),ct=s(l(We),2);V(ct),ze(2),a(We),a(qt),a(Ee);var Ft=s(Ee,2),It=s(l(Ft),2),Dt=l(It),ka=s(l(Dt),2);Ot(ka,{get options(){return _},get selected(){return e(se)},placeholder:"Select types...",onChange:n=>t(se,n,!0)}),a(Dt);var Pt=s(Dt,2),Zt=s(l(Pt),2);fe(Zt,21,()=>F,_e,(n,r)=>{var P=Fs(),Se=l(P,!0);a(P);var pe={};I(()=>{Z(Se,e(r)),pe!==(pe=e(r))&&(P.value=(P.__value=e(r))??"")}),i(n,P)}),a(Zt),a(Pt);var Vt=s(Pt,2),ea=s(l(Vt),2);Ot(ea,{get options(){return g},get selected(){return e(q)},placeholder:"Select categories...",onChange:n=>t(q,n,!0)}),a(Vt);var Mt=s(Vt,2),ta=s(l(Mt),2);Ot(ta,{get options(){return U},get selected(){return e(D)},placeholder:"Select systems...",onChange:n=>t(D,n,!0)}),a(Mt);var aa=s(Mt,2),xa=s(l(aa),2);Ot(xa,{get options(){return re},get selected(){return e(K)},placeholder:"Select focus...",onChange:n=>t(K,n,!0)}),a(aa),a(It),a(Ft);var sa=s(Ft,2),$t=s(l(sa),2),ua=l($t),Ut=l(ua),la=l(Ut),wa=l(la);{var Wt=n=>{var r=Os();i(n,r)};z(wa,n=>{e(Fe)&&n(Wt)})}ze(6),a(la),a(Ut);var pa=s(Ut);fe(pa,21,()=>e(G),_e,(n,r,P)=>{var Se=As(),pe=l(Se);{var dt=ke=>{var pt=Ls(),jt=l(pt);V(jt),a(pt),za(jt,()=>e(r).isSport,Ca=>e(r).isSport=Ca),i(ke,pt)};z(pe,ke=>{e(Fe)&&ke(dt)})}var bt=s(pe),tt=l(bt);V(tt),a(bt);var je=s(bt),rt=l(je);V(rt);let Gt;var Et=s(rt,2);{var Jt=ke=>{var pt=Gs();i(ke,pt)};z(Et,ke=>{ce(e(r).grade)||ke(Jt)})}a(je);var Kt=s(je),ut=l(Kt);ut.__change=ke=>Pe(P,ke.target.value),fe(ut,21,()=>L,_e,(ke,pt)=>{var jt=Es(),Ca=l(jt,!0);a(jt);var Ea={};I(()=>{Z(Ca,e(pt)),Ea!==(Ea=e(pt))&&(jt.value=(jt.__value=e(pt))??"")}),i(ke,jt)}),a(ut);var ra;La(ut),a(Kt);var ia=s(Kt),oa=l(ia);V(oa),a(ia);var de=s(ia);let Ye;var it=l(de);ja(it),a(de);var Ht=s(de),_a=l(Ht);{var Ia=ke=>{var pt=js();pt.__click=()=>Re(P),i(ke,pt)};z(_a,ke=>{e(G).length>1&&ke(Ia)})}a(Ht),a(Se),I(ke=>{Gt=Je(rt,1,"grade-input svelte-15o2ys1",null,Gt,ke),ra!==(ra=e(r).attemptType)&&(ut.value=(ut.__value=e(r).attemptType)??"",Ga(ut,e(r).attemptType)),oa.disabled=e(r).attemptType==="Flash",Ye=Je(de,1,"notes-cell svelte-15o2ys1",null,Ye,{expanded:e(E)===P})},[()=>({invalid:!ce(e(r).grade)})]),M(tt,()=>e(r).name,ke=>e(r).name=ke),M(rt,()=>e(r).grade,ke=>e(r).grade=ke),M(oa,()=>e(r).attemptsNum,ke=>e(r).attemptsNum=ke),ae("focus",it,()=>ue(P)),ae("blur",it,qe),M(it,()=>e(r).notes,ke=>e(r).notes=ke),i(n,Se)}),a(pa),a(ua),a($t);var qa=s($t,2);qa.__click=De,a(sa);var fa=s(sa,2),c=l(fa);{var o=n=>{var r=zs();let P;var Se=l(r,!0);a(r),I(()=>{P=Je(r,1,"save-message svelte-15o2ys1",null,P,{success:e(ne)==="success",error:e(ne)==="error"}),Z(Se,e(ve))}),i(n,r)};z(c,n=>{e(ve)&&n(o)})}var oe=s(c,2);oe.__click=ge;var Le=l(oe);{var he=n=>{var r=Ge("Saving...");i(n,r)},et=n=>{var r=ft(),P=nt(r);{var Se=dt=>{var bt=Ge("‚úì Saved!");i(dt,bt)},pe=dt=>{var bt=Ge("Save Session");i(dt,bt)};z(P,dt=>{e(ne)==="success"?dt(Se):dt(pe,!1)},!0)}i(n,r)};z(Le,n=>{e(ne)==="saving"?n(he):n(et,!1)})}a(oe),a(fa),a(Ce),I(()=>oe.disabled=e(ne)==="saving"),M(C,()=>e(w),n=>t(w,n)),Qe(v,()=>e(h),n=>t(h,n)),M(Be,()=>e(m),n=>t(m,n)),Qe(Ke,()=>e(S),n=>t(S,n)),M(yt,()=>e(ee),n=>t(ee,n)),M(St,()=>e($),n=>t($,n)),M(wt,()=>e(k),n=>t(k,n)),M(At,()=>e(Q),n=>t(Q,n)),M(Tt,()=>e(j),n=>t(j,n)),M(zt,()=>e(y),n=>t(y,n)),M(Ne,()=>e(x),n=>t(x,n)),M(ct,()=>e(N),n=>t(N,n)),Qe(Zt,()=>e(J),n=>t(J,n)),i(me,Ce),mt()}Qt(["click","change"]);var Vs=d('<div><div class="col set-num svelte-ow8x7m"> </div> <div class="col prev svelte-ow8x7m"><!></div> <div class="col weight svelte-ow8x7m"><input type="number" class="svelte-ow8x7m"/></div> <div class="col reps svelte-ow8x7m"><input type="number" class="svelte-ow8x7m"/></div> <div class="col check svelte-ow8x7m"><button><!></button></div></div>');function Bs(me,A){_t(A,!1);let u=at(A,"setNumber",8),B=at(A,"prevSet",8,null),L=at(A,"set",12);const _=ca();function F(){L(L().completed=!L().completed,!0),_("change",L()),L().completed&&_("complete")}function g(k){_("focus",{field:k,value:L()[k],set:L()})}Xt();var U=Vs();let re;var H=l(U),R=l(H,!0);a(H);var E=s(H,2),w=l(E);{var h=k=>{var Q=Ge();I(()=>Z(Q,`${Ie(B()),be(()=>B().weight)??""}kg x ${Ie(B()),be(()=>B().reps)??""}`)),i(k,Q)},p=k=>{var Q=Ge("-");i(k,Q)};z(w,k=>{B()?k(h):k(p,!1)})}a(E);var m=s(E,2),S=l(m);V(S),a(m);var se=s(m,2),J=l(se);V(J),a(se);var q=s(se,2),D=l(q);let K;var ee=l(D);{var $=k=>{var Q=Ge("‚úì");i(k,Q)};z(ee,k=>{Ie(L()),be(()=>L().completed)&&k($)})}a(D),a(q),a(U),I((k,Q)=>{re=Je(U,1,"set-row svelte-ow8x7m",null,re,{completed:L().completed}),Z(R,u()),ot(S,"placeholder",k),ot(J,"placeholder",Q),K=Je(D,1,"check-btn svelte-ow8x7m",null,K,{checked:L().completed})},[()=>(Ie(B()),be(()=>B()?B().weight.toString():"-")),()=>(Ie(B()),be(()=>B()?B().reps.toString():"-"))]),M(S,()=>L().weight,k=>L(L().weight=k,!0)),ae("focus",S,()=>g("weight")),M(J,()=>L().reps,k=>L(L().reps=k,!0)),ae("focus",J,()=>g("reps")),ae("click",D,F),i(me,U),mt()}var Rs=d('<div class="exercise-card svelte-1ni79z8"><div class="header svelte-1ni79z8"><div class="title-group svelte-1ni79z8"><button class="icon-btn info-btn svelte-1ni79z8" aria-label="Exercise Info"><div class="info-icon svelte-1ni79z8">?</div></button> <h4 class="svelte-1ni79z8"> </h4></div> <button class="icon-btn delete-btn svelte-1ni79z8" aria-label="Delete Exercise">üóëÔ∏è</button></div> <div class="table-header svelte-1ni79z8"><div class="col">Set</div> <div class="col">Previous</div> <div class="col">kg</div> <div class="col">Reps</div> <div class="col">‚úì</div></div> <div class="sets"></div> <button class="add-set-btn svelte-1ni79z8">+ Add Set</button></div>');function Ps(me,A){_t(A,!1);let u=at(A,"exercise",12),B=at(A,"prevExercise",8,void 0);const L=ca();function _(){const p=u().sets[u().sets.length-1],m={weight:p?p.weight:0,reps:p?p.reps:0,isWarmup:!1,isFailure:!1,isDropSet:!1,completed:!1};u(u().sets=[...u().sets,m],!0)}Xt();var F=Rs(),g=l(F),U=l(g),re=l(U),H=s(re,2),R=l(H,!0);a(H),a(U);var E=s(U,2);a(g);var w=s(g,4);fe(w,5,()=>(Ie(u()),be(()=>u().sets)),_e,(p,m,S)=>{{let se=Fa(()=>(Ie(B()),be(()=>B()?.sets[S]||null)));Bs(p,{setNumber:S+1,get prevSet(){return e(se)},get set(){return(Ie(u()),be(()=>u().sets))[S]},set set(J){(Ie(u()),be(()=>u().sets))[S]=J,Na(()=>u())},$$events:{complete(J){Rt.call(this,A,J)},focus(J){Rt.call(this,A,J)},change(J){Rt.call(this,A,J)}},$$legacy:!0})}}),a(w);var h=s(w,2);a(F),I(()=>Z(R,(Ie(u()),be(()=>u().name)))),ae("click",re,()=>L("info",u())),ae("click",E,()=>L("delete",u())),ae("click",h,_),i(me,F),mt()}var Ms=d('<div class="keypad svelte-1fay4f8"><div class="header svelte-1fay4f8"><span class="label svelte-1fay4f8"> </span> <div class="display svelte-1fay4f8" role="textbox" aria-readonly="true"> </div></div> <div class="quick-adds svelte-1fay4f8"><button class="svelte-1fay4f8">+2.5</button> <button class="svelte-1fay4f8">+5</button> <button class="svelte-1fay4f8">+10</button></div> <div class="grid svelte-1fay4f8"><button class="svelte-1fay4f8">1</button> <button class="svelte-1fay4f8">2</button> <button class="svelte-1fay4f8">3</button> <button class="svelte-1fay4f8">4</button> <button class="svelte-1fay4f8">5</button> <button class="svelte-1fay4f8">6</button> <button class="svelte-1fay4f8">7</button> <button class="svelte-1fay4f8">8</button> <button class="svelte-1fay4f8">9</button> <button class="action svelte-1fay4f8">C</button> <button class="svelte-1fay4f8">0</button> <button class="action svelte-1fay4f8">‚å´</button></div></div>');function $s(me,A){_t(A,!1);let u=at(A,"value",8,null),B=at(A,"label",8,"Value");const L=ca();function _(Y){const X=u()?.toString()||"";if(X.length>=5)return;const le=parseFloat(X+Y.toString());L("change",le)}function F(){L("change",0)}function g(){const Y=u()?.toString()||"";if(Y.length<=1){L("change",0);return}const X=parseFloat(Y.slice(0,-1));L("change",X)}function U(Y){L("change",(u()||0)+Y)}Xt();var re=Ms(),H=l(re),R=l(H),E=l(R,!0);a(R);var w=s(R,2),h=l(w,!0);a(w),a(H);var p=s(H,2),m=l(p),S=s(m,2),se=s(S,2);a(p);var J=s(p,2),q=l(J),D=s(q,2),K=s(D,2),ee=s(K,2),$=s(ee,2),k=s($,2),Q=s(k,2),j=s(Q,2),y=s(j,2),x=s(y,2),N=s(x,2),G=s(N,2);a(J),a(re),I(()=>{Z(E,B()),ot(w,"aria-label",B()),Z(h,u()||0)}),ae("click",m,()=>U(2.5)),ae("click",S,()=>U(5)),ae("click",se,()=>U(10)),ae("click",q,()=>_(1)),ae("click",D,()=>_(2)),ae("click",K,()=>_(3)),ae("click",ee,()=>_(4)),ae("click",$,()=>_(5)),ae("click",k,()=>_(6)),ae("click",Q,()=>_(7)),ae("click",j,()=>_(8)),ae("click",y,()=>_(9)),ae("click",x,F),ae("click",N,()=>_(0)),ae("click",G,g),i(me,re),mt()}var Us=d('<div class="rest-timer svelte-18i4gcv"><div class="timer-display svelte-18i4gcv"><span class="label svelte-18i4gcv">Rest</span> <span class="time svelte-18i4gcv"> </span></div> <div class="controls svelte-18i4gcv"><button class="svelte-18i4gcv">-30</button> <button class="svelte-18i4gcv">+30</button> <button class="skip svelte-18i4gcv">Skip</button></div></div>');function Ws(me,A){_t(A,!1);const u=Ae(),B=Ae();let L=at(A,"duration",8,90),_=at(A,"onComplete",8,()=>{}),F=Ae(L()),g,U=at(A,"visible",12,!0);function re(){clearInterval(g),t(F,L()),g=setInterval(()=>{Va(F,-1),e(F)<=0&&(clearInterval(g),_()())},1e3)}function H(m){t(F,e(F)+m)}function R(m){e(F)>m&&t(F,e(F)-m)}function E(){U(!1),clearInterval(g),_()()}va(()=>{re()}),Aa(()=>{clearInterval(g)}),Yt(()=>e(F),()=>{t(u,Math.floor(e(F)/60))}),Yt(()=>e(F),()=>{t(B,e(F)%60)}),Oa(),Xt();var w=ft(),h=nt(w);{var p=m=>{var S=Us(),se=l(S),J=s(l(se),2),q=l(J);a(J),a(se);var D=s(se,2),K=l(D),ee=s(K,2),$=s(ee,2);a(D),a(S),I(k=>Z(q,`${e(u)??""}:${k??""}`),[()=>(e(B),be(()=>e(B).toString().padStart(2,"0")))]),ae("click",K,()=>R(30)),ae("click",ee,()=>H(30)),ae("click",$,E),na(3,S,()=>ga,()=>({y:50,duration:300})),i(m,S)};z(h,m=>{U()&&m(p)})}i(me,w),mt()}var Js=d("<img/>"),Ks=d('<div class="animation-frame svelte-zbmy0k"></div>'),Hs=d('<div class="visual-placeholder svelte-zbmy0k"><span>No animation available</span></div>'),Ys=d("<li> </li>"),Qs=d('<div class="modal-overlay svelte-zbmy0k" role="button" tabindex="0" aria-label="Close modal"><div class="modal-content svelte-zbmy0k" role="dialog" aria-modal="true" tabindex="-1"><div class="header svelte-zbmy0k"><h3 class="svelte-zbmy0k"> </h3> <span class="category svelte-zbmy0k"> </span> <button class="close-btn svelte-zbmy0k" aria-label="Close">√ó</button></div> <div class="visual-container svelte-zbmy0k"><!> <div class="muscles svelte-zbmy0k"> </div></div> <div class="instructions svelte-zbmy0k"><h4>Instructions</h4> <ol class="svelte-zbmy0k"></ol></div></div></div>');function Xs(me,A){_t(A,!1);let u=at(A,"exercise",8),B=at(A,"visible",8,!1);const L=ca();let _=Ae(0),F;function g(){u().images&&u().images.length>0&&(t(_,0),F=setInterval(()=>{t(_,(e(_)+1)%u().images.length)},800))}function U(){F&&clearInterval(F)}Aa(()=>{U()});function re(){L("close")}Yt(()=>(Ie(B()),Ie(u())),()=>{B()&&u().images?.length?g():U()}),Oa(),Xt();var H=ft(),R=nt(H);{var E=w=>{var h=Qs(),p=l(h),m=l(p),S=l(m),se=l(S,!0);a(S);var J=s(S,2),q=l(J,!0);a(J);var D=s(J,2);a(m);var K=s(m,2),ee=l(K);{var $=N=>{var G=Ks();fe(G,5,()=>(Ie(u()),be(()=>u().images)),_e,(Y,X,le)=>{var te=Js();let ye;I(()=>{ot(te,"src",`${ls??""}${e(X)??""}`),ot(te,"alt",`${Ie(u()),be(()=>u().name)??""} frame ${le+1}`),ye=Je(te,1,"svelte-zbmy0k",null,ye,{active:le===e(_)})}),i(Y,te)}),a(G),i(N,G)},k=N=>{var G=Hs();i(N,G)};z(ee,N=>{Ie(u()),be(()=>u().images&&u().images.length>0)?N($):N(k,!1)})}var Q=s(ee,2),j=l(Q);a(Q),a(K);var y=s(K,2),x=s(l(y),2);fe(x,5,()=>(Ie(u()),be(()=>u().instructions)),_e,(N,G)=>{var Y=Ys(),X=l(Y,!0);a(Y),I(()=>Z(X,e(G))),i(N,Y)}),a(x),a(y),a(p),a(h),I(N=>{Z(se,(Ie(u()),be(()=>u().name))),Z(q,(Ie(u()),be(()=>u().category))),Z(j,`Targets: ${N??""}`)},[()=>(Ie(u()),be(()=>u().targetMuscles.join(", ")))]),ae("click",D,re),na(3,p,()=>ga,()=>({y:50,duration:300})),ae("click",p,ba(function(N){Rt.call(this,A,N)})),ae("keydown",p,ba(function(N){Rt.call(this,A,N)})),ae("click",h,re),ae("keydown",h,N=>N.key==="Escape"&&re()),i(w,h)};z(R,w=>{B()&&w(E)})}i(me,H),mt()}var Zs=d("<span>Saved! ‚úì</span>"),el=d("<button><!></button>"),tl=d("<option> </option>"),al=d('<button class="exercise-item svelte-1w0zsmt"><span class="name svelte-1w0zsmt"> </span> <span class="muscles svelte-1w0zsmt"> </span></button>'),sl=d('<div class="modal-overlay svelte-1w0zsmt" role="button" tabindex="0" aria-label="Close modal"><div class="picker-modal svelte-1w0zsmt" role="dialog" aria-modal="true" tabindex="-1"><div class="picker-header svelte-1w0zsmt"><h3>Add Exercise</h3> <div class="search-row svelte-1w0zsmt"><input type="text" placeholder="Search exercises..." class="svelte-1w0zsmt"/> <select class="svelte-1w0zsmt"><option>All Categories</option><!></select></div></div> <div class="picker-list svelte-1w0zsmt"></div></div></div>'),ll=d('<div class="keypad-overlay svelte-1w0zsmt"><div class="keypad-header svelte-1w0zsmt"><span> </span> <button class="svelte-1w0zsmt">Done</button></div> <!></div>'),rl=d('<div class="gym-session-form svelte-1w0zsmt"><div class="session-meta svelte-1w0zsmt"><input type="text" class="session-name svelte-1w0zsmt" placeholder="Workout Name (e.g. Pull Day)"/> <div class="meta-row svelte-1w0zsmt"><label class="svelte-1w0zsmt">Start Time <input type="datetime-local" class="svelte-1w0zsmt"/></label> <label class="svelte-1w0zsmt">Bodyweight (kg) <input type="number" placeholder="Optional" class="svelte-1w0zsmt"/></label> <label class="svelte-1w0zsmt">Block <select class="svelte-1w0zsmt"><option>Strength</option><option>Power</option><option>Power Endurance</option><option>Muscular Endurance</option></select></label></div></div> <div class="exercises-list"></div> <button class="add-exercise-btn svelte-1w0zsmt">+ Add Exercise</button> <!> <!> <!> <!> <!> <!></div>');function il(me,A){_t(A,!1);const u=Ae(),B=ca(),L="gym_session_draft";let _=Ae(""),F=Ae(),g=Ae([]),U=Ae(new Date().toISOString().slice(0,16)),re=Ae("Strength"),H=Ae(null),R=Ae(!1),E=Ae(""),w=Ae(""),h=Ae(null),p=Ae(!1),m=Ae(null),S=Ae(null),se=Ae(!1);va(()=>{const C=localStorage.getItem(L);if(C)try{const O=JSON.parse(C);O.sessionName&&t(_,O.sessionName),O.bodyweight&&t(F,O.bodyweight),O.startTime&&t(U,O.startTime),O.trainingBlock&&t(re,O.trainingBlock),O.exercises&&t(g,O.exercises)}catch(O){console.error("Failed to restore draft",O)}});const J=Array.from(new Set(Ta.map(C=>C.category))).sort();function q(C){const O={id:crypto.randomUUID(),name:C.name,sets:[{weight:0,reps:0,isWarmup:!1,isFailure:!1,isDropSet:!1,completed:!1}]};t(g,[...e(g),O]),t(R,!1),t(E,""),t(w,"")}function D(C,O,v){t(h,{exerciseIndex:O,setIndex:v,field:C.detail.field})}function K(C){if(!e(h))return;const{exerciseIndex:O,setIndex:v,field:f}=e(h);Ba(g,e(g)[O].sets[v][f]=C.detail),t(g,[...e(g)])}function ee(){t(p,!0)}function $(){e(g).length!==0&&($a({date:e(U).split("T")[0],name:e(_)||"Gym Workout",bodyweight:e(F),trainingBlock:e(re),exercises:e(g)}),t(se,!0),localStorage.removeItem(L),setTimeout(()=>{t(se,!1),B("save")},1500))}function k(){t(h,null)}Yt(()=>(e(re),e(U)),()=>{const O=Ua().filter(v=>(v.trainingBlock||"Strength")===e(re)&&v.date<e(U).split("T")[0]);O.sort((v,f)=>new Date(f.date).getTime()-new Date(v.date).getTime()),t(H,O.length>0?O[0]:null)}),Yt(()=>(e(_),e(F),e(U),e(re),e(g)),()=>{if(typeof localStorage<"u"){const C={sessionName:e(_),bodyweight:e(F),startTime:e(U),trainingBlock:e(re),exercises:e(g)};localStorage.setItem(L,JSON.stringify(C))}}),Yt(()=>(e(E),e(w)),()=>{t(u,Ta.filter(C=>{const O=C.name.toLowerCase().includes(e(E).toLowerCase())||C.targetMuscles.some(f=>f.toLowerCase().includes(e(E).toLowerCase())),v=e(w)?C.category===e(w):!0;return O&&v}))}),Oa(),Xt();var Q=rl(),j=l(Q),y=l(j);V(y);var x=s(y,2),N=l(x),G=s(l(N));V(G),a(N);var Y=s(N,2),X=s(l(Y));V(X),a(Y);var le=s(Y,2),te=s(l(le));I(()=>{e(re),Na(()=>{})});var ye=l(te);ye.value=ye.__value="Strength";var De=s(ye);De.value=De.__value="Power";var Re=s(De);Re.value=Re.__value="Power Endurance";var Pe=s(Re);Pe.value=Pe.__value="Muscular Endurance",a(te),a(le),a(x),a(j);var ue=s(j,2);fe(ue,5,()=>e(g),_e,(C,O,v)=>{{let f=Fa(()=>(e(H),e(O),be(()=>e(H)?.exercises.find(T=>T.name===e(O).name))));Ps(C,{get exercise(){return e(O)},get prevExercise(){return e(f)},$$events:{focus:T=>D(T,v,e(g)[v].sets.indexOf(T.detail.set)),complete:ee,delete:()=>{t(S,v)},info:()=>{const T=Ta.find(W=>W.name===e(O).name);T&&t(m,T)}}})}}),a(ue);var qe=s(ue,2),Fe=s(qe,2);{var Ue=C=>{var O=el();let v;var f=l(O);{var T=ie=>{var xe=Zs();i(ie,xe)},W=ie=>{var xe=Ge("Finish Workout");i(ie,xe)};z(f,ie=>{e(se)?ie(T):ie(W,!1)})}a(O),I(()=>{v=Je(O,1,"save-btn svelte-1w0zsmt",null,v,{success:e(se)}),O.disabled=e(se)}),ae("click",O,$),i(C,O)};z(Fe,C=>{e(g),be(()=>e(g).length>0)&&C(Ue)})}var ce=s(Fe,2);{var ne=C=>{var O=sl(),v=l(O),f=l(v),T=s(l(f),2),W=l(T);V(W);var ie=s(W,2);I(()=>{e(w),Na(()=>{})});var xe=l(ie);xe.value=xe.__value="";var Ze=s(xe);fe(Ze,1,()=>J,_e,(we,Be)=>{var Te=tl(),Ke=l(Te,!0);a(Te);var st={};I(()=>{Z(Ke,e(Be)),st!==(st=e(Be))&&(Te.value=(Te.__value=e(Be))??"")}),i(we,Te)}),a(ie),a(T),a(f);var gt=s(f,2);fe(gt,5,()=>e(u),_e,(we,Be)=>{var Te=al(),Ke=l(Te),st=l(Ke,!0);a(Ke);var He=s(Ke,2),Ee=l(He,!0);a(He),a(Te),I(vt=>{Z(st,(e(Be),be(()=>e(Be).name))),Z(Ee,vt)},[()=>(e(Be),be(()=>e(Be).targetMuscles.join(", ")))]),ae("click",Te,()=>q(e(Be))),i(we,Te)}),a(gt),a(v),a(O),M(W,()=>e(E),we=>t(E,we)),Qe(ie,()=>e(w),we=>t(w,we)),ae("click",v,ba(function(we){Rt.call(this,A,we)})),ae("keydown",v,ba(function(we){Rt.call(this,A,we)})),na(3,v,()=>ga,()=>({y:100,duration:300})),ae("click",O,()=>t(R,!1)),ae("keydown",O,we=>we.key==="Escape"&&t(R,!1)),na(3,O,()=>Xa),i(C,O)};z(ce,C=>{e(R)&&C(ne)})}var ve=s(ce,2);{var Oe=C=>{Xs(C,{get exercise(){return e(m)},visible:!0,$$events:{close:()=>t(m,null)}})};z(ve,C=>{e(m)&&C(Oe)})}var ge=s(ve,2);{var Ve=C=>{var O=ll(),v=l(O),f=l(v),T=l(f);a(f);var W=s(f,2);a(v);var ie=s(v,2);{let xe=Fa(()=>(e(h),be(()=>e(h).field==="weight"?"Weight (kg)":"Reps")));$s(ie,{get value(){return e(g),e(h),be(()=>e(g)[e(h).exerciseIndex].sets[e(h).setIndex][e(h).field])},get label(){return e(xe)},$$events:{change:K}})}a(O),I(()=>Z(T,`Editing ${e(g),e(h),be(()=>e(g)[e(h).exerciseIndex].name)??""} - Set ${e(h),be(()=>e(h).setIndex+1)??""}`)),ae("click",W,k),na(3,O,()=>ga,()=>({y:200,duration:300})),i(C,O)};z(ge,C=>{e(h)&&C(Ve)})}var Ce=s(ge,2);Ws(Ce,{get visible(){return e(p)},set visible(C){t(p,C)},$$legacy:!0});var Me=s(Ce,2);{var Xe=C=>{Za(C,{isOpen:!0,title:"Delete Exercise",get message(){return`Are you sure you want to delete ${e(g),e(S),be(()=>e(g)[e(S)].name)??""}?`},requireInput:!1,onConfirm:()=>{e(S)!==null&&(t(g,e(g).filter((O,v)=>v!==e(S))),t(S,null))},onCancel:()=>t(S,null)})};z(Me,C=>{e(S)!==null&&C(Xe)})}a(Q),M(y,()=>e(_),C=>t(_,C)),M(G,()=>e(U),C=>t(U,C)),M(X,()=>e(F),C=>t(F,C)),Qe(te,()=>e(re),C=>t(re,C)),ae("click",qe,()=>t(R,!0)),i(me,Q),mt()}var ol=d("<option> </option>"),nl=d("<option> </option>"),vl=d('<button class="remove-set-btn svelte-1m63nqt">‚úï</button>'),cl=d('<div class="set-row svelte-1m63nqt"><div class="input-wrap svelte-1m63nqt"><label class="svelte-1m63nqt">Weight</label> <input type="number" placeholder="0" class="svelte-1m63nqt"/></div> <div class="input-wrap svelte-1m63nqt"><label class="svelte-1m63nqt">Reps/Secs</label> <input type="number" placeholder="1" class="svelte-1m63nqt"/></div> <!></div>'),dl=d('<div class="exercise-card svelte-1m63nqt"><div class="card-header svelte-1m63nqt"><div class="header-inputs svelte-1m63nqt"><select class="svelte-1m63nqt"></select> <select class="svelte-1m63nqt"></select></div> <button class="remove-card-btn svelte-1m63nqt" title="Remove Exercise">‚úï</button></div> <div class="sets-list svelte-1m63nqt"><!> <button class="add-set-btn svelte-1m63nqt">+ Add Set</button></div> <div class="card-footer svelte-1m63nqt"><div class="meta-input svelte-1m63nqt"><label class="svelte-1m63nqt">Total Sets</label> <input type="number" readonly="" disabled class="svelte-1m63nqt"/></div> <div class="notes-input svelte-1m63nqt"><label class="svelte-1m63nqt">Notes</label> <input type="text" placeholder="Notes..." class="svelte-1m63nqt"/></div></div></div>'),ul=d("<div> </div>"),pl=d('<div class="form-content svelte-1m63nqt"><div class="header-row svelte-1m63nqt"><h3 class="svelte-1m63nqt">ü§è Fingerboarding</h3> <button class="add-row-btn svelte-1m63nqt">+ Add Exercise</button></div> <div class="form-group date-group svelte-1m63nqt"><label for="date">Date</label> <input type="date" id="date" class="svelte-1m63nqt"/></div> <div class="cards-container svelte-1m63nqt"></div> <div class="submit-section"><!> <button type="button" class="submit-btn svelte-1m63nqt"><!></button></div></div>');function fl(me,A){_t(A,!0);const u=["Max hangs","Recruitment pulls","Max pick-ups"],B=["Full-crimp","Half-crimp","Three finger drag","Pinch","Open hand","Sloper"];let L=b($e(new Date().toISOString().split("T")[0])),_=b($e([]));function F(){t(_,[...e(_),{id:crypto.randomUUID(),name:u[0],gripType:B[1],sets:1,details:[{weight:0,reps:5}],notes:""}],!0)}ma(()=>{e(_).length===0&&F()});function g(j){t(_,e(_).filter((y,x)=>x!==j),!0)}function U(j){const y=e(_)[j],x=y.details[y.details.length-1];y.details=[...y.details,{...x}],y.sets=y.details.length}function re(j,y){const x=e(_)[j];x.details.length>1&&(x.details=x.details.filter((N,G)=>G!==y),x.sets=x.details.length)}let H=b("idle"),R=b("");async function E(){t(H,"saving");try{const j={date:e(L),location:"N/A",exercises:JSON.parse(JSON.stringify(e(_)))},y=Wa(j);if(da()){const x=await es(j);x.ok?(ha(y.id,x.id),ya(x.id),t(H,"success"),t(R,"Session saved and synced!")):(Sa(y.id),t(H,"success"),t(R,"Saved locally. Sync failed: "+(x.error||"Unknown error")))}else t(H,"success"),t(R,"Saved locally. Will sync when online.");window.dispatchEvent(new CustomEvent("session-saved")),setTimeout(()=>{w()},2e3)}catch(j){t(H,"error"),t(R,"Failed to save session"),console.error("Save error:",j)}}function w(){t(L,new Date().toISOString().split("T")[0],!0),t(_,[],!0),F(),t(H,"idle"),t(R,"")}var h=pl(),p=l(h),m=s(l(p),2);m.__click=F,a(p);var S=s(p,2),se=s(l(S),2);V(se),a(S);var J=s(S,2);fe(J,21,()=>e(_),_e,(j,y,x)=>{var N=dl(),G=l(N),Y=l(G),X=l(Y);fe(X,21,()=>u,_e,(ve,Oe)=>{var ge=ol(),Ve=l(ge,!0);a(ge);var Ce={};I(()=>{Z(Ve,e(Oe)),Ce!==(Ce=e(Oe))&&(ge.value=(ge.__value=e(Oe))??"")}),i(ve,ge)}),a(X);var le=s(X,2);fe(le,21,()=>B,_e,(ve,Oe)=>{var ge=nl(),Ve=l(ge,!0);a(ge);var Ce={};I(()=>{Z(Ve,e(Oe)),Ce!==(Ce=e(Oe))&&(ge.value=(ge.__value=e(Oe))??"")}),i(ve,ge)}),a(le),a(Y);var te=s(Y,2);te.__click=()=>g(x),a(G);var ye=s(G,2),De=l(ye);fe(De,17,()=>e(y).details,_e,(ve,Oe,ge)=>{var Ve=cl(),Ce=l(Ve),Me=l(Ce);ot(Me,"for",`weight-${x}-${ge}`);var Xe=s(Me,2);V(Xe),ot(Xe,"id",`weight-${x}-${ge}`),a(Ce);var C=s(Ce,2),O=l(C);ot(O,"for",`reps-${x}-${ge}`);var v=s(O,2);V(v),ot(v,"id",`reps-${x}-${ge}`),a(C);var f=s(C,2);{var T=W=>{var ie=vl();ie.__click=()=>re(x,ge),i(W,ie)};z(f,W=>{e(y).details.length>1&&W(T)})}a(Ve),M(Xe,()=>e(Oe).weight,W=>e(Oe).weight=W),M(v,()=>e(Oe).reps,W=>e(Oe).reps=W),i(ve,Ve)});var Re=s(De,2);Re.__click=()=>U(x),a(ye);var Pe=s(ye,2),ue=l(Pe),qe=l(ue);ot(qe,"for",`total-sets-${x}`);var Fe=s(qe,2);V(Fe),ot(Fe,"id",`total-sets-${x}`),a(ue);var Ue=s(ue,2),ce=l(Ue);ot(ce,"for",`notes-${x}`);var ne=s(ce,2);V(ne),ot(ne,"id",`notes-${x}`),a(Ue),a(Pe),a(N),I(()=>Ra(Fe,e(y).sets)),Qe(X,()=>e(y).name,ve=>e(y).name=ve),Qe(le,()=>e(y).gripType,ve=>e(y).gripType=ve),M(ne,()=>e(y).notes,ve=>e(y).notes=ve),i(j,N)}),a(J);var q=s(J,2),D=l(q);{var K=j=>{var y=ul();let x;var N=l(y,!0);a(y),I(()=>{x=Je(y,1,"save-message svelte-1m63nqt",null,x,{success:e(H)==="success",error:e(H)==="error"}),Z(N,e(R))}),i(j,y)};z(D,j=>{e(R)&&j(K)})}var ee=s(D,2);ee.__click=E;var $=l(ee);{var k=j=>{var y=Ge("Saving...");i(j,y)},Q=j=>{var y=ft(),x=nt(y);{var N=Y=>{var X=Ge("‚úì Saved!");i(Y,X)},G=Y=>{var X=Ge("Save Session");i(Y,X)};z(x,Y=>{e(H)==="success"?Y(N):Y(G,!1)},!0)}i(j,y)};z($,j=>{e(H)==="saving"?j(k):j(Q,!1)})}a(ee),a(q),a(h),I(()=>ee.disabled=e(H)==="saving"),M(se,()=>e(L),j=>t(L,j)),i(me,h),mt()}Qt(["click"]);var _l=d("<option> </option>"),ml=d('<input type="text" placeholder="Enter venue name" class="mt-2 svelte-1fje4dh"/>'),gl=d("<option> </option>"),bl=d("<option> </option>"),hl=d('<input type="text" placeholder="Round name" class="mt-2 svelte-1fje4dh"/>'),yl=d('<div class="result-mode-content svelte-1fje4dh"><div class="form-group svelte-1fje4dh"><label for="position" class="svelte-1fje4dh">Final Position</label> <input type="number" id="position" placeholder="#" class="large-input svelte-1fje4dh"/></div></div>'),Sl=d("<option> </option>"),kl=d('<input type="number" min="1" class="svelte-1fje4dh"/>'),xl=d('<span class="flash-dash">-</span>'),wl=d('<tr><td class="col-name svelte-1fje4dh"><input type="text" class="svelte-1fje4dh"/></td><td class="col-status svelte-1fje4dh"><select class="svelte-1fje4dh"></select></td><td class="col-attempt svelte-1fje4dh"><!></td><td class="col-notes svelte-1fje4dh"><input type="text" placeholder="..." class="svelte-1fje4dh"/></td><td class="col-action svelte-1fje4dh"><button class="svelte-1fje4dh">‚úï</button></td></tr>'),ql=d('<div class="load-metrics-compact svelte-1fje4dh"><div class="metric svelte-1fje4dh"><label for="finger">Finger Load</label> <input type="number" id="finger" min="0" max="5" step="0.5" class="svelte-1fje4dh"/></div> <div class="metric svelte-1fje4dh"><label for="shoulder">Shoulder Load</label> <input type="number" id="shoulder" min="0" max="5" step="0.5" class="svelte-1fje4dh"/></div> <div class="metric svelte-1fje4dh"><label for="forearm">Forearm Load</label> <input type="number" id="forearm" min="0" max="5" step="0.5" class="svelte-1fje4dh"/></div></div> <div class="climbs-table-container svelte-1fje4dh"><div class="section-header svelte-1fje4dh"><h4 class="svelte-1fje4dh">Boulders / Routes</h4></div> <table class="climbs-table svelte-1fje4dh"><thead><tr><th class="svelte-1fje4dh">#</th><th class="svelte-1fje4dh">Result</th><th class="svelte-1fje4dh">Att.</th><th class="svelte-1fje4dh">Notes</th><th class="svelte-1fje4dh"></th></tr></thead><tbody></tbody></table> <button class="add-row-btn svelte-1fje4dh">+ Add Row</button></div>',1),Cl=d("<div> </div>"),Tl=d('<div class="form-content svelte-1fje4dh"><h3 class="svelte-1fje4dh">üèÜ Competition</h3> <div class="form-grid svelte-1fje4dh"><div class="form-group svelte-1fje4dh"><label for="date" class="svelte-1fje4dh">Date</label> <input type="date" id="date" class="svelte-1fje4dh"/></div> <div class="form-group svelte-1fje4dh"><label for="venue" class="svelte-1fje4dh">Venue</label> <select id="venue" class="svelte-1fje4dh"><option disabled>Select venue...</option><!></select> <!></div></div> <div class="form-group mb-4 svelte-1fje4dh"><label for="type" class="svelte-1fje4dh">Type</label> <select id="type" class="svelte-1fje4dh"></select></div> <div class="round-section svelte-1fje4dh"><div class="form-group svelte-1fje4dh"><label for="round" class="svelte-1fje4dh">Round</label> <select id="round" class="svelte-1fje4dh"></select> <!></div> <!></div> <div class="submit-section"><!> <button type="button" class="submit-btn svelte-1fje4dh"><!></button></div></div>');function Nl(me,A){_t(A,!0);const u=["Flashpoint Bristol","Rockstar Techno","Rockstar Unit 3","Rockstar Unit 5","Bloc","TCA","Other"],B=["Bouldering","Lead","Speed"],L=["Qualifiers","Semi-Finals","Finals","Result","Other"],_=["Flash","Top","Zone","Attempt"];let F=b($e(new Date().toISOString().split("T")[0])),g=b(""),U=b(""),re=b("Bouldering"),H=b(4),R=b(4),E=b(4),w=b("Qualifiers"),h=b(""),p=b(null),m=b($e([{name:"#1",status:"Flash",attemptCount:1,notes:""}])),S=Bt(()=>e(w)==="Result"),se=Bt(()=>e(g)==="Other"),J=Bt(()=>e(w)==="Other"),q=Bt(()=>e(w)==="Other"?e(h):e(w));function D(){const v=e(m).length+1;t(m,[...e(m),{name:`#${v}`,status:"Flash",attemptCount:1,notes:""}],!0)}function K(v){e(m).length>1?t(m,e(m).filter((f,T)=>T!==v),!0):e(m)[0]={name:"#1",status:"Flash",attemptCount:1,notes:""}}function ee(v,f){e(m)[v].status=f,f==="Flash"&&(e(m)[v].attemptCount=1)}let $=b("idle"),k=b("");async function Q(){if(!e(g)||e(g)==="Other"&&!e(U)){t($,"error"),t(k,"Please specify a venue");return}t($,"saving");try{const v={name:e(q),position:e(S)?e(p):void 0,climbs:e(S)?void 0:JSON.parse(JSON.stringify(e(m)))},f={date:e(F),venue:e(g)==="Other"?e(U):e(g),customVenue:e(g)==="Other"?e(U):void 0,type:e(re),fingerLoad:e(S)?void 0:e(H),shoulderLoad:e(S)?void 0:e(R),forearmLoad:e(S)?void 0:e(E),rounds:[v]},T=Ja(f);if(da()){const W=await ts(f);W.ok?(ha(T.id,W.id),ya(W.id),t($,"success"),t(k,"Competition saved and synced!")):(Sa(T.id),t($,"success"),t(k,"Saved locally. Sync failed: "+(W.error||"Unknown error")))}else t($,"success"),t(k,"Saved locally. Will sync when online.");window.dispatchEvent(new CustomEvent("session-saved")),setTimeout(()=>{j()},2e3)}catch(v){t($,"error"),t(k,"Failed to save session"),console.error("Save error:",v)}}function j(){t(F,new Date().toISOString().split("T")[0],!0),t(g,""),t(U,""),t(p,null),t(m,[{name:"#1",status:"Flash",attemptCount:1,notes:""}],!0),t($,"idle"),t(k,"")}var y=Tl(),x=s(l(y),2),N=l(x),G=s(l(N),2);V(G),a(N);var Y=s(N,2),X=s(l(Y),2),le=l(X);le.value=le.__value="";var te=s(le);fe(te,17,()=>u,_e,(v,f)=>{var T=_l(),W=l(T,!0);a(T);var ie={};I(()=>{Z(W,e(f)),ie!==(ie=e(f))&&(T.value=(T.__value=e(f))??"")}),i(v,T)}),a(X);var ye=s(X,2);{var De=v=>{var f=ml();V(f),M(f,()=>e(U),T=>t(U,T)),i(v,f)};z(ye,v=>{e(se)&&v(De)})}a(Y),a(x);var Re=s(x,2),Pe=s(l(Re),2);fe(Pe,21,()=>B,_e,(v,f)=>{var T=gl(),W=l(T,!0);a(T);var ie={};I(()=>{Z(W,e(f)),ie!==(ie=e(f))&&(T.value=(T.__value=e(f))??"")}),i(v,T)}),a(Pe),a(Re);var ue=s(Re,2),qe=l(ue),Fe=s(l(qe),2);fe(Fe,21,()=>L,_e,(v,f)=>{var T=bl(),W=l(T,!0);a(T);var ie={};I(()=>{Z(W,e(f)),ie!==(ie=e(f))&&(T.value=(T.__value=e(f))??"")}),i(v,T)}),a(Fe);var Ue=s(Fe,2);{var ce=v=>{var f=hl();V(f),M(f,()=>e(h),T=>t(h,T)),i(v,f)};z(Ue,v=>{e(J)&&v(ce)})}a(qe);var ne=s(qe,2);{var ve=v=>{var f=yl(),T=l(f),W=s(l(T),2);V(W),a(T),a(f),M(W,()=>e(p),ie=>t(p,ie)),i(v,f)},Oe=v=>{var f=ql(),T=nt(f),W=l(T),ie=s(l(W),2);V(ie),a(W);var xe=s(W,2),Ze=s(l(xe),2);V(Ze),a(xe);var gt=s(xe,2),we=s(l(gt),2);V(we),a(gt),a(T);var Be=s(T,2),Te=s(l(Be),2),Ke=s(l(Te));fe(Ke,21,()=>e(m),_e,(He,Ee,vt)=>{var ht=wl(),yt=l(ht),xt=l(yt);V(xt),a(yt);var St=s(yt),lt=l(St);lt.__change=Ne=>ee(vt,Ne.target.value),fe(lt,21,()=>_,_e,(Ne,We)=>{var ct=Sl(),Ft=l(ct,!0);a(ct);var It={};I(()=>{Z(Ft,e(We)),It!==(It=e(We))&&(ct.value=(ct.__value=e(We))??"")}),i(Ne,ct)}),a(lt);var wt;La(lt),a(St);var qt=s(St),Lt=l(qt);{var At=Ne=>{var We=kl();V(We),M(We,()=>e(Ee).attemptCount,ct=>e(Ee).attemptCount=ct),i(Ne,We)},Ct=Ne=>{var We=xl();i(Ne,We)};z(Lt,Ne=>{e(Ee).status!=="Flash"?Ne(At):Ne(Ct,!1)})}a(qt);var Tt=s(qt),kt=l(Tt);V(kt),a(Tt);var zt=s(Tt),Nt=l(zt);Nt.__click=()=>K(vt),a(zt),a(ht),I(()=>{wt!==(wt=e(Ee).status)&&(lt.value=(lt.__value=e(Ee).status)??"",Ga(lt,e(Ee).status))}),M(xt,()=>e(Ee).name,Ne=>e(Ee).name=Ne),M(kt,()=>e(Ee).notes,Ne=>e(Ee).notes=Ne),i(He,ht)}),a(Ke),a(Te);var st=s(Te,2);st.__click=D,a(Be),M(ie,()=>e(H),He=>t(H,He)),M(Ze,()=>e(R),He=>t(R,He)),M(we,()=>e(E),He=>t(E,He)),i(v,f)};z(ne,v=>{e(S)?v(ve):v(Oe,!1)})}a(ue);var ge=s(ue,2),Ve=l(ge);{var Ce=v=>{var f=Cl();let T;var W=l(f,!0);a(f),I(()=>{T=Je(f,1,"save-message svelte-1fje4dh",null,T,{success:e($)==="success",error:e($)==="error"}),Z(W,e(k))}),i(v,f)};z(Ve,v=>{e(k)&&v(Ce)})}var Me=s(Ve,2);Me.__click=Q;var Xe=l(Me);{var C=v=>{var f=Ge("Saving...");i(v,f)},O=v=>{var f=ft(),T=nt(f);{var W=xe=>{var Ze=Ge("‚úì Saved!");i(xe,Ze)},ie=xe=>{var Ze=Ge("Save Session");i(xe,Ze)};z(T,xe=>{e($)==="success"?xe(W):xe(ie,!1)},!0)}i(v,f)};z(Xe,v=>{e($)==="saving"?v(C):v(O,!1)})}a(Me),a(ge),a(y),I(()=>Me.disabled=e($)==="saving"),M(G,()=>e(F),v=>t(F,v)),Qe(X,()=>e(g),v=>t(g,v)),Qe(Pe,()=>e(re),v=>t(re,v)),Qe(Fe,()=>e(w),v=>t(w,v)),i(me,y),mt()}Qt(["change","click"]);var Fl=d('<span class="spinner svelte-b2zgdd"></span> Syncing...',1),Ol=d("<button><!></button>"),Ll=d("<div> </div>"),Gl=d('<div><div class="sync-info svelte-b2zgdd"><span class="sync-icon svelte-b2zgdd"> </span> <span class="sync-text svelte-b2zgdd"><!></span></div> <!> <!></div>'),El=d("<option> </option>"),jl=d('<div class="form-container svelte-b2zgdd"><!></div>'),Al=d('<div class="page svelte-b2zgdd"><div class="page-header svelte-b2zgdd"><h1 class="svelte-b2zgdd">üìù Log Data</h1> <p class="subtitle svelte-b2zgdd">Record your training sessions</p></div> <!> <div class="content-card svelte-b2zgdd"><div class="form-group svelte-b2zgdd"><label for="activity-type" class="svelte-b2zgdd">Activity Type</label> <select id="activity-type" class="svelte-b2zgdd"><option disabled>Select an activity...</option><!></select></div> <!></div></div>');function Jl(me,A){_t(A,!0);const u=[{value:"indoor_climb",label:"Indoor Climb",icon:"üßó"},{value:"outdoor_climb",label:"Outdoor Climb",icon:"‚õ∞Ô∏è"},{value:"gym_session",label:"Gym Session",icon:"üèãÔ∏è"},{value:"fingerboarding",label:"Fingerboarding",icon:"ü§è"},{value:"competition",label:"Competition",icon:"üèÜ"}];let B=b(""),L=b(0),_=b("idle"),F=b(""),g=b(!0);va(()=>{U(),t(g,da(),!0);const q=()=>{t(g,!0),U()},D=()=>{t(g,!1)},K=()=>{U()};return window.addEventListener("online",q),window.addEventListener("offline",D),window.addEventListener("session-saved",K),()=>{window.removeEventListener("online",q),window.removeEventListener("offline",D),window.removeEventListener("session-saved",K)}});function U(){t(L,as(),!0)}async function re(){if(!e(g)){t(_,"error"),t(F,"No network connection");return}t(_,"syncing"),t(F,"");try{const q=await ss();q.failed===0&&q.success>0?(t(_,"success"),t(F,`Synced ${q.success} session${q.success>1?"s":""}!`)):q.failed>0&&q.success>0?(t(_,"error"),t(F,`Synced ${q.success}, failed ${q.failed}`)):q.failed>0?(t(_,"error"),t(F,`Failed to sync ${q.failed} session${q.failed>1?"s":""}`)):(t(_,"idle"),t(F,"")),U(),e(_)==="success"&&setTimeout(()=>{t(_,"idle"),t(F,"")},3e3)}catch(q){t(_,"error"),t(F,"Sync failed"),console.error("Sync error:",q)}}var H=Al(),R=s(l(H),2);{var E=q=>{var D=Gl();let K;var ee=l(D),$=l(ee),k=l($,!0);a($);var Q=s($,2),j=l(Q);{var y=le=>{var te=Ge();I(()=>Z(te,`${e(L)??""} session${e(L)>1?"s":""} waiting to sync`)),i(le,te)},x=le=>{var te=Ge();I(()=>Z(te,`Offline - ${e(L)??""} session${e(L)>1?"s":""} saved locally`)),i(le,te)};z(j,le=>{e(g)?le(y):le(x,!1)})}a(Q),a(ee);var N=s(ee,2);{var G=le=>{var te=Ol();let ye;te.__click=re;var De=l(te);{var Re=ue=>{var qe=Fl();ze(),i(ue,qe)},Pe=ue=>{var qe=ft(),Fe=nt(qe);{var Ue=ne=>{var ve=Ge("‚úì Synced!");i(ne,ve)},ce=ne=>{var ve=Ge("Sync Now");i(ne,ve)};z(Fe,ne=>{e(_)==="success"?ne(Ue):ne(ce,!1)},!0)}i(ue,qe)};z(De,ue=>{e(_)==="syncing"?ue(Re):ue(Pe,!1)})}a(te),I(()=>{ye=Je(te,1,"sync-btn svelte-b2zgdd",null,ye,{syncing:e(_)==="syncing"}),te.disabled=e(_)==="syncing"}),i(le,te)};z(N,le=>{e(g)&&le(G)})}var Y=s(N,2);{var X=le=>{var te=Ll();let ye;var De=l(te,!0);a(te),I(()=>{ye=Je(te,1,"sync-message svelte-b2zgdd",null,ye,{error:e(_)==="error",success:e(_)==="success"}),Z(De,e(F))}),i(le,te)};z(Y,le=>{e(F)&&le(X)})}a(D),I(()=>{K=Je(D,1,"sync-banner svelte-b2zgdd",null,K,{offline:!e(g)}),Z(k,e(g)?"üîÑ":"üì¥")}),i(q,D)};z(R,q=>{e(L)>0&&q(E)})}var w=s(R,2),h=l(w),p=s(l(h),2),m=l(p);m.value=m.__value="";var S=s(m);fe(S,17,()=>u,q=>q.value,(q,D)=>{var K=El(),ee=l(K);a(K);var $={};I(()=>{Z(ee,`${e(D).icon??""} ${e(D).label??""}`),$!==($=e(D).value)&&(K.value=(K.__value=e(D).value)??"")}),i(q,K)}),a(p),a(h);var se=s(h,2);{var J=q=>{var D=jl(),K=l(D);{var ee=k=>{ks(k,{})},$=k=>{var Q=ft(),j=nt(Q);{var y=N=>{Ds(N,{})},x=N=>{var G=ft(),Y=nt(G);{var X=te=>{il(te,{})},le=te=>{var ye=ft(),De=nt(ye);{var Re=ue=>{fl(ue,{})},Pe=ue=>{var qe=ft(),Fe=nt(qe);{var Ue=ce=>{Nl(ce,{})};z(Fe,ce=>{e(B)==="competition"&&ce(Ue)},!0)}i(ue,qe)};z(De,ue=>{e(B)==="fingerboarding"?ue(Re):ue(Pe,!1)},!0)}i(te,ye)};z(Y,te=>{e(B)==="gym_session"?te(X):te(le,!1)},!0)}i(N,G)};z(j,N=>{e(B)==="outdoor_climb"?N(y):N(x,!1)},!0)}i(k,Q)};z(K,k=>{e(B)==="indoor_climb"?k(ee):k($,!1)})}a(D),i(q,D)};z(se,q=>{e(B)&&q(J)})}a(w),a(H),Qe(p,()=>e(B),q=>t(B,q)),i(me,H),mt()}Qt(["click"]);export{Jl as component};
