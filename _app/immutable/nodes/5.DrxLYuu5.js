import{f as l,a as r,c as Re,t as ba}from"../chunks/Dy_yFtRF.js";import{p as ea,c as t,s,j as e,aZ as C,r as a,t as h,a as aa,F as n,f as Fe,aG as Da,a_ as _a,E as da,o as Va,d as Ka}from"../chunks/QpXzQ7VK.js";import{d as Qe,s as o}from"../chunks/BR79ex5r.js";import{i as _}from"../chunks/CmpNJFrY.js";import{s as Pe,r as Ze,e as we,i as Le,b as Je}from"../chunks/BB3KXFwk.js";import{t as Ve,k as sa,d as Ua,l as Ha,s as Ia,m as Qa,g as Xa,b as Ya,n as $a,o as et,p as at,q as tt}from"../chunks/D_JwAdkp.js";import{c as wa,k as Ma,l as Za,n as Ea,o as Ra,p as Pa,q as Ba,t as st}from"../chunks/kdj3S9pV.js";import{s as Ke}from"../chunks/BOayXmp2.js";import{s as He}from"../chunks/vjpRGmQB.js";import{p as Ga}from"../chunks/MIzAevRS.js";var it=l('<span class="chevron svelte-12crvy">‚ñ≤</span>'),rt=l('<span class="chevron svelte-12crvy">‚ñº</span>'),lt=l('<div class="input-with-action svelte-12crvy"><input type="text" id="location-manual" placeholder="Custom location..." class="flat-left svelte-12crvy"/> <button type="button" class="action-btn flat-right svelte-12crvy" title="Back to list">‚úï</button></div>'),vt=l("<option> </option>"),nt=l('<select id="location-filter" class="svelte-12crvy"><option>Any Location</option><!></select>'),ot=l("<option> </option>"),dt=l("<option> </option>"),ct=l('<div class="filter-body svelte-12crvy"><div class="filter-grid svelte-12crvy"><div class="filter-item svelte-12crvy"><label for="start-date" class="svelte-12crvy">Start Date</label> <input type="date" id="start-date" class="svelte-12crvy"/></div> <div class="filter-item svelte-12crvy"><label for="end-date" class="svelte-12crvy">End Date</label> <input type="date" id="end-date" class="svelte-12crvy"/></div> <div class="filter-item svelte-12crvy"><label for="location-filter" class="svelte-12crvy">Location</label> <!></div> <div class="filter-item svelte-12crvy"><label for="climbing-type-filter" class="svelte-12crvy">Climb Type</label> <select id="climbing-type-filter" class="svelte-12crvy"><option>Any Type</option><!></select></div> <div class="filter-item svelte-12crvy"><label for="session-type-filter" class="svelte-12crvy">Session Type</label> <select id="session-type-filter" class="svelte-12crvy"><option>Any Type</option><!></select></div> <div class="filter-item svelte-12crvy"><label for="grade-filter" class="svelte-12crvy">Grade (Exact)</label> <input type="text" id="grade-filter" placeholder="e.g. V4" class="svelte-12crvy"/></div></div> <div class="filter-actions svelte-12crvy"><button class="reset-btn svelte-12crvy">Reset Filters</button></div></div>'),_t=l('<div class="filter-container svelte-12crvy"><button class="filter-header svelte-12crvy"><div class="header-content svelte-12crvy"><span class="icon svelte-12crvy">üîç</span> <span class="title svelte-12crvy">Filters</span> <!></div></button> <!></div>');function ut(me,i){ea(i,!0);const D=["Rockstar Swindon","Flashpoint Swindon","Flashpoint Bristol","Redpoint Bristol","TCH Bristol","Other"],p=["Bouldering","Sport","Mixed"],T=["Projecting","Onsighting","Campusing","Repeaters"];let x=C(!1),g=C(""),k=C(""),y=C(""),z=C(""),I=C(""),M=C(""),oe=C(!1);function E(){n(x,!e(x))}function Z(){n(g,""),n(k,""),n(y,""),n(z,""),n(oe,!1),n(I,""),n(M,""),O()}function O(){i.onFilterParamsChange({startDate:e(g),endDate:e(k),location:e(y),climbingType:e(z),sessionType:e(I),grade:e(M)})}function K(){e(y)==="Other"?(n(oe,!0),n(y,"")):O()}function Q(){n(oe,!1),n(y,""),O()}var te=_t(),ee=t(te);ee.__click=E;var X=t(ee),ae=s(t(X),4);{var re=w=>{var F=it();r(w,F)},U=w=>{var F=rt();r(w,F)};_(ae,w=>{e(x)?w(re):w(U,!1)})}a(X),a(ee);var ce=s(ee,2);{var m=w=>{var F=ct(),W=t(F),R=t(W),ve=s(t(R),2);Ze(ve),ve.__change=O,a(R);var _e=s(R,2),c=s(t(_e),2);Ze(c),c.__change=O,a(_e);var b=s(_e,2),f=s(t(b),2);{var v=L=>{var B=lt(),ue=t(B);Ze(ue),ue.__input=O;var ke=s(ue,2);ke.__click=Q,a(B),Je(ue,()=>e(y),G=>n(y,G)),r(L,B)},d=L=>{var B=nt();B.__change=K;var ue=t(B);ue.value=ue.__value="";var ke=s(ue);we(ke,17,()=>D,Le,(G,$)=>{var xe=vt(),se=t(xe,!0);a(xe);var ie={};h(()=>{o(se,e($)),ie!==(ie=e($))&&(xe.value=(xe.__value=e($))??"")}),r(G,xe)}),a(B),wa(B,()=>e(y),G=>n(y,G)),r(L,B)};_(f,L=>{e(oe)?L(v):L(d,!1)})}a(b);var q=s(b,2),A=s(t(q),2);A.__change=O;var le=t(A);le.value=le.__value="";var pe=s(le);we(pe,17,()=>p,Le,(L,B)=>{var ue=ot(),ke=t(ue,!0);a(ue);var G={};h(()=>{o(ke,e(B)),G!==(G=e(B))&&(ue.value=(ue.__value=e(B))??"")}),r(L,ue)}),a(A),a(q);var Ge=s(q,2),P=s(t(Ge),2);P.__change=O;var H=t(P);H.value=H.__value="";var ne=s(H);we(ne,17,()=>T,Le,(L,B)=>{var ue=dt(),ke=t(ue,!0);a(ue);var G={};h(()=>{o(ke,e(B)),G!==(G=e(B))&&(ue.value=(ue.__value=e(B))??"")}),r(L,ue)}),a(P),a(Ge);var Y=s(Ge,2),ye=s(t(Y),2);Ze(ye),ye.__input=O,a(Y),a(W);var Se=s(W,2),Ce=t(Se);Ce.__click=Z,a(Se),a(F),Je(ve,()=>e(g),L=>n(g,L)),Je(c,()=>e(k),L=>n(k,L)),wa(A,()=>e(z),L=>n(z,L)),wa(P,()=>e(I),L=>n(I,L)),Je(ye,()=>e(M),L=>n(M,L)),Ve(3,F,()=>sa,()=>({duration:200})),r(w,F)};_(ce,w=>{e(x)&&w(m)})}a(te),h(()=>Pe(ee,"aria-expanded",e(x))),r(me,te),aa()}Qe(["click","change","input"]);var ft=l('<span class="climb-type-tag svelte-yz0xxt"> </span>'),gt=l('<span class="notes-preview svelte-yz0xxt"> </span>'),pt=l('<span class="attempts-count svelte-yz0xxt"> </span>'),mt=l('<div class="detail-row svelte-yz0xxt"><span class="label svelte-yz0xxt">Notes:</span> <p class="notes svelte-yz0xxt"> </p></div>'),ht=l('<p class="empty-notes svelte-yz0xxt">No notes for this climb.</p>'),bt=l('<div class="climb-details svelte-yz0xxt"><!> <div class="tags svelte-yz0xxt"><span class="tag type svelte-yz0xxt"> </span> <span class="tag attempt-text svelte-yz0xxt"> </span></div></div>'),yt=l('<div><div class="climb-header svelte-yz0xxt" role="button" tabindex="0"><div class="climb-main-info svelte-yz0xxt"><span> </span> <span class="climb-name svelte-yz0xxt"> </span> <!> <!></div> <div class="climb-meta svelte-yz0xxt"><span><span class="icon svelte-yz0xxt"> </span> <!></span> <button class="delete-btn svelte-yz0xxt" aria-label="Delete climb" title="Delete climb">üóëÔ∏è</button> <span class="chevron svelte-yz0xxt"> </span></div></div> <!></div>');function xt(me,i){ea(i,!0);let D=Ga(i,"showClimbType",3,!1),p=C(!1);function T(){n(p,!e(p))}function x(c){c.stopPropagation(),i.onDelete()}const g={Flash:"‚ö°",Onsight:"üëÅÔ∏è",Redpoint:"üî¥",Dogged:"üõ†Ô∏è",DNF:"‚ùå"};var k=yt();let y;var z=t(k);z.__click=T,z.__keydown=c=>(c.key==="Enter"||c.key===" ")&&T();var I=t(z),M=t(I);let oe;var E=t(M,!0);a(M);var Z=s(M,2),O=t(Z,!0);a(Z);var K=s(Z,2);{var Q=c=>{var b=ft(),f=t(b,!0);a(b),h(()=>o(f,i.climb.isSport?"Sport":"Boulder")),r(c,b)};_(K,c=>{D()&&c(Q)})}var te=s(K,2);{var ee=c=>{var b=gt(),f=t(b);a(b),h(()=>o(f,`- ${i.climb.notes??""}`)),r(c,b)};_(te,c=>{!e(p)&&i.climb.notes&&c(ee)})}a(I);var X=s(I,2),ae=t(X);let re;var U=t(ae),ce=t(U,!0);a(U);var m=s(U,2);{var w=c=>{var b=pt(),f=t(b,!0);a(b),h(()=>o(f,i.climb.attemptsNum)),r(c,b)};_(m,c=>{i.climb.attemptType!=="Flash"&&i.climb.attemptType!=="Onsight"&&c(w)})}a(ae);var F=s(ae,2);F.__click=x;var W=s(F,2),R=t(W,!0);a(W),a(X),a(z);var ve=s(z,2);{var _e=c=>{var b=bt(),f=t(b);{var v=P=>{var H=mt(),ne=s(t(H),2),Y=t(ne,!0);a(ne),a(H),h(()=>o(Y,i.climb.notes)),r(P,H)},d=P=>{var H=ht();r(P,H)};_(f,P=>{i.climb.notes?P(v):P(d,!1)})}var q=s(f,2),A=t(q),le=t(A,!0);a(A);var pe=s(A,2),Ge=t(pe,!0);a(pe),a(q),a(b),h(()=>{o(le,i.climb.isSport?"Sport":"Boulder"),o(Ge,i.climb.attemptType)}),Ve(3,b,()=>sa,()=>({duration:150})),r(c,b)};_(ve,c=>{e(p)&&c(_e)})}a(k),h(()=>{y=Ke(k,1,"climb-entry svelte-yz0xxt",null,y,{expanded:e(p)}),Pe(z,"aria-expanded",e(p)),oe=Ke(M,1,"grade-badge svelte-yz0xxt",null,oe,{sport:i.climb.isSport}),o(E,i.climb.grade),o(O,i.climb.name||"Unnamed Route"),re=Ke(ae,1,"attempt-type svelte-yz0xxt",null,re,{flash:i.climb.attemptType==="Flash"}),o(ce,g[i.climb.attemptType]||i.climb.attemptType),o(R,e(p)?"‚ñ≤":"‚ñº")}),r(me,k),aa()}Qe(["click","keydown"]);var wt=l('<button class="backdrop svelte-12q9g58" aria-label="Close modal"></button> <div class="modal svelte-12q9g58" role="dialog" aria-modal="true"><h3 class="svelte-12q9g58"> </h3> <p class="svelte-12q9g58"> </p> <div class="input-group svelte-12q9g58"><label for="delete-confirm" class="svelte-12q9g58">Type <strong> </strong> to confirm:</label> <input type="text" id="delete-confirm" autocomplete="off" class="svelte-12q9g58"/></div> <div class="actions svelte-12q9g58"><button class="btn-cancel svelte-12q9g58">Cancel</button> <button class="btn-delete svelte-12q9g58">Delete</button></div></div>',1);function ja(me,i){ea(i,!0);let D=Ga(i,"isOpen",3,!1),p=Ga(i,"title",3,"Confirm Delete"),T=Ga(i,"message",3,"Are you sure you want to delete this item? This action cannot be undone."),x=Ga(i,"confirmKeyword",3,"delete"),g=C(""),k=_a(()=>e(g).toLowerCase()===x().toLowerCase());function y(){e(k)&&(i.onConfirm(),n(g,""))}function z(){i.onCancel(),n(g,"")}var I=Re(),M=Fe(I);{var oe=E=>{var Z=wt(),O=Fe(Z);O.__click=z;var K=s(O,2),Q=t(K),te=t(Q,!0);a(Q);var ee=s(Q,2),X=t(ee,!0);a(ee);var ae=s(ee,2),re=t(ae),U=s(t(re)),ce=t(U,!0);a(U),Da(),a(re);var m=s(re,2);Ze(m),a(ae);var w=s(ae,2),F=t(w);F.__click=z;var W=s(F,2);W.__click=y,a(w),a(K),h(()=>{o(te,p()),o(X,T()),o(ce,x()),Pe(m,"placeholder",x()),W.disabled=!e(k)}),Ve(3,O,()=>Ua,()=>({duration:200})),Je(m,()=>e(g),R=>n(g,R)),Ve(3,K,()=>Ha,()=>({duration:200,start:.9})),r(E,Z)};_(M,E=>{D()&&E(oe)})}r(me,I),aa()}Qe(["click"]);var Dt=l('<span class="stat svelte-7vqogn"> </span>'),St=l('<span class="status-icon pending svelte-7vqogn" title="Waiting to sync">üîÑ</span>'),kt=l('<span class="status-icon error svelte-7vqogn" title="Sync error">‚ö†Ô∏è</span>'),qt=l('<span class="chip svelte-7vqogn"> </span>'),Tt=l('<span class="text-none svelte-7vqogn">None</span>'),Ct=l('<div class="detail-item svelte-7vqogn"><span class="label svelte-7vqogn">Difficulty</span> <span class="value svelte-7vqogn"> </span></div>'),zt=l('<span class="chip svelte-7vqogn"> </span>'),Ft=l('<span class="text-none svelte-7vqogn">None</span>'),Lt=l('<div class="detail-item svelte-7vqogn"><span class="label svelte-7vqogn">Category</span> <div class="value-chips svelte-7vqogn"><!></div></div>'),Gt=l('<span class="chip svelte-7vqogn"> </span>'),Et=l('<span class="text-none svelte-7vqogn">None</span>'),jt=l('<div class="detail-item svelte-7vqogn"><span class="label svelte-7vqogn">Focus</span> <div class="value-chips svelte-7vqogn"><!></div></div>'),Ot=l('<span class="chip svelte-7vqogn"> </span>'),At=l('<span class="text-none svelte-7vqogn">None</span>'),Nt=l('<div class="detail-item svelte-7vqogn"><span class="label svelte-7vqogn">Energy System</span> <div class="value-chips svelte-7vqogn"><!></div></div>'),It=l('<span class="chip svelte-7vqogn"> </span>'),Mt=l('<span class="text-none svelte-7vqogn">None</span>'),Rt=l('<div class="detail-item svelte-7vqogn"><span class="label svelte-7vqogn">Wall Angle</span> <div class="value-chips svelte-7vqogn"><!></div></div>'),Pt=l('<div class="metric svelte-7vqogn"><span class="label svelte-7vqogn">Open Grip</span> <div class="bar-container svelte-7vqogn"><div class="bar-fill svelte-7vqogn"></div></div> <span class="score svelte-7vqogn"> </span></div>'),Bt=l('<div class="metric svelte-7vqogn"><span class="label svelte-7vqogn">Crimp Grip</span> <div class="bar-container svelte-7vqogn"><div class="bar-fill svelte-7vqogn"></div></div> <span class="score svelte-7vqogn"> </span></div>'),Vt=l('<div class="metric svelte-7vqogn"><span class="label svelte-7vqogn">Pinch Grip</span> <div class="bar-container svelte-7vqogn"><div class="bar-fill svelte-7vqogn"></div></div> <span class="score svelte-7vqogn"> </span></div>'),Wt=l('<div class="metric svelte-7vqogn"><span class="label svelte-7vqogn">Sloper Grip</span> <div class="bar-container svelte-7vqogn"><div class="bar-fill svelte-7vqogn"></div></div> <span class="score svelte-7vqogn"> </span></div>'),Ut=l('<div class="metric svelte-7vqogn"><span class="label svelte-7vqogn">Jug Grip</span> <div class="bar-container svelte-7vqogn"><div class="bar-fill svelte-7vqogn"></div></div> <span class="score svelte-7vqogn"> </span></div>'),Ht=l('<p class="no-climbs svelte-7vqogn">No climbs logged for this session.</p>'),Zt=l('<div class="card-body svelte-7vqogn"><div class="details-grid svelte-7vqogn"><div class="detail-item svelte-7vqogn"><span class="label svelte-7vqogn">Training Type</span> <div class="value-chips svelte-7vqogn"><!></div></div> <!> <!> <!> <!> <!></div> <div class="metrics-container svelte-7vqogn"><div class="metric svelte-7vqogn"><span class="label svelte-7vqogn">Finger Load</span> <div class="bar-container svelte-7vqogn"><div class="bar-fill svelte-7vqogn"></div></div> <span class="score svelte-7vqogn"> </span></div> <div class="metric svelte-7vqogn"><span class="label svelte-7vqogn">Shoulder Load</span> <div class="bar-container svelte-7vqogn"><div class="bar-fill svelte-7vqogn"></div></div> <span class="score svelte-7vqogn"> </span></div> <div class="metric svelte-7vqogn"><span class="label svelte-7vqogn">Forearm Load</span> <div class="bar-container svelte-7vqogn"><div class="bar-fill svelte-7vqogn"></div></div> <span class="score svelte-7vqogn"> </span></div> <!> <!> <!> <!> <!></div> <div class="climbs-list svelte-7vqogn"><h4 class="svelte-7vqogn">Climbs</h4> <div class="climbs-container svelte-7vqogn"><!> <!></div></div></div>'),Jt=l('<div><div class="card-header svelte-7vqogn" role="button" tabindex="0"><div class="header-main svelte-7vqogn"><div class="date-badge svelte-7vqogn"><span class="day svelte-7vqogn"> </span> <span class="month svelte-7vqogn"> </span></div> <div class="session-info svelte-7vqogn"><div class="session-text svelte-7vqogn"><h3 class="location svelte-7vqogn"> </h3> <div class="session-meta svelte-7vqogn"><span class="type-tag svelte-7vqogn"> </span> <span class="stat svelte-7vqogn"> </span> <!></div></div> <div class="load-summary svelte-7vqogn"><div class="load-badge finger svelte-7vqogn"> </div> <div class="load-badge shoulder svelte-7vqogn"> </div> <div class="load-badge forearm svelte-7vqogn"> </div></div></div></div> <div class="header-actions"><div class="header-status svelte-7vqogn"><!></div>  <button class="btn-icon delete-session" title="Delete Session">üóëÔ∏è</button> <span class="chevron svelte-7vqogn"> </span></div></div> <!></div> <!>',1);function Kt(me,i){ea(i,!0);let D=C(!1),p=C(!1);function T(){n(D,!e(D))}function x(){n(p,!0)}function g(){Ma(i.session.id),n(p,!1),i.onDelete()}function k(L){const B=[...i.session.climbs];B.splice(L,1),Za(i.session.id,{climbs:B}),i.onDelete()}let y=_a(()=>i.session.climbs?.length??0),z=_a(()=>(i.session.climbs||[]).reduce((L,B)=>{const ue=parseInt(B.grade.replace(/\D/g,""))||0,ke=parseInt(L.replace(/\D/g,""))||0;return ue>ke?B.grade:L},"V0"));var I=Jt(),M=Fe(I);let oe;var E=t(M);E.__click=T,E.__keydown=L=>L.key==="Enter"&&T();var Z=t(E),O=t(Z),K=t(O),Q=t(K,!0);a(K);var te=s(K,2),ee=t(te,!0);a(te),a(O);var X=s(O,2),ae=t(X),re=t(ae),U=t(re,!0);a(re);var ce=s(re,2),m=t(ce),w=t(m,!0);a(m);var F=s(m,2),W=t(F);a(F);var R=s(F,2);{var ve=L=>{var B=Dt(),ue=t(B);a(B),h(()=>o(ue,`Max: ${e(z)??""}`)),r(L,B)};_(R,L=>{e(y)>0&&L(ve)})}a(ce),a(ae);var _e=s(ae,2),c=t(_e),b=t(c,!0);a(c);var f=s(c,2),v=t(f,!0);a(f);var d=s(f,2),q=t(d,!0);a(d),a(_e),a(X),a(Z);var A=s(Z,2),le=t(A),pe=t(le);{var Ge=L=>{var B=St();r(L,B)},P=L=>{var B=Re(),ue=Fe(B);{var ke=G=>{var $=kt();r(G,$)};_(ue,G=>{i.session.syncStatus==="error"&&G(ke)},!0)}r(L,B)};_(pe,L=>{i.session.syncStatus==="pending"?L(Ge):L(P,!1)})}a(le);var H=s(le,2);H.__click=L=>{L.stopPropagation(),x()};var ne=s(H,2),Y=t(ne,!0);a(ne),a(A),a(E);var ye=s(E,2);{var Se=L=>{var B=Zt(),ue=t(B),ke=t(ue),G=s(t(ke),2),$=t(G);{var xe=V=>{var N=Re(),u=Fe(N);we(u,17,()=>i.session.trainingTypes,Le,(S,j)=>{var de=qt(),J=t(de,!0);a(de),h(()=>o(J,e(j))),r(S,de)}),r(V,N)},se=V=>{var N=Tt();r(V,N)};_($,V=>{i.session.trainingTypes&&i.session.trainingTypes.length>0&&!i.session.trainingTypes.includes("None")?V(xe):V(se,!1)})}a(G),a(ke);var ie=s(ke,2);{var fe=V=>{var N=Ct(),u=s(t(N),2),S=t(u,!0);a(u),a(N),h(()=>o(S,i.session.difficulty)),r(V,N)};_(ie,V=>{i.session.difficulty&&V(fe)})}var je=s(ie,2);{var be=V=>{var N=Lt(),u=s(t(N),2),S=t(u);{var j=J=>{var ge=Re(),De=Fe(ge);we(De,17,()=>i.session.categories,Le,(Oe,na)=>{var Ne=zt(),oa=t(Ne,!0);a(Ne),h(()=>o(oa,e(na))),r(Oe,Ne)}),r(J,ge)},de=J=>{var ge=Ft();r(J,ge)};_(S,J=>{i.session.categories.length>0&&!i.session.categories.includes("None")?J(j):J(de,!1)})}a(u),a(N),r(V,N)};_(je,V=>{i.session.categories?.length&&V(be)})}var Te=s(je,2);{var qe=V=>{var N=jt(),u=s(t(N),2),S=t(u);{var j=J=>{var ge=Re(),De=Fe(ge);we(De,17,()=>i.session.techniqueFocuses,Le,(Oe,na)=>{var Ne=Gt(),oa=t(Ne,!0);a(Ne),h(()=>o(oa,e(na))),r(Oe,Ne)}),r(J,ge)},de=J=>{var ge=Et();r(J,ge)};_(S,J=>{i.session.techniqueFocuses.length>0&&!i.session.techniqueFocuses.includes("None")?J(j):J(de,!1)})}a(u),a(N),r(V,N)};_(Te,V=>{i.session.techniqueFocuses?.length&&V(qe)})}var Ee=s(Te,2);{var ze=V=>{var N=Nt(),u=s(t(N),2),S=t(u);{var j=J=>{var ge=Re(),De=Fe(ge);we(De,17,()=>i.session.energySystems,Le,(Oe,na)=>{var Ne=Ot(),oa=t(Ne,!0);a(Ne),h(()=>o(oa,e(na))),r(Oe,Ne)}),r(J,ge)},de=J=>{var ge=At();r(J,ge)};_(S,J=>{i.session.energySystems.length>0&&!i.session.energySystems.includes("None")?J(j):J(de,!1)})}a(u),a(N),r(V,N)};_(Ee,V=>{i.session.energySystems?.length&&V(ze)})}var he=s(Ee,2);{var Ae=V=>{var N=Rt(),u=s(t(N),2),S=t(u);{var j=J=>{var ge=Re(),De=Fe(ge);we(De,17,()=>i.session.wallAngles,Le,(Oe,na)=>{var Ne=It(),oa=t(Ne,!0);a(Ne),h(()=>o(oa,e(na))),r(Oe,Ne)}),r(J,ge)},de=J=>{var ge=Mt();r(J,ge)};_(S,J=>{i.session.wallAngles.length>0&&!i.session.wallAngles.includes("None")?J(j):J(de,!1)})}a(u),a(N),r(V,N)};_(he,V=>{i.session.wallAngles?.length&&V(Ae)})}a(ue);var We=s(ue,2),Ie=t(We),Xe=s(t(Ie),2),Me=t(Xe);a(Xe);var Be=s(Xe,2),pa=t(Be);a(Be),a(Ie);var Ue=s(Ie,2),ua=s(t(Ue),2),ia=t(ua);a(ua);var ca=s(ua,2),Sa=t(ca);a(ca),a(Ue);var ta=s(Ue,2),Ye=s(t(ta),2),ra=t(Ye);a(Ye);var fa=s(Ye,2),la=t(fa);a(fa),a(ta);var va=s(ta,2);{var ka=V=>{var N=Pt(),u=s(t(N),2),S=t(u);a(u);var j=s(u,2),de=t(j);a(j),a(N),h(()=>{He(S,`width: ${i.session.openGrip/5*100}%`),o(de,`${i.session.openGrip??""}/5`)}),r(V,N)};_(va,V=>{i.session.openGrip&&V(ka)})}var $e=s(va,2);{var Ca=V=>{var N=Bt(),u=s(t(N),2),S=t(u);a(u);var j=s(u,2),de=t(j);a(j),a(N),h(()=>{He(S,`width: ${i.session.crimpGrip/5*100}%`),o(de,`${i.session.crimpGrip??""}/5`)}),r(V,N)};_($e,V=>{i.session.crimpGrip&&V(Ca)})}var ma=s($e,2);{var qa=V=>{var N=Vt(),u=s(t(N),2),S=t(u);a(u);var j=s(u,2),de=t(j);a(j),a(N),h(()=>{He(S,`width: ${i.session.pinchGrip/5*100}%`),o(de,`${i.session.pinchGrip??""}/5`)}),r(V,N)};_(ma,V=>{i.session.pinchGrip&&V(qa)})}var ha=s(ma,2);{var Oa=V=>{var N=Wt(),u=s(t(N),2),S=t(u);a(u);var j=s(u,2),de=t(j);a(j),a(N),h(()=>{He(S,`width: ${i.session.sloperGrip/5*100}%`),o(de,`${i.session.sloperGrip??""}/5`)}),r(V,N)};_(ha,V=>{i.session.sloperGrip&&V(Oa)})}var za=s(ha,2);{var Aa=V=>{var N=Ut(),u=s(t(N),2),S=t(u);a(u);var j=s(u,2),de=t(j);a(j),a(N),h(()=>{He(S,`width: ${i.session.jugGrip/5*100}%`),o(de,`${i.session.jugGrip??""}/5`)}),r(V,N)};_(za,V=>{i.session.jugGrip&&V(Aa)})}a(We);var Ta=s(We,2),ya=s(t(Ta),2),xa=t(ya);we(xa,17,()=>i.session.climbs||[],Le,(V,N,u)=>{{let S=_a(()=>i.session.climbingType==="Mixed");xt(V,{get climb(){return e(N)},onDelete:()=>k(u),get showClimbType(){return e(S)}})}});var Fa=s(xa,2);{var La=V=>{var N=Ht();r(V,N)};_(Fa,V=>{(i.session.climbs||[]).length===0&&V(La)})}a(ya),a(Ta),a(B),h(()=>{He(Me,`width: ${i.session.fingerLoad/5*100}%`),o(pa,`${i.session.fingerLoad??""}/5`),He(ia,`width: ${i.session.shoulderLoad/5*100}%`),o(Sa,`${i.session.shoulderLoad??""}/5`),He(ra,`width: ${i.session.forearmLoad/5*100}%`),o(la,`${i.session.forearmLoad??""}/5`)}),Ve(3,B,()=>sa,()=>({duration:150})),r(L,B)};_(ye,L=>{e(D)&&L(Se)})}a(M);var Ce=s(M,2);ja(Ce,{get isOpen(){return e(p)},title:"Delete Session",message:"Are you sure you want to delete this session and all its climbs? This cannot be undone.",onConfirm:g,onCancel:()=>n(p,!1)}),h((L,B)=>{oe=Ke(M,1,"session-card svelte-7vqogn",null,oe,{expanded:e(D)}),Pe(E,"aria-expanded",e(D)),o(Q,L),o(ee,B),o(U,i.session.location),o(w,i.session.climbingType),o(W,`${e(y)??""} climbs`),Pe(c,"title",`Finger Load: ${i.session.fingerLoad??""}`),o(b,i.session.fingerLoad),Pe(f,"title",`Shoulder Load: ${i.session.shoulderLoad??""}`),o(v,i.session.shoulderLoad),Pe(d,"title",`Forearm Load: ${i.session.forearmLoad??""}`),o(q,i.session.forearmLoad),o(Y,e(D)?"‚ñ≤":"‚ñº")},[()=>new Date(i.session.date).getDate(),()=>new Date(i.session.date).toLocaleDateString("en-GB",{month:"short"})]),r(me,I),aa()}Qe(["click","keydown"]);var Qt=l('<div class="legend-item svelte-11p9lqi"><span class="l-icon svelte-11p9lqi"> </span> <span class="l-label svelte-11p9lqi"> </span></div>'),Xt=l('<div class="legend-content svelte-11p9lqi"><div class="legend-grid svelte-11p9lqi"></div></div>'),Yt=l('<div class="legend-container svelte-11p9lqi"><button class="legend-toggle svelte-11p9lqi"><span class="icon">‚ÑπÔ∏è</span> <span class="text">Icon Legend</span> <span class="chevron svelte-11p9lqi"> </span></button> <!></div>');function Ja(me){let i=C(!1);const D=[{icon:"üëÅÔ∏è",label:"Onsight"},{icon:"‚ö°",label:"Flash"},{icon:"üî¥",label:"Redpoint"},{icon:"üõ†Ô∏è",label:"Dogged"},{icon:"‚ùå",label:"DNF"}];var p=Yt(),T=t(p);T.__click=()=>n(i,!e(i));var x=s(t(T),4),g=t(x,!0);a(x),a(T);var k=s(T,2);{var y=z=>{var I=Xt(),M=t(I);we(M,21,()=>D,Le,(oe,E)=>{var Z=Qt(),O=t(Z),K=t(O,!0);a(O);var Q=s(O,2),te=t(Q,!0);a(Q),a(Z),h(()=>{o(K,e(E).icon),o(te,e(E).label)}),r(oe,Z)}),a(M),a(I),Ve(3,I,()=>sa),r(z,I)};_(k,z=>{e(i)&&z(y)})}a(p),h(()=>{Pe(T,"aria-expanded",e(i)),o(g,e(i)?"‚ñº":"‚ñ∂")}),r(me,p)}Qe(["click"]);function Wa(me,i){if(!me||me.length===0){alert("No data to export");return}const D=Array.from(new Set(me.flatMap(Object.keys))),p=[D.join(","),...me.map(g=>D.map(k=>{let y=g[k];if(y==null)return"";if(typeof y=="object"){if(y instanceof Date)return y.toISOString();y=JSON.stringify(y).replace(/"/g,'""')}else typeof y=="string"&&(y=y.replace(/"/g,'""'));return typeof y=="string"&&(y.includes(",")||y.includes('"')||y.includes(`
`))?`"${y}"`:y}).join(","))].join(`
`),T=new Blob([p],{type:"text/csv;charset=utf-8;"}),x=document.createElement("a");if(x.download!==void 0){const g=URL.createObjectURL(T);x.setAttribute("href",g),x.setAttribute("download",i.endsWith(".csv")?i:`${i}.csv`),x.style.visibility="hidden",document.body.appendChild(x),x.click(),document.body.removeChild(x)}}var $t=l('<span class="spinner svelte-14fqz8w"></span> Fetching...',1),es=l('<div class="error-banner svelte-14fqz8w"> </div>'),as=l('<small class="svelte-14fqz8w">Try adjusting your filters.</small>'),ts=l('<div class="empty-state svelte-14fqz8w"><p class="svelte-14fqz8w">No indoor climbing sessions found.</p> <!></div>'),ss=l('<div class="load-more-container svelte-14fqz8w"><button class="load-more-btn svelte-14fqz8w"> </button></div>'),is=l('<div class="view-container svelte-14fqz8w"><div class="view-header svelte-14fqz8w"><h2 class="view-title svelte-14fqz8w">üßó Indoor Climbing History</h2> <div class="header-actions svelte-14fqz8w"><button class="action-btn secondary svelte-14fqz8w" title="Export filtered data to CSV">üì• Export</button> <button class="action-btn svelte-14fqz8w" title="Fetch data from cloud"><!></button></div></div> <!> <!> <div class="info-bar svelte-14fqz8w"><div class="legend-wrapper svelte-14fqz8w"><!></div> <div class="load-key svelte-14fqz8w"><span class="key-label svelte-14fqz8w">Load:</span> <div class="key-item svelte-14fqz8w"><span class="dot finger svelte-14fqz8w"></span> Finger</div> <div class="key-item svelte-14fqz8w"><span class="dot shoulder svelte-14fqz8w"></span> Shoulder</div> <div class="key-item svelte-14fqz8w"><span class="dot forearm svelte-14fqz8w"></span> Forearm</div></div></div> <div class="sessions-list"><!> <!> <!></div></div>');function rs(me,i){ea(i,!0);let D=C(da([])),p=C(da([])),T=C(!1),x=C(""),g=C(da({startDate:"",endDate:"",location:"",climbingType:"",sessionType:"",grade:""})),k=C(20);const y=20;Va(()=>{z()});function z(){const v=Ea("indoor_climb");n(D,v.sort((d,q)=>new Date(q.date).getTime()-new Date(d.date).getTime()),!0),E()}async function I(){n(T,!0),n(x,"");try{await Ia();const v=await Qa();v.ok&&v.data?M(v.data):n(x,v.error||"Failed to fetch data",!0)}catch(v){n(x,v instanceof Error?v.message:"Unknown error",!0)}finally{n(T,!1)}}function M(v){const d=v.map(A=>({...A,activityType:"indoor_climb",createdAt:new Date().toISOString(),updatedAt:new Date().toISOString(),syncStatus:"synced",syncedAt:new Date().toISOString(),openGrip:0,crimpGrip:0,pinchGrip:0,sloperGrip:0,jugGrip:0}));Ra(d);const q=Ea("indoor_climb");n(D,q.sort((A,le)=>new Date(le.date).getTime()-new Date(A.date).getTime()),!0),E()}function oe(v){n(g,v,!0),E()}function E(){n(k,y),n(p,e(D).filter(v=>{if(e(g).startDate&&v.date<e(g).startDate||e(g).endDate&&v.date>e(g).endDate||e(g).location&&v.location!==e(g).location)return!1;if(e(g).climbingType&&(v.climbingType==="Leading"?"Sport":v.climbingType)!==e(g).climbingType)if(v.climbingType==="Mixed")if(e(g).climbingType==="Bouldering"){if(!v.climbs.some(q=>!q.isSport))return!1}else if(e(g).climbingType==="Sport"){if(!v.climbs.some(q=>q.isSport))return!1}else return!1;else return!1;if(e(g).sessionType&&!v.trainingTypes?.includes(e(g).sessionType))return!1;if(e(g).grade){const d=e(g).grade.trim().toLowerCase();if(!v.climbs.some(A=>A.grade.trim().toLowerCase()===d))return!1}return!0}),!0)}function Z(){n(k,e(k)+y)}var O=is(),K=t(O),Q=s(t(K),2),te=t(Q);te.__click=()=>Wa(e(p),"indoor_climbs");var ee=s(te,2);ee.__click=I;var X=t(ee);{var ae=v=>{var d=$t();Da(),r(v,d)},re=v=>{var d=ba("‚òÅÔ∏è Fetch Data");r(v,d)};_(X,v=>{e(T)?v(ae):v(re,!1)})}a(ee),a(Q),a(K);var U=s(K,2);{var ce=v=>{var d=es(),q=t(d,!0);a(d),h(()=>o(q,e(x))),Ve(3,d,()=>sa),r(v,d)};_(U,v=>{e(x)&&v(ce)})}var m=s(U,2);ut(m,{onFilterParamsChange:oe});var w=s(m,2),F=t(w),W=t(F);Ja(W),a(F),Da(2),a(w);var R=s(w,2),ve=t(R);we(ve,17,()=>e(p).slice(0,e(k)),v=>v.id,(v,d)=>{Kt(v,{get session(){return e(d)},onDelete:z})});var _e=s(ve,2);{var c=v=>{var d=ts(),q=s(t(d),2);{var A=le=>{var pe=as();r(le,pe)};_(q,le=>{e(D).length>0&&le(A)})}a(d),r(v,d)};_(_e,v=>{e(p).length===0&&v(c)})}var b=s(_e,2);{var f=v=>{var d=ss(),q=t(d);q.__click=Z;var A=t(q);a(q),a(d),h(()=>o(A,`Load More (${e(p).length-e(k)} remaining)`)),r(v,d)};_(b,v=>{e(k)<e(p).length&&v(f)})}a(R),a(O),h(()=>ee.disabled=e(T)),r(me,O),aa()}Qe(["click"]);var ls=l('<span class="chevron svelte-1frtlim">‚ñ≤</span>'),vs=l('<span class="chevron svelte-1frtlim">‚ñº</span>'),ns=l('<div class="input-with-action svelte-1frtlim"><input type="text" id="area-filter-text" placeholder="Type area name..." class="flat-left svelte-1frtlim"/> <button class="action-btn flat-right svelte-1frtlim" title="Back to list">‚úï</button></div>'),os=l("<option> </option>"),ds=l('<select id="area-filter" class="svelte-1frtlim"><option>All Areas</option><!><option>Other (Manual Entry)</option></select>'),cs=l('<div class="input-with-action svelte-1frtlim"><input type="text" id="crag-filter-text" placeholder="Type crag name..." class="flat-left svelte-1frtlim"/> <button class="action-btn flat-right svelte-1frtlim" title="Back to list">‚úï</button></div>'),_s=l("<option> </option>"),us=l('<select id="crag-filter" class="svelte-1frtlim"><option>All Crags</option><!><option>Other (Manual Entry)</option></select>'),fs=l('<input type="text" id="crag-filter-text" class="svelte-1frtlim"/>'),gs=l("<option> </option>"),ps=l("<option> </option>"),ms=l('<div class="filter-body svelte-1frtlim"><div class="filter-grid svelte-1frtlim"><div class="filter-item svelte-1frtlim"><label for="start-date" class="svelte-1frtlim">Start Date</label> <input type="date" id="start-date" class="svelte-1frtlim"/></div> <div class="filter-item svelte-1frtlim"><label for="end-date" class="svelte-1frtlim">End Date</label> <input type="date" id="end-date" class="svelte-1frtlim"/></div> <div class="filter-item svelte-1frtlim"><label for="area-filter" class="svelte-1frtlim">Area</label> <!></div> <div class="filter-item svelte-1frtlim"><label for="crag-filter" class="svelte-1frtlim">Crag</label> <!></div> <div class="filter-item svelte-1frtlim"><label for="climbing-type-filter" class="svelte-1frtlim">Climb Type</label> <select id="climbing-type-filter" class="svelte-1frtlim"><option>Any Type</option><!></select></div> <div class="filter-item svelte-1frtlim"><label for="session-type-filter" class="svelte-1frtlim">Session Type</label> <select id="session-type-filter" class="svelte-1frtlim"><option>Any Type</option><!></select></div> <div class="filter-item svelte-1frtlim"><label for="grade-filter" class="svelte-1frtlim">Grade (Exact)</label> <input type="text" id="grade-filter" placeholder="e.g. 7a" class="svelte-1frtlim"/></div></div> <div class="filter-actions svelte-1frtlim"><button class="reset-btn svelte-1frtlim">Reset Filters</button></div></div>'),hs=l('<div class="filter-container svelte-1frtlim"><button class="filter-header svelte-1frtlim"><div class="header-content svelte-1frtlim"><span class="icon svelte-1frtlim">üîç</span> <span class="title svelte-1frtlim">Filters</span> <!></div></button> <!></div>');function bs(me,i){ea(i,!0);const D=Xa(),p=["Bouldering","Sport","Mixed","Trad"],T=["Projecting","Onsighting","Campusing","Repeaters","Fun","Volume"];let x=C(!1),g=C(""),k=C(""),y=C(""),z=C(""),I=C(""),M=C(""),oe=C(""),E=C(!1),Z=C(!1),O=_a(()=>e(y)&&e(y)!=="Other"?Ya(e(y)):[]);function K(){e(y)==="Other"?(n(E,!0),n(y,"")):n(E,!1),n(z,""),n(Z,!1),X()}function Q(){e(z)==="Other"?(n(Z,!0),n(z,"")):n(Z,!1),X()}function te(){n(x,!e(x))}function ee(){n(g,""),n(k,""),n(y,""),n(z,""),n(I,""),n(M,""),n(oe,""),n(E,!1),n(Z,!1),X()}function X(){i.onFilterParamsChange({startDate:e(g),endDate:e(k),area:e(y),crag:e(z),climbingType:e(I),sessionType:e(M),grade:e(oe)})}var ae=hs(),re=t(ae);re.__click=te;var U=t(re),ce=s(t(U),4);{var m=R=>{var ve=ls();r(R,ve)},w=R=>{var ve=vs();r(R,ve)};_(ce,R=>{e(x)?R(m):R(w,!1)})}a(U),a(re);var F=s(re,2);{var W=R=>{var ve=ms(),_e=t(ve),c=t(_e),b=s(t(c),2);Ze(b),b.__change=X,a(c);var f=s(c,2),v=s(t(f),2);Ze(v),v.__change=X,a(f);var d=s(f,2),q=s(t(d),2);{var A=se=>{var ie=ns(),fe=t(ie);Ze(fe),fe.__input=X;var je=s(fe,2);je.__click=()=>{n(E,!1),n(y,""),X()},a(ie),Je(fe,()=>e(y),be=>n(y,be)),r(se,ie)},le=se=>{var ie=ds();ie.__change=K;var fe=t(ie);fe.value=fe.__value="";var je=s(fe);we(je,17,()=>D,Le,(Te,qe)=>{var Ee=os(),ze=t(Ee,!0);a(Ee);var he={};h(()=>{o(ze,e(qe)),he!==(he=e(qe))&&(Ee.value=(Ee.__value=e(qe))??"")}),r(Te,Ee)});var be=s(je);be.value=be.__value="Other",a(ie),wa(ie,()=>e(y),Te=>n(y,Te)),r(se,ie)};_(q,se=>{e(E)?se(A):se(le,!1)})}a(d);var pe=s(d,2),Ge=s(t(pe),2);{var P=se=>{var ie=cs(),fe=t(ie);Ze(fe),fe.__input=X;var je=s(fe,2);je.__click=()=>{n(Z,!1),n(z,""),X()},a(ie),Je(fe,()=>e(z),be=>n(z,be)),r(se,ie)},H=se=>{var ie=Re(),fe=Fe(ie);{var je=Te=>{var qe=us();qe.__change=Q;var Ee=t(qe);Ee.value=Ee.__value="";var ze=s(Ee);we(ze,17,()=>e(O),Le,(Ae,We)=>{var Ie=_s(),Xe=t(Ie,!0);a(Ie);var Me={};h(()=>{o(Xe,e(We)),Me!==(Me=e(We))&&(Ie.value=(Ie.__value=e(We))??"")}),r(Ae,Ie)});var he=s(ze);he.value=he.__value="Other",a(qe),wa(qe,()=>e(z),Ae=>n(z,Ae)),r(Te,qe)},be=Te=>{var qe=fs();Ze(qe),qe.__input=X,h(()=>{Pe(qe,"placeholder",e(y)?"Filter crag...":"Select area first"),qe.disabled=!e(E)&&!e(y)}),Je(qe,()=>e(z),Ee=>n(z,Ee)),r(Te,qe)};_(fe,Te=>{!e(E)&&e(y)&&e(O).length>0?Te(je):Te(be,!1)},!0)}r(se,ie)};_(Ge,se=>{e(Z)?se(P):se(H,!1)})}a(pe);var ne=s(pe,2),Y=s(t(ne),2);Y.__change=X;var ye=t(Y);ye.value=ye.__value="";var Se=s(ye);we(Se,17,()=>p,Le,(se,ie)=>{var fe=gs(),je=t(fe,!0);a(fe);var be={};h(()=>{o(je,e(ie)),be!==(be=e(ie))&&(fe.value=(fe.__value=e(ie))??"")}),r(se,fe)}),a(Y),a(ne);var Ce=s(ne,2),L=s(t(Ce),2);L.__change=X;var B=t(L);B.value=B.__value="";var ue=s(B);we(ue,17,()=>T,Le,(se,ie)=>{var fe=ps(),je=t(fe,!0);a(fe);var be={};h(()=>{o(je,e(ie)),be!==(be=e(ie))&&(fe.value=(fe.__value=e(ie))??"")}),r(se,fe)}),a(L),a(Ce);var ke=s(Ce,2),G=s(t(ke),2);Ze(G),G.__input=X,a(ke),a(_e);var $=s(_e,2),xe=t($);xe.__click=ee,a($),a(ve),Je(b,()=>e(g),se=>n(g,se)),Je(v,()=>e(k),se=>n(k,se)),wa(Y,()=>e(I),se=>n(I,se)),wa(L,()=>e(M),se=>n(M,se)),Je(G,()=>e(oe),se=>n(oe,se)),Ve(3,ve,()=>sa,()=>({duration:200})),r(R,ve)};_(F,R=>{e(x)&&R(W)})}a(ae),h(()=>Pe(re,"aria-expanded",e(x))),r(me,ae),aa()}Qe(["click","change","input"]);var ys=l('<span class="climb-type-tag svelte-1k6anfh"> </span>'),xs=l('<span class="notes-preview svelte-1k6anfh"> </span>'),ws=l('<span class="attempts-count svelte-1k6anfh"> </span>'),Ds=l('<div class="detail-row svelte-1k6anfh"><span class="label svelte-1k6anfh">Notes:</span> <p class="notes svelte-1k6anfh"> </p></div>'),Ss=l('<p class="empty-notes svelte-1k6anfh">No notes for this climb.</p>'),ks=l('<div class="climb-details svelte-1k6anfh"><!> <div class="tags svelte-1k6anfh"><span class="tag type svelte-1k6anfh"> </span> <span class="tag attempt-text svelte-1k6anfh"> </span></div></div>'),qs=l('<div><div class="climb-header svelte-1k6anfh" role="button" tabindex="0"><div class="climb-main-info svelte-1k6anfh"><span> </span> <span class="climb-name svelte-1k6anfh"> </span> <!> <!></div> <div class="climb-meta svelte-1k6anfh"><span><span class="icon svelte-1k6anfh"> </span> <!></span> <button class="delete-btn svelte-1k6anfh" aria-label="Delete climb" title="Delete climb">üóëÔ∏è</button> <span class="chevron svelte-1k6anfh"> </span></div></div> <!></div>');function Ts(me,i){ea(i,!0);let D=Ga(i,"showClimbType",3,!1),p=C(!1);function T(){n(p,!e(p))}function x(c){c.stopPropagation(),i.onDelete()}const g={Flash:"‚ö°",Onsight:"üëÅÔ∏è",Redpoint:"üî¥",Dogged:"üõ†Ô∏è",DNF:"‚ùå"};var k=qs();let y;var z=t(k);z.__click=T,z.__keydown=c=>(c.key==="Enter"||c.key===" ")&&T();var I=t(z),M=t(I);let oe;var E=t(M,!0);a(M);var Z=s(M,2),O=t(Z,!0);a(Z);var K=s(Z,2);{var Q=c=>{var b=ys(),f=t(b,!0);a(b),h(()=>o(f,i.climb.isSport?"Sport":"Boulder")),r(c,b)};_(K,c=>{D()&&c(Q)})}var te=s(K,2);{var ee=c=>{var b=xs(),f=t(b);a(b),h(()=>o(f,`- ${i.climb.notes??""}`)),r(c,b)};_(te,c=>{!e(p)&&i.climb.notes&&c(ee)})}a(I);var X=s(I,2),ae=t(X);let re;var U=t(ae),ce=t(U,!0);a(U);var m=s(U,2);{var w=c=>{var b=ws(),f=t(b,!0);a(b),h(()=>o(f,i.climb.attemptsNum)),r(c,b)};_(m,c=>{i.climb.attemptType!=="Flash"&&i.climb.attemptType!=="Onsight"&&c(w)})}a(ae);var F=s(ae,2);F.__click=x;var W=s(F,2),R=t(W,!0);a(W),a(X),a(z);var ve=s(z,2);{var _e=c=>{var b=ks(),f=t(b);{var v=P=>{var H=Ds(),ne=s(t(H),2),Y=t(ne,!0);a(ne),a(H),h(()=>o(Y,i.climb.notes)),r(P,H)},d=P=>{var H=Ss();r(P,H)};_(f,P=>{i.climb.notes?P(v):P(d,!1)})}var q=s(f,2),A=t(q),le=t(A,!0);a(A);var pe=s(A,2),Ge=t(pe,!0);a(pe),a(q),a(b),h(()=>{o(le,i.climb.isSport?"Sport":"Boulder"),o(Ge,i.climb.attemptType)}),Ve(3,b,()=>sa,()=>({duration:150})),r(c,b)};_(ve,c=>{e(p)&&c(_e)})}a(k),h(()=>{y=Ke(k,1,"climb-entry svelte-1k6anfh",null,y,{expanded:e(p)}),Pe(z,"aria-expanded",e(p)),oe=Ke(M,1,"grade-badge svelte-1k6anfh",null,oe,{sport:i.climb.isSport}),o(E,i.climb.grade),o(O,i.climb.name||"Unnamed Route"),re=Ke(ae,1,"attempt-type svelte-1k6anfh",null,re,{flash:i.climb.attemptType==="Flash"}),o(ce,g[i.climb.attemptType]||i.climb.attemptType),o(R,e(p)?"‚ñ≤":"‚ñº")}),r(me,k),aa()}Qe(["click","keydown"]);var Cs=l('<div class="sector-meta svelte-d5hg2r"> </div>'),zs=l('<span class="stat svelte-d5hg2r"> </span>'),Fs=l('<span class="status-icon pending svelte-d5hg2r" title="Waiting to sync">üîÑ</span>'),Ls=l('<span class="status-icon error svelte-d5hg2r" title="Sync error">‚ö†Ô∏è</span>'),Gs=l('<span class="chip svelte-d5hg2r"> </span>'),Es=l('<span class="text-none svelte-d5hg2r">None</span>'),js=l('<div class="detail-item svelte-d5hg2r"><span class="label svelte-d5hg2r">Difficulty</span> <span class="value svelte-d5hg2r"> </span></div>'),Os=l('<span class="chip svelte-d5hg2r"> </span>'),As=l('<span class="text-none svelte-d5hg2r">None</span>'),Ns=l('<div class="detail-item svelte-d5hg2r"><span class="label svelte-d5hg2r">Category</span> <div class="value-chips svelte-d5hg2r"><!></div></div>'),Is=l('<span class="chip svelte-d5hg2r"> </span>'),Ms=l('<span class="text-none svelte-d5hg2r">None</span>'),Rs=l('<div class="detail-item svelte-d5hg2r"><span class="label svelte-d5hg2r">Focus</span> <div class="value-chips svelte-d5hg2r"><!></div></div>'),Ps=l('<span class="chip svelte-d5hg2r"> </span>'),Bs=l('<span class="text-none svelte-d5hg2r">None</span>'),Vs=l('<div class="detail-item svelte-d5hg2r"><span class="label svelte-d5hg2r">Energy System</span> <div class="value-chips svelte-d5hg2r"><!></div></div>'),Ws=l('<div class="metric svelte-d5hg2r"><span class="label svelte-d5hg2r">Open Grip</span> <div class="bar-container svelte-d5hg2r"><div class="bar-fill svelte-d5hg2r"></div></div> <span class="score svelte-d5hg2r"> </span></div>'),Us=l('<div class="metric svelte-d5hg2r"><span class="label svelte-d5hg2r">Crimp Grip</span> <div class="bar-container svelte-d5hg2r"><div class="bar-fill svelte-d5hg2r"></div></div> <span class="score svelte-d5hg2r"> </span></div>'),Hs=l('<div class="metric svelte-d5hg2r"><span class="label svelte-d5hg2r">Pinch Grip</span> <div class="bar-container svelte-d5hg2r"><div class="bar-fill svelte-d5hg2r"></div></div> <span class="score svelte-d5hg2r"> </span></div>'),Zs=l('<div class="metric svelte-d5hg2r"><span class="label svelte-d5hg2r">Sloper Grip</span> <div class="bar-container svelte-d5hg2r"><div class="bar-fill svelte-d5hg2r"></div></div> <span class="score svelte-d5hg2r"> </span></div>'),Js=l('<div class="metric svelte-d5hg2r"><span class="label svelte-d5hg2r">Jug Grip</span> <div class="bar-container svelte-d5hg2r"><div class="bar-fill svelte-d5hg2r"></div></div> <span class="score svelte-d5hg2r"> </span></div>'),Ks=l('<p class="no-climbs svelte-d5hg2r">No climbs logged for this session.</p>'),Qs=l('<div class="card-body svelte-d5hg2r"><div class="details-grid svelte-d5hg2r"><div class="detail-item svelte-d5hg2r"><span class="label svelte-d5hg2r">Training Type</span> <div class="value-chips svelte-d5hg2r"><!></div></div> <!> <!> <!> <!></div> <div class="metrics-container svelte-d5hg2r"><div class="metric svelte-d5hg2r"><span class="label svelte-d5hg2r">Finger Load</span> <div class="bar-container svelte-d5hg2r"><div class="bar-fill svelte-d5hg2r"></div></div> <span class="score svelte-d5hg2r"> </span></div> <div class="metric svelte-d5hg2r"><span class="label svelte-d5hg2r">Shoulder Load</span> <div class="bar-container svelte-d5hg2r"><div class="bar-fill svelte-d5hg2r"></div></div> <span class="score svelte-d5hg2r"> </span></div> <div class="metric svelte-d5hg2r"><span class="label svelte-d5hg2r">Forearm Load</span> <div class="bar-container svelte-d5hg2r"><div class="bar-fill svelte-d5hg2r"></div></div> <span class="score svelte-d5hg2r"> </span></div> <!> <!> <!> <!> <!></div> <div class="climbs-list svelte-d5hg2r"><h4 class="svelte-d5hg2r">Climbs</h4> <div class="climbs-container svelte-d5hg2r"><!> <!></div></div></div>'),Xs=l('<div><div class="card-header svelte-d5hg2r" role="button" tabindex="0"><div class="header-main svelte-d5hg2r"><div class="date-badge svelte-d5hg2r"><span class="day svelte-d5hg2r"> </span> <span class="month svelte-d5hg2r"> </span></div> <div class="session-info svelte-d5hg2r"><div class="session-text svelte-d5hg2r"><h3 class="location svelte-d5hg2r"> <!></h3> <!> <div class="session-meta svelte-d5hg2r"><span class="type-tag svelte-d5hg2r"> </span> <span class="stat svelte-d5hg2r"> </span> <!></div></div> <div class="load-summary svelte-d5hg2r"><div class="load-badge finger svelte-d5hg2r"> </div> <div class="load-badge shoulder svelte-d5hg2r"> </div> <div class="load-badge forearm svelte-d5hg2r"> </div></div></div></div> <div class="header-actions svelte-d5hg2r"><div class="header-status svelte-d5hg2r"><!></div> <button class="btn-icon delete-session svelte-d5hg2r" title="Delete Session">üóëÔ∏è</button> <span class="chevron svelte-d5hg2r"> </span></div></div> <!></div> <!>',1);function Ys(me,i){ea(i,!0);let D=C(!1),p=C(!1);function T(){n(D,!e(D))}function x(){n(p,!0)}function g(){Ma(i.session.id),n(p,!1),i.onDelete()}function k(G){const $=[...i.session.climbs];$.splice(G,1),Za(i.session.id,{climbs:$}),i.onDelete()}let y=_a(()=>i.session.climbs?.length??0),z=_a(()=>(i.session.climbs||[]).reduce((G,$)=>{const xe=parseInt($.grade.replace(/\D/g,""))||0,se=parseInt(G.replace(/\D/g,""))||0;return xe>se?$.grade:G},"V0/4a"));var I=Xs(),M=Fe(I);let oe;var E=t(M);E.__click=T,E.__keydown=G=>G.key==="Enter"&&T();var Z=t(E),O=t(Z),K=t(O),Q=t(K,!0);a(K);var te=s(K,2),ee=t(te,!0);a(te),a(O);var X=s(O,2),ae=t(X),re=t(ae),U=t(re),ce=s(U);{var m=G=>{var $=ba();h(()=>o($,`- ${i.session.crag??""}`)),r(G,$)};_(ce,G=>{i.session.crag&&G(m)})}a(re);var w=s(re,2);{var F=G=>{var $=Cs(),xe=t($);a($),h(()=>o(xe,`üìç ${i.session.sector??""}`)),r(G,$)};_(w,G=>{i.session.sector&&G(F)})}var W=s(w,2),R=t(W),ve=t(R,!0);a(R);var _e=s(R,2),c=t(_e);a(_e);var b=s(_e,2);{var f=G=>{var $=zs(),xe=t($);a($),h(()=>o(xe,`Max: ${e(z)??""}`)),r(G,$)};_(b,G=>{e(y)>0&&G(f)})}a(W),a(ae);var v=s(ae,2),d=t(v),q=t(d,!0);a(d);var A=s(d,2),le=t(A,!0);a(A);var pe=s(A,2),Ge=t(pe,!0);a(pe),a(v),a(X),a(Z);var P=s(Z,2),H=t(P),ne=t(H);{var Y=G=>{var $=Fs();r(G,$)},ye=G=>{var $=Re(),xe=Fe($);{var se=ie=>{var fe=Ls();r(ie,fe)};_(xe,ie=>{i.session.syncStatus==="error"&&ie(se)},!0)}r(G,$)};_(ne,G=>{i.session.syncStatus==="pending"?G(Y):G(ye,!1)})}a(H);var Se=s(H,2);Se.__click=G=>{G.stopPropagation(),x()};var Ce=s(Se,2),L=t(Ce,!0);a(Ce),a(P),a(E);var B=s(E,2);{var ue=G=>{var $=Qs(),xe=t($),se=t(xe),ie=s(t(se),2),fe=t(ie);{var je=u=>{var S=Re(),j=Fe(S);we(j,17,()=>i.session.trainingTypes,Le,(de,J)=>{var ge=Gs(),De=t(ge,!0);a(ge),h(()=>o(De,e(J))),r(de,ge)}),r(u,S)},be=u=>{var S=Es();r(u,S)};_(fe,u=>{i.session.trainingTypes&&i.session.trainingTypes.length>0&&!i.session.trainingTypes.includes("None")?u(je):u(be,!1)})}a(ie),a(se);var Te=s(se,2);{var qe=u=>{var S=js(),j=s(t(S),2),de=t(j,!0);a(j),a(S),h(()=>o(de,i.session.difficulty)),r(u,S)};_(Te,u=>{i.session.difficulty&&u(qe)})}var Ee=s(Te,2);{var ze=u=>{var S=Ns(),j=s(t(S),2),de=t(j);{var J=De=>{var Oe=Re(),na=Fe(Oe);we(na,17,()=>i.session.categories,Le,(Ne,oa)=>{var ga=Os(),Na=t(ga,!0);a(ga),h(()=>o(Na,e(oa))),r(Ne,ga)}),r(De,Oe)},ge=De=>{var Oe=As();r(De,Oe)};_(de,De=>{i.session.categories.length>0&&!i.session.categories.includes("None")?De(J):De(ge,!1)})}a(j),a(S),r(u,S)};_(Ee,u=>{i.session.categories?.length&&u(ze)})}var he=s(Ee,2);{var Ae=u=>{var S=Rs(),j=s(t(S),2),de=t(j);{var J=De=>{var Oe=Re(),na=Fe(Oe);we(na,17,()=>i.session.techniqueFocuses,Le,(Ne,oa)=>{var ga=Is(),Na=t(ga,!0);a(ga),h(()=>o(Na,e(oa))),r(Ne,ga)}),r(De,Oe)},ge=De=>{var Oe=Ms();r(De,Oe)};_(de,De=>{i.session.techniqueFocuses.length>0&&!i.session.techniqueFocuses.includes("None")?De(J):De(ge,!1)})}a(j),a(S),r(u,S)};_(he,u=>{i.session.techniqueFocuses?.length&&u(Ae)})}var We=s(he,2);{var Ie=u=>{var S=Vs(),j=s(t(S),2),de=t(j);{var J=De=>{var Oe=Re(),na=Fe(Oe);we(na,17,()=>i.session.energySystems,Le,(Ne,oa)=>{var ga=Ps(),Na=t(ga,!0);a(ga),h(()=>o(Na,e(oa))),r(Ne,ga)}),r(De,Oe)},ge=De=>{var Oe=Bs();r(De,Oe)};_(de,De=>{i.session.energySystems.length>0&&!i.session.energySystems.includes("None")?De(J):De(ge,!1)})}a(j),a(S),r(u,S)};_(We,u=>{i.session.energySystems?.length&&u(Ie)})}a(xe);var Xe=s(xe,2),Me=t(Xe),Be=s(t(Me),2),pa=t(Be);a(Be);var Ue=s(Be,2),ua=t(Ue);a(Ue),a(Me);var ia=s(Me,2),ca=s(t(ia),2),Sa=t(ca);a(ca);var ta=s(ca,2),Ye=t(ta);a(ta),a(ia);var ra=s(ia,2),fa=s(t(ra),2),la=t(fa);a(fa);var va=s(fa,2),ka=t(va);a(va),a(ra);var $e=s(ra,2);{var Ca=u=>{var S=Ws(),j=s(t(S),2),de=t(j);a(j);var J=s(j,2),ge=t(J);a(J),a(S),h(()=>{He(de,`width: ${i.session.openGrip/5*100}%`),o(ge,`${i.session.openGrip??""}/5`)}),r(u,S)};_($e,u=>{i.session.openGrip&&u(Ca)})}var ma=s($e,2);{var qa=u=>{var S=Us(),j=s(t(S),2),de=t(j);a(j);var J=s(j,2),ge=t(J);a(J),a(S),h(()=>{He(de,`width: ${i.session.crimpGrip/5*100}%`),o(ge,`${i.session.crimpGrip??""}/5`)}),r(u,S)};_(ma,u=>{i.session.crimpGrip&&u(qa)})}var ha=s(ma,2);{var Oa=u=>{var S=Hs(),j=s(t(S),2),de=t(j);a(j);var J=s(j,2),ge=t(J);a(J),a(S),h(()=>{He(de,`width: ${i.session.pinchGrip/5*100}%`),o(ge,`${i.session.pinchGrip??""}/5`)}),r(u,S)};_(ha,u=>{i.session.pinchGrip&&u(Oa)})}var za=s(ha,2);{var Aa=u=>{var S=Zs(),j=s(t(S),2),de=t(j);a(j);var J=s(j,2),ge=t(J);a(J),a(S),h(()=>{He(de,`width: ${i.session.sloperGrip/5*100}%`),o(ge,`${i.session.sloperGrip??""}/5`)}),r(u,S)};_(za,u=>{i.session.sloperGrip&&u(Aa)})}var Ta=s(za,2);{var ya=u=>{var S=Js(),j=s(t(S),2),de=t(j);a(j);var J=s(j,2),ge=t(J);a(J),a(S),h(()=>{He(de,`width: ${i.session.jugGrip/5*100}%`),o(ge,`${i.session.jugGrip??""}/5`)}),r(u,S)};_(Ta,u=>{i.session.jugGrip&&u(ya)})}a(Xe);var xa=s(Xe,2),Fa=s(t(xa),2),La=t(Fa);we(La,17,()=>i.session.climbs||[],Le,(u,S,j)=>{{let de=_a(()=>i.session.climbingType==="Mixed");Ts(u,{get climb(){return e(S)},onDelete:()=>k(j),get showClimbType(){return e(de)}})}});var V=s(La,2);{var N=u=>{var S=Ks();r(u,S)};_(V,u=>{(i.session.climbs||[]).length===0&&u(N)})}a(Fa),a(xa),a($),h(()=>{He(pa,`width: ${i.session.fingerLoad/5*100}%`),o(ua,`${i.session.fingerLoad??""}/5`),He(Sa,`width: ${i.session.shoulderLoad/5*100}%`),o(Ye,`${i.session.shoulderLoad??""}/5`),He(la,`width: ${i.session.forearmLoad/5*100}%`),o(ka,`${i.session.forearmLoad??""}/5`)}),Ve(3,$,()=>sa,()=>({duration:150})),r(G,$)};_(B,G=>{e(D)&&G(ue)})}a(M);var ke=s(M,2);ja(ke,{get isOpen(){return e(p)},title:"Delete Session",message:"Are you sure you want to delete this session and all its climbs? This cannot be undone.",onConfirm:g,onCancel:()=>n(p,!1)}),h((G,$)=>{oe=Ke(M,1,"session-card svelte-d5hg2r",null,oe,{expanded:e(D)}),Pe(E,"aria-expanded",e(D)),o(Q,G),o(ee,$),o(U,`${i.session.area??""} `),o(ve,i.session.climbingType),o(c,`${e(y)??""} climbs`),Pe(d,"title",`Finger Load: ${i.session.fingerLoad??""}`),o(q,i.session.fingerLoad),Pe(A,"title",`Shoulder Load: ${i.session.shoulderLoad??""}`),o(le,i.session.shoulderLoad),Pe(pe,"title",`Forearm Load: ${i.session.forearmLoad??""}`),o(Ge,i.session.forearmLoad),o(L,e(D)?"‚ñ≤":"‚ñº")},[()=>new Date(i.session.date).getDate(),()=>new Date(i.session.date).toLocaleDateString(void 0,{month:"short"})]),r(me,I),aa()}Qe(["click","keydown"]);var $s=l('<span class="spinner svelte-1s7jdlh"></span> Fetching...',1),ei=l('<div class="error-banner svelte-1s7jdlh"> </div>'),ai=l('<small class="svelte-1s7jdlh">Try adjusting your filters.</small>'),ti=l('<div class="empty-state svelte-1s7jdlh"><p class="svelte-1s7jdlh">No outdoor climbing sessions found.</p> <!></div>'),si=l('<div class="load-more-container svelte-1s7jdlh"><button class="load-more-btn svelte-1s7jdlh"> </button></div>'),ii=l('<div class="view-container svelte-1s7jdlh"><div class="view-header svelte-1s7jdlh"><h2 class="view-title svelte-1s7jdlh">‚õ∞Ô∏è Outdoor Climbing History</h2> <div class="header-actions svelte-1s7jdlh"><button class="action-btn secondary svelte-1s7jdlh" title="Export filtered data to CSV">üì• Export</button> <button class="action-btn svelte-1s7jdlh" title="Fetch data from cloud"><!></button></div></div> <!> <!> <div class="info-bar svelte-1s7jdlh"><div class="legend-wrapper svelte-1s7jdlh"><!></div> <div class="load-key svelte-1s7jdlh"><span class="key-label svelte-1s7jdlh">Load:</span> <div class="key-item svelte-1s7jdlh"><span class="dot finger svelte-1s7jdlh"></span> Finger</div> <div class="key-item svelte-1s7jdlh"><span class="dot shoulder svelte-1s7jdlh"></span> Shoulder</div> <div class="key-item svelte-1s7jdlh"><span class="dot forearm svelte-1s7jdlh"></span> Forearm</div></div></div> <div class="sessions-list"><!> <!> <!></div></div>');function ri(me,i){ea(i,!0);let D=C(da([])),p=C(da([])),T=C(!1),x=C(""),g=C(da({startDate:"",endDate:"",area:"",crag:"",climbingType:"",sessionType:"",grade:""})),k=C(20);const y=20;Va(()=>{z()});function z(){const v=Ea("outdoor_climb");n(D,v.sort((d,q)=>new Date(q.date).getTime()-new Date(d.date).getTime()),!0),E()}async function I(){n(T,!0),n(x,"");try{await Ia();const v=await $a();v.ok&&v.data?M(v.data):n(x,v.error||"Failed to fetch data",!0)}catch(v){n(x,v instanceof Error?v.message:"Unknown error",!0)}finally{n(T,!1)}}function M(v){const d=v.map(A=>({...A,activityType:"outdoor_climb",createdAt:new Date().toISOString(),updatedAt:new Date().toISOString(),syncStatus:"synced",syncedAt:new Date().toISOString(),openGrip:0,crimpGrip:0,pinchGrip:0,sloperGrip:0,jugGrip:0}));Ra(d);const q=Ea("outdoor_climb");n(D,q.sort((A,le)=>new Date(le.date).getTime()-new Date(A.date).getTime()),!0),E()}function oe(v){n(g,v,!0),E()}function E(){n(k,y),n(p,e(D).filter(v=>{if(e(g).startDate&&v.date<e(g).startDate||e(g).endDate&&v.date>e(g).endDate||e(g).area&&!v.area.toLowerCase().includes(e(g).area.toLowerCase())||e(g).crag&&!v.crag.toLowerCase().includes(e(g).crag.toLowerCase()))return!1;if(e(g).climbingType&&(v.climbingType==="Leading"?"Sport":v.climbingType)!==e(g).climbingType)if(v.climbingType==="Mixed")if(e(g).climbingType==="Bouldering"){if(!v.climbs.some(q=>!q.isSport))return!1}else if(e(g).climbingType==="Sport"||e(g).climbingType==="Trad"){if(!v.climbs.some(q=>q.isSport))return!1}else return!1;else return!1;if(e(g).sessionType&&!v.trainingTypes?.includes(e(g).sessionType))return!1;if(e(g).grade){const d=e(g).grade.trim().toLowerCase();if(!v.climbs.some(A=>A.grade.trim().toLowerCase()===d))return!1}return!0}),!0)}function Z(){n(k,e(k)+y)}var O=ii(),K=t(O),Q=s(t(K),2),te=t(Q);te.__click=()=>Wa(e(p),"outdoor_climbs");var ee=s(te,2);ee.__click=I;var X=t(ee);{var ae=v=>{var d=$s();Da(),r(v,d)},re=v=>{var d=ba("‚òÅÔ∏è Fetch Data");r(v,d)};_(X,v=>{e(T)?v(ae):v(re,!1)})}a(ee),a(Q),a(K);var U=s(K,2);{var ce=v=>{var d=ei(),q=t(d,!0);a(d),h(()=>o(q,e(x))),Ve(3,d,()=>sa),r(v,d)};_(U,v=>{e(x)&&v(ce)})}var m=s(U,2);bs(m,{onFilterParamsChange:oe});var w=s(m,2),F=t(w),W=t(F);Ja(W),a(F),Da(2),a(w);var R=s(w,2),ve=t(R);we(ve,17,()=>e(p).slice(0,e(k)),v=>v.id,(v,d)=>{Ys(v,{get session(){return e(d)},onDelete:z})});var _e=s(ve,2);{var c=v=>{var d=ti(),q=s(t(d),2);{var A=le=>{var pe=ai();r(le,pe)};_(q,le=>{e(D).length>0&&le(A)})}a(d),r(v,d)};_(_e,v=>{e(p).length===0&&v(c)})}var b=s(_e,2);{var f=v=>{var d=si(),q=t(d);q.__click=Z;var A=t(q);a(q),a(d),h(()=>o(A,`Load More (${e(p).length-e(k)} remaining)`)),r(v,d)};_(b,v=>{e(k)<e(p).length&&v(f)})}a(R),a(O),h(()=>ee.disabled=e(T)),r(me,O),aa()}Qe(["click"]);var li=l('<span class="chevron svelte-11rkzid">‚ñ≤</span>'),vi=l('<span class="chevron svelte-11rkzid">‚ñº</span>'),ni=l('<div class="filter-body svelte-11rkzid"><div class="filter-grid svelte-11rkzid"><div class="filter-item svelte-11rkzid"><label for="start-date" class="svelte-11rkzid">Start Date</label> <input type="date" id="start-date" class="svelte-11rkzid"/></div> <div class="filter-item svelte-11rkzid"><label for="end-date" class="svelte-11rkzid">End Date</label> <input type="date" id="end-date" class="svelte-11rkzid"/></div> <div class="filter-item svelte-11rkzid"><label for="name-filter" class="svelte-11rkzid">Session Name</label> <input type="text" id="name-filter" placeholder="e.g. Leg Day" class="svelte-11rkzid"/></div></div> <div class="filter-actions svelte-11rkzid"><button class="reset-btn svelte-11rkzid">Reset Filters</button></div></div>'),oi=l('<div class="filter-container svelte-11rkzid"><button class="filter-header svelte-11rkzid"><div class="header-content svelte-11rkzid"><span class="icon svelte-11rkzid">üîç</span> <span class="title svelte-11rkzid">Filters</span> <!></div></button> <!></div>');function di(me,i){ea(i,!0);let D=C(!1),p=C(""),T=C(""),x=C("");function g(){n(D,!e(D))}function k(){n(p,""),n(T,""),n(x,""),y()}function y(){i.onFilterParamsChange({startDate:e(p),endDate:e(T),name:e(x)})}var z=oi(),I=t(z);I.__click=g;var M=t(I),oe=s(t(M),4);{var E=Q=>{var te=li();r(Q,te)},Z=Q=>{var te=vi();r(Q,te)};_(oe,Q=>{e(D)?Q(E):Q(Z,!1)})}a(M),a(I);var O=s(I,2);{var K=Q=>{var te=ni(),ee=t(te),X=t(ee),ae=s(t(X),2);Ze(ae),ae.__change=y,a(X);var re=s(X,2),U=s(t(re),2);Ze(U),U.__change=y,a(re);var ce=s(re,2),m=s(t(ce),2);Ze(m),m.__input=y,a(ce),a(ee);var w=s(ee,2),F=t(w);F.__click=k,a(w),a(te),Je(ae,()=>e(p),W=>n(p,W)),Je(U,()=>e(T),W=>n(T,W)),Je(m,()=>e(x),W=>n(x,W)),Ve(3,te,()=>sa,()=>({duration:200})),r(Q,te)};_(O,Q=>{e(D)&&Q(K)})}a(z),h(()=>Pe(I,"aria-expanded",e(D))),r(me,z),aa()}Qe(["click","change","input"]);var ci=l('<span class="status-icon pending svelte-cirrfc" title="Waiting to sync">üîÑ</span>'),_i=l('<span class="status-icon error svelte-cirrfc" title="Sync error">‚ö†Ô∏è</span>'),ui=l('<div class="bw-info svelte-cirrfc"><span class="label svelte-cirrfc">Bodyweight:</span> </div>'),fi=l('<span class="tag svelte-cirrfc">W</span>'),gi=l('<span class="tag svelte-cirrfc">F</span>'),pi=l('<span class="tag svelte-cirrfc">D</span>'),mi=l('<div><!> <!> <!> <span class="val"> </span></div>'),hi=l('<div class="exercise-item svelte-cirrfc"><h4 class="svelte-cirrfc"> </h4> <div class="sets-grid svelte-cirrfc"></div></div>'),bi=l('<div class="card-body svelte-cirrfc"><!> <div class="exercises-list svelte-cirrfc"></div></div>'),yi=l('<div><div class="card-header svelte-cirrfc" role="button" tabindex="0"><div class="header-main svelte-cirrfc"><div class="date-badge svelte-cirrfc"><span class="day svelte-cirrfc"> </span> <span class="month svelte-cirrfc"> </span></div> <div class="session-info svelte-cirrfc"><div class="session-text"><h3 class="name svelte-cirrfc"> </h3> <div class="session-meta svelte-cirrfc"><span class="stat svelte-cirrfc"> </span> <span class="stat svelte-cirrfc"> </span> <span class="stat svelte-cirrfc"> </span></div></div></div></div> <div class="header-actions svelte-cirrfc"><div class="header-status"><!></div> <button class="btn-icon delete-session svelte-cirrfc" title="Delete Session">üóëÔ∏è</button> <span class="chevron svelte-cirrfc"> </span></div></div> <!></div> <!>',1);function xi(me,i){ea(i,!0);let D=C(!1),p=C(!1);function T(){n(D,!e(D))}function x(){n(p,!0)}function g(){Ma(i.session.id),n(p,!1),i.onDelete()}let k=_a(()=>i.session.exercises?.length??0),y=_a(()=>(i.session.exercises||[]).reduce((P,H)=>P+(H.sets?.length||0),0)),z=_a(()=>(i.session.exercises||[]).reduce((P,H)=>P+(H.sets||[]).reduce((ne,Y)=>ne+(Y.weight||0)*(Y.reps||0),0),0));var I=yi(),M=Fe(I);let oe;var E=t(M);E.__click=T,E.__keydown=P=>P.key==="Enter"&&T();var Z=t(E),O=t(Z),K=t(O),Q=t(K,!0);a(K);var te=s(K,2),ee=t(te,!0);a(te),a(O);var X=s(O,2),ae=t(X),re=t(ae),U=t(re,!0);a(re);var ce=s(re,2),m=t(ce),w=t(m);a(m);var F=s(m,2),W=t(F);a(F);var R=s(F,2),ve=t(R);a(R),a(ce),a(ae),a(X),a(Z);var _e=s(Z,2),c=t(_e),b=t(c);{var f=P=>{var H=ci();r(P,H)},v=P=>{var H=Re(),ne=Fe(H);{var Y=ye=>{var Se=_i();r(ye,Se)};_(ne,ye=>{i.session.syncStatus==="error"&&ye(Y)},!0)}r(P,H)};_(b,P=>{i.session.syncStatus==="pending"?P(f):P(v,!1)})}a(c);var d=s(c,2);d.__click=P=>{P.stopPropagation(),x()};var q=s(d,2),A=t(q,!0);a(q),a(_e),a(E);var le=s(E,2);{var pe=P=>{var H=bi(),ne=t(H);{var Y=Se=>{var Ce=ui(),L=s(t(Ce));a(Ce),h(()=>o(L,` ${i.session.bodyweight??""}kg`)),r(Se,Ce)};_(ne,Se=>{i.session.bodyweight&&Se(Y)})}var ye=s(ne,2);we(ye,21,()=>i.session.exercises,Le,(Se,Ce)=>{var L=hi(),B=t(L),ue=t(B,!0);a(B);var ke=s(B,2);we(ke,21,()=>e(Ce).sets,Le,(G,$)=>{var xe=mi();let se;var ie=t(xe);{var fe=he=>{var Ae=fi();r(he,Ae)};_(ie,he=>{e($).isWarmup&&he(fe)})}var je=s(ie,2);{var be=he=>{var Ae=gi();r(he,Ae)};_(je,he=>{e($).isFailure&&he(be)})}var Te=s(je,2);{var qe=he=>{var Ae=pi();r(he,Ae)};_(Te,he=>{e($).isDropSet&&he(qe)})}var Ee=s(Te,2),ze=t(Ee);a(Ee),a(xe),h(()=>{se=Ke(xe,1,"set-pill svelte-cirrfc",null,se,{completed:e($).completed}),o(ze,`${e($).weight??""}kg x ${e($).reps??""}`)}),r(G,xe)}),a(ke),a(L),h(()=>o(ue,e(Ce).name)),r(Se,L)}),a(ye),a(H),Ve(3,H,()=>sa,()=>({duration:150})),r(P,H)};_(le,P=>{e(D)&&P(pe)})}a(M);var Ge=s(M,2);ja(Ge,{get isOpen(){return e(p)},title:"Delete Session",message:"Are you sure you want to delete this session? This cannot be undone.",onConfirm:g,onCancel:()=>n(p,!1)}),h((P,H,ne)=>{oe=Ke(M,1,"session-card svelte-cirrfc",null,oe,{expanded:e(D)}),Pe(E,"aria-expanded",e(D)),o(Q,P),o(ee,H),o(U,i.session.name),o(w,`${e(k)??""} exercises`),o(W,`${e(y)??""} sets`),o(ve,`~${ne??""}kg vol`),o(A,e(D)?"‚ñ≤":"‚ñº")},[()=>new Date(i.session.date).getDate(),()=>new Date(i.session.date).toLocaleDateString("en-GB",{month:"short"}),()=>Math.round(e(z))]),r(me,I),aa()}Qe(["click","keydown"]);var wi=l('<span class="spinner svelte-133enjd"></span> Fetching...',1),Di=l('<div class="error-banner svelte-133enjd"> </div>'),Si=l('<small class="svelte-133enjd">Try adjusting your filters.</small>'),ki=l('<div class="empty-state svelte-133enjd"><p class="svelte-133enjd">No gym sessions found.</p> <!></div>'),qi=l('<div class="load-more-container svelte-133enjd"><button class="load-more-btn svelte-133enjd"> </button></div>'),Ti=l('<div class="view-container svelte-133enjd"><div class="view-header svelte-133enjd"><h2 class="view-title svelte-133enjd">üèãÔ∏è Gym Session History</h2> <div class="header-actions svelte-133enjd"><button class="action-btn secondary svelte-133enjd" title="Export filtered data to CSV">üì• Export</button> <button class="action-btn svelte-133enjd" title="Fetch data from cloud"><!></button></div></div> <!> <!> <div class="sessions-list"><!> <!> <!></div></div>');function Ci(me,i){ea(i,!0);let D=C(da([])),p=C(da([])),T=C(!1),x=C(""),g=C(da({startDate:"",endDate:"",name:""})),k=C(20);const y=20;Va(()=>{z()});function z(){const c=Ea("gym_session");n(D,c.sort((b,f)=>new Date(f.date).getTime()-new Date(b.date).getTime()),!0),E()}async function I(){n(T,!0),n(x,"");try{await Ia();const c=await et();c.ok&&c.data?M(c.data):n(x,c.error||"Failed to fetch data",!0)}catch(c){n(x,c instanceof Error?c.message:"Unknown error",!0)}finally{n(T,!1)}}function M(c){const b=c.map(v=>({...v,activityType:"gym_session",syncStatus:"synced",syncedAt:new Date().toISOString()}));Ra(b);const f=Ea("gym_session");n(D,f.sort((v,d)=>new Date(d.date).getTime()-new Date(v.date).getTime()),!0),E()}function oe(c){n(g,c,!0),E()}function E(){n(k,y),n(p,e(D).filter(c=>!(e(g).startDate&&c.date<e(g).startDate||e(g).endDate&&c.date>e(g).endDate||e(g).name&&!c.name.toLowerCase().includes(e(g).name.toLowerCase()))),!0)}function Z(){n(k,e(k)+y)}var O=Ti(),K=t(O),Q=s(t(K),2),te=t(Q);te.__click=()=>Wa(e(p),"gym_sessions");var ee=s(te,2);ee.__click=I;var X=t(ee);{var ae=c=>{var b=wi();Da(),r(c,b)},re=c=>{var b=ba("‚òÅÔ∏è Fetch Data");r(c,b)};_(X,c=>{e(T)?c(ae):c(re,!1)})}a(ee),a(Q),a(K);var U=s(K,2);{var ce=c=>{var b=Di(),f=t(b,!0);a(b),h(()=>o(f,e(x))),Ve(3,b,()=>sa),r(c,b)};_(U,c=>{e(x)&&c(ce)})}var m=s(U,2);di(m,{onFilterParamsChange:oe});var w=s(m,2),F=t(w);we(F,17,()=>e(p).slice(0,e(k)),c=>c.id,(c,b)=>{xi(c,{get session(){return e(b)},onDelete:z})});var W=s(F,2);{var R=c=>{var b=ki(),f=s(t(b),2);{var v=d=>{var q=Si();r(d,q)};_(f,d=>{e(D).length>0&&d(v)})}a(b),r(c,b)};_(W,c=>{e(p).length===0&&c(R)})}var ve=s(W,2);{var _e=c=>{var b=qi(),f=t(b);f.__click=Z;var v=t(f);a(f),a(b),h(()=>o(v,`Load More (${e(p).length-e(k)} remaining)`)),r(c,b)};_(ve,c=>{e(k)<e(p).length&&c(_e)})}a(w),a(O),h(()=>ee.disabled=e(T)),r(me,O),aa()}Qe(["click"]);var zi=l('<span class="spinner svelte-1szs0u9"></span> Fetching...',1),Fi=l('<div class="loading svelte-1szs0u9">Loading sessions...</div>'),Li=l('<div class="empty-state svelte-1szs0u9"><!></div>'),Gi=l('<span class="set-tag svelte-1szs0u9"> <span class="x svelte-1szs0u9">x</span> </span>'),Ei=l('<div class="ex-notes svelte-1szs0u9"> </div>'),ji=l('<div class="exercise-item svelte-1szs0u9"><div class="ex-header svelte-1szs0u9"><span class="ex-name svelte-1szs0u9"> </span> <span class="ex-grip svelte-1szs0u9"> </span></div> <div class="ex-sets svelte-1szs0u9"></div> <!></div>'),Oi=l('<div class="card-body svelte-1szs0u9"><div class="exercises-list svelte-1szs0u9"></div></div>'),Ai=l('<div><div class="card-header svelte-1szs0u9" role="button" tabindex="0"><div class="header-main"><span class="session-date svelte-1szs0u9"> </span> <span class="meta svelte-1szs0u9"><!> </span></div> <div class="header-status svelte-1szs0u9"><span>‚óè</span> <button class="btn-icon delete-btn svelte-1szs0u9" title="Delete Session">üóëÔ∏è</button> <span class="chevron svelte-1szs0u9"> </span></div></div> <!></div>'),Ni=l('<div class="load-more-container svelte-1szs0u9"><button class="load-more-btn svelte-1szs0u9"> </button></div>'),Ii=l('<div class="timeline svelte-1szs0u9"><!> <!></div>'),Mi=l('<div class="view-content svelte-1szs0u9"><div class="header svelte-1szs0u9"><h3 class="svelte-1szs0u9">ü§è Fingerboarding Log</h3> <button class="fetch-btn svelte-1szs0u9" title="Fetch data from cloud"><!></button></div> <div class="filters svelte-1szs0u9"><div class="filter-group svelte-1szs0u9"><label for="start-date" class="svelte-1szs0u9">From</label> <input type="date" id="start-date" class="svelte-1szs0u9"/></div> <div class="filter-group svelte-1szs0u9"><label for="end-date" class="svelte-1szs0u9">To</label> <input type="date" id="end-date" class="svelte-1szs0u9"/></div></div> <!></div> <!>',1);function Ri(me,i){ea(i,!0);let D=C(da([])),p=C(!0),T=C(""),x=C(""),g=C(da(new Set)),k=C(20);const y=20;Ka(()=>{e(T),e(x),n(k,y)});let z=C(!1),I=C(null);function M(f){n(I,f,!0),n(z,!0)}function oe(){e(I)&&(Ma(e(I)),n(I,null),n(z,!1),n(D,Pa().sort((f,v)=>new Date(v.date).getTime()-new Date(f.date).getTime()),!0))}async function E(){n(p,!0),n(D,Pa().sort((f,v)=>new Date(v.date).getTime()-new Date(f.date).getTime()),!0);try{await Ia();const f=await at();if(f.ok&&f.data){const v=f.data.map(d=>({...d,activityType:"fingerboarding",createdAt:d.createdAt||new Date().toISOString(),updatedAt:d.updatedAt||new Date().toISOString(),syncStatus:"synced"}));Ra(v),n(D,Pa().sort((d,q)=>new Date(q.date).getTime()-new Date(d.date).getTime()),!0)}}catch(f){console.error("Failed to sync",f)}finally{n(p,!1)}}E();let Z=_a(()=>e(D).filter(f=>!(e(T)&&new Date(f.date)<new Date(e(T))||e(x)&&new Date(f.date)>new Date(e(x)))));function O(){n(k,e(k)+y)}function K(f){e(g).has(f)?e(g).delete(f):e(g).add(f),n(g,new Set(e(g)),!0)}function Q(f){return f.exercises.reduce((v,d)=>v+d.details.length,0)}var te=Mi(),ee=Fe(te),X=t(ee),ae=s(t(X),2);ae.__click=E;var re=t(ae);{var U=f=>{var v=zi();Da(),r(f,v)},ce=f=>{var v=ba("‚òÅÔ∏è Fetch Data");r(f,v)};_(re,f=>{e(p)?f(U):f(ce,!1)})}a(ae),a(X);var m=s(X,2),w=t(m),F=s(t(w),2);Ze(F),a(w);var W=s(w,2),R=s(t(W),2);Ze(R),a(W),a(m);var ve=s(m,2);{var _e=f=>{var v=Fi();r(f,v)},c=f=>{var v=Re(),d=Fe(v);{var q=le=>{var pe=Li(),Ge=t(pe);{var P=ne=>{var Y=ba("No sessions match filter.");r(ne,Y)},H=ne=>{var Y=ba("No fingerboarding sessions logged yet.");r(ne,Y)};_(Ge,ne=>{e(D).length>0?ne(P):ne(H,!1)})}a(pe),r(le,pe)},A=le=>{var pe=Ii(),Ge=t(pe);we(Ge,17,()=>e(Z).slice(0,e(k)),Le,(ne,Y)=>{var ye=Ai();let Se;var Ce=t(ye);Ce.__click=()=>K(e(Y).id),Ce.__keydown=ze=>ze.key==="Enter"&&K(e(Y).id);var L=t(Ce),B=t(L),ue=t(B,!0);a(B);var ke=s(B,2),G=t(ke);{var $=ze=>{var he=ba();h(()=>o(he,`${e(Y).location??""} ¬∑`)),r(ze,he)};_(G,ze=>{e(Y).location&&e(Y).location!=="N/A"&&e(Y).location!=="Home"&&ze($)})}var xe=s(G);a(ke),a(L);var se=s(L,2),ie=t(se);let fe;var je=s(ie,2);je.__click=ze=>{ze.stopPropagation(),M(e(Y).id)};var be=s(je,2),Te=t(be,!0);a(be),a(se),a(Ce);var qe=s(Ce,2);{var Ee=ze=>{var he=Oi(),Ae=t(he);we(Ae,21,()=>e(Y).exercises||[],Le,(We,Ie)=>{var Xe=ji(),Me=t(Xe),Be=t(Me),pa=t(Be,!0);a(Be);var Ue=s(Be,2),ua=t(Ue,!0);a(Ue),a(Me);var ia=s(Me,2);we(ia,21,()=>e(Ie).details,Le,(ta,Ye)=>{var ra=Gi(),fa=t(ra),la=s(fa,2);a(ra),h(()=>{o(fa,`${e(Ye).weight>0?`+${e(Ye).weight}kg`:"BW"} `),o(la,` ${e(Ye).reps??""}s/reps`)}),r(ta,ra)}),a(ia);var ca=s(ia,2);{var Sa=ta=>{var Ye=Ei(),ra=t(Ye);a(Ye),h(()=>o(ra,`"${e(Ie).notes??""}"`)),r(ta,Ye)};_(ca,ta=>{e(Ie).notes&&ta(Sa)})}a(Xe),h(()=>{o(pa,e(Ie).name),o(ua,e(Ie).gripType)}),r(We,Xe)}),a(Ae),a(he),Ve(3,he,()=>sa,()=>({duration:150})),r(ze,he)};_(qe,ze=>{e(g).has(e(Y).id)&&ze(Ee)})}a(ye),h((ze,he,Ae,We)=>{Se=Ke(ye,1,"session-card svelte-1szs0u9",null,Se,ze),o(ue,he),o(xe,` ${e(Y).exercises.length??""} Exercises ¬∑ ${Ae??""} Sets`),fe=Ke(ie,1,"sync-dot svelte-1szs0u9",null,fe,{synced:e(Y).syncStatus==="synced"}),Pe(ie,"title",e(Y).syncStatus==="synced"?"Synced":"Local"),o(Te,We)},[()=>({expanded:e(g).has(e(Y).id)}),()=>new Date(e(Y).date).toLocaleDateString(void 0,{weekday:"short",month:"short",day:"numeric"}),()=>Q(e(Y)),()=>e(g).has(e(Y).id)?"‚ñ≤":"‚ñº"]),r(ne,ye)});var P=s(Ge,2);{var H=ne=>{var Y=Ni(),ye=t(Y);ye.__click=O;var Se=t(ye);a(ye),a(Y),h(()=>o(Se,`Load More (${e(Z).length-e(k)} remaining)`)),r(ne,Y)};_(P,ne=>{e(k)<e(Z).length&&ne(H)})}a(pe),r(le,pe)};_(d,le=>{e(Z).length===0?le(q):le(A,!1)},!0)}r(f,v)};_(ve,f=>{e(p)&&e(D).length===0?f(_e):f(c,!1)})}a(ee);var b=s(ee,2);ja(b,{get isOpen(){return e(z)},title:"Delete Fingerboard Session",message:"Are you sure you want to delete this session? This cannot be undone.",onConfirm:oe,onCancel:()=>n(z,!1)}),h(()=>ae.disabled=e(p)),Je(F,()=>e(T),f=>n(T,f)),Je(R,()=>e(x),f=>n(x,f)),r(me,te),aa()}Qe(["click","keydown"]);var Pi=l('<span class="spinner svelte-xyvf5r"></span> Fetching...',1),Bi=l('<div class="loading svelte-xyvf5r">Loading sessions...</div>'),Vi=l('<div class="empty-state svelte-xyvf5r">No competitions logged yet.</div>'),Wi=l('<span class="round-pos svelte-xyvf5r"> </span>'),Ui=l('<span class="c-attempts svelte-xyvf5r"> </span>'),Hi=l('<div class="climb-notes svelte-xyvf5r"> </div>'),Zi=l('<div class="climb-row svelte-xyvf5r"><div class="climb-info svelte-xyvf5r"><span class="c-name svelte-xyvf5r"> </span> <!></div> <div class="climb-result"><span> </span></div></div> <!>',1),Ji=l('<div class="climbs-list"></div>'),Ki=l('<div class="round-item svelte-xyvf5r"><div class="round-header svelte-xyvf5r"><span class="round-name"> </span> <!></div> <!></div>'),Qi=l('<div class="rounds-list svelte-xyvf5r"></div>'),Xi=l('<div class="load-meta svelte-xyvf5r"><span> </span></div>'),Yi=l('<div class="card-body svelte-xyvf5r"><!> <!> <div class="session-footer svelte-xyvf5r"><span> </span></div></div>'),$i=l('<div><div class="card-header svelte-xyvf5r" role="button" tabindex="0"><div class="header-main svelte-xyvf5r"><div class="left-col svelte-xyvf5r"><span class="venue svelte-xyvf5r"> </span> <span class="date svelte-xyvf5r"> </span></div> <div class="right-col svelte-xyvf5r"><div class="badges svelte-xyvf5r"><span class="type-tag svelte-xyvf5r"> </span> <span class="result-tag svelte-xyvf5r"> </span></div></div></div> <div class="header-status svelte-xyvf5r"><span>‚óè</span> <button class="btn-icon delete-btn svelte-xyvf5r" title="Delete Session">üóëÔ∏è</button> <span class="chevron svelte-xyvf5r"> </span></div></div> <!></div>'),er=l('<div class="load-more-container svelte-xyvf5r"><button class="load-more-btn svelte-xyvf5r"> </button></div>'),ar=l('<div class="timeline svelte-xyvf5r"><!> <!></div>'),tr=l('<div class="view-content svelte-xyvf5r"><div class="header svelte-xyvf5r"><h3 class="svelte-xyvf5r">üèÜ Competition Log</h3> <button class="fetch-btn svelte-xyvf5r" title="Fetch data from cloud"><!></button></div> <!> <!></div>');function sr(me,i){ea(i,!0);let D=C(da([])),p=C(!0),T=C(da(new Set)),x=C(20);const g=20;let k=C(!1),y=C(null);function z(m){n(y,m,!0),n(k,!0)}function I(){e(y)&&(Ma(e(y)),n(y,null),n(k,!1),n(D,Ba().sort((m,w)=>new Date(w.date).getTime()-new Date(m.date).getTime()),!0))}async function M(){n(p,!0),n(x,g),n(D,Ba().sort((m,w)=>new Date(w.date).getTime()-new Date(m.date).getTime()),!0);try{await Ia();const m=await tt();if(m.ok&&m.data){const w=m.data.map(F=>({...F,activityType:"competition",type:F.type,rounds:F.rounds.map(W=>({...W,climbs:W.climbs?.map(R=>({...R,status:R.status}))})),createdAt:F.createdAt||new Date().toISOString(),updatedAt:F.updatedAt||new Date().toISOString(),syncStatus:"synced"}));Ra(w),n(D,Ba().sort((F,W)=>new Date(W.date).getTime()-new Date(F.date).getTime()),!0)}}catch(m){console.error("Failed to sync",m)}finally{n(p,!1)}}M();function oe(m){e(T).has(m)?e(T).delete(m):e(T).add(m),n(T,new Set(e(T)),!0)}function E(){n(x,e(x)+g)}function Z(m){if(!m.rounds||m.rounds.length===0)return"No rounds";const w=m.rounds[m.rounds.length-1];if(w.position)return`#${w.position} ${w.name}`;if(w.climbs){const F=w.climbs.filter(R=>R.status==="Top"||R.status==="Flash").length,W=w.climbs.filter(R=>R.status==="Zone").length;return`${m.rounds.length} Rnds ¬∑ Final: ${F}T ${W+F}Z`}return w.name}var O=tr(),K=t(O),Q=s(t(K),2);Q.__click=M;var te=t(Q);{var ee=m=>{var w=Pi();Da(),r(m,w)},X=m=>{var w=ba("‚òÅÔ∏è Fetch Data");r(m,w)};_(te,m=>{e(p)?m(ee):m(X,!1)})}a(Q),a(K);var ae=s(K,2);{var re=m=>{var w=Bi();r(m,w)},U=m=>{var w=Re(),F=Fe(w);{var W=ve=>{var _e=Vi();r(ve,_e)},R=ve=>{var _e=ar(),c=t(_e);we(c,17,()=>e(D).slice(0,e(x)),Le,(v,d)=>{var q=$i();let A;var le=t(q);le.__click=()=>oe(e(d).id),le.__keydown=be=>be.key==="Enter"&&oe(e(d).id);var pe=t(le),Ge=t(pe),P=t(Ge),H=t(P,!0);a(P);var ne=s(P,2),Y=t(ne,!0);a(ne),a(Ge);var ye=s(Ge,2),Se=t(ye),Ce=t(Se),L=t(Ce,!0);a(Ce);var B=s(Ce,2),ue=t(B,!0);a(B),a(Se),a(ye),a(pe);var ke=s(pe,2),G=t(ke);let $;var xe=s(G,2);xe.__click=be=>{be.stopPropagation(),z(e(d).id)};var se=s(xe,2),ie=t(se,!0);a(se),a(ke),a(le);var fe=s(le,2);{var je=be=>{var Te=Yi(),qe=t(Te);{var Ee=Me=>{var Be=Qi();we(Be,21,()=>e(d).rounds||[],Le,(pa,Ue)=>{var ua=Ki(),ia=t(ua),ca=t(ia),Sa=t(ca,!0);a(ca);var ta=s(ca,2);{var Ye=la=>{var va=Wi(),ka=t(va);a(va),h(()=>o(ka,`#${e(Ue).position??""}`)),r(la,va)};_(ta,la=>{e(Ue).position&&la(Ye)})}a(ia);var ra=s(ia,2);{var fa=la=>{var va=Ji();we(va,21,()=>e(Ue).climbs||[],Le,(ka,$e)=>{var Ca=Zi(),ma=Fe(Ca),qa=t(ma),ha=t(qa),Oa=t(ha,!0);a(ha);var za=s(ha,2);{var Aa=N=>{var u=Ui(),S=t(u);a(u),h(()=>o(S,`(${e($e).attemptCount??""} tries)`)),r(N,u)};_(za,N=>{e($e).attemptCount>1&&N(Aa)})}a(qa);var Ta=s(qa,2),ya=t(Ta);let xa;var Fa=t(ya,!0);a(ya),a(Ta),a(ma);var La=s(ma,2);{var V=N=>{var u=Hi(),S=t(u);a(u),h(()=>o(S,`"${e($e).notes??""}"`)),r(N,u)};_(La,N=>{e($e).notes&&N(V)})}h(()=>{o(Oa,e($e).name),xa=Ke(ya,1,"status-badge svelte-xyvf5r",null,xa,{top:e($e).status==="Top"||e($e).status==="Flash",zone:e($e).status==="Zone"}),o(Fa,e($e).status)}),r(ka,Ca)}),a(va),r(la,va)};_(ra,la=>{e(Ue).climbs&&la(fa)})}a(ua),h(()=>o(Sa,e(Ue).name)),r(pa,ua)}),a(Be),r(Me,Be)};_(qe,Me=>{e(d).rounds&&Me(Ee)})}var ze=s(qe,2);{var he=Me=>{var Be=Xi(),pa=t(Be),Ue=t(pa);a(pa),a(Be),h(()=>o(Ue,`Detailed Load: Fingers ${e(d).fingerLoad??""}/5, Shoulders ${e(d).shoulderLoad??""}/5, Forearms ${e(d).forearmLoad??""}/5`)),r(Me,Be)};_(ze,Me=>{(e(d).fingerLoad||e(d).shoulderLoad)&&Me(he)})}var Ae=s(ze,2),We=t(Ae);let Ie;var Xe=t(We,!0);a(We),a(Ae),a(Te),h(()=>{Ie=Ke(We,1,"sync-status svelte-xyvf5r",null,Ie,{synced:e(d).syncStatus==="synced"}),o(Xe,e(d).syncStatus==="synced"?"‚úì Synced":"‚òÅ Local")}),Ve(3,Te,()=>sa,()=>({duration:150})),r(be,Te)};_(fe,be=>{e(T).has(e(d).id)&&be(je)})}a(q),h((be,Te,qe,Ee)=>{A=Ke(q,1,"session-card svelte-xyvf5r",null,A,be),o(H,e(d).customVenue||e(d).venue),o(Y,Te),o(L,e(d).type),o(ue,qe),$=Ke(G,1,"sync-dot",null,$,{synced:e(d).syncStatus==="synced"}),Pe(G,"title",e(d).syncStatus==="synced"?"Synced":"Local"),o(ie,Ee)},[()=>({expanded:e(T).has(e(d).id)}),()=>new Date(e(d).date).toLocaleDateString(void 0,{weekday:"short",day:"numeric",month:"short"}),()=>Z(e(d)),()=>e(T).has(e(d).id)?"‚ñ≤":"‚ñº"]),r(v,q)});var b=s(c,2);{var f=v=>{var d=er(),q=t(d);q.__click=E;var A=t(q);a(q),a(d),h(()=>o(A,`Load More (${e(D).length-e(x)} remaining)`)),r(v,d)};_(b,v=>{e(x)<e(D).length&&v(f)})}a(_e),r(ve,_e)};_(F,ve=>{e(D).length===0?ve(W):ve(R,!1)},!0)}r(m,w)};_(ae,m=>{e(p)&&e(D).length===0?m(re):m(U,!1)})}var ce=s(ae,2);ja(ce,{get isOpen(){return e(k)},title:"Delete Competition",message:"Are you sure you want to delete this competition session? This action cannot be undone.",onConfirm:I,onCancel:()=>n(k,!1)}),a(O),h(()=>Q.disabled=e(p)),r(me,O),aa()}Qe(["click","keydown"]);var ir=l('<button class="backdrop svelte-108px9u" aria-label="Close settings"></button> <div class="settings-modal svelte-108px9u" role="dialog" aria-modal="true"><div class="settings-header svelte-108px9u"><h3 class="svelte-108px9u">Settings</h3> <button class="close-btn svelte-108px9u">‚úï</button></div> <div class="settings-content"><div class="setting-item svelte-108px9u"><div class="setting-info svelte-108px9u"><span class="setting-label svelte-108px9u">Local Data</span> <span class="setting-desc svelte-108px9u">Clear all cached data on this device</span></div> <button class="btn-clear-cache svelte-108px9u">Clear Cache</button></div></div></div>',1),rr=l("<option> </option>"),lr=l('<div class="view-container svelte-108px9u"><!></div>'),vr=l('<div class="page svelte-108px9u"><div class="page-header svelte-108px9u"><div><h1 class="svelte-108px9u">üìä View Data</h1> <p class="subtitle svelte-108px9u">Browse your training history</p></div> <button class="settings-btn svelte-108px9u" aria-label="Settings">‚öôÔ∏è</button></div> <!> <!> <div class="content-card svelte-108px9u"><div class="form-group svelte-108px9u"><label for="activity-type" class="svelte-108px9u">Activity Type</label> <select id="activity-type" class="svelte-108px9u"><option disabled>Select an activity...</option><!></select></div> <!></div></div>');function hr(me,i){ea(i,!0);const D=[{value:"indoor_climb",label:"Indoor Climb",icon:"üßó"},{value:"outdoor_climb",label:"Outdoor Climb",icon:"‚õ∞Ô∏è"},{value:"gym_session",label:"Gym Session",icon:"üèãÔ∏è"},{value:"fingerboarding",label:"Fingerboarding",icon:"ü§è"},{value:"competition",label:"Competition",icon:"üèÜ"}];let p=C(""),T=C(!1),x=C(!1);function g(){n(T,!0)}function k(){n(T,!1)}function y(){n(T,!1),n(x,!0)}function z(){st()}var I=vr(),M=t(I),oe=s(t(M),2);oe.__click=g,a(M);var E=s(M,2);{var Z=U=>{var ce=ir(),m=Fe(ce);m.__click=k;var w=s(m,2),F=t(w),W=s(t(F),2);W.__click=k,a(F);var R=s(F,2),ve=t(R),_e=s(t(ve),2);_e.__click=y,a(ve),a(R),a(w),Ve(3,m,()=>Ua,()=>({duration:200})),Ve(3,w,()=>Ha,()=>({duration:200,start:.9})),r(U,ce)};_(E,U=>{e(T)&&U(Z)})}var O=s(E,2);ja(O,{get isOpen(){return e(x)},title:"Clear all local data?",message:"Are you sure you want to clear all locally cached data? This will remove all sessions stored on this device. Data already synced to the cloud will be preserved.",confirmKeyword:"clear",onConfirm:z,onCancel:()=>n(x,!1)});var K=s(O,2),Q=t(K),te=s(t(Q),2),ee=t(te);ee.value=ee.__value="";var X=s(ee);we(X,17,()=>D,U=>U.value,(U,ce)=>{var m=rr(),w=t(m);a(m);var F={};h(()=>{o(w,`${e(ce).icon??""} ${e(ce).label??""}`),F!==(F=e(ce).value)&&(m.value=(m.__value=e(ce).value)??"")}),r(U,m)}),a(te),a(Q);var ae=s(Q,2);{var re=U=>{var ce=lr(),m=t(ce);{var w=W=>{rs(W,{})},F=W=>{var R=Re(),ve=Fe(R);{var _e=b=>{ri(b,{})},c=b=>{var f=Re(),v=Fe(f);{var d=A=>{Ci(A,{})},q=A=>{var le=Re(),pe=Fe(le);{var Ge=H=>{Ri(H,{})},P=H=>{var ne=Re(),Y=Fe(ne);{var ye=Se=>{sr(Se,{})};_(Y,Se=>{e(p)==="competition"&&Se(ye)},!0)}r(H,ne)};_(pe,H=>{e(p)==="fingerboarding"?H(Ge):H(P,!1)},!0)}r(A,le)};_(v,A=>{e(p)==="gym_session"?A(d):A(q,!1)},!0)}r(b,f)};_(ve,b=>{e(p)==="outdoor_climb"?b(_e):b(c,!1)},!0)}r(W,R)};_(m,W=>{e(p)==="indoor_climb"?W(w):W(F,!1)})}a(ce),r(U,ce)};_(ae,U=>{e(p)&&U(re)})}a(K),a(I),wa(te,()=>e(p),U=>n(p,U)),r(me,I),aa()}Qe(["click"]);export{hr as component};
