import{f as v,a as i,c as Ze,t as qa}from"../chunks/CSQvsE9s.js";import{p as fa,c as t,s,i as e,aV as k,r as a,t as g,a as ga,x as l,b0 as Za,f as Oe,aG as za,aW as ca,w as ya,o as Ua,b8 as Ha,d as Qa}from"../chunks/DGPNV_z9.js";import{d as pa,s as d}from"../chunks/DSMXtqZM.js";import{i as c}from"../chunks/D9GEZg6r.js";import{s as Ye,r as Ne,e as De,i as Ce,b as Ie,c as Ja}from"../chunks/_iMURHzE.js";import{t as na,k as ma,i as Ka,u as et,s as ja,l as at,g as tt,b as st,m as rt,n as it,D as Pa,E as lt,o as vt,p as nt,q as ot,d as dt,r as ct}from"../chunks/DFxUjh3A.js";import{c as ka,f as la,n as Ia,m as Xa,b as Ma,o as Aa,p as Na,q as $a,t as Ba,v as Va,w as pt}from"../chunks/Cn4iyW3Z.js";import{s as va}from"../chunks/Ct8JfZaa.js";import{p as Ra}from"../chunks/Dd0awD9h.js";var _t=v('<span class="chevron svelte-12crvy">‚ñ≤</span>'),ut=v('<span class="chevron svelte-12crvy">‚ñº</span>'),ft=v('<div class="input-with-action svelte-12crvy"><input type="text" id="location-manual" placeholder="Custom location..." class="flat-left svelte-12crvy"/> <button type="button" class="action-btn flat-right svelte-12crvy" title="Back to list">‚úï</button></div>'),gt=v("<option> </option>"),mt=v('<select id="location-filter" class="svelte-12crvy"><option>Any Location</option><!></select>'),ht=v("<option> </option>"),bt=v("<option> </option>"),yt=v('<div class="filter-body svelte-12crvy"><div class="filter-grid svelte-12crvy"><div class="filter-item svelte-12crvy"><label for="start-date" class="svelte-12crvy">Start Date</label> <input type="date" id="start-date" class="svelte-12crvy"/></div> <div class="filter-item svelte-12crvy"><label for="end-date" class="svelte-12crvy">End Date</label> <input type="date" id="end-date" class="svelte-12crvy"/></div> <div class="filter-item svelte-12crvy"><label for="location-filter" class="svelte-12crvy">Location</label> <!></div> <div class="filter-item svelte-12crvy"><label for="climbing-type-filter" class="svelte-12crvy">Climb Type</label> <select id="climbing-type-filter" class="svelte-12crvy"><option>Any Type</option><!></select></div> <div class="filter-item svelte-12crvy"><label for="session-type-filter" class="svelte-12crvy">Session Type</label> <select id="session-type-filter" class="svelte-12crvy"><option>Any Type</option><!></select></div> <div class="filter-item svelte-12crvy"><label for="grade-filter" class="svelte-12crvy">Grade (Exact)</label> <input type="text" id="grade-filter" placeholder="e.g. V4" class="svelte-12crvy"/></div></div> <div class="filter-actions svelte-12crvy"><button class="reset-btn svelte-12crvy">Reset Filters</button></div></div>'),xt=v('<div class="filter-container svelte-12crvy"><button class="filter-header svelte-12crvy"><div class="header-content svelte-12crvy"><span class="icon svelte-12crvy">üîç</span> <span class="title svelte-12crvy">Filters</span> <!></div></button> <!></div>');function wt(qe,p){fa(p,!0);const r=["Rockstar Swindon","Flashpoint Swindon","Flashpoint Bristol","Redpoint Bristol","TCH Bristol","Other"],m=["Bouldering","Sport","Mixed"],G=["Projecting","Onsighting","Campusing","Repeaters"];let D=k(!1),f=k(""),z=k(""),S=k(""),B=k(""),Y=k(""),oe=k(""),pe=k(!1);function se(){l(D,!e(D))}function ee(){l(f,""),l(z,""),l(S,""),l(B,""),l(pe,!1),l(Y,""),l(oe,""),$()}function $(){p.onFilterParamsChange({startDate:e(f),endDate:e(z),location:e(S),climbingType:e(B),sessionType:e(Y),grade:e(oe)})}function de(){e(S)==="Other"?(l(pe,!0),l(S,"")):$()}function _e(){l(pe,!1),l(S,""),$()}var re=xt(),V=t(re);V.__click=se;var ie=t(V),xe=s(t(ie),4);{var ye=h=>{var C=_t();i(h,C)},ae=h=>{var C=ut();i(h,C)};c(xe,h=>{e(D)?h(ye):h(ae,!1)})}a(ie),a(V);var N=s(V,2);{var u=h=>{var C=yt(),M=t(C),P=t(M),U=s(t(P),2);Ne(U),U.__change=$,a(P);var J=s(P,2),y=s(t(J),2);Ne(y),y.__change=$,a(J);var j=s(J,2),x=s(t(j),2);{var n=q=>{var _=ft(),w=t(_);Ne(w),w.__input=$;var ne=s(w,2);ne.__click=_e,a(_),Ie(w,()=>e(S),E=>l(S,E)),i(q,_)},o=q=>{var _=mt();_.__change=de;var w=t(_);w.value=w.__value="";var ne=s(w);De(ne,17,()=>r,Ce,(E,W)=>{var ce=gt(),Z=t(ce,!0);a(ce);var te={};g(()=>{d(Z,e(W)),te!==(te=e(W))&&(ce.value=(ce.__value=e(W))??"")}),i(E,ce)}),a(_),ka(_,()=>e(S),E=>l(S,E)),i(q,_)};c(x,q=>{e(pe)?q(n):q(o,!1)})}a(j);var T=s(j,2),R=s(t(T),2);R.__change=$;var K=t(R);K.value=K.__value="";var A=s(K);De(A,17,()=>m,Ce,(q,_)=>{var w=ht(),ne=t(w,!0);a(w);var E={};g(()=>{d(ne,e(_)),E!==(E=e(_))&&(w.value=(w.__value=e(_))??"")}),i(q,w)}),a(R),a(T);var ue=s(T,2),fe=s(t(ue),2);fe.__change=$;var we=t(fe);we.value=we.__value="";var L=s(we);De(L,17,()=>G,Ce,(q,_)=>{var w=bt(),ne=t(w,!0);a(w);var E={};g(()=>{d(ne,e(_)),E!==(E=e(_))&&(w.value=(w.__value=e(_))??"")}),i(q,w)}),a(fe),a(ue);var I=s(ue,2),me=s(t(I),2);Ne(me),me.__input=$,a(I),a(M);var Se=s(M,2),Te=t(Se);Te.__click=ee,a(Se),a(C),Ie(U,()=>e(f),q=>l(f,q)),Ie(y,()=>e(z),q=>l(z,q)),ka(R,()=>e(B),q=>l(B,q)),ka(fe,()=>e(Y),q=>l(Y,q)),Ie(me,()=>e(oe),q=>l(oe,q)),na(3,C,()=>ma,()=>({duration:200})),i(h,C)};c(N,h=>{e(D)&&h(u)})}a(re),g(()=>Ye(V,"aria-expanded",e(D))),i(qe,re),ga()}pa(["click","change","input"]);var St=v('<label class="type-toggle svelte-yz0xxt"><input type="checkbox"/> <span>Sport?</span></label>'),kt=v("<option> </option>"),Dt=v('<div class="edit-form svelte-yz0xxt"><div class="edit-row main svelte-yz0xxt"><input type="text" class="edit-input grade svelte-yz0xxt" placeholder="Grade"/> <input type="text" class="edit-input name svelte-yz0xxt" placeholder="Route Name"/> <!></div> <div class="edit-row meta svelte-yz0xxt"><select class="edit-select svelte-yz0xxt"></select> <div class="attempts-input-wrapper svelte-yz0xxt"><span>#</span> <input type="number" min="1" class="edit-input num svelte-yz0xxt"/></div></div> <div class="edit-row notes svelte-yz0xxt"><textarea class="edit-input notes-area svelte-yz0xxt" placeholder="Notes..."></textarea></div> <div class="edit-actions svelte-yz0xxt"><button class="action-btn cancel svelte-yz0xxt">Cancel</button> <button class="action-btn save svelte-yz0xxt">Save</button></div></div>'),Tt=v('<span class="climb-type-tag svelte-yz0xxt"> </span>'),qt=v('<span class="notes-preview svelte-yz0xxt"> </span>'),zt=v('<span class="attempts-count svelte-yz0xxt"> </span>'),Ct=v('<div class="detail-row svelte-yz0xxt"><span class="label svelte-yz0xxt">Notes:</span> <p class="notes svelte-yz0xxt"> </p></div>'),Ft=v('<p class="empty-notes svelte-yz0xxt">No notes for this climb.</p>'),Lt=v('<div class="climb-details svelte-yz0xxt"><!> <div class="tags svelte-yz0xxt"><span class="tag type svelte-yz0xxt"> </span> <span class="tag attempt-text svelte-yz0xxt"> </span></div></div>'),Et=v('<div class="climb-header svelte-yz0xxt" role="button" tabindex="0"><div class="climb-main-info svelte-yz0xxt"><span> </span> <span class="climb-name svelte-yz0xxt"> </span> <!> <!></div> <div class="climb-meta svelte-yz0xxt"><span><span class="icon svelte-yz0xxt"> </span> <!></span> <button class="icon-btn edit-btn svelte-yz0xxt" aria-label="Edit climb" title="Edit climb">‚úé</button> <button class="icon-btn delete-btn svelte-yz0xxt" aria-label="Delete climb" title="Delete climb">üóëÔ∏è</button> <span class="chevron svelte-yz0xxt"> </span></div></div> <!>',1),Gt=v("<div><!></div>");function At(qe,p){fa(p,!0);let r=Ra(p,"showClimbType",3,!1),m=k(!1),G=k(!1),D=k(""),f=k(""),z=k(""),S=k(1),B=k(""),Y=k(!1);function oe(){e(G)||l(m,!e(m))}function pe(N){N.stopPropagation(),p.onDelete()}function se(N){N.stopPropagation(),l(D,p.climb.name,!0),l(f,p.climb.grade,!0),l(z,p.climb.attemptType,!0),l(S,p.climb.attemptsNum,!0),l(B,p.climb.notes,!0),l(Y,p.climb.isSport,!0),l(G,!0),l(m,!0)}function ee(N){N.stopPropagation(),l(G,!1)}function $(N){N.stopPropagation();const u={...p.climb,name:e(D),grade:e(f),attemptType:e(z),attemptsNum:e(S),notes:e(B),isSport:e(Y)};p.onUpdate(u),l(G,!1)}function de(){(e(z)==="Flash"||e(z)==="Onsight")&&l(S,1)}const _e={Flash:"‚ö°",Onsight:"üëÅÔ∏è",Redpoint:"üî¥",Dogged:"üõ†Ô∏è",DNF:"‚ùå"},re=["Flash","Onsight","Redpoint","Dogged","DNF"];var V=Gt();let ie;var xe=t(V);{var ye=N=>{var u=Dt(),h=t(u),C=t(h);Ne(C);var M=s(C,2);Ne(M);var P=s(M,2);{var U=A=>{var ue=St(),fe=t(ue);Ne(fe),za(2),a(ue),Ja(fe,()=>e(Y),we=>l(Y,we)),i(A,ue)};c(P,A=>{r()&&A(U)})}a(h);var J=s(h,2),y=t(J);y.__change=de,De(y,21,()=>re,Ce,(A,ue)=>{var fe=kt(),we=t(fe,!0);a(fe);var L={};g(()=>{d(we,e(ue)),L!==(L=e(ue))&&(fe.value=(fe.__value=e(ue))??"")}),i(A,fe)}),a(y);var j=s(y,2),x=s(t(j),2);Ne(x),a(j),a(J);var n=s(J,2),o=t(n);Za(o),a(n);var T=s(n,2),R=t(T);R.__click=ee;var K=s(R,2);K.__click=$,a(T),a(u),g(()=>x.disabled=e(z)==="Flash"||e(z)==="Onsight"),Ie(C,()=>e(f),A=>l(f,A)),Ie(M,()=>e(D),A=>l(D,A)),ka(y,()=>e(z),A=>l(z,A)),Ie(x,()=>e(S),A=>l(S,A)),Ie(o,()=>e(B),A=>l(B,A)),i(N,u)},ae=N=>{var u=Et(),h=Oe(u);h.__click=oe,h.__keydown=_=>(_.key==="Enter"||_.key===" ")&&oe();var C=t(h),M=t(C);let P;var U=t(M,!0);a(M);var J=s(M,2),y=t(J,!0);a(J);var j=s(J,2);{var x=_=>{var w=Tt(),ne=t(w,!0);a(w),g(()=>d(ne,p.climb.isSport?"Sport":"Boulder")),i(_,w)};c(j,_=>{r()&&_(x)})}var n=s(j,2);{var o=_=>{var w=qt(),ne=t(w);a(w),g(()=>d(ne,`- ${p.climb.notes??""}`)),i(_,w)};c(n,_=>{!e(m)&&p.climb.notes&&_(o)})}a(C);var T=s(C,2),R=t(T);let K;var A=t(R),ue=t(A,!0);a(A);var fe=s(A,2);{var we=_=>{var w=zt(),ne=t(w,!0);a(w),g(()=>d(ne,p.climb.attemptsNum)),i(_,w)};c(fe,_=>{p.climb.attemptType!=="Flash"&&p.climb.attemptType!=="Onsight"&&_(we)})}a(R);var L=s(R,2);L.__click=se;var I=s(L,2);I.__click=pe;var me=s(I,2),Se=t(me,!0);a(me),a(T),a(h);var Te=s(h,2);{var q=_=>{var w=Lt(),ne=t(w);{var E=he=>{var ze=Ct(),ge=s(t(ze),2),ke=t(ge,!0);a(ge),a(ze),g(()=>d(ke,p.climb.notes)),i(he,ze)},W=he=>{var ze=Ft();i(he,ze)};c(ne,he=>{p.climb.notes?he(E):he(W,!1)})}var ce=s(ne,2),Z=t(ce),te=t(Z,!0);a(Z);var le=s(Z,2),Ee=t(le,!0);a(le),a(ce),a(w),g(()=>{d(te,p.climb.isSport?"Sport":"Boulder"),d(Ee,p.climb.attemptType)}),na(3,w,()=>ma,()=>({duration:150})),i(_,w)};c(Te,_=>{e(m)&&_(q)})}g(()=>{Ye(h,"aria-expanded",e(m)),P=va(M,1,"grade-badge svelte-yz0xxt",null,P,{sport:p.climb.isSport}),d(U,p.climb.grade),d(y,p.climb.name||"Unnamed Route"),K=va(R,1,"attempt-type svelte-yz0xxt",null,K,{flash:p.climb.attemptType==="Flash"}),d(ue,_e[p.climb.attemptType]||p.climb.attemptType),d(Se,e(m)?"‚ñ≤":"‚ñº")}),i(N,u)};c(xe,N=>{e(G)?N(ye):N(ae,!1)})}a(V),g(()=>ie=va(V,1,"climb-entry svelte-yz0xxt",null,ie,{expanded:e(m),editing:e(G)})),i(qe,V),ga()}pa(["change","click","keydown"]);var Ot=v('<span class="stat svelte-7vqogn"> </span>'),jt=v('<span class="status-icon pending svelte-7vqogn" title="Waiting to sync">üîÑ</span>'),Nt=v('<span class="status-icon error svelte-7vqogn" title="Sync error">‚ö†Ô∏è</span>'),It=v('<span class="chip svelte-7vqogn"> </span>'),Mt=v('<span class="text-none svelte-7vqogn">None</span>'),Pt=v('<div class="detail-item svelte-7vqogn"><span class="label svelte-7vqogn">Difficulty</span> <span class="value svelte-7vqogn"> </span></div>'),Rt=v('<span class="chip svelte-7vqogn"> </span>'),Bt=v('<span class="text-none svelte-7vqogn">None</span>'),Vt=v('<div class="detail-item svelte-7vqogn"><span class="label svelte-7vqogn">Category</span> <div class="value-chips svelte-7vqogn"><!></div></div>'),Ut=v('<span class="chip svelte-7vqogn"> </span>'),$t=v('<span class="text-none svelte-7vqogn">None</span>'),Wt=v('<div class="detail-item svelte-7vqogn"><span class="label svelte-7vqogn">Focus</span> <div class="value-chips svelte-7vqogn"><!></div></div>'),Ht=v('<span class="chip svelte-7vqogn"> </span>'),Zt=v('<span class="text-none svelte-7vqogn">None</span>'),Jt=v('<div class="detail-item svelte-7vqogn"><span class="label svelte-7vqogn">Energy System</span> <div class="value-chips svelte-7vqogn"><!></div></div>'),Kt=v('<span class="chip svelte-7vqogn"> </span>'),Xt=v('<span class="text-none svelte-7vqogn">None</span>'),Yt=v('<div class="detail-item svelte-7vqogn"><span class="label svelte-7vqogn">Wall Angle</span> <div class="value-chips svelte-7vqogn"><!></div></div>'),Qt=v('<div class="metric svelte-7vqogn"><span class="label svelte-7vqogn">Open Grip</span> <div class="bar-container svelte-7vqogn"><div class="bar-fill svelte-7vqogn"></div></div> <span class="score svelte-7vqogn"> </span></div>'),es=v('<div class="metric svelte-7vqogn"><span class="label svelte-7vqogn">Crimp Grip</span> <div class="bar-container svelte-7vqogn"><div class="bar-fill svelte-7vqogn"></div></div> <span class="score svelte-7vqogn"> </span></div>'),as=v('<div class="metric svelte-7vqogn"><span class="label svelte-7vqogn">Pinch Grip</span> <div class="bar-container svelte-7vqogn"><div class="bar-fill svelte-7vqogn"></div></div> <span class="score svelte-7vqogn"> </span></div>'),ts=v('<div class="metric svelte-7vqogn"><span class="label svelte-7vqogn">Sloper Grip</span> <div class="bar-container svelte-7vqogn"><div class="bar-fill svelte-7vqogn"></div></div> <span class="score svelte-7vqogn"> </span></div>'),ss=v('<div class="metric svelte-7vqogn"><span class="label svelte-7vqogn">Jug Grip</span> <div class="bar-container svelte-7vqogn"><div class="bar-fill svelte-7vqogn"></div></div> <span class="score svelte-7vqogn"> </span></div>'),rs=v('<p class="no-climbs svelte-7vqogn">No climbs logged for this session.</p>'),is=v('<div class="card-body svelte-7vqogn"><div class="details-grid svelte-7vqogn"><div class="detail-item svelte-7vqogn"><span class="label svelte-7vqogn">Training Type</span> <div class="value-chips svelte-7vqogn"><!></div></div> <!> <!> <!> <!> <!></div> <div class="metrics-container svelte-7vqogn"><div class="metric svelte-7vqogn"><span class="label svelte-7vqogn">Finger Load</span> <div class="bar-container svelte-7vqogn"><div class="bar-fill svelte-7vqogn"></div></div> <span class="score svelte-7vqogn"> </span></div> <div class="metric svelte-7vqogn"><span class="label svelte-7vqogn">Shoulder Load</span> <div class="bar-container svelte-7vqogn"><div class="bar-fill svelte-7vqogn"></div></div> <span class="score svelte-7vqogn"> </span></div> <div class="metric svelte-7vqogn"><span class="label svelte-7vqogn">Forearm Load</span> <div class="bar-container svelte-7vqogn"><div class="bar-fill svelte-7vqogn"></div></div> <span class="score svelte-7vqogn"> </span></div> <!> <!> <!> <!> <!></div> <div class="climbs-list svelte-7vqogn"><h4 class="svelte-7vqogn">Climbs</h4> <div class="climbs-container svelte-7vqogn"><!> <!></div></div></div>'),ls=v('<div><div class="card-header svelte-7vqogn" role="button" tabindex="0"><div class="header-main svelte-7vqogn"><div class="date-badge svelte-7vqogn"><span class="day svelte-7vqogn"> </span> <span class="month svelte-7vqogn"> </span></div> <div class="session-info svelte-7vqogn"><div class="session-text svelte-7vqogn"><h3 class="location svelte-7vqogn"> </h3> <div class="session-meta svelte-7vqogn"><span class="type-tag svelte-7vqogn"> </span> <span class="stat svelte-7vqogn"> </span> <!></div></div> <div class="load-summary svelte-7vqogn"><div class="load-badge finger svelte-7vqogn"> </div> <div class="load-badge shoulder svelte-7vqogn"> </div> <div class="load-badge forearm svelte-7vqogn"> </div></div></div></div> <div class="header-actions"><div class="header-status svelte-7vqogn"><!></div>  <button class="btn-icon delete-session" title="Delete Session">üóëÔ∏è</button> <span class="chevron svelte-7vqogn"> </span></div></div> <!></div>');function vs(qe,p){fa(p,!0);let r=Ra(p,"session",7),m=k(!1),G=k(!1);function D(){l(m,!e(m))}function f(){l(G,!0)}function z(q){const _=[...r().climbs];_.splice(q,1),Ia(r().id,{climbs:_}),p.onDelete()}function S(q,_){const w=[...r().climbs];w[q]=_,B(w)}async function B(q){if(Ia(r().id,{climbs:q}),r().climbs=q,Ka()){const _={date:r().date,location:r().location,customLocation:r().customLocation,climbingType:r().climbingType,trainingTypes:r().trainingTypes||[],difficulty:r().difficulty,categories:r().categories||[],energySystems:r().energySystems||[],techniqueFocuses:r().techniqueFocuses||[],wallAngles:r().wallAngles||[],fingerLoad:r().fingerLoad,shoulderLoad:r().shoulderLoad,forearmLoad:r().forearmLoad,openGrip:r().openGrip,crimpGrip:r().crimpGrip,pinchGrip:r().pinchGrip,sloperGrip:r().sloperGrip,jugGrip:r().jugGrip,climbs:q};try{const w=await et(r().id,_);w.ok?(Xa(r().id),r().syncStatus="synced"):(console.error("Failed to sync update:",w.error),Ma(r().id),r().syncStatus="error")}catch(w){console.error("Exception syncing update:",w),Ma(r().id),r().syncStatus="error"}}}let Y=ca(()=>r().climbs?.length??0),oe=ca(()=>(r().climbs||[]).reduce((q,_)=>{const w=parseInt(_.grade.replace(/\D/g,""))||0,ne=parseInt(q.replace(/\D/g,""))||0;return w>ne?_.grade:q},"V0"));var pe=ls();let se;var ee=t(pe);ee.__click=D,ee.__keydown=q=>q.key==="Enter"&&D();var $=t(ee),de=t($),_e=t(de),re=t(_e,!0);a(_e);var V=s(_e,2),ie=t(V,!0);a(V),a(de);var xe=s(de,2),ye=t(xe),ae=t(ye),N=t(ae,!0);a(ae);var u=s(ae,2),h=t(u),C=t(h,!0);a(h);var M=s(h,2),P=t(M);a(M);var U=s(M,2);{var J=q=>{var _=Ot(),w=t(_);a(_),g(()=>d(w,`Max: ${e(oe)??""}`)),i(q,_)};c(U,q=>{e(Y)>0&&q(J)})}a(u),a(ye);var y=s(ye,2),j=t(y),x=t(j,!0);a(j);var n=s(j,2),o=t(n,!0);a(n);var T=s(n,2),R=t(T,!0);a(T),a(y),a(xe),a($);var K=s($,2),A=t(K),ue=t(A);{var fe=q=>{var _=jt();i(q,_)},we=q=>{var _=Ze(),w=Oe(_);{var ne=E=>{var W=Nt();i(E,W)};c(w,E=>{r().syncStatus==="error"&&E(ne)},!0)}i(q,_)};c(ue,q=>{r().syncStatus==="pending"?q(fe):q(we,!1)})}a(A);var L=s(A,2);L.__click=q=>{q.stopPropagation(),f()};var I=s(L,2),me=t(I,!0);a(I),a(K),a(ee);var Se=s(ee,2);{var Te=q=>{var _=is(),w=t(_),ne=t(w),E=s(t(ne),2),W=t(E);{var ce=H=>{var Q=Ze(),b=Oe(Q);De(b,17,()=>r().trainingTypes,Ce,(F,O)=>{var ve=It(),X=t(ve,!0);a(ve),g(()=>d(X,e(O))),i(F,ve)}),i(H,Q)},Z=H=>{var Q=Mt();i(H,Q)};c(W,H=>{r().trainingTypes&&r().trainingTypes.length>0&&!r().trainingTypes.includes("None")?H(ce):H(Z,!1)})}a(E),a(ne);var te=s(ne,2);{var le=H=>{var Q=Pt(),b=s(t(Q),2),F=t(b,!0);a(b),a(Q),g(()=>d(F,r().difficulty)),i(H,Q)};c(te,H=>{r().difficulty&&H(le)})}var Ee=s(te,2);{var he=H=>{var Q=Vt(),b=s(t(Q),2),F=t(b);{var O=X=>{var be=Ze(),Le=Oe(be);De(Le,17,()=>r().categories,Ce,(Pe,ha)=>{var Re=Rt(),ba=t(Re,!0);a(Re),g(()=>d(ba,e(ha))),i(Pe,Re)}),i(X,be)},ve=X=>{var be=Bt();i(X,be)};c(F,X=>{r().categories.length>0&&!r().categories.includes("None")?X(O):X(ve,!1)})}a(b),a(Q),i(H,Q)};c(Ee,H=>{r().categories?.length&&H(he)})}var ze=s(Ee,2);{var ge=H=>{var Q=Wt(),b=s(t(Q),2),F=t(b);{var O=X=>{var be=Ze(),Le=Oe(be);De(Le,17,()=>r().techniqueFocuses,Ce,(Pe,ha)=>{var Re=Ut(),ba=t(Re,!0);a(Re),g(()=>d(ba,e(ha))),i(Pe,Re)}),i(X,be)},ve=X=>{var be=$t();i(X,be)};c(F,X=>{r().techniqueFocuses.length>0&&!r().techniqueFocuses.includes("None")?X(O):X(ve,!1)})}a(b),a(Q),i(H,Q)};c(ze,H=>{r().techniqueFocuses?.length&&H(ge)})}var ke=s(ze,2);{var Fe=H=>{var Q=Jt(),b=s(t(Q),2),F=t(b);{var O=X=>{var be=Ze(),Le=Oe(be);De(Le,17,()=>r().energySystems,Ce,(Pe,ha)=>{var Re=Ht(),ba=t(Re,!0);a(Re),g(()=>d(ba,e(ha))),i(Pe,Re)}),i(X,be)},ve=X=>{var be=Zt();i(X,be)};c(F,X=>{r().energySystems.length>0&&!r().energySystems.includes("None")?X(O):X(ve,!1)})}a(b),a(Q),i(H,Q)};c(ke,H=>{r().energySystems?.length&&H(Fe)})}var Ae=s(ke,2);{var Qe=H=>{var Q=Yt(),b=s(t(Q),2),F=t(b);{var O=X=>{var be=Ze(),Le=Oe(be);De(Le,17,()=>r().wallAngles,Ce,(Pe,ha)=>{var Re=Kt(),ba=t(Re,!0);a(Re),g(()=>d(ba,e(ha))),i(Pe,Re)}),i(X,be)},ve=X=>{var be=Xt();i(X,be)};c(F,X=>{r().wallAngles.length>0&&!r().wallAngles.includes("None")?X(O):X(ve,!1)})}a(b),a(Q),i(H,Q)};c(Ae,H=>{r().wallAngles?.length&&H(Qe)})}a(w);var ea=s(w,2),je=t(ea),Me=s(t(je),2),Ue=t(Me);a(Me);var ta=s(Me,2),aa=t(ta);a(ta),a(je);var $e=s(je,2),_a=s(t($e),2),We=t(_a);a(_a);var oa=s(_a,2),da=t(oa);a(oa),a($e);var Ge=s($e,2),Be=s(t(Ge),2),Ve=t(Be);a(Be);var sa=s(Be,2),ra=t(sa);a(sa),a(Ge);var ia=s(Ge,2);{var He=H=>{var Q=Qt(),b=s(t(Q),2),F=t(b);a(b);var O=s(b,2),ve=t(O);a(O),a(Q),g(()=>{la(F,`width: ${r().openGrip/5*100}%`),d(ve,`${r().openGrip??""}/5`)}),i(H,Q)};c(ia,H=>{r().openGrip&&H(He)})}var Je=s(ia,2);{var Ta=H=>{var Q=es(),b=s(t(Q),2),F=t(b);a(b);var O=s(b,2),ve=t(O);a(O),a(Q),g(()=>{la(F,`width: ${r().crimpGrip/5*100}%`),d(ve,`${r().crimpGrip??""}/5`)}),i(H,Q)};c(Je,H=>{r().crimpGrip&&H(Ta)})}var Ke=s(Je,2);{var Ca=H=>{var Q=as(),b=s(t(Q),2),F=t(b);a(b);var O=s(b,2),ve=t(O);a(O),a(Q),g(()=>{la(F,`width: ${r().pinchGrip/5*100}%`),d(ve,`${r().pinchGrip??""}/5`)}),i(H,Q)};c(Ke,H=>{r().pinchGrip&&H(Ca)})}var xa=s(Ke,2);{var wa=H=>{var Q=ts(),b=s(t(Q),2),F=t(b);a(b);var O=s(b,2),ve=t(O);a(O),a(Q),g(()=>{la(F,`width: ${r().sloperGrip/5*100}%`),d(ve,`${r().sloperGrip??""}/5`)}),i(H,Q)};c(xa,H=>{r().sloperGrip&&H(wa)})}var Da=s(xa,2);{var Fa=H=>{var Q=ss(),b=s(t(Q),2),F=t(b);a(b);var O=s(b,2),ve=t(O);a(O),a(Q),g(()=>{la(F,`width: ${r().jugGrip/5*100}%`),d(ve,`${r().jugGrip??""}/5`)}),i(H,Q)};c(Da,H=>{r().jugGrip&&H(Fa)})}a(ea);var La=s(ea,2),Xe=s(t(La),2),ua=t(Xe);De(ua,17,()=>r().climbs||[],Ce,(H,Q,b)=>{{let F=ca(()=>r().climbingType==="Mixed");At(H,{get climb(){return e(Q)},onDelete:()=>z(b),onUpdate:O=>S(b,O),get showClimbType(){return e(F)}})}});var Ea=s(ua,2);{var Ga=H=>{var Q=rs();i(H,Q)};c(Ea,H=>{(r().climbs||[]).length===0&&H(Ga)})}a(Xe),a(La),a(_),g(()=>{la(Ue,`width: ${r().fingerLoad/5*100}%`),d(aa,`${r().fingerLoad??""}/5`),la(We,`width: ${r().shoulderLoad/5*100}%`),d(da,`${r().shoulderLoad??""}/5`),la(Ve,`width: ${r().forearmLoad/5*100}%`),d(ra,`${r().forearmLoad??""}/5`)}),na(3,_,()=>ma,()=>({duration:150})),i(q,_)};c(Se,q=>{e(m)&&q(Te)})}a(pe),g((q,_)=>{se=va(pe,1,"session-card svelte-7vqogn",null,se,{expanded:e(m)}),Ye(ee,"aria-expanded",e(m)),d(re,q),d(ie,_),d(N,r().location),d(C,r().climbingType),d(P,`${e(Y)??""} climbs`),Ye(j,"title",`Finger Load: ${r().fingerLoad??""}`),d(x,r().fingerLoad),Ye(n,"title",`Shoulder Load: ${r().shoulderLoad??""}`),d(o,r().shoulderLoad),Ye(T,"title",`Forearm Load: ${r().forearmLoad??""}`),d(R,r().forearmLoad),d(me,e(m)?"‚ñ≤":"‚ñº")},[()=>new Date(r().date).getDate(),()=>new Date(r().date).toLocaleDateString("en-GB",{month:"short"})]),i(qe,pe),ga()}pa(["click","keydown"]);var ns=v('<div class="legend-item svelte-11p9lqi"><span class="l-icon svelte-11p9lqi"> </span> <span class="l-label svelte-11p9lqi"> </span></div>'),os=v('<div class="legend-content svelte-11p9lqi"><div class="legend-grid svelte-11p9lqi"></div></div>'),ds=v('<div class="legend-container svelte-11p9lqi"><button class="legend-toggle svelte-11p9lqi"><span class="icon">‚ÑπÔ∏è</span> <span class="text">Icon Legend</span> <span class="chevron svelte-11p9lqi"> </span></button> <!></div>');function Ya(qe){let p=k(!1);const r=[{icon:"üëÅÔ∏è",label:"Onsight"},{icon:"‚ö°",label:"Flash"},{icon:"üî¥",label:"Redpoint"},{icon:"üõ†Ô∏è",label:"Dogged"},{icon:"‚ùå",label:"DNF"}];var m=ds(),G=t(m);G.__click=()=>l(p,!e(p));var D=s(t(G),4),f=t(D,!0);a(D),a(G);var z=s(G,2);{var S=B=>{var Y=os(),oe=t(Y);De(oe,21,()=>r,Ce,(pe,se)=>{var ee=ns(),$=t(ee),de=t($,!0);a($);var _e=s($,2),re=t(_e,!0);a(_e),a(ee),g(()=>{d(de,e(se).icon),d(re,e(se).label)}),i(pe,ee)}),a(oe),a(Y),na(3,Y,()=>ma),i(B,Y)};c(z,B=>{e(p)&&B(S)})}a(m),g(()=>{Ye(G,"aria-expanded",e(p)),d(f,e(p)?"‚ñº":"‚ñ∂")}),i(qe,m)}pa(["click"]);function Wa(qe,p){if(!qe||qe.length===0){alert("No data to export");return}const r=Array.from(new Set(qe.flatMap(Object.keys))),m=[r.join(","),...qe.map(f=>r.map(z=>{let S=f[z];if(S==null)return"";if(typeof S=="object"){if(S instanceof Date)return S.toISOString();S=JSON.stringify(S).replace(/"/g,'""')}else typeof S=="string"&&(S=S.replace(/"/g,'""'));return typeof S=="string"&&(S.includes(",")||S.includes('"')||S.includes(`
`))?`"${S}"`:S}).join(","))].join(`
`),G=new Blob([m],{type:"text/csv;charset=utf-8;"}),D=document.createElement("a");if(D.download!==void 0){const f=URL.createObjectURL(G);D.setAttribute("href",f),D.setAttribute("download",p.endsWith(".csv")?p:`${p}.csv`),D.style.visibility="hidden",document.body.appendChild(D),D.click(),document.body.removeChild(D)}}var cs=v('<span class="spinner svelte-14fqz8w"></span> Fetching...',1),ps=v('<div class="error-banner svelte-14fqz8w"> </div>'),_s=v('<small class="svelte-14fqz8w">Try adjusting your filters.</small>'),us=v('<div class="empty-state svelte-14fqz8w"><p class="svelte-14fqz8w">No indoor climbing sessions found.</p> <!></div>'),fs=v('<div class="load-more-container svelte-14fqz8w"><button class="load-more-btn svelte-14fqz8w"> </button></div>'),gs=v('<div class="view-container svelte-14fqz8w"><div class="view-header svelte-14fqz8w"><h2 class="view-title svelte-14fqz8w">üßó Indoor Climbing History</h2> <div class="header-actions svelte-14fqz8w"><button class="action-btn secondary svelte-14fqz8w" title="Export filtered data to CSV">üì• Export</button> <button class="action-btn svelte-14fqz8w" title="Fetch data from cloud"><!></button></div></div> <!> <!> <div class="info-bar svelte-14fqz8w"><div class="legend-wrapper svelte-14fqz8w"><!></div> <div class="load-key svelte-14fqz8w"><span class="key-label svelte-14fqz8w">Load:</span> <div class="key-item svelte-14fqz8w"><span class="dot finger svelte-14fqz8w"></span> Finger</div> <div class="key-item svelte-14fqz8w"><span class="dot shoulder svelte-14fqz8w"></span> Shoulder</div> <div class="key-item svelte-14fqz8w"><span class="dot forearm svelte-14fqz8w"></span> Forearm</div></div></div> <div class="sessions-list"><!> <!> <!></div></div>');function ms(qe,p){fa(p,!0);let r=k(ya([])),m=k(ya([])),G=k(!1),D=k(""),f=k(ya({startDate:"",endDate:"",location:"",climbingType:"",sessionType:"",grade:""})),z=k(20);const S=20;Ua(()=>{B()});function B(){const n=Aa("indoor_climb");l(r,n.sort((o,T)=>new Date(T.date).getTime()-new Date(o.date).getTime()),!0),se()}async function Y(){l(G,!0),l(D,"");try{await ja();const n=await at();n.ok&&n.data?oe(n.data):l(D,n.error||"Failed to fetch data",!0)}catch(n){l(D,n instanceof Error?n.message:"Unknown error",!0)}finally{l(G,!1)}}function oe(n){const o=n.map(R=>({...R,activityType:"indoor_climb",createdAt:new Date().toISOString(),updatedAt:new Date().toISOString(),syncStatus:"synced",syncedAt:new Date().toISOString(),openGrip:0,crimpGrip:0,pinchGrip:0,sloperGrip:0,jugGrip:0}));Na(o);const T=Aa("indoor_climb");l(r,T.sort((R,K)=>new Date(K.date).getTime()-new Date(R.date).getTime()),!0),se()}function pe(n){l(f,n,!0),se()}function se(){l(z,S),l(m,e(r).filter(n=>{if(e(f).startDate&&n.date<e(f).startDate||e(f).endDate&&n.date>e(f).endDate||e(f).location&&n.location!==e(f).location)return!1;if(e(f).climbingType&&(n.climbingType==="Leading"?"Sport":n.climbingType)!==e(f).climbingType)if(n.climbingType==="Mixed")if(e(f).climbingType==="Bouldering"){if(!n.climbs.some(T=>!T.isSport))return!1}else if(e(f).climbingType==="Sport"){if(!n.climbs.some(T=>T.isSport))return!1}else return!1;else return!1;if(e(f).sessionType&&!n.trainingTypes?.includes(e(f).sessionType))return!1;if(e(f).grade){const o=e(f).grade.trim().toLowerCase();if(!n.climbs.some(R=>R.grade.trim().toLowerCase()===o))return!1}return!0}),!0)}function ee(){l(z,e(z)+S)}var $=gs(),de=t($),_e=s(t(de),2),re=t(_e);re.__click=()=>Wa(e(m),"indoor_climbs");var V=s(re,2);V.__click=Y;var ie=t(V);{var xe=n=>{var o=cs();za(),i(n,o)},ye=n=>{var o=qa("‚òÅÔ∏è Fetch Data");i(n,o)};c(ie,n=>{e(G)?n(xe):n(ye,!1)})}a(V),a(_e),a(de);var ae=s(de,2);{var N=n=>{var o=ps(),T=t(o,!0);a(o),g(()=>d(T,e(D))),na(3,o,()=>ma),i(n,o)};c(ae,n=>{e(D)&&n(N)})}var u=s(ae,2);wt(u,{onFilterParamsChange:pe});var h=s(u,2),C=t(h),M=t(C);Ya(M),a(C),za(2),a(h);var P=s(h,2),U=t(P);De(U,17,()=>e(m).slice(0,e(z)),n=>n.id,(n,o)=>{vs(n,{get session(){return e(o)},onDelete:B})});var J=s(U,2);{var y=n=>{var o=us(),T=s(t(o),2);{var R=K=>{var A=_s();i(K,A)};c(T,K=>{e(r).length>0&&K(R)})}a(o),i(n,o)};c(J,n=>{e(m).length===0&&n(y)})}var j=s(J,2);{var x=n=>{var o=fs(),T=t(o);T.__click=ee;var R=t(T);a(T),a(o),g(()=>d(R,`Load More (${e(m).length-e(z)} remaining)`)),i(n,o)};c(j,n=>{e(z)<e(m).length&&n(x)})}a(P),a($),g(()=>V.disabled=e(G)),i(qe,$),ga()}pa(["click"]);var hs=v('<span class="chevron svelte-1frtlim">‚ñ≤</span>'),bs=v('<span class="chevron svelte-1frtlim">‚ñº</span>'),ys=v('<div class="input-with-action svelte-1frtlim"><input type="text" id="area-filter-text" placeholder="Type area name..." class="flat-left svelte-1frtlim"/> <button class="action-btn flat-right svelte-1frtlim" title="Back to list">‚úï</button></div>'),xs=v("<option> </option>"),ws=v('<select id="area-filter" class="svelte-1frtlim"><option>All Areas</option><!><option>Other (Manual Entry)</option></select>'),Ss=v('<div class="input-with-action svelte-1frtlim"><input type="text" id="crag-filter-text" placeholder="Type crag name..." class="flat-left svelte-1frtlim"/> <button class="action-btn flat-right svelte-1frtlim" title="Back to list">‚úï</button></div>'),ks=v("<option> </option>"),Ds=v('<select id="crag-filter" class="svelte-1frtlim"><option>All Crags</option><!><option>Other (Manual Entry)</option></select>'),Ts=v('<input type="text" id="crag-filter-text" class="svelte-1frtlim"/>'),qs=v("<option> </option>"),zs=v("<option> </option>"),Cs=v('<div class="filter-body svelte-1frtlim"><div class="filter-grid svelte-1frtlim"><div class="filter-item svelte-1frtlim"><label for="start-date" class="svelte-1frtlim">Start Date</label> <input type="date" id="start-date" class="svelte-1frtlim"/></div> <div class="filter-item svelte-1frtlim"><label for="end-date" class="svelte-1frtlim">End Date</label> <input type="date" id="end-date" class="svelte-1frtlim"/></div> <div class="filter-item svelte-1frtlim"><label for="area-filter" class="svelte-1frtlim">Area</label> <!></div> <div class="filter-item svelte-1frtlim"><label for="crag-filter" class="svelte-1frtlim">Crag</label> <!></div> <div class="filter-item svelte-1frtlim"><label for="climbing-type-filter" class="svelte-1frtlim">Climb Type</label> <select id="climbing-type-filter" class="svelte-1frtlim"><option>Any Type</option><!></select></div> <div class="filter-item svelte-1frtlim"><label for="session-type-filter" class="svelte-1frtlim">Session Type</label> <select id="session-type-filter" class="svelte-1frtlim"><option>Any Type</option><!></select></div> <div class="filter-item svelte-1frtlim"><label for="grade-filter" class="svelte-1frtlim">Grade (Exact)</label> <input type="text" id="grade-filter" placeholder="e.g. 7a" class="svelte-1frtlim"/></div></div> <div class="filter-actions svelte-1frtlim"><button class="reset-btn svelte-1frtlim">Reset Filters</button></div></div>'),Fs=v('<div class="filter-container svelte-1frtlim"><button class="filter-header svelte-1frtlim"><div class="header-content svelte-1frtlim"><span class="icon svelte-1frtlim">üîç</span> <span class="title svelte-1frtlim">Filters</span> <!></div></button> <!></div>');function Ls(qe,p){fa(p,!0);const r=tt(),m=["Bouldering","Sport","Mixed","Trad"],G=["Projecting","Onsighting","Campusing","Repeaters","Fun","Volume"];let D=k(!1),f=k(""),z=k(""),S=k(""),B=k(""),Y=k(""),oe=k(""),pe=k(""),se=k(!1),ee=k(!1),$=ca(()=>e(S)&&e(S)!=="Other"?st(e(S)):[]);function de(){e(S)==="Other"?(l(se,!0),l(S,"")):l(se,!1),l(B,""),l(ee,!1),ie()}function _e(){e(B)==="Other"?(l(ee,!0),l(B,"")):l(ee,!1),ie()}function re(){l(D,!e(D))}function V(){l(f,""),l(z,""),l(S,""),l(B,""),l(Y,""),l(oe,""),l(pe,""),l(se,!1),l(ee,!1),ie()}function ie(){p.onFilterParamsChange({startDate:e(f),endDate:e(z),area:e(S),crag:e(B),climbingType:e(Y),sessionType:e(oe),grade:e(pe)})}var xe=Fs(),ye=t(xe);ye.__click=re;var ae=t(ye),N=s(t(ae),4);{var u=P=>{var U=hs();i(P,U)},h=P=>{var U=bs();i(P,U)};c(N,P=>{e(D)?P(u):P(h,!1)})}a(ae),a(ye);var C=s(ye,2);{var M=P=>{var U=Cs(),J=t(U),y=t(J),j=s(t(y),2);Ne(j),j.__change=ie,a(y);var x=s(y,2),n=s(t(x),2);Ne(n),n.__change=ie,a(x);var o=s(x,2),T=s(t(o),2);{var R=Z=>{var te=ys(),le=t(te);Ne(le),le.__input=ie;var Ee=s(le,2);Ee.__click=()=>{l(se,!1),l(S,""),ie()},a(te),Ie(le,()=>e(S),he=>l(S,he)),i(Z,te)},K=Z=>{var te=ws();te.__change=de;var le=t(te);le.value=le.__value="";var Ee=s(le);De(Ee,17,()=>r,Ce,(ze,ge)=>{var ke=xs(),Fe=t(ke,!0);a(ke);var Ae={};g(()=>{d(Fe,e(ge)),Ae!==(Ae=e(ge))&&(ke.value=(ke.__value=e(ge))??"")}),i(ze,ke)});var he=s(Ee);he.value=he.__value="Other",a(te),ka(te,()=>e(S),ze=>l(S,ze)),i(Z,te)};c(T,Z=>{e(se)?Z(R):Z(K,!1)})}a(o);var A=s(o,2),ue=s(t(A),2);{var fe=Z=>{var te=Ss(),le=t(te);Ne(le),le.__input=ie;var Ee=s(le,2);Ee.__click=()=>{l(ee,!1),l(B,""),ie()},a(te),Ie(le,()=>e(B),he=>l(B,he)),i(Z,te)},we=Z=>{var te=Ze(),le=Oe(te);{var Ee=ze=>{var ge=Ds();ge.__change=_e;var ke=t(ge);ke.value=ke.__value="";var Fe=s(ke);De(Fe,17,()=>e($),Ce,(Qe,ea)=>{var je=ks(),Me=t(je,!0);a(je);var Ue={};g(()=>{d(Me,e(ea)),Ue!==(Ue=e(ea))&&(je.value=(je.__value=e(ea))??"")}),i(Qe,je)});var Ae=s(Fe);Ae.value=Ae.__value="Other",a(ge),ka(ge,()=>e(B),Qe=>l(B,Qe)),i(ze,ge)},he=ze=>{var ge=Ts();Ne(ge),ge.__input=ie,g(()=>{Ye(ge,"placeholder",e(S)?"Filter crag...":"Select area first"),ge.disabled=!e(se)&&!e(S)}),Ie(ge,()=>e(B),ke=>l(B,ke)),i(ze,ge)};c(le,ze=>{!e(se)&&e(S)&&e($).length>0?ze(Ee):ze(he,!1)},!0)}i(Z,te)};c(ue,Z=>{e(ee)?Z(fe):Z(we,!1)})}a(A);var L=s(A,2),I=s(t(L),2);I.__change=ie;var me=t(I);me.value=me.__value="";var Se=s(me);De(Se,17,()=>m,Ce,(Z,te)=>{var le=qs(),Ee=t(le,!0);a(le);var he={};g(()=>{d(Ee,e(te)),he!==(he=e(te))&&(le.value=(le.__value=e(te))??"")}),i(Z,le)}),a(I),a(L);var Te=s(L,2),q=s(t(Te),2);q.__change=ie;var _=t(q);_.value=_.__value="";var w=s(_);De(w,17,()=>G,Ce,(Z,te)=>{var le=zs(),Ee=t(le,!0);a(le);var he={};g(()=>{d(Ee,e(te)),he!==(he=e(te))&&(le.value=(le.__value=e(te))??"")}),i(Z,le)}),a(q),a(Te);var ne=s(Te,2),E=s(t(ne),2);Ne(E),E.__input=ie,a(ne),a(J);var W=s(J,2),ce=t(W);ce.__click=V,a(W),a(U),Ie(j,()=>e(f),Z=>l(f,Z)),Ie(n,()=>e(z),Z=>l(z,Z)),ka(I,()=>e(Y),Z=>l(Y,Z)),ka(q,()=>e(oe),Z=>l(oe,Z)),Ie(E,()=>e(pe),Z=>l(pe,Z)),na(3,U,()=>ma,()=>({duration:200})),i(P,U)};c(C,P=>{e(D)&&P(M)})}a(xe),g(()=>Ye(ye,"aria-expanded",e(D))),i(qe,xe),ga()}pa(["click","change","input"]);var Es=v('<label class="type-toggle svelte-1k6anfh"><input type="checkbox"/> <span>Sport?</span></label>'),Gs=v("<option> </option>"),As=v('<div class="edit-form svelte-1k6anfh"><div class="edit-row main svelte-1k6anfh"><input type="text" class="edit-input grade svelte-1k6anfh" placeholder="Grade"/> <input type="text" class="edit-input name svelte-1k6anfh" placeholder="Route Name"/> <!></div> <div class="edit-row meta svelte-1k6anfh"><select class="edit-select svelte-1k6anfh"></select> <div class="attempts-input-wrapper svelte-1k6anfh"><span>#</span> <input type="number" min="1" class="edit-input num svelte-1k6anfh"/></div></div> <div class="edit-row notes svelte-1k6anfh"><textarea class="edit-input notes-area svelte-1k6anfh" placeholder="Notes..."></textarea></div> <div class="edit-actions svelte-1k6anfh"><button class="action-btn cancel svelte-1k6anfh">Cancel</button> <button class="action-btn save svelte-1k6anfh">Save</button></div></div>'),Os=v('<span class="climb-type-tag svelte-1k6anfh"> </span>'),js=v('<span class="notes-preview svelte-1k6anfh"> </span>'),Ns=v('<span class="attempts-count svelte-1k6anfh"> </span>'),Is=v('<div class="detail-row svelte-1k6anfh"><span class="label svelte-1k6anfh">Notes:</span> <p class="notes svelte-1k6anfh"> </p></div>'),Ms=v('<p class="empty-notes svelte-1k6anfh">No notes for this climb.</p>'),Ps=v('<div class="climb-details svelte-1k6anfh"><!> <div class="tags svelte-1k6anfh"><span class="tag type svelte-1k6anfh"> </span> <span class="tag attempt-text svelte-1k6anfh"> </span></div></div>'),Rs=v('<div class="climb-header svelte-1k6anfh" role="button" tabindex="0"><div class="climb-main-info svelte-1k6anfh"><span> </span> <span class="climb-name svelte-1k6anfh"> </span> <!> <!></div> <div class="climb-meta svelte-1k6anfh"><span><span class="icon svelte-1k6anfh"> </span> <!></span> <button class="icon-btn edit-btn svelte-1k6anfh" aria-label="Edit climb" title="Edit climb">‚úé</button> <button class="icon-btn delete-btn svelte-1k6anfh" aria-label="Delete climb" title="Delete climb">üóëÔ∏è</button> <span class="chevron svelte-1k6anfh"> </span></div></div> <!>',1),Bs=v("<div><!></div>");function Vs(qe,p){fa(p,!0);let r=Ra(p,"showClimbType",3,!1),m=k(!1),G=k(!1),D=k(""),f=k(""),z=k(""),S=k(1),B=k(""),Y=k(!1);function oe(){e(G)||l(m,!e(m))}function pe(N){N.stopPropagation(),p.onDelete()}function se(N){N.stopPropagation(),l(D,p.climb.name,!0),l(f,p.climb.grade,!0),l(z,p.climb.attemptType,!0),l(S,p.climb.attemptsNum,!0),l(B,p.climb.notes,!0),l(Y,p.climb.isSport,!0),l(G,!0),l(m,!0)}function ee(N){N.stopPropagation(),l(G,!1)}function $(N){N.stopPropagation();const u={...p.climb,name:e(D),grade:e(f),attemptType:e(z),attemptsNum:e(S),notes:e(B),isSport:e(Y)};p.onUpdate(u),l(G,!1)}function de(){(e(z)==="Flash"||e(z)==="Onsight")&&l(S,1)}const _e={Flash:"‚ö°",Onsight:"üëÅÔ∏è",Redpoint:"üî¥",Dogged:"üõ†Ô∏è",DNF:"‚ùå"},re=["Flash","Onsight","Redpoint","Dogged","DNF"];var V=Bs();let ie;var xe=t(V);{var ye=N=>{var u=As(),h=t(u),C=t(h);Ne(C);var M=s(C,2);Ne(M);var P=s(M,2);{var U=A=>{var ue=Es(),fe=t(ue);Ne(fe),za(2),a(ue),Ja(fe,()=>e(Y),we=>l(Y,we)),i(A,ue)};c(P,A=>{r()&&A(U)})}a(h);var J=s(h,2),y=t(J);y.__change=de,De(y,21,()=>re,Ce,(A,ue)=>{var fe=Gs(),we=t(fe,!0);a(fe);var L={};g(()=>{d(we,e(ue)),L!==(L=e(ue))&&(fe.value=(fe.__value=e(ue))??"")}),i(A,fe)}),a(y);var j=s(y,2),x=s(t(j),2);Ne(x),a(j),a(J);var n=s(J,2),o=t(n);Za(o),a(n);var T=s(n,2),R=t(T);R.__click=ee;var K=s(R,2);K.__click=$,a(T),a(u),g(()=>x.disabled=e(z)==="Flash"||e(z)==="Onsight"),Ie(C,()=>e(f),A=>l(f,A)),Ie(M,()=>e(D),A=>l(D,A)),ka(y,()=>e(z),A=>l(z,A)),Ie(x,()=>e(S),A=>l(S,A)),Ie(o,()=>e(B),A=>l(B,A)),i(N,u)},ae=N=>{var u=Rs(),h=Oe(u);h.__click=oe,h.__keydown=_=>(_.key==="Enter"||_.key===" ")&&oe();var C=t(h),M=t(C);let P;var U=t(M,!0);a(M);var J=s(M,2),y=t(J,!0);a(J);var j=s(J,2);{var x=_=>{var w=Os(),ne=t(w,!0);a(w),g(()=>d(ne,p.climb.isSport?"Sport":"Boulder")),i(_,w)};c(j,_=>{r()&&_(x)})}var n=s(j,2);{var o=_=>{var w=js(),ne=t(w);a(w),g(()=>d(ne,`- ${p.climb.notes??""}`)),i(_,w)};c(n,_=>{!e(m)&&p.climb.notes&&_(o)})}a(C);var T=s(C,2),R=t(T);let K;var A=t(R),ue=t(A,!0);a(A);var fe=s(A,2);{var we=_=>{var w=Ns(),ne=t(w,!0);a(w),g(()=>d(ne,p.climb.attemptsNum)),i(_,w)};c(fe,_=>{p.climb.attemptType!=="Flash"&&p.climb.attemptType!=="Onsight"&&_(we)})}a(R);var L=s(R,2);L.__click=se;var I=s(L,2);I.__click=pe;var me=s(I,2),Se=t(me,!0);a(me),a(T),a(h);var Te=s(h,2);{var q=_=>{var w=Ps(),ne=t(w);{var E=he=>{var ze=Is(),ge=s(t(ze),2),ke=t(ge,!0);a(ge),a(ze),g(()=>d(ke,p.climb.notes)),i(he,ze)},W=he=>{var ze=Ms();i(he,ze)};c(ne,he=>{p.climb.notes?he(E):he(W,!1)})}var ce=s(ne,2),Z=t(ce),te=t(Z,!0);a(Z);var le=s(Z,2),Ee=t(le,!0);a(le),a(ce),a(w),g(()=>{d(te,p.climb.isSport?"Sport":"Boulder"),d(Ee,p.climb.attemptType)}),na(3,w,()=>ma,()=>({duration:150})),i(_,w)};c(Te,_=>{e(m)&&_(q)})}g(()=>{Ye(h,"aria-expanded",e(m)),P=va(M,1,"grade-badge svelte-1k6anfh",null,P,{sport:p.climb.isSport}),d(U,p.climb.grade),d(y,p.climb.name||"Unnamed Route"),K=va(R,1,"attempt-type svelte-1k6anfh",null,K,{flash:p.climb.attemptType==="Flash"}),d(ue,_e[p.climb.attemptType]||p.climb.attemptType),d(Se,e(m)?"‚ñ≤":"‚ñº")}),i(N,u)};c(xe,N=>{e(G)?N(ye):N(ae,!1)})}a(V),g(()=>ie=va(V,1,"climb-entry svelte-1k6anfh",null,ie,{expanded:e(m),editing:e(G)})),i(qe,V),ga()}pa(["change","click","keydown"]);var Us=v('<div class="sector-meta"> </div>'),$s=v('<span class="stat svelte-d5hg2r"> </span>'),Ws=v('<span class="status-icon pending svelte-d5hg2r" title="Waiting to sync">üîÑ</span>'),Hs=v('<span class="status-icon error svelte-d5hg2r" title="Sync error">‚ö†Ô∏è</span>'),Zs=v('<span class="chip svelte-d5hg2r"> </span>'),Js=v('<span class="text-none svelte-d5hg2r">None</span>'),Ks=v('<div class="detail-item svelte-d5hg2r"><span class="label svelte-d5hg2r">Difficulty</span> <span class="value svelte-d5hg2r"> </span></div>'),Xs=v('<span class="chip svelte-d5hg2r"> </span>'),Ys=v('<span class="text-none svelte-d5hg2r">None</span>'),Qs=v('<div class="detail-item svelte-d5hg2r"><span class="label svelte-d5hg2r">Category</span> <div class="value-chips svelte-d5hg2r"><!></div></div>'),er=v('<span class="chip svelte-d5hg2r"> </span>'),ar=v('<span class="text-none svelte-d5hg2r">None</span>'),tr=v('<div class="detail-item svelte-d5hg2r"><span class="label svelte-d5hg2r">Focus</span> <div class="value-chips svelte-d5hg2r"><!></div></div>'),sr=v('<span class="chip svelte-d5hg2r"> </span>'),rr=v('<span class="text-none svelte-d5hg2r">None</span>'),ir=v('<div class="detail-item svelte-d5hg2r"><span class="label svelte-d5hg2r">Energy System</span> <div class="value-chips svelte-d5hg2r"><!></div></div>'),lr=v('<div class="metric svelte-d5hg2r"><span class="label svelte-d5hg2r">Open Grip</span> <div class="bar-container svelte-d5hg2r"><div class="bar-fill svelte-d5hg2r"></div></div> <span class="score svelte-d5hg2r"> </span></div>'),vr=v('<div class="metric svelte-d5hg2r"><span class="label svelte-d5hg2r">Crimp Grip</span> <div class="bar-container svelte-d5hg2r"><div class="bar-fill svelte-d5hg2r"></div></div> <span class="score svelte-d5hg2r"> </span></div>'),nr=v('<div class="metric svelte-d5hg2r"><span class="label svelte-d5hg2r">Pinch Grip</span> <div class="bar-container svelte-d5hg2r"><div class="bar-fill svelte-d5hg2r"></div></div> <span class="score svelte-d5hg2r"> </span></div>'),or=v('<div class="metric svelte-d5hg2r"><span class="label svelte-d5hg2r">Sloper Grip</span> <div class="bar-container svelte-d5hg2r"><div class="bar-fill svelte-d5hg2r"></div></div> <span class="score svelte-d5hg2r"> </span></div>'),dr=v('<div class="metric svelte-d5hg2r"><span class="label svelte-d5hg2r">Jug Grip</span> <div class="bar-container svelte-d5hg2r"><div class="bar-fill svelte-d5hg2r"></div></div> <span class="score svelte-d5hg2r"> </span></div>'),cr=v('<p class="no-climbs svelte-d5hg2r">No climbs logged for this session.</p>'),pr=v('<div class="card-body svelte-d5hg2r"><div class="details-grid svelte-d5hg2r"><div class="detail-item svelte-d5hg2r"><span class="label svelte-d5hg2r">Training Type</span> <div class="value-chips svelte-d5hg2r"><!></div></div> <!> <!> <!> <!></div> <div class="metrics-container svelte-d5hg2r"><div class="metric svelte-d5hg2r"><span class="label svelte-d5hg2r">Finger Load</span> <div class="bar-container svelte-d5hg2r"><div class="bar-fill svelte-d5hg2r"></div></div> <span class="score svelte-d5hg2r"> </span></div> <div class="metric svelte-d5hg2r"><span class="label svelte-d5hg2r">Shoulder Load</span> <div class="bar-container svelte-d5hg2r"><div class="bar-fill svelte-d5hg2r"></div></div> <span class="score svelte-d5hg2r"> </span></div> <div class="metric svelte-d5hg2r"><span class="label svelte-d5hg2r">Forearm Load</span> <div class="bar-container svelte-d5hg2r"><div class="bar-fill svelte-d5hg2r"></div></div> <span class="score svelte-d5hg2r"> </span></div> <!> <!> <!> <!> <!></div> <div class="climbs-list svelte-d5hg2r"><h4 class="svelte-d5hg2r">Climbs</h4> <div class="climbs-container svelte-d5hg2r"><!> <!></div></div></div>'),_r=v('<div><div class="card-header svelte-d5hg2r" role="button" tabindex="0"><div class="header-main svelte-d5hg2r"><div class="date-badge svelte-d5hg2r"><span class="day svelte-d5hg2r"> </span> <span class="month svelte-d5hg2r"> </span></div> <div class="session-info svelte-d5hg2r"><div class="session-text svelte-d5hg2r"><h3 class="location svelte-d5hg2r"> <!></h3> <!> <div class="session-meta svelte-d5hg2r"><span class="type-tag svelte-d5hg2r"> </span> <span class="stat svelte-d5hg2r"> </span> <!></div></div> <div class="load-summary svelte-d5hg2r"><div class="load-badge finger svelte-d5hg2r"> </div> <div class="load-badge shoulder svelte-d5hg2r"> </div> <div class="load-badge forearm svelte-d5hg2r"> </div></div></div></div> <div class="header-actions"><div class="header-status svelte-d5hg2r"><!></div> <button class="btn-icon delete-session" title="Delete Session">üóëÔ∏è</button> <span class="chevron svelte-d5hg2r"> </span></div></div> <!></div>');function ur(qe,p){fa(p,!0);let r=Ra(p,"session",7),m=k(!1),G=k(!1);function D(){l(m,!e(m))}function f(){l(G,!0)}function z(E){const W=[...r().climbs];W.splice(E,1),Ia(r().id,{climbs:W}),p.onDelete()}function S(E,W){const ce=[...r().climbs];ce[E]=W,B(ce)}async function B(E){if(Ia(r().id,{climbs:E}),r().climbs=E,Ka()){const W={date:r().date,area:r().area,crag:r().crag,sector:r().sector,climbingType:r().climbingType,trainingTypes:r().trainingTypes||[],difficulty:r().difficulty,categories:r().categories||[],energySystems:r().energySystems||[],techniqueFocuses:r().techniqueFocuses||[],fingerLoad:r().fingerLoad,shoulderLoad:r().shoulderLoad,forearmLoad:r().forearmLoad,climbs:E};try{const ce=await rt(r().id,W);ce.ok?(Xa(r().id),r().syncStatus="synced"):(console.error("Failed to sync update:",ce.error),Ma(r().id),r().syncStatus="error")}catch(ce){console.error("Exception syncing update:",ce),Ma(r().id),r().syncStatus="error"}}}let Y=ca(()=>r().climbs?.length??0),oe=ca(()=>(r().climbs||[]).reduce((E,W)=>{const ce=parseInt(W.grade.replace(/\D/g,""))||0,Z=parseInt(E.replace(/\D/g,""))||0;return ce>Z?W.grade:E},"V0/4a"));var pe=_r();let se;var ee=t(pe);ee.__click=D,ee.__keydown=E=>E.key==="Enter"&&D();var $=t(ee),de=t($),_e=t(de),re=t(_e,!0);a(_e);var V=s(_e,2),ie=t(V,!0);a(V),a(de);var xe=s(de,2),ye=t(xe),ae=t(ye),N=t(ae),u=s(N);{var h=E=>{var W=qa();g(()=>d(W,`- ${r().crag??""}`)),i(E,W)};c(u,E=>{r().crag&&E(h)})}a(ae);var C=s(ae,2);{var M=E=>{var W=Us(),ce=t(W);a(W),g(()=>d(ce,`üìç ${r().sector??""}`)),i(E,W)};c(C,E=>{r().sector&&E(M)})}var P=s(C,2),U=t(P),J=t(U,!0);a(U);var y=s(U,2),j=t(y);a(y);var x=s(y,2);{var n=E=>{var W=$s(),ce=t(W);a(W),g(()=>d(ce,`Max: ${e(oe)??""}`)),i(E,W)};c(x,E=>{e(Y)>0&&E(n)})}a(P),a(ye);var o=s(ye,2),T=t(o),R=t(T,!0);a(T);var K=s(T,2),A=t(K,!0);a(K);var ue=s(K,2),fe=t(ue,!0);a(ue),a(o),a(xe),a($);var we=s($,2),L=t(we),I=t(L);{var me=E=>{var W=Ws();i(E,W)},Se=E=>{var W=Ze(),ce=Oe(W);{var Z=te=>{var le=Hs();i(te,le)};c(ce,te=>{r().syncStatus==="error"&&te(Z)},!0)}i(E,W)};c(I,E=>{r().syncStatus==="pending"?E(me):E(Se,!1)})}a(L);var Te=s(L,2);Te.__click=E=>{E.stopPropagation(),f()};var q=s(Te,2),_=t(q,!0);a(q),a(we),a(ee);var w=s(ee,2);{var ne=E=>{var W=pr(),ce=t(W),Z=t(ce),te=s(t(Z),2),le=t(te);{var Ee=b=>{var F=Ze(),O=Oe(F);De(O,17,()=>r().trainingTypes,Ce,(ve,X)=>{var be=Zs(),Le=t(be,!0);a(be),g(()=>d(Le,e(X))),i(ve,be)}),i(b,F)},he=b=>{var F=Js();i(b,F)};c(le,b=>{r().trainingTypes&&r().trainingTypes.length>0&&!r().trainingTypes.includes("None")?b(Ee):b(he,!1)})}a(te),a(Z);var ze=s(Z,2);{var ge=b=>{var F=Ks(),O=s(t(F),2),ve=t(O,!0);a(O),a(F),g(()=>d(ve,r().difficulty)),i(b,F)};c(ze,b=>{r().difficulty&&b(ge)})}var ke=s(ze,2);{var Fe=b=>{var F=Qs(),O=s(t(F),2),ve=t(O);{var X=Le=>{var Pe=Ze(),ha=Oe(Pe);De(ha,17,()=>r().categories,Ce,(Re,ba)=>{var Sa=Xs(),Oa=t(Sa,!0);a(Sa),g(()=>d(Oa,e(ba))),i(Re,Sa)}),i(Le,Pe)},be=Le=>{var Pe=Ys();i(Le,Pe)};c(ve,Le=>{r().categories.length>0&&!r().categories.includes("None")?Le(X):Le(be,!1)})}a(O),a(F),i(b,F)};c(ke,b=>{r().categories?.length&&b(Fe)})}var Ae=s(ke,2);{var Qe=b=>{var F=tr(),O=s(t(F),2),ve=t(O);{var X=Le=>{var Pe=Ze(),ha=Oe(Pe);De(ha,17,()=>r().techniqueFocuses,Ce,(Re,ba)=>{var Sa=er(),Oa=t(Sa,!0);a(Sa),g(()=>d(Oa,e(ba))),i(Re,Sa)}),i(Le,Pe)},be=Le=>{var Pe=ar();i(Le,Pe)};c(ve,Le=>{r().techniqueFocuses.length>0&&!r().techniqueFocuses.includes("None")?Le(X):Le(be,!1)})}a(O),a(F),i(b,F)};c(Ae,b=>{r().techniqueFocuses?.length&&b(Qe)})}var ea=s(Ae,2);{var je=b=>{var F=ir(),O=s(t(F),2),ve=t(O);{var X=Le=>{var Pe=Ze(),ha=Oe(Pe);De(ha,17,()=>r().energySystems,Ce,(Re,ba)=>{var Sa=sr(),Oa=t(Sa,!0);a(Sa),g(()=>d(Oa,e(ba))),i(Re,Sa)}),i(Le,Pe)},be=Le=>{var Pe=rr();i(Le,Pe)};c(ve,Le=>{r().energySystems.length>0&&!r().energySystems.includes("None")?Le(X):Le(be,!1)})}a(O),a(F),i(b,F)};c(ea,b=>{r().energySystems?.length&&b(je)})}a(ce);var Me=s(ce,2),Ue=t(Me),ta=s(t(Ue),2),aa=t(ta);a(ta);var $e=s(ta,2),_a=t($e);a($e),a(Ue);var We=s(Ue,2),oa=s(t(We),2),da=t(oa);a(oa);var Ge=s(oa,2),Be=t(Ge);a(Ge),a(We);var Ve=s(We,2),sa=s(t(Ve),2),ra=t(sa);a(sa);var ia=s(sa,2),He=t(ia);a(ia),a(Ve);var Je=s(Ve,2);{var Ta=b=>{var F=lr(),O=s(t(F),2),ve=t(O);a(O);var X=s(O,2),be=t(X);a(X),a(F),g(()=>{la(ve,`width: ${r().openGrip/5*100}%`),d(be,`${r().openGrip??""}/5`)}),i(b,F)};c(Je,b=>{r().openGrip&&b(Ta)})}var Ke=s(Je,2);{var Ca=b=>{var F=vr(),O=s(t(F),2),ve=t(O);a(O);var X=s(O,2),be=t(X);a(X),a(F),g(()=>{la(ve,`width: ${r().crimpGrip/5*100}%`),d(be,`${r().crimpGrip??""}/5`)}),i(b,F)};c(Ke,b=>{r().crimpGrip&&b(Ca)})}var xa=s(Ke,2);{var wa=b=>{var F=nr(),O=s(t(F),2),ve=t(O);a(O);var X=s(O,2),be=t(X);a(X),a(F),g(()=>{la(ve,`width: ${r().pinchGrip/5*100}%`),d(be,`${r().pinchGrip??""}/5`)}),i(b,F)};c(xa,b=>{r().pinchGrip&&b(wa)})}var Da=s(xa,2);{var Fa=b=>{var F=or(),O=s(t(F),2),ve=t(O);a(O);var X=s(O,2),be=t(X);a(X),a(F),g(()=>{la(ve,`width: ${r().sloperGrip/5*100}%`),d(be,`${r().sloperGrip??""}/5`)}),i(b,F)};c(Da,b=>{r().sloperGrip&&b(Fa)})}var La=s(Da,2);{var Xe=b=>{var F=dr(),O=s(t(F),2),ve=t(O);a(O);var X=s(O,2),be=t(X);a(X),a(F),g(()=>{la(ve,`width: ${r().jugGrip/5*100}%`),d(be,`${r().jugGrip??""}/5`)}),i(b,F)};c(La,b=>{r().jugGrip&&b(Xe)})}a(Me);var ua=s(Me,2),Ea=s(t(ua),2),Ga=t(Ea);De(Ga,17,()=>r().climbs||[],Ce,(b,F,O)=>{{let ve=ca(()=>r().climbingType==="Mixed");Vs(b,{get climb(){return e(F)},onDelete:()=>z(O),onUpdate:X=>S(O,X),get showClimbType(){return e(ve)}})}});var H=s(Ga,2);{var Q=b=>{var F=cr();i(b,F)};c(H,b=>{(r().climbs||[]).length===0&&b(Q)})}a(Ea),a(ua),a(W),g(()=>{la(aa,`width: ${r().fingerLoad/5*100}%`),d(_a,`${r().fingerLoad??""}/5`),la(da,`width: ${r().shoulderLoad/5*100}%`),d(Be,`${r().shoulderLoad??""}/5`),la(ra,`width: ${r().forearmLoad/5*100}%`),d(He,`${r().forearmLoad??""}/5`)}),na(3,W,()=>ma,()=>({duration:150})),i(E,W)};c(w,E=>{e(m)&&E(ne)})}a(pe),g((E,W)=>{se=va(pe,1,"session-card svelte-d5hg2r",null,se,{expanded:e(m)}),Ye(ee,"aria-expanded",e(m)),d(re,E),d(ie,W),d(N,`${r().area??""} `),d(J,r().climbingType),d(j,`${e(Y)??""} climbs`),Ye(T,"title",`Finger Load: ${r().fingerLoad??""}`),d(R,r().fingerLoad),Ye(K,"title",`Shoulder Load: ${r().shoulderLoad??""}`),d(A,r().shoulderLoad),Ye(ue,"title",`Forearm Load: ${r().forearmLoad??""}`),d(fe,r().forearmLoad),d(_,e(m)?"‚ñ≤":"‚ñº")},[()=>new Date(r().date).getDate(),()=>new Date(r().date).toLocaleDateString(void 0,{month:"short"})]),i(qe,pe),ga()}pa(["click","keydown"]);var fr=v('<span class="spinner svelte-1s7jdlh"></span> Fetching...',1),gr=v('<div class="error-banner svelte-1s7jdlh"> </div>'),mr=v('<small class="svelte-1s7jdlh">Try adjusting your filters.</small>'),hr=v('<div class="empty-state svelte-1s7jdlh"><p class="svelte-1s7jdlh">No outdoor climbing sessions found.</p> <!></div>'),br=v('<div class="load-more-container svelte-1s7jdlh"><button class="load-more-btn svelte-1s7jdlh"> </button></div>'),yr=v('<div class="view-container svelte-1s7jdlh"><div class="view-header svelte-1s7jdlh"><h2 class="view-title svelte-1s7jdlh">‚õ∞Ô∏è Outdoor Climbing History</h2> <div class="header-actions svelte-1s7jdlh"><button class="action-btn secondary svelte-1s7jdlh" title="Export filtered data to CSV">üì• Export</button> <button class="action-btn svelte-1s7jdlh" title="Fetch data from cloud"><!></button></div></div> <!> <!> <div class="info-bar svelte-1s7jdlh"><div class="legend-wrapper svelte-1s7jdlh"><!></div> <div class="load-key svelte-1s7jdlh"><span class="key-label svelte-1s7jdlh">Load:</span> <div class="key-item svelte-1s7jdlh"><span class="dot finger svelte-1s7jdlh"></span> Finger</div> <div class="key-item svelte-1s7jdlh"><span class="dot shoulder svelte-1s7jdlh"></span> Shoulder</div> <div class="key-item svelte-1s7jdlh"><span class="dot forearm svelte-1s7jdlh"></span> Forearm</div></div></div> <div class="sessions-list"><!> <!> <!></div></div>');function xr(qe,p){fa(p,!0);let r=k(ya([])),m=k(ya([])),G=k(!1),D=k(""),f=k(ya({startDate:"",endDate:"",area:"",crag:"",climbingType:"",sessionType:"",grade:""})),z=k(20);const S=20;Ua(()=>{B()});function B(){const n=Aa("outdoor_climb");l(r,n.sort((o,T)=>new Date(T.date).getTime()-new Date(o.date).getTime()),!0),se()}async function Y(){l(G,!0),l(D,"");try{await ja();const n=await it();n.ok&&n.data?oe(n.data):l(D,n.error||"Failed to fetch data",!0)}catch(n){l(D,n instanceof Error?n.message:"Unknown error",!0)}finally{l(G,!1)}}function oe(n){const o=n.map(R=>({...R,activityType:"outdoor_climb",createdAt:new Date().toISOString(),updatedAt:new Date().toISOString(),syncStatus:"synced",syncedAt:new Date().toISOString(),openGrip:0,crimpGrip:0,pinchGrip:0,sloperGrip:0,jugGrip:0}));Na(o);const T=Aa("outdoor_climb");l(r,T.sort((R,K)=>new Date(K.date).getTime()-new Date(R.date).getTime()),!0),se()}function pe(n){l(f,n,!0),se()}function se(){l(z,S),l(m,e(r).filter(n=>{if(e(f).startDate&&n.date<e(f).startDate||e(f).endDate&&n.date>e(f).endDate||e(f).area&&!n.area.toLowerCase().includes(e(f).area.toLowerCase())||e(f).crag&&!n.crag.toLowerCase().includes(e(f).crag.toLowerCase()))return!1;if(e(f).climbingType&&(n.climbingType==="Leading"?"Sport":n.climbingType)!==e(f).climbingType)if(n.climbingType==="Mixed")if(e(f).climbingType==="Bouldering"){if(!n.climbs.some(T=>!T.isSport))return!1}else if(e(f).climbingType==="Sport"||e(f).climbingType==="Trad"){if(!n.climbs.some(T=>T.isSport))return!1}else return!1;else return!1;if(e(f).sessionType&&!n.trainingTypes?.includes(e(f).sessionType))return!1;if(e(f).grade){const o=e(f).grade.trim().toLowerCase();if(!n.climbs.some(R=>R.grade.trim().toLowerCase()===o))return!1}return!0}),!0)}function ee(){l(z,e(z)+S)}var $=yr(),de=t($),_e=s(t(de),2),re=t(_e);re.__click=()=>Wa(e(m),"outdoor_climbs");var V=s(re,2);V.__click=Y;var ie=t(V);{var xe=n=>{var o=fr();za(),i(n,o)},ye=n=>{var o=qa("‚òÅÔ∏è Fetch Data");i(n,o)};c(ie,n=>{e(G)?n(xe):n(ye,!1)})}a(V),a(_e),a(de);var ae=s(de,2);{var N=n=>{var o=gr(),T=t(o,!0);a(o),g(()=>d(T,e(D))),na(3,o,()=>ma),i(n,o)};c(ae,n=>{e(D)&&n(N)})}var u=s(ae,2);Ls(u,{onFilterParamsChange:pe});var h=s(u,2),C=t(h),M=t(C);Ya(M),a(C),za(2),a(h);var P=s(h,2),U=t(P);De(U,17,()=>e(m).slice(0,e(z)),n=>n.id,(n,o)=>{ur(n,{get session(){return e(o)},onDelete:B})});var J=s(U,2);{var y=n=>{var o=hr(),T=s(t(o),2);{var R=K=>{var A=mr();i(K,A)};c(T,K=>{e(r).length>0&&K(R)})}a(o),i(n,o)};c(J,n=>{e(m).length===0&&n(y)})}var j=s(J,2);{var x=n=>{var o=br(),T=t(o);T.__click=ee;var R=t(T);a(T),a(o),g(()=>d(R,`Load More (${e(m).length-e(z)} remaining)`)),i(n,o)};c(j,n=>{e(z)<e(m).length&&n(x)})}a(P),a($),g(()=>V.disabled=e(G)),i(qe,$),ga()}pa(["click"]);var wr=v('<span class="chevron svelte-11rkzid">‚ñ≤</span>'),Sr=v('<span class="chevron svelte-11rkzid">‚ñº</span>'),kr=v('<div class="filter-body svelte-11rkzid"><div class="filter-grid svelte-11rkzid"><div class="filter-item svelte-11rkzid"><label for="start-date" class="svelte-11rkzid">Start Date</label> <input type="date" id="start-date" class="svelte-11rkzid"/></div> <div class="filter-item svelte-11rkzid"><label for="end-date" class="svelte-11rkzid">End Date</label> <input type="date" id="end-date" class="svelte-11rkzid"/></div> <div class="filter-item svelte-11rkzid"><label for="name-filter" class="svelte-11rkzid">Session Name</label> <input type="text" id="name-filter" placeholder="e.g. Leg Day" class="svelte-11rkzid"/></div> <div class="filter-item svelte-11rkzid"><label for="block-filter" class="svelte-11rkzid">Training Block</label> <select id="block-filter" class="svelte-11rkzid"><option>All Blocks</option><option>Strength</option><option>Power</option><option>Power Endurance</option><option>Muscular Endurance</option></select></div></div> <div class="filter-actions svelte-11rkzid"><button class="reset-btn svelte-11rkzid">Reset Filters</button></div></div>'),Dr=v('<div class="filter-container svelte-11rkzid"><button class="filter-header svelte-11rkzid"><div class="header-content svelte-11rkzid"><span class="icon svelte-11rkzid">üîç</span> <span class="title svelte-11rkzid">Filters</span> <!></div></button> <!></div>');function Tr(qe,p){fa(p,!0);let r=k(!1),m=k(""),G=k(""),D=k(""),f=k("");function z(){l(r,!e(r))}function S(){l(m,""),l(G,""),l(D,""),l(f,""),B()}function B(){p.onFilterParamsChange({startDate:e(m),endDate:e(G),name:e(D),trainingBlock:e(f)})}var Y=Dr(),oe=t(Y);oe.__click=z;var pe=t(oe),se=s(t(pe),4);{var ee=re=>{var V=wr();i(re,V)},$=re=>{var V=Sr();i(re,V)};c(se,re=>{e(r)?re(ee):re($,!1)})}a(pe),a(oe);var de=s(oe,2);{var _e=re=>{var V=kr(),ie=t(V),xe=t(ie),ye=s(t(xe),2);Ne(ye),ye.__change=B,a(xe);var ae=s(xe,2),N=s(t(ae),2);Ne(N),N.__change=B,a(ae);var u=s(ae,2),h=s(t(u),2);Ne(h),h.__input=B,a(u);var C=s(u,2),M=s(t(C),2);M.__change=B;var P=t(M);P.value=P.__value="";var U=s(P);U.value=U.__value="Strength";var J=s(U);J.value=J.__value="Power";var y=s(J);y.value=y.__value="Power Endurance";var j=s(y);j.value=j.__value="Muscular Endurance",a(M),a(C),a(ie);var x=s(ie,2),n=t(x);n.__click=S,a(x),a(V),Ie(ye,()=>e(m),o=>l(m,o)),Ie(N,()=>e(G),o=>l(G,o)),Ie(h,()=>e(D),o=>l(D,o)),ka(M,()=>e(f),o=>l(f,o)),na(3,V,()=>ma,()=>({duration:200})),i(re,V)};c(de,re=>{e(r)&&re(_e)})}a(Y),g(()=>Ye(oe,"aria-expanded",e(r))),i(qe,Y),ga()}pa(["click","change","input"]);var qr=v('<span class="status-icon pending svelte-cirrfc" title="Waiting to sync">üîÑ</span>'),zr=v('<span class="status-icon error svelte-cirrfc" title="Sync error">‚ö†Ô∏è</span>'),Cr=v('<div class="bw-info svelte-cirrfc"><span class="label svelte-cirrfc">Bodyweight:</span> </div>'),Fr=v('<span class="muscle-tag svelte-cirrfc"> </span>'),Lr=v('<span class="muscle-tag svelte-cirrfc"> </span>'),Er=v('<div class="muscle-tags svelte-cirrfc"><!> <!></div>'),Gr=v('<span class="tag w svelte-cirrfc">W</span>'),Ar=v('<span class="tag f svelte-cirrfc">F</span>'),Or=v('<span class="tag d svelte-cirrfc">D</span>'),jr=v('<div><span class="set-num svelte-cirrfc"></span> <!> <!> <!> <span class="val svelte-cirrfc"><span class="weight"> </span> <span class="x svelte-cirrfc">x</span> <span class="reps"> </span></span></div>'),Nr=v('<div class="exercise-item svelte-cirrfc"><div class="exercise-header svelte-cirrfc"><h4 class="svelte-cirrfc"> </h4> <!></div> <div class="sets-grid svelte-cirrfc"></div></div>'),Ir=v('<div class="subcategory-group svelte-cirrfc"><h5 class="subcategory-header svelte-cirrfc"> </h5> <!></div>'),Mr=v('<div class="category-group svelte-cirrfc"><h4 class="category-header svelte-cirrfc"> </h4> <!></div>'),Pr=v('<div class="card-body svelte-cirrfc"><!> <div class="exercises-list svelte-cirrfc"></div></div>'),Rr=v('<div><div class="card-header svelte-cirrfc" role="button" tabindex="0"><div class="header-main svelte-cirrfc"><div class="date-badge svelte-cirrfc"><span class="day svelte-cirrfc"> </span> <span class="month svelte-cirrfc"> </span></div> <div class="session-info svelte-cirrfc"><div class="session-text"><h3 class="name svelte-cirrfc"> </h3> <div class="session-meta svelte-cirrfc"><span class="stat svelte-cirrfc"> </span> <span class="stat svelte-cirrfc"> </span> <span class="stat svelte-cirrfc"> </span></div></div></div></div> <div class="header-actions svelte-cirrfc"><div class="header-status"><!></div> <button class="btn-icon delete-session svelte-cirrfc" title="Delete Session">üóëÔ∏è</button> <span class="chevron svelte-cirrfc"> </span></div></div> <!></div> <!>',1);function Br(qe,p){fa(p,!0);let r=k(!1),m=k(!1);function G(){l(r,!e(r))}function D(){l(m,!0)}function f(){$a(p.session.id),l(m,!1),p.onDelete()}function z(L){return lt.find(I=>I.name===L)}let S=ca(()=>p.session.exercises?.length??0),B=ca(()=>(p.session.exercises||[]).reduce((L,I)=>L+(I.sets?.length||0),0)),Y=ca(()=>(p.session.exercises||[]).reduce((L,I)=>L+(I.sets||[]).reduce((me,Se)=>me+(Se.weight||0)*(Se.reps||0),0),0)),oe=ca(()=>(p.session.exercises||[]).reduce((L,I)=>{const me=z(I.name),Se=me?.category||"Other",Te=me?.subcategory||"Misc";return L[Se]||(L[Se]={}),L[Se][Te]||(L[Se][Te]=[]),L[Se][Te].push(I),L},{}));var pe=Rr(),se=Oe(pe);let ee;var $=t(se);$.__click=G,$.__keydown=L=>L.key==="Enter"&&G();var de=t($),_e=t(de),re=t(_e),V=t(re,!0);a(re);var ie=s(re,2),xe=t(ie,!0);a(ie),a(_e);var ye=s(_e,2),ae=t(ye),N=t(ae),u=t(N,!0);a(N);var h=s(N,2),C=t(h),M=t(C);a(C);var P=s(C,2),U=t(P);a(P);var J=s(P,2),y=t(J);a(J),a(h),a(ae),a(ye),a(de);var j=s(de,2),x=t(j),n=t(x);{var o=L=>{var I=qr();i(L,I)},T=L=>{var I=Ze(),me=Oe(I);{var Se=Te=>{var q=zr();i(Te,q)};c(me,Te=>{p.session.syncStatus==="error"&&Te(Se)},!0)}i(L,I)};c(n,L=>{p.session.syncStatus==="pending"?L(o):L(T,!1)})}a(x);var R=s(x,2);R.__click=L=>{L.stopPropagation(),D()};var K=s(R,2),A=t(K,!0);a(K),a(j),a($);var ue=s($,2);{var fe=L=>{var I=Pr(),me=t(I);{var Se=q=>{var _=Cr(),w=s(t(_));a(_),g(()=>d(w,` ${p.session.bodyweight??""}kg`)),i(q,_)};c(me,q=>{p.session.bodyweight&&q(Se)})}var Te=s(me,2);De(Te,21,()=>Object.entries(e(oe)),Ce,(q,_)=>{var w=ca(()=>Ha(e(_),2));let ne=()=>e(w)[0],E=()=>e(w)[1];var W=Mr(),ce=t(W),Z=t(ce,!0);a(ce);var te=s(ce,2);De(te,17,()=>Object.entries(E()),Ce,(le,Ee)=>{var he=ca(()=>Ha(e(Ee),2));let ze=()=>e(he)[0],ge=()=>e(he)[1];var ke=Ir(),Fe=t(ke),Ae=t(Fe,!0);a(Fe);var Qe=s(Fe,2);De(Qe,17,ge,Ce,(ea,je)=>{const Me=ca(()=>z(e(je).name));var Ue=Nr(),ta=t(Ue),aa=t(ta),$e=t(aa,!0);a(aa);var _a=s(aa,2);{var We=da=>{var Ge=Er(),Be=t(Ge);De(Be,17,()=>e(Me).targetMuscles.slice(0,3),Ce,(ra,ia)=>{var He=Fr(),Je=t(He,!0);a(He),g(()=>d(Je,e(ia))),i(ra,He)});var Ve=s(Be,2);{var sa=ra=>{var ia=Lr(),He=t(ia);a(ia),g(()=>d(He,`+${e(Me).targetMuscles.length-3}`)),i(ra,ia)};c(Ve,ra=>{e(Me).targetMuscles.length>3&&ra(sa)})}a(Ge),i(da,Ge)};c(_a,da=>{e(Me)&&da(We)})}a(ta);var oa=s(ta,2);De(oa,21,()=>e(je).sets,Ce,(da,Ge,Be)=>{var Ve=jr();let sa;var ra=t(Ve);ra.textContent=Be+1;var ia=s(ra,2);{var He=Xe=>{var ua=Gr();i(Xe,ua)};c(ia,Xe=>{e(Ge).isWarmup&&Xe(He)})}var Je=s(ia,2);{var Ta=Xe=>{var ua=Ar();i(Xe,ua)};c(Je,Xe=>{e(Ge).isFailure&&Xe(Ta)})}var Ke=s(Je,2);{var Ca=Xe=>{var ua=Or();i(Xe,ua)};c(Ke,Xe=>{e(Ge).isDropSet&&Xe(Ca)})}var xa=s(Ke,2),wa=t(xa),Da=t(wa);a(wa);var Fa=s(wa,4),La=t(Fa,!0);a(Fa),a(xa),a(Ve),g(()=>{sa=va(Ve,1,"set-pill svelte-cirrfc",null,sa,{completed:e(Ge).completed,warmup:e(Ge).isWarmup}),d(Da,`${e(Ge).weight??""}kg`),d(La,e(Ge).reps)}),i(da,Ve)}),a(oa),a(Ue),g(()=>d($e,e(je).name)),i(ea,Ue)}),a(ke),g(()=>d(Ae,ze())),i(le,ke)}),a(W),g(()=>d(Z,ne())),i(q,W)}),a(Te),a(I),na(3,I,()=>ma,()=>({duration:150})),i(L,I)};c(ue,L=>{e(r)&&L(fe)})}a(se);var we=s(se,2);Pa(we,{get isOpen(){return e(m)},title:"Delete Session",message:"Are you sure you want to delete this session? This cannot be undone.",onConfirm:f,onCancel:()=>l(m,!1)}),g((L,I,me)=>{ee=va(se,1,"session-card svelte-cirrfc",null,ee,{expanded:e(r)}),Ye($,"aria-expanded",e(r)),d(V,L),d(xe,I),d(u,p.session.name),d(M,`${e(S)??""} Exercises`),d(U,`${e(B)??""} Sets`),d(y,`~${me??""}kg Vol`),d(A,e(r)?"‚ñ≤":"‚ñº")},[()=>new Date(p.session.date).getDate(),()=>new Date(p.session.date).toLocaleDateString("en-GB",{month:"short"}),()=>Math.round(e(Y)).toLocaleString()]),i(qe,pe),ga()}pa(["click","keydown"]);var Vr=v('<span class="spinner svelte-133enjd"></span> Fetching...',1),Ur=v('<div class="error-banner svelte-133enjd"> </div>'),$r=v('<small class="svelte-133enjd">Try adjusting your filters.</small>'),Wr=v('<div class="empty-state svelte-133enjd"><p class="svelte-133enjd">No gym sessions found.</p> <!></div>'),Hr=v('<div class="load-more-container svelte-133enjd"><button class="load-more-btn svelte-133enjd"> </button></div>'),Zr=v('<div class="view-container svelte-133enjd"><div class="view-header svelte-133enjd"><h2 class="view-title svelte-133enjd">üèãÔ∏è Gym Session History</h2> <div class="header-actions svelte-133enjd"><button class="action-btn secondary svelte-133enjd" title="Export filtered data to CSV">üì• Export</button> <button class="action-btn svelte-133enjd" title="Fetch data from cloud"><!></button></div></div> <!> <!> <div class="sessions-list"><!> <!> <!></div></div>');function Jr(qe,p){fa(p,!0);let r=k(ya([])),m=k(ya([])),G=k(!1),D=k(""),f=k(ya({startDate:"",endDate:"",name:"",trainingBlock:""})),z=k(20);const S=20;Ua(()=>{B()});function B(){const y=Aa("gym_session");l(r,y.sort((j,x)=>new Date(x.date).getTime()-new Date(j.date).getTime()),!0),se()}async function Y(){l(G,!0),l(D,"");try{await ja();const y=await vt();y.ok&&y.data?oe(y.data):l(D,y.error||"Failed to fetch data",!0)}catch(y){l(D,y instanceof Error?y.message:"Unknown error",!0)}finally{l(G,!1)}}function oe(y){const j=y.map(n=>({...n,activityType:"gym_session",syncStatus:"synced",syncedAt:new Date().toISOString(),createdAt:n.createdAt||new Date().toISOString(),updatedAt:n.updatedAt||new Date().toISOString()}));Na(j);const x=Aa("gym_session");l(r,x.sort((n,o)=>new Date(o.date).getTime()-new Date(n.date).getTime()),!0),se()}function pe(y){l(f,y,!0),se()}function se(){l(z,S),l(m,e(r).filter(y=>!(e(f).startDate&&y.date<e(f).startDate||e(f).endDate&&y.date>e(f).endDate||e(f).name&&!y.name.toLowerCase().includes(e(f).name.toLowerCase())||e(f).trainingBlock&&y.trainingBlock!==e(f).trainingBlock)),!0)}function ee(){l(z,e(z)+S)}var $=Zr(),de=t($),_e=s(t(de),2),re=t(_e);re.__click=()=>Wa(e(m),"gym_sessions");var V=s(re,2);V.__click=Y;var ie=t(V);{var xe=y=>{var j=Vr();za(),i(y,j)},ye=y=>{var j=qa("‚òÅÔ∏è Fetch Data");i(y,j)};c(ie,y=>{e(G)?y(xe):y(ye,!1)})}a(V),a(_e),a(de);var ae=s(de,2);{var N=y=>{var j=Ur(),x=t(j,!0);a(j),g(()=>d(x,e(D))),na(3,j,()=>ma),i(y,j)};c(ae,y=>{e(D)&&y(N)})}var u=s(ae,2);Tr(u,{onFilterParamsChange:pe});var h=s(u,2),C=t(h);De(C,17,()=>e(m).slice(0,e(z)),y=>y.id,(y,j)=>{Br(y,{get session(){return e(j)},onDelete:B})});var M=s(C,2);{var P=y=>{var j=Wr(),x=s(t(j),2);{var n=o=>{var T=$r();i(o,T)};c(x,o=>{e(r).length>0&&o(n)})}a(j),i(y,j)};c(M,y=>{e(m).length===0&&y(P)})}var U=s(M,2);{var J=y=>{var j=Hr(),x=t(j);x.__click=ee;var n=t(x);a(x),a(j),g(()=>d(n,`Load More (${e(m).length-e(z)} remaining)`)),i(y,j)};c(U,y=>{e(z)<e(m).length&&y(J)})}a(h),a($),g(()=>V.disabled=e(G)),i(qe,$),ga()}pa(["click"]);var Kr=v('<span class="spinner svelte-1szs0u9"></span> Fetching...',1),Xr=v('<div class="loading svelte-1szs0u9">Loading sessions...</div>'),Yr=v('<div class="empty-state svelte-1szs0u9"><!></div>'),Qr=v('<span class="set-tag svelte-1szs0u9"> <span class="x svelte-1szs0u9">x</span> </span>'),ei=v('<div class="ex-notes svelte-1szs0u9"> </div>'),ai=v('<div class="exercise-item svelte-1szs0u9"><div class="ex-header svelte-1szs0u9"><span class="ex-name svelte-1szs0u9"> </span> <span class="ex-grip svelte-1szs0u9"> </span></div> <div class="ex-sets svelte-1szs0u9"></div> <!></div>'),ti=v('<div class="card-body svelte-1szs0u9"><div class="exercises-list svelte-1szs0u9"></div></div>'),si=v('<div><div class="card-header svelte-1szs0u9" role="button" tabindex="0"><div class="header-main"><span class="session-date svelte-1szs0u9"> </span> <span class="meta svelte-1szs0u9"><!> </span></div> <div class="header-status svelte-1szs0u9"><span>‚óè</span> <button class="btn-icon delete-btn svelte-1szs0u9" title="Delete Session">üóëÔ∏è</button> <span class="chevron svelte-1szs0u9"> </span></div></div> <!></div>'),ri=v('<div class="load-more-container svelte-1szs0u9"><button class="load-more-btn svelte-1szs0u9"> </button></div>'),ii=v('<div class="timeline svelte-1szs0u9"><!> <!></div>'),li=v('<div class="view-content svelte-1szs0u9"><div class="header svelte-1szs0u9"><h3 class="svelte-1szs0u9">ü§è Fingerboarding Log</h3> <button class="fetch-btn svelte-1szs0u9" title="Fetch data from cloud"><!></button></div> <div class="filters svelte-1szs0u9"><div class="filter-group svelte-1szs0u9"><label for="start-date" class="svelte-1szs0u9">From</label> <input type="date" id="start-date" class="svelte-1szs0u9"/></div> <div class="filter-group svelte-1szs0u9"><label for="end-date" class="svelte-1szs0u9">To</label> <input type="date" id="end-date" class="svelte-1szs0u9"/></div></div> <!></div> <!>',1);function vi(qe,p){fa(p,!0);let r=k(ya([])),m=k(!0),G=k(""),D=k(""),f=k(ya(new Set)),z=k(20);const S=20;Qa(()=>{e(G),e(D),l(z,S)});let B=k(!1),Y=k(null);function oe(x){l(Y,x,!0),l(B,!0)}function pe(){e(Y)&&($a(e(Y)),l(Y,null),l(B,!1),l(r,Ba().sort((x,n)=>new Date(n.date).getTime()-new Date(x.date).getTime()),!0))}async function se(){l(m,!0),l(r,Ba().sort((x,n)=>new Date(n.date).getTime()-new Date(x.date).getTime()),!0);try{await ja();const x=await nt();if(x.ok&&x.data){const n=x.data.map(o=>({...o,activityType:"fingerboarding",createdAt:o.createdAt||new Date().toISOString(),updatedAt:o.updatedAt||new Date().toISOString(),syncStatus:"synced"}));Na(n),l(r,Ba().sort((o,T)=>new Date(T.date).getTime()-new Date(o.date).getTime()),!0)}}catch(x){console.error("Failed to sync",x)}finally{l(m,!1)}}se();let ee=ca(()=>e(r).filter(x=>!(e(G)&&new Date(x.date)<new Date(e(G))||e(D)&&new Date(x.date)>new Date(e(D)))));function $(){l(z,e(z)+S)}function de(x){e(f).has(x)?e(f).delete(x):e(f).add(x),l(f,new Set(e(f)),!0)}function _e(x){return x.exercises.reduce((n,o)=>n+o.details.length,0)}var re=li(),V=Oe(re),ie=t(V),xe=s(t(ie),2);xe.__click=se;var ye=t(xe);{var ae=x=>{var n=Kr();za(),i(x,n)},N=x=>{var n=qa("‚òÅÔ∏è Fetch Data");i(x,n)};c(ye,x=>{e(m)?x(ae):x(N,!1)})}a(xe),a(ie);var u=s(ie,2),h=t(u),C=s(t(h),2);Ne(C),a(h);var M=s(h,2),P=s(t(M),2);Ne(P),a(M),a(u);var U=s(u,2);{var J=x=>{var n=Xr();i(x,n)},y=x=>{var n=Ze(),o=Oe(n);{var T=K=>{var A=Yr(),ue=t(A);{var fe=L=>{var I=qa("No sessions match filter.");i(L,I)},we=L=>{var I=qa("No fingerboarding sessions logged yet.");i(L,I)};c(ue,L=>{e(r).length>0?L(fe):L(we,!1)})}a(A),i(K,A)},R=K=>{var A=ii(),ue=t(A);De(ue,17,()=>e(ee).slice(0,e(z)),Ce,(L,I)=>{var me=si();let Se;var Te=t(me);Te.__click=()=>de(e(I).id),Te.__keydown=Fe=>Fe.key==="Enter"&&de(e(I).id);var q=t(Te),_=t(q),w=t(_,!0);a(_);var ne=s(_,2),E=t(ne);{var W=Fe=>{var Ae=qa();g(()=>d(Ae,`${e(I).location??""} ¬∑`)),i(Fe,Ae)};c(E,Fe=>{e(I).location&&e(I).location!=="N/A"&&e(I).location!=="Home"&&Fe(W)})}var ce=s(E);a(ne),a(q);var Z=s(q,2),te=t(Z);let le;var Ee=s(te,2);Ee.__click=Fe=>{Fe.stopPropagation(),oe(e(I).id)};var he=s(Ee,2),ze=t(he,!0);a(he),a(Z),a(Te);var ge=s(Te,2);{var ke=Fe=>{var Ae=ti(),Qe=t(Ae);De(Qe,21,()=>e(I).exercises||[],Ce,(ea,je)=>{var Me=ai(),Ue=t(Me),ta=t(Ue),aa=t(ta,!0);a(ta);var $e=s(ta,2),_a=t($e,!0);a($e),a(Ue);var We=s(Ue,2);De(We,21,()=>e(je).details,Ce,(Ge,Be)=>{var Ve=Qr(),sa=t(Ve),ra=s(sa,2);a(Ve),g(()=>{d(sa,`${e(Be).weight>0?`+${e(Be).weight}kg`:"BW"} `),d(ra,` ${e(Be).reps??""}s/reps`)}),i(Ge,Ve)}),a(We);var oa=s(We,2);{var da=Ge=>{var Be=ei(),Ve=t(Be);a(Be),g(()=>d(Ve,`"${e(je).notes??""}"`)),i(Ge,Be)};c(oa,Ge=>{e(je).notes&&Ge(da)})}a(Me),g(()=>{d(aa,e(je).name),d(_a,e(je).gripType)}),i(ea,Me)}),a(Qe),a(Ae),na(3,Ae,()=>ma,()=>({duration:150})),i(Fe,Ae)};c(ge,Fe=>{e(f).has(e(I).id)&&Fe(ke)})}a(me),g((Fe,Ae,Qe,ea)=>{Se=va(me,1,"session-card svelte-1szs0u9",null,Se,Fe),d(w,Ae),d(ce,` ${e(I).exercises.length??""} Exercises ¬∑ ${Qe??""} Sets`),le=va(te,1,"sync-dot svelte-1szs0u9",null,le,{synced:e(I).syncStatus==="synced"}),Ye(te,"title",e(I).syncStatus==="synced"?"Synced":"Local"),d(ze,ea)},[()=>({expanded:e(f).has(e(I).id)}),()=>new Date(e(I).date).toLocaleDateString(void 0,{weekday:"short",month:"short",day:"numeric"}),()=>_e(e(I)),()=>e(f).has(e(I).id)?"‚ñ≤":"‚ñº"]),i(L,me)});var fe=s(ue,2);{var we=L=>{var I=ri(),me=t(I);me.__click=$;var Se=t(me);a(me),a(I),g(()=>d(Se,`Load More (${e(ee).length-e(z)} remaining)`)),i(L,I)};c(fe,L=>{e(z)<e(ee).length&&L(we)})}a(A),i(K,A)};c(o,K=>{e(ee).length===0?K(T):K(R,!1)},!0)}i(x,n)};c(U,x=>{e(m)&&e(r).length===0?x(J):x(y,!1)})}a(V);var j=s(V,2);Pa(j,{get isOpen(){return e(B)},title:"Delete Fingerboard Session",message:"Are you sure you want to delete this session? This cannot be undone.",onConfirm:pe,onCancel:()=>l(B,!1)}),g(()=>xe.disabled=e(m)),Ie(C,()=>e(G),x=>l(G,x)),Ie(P,()=>e(D),x=>l(D,x)),i(qe,re),ga()}pa(["click","keydown"]);var ni=v('<span class="spinner svelte-xyvf5r"></span> Fetching...',1),oi=v('<div class="loading svelte-xyvf5r">Loading sessions...</div>'),di=v('<div class="empty-state svelte-xyvf5r">No competitions logged yet.</div>'),ci=v('<span class="type-tag simulation-tag svelte-xyvf5r">Simulation</span>'),pi=v('<span class="round-pos svelte-xyvf5r"> </span>'),_i=v('<span class="c-attempts svelte-xyvf5r"> </span>'),ui=v('<div class="climb-notes svelte-xyvf5r"> </div>'),fi=v('<div class="climb-row svelte-xyvf5r"><div class="climb-info svelte-xyvf5r"><span class="c-name svelte-xyvf5r"> </span> <!></div> <div class="climb-result"><span> </span></div></div> <!>',1),gi=v('<div class="climbs-list"></div>'),mi=v('<div class="round-item svelte-xyvf5r"><div class="round-header svelte-xyvf5r"><span class="round-name"> </span> <!></div> <!></div>'),hi=v('<div class="rounds-list svelte-xyvf5r"></div>'),bi=v('<div class="load-meta svelte-xyvf5r"><span> </span></div>'),yi=v('<div class="card-body svelte-xyvf5r"><!> <!> <div class="session-footer svelte-xyvf5r"><span> </span></div></div>'),xi=v('<div><div class="card-header svelte-xyvf5r" role="button" tabindex="0"><div class="header-main svelte-xyvf5r"><div class="left-col svelte-xyvf5r"><span class="venue svelte-xyvf5r"> </span> <span class="date svelte-xyvf5r"> </span></div> <div class="right-col svelte-xyvf5r"><div class="badges svelte-xyvf5r"><span class="type-tag svelte-xyvf5r"> </span> <!> <span class="result-tag svelte-xyvf5r"> </span></div></div></div> <div class="header-status svelte-xyvf5r"><span>‚óè</span> <button class="btn-icon delete-btn svelte-xyvf5r" title="Delete Session">üóëÔ∏è</button> <span class="chevron svelte-xyvf5r"> </span></div></div> <!></div>'),wi=v('<div class="load-more-container svelte-xyvf5r"><button class="load-more-btn svelte-xyvf5r"> </button></div>'),Si=v('<div class="timeline svelte-xyvf5r"><!> <!></div>'),ki=v('<div class="view-content svelte-xyvf5r"><div class="header svelte-xyvf5r"><h3 class="svelte-xyvf5r">üèÜ Competition Log</h3> <button class="fetch-btn svelte-xyvf5r" title="Fetch data from cloud"><!></button></div> <!> <!></div>');function Di(qe,p){fa(p,!0);let r=k(ya([])),m=k(!0),G=k(ya(new Set)),D=k(20);const f=20;let z=k(!1),S=k(null);function B(u){l(S,u,!0),l(z,!0)}function Y(){e(S)&&($a(e(S)),l(S,null),l(z,!1),l(r,Va().sort((u,h)=>new Date(h.date).getTime()-new Date(u.date).getTime()),!0))}async function oe(){l(m,!0),l(D,f),l(r,Va().sort((u,h)=>new Date(h.date).getTime()-new Date(u.date).getTime()),!0);try{await ja();const u=await ot();if(u.ok&&u.data){const h=u.data.map(C=>({...C,activityType:"competition",type:C.type,rounds:C.rounds.map(M=>({...M,climbs:M.climbs?.map(P=>({...P,status:P.status}))})),createdAt:C.createdAt||new Date().toISOString(),updatedAt:C.updatedAt||new Date().toISOString(),syncStatus:"synced",isSimulation:C.isSimulation}));Na(h),l(r,Va().sort((C,M)=>new Date(M.date).getTime()-new Date(C.date).getTime()),!0)}}catch(u){console.error("Failed to sync",u)}finally{l(m,!1)}}oe();function pe(u){e(G).has(u)?e(G).delete(u):e(G).add(u),l(G,new Set(e(G)),!0)}function se(){l(D,e(D)+f)}function ee(u){if(u.isSimulation){if(u.rounds&&u.rounds.length>0&&u.rounds[0].climbs){const C=u.rounds[0].climbs,M=C.filter(U=>U.status==="Top"||U.status==="Flash").length,P=C.filter(U=>U.status==="Zone").length;return`${M}T ${P+M}Z`}return"Simulation"}if(!u.rounds||u.rounds.length===0)return"No rounds";const h=u.rounds[u.rounds.length-1];if(h.position)return`#${h.position} ${h.name}`;if(h.climbs){const C=h.climbs.filter(P=>P.status==="Top"||P.status==="Flash").length,M=h.climbs.filter(P=>P.status==="Zone").length;return`${u.rounds.length} Rnds ¬∑ Final: ${C}T ${M+C}Z`}return h.name}var $=ki(),de=t($),_e=s(t(de),2);_e.__click=oe;var re=t(_e);{var V=u=>{var h=ni();za(),i(u,h)},ie=u=>{var h=qa("‚òÅÔ∏è Fetch Data");i(u,h)};c(re,u=>{e(m)?u(V):u(ie,!1)})}a(_e),a(de);var xe=s(de,2);{var ye=u=>{var h=oi();i(u,h)},ae=u=>{var h=Ze(),C=Oe(h);{var M=U=>{var J=di();i(U,J)},P=U=>{var J=Si(),y=t(J);De(y,17,()=>e(r).slice(0,e(D)),Ce,(n,o)=>{var T=xi();let R;var K=t(T);K.__click=()=>pe(e(o).id),K.__keydown=ge=>ge.key==="Enter"&&pe(e(o).id);var A=t(K),ue=t(A),fe=t(ue),we=t(fe,!0);a(fe);var L=s(fe,2),I=t(L,!0);a(L),a(ue);var me=s(ue,2),Se=t(me),Te=t(Se),q=t(Te,!0);a(Te);var _=s(Te,2);{var w=ge=>{var ke=ci();i(ge,ke)};c(_,ge=>{e(o).isSimulation&&ge(w)})}var ne=s(_,2),E=t(ne,!0);a(ne),a(Se),a(me),a(A);var W=s(A,2),ce=t(W);let Z;var te=s(ce,2);te.__click=ge=>{ge.stopPropagation(),B(e(o).id)};var le=s(te,2),Ee=t(le,!0);a(le),a(W),a(K);var he=s(K,2);{var ze=ge=>{var ke=yi(),Fe=t(ke);{var Ae=aa=>{var $e=hi();De($e,21,()=>e(o).rounds||[],Ce,(_a,We)=>{var oa=mi(),da=t(oa),Ge=t(da),Be=t(Ge,!0);a(Ge);var Ve=s(Ge,2);{var sa=He=>{var Je=pi(),Ta=t(Je);a(Je),g(()=>d(Ta,`#${e(We).position??""}`)),i(He,Je)};c(Ve,He=>{e(We).position&&He(sa)})}a(da);var ra=s(da,2);{var ia=He=>{var Je=gi();De(Je,21,()=>e(We).climbs||[],Ce,(Ta,Ke)=>{var Ca=fi(),xa=Oe(Ca),wa=t(xa),Da=t(wa),Fa=t(Da,!0);a(Da);var La=s(Da,2);{var Xe=F=>{var O=_i(),ve=t(O);a(O),g(()=>d(ve,`(${e(Ke).attemptCount??""} tries)`)),i(F,O)};c(La,F=>{e(Ke).attemptCount>1&&F(Xe)})}a(wa);var ua=s(wa,2),Ea=t(ua);let Ga;var H=t(Ea,!0);a(Ea),a(ua),a(xa);var Q=s(xa,2);{var b=F=>{var O=ui(),ve=t(O);a(O),g(()=>d(ve,`"${e(Ke).notes??""}"`)),i(F,O)};c(Q,F=>{e(Ke).notes&&F(b)})}g(()=>{d(Fa,e(Ke).name),Ga=va(Ea,1,"status-badge svelte-xyvf5r",null,Ga,{top:e(Ke).status==="Top"||e(Ke).status==="Flash",zone:e(Ke).status==="Zone"}),d(H,e(Ke).status)}),i(Ta,Ca)}),a(Je),i(He,Je)};c(ra,He=>{e(We).climbs&&He(ia)})}a(oa),g(()=>d(Be,e(We).name)),i(_a,oa)}),a($e),i(aa,$e)};c(Fe,aa=>{e(o).rounds&&aa(Ae)})}var Qe=s(Fe,2);{var ea=aa=>{var $e=bi(),_a=t($e),We=t(_a);a(_a),a($e),g(()=>d(We,`Detailed Load: Fingers ${e(o).fingerLoad??""}/5, Shoulders ${e(o).shoulderLoad??""}/5, Forearms ${e(o).forearmLoad??""}/5`)),i(aa,$e)};c(Qe,aa=>{(e(o).fingerLoad||e(o).shoulderLoad)&&aa(ea)})}var je=s(Qe,2),Me=t(je);let Ue;var ta=t(Me,!0);a(Me),a(je),a(ke),g(()=>{Ue=va(Me,1,"sync-status svelte-xyvf5r",null,Ue,{synced:e(o).syncStatus==="synced"}),d(ta,e(o).syncStatus==="synced"?"‚úì Synced":"‚òÅ Local")}),na(3,ke,()=>ma,()=>({duration:150})),i(ge,ke)};c(he,ge=>{e(G).has(e(o).id)&&ge(ze)})}a(T),g((ge,ke,Fe,Ae)=>{R=va(T,1,"session-card svelte-xyvf5r",null,R,ge),d(we,e(o).customVenue||e(o).venue),d(I,ke),d(q,e(o).type),d(E,Fe),Z=va(ce,1,"sync-dot",null,Z,{synced:e(o).syncStatus==="synced"}),Ye(ce,"title",e(o).syncStatus==="synced"?"Synced":"Local"),d(Ee,Ae)},[()=>({expanded:e(G).has(e(o).id)}),()=>new Date(e(o).date).toLocaleDateString(void 0,{weekday:"short",day:"numeric",month:"short"}),()=>ee(e(o)),()=>e(G).has(e(o).id)?"‚ñ≤":"‚ñº"]),i(n,T)});var j=s(y,2);{var x=n=>{var o=wi(),T=t(o);T.__click=se;var R=t(T);a(T),a(o),g(()=>d(R,`Load More (${e(r).length-e(D)} remaining)`)),i(n,o)};c(j,n=>{e(D)<e(r).length&&n(x)})}a(J),i(U,J)};c(C,U=>{e(r).length===0?U(M):U(P,!1)},!0)}i(u,h)};c(xe,u=>{e(m)&&e(r).length===0?u(ye):u(ae,!1)})}var N=s(xe,2);Pa(N,{get isOpen(){return e(z)},title:"Delete Competition",message:"Are you sure you want to delete this competition session? This action cannot be undone.",onConfirm:Y,onCancel:()=>l(z,!1)}),a($),g(()=>_e.disabled=e(m)),i(qe,$),ga()}pa(["click","keydown"]);var Ti=v('<button class="backdrop svelte-108px9u" aria-label="Close settings"></button> <div class="settings-modal svelte-108px9u" role="dialog" aria-modal="true"><div class="settings-header svelte-108px9u"><h3 class="svelte-108px9u">Settings</h3> <button class="close-btn svelte-108px9u">‚úï</button></div> <div class="settings-content"><div class="setting-item svelte-108px9u"><div class="setting-info svelte-108px9u"><span class="setting-label svelte-108px9u">Local Data</span> <span class="setting-desc svelte-108px9u">Clear all cached data on this device</span></div> <button class="btn-clear-cache svelte-108px9u">Clear Cache</button></div></div></div>',1),qi=v("<option> </option>"),zi=v('<div class="view-container svelte-108px9u"><!></div>'),Ci=v('<div class="page svelte-108px9u"><div class="page-header svelte-108px9u"><div><h1 class="svelte-108px9u">üìä View Data</h1> <p class="subtitle svelte-108px9u">Browse your training history</p></div> <button class="settings-btn svelte-108px9u" aria-label="Settings">‚öôÔ∏è</button></div> <!> <!> <div class="content-card svelte-108px9u"><div class="form-group svelte-108px9u"><label for="activity-type" class="svelte-108px9u">Activity Type</label> <select id="activity-type" class="svelte-108px9u"><option disabled>Select an activity...</option><!></select></div> <!></div></div>');function Mi(qe,p){fa(p,!0);const r=[{value:"indoor_climb",label:"Indoor Climb",icon:"üßó"},{value:"outdoor_climb",label:"Outdoor Climb",icon:"‚õ∞Ô∏è"},{value:"gym_session",label:"Gym Session",icon:"üèãÔ∏è"},{value:"fingerboarding",label:"Fingerboarding",icon:"ü§è"},{value:"competition",label:"Competition",icon:"üèÜ"}];let m=k(""),G=k(!1),D=k(!1);function f(){l(G,!0)}function z(){l(G,!1)}function S(){l(G,!1),l(D,!0)}function B(){pt()}var Y=Ci(),oe=t(Y),pe=s(t(oe),2);pe.__click=f,a(oe);var se=s(oe,2);{var ee=ae=>{var N=Ti(),u=Oe(N);u.__click=z;var h=s(u,2),C=t(h),M=s(t(C),2);M.__click=z,a(C);var P=s(C,2),U=t(P),J=s(t(U),2);J.__click=S,a(U),a(P),a(h),na(3,u,()=>dt,()=>({duration:200})),na(3,h,()=>ct,()=>({duration:200,start:.9})),i(ae,N)};c(se,ae=>{e(G)&&ae(ee)})}var $=s(se,2);Pa($,{get isOpen(){return e(D)},title:"Clear all local data?",message:"Are you sure you want to clear all locally cached data? This will remove all sessions stored on this device. Data already synced to the cloud will be preserved.",confirmKeyword:"clear",onConfirm:B,onCancel:()=>l(D,!1)});var de=s($,2),_e=t(de),re=s(t(_e),2),V=t(re);V.value=V.__value="";var ie=s(V);De(ie,17,()=>r,ae=>ae.value,(ae,N)=>{var u=qi(),h=t(u);a(u);var C={};g(()=>{d(h,`${e(N).icon??""} ${e(N).label??""}`),C!==(C=e(N).value)&&(u.value=(u.__value=e(N).value)??"")}),i(ae,u)}),a(re),a(_e);var xe=s(_e,2);{var ye=ae=>{var N=zi(),u=t(N);{var h=M=>{ms(M,{})},C=M=>{var P=Ze(),U=Oe(P);{var J=j=>{xr(j,{})},y=j=>{var x=Ze(),n=Oe(x);{var o=R=>{Jr(R,{})},T=R=>{var K=Ze(),A=Oe(K);{var ue=we=>{vi(we,{})},fe=we=>{var L=Ze(),I=Oe(L);{var me=Se=>{Di(Se,{})};c(I,Se=>{e(m)==="competition"&&Se(me)},!0)}i(we,L)};c(A,we=>{e(m)==="fingerboarding"?we(ue):we(fe,!1)},!0)}i(R,K)};c(n,R=>{e(m)==="gym_session"?R(o):R(T,!1)},!0)}i(j,x)};c(U,j=>{e(m)==="outdoor_climb"?j(J):j(y,!1)},!0)}i(M,P)};c(u,M=>{e(m)==="indoor_climb"?M(h):M(C,!1)})}a(N),i(ae,N)};c(xe,ae=>{e(m)&&ae(ye)})}a(de),a(Y),ka(re,()=>e(m),ae=>l(m,ae)),i(qe,Y),ga()}pa(["click"]);export{Mi as component};
