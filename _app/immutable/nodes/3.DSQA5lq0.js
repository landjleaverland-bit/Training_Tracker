import{f as d,a as r,c as ot,t as Oe}from"../chunks/BXdXZntb.js";import{o as ls}from"../chunks/D0dKXudF.js";import{p as Lt,c as a,r as t,s as l,i as e,t as q,a as Dt,f as st,aV as u,w as Ne,aG as ct,x as s,aW as Ft,aY as es,d as ts}from"../chunks/Uw_kZyi_.js";import{d as Rt,s as G,e as Wt}from"../chunks/DPirsh8J.js";import{i as b}from"../chunks/YwdRV5Fi.js";import{e as ae,i as re,r as F,s as kt,a as rs}from"../chunks/DQsiYeU_.js";import{s as Ze,b as V,a as ss}from"../chunks/CLsJli5y.js";import{i as Yt,s as Zt,b as He,c as os,a as zt,d as ns,m as Ut,e as Ht,g as is,f as vs,h as ds,j as cs,k as us,l as ps,n as fs,o as _s,p as ms,q as gs}from"../chunks/Dt1-E3yB.js";import{p as Xt}from"../chunks/Def57eX4.js";import"../chunks/BXNNvvj2.js";var hs=d('<span class="placeholder svelte-1g8x5ph"> </span>'),ys=d('<span class="chip-display"> </span>'),bs=d('<button type="button"> </button>'),Ss=d('<div class="multi-select-container svelte-1g8x5ph"><div class="chips svelte-1g8x5ph"><!></div> <div class="options-grid svelte-1g8x5ph"></div></div>');function dt(Be,be){Lt(be,!0);let je=Xt(be,"selected",19,()=>[]),ue=Xt(be,"placeholder",3,"Select options...");function pe(R){let x=[...je()];R==="None"?x.includes("None")?x=[]:x=["None"]:(x=x.filter(C=>C!=="None"),x.includes(R)?x=x.filter(C=>C!==R):x.push(R)),be.onChange(x)}var w=Ss(),M=a(w),U=a(M);{var fe=R=>{var x=hs(),C=a(x,!0);t(x),q(()=>G(C,ue())),r(R,x)},$e=R=>{var x=ot(),C=st(x);ae(C,17,je,re,(A,k)=>{var N=ys(),L=a(N,!0);t(N),q(()=>G(L,e(k))),r(A,N)}),r(R,x)};b(U,R=>{je().length===0?R(fe):R($e,!1)})}t(M);var Y=l(M,2);ae(Y,21,()=>be.options,re,(R,x)=>{var C=bs();C.__click=()=>pe(e(x));var A=a(C,!0);t(C),q(k=>{Ze(C,1,`option-chip ${k??""}`,"svelte-1g8x5ph"),G(A,e(x))},[()=>je().includes(e(x))?"selected":""]),r(R,C)}),t(Y),t(w),r(Be,w),Dt()}Rt(["click"]);var ks=d("<option> </option>"),qs=d('<div class="form-group svelte-1lf3qka"><label for="custom-location" class="svelte-1lf3qka">Custom Location</label> <input type="text" id="custom-location" placeholder="Enter location name..." class="svelte-1lf3qka"/></div>'),ws=d("<option> </option>"),xs=d("<option> </option>"),Cs=d('<th class="svelte-1lf3qka">Sport?</th>'),Ns=d('<td class="center svelte-1lf3qka"><input type="checkbox" class="svelte-1lf3qka"/></td>'),Ts=d('<span class="grade-error svelte-1lf3qka">Invalid</span>'),Fs=d("<option> </option>"),Os=d('<button type="button" class="remove-btn svelte-1lf3qka">‚úï</button>'),js=d('<tr><!><td class="svelte-1lf3qka"><input type="text" placeholder="Route name..." class="svelte-1lf3qka"/></td><td class="svelte-1lf3qka"><input type="text" placeholder="V3"/> <!></td><td class="svelte-1lf3qka"><select class="svelte-1lf3qka"></select></td><td class="svelte-1lf3qka"><input type="number" min="1" class="svelte-1lf3qka"/></td><td><textarea placeholder="Notes..." class="svelte-1lf3qka"></textarea></td><td class="center svelte-1lf3qka"><!></td></tr>'),Vs=d("<div> </div>"),As=d('<div class="form-content svelte-1lf3qka"><h3 class="svelte-1lf3qka">üßó Indoor Climb</h3> <div class="form-row svelte-1lf3qka"><div class="form-group svelte-1lf3qka"><label for="date" class="svelte-1lf3qka">Date</label> <input type="date" id="date" class="svelte-1lf3qka"/></div> <div class="form-group svelte-1lf3qka"><label for="location" class="svelte-1lf3qka">Location</label> <select id="location" class="svelte-1lf3qka"><option disabled>Select location...</option><!></select></div></div> <!> <div class="form-group svelte-1lf3qka"><label for="climbing-type" class="svelte-1lf3qka">Climbing Type</label> <select id="climbing-type" class="svelte-1lf3qka"><option disabled>Select type...</option><!></select></div> <div class="load-section svelte-1lf3qka"><h4 class="svelte-1lf3qka">Load Metrics</h4> <div class="load-metrics svelte-1lf3qka"><div class="load-item svelte-1lf3qka"><label for="finger-load" class="svelte-1lf3qka">Finger</label> <input type="number" id="finger-load" min="1" max="5" class="svelte-1lf3qka"/> <span class="load-scale svelte-1lf3qka">/ 5</span></div> <div class="load-item svelte-1lf3qka"><label for="shoulder-load" class="svelte-1lf3qka">Shoulder</label> <input type="number" id="shoulder-load" min="1" max="5" class="svelte-1lf3qka"/> <span class="load-scale svelte-1lf3qka">/ 5</span></div> <div class="load-item svelte-1lf3qka"><label for="forearm-load" class="svelte-1lf3qka">Forearm</label> <input type="number" id="forearm-load" min="1" max="5" class="svelte-1lf3qka"/> <span class="load-scale svelte-1lf3qka">/ 5</span></div></div></div> <div class="training-section svelte-1lf3qka"><h4 class="svelte-1lf3qka">Training Details</h4> <div class="training-grid svelte-1lf3qka"><div class="training-item svelte-1lf3qka"><label for="training-type" class="svelte-1lf3qka">Training Type</label> <!></div> <div class="training-item svelte-1lf3qka"><label for="difficulty" class="svelte-1lf3qka">Difficulty</label> <select id="difficulty" class="svelte-1lf3qka"></select></div> <div class="training-item svelte-1lf3qka"><label for="category" class="svelte-1lf3qka">Category</label> <!></div> <div class="training-item svelte-1lf3qka"><label for="energy-system" class="svelte-1lf3qka">Energy System</label> <!></div> <div class="training-item svelte-1lf3qka"><label for="technique-focus" class="svelte-1lf3qka">Technique Focus</label> <!></div> <div class="training-item svelte-1lf3qka"><label for="wall-angle" class="svelte-1lf3qka">Wall Angle</label> <!></div></div></div> <div class="climbs-section svelte-1lf3qka"><h4 class="svelte-1lf3qka">Climbs</h4> <div class="table-container svelte-1lf3qka"><table class="climbs-table svelte-1lf3qka"><thead><tr><!><th class="svelte-1lf3qka">Name</th><th class="svelte-1lf3qka">Grade</th><th class="svelte-1lf3qka">Attempt</th><th class="svelte-1lf3qka">#</th><th class="svelte-1lf3qka">Notes</th><th class="svelte-1lf3qka"></th></tr></thead><tbody></tbody></table></div> <button type="button" class="add-btn svelte-1lf3qka">+ Add Climb</button></div> <div class="submit-section svelte-1lf3qka"><!> <button type="button" class="submit-btn svelte-1lf3qka"><!></button></div></div>');function Ls(Be,be){Lt(be,!0);const je=["Rockstar Swindon","Flashpoint Swindon","Flashpoint Bristol","Redpoint Bristol","TCH Bristol","Other"],ue=["Bouldering","Sport","Mixed"],pe=["Onsight","Flash","Redpoint","Dogged","DNF"],w=["None","Projecting","Onsighting","Campusing","Repeaters"],M=["None","Easy","Medium","Hard","Max","Limit+"],U=["None","Technique","Strength","Strength-endurance","Warm-up","Power"],fe=["None","Aerobic capacity","Aerobic lactic power","Anaerobic alactic capacity","Anaerobic alactic power","Anaerobic power","Anaerobic lactic capacity"],$e=["None","Double-clutch","Standing on volumes","Trusting feet"],Y=["None","Overhang","Slab","Roof"],x=["V0-","4-","V0","4","V0+","4+","V1","5","V2","5+","V3","6A","V4","6B","V5","6C","V6","7A","V7","7A+","V8","7B","7B+","V9","7C","V10","7C+","V11","8A","V12","8A+","V13","8B","V14","8B+","V15","8C","V16","8C+","V17","9A"].map(n=>n.toLowerCase());let C=u(null),A=u(Ne(new Date().toISOString().split("T")[0])),k=u(""),N=u(""),L=u(""),Te=u(Ne(["None"])),Se=u("None"),g=u(Ne(["None"])),E=u(Ne(["None"])),P=u(Ne(["None"])),se=u(Ne(["None"])),O=u(3),I=u(3),H=u(3),h=u(Ne([{isSport:!1,name:"",grade:"",attemptType:"Flash",attemptsNum:1,notes:""}]));function f(){s(h,[...e(h),{isSport:!1,name:"",grade:"",attemptType:"Flash",attemptsNum:1,notes:""}],!0)}function y(n){s(h,e(h).filter((c,S)=>S!==n),!0)}function J(n,c){e(h)[n].attemptType=c,(c==="Flash"||c==="Onsight")&&(e(h)[n].attemptsNum=1)}function _e(n){s(C,n,!0)}function oe(){s(C,null)}let le=Ft(()=>e(L)==="Mixed");function z(n){return e(L)==="Sport"?!0:e(L)==="Bouldering"?!1:n.isSport}function T(n){return n.trim()?x.includes(n.trim().toLowerCase()):!0}let B=u("idle"),ne=u("");function Ve(){return e(k)?e(k)==="Other"&&!e(N).trim()?"Please enter a custom location":e(L)?e(h).filter(c=>c.grade.trim()&&!T(c.grade)).length>0?"Please fix invalid grades":null:"Please select a climbing type":"Please select a location"}async function Z(){const n=Ve();if(n){s(B,"error"),s(ne,n,!0);return}s(B,"saving");try{const c=e(h).map(ve=>({...ve,isSport:z(ve)})),S={date:e(A),location:e(k)==="Other"?e(N):e(k),customLocation:e(k)==="Other"?e(N):void 0,climbingType:e(L),trainingTypes:e(Te),difficulty:e(Se),categories:e(g),energySystems:e(E),techniqueFocuses:e(P),wallAngles:e(se),fingerLoad:e(O),shoulderLoad:e(I),forearmLoad:e(H),climbs:c},ce=os(S);if(zt()){const ve=await ns(S);ve.ok?(Ut(ce.id),s(B,"success"),s(ne,"Session saved and synced!")):(Ht(ce.id),s(B,"success"),s(ne,"Saved locally. Sync failed: "+(ve.error||"Unknown error")))}else s(B,"success"),s(ne,"Saved locally. Will sync when online.");window.dispatchEvent(new CustomEvent("session-saved")),setTimeout(()=>{D()},2e3)}catch(c){s(B,"error"),s(ne,"Failed to save session"),console.error("Save error:",c)}}function D(){s(A,new Date().toISOString().split("T")[0],!0),s(k,""),s(N,""),s(L,""),s(Te,["None"],!0),s(Se,"None"),s(g,["None"],!0),s(E,["None"],!0),s(P,["None"],!0),s(se,["None"],!0),s(O,3),s(I,3),s(H,3),s(h,[{isSport:!1,name:"",grade:"",attemptType:"Flash",attemptsNum:1,notes:""}],!0),s(B,"idle"),s(ne,"")}var de=As(),ye=l(a(de),2),Le=a(ye),ke=l(a(Le),2);F(ke),t(Le);var me=l(Le,2),K=l(a(me),2),ie=a(K);ie.value=ie.__value="";var X=l(ie);ae(X,17,()=>je,re,(n,c)=>{var S=ks(),ce=a(S,!0);t(S);var ve={};q(()=>{G(ce,e(c)),ve!==(ve=e(c))&&(S.value=(S.__value=e(c))??"")}),r(n,S)}),t(K),t(me),t(ye);var qe=l(ye,2);{var we=n=>{var c=qs(),S=l(a(c),2);F(S),t(c),V(S,()=>e(N),ce=>s(N,ce)),r(n,c)};b(qe,n=>{e(k)==="Other"&&n(we)})}var Ie=l(qe,2),ze=l(a(Ie),2),Ge=a(ze);Ge.value=Ge.__value="";var ut=l(Ge);ae(ut,17,()=>ue,re,(n,c)=>{var S=ws(),ce=a(S,!0);t(S);var ve={};q(()=>{G(ce,e(c)),ve!==(ve=e(c))&&(S.value=(S.__value=e(c))??"")}),r(n,S)}),t(ze),t(Ie);var v=l(Ie,2),p=l(a(v),2),_=a(p),j=l(a(_),2);F(j),ct(2),t(_);var Q=l(_,2),xe=l(a(Q),2);F(xe),ct(2),t(Q);var Me=l(Q,2),qt=l(a(Me),2);F(qt),ct(2),t(Me),t(p),t(v);var at=l(v,2),pt=l(a(at),2),Ke=a(pt),wt=l(a(Ke),2);dt(wt,{get options(){return w},get selected(){return e(Te)},placeholder:"Select types...",onChange:n=>s(Te,n,!0)}),t(Ke);var nt=l(Ke,2),De=l(a(nt),2);ae(De,21,()=>M,re,(n,c)=>{var S=xs(),ce=a(S,!0);t(S);var ve={};q(()=>{G(ce,e(c)),ve!==(ve=e(c))&&(S.value=(S.__value=e(c))??"")}),r(n,S)}),t(De),t(nt);var Ce=l(nt,2),xt=l(a(Ce),2);dt(xt,{get options(){return U},get selected(){return e(g)},placeholder:"Select categories...",onChange:n=>s(g,n,!0)}),t(Ce);var Xe=l(Ce,2),ft=l(a(Xe),2);dt(ft,{get options(){return fe},get selected(){return e(E)},placeholder:"Select systems...",onChange:n=>s(E,n,!0)}),t(Xe);var lt=l(Xe,2),Ct=l(a(lt),2);dt(Ct,{get options(){return $e},get selected(){return e(P)},placeholder:"Select focus...",onChange:n=>s(P,n,!0)}),t(lt);var Re=l(lt,2),_t=l(a(Re),2);dt(_t,{get options(){return Y},get selected(){return e(se)},placeholder:"Select angles...",onChange:n=>s(se,n,!0)}),t(Re),t(pt),t(at);var et=l(at,2),Nt=l(a(et),2),mt=a(Nt),Tt=a(mt),it=a(Tt),Ot=a(it);{var gt=n=>{var c=Cs();r(n,c)};b(Ot,n=>{e(le)&&n(gt)})}ct(6),t(it),t(Tt);var ht=l(Tt);ae(ht,21,()=>e(h),re,(n,c,S)=>{var ce=js(),ve=a(ce);{var rt=$=>{var Ae=Ns(),Ue=a(Ae);F(Ue),t(Ae),ss(Ue,()=>e(c).isSport,At=>e(c).isSport=At),r($,Ae)};b(ve,$=>{e(le)&&$(rt)})}var o=l(ve),i=a(o);F(i),t(o);var m=l(o),ee=a(m);F(ee);let W;var Je=l(ee,2);{var tt=$=>{var Ae=Ts();r($,Ae)};b(Je,$=>{T(e(c).grade)||$(tt)})}t(m);var Ee=l(m),he=a(Ee);he.__change=$=>J(S,$.target.value),ae(he,21,()=>pe,re,($,Ae)=>{var Ue=Fs(),At=a(Ue,!0);t(Ue);var Pt={};q(()=>{G(At,e(Ae)),Pt!==(Pt=e(Ae))&&(Ue.value=(Ue.__value=e(Ae))??"")}),r($,Ue)}),t(he);var We;Yt(he),t(Ee);var yt=l(Ee),bt=a(yt);F(bt),t(yt);var jt=l(yt);let Vt;var Qe=a(jt);es(Qe),t(jt);var Bt=l(jt),$t=a(Bt);{var It=$=>{var Ae=Os();Ae.__click=()=>y(S),r($,Ae)};b($t,$=>{e(h).length>1&&$(It)})}t(Bt),t(ce),q($=>{W=Ze(ee,1,"grade-input svelte-1lf3qka",null,W,$),We!==(We=e(c).attemptType)&&(he.value=(he.__value=e(c).attemptType)??"",Zt(he,e(c).attemptType)),bt.disabled=e(c).attemptType==="Flash",Vt=Ze(jt,1,"notes-cell svelte-1lf3qka",null,Vt,{expanded:e(C)===S})},[()=>({invalid:!T(e(c).grade)})]),V(i,()=>e(c).name,$=>e(c).name=$),V(ee,()=>e(c).grade,$=>e(c).grade=$),V(bt,()=>e(c).attemptsNum,$=>e(c).attemptsNum=$),Wt("focus",Qe,()=>_e(S)),Wt("blur",Qe,oe),V(Qe,()=>e(c).notes,$=>e(c).notes=$),r(n,ce)}),t(ht),t(mt),t(Nt);var ge=l(Nt,2);ge.__click=f,t(et);var Fe=l(et,2),Pe=a(Fe);{var Et=n=>{var c=Vs();let S;var ce=a(c,!0);t(c),q(()=>{S=Ze(c,1,"save-message svelte-1lf3qka",null,S,{success:e(B)==="success",error:e(B)==="error"}),G(ce,e(ne))}),r(n,c)};b(Pe,n=>{e(ne)&&n(Et)})}var vt=l(Pe,2);vt.__click=Z;var Gt=a(vt);{var Jt=n=>{var c=Oe("Saving...");r(n,c)},Mt=n=>{var c=ot(),S=st(c);{var ce=rt=>{var o=Oe("‚úì Saved!");r(rt,o)},ve=rt=>{var o=Oe("Save Session");r(rt,o)};b(S,rt=>{e(B)==="success"?rt(ce):rt(ve,!1)},!0)}r(n,c)};b(Gt,n=>{e(B)==="saving"?n(Jt):n(Mt,!1)})}t(vt),t(Fe),t(de),q(()=>vt.disabled=e(B)==="saving"),V(ke,()=>e(A),n=>s(A,n)),He(K,()=>e(k),n=>s(k,n)),He(ze,()=>e(L),n=>s(L,n)),V(j,()=>e(O),n=>s(O,n)),V(xe,()=>e(I),n=>s(I,n)),V(qt,()=>e(H),n=>s(H,n)),He(De,()=>e(Se),n=>s(Se,n)),r(Be,de),Dt()}Rt(["change","click"]);var Ds=d("<option> </option>"),Rs=d('<div class="input-with-action svelte-15o2ys1"><input type="text" id="crag-manual" placeholder="Enter custom crag name..." class="flat-left svelte-15o2ys1"/> <button type="button" class="action-btn flat-right svelte-15o2ys1" title="Back to list">‚úï</button></div>'),Es=d("<option> </option>"),Bs=d("<option>Other (Manual Entry)</option>"),$s=d('<select id="crag" class="svelte-15o2ys1"><option disabled> </option><!><!></select>'),Is=d("<option> </option>"),zs=d("<option> </option>"),Gs=d('<th class="svelte-15o2ys1">Sport?</th>'),Ms=d('<td class="center svelte-15o2ys1"><input type="checkbox" class="svelte-15o2ys1"/></td>'),Ps=d('<span class="grade-error svelte-15o2ys1">Invalid</span>'),Ws=d("<option> </option>"),Us=d('<button type="button" class="remove-btn svelte-15o2ys1">‚úï</button>'),Hs=d('<tr><!><td class="svelte-15o2ys1"><input type="text" placeholder="Route name..." class="svelte-15o2ys1"/></td><td class="svelte-15o2ys1"><input type="text" placeholder="V3"/> <!></td><td class="svelte-15o2ys1"><select class="svelte-15o2ys1"></select></td><td class="svelte-15o2ys1"><input type="number" min="1" class="svelte-15o2ys1"/></td><td><textarea placeholder="Notes..." class="svelte-15o2ys1"></textarea></td><td class="center svelte-15o2ys1"><!></td></tr>'),Js=d("<div> </div>"),Qs=d('<div class="form-content svelte-15o2ys1"><h3 class="svelte-15o2ys1">‚õ∞Ô∏è Outdoor Climb</h3> <div class="form-row svelte-15o2ys1"><div class="form-group svelte-15o2ys1"><label for="date" class="svelte-15o2ys1">Date</label> <input type="date" id="date" class="svelte-15o2ys1"/></div> <div class="form-group svelte-15o2ys1"><label for="area" class="svelte-15o2ys1">Area</label> <select id="area" class="svelte-15o2ys1"><option disabled>Select area...</option><!></select></div></div> <div class="form-row svelte-15o2ys1"><div class="form-group svelte-15o2ys1"><label for="crag" class="svelte-15o2ys1">Crag</label> <!></div> <div class="form-group svelte-15o2ys1"><label for="sector" class="svelte-15o2ys1">Wall / Sector</label> <input type="text" id="sector" placeholder="Enter sector or wall name..." class="svelte-15o2ys1"/></div></div> <div class="form-group svelte-15o2ys1"><label for="climbing-type" class="svelte-15o2ys1">Climbing Type</label> <select id="climbing-type" class="svelte-15o2ys1"><option disabled>Select type...</option><!></select></div> <div class="load-section svelte-15o2ys1"><h4 class="svelte-15o2ys1">Load Metrics</h4> <div class="load-metrics svelte-15o2ys1"><div class="load-item svelte-15o2ys1"><label for="finger-load" class="svelte-15o2ys1">Finger</label> <input type="number" id="finger-load" min="1" max="5" class="svelte-15o2ys1"/> <span class="load-scale svelte-15o2ys1">/ 5</span></div> <div class="load-item svelte-15o2ys1"><label for="shoulder-load" class="svelte-15o2ys1">Shoulder</label> <input type="number" id="shoulder-load" min="1" max="5" class="svelte-15o2ys1"/> <span class="load-scale svelte-15o2ys1">/ 5</span></div> <div class="load-item svelte-15o2ys1"><label for="forearm-load" class="svelte-15o2ys1">Forearm</label> <input type="number" id="forearm-load" min="1" max="5" class="svelte-15o2ys1"/> <span class="load-scale svelte-15o2ys1">/ 5</span></div></div></div> <div class="training-section svelte-15o2ys1"><h4 class="svelte-15o2ys1">Training Details</h4> <div class="training-grid svelte-15o2ys1"><div class="training-item svelte-15o2ys1"><label for="training-type" class="svelte-15o2ys1">Training Type</label> <!></div> <div class="training-item svelte-15o2ys1"><label for="difficulty" class="svelte-15o2ys1">Difficulty</label> <select id="difficulty" class="svelte-15o2ys1"></select></div> <div class="training-item svelte-15o2ys1"><label for="category" class="svelte-15o2ys1">Category</label> <!></div> <div class="training-item svelte-15o2ys1"><label for="energy-system" class="svelte-15o2ys1">Energy System</label> <!></div> <div class="training-item svelte-15o2ys1"><label for="technique-focus" class="svelte-15o2ys1">Technique Focus</label> <!></div></div></div> <div class="climbs-section svelte-15o2ys1"><h4 class="svelte-15o2ys1">Climbs</h4> <div class="table-container svelte-15o2ys1"><table class="climbs-table svelte-15o2ys1"><thead><tr><!><th class="svelte-15o2ys1">Name</th><th class="svelte-15o2ys1">Grade</th><th class="svelte-15o2ys1">Attempt</th><th class="svelte-15o2ys1">#</th><th class="svelte-15o2ys1">Notes</th><th class="svelte-15o2ys1"></th></tr></thead><tbody></tbody></table></div> <button type="button" class="add-btn svelte-15o2ys1">+ Add Climb</button></div> <div class="submit-section svelte-15o2ys1"><!> <button type="button" class="submit-btn svelte-15o2ys1"><!></button></div></div>');function Ys(Be,be){Lt(be,!0);const je=is(),ue=["Boulder","Sport","Trad"],pe=["Onsight","Flash","Redpoint","Dogged","DNF"],w=["None","Projecting","Onsighting","Campusing","Repeaters"],M=["None","Easy","Medium","Hard","Max","Limit+"],U=["None","Technique","Strength","Strength-endurance","Warm-up","Power"],fe=["None","Aerobic capacity","Aerobic lactic power","Anaerobic alactic capacity","Anaerobic alactic power","Anaerobic power","Anaerobic lactic capacity"],$e=["None","Double-clutch","Standing on volumes","Trusting feet"],R=["V0-","4-","V0","4","V0+","4+","V1","5","V2","5+","V3","6A","V4","6B","V5","6C","V6","7A","V7","7A+","V8","7B","7B+","V9","7C","V10","7C+","V11","8A","V12","8A+","V13","8B","V14","8B+","V15","8C","V16","8C+","V17","9A"].map(o=>o.toLowerCase());let x=u(null),C=u(Ne(new Date().toISOString().split("T")[0])),A=u(""),k=u(""),N=u(""),L=u(""),Te=u(Ne(["None"])),Se=u("None"),g=u(Ne(["None"])),E=u(Ne(["None"])),P=u(Ne(["None"])),se=u(3),O=u(3),I=u(3),H=u(Ne([{isSport:!1,name:"",grade:"",attemptType:"Flash",attemptsNum:1,notes:""}])),h=Ft(()=>e(A)?cs(e(A)):[]),f=u(!1);ts(()=>{e(A)&&(s(k,""),s(f,!1))});function y(){e(k)==="Other"&&(s(f,!0),s(k,""))}function J(){s(f,!1),s(k,"")}function _e(){s(H,[...e(H),{isSport:!1,name:"",grade:"",attemptType:"Flash",attemptsNum:1,notes:""}],!0)}function oe(o){s(H,e(H).filter((i,m)=>m!==o),!0)}function le(o,i){e(H)[o].attemptType=i,(i==="Flash"||i==="Onsight")&&(e(H)[o].attemptsNum=1)}function z(o){s(x,o,!0)}function T(){s(x,null)}let B=Ft(()=>e(L)==="Trad");function ne(o){return e(L)==="Sport"?!0:e(L)==="Boulder"?!1:o.isSport}function Ve(o){return o.trim()?R.includes(o.trim().toLowerCase()):!0}let Z=u("idle"),D=u("");function de(){return e(A)?e(k)?e(L)?e(H).filter(i=>i.grade.trim()&&!Ve(i.grade)).length>0?"Please fix invalid grades":null:"Please select a climbing type":"Please select a crag":"Please select an area"}async function ye(){const o=de();if(o){s(Z,"error"),s(D,o,!0);return}s(Z,"saving");try{const i=e(H).map(W=>({...W,isSport:ne(W)})),m={date:e(C),area:e(A),crag:e(k),sector:e(N)||void 0,climbingType:e(L),trainingTypes:e(Te),difficulty:e(Se),categories:e(g),energySystems:e(E),techniqueFocuses:e(P),fingerLoad:e(se),shoulderLoad:e(O),forearmLoad:e(I),climbs:i},ee=vs(m);if(zt()){const W=await ds(m);W.ok?(Ut(ee.id),s(Z,"success"),s(D,"Session saved and synced!")):(Ht(ee.id),s(Z,"success"),s(D,"Saved locally. Sync failed: "+(W.error||"Unknown error")))}else s(Z,"success"),s(D,"Saved locally. Will sync when online.");window.dispatchEvent(new CustomEvent("session-saved")),setTimeout(()=>{Le()},2e3)}catch(i){s(Z,"error"),s(D,"Failed to save session"),console.error("Save error:",i)}}function Le(){s(C,new Date().toISOString().split("T")[0],!0),s(A,""),s(k,""),s(N,""),s(L,""),s(Te,["None"],!0),s(Se,"None"),s(g,["None"],!0),s(E,["None"],!0),s(P,["None"],!0),s(se,3),s(O,3),s(I,3),s(H,[{isSport:!1,name:"",grade:"",attemptType:"Flash",attemptsNum:1,notes:""}],!0),s(Z,"idle"),s(D,"")}var ke=Qs(),me=l(a(ke),2),K=a(me),ie=l(a(K),2);F(ie),t(K);var X=l(K,2),qe=l(a(X),2),we=a(qe);we.value=we.__value="";var Ie=l(we);ae(Ie,17,()=>je,re,(o,i)=>{var m=Ds(),ee=a(m,!0);t(m);var W={};q(()=>{G(ee,e(i)),W!==(W=e(i))&&(m.value=(m.__value=e(i))??"")}),r(o,m)}),t(qe),t(X),t(me);var ze=l(me,2),Ge=a(ze),ut=l(a(Ge),2);{var v=o=>{var i=Rs(),m=a(i);F(m);var ee=l(m,2);ee.__click=J,t(i),V(m,()=>e(k),W=>s(k,W)),r(o,i)},p=o=>{var i=$s();i.__change=y;var m=a(i),ee=a(m,!0);t(m),m.value=m.__value="";var W=l(m);ae(W,17,()=>e(h),re,(Ee,he)=>{var We=Es(),yt=a(We,!0);t(We);var bt={};q(()=>{G(yt,e(he)),bt!==(bt=e(he))&&(We.value=(We.__value=e(he))??"")}),r(Ee,We)});var Je=l(W);{var tt=Ee=>{var he=Bs();he.value=he.__value="Other",r(Ee,he)};b(Je,Ee=>{e(A)&&Ee(tt)})}t(i),q(()=>{i.disabled=!e(A),G(ee,e(A)?"Select crag...":"Select area first...")}),He(i,()=>e(k),Ee=>s(k,Ee)),r(o,i)};b(ut,o=>{e(f)?o(v):o(p,!1)})}t(Ge);var _=l(Ge,2),j=l(a(_),2);F(j),t(_),t(ze);var Q=l(ze,2),xe=l(a(Q),2),Me=a(xe);Me.value=Me.__value="";var qt=l(Me);ae(qt,17,()=>ue,re,(o,i)=>{var m=Is(),ee=a(m,!0);t(m);var W={};q(()=>{G(ee,e(i)),W!==(W=e(i))&&(m.value=(m.__value=e(i))??"")}),r(o,m)}),t(xe),t(Q);var at=l(Q,2),pt=l(a(at),2),Ke=a(pt),wt=l(a(Ke),2);F(wt),ct(2),t(Ke);var nt=l(Ke,2),De=l(a(nt),2);F(De),ct(2),t(nt);var Ce=l(nt,2),xt=l(a(Ce),2);F(xt),ct(2),t(Ce),t(pt),t(at);var Xe=l(at,2),ft=l(a(Xe),2),lt=a(ft),Ct=l(a(lt),2);dt(Ct,{get options(){return w},get selected(){return e(Te)},placeholder:"Select types...",onChange:o=>s(Te,o,!0)}),t(lt);var Re=l(lt,2),_t=l(a(Re),2);ae(_t,21,()=>M,re,(o,i)=>{var m=zs(),ee=a(m,!0);t(m);var W={};q(()=>{G(ee,e(i)),W!==(W=e(i))&&(m.value=(m.__value=e(i))??"")}),r(o,m)}),t(_t),t(Re);var et=l(Re,2),Nt=l(a(et),2);dt(Nt,{get options(){return U},get selected(){return e(g)},placeholder:"Select categories...",onChange:o=>s(g,o,!0)}),t(et);var mt=l(et,2),Tt=l(a(mt),2);dt(Tt,{get options(){return fe},get selected(){return e(E)},placeholder:"Select systems...",onChange:o=>s(E,o,!0)}),t(mt);var it=l(mt,2),Ot=l(a(it),2);dt(Ot,{get options(){return $e},get selected(){return e(P)},placeholder:"Select focus...",onChange:o=>s(P,o,!0)}),t(it),t(ft),t(Xe);var gt=l(Xe,2),ht=l(a(gt),2),ge=a(ht),Fe=a(ge),Pe=a(Fe),Et=a(Pe);{var vt=o=>{var i=Gs();r(o,i)};b(Et,o=>{e(B)&&o(vt)})}ct(6),t(Pe),t(Fe);var Gt=l(Fe);ae(Gt,21,()=>e(H),re,(o,i,m)=>{var ee=Hs(),W=a(ee);{var Je=te=>{var Ye=Ms(),St=a(Ye);F(St),t(Ye),ss(St,()=>e(i).isSport,Qt=>e(i).isSport=Qt),r(te,Ye)};b(W,te=>{e(B)&&te(Je)})}var tt=l(W),Ee=a(tt);F(Ee),t(tt);var he=l(tt),We=a(he);F(We);let yt;var bt=l(We,2);{var jt=te=>{var Ye=Ps();r(te,Ye)};b(bt,te=>{Ve(e(i).grade)||te(jt)})}t(he);var Vt=l(he),Qe=a(Vt);Qe.__change=te=>le(m,te.target.value),ae(Qe,21,()=>pe,re,(te,Ye)=>{var St=Ws(),Qt=a(St,!0);t(St);var Kt={};q(()=>{G(Qt,e(Ye)),Kt!==(Kt=e(Ye))&&(St.value=(St.__value=e(Ye))??"")}),r(te,St)}),t(Qe);var Bt;Yt(Qe),t(Vt);var $t=l(Vt),It=a($t);F(It),t($t);var $=l($t);let Ae;var Ue=a($);es(Ue),t($);var At=l($),Pt=a(At);{var as=te=>{var Ye=Us();Ye.__click=()=>oe(m),r(te,Ye)};b(Pt,te=>{e(H).length>1&&te(as)})}t(At),t(ee),q(te=>{yt=Ze(We,1,"grade-input svelte-15o2ys1",null,yt,te),Bt!==(Bt=e(i).attemptType)&&(Qe.value=(Qe.__value=e(i).attemptType)??"",Zt(Qe,e(i).attemptType)),It.disabled=e(i).attemptType==="Flash",Ae=Ze($,1,"notes-cell svelte-15o2ys1",null,Ae,{expanded:e(x)===m})},[()=>({invalid:!Ve(e(i).grade)})]),V(Ee,()=>e(i).name,te=>e(i).name=te),V(We,()=>e(i).grade,te=>e(i).grade=te),V(It,()=>e(i).attemptsNum,te=>e(i).attemptsNum=te),Wt("focus",Ue,()=>z(m)),Wt("blur",Ue,T),V(Ue,()=>e(i).notes,te=>e(i).notes=te),r(o,ee)}),t(Gt),t(ge),t(ht);var Jt=l(ht,2);Jt.__click=_e,t(gt);var Mt=l(gt,2),n=a(Mt);{var c=o=>{var i=Js();let m;var ee=a(i,!0);t(i),q(()=>{m=Ze(i,1,"save-message svelte-15o2ys1",null,m,{success:e(Z)==="success",error:e(Z)==="error"}),G(ee,e(D))}),r(o,i)};b(n,o=>{e(D)&&o(c)})}var S=l(n,2);S.__click=ye;var ce=a(S);{var ve=o=>{var i=Oe("Saving...");r(o,i)},rt=o=>{var i=ot(),m=st(i);{var ee=Je=>{var tt=Oe("‚úì Saved!");r(Je,tt)},W=Je=>{var tt=Oe("Save Session");r(Je,tt)};b(m,Je=>{e(Z)==="success"?Je(ee):Je(W,!1)},!0)}r(o,i)};b(ce,o=>{e(Z)==="saving"?o(ve):o(rt,!1)})}t(S),t(Mt),t(ke),q(()=>S.disabled=e(Z)==="saving"),V(ie,()=>e(C),o=>s(C,o)),He(qe,()=>e(A),o=>s(A,o)),V(j,()=>e(N),o=>s(N,o)),He(xe,()=>e(L),o=>s(L,o)),V(wt,()=>e(se),o=>s(se,o)),V(De,()=>e(O),o=>s(O,o)),V(xt,()=>e(I),o=>s(I,o)),He(_t,()=>e(Se),o=>s(Se,o)),r(Be,ke),Dt()}Rt(["click","change"]);var Zs=d('<div class="form-content svelte-1w0zsmt"><h3 class="svelte-1w0zsmt">üèãÔ∏è Gym Session</h3> <p class="form-placeholder svelte-1w0zsmt">Gym session form fields will go here</p></div>');function Ks(Be){var be=Zs();r(Be,be)}var Xs=d("<option> </option>"),ea=d("<option> </option>"),ta=d('<button class="remove-set-btn svelte-1m63nqt">‚úï</button>'),sa=d('<div class="set-row svelte-1m63nqt"><div class="input-wrap svelte-1m63nqt"><label class="svelte-1m63nqt">Weight</label> <input type="number" placeholder="0" class="svelte-1m63nqt"/></div> <div class="input-wrap svelte-1m63nqt"><label class="svelte-1m63nqt">Reps/Secs</label> <input type="number" placeholder="1" class="svelte-1m63nqt"/></div> <!></div>'),aa=d('<div class="exercise-card svelte-1m63nqt"><div class="card-header svelte-1m63nqt"><div class="header-inputs svelte-1m63nqt"><select class="svelte-1m63nqt"></select> <select class="svelte-1m63nqt"></select></div> <button class="remove-card-btn svelte-1m63nqt" title="Remove Exercise">‚úï</button></div> <div class="sets-list svelte-1m63nqt"><!> <button class="add-set-btn svelte-1m63nqt">+ Add Set</button></div> <div class="card-footer svelte-1m63nqt"><div class="meta-input svelte-1m63nqt"><label class="svelte-1m63nqt">Total Sets</label> <input type="number" readonly="" disabled class="svelte-1m63nqt"/></div> <div class="notes-input svelte-1m63nqt"><label class="svelte-1m63nqt">Notes</label> <input type="text" placeholder="Notes..." class="svelte-1m63nqt"/></div></div></div>'),la=d("<div> </div>"),ra=d('<div class="form-content svelte-1m63nqt"><div class="header-row svelte-1m63nqt"><h3 class="svelte-1m63nqt">ü§è Fingerboarding</h3> <button class="add-row-btn svelte-1m63nqt">+ Add Exercise</button></div> <div class="form-group date-group svelte-1m63nqt"><label for="date">Date</label> <input type="date" id="date" class="svelte-1m63nqt"/></div> <div class="cards-container svelte-1m63nqt"></div> <div class="submit-section"><!> <button type="button" class="submit-btn svelte-1m63nqt"><!></button></div></div>');function oa(Be,be){Lt(be,!0);const je=["Max hangs","Recruitment pulls","Max pick-ups"],ue=["Full-crimp","Half-crimp","Three finger drag","Pinch","Open hand","Sloper"];let pe=u(Ne(new Date().toISOString().split("T")[0])),w=u(Ne([]));function M(){s(w,[...e(w),{id:crypto.randomUUID(),name:je[0],gripType:ue[1],sets:1,details:[{weight:0,reps:5}],notes:""}],!0)}ts(()=>{e(w).length===0&&M()});function U(h){s(w,e(w).filter((f,y)=>y!==h),!0)}function fe(h){const f=e(w)[h],y=f.details[f.details.length-1];f.details=[...f.details,{...y}],f.sets=f.details.length}function $e(h,f){const y=e(w)[h];y.details.length>1&&(y.details=y.details.filter((J,_e)=>_e!==f),y.sets=y.details.length)}let Y=u("idle"),R=u("");async function x(){s(Y,"saving");try{const h={date:e(pe),location:"N/A",exercises:JSON.parse(JSON.stringify(e(w)))},f=us(h);if(zt()){const y=await ps(h);y.ok?(Ut(f.id),s(Y,"success"),s(R,"Session saved and synced!")):(Ht(f.id),s(Y,"success"),s(R,"Saved locally. Sync failed: "+(y.error||"Unknown error")))}else s(Y,"success"),s(R,"Saved locally. Will sync when online.");window.dispatchEvent(new CustomEvent("session-saved")),setTimeout(()=>{C()},2e3)}catch(h){s(Y,"error"),s(R,"Failed to save session"),console.error("Save error:",h)}}function C(){s(pe,new Date().toISOString().split("T")[0],!0),s(w,[],!0),M(),s(Y,"idle"),s(R,"")}var A=ra(),k=a(A),N=l(a(k),2);N.__click=M,t(k);var L=l(k,2),Te=l(a(L),2);F(Te),t(L);var Se=l(L,2);ae(Se,21,()=>e(w),re,(h,f,y)=>{var J=aa(),_e=a(J),oe=a(_e),le=a(oe);ae(le,21,()=>je,re,(K,ie)=>{var X=Xs(),qe=a(X,!0);t(X);var we={};q(()=>{G(qe,e(ie)),we!==(we=e(ie))&&(X.value=(X.__value=e(ie))??"")}),r(K,X)}),t(le);var z=l(le,2);ae(z,21,()=>ue,re,(K,ie)=>{var X=ea(),qe=a(X,!0);t(X);var we={};q(()=>{G(qe,e(ie)),we!==(we=e(ie))&&(X.value=(X.__value=e(ie))??"")}),r(K,X)}),t(z),t(oe);var T=l(oe,2);T.__click=()=>U(y),t(_e);var B=l(_e,2),ne=a(B);ae(ne,17,()=>e(f).details,re,(K,ie,X)=>{var qe=sa(),we=a(qe),Ie=a(we);kt(Ie,"for",`weight-${y}-${X}`);var ze=l(Ie,2);F(ze),kt(ze,"id",`weight-${y}-${X}`),t(we);var Ge=l(we,2),ut=a(Ge);kt(ut,"for",`reps-${y}-${X}`);var v=l(ut,2);F(v),kt(v,"id",`reps-${y}-${X}`),t(Ge);var p=l(Ge,2);{var _=j=>{var Q=ta();Q.__click=()=>$e(y,X),r(j,Q)};b(p,j=>{e(f).details.length>1&&j(_)})}t(qe),V(ze,()=>e(ie).weight,j=>e(ie).weight=j),V(v,()=>e(ie).reps,j=>e(ie).reps=j),r(K,qe)});var Ve=l(ne,2);Ve.__click=()=>fe(y),t(B);var Z=l(B,2),D=a(Z),de=a(D);kt(de,"for",`total-sets-${y}`);var ye=l(de,2);F(ye),kt(ye,"id",`total-sets-${y}`),t(D);var Le=l(D,2),ke=a(Le);kt(ke,"for",`notes-${y}`);var me=l(ke,2);F(me),kt(me,"id",`notes-${y}`),t(Le),t(Z),t(J),q(()=>rs(ye,e(f).sets)),He(le,()=>e(f).name,K=>e(f).name=K),He(z,()=>e(f).gripType,K=>e(f).gripType=K),V(me,()=>e(f).notes,K=>e(f).notes=K),r(h,J)}),t(Se);var g=l(Se,2),E=a(g);{var P=h=>{var f=la();let y;var J=a(f,!0);t(f),q(()=>{y=Ze(f,1,"save-message svelte-1m63nqt",null,y,{success:e(Y)==="success",error:e(Y)==="error"}),G(J,e(R))}),r(h,f)};b(E,h=>{e(R)&&h(P)})}var se=l(E,2);se.__click=x;var O=a(se);{var I=h=>{var f=Oe("Saving...");r(h,f)},H=h=>{var f=ot(),y=st(f);{var J=oe=>{var le=Oe("‚úì Saved!");r(oe,le)},_e=oe=>{var le=Oe("Save Session");r(oe,le)};b(y,oe=>{e(Y)==="success"?oe(J):oe(_e,!1)},!0)}r(h,f)};b(O,h=>{e(Y)==="saving"?h(I):h(H,!1)})}t(se),t(g),t(A),q(()=>se.disabled=e(Y)==="saving"),V(Te,()=>e(pe),h=>s(pe,h)),r(Be,A),Dt()}Rt(["click"]);var na=d("<option> </option>"),ia=d('<input type="text" placeholder="Enter venue name" class="mt-2 svelte-1fje4dh"/>'),va=d("<option> </option>"),da=d("<option> </option>"),ca=d('<input type="text" placeholder="Round name" class="mt-2 svelte-1fje4dh"/>'),ua=d('<div class="result-mode-content svelte-1fje4dh"><div class="form-group svelte-1fje4dh"><label for="position" class="svelte-1fje4dh">Final Position</label> <input type="number" id="position" placeholder="#" class="large-input svelte-1fje4dh"/></div></div>'),pa=d("<option> </option>"),fa=d('<input type="number" min="1" class="svelte-1fje4dh"/>'),_a=d('<span class="flash-dash">-</span>'),ma=d('<tr><td class="col-name svelte-1fje4dh"><input type="text" class="svelte-1fje4dh"/></td><td class="col-status svelte-1fje4dh"><select class="svelte-1fje4dh"></select></td><td class="col-attempt svelte-1fje4dh"><!></td><td class="col-notes svelte-1fje4dh"><input type="text" placeholder="..." class="svelte-1fje4dh"/></td><td class="col-action svelte-1fje4dh"><button class="svelte-1fje4dh">‚úï</button></td></tr>'),ga=d('<div class="load-metrics-compact svelte-1fje4dh"><div class="metric svelte-1fje4dh"><label for="finger">Finger Load</label> <input type="number" id="finger" min="0" max="5" step="0.5" class="svelte-1fje4dh"/></div> <div class="metric svelte-1fje4dh"><label for="shoulder">Shoulder Load</label> <input type="number" id="shoulder" min="0" max="5" step="0.5" class="svelte-1fje4dh"/></div> <div class="metric svelte-1fje4dh"><label for="forearm">Forearm Load</label> <input type="number" id="forearm" min="0" max="5" step="0.5" class="svelte-1fje4dh"/></div></div> <div class="climbs-table-container svelte-1fje4dh"><div class="section-header svelte-1fje4dh"><h4 class="svelte-1fje4dh">Boulders / Routes</h4></div> <table class="climbs-table svelte-1fje4dh"><thead><tr><th class="svelte-1fje4dh">#</th><th class="svelte-1fje4dh">Result</th><th class="svelte-1fje4dh">Att.</th><th class="svelte-1fje4dh">Notes</th><th class="svelte-1fje4dh"></th></tr></thead><tbody></tbody></table> <button class="add-row-btn svelte-1fje4dh">+ Add Row</button></div>',1),ha=d("<div> </div>"),ya=d('<div class="form-content svelte-1fje4dh"><h3 class="svelte-1fje4dh">üèÜ Competition</h3> <div class="form-grid svelte-1fje4dh"><div class="form-group svelte-1fje4dh"><label for="date" class="svelte-1fje4dh">Date</label> <input type="date" id="date" class="svelte-1fje4dh"/></div> <div class="form-group svelte-1fje4dh"><label for="venue" class="svelte-1fje4dh">Venue</label> <select id="venue" class="svelte-1fje4dh"><option disabled>Select venue...</option><!></select> <!></div></div> <div class="form-group mb-4 svelte-1fje4dh"><label for="type" class="svelte-1fje4dh">Type</label> <select id="type" class="svelte-1fje4dh"></select></div> <div class="round-section svelte-1fje4dh"><div class="form-group svelte-1fje4dh"><label for="round" class="svelte-1fje4dh">Round</label> <select id="round" class="svelte-1fje4dh"></select> <!></div> <!></div> <div class="submit-section"><!> <button type="button" class="submit-btn svelte-1fje4dh"><!></button></div></div>');function ba(Be,be){Lt(be,!0);const je=["Flashpoint Bristol","Rockstar Techno","Rockstar Unit 3","Rockstar Unit 5","Bloc","TCA","Other"],ue=["Bouldering","Lead","Speed"],pe=["Qualifiers","Semi-Finals","Finals","Result","Other"],w=["Flash","Top","Zone","Attempt"];let M=u(Ne(new Date().toISOString().split("T")[0])),U=u(""),fe=u(""),$e=u("Bouldering"),Y=u(4),R=u(4),x=u(4),C=u("Qualifiers"),A=u(""),k=u(null),N=u(Ne([{name:"#1",status:"Flash",attemptCount:1,notes:""}])),L=Ft(()=>e(C)==="Result"),Te=Ft(()=>e(U)==="Other"),Se=Ft(()=>e(C)==="Other"),g=Ft(()=>e(C)==="Other"?e(A):e(C));function E(){const v=e(N).length+1;s(N,[...e(N),{name:`#${v}`,status:"Flash",attemptCount:1,notes:""}],!0)}function P(v){e(N).length>1?s(N,e(N).filter((p,_)=>_!==v),!0):e(N)[0]={name:"#1",status:"Flash",attemptCount:1,notes:""}}function se(v,p){e(N)[v].status=p,p==="Flash"&&(e(N)[v].attemptCount=1)}let O=u("idle"),I=u("");async function H(){if(!e(U)||e(U)==="Other"&&!e(fe)){s(O,"error"),s(I,"Please specify a venue");return}s(O,"saving");try{const v={name:e(g),position:e(L)?e(k):void 0,climbs:e(L)?void 0:JSON.parse(JSON.stringify(e(N)))},p={date:e(M),venue:e(U)==="Other"?e(fe):e(U),customVenue:e(U)==="Other"?e(fe):void 0,type:e($e),fingerLoad:e(L)?void 0:e(Y),shoulderLoad:e(L)?void 0:e(R),forearmLoad:e(L)?void 0:e(x),rounds:[v]},_=fs(p);if(zt()){const j=await _s(p);j.ok?(Ut(_.id),s(O,"success"),s(I,"Competition saved and synced!")):(Ht(_.id),s(O,"success"),s(I,"Saved locally. Sync failed: "+(j.error||"Unknown error")))}else s(O,"success"),s(I,"Saved locally. Will sync when online.");window.dispatchEvent(new CustomEvent("session-saved")),setTimeout(()=>{h()},2e3)}catch(v){s(O,"error"),s(I,"Failed to save session"),console.error("Save error:",v)}}function h(){s(M,new Date().toISOString().split("T")[0],!0),s(U,""),s(fe,""),s(k,null),s(N,[{name:"#1",status:"Flash",attemptCount:1,notes:""}],!0),s(O,"idle"),s(I,"")}var f=ya(),y=l(a(f),2),J=a(y),_e=l(a(J),2);F(_e),t(J);var oe=l(J,2),le=l(a(oe),2),z=a(le);z.value=z.__value="";var T=l(z);ae(T,17,()=>je,re,(v,p)=>{var _=na(),j=a(_,!0);t(_);var Q={};q(()=>{G(j,e(p)),Q!==(Q=e(p))&&(_.value=(_.__value=e(p))??"")}),r(v,_)}),t(le);var B=l(le,2);{var ne=v=>{var p=ia();F(p),V(p,()=>e(fe),_=>s(fe,_)),r(v,p)};b(B,v=>{e(Te)&&v(ne)})}t(oe),t(y);var Ve=l(y,2),Z=l(a(Ve),2);ae(Z,21,()=>ue,re,(v,p)=>{var _=va(),j=a(_,!0);t(_);var Q={};q(()=>{G(j,e(p)),Q!==(Q=e(p))&&(_.value=(_.__value=e(p))??"")}),r(v,_)}),t(Z),t(Ve);var D=l(Ve,2),de=a(D),ye=l(a(de),2);ae(ye,21,()=>pe,re,(v,p)=>{var _=da(),j=a(_,!0);t(_);var Q={};q(()=>{G(j,e(p)),Q!==(Q=e(p))&&(_.value=(_.__value=e(p))??"")}),r(v,_)}),t(ye);var Le=l(ye,2);{var ke=v=>{var p=ca();F(p),V(p,()=>e(A),_=>s(A,_)),r(v,p)};b(Le,v=>{e(Se)&&v(ke)})}t(de);var me=l(de,2);{var K=v=>{var p=ua(),_=a(p),j=l(a(_),2);F(j),t(_),t(p),V(j,()=>e(k),Q=>s(k,Q)),r(v,p)},ie=v=>{var p=ga(),_=st(p),j=a(_),Q=l(a(j),2);F(Q),t(j);var xe=l(j,2),Me=l(a(xe),2);F(Me),t(xe);var qt=l(xe,2),at=l(a(qt),2);F(at),t(qt),t(_);var pt=l(_,2),Ke=l(a(pt),2),wt=l(a(Ke));ae(wt,21,()=>e(N),re,(De,Ce,xt)=>{var Xe=ma(),ft=a(Xe),lt=a(ft);F(lt),t(ft);var Ct=l(ft),Re=a(Ct);Re.__change=ge=>se(xt,ge.target.value),ae(Re,21,()=>w,re,(ge,Fe)=>{var Pe=pa(),Et=a(Pe,!0);t(Pe);var vt={};q(()=>{G(Et,e(Fe)),vt!==(vt=e(Fe))&&(Pe.value=(Pe.__value=e(Fe))??"")}),r(ge,Pe)}),t(Re);var _t;Yt(Re),t(Ct);var et=l(Ct),Nt=a(et);{var mt=ge=>{var Fe=fa();F(Fe),V(Fe,()=>e(Ce).attemptCount,Pe=>e(Ce).attemptCount=Pe),r(ge,Fe)},Tt=ge=>{var Fe=_a();r(ge,Fe)};b(Nt,ge=>{e(Ce).status!=="Flash"?ge(mt):ge(Tt,!1)})}t(et);var it=l(et),Ot=a(it);F(Ot),t(it);var gt=l(it),ht=a(gt);ht.__click=()=>P(xt),t(gt),t(Xe),q(()=>{_t!==(_t=e(Ce).status)&&(Re.value=(Re.__value=e(Ce).status)??"",Zt(Re,e(Ce).status))}),V(lt,()=>e(Ce).name,ge=>e(Ce).name=ge),V(Ot,()=>e(Ce).notes,ge=>e(Ce).notes=ge),r(De,Xe)}),t(wt),t(Ke);var nt=l(Ke,2);nt.__click=E,t(pt),V(Q,()=>e(Y),De=>s(Y,De)),V(Me,()=>e(R),De=>s(R,De)),V(at,()=>e(x),De=>s(x,De)),r(v,p)};b(me,v=>{e(L)?v(K):v(ie,!1)})}t(D);var X=l(D,2),qe=a(X);{var we=v=>{var p=ha();let _;var j=a(p,!0);t(p),q(()=>{_=Ze(p,1,"save-message svelte-1fje4dh",null,_,{success:e(O)==="success",error:e(O)==="error"}),G(j,e(I))}),r(v,p)};b(qe,v=>{e(I)&&v(we)})}var Ie=l(qe,2);Ie.__click=H;var ze=a(Ie);{var Ge=v=>{var p=Oe("Saving...");r(v,p)},ut=v=>{var p=ot(),_=st(p);{var j=xe=>{var Me=Oe("‚úì Saved!");r(xe,Me)},Q=xe=>{var Me=Oe("Save Session");r(xe,Me)};b(_,xe=>{e(O)==="success"?xe(j):xe(Q,!1)},!0)}r(v,p)};b(ze,v=>{e(O)==="saving"?v(Ge):v(ut,!1)})}t(Ie),t(X),t(f),q(()=>Ie.disabled=e(O)==="saving"),V(_e,()=>e(M),v=>s(M,v)),He(le,()=>e(U),v=>s(U,v)),He(Z,()=>e($e),v=>s($e,v)),He(ye,()=>e(C),v=>s(C,v)),r(Be,f),Dt()}Rt(["change","click"]);var Sa=d('<span class="spinner svelte-b2zgdd"></span> Syncing...',1),ka=d("<button><!></button>"),qa=d("<div> </div>"),wa=d('<div><div class="sync-info svelte-b2zgdd"><span class="sync-icon svelte-b2zgdd"> </span> <span class="sync-text svelte-b2zgdd"><!></span></div> <!> <!></div>'),xa=d("<option> </option>"),Ca=d('<div class="form-container svelte-b2zgdd"><!></div>'),Na=d('<div class="page svelte-b2zgdd"><div class="page-header svelte-b2zgdd"><h1 class="svelte-b2zgdd">üìù Log Data</h1> <p class="subtitle svelte-b2zgdd">Record your training sessions</p></div> <!> <div class="content-card svelte-b2zgdd"><div class="form-group svelte-b2zgdd"><label for="activity-type" class="svelte-b2zgdd">Activity Type</label> <select id="activity-type" class="svelte-b2zgdd"><option disabled>Select an activity...</option><!></select></div> <!></div></div>');function Ba(Be,be){Lt(be,!0);const je=[{value:"indoor_climb",label:"Indoor Climb",icon:"üßó"},{value:"outdoor_climb",label:"Outdoor Climb",icon:"‚õ∞Ô∏è"},{value:"gym_session",label:"Gym Session",icon:"üèãÔ∏è"},{value:"fingerboarding",label:"Fingerboarding",icon:"ü§è"},{value:"competition",label:"Competition",icon:"üèÜ"}];let ue=u(""),pe=u(0),w=u("idle"),M=u(""),U=u(!0);ls(()=>{fe(),s(U,zt(),!0);const g=()=>{s(U,!0),fe()},E=()=>{s(U,!1)},P=()=>{fe()};return window.addEventListener("online",g),window.addEventListener("offline",E),window.addEventListener("session-saved",P),()=>{window.removeEventListener("online",g),window.removeEventListener("offline",E),window.removeEventListener("session-saved",P)}});function fe(){s(pe,ms(),!0)}async function $e(){if(!e(U)){s(w,"error"),s(M,"No network connection");return}s(w,"syncing"),s(M,"");try{const g=await gs();g.failed===0&&g.success>0?(s(w,"success"),s(M,`Synced ${g.success} session${g.success>1?"s":""}!`)):g.failed>0&&g.success>0?(s(w,"error"),s(M,`Synced ${g.success}, failed ${g.failed}`)):g.failed>0?(s(w,"error"),s(M,`Failed to sync ${g.failed} session${g.failed>1?"s":""}`)):(s(w,"idle"),s(M,"")),fe(),e(w)==="success"&&setTimeout(()=>{s(w,"idle"),s(M,"")},3e3)}catch(g){s(w,"error"),s(M,"Sync failed"),console.error("Sync error:",g)}}var Y=Na(),R=l(a(Y),2);{var x=g=>{var E=wa();let P;var se=a(E),O=a(se),I=a(O,!0);t(O);var H=l(O,2),h=a(H);{var f=z=>{var T=Oe();q(()=>G(T,`${e(pe)??""} session${e(pe)>1?"s":""} waiting to sync`)),r(z,T)},y=z=>{var T=Oe();q(()=>G(T,`Offline - ${e(pe)??""} session${e(pe)>1?"s":""} saved locally`)),r(z,T)};b(h,z=>{e(U)?z(f):z(y,!1)})}t(H),t(se);var J=l(se,2);{var _e=z=>{var T=ka();let B;T.__click=$e;var ne=a(T);{var Ve=D=>{var de=Sa();ct(),r(D,de)},Z=D=>{var de=ot(),ye=st(de);{var Le=me=>{var K=Oe("‚úì Synced!");r(me,K)},ke=me=>{var K=Oe("Sync Now");r(me,K)};b(ye,me=>{e(w)==="success"?me(Le):me(ke,!1)},!0)}r(D,de)};b(ne,D=>{e(w)==="syncing"?D(Ve):D(Z,!1)})}t(T),q(()=>{B=Ze(T,1,"sync-btn svelte-b2zgdd",null,B,{syncing:e(w)==="syncing"}),T.disabled=e(w)==="syncing"}),r(z,T)};b(J,z=>{e(U)&&z(_e)})}var oe=l(J,2);{var le=z=>{var T=qa();let B;var ne=a(T,!0);t(T),q(()=>{B=Ze(T,1,"sync-message svelte-b2zgdd",null,B,{error:e(w)==="error",success:e(w)==="success"}),G(ne,e(M))}),r(z,T)};b(oe,z=>{e(M)&&z(le)})}t(E),q(()=>{P=Ze(E,1,"sync-banner svelte-b2zgdd",null,P,{offline:!e(U)}),G(I,e(U)?"üîÑ":"üì¥")}),r(g,E)};b(R,g=>{e(pe)>0&&g(x)})}var C=l(R,2),A=a(C),k=l(a(A),2),N=a(k);N.value=N.__value="";var L=l(N);ae(L,17,()=>je,g=>g.value,(g,E)=>{var P=xa(),se=a(P);t(P);var O={};q(()=>{G(se,`${e(E).icon??""} ${e(E).label??""}`),O!==(O=e(E).value)&&(P.value=(P.__value=e(E).value)??"")}),r(g,P)}),t(k),t(A);var Te=l(A,2);{var Se=g=>{var E=Ca(),P=a(E);{var se=I=>{Ls(I,{})},O=I=>{var H=ot(),h=st(H);{var f=J=>{Ys(J,{})},y=J=>{var _e=ot(),oe=st(_e);{var le=T=>{Ks(T)},z=T=>{var B=ot(),ne=st(B);{var Ve=D=>{oa(D,{})},Z=D=>{var de=ot(),ye=st(de);{var Le=ke=>{ba(ke,{})};b(ye,ke=>{e(ue)==="competition"&&ke(Le)},!0)}r(D,de)};b(ne,D=>{e(ue)==="fingerboarding"?D(Ve):D(Z,!1)},!0)}r(T,B)};b(oe,T=>{e(ue)==="gym_session"?T(le):T(z,!1)},!0)}r(J,_e)};b(h,J=>{e(ue)==="outdoor_climb"?J(f):J(y,!1)},!0)}r(I,H)};b(P,I=>{e(ue)==="indoor_climb"?I(se):I(O,!1)})}t(E),r(g,E)};b(Te,g=>{e(ue)&&g(Se)})}t(C),t(Y),He(k,()=>e(ue),g=>s(ue,g)),r(Be,Y),Dt()}Rt(["click"]);export{Ba as component};
