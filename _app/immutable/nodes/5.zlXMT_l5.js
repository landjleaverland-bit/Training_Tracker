import{f as v,a as r,c as Te,t as wa}from"../chunks/bxSSDmCG.js";import{H as at,$ as tt,aZ as st,aw as it,q as rt,e as vt,a_ as nt,aN as Ja,a$ as lt,ai as ot,b0 as Oa,p as va,c as a,s as i,i as t,aV as H,r as e,t as w,a as na,F as d,f as we,aW as ha,E as fa,o as Ka,aG as Fa}from"../chunks/BvwCwrbP.js";import{a as dt,d as ea,s as o}from"../chunks/D97XAFTq.js";import{i as _}from"../chunks/DJDEC4-q.js";import{s as Ne,r as Xe,e as ye,i as qe,b as $e}from"../chunks/C6b-0WKN.js";import{c as Ta,j as Pa,k as Ya,l as Ra,n as Ba,o as Wa,p as Ua}from"../chunks/CIEREIgH.js";import{s as Be}from"../chunks/r3Oz2b9H.js";import{s as Ae}from"../chunks/CT9WbTd_.js";import{p as Aa}from"../chunks/BzRc-_KC.js";import{s as Ma,h as ct,g as _t,b as ut,j as ft,k as pt,l as gt}from"../chunks/DD0kMcH3.js";import"../chunks/C34k2uMk.js";const mt=()=>performance.now(),ma={tick:S=>requestAnimationFrame(S),now:()=>mt(),tasks:new Set};function Qa(){const S=ma.now();ma.tasks.forEach(s=>{s.c(S)||(ma.tasks.delete(s),s.f())}),ma.tasks.size!==0&&ma.tick(Qa)}function ht(S){let s;return ma.tasks.size===0&&ma.tick(Qa),{promise:new Promise(g=>{ma.tasks.add(s={c:S,f:g})}),abort(){ma.tasks.delete(s)}}}function Ia(S,s){Ja(()=>{S.dispatchEvent(new CustomEvent(s))})}function bt(S){if(S==="float")return"cssFloat";if(S==="offset")return"cssOffset";if(S.startsWith("--"))return S;const s=S.split("-");return s.length===1?s[0]:s[0]+s.slice(1).map(g=>g[0].toUpperCase()+g.slice(1)).join("")}function Za(S){const s={},g=S.split(";");for(const p of g){const[y,m]=p.split(":");if(!y||m===void 0)break;const u=bt(y.trim());s[u]=m.trim()}return s}const yt=S=>S;function Ze(S,s,g,p){var y=(S&nt)!==0,m="both",u,q=s.inert,x=s.style.overflow,k,O;function T(){return Ja(()=>u??=g()(s,p?.()??{},{direction:m}))}var F={is_global:y,in(){s.inert=q,Ia(s,"introstart"),k=Ha(s,T(),O,1,()=>{Ia(s,"introend"),k?.abort(),k=u=void 0,s.style.overflow=x})},out(N){s.inert=!0,Ia(s,"outrostart"),O=Ha(s,T(),k,0,()=>{Ia(s,"outroend"),N?.()})},stop:()=>{k?.abort(),O?.abort()}},C=at;if((C.nodes.t??=[]).push(F),dt){var E=y;if(!E){for(var z=C.parent;z&&(z.f&tt)!==0;)for(;(z=z.parent)&&(z.f&st)===0;);E=!z||(z.f&it)!==0}E&&rt(()=>{vt(()=>F.in())})}}function Ha(S,s,g,p,y){var m=p===1;if(lt(s)){var u,q=!1;return ot(()=>{if(!q){var N=s({direction:m?"in":"out"});u=Ha(S,N,g,p,y)}}),{abort:()=>{q=!0,u?.abort()},deactivate:()=>u.deactivate(),reset:()=>u.reset(),t:()=>u.t()}}if(g?.deactivate(),!s?.duration)return y(),{abort:Oa,deactivate:Oa,reset:Oa,t:()=>p};const{delay:x=0,css:k,tick:O,easing:T=yt}=s;var F=[];if(m&&g===void 0&&(O&&O(0,1),k)){var C=Za(k(0,1));F.push(C,C)}var E=()=>1-p,z=S.animate(F,{duration:x,fill:"forwards"});return z.onfinish=()=>{z.cancel();var N=g?.t()??1-p;g?.abort();var Z=p-N,W=s.duration*Math.abs(Z),ue=[];if(W>0){var ee=!1;if(k)for(var B=Math.ceil(W/16.666666666666668),h=0;h<=B;h+=1){var L=N+Z*T(h/B),J=Za(k(L,1-L));ue.push(J),ee||=J.overflow==="hidden"}ee&&(S.style.overflow="hidden"),E=()=>{var Q=z.currentTime;return N+Z*T(Q/W)},O&&ht(()=>{if(z.playState!=="running")return!1;var Q=E();return O(Q,1-Q),!0})}z=S.animate(ue,{duration:W,fill:"forwards"}),z.onfinish=()=>{E=()=>p,O?.(p,1-p),y()}},{abort:()=>{z&&(z.cancel(),z.effect=null,z.onfinish=Oa)},deactivate:()=>{y=Oa},reset:()=>{p===0&&O?.(1,0)},t:()=>E()}}const xt=S=>S;function Xa(S){const s=S-1;return s*s*s+1}function wt(S,{delay:s=0,duration:g=400,easing:p=xt}={}){const y=+getComputedStyle(S).opacity;return{delay:s,duration:g,easing:p,css:m=>`opacity: ${m*y}`}}function la(S,{delay:s=0,duration:g=400,easing:p=Xa,axis:y="y"}={}){const m=getComputedStyle(S),u=+m.opacity,q=y==="y"?"height":"width",x=parseFloat(m[q]),k=y==="y"?["top","bottom"]:["left","right"],O=k.map(Z=>`${Z[0].toUpperCase()}${Z.slice(1)}`),T=parseFloat(m[`padding${O[0]}`]),F=parseFloat(m[`padding${O[1]}`]),C=parseFloat(m[`margin${O[0]}`]),E=parseFloat(m[`margin${O[1]}`]),z=parseFloat(m[`border${O[0]}Width`]),N=parseFloat(m[`border${O[1]}Width`]);return{delay:s,duration:g,easing:p,css:Z=>`overflow: hidden;opacity: ${Math.min(Z*20,1)*u};${q}: ${Z*x}px;padding-${k[0]}: ${Z*T}px;padding-${k[1]}: ${Z*F}px;margin-${k[0]}: ${Z*C}px;margin-${k[1]}: ${Z*E}px;border-${k[0]}-width: ${Z*z}px;border-${k[1]}-width: ${Z*N}px;min-${q}: 0`}}function qt(S,{delay:s=0,duration:g=400,easing:p=Xa,start:y=0,opacity:m=0}={}){const u=getComputedStyle(S),q=+u.opacity,x=u.transform==="none"?"":u.transform,k=1-y,O=q*(1-m);return{delay:s,duration:g,easing:p,css:(T,F)=>`
			transform: ${x} scale(${1-k*F});
			opacity: ${q-O*F}
		`}}var Dt=v('<span class="chevron svelte-12crvy">‚ñ≤</span>'),St=v('<span class="chevron svelte-12crvy">‚ñº</span>'),kt=v("<option> </option>"),Tt=v("<option> </option>"),Ft=v('<div class="filter-body svelte-12crvy"><div class="filter-grid svelte-12crvy"><div class="filter-item svelte-12crvy"><label for="start-date" class="svelte-12crvy">Start Date</label> <input type="date" id="start-date" class="svelte-12crvy"/></div> <div class="filter-item svelte-12crvy"><label for="end-date" class="svelte-12crvy">End Date</label> <input type="date" id="end-date" class="svelte-12crvy"/></div> <div class="filter-item svelte-12crvy"><label for="location-filter" class="svelte-12crvy">Location</label> <select id="location-filter" class="svelte-12crvy"><option>Any Location</option><!></select></div> <div class="filter-item svelte-12crvy"><label for="session-type-filter" class="svelte-12crvy">Session Type</label> <select id="session-type-filter" class="svelte-12crvy"><option>Any Type</option><!></select></div> <div class="filter-item svelte-12crvy"><label for="grade-filter" class="svelte-12crvy">Grade (Exact)</label> <input type="text" id="grade-filter" placeholder="e.g. V4" class="svelte-12crvy"/></div></div> <div class="filter-actions svelte-12crvy"><button class="reset-btn svelte-12crvy">Reset Filters</button></div></div>'),Ct=v('<div class="filter-container svelte-12crvy"><button class="filter-header svelte-12crvy"><div class="header-content svelte-12crvy"><span class="icon svelte-12crvy">üîç</span> <span class="title svelte-12crvy">Filters</span> <!></div></button> <!></div>');function zt(S,s){va(s,!0);const g=["Rockstar Swindon","Flashpoint Swindon","Flashpoint Bristol","Redpoint Bristol","TCH Bristol","Other"],p=["Projecting","Onsighting","Campusing","Repeaters"];let y=H(!1),m=H(""),u=H(""),q=H(""),x=H(""),k=H("");function O(){d(y,!t(y))}function T(){d(m,""),d(u,""),d(q,""),d(x,""),d(k,""),F()}function F(){s.onFilterParamsChange({startDate:t(m),endDate:t(u),location:t(q),sessionType:t(x),grade:t(k)})}var C=Ct(),E=a(C);E.__click=O;var z=a(E),N=i(a(z),4);{var Z=B=>{var h=Dt();r(B,h)},W=B=>{var h=St();r(B,h)};_(N,B=>{t(y)?B(Z):B(W,!1)})}e(z),e(E);var ue=i(E,2);{var ee=B=>{var h=Ft(),L=a(h),J=a(L),Q=i(a(J),2);Xe(Q),Q.__change=F,e(J);var X=i(J,2),K=i(a(X),2);Xe(K),K.__change=F,e(X);var te=i(X,2),fe=i(a(te),2);fe.__change=F;var n=a(fe);n.value=n.__value="";var l=i(n);ye(l,17,()=>g,qe,(se,de)=>{var U=kt(),ne=a(U,!0);e(U);var ge={};w(()=>{o(ne,t(de)),ge!==(ge=t(de))&&(U.value=(U.__value=t(de))??"")}),r(se,U)}),e(fe),e(te);var c=i(te,2),b=i(a(c),2);b.__change=F;var I=a(b);I.value=I.__value="";var be=i(I);ye(be,17,()=>p,qe,(se,de)=>{var U=Tt(),ne=a(U,!0);e(U);var ge={};w(()=>{o(ne,t(de)),ge!==(ge=t(de))&&(U.value=(U.__value=t(de))??"")}),r(se,U)}),e(b),e(c);var pe=i(c,2),xe=i(a(pe),2);Xe(xe),xe.__input=F,e(pe),e(L);var _e=i(L,2),re=a(_e);re.__click=T,e(_e),e(h),$e(Q,()=>t(m),se=>d(m,se)),$e(K,()=>t(u),se=>d(u,se)),Ta(fe,()=>t(q),se=>d(q,se)),Ta(b,()=>t(x),se=>d(x,se)),$e(xe,()=>t(k),se=>d(k,se)),Ze(3,h,()=>la,()=>({duration:200})),r(B,h)};_(ue,B=>{t(y)&&B(ee)})}e(C),w(()=>Ne(E,"aria-expanded",t(y))),r(S,C),na()}ea(["click","change","input"]);var Lt=v('<span class="climb-type-tag svelte-yz0xxt"> </span>'),Gt=v('<span class="notes-preview svelte-yz0xxt"> </span>'),Et=v('<span class="attempts-count svelte-yz0xxt"> </span>'),Ot=v('<div class="detail-row svelte-yz0xxt"><span class="label svelte-yz0xxt">Notes:</span> <p class="notes svelte-yz0xxt"> </p></div>'),At=v('<p class="empty-notes svelte-yz0xxt">No notes for this climb.</p>'),Nt=v('<div class="climb-details svelte-yz0xxt"><!> <div class="tags svelte-yz0xxt"><span class="tag type svelte-yz0xxt"> </span> <span class="tag attempt-text svelte-yz0xxt"> </span></div></div>'),jt=v('<div><div class="climb-header svelte-yz0xxt" role="button" tabindex="0"><div class="climb-main-info svelte-yz0xxt"><span> </span> <span class="climb-name svelte-yz0xxt"> </span> <!> <!></div> <div class="climb-meta svelte-yz0xxt"><span><span class="icon svelte-yz0xxt"> </span> <!></span> <button class="delete-btn svelte-yz0xxt" aria-label="Delete climb" title="Delete climb">üóëÔ∏è</button> <span class="chevron svelte-yz0xxt"> </span></div></div> <!></div>');function It(S,s){va(s,!0);let g=Aa(s,"showClimbType",3,!1),p=H(!1);function y(){d(p,!t(p))}function m(c){c.stopPropagation(),s.onDelete()}const u={Flash:"‚ö°",Onsight:"üëÅÔ∏è",Redpoint:"üî¥",Dogged:"üõ†Ô∏è",DNF:"‚ùå"};var q=jt();let x;var k=a(q);k.__click=y,k.__keydown=c=>(c.key==="Enter"||c.key===" ")&&y();var O=a(k),T=a(O);let F;var C=a(T,!0);e(T);var E=i(T,2),z=a(E,!0);e(E);var N=i(E,2);{var Z=c=>{var b=Lt(),I=a(b,!0);e(b),w(()=>o(I,s.climb.isSport?"Sport":"Boulder")),r(c,b)};_(N,c=>{g()&&c(Z)})}var W=i(N,2);{var ue=c=>{var b=Gt(),I=a(b);e(b),w(()=>o(I,`- ${s.climb.notes??""}`)),r(c,b)};_(W,c=>{!t(p)&&s.climb.notes&&c(ue)})}e(O);var ee=i(O,2),B=a(ee);let h;var L=a(B),J=a(L,!0);e(L);var Q=i(L,2);{var X=c=>{var b=Et(),I=a(b,!0);e(b),w(()=>o(I,s.climb.attemptsNum)),r(c,b)};_(Q,c=>{s.climb.attemptType!=="Flash"&&s.climb.attemptType!=="Onsight"&&c(X)})}e(B);var K=i(B,2);K.__click=m;var te=i(K,2),fe=a(te,!0);e(te),e(ee),e(k);var n=i(k,2);{var l=c=>{var b=Nt(),I=a(b);{var be=U=>{var ne=Ot(),ge=i(a(ne),2),Me=a(ge,!0);e(ge),e(ne),w(()=>o(Me,s.climb.notes)),r(U,ne)},pe=U=>{var ne=At();r(U,ne)};_(I,U=>{s.climb.notes?U(be):U(pe,!1)})}var xe=i(I,2),_e=a(xe),re=a(_e,!0);e(_e);var se=i(_e,2),de=a(se,!0);e(se),e(xe),e(b),w(()=>{o(re,s.climb.isSport?"Sport":"Boulder"),o(de,s.climb.attemptType)}),Ze(3,b,()=>la,()=>({duration:150})),r(c,b)};_(n,c=>{t(p)&&c(l)})}e(q),w(()=>{x=Be(q,1,"climb-entry svelte-yz0xxt",null,x,{expanded:t(p)}),Ne(k,"aria-expanded",t(p)),F=Be(T,1,"grade-badge svelte-yz0xxt",null,F,{sport:s.climb.isSport}),o(C,s.climb.grade),o(z,s.climb.name||"Unnamed Route"),h=Be(B,1,"attempt-type svelte-yz0xxt",null,h,{flash:s.climb.attemptType==="Flash"}),o(J,u[s.climb.attemptType]||s.climb.attemptType),o(fe,t(p)?"‚ñ≤":"‚ñº")}),r(S,q),na()}ea(["click","keydown"]);var Rt=v('<button class="backdrop svelte-12q9g58" aria-label="Close modal"></button> <div class="modal svelte-12q9g58" role="dialog" aria-modal="true"><h3 class="svelte-12q9g58"> </h3> <p class="svelte-12q9g58"> </p> <div class="input-group svelte-12q9g58"><label for="delete-confirm" class="svelte-12q9g58">Type <strong>delete</strong> to confirm:</label> <input type="text" id="delete-confirm" placeholder="delete" autocomplete="off" class="svelte-12q9g58"/></div> <div class="actions svelte-12q9g58"><button class="btn-cancel svelte-12q9g58">Cancel</button> <button class="btn-delete svelte-12q9g58">Delete</button></div></div>',1);function Va(S,s){va(s,!0);let g=Aa(s,"isOpen",3,!1),p=Aa(s,"title",3,"Confirm Delete"),y=Aa(s,"message",3,"Are you sure you want to delete this item? This action cannot be undone."),m=H(""),u=ha(()=>t(m).toLowerCase()==="delete");function q(){t(u)&&(s.onConfirm(),d(m,""))}function x(){s.onCancel(),d(m,"")}var k=Te(),O=we(k);{var T=F=>{var C=Rt(),E=we(C);E.__click=x;var z=i(E,2),N=a(z),Z=a(N,!0);e(N);var W=i(N,2),ue=a(W,!0);e(W);var ee=i(W,2),B=i(a(ee),2);Xe(B),e(ee);var h=i(ee,2),L=a(h);L.__click=x;var J=i(L,2);J.__click=q,e(h),e(z),w(()=>{o(Z,p()),o(ue,y()),J.disabled=!t(u)}),Ze(3,E,()=>wt,()=>({duration:200})),$e(B,()=>t(m),Q=>d(m,Q)),Ze(3,z,()=>qt,()=>({duration:200,start:.9})),r(F,C)};_(O,F=>{g()&&F(T)})}r(S,k),na()}ea(["click"]);var Pt=v('<span class="stat svelte-7vqogn"> </span>'),Bt=v('<span class="status-icon pending svelte-7vqogn" title="Waiting to sync">üîÑ</span>'),Mt=v('<span class="status-icon error svelte-7vqogn" title="Sync error">‚ö†Ô∏è</span>'),Vt=v('<span class="chip svelte-7vqogn"> </span>'),Wt=v('<span class="text-none svelte-7vqogn">None</span>'),Ut=v('<div class="detail-item svelte-7vqogn"><span class="label svelte-7vqogn">Difficulty</span> <span class="value svelte-7vqogn"> </span></div>'),Ht=v('<span class="chip svelte-7vqogn"> </span>'),Zt=v('<span class="text-none svelte-7vqogn">None</span>'),Jt=v('<div class="detail-item svelte-7vqogn"><span class="label svelte-7vqogn">Category</span> <div class="value-chips svelte-7vqogn"><!></div></div>'),Kt=v('<span class="chip svelte-7vqogn"> </span>'),Yt=v('<span class="text-none svelte-7vqogn">None</span>'),Qt=v('<div class="detail-item svelte-7vqogn"><span class="label svelte-7vqogn">Focus</span> <div class="value-chips svelte-7vqogn"><!></div></div>'),Xt=v('<span class="chip svelte-7vqogn"> </span>'),$t=v('<span class="text-none svelte-7vqogn">None</span>'),es=v('<div class="detail-item svelte-7vqogn"><span class="label svelte-7vqogn">Energy System</span> <div class="value-chips svelte-7vqogn"><!></div></div>'),as=v('<span class="chip svelte-7vqogn"> </span>'),ts=v('<span class="text-none svelte-7vqogn">None</span>'),ss=v('<div class="detail-item svelte-7vqogn"><span class="label svelte-7vqogn">Wall Angle</span> <div class="value-chips svelte-7vqogn"><!></div></div>'),is=v('<div class="metric svelte-7vqogn"><span class="label svelte-7vqogn">Open Grip</span> <div class="bar-container svelte-7vqogn"><div class="bar-fill svelte-7vqogn"></div></div> <span class="score svelte-7vqogn"> </span></div>'),rs=v('<div class="metric svelte-7vqogn"><span class="label svelte-7vqogn">Crimp Grip</span> <div class="bar-container svelte-7vqogn"><div class="bar-fill svelte-7vqogn"></div></div> <span class="score svelte-7vqogn"> </span></div>'),vs=v('<div class="metric svelte-7vqogn"><span class="label svelte-7vqogn">Pinch Grip</span> <div class="bar-container svelte-7vqogn"><div class="bar-fill svelte-7vqogn"></div></div> <span class="score svelte-7vqogn"> </span></div>'),ns=v('<div class="metric svelte-7vqogn"><span class="label svelte-7vqogn">Sloper Grip</span> <div class="bar-container svelte-7vqogn"><div class="bar-fill svelte-7vqogn"></div></div> <span class="score svelte-7vqogn"> </span></div>'),ls=v('<div class="metric svelte-7vqogn"><span class="label svelte-7vqogn">Jug Grip</span> <div class="bar-container svelte-7vqogn"><div class="bar-fill svelte-7vqogn"></div></div> <span class="score svelte-7vqogn"> </span></div>'),os=v('<p class="no-climbs svelte-7vqogn">No climbs logged for this session.</p>'),ds=v('<div class="card-body svelte-7vqogn"><div class="details-grid svelte-7vqogn"><div class="detail-item svelte-7vqogn"><span class="label svelte-7vqogn">Training Type</span> <div class="value-chips svelte-7vqogn"><!></div></div> <!> <!> <!> <!> <!></div> <div class="metrics-container svelte-7vqogn"><div class="metric svelte-7vqogn"><span class="label svelte-7vqogn">Finger Load</span> <div class="bar-container svelte-7vqogn"><div class="bar-fill svelte-7vqogn"></div></div> <span class="score svelte-7vqogn"> </span></div> <div class="metric svelte-7vqogn"><span class="label svelte-7vqogn">Shoulder Load</span> <div class="bar-container svelte-7vqogn"><div class="bar-fill svelte-7vqogn"></div></div> <span class="score svelte-7vqogn"> </span></div> <div class="metric svelte-7vqogn"><span class="label svelte-7vqogn">Forearm Load</span> <div class="bar-container svelte-7vqogn"><div class="bar-fill svelte-7vqogn"></div></div> <span class="score svelte-7vqogn"> </span></div> <!> <!> <!> <!> <!></div> <div class="climbs-list svelte-7vqogn"><h4 class="svelte-7vqogn">Climbs</h4> <div class="climbs-container svelte-7vqogn"><!> <!></div></div></div>'),cs=v('<div><div class="card-header svelte-7vqogn" role="button" tabindex="0"><div class="header-main svelte-7vqogn"><div class="date-badge svelte-7vqogn"><span class="day svelte-7vqogn"> </span> <span class="month svelte-7vqogn"> </span></div> <div class="session-info svelte-7vqogn"><div class="session-text svelte-7vqogn"><h3 class="location svelte-7vqogn"> </h3> <div class="session-meta svelte-7vqogn"><span class="type-tag svelte-7vqogn"> </span> <span class="stat svelte-7vqogn"> </span> <!></div></div> <div class="load-summary svelte-7vqogn"><div class="load-badge finger svelte-7vqogn"> </div> <div class="load-badge shoulder svelte-7vqogn"> </div> <div class="load-badge forearm svelte-7vqogn"> </div></div></div></div> <div class="header-actions"><div class="header-status svelte-7vqogn"><!></div>  <button class="btn-icon delete-session" title="Delete Session">üóëÔ∏è</button> <span class="chevron svelte-7vqogn"> </span></div></div> <!></div> <!>',1);function _s(S,s){va(s,!0);let g=H(!1),p=H(!1);function y(){d(g,!t(g))}function m(){d(p,!0)}function u(){Pa(s.session.id),d(p,!1),s.onDelete()}function q(ve){const P=[...s.session.climbs];P.splice(ve,1),Ya(s.session.id,{climbs:P}),s.onDelete()}let x=ha(()=>s.session.climbs.length),k=ha(()=>s.session.climbs.reduce((ve,P)=>{const ae=parseInt(P.grade.replace(/\D/g,""))||0,ie=parseInt(ve.replace(/\D/g,""))||0;return ae>ie?P.grade:ve},"V0"));var O=cs(),T=we(O);let F;var C=a(T);C.__click=y,C.__keydown=ve=>ve.key==="Enter"&&y();var E=a(C),z=a(E),N=a(z),Z=a(N,!0);e(N);var W=i(N,2),ue=a(W,!0);e(W),e(z);var ee=i(z,2),B=a(ee),h=a(B),L=a(h,!0);e(h);var J=i(h,2),Q=a(J),X=a(Q,!0);e(Q);var K=i(Q,2),te=a(K);e(K);var fe=i(K,2);{var n=ve=>{var P=Pt(),ae=a(P);e(P),w(()=>o(ae,`Max: ${t(k)??""}`)),r(ve,P)};_(fe,ve=>{t(x)>0&&ve(n)})}e(J),e(B);var l=i(B,2),c=a(l),b=a(c,!0);e(c);var I=i(c,2),be=a(I,!0);e(I);var pe=i(I,2),xe=a(pe,!0);e(pe),e(l),e(ee),e(E);var _e=i(E,2),re=a(_e),se=a(re);{var de=ve=>{var P=Bt();r(ve,P)},U=ve=>{var P=Te(),ae=we(P);{var ie=j=>{var A=Mt();r(j,A)};_(ae,j=>{s.session.syncStatus==="error"&&j(ie)},!0)}r(ve,P)};_(se,ve=>{s.session.syncStatus==="pending"?ve(de):ve(U,!1)})}e(re);var ne=i(re,2);ne.__click=ve=>{ve.stopPropagation(),m()};var ge=i(ne,2),Me=a(ge,!0);e(ge),e(_e),e(C);var Je=i(C,2);{var je=ve=>{var P=ds(),ae=a(P),ie=a(ae),j=i(a(ie),2),A=a(j);{var le=R=>{var V=Te(),f=we(V);ye(f,17,()=>s.session.trainingTypes,qe,(D,G)=>{var Y=Vt(),M=a(Y,!0);e(Y),w(()=>o(M,t(G))),r(D,Y)}),r(R,V)},oe=R=>{var V=Wt();r(R,V)};_(A,R=>{s.session.trainingTypes&&s.session.trainingTypes.length>0&&!s.session.trainingTypes.includes("None")?R(le):R(oe,!1)})}e(j),e(ie);var me=i(ie,2);{var he=R=>{var V=Ut(),f=i(a(V),2),D=a(f,!0);e(f),e(V),w(()=>o(D,s.session.difficulty)),r(R,V)};_(me,R=>{s.session.difficulty&&R(he)})}var De=i(me,2);{var Ie=R=>{var V=Jt(),f=i(a(V),2),D=a(f);{var G=M=>{var $=Te(),ce=we($);ye(ce,17,()=>s.session.categories,qe,(Se,Ue)=>{var ke=Ht(),He=a(ke,!0);e(ke),w(()=>o(He,t(Ue))),r(Se,ke)}),r(M,$)},Y=M=>{var $=Zt();r(M,$)};_(D,M=>{s.session.categories.length>0&&!s.session.categories.includes("None")?M(G):M(Y,!1)})}e(f),e(V),r(R,V)};_(De,R=>{s.session.categories?.length&&R(Ie)})}var ze=i(De,2);{var Fe=R=>{var V=Qt(),f=i(a(V),2),D=a(f);{var G=M=>{var $=Te(),ce=we($);ye(ce,17,()=>s.session.techniqueFocuses,qe,(Se,Ue)=>{var ke=Kt(),He=a(ke,!0);e(ke),w(()=>o(He,t(Ue))),r(Se,ke)}),r(M,$)},Y=M=>{var $=Yt();r(M,$)};_(D,M=>{s.session.techniqueFocuses.length>0&&!s.session.techniqueFocuses.includes("None")?M(G):M(Y,!1)})}e(f),e(V),r(R,V)};_(ze,R=>{s.session.techniqueFocuses?.length&&R(Fe)})}var Ve=i(ze,2);{var Ce=R=>{var V=es(),f=i(a(V),2),D=a(f);{var G=M=>{var $=Te(),ce=we($);ye(ce,17,()=>s.session.energySystems,qe,(Se,Ue)=>{var ke=Xt(),He=a(ke,!0);e(ke),w(()=>o(He,t(Ue))),r(Se,ke)}),r(M,$)},Y=M=>{var $=$t();r(M,$)};_(D,M=>{s.session.energySystems.length>0&&!s.session.energySystems.includes("None")?M(G):M(Y,!1)})}e(f),e(V),r(R,V)};_(Ve,R=>{s.session.energySystems?.length&&R(Ce)})}var Le=i(Ve,2);{var oa=R=>{var V=ss(),f=i(a(V),2),D=a(f);{var G=M=>{var $=Te(),ce=we($);ye(ce,17,()=>s.session.wallAngles,qe,(Se,Ue)=>{var ke=as(),He=a(ke,!0);e(ke),w(()=>o(He,t(Ue))),r(Se,ke)}),r(M,$)},Y=M=>{var $=ts();r(M,$)};_(D,M=>{s.session.wallAngles.length>0&&!s.session.wallAngles.includes("None")?M(G):M(Y,!1)})}e(f),e(V),r(R,V)};_(Le,R=>{s.session.wallAngles?.length&&R(oa)})}e(ae);var Ge=i(ae,2),aa=a(Ge),Re=i(a(aa),2),ta=a(Re);e(Re);var da=i(Re,2),sa=a(da);e(da),e(aa);var Ee=i(aa,2),We=i(a(Ee),2),ca=a(We);e(We);var Oe=i(We,2),ia=a(Oe);e(Oe),e(Ee);var _a=i(Ee,2),Pe=i(a(_a),2),ba=a(Pe);e(Pe);var ua=i(Pe,2),qa=a(ua);e(ua),e(_a);var pa=i(_a,2);{var Ca=R=>{var V=is(),f=i(a(V),2),D=a(f);e(f);var G=i(f,2),Y=a(G);e(G),e(V),w(()=>{Ae(D,`width: ${s.session.openGrip/5*100}%`),o(Y,`${s.session.openGrip??""}/5`)}),r(R,V)};_(pa,R=>{s.session.openGrip&&R(Ca)})}var Da=i(pa,2);{var za=R=>{var V=rs(),f=i(a(V),2),D=a(f);e(f);var G=i(f,2),Y=a(G);e(G),e(V),w(()=>{Ae(D,`width: ${s.session.crimpGrip/5*100}%`),o(Y,`${s.session.crimpGrip??""}/5`)}),r(R,V)};_(Da,R=>{s.session.crimpGrip&&R(za)})}var ya=i(Da,2);{var Sa=R=>{var V=vs(),f=i(a(V),2),D=a(f);e(f);var G=i(f,2),Y=a(G);e(G),e(V),w(()=>{Ae(D,`width: ${s.session.pinchGrip/5*100}%`),o(Y,`${s.session.pinchGrip??""}/5`)}),r(R,V)};_(ya,R=>{s.session.pinchGrip&&R(Sa)})}var xa=i(ya,2);{var La=R=>{var V=ns(),f=i(a(V),2),D=a(f);e(f);var G=i(f,2),Y=a(G);e(G),e(V),w(()=>{Ae(D,`width: ${s.session.sloperGrip/5*100}%`),o(Y,`${s.session.sloperGrip??""}/5`)}),r(R,V)};_(xa,R=>{s.session.sloperGrip&&R(La)})}var ka=i(xa,2);{var Ga=R=>{var V=ls(),f=i(a(V),2),D=a(f);e(f);var G=i(f,2),Y=a(G);e(G),e(V),w(()=>{Ae(D,`width: ${s.session.jugGrip/5*100}%`),o(Y,`${s.session.jugGrip??""}/5`)}),r(R,V)};_(ka,R=>{s.session.jugGrip&&R(Ga)})}e(Ge);var Ye=i(Ge,2),Qe=i(a(Ye),2),ga=a(Qe);ye(ga,17,()=>s.session.climbs,qe,(R,V,f)=>{{let D=ha(()=>s.session.climbingType==="Mixed");It(R,{get climb(){return t(V)},onDelete:()=>q(f),get showClimbType(){return t(D)}})}});var Na=i(ga,2);{var ja=R=>{var V=os();r(R,V)};_(Na,R=>{s.session.climbs.length===0&&R(ja)})}e(Qe),e(Ye),e(P),w(()=>{Ae(ta,`width: ${s.session.fingerLoad/5*100}%`),o(sa,`${s.session.fingerLoad??""}/5`),Ae(ca,`width: ${s.session.shoulderLoad/5*100}%`),o(ia,`${s.session.shoulderLoad??""}/5`),Ae(ba,`width: ${s.session.forearmLoad/5*100}%`),o(qa,`${s.session.forearmLoad??""}/5`)}),Ze(3,P,()=>la,()=>({duration:200})),r(ve,P)};_(Je,ve=>{t(g)&&ve(je)})}e(T);var Ke=i(T,2);Va(Ke,{get isOpen(){return t(p)},title:"Delete Session",message:"Are you sure you want to delete this session and all its climbs? This cannot be undone.",onConfirm:u,onCancel:()=>d(p,!1)}),w((ve,P)=>{F=Be(T,1,"session-card svelte-7vqogn",null,F,{expanded:t(g)}),Ne(C,"aria-expanded",t(g)),o(Z,ve),o(ue,P),o(L,s.session.location),o(X,s.session.climbingType),o(te,`${t(x)??""} climbs`),Ne(c,"title",`Finger Load: ${s.session.fingerLoad??""}`),o(b,s.session.fingerLoad),Ne(I,"title",`Shoulder Load: ${s.session.shoulderLoad??""}`),o(be,s.session.shoulderLoad),Ne(pe,"title",`Forearm Load: ${s.session.forearmLoad??""}`),o(xe,s.session.forearmLoad),o(Me,t(g)?"‚ñ≤":"‚ñº")},[()=>new Date(s.session.date).getDate(),()=>new Date(s.session.date).toLocaleDateString("en-GB",{month:"short"})]),r(S,O),na()}ea(["click","keydown"]);var us=v('<div class="legend-item svelte-11p9lqi"><span class="l-icon svelte-11p9lqi"> </span> <span class="l-label svelte-11p9lqi"> </span></div>'),fs=v('<div class="legend-content svelte-11p9lqi"><div class="legend-grid svelte-11p9lqi"></div></div>'),ps=v('<div class="legend-container svelte-11p9lqi"><button class="legend-toggle svelte-11p9lqi"><span class="icon">‚ÑπÔ∏è</span> <span class="text">Icon Legend</span> <span class="chevron svelte-11p9lqi"> </span></button> <!></div>');function $a(S){let s=H(!1);const g=[{icon:"üëÅÔ∏è",label:"Onsight"},{icon:"‚ö°",label:"Flash"},{icon:"üî¥",label:"Redpoint"},{icon:"üõ†Ô∏è",label:"Dogged"},{icon:"‚ùå",label:"DNF"}];var p=ps(),y=a(p);y.__click=()=>d(s,!t(s));var m=i(a(y),4),u=a(m,!0);e(m),e(y);var q=i(y,2);{var x=k=>{var O=fs(),T=a(O);ye(T,21,()=>g,qe,(F,C)=>{var E=us(),z=a(E),N=a(z,!0);e(z);var Z=i(z,2),W=a(Z,!0);e(Z),e(E),w(()=>{o(N,t(C).icon),o(W,t(C).label)}),r(F,E)}),e(T),e(O),Ze(3,O,()=>la),r(k,O)};_(q,k=>{t(s)&&k(x)})}e(p),w(()=>{Ne(y,"aria-expanded",t(s)),o(u,t(s)?"‚ñº":"‚ñ∂")}),r(S,p)}ea(["click"]);function et(S,s){if(!S||S.length===0){alert("No data to export");return}const g=Array.from(new Set(S.flatMap(Object.keys))),p=[g.join(","),...S.map(u=>g.map(q=>{let x=u[q];if(x==null)return"";if(typeof x=="object"){if(x instanceof Date)return x.toISOString();x=JSON.stringify(x).replace(/"/g,'""')}else typeof x=="string"&&(x=x.replace(/"/g,'""'));return typeof x=="string"&&(x.includes(",")||x.includes('"')||x.includes(`
`))?`"${x}"`:x}).join(","))].join(`
`),y=new Blob([p],{type:"text/csv;charset=utf-8;"}),m=document.createElement("a");if(m.download!==void 0){const u=URL.createObjectURL(y);m.setAttribute("href",u),m.setAttribute("download",s.endsWith(".csv")?s:`${s}.csv`),m.style.visibility="hidden",document.body.appendChild(m),m.click(),document.body.removeChild(m)}}var gs=v('<span class="spinner svelte-14fqz8w"></span> Fetching...',1),ms=v('<div class="error-banner svelte-14fqz8w"> </div>'),hs=v('<small class="svelte-14fqz8w">Try adjusting your filters.</small>'),bs=v('<div class="empty-state svelte-14fqz8w"><p class="svelte-14fqz8w">No indoor climbing sessions found.</p> <!></div>'),ys=v('<div class="view-container svelte-14fqz8w"><div class="view-header svelte-14fqz8w"><h2 class="view-title svelte-14fqz8w">üßó Indoor Climbing History</h2> <div class="header-actions svelte-14fqz8w"><button class="action-btn secondary svelte-14fqz8w" title="Export filtered data to CSV">üì• Export</button> <button class="action-btn svelte-14fqz8w" title="Fetch data from cloud"><!></button></div></div> <!> <!> <div class="info-bar svelte-14fqz8w"><div class="legend-wrapper svelte-14fqz8w"><!></div> <div class="load-key svelte-14fqz8w"><span class="key-label svelte-14fqz8w">Load:</span> <div class="key-item svelte-14fqz8w"><span class="dot finger svelte-14fqz8w"></span> Finger</div> <div class="key-item svelte-14fqz8w"><span class="dot shoulder svelte-14fqz8w"></span> Shoulder</div> <div class="key-item svelte-14fqz8w"><span class="dot forearm svelte-14fqz8w"></span> Forearm</div></div></div> <div class="sessions-list"><!> <!></div></div>');function xs(S,s){va(s,!0);let g=H(fa([])),p=H(fa([])),y=H(!1),m=H(""),u=H(fa({startDate:"",endDate:"",location:"",sessionType:"",grade:""}));Ka(()=>{q()});function q(){const n=Ra("indoor_climb");d(g,n.sort((l,c)=>new Date(c.date).getTime()-new Date(l.date).getTime()),!0),T()}async function x(){d(y,!0),d(m,"");try{await Ma();const n=await ct();n.ok&&n.data?k(n.data):d(m,n.error||"Failed to fetch data",!0)}catch(n){d(m,n instanceof Error?n.message:"Unknown error",!0)}finally{d(y,!1)}}function k(n){const l=n.map(b=>({...b,activityType:"indoor_climb",createdAt:new Date().toISOString(),updatedAt:new Date().toISOString(),syncStatus:"synced",syncedAt:new Date().toISOString(),openGrip:0,crimpGrip:0,pinchGrip:0,sloperGrip:0,jugGrip:0}));Ba(l);const c=Ra("indoor_climb");d(g,c.sort((b,I)=>new Date(I.date).getTime()-new Date(b.date).getTime()),!0),T()}function O(n){d(u,n,!0),T()}function T(){d(p,t(g).filter(n=>{if(t(u).startDate&&n.date<t(u).startDate||t(u).endDate&&n.date>t(u).endDate||t(u).location&&n.location!==t(u).location||t(u).sessionType&&!n.trainingTypes?.includes(t(u).sessionType))return!1;if(t(u).grade){const l=t(u).grade.trim().toLowerCase();if(!n.climbs.some(b=>b.grade.trim().toLowerCase()===l))return!1}return!0}),!0)}var F=ys(),C=a(F),E=i(a(C),2),z=a(E);z.__click=()=>et(t(p),"indoor_climbs");var N=i(z,2);N.__click=x;var Z=a(N);{var W=n=>{var l=gs();Fa(),r(n,l)},ue=n=>{var l=wa("‚òÅÔ∏è Fetch Data");r(n,l)};_(Z,n=>{t(y)?n(W):n(ue,!1)})}e(N),e(E),e(C);var ee=i(C,2);{var B=n=>{var l=ms(),c=a(l,!0);e(l),w(()=>o(c,t(m))),Ze(3,l,()=>la),r(n,l)};_(ee,n=>{t(m)&&n(B)})}var h=i(ee,2);zt(h,{onFilterParamsChange:O});var L=i(h,2),J=a(L),Q=a(J);$a(Q),e(J),Fa(2),e(L);var X=i(L,2),K=a(X);ye(K,17,()=>t(p),n=>n.id,(n,l)=>{_s(n,{get session(){return t(l)},onDelete:q})});var te=i(K,2);{var fe=n=>{var l=bs(),c=i(a(l),2);{var b=I=>{var be=hs();r(I,be)};_(c,I=>{t(g).length>0&&I(b)})}e(l),r(n,l)};_(te,n=>{t(p).length===0&&n(fe)})}e(X),e(F),w(()=>N.disabled=t(y)),r(S,F),na()}ea(["click"]);var ws=v('<span class="chevron svelte-1frtlim">‚ñ≤</span>'),qs=v('<span class="chevron svelte-1frtlim">‚ñº</span>'),Ds=v('<div class="input-with-action svelte-1frtlim"><input type="text" id="area-filter-text" placeholder="Type area name..." class="flat-left svelte-1frtlim"/> <button class="action-btn flat-right svelte-1frtlim" title="Back to list">‚úï</button></div>'),Ss=v("<option> </option>"),ks=v('<select id="area-filter" class="svelte-1frtlim"><option>All Areas</option><!><option>Other (Manual Entry)</option></select>'),Ts=v('<div class="input-with-action svelte-1frtlim"><input type="text" id="crag-filter-text" placeholder="Type crag name..." class="flat-left svelte-1frtlim"/> <button class="action-btn flat-right svelte-1frtlim" title="Back to list">‚úï</button></div>'),Fs=v("<option> </option>"),Cs=v('<select id="crag-filter" class="svelte-1frtlim"><option>All Crags</option><!><option>Other (Manual Entry)</option></select>'),zs=v('<input type="text" id="crag-filter-text" class="svelte-1frtlim"/>'),Ls=v("<option> </option>"),Gs=v('<div class="filter-body svelte-1frtlim"><div class="filter-grid svelte-1frtlim"><div class="filter-item svelte-1frtlim"><label for="start-date" class="svelte-1frtlim">Start Date</label> <input type="date" id="start-date" class="svelte-1frtlim"/></div> <div class="filter-item svelte-1frtlim"><label for="end-date" class="svelte-1frtlim">End Date</label> <input type="date" id="end-date" class="svelte-1frtlim"/></div> <div class="filter-item svelte-1frtlim"><label for="area-filter" class="svelte-1frtlim">Area</label> <!></div> <div class="filter-item svelte-1frtlim"><label for="crag-filter" class="svelte-1frtlim">Crag</label> <!></div> <div class="filter-item svelte-1frtlim"><label for="session-type-filter" class="svelte-1frtlim">Session Type</label> <select id="session-type-filter" class="svelte-1frtlim"><option>Any Type</option><!></select></div> <div class="filter-item svelte-1frtlim"><label for="grade-filter" class="svelte-1frtlim">Grade (Exact)</label> <input type="text" id="grade-filter" placeholder="e.g. 7a" class="svelte-1frtlim"/></div></div> <div class="filter-actions svelte-1frtlim"><button class="reset-btn svelte-1frtlim">Reset Filters</button></div></div>'),Es=v('<div class="filter-container svelte-1frtlim"><button class="filter-header svelte-1frtlim"><div class="header-content svelte-1frtlim"><span class="icon svelte-1frtlim">üîç</span> <span class="title svelte-1frtlim">Filters</span> <!></div></button> <!></div>');function Os(S,s){va(s,!0);const g=_t(),p=["Projecting","Onsighting","Campusing","Repeaters","Fun","Volume"];let y=H(!1),m=H(""),u=H(""),q=H(""),x=H(""),k=H(""),O=H(""),T=H(!1),F=H(!1),C=ha(()=>t(q)&&t(q)!=="Other"?ut(t(q)):[]);function E(){t(q)==="Other"?(d(T,!0),d(q,"")):d(T,!1),d(x,""),d(F,!1),W()}function z(){t(x)==="Other"?(d(F,!0),d(x,"")):d(F,!1),W()}function N(){d(y,!t(y))}function Z(){d(m,""),d(u,""),d(q,""),d(x,""),d(k,""),d(O,""),d(T,!1),d(F,!1),W()}function W(){s.onFilterParamsChange({startDate:t(m),endDate:t(u),area:t(q),crag:t(x),sessionType:t(k),grade:t(O)})}var ue=Es(),ee=a(ue);ee.__click=N;var B=a(ee),h=i(a(B),4);{var L=K=>{var te=ws();r(K,te)},J=K=>{var te=qs();r(K,te)};_(h,K=>{t(y)?K(L):K(J,!1)})}e(B),e(ee);var Q=i(ee,2);{var X=K=>{var te=Gs(),fe=a(te),n=a(fe),l=i(a(n),2);Xe(l),l.__change=W,e(n);var c=i(n,2),b=i(a(c),2);Xe(b),b.__change=W,e(c);var I=i(c,2),be=i(a(I),2);{var pe=P=>{var ae=Ds(),ie=a(ae);Xe(ie),ie.__input=W;var j=i(ie,2);j.__click=()=>{d(T,!1),d(q,""),W()},e(ae),$e(ie,()=>t(q),A=>d(q,A)),r(P,ae)},xe=P=>{var ae=ks();ae.__change=E;var ie=a(ae);ie.value=ie.__value="";var j=i(ie);ye(j,17,()=>g,qe,(le,oe)=>{var me=Ss(),he=a(me,!0);e(me);var De={};w(()=>{o(he,t(oe)),De!==(De=t(oe))&&(me.value=(me.__value=t(oe))??"")}),r(le,me)});var A=i(j);A.value=A.__value="Other",e(ae),Ta(ae,()=>t(q),le=>d(q,le)),r(P,ae)};_(be,P=>{t(T)?P(pe):P(xe,!1)})}e(I);var _e=i(I,2),re=i(a(_e),2);{var se=P=>{var ae=Ts(),ie=a(ae);Xe(ie),ie.__input=W;var j=i(ie,2);j.__click=()=>{d(F,!1),d(x,""),W()},e(ae),$e(ie,()=>t(x),A=>d(x,A)),r(P,ae)},de=P=>{var ae=Te(),ie=we(ae);{var j=le=>{var oe=Cs();oe.__change=z;var me=a(oe);me.value=me.__value="";var he=i(me);ye(he,17,()=>t(C),qe,(Ie,ze)=>{var Fe=Fs(),Ve=a(Fe,!0);e(Fe);var Ce={};w(()=>{o(Ve,t(ze)),Ce!==(Ce=t(ze))&&(Fe.value=(Fe.__value=t(ze))??"")}),r(Ie,Fe)});var De=i(he);De.value=De.__value="Other",e(oe),Ta(oe,()=>t(x),Ie=>d(x,Ie)),r(le,oe)},A=le=>{var oe=zs();Xe(oe),oe.__input=W,w(()=>{Ne(oe,"placeholder",t(q)?"Filter crag...":"Select area first"),oe.disabled=!t(T)&&!t(q)}),$e(oe,()=>t(x),me=>d(x,me)),r(le,oe)};_(ie,le=>{!t(T)&&t(q)&&t(C).length>0?le(j):le(A,!1)},!0)}r(P,ae)};_(re,P=>{t(F)?P(se):P(de,!1)})}e(_e);var U=i(_e,2),ne=i(a(U),2);ne.__change=W;var ge=a(ne);ge.value=ge.__value="";var Me=i(ge);ye(Me,17,()=>p,qe,(P,ae)=>{var ie=Ls(),j=a(ie,!0);e(ie);var A={};w(()=>{o(j,t(ae)),A!==(A=t(ae))&&(ie.value=(ie.__value=t(ae))??"")}),r(P,ie)}),e(ne),e(U);var Je=i(U,2),je=i(a(Je),2);Xe(je),je.__input=W,e(Je),e(fe);var Ke=i(fe,2),ve=a(Ke);ve.__click=Z,e(Ke),e(te),$e(l,()=>t(m),P=>d(m,P)),$e(b,()=>t(u),P=>d(u,P)),Ta(ne,()=>t(k),P=>d(k,P)),$e(je,()=>t(O),P=>d(O,P)),Ze(3,te,()=>la,()=>({duration:200})),r(K,te)};_(Q,K=>{t(y)&&K(X)})}e(ue),w(()=>Ne(ee,"aria-expanded",t(y))),r(S,ue),na()}ea(["click","change","input"]);var As=v('<span class="climb-type-tag svelte-1k6anfh"> </span>'),Ns=v('<span class="notes-preview svelte-1k6anfh"> </span>'),js=v('<span class="attempts-count svelte-1k6anfh"> </span>'),Is=v('<div class="detail-row svelte-1k6anfh"><span class="label svelte-1k6anfh">Notes:</span> <p class="notes svelte-1k6anfh"> </p></div>'),Rs=v('<p class="empty-notes svelte-1k6anfh">No notes for this climb.</p>'),Ps=v('<div class="climb-details svelte-1k6anfh"><!> <div class="tags svelte-1k6anfh"><span class="tag type svelte-1k6anfh"> </span> <span class="tag attempt-text svelte-1k6anfh"> </span></div></div>'),Bs=v('<div><div class="climb-header svelte-1k6anfh" role="button" tabindex="0"><div class="climb-main-info svelte-1k6anfh"><span> </span> <span class="climb-name svelte-1k6anfh"> </span> <!> <!></div> <div class="climb-meta svelte-1k6anfh"><span><span class="icon svelte-1k6anfh"> </span> <!></span> <button class="delete-btn svelte-1k6anfh" aria-label="Delete climb" title="Delete climb">üóëÔ∏è</button> <span class="chevron svelte-1k6anfh"> </span></div></div> <!></div>');function Ms(S,s){va(s,!0);let g=Aa(s,"showClimbType",3,!1),p=H(!1);function y(){d(p,!t(p))}function m(c){c.stopPropagation(),s.onDelete()}const u={Flash:"‚ö°",Onsight:"üëÅÔ∏è",Redpoint:"üî¥",Dogged:"üõ†Ô∏è",DNF:"‚ùå"};var q=Bs();let x;var k=a(q);k.__click=y,k.__keydown=c=>(c.key==="Enter"||c.key===" ")&&y();var O=a(k),T=a(O);let F;var C=a(T,!0);e(T);var E=i(T,2),z=a(E,!0);e(E);var N=i(E,2);{var Z=c=>{var b=As(),I=a(b,!0);e(b),w(()=>o(I,s.climb.isSport?"Sport":"Boulder")),r(c,b)};_(N,c=>{g()&&c(Z)})}var W=i(N,2);{var ue=c=>{var b=Ns(),I=a(b);e(b),w(()=>o(I,`- ${s.climb.notes??""}`)),r(c,b)};_(W,c=>{!t(p)&&s.climb.notes&&c(ue)})}e(O);var ee=i(O,2),B=a(ee);let h;var L=a(B),J=a(L,!0);e(L);var Q=i(L,2);{var X=c=>{var b=js(),I=a(b,!0);e(b),w(()=>o(I,s.climb.attemptsNum)),r(c,b)};_(Q,c=>{s.climb.attemptType!=="Flash"&&s.climb.attemptType!=="Onsight"&&c(X)})}e(B);var K=i(B,2);K.__click=m;var te=i(K,2),fe=a(te,!0);e(te),e(ee),e(k);var n=i(k,2);{var l=c=>{var b=Ps(),I=a(b);{var be=U=>{var ne=Is(),ge=i(a(ne),2),Me=a(ge,!0);e(ge),e(ne),w(()=>o(Me,s.climb.notes)),r(U,ne)},pe=U=>{var ne=Rs();r(U,ne)};_(I,U=>{s.climb.notes?U(be):U(pe,!1)})}var xe=i(I,2),_e=a(xe),re=a(_e,!0);e(_e);var se=i(_e,2),de=a(se,!0);e(se),e(xe),e(b),w(()=>{o(re,s.climb.isSport?"Sport":"Boulder"),o(de,s.climb.attemptType)}),Ze(3,b,()=>la,()=>({duration:150})),r(c,b)};_(n,c=>{t(p)&&c(l)})}e(q),w(()=>{x=Be(q,1,"climb-entry svelte-1k6anfh",null,x,{expanded:t(p)}),Ne(k,"aria-expanded",t(p)),F=Be(T,1,"grade-badge svelte-1k6anfh",null,F,{sport:s.climb.isSport}),o(C,s.climb.grade),o(z,s.climb.name||"Unnamed Route"),h=Be(B,1,"attempt-type svelte-1k6anfh",null,h,{flash:s.climb.attemptType==="Flash"}),o(J,u[s.climb.attemptType]||s.climb.attemptType),o(fe,t(p)?"‚ñ≤":"‚ñº")}),r(S,q),na()}ea(["click","keydown"]);var Vs=v('<div class="sector-meta svelte-d5hg2r"> </div>'),Ws=v('<span class="stat svelte-d5hg2r"> </span>'),Us=v('<span class="status-icon pending svelte-d5hg2r" title="Waiting to sync">üîÑ</span>'),Hs=v('<span class="status-icon error svelte-d5hg2r" title="Sync error">‚ö†Ô∏è</span>'),Zs=v('<span class="chip svelte-d5hg2r"> </span>'),Js=v('<span class="text-none svelte-d5hg2r">None</span>'),Ks=v('<div class="detail-item svelte-d5hg2r"><span class="label svelte-d5hg2r">Difficulty</span> <span class="value svelte-d5hg2r"> </span></div>'),Ys=v('<span class="chip svelte-d5hg2r"> </span>'),Qs=v('<span class="text-none svelte-d5hg2r">None</span>'),Xs=v('<div class="detail-item svelte-d5hg2r"><span class="label svelte-d5hg2r">Category</span> <div class="value-chips svelte-d5hg2r"><!></div></div>'),$s=v('<span class="chip svelte-d5hg2r"> </span>'),ei=v('<span class="text-none svelte-d5hg2r">None</span>'),ai=v('<div class="detail-item svelte-d5hg2r"><span class="label svelte-d5hg2r">Focus</span> <div class="value-chips svelte-d5hg2r"><!></div></div>'),ti=v('<span class="chip svelte-d5hg2r"> </span>'),si=v('<span class="text-none svelte-d5hg2r">None</span>'),ii=v('<div class="detail-item svelte-d5hg2r"><span class="label svelte-d5hg2r">Energy System</span> <div class="value-chips svelte-d5hg2r"><!></div></div>'),ri=v('<div class="metric svelte-d5hg2r"><span class="label svelte-d5hg2r">Open Grip</span> <div class="bar-container svelte-d5hg2r"><div class="bar-fill svelte-d5hg2r"></div></div> <span class="score svelte-d5hg2r"> </span></div>'),vi=v('<div class="metric svelte-d5hg2r"><span class="label svelte-d5hg2r">Crimp Grip</span> <div class="bar-container svelte-d5hg2r"><div class="bar-fill svelte-d5hg2r"></div></div> <span class="score svelte-d5hg2r"> </span></div>'),ni=v('<div class="metric svelte-d5hg2r"><span class="label svelte-d5hg2r">Pinch Grip</span> <div class="bar-container svelte-d5hg2r"><div class="bar-fill svelte-d5hg2r"></div></div> <span class="score svelte-d5hg2r"> </span></div>'),li=v('<div class="metric svelte-d5hg2r"><span class="label svelte-d5hg2r">Sloper Grip</span> <div class="bar-container svelte-d5hg2r"><div class="bar-fill svelte-d5hg2r"></div></div> <span class="score svelte-d5hg2r"> </span></div>'),oi=v('<div class="metric svelte-d5hg2r"><span class="label svelte-d5hg2r">Jug Grip</span> <div class="bar-container svelte-d5hg2r"><div class="bar-fill svelte-d5hg2r"></div></div> <span class="score svelte-d5hg2r"> </span></div>'),di=v('<p class="no-climbs svelte-d5hg2r">No climbs logged for this session.</p>'),ci=v('<div class="card-body svelte-d5hg2r"><div class="details-grid svelte-d5hg2r"><div class="detail-item svelte-d5hg2r"><span class="label svelte-d5hg2r">Training Type</span> <div class="value-chips svelte-d5hg2r"><!></div></div> <!> <!> <!> <!></div> <div class="metrics-container svelte-d5hg2r"><div class="metric svelte-d5hg2r"><span class="label svelte-d5hg2r">Finger Load</span> <div class="bar-container svelte-d5hg2r"><div class="bar-fill svelte-d5hg2r"></div></div> <span class="score svelte-d5hg2r"> </span></div> <div class="metric svelte-d5hg2r"><span class="label svelte-d5hg2r">Shoulder Load</span> <div class="bar-container svelte-d5hg2r"><div class="bar-fill svelte-d5hg2r"></div></div> <span class="score svelte-d5hg2r"> </span></div> <div class="metric svelte-d5hg2r"><span class="label svelte-d5hg2r">Forearm Load</span> <div class="bar-container svelte-d5hg2r"><div class="bar-fill svelte-d5hg2r"></div></div> <span class="score svelte-d5hg2r"> </span></div> <!> <!> <!> <!> <!></div> <div class="climbs-list svelte-d5hg2r"><h4 class="svelte-d5hg2r">Climbs</h4> <div class="climbs-container svelte-d5hg2r"><!> <!></div></div></div>'),_i=v('<div><div class="card-header svelte-d5hg2r" role="button" tabindex="0"><div class="header-main svelte-d5hg2r"><div class="date-badge svelte-d5hg2r"><span class="day svelte-d5hg2r"> </span> <span class="month svelte-d5hg2r"> </span></div> <div class="session-info svelte-d5hg2r"><div class="session-text svelte-d5hg2r"><h3 class="location svelte-d5hg2r"> <!></h3> <!> <div class="session-meta svelte-d5hg2r"><span class="type-tag svelte-d5hg2r"> </span> <span class="stat svelte-d5hg2r"> </span> <!></div></div> <div class="load-summary svelte-d5hg2r"><div class="load-badge finger svelte-d5hg2r"> </div> <div class="load-badge shoulder svelte-d5hg2r"> </div> <div class="load-badge forearm svelte-d5hg2r"> </div></div></div></div> <div class="header-actions svelte-d5hg2r"><div class="header-status svelte-d5hg2r"><!></div> <button class="btn-icon delete-session svelte-d5hg2r" title="Delete Session">üóëÔ∏è</button> <span class="chevron svelte-d5hg2r"> </span></div></div> <!></div> <!>',1);function ui(S,s){va(s,!0);let g=H(!1),p=H(!1);function y(){d(g,!t(g))}function m(){d(p,!0)}function u(){Pa(s.session.id),d(p,!1),s.onDelete()}function q(j){const A=[...s.session.climbs];A.splice(j,1),Ya(s.session.id,{climbs:A}),s.onDelete()}let x=ha(()=>s.session.climbs.length),k=ha(()=>s.session.climbs.reduce((j,A)=>{const le=parseInt(A.grade.replace(/\D/g,""))||0,oe=parseInt(j.replace(/\D/g,""))||0;return le>oe?A.grade:j},"V0/4a"));var O=_i(),T=we(O);let F;var C=a(T);C.__click=y,C.__keydown=j=>j.key==="Enter"&&y();var E=a(C),z=a(E),N=a(z),Z=a(N,!0);e(N);var W=i(N,2),ue=a(W,!0);e(W),e(z);var ee=i(z,2),B=a(ee),h=a(B),L=a(h),J=i(L);{var Q=j=>{var A=wa();w(()=>o(A,`- ${s.session.crag??""}`)),r(j,A)};_(J,j=>{s.session.crag&&j(Q)})}e(h);var X=i(h,2);{var K=j=>{var A=Vs(),le=a(A);e(A),w(()=>o(le,`üìç ${s.session.sector??""}`)),r(j,A)};_(X,j=>{s.session.sector&&j(K)})}var te=i(X,2),fe=a(te),n=a(fe,!0);e(fe);var l=i(fe,2),c=a(l);e(l);var b=i(l,2);{var I=j=>{var A=Ws(),le=a(A);e(A),w(()=>o(le,`Max: ${t(k)??""}`)),r(j,A)};_(b,j=>{t(x)>0&&j(I)})}e(te),e(B);var be=i(B,2),pe=a(be),xe=a(pe,!0);e(pe);var _e=i(pe,2),re=a(_e,!0);e(_e);var se=i(_e,2),de=a(se,!0);e(se),e(be),e(ee),e(E);var U=i(E,2),ne=a(U),ge=a(ne);{var Me=j=>{var A=Us();r(j,A)},Je=j=>{var A=Te(),le=we(A);{var oe=me=>{var he=Hs();r(me,he)};_(le,me=>{s.session.syncStatus==="error"&&me(oe)},!0)}r(j,A)};_(ge,j=>{s.session.syncStatus==="pending"?j(Me):j(Je,!1)})}e(ne);var je=i(ne,2);je.__click=j=>{j.stopPropagation(),m()};var Ke=i(je,2),ve=a(Ke,!0);e(Ke),e(U),e(C);var P=i(C,2);{var ae=j=>{var A=ci(),le=a(A),oe=a(le),me=i(a(oe),2),he=a(me);{var De=f=>{var D=Te(),G=we(D);ye(G,17,()=>s.session.trainingTypes,qe,(Y,M)=>{var $=Zs(),ce=a($,!0);e($),w(()=>o(ce,t(M))),r(Y,$)}),r(f,D)},Ie=f=>{var D=Js();r(f,D)};_(he,f=>{s.session.trainingTypes&&s.session.trainingTypes.length>0&&!s.session.trainingTypes.includes("None")?f(De):f(Ie,!1)})}e(me),e(oe);var ze=i(oe,2);{var Fe=f=>{var D=Ks(),G=i(a(D),2),Y=a(G,!0);e(G),e(D),w(()=>o(Y,s.session.difficulty)),r(f,D)};_(ze,f=>{s.session.difficulty&&f(Fe)})}var Ve=i(ze,2);{var Ce=f=>{var D=Xs(),G=i(a(D),2),Y=a(G);{var M=ce=>{var Se=Te(),Ue=we(Se);ye(Ue,17,()=>s.session.categories,qe,(ke,He)=>{var ra=Ys(),Ea=a(ra,!0);e(ra),w(()=>o(Ea,t(He))),r(ke,ra)}),r(ce,Se)},$=ce=>{var Se=Qs();r(ce,Se)};_(Y,ce=>{s.session.categories.length>0&&!s.session.categories.includes("None")?ce(M):ce($,!1)})}e(G),e(D),r(f,D)};_(Ve,f=>{s.session.categories?.length&&f(Ce)})}var Le=i(Ve,2);{var oa=f=>{var D=ai(),G=i(a(D),2),Y=a(G);{var M=ce=>{var Se=Te(),Ue=we(Se);ye(Ue,17,()=>s.session.techniqueFocuses,qe,(ke,He)=>{var ra=$s(),Ea=a(ra,!0);e(ra),w(()=>o(Ea,t(He))),r(ke,ra)}),r(ce,Se)},$=ce=>{var Se=ei();r(ce,Se)};_(Y,ce=>{s.session.techniqueFocuses.length>0&&!s.session.techniqueFocuses.includes("None")?ce(M):ce($,!1)})}e(G),e(D),r(f,D)};_(Le,f=>{s.session.techniqueFocuses?.length&&f(oa)})}var Ge=i(Le,2);{var aa=f=>{var D=ii(),G=i(a(D),2),Y=a(G);{var M=ce=>{var Se=Te(),Ue=we(Se);ye(Ue,17,()=>s.session.energySystems,qe,(ke,He)=>{var ra=ti(),Ea=a(ra,!0);e(ra),w(()=>o(Ea,t(He))),r(ke,ra)}),r(ce,Se)},$=ce=>{var Se=si();r(ce,Se)};_(Y,ce=>{s.session.energySystems.length>0&&!s.session.energySystems.includes("None")?ce(M):ce($,!1)})}e(G),e(D),r(f,D)};_(Ge,f=>{s.session.energySystems?.length&&f(aa)})}e(le);var Re=i(le,2),ta=a(Re),da=i(a(ta),2),sa=a(da);e(da);var Ee=i(da,2),We=a(Ee);e(Ee),e(ta);var ca=i(ta,2),Oe=i(a(ca),2),ia=a(Oe);e(Oe);var _a=i(Oe,2),Pe=a(_a);e(_a),e(ca);var ba=i(ca,2),ua=i(a(ba),2),qa=a(ua);e(ua);var pa=i(ua,2),Ca=a(pa);e(pa),e(ba);var Da=i(ba,2);{var za=f=>{var D=ri(),G=i(a(D),2),Y=a(G);e(G);var M=i(G,2),$=a(M);e(M),e(D),w(()=>{Ae(Y,`width: ${s.session.openGrip/5*100}%`),o($,`${s.session.openGrip??""}/5`)}),r(f,D)};_(Da,f=>{s.session.openGrip&&f(za)})}var ya=i(Da,2);{var Sa=f=>{var D=vi(),G=i(a(D),2),Y=a(G);e(G);var M=i(G,2),$=a(M);e(M),e(D),w(()=>{Ae(Y,`width: ${s.session.crimpGrip/5*100}%`),o($,`${s.session.crimpGrip??""}/5`)}),r(f,D)};_(ya,f=>{s.session.crimpGrip&&f(Sa)})}var xa=i(ya,2);{var La=f=>{var D=ni(),G=i(a(D),2),Y=a(G);e(G);var M=i(G,2),$=a(M);e(M),e(D),w(()=>{Ae(Y,`width: ${s.session.pinchGrip/5*100}%`),o($,`${s.session.pinchGrip??""}/5`)}),r(f,D)};_(xa,f=>{s.session.pinchGrip&&f(La)})}var ka=i(xa,2);{var Ga=f=>{var D=li(),G=i(a(D),2),Y=a(G);e(G);var M=i(G,2),$=a(M);e(M),e(D),w(()=>{Ae(Y,`width: ${s.session.sloperGrip/5*100}%`),o($,`${s.session.sloperGrip??""}/5`)}),r(f,D)};_(ka,f=>{s.session.sloperGrip&&f(Ga)})}var Ye=i(ka,2);{var Qe=f=>{var D=oi(),G=i(a(D),2),Y=a(G);e(G);var M=i(G,2),$=a(M);e(M),e(D),w(()=>{Ae(Y,`width: ${s.session.jugGrip/5*100}%`),o($,`${s.session.jugGrip??""}/5`)}),r(f,D)};_(Ye,f=>{s.session.jugGrip&&f(Qe)})}e(Re);var ga=i(Re,2),Na=i(a(ga),2),ja=a(Na);ye(ja,17,()=>s.session.climbs,qe,(f,D,G)=>{{let Y=ha(()=>s.session.climbingType==="Mixed");Ms(f,{get climb(){return t(D)},onDelete:()=>q(G),get showClimbType(){return t(Y)}})}});var R=i(ja,2);{var V=f=>{var D=di();r(f,D)};_(R,f=>{s.session.climbs.length===0&&f(V)})}e(Na),e(ga),e(A),w(()=>{Ae(sa,`width: ${s.session.fingerLoad/5*100}%`),o(We,`${s.session.fingerLoad??""}/5`),Ae(ia,`width: ${s.session.shoulderLoad/5*100}%`),o(Pe,`${s.session.shoulderLoad??""}/5`),Ae(qa,`width: ${s.session.forearmLoad/5*100}%`),o(Ca,`${s.session.forearmLoad??""}/5`)}),Ze(3,A,()=>la,()=>({duration:200})),r(j,A)};_(P,j=>{t(g)&&j(ae)})}e(T);var ie=i(T,2);Va(ie,{get isOpen(){return t(p)},title:"Delete Session",message:"Are you sure you want to delete this session and all its climbs? This cannot be undone.",onConfirm:u,onCancel:()=>d(p,!1)}),w((j,A)=>{F=Be(T,1,"session-card svelte-d5hg2r",null,F,{expanded:t(g)}),Ne(C,"aria-expanded",t(g)),o(Z,j),o(ue,A),o(L,`${s.session.area??""} `),o(n,s.session.climbingType),o(c,`${t(x)??""} climbs`),Ne(pe,"title",`Finger Load: ${s.session.fingerLoad??""}`),o(xe,s.session.fingerLoad),Ne(_e,"title",`Shoulder Load: ${s.session.shoulderLoad??""}`),o(re,s.session.shoulderLoad),Ne(se,"title",`Forearm Load: ${s.session.forearmLoad??""}`),o(de,s.session.forearmLoad),o(ve,t(g)?"‚ñ≤":"‚ñº")},[()=>new Date(s.session.date).getDate(),()=>new Date(s.session.date).toLocaleDateString(void 0,{month:"short"})]),r(S,O),na()}ea(["click","keydown"]);var fi=v('<span class="spinner svelte-1s7jdlh"></span> Fetching...',1),pi=v('<div class="error-banner svelte-1s7jdlh"> </div>'),gi=v('<small class="svelte-1s7jdlh">Try adjusting your filters.</small>'),mi=v('<div class="empty-state svelte-1s7jdlh"><p class="svelte-1s7jdlh">No outdoor climbing sessions found.</p> <!></div>'),hi=v('<div class="view-container svelte-1s7jdlh"><div class="view-header svelte-1s7jdlh"><h2 class="view-title svelte-1s7jdlh">‚õ∞Ô∏è Outdoor Climbing History</h2> <div class="header-actions svelte-1s7jdlh"><button class="action-btn secondary svelte-1s7jdlh" title="Export filtered data to CSV">üì• Export</button> <button class="action-btn svelte-1s7jdlh" title="Fetch data from cloud"><!></button></div></div> <!> <!> <div class="info-bar svelte-1s7jdlh"><div class="legend-wrapper svelte-1s7jdlh"><!></div> <div class="load-key svelte-1s7jdlh"><span class="key-label svelte-1s7jdlh">Load:</span> <div class="key-item svelte-1s7jdlh"><span class="dot finger svelte-1s7jdlh"></span> Finger</div> <div class="key-item svelte-1s7jdlh"><span class="dot shoulder svelte-1s7jdlh"></span> Shoulder</div> <div class="key-item svelte-1s7jdlh"><span class="dot forearm svelte-1s7jdlh"></span> Forearm</div></div></div> <div class="sessions-list"><!> <!></div></div>');function bi(S,s){va(s,!0);let g=H(fa([])),p=H(fa([])),y=H(!1),m=H(""),u=H(fa({startDate:"",endDate:"",area:"",crag:"",sessionType:"",grade:""}));Ka(()=>{q()});function q(){const n=Ra("outdoor_climb");d(g,n.sort((l,c)=>new Date(c.date).getTime()-new Date(l.date).getTime()),!0),T()}async function x(){d(y,!0),d(m,"");try{await Ma();const n=await ft();n.ok&&n.data?k(n.data):d(m,n.error||"Failed to fetch data",!0)}catch(n){d(m,n instanceof Error?n.message:"Unknown error",!0)}finally{d(y,!1)}}function k(n){const l=n.map(b=>({...b,activityType:"outdoor_climb",createdAt:new Date().toISOString(),updatedAt:new Date().toISOString(),syncStatus:"synced",syncedAt:new Date().toISOString(),openGrip:0,crimpGrip:0,pinchGrip:0,sloperGrip:0,jugGrip:0}));Ba(l);const c=Ra("outdoor_climb");d(g,c.sort((b,I)=>new Date(I.date).getTime()-new Date(b.date).getTime()),!0),T()}function O(n){d(u,n,!0),T()}function T(){d(p,t(g).filter(n=>{if(t(u).startDate&&n.date<t(u).startDate||t(u).endDate&&n.date>t(u).endDate||t(u).area&&!n.area.toLowerCase().includes(t(u).area.toLowerCase())||t(u).crag&&!n.crag.toLowerCase().includes(t(u).crag.toLowerCase())||t(u).sessionType&&!n.trainingTypes?.includes(t(u).sessionType))return!1;if(t(u).grade){const l=t(u).grade.trim().toLowerCase();if(!n.climbs.some(b=>b.grade.trim().toLowerCase()===l))return!1}return!0}),!0)}var F=hi(),C=a(F),E=i(a(C),2),z=a(E);z.__click=()=>et(t(p),"outdoor_climbs");var N=i(z,2);N.__click=x;var Z=a(N);{var W=n=>{var l=fi();Fa(),r(n,l)},ue=n=>{var l=wa("‚òÅÔ∏è Fetch Data");r(n,l)};_(Z,n=>{t(y)?n(W):n(ue,!1)})}e(N),e(E),e(C);var ee=i(C,2);{var B=n=>{var l=pi(),c=a(l,!0);e(l),w(()=>o(c,t(m))),Ze(3,l,()=>la),r(n,l)};_(ee,n=>{t(m)&&n(B)})}var h=i(ee,2);Os(h,{onFilterParamsChange:O});var L=i(h,2),J=a(L),Q=a(J);$a(Q),e(J),Fa(2),e(L);var X=i(L,2),K=a(X);ye(K,17,()=>t(p),n=>n.id,(n,l)=>{ui(n,{get session(){return t(l)},onDelete:q})});var te=i(K,2);{var fe=n=>{var l=mi(),c=i(a(l),2);{var b=I=>{var be=gi();r(I,be)};_(c,I=>{t(g).length>0&&I(b)})}e(l),r(n,l)};_(te,n=>{t(p).length===0&&n(fe)})}e(X),e(F),w(()=>N.disabled=t(y)),r(S,F),na()}ea(["click"]);var yi=v('<div class="view-container svelte-133enjd"><h2 class="view-title svelte-133enjd">üèãÔ∏è Gym Session History</h2> <p class="placeholder-text svelte-133enjd">Your gym sessions will appear here</p></div>');function xi(S){var s=yi();r(S,s)}var wi=v('<span class="spinner svelte-1szs0u9"></span> Fetching...',1),qi=v('<div class="loading svelte-1szs0u9">Loading sessions...</div>'),Di=v('<div class="empty-state svelte-1szs0u9"><!></div>'),Si=v('<span class="set-tag svelte-1szs0u9"> <span class="x svelte-1szs0u9">x</span> </span>'),ki=v('<div class="ex-notes svelte-1szs0u9"> </div>'),Ti=v('<div class="exercise-item svelte-1szs0u9"><div class="ex-header svelte-1szs0u9"><span class="ex-name svelte-1szs0u9"> </span> <span class="ex-grip svelte-1szs0u9"> </span></div> <div class="ex-sets svelte-1szs0u9"></div> <!></div>'),Fi=v('<div class="card-body svelte-1szs0u9"><div class="exercises-list svelte-1szs0u9"></div></div>'),Ci=v('<div><div class="card-header" role="button" tabindex="0"><div class="header-main"><span class="session-date svelte-1szs0u9"> </span> <span class="meta svelte-1szs0u9"><!> </span></div> <div class="header-status svelte-1szs0u9"><span>‚óè</span> <button class="btn-icon delete-btn svelte-1szs0u9" title="Delete Session">üóëÔ∏è</button> <span class="chevron svelte-1szs0u9"> </span></div></div> <!></div>'),zi=v('<div class="timeline svelte-1szs0u9"></div>'),Li=v('<div class="view-content svelte-1szs0u9"><div class="header svelte-1szs0u9"><h3 class="svelte-1szs0u9">ü§è Fingerboarding Log</h3> <button class="fetch-btn svelte-1szs0u9" title="Fetch data from cloud"><!></button></div> <div class="filters svelte-1szs0u9"><div class="filter-group svelte-1szs0u9"><label for="start-date" class="svelte-1szs0u9">From</label> <input type="date" id="start-date" class="svelte-1szs0u9"/></div> <div class="filter-group svelte-1szs0u9"><label for="end-date" class="svelte-1szs0u9">To</label> <input type="date" id="end-date" class="svelte-1szs0u9"/></div></div> <!></div> <!>',1);function Gi(S,s){va(s,!0);let g=H(fa([])),p=H(!0),y=H(""),m=H(""),u=H(fa(new Set)),q=H(!1),x=H(null);function k(l){d(x,l,!0),d(q,!0)}function O(){t(x)&&(Pa(t(x)),d(x,null),d(q,!1),d(g,Wa().sort((l,c)=>new Date(c.date).getTime()-new Date(l.date).getTime()),!0))}async function T(){d(p,!0),d(g,Wa().sort((l,c)=>new Date(c.date).getTime()-new Date(l.date).getTime()),!0);try{await Ma();const l=await pt();if(l.ok&&l.data){const c=l.data.map(b=>({...b,activityType:"fingerboarding",createdAt:b.createdAt||new Date().toISOString(),updatedAt:b.updatedAt||new Date().toISOString(),syncStatus:"synced"}));Ba(c),d(g,Wa().sort((b,I)=>new Date(I.date).getTime()-new Date(b.date).getTime()),!0)}}catch(l){console.error("Failed to sync",l)}finally{d(p,!1)}}T();let F=ha(()=>t(g).filter(l=>!(t(y)&&new Date(l.date)<new Date(t(y))||t(m)&&new Date(l.date)>new Date(t(m)))));function C(l){t(u).has(l)?t(u).delete(l):t(u).add(l),d(u,new Set(t(u)),!0)}function E(l){return l.exercises.reduce((c,b)=>c+b.details.length,0)}var z=Li(),N=we(z),Z=a(N),W=i(a(Z),2);W.__click=T;var ue=a(W);{var ee=l=>{var c=wi();Fa(),r(l,c)},B=l=>{var c=wa("‚òÅÔ∏è Fetch Data");r(l,c)};_(ue,l=>{t(p)?l(ee):l(B,!1)})}e(W),e(Z);var h=i(Z,2),L=a(h),J=i(a(L),2);Xe(J),e(L);var Q=i(L,2),X=i(a(Q),2);Xe(X),e(Q),e(h);var K=i(h,2);{var te=l=>{var c=qi();r(l,c)},fe=l=>{var c=Te(),b=we(c);{var I=pe=>{var xe=Di(),_e=a(xe);{var re=de=>{var U=wa("No sessions match filter.");r(de,U)},se=de=>{var U=wa("No fingerboarding sessions logged yet.");r(de,U)};_(_e,de=>{t(g).length>0?de(re):de(se,!1)})}e(xe),r(pe,xe)},be=pe=>{var xe=zi();ye(xe,21,()=>t(F),qe,(_e,re)=>{var se=Ci();let de;var U=a(se);U.__click=()=>C(t(re).id),U.__keydown=he=>he.key==="Enter"&&C(t(re).id);var ne=a(U),ge=a(ne),Me=a(ge,!0);e(ge);var Je=i(ge,2),je=a(Je);{var Ke=he=>{var De=wa();w(()=>o(De,`${t(re).location??""} ¬∑`)),r(he,De)};_(je,he=>{t(re).location&&t(re).location!=="N/A"&&t(re).location!=="Home"&&he(Ke)})}var ve=i(je);e(Je),e(ne);var P=i(ne,2),ae=a(P);let ie;var j=i(ae,2);j.__click=he=>{he.stopPropagation(),k(t(re).id)};var A=i(j,2),le=a(A,!0);e(A),e(P),e(U);var oe=i(U,2);{var me=he=>{var De=Fi(),Ie=a(De);ye(Ie,21,()=>t(re).exercises,qe,(ze,Fe)=>{var Ve=Ti(),Ce=a(Ve),Le=a(Ce),oa=a(Le,!0);e(Le);var Ge=i(Le,2),aa=a(Ge,!0);e(Ge),e(Ce);var Re=i(Ce,2);ye(Re,21,()=>t(Fe).details,qe,(sa,Ee)=>{var We=Si(),ca=a(We),Oe=i(ca,2);e(We),w(()=>{o(ca,`${t(Ee).weight>0?`+${t(Ee).weight}kg`:"BW"} `),o(Oe,` ${t(Ee).reps??""}s/reps`)}),r(sa,We)}),e(Re);var ta=i(Re,2);{var da=sa=>{var Ee=ki(),We=a(Ee);e(Ee),w(()=>o(We,`"${t(Fe).notes??""}"`)),r(sa,Ee)};_(ta,sa=>{t(Fe).notes&&sa(da)})}e(Ve),w(()=>{o(oa,t(Fe).name),o(aa,t(Fe).gripType)}),r(ze,Ve)}),e(Ie),e(De),Ze(3,De,()=>la,()=>({duration:200})),r(he,De)};_(oe,he=>{t(u).has(t(re).id)&&he(me)})}e(se),w((he,De,Ie,ze)=>{de=Be(se,1,"session-card",null,de,he),o(Me,De),o(ve,` ${t(re).exercises.length??""} Exercises ¬∑ ${Ie??""} Sets`),ie=Be(ae,1,"sync-dot svelte-1szs0u9",null,ie,{synced:t(re).syncStatus==="synced"}),Ne(ae,"title",t(re).syncStatus==="synced"?"Synced":"Local"),o(le,ze)},[()=>({expanded:t(u).has(t(re).id)}),()=>new Date(t(re).date).toLocaleDateString(void 0,{weekday:"short",month:"short",day:"numeric"}),()=>E(t(re)),()=>t(u).has(t(re).id)?"‚ñ≤":"‚ñº"]),r(_e,se)}),e(xe),r(pe,xe)};_(b,pe=>{t(F).length===0?pe(I):pe(be,!1)},!0)}r(l,c)};_(K,l=>{t(p)&&t(g).length===0?l(te):l(fe,!1)})}e(N);var n=i(N,2);Va(n,{get isOpen(){return t(q)},title:"Delete Fingerboard Session",message:"Are you sure you want to delete this session? This cannot be undone.",onConfirm:O,onCancel:()=>d(q,!1)}),w(()=>W.disabled=t(p)),$e(J,()=>t(y),l=>d(y,l)),$e(X,()=>t(m),l=>d(m,l)),r(S,z),na()}ea(["click","keydown"]);var Ei=v('<span class="spinner svelte-xyvf5r"></span> Fetching...',1),Oi=v('<div class="loading svelte-xyvf5r">Loading sessions...</div>'),Ai=v('<div class="empty-state svelte-xyvf5r">No competitions logged yet.</div>'),Ni=v('<span class="round-pos svelte-xyvf5r"> </span>'),ji=v('<span class="c-attempts svelte-xyvf5r"> </span>'),Ii=v('<div class="climb-notes svelte-xyvf5r"> </div>'),Ri=v('<div class="climb-row svelte-xyvf5r"><div class="climb-info svelte-xyvf5r"><span class="c-name svelte-xyvf5r"> </span> <!></div> <div class="climb-result"><span> </span></div></div> <!>',1),Pi=v('<div class="climbs-list"></div>'),Bi=v('<div class="round-item svelte-xyvf5r"><div class="round-header svelte-xyvf5r"><span class="round-name"> </span> <!></div> <!></div>'),Mi=v('<div class="rounds-list svelte-xyvf5r"></div>'),Vi=v('<div class="load-meta svelte-xyvf5r"><span> </span></div>'),Wi=v('<div class="card-body svelte-xyvf5r"><!> <!> <div class="session-footer svelte-xyvf5r"><span> </span></div></div>'),Ui=v('<div><div class="card-header svelte-xyvf5r" role="button" tabindex="0"><div class="header-main svelte-xyvf5r"><div class="left-col svelte-xyvf5r"><span class="venue svelte-xyvf5r"> </span> <span class="date svelte-xyvf5r"> </span></div> <div class="right-col svelte-xyvf5r"><div class="badges svelte-xyvf5r"><span class="type-tag svelte-xyvf5r"> </span> <span class="result-tag svelte-xyvf5r"> </span></div></div></div> <div class="header-status svelte-xyvf5r"><span>‚óè</span> <button class="btn-icon delete-btn svelte-xyvf5r" title="Delete Session">üóëÔ∏è</button> <span class="chevron svelte-xyvf5r"> </span></div></div> <!></div>'),Hi=v('<div class="timeline svelte-xyvf5r"></div>'),Zi=v('<div class="view-content svelte-xyvf5r"><div class="header svelte-xyvf5r"><h3 class="svelte-xyvf5r">üèÜ Competition Log</h3> <button class="fetch-btn svelte-xyvf5r" title="Fetch data from cloud"><!></button></div> <!> <!></div>');function Ji(S,s){va(s,!0);let g=H(fa([])),p=H(!0),y=H(fa(new Set)),m=H(!1),u=H(null);function q(h){d(u,h,!0),d(m,!0)}function x(){t(u)&&(Pa(t(u)),d(u,null),d(m,!1),d(g,Ua().sort((h,L)=>new Date(L.date).getTime()-new Date(h.date).getTime()),!0))}async function k(){d(p,!0),d(g,Ua().sort((h,L)=>new Date(L.date).getTime()-new Date(h.date).getTime()),!0);try{await Ma();const h=await gt();if(h.ok&&h.data){const L=h.data.map(J=>({...J,activityType:"competition",type:J.type,rounds:J.rounds.map(Q=>({...Q,climbs:Q.climbs?.map(X=>({...X,status:X.status}))})),createdAt:J.createdAt||new Date().toISOString(),updatedAt:J.updatedAt||new Date().toISOString(),syncStatus:"synced"}));Ba(L),d(g,Ua().sort((J,Q)=>new Date(Q.date).getTime()-new Date(J.date).getTime()),!0)}}catch(h){console.error("Failed to sync",h)}finally{d(p,!1)}}k();function O(h){t(y).has(h)?t(y).delete(h):t(y).add(h),d(y,new Set(t(y)),!0)}function T(h){if(!h.rounds||h.rounds.length===0)return"No rounds";const L=h.rounds[h.rounds.length-1];if(L.position)return`#${L.position} ${L.name}`;if(L.climbs){const J=L.climbs.filter(X=>X.status==="Top"||X.status==="Flash").length,Q=L.climbs.filter(X=>X.status==="Zone").length;return`${h.rounds.length} Rnds ¬∑ Final: ${J}T ${Q+J}Z`}return L.name}var F=Zi(),C=a(F),E=i(a(C),2);E.__click=k;var z=a(E);{var N=h=>{var L=Ei();Fa(),r(h,L)},Z=h=>{var L=wa("‚òÅÔ∏è Fetch Data");r(h,L)};_(z,h=>{t(p)?h(N):h(Z,!1)})}e(E),e(C);var W=i(C,2);{var ue=h=>{var L=Oi();r(h,L)},ee=h=>{var L=Te(),J=we(L);{var Q=K=>{var te=Ai();r(K,te)},X=K=>{var te=Hi();ye(te,21,()=>t(g),qe,(fe,n)=>{var l=Ui();let c;var b=a(l);b.__click=()=>O(t(n).id),b.__keydown=A=>A.key==="Enter"&&O(t(n).id);var I=a(b),be=a(I),pe=a(be),xe=a(pe,!0);e(pe);var _e=i(pe,2),re=a(_e,!0);e(_e),e(be);var se=i(be,2),de=a(se),U=a(de),ne=a(U,!0);e(U);var ge=i(U,2),Me=a(ge,!0);e(ge),e(de),e(se),e(I);var Je=i(I,2),je=a(Je);let Ke;var ve=i(je,2);ve.__click=A=>{A.stopPropagation(),q(t(n).id)};var P=i(ve,2),ae=a(P,!0);e(P),e(Je),e(b);var ie=i(b,2);{var j=A=>{var le=Wi(),oe=a(le);{var me=Ce=>{var Le=Mi();ye(Le,21,()=>t(n).rounds,qe,(oa,Ge)=>{var aa=Bi(),Re=a(aa),ta=a(Re),da=a(ta,!0);e(ta);var sa=i(ta,2);{var Ee=Oe=>{var ia=Ni(),_a=a(ia);e(ia),w(()=>o(_a,`#${t(Ge).position??""}`)),r(Oe,ia)};_(sa,Oe=>{t(Ge).position&&Oe(Ee)})}e(Re);var We=i(Re,2);{var ca=Oe=>{var ia=Pi();ye(ia,21,()=>t(Ge).climbs,qe,(_a,Pe)=>{var ba=Ri(),ua=we(ba),qa=a(ua),pa=a(qa),Ca=a(pa,!0);e(pa);var Da=i(pa,2);{var za=Ye=>{var Qe=ji(),ga=a(Qe);e(Qe),w(()=>o(ga,`(${t(Pe).attemptCount??""} tries)`)),r(Ye,Qe)};_(Da,Ye=>{t(Pe).attemptCount>1&&Ye(za)})}e(qa);var ya=i(qa,2),Sa=a(ya);let xa;var La=a(Sa,!0);e(Sa),e(ya),e(ua);var ka=i(ua,2);{var Ga=Ye=>{var Qe=Ii(),ga=a(Qe);e(Qe),w(()=>o(ga,`"${t(Pe).notes??""}"`)),r(Ye,Qe)};_(ka,Ye=>{t(Pe).notes&&Ye(Ga)})}w(()=>{o(Ca,t(Pe).name),xa=Be(Sa,1,"status-badge svelte-xyvf5r",null,xa,{top:t(Pe).status==="Top"||t(Pe).status==="Flash",zone:t(Pe).status==="Zone"}),o(La,t(Pe).status)}),r(_a,ba)}),e(ia),r(Oe,ia)};_(We,Oe=>{t(Ge).climbs&&Oe(ca)})}e(aa),w(()=>o(da,t(Ge).name)),r(oa,aa)}),e(Le),r(Ce,Le)};_(oe,Ce=>{t(n).rounds&&Ce(me)})}var he=i(oe,2);{var De=Ce=>{var Le=Vi(),oa=a(Le),Ge=a(oa);e(oa),e(Le),w(()=>o(Ge,`Detailed Load: Fingers ${t(n).fingerLoad??""}/5, Shoulders ${t(n).shoulderLoad??""}/5, Forearms ${t(n).forearmLoad??""}/5`)),r(Ce,Le)};_(he,Ce=>{(t(n).fingerLoad||t(n).shoulderLoad)&&Ce(De)})}var Ie=i(he,2),ze=a(Ie);let Fe;var Ve=a(ze,!0);e(ze),e(Ie),e(le),w(()=>{Fe=Be(ze,1,"sync-status svelte-xyvf5r",null,Fe,{synced:t(n).syncStatus==="synced"}),o(Ve,t(n).syncStatus==="synced"?"‚úì Synced":"‚òÅ Local")}),Ze(3,le,()=>la,()=>({duration:200})),r(A,le)};_(ie,A=>{t(y).has(t(n).id)&&A(j)})}e(l),w((A,le,oe,me)=>{c=Be(l,1,"session-card svelte-xyvf5r",null,c,A),o(xe,t(n).customVenue||t(n).venue),o(re,le),o(ne,t(n).type),o(Me,oe),Ke=Be(je,1,"sync-dot",null,Ke,{synced:t(n).syncStatus==="synced"}),Ne(je,"title",t(n).syncStatus==="synced"?"Synced":"Local"),o(ae,me)},[()=>({expanded:t(y).has(t(n).id)}),()=>new Date(t(n).date).toLocaleDateString(void 0,{weekday:"short",day:"numeric",month:"short"}),()=>T(t(n)),()=>t(y).has(t(n).id)?"‚ñ≤":"‚ñº"]),r(fe,l)}),e(te),r(K,te)};_(J,K=>{t(g).length===0?K(Q):K(X,!1)},!0)}r(h,L)};_(W,h=>{t(p)&&t(g).length===0?h(ue):h(ee,!1)})}var B=i(W,2);Va(B,{get isOpen(){return t(m)},title:"Delete Competition",message:"Are you sure you want to delete this competition session? This action cannot be undone.",onConfirm:x,onCancel:()=>d(m,!1)}),e(F),w(()=>E.disabled=t(p)),r(S,F),na()}ea(["click","keydown"]);var Ki=v("<option> </option>"),Yi=v('<div class="view-container svelte-108px9u"><!></div>'),Qi=v('<div class="page svelte-108px9u"><div class="page-header svelte-108px9u"><h1 class="svelte-108px9u">üìä View Data</h1> <p class="subtitle svelte-108px9u">Browse your training history</p></div> <div class="content-card svelte-108px9u"><div class="form-group svelte-108px9u"><label for="activity-type" class="svelte-108px9u">Activity Type</label> <select id="activity-type" class="svelte-108px9u"><option disabled>Select an activity...</option><!></select></div> <!></div></div>');function or(S){const s=[{value:"indoor_climb",label:"Indoor Climb",icon:"üßó"},{value:"outdoor_climb",label:"Outdoor Climb",icon:"‚õ∞Ô∏è"},{value:"gym_session",label:"Gym Session",icon:"üèãÔ∏è"},{value:"fingerboarding",label:"Fingerboarding",icon:"ü§è"},{value:"competition",label:"Competition",icon:"üèÜ"}];let g=H("");var p=Qi(),y=i(a(p),2),m=a(y),u=i(a(m),2),q=a(u);q.value=q.__value="";var x=i(q);ye(x,17,()=>s,T=>T.value,(T,F)=>{var C=Ki(),E=a(C);e(C);var z={};w(()=>{o(E,`${t(F).icon??""} ${t(F).label??""}`),z!==(z=t(F).value)&&(C.value=(C.__value=t(F).value)??"")}),r(T,C)}),e(u),e(m);var k=i(m,2);{var O=T=>{var F=Yi(),C=a(F);{var E=N=>{xs(N,{})},z=N=>{var Z=Te(),W=we(Z);{var ue=B=>{bi(B,{})},ee=B=>{var h=Te(),L=we(h);{var J=X=>{xi(X)},Q=X=>{var K=Te(),te=we(K);{var fe=l=>{Gi(l,{})},n=l=>{var c=Te(),b=we(c);{var I=be=>{Ji(be,{})};_(b,be=>{t(g)==="competition"&&be(I)},!0)}r(l,c)};_(te,l=>{t(g)==="fingerboarding"?l(fe):l(n,!1)},!0)}r(X,K)};_(L,X=>{t(g)==="gym_session"?X(J):X(Q,!1)},!0)}r(B,h)};_(W,B=>{t(g)==="outdoor_climb"?B(ue):B(ee,!1)},!0)}r(N,Z)};_(C,N=>{t(g)==="indoor_climb"?N(E):N(z,!1)})}e(F),r(T,F)};_(k,T=>{t(g)&&T(O)})}e(y),e(p),Ta(u,()=>t(g),T=>d(g,T)),r(S,p)}export{or as component};
