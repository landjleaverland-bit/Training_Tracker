import{f as l,a as n,c as Ae,t as wa}from"../chunks/DTnjDEW1.js";import{p as Je,c as a,s,g as t,e as D,r as e,t as u,a as Ze,d as r,b1 as et,f as ze,as as ka,b8 as it,aM as He,A as da,o as Xa,b9 as $a,j as nt}from"../chunks/BBs_1RZS.js";import{d as We,s as v,e as rt}from"../chunks/BJ-Wizxk.js";import{i as d}from"../chunks/BVsFZ273.js";import{i as Re,r as Me,e as qe,j as Ee}from"../chunks/B-eqCwYU.js";import{c as Pe,b as oa,d as at,q as lt,h as Ie,r as vt,t as ot,v as dt,w as ct,j as _t,x as ut,y as ft,z as gt,A as pt}from"../chunks/CMoBB5Zq.js";import{t as Ye,s as ea,I as mt,a as bt,f as ht,O as yt,G as xt,F as wt,C as kt,D as Ya,g as St,b as qt,E as Dt}from"../chunks/C1guVJ-9.js";import{s as Qe}from"../chunks/C-y91pOx.js";import{i as Ua}from"../chunks/BGfolUeg.js";import{p as tt}from"../chunks/DPm1jxUN.js";var Tt=l('<span class="chevron svelte-12crvy">‚ñ≤</span>'),Ct=l('<span class="chevron svelte-12crvy">‚ñº</span>'),Et=l('<div class="input-with-action svelte-12crvy"><input type="text" id="location-manual" placeholder="Custom location..." class="flat-left svelte-12crvy"/> <button type="button" class="action-btn flat-right svelte-12crvy" title="Back to list">‚úï</button></div>'),Ft=l("<option> </option>"),zt=l('<select id="location-filter" class="svelte-12crvy"><option>Any Location</option><!></select>'),Lt=l("<option> </option>"),Gt=l("<option> </option>"),jt=l('<div class="filter-body svelte-12crvy"><div class="filter-grid svelte-12crvy"><div class="filter-item svelte-12crvy"><label for="start-date" class="svelte-12crvy">Start Date</label> <input type="date" id="start-date" class="svelte-12crvy"/></div> <div class="filter-item svelte-12crvy"><label for="end-date" class="svelte-12crvy">End Date</label> <input type="date" id="end-date" class="svelte-12crvy"/></div> <div class="filter-item svelte-12crvy"><label for="location-filter" class="svelte-12crvy">Location</label> <!></div> <div class="filter-item svelte-12crvy"><label for="climbing-type-filter" class="svelte-12crvy">Climb Type</label> <select id="climbing-type-filter" class="svelte-12crvy"><option>Any Type</option><!></select></div> <div class="filter-item svelte-12crvy"><label for="session-type-filter" class="svelte-12crvy">Session Type</label> <select id="session-type-filter" class="svelte-12crvy"><option>Any Type</option><!></select></div> <div class="filter-item svelte-12crvy"><label for="grade-filter" class="svelte-12crvy">Grade (Exact)</label> <input type="text" id="grade-filter" placeholder="e.g. V4" class="svelte-12crvy"/></div></div> <div class="filter-actions svelte-12crvy"><button class="reset-btn svelte-12crvy">Reset Filters</button></div></div>'),Nt=l('<div class="filter-container svelte-12crvy"><button class="filter-header svelte-12crvy"><div class="header-content svelte-12crvy"><span class="icon svelte-12crvy">üîç</span> <span class="title svelte-12crvy">Filters</span> <!></div></button> <!></div>');function Ot(xe,i){Je(i,!0);const b=["Rockstar Swindon","Flashpoint Swindon","Flashpoint Bristol","Redpoint Bristol","TCH Bristol","Other"],g=["Bouldering","Sport","Mixed"],y=["Projecting","Onsighting","Campusing","Repeaters"];let k=D(!1),c=D(""),T=D(""),m=D(""),L=D(""),ae=D(""),J=D(""),le=D(!1);function U(){r(k,!t(k))}function Z(){r(c,""),r(T,""),r(m,""),r(L,""),r(le,!1),r(ae,""),r(J,""),G()}function G(){i.onFilterParamsChange({startDate:t(c),endDate:t(T),location:t(m),climbingType:t(L),sessionType:t(ae),grade:t(J)})}function ne(){t(m)==="Other"?(r(le,!0),r(m,"")):G()}function C(){r(le,!1),r(m,""),G()}var j=Nt(),R=a(j);R.__click=U;var N=a(R),ve=s(a(N),4);{var ie=f=>{var E=Tt();n(f,E)},ue=f=>{var E=Ct();n(f,E)};d(ve,f=>{t(k)?f(ie):f(ue,!1)})}e(N),e(R);var O=s(R,2);{var H=f=>{var E=jt(),P=a(E),Y=a(P),p=s(a(Y),2);Me(p),p.__change=G,e(Y);var w=s(Y,2),A=s(a(w),2);Me(A),A.__change=G,e(w);var o=s(w,2),_=s(a(o),2);{var z=be=>{var te=Et(),X=a(te);Me(X),X.__input=G;var he=s(X,2);he.__click=C,e(te),Pe(X,()=>t(m),ke=>r(m,ke)),n(be,te)},q=be=>{var te=zt();te.__change=ne;var X=a(te);X.value=X.__value="";var he=s(X);qe(he,17,()=>b,Ee,(ke,ee)=>{var oe=Ft(),W=a(oe,!0);e(oe);var ge={};u(()=>{v(W,t(ee)),ge!==(ge=t(ee))&&(oe.value=(oe.__value=t(ee))??"")}),n(ke,oe)}),e(te),oa(te,()=>t(m),ke=>r(m,ke)),n(be,te)};d(_,be=>{t(le)?be(z):be(q,!1)})}e(o);var K=s(o,2),V=s(a(K),2);V.__change=G;var me=a(V);me.value=me.__value="";var B=s(me);qe(B,17,()=>g,Ee,(be,te)=>{var X=Lt(),he=a(X,!0);e(X);var ke={};u(()=>{v(he,t(te)),ke!==(ke=t(te))&&(X.value=(X.__value=t(te))??"")}),n(be,X)}),e(V),e(K);var fe=s(K,2),ce=s(a(fe),2);ce.__change=G;var De=a(ce);De.value=De.__value="";var Te=s(De);qe(Te,17,()=>y,Ee,(be,te)=>{var X=Gt(),he=a(X,!0);e(X);var ke={};u(()=>{v(he,t(te)),ke!==(ke=t(te))&&(X.value=(X.__value=t(te))??"")}),n(be,X)}),e(ce),e(fe);var Fe=s(fe,2),Le=s(a(Fe),2);Me(Le),Le.__input=G,e(Fe),e(P);var Ne=s(P,2),Ge=a(Ne);Ge.__click=Z,e(Ne),e(E),Pe(p,()=>t(c),be=>r(c,be)),Pe(A,()=>t(T),be=>r(T,be)),oa(V,()=>t(L),be=>r(L,be)),oa(ce,()=>t(ae),be=>r(ae,be)),Pe(Le,()=>t(J),be=>r(J,be)),Ye(3,E,()=>ea,()=>({duration:200})),n(f,E)};d(O,f=>{t(k)&&f(H)})}e(j),u(()=>Re(R,"aria-expanded",t(k))),n(xe,j),Ze()}We(["click","change","input"]);var Mt=l('<label class="type-toggle svelte-yz0xxt"><input type="checkbox"/> <span>Sport?</span></label>'),Pt=l("<option> </option>"),At=l('<div class="edit-form svelte-yz0xxt"><div class="edit-row main svelte-yz0xxt"><input type="text" class="edit-input grade svelte-yz0xxt" placeholder="Grade"/> <input type="text" class="edit-input name svelte-yz0xxt" placeholder="Route Name"/> <!></div> <div class="edit-row meta svelte-yz0xxt"><select class="edit-select svelte-yz0xxt"></select> <div class="attempts-input-wrapper svelte-yz0xxt"><span>#</span> <input type="number" min="1" class="edit-input num svelte-yz0xxt"/></div></div> <div class="edit-row notes svelte-yz0xxt"><textarea class="edit-input notes-area svelte-yz0xxt" placeholder="Notes..."></textarea></div> <div class="edit-actions svelte-yz0xxt"><button class="action-btn cancel svelte-yz0xxt">Cancel</button> <button class="action-btn save svelte-yz0xxt">Save</button></div></div>'),Bt=l('<span class="climb-type-tag svelte-yz0xxt"> </span>'),It=l('<span class="notes-preview svelte-yz0xxt"> </span>'),Rt=l('<span class="wall-tag svelte-yz0xxt"> </span>'),Vt=l('<span class="technique-tag svelte-yz0xxt"> </span>'),Ut=l('<span class="attempts-count svelte-yz0xxt"> </span>'),Wt=l('<div class="detail-row svelte-yz0xxt"><span class="label svelte-yz0xxt">Notes:</span> <p class="notes svelte-yz0xxt"> </p></div>'),Ht=l('<p class="empty-notes svelte-yz0xxt">No notes for this climb.</p>'),Yt=l('<div class="climb-details svelte-yz0xxt"><!> <div class="tags svelte-yz0xxt"><span class="tag type svelte-yz0xxt"> </span> <span class="tag attempt-text svelte-yz0xxt"> </span></div></div>'),Jt=l('<div class="climb-header svelte-yz0xxt" role="button" tabindex="0"><div class="climb-main-info svelte-yz0xxt"><span> </span> <span class="climb-name svelte-yz0xxt"> </span> <!> <!> <!> <!></div> <div class="climb-meta svelte-yz0xxt"><span><span class="icon svelte-yz0xxt"> </span> <!></span> <button class="icon-btn edit-btn svelte-yz0xxt" aria-label="Edit climb" title="Edit climb">‚úé</button> <button class="icon-btn delete-btn svelte-yz0xxt" aria-label="Delete climb" title="Delete climb">üóëÔ∏è</button> <span class="chevron svelte-yz0xxt"> </span></div></div> <!>',1),Zt=l("<div><!></div>");function Kt(xe,i){Je(i,!0);let b=tt(i,"showClimbType",3,!1),g=D(!1),y=D(!1),k=D(""),c=D(""),T=D(""),m=D(1),L=D(""),ae=D(!1);function J(){t(y)||r(g,!t(g))}function le(O){O.stopPropagation(),i.onDelete()}function U(O){O.stopPropagation(),r(k,i.climb.name,!0),r(c,i.climb.grade,!0),r(T,i.climb.attemptType,!0),r(m,i.climb.attemptsNum,!0),r(L,i.climb.notes,!0),r(ae,i.climb.isSport,!0),r(y,!0),r(g,!0)}function Z(O){O.stopPropagation(),r(y,!1)}function G(O){O.stopPropagation();const H={...i.climb,name:t(k),grade:t(c),attemptType:t(T),attemptsNum:t(m),notes:t(L),isSport:t(ae)};i.onUpdate(H),r(y,!1)}function ne(){(t(T)==="Flash"||t(T)==="Onsight")&&r(m,1)}const C={Flash:"‚ö°",Onsight:"üëÅÔ∏è",Redpoint:"üî¥",Dogged:"üõ†Ô∏è",DNF:"‚ùå"},j=["Flash","Onsight","Redpoint","Dogged","DNF"];var R=Zt();let N;var ve=a(R);{var ie=O=>{var H=At(),f=a(H),E=a(f);Me(E);var P=s(E,2);Me(P);var Y=s(P,2);{var p=B=>{var fe=Mt(),ce=a(fe);Me(ce),ka(2),e(fe),at(ce,()=>t(ae),De=>r(ae,De)),n(B,fe)};d(Y,B=>{b()&&B(p)})}e(f);var w=s(f,2),A=a(w);A.__change=ne,qe(A,21,()=>j,Ee,(B,fe)=>{var ce=Pt(),De=a(ce,!0);e(ce);var Te={};u(()=>{v(De,t(fe)),Te!==(Te=t(fe))&&(ce.value=(ce.__value=t(fe))??"")}),n(B,ce)}),e(A);var o=s(A,2),_=s(a(o),2);Me(_),e(o),e(w);var z=s(w,2),q=a(z);et(q),e(z);var K=s(z,2),V=a(K);V.__click=Z;var me=s(V,2);me.__click=G,e(K),e(H),u(()=>_.disabled=t(T)==="Flash"||t(T)==="Onsight"),Pe(E,()=>t(c),B=>r(c,B)),Pe(P,()=>t(k),B=>r(k,B)),oa(A,()=>t(T),B=>r(T,B)),Pe(_,()=>t(m),B=>r(m,B)),Pe(q,()=>t(L),B=>r(L,B)),n(O,H)},ue=O=>{var H=Jt(),f=ze(H);f.__click=J,f.__keydown=ee=>(ee.key==="Enter"||ee.key===" ")&&J();var E=a(f),P=a(E);let Y;var p=a(P,!0);e(P);var w=s(P,2),A=a(w,!0);e(w);var o=s(w,2);{var _=ee=>{var oe=Bt(),W=a(oe,!0);e(oe),u(()=>v(W,i.climb.isSport?"Sport":"Boulder")),n(ee,oe)};d(o,ee=>{b()&&ee(_)})}var z=s(o,2);{var q=ee=>{var oe=It(),W=a(oe);e(oe),u(()=>v(W,`- ${i.climb.notes??""}`)),n(ee,oe)};d(z,ee=>{!t(g)&&i.climb.notes&&ee(q)})}var K=s(z,2);{var V=ee=>{var oe=Rt(),W=a(oe,!0);e(oe),u(()=>v(W,i.climb.wall)),n(ee,oe)};d(K,ee=>{i.climb.wall&&ee(V)})}var me=s(K,2);{var B=ee=>{var oe=Vt(),W=a(oe,!0);e(oe),u(()=>v(W,i.climb.techniqueFocus)),n(ee,oe)};d(me,ee=>{i.climb.techniqueFocus&&ee(B)})}e(E);var fe=s(E,2),ce=a(fe);let De;var Te=a(ce),Fe=a(Te,!0);e(Te);var Le=s(Te,2);{var Ne=ee=>{var oe=Ut(),W=a(oe,!0);e(oe),u(()=>v(W,i.climb.attemptsNum)),n(ee,oe)};d(Le,ee=>{i.climb.attemptType!=="Flash"&&i.climb.attemptType!=="Onsight"&&ee(Ne)})}e(ce);var Ge=s(ce,2);Ge.__click=U;var be=s(Ge,2);be.__click=le;var te=s(be,2),X=a(te,!0);e(te),e(fe),e(f);var he=s(f,2);{var ke=ee=>{var oe=Yt(),W=a(oe);{var ge=h=>{var I=Wt(),Se=s(a(I),2),je=a(Se,!0);e(Se),e(I),u(()=>v(je,i.climb.notes)),n(h,I)},S=h=>{var I=Ht();n(h,I)};d(W,h=>{i.climb.notes?h(ge):h(S,!1)})}var _e=s(W,2),F=a(_e),se=a(F,!0);e(F);var de=s(F,2),ye=a(de,!0);e(de),e(_e),e(oe),u(()=>{v(se,i.climb.isSport?"Sport":"Boulder"),v(ye,i.climb.attemptType)}),Ye(3,oe,()=>ea,()=>({duration:150})),n(ee,oe)};d(he,ee=>{t(g)&&ee(ke)})}u(()=>{Re(f,"aria-expanded",t(g)),Y=Qe(P,1,"grade-badge svelte-yz0xxt",null,Y,{sport:i.climb.isSport}),v(p,i.climb.grade),v(A,i.climb.name||"Unnamed Route"),De=Qe(ce,1,"attempt-type svelte-yz0xxt",null,De,{flash:i.climb.attemptType==="Flash"}),v(Fe,C[i.climb.attemptType]||i.climb.attemptType),v(X,t(g)?"‚ñ≤":"‚ñº")}),n(O,H)};d(ve,O=>{t(y)?O(ie):O(ue,!1)})}e(R),u(()=>N=Qe(R,1,"climb-entry svelte-yz0xxt",null,N,{expanded:t(g),editing:t(y)})),n(xe,R),Ze()}We(["change","click","keydown"]);var Xt=l('<div class="modal-backdrop svelte-1kpd5rv" role="button" tabindex="0"><div class="modal-content svelte-1kpd5rv" role="dialog" aria-modal="true" tabindex="0"><div class="modal-header svelte-1kpd5rv"><h2 class="svelte-1kpd5rv">Edit Session</h2> <button class="close-btn svelte-1kpd5rv">&times;</button></div> <div class="modal-body svelte-1kpd5rv"><!></div></div></div>');function Ja(xe,i){Je(i,!0);function b(c){c.key==="Escape"&&i.onClose()}var g=Ae();rt("keydown",it,b);var y=ze(g);{var k=c=>{var T=Xt();T.__click=function(...G){i.onClose?.apply(this,G)},T.__keydown=b;var m=a(T);m.__click=G=>G.stopPropagation(),m.__keydown=()=>{};var L=a(m),ae=s(a(L),2);ae.__click=function(...G){i.onClose?.apply(this,G)},e(L);var J=s(L,2),le=a(J);{var U=G=>{mt(G,{get initialData(){return i.initialData},get onCancel(){return i.onClose},get onSaved(){return i.onSaved}})},Z=G=>{var ne=Ae(),C=ze(ne);{var j=N=>{yt(N,{get initialData(){return i.initialData},get onCancel(){return i.onClose},get onSaved(){return i.onSaved}})},R=N=>{var ve=Ae(),ie=ze(ve);{var ue=H=>{xt(H,{get initialData(){return i.initialData},get onCancel(){return i.onClose},get onSaved(){return i.onSaved}})},O=H=>{var f=Ae(),E=ze(f);{var P=p=>{wt(p,{get initialData(){return i.initialData},get onCancel(){return i.onClose},get onSaved(){return i.onSaved}})},Y=p=>{var w=Ae(),A=ze(w);{var o=_=>{kt(_,{get initialData(){return i.initialData},get onCancel(){return i.onClose},get onSaved(){return i.onSaved}})};d(A,_=>{i.activityType==="competition"&&_(o)},!0)}n(p,w)};d(E,p=>{i.activityType==="fingerboarding"?p(P):p(Y,!1)},!0)}n(H,f)};d(ie,H=>{i.activityType==="gym_session"?H(ue):H(O,!1)},!0)}n(N,ve)};d(C,N=>{i.activityType==="outdoor_climb"?N(j):N(R,!1)},!0)}n(G,ne)};d(le,G=>{i.activityType==="indoor_climb"?G(U):G(Z,!1)})}e(J),e(m),e(T),Ye(3,m,()=>bt,()=>({duration:200,start:.95})),Ye(3,T,()=>ht,()=>({duration:200})),n(c,T)};d(y,c=>{i.isOpen&&c(k)})}n(xe,g),Ze()}We(["click","keydown"]);var Qt=l('<span class="stat svelte-7vqogn"> </span>'),$t=l('<span class="status-icon pending svelte-7vqogn" title="Waiting to sync">üîÑ</span>'),es=l('<span class="status-icon error svelte-7vqogn" title="Sync error">‚ö†Ô∏è</span>'),as=l('<span class="chip svelte-7vqogn"> </span>'),ts=l('<span class="text-none svelte-7vqogn">None</span>'),ss=l('<div class="detail-item svelte-7vqogn"><span class="label svelte-7vqogn">Difficulty</span> <span class="value svelte-7vqogn"> </span></div>'),is=l('<span class="chip svelte-7vqogn"> </span>'),ns=l('<span class="text-none svelte-7vqogn">None</span>'),rs=l('<div class="detail-item svelte-7vqogn"><span class="label svelte-7vqogn">Category</span> <div class="value-chips svelte-7vqogn"><!></div></div>'),ls=l('<span class="chip svelte-7vqogn"> </span>'),vs=l('<span class="text-none svelte-7vqogn">None</span>'),os=l('<div class="detail-item svelte-7vqogn"><span class="label svelte-7vqogn">Energy System</span> <div class="value-chips svelte-7vqogn"><!></div></div>'),ds=l('<span class="chip svelte-7vqogn"> </span>'),cs=l('<span class="text-none svelte-7vqogn">None</span>'),_s=l('<div class="detail-item svelte-7vqogn"><span class="label svelte-7vqogn">Wall</span> <div class="value-chips svelte-7vqogn"><!></div></div>'),us=l('<p class="notes-text"> </p>'),fs=l('<p class="notes-placeholder">No notes.</p>'),gs=l('<div class="metric svelte-7vqogn"><span class="label svelte-7vqogn">Open Grip</span> <div class="bar-container svelte-7vqogn"><div class="bar-fill svelte-7vqogn"></div></div> <span class="score svelte-7vqogn"> </span></div>'),ps=l('<div class="metric svelte-7vqogn"><span class="label svelte-7vqogn">Crimp Grip</span> <div class="bar-container svelte-7vqogn"><div class="bar-fill svelte-7vqogn"></div></div> <span class="score svelte-7vqogn"> </span></div>'),ms=l('<div class="metric svelte-7vqogn"><span class="label svelte-7vqogn">Pinch Grip</span> <div class="bar-container svelte-7vqogn"><div class="bar-fill svelte-7vqogn"></div></div> <span class="score svelte-7vqogn"> </span></div>'),bs=l('<div class="metric svelte-7vqogn"><span class="label svelte-7vqogn">Sloper Grip</span> <div class="bar-container svelte-7vqogn"><div class="bar-fill svelte-7vqogn"></div></div> <span class="score svelte-7vqogn"> </span></div>'),hs=l('<div class="metric svelte-7vqogn"><span class="label svelte-7vqogn">Jug Grip</span> <div class="bar-container svelte-7vqogn"><div class="bar-fill svelte-7vqogn"></div></div> <span class="score svelte-7vqogn"> </span></div>'),ys=l('<p class="no-climbs svelte-7vqogn">No climbs logged for this session.</p>'),xs=l('<div class="card-body svelte-7vqogn"><div class="details-grid svelte-7vqogn"><div class="detail-item svelte-7vqogn"><span class="label svelte-7vqogn">Training Type</span> <div class="value-chips svelte-7vqogn"><!></div></div> <!> <!> <!> <!></div> <div class="notes-container svelte-7vqogn"><div class="notes-header svelte-7vqogn"><span class="label svelte-7vqogn">Session Notes</span></div> <!></div> <div class="metrics-container svelte-7vqogn"><div class="metric svelte-7vqogn"><span class="label svelte-7vqogn">Finger Load</span> <div class="bar-container svelte-7vqogn"><div class="bar-fill svelte-7vqogn"></div></div> <span class="score svelte-7vqogn"> </span></div> <div class="metric svelte-7vqogn"><span class="label svelte-7vqogn">Shoulder Load</span> <div class="bar-container svelte-7vqogn"><div class="bar-fill svelte-7vqogn"></div></div> <span class="score svelte-7vqogn"> </span></div> <div class="metric svelte-7vqogn"><span class="label svelte-7vqogn">Forearm Load</span> <div class="bar-container svelte-7vqogn"><div class="bar-fill svelte-7vqogn"></div></div> <span class="score svelte-7vqogn"> </span></div> <!> <!> <!> <!> <!></div> <div class="climbs-list svelte-7vqogn"><h4 class="svelte-7vqogn">Climbs</h4> <div class="climbs-container svelte-7vqogn"><!> <!></div></div></div>'),ws=l('<div><div class="card-header svelte-7vqogn" role="button" tabindex="0"><div class="header-main svelte-7vqogn"><div class="date-badge svelte-7vqogn"><span class="day svelte-7vqogn"> </span> <span class="month svelte-7vqogn"> </span> <span class="year svelte-7vqogn"> </span></div> <div class="session-info svelte-7vqogn"><div class="session-text svelte-7vqogn"><h3 class="location svelte-7vqogn"> </h3> <div class="meta-row svelte-7vqogn"><span class="time-tag svelte-7vqogn"> </span> <span class="type-tag svelte-7vqogn"> </span></div> <div class="meta-row lowercase svelte-7vqogn"><span class="stat svelte-7vqogn"> </span> <!></div></div> <div class="load-summary svelte-7vqogn"><div class="load-badge finger svelte-7vqogn"> </div> <div class="load-badge shoulder svelte-7vqogn"> </div> <div class="load-badge forearm svelte-7vqogn"> </div></div></div></div> <div class="header-actions"><div class="header-status svelte-7vqogn"><!></div>  <button class="btn-icon edit-session" title="Edit Session">‚úèÔ∏è</button> <button class="btn-icon delete-session" title="Delete Session">üóëÔ∏è</button> <span class="chevron svelte-7vqogn"> </span></div></div> <!> <!> <!></div>');function ks(xe,i){Je(i,!0);let b=D(!1),g=D(!1),y=D(!1);function k(){r(b,!t(b))}function c(){r(g,!0)}function T(){r(y,!0)}function m(){r(y,!1)}async function L(){r(y,!1),await Ua()}async function ae(){try{const F=await lt(i.session.id);F.ok?(r(g,!1),i.onDelete()):(console.error("Failed to delete session:",F.error),alert("Failed to delete session: "+F.error))}catch(F){console.error("Exception deleting session:",F),alert("Error deleting session")}}function J(F){}function le(F,se){}let U=He(()=>i.session.climbs?.length??0),Z=He(()=>(i.session.climbs||[]).reduce((F,se)=>{const de=parseInt(se.grade.replace(/\D/g,""))||0,ye=parseInt(F.replace(/\D/g,""))||0;return de>ye?se.grade:F},"V0"));var G=ws();let ne;var C=a(G);C.__click=k,C.__keydown=F=>F.key==="Enter"&&k();var j=a(C),R=a(j),N=a(R),ve=a(N,!0);e(N);var ie=s(N,2),ue=a(ie,!0);e(ie);var O=s(ie,2),H=a(O,!0);e(O),e(R);var f=s(R,2),E=a(f),P=a(E),Y=a(P,!0);e(P);var p=s(P,2),w=a(p),A=a(w);e(w);var o=s(w,2),_=a(o,!0);e(o),e(p);var z=s(p,2),q=a(z),K=a(q);e(q);var V=s(q,2);{var me=F=>{var se=Qt(),de=a(se);e(se),u(()=>v(de,`Max: ${t(Z)??""}`)),n(F,se)};d(V,F=>{t(U)>0&&F(me)})}e(z),e(E);var B=s(E,2),fe=a(B),ce=a(fe,!0);e(fe);var De=s(fe,2),Te=a(De,!0);e(De);var Fe=s(De,2),Le=a(Fe,!0);e(Fe),e(B),e(f),e(j);var Ne=s(j,2),Ge=a(Ne),be=a(Ge);{var te=F=>{var se=$t();n(F,se)},X=F=>{var se=Ae(),de=ze(se);{var ye=h=>{var I=es();n(h,I)};d(de,h=>{i.session.syncStatus==="error"&&h(ye)},!0)}n(F,se)};d(be,F=>{i.session.syncStatus==="pending"?F(te):F(X,!1)})}e(Ge);var he=s(Ge,2);he.__click=F=>{F.stopPropagation(),T()};var ke=s(he,2);ke.__click=F=>{F.stopPropagation(),c()};var ee=s(ke,2),oe=a(ee,!0);e(ee),e(Ne),e(C);var W=s(C,2);{var ge=F=>{var se=xs(),de=a(se),ye=a(de),h=s(a(ye),2),I=a(h);{var Se=Q=>{var re=Ae(),x=ze(re);qe(x,17,()=>i.session.trainingTypes,Ee,(M,$)=>{var we=as(),pe=a(we,!0);e(we),u(()=>v(pe,t($))),n(M,we)}),n(Q,re)},je=Q=>{var re=ts();n(Q,re)};d(I,Q=>{i.session.trainingTypes&&i.session.trainingTypes.length>0&&!i.session.trainingTypes.includes("None")?Q(Se):Q(je,!1)})}e(h),e(ye);var Oe=s(ye,2);{var aa=Q=>{var re=ss(),x=s(a(re),2),M=a(x,!0);e(x),e(re),u(()=>v(M,i.session.difficulty)),n(Q,re)};d(Oe,Q=>{i.session.difficulty&&Q(aa)})}var ta=s(Oe,2);{var Ca=Q=>{var re=rs(),x=s(a(re),2),M=a(x);{var $=pe=>{var Ce=Ae(),Be=ze(Ce);qe(Be,17,()=>i.session.categories,Ee,(Ke,ya)=>{var Xe=is(),xa=a(Xe,!0);e(Xe),u(()=>v(xa,t(ya))),n(Ke,Xe)}),n(pe,Ce)},we=pe=>{var Ce=ns();n(pe,Ce)};d(M,pe=>{i.session.categories.length>0&&!i.session.categories.includes("None")?pe($):pe(we,!1)})}e(x),e(re),n(Q,re)};d(ta,Q=>{i.session.categories?.length&&Q(Ca)})}var pa=s(ta,2);{var Ea=Q=>{var re=os(),x=s(a(re),2),M=a(x);{var $=pe=>{var Ce=Ae(),Be=ze(Ce);qe(Be,17,()=>i.session.energySystems,Ee,(Ke,ya)=>{var Xe=ls(),xa=a(Xe,!0);e(Xe),u(()=>v(xa,t(ya))),n(Ke,Xe)}),n(pe,Ce)},we=pe=>{var Ce=vs();n(pe,Ce)};d(M,pe=>{i.session.energySystems.length>0&&!i.session.energySystems.includes("None")?pe($):pe(we,!1)})}e(x),e(re),n(Q,re)};d(pa,Q=>{i.session.energySystems?.length&&Q(Ea)})}var sa=s(pa,2);{var ma=Q=>{var re=_s(),x=s(a(re),2),M=a(x);{var $=pe=>{var Ce=Ae(),Be=ze(Ce);qe(Be,17,()=>i.session.wallAngles,Ee,(Ke,ya)=>{var Xe=ds(),xa=a(Xe,!0);e(Xe),u(()=>v(xa,t(ya))),n(Ke,Xe)}),n(pe,Ce)},we=pe=>{var Ce=cs();n(pe,Ce)};d(M,pe=>{i.session.wallAngles.length>0&&!i.session.wallAngles.includes("None")?pe($):pe(we,!1)})}e(x),e(re),n(Q,re)};d(sa,Q=>{i.session.wallAngles?.length&&Q(ma)})}e(de);var ba=s(de,2),Fa=s(a(ba),2);{var ha=Q=>{var re=us(),x=a(re,!0);e(re),u(()=>v(x,i.session.notes)),n(Q,re)},Wa=Q=>{var re=fs();n(Q,re)};d(Fa,Q=>{i.session.notes?Q(ha):Q(Wa,!1)})}e(ba);var za=s(ba,2),La=a(za),va=s(a(La),2),ca=a(va);e(va);var _a=s(va,2),Ga=a(_a);e(_a),e(La);var ua=s(La,2),ja=s(a(ua),2),Na=a(ja);e(ja);var Sa=s(ja,2),Ba=a(Sa);e(Sa),e(ua);var ra=s(ua,2),Ve=s(a(ra),2),fa=a(Ve);e(Ve);var ia=s(Ve,2),qa=a(ia);e(ia),e(ra);var $e=s(ra,2);{var la=Q=>{var re=gs(),x=s(a(re),2),M=a(x);e(x);var $=s(x,2),we=a($);e($),e(re),u(()=>{Ie(M,`width: ${i.session.openGrip/5*100}%`),v(we,`${i.session.openGrip??""}/5`)}),n(Q,re)};d($e,Q=>{i.session.openGrip&&Q(la)})}var na=s($e,2);{var Da=Q=>{var re=ps(),x=s(a(re),2),M=a(x);e(x);var $=s(x,2),we=a($);e($),e(re),u(()=>{Ie(M,`width: ${i.session.crimpGrip/5*100}%`),v(we,`${i.session.crimpGrip??""}/5`)}),n(Q,re)};d(na,Q=>{i.session.crimpGrip&&Q(Da)})}var Oa=s(na,2);{var Ia=Q=>{var re=ms(),x=s(a(re),2),M=a(x);e(x);var $=s(x,2),we=a($);e($),e(re),u(()=>{Ie(M,`width: ${i.session.pinchGrip/5*100}%`),v(we,`${i.session.pinchGrip??""}/5`)}),n(Q,re)};d(Oa,Q=>{i.session.pinchGrip&&Q(Ia)})}var Ma=s(Oa,2);{var Ra=Q=>{var re=bs(),x=s(a(re),2),M=a(x);e(x);var $=s(x,2),we=a($);e($),e(re),u(()=>{Ie(M,`width: ${i.session.sloperGrip/5*100}%`),v(we,`${i.session.sloperGrip??""}/5`)}),n(Q,re)};d(Ma,Q=>{i.session.sloperGrip&&Q(Ra)})}var Ta=s(Ma,2);{var Ha=Q=>{var re=hs(),x=s(a(re),2),M=a(x);e(x);var $=s(x,2),we=a($);e($),e(re),u(()=>{Ie(M,`width: ${i.session.jugGrip/5*100}%`),v(we,`${i.session.jugGrip??""}/5`)}),n(Q,re)};d(Ta,Q=>{i.session.jugGrip&&Q(Ha)})}e(za);var Pa=s(za,2),Va=s(a(Pa),2),Ue=a(Va);qe(Ue,17,()=>i.session.climbs||[],Ee,(Q,re,x)=>{{let M=He(()=>i.session.climbingType==="Mixed");Kt(Q,{get climb(){return t(re)},onDelete:()=>void 0,onUpdate:$=>void 0,get showClimbType(){return t(M)}})}});var ga=s(Ue,2);{var Za=Q=>{var re=ys();n(Q,re)};d(ga,Q=>{(i.session.climbs||[]).length===0&&Q(Za)})}e(Va),e(Pa),e(se),u(()=>{Ie(ca,`width: ${i.session.fingerLoad/5*100}%`),v(Ga,`${i.session.fingerLoad??""}/5`),Ie(Na,`width: ${i.session.shoulderLoad/5*100}%`),v(Ba,`${i.session.shoulderLoad??""}/5`),Ie(fa,`width: ${i.session.forearmLoad/5*100}%`),v(qa,`${i.session.forearmLoad??""}/5`)}),Ye(3,se,()=>ea,()=>({duration:150})),n(F,se)};d(W,F=>{t(b)&&F(ge)})}var S=s(W,2);Ya(S,{get isOpen(){return t(g)},title:"Delete Session",message:"Are you sure you want to delete this session? This action cannot be undone.",onConfirm:ae,onCancel:()=>r(g,!1)});var _e=s(S,2);Ja(_e,{get isOpen(){return t(y)},activityType:"indoor_climb",get initialData(){return i.session},onClose:m,onSaved:L}),e(G),u((F,se,de)=>{ne=Qe(G,1,"session-card svelte-7vqogn",null,ne,{expanded:t(b)}),Re(C,"aria-expanded",t(b)),v(ve,F),v(ue,se),v(H,de),v(Y,i.session.location),v(A,`üïí ${(i.session.time||"12:00")??""}`),v(_,i.session.climbingType),v(K,`${t(U)??""} climbs`),Re(fe,"title",`Finger Load: ${i.session.fingerLoad??""}`),v(ce,i.session.fingerLoad),Re(De,"title",`Shoulder Load: ${i.session.shoulderLoad??""}`),v(Te,i.session.shoulderLoad),Re(Fe,"title",`Forearm Load: ${i.session.forearmLoad??""}`),v(Le,i.session.forearmLoad),v(oe,t(b)?"‚ñ≤":"‚ñº")},[()=>new Date(i.session.date).getDate(),()=>new Date(i.session.date).toLocaleDateString("en-GB",{month:"short"}),()=>new Date(i.session.date).getFullYear()]),n(xe,G),Ze()}We(["click","keydown"]);var Ss=l('<div class="legend-item svelte-11p9lqi"><span class="l-icon svelte-11p9lqi"> </span> <span class="l-label svelte-11p9lqi"> </span></div>'),qs=l('<div class="legend-content svelte-11p9lqi"><div class="legend-grid svelte-11p9lqi"></div></div>'),Ds=l('<div class="legend-container svelte-11p9lqi"><button class="legend-toggle svelte-11p9lqi"><span class="icon">‚ÑπÔ∏è</span> <span class="text">Icon Legend</span> <span class="chevron svelte-11p9lqi"> </span></button> <!></div>');function st(xe){let i=D(!1);const b=[{icon:"üëÅÔ∏è",label:"Onsight"},{icon:"‚ö°",label:"Flash"},{icon:"üî¥",label:"Redpoint"},{icon:"üõ†Ô∏è",label:"Dogged"},{icon:"‚ùå",label:"DNF"}];var g=Ds(),y=a(g);y.__click=()=>r(i,!t(i));var k=s(a(y),4),c=a(k,!0);e(k),e(y);var T=s(y,2);{var m=L=>{var ae=qs(),J=a(ae);qe(J,21,()=>b,Ee,(le,U)=>{var Z=Ss(),G=a(Z),ne=a(G,!0);e(G);var C=s(G,2),j=a(C,!0);e(C),e(Z),u(()=>{v(ne,t(U).icon),v(j,t(U).label)}),n(le,Z)}),e(J),e(ae),Ye(3,ae,()=>ea),n(L,ae)};d(T,L=>{t(i)&&L(m)})}e(g),u(()=>{Re(y,"aria-expanded",t(i)),v(c,t(i)?"‚ñº":"‚ñ∂")}),n(xe,g)}We(["click"]);function Qa(xe,i){if(!xe||xe.length===0){alert("No data to export");return}const b=Array.from(new Set(xe.flatMap(Object.keys))),g=[b.join(","),...xe.map(c=>b.map(T=>{let m=c[T];if(m==null)return"";if(typeof m=="object"){if(m instanceof Date)return m.toISOString();m=JSON.stringify(m).replace(/"/g,'""')}else typeof m=="string"&&(m=m.replace(/"/g,'""'));return typeof m=="string"&&(m.includes(",")||m.includes('"')||m.includes(`
`))?`"${m}"`:m}).join(","))].join(`
`),y=new Blob([g],{type:"text/csv;charset=utf-8;"}),k=document.createElement("a");if(k.download!==void 0){const c=URL.createObjectURL(y);k.setAttribute("href",c),k.setAttribute("download",i.endsWith(".csv")?i:`${i}.csv`),k.style.visibility="hidden",document.body.appendChild(k),k.click(),document.body.removeChild(k)}}var Ts=l('<span class="spinner svelte-14fqz8w"></span> Fetching...',1),Cs=l('<div class="error-banner svelte-14fqz8w"> </div>'),Es=l('<small class="svelte-14fqz8w">Try adjusting your filters.</small>'),Fs=l('<div class="empty-state svelte-14fqz8w"><p class="svelte-14fqz8w">No indoor climbing sessions found.</p> <!></div>'),zs=l('<div class="load-more-container svelte-14fqz8w"><button class="load-more-btn svelte-14fqz8w"> </button></div>'),Ls=l('<div class="view-container svelte-14fqz8w"><div class="view-header svelte-14fqz8w"><h2 class="view-title svelte-14fqz8w">üßó Indoor Climbing History</h2> <div class="header-actions svelte-14fqz8w"><button class="action-btn secondary svelte-14fqz8w" title="Export filtered data to CSV">üì• Export</button> <button class="action-btn svelte-14fqz8w" title="Fetch data from cloud"><!></button></div></div> <!> <!> <div class="info-bar svelte-14fqz8w"><div class="legend-wrapper svelte-14fqz8w"><!></div> <div class="load-key svelte-14fqz8w"><span class="key-label svelte-14fqz8w">Load:</span> <div class="key-item svelte-14fqz8w"><span class="dot finger svelte-14fqz8w"></span> Finger</div> <div class="key-item svelte-14fqz8w"><span class="dot shoulder svelte-14fqz8w"></span> Shoulder</div> <div class="key-item svelte-14fqz8w"><span class="dot forearm svelte-14fqz8w"></span> Forearm</div></div></div> <div class="sessions-list"><!> <!> <!></div></div>');function Gs(xe,i){Je(i,!0);let b=D(da([])),g=D(da([])),y=D(!1),k=D(""),c=D(da({startDate:"",endDate:"",location:"",climbingType:"",sessionType:"",grade:""})),T=D(20);const m=20;Xa(()=>{L()});async function L(){r(y,!0),r(k,"");try{const o=await vt();o.ok&&o.data?(r(b,o.data.map(_=>({..._,activityType:"indoor_climb"})),!0),t(b).sort((_,z)=>new Date(z.date).getTime()-new Date(_.date).getTime()),J()):r(k,o.error||"Failed to fetch data",!0)}catch(o){r(k,o instanceof Error?o.message:"Unknown error",!0)}finally{r(y,!1)}}function ae(o){r(c,o,!0),J()}function J(){r(T,m),r(g,t(b).filter(o=>{if(t(c).startDate&&o.date<t(c).startDate||t(c).endDate&&o.date>t(c).endDate||t(c).location&&o.location!==t(c).location)return!1;if(t(c).climbingType&&(o.climbingType==="Leading"?"Sport":o.climbingType)!==t(c).climbingType)if(o.climbingType==="Mixed")if(t(c).climbingType==="Bouldering"){if(!o.climbs.some(z=>!z.isSport))return!1}else if(t(c).climbingType==="Sport"){if(!o.climbs.some(z=>z.isSport))return!1}else return!1;else return!1;if(t(c).sessionType&&!o.trainingTypes?.includes(t(c).sessionType))return!1;if(t(c).grade){const _=t(c).grade.trim().toLowerCase();if(!o.climbs.some(q=>q.grade.trim().toLowerCase()===_))return!1}return!0}),!0)}function le(){r(T,t(T)+m)}var U=Ls(),Z=a(U),G=s(a(Z),2),ne=a(G);ne.__click=()=>Qa(t(g),"indoor_climbs");var C=s(ne,2);C.__click=L;var j=a(C);{var R=o=>{var _=Ts();ka(),n(o,_)},N=o=>{var _=wa("‚òÅÔ∏è Fetch Data");n(o,_)};d(j,o=>{t(y)?o(R):o(N,!1)})}e(C),e(G),e(Z);var ve=s(Z,2);{var ie=o=>{var _=Cs(),z=a(_,!0);e(_),u(()=>v(z,t(k))),Ye(3,_,()=>ea),n(o,_)};d(ve,o=>{t(k)&&o(ie)})}var ue=s(ve,2);Ot(ue,{onFilterParamsChange:ae});var O=s(ue,2),H=a(O),f=a(H);st(f),e(H),ka(2),e(O);var E=s(O,2),P=a(E);qe(P,17,()=>t(g).slice(0,t(T)),o=>o.id,(o,_)=>{ks(o,{get session(){return t(_)},onDelete:L})});var Y=s(P,2);{var p=o=>{var _=Fs(),z=s(a(_),2);{var q=K=>{var V=Es();n(K,V)};d(z,K=>{t(b).length>0&&K(q)})}e(_),n(o,_)};d(Y,o=>{t(g).length===0&&o(p)})}var w=s(Y,2);{var A=o=>{var _=zs(),z=a(_);z.__click=le;var q=a(z);e(z),e(_),u(()=>v(q,`Load More (${t(g).length-t(T)} remaining)`)),n(o,_)};d(w,o=>{t(T)<t(g).length&&o(A)})}e(E),e(U),u(()=>C.disabled=t(y)),n(xe,U),Ze()}We(["click"]);var js=l('<span class="chevron svelte-1frtlim">‚ñ≤</span>'),Ns=l('<span class="chevron svelte-1frtlim">‚ñº</span>'),Os=l('<div class="input-with-action svelte-1frtlim"><input type="text" id="area-filter-text" placeholder="Type area name..." class="flat-left svelte-1frtlim"/> <button class="action-btn flat-right svelte-1frtlim" title="Back to list">‚úï</button></div>'),Ms=l("<option> </option>"),Ps=l('<select id="area-filter" class="svelte-1frtlim"><option>All Areas</option><!><option>Other (Manual Entry)</option></select>'),As=l('<div class="input-with-action svelte-1frtlim"><input type="text" id="crag-filter-text" placeholder="Type crag name..." class="flat-left svelte-1frtlim"/> <button class="action-btn flat-right svelte-1frtlim" title="Back to list">‚úï</button></div>'),Bs=l("<option> </option>"),Is=l('<select id="crag-filter" class="svelte-1frtlim"><option>All Crags</option><!><option>Other (Manual Entry)</option></select>'),Rs=l('<input type="text" id="crag-filter-text" class="svelte-1frtlim"/>'),Vs=l("<option> </option>"),Us=l("<option> </option>"),Ws=l('<div class="filter-body svelte-1frtlim"><div class="filter-grid svelte-1frtlim"><div class="filter-item svelte-1frtlim"><label for="start-date" class="svelte-1frtlim">Start Date</label> <input type="date" id="start-date" class="svelte-1frtlim"/></div> <div class="filter-item svelte-1frtlim"><label for="end-date" class="svelte-1frtlim">End Date</label> <input type="date" id="end-date" class="svelte-1frtlim"/></div> <div class="filter-item svelte-1frtlim"><label for="area-filter" class="svelte-1frtlim">Area</label> <!></div> <div class="filter-item svelte-1frtlim"><label for="crag-filter" class="svelte-1frtlim">Crag</label> <!></div> <div class="filter-item svelte-1frtlim"><label for="climbing-type-filter" class="svelte-1frtlim">Climb Type</label> <select id="climbing-type-filter" class="svelte-1frtlim"><option>Any Type</option><!></select></div> <div class="filter-item svelte-1frtlim"><label for="session-type-filter" class="svelte-1frtlim">Session Type</label> <select id="session-type-filter" class="svelte-1frtlim"><option>Any Type</option><!></select></div> <div class="filter-item svelte-1frtlim"><label for="grade-filter" class="svelte-1frtlim">Grade (Exact)</label> <input type="text" id="grade-filter" placeholder="e.g. 7a" class="svelte-1frtlim"/></div></div> <div class="filter-actions svelte-1frtlim"><button class="reset-btn svelte-1frtlim">Reset Filters</button></div></div>'),Hs=l('<div class="filter-container svelte-1frtlim"><button class="filter-header svelte-1frtlim"><div class="header-content svelte-1frtlim"><span class="icon svelte-1frtlim">üîç</span> <span class="title svelte-1frtlim">Filters</span> <!></div></button> <!></div>');function Ys(xe,i){Je(i,!0);const b=St(),g=["Bouldering","Sport","Mixed","Trad"],y=["Projecting","Onsighting","Campusing","Repeaters","Fun","Volume"];let k=D(!1),c=D(""),T=D(""),m=D(""),L=D(""),ae=D(""),J=D(""),le=D(""),U=D(!1),Z=D(!1),G=He(()=>t(m)&&t(m)!=="Other"?qt(t(m)):[]);function ne(){t(m)==="Other"?(r(U,!0),r(m,"")):r(U,!1),r(L,""),r(Z,!1),N()}function C(){t(L)==="Other"?(r(Z,!0),r(L,"")):r(Z,!1),N()}function j(){r(k,!t(k))}function R(){r(c,""),r(T,""),r(m,""),r(L,""),r(ae,""),r(J,""),r(le,""),r(U,!1),r(Z,!1),N()}function N(){i.onFilterParamsChange({startDate:t(c),endDate:t(T),area:t(m),crag:t(L),climbingType:t(ae),sessionType:t(J),grade:t(le)})}var ve=Hs(),ie=a(ve);ie.__click=j;var ue=a(ie),O=s(a(ue),4);{var H=Y=>{var p=js();n(Y,p)},f=Y=>{var p=Ns();n(Y,p)};d(O,Y=>{t(k)?Y(H):Y(f,!1)})}e(ue),e(ie);var E=s(ie,2);{var P=Y=>{var p=Ws(),w=a(p),A=a(w),o=s(a(A),2);Me(o),o.__change=N,e(A);var _=s(A,2),z=s(a(_),2);Me(z),z.__change=N,e(_);var q=s(_,2),K=s(a(q),2);{var V=W=>{var ge=Os(),S=a(ge);Me(S),S.__input=N;var _e=s(S,2);_e.__click=()=>{r(U,!1),r(m,""),N()},e(ge),Pe(S,()=>t(m),F=>r(m,F)),n(W,ge)},me=W=>{var ge=Ps();ge.__change=ne;var S=a(ge);S.value=S.__value="";var _e=s(S);qe(_e,17,()=>b,Ee,(se,de)=>{var ye=Ms(),h=a(ye,!0);e(ye);var I={};u(()=>{v(h,t(de)),I!==(I=t(de))&&(ye.value=(ye.__value=t(de))??"")}),n(se,ye)});var F=s(_e);F.value=F.__value="Other",e(ge),oa(ge,()=>t(m),se=>r(m,se)),n(W,ge)};d(K,W=>{t(U)?W(V):W(me,!1)})}e(q);var B=s(q,2),fe=s(a(B),2);{var ce=W=>{var ge=As(),S=a(ge);Me(S),S.__input=N;var _e=s(S,2);_e.__click=()=>{r(Z,!1),r(L,""),N()},e(ge),Pe(S,()=>t(L),F=>r(L,F)),n(W,ge)},De=W=>{var ge=Ae(),S=ze(ge);{var _e=se=>{var de=Is();de.__change=C;var ye=a(de);ye.value=ye.__value="";var h=s(ye);qe(h,17,()=>t(G),Ee,(Se,je)=>{var Oe=Bs(),aa=a(Oe,!0);e(Oe);var ta={};u(()=>{v(aa,t(je)),ta!==(ta=t(je))&&(Oe.value=(Oe.__value=t(je))??"")}),n(Se,Oe)});var I=s(h);I.value=I.__value="Other",e(de),oa(de,()=>t(L),Se=>r(L,Se)),n(se,de)},F=se=>{var de=Rs();Me(de),de.__input=N,u(()=>{Re(de,"placeholder",t(m)?"Filter crag...":"Select area first"),de.disabled=!t(U)&&!t(m)}),Pe(de,()=>t(L),ye=>r(L,ye)),n(se,de)};d(S,se=>{!t(U)&&t(m)&&t(G).length>0?se(_e):se(F,!1)},!0)}n(W,ge)};d(fe,W=>{t(Z)?W(ce):W(De,!1)})}e(B);var Te=s(B,2),Fe=s(a(Te),2);Fe.__change=N;var Le=a(Fe);Le.value=Le.__value="";var Ne=s(Le);qe(Ne,17,()=>g,Ee,(W,ge)=>{var S=Vs(),_e=a(S,!0);e(S);var F={};u(()=>{v(_e,t(ge)),F!==(F=t(ge))&&(S.value=(S.__value=t(ge))??"")}),n(W,S)}),e(Fe),e(Te);var Ge=s(Te,2),be=s(a(Ge),2);be.__change=N;var te=a(be);te.value=te.__value="";var X=s(te);qe(X,17,()=>y,Ee,(W,ge)=>{var S=Us(),_e=a(S,!0);e(S);var F={};u(()=>{v(_e,t(ge)),F!==(F=t(ge))&&(S.value=(S.__value=t(ge))??"")}),n(W,S)}),e(be),e(Ge);var he=s(Ge,2),ke=s(a(he),2);Me(ke),ke.__input=N,e(he),e(w);var ee=s(w,2),oe=a(ee);oe.__click=R,e(ee),e(p),Pe(o,()=>t(c),W=>r(c,W)),Pe(z,()=>t(T),W=>r(T,W)),oa(Fe,()=>t(ae),W=>r(ae,W)),oa(be,()=>t(J),W=>r(J,W)),Pe(ke,()=>t(le),W=>r(le,W)),Ye(3,p,()=>ea,()=>({duration:200})),n(Y,p)};d(E,Y=>{t(k)&&Y(P)})}e(ve),u(()=>Re(ie,"aria-expanded",t(k))),n(xe,ve),Ze()}We(["click","change","input"]);var Js=l('<label class="type-toggle svelte-1k6anfh"><input type="checkbox"/> <span>Sport?</span></label>'),Zs=l("<option> </option>"),Ks=l('<div class="edit-form svelte-1k6anfh"><div class="edit-row main svelte-1k6anfh"><input type="text" class="edit-input grade svelte-1k6anfh" placeholder="Grade"/> <input type="text" class="edit-input name svelte-1k6anfh" placeholder="Route Name"/> <!></div> <div class="edit-row meta svelte-1k6anfh"><select class="edit-select svelte-1k6anfh"></select> <div class="attempts-input-wrapper svelte-1k6anfh"><span>#</span> <input type="number" min="1" class="edit-input num svelte-1k6anfh"/></div></div> <div class="edit-row notes svelte-1k6anfh"><textarea class="edit-input notes-area svelte-1k6anfh" placeholder="Notes..."></textarea></div> <div class="edit-actions svelte-1k6anfh"><button class="action-btn cancel svelte-1k6anfh">Cancel</button> <button class="action-btn save svelte-1k6anfh">Save</button></div></div>'),Xs=l('<span class="climb-type-tag svelte-1k6anfh"> </span>'),Qs=l('<span class="notes-preview svelte-1k6anfh"> </span>'),$s=l('<span class="attempts-count svelte-1k6anfh"> </span>'),ei=l('<div class="detail-row svelte-1k6anfh"><span class="label svelte-1k6anfh">Notes:</span> <p class="notes svelte-1k6anfh"> </p></div>'),ai=l('<p class="empty-notes svelte-1k6anfh">No notes for this climb.</p>'),ti=l('<span class="tag wall-tag svelte-1k6anfh"> </span>'),si=l('<span class="tag technique-tag svelte-1k6anfh"> </span>'),ii=l('<div class="climb-details svelte-1k6anfh"><!> <div class="tags svelte-1k6anfh"><span class="tag type svelte-1k6anfh"> </span> <!> <!> <span class="tag attempt-text svelte-1k6anfh"> </span></div></div>'),ni=l('<div class="climb-header svelte-1k6anfh" role="button" tabindex="0"><div class="climb-main-info svelte-1k6anfh"><span> </span> <span class="climb-name svelte-1k6anfh"> </span> <!> <!></div> <div class="climb-meta svelte-1k6anfh"><span><span class="icon svelte-1k6anfh"> </span> <!></span> <button class="icon-btn edit-btn svelte-1k6anfh" aria-label="Edit climb" title="Edit climb">‚úé</button> <button class="icon-btn delete-btn svelte-1k6anfh" aria-label="Delete climb" title="Delete climb">üóëÔ∏è</button> <span class="chevron svelte-1k6anfh"> </span></div></div> <!>',1),ri=l("<div><!></div>");function li(xe,i){Je(i,!0);let b=tt(i,"showClimbType",3,!1),g=D(!1),y=D(!1),k=D(""),c=D(""),T=D(""),m=D(1),L=D(""),ae=D(!1);function J(){t(y)||r(g,!t(g))}function le(O){O.stopPropagation(),i.onDelete()}function U(O){O.stopPropagation(),r(k,i.climb.name,!0),r(c,i.climb.grade,!0),r(T,i.climb.attemptType,!0),r(m,i.climb.attemptsNum,!0),r(L,i.climb.notes,!0),r(ae,i.climb.isSport,!0),r(y,!0),r(g,!0)}function Z(O){O.stopPropagation(),r(y,!1)}function G(O){O.stopPropagation();const H={...i.climb,name:t(k),grade:t(c),attemptType:t(T),attemptsNum:t(m),notes:t(L),isSport:t(ae)};i.onUpdate(H),r(y,!1)}function ne(){(t(T)==="Flash"||t(T)==="Onsight")&&r(m,1)}const C={Flash:"‚ö°",Onsight:"üëÅÔ∏è",Redpoint:"üî¥",Dogged:"üõ†Ô∏è",DNF:"‚ùå"},j=["Flash","Onsight","Redpoint","Dogged","DNF"];var R=ri();let N;var ve=a(R);{var ie=O=>{var H=Ks(),f=a(H),E=a(f);Me(E);var P=s(E,2);Me(P);var Y=s(P,2);{var p=B=>{var fe=Js(),ce=a(fe);Me(ce),ka(2),e(fe),at(ce,()=>t(ae),De=>r(ae,De)),n(B,fe)};d(Y,B=>{b()&&B(p)})}e(f);var w=s(f,2),A=a(w);A.__change=ne,qe(A,21,()=>j,Ee,(B,fe)=>{var ce=Zs(),De=a(ce,!0);e(ce);var Te={};u(()=>{v(De,t(fe)),Te!==(Te=t(fe))&&(ce.value=(ce.__value=t(fe))??"")}),n(B,ce)}),e(A);var o=s(A,2),_=s(a(o),2);Me(_),e(o),e(w);var z=s(w,2),q=a(z);et(q),e(z);var K=s(z,2),V=a(K);V.__click=Z;var me=s(V,2);me.__click=G,e(K),e(H),u(()=>_.disabled=t(T)==="Flash"||t(T)==="Onsight"),Pe(E,()=>t(c),B=>r(c,B)),Pe(P,()=>t(k),B=>r(k,B)),oa(A,()=>t(T),B=>r(T,B)),Pe(_,()=>t(m),B=>r(m,B)),Pe(q,()=>t(L),B=>r(L,B)),n(O,H)},ue=O=>{var H=ni(),f=ze(H);f.__click=J,f.__keydown=te=>(te.key==="Enter"||te.key===" ")&&J();var E=a(f),P=a(E);let Y;var p=a(P,!0);e(P);var w=s(P,2),A=a(w,!0);e(w);var o=s(w,2);{var _=te=>{var X=Xs(),he=a(X,!0);e(X),u(()=>v(he,i.climb.isSport?"Sport":"Boulder")),n(te,X)};d(o,te=>{b()&&te(_)})}var z=s(o,2);{var q=te=>{var X=Qs(),he=a(X);e(X),u(()=>v(he,`- ${i.climb.notes??""}`)),n(te,X)};d(z,te=>{!t(g)&&i.climb.notes&&te(q)})}e(E);var K=s(E,2),V=a(K);let me;var B=a(V),fe=a(B,!0);e(B);var ce=s(B,2);{var De=te=>{var X=$s(),he=a(X,!0);e(X),u(()=>v(he,i.climb.attemptsNum)),n(te,X)};d(ce,te=>{i.climb.attemptType!=="Flash"&&i.climb.attemptType!=="Onsight"&&te(De)})}e(V);var Te=s(V,2);Te.__click=U;var Fe=s(Te,2);Fe.__click=le;var Le=s(Fe,2),Ne=a(Le,!0);e(Le),e(K),e(f);var Ge=s(f,2);{var be=te=>{var X=ii(),he=a(X);{var ke=h=>{var I=ei(),Se=s(a(I),2),je=a(Se,!0);e(Se),e(I),u(()=>v(je,i.climb.notes)),n(h,I)},ee=h=>{var I=ai();n(h,I)};d(he,h=>{i.climb.notes?h(ke):h(ee,!1)})}var oe=s(he,2),W=a(oe),ge=a(W,!0);e(W);var S=s(W,2);{var _e=h=>{var I=ti(),Se=a(I,!0);e(I),u(()=>v(Se,i.climb.wall)),n(h,I)};d(S,h=>{i.climb.wall&&h(_e)})}var F=s(S,2);{var se=h=>{var I=si(),Se=a(I,!0);e(I),u(()=>v(Se,i.climb.techniqueFocus)),n(h,I)};d(F,h=>{i.climb.techniqueFocus&&h(se)})}var de=s(F,2),ye=a(de,!0);e(de),e(oe),e(X),u(()=>{v(ge,i.climb.isSport?"Sport":"Boulder"),v(ye,i.climb.attemptType)}),Ye(3,X,()=>ea,()=>({duration:150})),n(te,X)};d(Ge,te=>{t(g)&&te(be)})}u(()=>{Re(f,"aria-expanded",t(g)),Y=Qe(P,1,"grade-badge svelte-1k6anfh",null,Y,{sport:i.climb.isSport}),v(p,i.climb.grade),v(A,i.climb.name||"Unnamed Route"),me=Qe(V,1,"attempt-type svelte-1k6anfh",null,me,{flash:i.climb.attemptType==="Flash"}),v(fe,C[i.climb.attemptType]||i.climb.attemptType),v(Ne,t(g)?"‚ñ≤":"‚ñº")}),n(O,H)};d(ve,O=>{t(y)?O(ie):O(ue,!1)})}e(R),u(()=>N=Qe(R,1,"climb-entry svelte-1k6anfh",null,N,{expanded:t(g),editing:t(y)})),n(xe,R),Ze()}We(["change","click","keydown"]);var vi=l('<div class="sector-meta"> </div>'),oi=l('<span class="stat svelte-d5hg2r"> </span>'),di=l('<span class="status-icon pending svelte-d5hg2r" title="Waiting to sync">üîÑ</span>'),ci=l('<span class="status-icon error svelte-d5hg2r" title="Sync error">‚ö†Ô∏è</span>'),_i=l('<span class="chip svelte-d5hg2r"> </span>'),ui=l('<span class="text-none svelte-d5hg2r">None</span>'),fi=l('<div class="detail-item svelte-d5hg2r"><span class="label svelte-d5hg2r">Difficulty</span> <span class="value svelte-d5hg2r"> </span></div>'),gi=l('<span class="chip svelte-d5hg2r"> </span>'),pi=l('<span class="text-none svelte-d5hg2r">None</span>'),mi=l('<div class="detail-item svelte-d5hg2r"><span class="label svelte-d5hg2r">Category</span> <div class="value-chips svelte-d5hg2r"><!></div></div>'),bi=l('<span class="chip svelte-d5hg2r"> </span>'),hi=l('<span class="text-none svelte-d5hg2r">None</span>'),yi=l('<div class="detail-item svelte-d5hg2r"><span class="label svelte-d5hg2r">Energy System</span> <div class="value-chips svelte-d5hg2r"><!></div></div>'),xi=l('<p class="notes-text"> </p>'),wi=l('<p class="notes-placeholder">No notes.</p>'),ki=l('<div class="metric svelte-d5hg2r"><span class="label svelte-d5hg2r">Open Grip</span> <div class="bar-container svelte-d5hg2r"><div class="bar-fill svelte-d5hg2r"></div></div> <span class="score svelte-d5hg2r"> </span></div>'),Si=l('<div class="metric svelte-d5hg2r"><span class="label svelte-d5hg2r">Crimp Grip</span> <div class="bar-container svelte-d5hg2r"><div class="bar-fill svelte-d5hg2r"></div></div> <span class="score svelte-d5hg2r"> </span></div>'),qi=l('<div class="metric svelte-d5hg2r"><span class="label svelte-d5hg2r">Pinch Grip</span> <div class="bar-container svelte-d5hg2r"><div class="bar-fill svelte-d5hg2r"></div></div> <span class="score svelte-d5hg2r"> </span></div>'),Di=l('<div class="metric svelte-d5hg2r"><span class="label svelte-d5hg2r">Sloper Grip</span> <div class="bar-container svelte-d5hg2r"><div class="bar-fill svelte-d5hg2r"></div></div> <span class="score svelte-d5hg2r"> </span></div>'),Ti=l('<div class="metric svelte-d5hg2r"><span class="label svelte-d5hg2r">Jug Grip</span> <div class="bar-container svelte-d5hg2r"><div class="bar-fill svelte-d5hg2r"></div></div> <span class="score svelte-d5hg2r"> </span></div>'),Ci=l('<p class="no-climbs svelte-d5hg2r">No climbs logged for this session.</p>'),Ei=l('<div class="card-body svelte-d5hg2r"><div class="details-grid svelte-d5hg2r"><div class="detail-item svelte-d5hg2r"><span class="label svelte-d5hg2r">Training Type</span> <div class="value-chips svelte-d5hg2r"><!></div></div> <!> <!> <!></div> <div class="notes-container svelte-d5hg2r"><div class="notes-header svelte-d5hg2r"><span class="label svelte-d5hg2r">Session Notes</span></div> <!></div> <div class="metrics-container svelte-d5hg2r"><div class="metric svelte-d5hg2r"><span class="label svelte-d5hg2r">Finger Load</span> <div class="bar-container svelte-d5hg2r"><div class="bar-fill svelte-d5hg2r"></div></div> <span class="score svelte-d5hg2r"> </span></div> <div class="metric svelte-d5hg2r"><span class="label svelte-d5hg2r">Shoulder Load</span> <div class="bar-container svelte-d5hg2r"><div class="bar-fill svelte-d5hg2r"></div></div> <span class="score svelte-d5hg2r"> </span></div> <div class="metric svelte-d5hg2r"><span class="label svelte-d5hg2r">Forearm Load</span> <div class="bar-container svelte-d5hg2r"><div class="bar-fill svelte-d5hg2r"></div></div> <span class="score svelte-d5hg2r"> </span></div> <!> <!> <!> <!> <!></div> <div class="climbs-list svelte-d5hg2r"><h4 class="svelte-d5hg2r">Climbs</h4> <div class="climbs-container svelte-d5hg2r"><!> <!></div></div></div>'),Fi=l('<div><div class="card-header svelte-d5hg2r" role="button" tabindex="0"><div class="header-main svelte-d5hg2r"><div class="date-badge svelte-d5hg2r"><span class="day svelte-d5hg2r"> </span> <span class="month svelte-d5hg2r"> </span> <span class="year svelte-d5hg2r"> </span></div> <div class="session-info svelte-d5hg2r"><div class="session-text svelte-d5hg2r"><h3 class="location svelte-d5hg2r"> <!></h3> <!> <div class="meta-row svelte-d5hg2r"><span class="time-tag svelte-d5hg2r"> </span> <span class="type-tag svelte-d5hg2r"> </span></div> <div class="meta-row lowercase svelte-d5hg2r"><span class="stat svelte-d5hg2r"> </span> <!></div></div> <div class="load-summary svelte-d5hg2r"><div class="load-badge finger svelte-d5hg2r"> </div> <div class="load-badge shoulder svelte-d5hg2r"> </div> <div class="load-badge forearm svelte-d5hg2r"> </div></div></div></div> <div class="header-actions"><div class="header-status svelte-d5hg2r"><!></div> <button class="btn-icon edit-session" title="Edit Session">‚úèÔ∏è</button> <button class="btn-icon delete-session" title="Delete Session">üóëÔ∏è</button> <span class="chevron svelte-d5hg2r"> </span></div></div> <!> <!> <!></div>');function zi(xe,i){Je(i,!0);let b=D(!1),g=D(!1),y=D(!1);function k(){r(b,!t(b))}function c(){r(g,!0)}function T(){r(y,!0)}function m(){r(y,!1)}async function L(){r(y,!1),await Ua()}async function ae(){try{const h=await ot(i.session.id);h.ok?(r(g,!1),i.onDelete()):(console.error("Failed to delete session:",h.error),alert("Failed to delete session: "+h.error))}catch(h){console.error("Exception deleting session:",h),alert("Error deleting session")}}function J(h){}function le(h,I){}let U=He(()=>i.session.climbs?.length??0),Z=He(()=>(i.session.climbs||[]).reduce((h,I)=>{const Se=parseInt(I.grade.replace(/\D/g,""))||0,je=parseInt(h.replace(/\D/g,""))||0;return Se>je?I.grade:h},"V0"));var G=Fi();let ne;var C=a(G);C.__click=k,C.__keydown=h=>h.key==="Enter"&&k();var j=a(C),R=a(j),N=a(R),ve=a(N,!0);e(N);var ie=s(N,2),ue=a(ie,!0);e(ie);var O=s(ie,2),H=a(O,!0);e(O),e(R);var f=s(R,2),E=a(f),P=a(E),Y=a(P),p=s(Y);{var w=h=>{var I=wa();u(()=>v(I,`- ${i.session.crag??""}`)),n(h,I)};d(p,h=>{i.session.crag&&h(w)})}e(P);var A=s(P,2);{var o=h=>{var I=vi(),Se=a(I);e(I),u(()=>v(Se,`üìç ${i.session.sector??""}`)),n(h,I)};d(A,h=>{i.session.sector&&h(o)})}var _=s(A,2),z=a(_),q=a(z);e(z);var K=s(z,2),V=a(K,!0);e(K),e(_);var me=s(_,2),B=a(me),fe=a(B);e(B);var ce=s(B,2);{var De=h=>{var I=oi(),Se=a(I);e(I),u(()=>v(Se,`Max: ${t(Z)??""}`)),n(h,I)};d(ce,h=>{t(U)>0&&h(De)})}e(me),e(E);var Te=s(E,2),Fe=a(Te),Le=a(Fe,!0);e(Fe);var Ne=s(Fe,2),Ge=a(Ne,!0);e(Ne);var be=s(Ne,2),te=a(be,!0);e(be),e(Te),e(f),e(j);var X=s(j,2),he=a(X),ke=a(he);{var ee=h=>{var I=di();n(h,I)},oe=h=>{var I=Ae(),Se=ze(I);{var je=Oe=>{var aa=ci();n(Oe,aa)};d(Se,Oe=>{i.session.syncStatus==="error"&&Oe(je)},!0)}n(h,I)};d(ke,h=>{i.session.syncStatus==="pending"?h(ee):h(oe,!1)})}e(he);var W=s(he,2);W.__click=h=>{h.stopPropagation(),T()};var ge=s(W,2);ge.__click=h=>{h.stopPropagation(),c()};var S=s(ge,2),_e=a(S,!0);e(S),e(X),e(C);var F=s(C,2);{var se=h=>{var I=Ei(),Se=a(I),je=a(Se),Oe=s(a(je),2),aa=a(Oe);{var ta=x=>{var M=Ae(),$=ze(M);qe($,17,()=>i.session.trainingTypes,Ee,(we,pe)=>{var Ce=_i(),Be=a(Ce,!0);e(Ce),u(()=>v(Be,t(pe))),n(we,Ce)}),n(x,M)},Ca=x=>{var M=ui();n(x,M)};d(aa,x=>{i.session.trainingTypes&&i.session.trainingTypes.length>0&&!i.session.trainingTypes.includes("None")?x(ta):x(Ca,!1)})}e(Oe),e(je);var pa=s(je,2);{var Ea=x=>{var M=fi(),$=s(a(M),2),we=a($,!0);e($),e(M),u(()=>v(we,i.session.difficulty)),n(x,M)};d(pa,x=>{i.session.difficulty&&x(Ea)})}var sa=s(pa,2);{var ma=x=>{var M=mi(),$=s(a(M),2),we=a($);{var pe=Be=>{var Ke=Ae(),ya=ze(Ke);qe(ya,17,()=>i.session.categories,Ee,(Xe,xa)=>{var Aa=gi(),Ka=a(Aa,!0);e(Aa),u(()=>v(Ka,t(xa))),n(Xe,Aa)}),n(Be,Ke)},Ce=Be=>{var Ke=pi();n(Be,Ke)};d(we,Be=>{i.session.categories.length>0&&!i.session.categories.includes("None")?Be(pe):Be(Ce,!1)})}e($),e(M),n(x,M)};d(sa,x=>{i.session.categories?.length&&x(ma)})}var ba=s(sa,2);{var Fa=x=>{var M=yi(),$=s(a(M),2),we=a($);{var pe=Be=>{var Ke=Ae(),ya=ze(Ke);qe(ya,17,()=>i.session.energySystems,Ee,(Xe,xa)=>{var Aa=bi(),Ka=a(Aa,!0);e(Aa),u(()=>v(Ka,t(xa))),n(Xe,Aa)}),n(Be,Ke)},Ce=Be=>{var Ke=hi();n(Be,Ke)};d(we,Be=>{i.session.energySystems.length>0&&!i.session.energySystems.includes("None")?Be(pe):Be(Ce,!1)})}e($),e(M),n(x,M)};d(ba,x=>{i.session.energySystems?.length&&x(Fa)})}e(Se);var ha=s(Se,2),Wa=s(a(ha),2);{var za=x=>{var M=xi(),$=a(M,!0);e(M),u(()=>v($,i.session.notes)),n(x,M)},La=x=>{var M=wi();n(x,M)};d(Wa,x=>{i.session.notes?x(za):x(La,!1)})}e(ha);var va=s(ha,2),ca=a(va),_a=s(a(ca),2),Ga=a(_a);e(_a);var ua=s(_a,2),ja=a(ua);e(ua),e(ca);var Na=s(ca,2),Sa=s(a(Na),2),Ba=a(Sa);e(Sa);var ra=s(Sa,2),Ve=a(ra);e(ra),e(Na);var fa=s(Na,2),ia=s(a(fa),2),qa=a(ia);e(ia);var $e=s(ia,2),la=a($e);e($e),e(fa);var na=s(fa,2);{var Da=x=>{var M=ki(),$=s(a(M),2),we=a($);e($);var pe=s($,2),Ce=a(pe);e(pe),e(M),u(()=>{Ie(we,`width: ${i.session.openGrip/5*100}%`),v(Ce,`${i.session.openGrip??""}/5`)}),n(x,M)};d(na,x=>{i.session.openGrip&&x(Da)})}var Oa=s(na,2);{var Ia=x=>{var M=Si(),$=s(a(M),2),we=a($);e($);var pe=s($,2),Ce=a(pe);e(pe),e(M),u(()=>{Ie(we,`width: ${i.session.crimpGrip/5*100}%`),v(Ce,`${i.session.crimpGrip??""}/5`)}),n(x,M)};d(Oa,x=>{i.session.crimpGrip&&x(Ia)})}var Ma=s(Oa,2);{var Ra=x=>{var M=qi(),$=s(a(M),2),we=a($);e($);var pe=s($,2),Ce=a(pe);e(pe),e(M),u(()=>{Ie(we,`width: ${i.session.pinchGrip/5*100}%`),v(Ce,`${i.session.pinchGrip??""}/5`)}),n(x,M)};d(Ma,x=>{i.session.pinchGrip&&x(Ra)})}var Ta=s(Ma,2);{var Ha=x=>{var M=Di(),$=s(a(M),2),we=a($);e($);var pe=s($,2),Ce=a(pe);e(pe),e(M),u(()=>{Ie(we,`width: ${i.session.sloperGrip/5*100}%`),v(Ce,`${i.session.sloperGrip??""}/5`)}),n(x,M)};d(Ta,x=>{i.session.sloperGrip&&x(Ha)})}var Pa=s(Ta,2);{var Va=x=>{var M=Ti(),$=s(a(M),2),we=a($);e($);var pe=s($,2),Ce=a(pe);e(pe),e(M),u(()=>{Ie(we,`width: ${i.session.jugGrip/5*100}%`),v(Ce,`${i.session.jugGrip??""}/5`)}),n(x,M)};d(Pa,x=>{i.session.jugGrip&&x(Va)})}e(va);var Ue=s(va,2),ga=s(a(Ue),2),Za=a(ga);qe(Za,17,()=>i.session.climbs||[],Ee,(x,M,$)=>{{let we=He(()=>i.session.climbingType==="Mixed");li(x,{get climb(){return t(M)},onDelete:()=>void 0,onUpdate:pe=>void 0,get showClimbType(){return t(we)}})}});var Q=s(Za,2);{var re=x=>{var M=Ci();n(x,M)};d(Q,x=>{(i.session.climbs||[]).length===0&&x(re)})}e(ga),e(Ue),e(I),u(()=>{Ie(Ga,`width: ${i.session.fingerLoad/5*100}%`),v(ja,`${i.session.fingerLoad??""}/5`),Ie(Ba,`width: ${i.session.shoulderLoad/5*100}%`),v(Ve,`${i.session.shoulderLoad??""}/5`),Ie(qa,`width: ${i.session.forearmLoad/5*100}%`),v(la,`${i.session.forearmLoad??""}/5`)}),Ye(3,I,()=>ea,()=>({duration:150})),n(h,I)};d(F,h=>{t(b)&&h(se)})}var de=s(F,2);Ya(de,{get isOpen(){return t(g)},title:"Delete Session",message:"Are you sure you want to delete this session? This action cannot be undone.",onConfirm:ae,onCancel:()=>r(g,!1)});var ye=s(de,2);Ja(ye,{get isOpen(){return t(y)},activityType:"outdoor_climb",get initialData(){return i.session},onClose:m,onSaved:L}),e(G),u((h,I,Se)=>{ne=Qe(G,1,"session-card svelte-d5hg2r",null,ne,{expanded:t(b)}),Re(C,"aria-expanded",t(b)),v(ve,h),v(ue,I),v(H,Se),v(Y,`${i.session.area??""} `),v(q,`üïí ${(i.session.time||"12:00")??""}`),v(V,i.session.climbingType),v(fe,`${t(U)??""} climbs`),Re(Fe,"title",`Finger Load: ${i.session.fingerLoad??""}`),v(Le,i.session.fingerLoad),Re(Ne,"title",`Shoulder Load: ${i.session.shoulderLoad??""}`),v(Ge,i.session.shoulderLoad),Re(be,"title",`Forearm Load: ${i.session.forearmLoad??""}`),v(te,i.session.forearmLoad),v(_e,t(b)?"‚ñ≤":"‚ñº")},[()=>new Date(i.session.date).getDate(),()=>new Date(i.session.date).toLocaleDateString(void 0,{month:"short"}),()=>new Date(i.session.date).getFullYear()]),n(xe,G),Ze()}We(["click","keydown"]);var Li=l('<span class="spinner svelte-1s7jdlh"></span> Fetching...',1),Gi=l('<div class="error-banner svelte-1s7jdlh"> </div>'),ji=l('<small class="svelte-1s7jdlh">Try adjusting your filters.</small>'),Ni=l('<div class="empty-state svelte-1s7jdlh"><p class="svelte-1s7jdlh">No outdoor climbing sessions found.</p> <!></div>'),Oi=l('<div class="load-more-container svelte-1s7jdlh"><button class="load-more-btn svelte-1s7jdlh"> </button></div>'),Mi=l('<div class="view-container svelte-1s7jdlh"><div class="view-header svelte-1s7jdlh"><h2 class="view-title svelte-1s7jdlh">‚õ∞Ô∏è Outdoor Climbing History</h2> <div class="header-actions svelte-1s7jdlh"><button class="action-btn secondary svelte-1s7jdlh" title="Export filtered data to CSV">üì• Export</button> <button class="action-btn svelte-1s7jdlh" title="Fetch data from cloud"><!></button></div></div> <!> <!> <div class="info-bar svelte-1s7jdlh"><div class="legend-wrapper svelte-1s7jdlh"><!></div> <div class="load-key svelte-1s7jdlh"><span class="key-label svelte-1s7jdlh">Load:</span> <div class="key-item svelte-1s7jdlh"><span class="dot finger svelte-1s7jdlh"></span> Finger</div> <div class="key-item svelte-1s7jdlh"><span class="dot shoulder svelte-1s7jdlh"></span> Shoulder</div> <div class="key-item svelte-1s7jdlh"><span class="dot forearm svelte-1s7jdlh"></span> Forearm</div></div></div> <div class="sessions-list"><!> <!> <!></div></div>');function Pi(xe,i){Je(i,!0);let b=D(da([])),g=D(da([])),y=D(!1),k=D(""),c=D(da({startDate:"",endDate:"",area:"",crag:"",climbingType:"",sessionType:"",grade:""})),T=D(20);const m=20;Xa(()=>{L()});async function L(){r(y,!0),r(k,"");try{const o=await dt();o.ok&&o.data?(r(b,o.data.map(_=>({..._,activityType:"outdoor_climb"})),!0),t(b).sort((_,z)=>new Date(z.date).getTime()-new Date(_.date).getTime()),J()):r(k,o.error||"Failed to fetch data",!0)}catch(o){r(k,o instanceof Error?o.message:"Unknown error",!0)}finally{r(y,!1)}}function ae(o){r(c,o,!0),J()}function J(){r(T,m),r(g,t(b).filter(o=>{if(t(c).startDate&&o.date<t(c).startDate||t(c).endDate&&o.date>t(c).endDate||t(c).area&&!o.area.toLowerCase().includes(t(c).area.toLowerCase())||t(c).crag&&!o.crag.toLowerCase().includes(t(c).crag.toLowerCase()))return!1;if(t(c).climbingType&&(o.climbingType==="Leading"?"Sport":o.climbingType)!==t(c).climbingType)if(o.climbingType==="Mixed")if(t(c).climbingType==="Bouldering"){if(!o.climbs.some(z=>!z.isSport))return!1}else if(t(c).climbingType==="Sport"||t(c).climbingType==="Trad"){if(!o.climbs.some(z=>z.isSport))return!1}else return!1;else return!1;if(t(c).sessionType&&!o.trainingTypes?.includes(t(c).sessionType))return!1;if(t(c).grade){const _=t(c).grade.trim().toLowerCase();if(!o.climbs.some(q=>q.grade.trim().toLowerCase()===_))return!1}return!0}),!0)}function le(){r(T,t(T)+m)}var U=Mi(),Z=a(U),G=s(a(Z),2),ne=a(G);ne.__click=()=>Qa(t(g),"outdoor_climbs");var C=s(ne,2);C.__click=L;var j=a(C);{var R=o=>{var _=Li();ka(),n(o,_)},N=o=>{var _=wa("‚òÅÔ∏è Fetch Data");n(o,_)};d(j,o=>{t(y)?o(R):o(N,!1)})}e(C),e(G),e(Z);var ve=s(Z,2);{var ie=o=>{var _=Gi(),z=a(_,!0);e(_),u(()=>v(z,t(k))),Ye(3,_,()=>ea),n(o,_)};d(ve,o=>{t(k)&&o(ie)})}var ue=s(ve,2);Ys(ue,{onFilterParamsChange:ae});var O=s(ue,2),H=a(O),f=a(H);st(f),e(H),ka(2),e(O);var E=s(O,2),P=a(E);qe(P,17,()=>t(g).slice(0,t(T)),o=>o.id,(o,_)=>{zi(o,{get session(){return t(_)},onDelete:L})});var Y=s(P,2);{var p=o=>{var _=Ni(),z=s(a(_),2);{var q=K=>{var V=ji();n(K,V)};d(z,K=>{t(b).length>0&&K(q)})}e(_),n(o,_)};d(Y,o=>{t(g).length===0&&o(p)})}var w=s(Y,2);{var A=o=>{var _=Oi(),z=a(_);z.__click=le;var q=a(z);e(z),e(_),u(()=>v(q,`Load More (${t(g).length-t(T)} remaining)`)),n(o,_)};d(w,o=>{t(T)<t(g).length&&o(A)})}e(E),e(U),u(()=>C.disabled=t(y)),n(xe,U),Ze()}We(["click"]);var Ai=l('<span class="chevron svelte-11rkzid">‚ñ≤</span>'),Bi=l('<span class="chevron svelte-11rkzid">‚ñº</span>'),Ii=l('<div class="filter-body svelte-11rkzid"><div class="filter-grid svelte-11rkzid"><div class="filter-item svelte-11rkzid"><label for="start-date" class="svelte-11rkzid">Start Date</label> <input type="date" id="start-date" class="svelte-11rkzid"/></div> <div class="filter-item svelte-11rkzid"><label for="end-date" class="svelte-11rkzid">End Date</label> <input type="date" id="end-date" class="svelte-11rkzid"/></div> <div class="filter-item svelte-11rkzid"><label for="name-filter" class="svelte-11rkzid">Session Name</label> <input type="text" id="name-filter" placeholder="e.g. Leg Day" class="svelte-11rkzid"/></div> <div class="filter-item svelte-11rkzid"><label for="block-filter" class="svelte-11rkzid">Training Block</label> <select id="block-filter" class="svelte-11rkzid"><option>All Blocks</option><option>Strength</option><option>Power</option><option>Power Endurance</option><option>Muscular Endurance</option></select></div></div> <div class="filter-actions svelte-11rkzid"><button class="reset-btn svelte-11rkzid">Reset Filters</button></div></div>'),Ri=l('<div class="filter-container svelte-11rkzid"><button class="filter-header svelte-11rkzid"><div class="header-content svelte-11rkzid"><span class="icon svelte-11rkzid">üîç</span> <span class="title svelte-11rkzid">Filters</span> <!></div></button> <!></div>');function Vi(xe,i){Je(i,!0);let b=D(!1),g=D(""),y=D(""),k=D(""),c=D("");function T(){r(b,!t(b))}function m(){r(g,""),r(y,""),r(k,""),r(c,""),L()}function L(){i.onFilterParamsChange({startDate:t(g),endDate:t(y),name:t(k),trainingBlock:t(c)})}var ae=Ri(),J=a(ae);J.__click=T;var le=a(J),U=s(a(le),4);{var Z=j=>{var R=Ai();n(j,R)},G=j=>{var R=Bi();n(j,R)};d(U,j=>{t(b)?j(Z):j(G,!1)})}e(le),e(J);var ne=s(J,2);{var C=j=>{var R=Ii(),N=a(R),ve=a(N),ie=s(a(ve),2);Me(ie),ie.__change=L,e(ve);var ue=s(ve,2),O=s(a(ue),2);Me(O),O.__change=L,e(ue);var H=s(ue,2),f=s(a(H),2);Me(f),f.__input=L,e(H);var E=s(H,2),P=s(a(E),2);P.__change=L;var Y=a(P);Y.value=Y.__value="";var p=s(Y);p.value=p.__value="Strength";var w=s(p);w.value=w.__value="Power";var A=s(w);A.value=A.__value="Power Endurance";var o=s(A);o.value=o.__value="Muscular Endurance",e(P),e(E),e(N);var _=s(N,2),z=a(_);z.__click=m,e(_),e(R),Pe(ie,()=>t(g),q=>r(g,q)),Pe(O,()=>t(y),q=>r(y,q)),Pe(f,()=>t(k),q=>r(k,q)),oa(P,()=>t(c),q=>r(c,q)),Ye(3,R,()=>ea,()=>({duration:200})),n(j,R)};d(ne,j=>{t(b)&&j(C)})}e(ae),u(()=>Re(J,"aria-expanded",t(b))),n(xe,ae),Ze()}We(["click","change","input"]);var Ui=l('<span class="block-tag svelte-cirrfc"> </span>'),Wi=l('<span class="status-icon pending svelte-cirrfc" title="Waiting to sync">üîÑ</span>'),Hi=l('<span class="status-icon error svelte-cirrfc" title="Sync error">‚ö†Ô∏è</span>'),Yi=l('<div class="bw-info svelte-cirrfc"><span class="label svelte-cirrfc">Bodyweight:</span> </div>'),Ji=l('<span class="muscle-tag svelte-cirrfc"> </span>'),Zi=l('<span class="muscle-tag svelte-cirrfc"> </span>'),Ki=l('<div class="muscle-tags svelte-cirrfc"><!> <!></div>'),Xi=l('<span class="tag w svelte-cirrfc">W</span>'),Qi=l('<span class="tag f svelte-cirrfc">F</span>'),$i=l('<span class="tag d svelte-cirrfc">D</span>'),en=l('<div><span class="set-num svelte-cirrfc"></span> <!> <!> <!> <span class="val svelte-cirrfc"><span class="weight"> </span> <span class="x svelte-cirrfc">x</span> <span class="reps"> </span></span></div>'),an=l('<div class="exercise-item svelte-cirrfc"><div class="exercise-header svelte-cirrfc"><h4 class="svelte-cirrfc"> </h4> <!></div> <div class="sets-grid svelte-cirrfc"></div></div>'),tn=l('<div class="subcategory-group svelte-cirrfc"><h5 class="subcategory-header svelte-cirrfc"> </h5> <!></div>'),sn=l('<div class="category-group svelte-cirrfc"><h4 class="category-header svelte-cirrfc"> </h4> <!></div>'),nn=l('<div class="card-body svelte-cirrfc"><!> <div class="exercises-list svelte-cirrfc"></div></div>'),rn=l('<div><div class="card-header svelte-cirrfc" role="button" tabindex="0"><div class="header-main svelte-cirrfc"><div class="date-badge svelte-cirrfc"><span class="day svelte-cirrfc"> </span> <span class="month svelte-cirrfc"> </span> <span class="year svelte-cirrfc"> </span></div> <div class="session-info svelte-cirrfc"><div class="session-text"><div class="name-display svelte-cirrfc"><h3 class="name svelte-cirrfc"> </h3></div> <div class="session-meta svelte-cirrfc"><span class="time-tag svelte-cirrfc"> </span> <!> <span class="stat svelte-cirrfc"> </span> <span class="stat svelte-cirrfc"> </span> <span class="stat svelte-cirrfc"> </span></div></div></div></div> <div class="header-actions svelte-cirrfc"><div class="header-status"><!></div> <button class="btn-icon edit-session svelte-cirrfc" title="Edit Session">‚úèÔ∏è</button> <button class="btn-icon delete-session svelte-cirrfc" title="Delete Session">üóëÔ∏è</button> <span class="chevron svelte-cirrfc"> </span></div></div> <!></div> <!> <!>',1);function ln(xe,i){Je(i,!0);let b=D(!1),g=D(!1),y=D(!1);function k(){r(b,!t(b))}function c(){r(g,!0)}function T(){r(y,!0)}function m(){r(y,!1)}async function L(){r(y,!1),await Ua()}async function ae(){try{const S=await ct(i.session.id);S.ok?(r(g,!1),i.onDelete()):(console.error("Failed to delete session:",S.error),alert("Failed to delete session"))}catch(S){console.error("Exception deleting session:",S),alert("Error deleting session")}}function J(S){return Dt.find(_e=>_e.name===S)}function le(S){switch(S){case"Strength":return{bg:"rgba(99, 102, 241, 0.1)",color:"#4338ca",border:"rgba(99, 102, 241, 0.2)"};case"Power":return{bg:"rgba(239, 68, 68, 0.1)",color:"#b91c1c",border:"rgba(239, 68, 68, 0.2)"};case"Power Endurance":return{bg:"rgba(245, 158, 11, 0.1)",color:"#b45309",border:"rgba(245, 158, 11, 0.2)"};case"Muscular Endurance":return{bg:"rgba(16, 185, 129, 0.1)",color:"#047857",border:"rgba(16, 185, 129, 0.2)"};default:return{bg:"rgba(107, 114, 128, 0.1)",color:"#374151",border:"rgba(107, 114, 128, 0.2)"}}}let U=He(()=>i.session.exercises?.length??0),Z=He(()=>(i.session.exercises||[]).reduce((S,_e)=>S+(_e.sets?.length||0),0)),G=He(()=>(i.session.exercises||[]).reduce((S,_e)=>S+(_e.sets||[]).reduce((F,se)=>F+(se.weight||0)*(se.reps||0),0),0)),ne=He(()=>(i.session.exercises||[]).reduce((S,_e)=>{const F=J(_e.name),se=F?.category||"Other",de=F?.subcategory||"Misc";return S[se]||(S[se]={}),S[se][de]||(S[se][de]=[]),S[se][de].push(_e),S},{}));var C=rn(),j=ze(C);let R;var N=a(j);N.__click=k,N.__keydown=S=>S.key==="Enter"&&k();var ve=a(N),ie=a(ve),ue=a(ie),O=a(ue,!0);e(ue);var H=s(ue,2),f=a(H,!0);e(H);var E=s(H,2),P=a(E,!0);e(E),e(ie);var Y=s(ie,2),p=a(Y),w=a(p),A=a(w),o=a(A,!0);e(A),e(w);var _=s(w,2),z=a(_),q=a(z);e(z);var K=s(z,2);{var V=S=>{const _e=He(()=>le(i.session.trainingBlock));var F=Ui(),se=a(F,!0);e(F),u(()=>{Ie(F,`--bg-color: ${t(_e).bg??""}; --text-color: ${t(_e).color??""}; --border-color: ${t(_e).border??""};`),v(se,i.session.trainingBlock)}),n(S,F)};d(K,S=>{i.session.trainingBlock&&S(V)})}var me=s(K,2),B=a(me);e(me);var fe=s(me,2),ce=a(fe);e(fe);var De=s(fe,2),Te=a(De);e(De),e(_),e(p),e(Y),e(ve);var Fe=s(ve,2),Le=a(Fe),Ne=a(Le);{var Ge=S=>{var _e=Wi();n(S,_e)},be=S=>{var _e=Ae(),F=ze(_e);{var se=de=>{var ye=Hi();n(de,ye)};d(F,de=>{i.session.syncStatus==="error"&&de(se)},!0)}n(S,_e)};d(Ne,S=>{i.session.syncStatus==="pending"?S(Ge):S(be,!1)})}e(Le);var te=s(Le,2);te.__click=S=>{S.stopPropagation(),T()};var X=s(te,2);X.__click=S=>{S.stopPropagation(),c()};var he=s(X,2),ke=a(he,!0);e(he),e(Fe),e(N);var ee=s(N,2);{var oe=S=>{var _e=nn(),F=a(_e);{var se=ye=>{var h=Yi(),I=s(a(h));e(h),u(()=>v(I,` ${i.session.bodyweight??""}kg`)),n(ye,h)};d(F,ye=>{i.session.bodyweight&&ye(se)})}var de=s(F,2);qe(de,21,()=>Object.entries(t(ne)),Ee,(ye,h)=>{var I=He(()=>$a(t(h),2));let Se=()=>t(I)[0],je=()=>t(I)[1];var Oe=sn(),aa=a(Oe),ta=a(aa,!0);e(aa);var Ca=s(aa,2);qe(Ca,17,()=>Object.entries(je()),Ee,(pa,Ea)=>{var sa=He(()=>$a(t(Ea),2));let ma=()=>t(sa)[0],ba=()=>t(sa)[1];var Fa=tn(),ha=a(Fa),Wa=a(ha,!0);e(ha);var za=s(ha,2);qe(za,17,ba,Ee,(La,va)=>{const ca=He(()=>J(t(va).name));var _a=an(),Ga=a(_a),ua=a(Ga),ja=a(ua,!0);e(ua);var Na=s(ua,2);{var Sa=ra=>{var Ve=Ki(),fa=a(Ve);qe(fa,17,()=>t(ca).targetMuscles.slice(0,3),Ee,($e,la)=>{var na=Ji(),Da=a(na,!0);e(na),u(()=>v(Da,t(la))),n($e,na)});var ia=s(fa,2);{var qa=$e=>{var la=Zi(),na=a(la);e(la),u(()=>v(na,`+${t(ca).targetMuscles.length-3}`)),n($e,la)};d(ia,$e=>{t(ca).targetMuscles.length>3&&$e(qa)})}e(Ve),n(ra,Ve)};d(Na,ra=>{t(ca)&&ra(Sa)})}e(Ga);var Ba=s(Ga,2);qe(Ba,21,()=>t(va).sets,Ee,(ra,Ve,fa)=>{var ia=en();let qa;var $e=a(ia);$e.textContent=fa+1;var la=s($e,2);{var na=Ue=>{var ga=Xi();n(Ue,ga)};d(la,Ue=>{t(Ve).isWarmup&&Ue(na)})}var Da=s(la,2);{var Oa=Ue=>{var ga=Qi();n(Ue,ga)};d(Da,Ue=>{t(Ve).isFailure&&Ue(Oa)})}var Ia=s(Da,2);{var Ma=Ue=>{var ga=$i();n(Ue,ga)};d(Ia,Ue=>{t(Ve).isDropSet&&Ue(Ma)})}var Ra=s(Ia,2),Ta=a(Ra),Ha=a(Ta);e(Ta);var Pa=s(Ta,4),Va=a(Pa,!0);e(Pa),e(Ra),e(ia),u(()=>{qa=Qe(ia,1,"set-pill svelte-cirrfc",null,qa,{completed:t(Ve).completed,warmup:t(Ve).isWarmup}),v(Ha,`${t(Ve).weight??""}kg`),v(Va,t(Ve).reps)}),n(ra,ia)}),e(Ba),e(_a),u(()=>v(ja,t(va).name)),n(La,_a)}),e(Fa),u(()=>v(Wa,ma())),n(pa,Fa)}),e(Oe),u(()=>v(ta,Se())),n(ye,Oe)}),e(de),e(_e),Ye(3,_e,()=>ea,()=>({duration:150})),n(S,_e)};d(ee,S=>{t(b)&&S(oe)})}e(j);var W=s(j,2);Ya(W,{get isOpen(){return t(g)},title:"Delete Session",message:"Are you sure you want to delete this session? This cannot be undone.",onConfirm:ae,onCancel:()=>r(g,!1)});var ge=s(W,2);Ja(ge,{get isOpen(){return t(y)},activityType:"gym_session",get initialData(){return i.session},onClose:m,onSaved:L}),u((S,_e,F,se)=>{R=Qe(j,1,"session-card svelte-cirrfc",null,R,{expanded:t(b)}),Re(N,"aria-expanded",t(b)),v(O,S),v(f,_e),v(P,F),v(o,i.session.name),v(q,`üïí ${(i.session.time||"12:00")??""}`),v(B,`${t(U)??""} Exercises`),v(ce,`${t(Z)??""} Sets`),v(Te,`~${se??""}kg Vol`),v(ke,t(b)?"‚ñ≤":"‚ñº")},[()=>new Date(i.session.date).getDate(),()=>new Date(i.session.date).toLocaleDateString("en-GB",{month:"short"}),()=>new Date(i.session.date).getFullYear(),()=>Math.round(t(G)).toLocaleString()]),n(xe,C),Ze()}We(["click","keydown"]);var vn=l('<span class="spinner svelte-133enjd"></span> Fetching...',1),on=l('<div class="error-banner svelte-133enjd"> </div>'),dn=l('<small class="svelte-133enjd">Try adjusting your filters.</small>'),cn=l('<div class="empty-state svelte-133enjd"><p class="svelte-133enjd">No gym sessions found.</p> <!></div>'),_n=l('<div class="load-more-container svelte-133enjd"><button class="load-more-btn svelte-133enjd"> </button></div>'),un=l('<div class="view-container svelte-133enjd"><div class="view-header svelte-133enjd"><h2 class="view-title svelte-133enjd">üèãÔ∏è Gym Session History</h2> <div class="header-actions svelte-133enjd"><button class="action-btn secondary svelte-133enjd" title="Export filtered data to CSV">üì• Export</button> <button class="action-btn svelte-133enjd" title="Fetch data from cloud"><!></button></div></div> <!> <!> <div class="sessions-list"><!> <!> <!></div></div>');function fn(xe,i){Je(i,!0);let b=D(da([])),g=D(da([])),y=D(!1),k=D(""),c=D(da({startDate:"",endDate:"",name:"",trainingBlock:""})),T=D(20);const m=20;Xa(()=>{L()});async function L(){r(y,!0),r(k,"");try{const p=await _t();p.ok&&p.data?(r(b,p.data.map(w=>({...w,activityType:"gym_session"})),!0),t(b).sort((w,A)=>new Date(A.date).getTime()-new Date(w.date).getTime()),J()):r(k,p.error||"Failed to fetch data",!0)}catch(p){r(k,p instanceof Error?p.message:"Unknown error",!0)}finally{r(y,!1)}}function ae(p){r(c,p,!0),J()}function J(){r(T,m),r(g,t(b).filter(p=>!(t(c).startDate&&p.date<t(c).startDate||t(c).endDate&&p.date>t(c).endDate||t(c).name&&!p.name.toLowerCase().includes(t(c).name.toLowerCase())||t(c).trainingBlock&&p.trainingBlock!==t(c).trainingBlock)),!0)}function le(){r(T,t(T)+m)}var U=un(),Z=a(U),G=s(a(Z),2),ne=a(G);ne.__click=()=>Qa(t(g),"gym_sessions");var C=s(ne,2);C.__click=L;var j=a(C);{var R=p=>{var w=vn();ka(),n(p,w)},N=p=>{var w=wa("‚òÅÔ∏è Fetch Data");n(p,w)};d(j,p=>{t(y)?p(R):p(N,!1)})}e(C),e(G),e(Z);var ve=s(Z,2);{var ie=p=>{var w=on(),A=a(w,!0);e(w),u(()=>v(A,t(k))),Ye(3,w,()=>ea),n(p,w)};d(ve,p=>{t(k)&&p(ie)})}var ue=s(ve,2);Vi(ue,{onFilterParamsChange:ae});var O=s(ue,2),H=a(O);qe(H,17,()=>t(g).slice(0,t(T)),p=>p.id,(p,w)=>{ln(p,{get session(){return t(w)},onDelete:L})});var f=s(H,2);{var E=p=>{var w=cn(),A=s(a(w),2);{var o=_=>{var z=dn();n(_,z)};d(A,_=>{t(b).length>0&&_(o)})}e(w),n(p,w)};d(f,p=>{t(g).length===0&&p(E)})}var P=s(f,2);{var Y=p=>{var w=_n(),A=a(w);A.__click=le;var o=a(A);e(A),e(w),u(()=>v(o,`Load More (${t(g).length-t(T)} remaining)`)),n(p,w)};d(P,p=>{t(T)<t(g).length&&p(Y)})}e(O),e(U),u(()=>C.disabled=t(y)),n(xe,U),Ze()}We(["click"]);var gn=l('<span class="set-tag svelte-1tiisng"> <span class="x svelte-1tiisng">x</span> </span>'),pn=l('<div class="ex-notes svelte-1tiisng"> </div>'),mn=l('<div class="exercise-item svelte-1tiisng"><div class="ex-header svelte-1tiisng"><div class="ex-title-group svelte-1tiisng"><span class="ex-name svelte-1tiisng"> </span> <span class="ex-grip svelte-1tiisng"> </span></div></div> <div class="ex-sets svelte-1tiisng"></div> <!></div>'),bn=l('<div class="card-body svelte-1tiisng"><div class="exercises-list svelte-1tiisng"></div></div>'),hn=l('<div><div class="card-header svelte-1tiisng" role="button" tabindex="0"><div class="header-main svelte-1tiisng"><span class="session-date svelte-1tiisng"> <span class="time-tag svelte-1tiisng"> </span></span> <span class="meta svelte-1tiisng"><!> </span></div> <div class="header-status svelte-1tiisng"><span>‚óè</span> <button class="btn-icon edit-session svelte-1tiisng" title="Edit Session">‚úèÔ∏è</button> <button class="btn-icon delete-btn svelte-1tiisng" title="Delete Session">üóëÔ∏è</button> <span class="chevron svelte-1tiisng"> </span></div></div> <!></div> <!> <!>',1);function yn(xe,i){Je(i,!0);let b=D(!1),g=D(!1),y=D(!1);function k(){r(b,!t(b))}function c(){r(g,!0)}function T(){r(y,!0)}function m(){r(y,!1)}async function L(){r(y,!1),await Ua()}async function ae(){try{const q=await ut(i.session.id);q.ok?(r(g,!1),i.onDelete()):(console.error("Failed to delete session:",q.error),alert("Failed to delete session"))}catch(q){console.error("Exception deleting session:",q),alert("Error deleting session")}}function J(q){return q.exercises.reduce((K,V)=>K+V.details.length,0)}var le=hn(),U=ze(le);let Z;var G=a(U);G.__click=k,G.__keydown=q=>q.key==="Enter"&&k();var ne=a(G),C=a(ne),j=a(C),R=s(j),N=a(R,!0);e(R),e(C);var ve=s(C,2),ie=a(ve);{var ue=q=>{var K=wa();u(()=>v(K,`${i.session.location??""} ¬∑`)),n(q,K)};d(ie,q=>{i.session.location&&i.session.location!=="N/A"&&i.session.location!=="Home"&&q(ue)})}var O=s(ie);e(ve),e(ne);var H=s(ne,2),f=a(H);let E;var P=s(f,2);P.__click=q=>{q.stopPropagation(),T()};var Y=s(P,2);Y.__click=q=>{q.stopPropagation(),c()};var p=s(Y,2),w=a(p,!0);e(p),e(H),e(G);var A=s(G,2);{var o=q=>{var K=bn(),V=a(K);qe(V,21,()=>i.session.exercises||[],Ee,(me,B)=>{var fe=mn(),ce=a(fe),De=a(ce),Te=a(De),Fe=a(Te,!0);e(Te);var Le=s(Te,2),Ne=a(Le,!0);e(Le),e(De),e(ce);var Ge=s(ce,2);qe(Ge,21,()=>t(B).details,Ee,(X,he)=>{var ke=gn(),ee=a(ke),oe=s(ee,2);e(ke),u(()=>{v(ee,`${t(he).weight>0?`+${t(he).weight}kg`:"BW"} `),v(oe,` ${t(he).reps??""}s/reps`)}),n(X,ke)}),e(Ge);var be=s(Ge,2);{var te=X=>{var he=pn(),ke=a(he);e(he),u(()=>v(ke,`"${t(B).notes??""}"`)),n(X,he)};d(be,X=>{t(B).notes&&X(te)})}e(fe),u(()=>{v(Fe,t(B).name),v(Ne,t(B).gripType)}),n(me,fe)}),e(V),e(K),Ye(3,K,()=>ea,()=>({duration:150})),n(q,K)};d(A,q=>{t(b)&&q(o)})}e(U);var _=s(U,2);Ya(_,{get isOpen(){return t(g)},title:"Delete Fingerboard Session",message:"Are you sure you want to delete this session? This cannot be undone.",onConfirm:ae,onCancel:()=>r(g,!1)});var z=s(_,2);Ja(z,{get isOpen(){return t(y)},activityType:"fingerboarding",get initialData(){return i.session},onClose:m,onSaved:L}),u((q,K)=>{Z=Qe(U,1,"session-card svelte-1tiisng",null,Z,{expanded:t(b)}),v(j,`${q??""} `),v(N,i.session.time||"12:00"),v(O,` ${i.session.exercises.length??""} Exercises ¬∑ ${K??""} Sets`),E=Qe(f,1,"sync-dot svelte-1tiisng",null,E,{synced:i.session.syncStatus==="synced"}),Re(f,"title",i.session.syncStatus==="synced"?"Synced":"Local"),v(w,t(b)?"‚ñ≤":"‚ñº")},[()=>new Date(i.session.date).toLocaleDateString(void 0,{weekday:"short",month:"short",day:"numeric",year:"numeric"}),()=>J(i.session)]),n(xe,le),Ze()}We(["click","keydown"]);var xn=l('<span class="spinner svelte-1szs0u9"></span> Fetching...',1),wn=l('<div class="loading svelte-1szs0u9">Loading sessions...</div>'),kn=l('<div class="empty-state svelte-1szs0u9"><!></div>'),Sn=l('<div class="load-more-container svelte-1szs0u9"><button class="load-more-btn svelte-1szs0u9"> </button></div>'),qn=l('<div class="timeline svelte-1szs0u9"><!> <!></div>'),Dn=l('<div class="view-content svelte-1szs0u9"><div class="header svelte-1szs0u9"><h3 class="svelte-1szs0u9">ü§è Fingerboarding Log</h3> <button class="fetch-btn svelte-1szs0u9" title="Fetch data from cloud"><!></button></div> <div class="filters svelte-1szs0u9"><div class="filter-group svelte-1szs0u9"><label for="start-date" class="svelte-1szs0u9">From</label> <input type="date" id="start-date" class="svelte-1szs0u9"/></div> <div class="filter-group svelte-1szs0u9"><label for="end-date" class="svelte-1szs0u9">To</label> <input type="date" id="end-date" class="svelte-1szs0u9"/></div></div> <!></div>');function Tn(xe,i){Je(i,!0);let b=D(da([])),g=D(!0),y=D(""),k=D(""),c=D(20);const T=20;nt(()=>{t(y),t(k),r(c,T)});async function m(){r(g,!0);try{const f=await ft();f.ok&&f.data&&r(b,f.data.map(E=>({...E,activityType:"fingerboarding",syncStatus:"synced"})).sort((E,P)=>new Date(P.date).getTime()-new Date(E.date).getTime()),!0)}catch(f){console.error("Failed to fetch sessions",f)}finally{r(g,!1)}}m();let L=He(()=>t(b).filter(f=>!(t(y)&&new Date(f.date)<new Date(t(y))||t(k)&&new Date(f.date)>new Date(t(k)))));function ae(){r(c,t(c)+T)}function J(){m()}var le=Dn(),U=a(le),Z=s(a(U),2);Z.__click=m;var G=a(Z);{var ne=f=>{var E=xn();ka(),n(f,E)},C=f=>{var E=wa("‚òÅÔ∏è Fetch Data");n(f,E)};d(G,f=>{t(g)?f(ne):f(C,!1)})}e(Z),e(U);var j=s(U,2),R=a(j),N=s(a(R),2);Me(N),e(R);var ve=s(R,2),ie=s(a(ve),2);Me(ie),e(ve),e(j);var ue=s(j,2);{var O=f=>{var E=wn();n(f,E)},H=f=>{var E=Ae(),P=ze(E);{var Y=w=>{var A=kn(),o=a(A);{var _=q=>{var K=wa("No sessions match filter.");n(q,K)},z=q=>{var K=wa("No fingerboarding sessions logged yet.");n(q,K)};d(o,q=>{t(b).length>0?q(_):q(z,!1)})}e(A),n(w,A)},p=w=>{var A=qn(),o=a(A);qe(o,17,()=>t(L).slice(0,t(c)),Ee,(q,K)=>{yn(q,{get session(){return t(K)},onDelete:J})});var _=s(o,2);{var z=q=>{var K=Sn(),V=a(K);V.__click=ae;var me=a(V);e(V),e(K),u(()=>v(me,`Load More (${t(L).length-t(c)} remaining)`)),n(q,K)};d(_,q=>{t(c)<t(L).length&&q(z)})}e(A),n(w,A)};d(P,w=>{t(L).length===0?w(Y):w(p,!1)},!0)}n(f,E)};d(ue,f=>{t(g)&&t(b).length===0?f(O):f(H,!1)})}e(le),u(()=>Z.disabled=t(g)),Pe(N,()=>t(y),f=>r(y,f)),Pe(ie,()=>t(k),f=>r(k,f)),n(xe,le),Ze()}We(["click"]);var Cn=l('<div class="notes-section svelte-5f8qag"><div class="notes-display svelte-5f8qag"><span class="note-icon svelte-5f8qag">üìù</span> <p class="svelte-5f8qag"> </p></div></div>'),En=l('<span class="position-badge svelte-5f8qag"> </span>'),Fn=l('<span class="climb-attempts svelte-5f8qag"> </span>'),zn=l('<div><span class="climb-name svelte-5f8qag"> </span> <span class="climb-status"> </span> <!></div>'),Ln=l('<div class="climbs-grid svelte-5f8qag"></div>'),Gn=l('<div class="round-card svelte-5f8qag"><div class="round-header svelte-5f8qag"><h4 class="svelte-5f8qag"> </h4> <!></div> <!></div>'),jn=l('<div class="card-body svelte-5f8qag"><div class="loads-row svelte-5f8qag"><div class="load-item svelte-5f8qag"><span class="label svelte-5f8qag">Fingers</span> <div class="bar-container svelte-5f8qag"><div class="bar svelte-5f8qag"></div></div></div> <div class="load-item svelte-5f8qag"><span class="label svelte-5f8qag">Shoulders</span> <div class="bar-container svelte-5f8qag"><div class="bar svelte-5f8qag"></div></div></div> <div class="load-item svelte-5f8qag"><span class="label svelte-5f8qag">Forearms</span> <div class="bar-container svelte-5f8qag"><div class="bar svelte-5f8qag"></div></div></div></div> <!> <div class="rounds-list svelte-5f8qag"></div></div>'),Nn=l('<div><div class="card-header svelte-5f8qag" role="button" tabindex="0"><div class="header-main svelte-5f8qag"><span class="session-date svelte-5f8qag"> <span class="type-tag svelte-5f8qag"> </span></span> <div class="venue-row svelte-5f8qag"><span class="venue"> </span> <span class="result-summary svelte-5f8qag"> </span></div></div> <div class="header-status svelte-5f8qag"><span>‚óè</span> <button class="btn-icon edit-session svelte-5f8qag" title="Edit Session">‚úèÔ∏è</button> <button class="btn-icon delete-btn svelte-5f8qag" title="Delete Session">üóëÔ∏è</button> <span class="chevron svelte-5f8qag"> </span></div></div> <!></div> <!> <!>',1);function On(xe,i){Je(i,!0);let b=D(!1),g=D(!1),y=D(!1);function k(){r(b,!t(b))}function c(){r(g,!0)}function T(){r(y,!0)}function m(){r(y,!1)}async function L(){r(y,!1),await Ua()}async function ae(){try{const V=await gt(i.session.id);V.ok?(r(g,!1),await Ua()):(console.error("Failed to delete session:",V.error),alert("Failed to delete session"))}catch(V){console.error("Exception deleting session:",V),alert("Error deleting session")}}function J(V){if(!V.rounds||V.rounds.length===0)return"No rounds";const me=V.rounds[V.rounds.length-1];if(me.position)return`#${me.position} ${me.name}`;if(me.climbs){const B=me.climbs.filter(ce=>ce.status==="Top"||ce.status==="Flash").length,fe=me.climbs.filter(ce=>ce.status==="Zone").length;return`${V.rounds.length} Rnds ¬∑ Final: ${B}T ${fe+B}Z`}return me.name}function le(V){switch(V){case"Flash":return"status-flash";case"Top":return"status-top";case"Zone":return"status-zone";default:return"status-attempt"}}var U=Nn(),Z=ze(U);let G;var ne=a(Z);ne.__click=k,ne.__keydown=V=>V.key==="Enter"&&k();var C=a(ne),j=a(C),R=a(j),N=s(R),ve=a(N,!0);e(N),e(j);var ie=s(j,2),ue=a(ie),O=a(ue,!0);e(ue);var H=s(ue,2),f=a(H,!0);e(H),e(ie),e(C);var E=s(C,2),P=a(E);let Y;var p=s(P,2);p.__click=V=>{V.stopPropagation(),T()};var w=s(p,2);w.__click=V=>{V.stopPropagation(),c()};var A=s(w,2),o=a(A,!0);e(A),e(E),e(ne);var _=s(ne,2);{var z=V=>{var me=jn(),B=a(me),fe=a(B),ce=s(a(fe),2),De=a(ce);e(ce),e(fe);var Te=s(fe,2),Fe=s(a(Te),2),Le=a(Fe);e(Fe),e(Te);var Ne=s(Te,2),Ge=s(a(Ne),2),be=a(Ge);e(Ge),e(Ne),e(B);var te=s(B,2);{var X=ke=>{var ee=Cn(),oe=a(ee),W=s(a(oe),2),ge=a(W,!0);e(W),e(oe),e(ee),u(()=>v(ge,i.session.notes)),n(ke,ee)};d(te,ke=>{i.session.notes&&ke(X)})}var he=s(te,2);qe(he,21,()=>i.session.rounds,Ee,(ke,ee)=>{var oe=Gn(),W=a(oe),ge=a(W),S=a(ge,!0);e(ge);var _e=s(ge,2);{var F=ye=>{var h=En(),I=a(h);e(h),u(()=>v(I,`#${t(ee).position??""}`)),n(ye,h)};d(_e,ye=>{t(ee).position&&ye(F)})}e(W);var se=s(W,2);{var de=ye=>{var h=Ln();qe(h,21,()=>t(ee).climbs,Ee,(I,Se)=>{var je=zn(),Oe=a(je),aa=a(Oe,!0);e(Oe);var ta=s(Oe,2),Ca=a(ta,!0);e(ta);var pa=s(ta,2);{var Ea=sa=>{var ma=Fn(),ba=a(ma);e(ma),u(()=>v(ba,`(${t(Se).attemptCount??""})`)),n(sa,ma)};d(pa,sa=>{t(Se).attemptCount>1&&sa(Ea)})}e(je),u(sa=>{Qe(je,1,`climb-chip ${sa??""}`,"svelte-5f8qag"),v(aa,t(Se).name),v(Ca,t(Se).status)},[()=>le(t(Se).status)]),n(I,je)}),e(h),n(ye,h)};d(se,ye=>{t(ee).climbs&&t(ee).climbs.length>0&&ye(de)})}e(oe),u(()=>v(S,t(ee).name)),n(ke,oe)}),e(he),e(me),u(()=>{Ie(De,`width: ${(i.session.fingerLoad||0)*20}%`),Ie(Le,`width: ${(i.session.shoulderLoad||0)*20}%`),Ie(be,`width: ${(i.session.forearmLoad||0)*20}%`)}),Ye(3,me,()=>ea,()=>({duration:150})),n(V,me)};d(_,V=>{t(b)&&V(z)})}e(Z);var q=s(Z,2);Ya(q,{get isOpen(){return t(g)},title:"Delete Competition Session",message:"Are you sure you want to delete this session? This cannot be undone.",onConfirm:ae,onCancel:()=>r(g,!1)});var K=s(q,2);Ja(K,{get isOpen(){return t(y)},activityType:"competition",get initialData(){return i.session},onClose:m,onSaved:L}),u((V,me)=>{G=Qe(Z,1,"session-card svelte-5f8qag",null,G,{expanded:t(b)}),v(R,`${V??""} `),v(ve,i.session.type),v(O,i.session.venue==="Other"?i.session.customVenue:i.session.venue),v(f,me),Y=Qe(P,1,"sync-dot svelte-5f8qag",null,Y,{synced:i.session.syncStatus==="synced"}),Re(P,"title",i.session.syncStatus==="synced"?"Synced":"Local"),v(o,t(b)?"‚ñ≤":"‚ñº")},[()=>new Date(i.session.date).toLocaleDateString(void 0,{weekday:"short",month:"short",day:"numeric",year:"numeric"}),()=>J(i.session)]),n(xe,U),Ze()}We(["click","keydown"]);var Mn=l('<span class="spinner svelte-xyvf5r"></span> Fetching...',1),Pn=l('<div class="loading svelte-xyvf5r">Loading sessions...</div>'),An=l('<div class="empty-state svelte-xyvf5r">No competitions logged yet.</div>'),Bn=l('<div class="load-more-container svelte-xyvf5r"><button class="load-more-btn svelte-xyvf5r"> </button></div>'),In=l('<div class="timeline svelte-xyvf5r"><!> <!></div>'),Rn=l('<div class="view-content svelte-xyvf5r"><div class="header svelte-xyvf5r"><h3 class="svelte-xyvf5r">üèÜ Competition Log</h3> <button class="fetch-btn svelte-xyvf5r" title="Fetch data from cloud"><!></button></div> <!></div>');function Vn(xe,i){Je(i,!0);let b=D(da([])),g=D(!0),y=D(20);const k=20;async function c(){r(g,!0),r(y,k);try{const C=await pt();C.ok&&C.data&&r(b,C.data.map(j=>({...j,activityType:"competition",syncStatus:"synced",type:j.type,rounds:j.rounds.map(R=>({...R,climbs:R.climbs?.map(N=>({...N,status:N.status}))}))})).sort((j,R)=>new Date(R.date).getTime()-new Date(j.date).getTime()),!0)}catch(C){console.error("Failed to fetch sessions",C)}finally{r(g,!1)}}c();function T(){r(y,t(y)+k)}var m=Rn(),L=a(m),ae=s(a(L),2);ae.__click=c;var J=a(ae);{var le=C=>{var j=Mn();ka(),n(C,j)},U=C=>{var j=wa("‚òÅÔ∏è Fetch Data");n(C,j)};d(J,C=>{t(g)?C(le):C(U,!1)})}e(ae),e(L);var Z=s(L,2);{var G=C=>{var j=Pn();n(C,j)},ne=C=>{var j=Ae(),R=ze(j);{var N=ie=>{var ue=An();n(ie,ue)},ve=ie=>{var ue=In(),O=a(ue);qe(O,17,()=>t(b).slice(0,t(y)),Ee,(E,P)=>{On(E,{get session(){return t(P)}})});var H=s(O,2);{var f=E=>{var P=Bn(),Y=a(P);Y.__click=T;var p=a(Y);e(Y),e(P),u(()=>v(p,`Load More (${t(b).length-t(y)} remaining)`)),n(E,P)};d(H,E=>{t(y)<t(b).length&&E(f)})}e(ue),n(ie,ue)};d(R,ie=>{t(b).length===0?ie(N):ie(ve,!1)},!0)}n(C,j)};d(Z,C=>{t(g)&&t(b).length===0?C(G):C(ne,!1)})}e(m),u(()=>ae.disabled=t(g)),n(xe,m),Ze()}We(["click"]);var Un=l("<option> </option>"),Wn=l('<div class="view-container svelte-108px9u"><!></div>'),Hn=l('<div class="page svelte-108px9u"><div class="page-header svelte-108px9u"><div><h1 class="svelte-108px9u">üìä View Data</h1> <p class="subtitle svelte-108px9u">Browse your training history</p></div></div> <div class="content-card svelte-108px9u"><div class="form-group svelte-108px9u"><label for="activity-type" class="svelte-108px9u">Activity Type</label> <select id="activity-type" class="svelte-108px9u"><option disabled>Select an activity...</option><!></select></div> <!></div></div>');function sr(xe){const i=[{value:"indoor_climb",label:"Indoor Climb",icon:"üßó"},{value:"outdoor_climb",label:"Outdoor Climb",icon:"‚õ∞Ô∏è"},{value:"gym_session",label:"Gym Session",icon:"üèãÔ∏è"},{value:"fingerboarding",label:"Fingerboarding",icon:"ü§è"},{value:"competition",label:"Competition",icon:"üèÜ"}];let b=D("");var g=Hn(),y=s(a(g),2),k=a(y),c=s(a(k),2),T=a(c);T.value=T.__value="";var m=s(T);qe(m,17,()=>i,J=>J.value,(J,le)=>{var U=Un(),Z=a(U);e(U);var G={};u(()=>{v(Z,`${t(le).icon??""} ${t(le).label??""}`),G!==(G=t(le).value)&&(U.value=(U.__value=t(le).value)??"")}),n(J,U)}),e(c),e(k);var L=s(k,2);{var ae=J=>{var le=Wn(),U=a(le);{var Z=ne=>{Gs(ne,{})},G=ne=>{var C=Ae(),j=ze(C);{var R=ve=>{Pi(ve,{})},N=ve=>{var ie=Ae(),ue=ze(ie);{var O=f=>{fn(f,{})},H=f=>{var E=Ae(),P=ze(E);{var Y=w=>{Tn(w,{})},p=w=>{var A=Ae(),o=ze(A);{var _=z=>{Vn(z,{})};d(o,z=>{t(b)==="competition"&&z(_)},!0)}n(w,A)};d(P,w=>{t(b)==="fingerboarding"?w(Y):w(p,!1)},!0)}n(f,E)};d(ue,f=>{t(b)==="gym_session"?f(O):f(H,!1)},!0)}n(ve,ie)};d(j,ve=>{t(b)==="outdoor_climb"?ve(R):ve(N,!1)},!0)}n(ne,C)};d(U,ne=>{t(b)==="indoor_climb"?ne(Z):ne(G,!1)})}e(le),n(J,le)};d(L,J=>{t(b)&&J(ae)})}e(y),e(g),oa(c,()=>t(b),J=>r(b,J)),n(xe,g)}export{sr as component};
