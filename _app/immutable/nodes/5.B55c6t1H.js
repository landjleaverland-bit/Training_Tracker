import{f as v,a as i,c as Xe,t as Ot}from"../chunks/CSQvsE9s.js";import{p as mt,c as a,s,i as e,aV as h,r as t,t as g,a as bt,x as l,b0 as ta,f as Me,aG as jt,aW as ut,w as ot,o as oa,b8 as ca,d as ga}from"../chunks/DGPNV_z9.js";import{d as ft,s as o}from"../chunks/DSMXtqZM.js";import{i as c}from"../chunks/D9GEZg6r.js";import{s as rt,r as Ve,e as Ee,i as Ae,b as Ie,c as ua,d as ma}from"../chunks/_iMURHzE.js";import{t as et,l as lt,D as Kt,i as $t,u as pa,k as aa,m as ba,g as ha,b as ya,n as _a,o as xa,E as wa,p as Sa,q as ka,r as Da,v as Ta,f as qa,s as Ca}from"../chunks/B15gayJy.js";import{c as zt,n as sa,f as vt,o as Ut,m as ea,b as Ft,p as Zt,q as ra,t as na,v as va,w as La}from"../chunks/CuHccZ7x.js";import{s as dt}from"../chunks/Ct8JfZaa.js";import{p as ia}from"../chunks/Dd0awD9h.js";var za=v('<span class="chevron svelte-12crvy">‚ñ≤</span>'),Fa=v('<span class="chevron svelte-12crvy">‚ñº</span>'),Ea=v('<div class="input-with-action svelte-12crvy"><input type="text" id="location-manual" placeholder="Custom location..." class="flat-left svelte-12crvy"/> <button type="button" class="action-btn flat-right svelte-12crvy" title="Back to list">‚úï</button></div>'),Ga=v("<option> </option>"),Na=v('<select id="location-filter" class="svelte-12crvy"><option>Any Location</option><!></select>'),Aa=v("<option> </option>"),Oa=v("<option> </option>"),ja=v('<div class="filter-body svelte-12crvy"><div class="filter-grid svelte-12crvy"><div class="filter-item svelte-12crvy"><label for="start-date" class="svelte-12crvy">Start Date</label> <input type="date" id="start-date" class="svelte-12crvy"/></div> <div class="filter-item svelte-12crvy"><label for="end-date" class="svelte-12crvy">End Date</label> <input type="date" id="end-date" class="svelte-12crvy"/></div> <div class="filter-item svelte-12crvy"><label for="location-filter" class="svelte-12crvy">Location</label> <!></div> <div class="filter-item svelte-12crvy"><label for="climbing-type-filter" class="svelte-12crvy">Climb Type</label> <select id="climbing-type-filter" class="svelte-12crvy"><option>Any Type</option><!></select></div> <div class="filter-item svelte-12crvy"><label for="session-type-filter" class="svelte-12crvy">Session Type</label> <select id="session-type-filter" class="svelte-12crvy"><option>Any Type</option><!></select></div> <div class="filter-item svelte-12crvy"><label for="grade-filter" class="svelte-12crvy">Grade (Exact)</label> <input type="text" id="grade-filter" placeholder="e.g. V4" class="svelte-12crvy"/></div></div> <div class="filter-actions svelte-12crvy"><button class="reset-btn svelte-12crvy">Reset Filters</button></div></div>'),Ma=v('<div class="filter-container svelte-12crvy"><button class="filter-header svelte-12crvy"><div class="header-content svelte-12crvy"><span class="icon svelte-12crvy">üîç</span> <span class="title svelte-12crvy">Filters</span> <!></div></button> <!></div>');function Pa(ze,p){mt(p,!0);const r=["Rockstar Swindon","Flashpoint Swindon","Flashpoint Bristol","Redpoint Bristol","TCH Bristol","Other"],b=["Bouldering","Sport","Mixed"],q=["Projecting","Onsighting","Campusing","Repeaters"];let T=h(!1),m=h(""),C=h(""),w=h(""),W=h(""),re=h(""),ue=h(""),Te=h(!1);function ee(){l(T,!e(T))}function se(){l(m,""),l(C,""),l(w,""),l(W,""),l(Te,!1),l(re,""),l(ue,""),z()}function z(){p.onFilterParamsChange({startDate:e(m),endDate:e(C),location:e(w),climbingType:e(W),sessionType:e(re),grade:e(ue)})}function ve(){e(w)==="Other"?(l(Te,!0),l(w,"")):z()}function ge(){l(Te,!1),l(w,""),z()}var de=Ma(),P=a(de);P.__click=ee;var le=a(P),xe=s(a(le),4);{var qe=L=>{var Z=za();i(L,Z)},ie=L=>{var Z=Fa();i(L,Z)};c(xe,L=>{e(T)?L(qe):L(ie,!1)})}t(le),t(P);var F=s(P,2);{var B=L=>{var Z=ja(),K=a(Z),Q=a(K),oe=s(a(Q),2);Ve(oe),oe.__change=z,t(Q);var te=s(Q,2),y=s(a(te),2);Ve(y),y.__change=z,t(te);var d=s(te,2),u=s(a(d),2);{var n=Y=>{var N=Ea(),X=a(N);Ve(X),X.__input=z;var Ce=s(X,2);Ce.__click=ge,t(N),Ie(X,()=>e(w),Le=>l(w,Le)),i(Y,N)},_=Y=>{var N=Na();N.__change=ve;var X=a(N);X.value=X.__value="";var Ce=s(X);Ee(Ce,17,()=>r,Ae,(Le,fe)=>{var me=Ga(),U=a(me,!0);t(me);var be={};g(()=>{o(U,e(fe)),be!==(be=e(fe))&&(me.value=(me.__value=e(fe))??"")}),i(Le,me)}),t(N),zt(N,()=>e(w),Le=>l(w,Le)),i(Y,N)};c(u,Y=>{e(Te)?Y(n):Y(_,!1)})}t(d);var S=s(d,2),V=s(a(S),2);V.__change=z;var ne=a(V);ne.value=ne.__value="";var A=s(ne);Ee(A,17,()=>b,Ae,(Y,N)=>{var X=Aa(),Ce=a(X,!0);t(X);var Le={};g(()=>{o(Ce,e(N)),Le!==(Le=e(N))&&(X.value=(X.__value=e(N))??"")}),i(Y,X)}),t(V),t(S);var he=s(S,2),ce=s(a(he),2);ce.__change=z;var Se=a(ce);Se.value=Se.__value="";var k=s(Se);Ee(k,17,()=>q,Ae,(Y,N)=>{var X=Oa(),Ce=a(X,!0);t(X);var Le={};g(()=>{o(Ce,e(N)),Le!==(Le=e(N))&&(X.value=(X.__value=e(N))??"")}),i(Y,X)}),t(ce),t(he);var ae=s(he,2),O=s(a(ae),2);Ve(O),O.__input=z,t(ae),t(K);var pe=s(K,2),ke=a(pe);ke.__click=se,t(pe),t(Z),Ie(oe,()=>e(m),Y=>l(m,Y)),Ie(y,()=>e(C),Y=>l(C,Y)),zt(V,()=>e(W),Y=>l(W,Y)),zt(ce,()=>e(re),Y=>l(re,Y)),Ie(O,()=>e(ue),Y=>l(ue,Y)),et(3,Z,()=>lt,()=>({duration:200})),i(L,Z)};c(F,L=>{e(T)&&L(B)})}t(de),g(()=>rt(P,"aria-expanded",e(T))),i(ze,de),bt()}ft(["click","change","input"]);var Ia=v('<label class="type-toggle svelte-yz0xxt"><input type="checkbox"/> <span>Sport?</span></label>'),Ra=v("<option> </option>"),Ba=v('<div class="edit-form svelte-yz0xxt"><div class="edit-row main svelte-yz0xxt"><input type="text" class="edit-input grade svelte-yz0xxt" placeholder="Grade"/> <input type="text" class="edit-input name svelte-yz0xxt" placeholder="Route Name"/> <!></div> <div class="edit-row meta svelte-yz0xxt"><select class="edit-select svelte-yz0xxt"></select> <div class="attempts-input-wrapper svelte-yz0xxt"><span>#</span> <input type="number" min="1" class="edit-input num svelte-yz0xxt"/></div></div> <div class="edit-row notes svelte-yz0xxt"><textarea class="edit-input notes-area svelte-yz0xxt" placeholder="Notes..."></textarea></div> <div class="edit-actions svelte-yz0xxt"><button class="action-btn cancel svelte-yz0xxt">Cancel</button> <button class="action-btn save svelte-yz0xxt">Save</button></div></div>'),Va=v('<span class="climb-type-tag svelte-yz0xxt"> </span>'),Ua=v('<span class="notes-preview svelte-yz0xxt"> </span>'),Wa=v('<span class="wall-tag svelte-yz0xxt"> </span>'),Ha=v('<span class="technique-tag svelte-yz0xxt"> </span>'),Ya=v('<span class="attempts-count svelte-yz0xxt"> </span>'),Ja=v('<div class="detail-row svelte-yz0xxt"><span class="label svelte-yz0xxt">Notes:</span> <p class="notes svelte-yz0xxt"> </p></div>'),Za=v('<p class="empty-notes svelte-yz0xxt">No notes for this climb.</p>'),Ka=v('<div class="climb-details svelte-yz0xxt"><!> <div class="tags svelte-yz0xxt"><span class="tag type svelte-yz0xxt"> </span> <span class="tag attempt-text svelte-yz0xxt"> </span></div></div>'),Xa=v('<div class="climb-header svelte-yz0xxt" role="button" tabindex="0"><div class="climb-main-info svelte-yz0xxt"><span> </span> <span class="climb-name svelte-yz0xxt"> </span> <!> <!> <!> <!></div> <div class="climb-meta svelte-yz0xxt"><span><span class="icon svelte-yz0xxt"> </span> <!></span> <button class="icon-btn edit-btn svelte-yz0xxt" aria-label="Edit climb" title="Edit climb">‚úé</button> <button class="icon-btn delete-btn svelte-yz0xxt" aria-label="Delete climb" title="Delete climb">üóëÔ∏è</button> <span class="chevron svelte-yz0xxt"> </span></div></div> <!>',1),Qa=v("<div><!></div>");function $a(ze,p){mt(p,!0);let r=ia(p,"showClimbType",3,!1),b=h(!1),q=h(!1),T=h(""),m=h(""),C=h(""),w=h(1),W=h(""),re=h(!1);function ue(){e(q)||l(b,!e(b))}function Te(F){F.stopPropagation(),p.onDelete()}function ee(F){F.stopPropagation(),l(T,p.climb.name,!0),l(m,p.climb.grade,!0),l(C,p.climb.attemptType,!0),l(w,p.climb.attemptsNum,!0),l(W,p.climb.notes,!0),l(re,p.climb.isSport,!0),l(q,!0),l(b,!0)}function se(F){F.stopPropagation(),l(q,!1)}function z(F){F.stopPropagation();const B={...p.climb,name:e(T),grade:e(m),attemptType:e(C),attemptsNum:e(w),notes:e(W),isSport:e(re)};p.onUpdate(B),l(q,!1)}function ve(){(e(C)==="Flash"||e(C)==="Onsight")&&l(w,1)}const ge={Flash:"‚ö°",Onsight:"üëÅÔ∏è",Redpoint:"üî¥",Dogged:"üõ†Ô∏è",DNF:"‚ùå"},de=["Flash","Onsight","Redpoint","Dogged","DNF"];var P=Qa();let le;var xe=a(P);{var qe=F=>{var B=Ba(),L=a(B),Z=a(L);Ve(Z);var K=s(Z,2);Ve(K);var Q=s(K,2);{var oe=A=>{var he=Ia(),ce=a(he);Ve(ce),jt(2),t(he),ua(ce,()=>e(re),Se=>l(re,Se)),i(A,he)};c(Q,A=>{r()&&A(oe)})}t(L);var te=s(L,2),y=a(te);y.__change=ve,Ee(y,21,()=>de,Ae,(A,he)=>{var ce=Ra(),Se=a(ce,!0);t(ce);var k={};g(()=>{o(Se,e(he)),k!==(k=e(he))&&(ce.value=(ce.__value=e(he))??"")}),i(A,ce)}),t(y);var d=s(y,2),u=s(a(d),2);Ve(u),t(d),t(te);var n=s(te,2),_=a(n);ta(_),t(n);var S=s(n,2),V=a(S);V.__click=se;var ne=s(V,2);ne.__click=z,t(S),t(B),g(()=>u.disabled=e(C)==="Flash"||e(C)==="Onsight"),Ie(Z,()=>e(m),A=>l(m,A)),Ie(K,()=>e(T),A=>l(T,A)),zt(y,()=>e(C),A=>l(C,A)),Ie(u,()=>e(w),A=>l(w,A)),Ie(_,()=>e(W),A=>l(W,A)),i(F,B)},ie=F=>{var B=Xa(),L=Me(B);L.__click=ue,L.__keydown=fe=>(fe.key==="Enter"||fe.key===" ")&&ue();var Z=a(L),K=a(Z);let Q;var oe=a(K,!0);t(K);var te=s(K,2),y=a(te,!0);t(te);var d=s(te,2);{var u=fe=>{var me=Va(),U=a(me,!0);t(me),g(()=>o(U,p.climb.isSport?"Sport":"Boulder")),i(fe,me)};c(d,fe=>{r()&&fe(u)})}var n=s(d,2);{var _=fe=>{var me=Ua(),U=a(me);t(me),g(()=>o(U,`- ${p.climb.notes??""}`)),i(fe,me)};c(n,fe=>{!e(b)&&p.climb.notes&&fe(_)})}var S=s(n,2);{var V=fe=>{var me=Wa(),U=a(me,!0);t(me),g(()=>o(U,p.climb.wall)),i(fe,me)};c(S,fe=>{p.climb.wall&&fe(V)})}var ne=s(S,2);{var A=fe=>{var me=Ha(),U=a(me,!0);t(me),g(()=>o(U,p.climb.techniqueFocus)),i(fe,me)};c(ne,fe=>{p.climb.techniqueFocus&&fe(A)})}t(Z);var he=s(Z,2),ce=a(he);let Se;var k=a(ce),ae=a(k,!0);t(k);var O=s(k,2);{var pe=fe=>{var me=Ya(),U=a(me,!0);t(me),g(()=>o(U,p.climb.attemptsNum)),i(fe,me)};c(O,fe=>{p.climb.attemptType!=="Flash"&&p.climb.attemptType!=="Onsight"&&fe(pe)})}t(ce);var ke=s(ce,2);ke.__click=ee;var Y=s(ke,2);Y.__click=Te;var N=s(Y,2),X=a(N,!0);t(N),t(he),t(L);var Ce=s(L,2);{var Le=fe=>{var me=Ka(),U=a(me);{var be=x=>{var j=Ja(),Fe=s(a(j),2),Pe=a(Fe,!0);t(Fe),t(j),g(()=>o(Pe,p.climb.notes)),i(x,j)},ye=x=>{var j=Za();i(x,j)};c(U,x=>{p.climb.notes?x(be):x(ye,!1)})}var H=s(U,2),I=a(H),we=a(I,!0);t(I);var De=s(I,2),E=a(De,!0);t(De),t(H),t(me),g(()=>{o(we,p.climb.isSport?"Sport":"Boulder"),o(E,p.climb.attemptType)}),et(3,me,()=>lt,()=>({duration:150})),i(fe,me)};c(Ce,fe=>{e(b)&&fe(Le)})}g(()=>{rt(L,"aria-expanded",e(b)),Q=dt(K,1,"grade-badge svelte-yz0xxt",null,Q,{sport:p.climb.isSport}),o(oe,p.climb.grade),o(y,p.climb.name||"Unnamed Route"),Se=dt(ce,1,"attempt-type svelte-yz0xxt",null,Se,{flash:p.climb.attemptType==="Flash"}),o(ae,ge[p.climb.attemptType]||p.climb.attemptType),o(X,e(b)?"‚ñ≤":"‚ñº")}),i(F,B)};c(xe,F=>{e(q)?F(qe):F(ie,!1)})}t(P),g(()=>le=dt(P,1,"climb-entry svelte-yz0xxt",null,le,{expanded:e(b),editing:e(q)})),i(ze,P),bt()}ft(["change","click","keydown"]);var es=v('<span class="stat svelte-7vqogn"> </span>'),ts=v('<span class="status-icon pending svelte-7vqogn" title="Waiting to sync">üîÑ</span>'),as=v('<span class="status-icon error svelte-7vqogn" title="Sync error">‚ö†Ô∏è</span>'),ss=v('<span class="chip svelte-7vqogn"> </span>'),rs=v('<span class="text-none svelte-7vqogn">None</span>'),is=v('<div class="detail-item svelte-7vqogn"><span class="label svelte-7vqogn">Difficulty</span> <span class="value svelte-7vqogn"> </span></div>'),ls=v('<span class="chip svelte-7vqogn"> </span>'),ns=v('<span class="text-none svelte-7vqogn">None</span>'),vs=v('<div class="detail-item svelte-7vqogn"><span class="label svelte-7vqogn">Category</span> <div class="value-chips svelte-7vqogn"><!></div></div>'),os=v('<span class="chip svelte-7vqogn"> </span>'),ds=v('<span class="text-none svelte-7vqogn">None</span>'),cs=v('<div class="detail-item svelte-7vqogn"><span class="label svelte-7vqogn">Energy System</span> <div class="value-chips svelte-7vqogn"><!></div></div>'),ps=v('<span class="chip svelte-7vqogn"> </span>'),_s=v('<span class="text-none svelte-7vqogn">None</span>'),us=v('<div class="detail-item svelte-7vqogn"><span class="label svelte-7vqogn">Wall</span> <div class="value-chips svelte-7vqogn"><!></div></div>'),fs=v('<button class="icon-btn edit-notes-btn svelte-7vqogn" title="Edit Notes">‚úé</button>'),gs=v('<div class="edit-notes-area"><textarea placeholder="Add session notes..." rows="3" class="notes-editor svelte-7vqogn"></textarea> <div class="edit-actions svelte-7vqogn"><button class="cancel-btn svelte-7vqogn">Cancel</button> <button class="save-btn svelte-7vqogn"> </button></div></div>'),ms=v('<p class="notes-text svelte-7vqogn"> </p>'),bs=v('<p class="notes-placeholder svelte-7vqogn">No notes.</p>'),hs=v('<div class="metric svelte-7vqogn"><span class="label svelte-7vqogn">Open Grip</span> <div class="bar-container svelte-7vqogn"><div class="bar-fill svelte-7vqogn"></div></div> <span class="score svelte-7vqogn"> </span></div>'),ys=v('<div class="metric svelte-7vqogn"><span class="label svelte-7vqogn">Crimp Grip</span> <div class="bar-container svelte-7vqogn"><div class="bar-fill svelte-7vqogn"></div></div> <span class="score svelte-7vqogn"> </span></div>'),xs=v('<div class="metric svelte-7vqogn"><span class="label svelte-7vqogn">Pinch Grip</span> <div class="bar-container svelte-7vqogn"><div class="bar-fill svelte-7vqogn"></div></div> <span class="score svelte-7vqogn"> </span></div>'),ws=v('<div class="metric svelte-7vqogn"><span class="label svelte-7vqogn">Sloper Grip</span> <div class="bar-container svelte-7vqogn"><div class="bar-fill svelte-7vqogn"></div></div> <span class="score svelte-7vqogn"> </span></div>'),Ss=v('<div class="metric svelte-7vqogn"><span class="label svelte-7vqogn">Jug Grip</span> <div class="bar-container svelte-7vqogn"><div class="bar-fill svelte-7vqogn"></div></div> <span class="score svelte-7vqogn"> </span></div>'),ks=v('<p class="no-climbs svelte-7vqogn">No climbs logged for this session.</p>'),Ds=v('<div class="card-body svelte-7vqogn"><div class="details-grid svelte-7vqogn"><div class="detail-item svelte-7vqogn"><span class="label svelte-7vqogn">Training Type</span> <div class="value-chips svelte-7vqogn"><!></div></div> <!> <!> <!> <!></div> <div class="notes-container svelte-7vqogn"><div class="notes-header svelte-7vqogn"><span class="label svelte-7vqogn">Session Notes</span> <!></div> <!></div> <div class="metrics-container svelte-7vqogn"><div class="metric svelte-7vqogn"><span class="label svelte-7vqogn">Finger Load</span> <div class="bar-container svelte-7vqogn"><div class="bar-fill svelte-7vqogn"></div></div> <span class="score svelte-7vqogn"> </span></div> <div class="metric svelte-7vqogn"><span class="label svelte-7vqogn">Shoulder Load</span> <div class="bar-container svelte-7vqogn"><div class="bar-fill svelte-7vqogn"></div></div> <span class="score svelte-7vqogn"> </span></div> <div class="metric svelte-7vqogn"><span class="label svelte-7vqogn">Forearm Load</span> <div class="bar-container svelte-7vqogn"><div class="bar-fill svelte-7vqogn"></div></div> <span class="score svelte-7vqogn"> </span></div> <!> <!> <!> <!> <!></div> <div class="climbs-list svelte-7vqogn"><h4 class="svelte-7vqogn">Climbs</h4> <div class="climbs-container svelte-7vqogn"><!> <!></div></div></div>'),Ts=v('<div><div class="card-header svelte-7vqogn" role="button" tabindex="0"><div class="header-main svelte-7vqogn"><div class="date-badge svelte-7vqogn"><span class="day svelte-7vqogn"> </span> <span class="month svelte-7vqogn"> </span> <span class="year svelte-7vqogn"> </span></div> <div class="session-info svelte-7vqogn"><div class="session-text svelte-7vqogn"><h3 class="location svelte-7vqogn"> </h3> <div class="session-meta svelte-7vqogn"><span class="type-tag svelte-7vqogn"> </span> <span class="stat svelte-7vqogn"> </span> <!></div></div> <div class="load-summary svelte-7vqogn"><div class="load-badge finger svelte-7vqogn"> </div> <div class="load-badge shoulder svelte-7vqogn"> </div> <div class="load-badge forearm svelte-7vqogn"> </div></div></div></div> <div class="header-actions"><div class="header-status svelte-7vqogn"><!></div>  <button class="btn-icon delete-session" title="Delete Session">üóëÔ∏è</button> <span class="chevron svelte-7vqogn"> </span></div></div> <!> <!></div>');function qs(ze,p){mt(p,!0);let r=ia(p,"session",7),b=h(!1),q=h(!1);function T(){l(b,!e(b))}function m(){l(q,!0)}function C(){sa(r().id),l(q,!1),p.onDelete()}function w(H){const I=[...r().climbs];I.splice(H,1),Ut(r().id,{climbs:I}),p.onDelete()}function W(H,I){const we=[...r().climbs];we[H]=I,re(we)}async function re(H){if(Ut(r().id,{climbs:H}),r().climbs=H,$t()){const I={date:r().date,location:r().location,customLocation:r().customLocation,climbingType:r().climbingType,trainingTypes:r().trainingTypes||[],difficulty:r().difficulty,categories:r().categories||[],energySystems:r().energySystems||[],wallAngles:r().wallAngles||[],fingerLoad:r().fingerLoad,shoulderLoad:r().shoulderLoad,forearmLoad:r().forearmLoad,openGrip:r().openGrip,crimpGrip:r().crimpGrip,pinchGrip:r().pinchGrip,sloperGrip:r().sloperGrip,jugGrip:r().jugGrip,climbs:H};try{const we=await pa(r().id,I);we.ok?(ea(r().id),r().syncStatus="synced"):(console.error("Failed to sync update:",we.error),Ft(r().id),r().syncStatus="error")}catch(we){console.error("Exception syncing update:",we),Ft(r().id),r().syncStatus="error"}}}let ue=ut(()=>r().climbs?.length??0),Te=ut(()=>(r().climbs||[]).reduce((H,I)=>{const we=parseInt(I.grade.replace(/\D/g,""))||0,De=parseInt(H.replace(/\D/g,""))||0;return we>De?I.grade:H},"V0")),ee=h(!1),se=h(""),z=h(!1);function ve(){l(se,r().notes||"",!0),l(ee,!0)}function ge(){l(ee,!1),l(se,"")}async function de(){if(!e(z)){if(l(z,!0),r().notes,r().notes=e(se),Ut(r().id,{notes:e(se)}),$t()){const H={date:r().date,location:r().location,customLocation:r().customLocation,climbingType:r().climbingType,trainingTypes:r().trainingTypes||[],difficulty:r().difficulty,categories:r().categories||[],energySystems:r().energySystems||[],wallAngles:r().wallAngles||[],fingerLoad:r().fingerLoad,shoulderLoad:r().shoulderLoad,forearmLoad:r().forearmLoad,openGrip:r().openGrip,crimpGrip:r().crimpGrip,pinchGrip:r().pinchGrip,sloperGrip:r().sloperGrip,jugGrip:r().jugGrip,climbs:r().climbs,notes:e(se)};try{const I=await pa(r().id,H);I.ok?(ea(r().id),r().syncStatus="synced"):(console.error("Failed to sync note update:",I.error),Ft(r().id),r().syncStatus="error")}catch(I){console.error("Exception syncing note update:",I),Ft(r().id),r().syncStatus="error"}}l(ee,!1),l(z,!1)}}var P=Ts();let le;var xe=a(P);xe.__click=T,xe.__keydown=H=>H.key==="Enter"&&T();var qe=a(xe),ie=a(qe),F=a(ie),B=a(F,!0);t(F);var L=s(F,2),Z=a(L,!0);t(L);var K=s(L,2),Q=a(K,!0);t(K),t(ie);var oe=s(ie,2),te=a(oe),y=a(te),d=a(y,!0);t(y);var u=s(y,2),n=a(u),_=a(n,!0);t(n);var S=s(n,2),V=a(S);t(S);var ne=s(S,2);{var A=H=>{var I=es(),we=a(I);t(I),g(()=>o(we,`Max: ${e(Te)??""}`)),i(H,I)};c(ne,H=>{e(ue)>0&&H(A)})}t(u),t(te);var he=s(te,2),ce=a(he),Se=a(ce,!0);t(ce);var k=s(ce,2),ae=a(k,!0);t(k);var O=s(k,2),pe=a(O,!0);t(O),t(he),t(oe),t(qe);var ke=s(qe,2),Y=a(ke),N=a(Y);{var X=H=>{var I=ts();i(H,I)},Ce=H=>{var I=Xe(),we=Me(I);{var De=E=>{var x=as();i(E,x)};c(we,E=>{r().syncStatus==="error"&&E(De)},!0)}i(H,I)};c(N,H=>{r().syncStatus==="pending"?H(X):H(Ce,!1)})}t(Y);var Le=s(Y,2);Le.__click=H=>{H.stopPropagation(),m()};var fe=s(Le,2),me=a(fe,!0);t(fe),t(ke),t(xe);var U=s(xe,2);{var be=H=>{var I=Ds(),we=a(I),De=a(we),E=s(a(De),2),x=a(E);{var j=R=>{var M=Xe(),f=Me(M);Ee(f,17,()=>r().trainingTypes,Ae,(D,G)=>{var $=ss(),J=a($,!0);t($),g(()=>o(J,e(G))),i(D,$)}),i(R,M)},Fe=R=>{var M=rs();i(R,M)};c(x,R=>{r().trainingTypes&&r().trainingTypes.length>0&&!r().trainingTypes.includes("None")?R(j):R(Fe,!1)})}t(E),t(De);var Pe=s(De,2);{var Oe=R=>{var M=is(),f=s(a(M),2),D=a(f,!0);t(f),t(M),g(()=>o(D,r().difficulty)),i(R,M)};c(Pe,R=>{r().difficulty&&R(Oe)})}var Qe=s(Pe,2);{var He=R=>{var M=vs(),f=s(a(M),2),D=a(f);{var G=J=>{var _e=Xe(),je=Me(_e);Ee(je,17,()=>r().categories,Ae,($e,Nt)=>{var _t=ls(),At=a(_t,!0);t(_t),g(()=>o(At,e(Nt))),i($e,_t)}),i(J,_e)},$=J=>{var _e=ns();i(J,_e)};c(D,J=>{r().categories.length>0&&!r().categories.includes("None")?J(G):J($,!1)})}t(f),t(M),i(R,M)};c(Qe,R=>{r().categories?.length&&R(He)})}var Ye=s(Qe,2);{var Tt=R=>{var M=cs(),f=s(a(M),2),D=a(f);{var G=J=>{var _e=Xe(),je=Me(_e);Ee(je,17,()=>r().energySystems,Ae,($e,Nt)=>{var _t=os(),At=a(_t,!0);t(_t),g(()=>o(At,e(Nt))),i($e,_t)}),i(J,_e)},$=J=>{var _e=ds();i(J,_e)};c(D,J=>{r().energySystems.length>0&&!r().energySystems.includes("None")?J(G):J($,!1)})}t(f),t(M),i(R,M)};c(Ye,R=>{r().energySystems?.length&&R(Tt)})}var ht=s(Ye,2);{var qt=R=>{var M=us(),f=s(a(M),2),D=a(f);{var G=J=>{var _e=Xe(),je=Me(_e);Ee(je,17,()=>r().wallAngles,Ae,($e,Nt)=>{var _t=ps(),At=a(_t,!0);t(_t),g(()=>o(At,e(Nt))),i($e,_t)}),i(J,_e)},$=J=>{var _e=_s();i(J,_e)};c(D,J=>{r().wallAngles.length>0&&!r().wallAngles.includes("None")?J(G):J($,!1)})}t(f),t(M),i(R,M)};c(ht,R=>{r().wallAngles?.length&&R(qt)})}t(we);var yt=s(we,2),Ct=a(yt),St=s(a(Ct),2);{var nt=R=>{var M=fs();M.__click=ve,i(R,M)};c(St,R=>{e(ee)||R(nt)})}t(Ct);var Je=s(Ct,2);{var Re=R=>{var M=gs(),f=a(M);ta(f);var D=s(f,2),G=a(D);G.__click=ge;var $=s(G,2);$.__click=de;var J=a($,!0);t($),t(D),t(M),g(()=>{G.disabled=e(z),$.disabled=e(z),o(J,e(z)?"Saving...":"Save")}),Ie(f,()=>e(se),_e=>l(se,_e)),et(3,M,()=>lt,()=>({duration:150})),i(R,M)},gt=R=>{var M=Xe(),f=Me(M);{var D=$=>{var J=ms(),_e=a(J,!0);t(J),g(()=>o(_e,r().notes)),i($,J)},G=$=>{var J=bs();i($,J)};c(f,$=>{r().notes?$(D):$(G,!1)},!0)}i(R,M)};c(Je,R=>{e(ee)?R(Re):R(gt,!1)})}t(yt);var tt=s(yt,2),xt=a(tt),at=s(a(xt),2),Ge=a(at);t(at);var Ne=s(at,2),Ze=a(Ne);t(Ne),t(xt);var Ue=s(xt,2),st=s(a(Ue),2),Be=a(st);t(st);var We=s(st,2),ct=a(We);t(We),t(Ue);var kt=s(Ue,2),Dt=s(a(kt),2),Lt=a(Dt);t(Dt);var Ke=s(Dt,2),it=a(Ke);t(Ke),t(kt);var wt=s(kt,2);{var It=R=>{var M=hs(),f=s(a(M),2),D=a(f);t(f);var G=s(f,2),$=a(G);t(G),t(M),g(()=>{vt(D,`width: ${r().openGrip/5*100}%`),o($,`${r().openGrip??""}/5`)}),i(R,M)};c(wt,R=>{r().openGrip&&R(It)})}var pt=s(wt,2);{var Wt=R=>{var M=ys(),f=s(a(M),2),D=a(f);t(f);var G=s(f,2),$=a(G);t(G),t(M),g(()=>{vt(D,`width: ${r().crimpGrip/5*100}%`),o($,`${r().crimpGrip??""}/5`)}),i(R,M)};c(pt,R=>{r().crimpGrip&&R(Wt)})}var Et=s(pt,2);{var Rt=R=>{var M=xs(),f=s(a(M),2),D=a(f);t(f);var G=s(f,2),$=a(G);t(G),t(M),g(()=>{vt(D,`width: ${r().pinchGrip/5*100}%`),o($,`${r().pinchGrip??""}/5`)}),i(R,M)};c(Et,R=>{r().pinchGrip&&R(Rt)})}var Gt=s(Et,2);{var Xt=R=>{var M=ws(),f=s(a(M),2),D=a(f);t(f);var G=s(f,2),$=a(G);t(G),t(M),g(()=>{vt(D,`width: ${r().sloperGrip/5*100}%`),o($,`${r().sloperGrip??""}/5`)}),i(R,M)};c(Gt,R=>{r().sloperGrip&&R(Xt)})}var Ht=s(Gt,2);{var Qt=R=>{var M=Ss(),f=s(a(M),2),D=a(f);t(f);var G=s(f,2),$=a(G);t(G),t(M),g(()=>{vt(D,`width: ${r().jugGrip/5*100}%`),o($,`${r().jugGrip??""}/5`)}),i(R,M)};c(Ht,R=>{r().jugGrip&&R(Qt)})}t(tt);var Bt=s(tt,2),Mt=s(a(Bt),2),Pt=a(Mt);Ee(Pt,17,()=>r().climbs||[],Ae,(R,M,f)=>{{let D=ut(()=>r().climbingType==="Mixed");$a(R,{get climb(){return e(M)},onDelete:()=>w(f),onUpdate:G=>W(f,G),get showClimbType(){return e(D)}})}});var Yt=s(Pt,2);{var Jt=R=>{var M=ks();i(R,M)};c(Yt,R=>{(r().climbs||[]).length===0&&R(Jt)})}t(Mt),t(Bt),t(I),g(()=>{vt(Ge,`width: ${r().fingerLoad/5*100}%`),o(Ze,`${r().fingerLoad??""}/5`),vt(Be,`width: ${r().shoulderLoad/5*100}%`),o(ct,`${r().shoulderLoad??""}/5`),vt(Lt,`width: ${r().forearmLoad/5*100}%`),o(it,`${r().forearmLoad??""}/5`)}),et(3,I,()=>lt,()=>({duration:150})),i(H,I)};c(U,H=>{e(b)&&H(be)})}var ye=s(U,2);Kt(ye,{get isOpen(){return e(q)},title:"Delete Session",message:"Are you sure you want to delete this session? This action cannot be undone.",onConfirm:C,onCancel:()=>l(q,!1)}),t(P),g((H,I,we)=>{le=dt(P,1,"session-card svelte-7vqogn",null,le,{expanded:e(b)}),rt(xe,"aria-expanded",e(b)),o(B,H),o(Z,I),o(Q,we),o(d,r().location),o(_,r().climbingType),o(V,`${e(ue)??""} climbs`),rt(ce,"title",`Finger Load: ${r().fingerLoad??""}`),o(Se,r().fingerLoad),rt(k,"title",`Shoulder Load: ${r().shoulderLoad??""}`),o(ae,r().shoulderLoad),rt(O,"title",`Forearm Load: ${r().forearmLoad??""}`),o(pe,r().forearmLoad),o(me,e(b)?"‚ñ≤":"‚ñº")},[()=>new Date(r().date).getDate(),()=>new Date(r().date).toLocaleDateString("en-GB",{month:"short"}),()=>new Date(r().date).getFullYear()]),i(ze,P),bt()}ft(["click","keydown"]);var Cs=v('<div class="legend-item svelte-11p9lqi"><span class="l-icon svelte-11p9lqi"> </span> <span class="l-label svelte-11p9lqi"> </span></div>'),Ls=v('<div class="legend-content svelte-11p9lqi"><div class="legend-grid svelte-11p9lqi"></div></div>'),zs=v('<div class="legend-container svelte-11p9lqi"><button class="legend-toggle svelte-11p9lqi"><span class="icon">‚ÑπÔ∏è</span> <span class="text">Icon Legend</span> <span class="chevron svelte-11p9lqi"> </span></button> <!></div>');function fa(ze){let p=h(!1);const r=[{icon:"üëÅÔ∏è",label:"Onsight"},{icon:"‚ö°",label:"Flash"},{icon:"üî¥",label:"Redpoint"},{icon:"üõ†Ô∏è",label:"Dogged"},{icon:"‚ùå",label:"DNF"}];var b=zs(),q=a(b);q.__click=()=>l(p,!e(p));var T=s(a(q),4),m=a(T,!0);t(T),t(q);var C=s(q,2);{var w=W=>{var re=Ls(),ue=a(re);Ee(ue,21,()=>r,Ae,(Te,ee)=>{var se=Cs(),z=a(se),ve=a(z,!0);t(z);var ge=s(z,2),de=a(ge,!0);t(ge),t(se),g(()=>{o(ve,e(ee).icon),o(de,e(ee).label)}),i(Te,se)}),t(ue),t(re),et(3,re,()=>lt),i(W,re)};c(C,W=>{e(p)&&W(w)})}t(b),g(()=>{rt(q,"aria-expanded",e(p)),o(m,e(p)?"‚ñº":"‚ñ∂")}),i(ze,b)}ft(["click"]);function da(ze,p){if(!ze||ze.length===0){alert("No data to export");return}const r=Array.from(new Set(ze.flatMap(Object.keys))),b=[r.join(","),...ze.map(m=>r.map(C=>{let w=m[C];if(w==null)return"";if(typeof w=="object"){if(w instanceof Date)return w.toISOString();w=JSON.stringify(w).replace(/"/g,'""')}else typeof w=="string"&&(w=w.replace(/"/g,'""'));return typeof w=="string"&&(w.includes(",")||w.includes('"')||w.includes(`
`))?`"${w}"`:w}).join(","))].join(`
`),q=new Blob([b],{type:"text/csv;charset=utf-8;"}),T=document.createElement("a");if(T.download!==void 0){const m=URL.createObjectURL(q);T.setAttribute("href",m),T.setAttribute("download",p.endsWith(".csv")?p:`${p}.csv`),T.style.visibility="hidden",document.body.appendChild(T),T.click(),document.body.removeChild(T)}}var Fs=v('<span class="spinner svelte-14fqz8w"></span> Fetching...',1),Es=v('<div class="error-banner svelte-14fqz8w"> </div>'),Gs=v('<small class="svelte-14fqz8w">Try adjusting your filters.</small>'),Ns=v('<div class="empty-state svelte-14fqz8w"><p class="svelte-14fqz8w">No indoor climbing sessions found.</p> <!></div>'),As=v('<div class="load-more-container svelte-14fqz8w"><button class="load-more-btn svelte-14fqz8w"> </button></div>'),Os=v('<div class="view-container svelte-14fqz8w"><div class="view-header svelte-14fqz8w"><h2 class="view-title svelte-14fqz8w">üßó Indoor Climbing History</h2> <div class="header-actions svelte-14fqz8w"><button class="action-btn secondary svelte-14fqz8w" title="Export filtered data to CSV">üì• Export</button> <button class="action-btn svelte-14fqz8w" title="Fetch data from cloud"><!></button></div></div> <!> <!> <div class="info-bar svelte-14fqz8w"><div class="legend-wrapper svelte-14fqz8w"><!></div> <div class="load-key svelte-14fqz8w"><span class="key-label svelte-14fqz8w">Load:</span> <div class="key-item svelte-14fqz8w"><span class="dot finger svelte-14fqz8w"></span> Finger</div> <div class="key-item svelte-14fqz8w"><span class="dot shoulder svelte-14fqz8w"></span> Shoulder</div> <div class="key-item svelte-14fqz8w"><span class="dot forearm svelte-14fqz8w"></span> Forearm</div></div></div> <div class="sessions-list"><!> <!> <!></div></div>');function js(ze,p){mt(p,!0);let r=h(ot([])),b=h(ot([])),q=h(!1),T=h(""),m=h(ot({startDate:"",endDate:"",location:"",climbingType:"",sessionType:"",grade:""})),C=h(20);const w=20;oa(()=>{W()});function W(){const n=Zt("indoor_climb");l(r,n.sort((_,S)=>new Date(S.date).getTime()-new Date(_.date).getTime()),!0),ee()}async function re(){l(q,!0),l(T,"");try{await aa();const n=await ba();n.ok&&n.data?ue(n.data):l(T,n.error||"Failed to fetch data",!0)}catch(n){l(T,n instanceof Error?n.message:"Unknown error",!0)}finally{l(q,!1)}}function ue(n){const _=n.map(V=>({...V,activityType:"indoor_climb",createdAt:new Date().toISOString(),updatedAt:new Date().toISOString(),syncStatus:"synced",syncedAt:new Date().toISOString(),openGrip:0,crimpGrip:0,pinchGrip:0,sloperGrip:0,jugGrip:0}));ra(_);const S=Zt("indoor_climb");l(r,S.sort((V,ne)=>new Date(ne.date).getTime()-new Date(V.date).getTime()),!0),ee()}function Te(n){l(m,n,!0),ee()}function ee(){l(C,w),l(b,e(r).filter(n=>{if(e(m).startDate&&n.date<e(m).startDate||e(m).endDate&&n.date>e(m).endDate||e(m).location&&n.location!==e(m).location)return!1;if(e(m).climbingType&&(n.climbingType==="Leading"?"Sport":n.climbingType)!==e(m).climbingType)if(n.climbingType==="Mixed")if(e(m).climbingType==="Bouldering"){if(!n.climbs.some(S=>!S.isSport))return!1}else if(e(m).climbingType==="Sport"){if(!n.climbs.some(S=>S.isSport))return!1}else return!1;else return!1;if(e(m).sessionType&&!n.trainingTypes?.includes(e(m).sessionType))return!1;if(e(m).grade){const _=e(m).grade.trim().toLowerCase();if(!n.climbs.some(V=>V.grade.trim().toLowerCase()===_))return!1}return!0}),!0)}function se(){l(C,e(C)+w)}var z=Os(),ve=a(z),ge=s(a(ve),2),de=a(ge);de.__click=()=>da(e(b),"indoor_climbs");var P=s(de,2);P.__click=re;var le=a(P);{var xe=n=>{var _=Fs();jt(),i(n,_)},qe=n=>{var _=Ot("‚òÅÔ∏è Fetch Data");i(n,_)};c(le,n=>{e(q)?n(xe):n(qe,!1)})}t(P),t(ge),t(ve);var ie=s(ve,2);{var F=n=>{var _=Es(),S=a(_,!0);t(_),g(()=>o(S,e(T))),et(3,_,()=>lt),i(n,_)};c(ie,n=>{e(T)&&n(F)})}var B=s(ie,2);Pa(B,{onFilterParamsChange:Te});var L=s(B,2),Z=a(L),K=a(Z);fa(K),t(Z),jt(2),t(L);var Q=s(L,2),oe=a(Q);Ee(oe,17,()=>e(b).slice(0,e(C)),n=>n.id,(n,_)=>{qs(n,{get session(){return e(_)},onDelete:W})});var te=s(oe,2);{var y=n=>{var _=Ns(),S=s(a(_),2);{var V=ne=>{var A=Gs();i(ne,A)};c(S,ne=>{e(r).length>0&&ne(V)})}t(_),i(n,_)};c(te,n=>{e(b).length===0&&n(y)})}var d=s(te,2);{var u=n=>{var _=As(),S=a(_);S.__click=se;var V=a(S);t(S),t(_),g(()=>o(V,`Load More (${e(b).length-e(C)} remaining)`)),i(n,_)};c(d,n=>{e(C)<e(b).length&&n(u)})}t(Q),t(z),g(()=>P.disabled=e(q)),i(ze,z),bt()}ft(["click"]);var Ms=v('<span class="chevron svelte-1frtlim">‚ñ≤</span>'),Ps=v('<span class="chevron svelte-1frtlim">‚ñº</span>'),Is=v('<div class="input-with-action svelte-1frtlim"><input type="text" id="area-filter-text" placeholder="Type area name..." class="flat-left svelte-1frtlim"/> <button class="action-btn flat-right svelte-1frtlim" title="Back to list">‚úï</button></div>'),Rs=v("<option> </option>"),Bs=v('<select id="area-filter" class="svelte-1frtlim"><option>All Areas</option><!><option>Other (Manual Entry)</option></select>'),Vs=v('<div class="input-with-action svelte-1frtlim"><input type="text" id="crag-filter-text" placeholder="Type crag name..." class="flat-left svelte-1frtlim"/> <button class="action-btn flat-right svelte-1frtlim" title="Back to list">‚úï</button></div>'),Us=v("<option> </option>"),Ws=v('<select id="crag-filter" class="svelte-1frtlim"><option>All Crags</option><!><option>Other (Manual Entry)</option></select>'),Hs=v('<input type="text" id="crag-filter-text" class="svelte-1frtlim"/>'),Ys=v("<option> </option>"),Js=v("<option> </option>"),Zs=v('<div class="filter-body svelte-1frtlim"><div class="filter-grid svelte-1frtlim"><div class="filter-item svelte-1frtlim"><label for="start-date" class="svelte-1frtlim">Start Date</label> <input type="date" id="start-date" class="svelte-1frtlim"/></div> <div class="filter-item svelte-1frtlim"><label for="end-date" class="svelte-1frtlim">End Date</label> <input type="date" id="end-date" class="svelte-1frtlim"/></div> <div class="filter-item svelte-1frtlim"><label for="area-filter" class="svelte-1frtlim">Area</label> <!></div> <div class="filter-item svelte-1frtlim"><label for="crag-filter" class="svelte-1frtlim">Crag</label> <!></div> <div class="filter-item svelte-1frtlim"><label for="climbing-type-filter" class="svelte-1frtlim">Climb Type</label> <select id="climbing-type-filter" class="svelte-1frtlim"><option>Any Type</option><!></select></div> <div class="filter-item svelte-1frtlim"><label for="session-type-filter" class="svelte-1frtlim">Session Type</label> <select id="session-type-filter" class="svelte-1frtlim"><option>Any Type</option><!></select></div> <div class="filter-item svelte-1frtlim"><label for="grade-filter" class="svelte-1frtlim">Grade (Exact)</label> <input type="text" id="grade-filter" placeholder="e.g. 7a" class="svelte-1frtlim"/></div></div> <div class="filter-actions svelte-1frtlim"><button class="reset-btn svelte-1frtlim">Reset Filters</button></div></div>'),Ks=v('<div class="filter-container svelte-1frtlim"><button class="filter-header svelte-1frtlim"><div class="header-content svelte-1frtlim"><span class="icon svelte-1frtlim">üîç</span> <span class="title svelte-1frtlim">Filters</span> <!></div></button> <!></div>');function Xs(ze,p){mt(p,!0);const r=ha(),b=["Bouldering","Sport","Mixed","Trad"],q=["Projecting","Onsighting","Campusing","Repeaters","Fun","Volume"];let T=h(!1),m=h(""),C=h(""),w=h(""),W=h(""),re=h(""),ue=h(""),Te=h(""),ee=h(!1),se=h(!1),z=ut(()=>e(w)&&e(w)!=="Other"?ya(e(w)):[]);function ve(){e(w)==="Other"?(l(ee,!0),l(w,"")):l(ee,!1),l(W,""),l(se,!1),le()}function ge(){e(W)==="Other"?(l(se,!0),l(W,"")):l(se,!1),le()}function de(){l(T,!e(T))}function P(){l(m,""),l(C,""),l(w,""),l(W,""),l(re,""),l(ue,""),l(Te,""),l(ee,!1),l(se,!1),le()}function le(){p.onFilterParamsChange({startDate:e(m),endDate:e(C),area:e(w),crag:e(W),climbingType:e(re),sessionType:e(ue),grade:e(Te)})}var xe=Ks(),qe=a(xe);qe.__click=de;var ie=a(qe),F=s(a(ie),4);{var B=Q=>{var oe=Ms();i(Q,oe)},L=Q=>{var oe=Ps();i(Q,oe)};c(F,Q=>{e(T)?Q(B):Q(L,!1)})}t(ie),t(qe);var Z=s(qe,2);{var K=Q=>{var oe=Zs(),te=a(oe),y=a(te),d=s(a(y),2);Ve(d),d.__change=le,t(y);var u=s(y,2),n=s(a(u),2);Ve(n),n.__change=le,t(u);var _=s(u,2),S=s(a(_),2);{var V=U=>{var be=Is(),ye=a(be);Ve(ye),ye.__input=le;var H=s(ye,2);H.__click=()=>{l(ee,!1),l(w,""),le()},t(be),Ie(ye,()=>e(w),I=>l(w,I)),i(U,be)},ne=U=>{var be=Bs();be.__change=ve;var ye=a(be);ye.value=ye.__value="";var H=s(ye);Ee(H,17,()=>r,Ae,(we,De)=>{var E=Rs(),x=a(E,!0);t(E);var j={};g(()=>{o(x,e(De)),j!==(j=e(De))&&(E.value=(E.__value=e(De))??"")}),i(we,E)});var I=s(H);I.value=I.__value="Other",t(be),zt(be,()=>e(w),we=>l(w,we)),i(U,be)};c(S,U=>{e(ee)?U(V):U(ne,!1)})}t(_);var A=s(_,2),he=s(a(A),2);{var ce=U=>{var be=Vs(),ye=a(be);Ve(ye),ye.__input=le;var H=s(ye,2);H.__click=()=>{l(se,!1),l(W,""),le()},t(be),Ie(ye,()=>e(W),I=>l(W,I)),i(U,be)},Se=U=>{var be=Xe(),ye=Me(be);{var H=we=>{var De=Ws();De.__change=ge;var E=a(De);E.value=E.__value="";var x=s(E);Ee(x,17,()=>e(z),Ae,(Fe,Pe)=>{var Oe=Us(),Qe=a(Oe,!0);t(Oe);var He={};g(()=>{o(Qe,e(Pe)),He!==(He=e(Pe))&&(Oe.value=(Oe.__value=e(Pe))??"")}),i(Fe,Oe)});var j=s(x);j.value=j.__value="Other",t(De),zt(De,()=>e(W),Fe=>l(W,Fe)),i(we,De)},I=we=>{var De=Hs();Ve(De),De.__input=le,g(()=>{rt(De,"placeholder",e(w)?"Filter crag...":"Select area first"),De.disabled=!e(ee)&&!e(w)}),Ie(De,()=>e(W),E=>l(W,E)),i(we,De)};c(ye,we=>{!e(ee)&&e(w)&&e(z).length>0?we(H):we(I,!1)},!0)}i(U,be)};c(he,U=>{e(se)?U(ce):U(Se,!1)})}t(A);var k=s(A,2),ae=s(a(k),2);ae.__change=le;var O=a(ae);O.value=O.__value="";var pe=s(O);Ee(pe,17,()=>b,Ae,(U,be)=>{var ye=Ys(),H=a(ye,!0);t(ye);var I={};g(()=>{o(H,e(be)),I!==(I=e(be))&&(ye.value=(ye.__value=e(be))??"")}),i(U,ye)}),t(ae),t(k);var ke=s(k,2),Y=s(a(ke),2);Y.__change=le;var N=a(Y);N.value=N.__value="";var X=s(N);Ee(X,17,()=>q,Ae,(U,be)=>{var ye=Js(),H=a(ye,!0);t(ye);var I={};g(()=>{o(H,e(be)),I!==(I=e(be))&&(ye.value=(ye.__value=e(be))??"")}),i(U,ye)}),t(Y),t(ke);var Ce=s(ke,2),Le=s(a(Ce),2);Ve(Le),Le.__input=le,t(Ce),t(te);var fe=s(te,2),me=a(fe);me.__click=P,t(fe),t(oe),Ie(d,()=>e(m),U=>l(m,U)),Ie(n,()=>e(C),U=>l(C,U)),zt(ae,()=>e(re),U=>l(re,U)),zt(Y,()=>e(ue),U=>l(ue,U)),Ie(Le,()=>e(Te),U=>l(Te,U)),et(3,oe,()=>lt,()=>({duration:200})),i(Q,oe)};c(Z,Q=>{e(T)&&Q(K)})}t(xe),g(()=>rt(qe,"aria-expanded",e(T))),i(ze,xe),bt()}ft(["click","change","input"]);var Qs=v('<label class="type-toggle svelte-1k6anfh"><input type="checkbox"/> <span>Sport?</span></label>'),$s=v("<option> </option>"),er=v('<div class="edit-form svelte-1k6anfh"><div class="edit-row main svelte-1k6anfh"><input type="text" class="edit-input grade svelte-1k6anfh" placeholder="Grade"/> <input type="text" class="edit-input name svelte-1k6anfh" placeholder="Route Name"/> <!></div> <div class="edit-row meta svelte-1k6anfh"><select class="edit-select svelte-1k6anfh"></select> <div class="attempts-input-wrapper svelte-1k6anfh"><span>#</span> <input type="number" min="1" class="edit-input num svelte-1k6anfh"/></div></div> <div class="edit-row notes svelte-1k6anfh"><textarea class="edit-input notes-area svelte-1k6anfh" placeholder="Notes..."></textarea></div> <div class="edit-actions svelte-1k6anfh"><button class="action-btn cancel svelte-1k6anfh">Cancel</button> <button class="action-btn save svelte-1k6anfh">Save</button></div></div>'),tr=v('<span class="climb-type-tag svelte-1k6anfh"> </span>'),ar=v('<span class="notes-preview svelte-1k6anfh"> </span>'),sr=v('<span class="attempts-count svelte-1k6anfh"> </span>'),rr=v('<div class="detail-row svelte-1k6anfh"><span class="label svelte-1k6anfh">Notes:</span> <p class="notes svelte-1k6anfh"> </p></div>'),ir=v('<p class="empty-notes svelte-1k6anfh">No notes for this climb.</p>'),lr=v('<span class="tag wall-tag svelte-1k6anfh"> </span>'),nr=v('<span class="tag technique-tag svelte-1k6anfh"> </span>'),vr=v('<div class="climb-details svelte-1k6anfh"><!> <div class="tags svelte-1k6anfh"><span class="tag type svelte-1k6anfh"> </span> <!> <!> <span class="tag attempt-text svelte-1k6anfh"> </span></div></div>'),or=v('<div class="climb-header svelte-1k6anfh" role="button" tabindex="0"><div class="climb-main-info svelte-1k6anfh"><span> </span> <span class="climb-name svelte-1k6anfh"> </span> <!> <!></div> <div class="climb-meta svelte-1k6anfh"><span><span class="icon svelte-1k6anfh"> </span> <!></span> <button class="icon-btn edit-btn svelte-1k6anfh" aria-label="Edit climb" title="Edit climb">‚úé</button> <button class="icon-btn delete-btn svelte-1k6anfh" aria-label="Delete climb" title="Delete climb">üóëÔ∏è</button> <span class="chevron svelte-1k6anfh"> </span></div></div> <!>',1),dr=v("<div><!></div>");function cr(ze,p){mt(p,!0);let r=ia(p,"showClimbType",3,!1),b=h(!1),q=h(!1),T=h(""),m=h(""),C=h(""),w=h(1),W=h(""),re=h(!1);function ue(){e(q)||l(b,!e(b))}function Te(F){F.stopPropagation(),p.onDelete()}function ee(F){F.stopPropagation(),l(T,p.climb.name,!0),l(m,p.climb.grade,!0),l(C,p.climb.attemptType,!0),l(w,p.climb.attemptsNum,!0),l(W,p.climb.notes,!0),l(re,p.climb.isSport,!0),l(q,!0),l(b,!0)}function se(F){F.stopPropagation(),l(q,!1)}function z(F){F.stopPropagation();const B={...p.climb,name:e(T),grade:e(m),attemptType:e(C),attemptsNum:e(w),notes:e(W),isSport:e(re)};p.onUpdate(B),l(q,!1)}function ve(){(e(C)==="Flash"||e(C)==="Onsight")&&l(w,1)}const ge={Flash:"‚ö°",Onsight:"üëÅÔ∏è",Redpoint:"üî¥",Dogged:"üõ†Ô∏è",DNF:"‚ùå"},de=["Flash","Onsight","Redpoint","Dogged","DNF"];var P=dr();let le;var xe=a(P);{var qe=F=>{var B=er(),L=a(B),Z=a(L);Ve(Z);var K=s(Z,2);Ve(K);var Q=s(K,2);{var oe=A=>{var he=Qs(),ce=a(he);Ve(ce),jt(2),t(he),ua(ce,()=>e(re),Se=>l(re,Se)),i(A,he)};c(Q,A=>{r()&&A(oe)})}t(L);var te=s(L,2),y=a(te);y.__change=ve,Ee(y,21,()=>de,Ae,(A,he)=>{var ce=$s(),Se=a(ce,!0);t(ce);var k={};g(()=>{o(Se,e(he)),k!==(k=e(he))&&(ce.value=(ce.__value=e(he))??"")}),i(A,ce)}),t(y);var d=s(y,2),u=s(a(d),2);Ve(u),t(d),t(te);var n=s(te,2),_=a(n);ta(_),t(n);var S=s(n,2),V=a(S);V.__click=se;var ne=s(V,2);ne.__click=z,t(S),t(B),g(()=>u.disabled=e(C)==="Flash"||e(C)==="Onsight"),Ie(Z,()=>e(m),A=>l(m,A)),Ie(K,()=>e(T),A=>l(T,A)),zt(y,()=>e(C),A=>l(C,A)),Ie(u,()=>e(w),A=>l(w,A)),Ie(_,()=>e(W),A=>l(W,A)),i(F,B)},ie=F=>{var B=or(),L=Me(B);L.__click=ue,L.__keydown=N=>(N.key==="Enter"||N.key===" ")&&ue();var Z=a(L),K=a(Z);let Q;var oe=a(K,!0);t(K);var te=s(K,2),y=a(te,!0);t(te);var d=s(te,2);{var u=N=>{var X=tr(),Ce=a(X,!0);t(X),g(()=>o(Ce,p.climb.isSport?"Sport":"Boulder")),i(N,X)};c(d,N=>{r()&&N(u)})}var n=s(d,2);{var _=N=>{var X=ar(),Ce=a(X);t(X),g(()=>o(Ce,`- ${p.climb.notes??""}`)),i(N,X)};c(n,N=>{!e(b)&&p.climb.notes&&N(_)})}t(Z);var S=s(Z,2),V=a(S);let ne;var A=a(V),he=a(A,!0);t(A);var ce=s(A,2);{var Se=N=>{var X=sr(),Ce=a(X,!0);t(X),g(()=>o(Ce,p.climb.attemptsNum)),i(N,X)};c(ce,N=>{p.climb.attemptType!=="Flash"&&p.climb.attemptType!=="Onsight"&&N(Se)})}t(V);var k=s(V,2);k.__click=ee;var ae=s(k,2);ae.__click=Te;var O=s(ae,2),pe=a(O,!0);t(O),t(S),t(L);var ke=s(L,2);{var Y=N=>{var X=vr(),Ce=a(X);{var Le=x=>{var j=rr(),Fe=s(a(j),2),Pe=a(Fe,!0);t(Fe),t(j),g(()=>o(Pe,p.climb.notes)),i(x,j)},fe=x=>{var j=ir();i(x,j)};c(Ce,x=>{p.climb.notes?x(Le):x(fe,!1)})}var me=s(Ce,2),U=a(me),be=a(U,!0);t(U);var ye=s(U,2);{var H=x=>{var j=lr(),Fe=a(j,!0);t(j),g(()=>o(Fe,p.climb.wall)),i(x,j)};c(ye,x=>{p.climb.wall&&x(H)})}var I=s(ye,2);{var we=x=>{var j=nr(),Fe=a(j,!0);t(j),g(()=>o(Fe,p.climb.techniqueFocus)),i(x,j)};c(I,x=>{p.climb.techniqueFocus&&x(we)})}var De=s(I,2),E=a(De,!0);t(De),t(me),t(X),g(()=>{o(be,p.climb.isSport?"Sport":"Boulder"),o(E,p.climb.attemptType)}),et(3,X,()=>lt,()=>({duration:150})),i(N,X)};c(ke,N=>{e(b)&&N(Y)})}g(()=>{rt(L,"aria-expanded",e(b)),Q=dt(K,1,"grade-badge svelte-1k6anfh",null,Q,{sport:p.climb.isSport}),o(oe,p.climb.grade),o(y,p.climb.name||"Unnamed Route"),ne=dt(V,1,"attempt-type svelte-1k6anfh",null,ne,{flash:p.climb.attemptType==="Flash"}),o(he,ge[p.climb.attemptType]||p.climb.attemptType),o(pe,e(b)?"‚ñ≤":"‚ñº")}),i(F,B)};c(xe,F=>{e(q)?F(qe):F(ie,!1)})}t(P),g(()=>le=dt(P,1,"climb-entry svelte-1k6anfh",null,le,{expanded:e(b),editing:e(q)})),i(ze,P),bt()}ft(["change","click","keydown"]);var pr=v('<div class="sector-meta"> </div>'),_r=v('<span class="stat svelte-d5hg2r"> </span>'),ur=v('<span class="status-icon pending svelte-d5hg2r" title="Waiting to sync">üîÑ</span>'),fr=v('<span class="status-icon error svelte-d5hg2r" title="Sync error">‚ö†Ô∏è</span>'),gr=v('<span class="chip svelte-d5hg2r"> </span>'),mr=v('<span class="text-none svelte-d5hg2r">None</span>'),br=v('<div class="detail-item svelte-d5hg2r"><span class="label svelte-d5hg2r">Difficulty</span> <span class="value svelte-d5hg2r"> </span></div>'),hr=v('<span class="chip svelte-d5hg2r"> </span>'),yr=v('<span class="text-none svelte-d5hg2r">None</span>'),xr=v('<div class="detail-item svelte-d5hg2r"><span class="label svelte-d5hg2r">Category</span> <div class="value-chips svelte-d5hg2r"><!></div></div>'),wr=v('<span class="chip svelte-d5hg2r"> </span>'),Sr=v('<span class="text-none svelte-d5hg2r">None</span>'),kr=v('<div class="detail-item svelte-d5hg2r"><span class="label svelte-d5hg2r">Energy System</span> <div class="value-chips svelte-d5hg2r"><!></div></div>'),Dr=v('<button class="icon-btn edit-notes-btn svelte-d5hg2r" title="Edit Notes">‚úé</button>'),Tr=v('<div class="edit-notes-area"><textarea placeholder="Add session notes..." rows="3" class="notes-editor svelte-d5hg2r"></textarea> <div class="edit-actions svelte-d5hg2r"><button class="cancel-btn svelte-d5hg2r">Cancel</button> <button class="save-btn svelte-d5hg2r"> </button></div></div>'),qr=v('<p class="notes-text svelte-d5hg2r"> </p>'),Cr=v('<p class="notes-placeholder svelte-d5hg2r">No notes.</p>'),Lr=v('<div class="metric svelte-d5hg2r"><span class="label svelte-d5hg2r">Open Grip</span> <div class="bar-container svelte-d5hg2r"><div class="bar-fill svelte-d5hg2r"></div></div> <span class="score svelte-d5hg2r"> </span></div>'),zr=v('<div class="metric svelte-d5hg2r"><span class="label svelte-d5hg2r">Crimp Grip</span> <div class="bar-container svelte-d5hg2r"><div class="bar-fill svelte-d5hg2r"></div></div> <span class="score svelte-d5hg2r"> </span></div>'),Fr=v('<div class="metric svelte-d5hg2r"><span class="label svelte-d5hg2r">Pinch Grip</span> <div class="bar-container svelte-d5hg2r"><div class="bar-fill svelte-d5hg2r"></div></div> <span class="score svelte-d5hg2r"> </span></div>'),Er=v('<div class="metric svelte-d5hg2r"><span class="label svelte-d5hg2r">Sloper Grip</span> <div class="bar-container svelte-d5hg2r"><div class="bar-fill svelte-d5hg2r"></div></div> <span class="score svelte-d5hg2r"> </span></div>'),Gr=v('<div class="metric svelte-d5hg2r"><span class="label svelte-d5hg2r">Jug Grip</span> <div class="bar-container svelte-d5hg2r"><div class="bar-fill svelte-d5hg2r"></div></div> <span class="score svelte-d5hg2r"> </span></div>'),Nr=v('<p class="no-climbs svelte-d5hg2r">No climbs logged for this session.</p>'),Ar=v('<div class="card-body svelte-d5hg2r"><div class="details-grid svelte-d5hg2r"><div class="detail-item svelte-d5hg2r"><span class="label svelte-d5hg2r">Training Type</span> <div class="value-chips svelte-d5hg2r"><!></div></div> <!> <!> <!></div> <div class="notes-container svelte-d5hg2r"><div class="notes-header svelte-d5hg2r"><span class="label svelte-d5hg2r">Session Notes</span> <!></div> <!></div> <div class="metrics-container svelte-d5hg2r"><div class="metric svelte-d5hg2r"><span class="label svelte-d5hg2r">Finger Load</span> <div class="bar-container svelte-d5hg2r"><div class="bar-fill svelte-d5hg2r"></div></div> <span class="score svelte-d5hg2r"> </span></div> <div class="metric svelte-d5hg2r"><span class="label svelte-d5hg2r">Shoulder Load</span> <div class="bar-container svelte-d5hg2r"><div class="bar-fill svelte-d5hg2r"></div></div> <span class="score svelte-d5hg2r"> </span></div> <div class="metric svelte-d5hg2r"><span class="label svelte-d5hg2r">Forearm Load</span> <div class="bar-container svelte-d5hg2r"><div class="bar-fill svelte-d5hg2r"></div></div> <span class="score svelte-d5hg2r"> </span></div> <!> <!> <!> <!> <!></div> <div class="climbs-list svelte-d5hg2r"><h4 class="svelte-d5hg2r">Climbs</h4> <div class="climbs-container svelte-d5hg2r"><!> <!></div></div></div>'),Or=v('<div><div class="card-header svelte-d5hg2r" role="button" tabindex="0"><div class="header-main svelte-d5hg2r"><div class="date-badge svelte-d5hg2r"><span class="day svelte-d5hg2r"> </span> <span class="month svelte-d5hg2r"> </span> <span class="year svelte-d5hg2r"> </span></div> <div class="session-info svelte-d5hg2r"><div class="session-text svelte-d5hg2r"><h3 class="location svelte-d5hg2r"> <!></h3> <!> <div class="session-meta svelte-d5hg2r"><span class="type-tag svelte-d5hg2r"> </span> <span class="stat svelte-d5hg2r"> </span> <!></div></div> <div class="load-summary svelte-d5hg2r"><div class="load-badge finger svelte-d5hg2r"> </div> <div class="load-badge shoulder svelte-d5hg2r"> </div> <div class="load-badge forearm svelte-d5hg2r"> </div></div></div></div> <div class="header-actions"><div class="header-status svelte-d5hg2r"><!></div> <button class="btn-icon delete-session" title="Delete Session">üóëÔ∏è</button> <span class="chevron svelte-d5hg2r"> </span></div></div> <!> <!></div>');function jr(ze,p){mt(p,!0);let r=ia(p,"session",7),b=h(!1),q=h(!1);function T(){l(b,!e(b))}function m(){l(q,!0)}function C(){sa(r().id),l(q,!1),p.onDelete()}function w(E){const x=[...r().climbs];x.splice(E,1),Ut(r().id,{climbs:x}),p.onDelete()}function W(E,x){const j=[...r().climbs];j[E]=x,re(j)}async function re(E){if(Ut(r().id,{climbs:E}),r().climbs=E,$t()){const x={date:r().date,area:r().area,crag:r().crag,sector:r().sector,climbingType:r().climbingType,trainingTypes:r().trainingTypes||[],difficulty:r().difficulty,categories:r().categories||[],energySystems:r().energySystems||[],fingerLoad:r().fingerLoad,shoulderLoad:r().shoulderLoad,forearmLoad:r().forearmLoad,climbs:E};try{const j=await _a(r().id,x);j.ok?(ea(r().id),r().syncStatus="synced"):(console.error("Failed to sync update:",j.error),Ft(r().id),r().syncStatus="error")}catch(j){console.error("Exception syncing update:",j),Ft(r().id),r().syncStatus="error"}}}let ue=ut(()=>r().climbs?.length??0),Te=ut(()=>(r().climbs||[]).reduce((E,x)=>{const j=parseInt(x.grade.replace(/\D/g,""))||0,Fe=parseInt(E.replace(/\D/g,""))||0;return j>Fe?x.grade:E},"V0/4a")),ee=h(!1),se=h(""),z=h(!1);function ve(){l(se,r().notes||"",!0),l(ee,!0)}function ge(){l(ee,!1),l(se,"")}async function de(){if(!e(z)){if(l(z,!0),r().notes,r().notes=e(se),Ut(r().id,{notes:e(se)}),$t()){const E={date:r().date,area:r().area,crag:r().crag,sector:r().sector,climbingType:r().climbingType,trainingTypes:r().trainingTypes||[],difficulty:r().difficulty,categories:r().categories||[],energySystems:r().energySystems||[],fingerLoad:r().fingerLoad,shoulderLoad:r().shoulderLoad,forearmLoad:r().forearmLoad,climbs:r().climbs,notes:e(se)};try{const x=await _a(r().id,E);x.ok?(ea(r().id),r().syncStatus="synced"):(console.error("Failed to sync note update:",x.error),Ft(r().id),r().syncStatus="error")}catch(x){console.error("Exception syncing note update:",x),Ft(r().id),r().syncStatus="error"}}l(ee,!1),l(z,!1)}}var P=Or();let le;var xe=a(P);xe.__click=T,xe.__keydown=E=>E.key==="Enter"&&T();var qe=a(xe),ie=a(qe),F=a(ie),B=a(F,!0);t(F);var L=s(F,2),Z=a(L,!0);t(L);var K=s(L,2),Q=a(K,!0);t(K),t(ie);var oe=s(ie,2),te=a(oe),y=a(te),d=a(y),u=s(d);{var n=E=>{var x=Ot();g(()=>o(x,`- ${r().crag??""}`)),i(E,x)};c(u,E=>{r().crag&&E(n)})}t(y);var _=s(y,2);{var S=E=>{var x=pr(),j=a(x);t(x),g(()=>o(j,`üìç ${r().sector??""}`)),i(E,x)};c(_,E=>{r().sector&&E(S)})}var V=s(_,2),ne=a(V),A=a(ne,!0);t(ne);var he=s(ne,2),ce=a(he);t(he);var Se=s(he,2);{var k=E=>{var x=_r(),j=a(x);t(x),g(()=>o(j,`Max: ${e(Te)??""}`)),i(E,x)};c(Se,E=>{e(ue)>0&&E(k)})}t(V),t(te);var ae=s(te,2),O=a(ae),pe=a(O,!0);t(O);var ke=s(O,2),Y=a(ke,!0);t(ke);var N=s(ke,2),X=a(N,!0);t(N),t(ae),t(oe),t(qe);var Ce=s(qe,2),Le=a(Ce),fe=a(Le);{var me=E=>{var x=ur();i(E,x)},U=E=>{var x=Xe(),j=Me(x);{var Fe=Pe=>{var Oe=fr();i(Pe,Oe)};c(j,Pe=>{r().syncStatus==="error"&&Pe(Fe)},!0)}i(E,x)};c(fe,E=>{r().syncStatus==="pending"?E(me):E(U,!1)})}t(Le);var be=s(Le,2);be.__click=E=>{E.stopPropagation(),m()};var ye=s(be,2),H=a(ye,!0);t(ye),t(Ce),t(xe);var I=s(xe,2);{var we=E=>{var x=Ar(),j=a(x),Fe=a(j),Pe=s(a(Fe),2),Oe=a(Pe);{var Qe=f=>{var D=Xe(),G=Me(D);Ee(G,17,()=>r().trainingTypes,Ae,($,J)=>{var _e=gr(),je=a(_e,!0);t(_e),g(()=>o(je,e(J))),i($,_e)}),i(f,D)},He=f=>{var D=mr();i(f,D)};c(Oe,f=>{r().trainingTypes&&r().trainingTypes.length>0&&!r().trainingTypes.includes("None")?f(Qe):f(He,!1)})}t(Pe),t(Fe);var Ye=s(Fe,2);{var Tt=f=>{var D=br(),G=s(a(D),2),$=a(G,!0);t(G),t(D),g(()=>o($,r().difficulty)),i(f,D)};c(Ye,f=>{r().difficulty&&f(Tt)})}var ht=s(Ye,2);{var qt=f=>{var D=xr(),G=s(a(D),2),$=a(G);{var J=je=>{var $e=Xe(),Nt=Me($e);Ee(Nt,17,()=>r().categories,Ae,(_t,At)=>{var Vt=hr(),la=a(Vt,!0);t(Vt),g(()=>o(la,e(At))),i(_t,Vt)}),i(je,$e)},_e=je=>{var $e=yr();i(je,$e)};c($,je=>{r().categories.length>0&&!r().categories.includes("None")?je(J):je(_e,!1)})}t(G),t(D),i(f,D)};c(ht,f=>{r().categories?.length&&f(qt)})}var yt=s(ht,2);{var Ct=f=>{var D=kr(),G=s(a(D),2),$=a(G);{var J=je=>{var $e=Xe(),Nt=Me($e);Ee(Nt,17,()=>r().energySystems,Ae,(_t,At)=>{var Vt=wr(),la=a(Vt,!0);t(Vt),g(()=>o(la,e(At))),i(_t,Vt)}),i(je,$e)},_e=je=>{var $e=Sr();i(je,$e)};c($,je=>{r().energySystems.length>0&&!r().energySystems.includes("None")?je(J):je(_e,!1)})}t(G),t(D),i(f,D)};c(yt,f=>{r().energySystems?.length&&f(Ct)})}t(j);var St=s(j,2),nt=a(St),Je=s(a(nt),2);{var Re=f=>{var D=Dr();D.__click=ve,i(f,D)};c(Je,f=>{e(ee)||f(Re)})}t(nt);var gt=s(nt,2);{var tt=f=>{var D=Tr(),G=a(D);ta(G);var $=s(G,2),J=a($);J.__click=ge;var _e=s(J,2);_e.__click=de;var je=a(_e,!0);t(_e),t($),t(D),g(()=>{J.disabled=e(z),_e.disabled=e(z),o(je,e(z)?"Saving...":"Save")}),Ie(G,()=>e(se),$e=>l(se,$e)),et(3,D,()=>lt,()=>({duration:150})),i(f,D)},xt=f=>{var D=Xe(),G=Me(D);{var $=_e=>{var je=qr(),$e=a(je,!0);t(je),g(()=>o($e,r().notes)),i(_e,je)},J=_e=>{var je=Cr();i(_e,je)};c(G,_e=>{r().notes?_e($):_e(J,!1)},!0)}i(f,D)};c(gt,f=>{e(ee)?f(tt):f(xt,!1)})}t(St);var at=s(St,2),Ge=a(at),Ne=s(a(Ge),2),Ze=a(Ne);t(Ne);var Ue=s(Ne,2),st=a(Ue);t(Ue),t(Ge);var Be=s(Ge,2),We=s(a(Be),2),ct=a(We);t(We);var kt=s(We,2),Dt=a(kt);t(kt),t(Be);var Lt=s(Be,2),Ke=s(a(Lt),2),it=a(Ke);t(Ke);var wt=s(Ke,2),It=a(wt);t(wt),t(Lt);var pt=s(Lt,2);{var Wt=f=>{var D=Lr(),G=s(a(D),2),$=a(G);t(G);var J=s(G,2),_e=a(J);t(J),t(D),g(()=>{vt($,`width: ${r().openGrip/5*100}%`),o(_e,`${r().openGrip??""}/5`)}),i(f,D)};c(pt,f=>{r().openGrip&&f(Wt)})}var Et=s(pt,2);{var Rt=f=>{var D=zr(),G=s(a(D),2),$=a(G);t(G);var J=s(G,2),_e=a(J);t(J),t(D),g(()=>{vt($,`width: ${r().crimpGrip/5*100}%`),o(_e,`${r().crimpGrip??""}/5`)}),i(f,D)};c(Et,f=>{r().crimpGrip&&f(Rt)})}var Gt=s(Et,2);{var Xt=f=>{var D=Fr(),G=s(a(D),2),$=a(G);t(G);var J=s(G,2),_e=a(J);t(J),t(D),g(()=>{vt($,`width: ${r().pinchGrip/5*100}%`),o(_e,`${r().pinchGrip??""}/5`)}),i(f,D)};c(Gt,f=>{r().pinchGrip&&f(Xt)})}var Ht=s(Gt,2);{var Qt=f=>{var D=Er(),G=s(a(D),2),$=a(G);t(G);var J=s(G,2),_e=a(J);t(J),t(D),g(()=>{vt($,`width: ${r().sloperGrip/5*100}%`),o(_e,`${r().sloperGrip??""}/5`)}),i(f,D)};c(Ht,f=>{r().sloperGrip&&f(Qt)})}var Bt=s(Ht,2);{var Mt=f=>{var D=Gr(),G=s(a(D),2),$=a(G);t(G);var J=s(G,2),_e=a(J);t(J),t(D),g(()=>{vt($,`width: ${r().jugGrip/5*100}%`),o(_e,`${r().jugGrip??""}/5`)}),i(f,D)};c(Bt,f=>{r().jugGrip&&f(Mt)})}t(at);var Pt=s(at,2),Yt=s(a(Pt),2),Jt=a(Yt);Ee(Jt,17,()=>r().climbs||[],Ae,(f,D,G)=>{{let $=ut(()=>r().climbingType==="Mixed");cr(f,{get climb(){return e(D)},onDelete:()=>w(G),onUpdate:J=>W(G,J),get showClimbType(){return e($)}})}});var R=s(Jt,2);{var M=f=>{var D=Nr();i(f,D)};c(R,f=>{(r().climbs||[]).length===0&&f(M)})}t(Yt),t(Pt),t(x),g(()=>{vt(Ze,`width: ${r().fingerLoad/5*100}%`),o(st,`${r().fingerLoad??""}/5`),vt(ct,`width: ${r().shoulderLoad/5*100}%`),o(Dt,`${r().shoulderLoad??""}/5`),vt(it,`width: ${r().forearmLoad/5*100}%`),o(It,`${r().forearmLoad??""}/5`)}),et(3,x,()=>lt,()=>({duration:150})),i(E,x)};c(I,E=>{e(b)&&E(we)})}var De=s(I,2);Kt(De,{get isOpen(){return e(q)},title:"Delete Session",message:"Are you sure you want to delete this session? This action cannot be undone.",onConfirm:C,onCancel:()=>l(q,!1)}),t(P),g((E,x,j)=>{le=dt(P,1,"session-card svelte-d5hg2r",null,le,{expanded:e(b)}),rt(xe,"aria-expanded",e(b)),o(B,E),o(Z,x),o(Q,j),o(d,`${r().area??""} `),o(A,r().climbingType),o(ce,`${e(ue)??""} climbs`),rt(O,"title",`Finger Load: ${r().fingerLoad??""}`),o(pe,r().fingerLoad),rt(ke,"title",`Shoulder Load: ${r().shoulderLoad??""}`),o(Y,r().shoulderLoad),rt(N,"title",`Forearm Load: ${r().forearmLoad??""}`),o(X,r().forearmLoad),o(H,e(b)?"‚ñ≤":"‚ñº")},[()=>new Date(r().date).getDate(),()=>new Date(r().date).toLocaleDateString(void 0,{month:"short"}),()=>new Date(r().date).getFullYear()]),i(ze,P),bt()}ft(["click","keydown"]);var Mr=v('<span class="spinner svelte-1s7jdlh"></span> Fetching...',1),Pr=v('<div class="error-banner svelte-1s7jdlh"> </div>'),Ir=v('<small class="svelte-1s7jdlh">Try adjusting your filters.</small>'),Rr=v('<div class="empty-state svelte-1s7jdlh"><p class="svelte-1s7jdlh">No outdoor climbing sessions found.</p> <!></div>'),Br=v('<div class="load-more-container svelte-1s7jdlh"><button class="load-more-btn svelte-1s7jdlh"> </button></div>'),Vr=v('<div class="view-container svelte-1s7jdlh"><div class="view-header svelte-1s7jdlh"><h2 class="view-title svelte-1s7jdlh">‚õ∞Ô∏è Outdoor Climbing History</h2> <div class="header-actions svelte-1s7jdlh"><button class="action-btn secondary svelte-1s7jdlh" title="Export filtered data to CSV">üì• Export</button> <button class="action-btn svelte-1s7jdlh" title="Fetch data from cloud"><!></button></div></div> <!> <!> <div class="info-bar svelte-1s7jdlh"><div class="legend-wrapper svelte-1s7jdlh"><!></div> <div class="load-key svelte-1s7jdlh"><span class="key-label svelte-1s7jdlh">Load:</span> <div class="key-item svelte-1s7jdlh"><span class="dot finger svelte-1s7jdlh"></span> Finger</div> <div class="key-item svelte-1s7jdlh"><span class="dot shoulder svelte-1s7jdlh"></span> Shoulder</div> <div class="key-item svelte-1s7jdlh"><span class="dot forearm svelte-1s7jdlh"></span> Forearm</div></div></div> <div class="sessions-list"><!> <!> <!></div></div>');function Ur(ze,p){mt(p,!0);let r=h(ot([])),b=h(ot([])),q=h(!1),T=h(""),m=h(ot({startDate:"",endDate:"",area:"",crag:"",climbingType:"",sessionType:"",grade:""})),C=h(20);const w=20;oa(()=>{W()});function W(){const n=Zt("outdoor_climb");l(r,n.sort((_,S)=>new Date(S.date).getTime()-new Date(_.date).getTime()),!0),ee()}async function re(){l(q,!0),l(T,"");try{await aa();const n=await xa();n.ok&&n.data?ue(n.data):l(T,n.error||"Failed to fetch data",!0)}catch(n){l(T,n instanceof Error?n.message:"Unknown error",!0)}finally{l(q,!1)}}function ue(n){const _=n.map(V=>({...V,activityType:"outdoor_climb",createdAt:new Date().toISOString(),updatedAt:new Date().toISOString(),syncStatus:"synced",syncedAt:new Date().toISOString(),openGrip:0,crimpGrip:0,pinchGrip:0,sloperGrip:0,jugGrip:0}));ra(_);const S=Zt("outdoor_climb");l(r,S.sort((V,ne)=>new Date(ne.date).getTime()-new Date(V.date).getTime()),!0),ee()}function Te(n){l(m,n,!0),ee()}function ee(){l(C,w),l(b,e(r).filter(n=>{if(e(m).startDate&&n.date<e(m).startDate||e(m).endDate&&n.date>e(m).endDate||e(m).area&&!n.area.toLowerCase().includes(e(m).area.toLowerCase())||e(m).crag&&!n.crag.toLowerCase().includes(e(m).crag.toLowerCase()))return!1;if(e(m).climbingType&&(n.climbingType==="Leading"?"Sport":n.climbingType)!==e(m).climbingType)if(n.climbingType==="Mixed")if(e(m).climbingType==="Bouldering"){if(!n.climbs.some(S=>!S.isSport))return!1}else if(e(m).climbingType==="Sport"||e(m).climbingType==="Trad"){if(!n.climbs.some(S=>S.isSport))return!1}else return!1;else return!1;if(e(m).sessionType&&!n.trainingTypes?.includes(e(m).sessionType))return!1;if(e(m).grade){const _=e(m).grade.trim().toLowerCase();if(!n.climbs.some(V=>V.grade.trim().toLowerCase()===_))return!1}return!0}),!0)}function se(){l(C,e(C)+w)}var z=Vr(),ve=a(z),ge=s(a(ve),2),de=a(ge);de.__click=()=>da(e(b),"outdoor_climbs");var P=s(de,2);P.__click=re;var le=a(P);{var xe=n=>{var _=Mr();jt(),i(n,_)},qe=n=>{var _=Ot("‚òÅÔ∏è Fetch Data");i(n,_)};c(le,n=>{e(q)?n(xe):n(qe,!1)})}t(P),t(ge),t(ve);var ie=s(ve,2);{var F=n=>{var _=Pr(),S=a(_,!0);t(_),g(()=>o(S,e(T))),et(3,_,()=>lt),i(n,_)};c(ie,n=>{e(T)&&n(F)})}var B=s(ie,2);Xs(B,{onFilterParamsChange:Te});var L=s(B,2),Z=a(L),K=a(Z);fa(K),t(Z),jt(2),t(L);var Q=s(L,2),oe=a(Q);Ee(oe,17,()=>e(b).slice(0,e(C)),n=>n.id,(n,_)=>{jr(n,{get session(){return e(_)},onDelete:W})});var te=s(oe,2);{var y=n=>{var _=Rr(),S=s(a(_),2);{var V=ne=>{var A=Ir();i(ne,A)};c(S,ne=>{e(r).length>0&&ne(V)})}t(_),i(n,_)};c(te,n=>{e(b).length===0&&n(y)})}var d=s(te,2);{var u=n=>{var _=Br(),S=a(_);S.__click=se;var V=a(S);t(S),t(_),g(()=>o(V,`Load More (${e(b).length-e(C)} remaining)`)),i(n,_)};c(d,n=>{e(C)<e(b).length&&n(u)})}t(Q),t(z),g(()=>P.disabled=e(q)),i(ze,z),bt()}ft(["click"]);var Wr=v('<span class="chevron svelte-11rkzid">‚ñ≤</span>'),Hr=v('<span class="chevron svelte-11rkzid">‚ñº</span>'),Yr=v('<div class="filter-body svelte-11rkzid"><div class="filter-grid svelte-11rkzid"><div class="filter-item svelte-11rkzid"><label for="start-date" class="svelte-11rkzid">Start Date</label> <input type="date" id="start-date" class="svelte-11rkzid"/></div> <div class="filter-item svelte-11rkzid"><label for="end-date" class="svelte-11rkzid">End Date</label> <input type="date" id="end-date" class="svelte-11rkzid"/></div> <div class="filter-item svelte-11rkzid"><label for="name-filter" class="svelte-11rkzid">Session Name</label> <input type="text" id="name-filter" placeholder="e.g. Leg Day" class="svelte-11rkzid"/></div> <div class="filter-item svelte-11rkzid"><label for="block-filter" class="svelte-11rkzid">Training Block</label> <select id="block-filter" class="svelte-11rkzid"><option>All Blocks</option><option>Strength</option><option>Power</option><option>Power Endurance</option><option>Muscular Endurance</option></select></div></div> <div class="filter-actions svelte-11rkzid"><button class="reset-btn svelte-11rkzid">Reset Filters</button></div></div>'),Jr=v('<div class="filter-container svelte-11rkzid"><button class="filter-header svelte-11rkzid"><div class="header-content svelte-11rkzid"><span class="icon svelte-11rkzid">üîç</span> <span class="title svelte-11rkzid">Filters</span> <!></div></button> <!></div>');function Zr(ze,p){mt(p,!0);let r=h(!1),b=h(""),q=h(""),T=h(""),m=h("");function C(){l(r,!e(r))}function w(){l(b,""),l(q,""),l(T,""),l(m,""),W()}function W(){p.onFilterParamsChange({startDate:e(b),endDate:e(q),name:e(T),trainingBlock:e(m)})}var re=Jr(),ue=a(re);ue.__click=C;var Te=a(ue),ee=s(a(Te),4);{var se=de=>{var P=Wr();i(de,P)},z=de=>{var P=Hr();i(de,P)};c(ee,de=>{e(r)?de(se):de(z,!1)})}t(Te),t(ue);var ve=s(ue,2);{var ge=de=>{var P=Yr(),le=a(P),xe=a(le),qe=s(a(xe),2);Ve(qe),qe.__change=W,t(xe);var ie=s(xe,2),F=s(a(ie),2);Ve(F),F.__change=W,t(ie);var B=s(ie,2),L=s(a(B),2);Ve(L),L.__input=W,t(B);var Z=s(B,2),K=s(a(Z),2);K.__change=W;var Q=a(K);Q.value=Q.__value="";var oe=s(Q);oe.value=oe.__value="Strength";var te=s(oe);te.value=te.__value="Power";var y=s(te);y.value=y.__value="Power Endurance";var d=s(y);d.value=d.__value="Muscular Endurance",t(K),t(Z),t(le);var u=s(le,2),n=a(u);n.__click=w,t(u),t(P),Ie(qe,()=>e(b),_=>l(b,_)),Ie(F,()=>e(q),_=>l(q,_)),Ie(L,()=>e(T),_=>l(T,_)),zt(K,()=>e(m),_=>l(m,_)),et(3,P,()=>lt,()=>({duration:200})),i(de,P)};c(ve,de=>{e(r)&&de(ge)})}t(re),g(()=>rt(ue,"aria-expanded",e(r))),i(ze,re),bt()}ft(["click","change","input"]);var Kr=v('<span class="status-icon pending svelte-cirrfc" title="Waiting to sync">üîÑ</span>'),Xr=v('<span class="status-icon error svelte-cirrfc" title="Sync error">‚ö†Ô∏è</span>'),Qr=v('<div class="bw-info svelte-cirrfc"><span class="label svelte-cirrfc">Bodyweight:</span> </div>'),$r=v('<span class="muscle-tag svelte-cirrfc"> </span>'),ei=v('<span class="muscle-tag svelte-cirrfc"> </span>'),ti=v('<div class="muscle-tags svelte-cirrfc"><!> <!></div>'),ai=v('<span class="tag w svelte-cirrfc">W</span>'),si=v('<span class="tag f svelte-cirrfc">F</span>'),ri=v('<span class="tag d svelte-cirrfc">D</span>'),ii=v('<div><span class="set-num svelte-cirrfc"></span> <!> <!> <!> <span class="val svelte-cirrfc"><span class="weight"> </span> <span class="x svelte-cirrfc">x</span> <span class="reps"> </span></span></div>'),li=v('<div class="exercise-item svelte-cirrfc"><div class="exercise-header svelte-cirrfc"><h4 class="svelte-cirrfc"> </h4> <!></div> <div class="sets-grid svelte-cirrfc"></div></div>'),ni=v('<div class="subcategory-group svelte-cirrfc"><h5 class="subcategory-header svelte-cirrfc"> </h5> <!></div>'),vi=v('<div class="category-group svelte-cirrfc"><h4 class="category-header svelte-cirrfc"> </h4> <!></div>'),oi=v('<div class="card-body svelte-cirrfc"><!> <div class="exercises-list svelte-cirrfc"></div></div>'),di=v('<div><div class="card-header svelte-cirrfc" role="button" tabindex="0"><div class="header-main svelte-cirrfc"><div class="date-badge svelte-cirrfc"><span class="day svelte-cirrfc"> </span> <span class="month svelte-cirrfc"> </span> <span class="year svelte-cirrfc"> </span></div> <div class="session-info svelte-cirrfc"><div class="session-text"><h3 class="name svelte-cirrfc"> </h3> <div class="session-meta svelte-cirrfc"><span class="stat svelte-cirrfc"> </span> <span class="stat svelte-cirrfc"> </span> <span class="stat svelte-cirrfc"> </span></div></div></div></div> <div class="header-actions svelte-cirrfc"><div class="header-status"><!></div> <button class="btn-icon delete-session svelte-cirrfc" title="Delete Session">üóëÔ∏è</button> <span class="chevron svelte-cirrfc"> </span></div></div> <!></div> <!>',1);function ci(ze,p){mt(p,!0);let r=h(!1),b=h(!1);function q(){l(r,!e(r))}function T(){l(b,!0)}function m(){sa(p.session.id),l(b,!1),p.onDelete()}function C(O){return wa.find(pe=>pe.name===O)}let w=ut(()=>p.session.exercises?.length??0),W=ut(()=>(p.session.exercises||[]).reduce((O,pe)=>O+(pe.sets?.length||0),0)),re=ut(()=>(p.session.exercises||[]).reduce((O,pe)=>O+(pe.sets||[]).reduce((ke,Y)=>ke+(Y.weight||0)*(Y.reps||0),0),0)),ue=ut(()=>(p.session.exercises||[]).reduce((O,pe)=>{const ke=C(pe.name),Y=ke?.category||"Other",N=ke?.subcategory||"Misc";return O[Y]||(O[Y]={}),O[Y][N]||(O[Y][N]=[]),O[Y][N].push(pe),O},{}));var Te=di(),ee=Me(Te);let se;var z=a(ee);z.__click=q,z.__keydown=O=>O.key==="Enter"&&q();var ve=a(z),ge=a(ve),de=a(ge),P=a(de,!0);t(de);var le=s(de,2),xe=a(le,!0);t(le);var qe=s(le,2),ie=a(qe,!0);t(qe),t(ge);var F=s(ge,2),B=a(F),L=a(B),Z=a(L,!0);t(L);var K=s(L,2),Q=a(K),oe=a(Q);t(Q);var te=s(Q,2),y=a(te);t(te);var d=s(te,2),u=a(d);t(d),t(K),t(B),t(F),t(ve);var n=s(ve,2),_=a(n),S=a(_);{var V=O=>{var pe=Kr();i(O,pe)},ne=O=>{var pe=Xe(),ke=Me(pe);{var Y=N=>{var X=Xr();i(N,X)};c(ke,N=>{p.session.syncStatus==="error"&&N(Y)},!0)}i(O,pe)};c(S,O=>{p.session.syncStatus==="pending"?O(V):O(ne,!1)})}t(_);var A=s(_,2);A.__click=O=>{O.stopPropagation(),T()};var he=s(A,2),ce=a(he,!0);t(he),t(n),t(z);var Se=s(z,2);{var k=O=>{var pe=oi(),ke=a(pe);{var Y=X=>{var Ce=Qr(),Le=s(a(Ce));t(Ce),g(()=>o(Le,` ${p.session.bodyweight??""}kg`)),i(X,Ce)};c(ke,X=>{p.session.bodyweight&&X(Y)})}var N=s(ke,2);Ee(N,21,()=>Object.entries(e(ue)),Ae,(X,Ce)=>{var Le=ut(()=>ca(e(Ce),2));let fe=()=>e(Le)[0],me=()=>e(Le)[1];var U=vi(),be=a(U),ye=a(be,!0);t(be);var H=s(be,2);Ee(H,17,()=>Object.entries(me()),Ae,(I,we)=>{var De=ut(()=>ca(e(we),2));let E=()=>e(De)[0],x=()=>e(De)[1];var j=ni(),Fe=a(j),Pe=a(Fe,!0);t(Fe);var Oe=s(Fe,2);Ee(Oe,17,x,Ae,(Qe,He)=>{const Ye=ut(()=>C(e(He).name));var Tt=li(),ht=a(Tt),qt=a(ht),yt=a(qt,!0);t(qt);var Ct=s(qt,2);{var St=Je=>{var Re=ti(),gt=a(Re);Ee(gt,17,()=>e(Ye).targetMuscles.slice(0,3),Ae,(at,Ge)=>{var Ne=$r(),Ze=a(Ne,!0);t(Ne),g(()=>o(Ze,e(Ge))),i(at,Ne)});var tt=s(gt,2);{var xt=at=>{var Ge=ei(),Ne=a(Ge);t(Ge),g(()=>o(Ne,`+${e(Ye).targetMuscles.length-3}`)),i(at,Ge)};c(tt,at=>{e(Ye).targetMuscles.length>3&&at(xt)})}t(Re),i(Je,Re)};c(Ct,Je=>{e(Ye)&&Je(St)})}t(ht);var nt=s(ht,2);Ee(nt,21,()=>e(He).sets,Ae,(Je,Re,gt)=>{var tt=ii();let xt;var at=a(tt);at.textContent=gt+1;var Ge=s(at,2);{var Ne=Ke=>{var it=ai();i(Ke,it)};c(Ge,Ke=>{e(Re).isWarmup&&Ke(Ne)})}var Ze=s(Ge,2);{var Ue=Ke=>{var it=si();i(Ke,it)};c(Ze,Ke=>{e(Re).isFailure&&Ke(Ue)})}var st=s(Ze,2);{var Be=Ke=>{var it=ri();i(Ke,it)};c(st,Ke=>{e(Re).isDropSet&&Ke(Be)})}var We=s(st,2),ct=a(We),kt=a(ct);t(ct);var Dt=s(ct,4),Lt=a(Dt,!0);t(Dt),t(We),t(tt),g(()=>{xt=dt(tt,1,"set-pill svelte-cirrfc",null,xt,{completed:e(Re).completed,warmup:e(Re).isWarmup}),o(kt,`${e(Re).weight??""}kg`),o(Lt,e(Re).reps)}),i(Je,tt)}),t(nt),t(Tt),g(()=>o(yt,e(He).name)),i(Qe,Tt)}),t(j),g(()=>o(Pe,E())),i(I,j)}),t(U),g(()=>o(ye,fe())),i(X,U)}),t(N),t(pe),et(3,pe,()=>lt,()=>({duration:150})),i(O,pe)};c(Se,O=>{e(r)&&O(k)})}t(ee);var ae=s(ee,2);Kt(ae,{get isOpen(){return e(b)},title:"Delete Session",message:"Are you sure you want to delete this session? This cannot be undone.",onConfirm:m,onCancel:()=>l(b,!1)}),g((O,pe,ke,Y)=>{se=dt(ee,1,"session-card svelte-cirrfc",null,se,{expanded:e(r)}),rt(z,"aria-expanded",e(r)),o(P,O),o(xe,pe),o(ie,ke),o(Z,p.session.name),o(oe,`${e(w)??""} Exercises`),o(y,`${e(W)??""} Sets`),o(u,`~${Y??""}kg Vol`),o(ce,e(r)?"‚ñ≤":"‚ñº")},[()=>new Date(p.session.date).getDate(),()=>new Date(p.session.date).toLocaleDateString("en-GB",{month:"short"}),()=>new Date(p.session.date).getFullYear(),()=>Math.round(e(re)).toLocaleString()]),i(ze,Te),bt()}ft(["click","keydown"]);var pi=v('<span class="spinner svelte-133enjd"></span> Fetching...',1),_i=v('<div class="error-banner svelte-133enjd"> </div>'),ui=v('<small class="svelte-133enjd">Try adjusting your filters.</small>'),fi=v('<div class="empty-state svelte-133enjd"><p class="svelte-133enjd">No gym sessions found.</p> <!></div>'),gi=v('<div class="load-more-container svelte-133enjd"><button class="load-more-btn svelte-133enjd"> </button></div>'),mi=v('<div class="view-container svelte-133enjd"><div class="view-header svelte-133enjd"><h2 class="view-title svelte-133enjd">üèãÔ∏è Gym Session History</h2> <div class="header-actions svelte-133enjd"><button class="action-btn secondary svelte-133enjd" title="Export filtered data to CSV">üì• Export</button> <button class="action-btn svelte-133enjd" title="Fetch data from cloud"><!></button></div></div> <!> <!> <div class="sessions-list"><!> <!> <!></div></div>');function bi(ze,p){mt(p,!0);let r=h(ot([])),b=h(ot([])),q=h(!1),T=h(""),m=h(ot({startDate:"",endDate:"",name:"",trainingBlock:""})),C=h(20);const w=20;oa(()=>{W()});function W(){const y=Zt("gym_session");l(r,y.sort((d,u)=>new Date(u.date).getTime()-new Date(d.date).getTime()),!0),ee()}async function re(){l(q,!0),l(T,"");try{await aa();const y=await Sa();y.ok&&y.data?ue(y.data):l(T,y.error||"Failed to fetch data",!0)}catch(y){l(T,y instanceof Error?y.message:"Unknown error",!0)}finally{l(q,!1)}}function ue(y){const d=y.map(n=>({...n,activityType:"gym_session",syncStatus:"synced",syncedAt:new Date().toISOString(),createdAt:n.createdAt||new Date().toISOString(),updatedAt:n.updatedAt||new Date().toISOString()}));ra(d);const u=Zt("gym_session");l(r,u.sort((n,_)=>new Date(_.date).getTime()-new Date(n.date).getTime()),!0),ee()}function Te(y){l(m,y,!0),ee()}function ee(){l(C,w),l(b,e(r).filter(y=>!(e(m).startDate&&y.date<e(m).startDate||e(m).endDate&&y.date>e(m).endDate||e(m).name&&!y.name.toLowerCase().includes(e(m).name.toLowerCase())||e(m).trainingBlock&&y.trainingBlock!==e(m).trainingBlock)),!0)}function se(){l(C,e(C)+w)}var z=mi(),ve=a(z),ge=s(a(ve),2),de=a(ge);de.__click=()=>da(e(b),"gym_sessions");var P=s(de,2);P.__click=re;var le=a(P);{var xe=y=>{var d=pi();jt(),i(y,d)},qe=y=>{var d=Ot("‚òÅÔ∏è Fetch Data");i(y,d)};c(le,y=>{e(q)?y(xe):y(qe,!1)})}t(P),t(ge),t(ve);var ie=s(ve,2);{var F=y=>{var d=_i(),u=a(d,!0);t(d),g(()=>o(u,e(T))),et(3,d,()=>lt),i(y,d)};c(ie,y=>{e(T)&&y(F)})}var B=s(ie,2);Zr(B,{onFilterParamsChange:Te});var L=s(B,2),Z=a(L);Ee(Z,17,()=>e(b).slice(0,e(C)),y=>y.id,(y,d)=>{ci(y,{get session(){return e(d)},onDelete:W})});var K=s(Z,2);{var Q=y=>{var d=fi(),u=s(a(d),2);{var n=_=>{var S=ui();i(_,S)};c(u,_=>{e(r).length>0&&_(n)})}t(d),i(y,d)};c(K,y=>{e(b).length===0&&y(Q)})}var oe=s(K,2);{var te=y=>{var d=gi(),u=a(d);u.__click=se;var n=a(u);t(u),t(d),g(()=>o(n,`Load More (${e(b).length-e(C)} remaining)`)),i(y,d)};c(oe,y=>{e(C)<e(b).length&&y(te)})}t(L),t(z),g(()=>P.disabled=e(q)),i(ze,z),bt()}ft(["click"]);var hi=v('<span class="spinner svelte-1szs0u9"></span> Fetching...',1),yi=v('<div class="loading svelte-1szs0u9">Loading sessions...</div>'),xi=v('<div class="empty-state svelte-1szs0u9"><!></div>'),wi=v('<span class="set-tag svelte-1szs0u9"> <span class="x svelte-1szs0u9">x</span> </span>'),Si=v('<div class="ex-notes svelte-1szs0u9"> </div>'),ki=v('<div class="exercise-item svelte-1szs0u9"><div class="ex-header svelte-1szs0u9"><span class="ex-name svelte-1szs0u9"> </span> <span class="ex-grip svelte-1szs0u9"> </span></div> <div class="ex-sets svelte-1szs0u9"></div> <!></div>'),Di=v('<div class="card-body svelte-1szs0u9"><div class="exercises-list svelte-1szs0u9"></div></div>'),Ti=v('<div><div class="card-header svelte-1szs0u9" role="button" tabindex="0"><div class="header-main"><span class="session-date svelte-1szs0u9"> </span> <span class="meta svelte-1szs0u9"><!> </span></div> <div class="header-status svelte-1szs0u9"><span>‚óè</span> <button class="btn-icon delete-btn svelte-1szs0u9" title="Delete Session">üóëÔ∏è</button> <span class="chevron svelte-1szs0u9"> </span></div></div> <!></div>'),qi=v('<div class="load-more-container svelte-1szs0u9"><button class="load-more-btn svelte-1szs0u9"> </button></div>'),Ci=v('<div class="timeline svelte-1szs0u9"><!> <!></div>'),Li=v('<div class="view-content svelte-1szs0u9"><div class="header svelte-1szs0u9"><h3 class="svelte-1szs0u9">ü§è Fingerboarding Log</h3> <button class="fetch-btn svelte-1szs0u9" title="Fetch data from cloud"><!></button></div> <div class="filters svelte-1szs0u9"><div class="filter-group svelte-1szs0u9"><label for="start-date" class="svelte-1szs0u9">From</label> <input type="date" id="start-date" class="svelte-1szs0u9"/></div> <div class="filter-group svelte-1szs0u9"><label for="end-date" class="svelte-1szs0u9">To</label> <input type="date" id="end-date" class="svelte-1szs0u9"/></div></div> <!></div> <!>',1);function zi(ze,p){mt(p,!0);let r=h(ot([])),b=h(!0),q=h(""),T=h(""),m=h(ot(new Set)),C=h(20);const w=20;ga(()=>{e(q),e(T),l(C,w)});let W=h(!1),re=h(null);function ue(u){l(re,u,!0),l(W,!0)}function Te(){e(re)&&(sa(e(re)),l(re,null),l(W,!1),l(r,na().sort((u,n)=>new Date(n.date).getTime()-new Date(u.date).getTime()),!0))}async function ee(){l(b,!0),l(r,na().sort((u,n)=>new Date(n.date).getTime()-new Date(u.date).getTime()),!0);try{await aa();const u=await ka();if(u.ok&&u.data){const n=u.data.map(_=>({..._,activityType:"fingerboarding",createdAt:_.createdAt||new Date().toISOString(),updatedAt:_.updatedAt||new Date().toISOString(),syncStatus:"synced"}));ra(n),l(r,na().sort((_,S)=>new Date(S.date).getTime()-new Date(_.date).getTime()),!0)}}catch(u){console.error("Failed to sync",u)}finally{l(b,!1)}}ee();let se=ut(()=>e(r).filter(u=>!(e(q)&&new Date(u.date)<new Date(e(q))||e(T)&&new Date(u.date)>new Date(e(T)))));function z(){l(C,e(C)+w)}function ve(u){e(m).has(u)?e(m).delete(u):e(m).add(u),l(m,new Set(e(m)),!0)}function ge(u){return u.exercises.reduce((n,_)=>n+_.details.length,0)}var de=Li(),P=Me(de),le=a(P),xe=s(a(le),2);xe.__click=ee;var qe=a(xe);{var ie=u=>{var n=hi();jt(),i(u,n)},F=u=>{var n=Ot("‚òÅÔ∏è Fetch Data");i(u,n)};c(qe,u=>{e(b)?u(ie):u(F,!1)})}t(xe),t(le);var B=s(le,2),L=a(B),Z=s(a(L),2);Ve(Z),t(L);var K=s(L,2),Q=s(a(K),2);Ve(Q),t(K),t(B);var oe=s(B,2);{var te=u=>{var n=yi();i(u,n)},y=u=>{var n=Xe(),_=Me(n);{var S=ne=>{var A=xi(),he=a(A);{var ce=k=>{var ae=Ot("No sessions match filter.");i(k,ae)},Se=k=>{var ae=Ot("No fingerboarding sessions logged yet.");i(k,ae)};c(he,k=>{e(r).length>0?k(ce):k(Se,!1)})}t(A),i(ne,A)},V=ne=>{var A=Ci(),he=a(A);Ee(he,17,()=>e(se).slice(0,e(C)),Ae,(k,ae)=>{var O=Ti();let pe;var ke=a(O);ke.__click=()=>ve(e(ae).id),ke.__keydown=x=>x.key==="Enter"&&ve(e(ae).id);var Y=a(ke),N=a(Y),X=a(N,!0);t(N);var Ce=s(N,2),Le=a(Ce);{var fe=x=>{var j=Ot();g(()=>o(j,`${e(ae).location??""} ¬∑`)),i(x,j)};c(Le,x=>{e(ae).location&&e(ae).location!=="N/A"&&e(ae).location!=="Home"&&x(fe)})}var me=s(Le);t(Ce),t(Y);var U=s(Y,2),be=a(U);let ye;var H=s(be,2);H.__click=x=>{x.stopPropagation(),ue(e(ae).id)};var I=s(H,2),we=a(I,!0);t(I),t(U),t(ke);var De=s(ke,2);{var E=x=>{var j=Di(),Fe=a(j);Ee(Fe,21,()=>e(ae).exercises||[],Ae,(Pe,Oe)=>{var Qe=ki(),He=a(Qe),Ye=a(He),Tt=a(Ye,!0);t(Ye);var ht=s(Ye,2),qt=a(ht,!0);t(ht),t(He);var yt=s(He,2);Ee(yt,21,()=>e(Oe).details,Ae,(nt,Je)=>{var Re=wi(),gt=a(Re),tt=s(gt,2);t(Re),g(()=>{o(gt,`${e(Je).weight>0?`+${e(Je).weight}kg`:"BW"} `),o(tt,` ${e(Je).reps??""}s/reps`)}),i(nt,Re)}),t(yt);var Ct=s(yt,2);{var St=nt=>{var Je=Si(),Re=a(Je);t(Je),g(()=>o(Re,`"${e(Oe).notes??""}"`)),i(nt,Je)};c(Ct,nt=>{e(Oe).notes&&nt(St)})}t(Qe),g(()=>{o(Tt,e(Oe).name),o(qt,e(Oe).gripType)}),i(Pe,Qe)}),t(Fe),t(j),et(3,j,()=>lt,()=>({duration:150})),i(x,j)};c(De,x=>{e(m).has(e(ae).id)&&x(E)})}t(O),g((x,j,Fe,Pe)=>{pe=dt(O,1,"session-card svelte-1szs0u9",null,pe,x),o(X,j),o(me,` ${e(ae).exercises.length??""} Exercises ¬∑ ${Fe??""} Sets`),ye=dt(be,1,"sync-dot svelte-1szs0u9",null,ye,{synced:e(ae).syncStatus==="synced"}),rt(be,"title",e(ae).syncStatus==="synced"?"Synced":"Local"),o(we,Pe)},[()=>({expanded:e(m).has(e(ae).id)}),()=>new Date(e(ae).date).toLocaleDateString(void 0,{weekday:"short",month:"short",day:"numeric",year:"numeric"}),()=>ge(e(ae)),()=>e(m).has(e(ae).id)?"‚ñ≤":"‚ñº"]),i(k,O)});var ce=s(he,2);{var Se=k=>{var ae=qi(),O=a(ae);O.__click=z;var pe=a(O);t(O),t(ae),g(()=>o(pe,`Load More (${e(se).length-e(C)} remaining)`)),i(k,ae)};c(ce,k=>{e(C)<e(se).length&&k(Se)})}t(A),i(ne,A)};c(_,ne=>{e(se).length===0?ne(S):ne(V,!1)},!0)}i(u,n)};c(oe,u=>{e(b)&&e(r).length===0?u(te):u(y,!1)})}t(P);var d=s(P,2);Kt(d,{get isOpen(){return e(W)},title:"Delete Fingerboard Session",message:"Are you sure you want to delete this session? This cannot be undone.",onConfirm:Te,onCancel:()=>l(W,!1)}),g(()=>xe.disabled=e(b)),Ie(Z,()=>e(q),u=>l(q,u)),Ie(Q,()=>e(T),u=>l(T,u)),i(ze,de),bt()}ft(["click","keydown"]);var Fi=v('<span class="spinner svelte-xyvf5r"></span> Fetching...',1),Ei=v('<div class="loading svelte-xyvf5r">Loading sessions...</div>'),Gi=v('<div class="empty-state svelte-xyvf5r">No competitions logged yet.</div>'),Ni=v('<button class="icon-btn edit-notes-btn svelte-xyvf5r" title="Edit Notes">‚úé</button>'),Ai=v('<div class="edit-notes-area"><textarea placeholder="Add session notes..." rows="3" class="notes-editor svelte-xyvf5r"></textarea> <div class="edit-actions svelte-xyvf5r"><button class="cancel-btn svelte-xyvf5r">Cancel</button> <button class="save-btn svelte-xyvf5r"> </button></div></div>'),Oi=v('<p class="note-text svelte-xyvf5r"> </p>'),ji=v('<p class="notes-placeholder svelte-xyvf5r">No notes.</p>'),Mi=v('<span class="round-pos svelte-xyvf5r"> </span>'),Pi=v('<span class="c-attempts svelte-xyvf5r"> </span>'),Ii=v('<div class="climb-notes svelte-xyvf5r"> </div>'),Ri=v('<div class="climb-row svelte-xyvf5r"><div class="climb-info svelte-xyvf5r"><span class="c-name svelte-xyvf5r"> </span> <!></div> <div class="climb-result"><span> </span></div></div> <!>',1),Bi=v('<div class="climbs-list"></div>'),Vi=v('<div class="round-item svelte-xyvf5r"><div class="round-header svelte-xyvf5r"><span class="round-name"> </span> <!></div> <!></div>'),Ui=v('<div class="rounds-list svelte-xyvf5r"></div>'),Wi=v('<div class="load-meta svelte-xyvf5r"><span> </span></div>'),Hi=v('<div class="card-body svelte-xyvf5r"><div class="session-notes-container svelte-xyvf5r"><div class="notes-header svelte-xyvf5r"><span class="note-label svelte-xyvf5r">Session Notes</span> <!></div> <!></div> <!> <!> <div class="session-footer svelte-xyvf5r"><span> </span></div></div>'),Yi=v('<div><div class="card-header svelte-xyvf5r" role="button" tabindex="0"><div class="header-main svelte-xyvf5r"><div class="left-col svelte-xyvf5r"><span class="venue svelte-xyvf5r"> </span> <span class="date svelte-xyvf5r"> </span></div> <div class="right-col svelte-xyvf5r"><div class="badges svelte-xyvf5r"><span class="type-tag svelte-xyvf5r"> </span> <span class="result-tag svelte-xyvf5r"> </span></div></div></div> <div class="header-status svelte-xyvf5r"><span>‚óè</span> <button class="btn-icon delete-btn svelte-xyvf5r" title="Delete Session">üóëÔ∏è</button> <span class="chevron svelte-xyvf5r"> </span></div></div> <!></div>'),Ji=v('<div class="load-more-container svelte-xyvf5r"><button class="load-more-btn svelte-xyvf5r"> </button></div>'),Zi=v('<div class="timeline svelte-xyvf5r"><!> <!></div>'),Ki=v('<div class="view-content svelte-xyvf5r"><div class="header svelte-xyvf5r"><h3 class="svelte-xyvf5r">üèÜ Competition Log</h3> <button class="fetch-btn svelte-xyvf5r" title="Fetch data from cloud"><!></button></div> <!> <!></div>');function Xi(ze,p){mt(p,!0);let r=h(ot([])),b=h(!0),q=h(ot(new Set)),T=h(20);const m=20;let C=h(!1),w=h(null);function W(d){l(w,d,!0),l(C,!0)}function re(){e(w)&&(sa(e(w)),l(w,null),l(C,!1),l(r,va().sort((d,u)=>new Date(u.date).getTime()-new Date(d.date).getTime()),!0))}async function ue(){l(b,!0),l(T,m),l(r,va().sort((d,u)=>new Date(u.date).getTime()-new Date(d.date).getTime()),!0);try{await aa();const d=await Da();if(d.ok&&d.data){const u=d.data.map(n=>({...n,activityType:"competition",type:n.type,rounds:n.rounds.map(_=>({..._,climbs:_.climbs?.map(S=>({...S,status:S.status}))})),createdAt:n.createdAt||new Date().toISOString(),updatedAt:n.updatedAt||new Date().toISOString(),syncStatus:"synced"}));ra(u),l(r,va().sort((n,_)=>new Date(_.date).getTime()-new Date(n.date).getTime()),!0)}}catch(d){console.error("Failed to sync",d)}finally{l(b,!1)}}ue();function Te(d){e(q).has(d)?e(q).delete(d):e(q).add(d),l(q,new Set(e(q)),!0)}function ee(){l(T,e(T)+m)}function se(d){if(!d.rounds||d.rounds.length===0)return"No rounds";const u=d.rounds[d.rounds.length-1];if(u.position)return`#${u.position} ${u.name}`;if(u.climbs){const n=u.climbs.filter(S=>S.status==="Top"||S.status==="Flash").length,_=u.climbs.filter(S=>S.status==="Zone").length;return`${d.rounds.length} Rnds ¬∑ Final: ${n}T ${_+n}Z`}return u.name}let z=h(ot(new Set)),ve=h(ot(new Map)),ge=h(ot(new Set));function de(d){e(ve).set(d.id,d.notes||""),l(ve,new Map(e(ve)),!0),e(z).add(d.id),l(z,new Set(e(z)),!0)}function P(d){e(z).delete(d),l(z,new Set(e(z)),!0),e(ve).delete(d),l(ve,new Map(e(ve)),!0)}function le(d){return e(ve).get(d)||""}function xe(d,u){e(ve).set(d,u),l(ve,new Map(e(ve)),!0)}async function qe(d){if(e(ge).has(d.id))return;const u=e(ve).get(d.id);if(u===void 0)return;e(ge).add(d.id),l(ge,new Set(e(ge)),!0),Ut(d.id,{notes:u});const n=e(r).find(_=>_.id===d.id);if(n&&(n.notes=u),$t()){const _={date:d.date,venue:d.venue,customVenue:d.customVenue,type:d.type,fingerLoad:d.fingerLoad,shoulderLoad:d.shoulderLoad,forearmLoad:d.forearmLoad,rounds:d.rounds,notes:u};try{const S=await Ta(d.id,_);S.ok?(ea(d.id),n&&(n.syncStatus="synced")):(console.error("Failed to sync note update:",S.error),Ft(d.id),n&&(n.syncStatus="error"))}catch(S){console.error("Exception syncing note update:",S),Ft(d.id),n&&(n.syncStatus="error")}}e(z).delete(d.id),l(z,new Set(e(z)),!0),e(ge).delete(d.id),l(ge,new Set(e(ge)),!0)}var ie=Ki(),F=a(ie),B=s(a(F),2);B.__click=ue;var L=a(B);{var Z=d=>{var u=Fi();jt(),i(d,u)},K=d=>{var u=Ot("‚òÅÔ∏è Fetch Data");i(d,u)};c(L,d=>{e(b)?d(Z):d(K,!1)})}t(B),t(F);var Q=s(F,2);{var oe=d=>{var u=Ei();i(d,u)},te=d=>{var u=Xe(),n=Me(u);{var _=V=>{var ne=Gi();i(V,ne)},S=V=>{var ne=Zi(),A=a(ne);Ee(A,17,()=>e(r).slice(0,e(T)),Ae,(Se,k)=>{var ae=Yi();let O;var pe=a(ae);pe.__click=()=>Te(e(k).id),pe.__keydown=Oe=>Oe.key==="Enter"&&Te(e(k).id);var ke=a(pe),Y=a(ke),N=a(Y),X=a(N,!0);t(N);var Ce=s(N,2),Le=a(Ce,!0);t(Ce),t(Y);var fe=s(Y,2),me=a(fe),U=a(me),be=a(U,!0);t(U);var ye=s(U,2),H=a(ye,!0);t(ye),t(me),t(fe),t(ke);var I=s(ke,2),we=a(I);let De;var E=s(we,2);E.__click=Oe=>{Oe.stopPropagation(),W(e(k).id)};var x=s(E,2),j=a(x,!0);t(x),t(I),t(pe);var Fe=s(pe,2);{var Pe=Oe=>{var Qe=Hi(),He=a(Qe),Ye=a(He),Tt=s(a(Ye),2);{var ht=Ge=>{var Ne=Ni();Ne.__click=()=>de(e(k)),i(Ge,Ne)};c(Tt,Ge=>{e(z).has(e(k).id)||Ge(ht)})}t(Ye);var qt=s(Ye,2);{var yt=Ge=>{var Ne=Ai(),Ze=a(Ne);ta(Ze),Ze.__input=ct=>xe(e(k).id,ct.currentTarget.value);var Ue=s(Ze,2),st=a(Ue);st.__click=()=>P(e(k).id);var Be=s(st,2);Be.__click=()=>qe(e(k));var We=a(Be,!0);t(Be),t(Ue),t(Ne),g((ct,kt,Dt,Lt)=>{ma(Ze,ct),st.disabled=kt,Be.disabled=Dt,o(We,Lt)},[()=>le(e(k).id),()=>e(ge).has(e(k).id),()=>e(ge).has(e(k).id),()=>e(ge).has(e(k).id)?"Saving...":"Save"]),et(3,Ne,()=>lt,()=>({duration:150})),i(Ge,Ne)},Ct=Ge=>{var Ne=Xe(),Ze=Me(Ne);{var Ue=Be=>{var We=Oi(),ct=a(We,!0);t(We),g(()=>o(ct,e(k).notes)),i(Be,We)},st=Be=>{var We=ji();i(Be,We)};c(Ze,Be=>{e(k).notes?Be(Ue):Be(st,!1)},!0)}i(Ge,Ne)};c(qt,Ge=>{e(z).has(e(k).id)?Ge(yt):Ge(Ct,!1)})}t(He);var St=s(He,2);{var nt=Ge=>{var Ne=Ui();Ee(Ne,21,()=>e(k).rounds||[],Ae,(Ze,Ue)=>{var st=Vi(),Be=a(st),We=a(Be),ct=a(We,!0);t(We);var kt=s(We,2);{var Dt=it=>{var wt=Mi(),It=a(wt);t(wt),g(()=>o(It,`#${e(Ue).position??""}`)),i(it,wt)};c(kt,it=>{e(Ue).position&&it(Dt)})}t(Be);var Lt=s(Be,2);{var Ke=it=>{var wt=Bi();Ee(wt,21,()=>e(Ue).climbs||[],Ae,(It,pt)=>{var Wt=Ri(),Et=Me(Wt),Rt=a(Et),Gt=a(Rt),Xt=a(Gt,!0);t(Gt);var Ht=s(Gt,2);{var Qt=M=>{var f=Pi(),D=a(f);t(f),g(()=>o(D,`(${e(pt).attemptCount??""} tries)`)),i(M,f)};c(Ht,M=>{e(pt).attemptCount>1&&M(Qt)})}t(Rt);var Bt=s(Rt,2),Mt=a(Bt);let Pt;var Yt=a(Mt,!0);t(Mt),t(Bt),t(Et);var Jt=s(Et,2);{var R=M=>{var f=Ii(),D=a(f);t(f),g(()=>o(D,`"${e(pt).notes??""}"`)),i(M,f)};c(Jt,M=>{e(pt).notes&&M(R)})}g(()=>{o(Xt,e(pt).name),Pt=dt(Mt,1,"status-badge svelte-xyvf5r",null,Pt,{top:e(pt).status==="Top"||e(pt).status==="Flash",zone:e(pt).status==="Zone"}),o(Yt,e(pt).status)}),i(It,Wt)}),t(wt),i(it,wt)};c(Lt,it=>{e(Ue).climbs&&it(Ke)})}t(st),g(()=>o(ct,e(Ue).name)),i(Ze,st)}),t(Ne),i(Ge,Ne)};c(St,Ge=>{e(k).rounds&&Ge(nt)})}var Je=s(St,2);{var Re=Ge=>{var Ne=Wi(),Ze=a(Ne),Ue=a(Ze);t(Ze),t(Ne),g(()=>o(Ue,`Detailed Load: Fingers ${e(k).fingerLoad??""}/5, Shoulders ${e(k).shoulderLoad??""}/5,
										Forearms ${e(k).forearmLoad??""}/5`)),i(Ge,Ne)};c(Je,Ge=>{(e(k).fingerLoad||e(k).shoulderLoad)&&Ge(Re)})}var gt=s(Je,2),tt=a(gt);let xt;var at=a(tt,!0);t(tt),t(gt),t(Qe),g(()=>{xt=dt(tt,1,"sync-status svelte-xyvf5r",null,xt,{synced:e(k).syncStatus==="synced"}),o(at,e(k).syncStatus==="synced"?"‚úì Synced":"‚òÅ Local")}),et(3,Qe,()=>lt,()=>({duration:150})),i(Oe,Qe)};c(Fe,Oe=>{e(q).has(e(k).id)&&Oe(Pe)})}t(ae),g((Oe,Qe,He,Ye)=>{O=dt(ae,1,"session-card svelte-xyvf5r",null,O,Oe),o(X,e(k).customVenue||e(k).venue),o(Le,Qe),o(be,e(k).type),o(H,He),De=dt(we,1,"sync-dot",null,De,{synced:e(k).syncStatus==="synced"}),rt(we,"title",e(k).syncStatus==="synced"?"Synced":"Local"),o(j,Ye)},[()=>({expanded:e(q).has(e(k).id)}),()=>new Date(e(k).date).toLocaleDateString(void 0,{weekday:"short",day:"numeric",month:"short",year:"numeric"}),()=>se(e(k)),()=>e(q).has(e(k).id)?"‚ñ≤":"‚ñº"]),i(Se,ae)});var he=s(A,2);{var ce=Se=>{var k=Ji(),ae=a(k);ae.__click=ee;var O=a(ae);t(ae),t(k),g(()=>o(O,`Load More (${e(r).length-e(T)} remaining)`)),i(Se,k)};c(he,Se=>{e(T)<e(r).length&&Se(ce)})}t(ne),i(V,ne)};c(n,V=>{e(r).length===0?V(_):V(S,!1)},!0)}i(d,u)};c(Q,d=>{e(b)&&e(r).length===0?d(oe):d(te,!1)})}var y=s(Q,2);Kt(y,{get isOpen(){return e(C)},title:"Delete Competition",message:"Are you sure you want to delete this competition session? This action cannot be undone.",onConfirm:re,onCancel:()=>l(C,!1)}),t(ie),g(()=>B.disabled=e(b)),i(ze,ie),bt()}ft(["click","keydown","input"]);var Qi=v('<button class="backdrop svelte-108px9u" aria-label="Close settings"></button> <div class="settings-modal svelte-108px9u" role="dialog" aria-modal="true"><div class="settings-header svelte-108px9u"><h3 class="svelte-108px9u">Settings</h3> <button class="close-btn svelte-108px9u">‚úï</button></div> <div class="settings-content"><div class="setting-item svelte-108px9u"><div class="setting-info svelte-108px9u"><span class="setting-label svelte-108px9u">Local Data</span> <span class="setting-desc svelte-108px9u">Clear all cached data on this device</span></div> <button class="btn-clear-cache svelte-108px9u">Clear Cache</button></div></div></div>',1),$i=v("<option> </option>"),el=v('<div class="view-container svelte-108px9u"><!></div>'),tl=v('<div class="page svelte-108px9u"><div class="page-header svelte-108px9u"><div><h1 class="svelte-108px9u">üìä View Data</h1> <p class="subtitle svelte-108px9u">Browse your training history</p></div> <button class="settings-btn svelte-108px9u" aria-label="Settings">‚öôÔ∏è</button></div> <!> <!> <div class="content-card svelte-108px9u"><div class="form-group svelte-108px9u"><label for="activity-type" class="svelte-108px9u">Activity Type</label> <select id="activity-type" class="svelte-108px9u"><option disabled>Select an activity...</option><!></select></div> <!></div></div>');function cl(ze,p){mt(p,!0);const r=[{value:"indoor_climb",label:"Indoor Climb",icon:"üßó"},{value:"outdoor_climb",label:"Outdoor Climb",icon:"‚õ∞Ô∏è"},{value:"gym_session",label:"Gym Session",icon:"üèãÔ∏è"},{value:"fingerboarding",label:"Fingerboarding",icon:"ü§è"},{value:"competition",label:"Competition",icon:"üèÜ"}];let b=h(""),q=h(!1),T=h(!1);function m(){l(q,!0)}function C(){l(q,!1)}function w(){l(q,!1),l(T,!0)}function W(){La()}var re=tl(),ue=a(re),Te=s(a(ue),2);Te.__click=m,t(ue);var ee=s(ue,2);{var se=ie=>{var F=Qi(),B=Me(F);B.__click=C;var L=s(B,2),Z=a(L),K=s(a(Z),2);K.__click=C,t(Z);var Q=s(Z,2),oe=a(Q),te=s(a(oe),2);te.__click=w,t(oe),t(Q),t(L),et(3,B,()=>qa,()=>({duration:200})),et(3,L,()=>Ca,()=>({duration:200,start:.9})),i(ie,F)};c(ee,ie=>{e(q)&&ie(se)})}var z=s(ee,2);Kt(z,{get isOpen(){return e(T)},title:"Clear all local data?",message:"Are you sure you want to clear all locally cached data? This will remove all sessions stored on this device. Data already synced to the cloud will be preserved.",confirmKeyword:"clear",onConfirm:W,onCancel:()=>l(T,!1)});var ve=s(z,2),ge=a(ve),de=s(a(ge),2),P=a(de);P.value=P.__value="";var le=s(P);Ee(le,17,()=>r,ie=>ie.value,(ie,F)=>{var B=$i(),L=a(B);t(B);var Z={};g(()=>{o(L,`${e(F).icon??""} ${e(F).label??""}`),Z!==(Z=e(F).value)&&(B.value=(B.__value=e(F).value)??"")}),i(ie,B)}),t(de),t(ge);var xe=s(ge,2);{var qe=ie=>{var F=el(),B=a(F);{var L=K=>{js(K,{})},Z=K=>{var Q=Xe(),oe=Me(Q);{var te=d=>{Ur(d,{})},y=d=>{var u=Xe(),n=Me(u);{var _=V=>{bi(V,{})},S=V=>{var ne=Xe(),A=Me(ne);{var he=Se=>{zi(Se,{})},ce=Se=>{var k=Xe(),ae=Me(k);{var O=pe=>{Xi(pe,{})};c(ae,pe=>{e(b)==="competition"&&pe(O)},!0)}i(Se,k)};c(A,Se=>{e(b)==="fingerboarding"?Se(he):Se(ce,!1)},!0)}i(V,ne)};c(n,V=>{e(b)==="gym_session"?V(_):V(S,!1)},!0)}i(d,u)};c(oe,d=>{e(b)==="outdoor_climb"?d(te):d(y,!1)},!0)}i(K,Q)};c(B,K=>{e(b)==="indoor_climb"?K(L):K(Z,!1)})}t(F),i(ie,F)};c(xe,ie=>{e(b)&&ie(qe)})}t(ve),t(re),zt(de,()=>e(b),ie=>l(b,ie)),i(ze,re),bt()}ft(["click"]);export{cl as component};
