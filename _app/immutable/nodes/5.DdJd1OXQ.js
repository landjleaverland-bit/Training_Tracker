import{f as v,a as r,c as Te,t as wa}from"../chunks/bxSSDmCG.js";import{H as es,$ as as,aZ as ss,aw as ts,q as is,e as rs,a_ as vs,aN as Ja,a$ as ns,ai as ls,b0 as Ea,p as va,c as a,s as i,i as s,aV as Z,r as e,t as y,a as na,F as o,f as xe,aW as ha,E as fa,o as Ka,aG as Fa}from"../chunks/BvwCwrbP.js";import{a as os,d as ea,s as l}from"../chunks/D97XAFTq.js";import{i as c}from"../chunks/DJDEC4-q.js";import{s as Ne,r as Xe,e as be,i as we,b as $e}from"../chunks/C6b-0WKN.js";import{c as Ta,j as Pa,k as Ya,l as Ra,n as Ba,o as Wa,p as Ha}from"../chunks/CIEREIgH.js";import{s as Be}from"../chunks/r3Oz2b9H.js";import{s as Ae}from"../chunks/CT9WbTd_.js";import{p as Aa}from"../chunks/BzRc-_KC.js";import{s as Ma,h as ds,g as cs,b as _s,j as us,k as fs,l as gs}from"../chunks/DD0kMcH3.js";import"../chunks/C34k2uMk.js";const ps=()=>performance.now(),ma={tick:C=>requestAnimationFrame(C),now:()=>ps(),tasks:new Set};function Qa(){const C=ma.now();ma.tasks.forEach(t=>{t.c(C)||(ma.tasks.delete(t),t.f())}),ma.tasks.size!==0&&ma.tick(Qa)}function ms(C){let t;return ma.tasks.size===0&&ma.tick(Qa),{promise:new Promise(m=>{ma.tasks.add(t={c:C,f:m})}),abort(){ma.tasks.delete(t)}}}function Ia(C,t){Ja(()=>{C.dispatchEvent(new CustomEvent(t))})}function hs(C){if(C==="float")return"cssFloat";if(C==="offset")return"cssOffset";if(C.startsWith("--"))return C;const t=C.split("-");return t.length===1?t[0]:t[0]+t.slice(1).map(m=>m[0].toUpperCase()+m.slice(1)).join("")}function Za(C){const t={},m=C.split(";");for(const g of m){const[h,b]=g.split(":");if(!h||b===void 0)break;const u=hs(h.trim());t[u]=b.trim()}return t}const bs=C=>C;function Ze(C,t,m,g){var h=(C&vs)!==0,b="both",u,D=t.inert,R=t.style.overflow,S,E;function k(){return Ja(()=>u??=m()(t,g?.()??{},{direction:b}))}var T={is_global:h,in(){t.inert=D,Ia(t,"introstart"),S=Ua(t,k(),E,1,()=>{Ia(t,"introend"),S?.abort(),S=u=void 0,t.style.overflow=R})},out(W){t.inert=!0,Ia(t,"outrostart"),E=Ua(t,k(),S,0,()=>{Ia(t,"outroend"),W?.()})},stop:()=>{S?.abort(),E?.abort()}},z=es;if((z.nodes.t??=[]).push(T),os){var F=h;if(!F){for(var O=z.parent;O&&(O.f&as)!==0;)for(;(O=O.parent)&&(O.f&ss)===0;);F=!O||(O.f&ts)!==0}F&&is(()=>{rs(()=>T.in())})}}function Ua(C,t,m,g,h){var b=g===1;if(ns(t)){var u,D=!1;return ls(()=>{if(!D){var W=t({direction:b?"in":"out"});u=Ua(C,W,m,g,h)}}),{abort:()=>{D=!0,u?.abort()},deactivate:()=>u.deactivate(),reset:()=>u.reset(),t:()=>u.t()}}if(m?.deactivate(),!t?.duration)return h(),{abort:Ea,deactivate:Ea,reset:Ea,t:()=>g};const{delay:R=0,css:S,tick:E,easing:k=bs}=t;var T=[];if(b&&m===void 0&&(E&&E(0,1),S)){var z=Za(S(0,1));T.push(z,z)}var F=()=>1-g,O=C.animate(T,{duration:R,fill:"forwards"});return O.onfinish=()=>{O.cancel();var W=m?.t()??1-g;m?.abort();var J=g-W,V=t.duration*Math.abs(J),fe=[];if(V>0){var ae=!1;if(S)for(var j=Math.ceil(V/16.666666666666668),p=0;p<=j;p+=1){var A=W+J*k(p/j),K=Za(S(A,1-A));fe.push(K),ae||=K.overflow==="hidden"}ae&&(C.style.overflow="hidden"),F=()=>{var Q=O.currentTime;return W+J*k(Q/V)},E&&ms(()=>{if(O.playState!=="running")return!1;var Q=F();return E(Q,1-Q),!0})}O=C.animate(fe,{duration:V,fill:"forwards"}),O.onfinish=()=>{F=()=>g,E?.(g,1-g),h()}},{abort:()=>{O&&(O.cancel(),O.effect=null,O.onfinish=Ea)},deactivate:()=>{h=Ea},reset:()=>{g===0&&E?.(1,0)},t:()=>F()}}const ys=C=>C;function Xa(C){const t=C-1;return t*t*t+1}function xs(C,{delay:t=0,duration:m=400,easing:g=ys}={}){const h=+getComputedStyle(C).opacity;return{delay:t,duration:m,easing:g,css:b=>`opacity: ${b*h}`}}function la(C,{delay:t=0,duration:m=400,easing:g=Xa,axis:h="y"}={}){const b=getComputedStyle(C),u=+b.opacity,D=h==="y"?"height":"width",R=parseFloat(b[D]),S=h==="y"?["top","bottom"]:["left","right"],E=S.map(J=>`${J[0].toUpperCase()}${J.slice(1)}`),k=parseFloat(b[`padding${E[0]}`]),T=parseFloat(b[`padding${E[1]}`]),z=parseFloat(b[`margin${E[0]}`]),F=parseFloat(b[`margin${E[1]}`]),O=parseFloat(b[`border${E[0]}Width`]),W=parseFloat(b[`border${E[1]}Width`]);return{delay:t,duration:m,easing:g,css:J=>`overflow: hidden;opacity: ${Math.min(J*20,1)*u};${D}: ${J*R}px;padding-${S[0]}: ${J*k}px;padding-${S[1]}: ${J*T}px;margin-${S[0]}: ${J*z}px;margin-${S[1]}: ${J*F}px;border-${S[0]}-width: ${J*O}px;border-${S[1]}-width: ${J*W}px;min-${D}: 0`}}function ws(C,{delay:t=0,duration:m=400,easing:g=Xa,start:h=0,opacity:b=0}={}){const u=getComputedStyle(C),D=+u.opacity,R=u.transform==="none"?"":u.transform,S=1-h,E=D*(1-b);return{delay:t,duration:m,easing:g,css:(k,T)=>`
			transform: ${R} scale(${1-S*T});
			opacity: ${D-E*T}
		`}}var qs=v('<span class="chevron svelte-12crvy">‚ñ≤</span>'),Ds=v('<span class="chevron svelte-12crvy">‚ñº</span>'),Ss=v("<option> </option>"),ks=v("<option> </option>"),Ts=v('<div class="filter-body svelte-12crvy"><div class="filter-grid svelte-12crvy"><div class="filter-item svelte-12crvy"><label for="start-date" class="svelte-12crvy">Start Date</label> <input type="date" id="start-date" class="svelte-12crvy"/></div> <div class="filter-item svelte-12crvy"><label for="end-date" class="svelte-12crvy">End Date</label> <input type="date" id="end-date" class="svelte-12crvy"/></div> <div class="filter-item svelte-12crvy"><label for="location-filter" class="svelte-12crvy">Location</label> <select id="location-filter" class="svelte-12crvy"><option>Any Location</option><!></select></div> <div class="filter-item svelte-12crvy"><label for="session-type-filter" class="svelte-12crvy">Session Type</label> <select id="session-type-filter" class="svelte-12crvy"><option>Any Type</option><!></select></div> <div class="filter-item svelte-12crvy"><label for="grade-filter" class="svelte-12crvy">Grade (Exact)</label> <input type="text" id="grade-filter" placeholder="e.g. V4" class="svelte-12crvy"/></div></div> <div class="filter-actions svelte-12crvy"><button class="reset-btn svelte-12crvy">Reset Filters</button></div></div>'),Fs=v('<div class="filter-container svelte-12crvy"><button class="filter-header svelte-12crvy"><div class="header-content svelte-12crvy"><span class="icon svelte-12crvy">üîç</span> <span class="title svelte-12crvy">Filters</span> <!></div></button> <!></div>');function Cs(C,t){va(t,!0);const m=["Rockstar Swindon","Flashpoint Swindon","Flashpoint Bristol","Redpoint Bristol","TCH Bristol","Other"],g=["Projecting","Onsighting","Campusing","Repeaters"];let h=Z(!1),b=Z(""),u=Z(""),D=Z(""),R=Z(""),S=Z("");function E(){o(h,!s(h))}function k(){o(b,""),o(u,""),o(D,""),o(R,""),o(S,""),T()}function T(){t.onFilterParamsChange({startDate:s(b),endDate:s(u),location:s(D),sessionType:s(R),grade:s(S)})}var z=Fs(),F=a(z);F.__click=E;var O=a(F),W=i(a(O),4);{var J=j=>{var p=qs();r(j,p)},V=j=>{var p=Ds();r(j,p)};c(W,j=>{s(h)?j(J):j(V,!1)})}e(O),e(F);var fe=i(F,2);{var ae=j=>{var p=Ts(),A=a(p),K=a(A),Q=i(a(K),2);Xe(Q),Q.__change=T,e(K);var se=i(K,2),X=i(a(se),2);Xe(X),X.__change=T,e(se);var n=i(se,2),x=i(a(n),2);x.__change=T;var L=a(x);L.value=L.__value="";var f=i(L);be(f,17,()=>m,we,(ie,ce)=>{var U=Ss(),le=a(U,!0);e(U);var pe={};y(()=>{l(le,s(ce)),pe!==(pe=s(ce))&&(U.value=(U.__value=s(ce))??"")}),r(ie,U)}),e(x),e(n);var d=i(n,2),w=i(a(d),2);w.__change=T;var $=a(w);$.value=$.__value="";var qe=i($);be(qe,17,()=>g,we,(ie,ce)=>{var U=ks(),le=a(U,!0);e(U);var pe={};y(()=>{l(le,s(ce)),pe!==(pe=s(ce))&&(U.value=(U.__value=s(ce))??"")}),r(ie,U)}),e(w),e(d);var ge=i(d,2),ye=i(a(ge),2);Xe(ye),ye.__input=T,e(ge),e(A);var ue=i(A,2),ve=a(ue);ve.__click=k,e(ue),e(p),$e(Q,()=>s(b),ie=>o(b,ie)),$e(X,()=>s(u),ie=>o(u,ie)),Ta(x,()=>s(D),ie=>o(D,ie)),Ta(w,()=>s(R),ie=>o(R,ie)),$e(ye,()=>s(S),ie=>o(S,ie)),Ze(3,p,()=>la,()=>({duration:200})),r(j,p)};c(fe,j=>{s(h)&&j(ae)})}e(z),y(()=>Ne(F,"aria-expanded",s(h))),r(C,z),na()}ea(["click","change","input"]);var zs=v('<span class="climb-type-tag svelte-yz0xxt"> </span>'),Ls=v('<span class="notes-preview svelte-yz0xxt"> </span>'),Gs=v('<span class="attempts-count svelte-yz0xxt"> </span>'),Os=v('<div class="detail-row svelte-yz0xxt"><span class="label svelte-yz0xxt">Notes:</span> <p class="notes svelte-yz0xxt"> </p></div>'),Es=v('<p class="empty-notes svelte-yz0xxt">No notes for this climb.</p>'),As=v('<div class="climb-details svelte-yz0xxt"><!> <div class="tags svelte-yz0xxt"><span class="tag type svelte-yz0xxt"> </span> <span class="tag attempt-text svelte-yz0xxt"> </span></div></div>'),Ns=v('<div><div class="climb-header svelte-yz0xxt" role="button" tabindex="0"><div class="climb-main-info svelte-yz0xxt"><span> </span> <span class="climb-name svelte-yz0xxt"> </span> <!> <!></div> <div class="climb-meta svelte-yz0xxt"><span><span class="icon svelte-yz0xxt"> </span> <!></span> <button class="delete-btn svelte-yz0xxt" aria-label="Delete climb" title="Delete climb">üóëÔ∏è</button> <span class="chevron svelte-yz0xxt"> </span></div></div> <!></div>');function js(C,t){va(t,!0);let m=Aa(t,"showClimbType",3,!1),g=Z(!1);function h(){o(g,!s(g))}function b(d){d.stopPropagation(),t.onDelete()}const u={Flash:"‚ö°",Onsight:"üëÅÔ∏è",Redpoint:"üî¥",Dogged:"üõ†Ô∏è",DNF:"‚ùå"};var D=Ns();let R;var S=a(D);S.__click=h,S.__keydown=d=>(d.key==="Enter"||d.key===" ")&&h();var E=a(S),k=a(E);let T;var z=a(k,!0);e(k);var F=i(k,2),O=a(F,!0);e(F);var W=i(F,2);{var J=d=>{var w=zs(),$=a(w,!0);e(w),y(()=>l($,t.climb.isSport?"Sport":"Boulder")),r(d,w)};c(W,d=>{m()&&d(J)})}var V=i(W,2);{var fe=d=>{var w=Ls(),$=a(w);e(w),y(()=>l($,`- ${t.climb.notes??""}`)),r(d,w)};c(V,d=>{!s(g)&&t.climb.notes&&d(fe)})}e(E);var ae=i(E,2),j=a(ae);let p;var A=a(j),K=a(A,!0);e(A);var Q=i(A,2);{var se=d=>{var w=Gs(),$=a(w,!0);e(w),y(()=>l($,t.climb.attemptsNum)),r(d,w)};c(Q,d=>{t.climb.attemptType!=="Flash"&&t.climb.attemptType!=="Onsight"&&d(se)})}e(j);var X=i(j,2);X.__click=b;var n=i(X,2),x=a(n,!0);e(n),e(ae),e(S);var L=i(S,2);{var f=d=>{var w=As(),$=a(w);{var qe=U=>{var le=Os(),pe=i(a(le),2),Me=a(pe,!0);e(pe),e(le),y(()=>l(Me,t.climb.notes)),r(U,le)},ge=U=>{var le=Es();r(U,le)};c($,U=>{t.climb.notes?U(qe):U(ge,!1)})}var ye=i($,2),ue=a(ye),ve=a(ue,!0);e(ue);var ie=i(ue,2),ce=a(ie,!0);e(ie),e(ye),e(w),y(()=>{l(ve,t.climb.isSport?"Sport":"Boulder"),l(ce,t.climb.attemptType)}),Ze(3,w,()=>la,()=>({duration:150})),r(d,w)};c(L,d=>{s(g)&&d(f)})}e(D),y(()=>{R=Be(D,1,"climb-entry svelte-yz0xxt",null,R,{expanded:s(g)}),Ne(S,"aria-expanded",s(g)),T=Be(k,1,"grade-badge svelte-yz0xxt",null,T,{sport:t.climb.isSport}),l(z,t.climb.grade),l(O,t.climb.name||"Unnamed Route"),p=Be(j,1,"attempt-type svelte-yz0xxt",null,p,{flash:t.climb.attemptType==="Flash"}),l(K,u[t.climb.attemptType]||t.climb.attemptType),l(x,s(g)?"‚ñ≤":"‚ñº")}),r(C,D),na()}ea(["click","keydown"]);var Is=v('<button class="backdrop svelte-12q9g58" aria-label="Close modal"></button> <div class="modal svelte-12q9g58" role="dialog" aria-modal="true"><h3 class="svelte-12q9g58"> </h3> <p class="svelte-12q9g58"> </p> <div class="input-group svelte-12q9g58"><label for="delete-confirm" class="svelte-12q9g58">Type <strong>delete</strong> to confirm:</label> <input type="text" id="delete-confirm" placeholder="delete" autocomplete="off" class="svelte-12q9g58"/></div> <div class="actions svelte-12q9g58"><button class="btn-cancel svelte-12q9g58">Cancel</button> <button class="btn-delete svelte-12q9g58">Delete</button></div></div>',1);function Va(C,t){va(t,!0);let m=Aa(t,"isOpen",3,!1),g=Aa(t,"title",3,"Confirm Delete"),h=Aa(t,"message",3,"Are you sure you want to delete this item? This action cannot be undone."),b=Z(""),u=ha(()=>s(b).toLowerCase()==="delete");function D(){s(u)&&(t.onConfirm(),o(b,""))}function R(){t.onCancel(),o(b,"")}var S=Te(),E=xe(S);{var k=T=>{var z=Is(),F=xe(z);F.__click=R;var O=i(F,2),W=a(O),J=a(W,!0);e(W);var V=i(W,2),fe=a(V,!0);e(V);var ae=i(V,2),j=i(a(ae),2);Xe(j),e(ae);var p=i(ae,2),A=a(p);A.__click=R;var K=i(A,2);K.__click=D,e(p),e(O),y(()=>{l(J,g()),l(fe,h()),K.disabled=!s(u)}),Ze(3,F,()=>xs,()=>({duration:200})),$e(j,()=>s(b),Q=>o(b,Q)),Ze(3,O,()=>ws,()=>({duration:200,start:.9})),r(T,z)};c(E,T=>{m()&&T(k)})}r(C,S),na()}ea(["click"]);var Rs=v('<span class="stat svelte-7vqogn"> </span>'),Ps=v('<span class="status-icon pending svelte-7vqogn" title="Waiting to sync">üîÑ</span>'),Bs=v('<span class="status-icon error svelte-7vqogn" title="Sync error">‚ö†Ô∏è</span>'),Ms=v('<span class="chip svelte-7vqogn"> </span>'),Vs=v('<span class="text-none svelte-7vqogn">None</span>'),Ws=v('<div class="detail-item svelte-7vqogn"><span class="label svelte-7vqogn">Difficulty</span> <span class="value svelte-7vqogn"> </span></div>'),Hs=v('<span class="chip svelte-7vqogn"> </span>'),Us=v('<span class="text-none svelte-7vqogn">None</span>'),Zs=v('<div class="detail-item svelte-7vqogn"><span class="label svelte-7vqogn">Category</span> <div class="value-chips svelte-7vqogn"><!></div></div>'),Js=v('<span class="chip svelte-7vqogn"> </span>'),Ks=v('<span class="text-none svelte-7vqogn">None</span>'),Ys=v('<div class="detail-item svelte-7vqogn"><span class="label svelte-7vqogn">Focus</span> <div class="value-chips svelte-7vqogn"><!></div></div>'),Qs=v('<span class="chip svelte-7vqogn"> </span>'),Xs=v('<span class="text-none svelte-7vqogn">None</span>'),$s=v('<div class="detail-item svelte-7vqogn"><span class="label svelte-7vqogn">Energy System</span> <div class="value-chips svelte-7vqogn"><!></div></div>'),et=v('<span class="chip svelte-7vqogn"> </span>'),at=v('<span class="text-none svelte-7vqogn">None</span>'),st=v('<div class="detail-item svelte-7vqogn"><span class="label svelte-7vqogn">Wall Angle</span> <div class="value-chips svelte-7vqogn"><!></div></div>'),tt=v('<div class="metric svelte-7vqogn"><span class="label svelte-7vqogn">Open Grip</span> <div class="bar-container svelte-7vqogn"><div class="bar-fill svelte-7vqogn"></div></div> <span class="score svelte-7vqogn"> </span></div>'),it=v('<div class="metric svelte-7vqogn"><span class="label svelte-7vqogn">Crimp Grip</span> <div class="bar-container svelte-7vqogn"><div class="bar-fill svelte-7vqogn"></div></div> <span class="score svelte-7vqogn"> </span></div>'),rt=v('<div class="metric svelte-7vqogn"><span class="label svelte-7vqogn">Pinch Grip</span> <div class="bar-container svelte-7vqogn"><div class="bar-fill svelte-7vqogn"></div></div> <span class="score svelte-7vqogn"> </span></div>'),vt=v('<div class="metric svelte-7vqogn"><span class="label svelte-7vqogn">Sloper Grip</span> <div class="bar-container svelte-7vqogn"><div class="bar-fill svelte-7vqogn"></div></div> <span class="score svelte-7vqogn"> </span></div>'),nt=v('<div class="metric svelte-7vqogn"><span class="label svelte-7vqogn">Jug Grip</span> <div class="bar-container svelte-7vqogn"><div class="bar-fill svelte-7vqogn"></div></div> <span class="score svelte-7vqogn"> </span></div>'),lt=v('<p class="no-climbs svelte-7vqogn">No climbs logged for this session.</p>'),ot=v('<div class="card-body svelte-7vqogn"><div class="details-grid svelte-7vqogn"><div class="detail-item svelte-7vqogn"><span class="label svelte-7vqogn">Training Type</span> <div class="value-chips svelte-7vqogn"><!></div></div> <!> <!> <!> <!> <!></div> <div class="metrics-container svelte-7vqogn"><div class="metric svelte-7vqogn"><span class="label svelte-7vqogn">Finger Load</span> <div class="bar-container svelte-7vqogn"><div class="bar-fill svelte-7vqogn"></div></div> <span class="score svelte-7vqogn"> </span></div> <div class="metric svelte-7vqogn"><span class="label svelte-7vqogn">Shoulder Load</span> <div class="bar-container svelte-7vqogn"><div class="bar-fill svelte-7vqogn"></div></div> <span class="score svelte-7vqogn"> </span></div> <div class="metric svelte-7vqogn"><span class="label svelte-7vqogn">Forearm Load</span> <div class="bar-container svelte-7vqogn"><div class="bar-fill svelte-7vqogn"></div></div> <span class="score svelte-7vqogn"> </span></div> <!> <!> <!> <!> <!></div> <div class="climbs-list svelte-7vqogn"><h4 class="svelte-7vqogn">Climbs</h4> <div class="climbs-container svelte-7vqogn"><!> <!></div></div></div>'),dt=v('<div><div class="card-header svelte-7vqogn" role="button" tabindex="0"><div class="header-main svelte-7vqogn"><div class="date-badge svelte-7vqogn"><span class="day svelte-7vqogn"> </span> <span class="month svelte-7vqogn"> </span></div> <div class="session-info svelte-7vqogn"><div class="session-text svelte-7vqogn"><h3 class="location svelte-7vqogn"> </h3> <div class="session-meta svelte-7vqogn"><span class="type-tag svelte-7vqogn"> </span> <span class="stat svelte-7vqogn"> </span> <!></div></div> <div class="load-summary svelte-7vqogn"><div class="load-badge finger svelte-7vqogn"> </div> <div class="load-badge shoulder svelte-7vqogn"> </div> <div class="load-badge forearm svelte-7vqogn"> </div></div></div></div> <div class="header-actions"><div class="header-status svelte-7vqogn"><!></div>  <button class="btn-icon delete-session" title="Delete Session">üóëÔ∏è</button> <span class="chevron svelte-7vqogn"> </span></div></div> <!></div> <!>',1);function ct(C,t){va(t,!0);let m=Z(!1),g=Z(!1);function h(){o(m,!s(m))}function b(){o(g,!0)}function u(){Pa(t.session.id),o(g,!1),t.onDelete()}function D(ne){const B=[...t.session.climbs];B.splice(ne,1),Ya(t.session.id,{climbs:B}),t.onDelete()}let R=ha(()=>t.session.climbs.length),S=ha(()=>t.session.climbs.reduce((ne,B)=>{const te=parseInt(B.grade.replace(/\D/g,""))||0,re=parseInt(ne.replace(/\D/g,""))||0;return te>re?B.grade:ne},"V0"));var E=dt(),k=xe(E);let T;var z=a(k);z.__click=h,z.__keydown=ne=>ne.key==="Enter"&&h();var F=a(z),O=a(F),W=a(O),J=a(W,!0);e(W);var V=i(W,2),fe=a(V,!0);e(V),e(O);var ae=i(O,2),j=a(ae),p=a(j),A=a(p,!0);e(p);var K=i(p,2),Q=a(K),se=a(Q,!0);e(Q);var X=i(Q,2),n=a(X);e(X);var x=i(X,2);{var L=ne=>{var B=Rs(),te=a(B);e(B),y(()=>l(te,`Max: ${s(S)??""}`)),r(ne,B)};c(x,ne=>{s(R)>0&&ne(L)})}e(K),e(j);var f=i(j,2),d=a(f),w=a(d,!0);e(d);var $=i(d,2),qe=a($,!0);e($);var ge=i($,2),ye=a(ge,!0);e(ge),e(f),e(ae),e(F);var ue=i(F,2),ve=a(ue),ie=a(ve);{var ce=ne=>{var B=Ps();r(ne,B)},U=ne=>{var B=Te(),te=xe(B);{var re=I=>{var N=Bs();r(I,N)};c(te,I=>{t.session.syncStatus==="error"&&I(re)},!0)}r(ne,B)};c(ie,ne=>{t.session.syncStatus==="pending"?ne(ce):ne(U,!1)})}e(ve);var le=i(ve,2);le.__click=ne=>{ne.stopPropagation(),b()};var pe=i(le,2),Me=a(pe,!0);e(pe),e(ue),e(z);var Je=i(z,2);{var je=ne=>{var B=ot(),te=a(B),re=a(te),I=i(a(re),2),N=a(I);{var oe=P=>{var H=Te(),_=xe(H);be(_,17,()=>t.session.trainingTypes,we,(q,G)=>{var Y=Ms(),M=a(Y,!0);e(Y),y(()=>l(M,s(G))),r(q,Y)}),r(P,H)},de=P=>{var H=Vs();r(P,H)};c(N,P=>{t.session.trainingTypes&&t.session.trainingTypes.length>0&&!t.session.trainingTypes.includes("None")?P(oe):P(de,!1)})}e(I),e(re);var me=i(re,2);{var he=P=>{var H=Ws(),_=i(a(H),2),q=a(_,!0);e(_),e(H),y(()=>l(q,t.session.difficulty)),r(P,H)};c(me,P=>{t.session.difficulty&&P(he)})}var De=i(me,2);{var Ie=P=>{var H=Zs(),_=i(a(H),2),q=a(_);{var G=M=>{var ee=Te(),_e=xe(ee);be(_e,17,()=>t.session.categories,we,(Se,He)=>{var ke=Hs(),Ue=a(ke,!0);e(ke),y(()=>l(Ue,s(He))),r(Se,ke)}),r(M,ee)},Y=M=>{var ee=Us();r(M,ee)};c(q,M=>{t.session.categories.length>0&&!t.session.categories.includes("None")?M(G):M(Y,!1)})}e(_),e(H),r(P,H)};c(De,P=>{t.session.categories?.length&&P(Ie)})}var ze=i(De,2);{var Fe=P=>{var H=Ys(),_=i(a(H),2),q=a(_);{var G=M=>{var ee=Te(),_e=xe(ee);be(_e,17,()=>t.session.techniqueFocuses,we,(Se,He)=>{var ke=Js(),Ue=a(ke,!0);e(ke),y(()=>l(Ue,s(He))),r(Se,ke)}),r(M,ee)},Y=M=>{var ee=Ks();r(M,ee)};c(q,M=>{t.session.techniqueFocuses.length>0&&!t.session.techniqueFocuses.includes("None")?M(G):M(Y,!1)})}e(_),e(H),r(P,H)};c(ze,P=>{t.session.techniqueFocuses?.length&&P(Fe)})}var Ve=i(ze,2);{var Ce=P=>{var H=$s(),_=i(a(H),2),q=a(_);{var G=M=>{var ee=Te(),_e=xe(ee);be(_e,17,()=>t.session.energySystems,we,(Se,He)=>{var ke=Qs(),Ue=a(ke,!0);e(ke),y(()=>l(Ue,s(He))),r(Se,ke)}),r(M,ee)},Y=M=>{var ee=Xs();r(M,ee)};c(q,M=>{t.session.energySystems.length>0&&!t.session.energySystems.includes("None")?M(G):M(Y,!1)})}e(_),e(H),r(P,H)};c(Ve,P=>{t.session.energySystems?.length&&P(Ce)})}var Le=i(Ve,2);{var oa=P=>{var H=st(),_=i(a(H),2),q=a(_);{var G=M=>{var ee=Te(),_e=xe(ee);be(_e,17,()=>t.session.wallAngles,we,(Se,He)=>{var ke=et(),Ue=a(ke,!0);e(ke),y(()=>l(Ue,s(He))),r(Se,ke)}),r(M,ee)},Y=M=>{var ee=at();r(M,ee)};c(q,M=>{t.session.wallAngles.length>0&&!t.session.wallAngles.includes("None")?M(G):M(Y,!1)})}e(_),e(H),r(P,H)};c(Le,P=>{t.session.wallAngles?.length&&P(oa)})}e(te);var Ge=i(te,2),aa=a(Ge),Re=i(a(aa),2),sa=a(Re);e(Re);var da=i(Re,2),ta=a(da);e(da),e(aa);var Oe=i(aa,2),We=i(a(Oe),2),ca=a(We);e(We);var Ee=i(We,2),ia=a(Ee);e(Ee),e(Oe);var _a=i(Oe,2),Pe=i(a(_a),2),ba=a(Pe);e(Pe);var ua=i(Pe,2),qa=a(ua);e(ua),e(_a);var ga=i(_a,2);{var Ca=P=>{var H=tt(),_=i(a(H),2),q=a(_);e(_);var G=i(_,2),Y=a(G);e(G),e(H),y(()=>{Ae(q,`width: ${t.session.openGrip/5*100}%`),l(Y,`${t.session.openGrip??""}/5`)}),r(P,H)};c(ga,P=>{t.session.openGrip&&P(Ca)})}var Da=i(ga,2);{var za=P=>{var H=it(),_=i(a(H),2),q=a(_);e(_);var G=i(_,2),Y=a(G);e(G),e(H),y(()=>{Ae(q,`width: ${t.session.crimpGrip/5*100}%`),l(Y,`${t.session.crimpGrip??""}/5`)}),r(P,H)};c(Da,P=>{t.session.crimpGrip&&P(za)})}var ya=i(Da,2);{var Sa=P=>{var H=rt(),_=i(a(H),2),q=a(_);e(_);var G=i(_,2),Y=a(G);e(G),e(H),y(()=>{Ae(q,`width: ${t.session.pinchGrip/5*100}%`),l(Y,`${t.session.pinchGrip??""}/5`)}),r(P,H)};c(ya,P=>{t.session.pinchGrip&&P(Sa)})}var xa=i(ya,2);{var La=P=>{var H=vt(),_=i(a(H),2),q=a(_);e(_);var G=i(_,2),Y=a(G);e(G),e(H),y(()=>{Ae(q,`width: ${t.session.sloperGrip/5*100}%`),l(Y,`${t.session.sloperGrip??""}/5`)}),r(P,H)};c(xa,P=>{t.session.sloperGrip&&P(La)})}var ka=i(xa,2);{var Ga=P=>{var H=nt(),_=i(a(H),2),q=a(_);e(_);var G=i(_,2),Y=a(G);e(G),e(H),y(()=>{Ae(q,`width: ${t.session.jugGrip/5*100}%`),l(Y,`${t.session.jugGrip??""}/5`)}),r(P,H)};c(ka,P=>{t.session.jugGrip&&P(Ga)})}e(Ge);var Ye=i(Ge,2),Qe=i(a(Ye),2),pa=a(Qe);be(pa,17,()=>t.session.climbs,we,(P,H,_)=>{{let q=ha(()=>t.session.climbingType==="Mixed");js(P,{get climb(){return s(H)},onDelete:()=>D(_),get showClimbType(){return s(q)}})}});var Na=i(pa,2);{var ja=P=>{var H=lt();r(P,H)};c(Na,P=>{t.session.climbs.length===0&&P(ja)})}e(Qe),e(Ye),e(B),y(()=>{Ae(sa,`width: ${t.session.fingerLoad/5*100}%`),l(ta,`${t.session.fingerLoad??""}/5`),Ae(ca,`width: ${t.session.shoulderLoad/5*100}%`),l(ia,`${t.session.shoulderLoad??""}/5`),Ae(ba,`width: ${t.session.forearmLoad/5*100}%`),l(qa,`${t.session.forearmLoad??""}/5`)}),Ze(3,B,()=>la,()=>({duration:200})),r(ne,B)};c(Je,ne=>{s(m)&&ne(je)})}e(k);var Ke=i(k,2);Va(Ke,{get isOpen(){return s(g)},title:"Delete Session",message:"Are you sure you want to delete this session and all its climbs? This cannot be undone.",onConfirm:u,onCancel:()=>o(g,!1)}),y((ne,B)=>{T=Be(k,1,"session-card svelte-7vqogn",null,T,{expanded:s(m)}),Ne(z,"aria-expanded",s(m)),l(J,ne),l(fe,B),l(A,t.session.location),l(se,t.session.climbingType),l(n,`${s(R)??""} climbs`),Ne(d,"title",`Finger Load: ${t.session.fingerLoad??""}`),l(w,t.session.fingerLoad),Ne($,"title",`Shoulder Load: ${t.session.shoulderLoad??""}`),l(qe,t.session.shoulderLoad),Ne(ge,"title",`Forearm Load: ${t.session.forearmLoad??""}`),l(ye,t.session.forearmLoad),l(Me,s(m)?"‚ñ≤":"‚ñº")},[()=>new Date(t.session.date).getDate(),()=>new Date(t.session.date).toLocaleDateString("en-GB",{month:"short"})]),r(C,E),na()}ea(["click","keydown"]);var _t=v('<div class="legend-item svelte-11p9lqi"><span class="l-icon svelte-11p9lqi"> </span> <span class="l-label svelte-11p9lqi"> </span></div>'),ut=v('<div class="legend-content svelte-11p9lqi"><div class="legend-grid svelte-11p9lqi"></div></div>'),ft=v('<div class="legend-container svelte-11p9lqi"><button class="legend-toggle svelte-11p9lqi"><span class="icon">‚ÑπÔ∏è</span> <span class="text">Icon Legend</span> <span class="chevron svelte-11p9lqi"> </span></button> <!></div>');function $a(C){let t=Z(!1);const m=[{icon:"üëÅÔ∏è",label:"Onsight"},{icon:"‚ö°",label:"Flash"},{icon:"üî¥",label:"Redpoint"},{icon:"üõ†Ô∏è",label:"Dogged"},{icon:"‚ùå",label:"DNF"}];var g=ft(),h=a(g);h.__click=()=>o(t,!s(t));var b=i(a(h),4),u=a(b,!0);e(b),e(h);var D=i(h,2);{var R=S=>{var E=ut(),k=a(E);be(k,21,()=>m,we,(T,z)=>{var F=_t(),O=a(F),W=a(O,!0);e(O);var J=i(O,2),V=a(J,!0);e(J),e(F),y(()=>{l(W,s(z).icon),l(V,s(z).label)}),r(T,F)}),e(k),e(E),Ze(3,E,()=>la),r(S,E)};c(D,S=>{s(t)&&S(R)})}e(g),y(()=>{Ne(h,"aria-expanded",s(t)),l(u,s(t)?"‚ñº":"‚ñ∂")}),r(C,g)}ea(["click"]);var gt=v('<span class="spinner svelte-14fqz8w"></span> Fetching...',1),pt=v('<div class="error-banner svelte-14fqz8w"> </div>'),mt=v('<small class="svelte-14fqz8w">Try adjusting your filters.</small>'),ht=v('<div class="empty-state svelte-14fqz8w"><p class="svelte-14fqz8w">No indoor climbing sessions found.</p> <!></div>'),bt=v('<div class="view-container svelte-14fqz8w"><div class="view-header svelte-14fqz8w"><h2 class="view-title svelte-14fqz8w">üßó Indoor Climbing History</h2> <button class="fetch-btn svelte-14fqz8w" title="Fetch data from cloud"><!></button></div> <!> <!> <div class="info-bar svelte-14fqz8w"><div class="legend-wrapper svelte-14fqz8w"><!></div> <div class="load-key svelte-14fqz8w"><span class="key-label svelte-14fqz8w">Load:</span> <div class="key-item svelte-14fqz8w"><span class="dot finger svelte-14fqz8w"></span> Finger</div> <div class="key-item svelte-14fqz8w"><span class="dot shoulder svelte-14fqz8w"></span> Shoulder</div> <div class="key-item svelte-14fqz8w"><span class="dot forearm svelte-14fqz8w"></span> Forearm</div></div></div> <div class="sessions-list"><!> <!></div></div>');function yt(C,t){va(t,!0);let m=Z(fa([])),g=Z(fa([])),h=Z(!1),b=Z(""),u=Z(fa({startDate:"",endDate:"",location:"",sessionType:"",grade:""}));Ka(()=>{D()});function D(){const n=Ra("indoor_climb");o(m,n.sort((x,L)=>new Date(L.date).getTime()-new Date(x.date).getTime()),!0),k()}async function R(){o(h,!0),o(b,"");try{await Ma();const n=await ds();n.ok&&n.data?S(n.data):o(b,n.error||"Failed to fetch data",!0)}catch(n){o(b,n instanceof Error?n.message:"Unknown error",!0)}finally{o(h,!1)}}function S(n){const x=n.map(f=>({...f,activityType:"indoor_climb",createdAt:new Date().toISOString(),updatedAt:new Date().toISOString(),syncStatus:"synced",syncedAt:new Date().toISOString()}));Ba(x);const L=Ra("indoor_climb");o(m,L.sort((f,d)=>new Date(d.date).getTime()-new Date(f.date).getTime()),!0),k()}function E(n){o(u,n,!0),k()}function k(){o(g,s(m).filter(n=>{if(s(u).startDate&&n.date<s(u).startDate||s(u).endDate&&n.date>s(u).endDate||s(u).location&&n.location!==s(u).location||s(u).sessionType&&!n.trainingTypes?.includes(s(u).sessionType))return!1;if(s(u).grade){const x=s(u).grade.trim().toLowerCase();if(!n.climbs.some(f=>f.grade.trim().toLowerCase()===x))return!1}return!0}),!0)}var T=bt(),z=a(T),F=i(a(z),2);F.__click=R;var O=a(F);{var W=n=>{var x=gt();Fa(),r(n,x)},J=n=>{var x=wa("‚òÅÔ∏è Fetch Data");r(n,x)};c(O,n=>{s(h)?n(W):n(J,!1)})}e(F),e(z);var V=i(z,2);{var fe=n=>{var x=pt(),L=a(x,!0);e(x),y(()=>l(L,s(b))),Ze(3,x,()=>la),r(n,x)};c(V,n=>{s(b)&&n(fe)})}var ae=i(V,2);Cs(ae,{onFilterParamsChange:E});var j=i(ae,2),p=a(j),A=a(p);$a(A),e(p),Fa(2),e(j);var K=i(j,2),Q=a(K);be(Q,17,()=>s(g),n=>n.id,(n,x)=>{ct(n,{get session(){return s(x)},onDelete:D})});var se=i(Q,2);{var X=n=>{var x=ht(),L=i(a(x),2);{var f=d=>{var w=mt();r(d,w)};c(L,d=>{s(m).length>0&&d(f)})}e(x),r(n,x)};c(se,n=>{s(g).length===0&&n(X)})}e(K),e(T),y(()=>F.disabled=s(h)),r(C,T),na()}ea(["click"]);var xt=v('<span class="chevron svelte-1frtlim">‚ñ≤</span>'),wt=v('<span class="chevron svelte-1frtlim">‚ñº</span>'),qt=v('<div class="input-with-action svelte-1frtlim"><input type="text" id="area-filter-text" placeholder="Type area name..." class="flat-left svelte-1frtlim"/> <button class="action-btn flat-right svelte-1frtlim" title="Back to list">‚úï</button></div>'),Dt=v("<option> </option>"),St=v('<select id="area-filter" class="svelte-1frtlim"><option>All Areas</option><!><option>Other (Manual Entry)</option></select>'),kt=v('<div class="input-with-action svelte-1frtlim"><input type="text" id="crag-filter-text" placeholder="Type crag name..." class="flat-left svelte-1frtlim"/> <button class="action-btn flat-right svelte-1frtlim" title="Back to list">‚úï</button></div>'),Tt=v("<option> </option>"),Ft=v('<select id="crag-filter" class="svelte-1frtlim"><option>All Crags</option><!><option>Other (Manual Entry)</option></select>'),Ct=v('<input type="text" id="crag-filter-text" class="svelte-1frtlim"/>'),zt=v("<option> </option>"),Lt=v('<div class="filter-body svelte-1frtlim"><div class="filter-grid svelte-1frtlim"><div class="filter-item svelte-1frtlim"><label for="start-date" class="svelte-1frtlim">Start Date</label> <input type="date" id="start-date" class="svelte-1frtlim"/></div> <div class="filter-item svelte-1frtlim"><label for="end-date" class="svelte-1frtlim">End Date</label> <input type="date" id="end-date" class="svelte-1frtlim"/></div> <div class="filter-item svelte-1frtlim"><label for="area-filter" class="svelte-1frtlim">Area</label> <!></div> <div class="filter-item svelte-1frtlim"><label for="crag-filter" class="svelte-1frtlim">Crag</label> <!></div> <div class="filter-item svelte-1frtlim"><label for="session-type-filter" class="svelte-1frtlim">Session Type</label> <select id="session-type-filter" class="svelte-1frtlim"><option>Any Type</option><!></select></div> <div class="filter-item svelte-1frtlim"><label for="grade-filter" class="svelte-1frtlim">Grade (Exact)</label> <input type="text" id="grade-filter" placeholder="e.g. 7a" class="svelte-1frtlim"/></div></div> <div class="filter-actions svelte-1frtlim"><button class="reset-btn svelte-1frtlim">Reset Filters</button></div></div>'),Gt=v('<div class="filter-container svelte-1frtlim"><button class="filter-header svelte-1frtlim"><div class="header-content svelte-1frtlim"><span class="icon svelte-1frtlim">üîç</span> <span class="title svelte-1frtlim">Filters</span> <!></div></button> <!></div>');function Ot(C,t){va(t,!0);const m=cs(),g=["Projecting","Onsighting","Campusing","Repeaters","Fun","Volume"];let h=Z(!1),b=Z(""),u=Z(""),D=Z(""),R=Z(""),S=Z(""),E=Z(""),k=Z(!1),T=Z(!1),z=ha(()=>s(D)&&s(D)!=="Other"?_s(s(D)):[]);function F(){s(D)==="Other"?(o(k,!0),o(D,"")):o(k,!1),o(R,""),o(T,!1),V()}function O(){s(R)==="Other"?(o(T,!0),o(R,"")):o(T,!1),V()}function W(){o(h,!s(h))}function J(){o(b,""),o(u,""),o(D,""),o(R,""),o(S,""),o(E,""),o(k,!1),o(T,!1),V()}function V(){t.onFilterParamsChange({startDate:s(b),endDate:s(u),area:s(D),crag:s(R),sessionType:s(S),grade:s(E)})}var fe=Gt(),ae=a(fe);ae.__click=W;var j=a(ae),p=i(a(j),4);{var A=X=>{var n=xt();r(X,n)},K=X=>{var n=wt();r(X,n)};c(p,X=>{s(h)?X(A):X(K,!1)})}e(j),e(ae);var Q=i(ae,2);{var se=X=>{var n=Lt(),x=a(n),L=a(x),f=i(a(L),2);Xe(f),f.__change=V,e(L);var d=i(L,2),w=i(a(d),2);Xe(w),w.__change=V,e(d);var $=i(d,2),qe=i(a($),2);{var ge=B=>{var te=qt(),re=a(te);Xe(re),re.__input=V;var I=i(re,2);I.__click=()=>{o(k,!1),o(D,""),V()},e(te),$e(re,()=>s(D),N=>o(D,N)),r(B,te)},ye=B=>{var te=St();te.__change=F;var re=a(te);re.value=re.__value="";var I=i(re);be(I,17,()=>m,we,(oe,de)=>{var me=Dt(),he=a(me,!0);e(me);var De={};y(()=>{l(he,s(de)),De!==(De=s(de))&&(me.value=(me.__value=s(de))??"")}),r(oe,me)});var N=i(I);N.value=N.__value="Other",e(te),Ta(te,()=>s(D),oe=>o(D,oe)),r(B,te)};c(qe,B=>{s(k)?B(ge):B(ye,!1)})}e($);var ue=i($,2),ve=i(a(ue),2);{var ie=B=>{var te=kt(),re=a(te);Xe(re),re.__input=V;var I=i(re,2);I.__click=()=>{o(T,!1),o(R,""),V()},e(te),$e(re,()=>s(R),N=>o(R,N)),r(B,te)},ce=B=>{var te=Te(),re=xe(te);{var I=oe=>{var de=Ft();de.__change=O;var me=a(de);me.value=me.__value="";var he=i(me);be(he,17,()=>s(z),we,(Ie,ze)=>{var Fe=Tt(),Ve=a(Fe,!0);e(Fe);var Ce={};y(()=>{l(Ve,s(ze)),Ce!==(Ce=s(ze))&&(Fe.value=(Fe.__value=s(ze))??"")}),r(Ie,Fe)});var De=i(he);De.value=De.__value="Other",e(de),Ta(de,()=>s(R),Ie=>o(R,Ie)),r(oe,de)},N=oe=>{var de=Ct();Xe(de),de.__input=V,y(()=>{Ne(de,"placeholder",s(D)?"Filter crag...":"Select area first"),de.disabled=!s(k)&&!s(D)}),$e(de,()=>s(R),me=>o(R,me)),r(oe,de)};c(re,oe=>{!s(k)&&s(D)&&s(z).length>0?oe(I):oe(N,!1)},!0)}r(B,te)};c(ve,B=>{s(T)?B(ie):B(ce,!1)})}e(ue);var U=i(ue,2),le=i(a(U),2);le.__change=V;var pe=a(le);pe.value=pe.__value="";var Me=i(pe);be(Me,17,()=>g,we,(B,te)=>{var re=zt(),I=a(re,!0);e(re);var N={};y(()=>{l(I,s(te)),N!==(N=s(te))&&(re.value=(re.__value=s(te))??"")}),r(B,re)}),e(le),e(U);var Je=i(U,2),je=i(a(Je),2);Xe(je),je.__input=V,e(Je),e(x);var Ke=i(x,2),ne=a(Ke);ne.__click=J,e(Ke),e(n),$e(f,()=>s(b),B=>o(b,B)),$e(w,()=>s(u),B=>o(u,B)),Ta(le,()=>s(S),B=>o(S,B)),$e(je,()=>s(E),B=>o(E,B)),Ze(3,n,()=>la,()=>({duration:200})),r(X,n)};c(Q,X=>{s(h)&&X(se)})}e(fe),y(()=>Ne(ae,"aria-expanded",s(h))),r(C,fe),na()}ea(["click","change","input"]);var Et=v('<span class="climb-type-tag svelte-1k6anfh"> </span>'),At=v('<span class="notes-preview svelte-1k6anfh"> </span>'),Nt=v('<span class="attempts-count svelte-1k6anfh"> </span>'),jt=v('<div class="detail-row svelte-1k6anfh"><span class="label svelte-1k6anfh">Notes:</span> <p class="notes svelte-1k6anfh"> </p></div>'),It=v('<p class="empty-notes svelte-1k6anfh">No notes for this climb.</p>'),Rt=v('<div class="climb-details svelte-1k6anfh"><!> <div class="tags svelte-1k6anfh"><span class="tag type svelte-1k6anfh"> </span> <span class="tag attempt-text svelte-1k6anfh"> </span></div></div>'),Pt=v('<div><div class="climb-header svelte-1k6anfh" role="button" tabindex="0"><div class="climb-main-info svelte-1k6anfh"><span> </span> <span class="climb-name svelte-1k6anfh"> </span> <!> <!></div> <div class="climb-meta svelte-1k6anfh"><span><span class="icon svelte-1k6anfh"> </span> <!></span> <button class="delete-btn svelte-1k6anfh" aria-label="Delete climb" title="Delete climb">üóëÔ∏è</button> <span class="chevron svelte-1k6anfh"> </span></div></div> <!></div>');function Bt(C,t){va(t,!0);let m=Aa(t,"showClimbType",3,!1),g=Z(!1);function h(){o(g,!s(g))}function b(d){d.stopPropagation(),t.onDelete()}const u={Flash:"‚ö°",Onsight:"üëÅÔ∏è",Redpoint:"üî¥",Dogged:"üõ†Ô∏è",DNF:"‚ùå"};var D=Pt();let R;var S=a(D);S.__click=h,S.__keydown=d=>(d.key==="Enter"||d.key===" ")&&h();var E=a(S),k=a(E);let T;var z=a(k,!0);e(k);var F=i(k,2),O=a(F,!0);e(F);var W=i(F,2);{var J=d=>{var w=Et(),$=a(w,!0);e(w),y(()=>l($,t.climb.isSport?"Sport":"Boulder")),r(d,w)};c(W,d=>{m()&&d(J)})}var V=i(W,2);{var fe=d=>{var w=At(),$=a(w);e(w),y(()=>l($,`- ${t.climb.notes??""}`)),r(d,w)};c(V,d=>{!s(g)&&t.climb.notes&&d(fe)})}e(E);var ae=i(E,2),j=a(ae);let p;var A=a(j),K=a(A,!0);e(A);var Q=i(A,2);{var se=d=>{var w=Nt(),$=a(w,!0);e(w),y(()=>l($,t.climb.attemptsNum)),r(d,w)};c(Q,d=>{t.climb.attemptType!=="Flash"&&t.climb.attemptType!=="Onsight"&&d(se)})}e(j);var X=i(j,2);X.__click=b;var n=i(X,2),x=a(n,!0);e(n),e(ae),e(S);var L=i(S,2);{var f=d=>{var w=Rt(),$=a(w);{var qe=U=>{var le=jt(),pe=i(a(le),2),Me=a(pe,!0);e(pe),e(le),y(()=>l(Me,t.climb.notes)),r(U,le)},ge=U=>{var le=It();r(U,le)};c($,U=>{t.climb.notes?U(qe):U(ge,!1)})}var ye=i($,2),ue=a(ye),ve=a(ue,!0);e(ue);var ie=i(ue,2),ce=a(ie,!0);e(ie),e(ye),e(w),y(()=>{l(ve,t.climb.isSport?"Sport":"Boulder"),l(ce,t.climb.attemptType)}),Ze(3,w,()=>la,()=>({duration:150})),r(d,w)};c(L,d=>{s(g)&&d(f)})}e(D),y(()=>{R=Be(D,1,"climb-entry svelte-1k6anfh",null,R,{expanded:s(g)}),Ne(S,"aria-expanded",s(g)),T=Be(k,1,"grade-badge svelte-1k6anfh",null,T,{sport:t.climb.isSport}),l(z,t.climb.grade),l(O,t.climb.name||"Unnamed Route"),p=Be(j,1,"attempt-type svelte-1k6anfh",null,p,{flash:t.climb.attemptType==="Flash"}),l(K,u[t.climb.attemptType]||t.climb.attemptType),l(x,s(g)?"‚ñ≤":"‚ñº")}),r(C,D),na()}ea(["click","keydown"]);var Mt=v('<div class="sector-meta svelte-d5hg2r"> </div>'),Vt=v('<span class="stat svelte-d5hg2r"> </span>'),Wt=v('<span class="status-icon pending svelte-d5hg2r" title="Waiting to sync">üîÑ</span>'),Ht=v('<span class="status-icon error svelte-d5hg2r" title="Sync error">‚ö†Ô∏è</span>'),Ut=v('<span class="chip svelte-d5hg2r"> </span>'),Zt=v('<span class="text-none svelte-d5hg2r">None</span>'),Jt=v('<div class="detail-item svelte-d5hg2r"><span class="label svelte-d5hg2r">Difficulty</span> <span class="value svelte-d5hg2r"> </span></div>'),Kt=v('<span class="chip svelte-d5hg2r"> </span>'),Yt=v('<span class="text-none svelte-d5hg2r">None</span>'),Qt=v('<div class="detail-item svelte-d5hg2r"><span class="label svelte-d5hg2r">Category</span> <div class="value-chips svelte-d5hg2r"><!></div></div>'),Xt=v('<span class="chip svelte-d5hg2r"> </span>'),$t=v('<span class="text-none svelte-d5hg2r">None</span>'),ei=v('<div class="detail-item svelte-d5hg2r"><span class="label svelte-d5hg2r">Focus</span> <div class="value-chips svelte-d5hg2r"><!></div></div>'),ai=v('<span class="chip svelte-d5hg2r"> </span>'),si=v('<span class="text-none svelte-d5hg2r">None</span>'),ti=v('<div class="detail-item svelte-d5hg2r"><span class="label svelte-d5hg2r">Energy System</span> <div class="value-chips svelte-d5hg2r"><!></div></div>'),ii=v('<div class="metric svelte-d5hg2r"><span class="label svelte-d5hg2r">Open Grip</span> <div class="bar-container svelte-d5hg2r"><div class="bar-fill svelte-d5hg2r"></div></div> <span class="score svelte-d5hg2r"> </span></div>'),ri=v('<div class="metric svelte-d5hg2r"><span class="label svelte-d5hg2r">Crimp Grip</span> <div class="bar-container svelte-d5hg2r"><div class="bar-fill svelte-d5hg2r"></div></div> <span class="score svelte-d5hg2r"> </span></div>'),vi=v('<div class="metric svelte-d5hg2r"><span class="label svelte-d5hg2r">Pinch Grip</span> <div class="bar-container svelte-d5hg2r"><div class="bar-fill svelte-d5hg2r"></div></div> <span class="score svelte-d5hg2r"> </span></div>'),ni=v('<div class="metric svelte-d5hg2r"><span class="label svelte-d5hg2r">Sloper Grip</span> <div class="bar-container svelte-d5hg2r"><div class="bar-fill svelte-d5hg2r"></div></div> <span class="score svelte-d5hg2r"> </span></div>'),li=v('<div class="metric svelte-d5hg2r"><span class="label svelte-d5hg2r">Jug Grip</span> <div class="bar-container svelte-d5hg2r"><div class="bar-fill svelte-d5hg2r"></div></div> <span class="score svelte-d5hg2r"> </span></div>'),oi=v('<p class="no-climbs svelte-d5hg2r">No climbs logged for this session.</p>'),di=v('<div class="card-body svelte-d5hg2r"><div class="details-grid svelte-d5hg2r"><div class="detail-item svelte-d5hg2r"><span class="label svelte-d5hg2r">Training Type</span> <div class="value-chips svelte-d5hg2r"><!></div></div> <!> <!> <!> <!></div> <div class="metrics-container svelte-d5hg2r"><div class="metric svelte-d5hg2r"><span class="label svelte-d5hg2r">Finger Load</span> <div class="bar-container svelte-d5hg2r"><div class="bar-fill svelte-d5hg2r"></div></div> <span class="score svelte-d5hg2r"> </span></div> <div class="metric svelte-d5hg2r"><span class="label svelte-d5hg2r">Shoulder Load</span> <div class="bar-container svelte-d5hg2r"><div class="bar-fill svelte-d5hg2r"></div></div> <span class="score svelte-d5hg2r"> </span></div> <div class="metric svelte-d5hg2r"><span class="label svelte-d5hg2r">Forearm Load</span> <div class="bar-container svelte-d5hg2r"><div class="bar-fill svelte-d5hg2r"></div></div> <span class="score svelte-d5hg2r"> </span></div> <!> <!> <!> <!> <!></div> <div class="climbs-list svelte-d5hg2r"><h4 class="svelte-d5hg2r">Climbs</h4> <div class="climbs-container svelte-d5hg2r"><!> <!></div></div></div>'),ci=v('<div><div class="card-header svelte-d5hg2r" role="button" tabindex="0"><div class="header-main svelte-d5hg2r"><div class="date-badge svelte-d5hg2r"><span class="day svelte-d5hg2r"> </span> <span class="month svelte-d5hg2r"> </span></div> <div class="session-info svelte-d5hg2r"><div class="session-text svelte-d5hg2r"><h3 class="location svelte-d5hg2r"> <!></h3> <!> <div class="session-meta svelte-d5hg2r"><span class="type-tag svelte-d5hg2r"> </span> <span class="stat svelte-d5hg2r"> </span> <!></div></div> <div class="load-summary svelte-d5hg2r"><div class="load-badge finger svelte-d5hg2r"> </div> <div class="load-badge shoulder svelte-d5hg2r"> </div> <div class="load-badge forearm svelte-d5hg2r"> </div></div></div></div> <div class="header-actions svelte-d5hg2r"><div class="header-status svelte-d5hg2r"><!></div> <button class="btn-icon delete-session svelte-d5hg2r" title="Delete Session">üóëÔ∏è</button> <span class="chevron svelte-d5hg2r"> </span></div></div> <!></div> <!>',1);function _i(C,t){va(t,!0);let m=Z(!1),g=Z(!1);function h(){o(m,!s(m))}function b(){o(g,!0)}function u(){Pa(t.session.id),o(g,!1),t.onDelete()}function D(I){const N=[...t.session.climbs];N.splice(I,1),Ya(t.session.id,{climbs:N}),t.onDelete()}let R=ha(()=>t.session.climbs.length),S=ha(()=>t.session.climbs.reduce((I,N)=>{const oe=parseInt(N.grade.replace(/\D/g,""))||0,de=parseInt(I.replace(/\D/g,""))||0;return oe>de?N.grade:I},"V0/4a"));var E=ci(),k=xe(E);let T;var z=a(k);z.__click=h,z.__keydown=I=>I.key==="Enter"&&h();var F=a(z),O=a(F),W=a(O),J=a(W,!0);e(W);var V=i(W,2),fe=a(V,!0);e(V),e(O);var ae=i(O,2),j=a(ae),p=a(j),A=a(p),K=i(A);{var Q=I=>{var N=wa();y(()=>l(N,`- ${t.session.crag??""}`)),r(I,N)};c(K,I=>{t.session.crag&&I(Q)})}e(p);var se=i(p,2);{var X=I=>{var N=Mt(),oe=a(N);e(N),y(()=>l(oe,`üìç ${t.session.sector??""}`)),r(I,N)};c(se,I=>{t.session.sector&&I(X)})}var n=i(se,2),x=a(n),L=a(x,!0);e(x);var f=i(x,2),d=a(f);e(f);var w=i(f,2);{var $=I=>{var N=Vt(),oe=a(N);e(N),y(()=>l(oe,`Max: ${s(S)??""}`)),r(I,N)};c(w,I=>{s(R)>0&&I($)})}e(n),e(j);var qe=i(j,2),ge=a(qe),ye=a(ge,!0);e(ge);var ue=i(ge,2),ve=a(ue,!0);e(ue);var ie=i(ue,2),ce=a(ie,!0);e(ie),e(qe),e(ae),e(F);var U=i(F,2),le=a(U),pe=a(le);{var Me=I=>{var N=Wt();r(I,N)},Je=I=>{var N=Te(),oe=xe(N);{var de=me=>{var he=Ht();r(me,he)};c(oe,me=>{t.session.syncStatus==="error"&&me(de)},!0)}r(I,N)};c(pe,I=>{t.session.syncStatus==="pending"?I(Me):I(Je,!1)})}e(le);var je=i(le,2);je.__click=I=>{I.stopPropagation(),b()};var Ke=i(je,2),ne=a(Ke,!0);e(Ke),e(U),e(z);var B=i(z,2);{var te=I=>{var N=di(),oe=a(N),de=a(oe),me=i(a(de),2),he=a(me);{var De=_=>{var q=Te(),G=xe(q);be(G,17,()=>t.session.trainingTypes,we,(Y,M)=>{var ee=Ut(),_e=a(ee,!0);e(ee),y(()=>l(_e,s(M))),r(Y,ee)}),r(_,q)},Ie=_=>{var q=Zt();r(_,q)};c(he,_=>{t.session.trainingTypes&&t.session.trainingTypes.length>0&&!t.session.trainingTypes.includes("None")?_(De):_(Ie,!1)})}e(me),e(de);var ze=i(de,2);{var Fe=_=>{var q=Jt(),G=i(a(q),2),Y=a(G,!0);e(G),e(q),y(()=>l(Y,t.session.difficulty)),r(_,q)};c(ze,_=>{t.session.difficulty&&_(Fe)})}var Ve=i(ze,2);{var Ce=_=>{var q=Qt(),G=i(a(q),2),Y=a(G);{var M=_e=>{var Se=Te(),He=xe(Se);be(He,17,()=>t.session.categories,we,(ke,Ue)=>{var ra=Kt(),Oa=a(ra,!0);e(ra),y(()=>l(Oa,s(Ue))),r(ke,ra)}),r(_e,Se)},ee=_e=>{var Se=Yt();r(_e,Se)};c(Y,_e=>{t.session.categories.length>0&&!t.session.categories.includes("None")?_e(M):_e(ee,!1)})}e(G),e(q),r(_,q)};c(Ve,_=>{t.session.categories?.length&&_(Ce)})}var Le=i(Ve,2);{var oa=_=>{var q=ei(),G=i(a(q),2),Y=a(G);{var M=_e=>{var Se=Te(),He=xe(Se);be(He,17,()=>t.session.techniqueFocuses,we,(ke,Ue)=>{var ra=Xt(),Oa=a(ra,!0);e(ra),y(()=>l(Oa,s(Ue))),r(ke,ra)}),r(_e,Se)},ee=_e=>{var Se=$t();r(_e,Se)};c(Y,_e=>{t.session.techniqueFocuses.length>0&&!t.session.techniqueFocuses.includes("None")?_e(M):_e(ee,!1)})}e(G),e(q),r(_,q)};c(Le,_=>{t.session.techniqueFocuses?.length&&_(oa)})}var Ge=i(Le,2);{var aa=_=>{var q=ti(),G=i(a(q),2),Y=a(G);{var M=_e=>{var Se=Te(),He=xe(Se);be(He,17,()=>t.session.energySystems,we,(ke,Ue)=>{var ra=ai(),Oa=a(ra,!0);e(ra),y(()=>l(Oa,s(Ue))),r(ke,ra)}),r(_e,Se)},ee=_e=>{var Se=si();r(_e,Se)};c(Y,_e=>{t.session.energySystems.length>0&&!t.session.energySystems.includes("None")?_e(M):_e(ee,!1)})}e(G),e(q),r(_,q)};c(Ge,_=>{t.session.energySystems?.length&&_(aa)})}e(oe);var Re=i(oe,2),sa=a(Re),da=i(a(sa),2),ta=a(da);e(da);var Oe=i(da,2),We=a(Oe);e(Oe),e(sa);var ca=i(sa,2),Ee=i(a(ca),2),ia=a(Ee);e(Ee);var _a=i(Ee,2),Pe=a(_a);e(_a),e(ca);var ba=i(ca,2),ua=i(a(ba),2),qa=a(ua);e(ua);var ga=i(ua,2),Ca=a(ga);e(ga),e(ba);var Da=i(ba,2);{var za=_=>{var q=ii(),G=i(a(q),2),Y=a(G);e(G);var M=i(G,2),ee=a(M);e(M),e(q),y(()=>{Ae(Y,`width: ${t.session.openGrip/5*100}%`),l(ee,`${t.session.openGrip??""}/5`)}),r(_,q)};c(Da,_=>{t.session.openGrip&&_(za)})}var ya=i(Da,2);{var Sa=_=>{var q=ri(),G=i(a(q),2),Y=a(G);e(G);var M=i(G,2),ee=a(M);e(M),e(q),y(()=>{Ae(Y,`width: ${t.session.crimpGrip/5*100}%`),l(ee,`${t.session.crimpGrip??""}/5`)}),r(_,q)};c(ya,_=>{t.session.crimpGrip&&_(Sa)})}var xa=i(ya,2);{var La=_=>{var q=vi(),G=i(a(q),2),Y=a(G);e(G);var M=i(G,2),ee=a(M);e(M),e(q),y(()=>{Ae(Y,`width: ${t.session.pinchGrip/5*100}%`),l(ee,`${t.session.pinchGrip??""}/5`)}),r(_,q)};c(xa,_=>{t.session.pinchGrip&&_(La)})}var ka=i(xa,2);{var Ga=_=>{var q=ni(),G=i(a(q),2),Y=a(G);e(G);var M=i(G,2),ee=a(M);e(M),e(q),y(()=>{Ae(Y,`width: ${t.session.sloperGrip/5*100}%`),l(ee,`${t.session.sloperGrip??""}/5`)}),r(_,q)};c(ka,_=>{t.session.sloperGrip&&_(Ga)})}var Ye=i(ka,2);{var Qe=_=>{var q=li(),G=i(a(q),2),Y=a(G);e(G);var M=i(G,2),ee=a(M);e(M),e(q),y(()=>{Ae(Y,`width: ${t.session.jugGrip/5*100}%`),l(ee,`${t.session.jugGrip??""}/5`)}),r(_,q)};c(Ye,_=>{t.session.jugGrip&&_(Qe)})}e(Re);var pa=i(Re,2),Na=i(a(pa),2),ja=a(Na);be(ja,17,()=>t.session.climbs,we,(_,q,G)=>{{let Y=ha(()=>t.session.climbingType==="Mixed");Bt(_,{get climb(){return s(q)},onDelete:()=>D(G),get showClimbType(){return s(Y)}})}});var P=i(ja,2);{var H=_=>{var q=oi();r(_,q)};c(P,_=>{t.session.climbs.length===0&&_(H)})}e(Na),e(pa),e(N),y(()=>{Ae(ta,`width: ${t.session.fingerLoad/5*100}%`),l(We,`${t.session.fingerLoad??""}/5`),Ae(ia,`width: ${t.session.shoulderLoad/5*100}%`),l(Pe,`${t.session.shoulderLoad??""}/5`),Ae(qa,`width: ${t.session.forearmLoad/5*100}%`),l(Ca,`${t.session.forearmLoad??""}/5`)}),Ze(3,N,()=>la,()=>({duration:200})),r(I,N)};c(B,I=>{s(m)&&I(te)})}e(k);var re=i(k,2);Va(re,{get isOpen(){return s(g)},title:"Delete Session",message:"Are you sure you want to delete this session and all its climbs? This cannot be undone.",onConfirm:u,onCancel:()=>o(g,!1)}),y((I,N)=>{T=Be(k,1,"session-card svelte-d5hg2r",null,T,{expanded:s(m)}),Ne(z,"aria-expanded",s(m)),l(J,I),l(fe,N),l(A,`${t.session.area??""} `),l(L,t.session.climbingType),l(d,`${s(R)??""} climbs`),Ne(ge,"title",`Finger Load: ${t.session.fingerLoad??""}`),l(ye,t.session.fingerLoad),Ne(ue,"title",`Shoulder Load: ${t.session.shoulderLoad??""}`),l(ve,t.session.shoulderLoad),Ne(ie,"title",`Forearm Load: ${t.session.forearmLoad??""}`),l(ce,t.session.forearmLoad),l(ne,s(m)?"‚ñ≤":"‚ñº")},[()=>new Date(t.session.date).getDate(),()=>new Date(t.session.date).toLocaleDateString(void 0,{month:"short"})]),r(C,E),na()}ea(["click","keydown"]);var ui=v('<span class="spinner svelte-1s7jdlh"></span> Fetching...',1),fi=v('<div class="error-banner svelte-1s7jdlh"> </div>'),gi=v('<small class="svelte-1s7jdlh">Try adjusting your filters.</small>'),pi=v('<div class="empty-state svelte-1s7jdlh"><p class="svelte-1s7jdlh">No outdoor climbing sessions found.</p> <!></div>'),mi=v('<div class="view-container svelte-1s7jdlh"><div class="view-header svelte-1s7jdlh"><h2 class="view-title svelte-1s7jdlh">‚õ∞Ô∏è Outdoor Climbing History</h2> <button class="fetch-btn svelte-1s7jdlh" title="Fetch data from cloud"><!></button></div> <!> <!> <div class="info-bar svelte-1s7jdlh"><div class="legend-wrapper svelte-1s7jdlh"><!></div> <div class="load-key svelte-1s7jdlh"><span class="key-label svelte-1s7jdlh">Load:</span> <div class="key-item svelte-1s7jdlh"><span class="dot finger svelte-1s7jdlh"></span> Finger</div> <div class="key-item svelte-1s7jdlh"><span class="dot shoulder svelte-1s7jdlh"></span> Shoulder</div> <div class="key-item svelte-1s7jdlh"><span class="dot forearm svelte-1s7jdlh"></span> Forearm</div></div></div> <div class="sessions-list"><!> <!></div></div>');function hi(C,t){va(t,!0);let m=Z(fa([])),g=Z(fa([])),h=Z(!1),b=Z(""),u=Z(fa({startDate:"",endDate:"",area:"",crag:"",sessionType:"",grade:""}));Ka(()=>{D()});function D(){const n=Ra("outdoor_climb");o(m,n.sort((x,L)=>new Date(L.date).getTime()-new Date(x.date).getTime()),!0),k()}async function R(){o(h,!0),o(b,"");try{await Ma();const n=await us();n.ok&&n.data?S(n.data):o(b,n.error||"Failed to fetch data",!0)}catch(n){o(b,n instanceof Error?n.message:"Unknown error",!0)}finally{o(h,!1)}}function S(n){const x=n.map(f=>({...f,activityType:"outdoor_climb",createdAt:new Date().toISOString(),updatedAt:new Date().toISOString(),syncStatus:"synced",syncedAt:new Date().toISOString()}));Ba(x);const L=Ra("outdoor_climb");o(m,L.sort((f,d)=>new Date(d.date).getTime()-new Date(f.date).getTime()),!0),k()}function E(n){o(u,n,!0),k()}function k(){o(g,s(m).filter(n=>{if(s(u).startDate&&n.date<s(u).startDate||s(u).endDate&&n.date>s(u).endDate||s(u).area&&!n.area.toLowerCase().includes(s(u).area.toLowerCase())||s(u).crag&&!n.crag.toLowerCase().includes(s(u).crag.toLowerCase())||s(u).sessionType&&!n.trainingTypes?.includes(s(u).sessionType))return!1;if(s(u).grade){const x=s(u).grade.trim().toLowerCase();if(!n.climbs.some(f=>f.grade.trim().toLowerCase()===x))return!1}return!0}),!0)}var T=mi(),z=a(T),F=i(a(z),2);F.__click=R;var O=a(F);{var W=n=>{var x=ui();Fa(),r(n,x)},J=n=>{var x=wa("‚òÅÔ∏è Fetch Data");r(n,x)};c(O,n=>{s(h)?n(W):n(J,!1)})}e(F),e(z);var V=i(z,2);{var fe=n=>{var x=fi(),L=a(x,!0);e(x),y(()=>l(L,s(b))),Ze(3,x,()=>la),r(n,x)};c(V,n=>{s(b)&&n(fe)})}var ae=i(V,2);Ot(ae,{onFilterParamsChange:E});var j=i(ae,2),p=a(j),A=a(p);$a(A),e(p),Fa(2),e(j);var K=i(j,2),Q=a(K);be(Q,17,()=>s(g),n=>n.id,(n,x)=>{_i(n,{get session(){return s(x)},onDelete:D})});var se=i(Q,2);{var X=n=>{var x=pi(),L=i(a(x),2);{var f=d=>{var w=gi();r(d,w)};c(L,d=>{s(m).length>0&&d(f)})}e(x),r(n,x)};c(se,n=>{s(g).length===0&&n(X)})}e(K),e(T),y(()=>F.disabled=s(h)),r(C,T),na()}ea(["click"]);var bi=v('<div class="view-container svelte-133enjd"><h2 class="view-title svelte-133enjd">üèãÔ∏è Gym Session History</h2> <p class="placeholder-text svelte-133enjd">Your gym sessions will appear here</p></div>');function yi(C){var t=bi();r(C,t)}var xi=v('<span class="spinner svelte-1szs0u9"></span> Fetching...',1),wi=v('<div class="loading svelte-1szs0u9">Loading sessions...</div>'),qi=v('<div class="empty-state svelte-1szs0u9"><!></div>'),Di=v('<span class="set-tag svelte-1szs0u9"> <span class="x svelte-1szs0u9">x</span> </span>'),Si=v('<div class="ex-notes svelte-1szs0u9"> </div>'),ki=v('<div class="exercise-item svelte-1szs0u9"><div class="ex-header svelte-1szs0u9"><span class="ex-name svelte-1szs0u9"> </span> <span class="ex-grip svelte-1szs0u9"> </span></div> <div class="ex-sets svelte-1szs0u9"></div> <!></div>'),Ti=v('<div class="card-body svelte-1szs0u9"><div class="exercises-list svelte-1szs0u9"></div></div>'),Fi=v('<div><div class="card-header" role="button" tabindex="0"><div class="header-main"><span class="session-date svelte-1szs0u9"> </span> <span class="meta svelte-1szs0u9"><!> </span></div> <div class="header-status svelte-1szs0u9"><span>‚óè</span> <button class="btn-icon delete-btn svelte-1szs0u9" title="Delete Session">üóëÔ∏è</button> <span class="chevron svelte-1szs0u9"> </span></div></div> <!></div>'),Ci=v('<div class="timeline svelte-1szs0u9"></div>'),zi=v('<div class="view-content svelte-1szs0u9"><div class="header svelte-1szs0u9"><h3 class="svelte-1szs0u9">ü§è Fingerboarding Log</h3> <button class="fetch-btn svelte-1szs0u9" title="Fetch data from cloud"><!></button></div> <div class="filters svelte-1szs0u9"><div class="filter-group svelte-1szs0u9"><label for="start-date" class="svelte-1szs0u9">From</label> <input type="date" id="start-date" class="svelte-1szs0u9"/></div> <div class="filter-group svelte-1szs0u9"><label for="end-date" class="svelte-1szs0u9">To</label> <input type="date" id="end-date" class="svelte-1szs0u9"/></div></div> <!></div> <!>',1);function Li(C,t){va(t,!0);let m=Z(fa([])),g=Z(!0),h=Z(""),b=Z(""),u=Z(fa(new Set)),D=Z(!1),R=Z(null);function S(f){o(R,f,!0),o(D,!0)}function E(){s(R)&&(Pa(s(R)),o(R,null),o(D,!1),o(m,Wa().sort((f,d)=>new Date(d.date).getTime()-new Date(f.date).getTime()),!0))}async function k(){o(g,!0),o(m,Wa().sort((f,d)=>new Date(d.date).getTime()-new Date(f.date).getTime()),!0);try{await Ma();const f=await fs();if(f.ok&&f.data){const d=f.data.map(w=>({...w,activityType:"fingerboarding",createdAt:w.createdAt||new Date().toISOString(),updatedAt:w.updatedAt||new Date().toISOString(),syncStatus:"synced"}));Ba(d),o(m,Wa().sort((w,$)=>new Date($.date).getTime()-new Date(w.date).getTime()),!0)}}catch(f){console.error("Failed to sync",f)}finally{o(g,!1)}}k();let T=ha(()=>s(m).filter(f=>!(s(h)&&new Date(f.date)<new Date(s(h))||s(b)&&new Date(f.date)>new Date(s(b)))));function z(f){s(u).has(f)?s(u).delete(f):s(u).add(f),o(u,new Set(s(u)),!0)}function F(f){return f.exercises.reduce((d,w)=>d+w.details.length,0)}var O=zi(),W=xe(O),J=a(W),V=i(a(J),2);V.__click=k;var fe=a(V);{var ae=f=>{var d=xi();Fa(),r(f,d)},j=f=>{var d=wa("‚òÅÔ∏è Fetch Data");r(f,d)};c(fe,f=>{s(g)?f(ae):f(j,!1)})}e(V),e(J);var p=i(J,2),A=a(p),K=i(a(A),2);Xe(K),e(A);var Q=i(A,2),se=i(a(Q),2);Xe(se),e(Q),e(p);var X=i(p,2);{var n=f=>{var d=wi();r(f,d)},x=f=>{var d=Te(),w=xe(d);{var $=ge=>{var ye=qi(),ue=a(ye);{var ve=ce=>{var U=wa("No sessions match filter.");r(ce,U)},ie=ce=>{var U=wa("No fingerboarding sessions logged yet.");r(ce,U)};c(ue,ce=>{s(m).length>0?ce(ve):ce(ie,!1)})}e(ye),r(ge,ye)},qe=ge=>{var ye=Ci();be(ye,21,()=>s(T),we,(ue,ve)=>{var ie=Fi();let ce;var U=a(ie);U.__click=()=>z(s(ve).id),U.__keydown=he=>he.key==="Enter"&&z(s(ve).id);var le=a(U),pe=a(le),Me=a(pe,!0);e(pe);var Je=i(pe,2),je=a(Je);{var Ke=he=>{var De=wa();y(()=>l(De,`${s(ve).location??""} ¬∑`)),r(he,De)};c(je,he=>{s(ve).location&&s(ve).location!=="N/A"&&s(ve).location!=="Home"&&he(Ke)})}var ne=i(je);e(Je),e(le);var B=i(le,2),te=a(B);let re;var I=i(te,2);I.__click=he=>{he.stopPropagation(),S(s(ve).id)};var N=i(I,2),oe=a(N,!0);e(N),e(B),e(U);var de=i(U,2);{var me=he=>{var De=Ti(),Ie=a(De);be(Ie,21,()=>s(ve).exercises,we,(ze,Fe)=>{var Ve=ki(),Ce=a(Ve),Le=a(Ce),oa=a(Le,!0);e(Le);var Ge=i(Le,2),aa=a(Ge,!0);e(Ge),e(Ce);var Re=i(Ce,2);be(Re,21,()=>s(Fe).details,we,(ta,Oe)=>{var We=Di(),ca=a(We),Ee=i(ca,2);e(We),y(()=>{l(ca,`${s(Oe).weight>0?`+${s(Oe).weight}kg`:"BW"} `),l(Ee,` ${s(Oe).reps??""}s/reps`)}),r(ta,We)}),e(Re);var sa=i(Re,2);{var da=ta=>{var Oe=Si(),We=a(Oe);e(Oe),y(()=>l(We,`"${s(Fe).notes??""}"`)),r(ta,Oe)};c(sa,ta=>{s(Fe).notes&&ta(da)})}e(Ve),y(()=>{l(oa,s(Fe).name),l(aa,s(Fe).gripType)}),r(ze,Ve)}),e(Ie),e(De),Ze(3,De,()=>la,()=>({duration:200})),r(he,De)};c(de,he=>{s(u).has(s(ve).id)&&he(me)})}e(ie),y((he,De,Ie,ze)=>{ce=Be(ie,1,"session-card",null,ce,he),l(Me,De),l(ne,` ${s(ve).exercises.length??""} Exercises ¬∑ ${Ie??""} Sets`),re=Be(te,1,"sync-dot svelte-1szs0u9",null,re,{synced:s(ve).syncStatus==="synced"}),Ne(te,"title",s(ve).syncStatus==="synced"?"Synced":"Local"),l(oe,ze)},[()=>({expanded:s(u).has(s(ve).id)}),()=>new Date(s(ve).date).toLocaleDateString(void 0,{weekday:"short",month:"short",day:"numeric"}),()=>F(s(ve)),()=>s(u).has(s(ve).id)?"‚ñ≤":"‚ñº"]),r(ue,ie)}),e(ye),r(ge,ye)};c(w,ge=>{s(T).length===0?ge($):ge(qe,!1)},!0)}r(f,d)};c(X,f=>{s(g)&&s(m).length===0?f(n):f(x,!1)})}e(W);var L=i(W,2);Va(L,{get isOpen(){return s(D)},title:"Delete Fingerboard Session",message:"Are you sure you want to delete this session? This cannot be undone.",onConfirm:E,onCancel:()=>o(D,!1)}),y(()=>V.disabled=s(g)),$e(K,()=>s(h),f=>o(h,f)),$e(se,()=>s(b),f=>o(b,f)),r(C,O),na()}ea(["click","keydown"]);var Gi=v('<span class="spinner svelte-xyvf5r"></span> Fetching...',1),Oi=v('<div class="loading svelte-xyvf5r">Loading sessions...</div>'),Ei=v('<div class="empty-state svelte-xyvf5r">No competitions logged yet.</div>'),Ai=v('<span class="round-pos svelte-xyvf5r"> </span>'),Ni=v('<span class="c-attempts svelte-xyvf5r"> </span>'),ji=v('<div class="climb-notes svelte-xyvf5r"> </div>'),Ii=v('<div class="climb-row svelte-xyvf5r"><div class="climb-info svelte-xyvf5r"><span class="c-name svelte-xyvf5r"> </span> <!></div> <div class="climb-result"><span> </span></div></div> <!>',1),Ri=v('<div class="climbs-list"></div>'),Pi=v('<div class="round-item svelte-xyvf5r"><div class="round-header svelte-xyvf5r"><span class="round-name"> </span> <!></div> <!></div>'),Bi=v('<div class="rounds-list svelte-xyvf5r"></div>'),Mi=v('<div class="load-meta svelte-xyvf5r"><span> </span></div>'),Vi=v('<div class="card-body svelte-xyvf5r"><!> <!> <div class="session-footer svelte-xyvf5r"><span> </span></div></div>'),Wi=v('<div><div class="card-header svelte-xyvf5r" role="button" tabindex="0"><div class="header-main svelte-xyvf5r"><div class="left-col svelte-xyvf5r"><span class="venue svelte-xyvf5r"> </span> <span class="date svelte-xyvf5r"> </span></div> <div class="right-col svelte-xyvf5r"><div class="badges svelte-xyvf5r"><span class="type-tag svelte-xyvf5r"> </span> <span class="result-tag svelte-xyvf5r"> </span></div></div></div> <div class="header-status svelte-xyvf5r"><span>‚óè</span> <button class="btn-icon delete-btn svelte-xyvf5r" title="Delete Session">üóëÔ∏è</button> <span class="chevron svelte-xyvf5r"> </span></div></div> <!></div>'),Hi=v('<div class="timeline svelte-xyvf5r"></div>'),Ui=v('<div class="view-content svelte-xyvf5r"><div class="header svelte-xyvf5r"><h3 class="svelte-xyvf5r">üèÜ Competition Log</h3> <button class="fetch-btn svelte-xyvf5r" title="Fetch data from cloud"><!></button></div> <!> <!></div>');function Zi(C,t){va(t,!0);let m=Z(fa([])),g=Z(!0),h=Z(fa(new Set)),b=Z(!1),u=Z(null);function D(p){o(u,p,!0),o(b,!0)}function R(){s(u)&&(Pa(s(u)),o(u,null),o(b,!1),o(m,Ha().sort((p,A)=>new Date(A.date).getTime()-new Date(p.date).getTime()),!0))}async function S(){o(g,!0),o(m,Ha().sort((p,A)=>new Date(A.date).getTime()-new Date(p.date).getTime()),!0);try{await Ma();const p=await gs();if(p.ok&&p.data){const A=p.data.map(K=>({...K,activityType:"competition",type:K.type,rounds:K.rounds.map(Q=>({...Q,climbs:Q.climbs?.map(se=>({...se,status:se.status}))})),createdAt:K.createdAt||new Date().toISOString(),updatedAt:K.updatedAt||new Date().toISOString(),syncStatus:"synced"}));Ba(A),o(m,Ha().sort((K,Q)=>new Date(Q.date).getTime()-new Date(K.date).getTime()),!0)}}catch(p){console.error("Failed to sync",p)}finally{o(g,!1)}}S();function E(p){s(h).has(p)?s(h).delete(p):s(h).add(p),o(h,new Set(s(h)),!0)}function k(p){if(!p.rounds||p.rounds.length===0)return"No rounds";const A=p.rounds[p.rounds.length-1];if(A.position)return`#${A.position} ${A.name}`;if(A.climbs){const K=A.climbs.filter(se=>se.status==="Top"||se.status==="Flash").length,Q=A.climbs.filter(se=>se.status==="Zone").length;return`${p.rounds.length} Rnds ¬∑ Final: ${K}T ${Q+K}Z`}return A.name}var T=Ui(),z=a(T),F=i(a(z),2);F.__click=S;var O=a(F);{var W=p=>{var A=Gi();Fa(),r(p,A)},J=p=>{var A=wa("‚òÅÔ∏è Fetch Data");r(p,A)};c(O,p=>{s(g)?p(W):p(J,!1)})}e(F),e(z);var V=i(z,2);{var fe=p=>{var A=Oi();r(p,A)},ae=p=>{var A=Te(),K=xe(A);{var Q=X=>{var n=Ei();r(X,n)},se=X=>{var n=Hi();be(n,21,()=>s(m),we,(x,L)=>{var f=Wi();let d;var w=a(f);w.__click=()=>E(s(L).id),w.__keydown=N=>N.key==="Enter"&&E(s(L).id);var $=a(w),qe=a($),ge=a(qe),ye=a(ge,!0);e(ge);var ue=i(ge,2),ve=a(ue,!0);e(ue),e(qe);var ie=i(qe,2),ce=a(ie),U=a(ce),le=a(U,!0);e(U);var pe=i(U,2),Me=a(pe,!0);e(pe),e(ce),e(ie),e($);var Je=i($,2),je=a(Je);let Ke;var ne=i(je,2);ne.__click=N=>{N.stopPropagation(),D(s(L).id)};var B=i(ne,2),te=a(B,!0);e(B),e(Je),e(w);var re=i(w,2);{var I=N=>{var oe=Vi(),de=a(oe);{var me=Ce=>{var Le=Bi();be(Le,21,()=>s(L).rounds,we,(oa,Ge)=>{var aa=Pi(),Re=a(aa),sa=a(Re),da=a(sa,!0);e(sa);var ta=i(sa,2);{var Oe=Ee=>{var ia=Ai(),_a=a(ia);e(ia),y(()=>l(_a,`#${s(Ge).position??""}`)),r(Ee,ia)};c(ta,Ee=>{s(Ge).position&&Ee(Oe)})}e(Re);var We=i(Re,2);{var ca=Ee=>{var ia=Ri();be(ia,21,()=>s(Ge).climbs,we,(_a,Pe)=>{var ba=Ii(),ua=xe(ba),qa=a(ua),ga=a(qa),Ca=a(ga,!0);e(ga);var Da=i(ga,2);{var za=Ye=>{var Qe=Ni(),pa=a(Qe);e(Qe),y(()=>l(pa,`(${s(Pe).attemptCount??""} tries)`)),r(Ye,Qe)};c(Da,Ye=>{s(Pe).attemptCount>1&&Ye(za)})}e(qa);var ya=i(qa,2),Sa=a(ya);let xa;var La=a(Sa,!0);e(Sa),e(ya),e(ua);var ka=i(ua,2);{var Ga=Ye=>{var Qe=ji(),pa=a(Qe);e(Qe),y(()=>l(pa,`"${s(Pe).notes??""}"`)),r(Ye,Qe)};c(ka,Ye=>{s(Pe).notes&&Ye(Ga)})}y(()=>{l(Ca,s(Pe).name),xa=Be(Sa,1,"status-badge svelte-xyvf5r",null,xa,{top:s(Pe).status==="Top"||s(Pe).status==="Flash",zone:s(Pe).status==="Zone"}),l(La,s(Pe).status)}),r(_a,ba)}),e(ia),r(Ee,ia)};c(We,Ee=>{s(Ge).climbs&&Ee(ca)})}e(aa),y(()=>l(da,s(Ge).name)),r(oa,aa)}),e(Le),r(Ce,Le)};c(de,Ce=>{s(L).rounds&&Ce(me)})}var he=i(de,2);{var De=Ce=>{var Le=Mi(),oa=a(Le),Ge=a(oa);e(oa),e(Le),y(()=>l(Ge,`Detailed Load: Fingers ${s(L).fingerLoad??""}/5, Shoulders ${s(L).shoulderLoad??""}/5, Forearms ${s(L).forearmLoad??""}/5`)),r(Ce,Le)};c(he,Ce=>{(s(L).fingerLoad||s(L).shoulderLoad)&&Ce(De)})}var Ie=i(he,2),ze=a(Ie);let Fe;var Ve=a(ze,!0);e(ze),e(Ie),e(oe),y(()=>{Fe=Be(ze,1,"sync-status svelte-xyvf5r",null,Fe,{synced:s(L).syncStatus==="synced"}),l(Ve,s(L).syncStatus==="synced"?"‚úì Synced":"‚òÅ Local")}),Ze(3,oe,()=>la,()=>({duration:200})),r(N,oe)};c(re,N=>{s(h).has(s(L).id)&&N(I)})}e(f),y((N,oe,de,me)=>{d=Be(f,1,"session-card svelte-xyvf5r",null,d,N),l(ye,s(L).customVenue||s(L).venue),l(ve,oe),l(le,s(L).type),l(Me,de),Ke=Be(je,1,"sync-dot",null,Ke,{synced:s(L).syncStatus==="synced"}),Ne(je,"title",s(L).syncStatus==="synced"?"Synced":"Local"),l(te,me)},[()=>({expanded:s(h).has(s(L).id)}),()=>new Date(s(L).date).toLocaleDateString(void 0,{weekday:"short",day:"numeric",month:"short"}),()=>k(s(L)),()=>s(h).has(s(L).id)?"‚ñ≤":"‚ñº"]),r(x,f)}),e(n),r(X,n)};c(K,X=>{s(m).length===0?X(Q):X(se,!1)},!0)}r(p,A)};c(V,p=>{s(g)&&s(m).length===0?p(fe):p(ae,!1)})}var j=i(V,2);Va(j,{get isOpen(){return s(b)},title:"Delete Competition",message:"Are you sure you want to delete this competition session? This action cannot be undone.",onConfirm:R,onCancel:()=>o(b,!1)}),e(T),y(()=>F.disabled=s(g)),r(C,T),na()}ea(["click","keydown"]);var Ji=v("<option> </option>"),Ki=v('<div class="view-container svelte-108px9u"><!></div>'),Yi=v('<div class="page svelte-108px9u"><div class="page-header svelte-108px9u"><h1 class="svelte-108px9u">üìä View Data</h1> <p class="subtitle svelte-108px9u">Browse your training history</p></div> <div class="content-card svelte-108px9u"><div class="form-group svelte-108px9u"><label for="activity-type" class="svelte-108px9u">Activity Type</label> <select id="activity-type" class="svelte-108px9u"><option disabled>Select an activity...</option><!></select></div> <!></div></div>');function lr(C){const t=[{value:"indoor_climb",label:"Indoor Climb",icon:"üßó"},{value:"outdoor_climb",label:"Outdoor Climb",icon:"‚õ∞Ô∏è"},{value:"gym_session",label:"Gym Session",icon:"üèãÔ∏è"},{value:"fingerboarding",label:"Fingerboarding",icon:"ü§è"},{value:"competition",label:"Competition",icon:"üèÜ"}];let m=Z("");var g=Yi(),h=i(a(g),2),b=a(h),u=i(a(b),2),D=a(u);D.value=D.__value="";var R=i(D);be(R,17,()=>t,k=>k.value,(k,T)=>{var z=Ji(),F=a(z);e(z);var O={};y(()=>{l(F,`${s(T).icon??""} ${s(T).label??""}`),O!==(O=s(T).value)&&(z.value=(z.__value=s(T).value)??"")}),r(k,z)}),e(u),e(b);var S=i(b,2);{var E=k=>{var T=Ki(),z=a(T);{var F=W=>{yt(W,{})},O=W=>{var J=Te(),V=xe(J);{var fe=j=>{hi(j,{})},ae=j=>{var p=Te(),A=xe(p);{var K=se=>{yi(se)},Q=se=>{var X=Te(),n=xe(X);{var x=f=>{Li(f,{})},L=f=>{var d=Te(),w=xe(d);{var $=qe=>{Zi(qe,{})};c(w,qe=>{s(m)==="competition"&&qe($)},!0)}r(f,d)};c(n,f=>{s(m)==="fingerboarding"?f(x):f(L,!1)},!0)}r(se,X)};c(A,se=>{s(m)==="gym_session"?se(K):se(Q,!1)},!0)}r(j,p)};c(V,j=>{s(m)==="outdoor_climb"?j(fe):j(ae,!1)},!0)}r(W,J)};c(z,W=>{s(m)==="indoor_climb"?W(F):W(O,!1)})}e(T),r(k,T)};c(S,k=>{s(m)&&k(E)})}e(h),e(g),Ta(u,()=>s(m),k=>o(m,k)),r(C,g)}export{lr as component};
