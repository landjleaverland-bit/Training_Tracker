import{f as n,a as r,c as Ce,t as wa}from"../chunks/bxSSDmCG.js";import{H as at,$ as tt,aZ as st,aw as it,q as rt,e as nt,a_ as vt,aN as Ja,a$ as lt,ai as ot,b0 as ja,p as ca,c as a,s as i,i as t,aV as U,r as e,t as y,a as _a,F as d,f as we,aW as ba,E as ga,o as Ka,aG as Ga,d as dt}from"../chunks/BvwCwrbP.js";import{a as ct,d as na,s as l}from"../chunks/D97XAFTq.js";import{i as _}from"../chunks/DJDEC4-q.js";import{s as Re,r as ia,e as xe,i as De,b as ra}from"../chunks/C6b-0WKN.js";import{c as La,j as Ma,k as Ya,l as Ra,n as Pa,o as Wa,p as Ua}from"../chunks/CIEREIgH.js";import{s as He}from"../chunks/r3Oz2b9H.js";import{s as Ie}from"../chunks/CT9WbTd_.js";import{p as Na}from"../chunks/BzRc-_KC.js";import{s as Ba,h as _t,g as ut,b as ft,j as gt,k as pt,l as mt}from"../chunks/DD0kMcH3.js";import"../chunks/C34k2uMk.js";const ht=()=>performance.now(),ha={tick:k=>requestAnimationFrame(k),now:()=>ht(),tasks:new Set};function Qa(){const k=ha.now();ha.tasks.forEach(s=>{s.c(k)||(ha.tasks.delete(s),s.f())}),ha.tasks.size!==0&&ha.tick(Qa)}function bt(k){let s;return ha.tasks.size===0&&ha.tick(Qa),{promise:new Promise(g=>{ha.tasks.add(s={c:k,f:g})}),abort(){ha.tasks.delete(s)}}}function Ia(k,s){Ja(()=>{k.dispatchEvent(new CustomEvent(s))})}function yt(k){if(k==="float")return"cssFloat";if(k==="offset")return"cssOffset";if(k.startsWith("--"))return k;const s=k.split("-");return s.length===1?s[0]:s[0]+s.slice(1).map(g=>g[0].toUpperCase()+g.slice(1)).join("")}function Za(k){const s={},g=k.split(";");for(const u of g){const[h,p]=u.split(":");if(!h||p===void 0)break;const f=yt(h.trim());s[f]=p.trim()}return s}const xt=k=>k;function ta(k,s,g,u){var h=(k&vt)!==0,p="both",f,m=s.inert,x=s.style.overflow,q,F;function C(){return Ja(()=>f??=g()(s,u?.()??{},{direction:p}))}var z={is_global:h,in(){s.inert=m,Ia(s,"introstart"),q=Ha(s,C(),F,1,()=>{Ia(s,"introend"),q?.abort(),q=f=void 0,s.style.overflow=x})},out(M){s.inert=!0,Ia(s,"outrostart"),F=Ha(s,C(),q,0,()=>{Ia(s,"outroend"),M?.()})},stop:()=>{q?.abort(),F?.abort()}},G=at;if((G.nodes.t??=[]).push(z),ct){var O=h;if(!O){for(var T=G.parent;T&&(T.f&tt)!==0;)for(;(T=T.parent)&&(T.f&st)===0;);O=!T||(T.f&it)!==0}O&&rt(()=>{nt(()=>z.in())})}}function Ha(k,s,g,u,h){var p=u===1;if(lt(s)){var f,m=!1;return ot(()=>{if(!m){var M=s({direction:p?"in":"out"});f=Ha(k,M,g,u,h)}}),{abort:()=>{m=!0,f?.abort()},deactivate:()=>f.deactivate(),reset:()=>f.reset(),t:()=>f.t()}}if(g?.deactivate(),!s?.duration)return h(),{abort:ja,deactivate:ja,reset:ja,t:()=>u};const{delay:x=0,css:q,tick:F,easing:C=xt}=s;var z=[];if(p&&g===void 0&&(F&&F(0,1),q)){var G=Za(q(0,1));z.push(G,G)}var O=()=>1-u,T=k.animate(z,{duration:x,fill:"forwards"});return T.onfinish=()=>{T.cancel();var M=g?.t()??1-u;g?.abort();var J=u-M,K=s.duration*Math.abs(J),ve=[];if(K>0){var se=!1;if(q)for(var j=Math.ceil(K/16.666666666666668),X=0;X<=j;X+=1){var le=M+J*C(X/j),pe=Za(q(le,1-le));ve.push(pe),se||=pe.overflow==="hidden"}se&&(k.style.overflow="hidden"),O=()=>{var D=T.currentTime;return M+J*C(D/K)},F&&bt(()=>{if(T.playState!=="running")return!1;var D=O();return F(D,1-D),!0})}T=k.animate(ve,{duration:K,fill:"forwards"}),T.onfinish=()=>{O=()=>u,F?.(u,1-u),h()}},{abort:()=>{T&&(T.cancel(),T.effect=null,T.onfinish=ja)},deactivate:()=>{h=ja},reset:()=>{u===0&&F?.(1,0)},t:()=>O()}}const wt=k=>k;function Xa(k){const s=k-1;return s*s*s+1}function qt(k,{delay:s=0,duration:g=400,easing:u=wt}={}){const h=+getComputedStyle(k).opacity;return{delay:s,duration:g,easing:u,css:p=>`opacity: ${p*h}`}}function ua(k,{delay:s=0,duration:g=400,easing:u=Xa,axis:h="y"}={}){const p=getComputedStyle(k),f=+p.opacity,m=h==="y"?"height":"width",x=parseFloat(p[m]),q=h==="y"?["top","bottom"]:["left","right"],F=q.map(J=>`${J[0].toUpperCase()}${J.slice(1)}`),C=parseFloat(p[`padding${F[0]}`]),z=parseFloat(p[`padding${F[1]}`]),G=parseFloat(p[`margin${F[0]}`]),O=parseFloat(p[`margin${F[1]}`]),T=parseFloat(p[`border${F[0]}Width`]),M=parseFloat(p[`border${F[1]}Width`]);return{delay:s,duration:g,easing:u,css:J=>`overflow: hidden;opacity: ${Math.min(J*20,1)*f};${m}: ${J*x}px;padding-${q[0]}: ${J*C}px;padding-${q[1]}: ${J*z}px;margin-${q[0]}: ${J*G}px;margin-${q[1]}: ${J*O}px;border-${q[0]}-width: ${J*T}px;border-${q[1]}-width: ${J*M}px;min-${m}: 0`}}function Dt(k,{delay:s=0,duration:g=400,easing:u=Xa,start:h=0,opacity:p=0}={}){const f=getComputedStyle(k),m=+f.opacity,x=f.transform==="none"?"":f.transform,q=1-h,F=m*(1-p);return{delay:s,duration:g,easing:u,css:(C,z)=>`
			transform: ${x} scale(${1-q*z});
			opacity: ${m-F*z}
		`}}var St=n('<span class="chevron svelte-12crvy">‚ñ≤</span>'),kt=n('<span class="chevron svelte-12crvy">‚ñº</span>'),Tt=n("<option> </option>"),Ct=n("<option> </option>"),Ft=n('<div class="filter-body svelte-12crvy"><div class="filter-grid svelte-12crvy"><div class="filter-item svelte-12crvy"><label for="start-date" class="svelte-12crvy">Start Date</label> <input type="date" id="start-date" class="svelte-12crvy"/></div> <div class="filter-item svelte-12crvy"><label for="end-date" class="svelte-12crvy">End Date</label> <input type="date" id="end-date" class="svelte-12crvy"/></div> <div class="filter-item svelte-12crvy"><label for="location-filter" class="svelte-12crvy">Location</label> <select id="location-filter" class="svelte-12crvy"><option>Any Location</option><!></select></div> <div class="filter-item svelte-12crvy"><label for="session-type-filter" class="svelte-12crvy">Session Type</label> <select id="session-type-filter" class="svelte-12crvy"><option>Any Type</option><!></select></div> <div class="filter-item svelte-12crvy"><label for="grade-filter" class="svelte-12crvy">Grade (Exact)</label> <input type="text" id="grade-filter" placeholder="e.g. V4" class="svelte-12crvy"/></div></div> <div class="filter-actions svelte-12crvy"><button class="reset-btn svelte-12crvy">Reset Filters</button></div></div>'),zt=n('<div class="filter-container svelte-12crvy"><button class="filter-header svelte-12crvy"><div class="header-content svelte-12crvy"><span class="icon svelte-12crvy">üîç</span> <span class="title svelte-12crvy">Filters</span> <!></div></button> <!></div>');function Lt(k,s){ca(s,!0);const g=["Rockstar Swindon","Flashpoint Swindon","Flashpoint Bristol","Redpoint Bristol","TCH Bristol","Other"],u=["Projecting","Onsighting","Campusing","Repeaters"];let h=U(!1),p=U(""),f=U(""),m=U(""),x=U(""),q=U("");function F(){d(h,!t(h))}function C(){d(p,""),d(f,""),d(m,""),d(x,""),d(q,""),z()}function z(){s.onFilterParamsChange({startDate:t(p),endDate:t(f),location:t(m),sessionType:t(x),grade:t(q)})}var G=zt(),O=a(G);O.__click=F;var T=a(O),M=i(a(T),4);{var J=j=>{var X=St();r(j,X)},K=j=>{var X=kt();r(j,X)};_(M,j=>{t(h)?j(J):j(K,!1)})}e(T),e(O);var ve=i(O,2);{var se=j=>{var X=Ft(),le=a(X),pe=a(le),D=i(a(pe),2);ia(D),D.__change=z,e(pe);var N=i(pe,2),W=i(a(N),2);ia(W),W.__change=z,e(N);var ee=i(N,2),ae=i(a(ee),2);ae.__change=z;var fe=a(ae);fe.value=fe.__value="";var re=i(fe);xe(re,17,()=>g,De,(Y,ye)=>{var $=Tt(),ue=a($,!0);e($);var oe={};y(()=>{l(ue,t(ye)),oe!==(oe=t(ye))&&($.value=($.__value=t(ye))??"")}),r(Y,$)}),e(ae),e(ee);var S=i(ee,2),I=i(a(S),2);I.__change=z;var b=a(I);b.value=b.__value="";var v=i(b);xe(v,17,()=>u,De,(Y,ye)=>{var $=Ct(),ue=a($,!0);e($);var oe={};y(()=>{l(ue,t(ye)),oe!==(oe=t(ye))&&($.value=($.__value=t(ye))??"")}),r(Y,$)}),e(I),e(S);var o=i(S,2),P=i(a(o),2);ia(P),P.__input=z,e(o),e(le);var H=i(le,2),ie=a(H);ie.__click=C,e(H),e(X),ra(D,()=>t(p),Y=>d(p,Y)),ra(W,()=>t(f),Y=>d(f,Y)),La(ae,()=>t(m),Y=>d(m,Y)),La(I,()=>t(x),Y=>d(x,Y)),ra(P,()=>t(q),Y=>d(q,Y)),ta(3,X,()=>ua,()=>({duration:200})),r(j,X)};_(ve,j=>{t(h)&&j(se)})}e(G),y(()=>Re(O,"aria-expanded",t(h))),r(k,G),_a()}na(["click","change","input"]);var Gt=n('<span class="climb-type-tag svelte-yz0xxt"> </span>'),Et=n('<span class="notes-preview svelte-yz0xxt"> </span>'),At=n('<span class="attempts-count svelte-yz0xxt"> </span>'),Ot=n('<div class="detail-row svelte-yz0xxt"><span class="label svelte-yz0xxt">Notes:</span> <p class="notes svelte-yz0xxt"> </p></div>'),jt=n('<p class="empty-notes svelte-yz0xxt">No notes for this climb.</p>'),Nt=n('<div class="climb-details svelte-yz0xxt"><!> <div class="tags svelte-yz0xxt"><span class="tag type svelte-yz0xxt"> </span> <span class="tag attempt-text svelte-yz0xxt"> </span></div></div>'),It=n('<div><div class="climb-header svelte-yz0xxt" role="button" tabindex="0"><div class="climb-main-info svelte-yz0xxt"><span> </span> <span class="climb-name svelte-yz0xxt"> </span> <!> <!></div> <div class="climb-meta svelte-yz0xxt"><span><span class="icon svelte-yz0xxt"> </span> <!></span> <button class="delete-btn svelte-yz0xxt" aria-label="Delete climb" title="Delete climb">üóëÔ∏è</button> <span class="chevron svelte-yz0xxt"> </span></div></div> <!></div>');function Rt(k,s){ca(s,!0);let g=Na(s,"showClimbType",3,!1),u=U(!1);function h(){d(u,!t(u))}function p(S){S.stopPropagation(),s.onDelete()}const f={Flash:"‚ö°",Onsight:"üëÅÔ∏è",Redpoint:"üî¥",Dogged:"üõ†Ô∏è",DNF:"‚ùå"};var m=It();let x;var q=a(m);q.__click=h,q.__keydown=S=>(S.key==="Enter"||S.key===" ")&&h();var F=a(q),C=a(F);let z;var G=a(C,!0);e(C);var O=i(C,2),T=a(O,!0);e(O);var M=i(O,2);{var J=S=>{var I=Gt(),b=a(I,!0);e(I),y(()=>l(b,s.climb.isSport?"Sport":"Boulder")),r(S,I)};_(M,S=>{g()&&S(J)})}var K=i(M,2);{var ve=S=>{var I=Et(),b=a(I);e(I),y(()=>l(b,`- ${s.climb.notes??""}`)),r(S,I)};_(K,S=>{!t(u)&&s.climb.notes&&S(ve)})}e(F);var se=i(F,2),j=a(se);let X;var le=a(j),pe=a(le,!0);e(le);var D=i(le,2);{var N=S=>{var I=At(),b=a(I,!0);e(I),y(()=>l(b,s.climb.attemptsNum)),r(S,I)};_(D,S=>{s.climb.attemptType!=="Flash"&&s.climb.attemptType!=="Onsight"&&S(N)})}e(j);var W=i(j,2);W.__click=p;var ee=i(W,2),ae=a(ee,!0);e(ee),e(se),e(q);var fe=i(q,2);{var re=S=>{var I=Nt(),b=a(I);{var v=$=>{var ue=Ot(),oe=i(a(ue),2),de=a(oe,!0);e(oe),e(ue),y(()=>l(de,s.climb.notes)),r($,ue)},o=$=>{var ue=jt();r($,ue)};_(b,$=>{s.climb.notes?$(v):$(o,!1)})}var P=i(b,2),H=a(P),ie=a(H,!0);e(H);var Y=i(H,2),ye=a(Y,!0);e(Y),e(P),e(I),y(()=>{l(ie,s.climb.isSport?"Sport":"Boulder"),l(ye,s.climb.attemptType)}),ta(3,I,()=>ua,()=>({duration:150})),r(S,I)};_(fe,S=>{t(u)&&S(re)})}e(m),y(()=>{x=He(m,1,"climb-entry svelte-yz0xxt",null,x,{expanded:t(u)}),Re(q,"aria-expanded",t(u)),z=He(C,1,"grade-badge svelte-yz0xxt",null,z,{sport:s.climb.isSport}),l(G,s.climb.grade),l(T,s.climb.name||"Unnamed Route"),X=He(j,1,"attempt-type svelte-yz0xxt",null,X,{flash:s.climb.attemptType==="Flash"}),l(pe,f[s.climb.attemptType]||s.climb.attemptType),l(ae,t(u)?"‚ñ≤":"‚ñº")}),r(k,m),_a()}na(["click","keydown"]);var Mt=n('<button class="backdrop svelte-12q9g58" aria-label="Close modal"></button> <div class="modal svelte-12q9g58" role="dialog" aria-modal="true"><h3 class="svelte-12q9g58"> </h3> <p class="svelte-12q9g58"> </p> <div class="input-group svelte-12q9g58"><label for="delete-confirm" class="svelte-12q9g58">Type <strong>delete</strong> to confirm:</label> <input type="text" id="delete-confirm" placeholder="delete" autocomplete="off" class="svelte-12q9g58"/></div> <div class="actions svelte-12q9g58"><button class="btn-cancel svelte-12q9g58">Cancel</button> <button class="btn-delete svelte-12q9g58">Delete</button></div></div>',1);function Va(k,s){ca(s,!0);let g=Na(s,"isOpen",3,!1),u=Na(s,"title",3,"Confirm Delete"),h=Na(s,"message",3,"Are you sure you want to delete this item? This action cannot be undone."),p=U(""),f=ba(()=>t(p).toLowerCase()==="delete");function m(){t(f)&&(s.onConfirm(),d(p,""))}function x(){s.onCancel(),d(p,"")}var q=Ce(),F=we(q);{var C=z=>{var G=Mt(),O=we(G);O.__click=x;var T=i(O,2),M=a(T),J=a(M,!0);e(M);var K=i(M,2),ve=a(K,!0);e(K);var se=i(K,2),j=i(a(se),2);ia(j),e(se);var X=i(se,2),le=a(X);le.__click=x;var pe=i(le,2);pe.__click=m,e(X),e(T),y(()=>{l(J,u()),l(ve,h()),pe.disabled=!t(f)}),ta(3,O,()=>qt,()=>({duration:200})),ra(j,()=>t(p),D=>d(p,D)),ta(3,T,()=>Dt,()=>({duration:200,start:.9})),r(z,G)};_(F,z=>{g()&&z(C)})}r(k,q),_a()}na(["click"]);var Pt=n('<span class="stat svelte-7vqogn"> </span>'),Bt=n('<span class="status-icon pending svelte-7vqogn" title="Waiting to sync">üîÑ</span>'),Vt=n('<span class="status-icon error svelte-7vqogn" title="Sync error">‚ö†Ô∏è</span>'),Wt=n('<span class="chip svelte-7vqogn"> </span>'),Ut=n('<span class="text-none svelte-7vqogn">None</span>'),Ht=n('<div class="detail-item svelte-7vqogn"><span class="label svelte-7vqogn">Difficulty</span> <span class="value svelte-7vqogn"> </span></div>'),Zt=n('<span class="chip svelte-7vqogn"> </span>'),Jt=n('<span class="text-none svelte-7vqogn">None</span>'),Kt=n('<div class="detail-item svelte-7vqogn"><span class="label svelte-7vqogn">Category</span> <div class="value-chips svelte-7vqogn"><!></div></div>'),Yt=n('<span class="chip svelte-7vqogn"> </span>'),Qt=n('<span class="text-none svelte-7vqogn">None</span>'),Xt=n('<div class="detail-item svelte-7vqogn"><span class="label svelte-7vqogn">Focus</span> <div class="value-chips svelte-7vqogn"><!></div></div>'),$t=n('<span class="chip svelte-7vqogn"> </span>'),es=n('<span class="text-none svelte-7vqogn">None</span>'),as=n('<div class="detail-item svelte-7vqogn"><span class="label svelte-7vqogn">Energy System</span> <div class="value-chips svelte-7vqogn"><!></div></div>'),ts=n('<span class="chip svelte-7vqogn"> </span>'),ss=n('<span class="text-none svelte-7vqogn">None</span>'),is=n('<div class="detail-item svelte-7vqogn"><span class="label svelte-7vqogn">Wall Angle</span> <div class="value-chips svelte-7vqogn"><!></div></div>'),rs=n('<div class="metric svelte-7vqogn"><span class="label svelte-7vqogn">Open Grip</span> <div class="bar-container svelte-7vqogn"><div class="bar-fill svelte-7vqogn"></div></div> <span class="score svelte-7vqogn"> </span></div>'),ns=n('<div class="metric svelte-7vqogn"><span class="label svelte-7vqogn">Crimp Grip</span> <div class="bar-container svelte-7vqogn"><div class="bar-fill svelte-7vqogn"></div></div> <span class="score svelte-7vqogn"> </span></div>'),vs=n('<div class="metric svelte-7vqogn"><span class="label svelte-7vqogn">Pinch Grip</span> <div class="bar-container svelte-7vqogn"><div class="bar-fill svelte-7vqogn"></div></div> <span class="score svelte-7vqogn"> </span></div>'),ls=n('<div class="metric svelte-7vqogn"><span class="label svelte-7vqogn">Sloper Grip</span> <div class="bar-container svelte-7vqogn"><div class="bar-fill svelte-7vqogn"></div></div> <span class="score svelte-7vqogn"> </span></div>'),os=n('<div class="metric svelte-7vqogn"><span class="label svelte-7vqogn">Jug Grip</span> <div class="bar-container svelte-7vqogn"><div class="bar-fill svelte-7vqogn"></div></div> <span class="score svelte-7vqogn"> </span></div>'),ds=n('<p class="no-climbs svelte-7vqogn">No climbs logged for this session.</p>'),cs=n('<div class="card-body svelte-7vqogn"><div class="details-grid svelte-7vqogn"><div class="detail-item svelte-7vqogn"><span class="label svelte-7vqogn">Training Type</span> <div class="value-chips svelte-7vqogn"><!></div></div> <!> <!> <!> <!> <!></div> <div class="metrics-container svelte-7vqogn"><div class="metric svelte-7vqogn"><span class="label svelte-7vqogn">Finger Load</span> <div class="bar-container svelte-7vqogn"><div class="bar-fill svelte-7vqogn"></div></div> <span class="score svelte-7vqogn"> </span></div> <div class="metric svelte-7vqogn"><span class="label svelte-7vqogn">Shoulder Load</span> <div class="bar-container svelte-7vqogn"><div class="bar-fill svelte-7vqogn"></div></div> <span class="score svelte-7vqogn"> </span></div> <div class="metric svelte-7vqogn"><span class="label svelte-7vqogn">Forearm Load</span> <div class="bar-container svelte-7vqogn"><div class="bar-fill svelte-7vqogn"></div></div> <span class="score svelte-7vqogn"> </span></div> <!> <!> <!> <!> <!></div> <div class="climbs-list svelte-7vqogn"><h4 class="svelte-7vqogn">Climbs</h4> <div class="climbs-container svelte-7vqogn"><!> <!></div></div></div>'),_s=n('<div><div class="card-header svelte-7vqogn" role="button" tabindex="0"><div class="header-main svelte-7vqogn"><div class="date-badge svelte-7vqogn"><span class="day svelte-7vqogn"> </span> <span class="month svelte-7vqogn"> </span></div> <div class="session-info svelte-7vqogn"><div class="session-text svelte-7vqogn"><h3 class="location svelte-7vqogn"> </h3> <div class="session-meta svelte-7vqogn"><span class="type-tag svelte-7vqogn"> </span> <span class="stat svelte-7vqogn"> </span> <!></div></div> <div class="load-summary svelte-7vqogn"><div class="load-badge finger svelte-7vqogn"> </div> <div class="load-badge shoulder svelte-7vqogn"> </div> <div class="load-badge forearm svelte-7vqogn"> </div></div></div></div> <div class="header-actions"><div class="header-status svelte-7vqogn"><!></div>  <button class="btn-icon delete-session" title="Delete Session">üóëÔ∏è</button> <span class="chevron svelte-7vqogn"> </span></div></div> <!></div> <!>',1);function us(k,s){ca(s,!0);let g=U(!1),u=U(!1);function h(){d(g,!t(g))}function p(){d(u,!0)}function f(){Ma(s.session.id),d(u,!1),s.onDelete()}function m(_e){const B=[...s.session.climbs];B.splice(_e,1),Ya(s.session.id,{climbs:B}),s.onDelete()}let x=ba(()=>s.session.climbs?.length??0),q=ba(()=>(s.session.climbs||[]).reduce((_e,B)=>{const ce=parseInt(B.grade.replace(/\D/g,""))||0,ne=parseInt(_e.replace(/\D/g,""))||0;return ce>ne?B.grade:_e},"V0"));var F=_s(),C=we(F);let z;var G=a(C);G.__click=h,G.__keydown=_e=>_e.key==="Enter"&&h();var O=a(G),T=a(O),M=a(T),J=a(M,!0);e(M);var K=i(M,2),ve=a(K,!0);e(K),e(T);var se=i(T,2),j=a(se),X=a(j),le=a(X,!0);e(X);var pe=i(X,2),D=a(pe),N=a(D,!0);e(D);var W=i(D,2),ee=a(W);e(W);var ae=i(W,2);{var fe=_e=>{var B=Pt(),ce=a(B);e(B),y(()=>l(ce,`Max: ${t(q)??""}`)),r(_e,B)};_(ae,_e=>{t(x)>0&&_e(fe)})}e(pe),e(j);var re=i(j,2),S=a(re),I=a(S,!0);e(S);var b=i(S,2),v=a(b,!0);e(b);var o=i(b,2),P=a(o,!0);e(o),e(re),e(se),e(O);var H=i(O,2),ie=a(H),Y=a(ie);{var ye=_e=>{var B=Bt();r(_e,B)},$=_e=>{var B=Ce(),ce=we(B);{var ne=E=>{var Z=Vt();r(E,Z)};_(ce,E=>{s.session.syncStatus==="error"&&E(ne)},!0)}r(_e,B)};_(Y,_e=>{s.session.syncStatus==="pending"?_e(ye):_e($,!1)})}e(ie);var ue=i(ie,2);ue.__click=_e=>{_e.stopPropagation(),p()};var oe=i(ue,2),de=a(oe,!0);e(oe),e(H),e(G);var Fe=i(G,2);{var Oe=_e=>{var B=cs(),ce=a(B),ne=a(ce),E=i(a(ne),2),Z=a(E);{var he=R=>{var A=Ce(),c=we(A);xe(c,17,()=>s.session.trainingTypes,De,(w,L)=>{var Q=Wt(),V=a(Q,!0);e(Q),y(()=>l(V,t(L))),r(w,Q)}),r(R,A)},ge=R=>{var A=Ut();r(R,A)};_(Z,R=>{s.session.trainingTypes&&s.session.trainingTypes.length>0&&!s.session.trainingTypes.includes("None")?R(he):R(ge,!1)})}e(E),e(ne);var be=i(ne,2);{var Me=R=>{var A=Ht(),c=i(a(A),2),w=a(c,!0);e(c),e(A),y(()=>l(w,s.session.difficulty)),r(R,A)};_(be,R=>{s.session.difficulty&&R(Me)})}var Pe=i(be,2);{var Te=R=>{var A=Kt(),c=i(a(A),2),w=a(c);{var L=V=>{var te=Ce(),me=we(te);xe(me,17,()=>s.session.categories,De,(Se,ea)=>{var ke=Zt(),aa=a(ke,!0);e(ke),y(()=>l(aa,t(ea))),r(Se,ke)}),r(V,te)},Q=V=>{var te=Jt();r(V,te)};_(w,V=>{s.session.categories.length>0&&!s.session.categories.includes("None")?V(L):V(Q,!1)})}e(c),e(A),r(R,A)};_(Pe,R=>{s.session.categories?.length&&R(Te)})}var ze=i(Pe,2);{var je=R=>{var A=Xt(),c=i(a(A),2),w=a(c);{var L=V=>{var te=Ce(),me=we(te);xe(me,17,()=>s.session.techniqueFocuses,De,(Se,ea)=>{var ke=Yt(),aa=a(ke,!0);e(ke),y(()=>l(aa,t(ea))),r(Se,ke)}),r(V,te)},Q=V=>{var te=Qt();r(V,te)};_(w,V=>{s.session.techniqueFocuses.length>0&&!s.session.techniqueFocuses.includes("None")?V(L):V(Q,!1)})}e(c),e(A),r(R,A)};_(ze,R=>{s.session.techniqueFocuses?.length&&R(je)})}var Ze=i(ze,2);{var qe=R=>{var A=as(),c=i(a(A),2),w=a(c);{var L=V=>{var te=Ce(),me=we(te);xe(me,17,()=>s.session.energySystems,De,(Se,ea)=>{var ke=$t(),aa=a(ke,!0);e(ke),y(()=>l(aa,t(ea))),r(Se,ke)}),r(V,te)},Q=V=>{var te=es();r(V,te)};_(w,V=>{s.session.energySystems.length>0&&!s.session.energySystems.includes("None")?V(L):V(Q,!1)})}e(c),e(A),r(R,A)};_(Ze,R=>{s.session.energySystems?.length&&R(qe)})}var Ne=i(Ze,2);{var va=R=>{var A=is(),c=i(a(A),2),w=a(c);{var L=V=>{var te=Ce(),me=we(te);xe(me,17,()=>s.session.wallAngles,De,(Se,ea)=>{var ke=ts(),aa=a(ke,!0);e(ke),y(()=>l(aa,t(ea))),r(Se,ke)}),r(V,te)},Q=V=>{var te=ss();r(V,te)};_(w,V=>{s.session.wallAngles.length>0&&!s.session.wallAngles.includes("None")?V(L):V(Q,!1)})}e(c),e(A),r(R,A)};_(Ne,R=>{s.session.wallAngles?.length&&R(va)})}e(ce);var Je=i(ce,2),We=a(Je),Ke=i(a(We),2),Ee=a(Ke);e(Ke);var Le=i(Ke,2),fa=a(Le);e(Le),e(We);var Ae=i(We,2),la=i(a(Ae),2),Ye=a(la);e(la);var sa=i(la,2),qa=a(sa);e(sa),e(Ae);var Ue=i(Ae,2),Be=i(a(Ue),2),Qe=a(Be);e(Be);var oa=i(Be,2),Xe=a(oa);e(oa),e(Ue);var $e=i(Ue,2);{var Da=R=>{var A=rs(),c=i(a(A),2),w=a(c);e(c);var L=i(c,2),Q=a(L);e(L),e(A),y(()=>{Ie(w,`width: ${s.session.openGrip/5*100}%`),l(Q,`${s.session.openGrip??""}/5`)}),r(R,A)};_($e,R=>{s.session.openGrip&&R(Da)})}var Ve=i($e,2);{var Ta=R=>{var A=ns(),c=i(a(A),2),w=a(c);e(c);var L=i(c,2),Q=a(L);e(L),e(A),y(()=>{Ie(w,`width: ${s.session.crimpGrip/5*100}%`),l(Q,`${s.session.crimpGrip??""}/5`)}),r(R,A)};_(Ve,R=>{s.session.crimpGrip&&R(Ta)})}var pa=i(Ve,2);{var Sa=R=>{var A=vs(),c=i(a(A),2),w=a(c);e(c);var L=i(c,2),Q=a(L);e(L),e(A),y(()=>{Ie(w,`width: ${s.session.pinchGrip/5*100}%`),l(Q,`${s.session.pinchGrip??""}/5`)}),r(R,A)};_(pa,R=>{s.session.pinchGrip&&R(Sa)})}var ma=i(pa,2);{var Ea=R=>{var A=ls(),c=i(a(A),2),w=a(c);e(c);var L=i(c,2),Q=a(L);e(L),e(A),y(()=>{Ie(w,`width: ${s.session.sloperGrip/5*100}%`),l(Q,`${s.session.sloperGrip??""}/5`)}),r(R,A)};_(ma,R=>{s.session.sloperGrip&&R(Ea)})}var Ca=i(ma,2);{var Aa=R=>{var A=os(),c=i(a(A),2),w=a(c);e(c);var L=i(c,2),Q=a(L);e(L),e(A),y(()=>{Ie(w,`width: ${s.session.jugGrip/5*100}%`),l(Q,`${s.session.jugGrip??""}/5`)}),r(R,A)};_(Ca,R=>{s.session.jugGrip&&R(Aa)})}e(Je);var ka=i(Je,2),ya=i(a(ka),2),xa=a(ya);xe(xa,17,()=>s.session.climbs,De,(R,A,c)=>{{let w=ba(()=>s.session.climbingType==="Mixed");Rt(R,{get climb(){return t(A)},onDelete:()=>m(c),get showClimbType(){return t(w)}})}});var Fa=i(xa,2);{var za=R=>{var A=ds();r(R,A)};_(Fa,R=>{s.session.climbs.length===0&&R(za)})}e(ya),e(ka),e(B),y(()=>{Ie(Ee,`width: ${s.session.fingerLoad/5*100}%`),l(fa,`${s.session.fingerLoad??""}/5`),Ie(Ye,`width: ${s.session.shoulderLoad/5*100}%`),l(qa,`${s.session.shoulderLoad??""}/5`),Ie(Qe,`width: ${s.session.forearmLoad/5*100}%`),l(Xe,`${s.session.forearmLoad??""}/5`)}),ta(3,B,()=>ua,()=>({duration:200})),r(_e,B)};_(Fe,_e=>{t(g)&&_e(Oe)})}e(C);var Ge=i(C,2);Va(Ge,{get isOpen(){return t(u)},title:"Delete Session",message:"Are you sure you want to delete this session and all its climbs? This cannot be undone.",onConfirm:f,onCancel:()=>d(u,!1)}),y((_e,B)=>{z=He(C,1,"session-card svelte-7vqogn",null,z,{expanded:t(g)}),Re(G,"aria-expanded",t(g)),l(J,_e),l(ve,B),l(le,s.session.location),l(N,s.session.climbingType),l(ee,`${t(x)??""} climbs`),Re(S,"title",`Finger Load: ${s.session.fingerLoad??""}`),l(I,s.session.fingerLoad),Re(b,"title",`Shoulder Load: ${s.session.shoulderLoad??""}`),l(v,s.session.shoulderLoad),Re(o,"title",`Forearm Load: ${s.session.forearmLoad??""}`),l(P,s.session.forearmLoad),l(de,t(g)?"‚ñ≤":"‚ñº")},[()=>new Date(s.session.date).getDate(),()=>new Date(s.session.date).toLocaleDateString("en-GB",{month:"short"})]),r(k,F),_a()}na(["click","keydown"]);var fs=n('<div class="legend-item svelte-11p9lqi"><span class="l-icon svelte-11p9lqi"> </span> <span class="l-label svelte-11p9lqi"> </span></div>'),gs=n('<div class="legend-content svelte-11p9lqi"><div class="legend-grid svelte-11p9lqi"></div></div>'),ps=n('<div class="legend-container svelte-11p9lqi"><button class="legend-toggle svelte-11p9lqi"><span class="icon">‚ÑπÔ∏è</span> <span class="text">Icon Legend</span> <span class="chevron svelte-11p9lqi"> </span></button> <!></div>');function $a(k){let s=U(!1);const g=[{icon:"üëÅÔ∏è",label:"Onsight"},{icon:"‚ö°",label:"Flash"},{icon:"üî¥",label:"Redpoint"},{icon:"üõ†Ô∏è",label:"Dogged"},{icon:"‚ùå",label:"DNF"}];var u=ps(),h=a(u);h.__click=()=>d(s,!t(s));var p=i(a(h),4),f=a(p,!0);e(p),e(h);var m=i(h,2);{var x=q=>{var F=gs(),C=a(F);xe(C,21,()=>g,De,(z,G)=>{var O=fs(),T=a(O),M=a(T,!0);e(T);var J=i(T,2),K=a(J,!0);e(J),e(O),y(()=>{l(M,t(G).icon),l(K,t(G).label)}),r(z,O)}),e(C),e(F),ta(3,F,()=>ua),r(q,F)};_(m,q=>{t(s)&&q(x)})}e(u),y(()=>{Re(h,"aria-expanded",t(s)),l(f,t(s)?"‚ñº":"‚ñ∂")}),r(k,u)}na(["click"]);function et(k,s){if(!k||k.length===0){alert("No data to export");return}const g=Array.from(new Set(k.flatMap(Object.keys))),u=[g.join(","),...k.map(f=>g.map(m=>{let x=f[m];if(x==null)return"";if(typeof x=="object"){if(x instanceof Date)return x.toISOString();x=JSON.stringify(x).replace(/"/g,'""')}else typeof x=="string"&&(x=x.replace(/"/g,'""'));return typeof x=="string"&&(x.includes(",")||x.includes('"')||x.includes(`
`))?`"${x}"`:x}).join(","))].join(`
`),h=new Blob([u],{type:"text/csv;charset=utf-8;"}),p=document.createElement("a");if(p.download!==void 0){const f=URL.createObjectURL(h);p.setAttribute("href",f),p.setAttribute("download",s.endsWith(".csv")?s:`${s}.csv`),p.style.visibility="hidden",document.body.appendChild(p),p.click(),document.body.removeChild(p)}}var ms=n('<span class="spinner svelte-14fqz8w"></span> Fetching...',1),hs=n('<div class="error-banner svelte-14fqz8w"> </div>'),bs=n('<small class="svelte-14fqz8w">Try adjusting your filters.</small>'),ys=n('<div class="empty-state svelte-14fqz8w"><p class="svelte-14fqz8w">No indoor climbing sessions found.</p> <!></div>'),xs=n('<div class="load-more-container svelte-14fqz8w"><button class="load-more-btn svelte-14fqz8w"> </button></div>'),ws=n('<div class="view-container svelte-14fqz8w"><div class="view-header svelte-14fqz8w"><h2 class="view-title svelte-14fqz8w">üßó Indoor Climbing History</h2> <div class="header-actions svelte-14fqz8w"><button class="action-btn secondary svelte-14fqz8w" title="Export filtered data to CSV">üì• Export</button> <button class="action-btn svelte-14fqz8w" title="Fetch data from cloud"><!></button></div></div> <!> <!> <div class="info-bar svelte-14fqz8w"><div class="legend-wrapper svelte-14fqz8w"><!></div> <div class="load-key svelte-14fqz8w"><span class="key-label svelte-14fqz8w">Load:</span> <div class="key-item svelte-14fqz8w"><span class="dot finger svelte-14fqz8w"></span> Finger</div> <div class="key-item svelte-14fqz8w"><span class="dot shoulder svelte-14fqz8w"></span> Shoulder</div> <div class="key-item svelte-14fqz8w"><span class="dot forearm svelte-14fqz8w"></span> Forearm</div></div></div> <div class="sessions-list"><!> <!> <!></div></div>');function qs(k,s){ca(s,!0);let g=U(ga([])),u=U(ga([])),h=U(!1),p=U(""),f=U(ga({startDate:"",endDate:"",location:"",sessionType:"",grade:""})),m=U(20);const x=20;Ka(()=>{q()});function q(){const v=Ra("indoor_climb");d(g,v.sort((o,P)=>new Date(P.date).getTime()-new Date(o.date).getTime()),!0),G()}async function F(){d(h,!0),d(p,"");try{await Ba();const v=await _t();v.ok&&v.data?C(v.data):d(p,v.error||"Failed to fetch data",!0)}catch(v){d(p,v instanceof Error?v.message:"Unknown error",!0)}finally{d(h,!1)}}function C(v){const o=v.map(H=>({...H,activityType:"indoor_climb",createdAt:new Date().toISOString(),updatedAt:new Date().toISOString(),syncStatus:"synced",syncedAt:new Date().toISOString(),openGrip:0,crimpGrip:0,pinchGrip:0,sloperGrip:0,jugGrip:0}));Pa(o);const P=Ra("indoor_climb");d(g,P.sort((H,ie)=>new Date(ie.date).getTime()-new Date(H.date).getTime()),!0),G()}function z(v){d(f,v,!0),G()}function G(){d(m,x),d(u,t(g).filter(v=>{if(t(f).startDate&&v.date<t(f).startDate||t(f).endDate&&v.date>t(f).endDate||t(f).location&&v.location!==t(f).location||t(f).sessionType&&!v.trainingTypes?.includes(t(f).sessionType))return!1;if(t(f).grade){const o=t(f).grade.trim().toLowerCase();if(!v.climbs.some(H=>H.grade.trim().toLowerCase()===o))return!1}return!0}),!0)}function O(){d(m,t(m)+x)}var T=ws(),M=a(T),J=i(a(M),2),K=a(J);K.__click=()=>et(t(u),"indoor_climbs");var ve=i(K,2);ve.__click=F;var se=a(ve);{var j=v=>{var o=ms();Ga(),r(v,o)},X=v=>{var o=wa("‚òÅÔ∏è Fetch Data");r(v,o)};_(se,v=>{t(h)?v(j):v(X,!1)})}e(ve),e(J),e(M);var le=i(M,2);{var pe=v=>{var o=hs(),P=a(o,!0);e(o),y(()=>l(P,t(p))),ta(3,o,()=>ua),r(v,o)};_(le,v=>{t(p)&&v(pe)})}var D=i(le,2);Lt(D,{onFilterParamsChange:z});var N=i(D,2),W=a(N),ee=a(W);$a(ee),e(W),Ga(2),e(N);var ae=i(N,2),fe=a(ae);xe(fe,17,()=>t(u).slice(0,t(m)),v=>v.id,(v,o)=>{us(v,{get session(){return t(o)},onDelete:q})});var re=i(fe,2);{var S=v=>{var o=ys(),P=i(a(o),2);{var H=ie=>{var Y=bs();r(ie,Y)};_(P,ie=>{t(g).length>0&&ie(H)})}e(o),r(v,o)};_(re,v=>{t(u).length===0&&v(S)})}var I=i(re,2);{var b=v=>{var o=xs(),P=a(o);P.__click=O;var H=a(P);e(P),e(o),y(()=>l(H,`Load More (${t(u).length-t(m)} remaining)`)),r(v,o)};_(I,v=>{t(m)<t(u).length&&v(b)})}e(ae),e(T),y(()=>ve.disabled=t(h)),r(k,T),_a()}na(["click"]);var Ds=n('<span class="chevron svelte-1frtlim">‚ñ≤</span>'),Ss=n('<span class="chevron svelte-1frtlim">‚ñº</span>'),ks=n('<div class="input-with-action svelte-1frtlim"><input type="text" id="area-filter-text" placeholder="Type area name..." class="flat-left svelte-1frtlim"/> <button class="action-btn flat-right svelte-1frtlim" title="Back to list">‚úï</button></div>'),Ts=n("<option> </option>"),Cs=n('<select id="area-filter" class="svelte-1frtlim"><option>All Areas</option><!><option>Other (Manual Entry)</option></select>'),Fs=n('<div class="input-with-action svelte-1frtlim"><input type="text" id="crag-filter-text" placeholder="Type crag name..." class="flat-left svelte-1frtlim"/> <button class="action-btn flat-right svelte-1frtlim" title="Back to list">‚úï</button></div>'),zs=n("<option> </option>"),Ls=n('<select id="crag-filter" class="svelte-1frtlim"><option>All Crags</option><!><option>Other (Manual Entry)</option></select>'),Gs=n('<input type="text" id="crag-filter-text" class="svelte-1frtlim"/>'),Es=n("<option> </option>"),As=n('<div class="filter-body svelte-1frtlim"><div class="filter-grid svelte-1frtlim"><div class="filter-item svelte-1frtlim"><label for="start-date" class="svelte-1frtlim">Start Date</label> <input type="date" id="start-date" class="svelte-1frtlim"/></div> <div class="filter-item svelte-1frtlim"><label for="end-date" class="svelte-1frtlim">End Date</label> <input type="date" id="end-date" class="svelte-1frtlim"/></div> <div class="filter-item svelte-1frtlim"><label for="area-filter" class="svelte-1frtlim">Area</label> <!></div> <div class="filter-item svelte-1frtlim"><label for="crag-filter" class="svelte-1frtlim">Crag</label> <!></div> <div class="filter-item svelte-1frtlim"><label for="session-type-filter" class="svelte-1frtlim">Session Type</label> <select id="session-type-filter" class="svelte-1frtlim"><option>Any Type</option><!></select></div> <div class="filter-item svelte-1frtlim"><label for="grade-filter" class="svelte-1frtlim">Grade (Exact)</label> <input type="text" id="grade-filter" placeholder="e.g. 7a" class="svelte-1frtlim"/></div></div> <div class="filter-actions svelte-1frtlim"><button class="reset-btn svelte-1frtlim">Reset Filters</button></div></div>'),Os=n('<div class="filter-container svelte-1frtlim"><button class="filter-header svelte-1frtlim"><div class="header-content svelte-1frtlim"><span class="icon svelte-1frtlim">üîç</span> <span class="title svelte-1frtlim">Filters</span> <!></div></button> <!></div>');function js(k,s){ca(s,!0);const g=ut(),u=["Projecting","Onsighting","Campusing","Repeaters","Fun","Volume"];let h=U(!1),p=U(""),f=U(""),m=U(""),x=U(""),q=U(""),F=U(""),C=U(!1),z=U(!1),G=ba(()=>t(m)&&t(m)!=="Other"?ft(t(m)):[]);function O(){t(m)==="Other"?(d(C,!0),d(m,"")):d(C,!1),d(x,""),d(z,!1),K()}function T(){t(x)==="Other"?(d(z,!0),d(x,"")):d(z,!1),K()}function M(){d(h,!t(h))}function J(){d(p,""),d(f,""),d(m,""),d(x,""),d(q,""),d(F,""),d(C,!1),d(z,!1),K()}function K(){s.onFilterParamsChange({startDate:t(p),endDate:t(f),area:t(m),crag:t(x),sessionType:t(q),grade:t(F)})}var ve=Os(),se=a(ve);se.__click=M;var j=a(se),X=i(a(j),4);{var le=W=>{var ee=Ds();r(W,ee)},pe=W=>{var ee=Ss();r(W,ee)};_(X,W=>{t(h)?W(le):W(pe,!1)})}e(j),e(se);var D=i(se,2);{var N=W=>{var ee=As(),ae=a(ee),fe=a(ae),re=i(a(fe),2);ia(re),re.__change=K,e(fe);var S=i(fe,2),I=i(a(S),2);ia(I),I.__change=K,e(S);var b=i(S,2),v=i(a(b),2);{var o=B=>{var ce=ks(),ne=a(ce);ia(ne),ne.__input=K;var E=i(ne,2);E.__click=()=>{d(C,!1),d(m,""),K()},e(ce),ra(ne,()=>t(m),Z=>d(m,Z)),r(B,ce)},P=B=>{var ce=Cs();ce.__change=O;var ne=a(ce);ne.value=ne.__value="";var E=i(ne);xe(E,17,()=>g,De,(he,ge)=>{var be=Ts(),Me=a(be,!0);e(be);var Pe={};y(()=>{l(Me,t(ge)),Pe!==(Pe=t(ge))&&(be.value=(be.__value=t(ge))??"")}),r(he,be)});var Z=i(E);Z.value=Z.__value="Other",e(ce),La(ce,()=>t(m),he=>d(m,he)),r(B,ce)};_(v,B=>{t(C)?B(o):B(P,!1)})}e(b);var H=i(b,2),ie=i(a(H),2);{var Y=B=>{var ce=Fs(),ne=a(ce);ia(ne),ne.__input=K;var E=i(ne,2);E.__click=()=>{d(z,!1),d(x,""),K()},e(ce),ra(ne,()=>t(x),Z=>d(x,Z)),r(B,ce)},ye=B=>{var ce=Ce(),ne=we(ce);{var E=he=>{var ge=Ls();ge.__change=T;var be=a(ge);be.value=be.__value="";var Me=i(be);xe(Me,17,()=>t(G),De,(Te,ze)=>{var je=zs(),Ze=a(je,!0);e(je);var qe={};y(()=>{l(Ze,t(ze)),qe!==(qe=t(ze))&&(je.value=(je.__value=t(ze))??"")}),r(Te,je)});var Pe=i(Me);Pe.value=Pe.__value="Other",e(ge),La(ge,()=>t(x),Te=>d(x,Te)),r(he,ge)},Z=he=>{var ge=Gs();ia(ge),ge.__input=K,y(()=>{Re(ge,"placeholder",t(m)?"Filter crag...":"Select area first"),ge.disabled=!t(C)&&!t(m)}),ra(ge,()=>t(x),be=>d(x,be)),r(he,ge)};_(ne,he=>{!t(C)&&t(m)&&t(G).length>0?he(E):he(Z,!1)},!0)}r(B,ce)};_(ie,B=>{t(z)?B(Y):B(ye,!1)})}e(H);var $=i(H,2),ue=i(a($),2);ue.__change=K;var oe=a(ue);oe.value=oe.__value="";var de=i(oe);xe(de,17,()=>u,De,(B,ce)=>{var ne=Es(),E=a(ne,!0);e(ne);var Z={};y(()=>{l(E,t(ce)),Z!==(Z=t(ce))&&(ne.value=(ne.__value=t(ce))??"")}),r(B,ne)}),e(ue),e($);var Fe=i($,2),Oe=i(a(Fe),2);ia(Oe),Oe.__input=K,e(Fe),e(ae);var Ge=i(ae,2),_e=a(Ge);_e.__click=J,e(Ge),e(ee),ra(re,()=>t(p),B=>d(p,B)),ra(I,()=>t(f),B=>d(f,B)),La(ue,()=>t(q),B=>d(q,B)),ra(Oe,()=>t(F),B=>d(F,B)),ta(3,ee,()=>ua,()=>({duration:200})),r(W,ee)};_(D,W=>{t(h)&&W(N)})}e(ve),y(()=>Re(se,"aria-expanded",t(h))),r(k,ve),_a()}na(["click","change","input"]);var Ns=n('<span class="climb-type-tag svelte-1k6anfh"> </span>'),Is=n('<span class="notes-preview svelte-1k6anfh"> </span>'),Rs=n('<span class="attempts-count svelte-1k6anfh"> </span>'),Ms=n('<div class="detail-row svelte-1k6anfh"><span class="label svelte-1k6anfh">Notes:</span> <p class="notes svelte-1k6anfh"> </p></div>'),Ps=n('<p class="empty-notes svelte-1k6anfh">No notes for this climb.</p>'),Bs=n('<div class="climb-details svelte-1k6anfh"><!> <div class="tags svelte-1k6anfh"><span class="tag type svelte-1k6anfh"> </span> <span class="tag attempt-text svelte-1k6anfh"> </span></div></div>'),Vs=n('<div><div class="climb-header svelte-1k6anfh" role="button" tabindex="0"><div class="climb-main-info svelte-1k6anfh"><span> </span> <span class="climb-name svelte-1k6anfh"> </span> <!> <!></div> <div class="climb-meta svelte-1k6anfh"><span><span class="icon svelte-1k6anfh"> </span> <!></span> <button class="delete-btn svelte-1k6anfh" aria-label="Delete climb" title="Delete climb">üóëÔ∏è</button> <span class="chevron svelte-1k6anfh"> </span></div></div> <!></div>');function Ws(k,s){ca(s,!0);let g=Na(s,"showClimbType",3,!1),u=U(!1);function h(){d(u,!t(u))}function p(S){S.stopPropagation(),s.onDelete()}const f={Flash:"‚ö°",Onsight:"üëÅÔ∏è",Redpoint:"üî¥",Dogged:"üõ†Ô∏è",DNF:"‚ùå"};var m=Vs();let x;var q=a(m);q.__click=h,q.__keydown=S=>(S.key==="Enter"||S.key===" ")&&h();var F=a(q),C=a(F);let z;var G=a(C,!0);e(C);var O=i(C,2),T=a(O,!0);e(O);var M=i(O,2);{var J=S=>{var I=Ns(),b=a(I,!0);e(I),y(()=>l(b,s.climb.isSport?"Sport":"Boulder")),r(S,I)};_(M,S=>{g()&&S(J)})}var K=i(M,2);{var ve=S=>{var I=Is(),b=a(I);e(I),y(()=>l(b,`- ${s.climb.notes??""}`)),r(S,I)};_(K,S=>{!t(u)&&s.climb.notes&&S(ve)})}e(F);var se=i(F,2),j=a(se);let X;var le=a(j),pe=a(le,!0);e(le);var D=i(le,2);{var N=S=>{var I=Rs(),b=a(I,!0);e(I),y(()=>l(b,s.climb.attemptsNum)),r(S,I)};_(D,S=>{s.climb.attemptType!=="Flash"&&s.climb.attemptType!=="Onsight"&&S(N)})}e(j);var W=i(j,2);W.__click=p;var ee=i(W,2),ae=a(ee,!0);e(ee),e(se),e(q);var fe=i(q,2);{var re=S=>{var I=Bs(),b=a(I);{var v=$=>{var ue=Ms(),oe=i(a(ue),2),de=a(oe,!0);e(oe),e(ue),y(()=>l(de,s.climb.notes)),r($,ue)},o=$=>{var ue=Ps();r($,ue)};_(b,$=>{s.climb.notes?$(v):$(o,!1)})}var P=i(b,2),H=a(P),ie=a(H,!0);e(H);var Y=i(H,2),ye=a(Y,!0);e(Y),e(P),e(I),y(()=>{l(ie,s.climb.isSport?"Sport":"Boulder"),l(ye,s.climb.attemptType)}),ta(3,I,()=>ua,()=>({duration:150})),r(S,I)};_(fe,S=>{t(u)&&S(re)})}e(m),y(()=>{x=He(m,1,"climb-entry svelte-1k6anfh",null,x,{expanded:t(u)}),Re(q,"aria-expanded",t(u)),z=He(C,1,"grade-badge svelte-1k6anfh",null,z,{sport:s.climb.isSport}),l(G,s.climb.grade),l(T,s.climb.name||"Unnamed Route"),X=He(j,1,"attempt-type svelte-1k6anfh",null,X,{flash:s.climb.attemptType==="Flash"}),l(pe,f[s.climb.attemptType]||s.climb.attemptType),l(ae,t(u)?"‚ñ≤":"‚ñº")}),r(k,m),_a()}na(["click","keydown"]);var Us=n('<div class="sector-meta svelte-d5hg2r"> </div>'),Hs=n('<span class="stat svelte-d5hg2r"> </span>'),Zs=n('<span class="status-icon pending svelte-d5hg2r" title="Waiting to sync">üîÑ</span>'),Js=n('<span class="status-icon error svelte-d5hg2r" title="Sync error">‚ö†Ô∏è</span>'),Ks=n('<span class="chip svelte-d5hg2r"> </span>'),Ys=n('<span class="text-none svelte-d5hg2r">None</span>'),Qs=n('<div class="detail-item svelte-d5hg2r"><span class="label svelte-d5hg2r">Difficulty</span> <span class="value svelte-d5hg2r"> </span></div>'),Xs=n('<span class="chip svelte-d5hg2r"> </span>'),$s=n('<span class="text-none svelte-d5hg2r">None</span>'),ei=n('<div class="detail-item svelte-d5hg2r"><span class="label svelte-d5hg2r">Category</span> <div class="value-chips svelte-d5hg2r"><!></div></div>'),ai=n('<span class="chip svelte-d5hg2r"> </span>'),ti=n('<span class="text-none svelte-d5hg2r">None</span>'),si=n('<div class="detail-item svelte-d5hg2r"><span class="label svelte-d5hg2r">Focus</span> <div class="value-chips svelte-d5hg2r"><!></div></div>'),ii=n('<span class="chip svelte-d5hg2r"> </span>'),ri=n('<span class="text-none svelte-d5hg2r">None</span>'),ni=n('<div class="detail-item svelte-d5hg2r"><span class="label svelte-d5hg2r">Energy System</span> <div class="value-chips svelte-d5hg2r"><!></div></div>'),vi=n('<div class="metric svelte-d5hg2r"><span class="label svelte-d5hg2r">Open Grip</span> <div class="bar-container svelte-d5hg2r"><div class="bar-fill svelte-d5hg2r"></div></div> <span class="score svelte-d5hg2r"> </span></div>'),li=n('<div class="metric svelte-d5hg2r"><span class="label svelte-d5hg2r">Crimp Grip</span> <div class="bar-container svelte-d5hg2r"><div class="bar-fill svelte-d5hg2r"></div></div> <span class="score svelte-d5hg2r"> </span></div>'),oi=n('<div class="metric svelte-d5hg2r"><span class="label svelte-d5hg2r">Pinch Grip</span> <div class="bar-container svelte-d5hg2r"><div class="bar-fill svelte-d5hg2r"></div></div> <span class="score svelte-d5hg2r"> </span></div>'),di=n('<div class="metric svelte-d5hg2r"><span class="label svelte-d5hg2r">Sloper Grip</span> <div class="bar-container svelte-d5hg2r"><div class="bar-fill svelte-d5hg2r"></div></div> <span class="score svelte-d5hg2r"> </span></div>'),ci=n('<div class="metric svelte-d5hg2r"><span class="label svelte-d5hg2r">Jug Grip</span> <div class="bar-container svelte-d5hg2r"><div class="bar-fill svelte-d5hg2r"></div></div> <span class="score svelte-d5hg2r"> </span></div>'),_i=n('<p class="no-climbs svelte-d5hg2r">No climbs logged for this session.</p>'),ui=n('<div class="card-body svelte-d5hg2r"><div class="details-grid svelte-d5hg2r"><div class="detail-item svelte-d5hg2r"><span class="label svelte-d5hg2r">Training Type</span> <div class="value-chips svelte-d5hg2r"><!></div></div> <!> <!> <!> <!></div> <div class="metrics-container svelte-d5hg2r"><div class="metric svelte-d5hg2r"><span class="label svelte-d5hg2r">Finger Load</span> <div class="bar-container svelte-d5hg2r"><div class="bar-fill svelte-d5hg2r"></div></div> <span class="score svelte-d5hg2r"> </span></div> <div class="metric svelte-d5hg2r"><span class="label svelte-d5hg2r">Shoulder Load</span> <div class="bar-container svelte-d5hg2r"><div class="bar-fill svelte-d5hg2r"></div></div> <span class="score svelte-d5hg2r"> </span></div> <div class="metric svelte-d5hg2r"><span class="label svelte-d5hg2r">Forearm Load</span> <div class="bar-container svelte-d5hg2r"><div class="bar-fill svelte-d5hg2r"></div></div> <span class="score svelte-d5hg2r"> </span></div> <!> <!> <!> <!> <!></div> <div class="climbs-list svelte-d5hg2r"><h4 class="svelte-d5hg2r">Climbs</h4> <div class="climbs-container svelte-d5hg2r"><!> <!></div></div></div>'),fi=n('<div><div class="card-header svelte-d5hg2r" role="button" tabindex="0"><div class="header-main svelte-d5hg2r"><div class="date-badge svelte-d5hg2r"><span class="day svelte-d5hg2r"> </span> <span class="month svelte-d5hg2r"> </span></div> <div class="session-info svelte-d5hg2r"><div class="session-text svelte-d5hg2r"><h3 class="location svelte-d5hg2r"> <!></h3> <!> <div class="session-meta svelte-d5hg2r"><span class="type-tag svelte-d5hg2r"> </span> <span class="stat svelte-d5hg2r"> </span> <!></div></div> <div class="load-summary svelte-d5hg2r"><div class="load-badge finger svelte-d5hg2r"> </div> <div class="load-badge shoulder svelte-d5hg2r"> </div> <div class="load-badge forearm svelte-d5hg2r"> </div></div></div></div> <div class="header-actions svelte-d5hg2r"><div class="header-status svelte-d5hg2r"><!></div> <button class="btn-icon delete-session svelte-d5hg2r" title="Delete Session">üóëÔ∏è</button> <span class="chevron svelte-d5hg2r"> </span></div></div> <!></div> <!>',1);function gi(k,s){ca(s,!0);let g=U(!1),u=U(!1);function h(){d(g,!t(g))}function p(){d(u,!0)}function f(){Ma(s.session.id),d(u,!1),s.onDelete()}function m(E){const Z=[...s.session.climbs];Z.splice(E,1),Ya(s.session.id,{climbs:Z}),s.onDelete()}let x=ba(()=>s.session.climbs?.length??0),q=ba(()=>(s.session.climbs||[]).reduce((E,Z)=>{const he=parseInt(Z.grade.replace(/\D/g,""))||0,ge=parseInt(E.replace(/\D/g,""))||0;return he>ge?Z.grade:E},"V0/4a"));var F=fi(),C=we(F);let z;var G=a(C);G.__click=h,G.__keydown=E=>E.key==="Enter"&&h();var O=a(G),T=a(O),M=a(T),J=a(M,!0);e(M);var K=i(M,2),ve=a(K,!0);e(K),e(T);var se=i(T,2),j=a(se),X=a(j),le=a(X),pe=i(le);{var D=E=>{var Z=wa();y(()=>l(Z,`- ${s.session.crag??""}`)),r(E,Z)};_(pe,E=>{s.session.crag&&E(D)})}e(X);var N=i(X,2);{var W=E=>{var Z=Us(),he=a(Z);e(Z),y(()=>l(he,`üìç ${s.session.sector??""}`)),r(E,Z)};_(N,E=>{s.session.sector&&E(W)})}var ee=i(N,2),ae=a(ee),fe=a(ae,!0);e(ae);var re=i(ae,2),S=a(re);e(re);var I=i(re,2);{var b=E=>{var Z=Hs(),he=a(Z);e(Z),y(()=>l(he,`Max: ${t(q)??""}`)),r(E,Z)};_(I,E=>{t(x)>0&&E(b)})}e(ee),e(j);var v=i(j,2),o=a(v),P=a(o,!0);e(o);var H=i(o,2),ie=a(H,!0);e(H);var Y=i(H,2),ye=a(Y,!0);e(Y),e(v),e(se),e(O);var $=i(O,2),ue=a($),oe=a(ue);{var de=E=>{var Z=Zs();r(E,Z)},Fe=E=>{var Z=Ce(),he=we(Z);{var ge=be=>{var Me=Js();r(be,Me)};_(he,be=>{s.session.syncStatus==="error"&&be(ge)},!0)}r(E,Z)};_(oe,E=>{s.session.syncStatus==="pending"?E(de):E(Fe,!1)})}e(ue);var Oe=i(ue,2);Oe.__click=E=>{E.stopPropagation(),p()};var Ge=i(Oe,2),_e=a(Ge,!0);e(Ge),e($),e(G);var B=i(G,2);{var ce=E=>{var Z=ui(),he=a(Z),ge=a(he),be=i(a(ge),2),Me=a(be);{var Pe=c=>{var w=Ce(),L=we(w);xe(L,17,()=>s.session.trainingTypes,De,(Q,V)=>{var te=Ks(),me=a(te,!0);e(te),y(()=>l(me,t(V))),r(Q,te)}),r(c,w)},Te=c=>{var w=Ys();r(c,w)};_(Me,c=>{s.session.trainingTypes&&s.session.trainingTypes.length>0&&!s.session.trainingTypes.includes("None")?c(Pe):c(Te,!1)})}e(be),e(ge);var ze=i(ge,2);{var je=c=>{var w=Qs(),L=i(a(w),2),Q=a(L,!0);e(L),e(w),y(()=>l(Q,s.session.difficulty)),r(c,w)};_(ze,c=>{s.session.difficulty&&c(je)})}var Ze=i(ze,2);{var qe=c=>{var w=ei(),L=i(a(w),2),Q=a(L);{var V=me=>{var Se=Ce(),ea=we(Se);xe(ea,17,()=>s.session.categories,De,(ke,aa)=>{var da=Xs(),Oa=a(da,!0);e(da),y(()=>l(Oa,t(aa))),r(ke,da)}),r(me,Se)},te=me=>{var Se=$s();r(me,Se)};_(Q,me=>{s.session.categories.length>0&&!s.session.categories.includes("None")?me(V):me(te,!1)})}e(L),e(w),r(c,w)};_(Ze,c=>{s.session.categories?.length&&c(qe)})}var Ne=i(Ze,2);{var va=c=>{var w=si(),L=i(a(w),2),Q=a(L);{var V=me=>{var Se=Ce(),ea=we(Se);xe(ea,17,()=>s.session.techniqueFocuses,De,(ke,aa)=>{var da=ai(),Oa=a(da,!0);e(da),y(()=>l(Oa,t(aa))),r(ke,da)}),r(me,Se)},te=me=>{var Se=ti();r(me,Se)};_(Q,me=>{s.session.techniqueFocuses.length>0&&!s.session.techniqueFocuses.includes("None")?me(V):me(te,!1)})}e(L),e(w),r(c,w)};_(Ne,c=>{s.session.techniqueFocuses?.length&&c(va)})}var Je=i(Ne,2);{var We=c=>{var w=ni(),L=i(a(w),2),Q=a(L);{var V=me=>{var Se=Ce(),ea=we(Se);xe(ea,17,()=>s.session.energySystems,De,(ke,aa)=>{var da=ii(),Oa=a(da,!0);e(da),y(()=>l(Oa,t(aa))),r(ke,da)}),r(me,Se)},te=me=>{var Se=ri();r(me,Se)};_(Q,me=>{s.session.energySystems.length>0&&!s.session.energySystems.includes("None")?me(V):me(te,!1)})}e(L),e(w),r(c,w)};_(Je,c=>{s.session.energySystems?.length&&c(We)})}e(he);var Ke=i(he,2),Ee=a(Ke),Le=i(a(Ee),2),fa=a(Le);e(Le);var Ae=i(Le,2),la=a(Ae);e(Ae),e(Ee);var Ye=i(Ee,2),sa=i(a(Ye),2),qa=a(sa);e(sa);var Ue=i(sa,2),Be=a(Ue);e(Ue),e(Ye);var Qe=i(Ye,2),oa=i(a(Qe),2),Xe=a(oa);e(oa);var $e=i(oa,2),Da=a($e);e($e),e(Qe);var Ve=i(Qe,2);{var Ta=c=>{var w=vi(),L=i(a(w),2),Q=a(L);e(L);var V=i(L,2),te=a(V);e(V),e(w),y(()=>{Ie(Q,`width: ${s.session.openGrip/5*100}%`),l(te,`${s.session.openGrip??""}/5`)}),r(c,w)};_(Ve,c=>{s.session.openGrip&&c(Ta)})}var pa=i(Ve,2);{var Sa=c=>{var w=li(),L=i(a(w),2),Q=a(L);e(L);var V=i(L,2),te=a(V);e(V),e(w),y(()=>{Ie(Q,`width: ${s.session.crimpGrip/5*100}%`),l(te,`${s.session.crimpGrip??""}/5`)}),r(c,w)};_(pa,c=>{s.session.crimpGrip&&c(Sa)})}var ma=i(pa,2);{var Ea=c=>{var w=oi(),L=i(a(w),2),Q=a(L);e(L);var V=i(L,2),te=a(V);e(V),e(w),y(()=>{Ie(Q,`width: ${s.session.pinchGrip/5*100}%`),l(te,`${s.session.pinchGrip??""}/5`)}),r(c,w)};_(ma,c=>{s.session.pinchGrip&&c(Ea)})}var Ca=i(ma,2);{var Aa=c=>{var w=di(),L=i(a(w),2),Q=a(L);e(L);var V=i(L,2),te=a(V);e(V),e(w),y(()=>{Ie(Q,`width: ${s.session.sloperGrip/5*100}%`),l(te,`${s.session.sloperGrip??""}/5`)}),r(c,w)};_(Ca,c=>{s.session.sloperGrip&&c(Aa)})}var ka=i(Ca,2);{var ya=c=>{var w=ci(),L=i(a(w),2),Q=a(L);e(L);var V=i(L,2),te=a(V);e(V),e(w),y(()=>{Ie(Q,`width: ${s.session.jugGrip/5*100}%`),l(te,`${s.session.jugGrip??""}/5`)}),r(c,w)};_(ka,c=>{s.session.jugGrip&&c(ya)})}e(Ke);var xa=i(Ke,2),Fa=i(a(xa),2),za=a(Fa);xe(za,17,()=>s.session.climbs,De,(c,w,L)=>{{let Q=ba(()=>s.session.climbingType==="Mixed");Ws(c,{get climb(){return t(w)},onDelete:()=>m(L),get showClimbType(){return t(Q)}})}});var R=i(za,2);{var A=c=>{var w=_i();r(c,w)};_(R,c=>{s.session.climbs.length===0&&c(A)})}e(Fa),e(xa),e(Z),y(()=>{Ie(fa,`width: ${s.session.fingerLoad/5*100}%`),l(la,`${s.session.fingerLoad??""}/5`),Ie(qa,`width: ${s.session.shoulderLoad/5*100}%`),l(Be,`${s.session.shoulderLoad??""}/5`),Ie(Xe,`width: ${s.session.forearmLoad/5*100}%`),l(Da,`${s.session.forearmLoad??""}/5`)}),ta(3,Z,()=>ua,()=>({duration:200})),r(E,Z)};_(B,E=>{t(g)&&E(ce)})}e(C);var ne=i(C,2);Va(ne,{get isOpen(){return t(u)},title:"Delete Session",message:"Are you sure you want to delete this session and all its climbs? This cannot be undone.",onConfirm:f,onCancel:()=>d(u,!1)}),y((E,Z)=>{z=He(C,1,"session-card svelte-d5hg2r",null,z,{expanded:t(g)}),Re(G,"aria-expanded",t(g)),l(J,E),l(ve,Z),l(le,`${s.session.area??""} `),l(fe,s.session.climbingType),l(S,`${t(x)??""} climbs`),Re(o,"title",`Finger Load: ${s.session.fingerLoad??""}`),l(P,s.session.fingerLoad),Re(H,"title",`Shoulder Load: ${s.session.shoulderLoad??""}`),l(ie,s.session.shoulderLoad),Re(Y,"title",`Forearm Load: ${s.session.forearmLoad??""}`),l(ye,s.session.forearmLoad),l(_e,t(g)?"‚ñ≤":"‚ñº")},[()=>new Date(s.session.date).getDate(),()=>new Date(s.session.date).toLocaleDateString(void 0,{month:"short"})]),r(k,F),_a()}na(["click","keydown"]);var pi=n('<span class="spinner svelte-1s7jdlh"></span> Fetching...',1),mi=n('<div class="error-banner svelte-1s7jdlh"> </div>'),hi=n('<small class="svelte-1s7jdlh">Try adjusting your filters.</small>'),bi=n('<div class="empty-state svelte-1s7jdlh"><p class="svelte-1s7jdlh">No outdoor climbing sessions found.</p> <!></div>'),yi=n('<div class="load-more-container svelte-1s7jdlh"><button class="load-more-btn svelte-1s7jdlh"> </button></div>'),xi=n('<div class="view-container svelte-1s7jdlh"><div class="view-header svelte-1s7jdlh"><h2 class="view-title svelte-1s7jdlh">‚õ∞Ô∏è Outdoor Climbing History</h2> <div class="header-actions svelte-1s7jdlh"><button class="action-btn secondary svelte-1s7jdlh" title="Export filtered data to CSV">üì• Export</button> <button class="action-btn svelte-1s7jdlh" title="Fetch data from cloud"><!></button></div></div> <!> <!> <div class="info-bar svelte-1s7jdlh"><div class="legend-wrapper svelte-1s7jdlh"><!></div> <div class="load-key svelte-1s7jdlh"><span class="key-label svelte-1s7jdlh">Load:</span> <div class="key-item svelte-1s7jdlh"><span class="dot finger svelte-1s7jdlh"></span> Finger</div> <div class="key-item svelte-1s7jdlh"><span class="dot shoulder svelte-1s7jdlh"></span> Shoulder</div> <div class="key-item svelte-1s7jdlh"><span class="dot forearm svelte-1s7jdlh"></span> Forearm</div></div></div> <div class="sessions-list"><!> <!> <!></div></div>');function wi(k,s){ca(s,!0);let g=U(ga([])),u=U(ga([])),h=U(!1),p=U(""),f=U(ga({startDate:"",endDate:"",area:"",crag:"",sessionType:"",grade:""})),m=U(20);const x=20;Ka(()=>{q()});function q(){const v=Ra("outdoor_climb");d(g,v.sort((o,P)=>new Date(P.date).getTime()-new Date(o.date).getTime()),!0),G()}async function F(){d(h,!0),d(p,"");try{await Ba();const v=await gt();v.ok&&v.data?C(v.data):d(p,v.error||"Failed to fetch data",!0)}catch(v){d(p,v instanceof Error?v.message:"Unknown error",!0)}finally{d(h,!1)}}function C(v){const o=v.map(H=>({...H,activityType:"outdoor_climb",createdAt:new Date().toISOString(),updatedAt:new Date().toISOString(),syncStatus:"synced",syncedAt:new Date().toISOString(),openGrip:0,crimpGrip:0,pinchGrip:0,sloperGrip:0,jugGrip:0}));Pa(o);const P=Ra("outdoor_climb");d(g,P.sort((H,ie)=>new Date(ie.date).getTime()-new Date(H.date).getTime()),!0),G()}function z(v){d(f,v,!0),G()}function G(){d(m,x),d(u,t(g).filter(v=>{if(t(f).startDate&&v.date<t(f).startDate||t(f).endDate&&v.date>t(f).endDate||t(f).area&&!v.area.toLowerCase().includes(t(f).area.toLowerCase())||t(f).crag&&!v.crag.toLowerCase().includes(t(f).crag.toLowerCase())||t(f).sessionType&&!v.trainingTypes?.includes(t(f).sessionType))return!1;if(t(f).grade){const o=t(f).grade.trim().toLowerCase();if(!v.climbs.some(H=>H.grade.trim().toLowerCase()===o))return!1}return!0}),!0)}function O(){d(m,t(m)+x)}var T=xi(),M=a(T),J=i(a(M),2),K=a(J);K.__click=()=>et(t(u),"outdoor_climbs");var ve=i(K,2);ve.__click=F;var se=a(ve);{var j=v=>{var o=pi();Ga(),r(v,o)},X=v=>{var o=wa("‚òÅÔ∏è Fetch Data");r(v,o)};_(se,v=>{t(h)?v(j):v(X,!1)})}e(ve),e(J),e(M);var le=i(M,2);{var pe=v=>{var o=mi(),P=a(o,!0);e(o),y(()=>l(P,t(p))),ta(3,o,()=>ua),r(v,o)};_(le,v=>{t(p)&&v(pe)})}var D=i(le,2);js(D,{onFilterParamsChange:z});var N=i(D,2),W=a(N),ee=a(W);$a(ee),e(W),Ga(2),e(N);var ae=i(N,2),fe=a(ae);xe(fe,17,()=>t(u).slice(0,t(m)),v=>v.id,(v,o)=>{gi(v,{get session(){return t(o)},onDelete:q})});var re=i(fe,2);{var S=v=>{var o=bi(),P=i(a(o),2);{var H=ie=>{var Y=hi();r(ie,Y)};_(P,ie=>{t(g).length>0&&ie(H)})}e(o),r(v,o)};_(re,v=>{t(u).length===0&&v(S)})}var I=i(re,2);{var b=v=>{var o=yi(),P=a(o);P.__click=O;var H=a(P);e(P),e(o),y(()=>l(H,`Load More (${t(u).length-t(m)} remaining)`)),r(v,o)};_(I,v=>{t(m)<t(u).length&&v(b)})}e(ae),e(T),y(()=>ve.disabled=t(h)),r(k,T),_a()}na(["click"]);var qi=n('<div class="view-container svelte-133enjd"><h2 class="view-title svelte-133enjd">üèãÔ∏è Gym Session History</h2> <p class="placeholder-text svelte-133enjd">Your gym sessions will appear here</p></div>');function Di(k){var s=qi();r(k,s)}var Si=n('<span class="spinner svelte-1szs0u9"></span> Fetching...',1),ki=n('<div class="loading svelte-1szs0u9">Loading sessions...</div>'),Ti=n('<div class="empty-state svelte-1szs0u9"><!></div>'),Ci=n('<span class="set-tag svelte-1szs0u9"> <span class="x svelte-1szs0u9">x</span> </span>'),Fi=n('<div class="ex-notes svelte-1szs0u9"> </div>'),zi=n('<div class="exercise-item svelte-1szs0u9"><div class="ex-header svelte-1szs0u9"><span class="ex-name svelte-1szs0u9"> </span> <span class="ex-grip svelte-1szs0u9"> </span></div> <div class="ex-sets svelte-1szs0u9"></div> <!></div>'),Li=n('<div class="card-body svelte-1szs0u9"><div class="exercises-list svelte-1szs0u9"></div></div>'),Gi=n('<div><div class="card-header svelte-1szs0u9" role="button" tabindex="0"><div class="header-main"><span class="session-date svelte-1szs0u9"> </span> <span class="meta svelte-1szs0u9"><!> </span></div> <div class="header-status svelte-1szs0u9"><span>‚óè</span> <button class="btn-icon delete-btn svelte-1szs0u9" title="Delete Session">üóëÔ∏è</button> <span class="chevron svelte-1szs0u9"> </span></div></div> <!></div>'),Ei=n('<div class="load-more-container svelte-1szs0u9"><button class="load-more-btn svelte-1szs0u9"> </button></div>'),Ai=n('<div class="timeline svelte-1szs0u9"><!> <!></div>'),Oi=n('<div class="view-content svelte-1szs0u9"><div class="header svelte-1szs0u9"><h3 class="svelte-1szs0u9">ü§è Fingerboarding Log</h3> <button class="fetch-btn svelte-1szs0u9" title="Fetch data from cloud"><!></button></div> <div class="filters svelte-1szs0u9"><div class="filter-group svelte-1szs0u9"><label for="start-date" class="svelte-1szs0u9">From</label> <input type="date" id="start-date" class="svelte-1szs0u9"/></div> <div class="filter-group svelte-1szs0u9"><label for="end-date" class="svelte-1szs0u9">To</label> <input type="date" id="end-date" class="svelte-1szs0u9"/></div></div> <!></div> <!>',1);function ji(k,s){ca(s,!0);let g=U(ga([])),u=U(!0),h=U(""),p=U(""),f=U(ga(new Set)),m=U(20);const x=20;dt(()=>{t(h),t(p),d(m,x)});let q=U(!1),F=U(null);function C(b){d(F,b,!0),d(q,!0)}function z(){t(F)&&(Ma(t(F)),d(F,null),d(q,!1),d(g,Wa().sort((b,v)=>new Date(v.date).getTime()-new Date(b.date).getTime()),!0))}async function G(){d(u,!0),d(g,Wa().sort((b,v)=>new Date(v.date).getTime()-new Date(b.date).getTime()),!0);try{await Ba();const b=await pt();if(b.ok&&b.data){const v=b.data.map(o=>({...o,activityType:"fingerboarding",createdAt:o.createdAt||new Date().toISOString(),updatedAt:o.updatedAt||new Date().toISOString(),syncStatus:"synced"}));Pa(v),d(g,Wa().sort((o,P)=>new Date(P.date).getTime()-new Date(o.date).getTime()),!0)}}catch(b){console.error("Failed to sync",b)}finally{d(u,!1)}}G();let O=ba(()=>t(g).filter(b=>!(t(h)&&new Date(b.date)<new Date(t(h))||t(p)&&new Date(b.date)>new Date(t(p)))));function T(){d(m,t(m)+x)}function M(b){t(f).has(b)?t(f).delete(b):t(f).add(b),d(f,new Set(t(f)),!0)}function J(b){return b.exercises.reduce((v,o)=>v+o.details.length,0)}var K=Oi(),ve=we(K),se=a(ve),j=i(a(se),2);j.__click=G;var X=a(j);{var le=b=>{var v=Si();Ga(),r(b,v)},pe=b=>{var v=wa("‚òÅÔ∏è Fetch Data");r(b,v)};_(X,b=>{t(u)?b(le):b(pe,!1)})}e(j),e(se);var D=i(se,2),N=a(D),W=i(a(N),2);ia(W),e(N);var ee=i(N,2),ae=i(a(ee),2);ia(ae),e(ee),e(D);var fe=i(D,2);{var re=b=>{var v=ki();r(b,v)},S=b=>{var v=Ce(),o=we(v);{var P=ie=>{var Y=Ti(),ye=a(Y);{var $=oe=>{var de=wa("No sessions match filter.");r(oe,de)},ue=oe=>{var de=wa("No fingerboarding sessions logged yet.");r(oe,de)};_(ye,oe=>{t(g).length>0?oe($):oe(ue,!1)})}e(Y),r(ie,Y)},H=ie=>{var Y=Ai(),ye=a(Y);xe(ye,17,()=>t(O).slice(0,t(m)),De,(oe,de)=>{var Fe=Gi();let Oe;var Ge=a(Fe);Ge.__click=()=>M(t(de).id),Ge.__keydown=qe=>qe.key==="Enter"&&M(t(de).id);var _e=a(Ge),B=a(_e),ce=a(B,!0);e(B);var ne=i(B,2),E=a(ne);{var Z=qe=>{var Ne=wa();y(()=>l(Ne,`${t(de).location??""} ¬∑`)),r(qe,Ne)};_(E,qe=>{t(de).location&&t(de).location!=="N/A"&&t(de).location!=="Home"&&qe(Z)})}var he=i(E);e(ne),e(_e);var ge=i(_e,2),be=a(ge);let Me;var Pe=i(be,2);Pe.__click=qe=>{qe.stopPropagation(),C(t(de).id)};var Te=i(Pe,2),ze=a(Te,!0);e(Te),e(ge),e(Ge);var je=i(Ge,2);{var Ze=qe=>{var Ne=Li(),va=a(Ne);xe(va,21,()=>t(de).exercises,De,(Je,We)=>{var Ke=zi(),Ee=a(Ke),Le=a(Ee),fa=a(Le,!0);e(Le);var Ae=i(Le,2),la=a(Ae,!0);e(Ae),e(Ee);var Ye=i(Ee,2);xe(Ye,21,()=>t(We).details,De,(Ue,Be)=>{var Qe=Ci(),oa=a(Qe),Xe=i(oa,2);e(Qe),y(()=>{l(oa,`${t(Be).weight>0?`+${t(Be).weight}kg`:"BW"} `),l(Xe,` ${t(Be).reps??""}s/reps`)}),r(Ue,Qe)}),e(Ye);var sa=i(Ye,2);{var qa=Ue=>{var Be=Fi(),Qe=a(Be);e(Be),y(()=>l(Qe,`"${t(We).notes??""}"`)),r(Ue,Be)};_(sa,Ue=>{t(We).notes&&Ue(qa)})}e(Ke),y(()=>{l(fa,t(We).name),l(la,t(We).gripType)}),r(Je,Ke)}),e(va),e(Ne),ta(3,Ne,()=>ua,()=>({duration:200})),r(qe,Ne)};_(je,qe=>{t(f).has(t(de).id)&&qe(Ze)})}e(Fe),y((qe,Ne,va,Je)=>{Oe=He(Fe,1,"session-card svelte-1szs0u9",null,Oe,qe),l(ce,Ne),l(he,` ${t(de).exercises.length??""} Exercises ¬∑ ${va??""} Sets`),Me=He(be,1,"sync-dot svelte-1szs0u9",null,Me,{synced:t(de).syncStatus==="synced"}),Re(be,"title",t(de).syncStatus==="synced"?"Synced":"Local"),l(ze,Je)},[()=>({expanded:t(f).has(t(de).id)}),()=>new Date(t(de).date).toLocaleDateString(void 0,{weekday:"short",month:"short",day:"numeric"}),()=>J(t(de)),()=>t(f).has(t(de).id)?"‚ñ≤":"‚ñº"]),r(oe,Fe)});var $=i(ye,2);{var ue=oe=>{var de=Ei(),Fe=a(de);Fe.__click=T;var Oe=a(Fe);e(Fe),e(de),y(()=>l(Oe,`Load More (${t(O).length-t(m)} remaining)`)),r(oe,de)};_($,oe=>{t(m)<t(O).length&&oe(ue)})}e(Y),r(ie,Y)};_(o,ie=>{t(O).length===0?ie(P):ie(H,!1)},!0)}r(b,v)};_(fe,b=>{t(u)&&t(g).length===0?b(re):b(S,!1)})}e(ve);var I=i(ve,2);Va(I,{get isOpen(){return t(q)},title:"Delete Fingerboard Session",message:"Are you sure you want to delete this session? This cannot be undone.",onConfirm:z,onCancel:()=>d(q,!1)}),y(()=>j.disabled=t(u)),ra(W,()=>t(h),b=>d(h,b)),ra(ae,()=>t(p),b=>d(p,b)),r(k,K),_a()}na(["click","keydown"]);var Ni=n('<span class="spinner svelte-xyvf5r"></span> Fetching...',1),Ii=n('<div class="loading svelte-xyvf5r">Loading sessions...</div>'),Ri=n('<div class="empty-state svelte-xyvf5r">No competitions logged yet.</div>'),Mi=n('<span class="round-pos svelte-xyvf5r"> </span>'),Pi=n('<span class="c-attempts svelte-xyvf5r"> </span>'),Bi=n('<div class="climb-notes svelte-xyvf5r"> </div>'),Vi=n('<div class="climb-row svelte-xyvf5r"><div class="climb-info svelte-xyvf5r"><span class="c-name svelte-xyvf5r"> </span> <!></div> <div class="climb-result"><span> </span></div></div> <!>',1),Wi=n('<div class="climbs-list"></div>'),Ui=n('<div class="round-item svelte-xyvf5r"><div class="round-header svelte-xyvf5r"><span class="round-name"> </span> <!></div> <!></div>'),Hi=n('<div class="rounds-list svelte-xyvf5r"></div>'),Zi=n('<div class="load-meta svelte-xyvf5r"><span> </span></div>'),Ji=n('<div class="card-body svelte-xyvf5r"><!> <!> <div class="session-footer svelte-xyvf5r"><span> </span></div></div>'),Ki=n('<div><div class="card-header svelte-xyvf5r" role="button" tabindex="0"><div class="header-main svelte-xyvf5r"><div class="left-col svelte-xyvf5r"><span class="venue svelte-xyvf5r"> </span> <span class="date svelte-xyvf5r"> </span></div> <div class="right-col svelte-xyvf5r"><div class="badges svelte-xyvf5r"><span class="type-tag svelte-xyvf5r"> </span> <span class="result-tag svelte-xyvf5r"> </span></div></div></div> <div class="header-status svelte-xyvf5r"><span>‚óè</span> <button class="btn-icon delete-btn svelte-xyvf5r" title="Delete Session">üóëÔ∏è</button> <span class="chevron svelte-xyvf5r"> </span></div></div> <!></div>'),Yi=n('<div class="load-more-container svelte-xyvf5r"><button class="load-more-btn svelte-xyvf5r"> </button></div>'),Qi=n('<div class="timeline svelte-xyvf5r"><!> <!></div>'),Xi=n('<div class="view-content svelte-xyvf5r"><div class="header svelte-xyvf5r"><h3 class="svelte-xyvf5r">üèÜ Competition Log</h3> <button class="fetch-btn svelte-xyvf5r" title="Fetch data from cloud"><!></button></div> <!> <!></div>');function $i(k,s){ca(s,!0);let g=U(ga([])),u=U(!0),h=U(ga(new Set)),p=U(20);const f=20;let m=U(!1),x=U(null);function q(D){d(x,D,!0),d(m,!0)}function F(){t(x)&&(Ma(t(x)),d(x,null),d(m,!1),d(g,Ua().sort((D,N)=>new Date(N.date).getTime()-new Date(D.date).getTime()),!0))}async function C(){d(u,!0),d(p,f),d(g,Ua().sort((D,N)=>new Date(N.date).getTime()-new Date(D.date).getTime()),!0);try{await Ba();const D=await mt();if(D.ok&&D.data){const N=D.data.map(W=>({...W,activityType:"competition",type:W.type,rounds:W.rounds.map(ee=>({...ee,climbs:ee.climbs?.map(ae=>({...ae,status:ae.status}))})),createdAt:W.createdAt||new Date().toISOString(),updatedAt:W.updatedAt||new Date().toISOString(),syncStatus:"synced"}));Pa(N),d(g,Ua().sort((W,ee)=>new Date(ee.date).getTime()-new Date(W.date).getTime()),!0)}}catch(D){console.error("Failed to sync",D)}finally{d(u,!1)}}C();function z(D){t(h).has(D)?t(h).delete(D):t(h).add(D),d(h,new Set(t(h)),!0)}function G(){d(p,t(p)+f)}function O(D){if(!D.rounds||D.rounds.length===0)return"No rounds";const N=D.rounds[D.rounds.length-1];if(N.position)return`#${N.position} ${N.name}`;if(N.climbs){const W=N.climbs.filter(ae=>ae.status==="Top"||ae.status==="Flash").length,ee=N.climbs.filter(ae=>ae.status==="Zone").length;return`${D.rounds.length} Rnds ¬∑ Final: ${W}T ${ee+W}Z`}return N.name}var T=Xi(),M=a(T),J=i(a(M),2);J.__click=C;var K=a(J);{var ve=D=>{var N=Ni();Ga(),r(D,N)},se=D=>{var N=wa("‚òÅÔ∏è Fetch Data");r(D,N)};_(K,D=>{t(u)?D(ve):D(se,!1)})}e(J),e(M);var j=i(M,2);{var X=D=>{var N=Ii();r(D,N)},le=D=>{var N=Ce(),W=we(N);{var ee=fe=>{var re=Ri();r(fe,re)},ae=fe=>{var re=Qi(),S=a(re);xe(S,17,()=>t(g).slice(0,t(p)),De,(v,o)=>{var P=Ki();let H;var ie=a(P);ie.__click=()=>z(t(o).id),ie.__keydown=Te=>Te.key==="Enter"&&z(t(o).id);var Y=a(ie),ye=a(Y),$=a(ye),ue=a($,!0);e($);var oe=i($,2),de=a(oe,!0);e(oe),e(ye);var Fe=i(ye,2),Oe=a(Fe),Ge=a(Oe),_e=a(Ge,!0);e(Ge);var B=i(Ge,2),ce=a(B,!0);e(B),e(Oe),e(Fe),e(Y);var ne=i(Y,2),E=a(ne);let Z;var he=i(E,2);he.__click=Te=>{Te.stopPropagation(),q(t(o).id)};var ge=i(he,2),be=a(ge,!0);e(ge),e(ne),e(ie);var Me=i(ie,2);{var Pe=Te=>{var ze=Ji(),je=a(ze);{var Ze=Ee=>{var Le=Hi();xe(Le,21,()=>t(o).rounds,De,(fa,Ae)=>{var la=Ui(),Ye=a(la),sa=a(Ye),qa=a(sa,!0);e(sa);var Ue=i(sa,2);{var Be=Xe=>{var $e=Mi(),Da=a($e);e($e),y(()=>l(Da,`#${t(Ae).position??""}`)),r(Xe,$e)};_(Ue,Xe=>{t(Ae).position&&Xe(Be)})}e(Ye);var Qe=i(Ye,2);{var oa=Xe=>{var $e=Wi();xe($e,21,()=>t(Ae).climbs,De,(Da,Ve)=>{var Ta=Vi(),pa=we(Ta),Sa=a(pa),ma=a(Sa),Ea=a(ma,!0);e(ma);var Ca=i(ma,2);{var Aa=A=>{var c=Pi(),w=a(c);e(c),y(()=>l(w,`(${t(Ve).attemptCount??""} tries)`)),r(A,c)};_(Ca,A=>{t(Ve).attemptCount>1&&A(Aa)})}e(Sa);var ka=i(Sa,2),ya=a(ka);let xa;var Fa=a(ya,!0);e(ya),e(ka),e(pa);var za=i(pa,2);{var R=A=>{var c=Bi(),w=a(c);e(c),y(()=>l(w,`"${t(Ve).notes??""}"`)),r(A,c)};_(za,A=>{t(Ve).notes&&A(R)})}y(()=>{l(Ea,t(Ve).name),xa=He(ya,1,"status-badge svelte-xyvf5r",null,xa,{top:t(Ve).status==="Top"||t(Ve).status==="Flash",zone:t(Ve).status==="Zone"}),l(Fa,t(Ve).status)}),r(Da,Ta)}),e($e),r(Xe,$e)};_(Qe,Xe=>{t(Ae).climbs&&Xe(oa)})}e(la),y(()=>l(qa,t(Ae).name)),r(fa,la)}),e(Le),r(Ee,Le)};_(je,Ee=>{t(o).rounds&&Ee(Ze)})}var qe=i(je,2);{var Ne=Ee=>{var Le=Zi(),fa=a(Le),Ae=a(fa);e(fa),e(Le),y(()=>l(Ae,`Detailed Load: Fingers ${t(o).fingerLoad??""}/5, Shoulders ${t(o).shoulderLoad??""}/5, Forearms ${t(o).forearmLoad??""}/5`)),r(Ee,Le)};_(qe,Ee=>{(t(o).fingerLoad||t(o).shoulderLoad)&&Ee(Ne)})}var va=i(qe,2),Je=a(va);let We;var Ke=a(Je,!0);e(Je),e(va),e(ze),y(()=>{We=He(Je,1,"sync-status svelte-xyvf5r",null,We,{synced:t(o).syncStatus==="synced"}),l(Ke,t(o).syncStatus==="synced"?"‚úì Synced":"‚òÅ Local")}),ta(3,ze,()=>ua,()=>({duration:200})),r(Te,ze)};_(Me,Te=>{t(h).has(t(o).id)&&Te(Pe)})}e(P),y((Te,ze,je,Ze)=>{H=He(P,1,"session-card svelte-xyvf5r",null,H,Te),l(ue,t(o).customVenue||t(o).venue),l(de,ze),l(_e,t(o).type),l(ce,je),Z=He(E,1,"sync-dot",null,Z,{synced:t(o).syncStatus==="synced"}),Re(E,"title",t(o).syncStatus==="synced"?"Synced":"Local"),l(be,Ze)},[()=>({expanded:t(h).has(t(o).id)}),()=>new Date(t(o).date).toLocaleDateString(void 0,{weekday:"short",day:"numeric",month:"short"}),()=>O(t(o)),()=>t(h).has(t(o).id)?"‚ñ≤":"‚ñº"]),r(v,P)});var I=i(S,2);{var b=v=>{var o=Yi(),P=a(o);P.__click=G;var H=a(P);e(P),e(o),y(()=>l(H,`Load More (${t(g).length-t(p)} remaining)`)),r(v,o)};_(I,v=>{t(p)<t(g).length&&v(b)})}e(re),r(fe,re)};_(W,fe=>{t(g).length===0?fe(ee):fe(ae,!1)},!0)}r(D,N)};_(j,D=>{t(u)&&t(g).length===0?D(X):D(le,!1)})}var pe=i(j,2);Va(pe,{get isOpen(){return t(m)},title:"Delete Competition",message:"Are you sure you want to delete this competition session? This action cannot be undone.",onConfirm:F,onCancel:()=>d(m,!1)}),e(T),y(()=>J.disabled=t(u)),r(k,T),_a()}na(["click","keydown"]);var er=n("<option> </option>"),ar=n('<div class="view-container svelte-108px9u"><!></div>'),tr=n('<div class="page svelte-108px9u"><div class="page-header svelte-108px9u"><h1 class="svelte-108px9u">üìä View Data</h1> <p class="subtitle svelte-108px9u">Browse your training history</p></div> <div class="content-card svelte-108px9u"><div class="form-group svelte-108px9u"><label for="activity-type" class="svelte-108px9u">Activity Type</label> <select id="activity-type" class="svelte-108px9u"><option disabled>Select an activity...</option><!></select></div> <!></div></div>');function fr(k){const s=[{value:"indoor_climb",label:"Indoor Climb",icon:"üßó"},{value:"outdoor_climb",label:"Outdoor Climb",icon:"‚õ∞Ô∏è"},{value:"gym_session",label:"Gym Session",icon:"üèãÔ∏è"},{value:"fingerboarding",label:"Fingerboarding",icon:"ü§è"},{value:"competition",label:"Competition",icon:"üèÜ"}];let g=U("");var u=tr(),h=i(a(u),2),p=a(h),f=i(a(p),2),m=a(f);m.value=m.__value="";var x=i(m);xe(x,17,()=>s,C=>C.value,(C,z)=>{var G=er(),O=a(G);e(G);var T={};y(()=>{l(O,`${t(z).icon??""} ${t(z).label??""}`),T!==(T=t(z).value)&&(G.value=(G.__value=t(z).value)??"")}),r(C,G)}),e(f),e(p);var q=i(p,2);{var F=C=>{var z=ar(),G=a(z);{var O=M=>{qs(M,{})},T=M=>{var J=Ce(),K=we(J);{var ve=j=>{wi(j,{})},se=j=>{var X=Ce(),le=we(X);{var pe=N=>{Di(N)},D=N=>{var W=Ce(),ee=we(W);{var ae=re=>{ji(re,{})},fe=re=>{var S=Ce(),I=we(S);{var b=v=>{$i(v,{})};_(I,v=>{t(g)==="competition"&&v(b)},!0)}r(re,S)};_(ee,re=>{t(g)==="fingerboarding"?re(ae):re(fe,!1)},!0)}r(N,W)};_(le,N=>{t(g)==="gym_session"?N(pe):N(D,!1)},!0)}r(j,X)};_(K,j=>{t(g)==="outdoor_climb"?j(ve):j(se,!1)},!0)}r(M,J)};_(G,M=>{t(g)==="indoor_climb"?M(O):M(T,!1)})}e(z),r(C,z)};_(q,C=>{t(g)&&C(F)})}e(h),e(u),La(f,()=>t(g),C=>d(g,C)),r(k,u)}export{fr as component};
