import{f as v,a as i,c as Ye,t as qa}from"../chunks/CSQvsE9s.js";import{p as pa,c as t,s,i as e,aV as k,r as a,t as _,a as _a,x as l,b0 as Za,f as Ae,aG as za,aW as na,w as ba,o as Ua,b8 as Ja,d as Qa}from"../chunks/DGPNV_z9.js";import{d as oa,s as d}from"../chunks/DSMXtqZM.js";import{i as c}from"../chunks/D9GEZg6r.js";import{s as Qe,r as Ie,e as qe,i as Ce,b as Me,c as $a}from"../chunks/_iMURHzE.js";import{t as ra,k as ua,i as Ka,u as et,s as ja,l as at,g as tt,b as st,m as rt,n as it,D as Pa,E as lt,o as vt,p as nt,q as ot,d as dt,r as ct}from"../chunks/DFxUjh3A.js";import{c as Sa,f as ta,n as Ia,m as Xa,b as Ma,o as Oa,p as Na,q as Wa,t as Ba,v as Va,w as pt}from"../chunks/Cn4iyW3Z.js";import{s as sa}from"../chunks/Ct8JfZaa.js";import{p as Ra}from"../chunks/Dd0awD9h.js";var _t=v('<span class="chevron svelte-12crvy">‚ñ≤</span>'),ut=v('<span class="chevron svelte-12crvy">‚ñº</span>'),ft=v('<div class="input-with-action svelte-12crvy"><input type="text" id="location-manual" placeholder="Custom location..." class="flat-left svelte-12crvy"/> <button type="button" class="action-btn flat-right svelte-12crvy" title="Back to list">‚úï</button></div>'),gt=v("<option> </option>"),mt=v('<select id="location-filter" class="svelte-12crvy"><option>Any Location</option><!></select>'),ht=v("<option> </option>"),bt=v("<option> </option>"),yt=v('<div class="filter-body svelte-12crvy"><div class="filter-grid svelte-12crvy"><div class="filter-item svelte-12crvy"><label for="start-date" class="svelte-12crvy">Start Date</label> <input type="date" id="start-date" class="svelte-12crvy"/></div> <div class="filter-item svelte-12crvy"><label for="end-date" class="svelte-12crvy">End Date</label> <input type="date" id="end-date" class="svelte-12crvy"/></div> <div class="filter-item svelte-12crvy"><label for="location-filter" class="svelte-12crvy">Location</label> <!></div> <div class="filter-item svelte-12crvy"><label for="climbing-type-filter" class="svelte-12crvy">Climb Type</label> <select id="climbing-type-filter" class="svelte-12crvy"><option>Any Type</option><!></select></div> <div class="filter-item svelte-12crvy"><label for="session-type-filter" class="svelte-12crvy">Session Type</label> <select id="session-type-filter" class="svelte-12crvy"><option>Any Type</option><!></select></div> <div class="filter-item svelte-12crvy"><label for="grade-filter" class="svelte-12crvy">Grade (Exact)</label> <input type="text" id="grade-filter" placeholder="e.g. V4" class="svelte-12crvy"/></div></div> <div class="filter-actions svelte-12crvy"><button class="reset-btn svelte-12crvy">Reset Filters</button></div></div>'),xt=v('<div class="filter-container svelte-12crvy"><button class="filter-header svelte-12crvy"><div class="header-content svelte-12crvy"><span class="icon svelte-12crvy">üîç</span> <span class="title svelte-12crvy">Filters</span> <!></div></button> <!></div>');function wt(ze,p){pa(p,!0);const r=["Rockstar Swindon","Flashpoint Swindon","Flashpoint Bristol","Redpoint Bristol","TCH Bristol","Other"],m=["Bouldering","Sport","Mixed"],C=["Projecting","Onsighting","Campusing","Repeaters"];let D=k(!1),f=k(""),z=k(""),w=k(""),B=k(""),Q=k(""),de=k(""),_e=k(!1);function re(){l(D,!e(D))}function ae(){l(f,""),l(z,""),l(w,""),l(B,""),l(_e,!1),l(Q,""),l(de,""),H()}function H(){p.onFilterParamsChange({startDate:e(f),endDate:e(z),location:e(w),climbingType:e(B),sessionType:e(Q),grade:e(de)})}function ce(){e(w)==="Other"?(l(_e,!0),l(w,"")):H()}function ue(){l(_e,!1),l(w,""),H()}var ie=xt(),W=t(ie);W.__click=re;var le=t(W),Se=s(t(le),4);{var xe=b=>{var F=_t();i(b,F)},te=b=>{var F=ut();i(b,F)};c(Se,b=>{e(D)?b(xe):b(te,!1)})}a(le),a(W);var j=s(W,2);{var h=b=>{var F=yt(),M=t(F),P=t(M),$=s(t(P),2);Ie($),$.__change=H,a(P);var K=s(P,2),y=s(t(K),2);Ie(y),y.__change=H,a(K);var O=s(K,2),x=s(t(O),2);{var n=q=>{var S=ft(),A=t(S);Ie(A),A.__input=H;var U=s(A,2);U.__click=ue,a(S),Me(A,()=>e(w),g=>l(w,g)),i(q,S)},o=q=>{var S=mt();S.__change=ce;var A=t(S);A.value=A.__value="";var U=s(A);qe(U,17,()=>r,Ce,(g,I)=>{var ge=gt(),ee=t(ge,!0);a(ge);var se={};_(()=>{d(ee,e(I)),se!==(se=e(I))&&(ge.value=(ge.__value=e(I))??"")}),i(g,ge)}),a(S),Sa(S,()=>e(w),g=>l(w,g)),i(q,S)};c(x,q=>{e(_e)?q(n):q(o,!1)})}a(O);var T=s(O,2),V=s(t(T),2);V.__change=H;var X=t(V);X.value=X.__value="";var L=s(X);qe(L,17,()=>m,Ce,(q,S)=>{var A=ht(),U=t(A,!0);a(A);var g={};_(()=>{d(U,e(S)),g!==(g=e(S))&&(A.value=(A.__value=e(S))??"")}),i(q,A)}),a(V),a(T);var pe=s(T,2),oe=s(t(pe),2);oe.__change=H;var ke=t(oe);ke.value=ke.__value="";var E=s(ke);qe(E,17,()=>C,Ce,(q,S)=>{var A=bt(),U=t(A,!0);a(A);var g={};_(()=>{d(U,e(S)),g!==(g=e(S))&&(A.value=(A.__value=e(S))??"")}),i(q,A)}),a(oe),a(pe);var N=s(pe,2),fe=s(t(N),2);Ie(fe),fe.__input=H,a(N),a(M);var we=s(M,2),Te=t(we);Te.__click=ae,a(we),a(F),Me($,()=>e(f),q=>l(f,q)),Me(y,()=>e(z),q=>l(z,q)),Sa(V,()=>e(B),q=>l(B,q)),Sa(oe,()=>e(Q),q=>l(Q,q)),Me(fe,()=>e(de),q=>l(de,q)),ra(3,F,()=>ua,()=>({duration:200})),i(b,F)};c(j,b=>{e(D)&&b(h)})}a(ie),_(()=>Qe(W,"aria-expanded",e(D))),i(ze,ie),_a()}oa(["click","change","input"]);var St=v('<label class="type-toggle svelte-yz0xxt"><input type="checkbox"/> <span>Sport?</span></label>'),kt=v("<option> </option>"),Dt=v('<div class="edit-form svelte-yz0xxt"><div class="edit-row main svelte-yz0xxt"><input type="text" class="edit-input grade svelte-yz0xxt" placeholder="Grade"/> <input type="text" class="edit-input name svelte-yz0xxt" placeholder="Route Name"/> <!></div> <div class="edit-row meta svelte-yz0xxt"><select class="edit-select svelte-yz0xxt"></select> <div class="attempts-input-wrapper svelte-yz0xxt"><span>#</span> <input type="number" min="1" class="edit-input num svelte-yz0xxt"/></div></div> <div class="edit-row notes svelte-yz0xxt"><textarea class="edit-input notes-area svelte-yz0xxt" placeholder="Notes..."></textarea></div> <div class="edit-actions svelte-yz0xxt"><button class="action-btn cancel svelte-yz0xxt">Cancel</button> <button class="action-btn save svelte-yz0xxt">Save</button></div></div>'),Tt=v('<span class="climb-type-tag svelte-yz0xxt"> </span>'),qt=v('<span class="notes-preview svelte-yz0xxt"> </span>'),zt=v('<span class="wall-tag svelte-yz0xxt"> </span>'),Ct=v('<span class="attempts-count svelte-yz0xxt"> </span>'),Ft=v('<div class="detail-row svelte-yz0xxt"><span class="label svelte-yz0xxt">Notes:</span> <p class="notes svelte-yz0xxt"> </p></div>'),Lt=v('<p class="empty-notes svelte-yz0xxt">No notes for this climb.</p>'),Et=v('<div class="climb-details svelte-yz0xxt"><!> <div class="tags svelte-yz0xxt"><span class="tag type svelte-yz0xxt"> </span> <span class="tag attempt-text svelte-yz0xxt"> </span></div></div>'),Gt=v('<div class="climb-header svelte-yz0xxt" role="button" tabindex="0"><div class="climb-main-info svelte-yz0xxt"><span> </span> <span class="climb-name svelte-yz0xxt"> </span> <!> <!> <!></div> <div class="climb-meta svelte-yz0xxt"><span><span class="icon svelte-yz0xxt"> </span> <!></span> <button class="icon-btn edit-btn svelte-yz0xxt" aria-label="Edit climb" title="Edit climb">‚úé</button> <button class="icon-btn delete-btn svelte-yz0xxt" aria-label="Delete climb" title="Delete climb">üóëÔ∏è</button> <span class="chevron svelte-yz0xxt"> </span></div></div> <!>',1),Ot=v("<div><!></div>");function At(ze,p){pa(p,!0);let r=Ra(p,"showClimbType",3,!1),m=k(!1),C=k(!1),D=k(""),f=k(""),z=k(""),w=k(1),B=k(""),Q=k(!1);function de(){e(C)||l(m,!e(m))}function _e(j){j.stopPropagation(),p.onDelete()}function re(j){j.stopPropagation(),l(D,p.climb.name,!0),l(f,p.climb.grade,!0),l(z,p.climb.attemptType,!0),l(w,p.climb.attemptsNum,!0),l(B,p.climb.notes,!0),l(Q,p.climb.isSport,!0),l(C,!0),l(m,!0)}function ae(j){j.stopPropagation(),l(C,!1)}function H(j){j.stopPropagation();const h={...p.climb,name:e(D),grade:e(f),attemptType:e(z),attemptsNum:e(w),notes:e(B),isSport:e(Q)};p.onUpdate(h),l(C,!1)}function ce(){(e(z)==="Flash"||e(z)==="Onsight")&&l(w,1)}const ue={Flash:"‚ö°",Onsight:"üëÅÔ∏è",Redpoint:"üî¥",Dogged:"üõ†Ô∏è",DNF:"‚ùå"},ie=["Flash","Onsight","Redpoint","Dogged","DNF"];var W=Ot();let le;var Se=t(W);{var xe=j=>{var h=Dt(),b=t(h),F=t(b);Ie(F);var M=s(F,2);Ie(M);var P=s(M,2);{var $=L=>{var pe=St(),oe=t(pe);Ie(oe),za(2),a(pe),$a(oe,()=>e(Q),ke=>l(Q,ke)),i(L,pe)};c(P,L=>{r()&&L($)})}a(b);var K=s(b,2),y=t(K);y.__change=ce,qe(y,21,()=>ie,Ce,(L,pe)=>{var oe=kt(),ke=t(oe,!0);a(oe);var E={};_(()=>{d(ke,e(pe)),E!==(E=e(pe))&&(oe.value=(oe.__value=e(pe))??"")}),i(L,oe)}),a(y);var O=s(y,2),x=s(t(O),2);Ie(x),a(O),a(K);var n=s(K,2),o=t(n);Za(o),a(n);var T=s(n,2),V=t(T);V.__click=ae;var X=s(V,2);X.__click=H,a(T),a(h),_(()=>x.disabled=e(z)==="Flash"||e(z)==="Onsight"),Me(F,()=>e(f),L=>l(f,L)),Me(M,()=>e(D),L=>l(D,L)),Sa(y,()=>e(z),L=>l(z,L)),Me(x,()=>e(w),L=>l(w,L)),Me(o,()=>e(B),L=>l(B,L)),i(j,h)},te=j=>{var h=Gt(),b=Ae(h);b.__click=de,b.__keydown=U=>(U.key==="Enter"||U.key===" ")&&de();var F=t(b),M=t(F);let P;var $=t(M,!0);a(M);var K=s(M,2),y=t(K,!0);a(K);var O=s(K,2);{var x=U=>{var g=Tt(),I=t(g,!0);a(g),_(()=>d(I,p.climb.isSport?"Sport":"Boulder")),i(U,g)};c(O,U=>{r()&&U(x)})}var n=s(O,2);{var o=U=>{var g=qt(),I=t(g);a(g),_(()=>d(I,`- ${p.climb.notes??""}`)),i(U,g)};c(n,U=>{!e(m)&&p.climb.notes&&U(o)})}var T=s(n,2);{var V=U=>{var g=zt(),I=t(g,!0);a(g),_(()=>d(I,p.climb.wall)),i(U,g)};c(T,U=>{p.climb.wall&&U(V)})}a(F);var X=s(F,2),L=t(X);let pe;var oe=t(L),ke=t(oe,!0);a(oe);var E=s(oe,2);{var N=U=>{var g=Ct(),I=t(g,!0);a(g),_(()=>d(I,p.climb.attemptsNum)),i(U,g)};c(E,U=>{p.climb.attemptType!=="Flash"&&p.climb.attemptType!=="Onsight"&&U(N)})}a(L);var fe=s(L,2);fe.__click=re;var we=s(fe,2);we.__click=_e;var Te=s(we,2),q=t(Te,!0);a(Te),a(X),a(b);var S=s(b,2);{var A=U=>{var g=Et(),I=t(g);{var ge=ne=>{var me=Ft(),De=s(t(me),2),Ge=t(De,!0);a(De),a(me),_(()=>d(Ge,p.climb.notes)),i(ne,me)},ee=ne=>{var me=Lt();i(ne,me)};c(I,ne=>{p.climb.notes?ne(ge):ne(ee,!1)})}var se=s(I,2),ve=t(se),Ee=t(ve,!0);a(ve);var be=s(ve,2),Fe=t(be,!0);a(be),a(se),a(g),_(()=>{d(Ee,p.climb.isSport?"Sport":"Boulder"),d(Fe,p.climb.attemptType)}),ra(3,g,()=>ua,()=>({duration:150})),i(U,g)};c(S,U=>{e(m)&&U(A)})}_(()=>{Qe(b,"aria-expanded",e(m)),P=sa(M,1,"grade-badge svelte-yz0xxt",null,P,{sport:p.climb.isSport}),d($,p.climb.grade),d(y,p.climb.name||"Unnamed Route"),pe=sa(L,1,"attempt-type svelte-yz0xxt",null,pe,{flash:p.climb.attemptType==="Flash"}),d(ke,ue[p.climb.attemptType]||p.climb.attemptType),d(q,e(m)?"‚ñ≤":"‚ñº")}),i(j,h)};c(Se,j=>{e(C)?j(xe):j(te,!1)})}a(W),_(()=>le=sa(W,1,"climb-entry svelte-yz0xxt",null,le,{expanded:e(m),editing:e(C)})),i(ze,W),_a()}oa(["change","click","keydown"]);var jt=v('<span class="stat svelte-7vqogn"> </span>'),Nt=v('<span class="status-icon pending svelte-7vqogn" title="Waiting to sync">üîÑ</span>'),It=v('<span class="status-icon error svelte-7vqogn" title="Sync error">‚ö†Ô∏è</span>'),Mt=v('<span class="chip svelte-7vqogn"> </span>'),Pt=v('<span class="text-none svelte-7vqogn">None</span>'),Rt=v('<div class="detail-item svelte-7vqogn"><span class="label svelte-7vqogn">Difficulty</span> <span class="value svelte-7vqogn"> </span></div>'),Bt=v('<span class="chip svelte-7vqogn"> </span>'),Vt=v('<span class="text-none svelte-7vqogn">None</span>'),Ut=v('<div class="detail-item svelte-7vqogn"><span class="label svelte-7vqogn">Category</span> <div class="value-chips svelte-7vqogn"><!></div></div>'),Wt=v('<span class="chip svelte-7vqogn"> </span>'),Ht=v('<span class="text-none svelte-7vqogn">None</span>'),Jt=v('<div class="detail-item svelte-7vqogn"><span class="label svelte-7vqogn">Focus</span> <div class="value-chips svelte-7vqogn"><!></div></div>'),Zt=v('<span class="chip svelte-7vqogn"> </span>'),$t=v('<span class="text-none svelte-7vqogn">None</span>'),Kt=v('<div class="detail-item svelte-7vqogn"><span class="label svelte-7vqogn">Energy System</span> <div class="value-chips svelte-7vqogn"><!></div></div>'),Xt=v('<span class="chip svelte-7vqogn"> </span>'),Yt=v('<span class="text-none svelte-7vqogn">None</span>'),Qt=v('<div class="detail-item svelte-7vqogn"><span class="label svelte-7vqogn">Wall</span> <div class="value-chips svelte-7vqogn"><!></div></div>'),es=v('<div class="metric svelte-7vqogn"><span class="label svelte-7vqogn">Open Grip</span> <div class="bar-container svelte-7vqogn"><div class="bar-fill svelte-7vqogn"></div></div> <span class="score svelte-7vqogn"> </span></div>'),as=v('<div class="metric svelte-7vqogn"><span class="label svelte-7vqogn">Crimp Grip</span> <div class="bar-container svelte-7vqogn"><div class="bar-fill svelte-7vqogn"></div></div> <span class="score svelte-7vqogn"> </span></div>'),ts=v('<div class="metric svelte-7vqogn"><span class="label svelte-7vqogn">Pinch Grip</span> <div class="bar-container svelte-7vqogn"><div class="bar-fill svelte-7vqogn"></div></div> <span class="score svelte-7vqogn"> </span></div>'),ss=v('<div class="metric svelte-7vqogn"><span class="label svelte-7vqogn">Sloper Grip</span> <div class="bar-container svelte-7vqogn"><div class="bar-fill svelte-7vqogn"></div></div> <span class="score svelte-7vqogn"> </span></div>'),rs=v('<div class="metric svelte-7vqogn"><span class="label svelte-7vqogn">Jug Grip</span> <div class="bar-container svelte-7vqogn"><div class="bar-fill svelte-7vqogn"></div></div> <span class="score svelte-7vqogn"> </span></div>'),is=v('<p class="no-climbs svelte-7vqogn">No climbs logged for this session.</p>'),ls=v('<div class="card-body svelte-7vqogn"><div class="details-grid svelte-7vqogn"><div class="detail-item svelte-7vqogn"><span class="label svelte-7vqogn">Training Type</span> <div class="value-chips svelte-7vqogn"><!></div></div> <!> <!> <!> <!> <!></div> <div class="metrics-container svelte-7vqogn"><div class="metric svelte-7vqogn"><span class="label svelte-7vqogn">Finger Load</span> <div class="bar-container svelte-7vqogn"><div class="bar-fill svelte-7vqogn"></div></div> <span class="score svelte-7vqogn"> </span></div> <div class="metric svelte-7vqogn"><span class="label svelte-7vqogn">Shoulder Load</span> <div class="bar-container svelte-7vqogn"><div class="bar-fill svelte-7vqogn"></div></div> <span class="score svelte-7vqogn"> </span></div> <div class="metric svelte-7vqogn"><span class="label svelte-7vqogn">Forearm Load</span> <div class="bar-container svelte-7vqogn"><div class="bar-fill svelte-7vqogn"></div></div> <span class="score svelte-7vqogn"> </span></div> <!> <!> <!> <!> <!></div> <div class="climbs-list svelte-7vqogn"><h4 class="svelte-7vqogn">Climbs</h4> <div class="climbs-container svelte-7vqogn"><!> <!></div></div></div>'),vs=v('<div><div class="card-header svelte-7vqogn" role="button" tabindex="0"><div class="header-main svelte-7vqogn"><div class="date-badge svelte-7vqogn"><span class="day svelte-7vqogn"> </span> <span class="month svelte-7vqogn"> </span></div> <div class="session-info svelte-7vqogn"><div class="session-text svelte-7vqogn"><h3 class="location svelte-7vqogn"> </h3> <div class="session-meta svelte-7vqogn"><span class="type-tag svelte-7vqogn"> </span> <span class="stat svelte-7vqogn"> </span> <!></div></div> <div class="load-summary svelte-7vqogn"><div class="load-badge finger svelte-7vqogn"> </div> <div class="load-badge shoulder svelte-7vqogn"> </div> <div class="load-badge forearm svelte-7vqogn"> </div></div></div></div> <div class="header-actions"><div class="header-status svelte-7vqogn"><!></div>  <button class="btn-icon delete-session" title="Delete Session">üóëÔ∏è</button> <span class="chevron svelte-7vqogn"> </span></div></div> <!></div>');function ns(ze,p){pa(p,!0);let r=Ra(p,"session",7),m=k(!1),C=k(!1);function D(){l(m,!e(m))}function f(){l(C,!0)}function z(q){const S=[...r().climbs];S.splice(q,1),Ia(r().id,{climbs:S}),p.onDelete()}function w(q,S){const A=[...r().climbs];A[q]=S,B(A)}async function B(q){if(Ia(r().id,{climbs:q}),r().climbs=q,Ka()){const S={date:r().date,location:r().location,customLocation:r().customLocation,climbingType:r().climbingType,trainingTypes:r().trainingTypes||[],difficulty:r().difficulty,categories:r().categories||[],energySystems:r().energySystems||[],techniqueFocuses:r().techniqueFocuses||[],wallAngles:r().wallAngles||[],fingerLoad:r().fingerLoad,shoulderLoad:r().shoulderLoad,forearmLoad:r().forearmLoad,openGrip:r().openGrip,crimpGrip:r().crimpGrip,pinchGrip:r().pinchGrip,sloperGrip:r().sloperGrip,jugGrip:r().jugGrip,climbs:q};try{const A=await et(r().id,S);A.ok?(Xa(r().id),r().syncStatus="synced"):(console.error("Failed to sync update:",A.error),Ma(r().id),r().syncStatus="error")}catch(A){console.error("Exception syncing update:",A),Ma(r().id),r().syncStatus="error"}}}let Q=na(()=>r().climbs?.length??0),de=na(()=>(r().climbs||[]).reduce((q,S)=>{const A=parseInt(S.grade.replace(/\D/g,""))||0,U=parseInt(q.replace(/\D/g,""))||0;return A>U?S.grade:q},"V0"));var _e=vs();let re;var ae=t(_e);ae.__click=D,ae.__keydown=q=>q.key==="Enter"&&D();var H=t(ae),ce=t(H),ue=t(ce),ie=t(ue,!0);a(ue);var W=s(ue,2),le=t(W,!0);a(W),a(ce);var Se=s(ce,2),xe=t(Se),te=t(xe),j=t(te,!0);a(te);var h=s(te,2),b=t(h),F=t(b,!0);a(b);var M=s(b,2),P=t(M);a(M);var $=s(M,2);{var K=q=>{var S=jt(),A=t(S);a(S),_(()=>d(A,`Max: ${e(de)??""}`)),i(q,S)};c($,q=>{e(Q)>0&&q(K)})}a(h),a(xe);var y=s(xe,2),O=t(y),x=t(O,!0);a(O);var n=s(O,2),o=t(n,!0);a(n);var T=s(n,2),V=t(T,!0);a(T),a(y),a(Se),a(H);var X=s(H,2),L=t(X),pe=t(L);{var oe=q=>{var S=Nt();i(q,S)},ke=q=>{var S=Ye(),A=Ae(S);{var U=g=>{var I=It();i(g,I)};c(A,g=>{r().syncStatus==="error"&&g(U)},!0)}i(q,S)};c(pe,q=>{r().syncStatus==="pending"?q(oe):q(ke,!1)})}a(L);var E=s(L,2);E.__click=q=>{q.stopPropagation(),f()};var N=s(E,2),fe=t(N,!0);a(N),a(X),a(ae);var we=s(ae,2);{var Te=q=>{var S=ls(),A=t(S),U=t(A),g=s(t(U),2),I=t(g);{var ge=Z=>{var J=Ye(),u=Ae(J);qe(u,17,()=>r().trainingTypes,Ce,(G,R)=>{var he=Mt(),Y=t(he,!0);a(he),_(()=>d(Y,e(R))),i(G,he)}),i(Z,J)},ee=Z=>{var J=Pt();i(Z,J)};c(I,Z=>{r().trainingTypes&&r().trainingTypes.length>0&&!r().trainingTypes.includes("None")?Z(ge):Z(ee,!1)})}a(g),a(U);var se=s(U,2);{var ve=Z=>{var J=Rt(),u=s(t(J),2),G=t(u,!0);a(u),a(J),_(()=>d(G,r().difficulty)),i(Z,J)};c(se,Z=>{r().difficulty&&Z(ve)})}var Ee=s(se,2);{var be=Z=>{var J=Ut(),u=s(t(J),2),G=t(u);{var R=Y=>{var ye=Ye(),Le=Ae(ye);qe(Le,17,()=>r().categories,Ce,(Ve,ma)=>{var Ue=Bt(),ha=t(Ue,!0);a(Ue),_(()=>d(ha,e(ma))),i(Ve,Ue)}),i(Y,ye)},he=Y=>{var ye=Vt();i(Y,ye)};c(G,Y=>{r().categories.length>0&&!r().categories.includes("None")?Y(R):Y(he,!1)})}a(u),a(J),i(Z,J)};c(Ee,Z=>{r().categories?.length&&Z(be)})}var Fe=s(Ee,2);{var ne=Z=>{var J=Jt(),u=s(t(J),2),G=t(u);{var R=Y=>{var ye=Ye(),Le=Ae(ye);qe(Le,17,()=>r().techniqueFocuses,Ce,(Ve,ma)=>{var Ue=Wt(),ha=t(Ue,!0);a(Ue),_(()=>d(ha,e(ma))),i(Ve,Ue)}),i(Y,ye)},he=Y=>{var ye=Ht();i(Y,ye)};c(G,Y=>{r().techniqueFocuses.length>0&&!r().techniqueFocuses.includes("None")?Y(R):Y(he,!1)})}a(u),a(J),i(Z,J)};c(Fe,Z=>{r().techniqueFocuses?.length&&Z(ne)})}var me=s(Fe,2);{var De=Z=>{var J=Kt(),u=s(t(J),2),G=t(u);{var R=Y=>{var ye=Ye(),Le=Ae(ye);qe(Le,17,()=>r().energySystems,Ce,(Ve,ma)=>{var Ue=Zt(),ha=t(Ue,!0);a(Ue),_(()=>d(ha,e(ma))),i(Ve,Ue)}),i(Y,ye)},he=Y=>{var ye=$t();i(Y,ye)};c(G,Y=>{r().energySystems.length>0&&!r().energySystems.includes("None")?Y(R):Y(he,!1)})}a(u),a(J),i(Z,J)};c(me,Z=>{r().energySystems?.length&&Z(De)})}var Ge=s(me,2);{var ea=Z=>{var J=Qt(),u=s(t(J),2),G=t(u);{var R=Y=>{var ye=Ye(),Le=Ae(ye);qe(Le,17,()=>r().wallAngles,Ce,(Ve,ma)=>{var Ue=Xt(),ha=t(Ue,!0);a(Ue),_(()=>d(ha,e(ma))),i(Ve,Ue)}),i(Y,ye)},he=Y=>{var ye=Yt();i(Y,ye)};c(G,Y=>{r().wallAngles.length>0&&!r().wallAngles.includes("None")?Y(R):Y(he,!1)})}a(u),a(J),i(Z,J)};c(Ge,Z=>{r().wallAngles?.length&&Z(ea)})}a(A);var Ke=s(A,2),je=t(Ke),We=s(t(je),2),Ne=t(We);a(We);var Pe=s(We,2),da=t(Pe);a(Pe),a(je);var Xe=s(je,2),fa=s(t(Xe),2),ia=t(fa);a(fa);var la=s(fa,2),ga=t(la);a(la),a(Xe);var Oe=s(Xe,2),He=s(t(Oe),2),Je=t(He);a(He);var aa=s(He,2),Re=t(aa);a(aa),a(Oe);var Be=s(Oe,2);{var va=Z=>{var J=es(),u=s(t(J),2),G=t(u);a(u);var R=s(u,2),he=t(R);a(R),a(J),_(()=>{ta(G,`width: ${r().openGrip/5*100}%`),d(he,`${r().openGrip??""}/5`)}),i(Z,J)};c(Be,Z=>{r().openGrip&&Z(va)})}var Ze=s(Be,2);{var Ca=Z=>{var J=as(),u=s(t(J),2),G=t(u);a(u);var R=s(u,2),he=t(R);a(R),a(J),_(()=>{ta(G,`width: ${r().crimpGrip/5*100}%`),d(he,`${r().crimpGrip??""}/5`)}),i(Z,J)};c(Ze,Z=>{r().crimpGrip&&Z(Ca)})}var ya=s(Ze,2);{var ka=Z=>{var J=ts(),u=s(t(J),2),G=t(u);a(u);var R=s(u,2),he=t(R);a(R),a(J),_(()=>{ta(G,`width: ${r().pinchGrip/5*100}%`),d(he,`${r().pinchGrip??""}/5`)}),i(Z,J)};c(ya,Z=>{r().pinchGrip&&Z(ka)})}var xa=s(ya,2);{var Da=Z=>{var J=ss(),u=s(t(J),2),G=t(u);a(u);var R=s(u,2),he=t(R);a(R),a(J),_(()=>{ta(G,`width: ${r().sloperGrip/5*100}%`),d(he,`${r().sloperGrip??""}/5`)}),i(Z,J)};c(xa,Z=>{r().sloperGrip&&Z(Da)})}var Fa=s(xa,2);{var La=Z=>{var J=rs(),u=s(t(J),2),G=t(u);a(u);var R=s(u,2),he=t(R);a(R),a(J),_(()=>{ta(G,`width: ${r().jugGrip/5*100}%`),d(he,`${r().jugGrip??""}/5`)}),i(Z,J)};c(Fa,Z=>{r().jugGrip&&Z(La)})}a(Ke);var Ta=s(Ke,2),$e=s(t(Ta),2),ca=t($e);qe(ca,17,()=>r().climbs||[],Ce,(Z,J,u)=>{{let G=na(()=>r().climbingType==="Mixed");At(Z,{get climb(){return e(J)},onDelete:()=>z(u),onUpdate:R=>w(u,R),get showClimbType(){return e(G)}})}});var Ea=s(ca,2);{var Ga=Z=>{var J=is();i(Z,J)};c(Ea,Z=>{(r().climbs||[]).length===0&&Z(Ga)})}a($e),a(Ta),a(S),_(()=>{ta(Ne,`width: ${r().fingerLoad/5*100}%`),d(da,`${r().fingerLoad??""}/5`),ta(ia,`width: ${r().shoulderLoad/5*100}%`),d(ga,`${r().shoulderLoad??""}/5`),ta(Je,`width: ${r().forearmLoad/5*100}%`),d(Re,`${r().forearmLoad??""}/5`)}),ra(3,S,()=>ua,()=>({duration:150})),i(q,S)};c(we,q=>{e(m)&&q(Te)})}a(_e),_((q,S)=>{re=sa(_e,1,"session-card svelte-7vqogn",null,re,{expanded:e(m)}),Qe(ae,"aria-expanded",e(m)),d(ie,q),d(le,S),d(j,r().location),d(F,r().climbingType),d(P,`${e(Q)??""} climbs`),Qe(O,"title",`Finger Load: ${r().fingerLoad??""}`),d(x,r().fingerLoad),Qe(n,"title",`Shoulder Load: ${r().shoulderLoad??""}`),d(o,r().shoulderLoad),Qe(T,"title",`Forearm Load: ${r().forearmLoad??""}`),d(V,r().forearmLoad),d(fe,e(m)?"‚ñ≤":"‚ñº")},[()=>new Date(r().date).getDate(),()=>new Date(r().date).toLocaleDateString("en-GB",{month:"short"})]),i(ze,_e),_a()}oa(["click","keydown"]);var os=v('<div class="legend-item svelte-11p9lqi"><span class="l-icon svelte-11p9lqi"> </span> <span class="l-label svelte-11p9lqi"> </span></div>'),ds=v('<div class="legend-content svelte-11p9lqi"><div class="legend-grid svelte-11p9lqi"></div></div>'),cs=v('<div class="legend-container svelte-11p9lqi"><button class="legend-toggle svelte-11p9lqi"><span class="icon">‚ÑπÔ∏è</span> <span class="text">Icon Legend</span> <span class="chevron svelte-11p9lqi"> </span></button> <!></div>');function Ya(ze){let p=k(!1);const r=[{icon:"üëÅÔ∏è",label:"Onsight"},{icon:"‚ö°",label:"Flash"},{icon:"üî¥",label:"Redpoint"},{icon:"üõ†Ô∏è",label:"Dogged"},{icon:"‚ùå",label:"DNF"}];var m=cs(),C=t(m);C.__click=()=>l(p,!e(p));var D=s(t(C),4),f=t(D,!0);a(D),a(C);var z=s(C,2);{var w=B=>{var Q=ds(),de=t(Q);qe(de,21,()=>r,Ce,(_e,re)=>{var ae=os(),H=t(ae),ce=t(H,!0);a(H);var ue=s(H,2),ie=t(ue,!0);a(ue),a(ae),_(()=>{d(ce,e(re).icon),d(ie,e(re).label)}),i(_e,ae)}),a(de),a(Q),ra(3,Q,()=>ua),i(B,Q)};c(z,B=>{e(p)&&B(w)})}a(m),_(()=>{Qe(C,"aria-expanded",e(p)),d(f,e(p)?"‚ñº":"‚ñ∂")}),i(ze,m)}oa(["click"]);function Ha(ze,p){if(!ze||ze.length===0){alert("No data to export");return}const r=Array.from(new Set(ze.flatMap(Object.keys))),m=[r.join(","),...ze.map(f=>r.map(z=>{let w=f[z];if(w==null)return"";if(typeof w=="object"){if(w instanceof Date)return w.toISOString();w=JSON.stringify(w).replace(/"/g,'""')}else typeof w=="string"&&(w=w.replace(/"/g,'""'));return typeof w=="string"&&(w.includes(",")||w.includes('"')||w.includes(`
`))?`"${w}"`:w}).join(","))].join(`
`),C=new Blob([m],{type:"text/csv;charset=utf-8;"}),D=document.createElement("a");if(D.download!==void 0){const f=URL.createObjectURL(C);D.setAttribute("href",f),D.setAttribute("download",p.endsWith(".csv")?p:`${p}.csv`),D.style.visibility="hidden",document.body.appendChild(D),D.click(),document.body.removeChild(D)}}var ps=v('<span class="spinner svelte-14fqz8w"></span> Fetching...',1),_s=v('<div class="error-banner svelte-14fqz8w"> </div>'),us=v('<small class="svelte-14fqz8w">Try adjusting your filters.</small>'),fs=v('<div class="empty-state svelte-14fqz8w"><p class="svelte-14fqz8w">No indoor climbing sessions found.</p> <!></div>'),gs=v('<div class="load-more-container svelte-14fqz8w"><button class="load-more-btn svelte-14fqz8w"> </button></div>'),ms=v('<div class="view-container svelte-14fqz8w"><div class="view-header svelte-14fqz8w"><h2 class="view-title svelte-14fqz8w">üßó Indoor Climbing History</h2> <div class="header-actions svelte-14fqz8w"><button class="action-btn secondary svelte-14fqz8w" title="Export filtered data to CSV">üì• Export</button> <button class="action-btn svelte-14fqz8w" title="Fetch data from cloud"><!></button></div></div> <!> <!> <div class="info-bar svelte-14fqz8w"><div class="legend-wrapper svelte-14fqz8w"><!></div> <div class="load-key svelte-14fqz8w"><span class="key-label svelte-14fqz8w">Load:</span> <div class="key-item svelte-14fqz8w"><span class="dot finger svelte-14fqz8w"></span> Finger</div> <div class="key-item svelte-14fqz8w"><span class="dot shoulder svelte-14fqz8w"></span> Shoulder</div> <div class="key-item svelte-14fqz8w"><span class="dot forearm svelte-14fqz8w"></span> Forearm</div></div></div> <div class="sessions-list"><!> <!> <!></div></div>');function hs(ze,p){pa(p,!0);let r=k(ba([])),m=k(ba([])),C=k(!1),D=k(""),f=k(ba({startDate:"",endDate:"",location:"",climbingType:"",sessionType:"",grade:""})),z=k(20);const w=20;Ua(()=>{B()});function B(){const n=Oa("indoor_climb");l(r,n.sort((o,T)=>new Date(T.date).getTime()-new Date(o.date).getTime()),!0),re()}async function Q(){l(C,!0),l(D,"");try{await ja();const n=await at();n.ok&&n.data?de(n.data):l(D,n.error||"Failed to fetch data",!0)}catch(n){l(D,n instanceof Error?n.message:"Unknown error",!0)}finally{l(C,!1)}}function de(n){const o=n.map(V=>({...V,activityType:"indoor_climb",createdAt:new Date().toISOString(),updatedAt:new Date().toISOString(),syncStatus:"synced",syncedAt:new Date().toISOString(),openGrip:0,crimpGrip:0,pinchGrip:0,sloperGrip:0,jugGrip:0}));Na(o);const T=Oa("indoor_climb");l(r,T.sort((V,X)=>new Date(X.date).getTime()-new Date(V.date).getTime()),!0),re()}function _e(n){l(f,n,!0),re()}function re(){l(z,w),l(m,e(r).filter(n=>{if(e(f).startDate&&n.date<e(f).startDate||e(f).endDate&&n.date>e(f).endDate||e(f).location&&n.location!==e(f).location)return!1;if(e(f).climbingType&&(n.climbingType==="Leading"?"Sport":n.climbingType)!==e(f).climbingType)if(n.climbingType==="Mixed")if(e(f).climbingType==="Bouldering"){if(!n.climbs.some(T=>!T.isSport))return!1}else if(e(f).climbingType==="Sport"){if(!n.climbs.some(T=>T.isSport))return!1}else return!1;else return!1;if(e(f).sessionType&&!n.trainingTypes?.includes(e(f).sessionType))return!1;if(e(f).grade){const o=e(f).grade.trim().toLowerCase();if(!n.climbs.some(V=>V.grade.trim().toLowerCase()===o))return!1}return!0}),!0)}function ae(){l(z,e(z)+w)}var H=ms(),ce=t(H),ue=s(t(ce),2),ie=t(ue);ie.__click=()=>Ha(e(m),"indoor_climbs");var W=s(ie,2);W.__click=Q;var le=t(W);{var Se=n=>{var o=ps();za(),i(n,o)},xe=n=>{var o=qa("‚òÅÔ∏è Fetch Data");i(n,o)};c(le,n=>{e(C)?n(Se):n(xe,!1)})}a(W),a(ue),a(ce);var te=s(ce,2);{var j=n=>{var o=_s(),T=t(o,!0);a(o),_(()=>d(T,e(D))),ra(3,o,()=>ua),i(n,o)};c(te,n=>{e(D)&&n(j)})}var h=s(te,2);wt(h,{onFilterParamsChange:_e});var b=s(h,2),F=t(b),M=t(F);Ya(M),a(F),za(2),a(b);var P=s(b,2),$=t(P);qe($,17,()=>e(m).slice(0,e(z)),n=>n.id,(n,o)=>{ns(n,{get session(){return e(o)},onDelete:B})});var K=s($,2);{var y=n=>{var o=fs(),T=s(t(o),2);{var V=X=>{var L=us();i(X,L)};c(T,X=>{e(r).length>0&&X(V)})}a(o),i(n,o)};c(K,n=>{e(m).length===0&&n(y)})}var O=s(K,2);{var x=n=>{var o=gs(),T=t(o);T.__click=ae;var V=t(T);a(T),a(o),_(()=>d(V,`Load More (${e(m).length-e(z)} remaining)`)),i(n,o)};c(O,n=>{e(z)<e(m).length&&n(x)})}a(P),a(H),_(()=>W.disabled=e(C)),i(ze,H),_a()}oa(["click"]);var bs=v('<span class="chevron svelte-1frtlim">‚ñ≤</span>'),ys=v('<span class="chevron svelte-1frtlim">‚ñº</span>'),xs=v('<div class="input-with-action svelte-1frtlim"><input type="text" id="area-filter-text" placeholder="Type area name..." class="flat-left svelte-1frtlim"/> <button class="action-btn flat-right svelte-1frtlim" title="Back to list">‚úï</button></div>'),ws=v("<option> </option>"),Ss=v('<select id="area-filter" class="svelte-1frtlim"><option>All Areas</option><!><option>Other (Manual Entry)</option></select>'),ks=v('<div class="input-with-action svelte-1frtlim"><input type="text" id="crag-filter-text" placeholder="Type crag name..." class="flat-left svelte-1frtlim"/> <button class="action-btn flat-right svelte-1frtlim" title="Back to list">‚úï</button></div>'),Ds=v("<option> </option>"),Ts=v('<select id="crag-filter" class="svelte-1frtlim"><option>All Crags</option><!><option>Other (Manual Entry)</option></select>'),qs=v('<input type="text" id="crag-filter-text" class="svelte-1frtlim"/>'),zs=v("<option> </option>"),Cs=v("<option> </option>"),Fs=v('<div class="filter-body svelte-1frtlim"><div class="filter-grid svelte-1frtlim"><div class="filter-item svelte-1frtlim"><label for="start-date" class="svelte-1frtlim">Start Date</label> <input type="date" id="start-date" class="svelte-1frtlim"/></div> <div class="filter-item svelte-1frtlim"><label for="end-date" class="svelte-1frtlim">End Date</label> <input type="date" id="end-date" class="svelte-1frtlim"/></div> <div class="filter-item svelte-1frtlim"><label for="area-filter" class="svelte-1frtlim">Area</label> <!></div> <div class="filter-item svelte-1frtlim"><label for="crag-filter" class="svelte-1frtlim">Crag</label> <!></div> <div class="filter-item svelte-1frtlim"><label for="climbing-type-filter" class="svelte-1frtlim">Climb Type</label> <select id="climbing-type-filter" class="svelte-1frtlim"><option>Any Type</option><!></select></div> <div class="filter-item svelte-1frtlim"><label for="session-type-filter" class="svelte-1frtlim">Session Type</label> <select id="session-type-filter" class="svelte-1frtlim"><option>Any Type</option><!></select></div> <div class="filter-item svelte-1frtlim"><label for="grade-filter" class="svelte-1frtlim">Grade (Exact)</label> <input type="text" id="grade-filter" placeholder="e.g. 7a" class="svelte-1frtlim"/></div></div> <div class="filter-actions svelte-1frtlim"><button class="reset-btn svelte-1frtlim">Reset Filters</button></div></div>'),Ls=v('<div class="filter-container svelte-1frtlim"><button class="filter-header svelte-1frtlim"><div class="header-content svelte-1frtlim"><span class="icon svelte-1frtlim">üîç</span> <span class="title svelte-1frtlim">Filters</span> <!></div></button> <!></div>');function Es(ze,p){pa(p,!0);const r=tt(),m=["Bouldering","Sport","Mixed","Trad"],C=["Projecting","Onsighting","Campusing","Repeaters","Fun","Volume"];let D=k(!1),f=k(""),z=k(""),w=k(""),B=k(""),Q=k(""),de=k(""),_e=k(""),re=k(!1),ae=k(!1),H=na(()=>e(w)&&e(w)!=="Other"?st(e(w)):[]);function ce(){e(w)==="Other"?(l(re,!0),l(w,"")):l(re,!1),l(B,""),l(ae,!1),le()}function ue(){e(B)==="Other"?(l(ae,!0),l(B,"")):l(ae,!1),le()}function ie(){l(D,!e(D))}function W(){l(f,""),l(z,""),l(w,""),l(B,""),l(Q,""),l(de,""),l(_e,""),l(re,!1),l(ae,!1),le()}function le(){p.onFilterParamsChange({startDate:e(f),endDate:e(z),area:e(w),crag:e(B),climbingType:e(Q),sessionType:e(de),grade:e(_e)})}var Se=Ls(),xe=t(Se);xe.__click=ie;var te=t(xe),j=s(t(te),4);{var h=P=>{var $=bs();i(P,$)},b=P=>{var $=ys();i(P,$)};c(j,P=>{e(D)?P(h):P(b,!1)})}a(te),a(xe);var F=s(xe,2);{var M=P=>{var $=Fs(),K=t($),y=t(K),O=s(t(y),2);Ie(O),O.__change=le,a(y);var x=s(y,2),n=s(t(x),2);Ie(n),n.__change=le,a(x);var o=s(x,2),T=s(t(o),2);{var V=ee=>{var se=xs(),ve=t(se);Ie(ve),ve.__input=le;var Ee=s(ve,2);Ee.__click=()=>{l(re,!1),l(w,""),le()},a(se),Me(ve,()=>e(w),be=>l(w,be)),i(ee,se)},X=ee=>{var se=Ss();se.__change=ce;var ve=t(se);ve.value=ve.__value="";var Ee=s(ve);qe(Ee,17,()=>r,Ce,(Fe,ne)=>{var me=ws(),De=t(me,!0);a(me);var Ge={};_(()=>{d(De,e(ne)),Ge!==(Ge=e(ne))&&(me.value=(me.__value=e(ne))??"")}),i(Fe,me)});var be=s(Ee);be.value=be.__value="Other",a(se),Sa(se,()=>e(w),Fe=>l(w,Fe)),i(ee,se)};c(T,ee=>{e(re)?ee(V):ee(X,!1)})}a(o);var L=s(o,2),pe=s(t(L),2);{var oe=ee=>{var se=ks(),ve=t(se);Ie(ve),ve.__input=le;var Ee=s(ve,2);Ee.__click=()=>{l(ae,!1),l(B,""),le()},a(se),Me(ve,()=>e(B),be=>l(B,be)),i(ee,se)},ke=ee=>{var se=Ye(),ve=Ae(se);{var Ee=Fe=>{var ne=Ts();ne.__change=ue;var me=t(ne);me.value=me.__value="";var De=s(me);qe(De,17,()=>e(H),Ce,(ea,Ke)=>{var je=Ds(),We=t(je,!0);a(je);var Ne={};_(()=>{d(We,e(Ke)),Ne!==(Ne=e(Ke))&&(je.value=(je.__value=e(Ke))??"")}),i(ea,je)});var Ge=s(De);Ge.value=Ge.__value="Other",a(ne),Sa(ne,()=>e(B),ea=>l(B,ea)),i(Fe,ne)},be=Fe=>{var ne=qs();Ie(ne),ne.__input=le,_(()=>{Qe(ne,"placeholder",e(w)?"Filter crag...":"Select area first"),ne.disabled=!e(re)&&!e(w)}),Me(ne,()=>e(B),me=>l(B,me)),i(Fe,ne)};c(ve,Fe=>{!e(re)&&e(w)&&e(H).length>0?Fe(Ee):Fe(be,!1)},!0)}i(ee,se)};c(pe,ee=>{e(ae)?ee(oe):ee(ke,!1)})}a(L);var E=s(L,2),N=s(t(E),2);N.__change=le;var fe=t(N);fe.value=fe.__value="";var we=s(fe);qe(we,17,()=>m,Ce,(ee,se)=>{var ve=zs(),Ee=t(ve,!0);a(ve);var be={};_(()=>{d(Ee,e(se)),be!==(be=e(se))&&(ve.value=(ve.__value=e(se))??"")}),i(ee,ve)}),a(N),a(E);var Te=s(E,2),q=s(t(Te),2);q.__change=le;var S=t(q);S.value=S.__value="";var A=s(S);qe(A,17,()=>C,Ce,(ee,se)=>{var ve=Cs(),Ee=t(ve,!0);a(ve);var be={};_(()=>{d(Ee,e(se)),be!==(be=e(se))&&(ve.value=(ve.__value=e(se))??"")}),i(ee,ve)}),a(q),a(Te);var U=s(Te,2),g=s(t(U),2);Ie(g),g.__input=le,a(U),a(K);var I=s(K,2),ge=t(I);ge.__click=W,a(I),a($),Me(O,()=>e(f),ee=>l(f,ee)),Me(n,()=>e(z),ee=>l(z,ee)),Sa(N,()=>e(Q),ee=>l(Q,ee)),Sa(q,()=>e(de),ee=>l(de,ee)),Me(g,()=>e(_e),ee=>l(_e,ee)),ra(3,$,()=>ua,()=>({duration:200})),i(P,$)};c(F,P=>{e(D)&&P(M)})}a(Se),_(()=>Qe(xe,"aria-expanded",e(D))),i(ze,Se),_a()}oa(["click","change","input"]);var Gs=v('<label class="type-toggle svelte-1k6anfh"><input type="checkbox"/> <span>Sport?</span></label>'),Os=v("<option> </option>"),As=v('<div class="edit-form svelte-1k6anfh"><div class="edit-row main svelte-1k6anfh"><input type="text" class="edit-input grade svelte-1k6anfh" placeholder="Grade"/> <input type="text" class="edit-input name svelte-1k6anfh" placeholder="Route Name"/> <!></div> <div class="edit-row meta svelte-1k6anfh"><select class="edit-select svelte-1k6anfh"></select> <div class="attempts-input-wrapper svelte-1k6anfh"><span>#</span> <input type="number" min="1" class="edit-input num svelte-1k6anfh"/></div></div> <div class="edit-row notes svelte-1k6anfh"><textarea class="edit-input notes-area svelte-1k6anfh" placeholder="Notes..."></textarea></div> <div class="edit-actions svelte-1k6anfh"><button class="action-btn cancel svelte-1k6anfh">Cancel</button> <button class="action-btn save svelte-1k6anfh">Save</button></div></div>'),js=v('<span class="climb-type-tag svelte-1k6anfh"> </span>'),Ns=v('<span class="notes-preview svelte-1k6anfh"> </span>'),Is=v('<span class="attempts-count svelte-1k6anfh"> </span>'),Ms=v('<div class="detail-row svelte-1k6anfh"><span class="label svelte-1k6anfh">Notes:</span> <p class="notes svelte-1k6anfh"> </p></div>'),Ps=v('<p class="empty-notes svelte-1k6anfh">No notes for this climb.</p>'),Rs=v('<span class="tag wall-tag svelte-1k6anfh"> </span>'),Bs=v('<div class="climb-details svelte-1k6anfh"><!> <div class="tags svelte-1k6anfh"><span class="tag type svelte-1k6anfh"> </span> <!> <span class="tag attempt-text svelte-1k6anfh"> </span></div></div>'),Vs=v('<div class="climb-header svelte-1k6anfh" role="button" tabindex="0"><div class="climb-main-info svelte-1k6anfh"><span> </span> <span class="climb-name svelte-1k6anfh"> </span> <!> <!></div> <div class="climb-meta svelte-1k6anfh"><span><span class="icon svelte-1k6anfh"> </span> <!></span> <button class="icon-btn edit-btn svelte-1k6anfh" aria-label="Edit climb" title="Edit climb">‚úé</button> <button class="icon-btn delete-btn svelte-1k6anfh" aria-label="Delete climb" title="Delete climb">üóëÔ∏è</button> <span class="chevron svelte-1k6anfh"> </span></div></div> <!>',1),Us=v("<div><!></div>");function Ws(ze,p){pa(p,!0);let r=Ra(p,"showClimbType",3,!1),m=k(!1),C=k(!1),D=k(""),f=k(""),z=k(""),w=k(1),B=k(""),Q=k(!1);function de(){e(C)||l(m,!e(m))}function _e(j){j.stopPropagation(),p.onDelete()}function re(j){j.stopPropagation(),l(D,p.climb.name,!0),l(f,p.climb.grade,!0),l(z,p.climb.attemptType,!0),l(w,p.climb.attemptsNum,!0),l(B,p.climb.notes,!0),l(Q,p.climb.isSport,!0),l(C,!0),l(m,!0)}function ae(j){j.stopPropagation(),l(C,!1)}function H(j){j.stopPropagation();const h={...p.climb,name:e(D),grade:e(f),attemptType:e(z),attemptsNum:e(w),notes:e(B),isSport:e(Q)};p.onUpdate(h),l(C,!1)}function ce(){(e(z)==="Flash"||e(z)==="Onsight")&&l(w,1)}const ue={Flash:"‚ö°",Onsight:"üëÅÔ∏è",Redpoint:"üî¥",Dogged:"üõ†Ô∏è",DNF:"‚ùå"},ie=["Flash","Onsight","Redpoint","Dogged","DNF"];var W=Us();let le;var Se=t(W);{var xe=j=>{var h=As(),b=t(h),F=t(b);Ie(F);var M=s(F,2);Ie(M);var P=s(M,2);{var $=L=>{var pe=Gs(),oe=t(pe);Ie(oe),za(2),a(pe),$a(oe,()=>e(Q),ke=>l(Q,ke)),i(L,pe)};c(P,L=>{r()&&L($)})}a(b);var K=s(b,2),y=t(K);y.__change=ce,qe(y,21,()=>ie,Ce,(L,pe)=>{var oe=Os(),ke=t(oe,!0);a(oe);var E={};_(()=>{d(ke,e(pe)),E!==(E=e(pe))&&(oe.value=(oe.__value=e(pe))??"")}),i(L,oe)}),a(y);var O=s(y,2),x=s(t(O),2);Ie(x),a(O),a(K);var n=s(K,2),o=t(n);Za(o),a(n);var T=s(n,2),V=t(T);V.__click=ae;var X=s(V,2);X.__click=H,a(T),a(h),_(()=>x.disabled=e(z)==="Flash"||e(z)==="Onsight"),Me(F,()=>e(f),L=>l(f,L)),Me(M,()=>e(D),L=>l(D,L)),Sa(y,()=>e(z),L=>l(z,L)),Me(x,()=>e(w),L=>l(w,L)),Me(o,()=>e(B),L=>l(B,L)),i(j,h)},te=j=>{var h=Vs(),b=Ae(h);b.__click=de,b.__keydown=S=>(S.key==="Enter"||S.key===" ")&&de();var F=t(b),M=t(F);let P;var $=t(M,!0);a(M);var K=s(M,2),y=t(K,!0);a(K);var O=s(K,2);{var x=S=>{var A=js(),U=t(A,!0);a(A),_(()=>d(U,p.climb.isSport?"Sport":"Boulder")),i(S,A)};c(O,S=>{r()&&S(x)})}var n=s(O,2);{var o=S=>{var A=Ns(),U=t(A);a(A),_(()=>d(U,`- ${p.climb.notes??""}`)),i(S,A)};c(n,S=>{!e(m)&&p.climb.notes&&S(o)})}a(F);var T=s(F,2),V=t(T);let X;var L=t(V),pe=t(L,!0);a(L);var oe=s(L,2);{var ke=S=>{var A=Is(),U=t(A,!0);a(A),_(()=>d(U,p.climb.attemptsNum)),i(S,A)};c(oe,S=>{p.climb.attemptType!=="Flash"&&p.climb.attemptType!=="Onsight"&&S(ke)})}a(V);var E=s(V,2);E.__click=re;var N=s(E,2);N.__click=_e;var fe=s(N,2),we=t(fe,!0);a(fe),a(T),a(b);var Te=s(b,2);{var q=S=>{var A=Bs(),U=t(A);{var g=ne=>{var me=Ms(),De=s(t(me),2),Ge=t(De,!0);a(De),a(me),_(()=>d(Ge,p.climb.notes)),i(ne,me)},I=ne=>{var me=Ps();i(ne,me)};c(U,ne=>{p.climb.notes?ne(g):ne(I,!1)})}var ge=s(U,2),ee=t(ge),se=t(ee,!0);a(ee);var ve=s(ee,2);{var Ee=ne=>{var me=Rs(),De=t(me,!0);a(me),_(()=>d(De,p.climb.wall)),i(ne,me)};c(ve,ne=>{p.climb.wall&&ne(Ee)})}var be=s(ve,2),Fe=t(be,!0);a(be),a(ge),a(A),_(()=>{d(se,p.climb.isSport?"Sport":"Boulder"),d(Fe,p.climb.attemptType)}),ra(3,A,()=>ua,()=>({duration:150})),i(S,A)};c(Te,S=>{e(m)&&S(q)})}_(()=>{Qe(b,"aria-expanded",e(m)),P=sa(M,1,"grade-badge svelte-1k6anfh",null,P,{sport:p.climb.isSport}),d($,p.climb.grade),d(y,p.climb.name||"Unnamed Route"),X=sa(V,1,"attempt-type svelte-1k6anfh",null,X,{flash:p.climb.attemptType==="Flash"}),d(pe,ue[p.climb.attemptType]||p.climb.attemptType),d(we,e(m)?"‚ñ≤":"‚ñº")}),i(j,h)};c(Se,j=>{e(C)?j(xe):j(te,!1)})}a(W),_(()=>le=sa(W,1,"climb-entry svelte-1k6anfh",null,le,{expanded:e(m),editing:e(C)})),i(ze,W),_a()}oa(["change","click","keydown"]);var Hs=v('<div class="sector-meta"> </div>'),Js=v('<span class="stat svelte-d5hg2r"> </span>'),Zs=v('<span class="status-icon pending svelte-d5hg2r" title="Waiting to sync">üîÑ</span>'),$s=v('<span class="status-icon error svelte-d5hg2r" title="Sync error">‚ö†Ô∏è</span>'),Ks=v('<span class="chip svelte-d5hg2r"> </span>'),Xs=v('<span class="text-none svelte-d5hg2r">None</span>'),Ys=v('<div class="detail-item svelte-d5hg2r"><span class="label svelte-d5hg2r">Difficulty</span> <span class="value svelte-d5hg2r"> </span></div>'),Qs=v('<span class="chip svelte-d5hg2r"> </span>'),er=v('<span class="text-none svelte-d5hg2r">None</span>'),ar=v('<div class="detail-item svelte-d5hg2r"><span class="label svelte-d5hg2r">Category</span> <div class="value-chips svelte-d5hg2r"><!></div></div>'),tr=v('<span class="chip svelte-d5hg2r"> </span>'),sr=v('<span class="text-none svelte-d5hg2r">None</span>'),rr=v('<div class="detail-item svelte-d5hg2r"><span class="label svelte-d5hg2r">Focus</span> <div class="value-chips svelte-d5hg2r"><!></div></div>'),ir=v('<span class="chip svelte-d5hg2r"> </span>'),lr=v('<span class="text-none svelte-d5hg2r">None</span>'),vr=v('<div class="detail-item svelte-d5hg2r"><span class="label svelte-d5hg2r">Energy System</span> <div class="value-chips svelte-d5hg2r"><!></div></div>'),nr=v('<div class="metric svelte-d5hg2r"><span class="label svelte-d5hg2r">Open Grip</span> <div class="bar-container svelte-d5hg2r"><div class="bar-fill svelte-d5hg2r"></div></div> <span class="score svelte-d5hg2r"> </span></div>'),or=v('<div class="metric svelte-d5hg2r"><span class="label svelte-d5hg2r">Crimp Grip</span> <div class="bar-container svelte-d5hg2r"><div class="bar-fill svelte-d5hg2r"></div></div> <span class="score svelte-d5hg2r"> </span></div>'),dr=v('<div class="metric svelte-d5hg2r"><span class="label svelte-d5hg2r">Pinch Grip</span> <div class="bar-container svelte-d5hg2r"><div class="bar-fill svelte-d5hg2r"></div></div> <span class="score svelte-d5hg2r"> </span></div>'),cr=v('<div class="metric svelte-d5hg2r"><span class="label svelte-d5hg2r">Sloper Grip</span> <div class="bar-container svelte-d5hg2r"><div class="bar-fill svelte-d5hg2r"></div></div> <span class="score svelte-d5hg2r"> </span></div>'),pr=v('<div class="metric svelte-d5hg2r"><span class="label svelte-d5hg2r">Jug Grip</span> <div class="bar-container svelte-d5hg2r"><div class="bar-fill svelte-d5hg2r"></div></div> <span class="score svelte-d5hg2r"> </span></div>'),_r=v('<p class="no-climbs svelte-d5hg2r">No climbs logged for this session.</p>'),ur=v('<div class="card-body svelte-d5hg2r"><div class="details-grid svelte-d5hg2r"><div class="detail-item svelte-d5hg2r"><span class="label svelte-d5hg2r">Training Type</span> <div class="value-chips svelte-d5hg2r"><!></div></div> <!> <!> <!> <!></div> <div class="metrics-container svelte-d5hg2r"><div class="metric svelte-d5hg2r"><span class="label svelte-d5hg2r">Finger Load</span> <div class="bar-container svelte-d5hg2r"><div class="bar-fill svelte-d5hg2r"></div></div> <span class="score svelte-d5hg2r"> </span></div> <div class="metric svelte-d5hg2r"><span class="label svelte-d5hg2r">Shoulder Load</span> <div class="bar-container svelte-d5hg2r"><div class="bar-fill svelte-d5hg2r"></div></div> <span class="score svelte-d5hg2r"> </span></div> <div class="metric svelte-d5hg2r"><span class="label svelte-d5hg2r">Forearm Load</span> <div class="bar-container svelte-d5hg2r"><div class="bar-fill svelte-d5hg2r"></div></div> <span class="score svelte-d5hg2r"> </span></div> <!> <!> <!> <!> <!></div> <div class="climbs-list svelte-d5hg2r"><h4 class="svelte-d5hg2r">Climbs</h4> <div class="climbs-container svelte-d5hg2r"><!> <!></div></div></div>'),fr=v('<div><div class="card-header svelte-d5hg2r" role="button" tabindex="0"><div class="header-main svelte-d5hg2r"><div class="date-badge svelte-d5hg2r"><span class="day svelte-d5hg2r"> </span> <span class="month svelte-d5hg2r"> </span></div> <div class="session-info svelte-d5hg2r"><div class="session-text svelte-d5hg2r"><h3 class="location svelte-d5hg2r"> <!></h3> <!> <div class="session-meta svelte-d5hg2r"><span class="type-tag svelte-d5hg2r"> </span> <span class="stat svelte-d5hg2r"> </span> <!></div></div> <div class="load-summary svelte-d5hg2r"><div class="load-badge finger svelte-d5hg2r"> </div> <div class="load-badge shoulder svelte-d5hg2r"> </div> <div class="load-badge forearm svelte-d5hg2r"> </div></div></div></div> <div class="header-actions"><div class="header-status svelte-d5hg2r"><!></div> <button class="btn-icon delete-session" title="Delete Session">üóëÔ∏è</button> <span class="chevron svelte-d5hg2r"> </span></div></div> <!></div>');function gr(ze,p){pa(p,!0);let r=Ra(p,"session",7),m=k(!1),C=k(!1);function D(){l(m,!e(m))}function f(){l(C,!0)}function z(g){const I=[...r().climbs];I.splice(g,1),Ia(r().id,{climbs:I}),p.onDelete()}function w(g,I){const ge=[...r().climbs];ge[g]=I,B(ge)}async function B(g){if(Ia(r().id,{climbs:g}),r().climbs=g,Ka()){const I={date:r().date,area:r().area,crag:r().crag,sector:r().sector,climbingType:r().climbingType,trainingTypes:r().trainingTypes||[],difficulty:r().difficulty,categories:r().categories||[],energySystems:r().energySystems||[],techniqueFocuses:r().techniqueFocuses||[],fingerLoad:r().fingerLoad,shoulderLoad:r().shoulderLoad,forearmLoad:r().forearmLoad,climbs:g};try{const ge=await rt(r().id,I);ge.ok?(Xa(r().id),r().syncStatus="synced"):(console.error("Failed to sync update:",ge.error),Ma(r().id),r().syncStatus="error")}catch(ge){console.error("Exception syncing update:",ge),Ma(r().id),r().syncStatus="error"}}}let Q=na(()=>r().climbs?.length??0),de=na(()=>(r().climbs||[]).reduce((g,I)=>{const ge=parseInt(I.grade.replace(/\D/g,""))||0,ee=parseInt(g.replace(/\D/g,""))||0;return ge>ee?I.grade:g},"V0/4a"));var _e=fr();let re;var ae=t(_e);ae.__click=D,ae.__keydown=g=>g.key==="Enter"&&D();var H=t(ae),ce=t(H),ue=t(ce),ie=t(ue,!0);a(ue);var W=s(ue,2),le=t(W,!0);a(W),a(ce);var Se=s(ce,2),xe=t(Se),te=t(xe),j=t(te),h=s(j);{var b=g=>{var I=qa();_(()=>d(I,`- ${r().crag??""}`)),i(g,I)};c(h,g=>{r().crag&&g(b)})}a(te);var F=s(te,2);{var M=g=>{var I=Hs(),ge=t(I);a(I),_(()=>d(ge,`üìç ${r().sector??""}`)),i(g,I)};c(F,g=>{r().sector&&g(M)})}var P=s(F,2),$=t(P),K=t($,!0);a($);var y=s($,2),O=t(y);a(y);var x=s(y,2);{var n=g=>{var I=Js(),ge=t(I);a(I),_(()=>d(ge,`Max: ${e(de)??""}`)),i(g,I)};c(x,g=>{e(Q)>0&&g(n)})}a(P),a(xe);var o=s(xe,2),T=t(o),V=t(T,!0);a(T);var X=s(T,2),L=t(X,!0);a(X);var pe=s(X,2),oe=t(pe,!0);a(pe),a(o),a(Se),a(H);var ke=s(H,2),E=t(ke),N=t(E);{var fe=g=>{var I=Zs();i(g,I)},we=g=>{var I=Ye(),ge=Ae(I);{var ee=se=>{var ve=$s();i(se,ve)};c(ge,se=>{r().syncStatus==="error"&&se(ee)},!0)}i(g,I)};c(N,g=>{r().syncStatus==="pending"?g(fe):g(we,!1)})}a(E);var Te=s(E,2);Te.__click=g=>{g.stopPropagation(),f()};var q=s(Te,2),S=t(q,!0);a(q),a(ke),a(ae);var A=s(ae,2);{var U=g=>{var I=ur(),ge=t(I),ee=t(ge),se=s(t(ee),2),ve=t(se);{var Ee=u=>{var G=Ye(),R=Ae(G);qe(R,17,()=>r().trainingTypes,Ce,(he,Y)=>{var ye=Ks(),Le=t(ye,!0);a(ye),_(()=>d(Le,e(Y))),i(he,ye)}),i(u,G)},be=u=>{var G=Xs();i(u,G)};c(ve,u=>{r().trainingTypes&&r().trainingTypes.length>0&&!r().trainingTypes.includes("None")?u(Ee):u(be,!1)})}a(se),a(ee);var Fe=s(ee,2);{var ne=u=>{var G=Ys(),R=s(t(G),2),he=t(R,!0);a(R),a(G),_(()=>d(he,r().difficulty)),i(u,G)};c(Fe,u=>{r().difficulty&&u(ne)})}var me=s(Fe,2);{var De=u=>{var G=ar(),R=s(t(G),2),he=t(R);{var Y=Le=>{var Ve=Ye(),ma=Ae(Ve);qe(ma,17,()=>r().categories,Ce,(Ue,ha)=>{var wa=Qs(),Aa=t(wa,!0);a(wa),_(()=>d(Aa,e(ha))),i(Ue,wa)}),i(Le,Ve)},ye=Le=>{var Ve=er();i(Le,Ve)};c(he,Le=>{r().categories.length>0&&!r().categories.includes("None")?Le(Y):Le(ye,!1)})}a(R),a(G),i(u,G)};c(me,u=>{r().categories?.length&&u(De)})}var Ge=s(me,2);{var ea=u=>{var G=rr(),R=s(t(G),2),he=t(R);{var Y=Le=>{var Ve=Ye(),ma=Ae(Ve);qe(ma,17,()=>r().techniqueFocuses,Ce,(Ue,ha)=>{var wa=tr(),Aa=t(wa,!0);a(wa),_(()=>d(Aa,e(ha))),i(Ue,wa)}),i(Le,Ve)},ye=Le=>{var Ve=sr();i(Le,Ve)};c(he,Le=>{r().techniqueFocuses.length>0&&!r().techniqueFocuses.includes("None")?Le(Y):Le(ye,!1)})}a(R),a(G),i(u,G)};c(Ge,u=>{r().techniqueFocuses?.length&&u(ea)})}var Ke=s(Ge,2);{var je=u=>{var G=vr(),R=s(t(G),2),he=t(R);{var Y=Le=>{var Ve=Ye(),ma=Ae(Ve);qe(ma,17,()=>r().energySystems,Ce,(Ue,ha)=>{var wa=ir(),Aa=t(wa,!0);a(wa),_(()=>d(Aa,e(ha))),i(Ue,wa)}),i(Le,Ve)},ye=Le=>{var Ve=lr();i(Le,Ve)};c(he,Le=>{r().energySystems.length>0&&!r().energySystems.includes("None")?Le(Y):Le(ye,!1)})}a(R),a(G),i(u,G)};c(Ke,u=>{r().energySystems?.length&&u(je)})}a(ge);var We=s(ge,2),Ne=t(We),Pe=s(t(Ne),2),da=t(Pe);a(Pe);var Xe=s(Pe,2),fa=t(Xe);a(Xe),a(Ne);var ia=s(Ne,2),la=s(t(ia),2),ga=t(la);a(la);var Oe=s(la,2),He=t(Oe);a(Oe),a(ia);var Je=s(ia,2),aa=s(t(Je),2),Re=t(aa);a(aa);var Be=s(aa,2),va=t(Be);a(Be),a(Je);var Ze=s(Je,2);{var Ca=u=>{var G=nr(),R=s(t(G),2),he=t(R);a(R);var Y=s(R,2),ye=t(Y);a(Y),a(G),_(()=>{ta(he,`width: ${r().openGrip/5*100}%`),d(ye,`${r().openGrip??""}/5`)}),i(u,G)};c(Ze,u=>{r().openGrip&&u(Ca)})}var ya=s(Ze,2);{var ka=u=>{var G=or(),R=s(t(G),2),he=t(R);a(R);var Y=s(R,2),ye=t(Y);a(Y),a(G),_(()=>{ta(he,`width: ${r().crimpGrip/5*100}%`),d(ye,`${r().crimpGrip??""}/5`)}),i(u,G)};c(ya,u=>{r().crimpGrip&&u(ka)})}var xa=s(ya,2);{var Da=u=>{var G=dr(),R=s(t(G),2),he=t(R);a(R);var Y=s(R,2),ye=t(Y);a(Y),a(G),_(()=>{ta(he,`width: ${r().pinchGrip/5*100}%`),d(ye,`${r().pinchGrip??""}/5`)}),i(u,G)};c(xa,u=>{r().pinchGrip&&u(Da)})}var Fa=s(xa,2);{var La=u=>{var G=cr(),R=s(t(G),2),he=t(R);a(R);var Y=s(R,2),ye=t(Y);a(Y),a(G),_(()=>{ta(he,`width: ${r().sloperGrip/5*100}%`),d(ye,`${r().sloperGrip??""}/5`)}),i(u,G)};c(Fa,u=>{r().sloperGrip&&u(La)})}var Ta=s(Fa,2);{var $e=u=>{var G=pr(),R=s(t(G),2),he=t(R);a(R);var Y=s(R,2),ye=t(Y);a(Y),a(G),_(()=>{ta(he,`width: ${r().jugGrip/5*100}%`),d(ye,`${r().jugGrip??""}/5`)}),i(u,G)};c(Ta,u=>{r().jugGrip&&u($e)})}a(We);var ca=s(We,2),Ea=s(t(ca),2),Ga=t(Ea);qe(Ga,17,()=>r().climbs||[],Ce,(u,G,R)=>{{let he=na(()=>r().climbingType==="Mixed");Ws(u,{get climb(){return e(G)},onDelete:()=>z(R),onUpdate:Y=>w(R,Y),get showClimbType(){return e(he)}})}});var Z=s(Ga,2);{var J=u=>{var G=_r();i(u,G)};c(Z,u=>{(r().climbs||[]).length===0&&u(J)})}a(Ea),a(ca),a(I),_(()=>{ta(da,`width: ${r().fingerLoad/5*100}%`),d(fa,`${r().fingerLoad??""}/5`),ta(ga,`width: ${r().shoulderLoad/5*100}%`),d(He,`${r().shoulderLoad??""}/5`),ta(Re,`width: ${r().forearmLoad/5*100}%`),d(va,`${r().forearmLoad??""}/5`)}),ra(3,I,()=>ua,()=>({duration:150})),i(g,I)};c(A,g=>{e(m)&&g(U)})}a(_e),_((g,I)=>{re=sa(_e,1,"session-card svelte-d5hg2r",null,re,{expanded:e(m)}),Qe(ae,"aria-expanded",e(m)),d(ie,g),d(le,I),d(j,`${r().area??""} `),d(K,r().climbingType),d(O,`${e(Q)??""} climbs`),Qe(T,"title",`Finger Load: ${r().fingerLoad??""}`),d(V,r().fingerLoad),Qe(X,"title",`Shoulder Load: ${r().shoulderLoad??""}`),d(L,r().shoulderLoad),Qe(pe,"title",`Forearm Load: ${r().forearmLoad??""}`),d(oe,r().forearmLoad),d(S,e(m)?"‚ñ≤":"‚ñº")},[()=>new Date(r().date).getDate(),()=>new Date(r().date).toLocaleDateString(void 0,{month:"short"})]),i(ze,_e),_a()}oa(["click","keydown"]);var mr=v('<span class="spinner svelte-1s7jdlh"></span> Fetching...',1),hr=v('<div class="error-banner svelte-1s7jdlh"> </div>'),br=v('<small class="svelte-1s7jdlh">Try adjusting your filters.</small>'),yr=v('<div class="empty-state svelte-1s7jdlh"><p class="svelte-1s7jdlh">No outdoor climbing sessions found.</p> <!></div>'),xr=v('<div class="load-more-container svelte-1s7jdlh"><button class="load-more-btn svelte-1s7jdlh"> </button></div>'),wr=v('<div class="view-container svelte-1s7jdlh"><div class="view-header svelte-1s7jdlh"><h2 class="view-title svelte-1s7jdlh">‚õ∞Ô∏è Outdoor Climbing History</h2> <div class="header-actions svelte-1s7jdlh"><button class="action-btn secondary svelte-1s7jdlh" title="Export filtered data to CSV">üì• Export</button> <button class="action-btn svelte-1s7jdlh" title="Fetch data from cloud"><!></button></div></div> <!> <!> <div class="info-bar svelte-1s7jdlh"><div class="legend-wrapper svelte-1s7jdlh"><!></div> <div class="load-key svelte-1s7jdlh"><span class="key-label svelte-1s7jdlh">Load:</span> <div class="key-item svelte-1s7jdlh"><span class="dot finger svelte-1s7jdlh"></span> Finger</div> <div class="key-item svelte-1s7jdlh"><span class="dot shoulder svelte-1s7jdlh"></span> Shoulder</div> <div class="key-item svelte-1s7jdlh"><span class="dot forearm svelte-1s7jdlh"></span> Forearm</div></div></div> <div class="sessions-list"><!> <!> <!></div></div>');function Sr(ze,p){pa(p,!0);let r=k(ba([])),m=k(ba([])),C=k(!1),D=k(""),f=k(ba({startDate:"",endDate:"",area:"",crag:"",climbingType:"",sessionType:"",grade:""})),z=k(20);const w=20;Ua(()=>{B()});function B(){const n=Oa("outdoor_climb");l(r,n.sort((o,T)=>new Date(T.date).getTime()-new Date(o.date).getTime()),!0),re()}async function Q(){l(C,!0),l(D,"");try{await ja();const n=await it();n.ok&&n.data?de(n.data):l(D,n.error||"Failed to fetch data",!0)}catch(n){l(D,n instanceof Error?n.message:"Unknown error",!0)}finally{l(C,!1)}}function de(n){const o=n.map(V=>({...V,activityType:"outdoor_climb",createdAt:new Date().toISOString(),updatedAt:new Date().toISOString(),syncStatus:"synced",syncedAt:new Date().toISOString(),openGrip:0,crimpGrip:0,pinchGrip:0,sloperGrip:0,jugGrip:0}));Na(o);const T=Oa("outdoor_climb");l(r,T.sort((V,X)=>new Date(X.date).getTime()-new Date(V.date).getTime()),!0),re()}function _e(n){l(f,n,!0),re()}function re(){l(z,w),l(m,e(r).filter(n=>{if(e(f).startDate&&n.date<e(f).startDate||e(f).endDate&&n.date>e(f).endDate||e(f).area&&!n.area.toLowerCase().includes(e(f).area.toLowerCase())||e(f).crag&&!n.crag.toLowerCase().includes(e(f).crag.toLowerCase()))return!1;if(e(f).climbingType&&(n.climbingType==="Leading"?"Sport":n.climbingType)!==e(f).climbingType)if(n.climbingType==="Mixed")if(e(f).climbingType==="Bouldering"){if(!n.climbs.some(T=>!T.isSport))return!1}else if(e(f).climbingType==="Sport"||e(f).climbingType==="Trad"){if(!n.climbs.some(T=>T.isSport))return!1}else return!1;else return!1;if(e(f).sessionType&&!n.trainingTypes?.includes(e(f).sessionType))return!1;if(e(f).grade){const o=e(f).grade.trim().toLowerCase();if(!n.climbs.some(V=>V.grade.trim().toLowerCase()===o))return!1}return!0}),!0)}function ae(){l(z,e(z)+w)}var H=wr(),ce=t(H),ue=s(t(ce),2),ie=t(ue);ie.__click=()=>Ha(e(m),"outdoor_climbs");var W=s(ie,2);W.__click=Q;var le=t(W);{var Se=n=>{var o=mr();za(),i(n,o)},xe=n=>{var o=qa("‚òÅÔ∏è Fetch Data");i(n,o)};c(le,n=>{e(C)?n(Se):n(xe,!1)})}a(W),a(ue),a(ce);var te=s(ce,2);{var j=n=>{var o=hr(),T=t(o,!0);a(o),_(()=>d(T,e(D))),ra(3,o,()=>ua),i(n,o)};c(te,n=>{e(D)&&n(j)})}var h=s(te,2);Es(h,{onFilterParamsChange:_e});var b=s(h,2),F=t(b),M=t(F);Ya(M),a(F),za(2),a(b);var P=s(b,2),$=t(P);qe($,17,()=>e(m).slice(0,e(z)),n=>n.id,(n,o)=>{gr(n,{get session(){return e(o)},onDelete:B})});var K=s($,2);{var y=n=>{var o=yr(),T=s(t(o),2);{var V=X=>{var L=br();i(X,L)};c(T,X=>{e(r).length>0&&X(V)})}a(o),i(n,o)};c(K,n=>{e(m).length===0&&n(y)})}var O=s(K,2);{var x=n=>{var o=xr(),T=t(o);T.__click=ae;var V=t(T);a(T),a(o),_(()=>d(V,`Load More (${e(m).length-e(z)} remaining)`)),i(n,o)};c(O,n=>{e(z)<e(m).length&&n(x)})}a(P),a(H),_(()=>W.disabled=e(C)),i(ze,H),_a()}oa(["click"]);var kr=v('<span class="chevron svelte-11rkzid">‚ñ≤</span>'),Dr=v('<span class="chevron svelte-11rkzid">‚ñº</span>'),Tr=v('<div class="filter-body svelte-11rkzid"><div class="filter-grid svelte-11rkzid"><div class="filter-item svelte-11rkzid"><label for="start-date" class="svelte-11rkzid">Start Date</label> <input type="date" id="start-date" class="svelte-11rkzid"/></div> <div class="filter-item svelte-11rkzid"><label for="end-date" class="svelte-11rkzid">End Date</label> <input type="date" id="end-date" class="svelte-11rkzid"/></div> <div class="filter-item svelte-11rkzid"><label for="name-filter" class="svelte-11rkzid">Session Name</label> <input type="text" id="name-filter" placeholder="e.g. Leg Day" class="svelte-11rkzid"/></div> <div class="filter-item svelte-11rkzid"><label for="block-filter" class="svelte-11rkzid">Training Block</label> <select id="block-filter" class="svelte-11rkzid"><option>All Blocks</option><option>Strength</option><option>Power</option><option>Power Endurance</option><option>Muscular Endurance</option></select></div></div> <div class="filter-actions svelte-11rkzid"><button class="reset-btn svelte-11rkzid">Reset Filters</button></div></div>'),qr=v('<div class="filter-container svelte-11rkzid"><button class="filter-header svelte-11rkzid"><div class="header-content svelte-11rkzid"><span class="icon svelte-11rkzid">üîç</span> <span class="title svelte-11rkzid">Filters</span> <!></div></button> <!></div>');function zr(ze,p){pa(p,!0);let r=k(!1),m=k(""),C=k(""),D=k(""),f=k("");function z(){l(r,!e(r))}function w(){l(m,""),l(C,""),l(D,""),l(f,""),B()}function B(){p.onFilterParamsChange({startDate:e(m),endDate:e(C),name:e(D),trainingBlock:e(f)})}var Q=qr(),de=t(Q);de.__click=z;var _e=t(de),re=s(t(_e),4);{var ae=ie=>{var W=kr();i(ie,W)},H=ie=>{var W=Dr();i(ie,W)};c(re,ie=>{e(r)?ie(ae):ie(H,!1)})}a(_e),a(de);var ce=s(de,2);{var ue=ie=>{var W=Tr(),le=t(W),Se=t(le),xe=s(t(Se),2);Ie(xe),xe.__change=B,a(Se);var te=s(Se,2),j=s(t(te),2);Ie(j),j.__change=B,a(te);var h=s(te,2),b=s(t(h),2);Ie(b),b.__input=B,a(h);var F=s(h,2),M=s(t(F),2);M.__change=B;var P=t(M);P.value=P.__value="";var $=s(P);$.value=$.__value="Strength";var K=s($);K.value=K.__value="Power";var y=s(K);y.value=y.__value="Power Endurance";var O=s(y);O.value=O.__value="Muscular Endurance",a(M),a(F),a(le);var x=s(le,2),n=t(x);n.__click=w,a(x),a(W),Me(xe,()=>e(m),o=>l(m,o)),Me(j,()=>e(C),o=>l(C,o)),Me(b,()=>e(D),o=>l(D,o)),Sa(M,()=>e(f),o=>l(f,o)),ra(3,W,()=>ua,()=>({duration:200})),i(ie,W)};c(ce,ie=>{e(r)&&ie(ue)})}a(Q),_(()=>Qe(de,"aria-expanded",e(r))),i(ze,Q),_a()}oa(["click","change","input"]);var Cr=v('<span class="status-icon pending svelte-cirrfc" title="Waiting to sync">üîÑ</span>'),Fr=v('<span class="status-icon error svelte-cirrfc" title="Sync error">‚ö†Ô∏è</span>'),Lr=v('<div class="bw-info svelte-cirrfc"><span class="label svelte-cirrfc">Bodyweight:</span> </div>'),Er=v('<span class="muscle-tag svelte-cirrfc"> </span>'),Gr=v('<span class="muscle-tag svelte-cirrfc"> </span>'),Or=v('<div class="muscle-tags svelte-cirrfc"><!> <!></div>'),Ar=v('<span class="tag w svelte-cirrfc">W</span>'),jr=v('<span class="tag f svelte-cirrfc">F</span>'),Nr=v('<span class="tag d svelte-cirrfc">D</span>'),Ir=v('<div><span class="set-num svelte-cirrfc"></span> <!> <!> <!> <span class="val svelte-cirrfc"><span class="weight"> </span> <span class="x svelte-cirrfc">x</span> <span class="reps"> </span></span></div>'),Mr=v('<div class="exercise-item svelte-cirrfc"><div class="exercise-header svelte-cirrfc"><h4 class="svelte-cirrfc"> </h4> <!></div> <div class="sets-grid svelte-cirrfc"></div></div>'),Pr=v('<div class="subcategory-group svelte-cirrfc"><h5 class="subcategory-header svelte-cirrfc"> </h5> <!></div>'),Rr=v('<div class="category-group svelte-cirrfc"><h4 class="category-header svelte-cirrfc"> </h4> <!></div>'),Br=v('<div class="card-body svelte-cirrfc"><!> <div class="exercises-list svelte-cirrfc"></div></div>'),Vr=v('<div><div class="card-header svelte-cirrfc" role="button" tabindex="0"><div class="header-main svelte-cirrfc"><div class="date-badge svelte-cirrfc"><span class="day svelte-cirrfc"> </span> <span class="month svelte-cirrfc"> </span></div> <div class="session-info svelte-cirrfc"><div class="session-text"><h3 class="name svelte-cirrfc"> </h3> <div class="session-meta svelte-cirrfc"><span class="stat svelte-cirrfc"> </span> <span class="stat svelte-cirrfc"> </span> <span class="stat svelte-cirrfc"> </span></div></div></div></div> <div class="header-actions svelte-cirrfc"><div class="header-status"><!></div> <button class="btn-icon delete-session svelte-cirrfc" title="Delete Session">üóëÔ∏è</button> <span class="chevron svelte-cirrfc"> </span></div></div> <!></div> <!>',1);function Ur(ze,p){pa(p,!0);let r=k(!1),m=k(!1);function C(){l(r,!e(r))}function D(){l(m,!0)}function f(){Wa(p.session.id),l(m,!1),p.onDelete()}function z(E){return lt.find(N=>N.name===E)}let w=na(()=>p.session.exercises?.length??0),B=na(()=>(p.session.exercises||[]).reduce((E,N)=>E+(N.sets?.length||0),0)),Q=na(()=>(p.session.exercises||[]).reduce((E,N)=>E+(N.sets||[]).reduce((fe,we)=>fe+(we.weight||0)*(we.reps||0),0),0)),de=na(()=>(p.session.exercises||[]).reduce((E,N)=>{const fe=z(N.name),we=fe?.category||"Other",Te=fe?.subcategory||"Misc";return E[we]||(E[we]={}),E[we][Te]||(E[we][Te]=[]),E[we][Te].push(N),E},{}));var _e=Vr(),re=Ae(_e);let ae;var H=t(re);H.__click=C,H.__keydown=E=>E.key==="Enter"&&C();var ce=t(H),ue=t(ce),ie=t(ue),W=t(ie,!0);a(ie);var le=s(ie,2),Se=t(le,!0);a(le),a(ue);var xe=s(ue,2),te=t(xe),j=t(te),h=t(j,!0);a(j);var b=s(j,2),F=t(b),M=t(F);a(F);var P=s(F,2),$=t(P);a(P);var K=s(P,2),y=t(K);a(K),a(b),a(te),a(xe),a(ce);var O=s(ce,2),x=t(O),n=t(x);{var o=E=>{var N=Cr();i(E,N)},T=E=>{var N=Ye(),fe=Ae(N);{var we=Te=>{var q=Fr();i(Te,q)};c(fe,Te=>{p.session.syncStatus==="error"&&Te(we)},!0)}i(E,N)};c(n,E=>{p.session.syncStatus==="pending"?E(o):E(T,!1)})}a(x);var V=s(x,2);V.__click=E=>{E.stopPropagation(),D()};var X=s(V,2),L=t(X,!0);a(X),a(O),a(H);var pe=s(H,2);{var oe=E=>{var N=Br(),fe=t(N);{var we=q=>{var S=Lr(),A=s(t(S));a(S),_(()=>d(A,` ${p.session.bodyweight??""}kg`)),i(q,S)};c(fe,q=>{p.session.bodyweight&&q(we)})}var Te=s(fe,2);qe(Te,21,()=>Object.entries(e(de)),Ce,(q,S)=>{var A=na(()=>Ja(e(S),2));let U=()=>e(A)[0],g=()=>e(A)[1];var I=Rr(),ge=t(I),ee=t(ge,!0);a(ge);var se=s(ge,2);qe(se,17,()=>Object.entries(g()),Ce,(ve,Ee)=>{var be=na(()=>Ja(e(Ee),2));let Fe=()=>e(be)[0],ne=()=>e(be)[1];var me=Pr(),De=t(me),Ge=t(De,!0);a(De);var ea=s(De,2);qe(ea,17,ne,Ce,(Ke,je)=>{const We=na(()=>z(e(je).name));var Ne=Mr(),Pe=t(Ne),da=t(Pe),Xe=t(da,!0);a(da);var fa=s(da,2);{var ia=ga=>{var Oe=Or(),He=t(Oe);qe(He,17,()=>e(We).targetMuscles.slice(0,3),Ce,(Re,Be)=>{var va=Er(),Ze=t(va,!0);a(va),_(()=>d(Ze,e(Be))),i(Re,va)});var Je=s(He,2);{var aa=Re=>{var Be=Gr(),va=t(Be);a(Be),_(()=>d(va,`+${e(We).targetMuscles.length-3}`)),i(Re,Be)};c(Je,Re=>{e(We).targetMuscles.length>3&&Re(aa)})}a(Oe),i(ga,Oe)};c(fa,ga=>{e(We)&&ga(ia)})}a(Pe);var la=s(Pe,2);qe(la,21,()=>e(je).sets,Ce,(ga,Oe,He)=>{var Je=Ir();let aa;var Re=t(Je);Re.textContent=He+1;var Be=s(Re,2);{var va=$e=>{var ca=Ar();i($e,ca)};c(Be,$e=>{e(Oe).isWarmup&&$e(va)})}var Ze=s(Be,2);{var Ca=$e=>{var ca=jr();i($e,ca)};c(Ze,$e=>{e(Oe).isFailure&&$e(Ca)})}var ya=s(Ze,2);{var ka=$e=>{var ca=Nr();i($e,ca)};c(ya,$e=>{e(Oe).isDropSet&&$e(ka)})}var xa=s(ya,2),Da=t(xa),Fa=t(Da);a(Da);var La=s(Da,4),Ta=t(La,!0);a(La),a(xa),a(Je),_(()=>{aa=sa(Je,1,"set-pill svelte-cirrfc",null,aa,{completed:e(Oe).completed,warmup:e(Oe).isWarmup}),d(Fa,`${e(Oe).weight??""}kg`),d(Ta,e(Oe).reps)}),i(ga,Je)}),a(la),a(Ne),_(()=>d(Xe,e(je).name)),i(Ke,Ne)}),a(me),_(()=>d(Ge,Fe())),i(ve,me)}),a(I),_(()=>d(ee,U())),i(q,I)}),a(Te),a(N),ra(3,N,()=>ua,()=>({duration:150})),i(E,N)};c(pe,E=>{e(r)&&E(oe)})}a(re);var ke=s(re,2);Pa(ke,{get isOpen(){return e(m)},title:"Delete Session",message:"Are you sure you want to delete this session? This cannot be undone.",onConfirm:f,onCancel:()=>l(m,!1)}),_((E,N,fe)=>{ae=sa(re,1,"session-card svelte-cirrfc",null,ae,{expanded:e(r)}),Qe(H,"aria-expanded",e(r)),d(W,E),d(Se,N),d(h,p.session.name),d(M,`${e(w)??""} Exercises`),d($,`${e(B)??""} Sets`),d(y,`~${fe??""}kg Vol`),d(L,e(r)?"‚ñ≤":"‚ñº")},[()=>new Date(p.session.date).getDate(),()=>new Date(p.session.date).toLocaleDateString("en-GB",{month:"short"}),()=>Math.round(e(Q)).toLocaleString()]),i(ze,_e),_a()}oa(["click","keydown"]);var Wr=v('<span class="spinner svelte-133enjd"></span> Fetching...',1),Hr=v('<div class="error-banner svelte-133enjd"> </div>'),Jr=v('<small class="svelte-133enjd">Try adjusting your filters.</small>'),Zr=v('<div class="empty-state svelte-133enjd"><p class="svelte-133enjd">No gym sessions found.</p> <!></div>'),$r=v('<div class="load-more-container svelte-133enjd"><button class="load-more-btn svelte-133enjd"> </button></div>'),Kr=v('<div class="view-container svelte-133enjd"><div class="view-header svelte-133enjd"><h2 class="view-title svelte-133enjd">üèãÔ∏è Gym Session History</h2> <div class="header-actions svelte-133enjd"><button class="action-btn secondary svelte-133enjd" title="Export filtered data to CSV">üì• Export</button> <button class="action-btn svelte-133enjd" title="Fetch data from cloud"><!></button></div></div> <!> <!> <div class="sessions-list"><!> <!> <!></div></div>');function Xr(ze,p){pa(p,!0);let r=k(ba([])),m=k(ba([])),C=k(!1),D=k(""),f=k(ba({startDate:"",endDate:"",name:"",trainingBlock:""})),z=k(20);const w=20;Ua(()=>{B()});function B(){const y=Oa("gym_session");l(r,y.sort((O,x)=>new Date(x.date).getTime()-new Date(O.date).getTime()),!0),re()}async function Q(){l(C,!0),l(D,"");try{await ja();const y=await vt();y.ok&&y.data?de(y.data):l(D,y.error||"Failed to fetch data",!0)}catch(y){l(D,y instanceof Error?y.message:"Unknown error",!0)}finally{l(C,!1)}}function de(y){const O=y.map(n=>({...n,activityType:"gym_session",syncStatus:"synced",syncedAt:new Date().toISOString(),createdAt:n.createdAt||new Date().toISOString(),updatedAt:n.updatedAt||new Date().toISOString()}));Na(O);const x=Oa("gym_session");l(r,x.sort((n,o)=>new Date(o.date).getTime()-new Date(n.date).getTime()),!0),re()}function _e(y){l(f,y,!0),re()}function re(){l(z,w),l(m,e(r).filter(y=>!(e(f).startDate&&y.date<e(f).startDate||e(f).endDate&&y.date>e(f).endDate||e(f).name&&!y.name.toLowerCase().includes(e(f).name.toLowerCase())||e(f).trainingBlock&&y.trainingBlock!==e(f).trainingBlock)),!0)}function ae(){l(z,e(z)+w)}var H=Kr(),ce=t(H),ue=s(t(ce),2),ie=t(ue);ie.__click=()=>Ha(e(m),"gym_sessions");var W=s(ie,2);W.__click=Q;var le=t(W);{var Se=y=>{var O=Wr();za(),i(y,O)},xe=y=>{var O=qa("‚òÅÔ∏è Fetch Data");i(y,O)};c(le,y=>{e(C)?y(Se):y(xe,!1)})}a(W),a(ue),a(ce);var te=s(ce,2);{var j=y=>{var O=Hr(),x=t(O,!0);a(O),_(()=>d(x,e(D))),ra(3,O,()=>ua),i(y,O)};c(te,y=>{e(D)&&y(j)})}var h=s(te,2);zr(h,{onFilterParamsChange:_e});var b=s(h,2),F=t(b);qe(F,17,()=>e(m).slice(0,e(z)),y=>y.id,(y,O)=>{Ur(y,{get session(){return e(O)},onDelete:B})});var M=s(F,2);{var P=y=>{var O=Zr(),x=s(t(O),2);{var n=o=>{var T=Jr();i(o,T)};c(x,o=>{e(r).length>0&&o(n)})}a(O),i(y,O)};c(M,y=>{e(m).length===0&&y(P)})}var $=s(M,2);{var K=y=>{var O=$r(),x=t(O);x.__click=ae;var n=t(x);a(x),a(O),_(()=>d(n,`Load More (${e(m).length-e(z)} remaining)`)),i(y,O)};c($,y=>{e(z)<e(m).length&&y(K)})}a(b),a(H),_(()=>W.disabled=e(C)),i(ze,H),_a()}oa(["click"]);var Yr=v('<span class="spinner svelte-1szs0u9"></span> Fetching...',1),Qr=v('<div class="loading svelte-1szs0u9">Loading sessions...</div>'),ei=v('<div class="empty-state svelte-1szs0u9"><!></div>'),ai=v('<span class="set-tag svelte-1szs0u9"> <span class="x svelte-1szs0u9">x</span> </span>'),ti=v('<div class="ex-notes svelte-1szs0u9"> </div>'),si=v('<div class="exercise-item svelte-1szs0u9"><div class="ex-header svelte-1szs0u9"><span class="ex-name svelte-1szs0u9"> </span> <span class="ex-grip svelte-1szs0u9"> </span></div> <div class="ex-sets svelte-1szs0u9"></div> <!></div>'),ri=v('<div class="card-body svelte-1szs0u9"><div class="exercises-list svelte-1szs0u9"></div></div>'),ii=v('<div><div class="card-header svelte-1szs0u9" role="button" tabindex="0"><div class="header-main"><span class="session-date svelte-1szs0u9"> </span> <span class="meta svelte-1szs0u9"><!> </span></div> <div class="header-status svelte-1szs0u9"><span>‚óè</span> <button class="btn-icon delete-btn svelte-1szs0u9" title="Delete Session">üóëÔ∏è</button> <span class="chevron svelte-1szs0u9"> </span></div></div> <!></div>'),li=v('<div class="load-more-container svelte-1szs0u9"><button class="load-more-btn svelte-1szs0u9"> </button></div>'),vi=v('<div class="timeline svelte-1szs0u9"><!> <!></div>'),ni=v('<div class="view-content svelte-1szs0u9"><div class="header svelte-1szs0u9"><h3 class="svelte-1szs0u9">ü§è Fingerboarding Log</h3> <button class="fetch-btn svelte-1szs0u9" title="Fetch data from cloud"><!></button></div> <div class="filters svelte-1szs0u9"><div class="filter-group svelte-1szs0u9"><label for="start-date" class="svelte-1szs0u9">From</label> <input type="date" id="start-date" class="svelte-1szs0u9"/></div> <div class="filter-group svelte-1szs0u9"><label for="end-date" class="svelte-1szs0u9">To</label> <input type="date" id="end-date" class="svelte-1szs0u9"/></div></div> <!></div> <!>',1);function oi(ze,p){pa(p,!0);let r=k(ba([])),m=k(!0),C=k(""),D=k(""),f=k(ba(new Set)),z=k(20);const w=20;Qa(()=>{e(C),e(D),l(z,w)});let B=k(!1),Q=k(null);function de(x){l(Q,x,!0),l(B,!0)}function _e(){e(Q)&&(Wa(e(Q)),l(Q,null),l(B,!1),l(r,Ba().sort((x,n)=>new Date(n.date).getTime()-new Date(x.date).getTime()),!0))}async function re(){l(m,!0),l(r,Ba().sort((x,n)=>new Date(n.date).getTime()-new Date(x.date).getTime()),!0);try{await ja();const x=await nt();if(x.ok&&x.data){const n=x.data.map(o=>({...o,activityType:"fingerboarding",createdAt:o.createdAt||new Date().toISOString(),updatedAt:o.updatedAt||new Date().toISOString(),syncStatus:"synced"}));Na(n),l(r,Ba().sort((o,T)=>new Date(T.date).getTime()-new Date(o.date).getTime()),!0)}}catch(x){console.error("Failed to sync",x)}finally{l(m,!1)}}re();let ae=na(()=>e(r).filter(x=>!(e(C)&&new Date(x.date)<new Date(e(C))||e(D)&&new Date(x.date)>new Date(e(D)))));function H(){l(z,e(z)+w)}function ce(x){e(f).has(x)?e(f).delete(x):e(f).add(x),l(f,new Set(e(f)),!0)}function ue(x){return x.exercises.reduce((n,o)=>n+o.details.length,0)}var ie=ni(),W=Ae(ie),le=t(W),Se=s(t(le),2);Se.__click=re;var xe=t(Se);{var te=x=>{var n=Yr();za(),i(x,n)},j=x=>{var n=qa("‚òÅÔ∏è Fetch Data");i(x,n)};c(xe,x=>{e(m)?x(te):x(j,!1)})}a(Se),a(le);var h=s(le,2),b=t(h),F=s(t(b),2);Ie(F),a(b);var M=s(b,2),P=s(t(M),2);Ie(P),a(M),a(h);var $=s(h,2);{var K=x=>{var n=Qr();i(x,n)},y=x=>{var n=Ye(),o=Ae(n);{var T=X=>{var L=ei(),pe=t(L);{var oe=E=>{var N=qa("No sessions match filter.");i(E,N)},ke=E=>{var N=qa("No fingerboarding sessions logged yet.");i(E,N)};c(pe,E=>{e(r).length>0?E(oe):E(ke,!1)})}a(L),i(X,L)},V=X=>{var L=vi(),pe=t(L);qe(pe,17,()=>e(ae).slice(0,e(z)),Ce,(E,N)=>{var fe=ii();let we;var Te=t(fe);Te.__click=()=>ce(e(N).id),Te.__keydown=De=>De.key==="Enter"&&ce(e(N).id);var q=t(Te),S=t(q),A=t(S,!0);a(S);var U=s(S,2),g=t(U);{var I=De=>{var Ge=qa();_(()=>d(Ge,`${e(N).location??""} ¬∑`)),i(De,Ge)};c(g,De=>{e(N).location&&e(N).location!=="N/A"&&e(N).location!=="Home"&&De(I)})}var ge=s(g);a(U),a(q);var ee=s(q,2),se=t(ee);let ve;var Ee=s(se,2);Ee.__click=De=>{De.stopPropagation(),de(e(N).id)};var be=s(Ee,2),Fe=t(be,!0);a(be),a(ee),a(Te);var ne=s(Te,2);{var me=De=>{var Ge=ri(),ea=t(Ge);qe(ea,21,()=>e(N).exercises||[],Ce,(Ke,je)=>{var We=si(),Ne=t(We),Pe=t(Ne),da=t(Pe,!0);a(Pe);var Xe=s(Pe,2),fa=t(Xe,!0);a(Xe),a(Ne);var ia=s(Ne,2);qe(ia,21,()=>e(je).details,Ce,(Oe,He)=>{var Je=ai(),aa=t(Je),Re=s(aa,2);a(Je),_(()=>{d(aa,`${e(He).weight>0?`+${e(He).weight}kg`:"BW"} `),d(Re,` ${e(He).reps??""}s/reps`)}),i(Oe,Je)}),a(ia);var la=s(ia,2);{var ga=Oe=>{var He=ti(),Je=t(He);a(He),_(()=>d(Je,`"${e(je).notes??""}"`)),i(Oe,He)};c(la,Oe=>{e(je).notes&&Oe(ga)})}a(We),_(()=>{d(da,e(je).name),d(fa,e(je).gripType)}),i(Ke,We)}),a(ea),a(Ge),ra(3,Ge,()=>ua,()=>({duration:150})),i(De,Ge)};c(ne,De=>{e(f).has(e(N).id)&&De(me)})}a(fe),_((De,Ge,ea,Ke)=>{we=sa(fe,1,"session-card svelte-1szs0u9",null,we,De),d(A,Ge),d(ge,` ${e(N).exercises.length??""} Exercises ¬∑ ${ea??""} Sets`),ve=sa(se,1,"sync-dot svelte-1szs0u9",null,ve,{synced:e(N).syncStatus==="synced"}),Qe(se,"title",e(N).syncStatus==="synced"?"Synced":"Local"),d(Fe,Ke)},[()=>({expanded:e(f).has(e(N).id)}),()=>new Date(e(N).date).toLocaleDateString(void 0,{weekday:"short",month:"short",day:"numeric"}),()=>ue(e(N)),()=>e(f).has(e(N).id)?"‚ñ≤":"‚ñº"]),i(E,fe)});var oe=s(pe,2);{var ke=E=>{var N=li(),fe=t(N);fe.__click=H;var we=t(fe);a(fe),a(N),_(()=>d(we,`Load More (${e(ae).length-e(z)} remaining)`)),i(E,N)};c(oe,E=>{e(z)<e(ae).length&&E(ke)})}a(L),i(X,L)};c(o,X=>{e(ae).length===0?X(T):X(V,!1)},!0)}i(x,n)};c($,x=>{e(m)&&e(r).length===0?x(K):x(y,!1)})}a(W);var O=s(W,2);Pa(O,{get isOpen(){return e(B)},title:"Delete Fingerboard Session",message:"Are you sure you want to delete this session? This cannot be undone.",onConfirm:_e,onCancel:()=>l(B,!1)}),_(()=>Se.disabled=e(m)),Me(F,()=>e(C),x=>l(C,x)),Me(P,()=>e(D),x=>l(D,x)),i(ze,ie),_a()}oa(["click","keydown"]);var di=v('<span class="spinner svelte-xyvf5r"></span> Fetching...',1),ci=v('<div class="loading svelte-xyvf5r">Loading sessions...</div>'),pi=v('<div class="empty-state svelte-xyvf5r">No competitions logged yet.</div>'),_i=v('<span class="round-pos svelte-xyvf5r"> </span>'),ui=v('<span class="c-attempts svelte-xyvf5r"> </span>'),fi=v('<div class="climb-notes svelte-xyvf5r"> </div>'),gi=v('<div class="climb-row svelte-xyvf5r"><div class="climb-info svelte-xyvf5r"><span class="c-name svelte-xyvf5r"> </span> <!></div> <div class="climb-result"><span> </span></div></div> <!>',1),mi=v('<div class="climbs-list"></div>'),hi=v('<div class="round-item svelte-xyvf5r"><div class="round-header svelte-xyvf5r"><span class="round-name"> </span> <!></div> <!></div>'),bi=v('<div class="rounds-list svelte-xyvf5r"></div>'),yi=v('<div class="load-meta svelte-xyvf5r"><span> </span></div>'),xi=v('<div class="card-body svelte-xyvf5r"><!> <!> <div class="session-footer svelte-xyvf5r"><span> </span></div></div>'),wi=v('<div><div class="card-header svelte-xyvf5r" role="button" tabindex="0"><div class="header-main svelte-xyvf5r"><div class="left-col svelte-xyvf5r"><span class="venue svelte-xyvf5r"> </span> <span class="date svelte-xyvf5r"> </span></div> <div class="right-col svelte-xyvf5r"><div class="badges svelte-xyvf5r"><span class="type-tag svelte-xyvf5r"> </span> <span class="result-tag svelte-xyvf5r"> </span></div></div></div> <div class="header-status svelte-xyvf5r"><span>‚óè</span> <button class="btn-icon delete-btn svelte-xyvf5r" title="Delete Session">üóëÔ∏è</button> <span class="chevron svelte-xyvf5r"> </span></div></div> <!></div>'),Si=v('<div class="load-more-container svelte-xyvf5r"><button class="load-more-btn svelte-xyvf5r"> </button></div>'),ki=v('<div class="timeline svelte-xyvf5r"><!> <!></div>'),Di=v('<div class="view-content svelte-xyvf5r"><div class="header svelte-xyvf5r"><h3 class="svelte-xyvf5r">üèÜ Competition Log</h3> <button class="fetch-btn svelte-xyvf5r" title="Fetch data from cloud"><!></button></div> <!> <!></div>');function Ti(ze,p){pa(p,!0);let r=k(ba([])),m=k(!0),C=k(ba(new Set)),D=k(20);const f=20;let z=k(!1),w=k(null);function B(h){l(w,h,!0),l(z,!0)}function Q(){e(w)&&(Wa(e(w)),l(w,null),l(z,!1),l(r,Va().sort((h,b)=>new Date(b.date).getTime()-new Date(h.date).getTime()),!0))}async function de(){l(m,!0),l(D,f),l(r,Va().sort((h,b)=>new Date(b.date).getTime()-new Date(h.date).getTime()),!0);try{await ja();const h=await ot();if(h.ok&&h.data){const b=h.data.map(F=>({...F,activityType:"competition",type:F.type,rounds:F.rounds.map(M=>({...M,climbs:M.climbs?.map(P=>({...P,status:P.status}))})),createdAt:F.createdAt||new Date().toISOString(),updatedAt:F.updatedAt||new Date().toISOString(),syncStatus:"synced"}));Na(b),l(r,Va().sort((F,M)=>new Date(M.date).getTime()-new Date(F.date).getTime()),!0)}}catch(h){console.error("Failed to sync",h)}finally{l(m,!1)}}de();function _e(h){e(C).has(h)?e(C).delete(h):e(C).add(h),l(C,new Set(e(C)),!0)}function re(){l(D,e(D)+f)}function ae(h){if(!h.rounds||h.rounds.length===0)return"No rounds";const b=h.rounds[h.rounds.length-1];if(b.position)return`#${b.position} ${b.name}`;if(b.climbs){const F=b.climbs.filter(P=>P.status==="Top"||P.status==="Flash").length,M=b.climbs.filter(P=>P.status==="Zone").length;return`${h.rounds.length} Rnds ¬∑ Final: ${F}T ${M+F}Z`}return b.name}var H=Di(),ce=t(H),ue=s(t(ce),2);ue.__click=de;var ie=t(ue);{var W=h=>{var b=di();za(),i(h,b)},le=h=>{var b=qa("‚òÅÔ∏è Fetch Data");i(h,b)};c(ie,h=>{e(m)?h(W):h(le,!1)})}a(ue),a(ce);var Se=s(ce,2);{var xe=h=>{var b=ci();i(h,b)},te=h=>{var b=Ye(),F=Ae(b);{var M=$=>{var K=pi();i($,K)},P=$=>{var K=ki(),y=t(K);qe(y,17,()=>e(r).slice(0,e(D)),Ce,(n,o)=>{var T=wi();let V;var X=t(T);X.__click=()=>_e(e(o).id),X.__keydown=be=>be.key==="Enter"&&_e(e(o).id);var L=t(X),pe=t(L),oe=t(pe),ke=t(oe,!0);a(oe);var E=s(oe,2),N=t(E,!0);a(E),a(pe);var fe=s(pe,2),we=t(fe),Te=t(we),q=t(Te,!0);a(Te);var S=s(Te,2),A=t(S,!0);a(S),a(we),a(fe),a(L);var U=s(L,2),g=t(U);let I;var ge=s(g,2);ge.__click=be=>{be.stopPropagation(),B(e(o).id)};var ee=s(ge,2),se=t(ee,!0);a(ee),a(U),a(X);var ve=s(X,2);{var Ee=be=>{var Fe=xi(),ne=t(Fe);{var me=Ne=>{var Pe=bi();qe(Pe,21,()=>e(o).rounds||[],Ce,(da,Xe)=>{var fa=hi(),ia=t(fa),la=t(ia),ga=t(la,!0);a(la);var Oe=s(la,2);{var He=Re=>{var Be=_i(),va=t(Be);a(Be),_(()=>d(va,`#${e(Xe).position??""}`)),i(Re,Be)};c(Oe,Re=>{e(Xe).position&&Re(He)})}a(ia);var Je=s(ia,2);{var aa=Re=>{var Be=mi();qe(Be,21,()=>e(Xe).climbs||[],Ce,(va,Ze)=>{var Ca=gi(),ya=Ae(Ca),ka=t(ya),xa=t(ka),Da=t(xa,!0);a(xa);var Fa=s(xa,2);{var La=J=>{var u=ui(),G=t(u);a(u),_(()=>d(G,`(${e(Ze).attemptCount??""} tries)`)),i(J,u)};c(Fa,J=>{e(Ze).attemptCount>1&&J(La)})}a(ka);var Ta=s(ka,2),$e=t(Ta);let ca;var Ea=t($e,!0);a($e),a(Ta),a(ya);var Ga=s(ya,2);{var Z=J=>{var u=fi(),G=t(u);a(u),_(()=>d(G,`"${e(Ze).notes??""}"`)),i(J,u)};c(Ga,J=>{e(Ze).notes&&J(Z)})}_(()=>{d(Da,e(Ze).name),ca=sa($e,1,"status-badge svelte-xyvf5r",null,ca,{top:e(Ze).status==="Top"||e(Ze).status==="Flash",zone:e(Ze).status==="Zone"}),d(Ea,e(Ze).status)}),i(va,Ca)}),a(Be),i(Re,Be)};c(Je,Re=>{e(Xe).climbs&&Re(aa)})}a(fa),_(()=>d(ga,e(Xe).name)),i(da,fa)}),a(Pe),i(Ne,Pe)};c(ne,Ne=>{e(o).rounds&&Ne(me)})}var De=s(ne,2);{var Ge=Ne=>{var Pe=yi(),da=t(Pe),Xe=t(da);a(da),a(Pe),_(()=>d(Xe,`Detailed Load: Fingers ${e(o).fingerLoad??""}/5, Shoulders ${e(o).shoulderLoad??""}/5, Forearms ${e(o).forearmLoad??""}/5`)),i(Ne,Pe)};c(De,Ne=>{(e(o).fingerLoad||e(o).shoulderLoad)&&Ne(Ge)})}var ea=s(De,2),Ke=t(ea);let je;var We=t(Ke,!0);a(Ke),a(ea),a(Fe),_(()=>{je=sa(Ke,1,"sync-status svelte-xyvf5r",null,je,{synced:e(o).syncStatus==="synced"}),d(We,e(o).syncStatus==="synced"?"‚úì Synced":"‚òÅ Local")}),ra(3,Fe,()=>ua,()=>({duration:150})),i(be,Fe)};c(ve,be=>{e(C).has(e(o).id)&&be(Ee)})}a(T),_((be,Fe,ne,me)=>{V=sa(T,1,"session-card svelte-xyvf5r",null,V,be),d(ke,e(o).customVenue||e(o).venue),d(N,Fe),d(q,e(o).type),d(A,ne),I=sa(g,1,"sync-dot",null,I,{synced:e(o).syncStatus==="synced"}),Qe(g,"title",e(o).syncStatus==="synced"?"Synced":"Local"),d(se,me)},[()=>({expanded:e(C).has(e(o).id)}),()=>new Date(e(o).date).toLocaleDateString(void 0,{weekday:"short",day:"numeric",month:"short"}),()=>ae(e(o)),()=>e(C).has(e(o).id)?"‚ñ≤":"‚ñº"]),i(n,T)});var O=s(y,2);{var x=n=>{var o=Si(),T=t(o);T.__click=re;var V=t(T);a(T),a(o),_(()=>d(V,`Load More (${e(r).length-e(D)} remaining)`)),i(n,o)};c(O,n=>{e(D)<e(r).length&&n(x)})}a(K),i($,K)};c(F,$=>{e(r).length===0?$(M):$(P,!1)},!0)}i(h,b)};c(Se,h=>{e(m)&&e(r).length===0?h(xe):h(te,!1)})}var j=s(Se,2);Pa(j,{get isOpen(){return e(z)},title:"Delete Competition",message:"Are you sure you want to delete this competition session? This action cannot be undone.",onConfirm:Q,onCancel:()=>l(z,!1)}),a(H),_(()=>ue.disabled=e(m)),i(ze,H),_a()}oa(["click","keydown"]);var qi=v('<button class="backdrop svelte-108px9u" aria-label="Close settings"></button> <div class="settings-modal svelte-108px9u" role="dialog" aria-modal="true"><div class="settings-header svelte-108px9u"><h3 class="svelte-108px9u">Settings</h3> <button class="close-btn svelte-108px9u">‚úï</button></div> <div class="settings-content"><div class="setting-item svelte-108px9u"><div class="setting-info svelte-108px9u"><span class="setting-label svelte-108px9u">Local Data</span> <span class="setting-desc svelte-108px9u">Clear all cached data on this device</span></div> <button class="btn-clear-cache svelte-108px9u">Clear Cache</button></div></div></div>',1),zi=v("<option> </option>"),Ci=v('<div class="view-container svelte-108px9u"><!></div>'),Fi=v('<div class="page svelte-108px9u"><div class="page-header svelte-108px9u"><div><h1 class="svelte-108px9u">üìä View Data</h1> <p class="subtitle svelte-108px9u">Browse your training history</p></div> <button class="settings-btn svelte-108px9u" aria-label="Settings">‚öôÔ∏è</button></div> <!> <!> <div class="content-card svelte-108px9u"><div class="form-group svelte-108px9u"><label for="activity-type" class="svelte-108px9u">Activity Type</label> <select id="activity-type" class="svelte-108px9u"><option disabled>Select an activity...</option><!></select></div> <!></div></div>');function Pi(ze,p){pa(p,!0);const r=[{value:"indoor_climb",label:"Indoor Climb",icon:"üßó"},{value:"outdoor_climb",label:"Outdoor Climb",icon:"‚õ∞Ô∏è"},{value:"gym_session",label:"Gym Session",icon:"üèãÔ∏è"},{value:"fingerboarding",label:"Fingerboarding",icon:"ü§è"},{value:"competition",label:"Competition",icon:"üèÜ"}];let m=k(""),C=k(!1),D=k(!1);function f(){l(C,!0)}function z(){l(C,!1)}function w(){l(C,!1),l(D,!0)}function B(){pt()}var Q=Fi(),de=t(Q),_e=s(t(de),2);_e.__click=f,a(de);var re=s(de,2);{var ae=te=>{var j=qi(),h=Ae(j);h.__click=z;var b=s(h,2),F=t(b),M=s(t(F),2);M.__click=z,a(F);var P=s(F,2),$=t(P),K=s(t($),2);K.__click=w,a($),a(P),a(b),ra(3,h,()=>dt,()=>({duration:200})),ra(3,b,()=>ct,()=>({duration:200,start:.9})),i(te,j)};c(re,te=>{e(C)&&te(ae)})}var H=s(re,2);Pa(H,{get isOpen(){return e(D)},title:"Clear all local data?",message:"Are you sure you want to clear all locally cached data? This will remove all sessions stored on this device. Data already synced to the cloud will be preserved.",confirmKeyword:"clear",onConfirm:B,onCancel:()=>l(D,!1)});var ce=s(H,2),ue=t(ce),ie=s(t(ue),2),W=t(ie);W.value=W.__value="";var le=s(W);qe(le,17,()=>r,te=>te.value,(te,j)=>{var h=zi(),b=t(h);a(h);var F={};_(()=>{d(b,`${e(j).icon??""} ${e(j).label??""}`),F!==(F=e(j).value)&&(h.value=(h.__value=e(j).value)??"")}),i(te,h)}),a(ie),a(ue);var Se=s(ue,2);{var xe=te=>{var j=Ci(),h=t(j);{var b=M=>{hs(M,{})},F=M=>{var P=Ye(),$=Ae(P);{var K=O=>{Sr(O,{})},y=O=>{var x=Ye(),n=Ae(x);{var o=V=>{Xr(V,{})},T=V=>{var X=Ye(),L=Ae(X);{var pe=ke=>{oi(ke,{})},oe=ke=>{var E=Ye(),N=Ae(E);{var fe=we=>{Ti(we,{})};c(N,we=>{e(m)==="competition"&&we(fe)},!0)}i(ke,E)};c(L,ke=>{e(m)==="fingerboarding"?ke(pe):ke(oe,!1)},!0)}i(V,X)};c(n,V=>{e(m)==="gym_session"?V(o):V(T,!1)},!0)}i(O,x)};c($,O=>{e(m)==="outdoor_climb"?O(K):O(y,!1)},!0)}i(M,P)};c(h,M=>{e(m)==="indoor_climb"?M(b):M(F,!1)})}a(j),i(te,j)};c(Se,te=>{e(m)&&te(xe)})}a(ce),a(Q),Sa(ie,()=>e(m),te=>l(m,te)),i(ze,Q),_a()}oa(["click"]);export{Pi as component};
