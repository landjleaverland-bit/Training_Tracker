import{f as d,a as i,c as ft,t as Le}from"../chunks/CKcnA5P_.js";import{w as Va,p as _t,c as l,r as a,s,j as e,t as I,a as mt,f as nt,aV as b,E as $e,o as va,F as t,d as ma,aG as Ae,aW as Bt,b0 as Ea,b1 as ca,k as Ie,e as be,b2 as Na,D as Fa,ac as ze,b3 as za,b4 as Yt,b5 as Oa,b6 as Da,b7 as Ba}from"../chunks/4c6jdw0Z.js";import{d as Qt,s as Z,e as ae}from"../chunks/K94srNfd.js";import{i as A}from"../chunks/CK8hGvwc.js";import{e as fe,i as _e,r as D,b as P,c as Aa,s as ot,d as Ra}from"../chunks/BVSa1UsB.js";import{s as Je}from"../chunks/9PGhKrW6.js";import{i as Ga,s as La,c as Qe,d as Ma,u as ha,m as ya,b as Sa,e as Pa,f as $a,h as Wa,j as Ua,k as Ja}from"../chunks/ChylFdpu.js";import{i as da,c as Ka,g as Ha,a as Ya,b as Qa,t as na,f as ga,E as Ta,d as Xa,D as Za,e as es,h as ts,j as as,s as ss}from"../chunks/C_Xd1Smc.js";import{p as at}from"../chunks/CfB7tKQ8.js";import{i as Xt}from"../chunks/DMFvxL8W.js";import{b as ls}from"../chunks/_6i5Cm5q.js";function ba(me){return function(...z){var u=z[0];return u.stopPropagation(),me?.apply(this,z)}}function Rt(me,z){var u=me.$$events?.[z.type],B=Va(u)?u.slice():u==null?[]:[u];for(var G of B)G.call(this,z)}var rs=d('<span class="placeholder svelte-1g8x5ph"> </span>'),is=d('<span class="chip-display"> </span>'),os=d('<button type="button"> </button>'),ns=d('<div class="multi-select-container svelte-1g8x5ph"><div class="chips svelte-1g8x5ph"><!></div> <div class="options-grid svelte-1g8x5ph"></div></div>');function Ot(me,z){_t(z,!0);let u=at(z,"selected",19,()=>[]),B=at(z,"placeholder",3,"Select options...");function G(R){let j=[...u()];R==="None"?j.includes("None")?j=[]:j=["None"]:(j=j.filter(w=>w!=="None"),j.includes(R)?j=j.filter(w=>w!==R):j.push(R)),z.onChange(j)}var _=ns(),F=l(_),g=l(F);{var W=R=>{var j=rs(),w=l(j,!0);a(j),I(()=>Z(w,B())),i(R,j)},re=R=>{var j=ft(),w=nt(j);fe(w,17,u,_e,(h,p)=>{var m=is(),S=l(m,!0);a(m),I(()=>Z(S,e(p))),i(h,m)}),i(R,j)};A(g,R=>{u().length===0?R(W):R(re,!1)})}a(F);var H=s(F,2);fe(H,21,()=>z.options,_e,(R,j)=>{var w=os();w.__click=()=>G(e(j));var h=l(w,!0);a(w),I(p=>{Je(w,1,`option-chip ${p??""}`,"svelte-1g8x5ph"),Z(h,e(j))},[()=>u().includes(e(j))?"selected":""]),i(R,w)}),a(H),a(_),i(me,_),mt()}Qt(["click"]);var vs=d('<div class="input-with-action svelte-1lf3qka"><input type="text" id="location-manual" placeholder="Enter custom location..." class="flat-left svelte-1lf3qka"/> <button type="button" class="action-btn flat-right svelte-1lf3qka" title="Back to list">‚úï</button></div>'),cs=d("<option> </option>"),ds=d('<select id="location" class="svelte-1lf3qka"><option disabled>Select location...</option><!></select>'),us=d("<option> </option>"),ps=d("<option> </option>"),fs=d('<th class="svelte-1lf3qka">Sport?</th>'),_s=d('<td class="center svelte-1lf3qka"><input type="checkbox" class="svelte-1lf3qka"/></td>'),ms=d('<span class="grade-error svelte-1lf3qka">Invalid</span>'),gs=d("<option> </option>"),bs=d('<button type="button" class="remove-btn svelte-1lf3qka">‚úï</button>'),hs=d('<tr><!><td class="svelte-1lf3qka"><input type="text" placeholder="Route name..." class="svelte-1lf3qka"/></td><td class="svelte-1lf3qka"><input type="text" placeholder="V3"/> <!></td><td class="svelte-1lf3qka"><select class="svelte-1lf3qka"></select></td><td class="svelte-1lf3qka"><input type="number" min="1" class="svelte-1lf3qka"/></td><td><textarea placeholder="Notes..." class="svelte-1lf3qka"></textarea></td><td class="center svelte-1lf3qka"><!></td></tr>'),ys=d("<div> </div>"),Ss=d('<div class="form-content svelte-1lf3qka"><h3 class="svelte-1lf3qka">üßó Indoor Climb</h3> <div class="form-row svelte-1lf3qka"><div class="form-group svelte-1lf3qka"><label for="date" class="svelte-1lf3qka">Date</label> <input type="date" id="date" class="svelte-1lf3qka"/></div> <div class="form-group svelte-1lf3qka"><label for="location" class="svelte-1lf3qka">Location</label> <!></div></div> <div class="form-group svelte-1lf3qka"><label for="climbing-type" class="svelte-1lf3qka">Climbing Type</label> <select id="climbing-type" class="svelte-1lf3qka"><option disabled>Select type...</option><!></select></div> <div class="load-section svelte-1lf3qka"><h4 class="svelte-1lf3qka">Load Metrics</h4> <div class="load-metrics svelte-1lf3qka"><div class="load-item svelte-1lf3qka"><label for="finger-load" class="svelte-1lf3qka">Finger</label> <input type="number" id="finger-load" min="1" max="5" class="svelte-1lf3qka"/> <span class="load-scale svelte-1lf3qka">/ 5</span></div> <div class="load-item svelte-1lf3qka"><label for="shoulder-load" class="svelte-1lf3qka">Shoulder</label> <input type="number" id="shoulder-load" min="1" max="5" class="svelte-1lf3qka"/> <span class="load-scale svelte-1lf3qka">/ 5</span></div> <div class="load-item svelte-1lf3qka"><label for="forearm-load" class="svelte-1lf3qka">Forearm</label> <input type="number" id="forearm-load" min="1" max="5" class="svelte-1lf3qka"/> <span class="load-scale svelte-1lf3qka">/ 5</span></div></div> <h4 class="mt-4 svelte-1lf3qka">Grip Metrics</h4> <div class="load-metrics svelte-1lf3qka"><div class="load-item svelte-1lf3qka"><label for="open-grip" class="svelte-1lf3qka">Open</label> <input type="number" id="open-grip" min="1" max="5" class="svelte-1lf3qka"/> <span class="load-scale svelte-1lf3qka">/ 5</span></div> <div class="load-item svelte-1lf3qka"><label for="crimp-grip" class="svelte-1lf3qka">Crimp</label> <input type="number" id="crimp-grip" min="1" max="5" class="svelte-1lf3qka"/> <span class="load-scale svelte-1lf3qka">/ 5</span></div> <div class="load-item svelte-1lf3qka"><label for="pinch-grip" class="svelte-1lf3qka">Pinch</label> <input type="number" id="pinch-grip" min="1" max="5" class="svelte-1lf3qka"/> <span class="load-scale svelte-1lf3qka">/ 5</span></div> <div class="load-item svelte-1lf3qka"><label for="sloper-grip" class="svelte-1lf3qka">Sloper</label> <input type="number" id="sloper-grip" min="1" max="5" class="svelte-1lf3qka"/> <span class="load-scale svelte-1lf3qka">/ 5</span></div> <div class="load-item svelte-1lf3qka"><label for="jug-grip" class="svelte-1lf3qka">Jug</label> <input type="number" id="jug-grip" min="1" max="5" class="svelte-1lf3qka"/> <span class="load-scale svelte-1lf3qka">/ 5</span></div></div></div> <div class="training-section svelte-1lf3qka"><h4 class="svelte-1lf3qka">Training Details</h4> <div class="training-grid svelte-1lf3qka"><div class="training-item svelte-1lf3qka"><label for="training-type" class="svelte-1lf3qka">Training Type</label> <!></div> <div class="training-item svelte-1lf3qka"><label for="difficulty" class="svelte-1lf3qka">Difficulty</label> <select id="difficulty" class="svelte-1lf3qka"></select></div> <div class="training-item svelte-1lf3qka"><label for="category" class="svelte-1lf3qka">Category</label> <!></div> <div class="training-item svelte-1lf3qka"><label for="energy-system" class="svelte-1lf3qka">Energy System</label> <!></div> <div class="training-item svelte-1lf3qka"><label for="technique-focus" class="svelte-1lf3qka">Technique Focus</label> <!></div> <div class="training-item svelte-1lf3qka"><label for="wall-angle" class="svelte-1lf3qka">Wall</label> <!></div></div></div> <div class="climbs-section svelte-1lf3qka"><h4 class="svelte-1lf3qka">Climbs</h4> <div class="table-container svelte-1lf3qka"><table class="climbs-table svelte-1lf3qka"><thead><tr><!><th class="svelte-1lf3qka">Name</th><th class="svelte-1lf3qka">Grade</th><th class="svelte-1lf3qka">Attempt</th><th class="svelte-1lf3qka">#</th><th class="svelte-1lf3qka">Notes</th><th class="svelte-1lf3qka"></th></tr></thead><tbody></tbody></table></div> <button type="button" class="add-btn svelte-1lf3qka">+ Add Climb</button></div> <div class="submit-section svelte-1lf3qka"><!> <button type="button" class="submit-btn svelte-1lf3qka"><!></button></div></div>');function ks(me,z){_t(z,!0);const u=["Rockstar Unit 3","Rockstar Unit 5","Rockstar Techno","Flashpoint Bristol","Redpoint Bristol","TCH Bristol","Other"],B=["Bouldering","Sport","Mixed"],G=["Onsight","Flash","Redpoint","Dogged","DNF"],_=["None","Projecting","Onsighting","Campusing","Repeaters"],F=["None","Easy","Medium","Hard","Max","Limit+"],g=["None","Strength","Strength-endurance","Power Endurance","Coordination","Slab Technique","Overhang technique","Warm-up","Power"],W=["None","Aerobic capacity","Aerobic lactic power","Anaerobic alactic capacity","Anaerobic alactic power","Anaerobic power","Anaerobic lactic capacity"],re=["None","Trusting feet","Double-clutch","Standing on volumes","Deadpointing","Flagging","Swapping feet","Edging","Smearing","Matching","Backstepping","Drop Knee","Stemming","Bridging","Laybacking","Mantling","Kneebar","Dyno","Pogo","Coordination Moves","Gastoning","Underclinging","Compressing","Heel Hook","Toe Hook","Bicycle"],H=["None","Overhang","Slab","Roof","Moon Board","Kilter Board","Beast","Circuit Board"],j=["V0-","4-","V0","4","V0+","4+","V1","5","V2","5+","V3","6A","V4","6B","V5","6C","V6","7A","V7","7A+","V8","7B","7B+","V9","7C","V10","7C+","V11","8A","V12","8A+","V13","8B","V14","8B+","V15","8C","V16","8C+","V17","9A"].map(c=>c.toLowerCase());let w=b(null),h=b($e(new Date().toISOString().split("T")[0])),p=b(""),m=b(""),S=b($e(["None"])),se=b("None"),J=b($e(["None"])),q=b($e(["None"])),V=b($e(["None"])),K=b($e(["None"])),ee=b(3),$=b(3),k=b(3),Q=b(3),E=b(3),y=b(3),x=b(3),N=b(3),L=b($e([{isSport:!1,name:"",grade:"",attemptType:"Flash",attemptsNum:1,notes:""}])),Y=b(!1);const X="indoor_climb_draft";va(()=>{const c=localStorage.getItem(X);if(c)try{const o=JSON.parse(c);o.date&&t(h,o.date,!0),o.location&&t(p,o.location,!0),o.isOtherLocation&&t(Y,o.isOtherLocation,!0),o.climbingType&&t(m,o.climbingType,!0),o.trainingTypes&&t(S,o.trainingTypes,!0),o.difficulty&&t(se,o.difficulty,!0),o.categories&&t(J,o.categories,!0),o.energySystems&&t(q,o.energySystems,!0),o.techniqueFocuses&&t(V,o.techniqueFocuses,!0),o.wallAngles&&t(K,o.wallAngles,!0),o.fingerLoad&&t(ee,o.fingerLoad,!0),o.shoulderLoad&&t($,o.shoulderLoad,!0),o.forearmLoad&&t(k,o.forearmLoad,!0),o.openGrip&&t(Q,o.openGrip,!0),o.crimpGrip&&t(E,o.crimpGrip,!0),o.pinchGrip&&t(y,o.pinchGrip,!0),o.sloperGrip&&t(x,o.sloperGrip,!0),o.jugGrip&&t(N,o.jugGrip,!0),o.climbs&&t(L,o.climbs,!0)}catch(o){console.error("Failed to restore draft",o)}}),ma(()=>{const c={date:e(h),location:e(p),isOtherLocation:e(Y),climbingType:e(m),trainingTypes:e(S),difficulty:e(se),categories:e(J),energySystems:e(q),techniqueFocuses:e(V),wallAngles:e(K),fingerLoad:e(ee),shoulderLoad:e($),forearmLoad:e(k),openGrip:e(Q),crimpGrip:e(E),pinchGrip:e(y),sloperGrip:e(x),jugGrip:e(N),climbs:e(L)};localStorage.setItem(X,JSON.stringify(c))});function le(){e(p)==="Other"&&(t(Y,!0),t(p,""))}function te(){t(Y,!1),t(p,"")}function ye(){t(L,[...e(L),{isSport:!1,name:"",grade:"",attemptType:"Flash",attemptsNum:1,notes:""}],!0)}function Ve(c){t(L,e(L).filter((o,oe)=>oe!==c),!0)}function Re(c,o){e(L)[c].attemptType=o,(o==="Flash"||o==="Onsight")&&(e(L)[c].attemptsNum=1)}function Me(c){t(w,c,!0)}function ue(){t(w,null)}let qe=Bt(()=>e(m)==="Mixed");function Fe(c){return e(m)==="Sport"?!0:e(m)==="Bouldering"?!1:c.isSport}function We(c){return c.trim()?j.includes(c.trim().toLowerCase()):!0}let ce=b("idle"),ne=b("");function ve(){return e(p)?e(m)?e(L).filter(o=>o.grade.trim()&&!We(o.grade)).length>0?"Please fix invalid grades":null:"Please select a climbing type":"Please select a location"}async function Oe(){const c=ve();if(c){t(ce,"error"),t(ne,c,!0);return}t(ce,"saving");try{const o=e(L).map(he=>({...he,isSport:Fe(he)})),oe={date:e(h),location:e(p),customLocation:e(Y)?e(p):void 0,climbingType:e(m),trainingTypes:e(S),difficulty:e(se),categories:e(J),energySystems:e(q),techniqueFocuses:e(V),wallAngles:e(K),fingerLoad:e(ee),shoulderLoad:e($),forearmLoad:e(k),openGrip:e(Q),crimpGrip:e(E),pinchGrip:e(y),sloperGrip:e(x),jugGrip:e(N),climbs:o},Ge=Ma(oe);if(da()){const he=await Ka(oe);he.ok?(ha(Ge.id,he.id),ya(he.id),t(ce,"success"),t(ne,"Session saved and synced!"),localStorage.removeItem(X)):(Sa(Ge.id),t(ce,"success"),t(ne,"Saved locally. Sync failed: "+(he.error||"Unknown error")),localStorage.removeItem(X))}else t(ce,"success"),t(ne,"Saved locally. Will sync when online."),localStorage.removeItem(X);window.dispatchEvent(new CustomEvent("session-saved")),setTimeout(()=>{ge()},2e3)}catch(o){t(ce,"error"),t(ne,"Failed to save session"),console.error("Save error:",o)}}function ge(){t(h,new Date().toISOString().split("T")[0],!0),t(p,""),t(Y,!1),t(m,""),t(S,["None"],!0),t(se,"None"),t(J,["None"],!0),t(q,["None"],!0),t(V,["None"],!0),t(K,["None"],!0),t(ee,3),t($,3),t(k,3),t(Q,3),t(E,3),t(y,3),t(x,3),t(N,3),t(L,[{isSport:!1,name:"",grade:"",attemptType:"Flash",attemptsNum:1,notes:""}],!0),t(ce,"idle"),t(ne,"")}var De=Ss(),Ce=s(l(De),2),Pe=l(Ce),Xe=s(l(Pe),2);D(Xe),a(Pe);var C=s(Pe,2),O=s(l(C),2);{var v=c=>{var o=vs(),oe=l(o);D(oe);var Ge=s(oe,2);Ge.__click=te,a(o),P(oe,()=>e(p),he=>t(p,he)),i(c,o)},f=c=>{var o=ds();o.__change=le;var oe=l(o);oe.value=oe.__value="";var Ge=s(oe);fe(Ge,17,()=>u,_e,(he,et)=>{var n=cs(),r=l(n,!0);a(n);var M={};I(()=>{Z(r,e(et)),M!==(M=e(et))&&(n.value=(n.__value=e(et))??"")}),i(he,n)}),a(o),Qe(o,()=>e(p),he=>t(p,he)),i(c,o)};A(O,c=>{e(Y)?c(v):c(f,!1)})}a(C),a(Ce);var T=s(Ce,2),U=s(l(T),2),ie=l(U);ie.value=ie.__value="";var xe=s(ie);fe(xe,17,()=>B,_e,(c,o)=>{var oe=us(),Ge=l(oe,!0);a(oe);var he={};I(()=>{Z(Ge,e(o)),he!==(he=e(o))&&(oe.value=(oe.__value=e(o))??"")}),i(c,oe)}),a(U),a(T);var Ze=s(T,2),gt=s(l(Ze),2),we=l(gt),Be=s(l(we),2);D(Be),Ae(2),a(we);var Te=s(we,2),Ke=s(l(Te),2);D(Ke),Ae(2),a(Te);var st=s(Te,2),He=s(l(st),2);D(He),Ae(2),a(st),a(gt);var je=s(gt,4),vt=l(je),ht=s(l(vt),2);D(ht),Ae(2),a(vt);var yt=s(vt,2),xt=s(l(yt),2);D(xt),Ae(2),a(yt);var St=s(yt,2),lt=s(l(St),2);D(lt),Ae(2),a(St);var wt=s(St,2),qt=s(l(wt),2);D(qt),Ae(2),a(wt);var Gt=s(wt,2),zt=s(l(Gt),2);D(zt),Ae(2),a(Gt),a(je),a(Ze);var Ct=s(Ze,2),Tt=s(l(Ct),2),kt=l(Tt),At=s(l(kt),2);Ot(At,{get options(){return _},get selected(){return e(S)},placeholder:"Select types...",onChange:c=>t(S,c,!0)}),a(kt);var Nt=s(kt,2),Ne=s(l(Nt),2);fe(Ne,21,()=>F,_e,(c,o)=>{var oe=ps(),Ge=l(oe,!0);a(oe);var he={};I(()=>{Z(Ge,e(o)),he!==(he=e(o))&&(oe.value=(oe.__value=e(o))??"")}),i(c,oe)}),a(Ne),a(Nt);var Ue=s(Nt,2),ct=s(l(Ue),2);Ot(ct,{get options(){return g},get selected(){return e(J)},placeholder:"Select categories...",onChange:c=>t(J,c,!0)}),a(Ue);var Ft=s(Ue,2),It=s(l(Ft),2);Ot(It,{get options(){return W},get selected(){return e(q)},placeholder:"Select systems...",onChange:c=>t(q,c,!0)}),a(Ft);var Vt=s(Ft,2),ka=s(l(Vt),2);Ot(ka,{get options(){return re},get selected(){return e(V)},placeholder:"Select focus...",onChange:c=>t(V,c,!0)}),a(Vt);var Mt=s(Vt,2),Zt=s(l(Mt),2);Ot(Zt,{get options(){return H},get selected(){return e(K)},placeholder:"Select angles...",onChange:c=>t(K,c,!0)}),a(Mt),a(Tt),a(Ct);var Dt=s(Ct,2),ea=s(l(Dt),2),Pt=l(ea),ta=l(Pt),aa=l(ta),xa=l(aa);{var sa=c=>{var o=fs();i(c,o)};A(xa,c=>{e(qe)&&c(sa)})}Ae(6),a(aa),a(ta);var $t=s(ta);fe($t,21,()=>e(L),_e,(c,o,oe)=>{var Ge=hs(),he=l(Ge);{var et=de=>{var Ye=_s(),it=l(Ye);D(it),a(Ye),Aa(it,()=>e(o).isSport,Ht=>e(o).isSport=Ht),i(de,Ye)};A(he,de=>{e(qe)&&de(et)})}var n=s(he),r=l(n);D(r),a(n);var M=s(n),Se=l(M);D(Se);let pe;var dt=s(Se,2);{var bt=de=>{var Ye=ms();i(de,Ye)};A(dt,de=>{We(e(o).grade)||de(bt)})}a(M);var tt=s(M),Ee=l(tt);Ee.__change=de=>Re(oe,de.target.value),fe(Ee,21,()=>G,_e,(de,Ye)=>{var it=gs(),Ht=l(it,!0);a(it);var _a={};I(()=>{Z(Ht,e(Ye)),_a!==(_a=e(Ye))&&(it.value=(it.__value=e(Ye))??"")}),i(de,it)}),a(Ee);var rt;Ga(Ee),a(tt);var Lt=s(tt),jt=l(Lt);D(jt),a(Lt);var Jt=s(Lt);let Kt;var ut=l(Jt);Ea(ut),a(Jt);var ra=s(Jt),ia=l(ra);{var oa=de=>{var Ye=bs();Ye.__click=()=>Ve(oe),i(de,Ye)};A(ia,de=>{e(L).length>1&&de(oa)})}a(ra),a(Ge),I(de=>{pe=Je(Se,1,"grade-input svelte-1lf3qka",null,pe,de),rt!==(rt=e(o).attemptType)&&(Ee.value=(Ee.__value=e(o).attemptType)??"",La(Ee,e(o).attemptType)),jt.disabled=e(o).attemptType==="Flash",Kt=Je(Jt,1,"notes-cell svelte-1lf3qka",null,Kt,{expanded:e(w)===oe})},[()=>({invalid:!We(e(o).grade)})]),P(r,()=>e(o).name,de=>e(o).name=de),P(Se,()=>e(o).grade,de=>e(o).grade=de),P(jt,()=>e(o).attemptsNum,de=>e(o).attemptsNum=de),ae("focus",ut,()=>Me(oe)),ae("blur",ut,ue),P(ut,()=>e(o).notes,de=>e(o).notes=de),i(c,Ge)}),a($t),a(Pt),a(ea);var ua=s(ea,2);ua.__click=ye,a(Dt);var Wt=s(Dt,2),la=l(Wt);{var wa=c=>{var o=ys();let oe;var Ge=l(o,!0);a(o),I(()=>{oe=Je(o,1,"save-message svelte-1lf3qka",null,oe,{success:e(ce)==="success",error:e(ce)==="error"}),Z(Ge,e(ne))}),i(c,o)};A(la,c=>{e(ne)&&c(wa)})}var Ut=s(la,2);Ut.__click=Oe;var pa=l(Ut);{var qa=c=>{var o=Le("Saving...");i(c,o)},fa=c=>{var o=ft(),oe=nt(o);{var Ge=et=>{var n=Le("‚úì Saved!");i(et,n)},he=et=>{var n=Le("Save Session");i(et,n)};A(oe,et=>{e(ce)==="success"?et(Ge):et(he,!1)},!0)}i(c,o)};A(pa,c=>{e(ce)==="saving"?c(qa):c(fa,!1)})}a(Ut),a(Wt),a(De),I(()=>Ut.disabled=e(ce)==="saving"),P(Xe,()=>e(h),c=>t(h,c)),Qe(U,()=>e(m),c=>t(m,c)),P(Be,()=>e(ee),c=>t(ee,c)),P(Ke,()=>e($),c=>t($,c)),P(He,()=>e(k),c=>t(k,c)),P(ht,()=>e(Q),c=>t(Q,c)),P(xt,()=>e(E),c=>t(E,c)),P(lt,()=>e(y),c=>t(y,c)),P(qt,()=>e(x),c=>t(x,c)),P(zt,()=>e(N),c=>t(N,c)),Qe(Ne,()=>e(se),c=>t(se,c)),i(me,De),mt()}Qt(["click","change"]);var xs=d("<option> </option>"),ws=d('<div class="input-with-action svelte-15o2ys1"><input type="text" id="crag-manual" placeholder="Enter custom crag name..." class="flat-left svelte-15o2ys1"/> <button type="button" class="action-btn flat-right svelte-15o2ys1" title="Back to list">‚úï</button></div>'),qs=d("<option> </option>"),Cs=d("<option>Other (Manual Entry)</option>"),Ts=d('<select id="crag" class="svelte-15o2ys1"><option disabled> </option><!><!></select>'),Ns=d("<option> </option>"),Fs=d("<option> </option>"),Os=d('<th class="svelte-15o2ys1">Sport?</th>'),Gs=d('<td class="center svelte-15o2ys1"><input type="checkbox" class="svelte-15o2ys1"/></td>'),Ls=d('<span class="grade-error svelte-15o2ys1">Invalid</span>'),js=d("<option> </option>"),Es=d('<button type="button" class="remove-btn svelte-15o2ys1">‚úï</button>'),zs=d('<tr><!><td class="svelte-15o2ys1"><input type="text" placeholder="Route name..." class="svelte-15o2ys1"/></td><td class="svelte-15o2ys1"><input type="text" placeholder="V3"/> <!></td><td class="svelte-15o2ys1"><select class="svelte-15o2ys1"></select></td><td class="svelte-15o2ys1"><input type="number" min="1" class="svelte-15o2ys1"/></td><td><textarea placeholder="Notes..." class="svelte-15o2ys1"></textarea></td><td class="center svelte-15o2ys1"><!></td></tr>'),As=d("<div> </div>"),Is=d('<div class="form-content svelte-15o2ys1"><h3 class="svelte-15o2ys1">‚õ∞Ô∏è Outdoor Climb</h3> <div class="form-row svelte-15o2ys1"><div class="form-group svelte-15o2ys1"><label for="date" class="svelte-15o2ys1">Date</label> <input type="date" id="date" class="svelte-15o2ys1"/></div> <div class="form-group svelte-15o2ys1"><label for="area" class="svelte-15o2ys1">Area</label> <select id="area" class="svelte-15o2ys1"><option disabled>Select area...</option><!></select></div></div> <div class="form-row svelte-15o2ys1"><div class="form-group svelte-15o2ys1"><label for="crag" class="svelte-15o2ys1">Crag</label> <!></div> <div class="form-group svelte-15o2ys1"><label for="sector" class="svelte-15o2ys1">Wall / Sector</label> <input type="text" id="sector" placeholder="Enter sector or wall name..." class="svelte-15o2ys1"/></div></div> <div class="form-group svelte-15o2ys1"><label for="climbing-type" class="svelte-15o2ys1">Climbing Type</label> <select id="climbing-type" class="svelte-15o2ys1"><option disabled>Select type...</option><!></select></div> <div class="load-section svelte-15o2ys1"><h4 class="svelte-15o2ys1">Load Metrics</h4> <div class="load-metrics svelte-15o2ys1"><div class="load-item svelte-15o2ys1"><label for="finger-load" class="svelte-15o2ys1">Finger</label> <input type="number" id="finger-load" min="1" max="5" class="svelte-15o2ys1"/> <span class="load-scale svelte-15o2ys1">/ 5</span></div> <div class="load-item svelte-15o2ys1"><label for="shoulder-load" class="svelte-15o2ys1">Shoulder</label> <input type="number" id="shoulder-load" min="1" max="5" class="svelte-15o2ys1"/> <span class="load-scale svelte-15o2ys1">/ 5</span></div> <div class="load-item svelte-15o2ys1"><label for="forearm-load" class="svelte-15o2ys1">Forearm</label> <input type="number" id="forearm-load" min="1" max="5" class="svelte-15o2ys1"/> <span class="load-scale svelte-15o2ys1">/ 5</span></div></div> <h4 class="mt-4 svelte-15o2ys1">Grip Metrics</h4> <div class="load-metrics svelte-15o2ys1"><div class="load-item svelte-15o2ys1"><label for="open-grip" class="svelte-15o2ys1">Open</label> <input type="number" id="open-grip" min="1" max="5" class="svelte-15o2ys1"/> <span class="load-scale svelte-15o2ys1">/ 5</span></div> <div class="load-item svelte-15o2ys1"><label for="crimp-grip" class="svelte-15o2ys1">Crimp</label> <input type="number" id="crimp-grip" min="1" max="5" class="svelte-15o2ys1"/> <span class="load-scale svelte-15o2ys1">/ 5</span></div> <div class="load-item svelte-15o2ys1"><label for="pinch-grip" class="svelte-15o2ys1">Pinch</label> <input type="number" id="pinch-grip" min="1" max="5" class="svelte-15o2ys1"/> <span class="load-scale svelte-15o2ys1">/ 5</span></div> <div class="load-item svelte-15o2ys1"><label for="sloper-grip" class="svelte-15o2ys1">Sloper</label> <input type="number" id="sloper-grip" min="1" max="5" class="svelte-15o2ys1"/> <span class="load-scale svelte-15o2ys1">/ 5</span></div> <div class="load-item svelte-15o2ys1"><label for="jug-grip" class="svelte-15o2ys1">Jug</label> <input type="number" id="jug-grip" min="1" max="5" class="svelte-15o2ys1"/> <span class="load-scale svelte-15o2ys1">/ 5</span></div></div></div> <div class="training-section svelte-15o2ys1"><h4 class="svelte-15o2ys1">Training Details</h4> <div class="training-grid svelte-15o2ys1"><div class="training-item svelte-15o2ys1"><label for="training-type" class="svelte-15o2ys1">Training Type</label> <!></div> <div class="training-item svelte-15o2ys1"><label for="difficulty" class="svelte-15o2ys1">Difficulty</label> <select id="difficulty" class="svelte-15o2ys1"></select></div> <div class="training-item svelte-15o2ys1"><label for="category" class="svelte-15o2ys1">Category</label> <!></div> <div class="training-item svelte-15o2ys1"><label for="energy-system" class="svelte-15o2ys1">Energy System</label> <!></div> <div class="training-item svelte-15o2ys1"><label for="technique-focus" class="svelte-15o2ys1">Technique Focus</label> <!></div></div></div> <div class="climbs-section svelte-15o2ys1"><h4 class="svelte-15o2ys1">Climbs</h4> <div class="table-container svelte-15o2ys1"><table class="climbs-table svelte-15o2ys1"><thead><tr><!><th class="svelte-15o2ys1">Name</th><th class="svelte-15o2ys1">Grade</th><th class="svelte-15o2ys1">Attempt</th><th class="svelte-15o2ys1">#</th><th class="svelte-15o2ys1">Notes</th><th class="svelte-15o2ys1"></th></tr></thead><tbody></tbody></table></div> <button type="button" class="add-btn svelte-15o2ys1">+ Add Climb</button></div> <div class="submit-section svelte-15o2ys1"><!> <button type="button" class="submit-btn svelte-15o2ys1"><!></button></div></div>');function Vs(me,z){_t(z,!0);const u=Ha(),B=["Boulder","Sport","Trad"],G=["Onsight","Flash","Redpoint","Dogged","DNF"],_=["None","Projecting","Onsighting","Campusing","Repeaters"],F=["None","Easy","Medium","Hard","Max","Limit+"],g=["None","Technique","Strength","Strength-endurance","Warm-up","Power"],W=["None","Aerobic capacity","Aerobic lactic power","Anaerobic alactic capacity","Anaerobic alactic power","Anaerobic power","Anaerobic lactic capacity"],re=["None","Double-clutch","Standing on volumes","Trusting feet"],R=["V0-","4-","V0","4","V0+","4+","V1","5","V2","5+","V3","6A","V4","6B","V5","6C","V6","7A","V7","7A+","V8","7B","7B+","V9","7C","V10","7C+","V11","8A","V12","8A+","V13","8B","V14","8B+","V15","8C","V16","8C+","V17","9A"].map(n=>n.toLowerCase());let j=b(null),w=b($e(new Date().toISOString().split("T")[0])),h=b(""),p=b(""),m=b(""),S=b(""),se=b($e(["None"])),J=b("None"),q=b($e(["None"])),V=b($e(["None"])),K=b($e(["None"])),ee=b(3),$=b(3),k=b(3),Q=b(3),E=b(3),y=b(3),x=b(3),N=b(3),L=b($e([{isSport:!1,name:"",grade:"",attemptType:"Flash",attemptsNum:1,notes:""}])),Y=Bt(()=>e(h)?Qa(e(h)):[]),X=b(!1);const le="outdoor_climb_draft";va(()=>{const n=localStorage.getItem(le);if(n)try{const r=JSON.parse(n);r.date&&t(w,r.date,!0),r.area&&t(h,r.area,!0),r.crag&&t(p,r.crag,!0),r.sector&&t(m,r.sector,!0),r.isOtherCrag&&t(X,r.isOtherCrag,!0),r.climbingType&&t(S,r.climbingType,!0),r.trainingTypes&&t(se,r.trainingTypes,!0),r.difficulty&&t(J,r.difficulty,!0),r.categories&&t(q,r.categories,!0),r.energySystems&&t(V,r.energySystems,!0),r.techniqueFocuses&&t(K,r.techniqueFocuses,!0),r.fingerLoad&&t(ee,r.fingerLoad,!0),r.shoulderLoad&&t($,r.shoulderLoad,!0),r.forearmLoad&&t(k,r.forearmLoad,!0),r.openGrip&&t(Q,r.openGrip,!0),r.crimpGrip&&t(E,r.crimpGrip,!0),r.pinchGrip&&t(y,r.pinchGrip,!0),r.sloperGrip&&t(x,r.sloperGrip,!0),r.jugGrip&&t(N,r.jugGrip,!0),r.climbs&&t(L,r.climbs,!0)}catch(r){console.error("Failed to restore draft",r)}}),ma(()=>{const n={date:e(w),area:e(h),crag:e(p),sector:e(m),isOtherCrag:e(X),climbingType:e(S),trainingTypes:e(se),difficulty:e(J),categories:e(q),energySystems:e(V),techniqueFocuses:e(K),fingerLoad:e(ee),shoulderLoad:e($),forearmLoad:e(k),openGrip:e(Q),crimpGrip:e(E),pinchGrip:e(y),sloperGrip:e(x),jugGrip:e(N),climbs:e(L)};localStorage.setItem(le,JSON.stringify(n))}),ma(()=>{e(h)&&(t(p,""),t(X,!1))});function te(){e(p)==="Other"&&(t(X,!0),t(p,""))}function ye(){t(X,!1),t(p,"")}function Ve(){t(L,[...e(L),{isSport:!1,name:"",grade:"",attemptType:"Flash",attemptsNum:1,notes:""}],!0)}function Re(n){t(L,e(L).filter((r,M)=>M!==n),!0)}function Me(n,r){e(L)[n].attemptType=r,(r==="Flash"||r==="Onsight")&&(e(L)[n].attemptsNum=1)}function ue(n){t(j,n,!0)}function qe(){t(j,null)}let Fe=Bt(()=>e(S)==="Trad");function We(n){return e(S)==="Sport"?!0:e(S)==="Boulder"?!1:n.isSport}function ce(n){return n.trim()?R.includes(n.trim().toLowerCase()):!0}let ne=b("idle"),ve=b("");function Oe(){return e(h)?e(p)?e(S)?e(L).filter(r=>r.grade.trim()&&!ce(r.grade)).length>0?"Please fix invalid grades":null:"Please select a climbing type":"Please select a crag":"Please select an area"}async function ge(){const n=Oe();if(n){t(ne,"error"),t(ve,n,!0);return}t(ne,"saving");try{const r=e(L).map(pe=>({...pe,isSport:We(pe)})),M={date:e(w),area:e(h),crag:e(p),sector:e(m)||void 0,climbingType:e(S),trainingTypes:e(se),difficulty:e(J),categories:e(q),energySystems:e(V),techniqueFocuses:e(K),fingerLoad:e(ee),shoulderLoad:e($),forearmLoad:e(k),openGrip:e(Q),crimpGrip:e(E),pinchGrip:e(y),sloperGrip:e(x),jugGrip:e(N),climbs:r},Se=Pa(M);if(da()){const pe=await Ya(M);pe.ok?(ha(Se.id,pe.id),ya(pe.id),t(ne,"success"),t(ve,"Session saved and synced!"),localStorage.removeItem(le)):(Sa(Se.id),t(ne,"success"),t(ve,"Saved locally. Sync failed: "+(pe.error||"Unknown error")),localStorage.removeItem(le))}else t(ne,"success"),t(ve,"Saved locally. Will sync when online."),localStorage.removeItem(le);window.dispatchEvent(new CustomEvent("session-saved")),setTimeout(()=>{De()},2e3)}catch(r){t(ne,"error"),t(ve,"Failed to save session"),console.error("Save error:",r)}}function De(){t(w,new Date().toISOString().split("T")[0],!0),t(h,""),t(p,""),t(m,""),t(S,""),t(se,["None"],!0),t(J,"None"),t(q,["None"],!0),t(V,["None"],!0),t(K,["None"],!0),t(ee,3),t($,3),t(k,3),t(Q,3),t(E,3),t(y,3),t(x,3),t(N,3),t(L,[{isSport:!1,name:"",grade:"",attemptType:"Flash",attemptsNum:1,notes:""}],!0),t(ne,"idle"),t(ve,"")}var Ce=Is(),Pe=s(l(Ce),2),Xe=l(Pe),C=s(l(Xe),2);D(C),a(Xe);var O=s(Xe,2),v=s(l(O),2),f=l(v);f.value=f.__value="";var T=s(f);fe(T,17,()=>u,_e,(n,r)=>{var M=xs(),Se=l(M,!0);a(M);var pe={};I(()=>{Z(Se,e(r)),pe!==(pe=e(r))&&(M.value=(M.__value=e(r))??"")}),i(n,M)}),a(v),a(O),a(Pe);var U=s(Pe,2),ie=l(U),xe=s(l(ie),2);{var Ze=n=>{var r=ws(),M=l(r);D(M);var Se=s(M,2);Se.__click=ye,a(r),P(M,()=>e(p),pe=>t(p,pe)),i(n,r)},gt=n=>{var r=Ts();r.__change=te;var M=l(r),Se=l(M,!0);a(M),M.value=M.__value="";var pe=s(M);fe(pe,17,()=>e(Y),_e,(tt,Ee)=>{var rt=qs(),Lt=l(rt,!0);a(rt);var jt={};I(()=>{Z(Lt,e(Ee)),jt!==(jt=e(Ee))&&(rt.value=(rt.__value=e(Ee))??"")}),i(tt,rt)});var dt=s(pe);{var bt=tt=>{var Ee=Cs();Ee.value=Ee.__value="Other",i(tt,Ee)};A(dt,tt=>{e(h)&&tt(bt)})}a(r),I(()=>{r.disabled=!e(h),Z(Se,e(h)?"Select crag...":"Select area first...")}),Qe(r,()=>e(p),tt=>t(p,tt)),i(n,r)};A(xe,n=>{e(X)?n(Ze):n(gt,!1)})}a(ie);var we=s(ie,2),Be=s(l(we),2);D(Be),a(we),a(U);var Te=s(U,2),Ke=s(l(Te),2),st=l(Ke);st.value=st.__value="";var He=s(st);fe(He,17,()=>B,_e,(n,r)=>{var M=Ns(),Se=l(M,!0);a(M);var pe={};I(()=>{Z(Se,e(r)),pe!==(pe=e(r))&&(M.value=(M.__value=e(r))??"")}),i(n,M)}),a(Ke),a(Te);var je=s(Te,2),vt=s(l(je),2),ht=l(vt),yt=s(l(ht),2);D(yt),Ae(2),a(ht);var xt=s(ht,2),St=s(l(xt),2);D(St),Ae(2),a(xt);var lt=s(xt,2),wt=s(l(lt),2);D(wt),Ae(2),a(lt),a(vt);var qt=s(vt,4),Gt=l(qt),zt=s(l(Gt),2);D(zt),Ae(2),a(Gt);var Ct=s(Gt,2),Tt=s(l(Ct),2);D(Tt),Ae(2),a(Ct);var kt=s(Ct,2),At=s(l(kt),2);D(At),Ae(2),a(kt);var Nt=s(kt,2),Ne=s(l(Nt),2);D(Ne),Ae(2),a(Nt);var Ue=s(Nt,2),ct=s(l(Ue),2);D(ct),Ae(2),a(Ue),a(qt),a(je);var Ft=s(je,2),It=s(l(Ft),2),Vt=l(It),ka=s(l(Vt),2);Ot(ka,{get options(){return _},get selected(){return e(se)},placeholder:"Select types...",onChange:n=>t(se,n,!0)}),a(Vt);var Mt=s(Vt,2),Zt=s(l(Mt),2);fe(Zt,21,()=>F,_e,(n,r)=>{var M=Fs(),Se=l(M,!0);a(M);var pe={};I(()=>{Z(Se,e(r)),pe!==(pe=e(r))&&(M.value=(M.__value=e(r))??"")}),i(n,M)}),a(Zt),a(Mt);var Dt=s(Mt,2),ea=s(l(Dt),2);Ot(ea,{get options(){return g},get selected(){return e(q)},placeholder:"Select categories...",onChange:n=>t(q,n,!0)}),a(Dt);var Pt=s(Dt,2),ta=s(l(Pt),2);Ot(ta,{get options(){return W},get selected(){return e(V)},placeholder:"Select systems...",onChange:n=>t(V,n,!0)}),a(Pt);var aa=s(Pt,2),xa=s(l(aa),2);Ot(xa,{get options(){return re},get selected(){return e(K)},placeholder:"Select focus...",onChange:n=>t(K,n,!0)}),a(aa),a(It),a(Ft);var sa=s(Ft,2),$t=s(l(sa),2),ua=l($t),Wt=l(ua),la=l(Wt),wa=l(la);{var Ut=n=>{var r=Os();i(n,r)};A(wa,n=>{e(Fe)&&n(Ut)})}Ae(6),a(la),a(Wt);var pa=s(Wt);fe(pa,21,()=>e(L),_e,(n,r,M)=>{var Se=zs(),pe=l(Se);{var dt=ke=>{var pt=Gs(),Et=l(pt);D(Et),a(pt),Aa(Et,()=>e(r).isSport,Ca=>e(r).isSport=Ca),i(ke,pt)};A(pe,ke=>{e(Fe)&&ke(dt)})}var bt=s(pe),tt=l(bt);D(tt),a(bt);var Ee=s(bt),rt=l(Ee);D(rt);let Lt;var jt=s(rt,2);{var Jt=ke=>{var pt=Ls();i(ke,pt)};A(jt,ke=>{ce(e(r).grade)||ke(Jt)})}a(Ee);var Kt=s(Ee),ut=l(Kt);ut.__change=ke=>Me(M,ke.target.value),fe(ut,21,()=>G,_e,(ke,pt)=>{var Et=js(),Ca=l(Et,!0);a(Et);var ja={};I(()=>{Z(Ca,e(pt)),ja!==(ja=e(pt))&&(Et.value=(Et.__value=e(pt))??"")}),i(ke,Et)}),a(ut);var ra;Ga(ut),a(Kt);var ia=s(Kt),oa=l(ia);D(oa),a(ia);var de=s(ia);let Ye;var it=l(de);Ea(it),a(de);var Ht=s(de),_a=l(Ht);{var Ia=ke=>{var pt=Es();pt.__click=()=>Re(M),i(ke,pt)};A(_a,ke=>{e(L).length>1&&ke(Ia)})}a(Ht),a(Se),I(ke=>{Lt=Je(rt,1,"grade-input svelte-15o2ys1",null,Lt,ke),ra!==(ra=e(r).attemptType)&&(ut.value=(ut.__value=e(r).attemptType)??"",La(ut,e(r).attemptType)),oa.disabled=e(r).attemptType==="Flash",Ye=Je(de,1,"notes-cell svelte-15o2ys1",null,Ye,{expanded:e(j)===M})},[()=>({invalid:!ce(e(r).grade)})]),P(tt,()=>e(r).name,ke=>e(r).name=ke),P(rt,()=>e(r).grade,ke=>e(r).grade=ke),P(oa,()=>e(r).attemptsNum,ke=>e(r).attemptsNum=ke),ae("focus",it,()=>ue(M)),ae("blur",it,qe),P(it,()=>e(r).notes,ke=>e(r).notes=ke),i(n,Se)}),a(pa),a(ua),a($t);var qa=s($t,2);qa.__click=Ve,a(sa);var fa=s(sa,2),c=l(fa);{var o=n=>{var r=As();let M;var Se=l(r,!0);a(r),I(()=>{M=Je(r,1,"save-message svelte-15o2ys1",null,M,{success:e(ne)==="success",error:e(ne)==="error"}),Z(Se,e(ve))}),i(n,r)};A(c,n=>{e(ve)&&n(o)})}var oe=s(c,2);oe.__click=ge;var Ge=l(oe);{var he=n=>{var r=Le("Saving...");i(n,r)},et=n=>{var r=ft(),M=nt(r);{var Se=dt=>{var bt=Le("‚úì Saved!");i(dt,bt)},pe=dt=>{var bt=Le("Save Session");i(dt,bt)};A(M,dt=>{e(ne)==="success"?dt(Se):dt(pe,!1)},!0)}i(n,r)};A(Ge,n=>{e(ne)==="saving"?n(he):n(et,!1)})}a(oe),a(fa),a(Ce),I(()=>oe.disabled=e(ne)==="saving"),P(C,()=>e(w),n=>t(w,n)),Qe(v,()=>e(h),n=>t(h,n)),P(Be,()=>e(m),n=>t(m,n)),Qe(Ke,()=>e(S),n=>t(S,n)),P(yt,()=>e(ee),n=>t(ee,n)),P(St,()=>e($),n=>t($,n)),P(wt,()=>e(k),n=>t(k,n)),P(zt,()=>e(Q),n=>t(Q,n)),P(Tt,()=>e(E),n=>t(E,n)),P(At,()=>e(y),n=>t(y,n)),P(Ne,()=>e(x),n=>t(x,n)),P(ct,()=>e(N),n=>t(N,n)),Qe(Zt,()=>e(J),n=>t(J,n)),i(me,Ce),mt()}Qt(["click","change"]);var Ds=d('<div><div class="col set-num svelte-ow8x7m"> </div> <div class="col prev svelte-ow8x7m"><!></div> <div class="col weight svelte-ow8x7m"><input type="number" class="svelte-ow8x7m"/></div> <div class="col reps svelte-ow8x7m"><input type="number" class="svelte-ow8x7m"/></div> <div class="col check svelte-ow8x7m"><button><!></button></div></div>');function Bs(me,z){_t(z,!1);let u=at(z,"setNumber",8),B=at(z,"prevSet",8,null),G=at(z,"set",12);const _=ca();function F(){G(G().completed=!G().completed,!0),_("change",G()),G().completed&&_("complete")}function g(k){_("focus",{field:k,value:G()[k],set:G()})}Xt();var W=Ds();let re;var H=l(W),R=l(H,!0);a(H);var j=s(H,2),w=l(j);{var h=k=>{var Q=Le();I(()=>Z(Q,`${Ie(B()),be(()=>B().weight)??""}kg x ${Ie(B()),be(()=>B().reps)??""}`)),i(k,Q)},p=k=>{var Q=Le("-");i(k,Q)};A(w,k=>{B()?k(h):k(p,!1)})}a(j);var m=s(j,2),S=l(m);D(S),a(m);var se=s(m,2),J=l(se);D(J),a(se);var q=s(se,2),V=l(q);let K;var ee=l(V);{var $=k=>{var Q=Le("‚úì");i(k,Q)};A(ee,k=>{Ie(G()),be(()=>G().completed)&&k($)})}a(V),a(q),a(W),I((k,Q)=>{re=Je(W,1,"set-row svelte-ow8x7m",null,re,{completed:G().completed}),Z(R,u()),ot(S,"placeholder",k),ot(J,"placeholder",Q),K=Je(V,1,"check-btn svelte-ow8x7m",null,K,{checked:G().completed})},[()=>(Ie(B()),be(()=>B()?B().weight.toString():"-")),()=>(Ie(B()),be(()=>B()?B().reps.toString():"-"))]),P(S,()=>G().weight,k=>G(G().weight=k,!0)),ae("focus",S,()=>g("weight")),P(J,()=>G().reps,k=>G(G().reps=k,!0)),ae("focus",J,()=>g("reps")),ae("click",V,F),i(me,W),mt()}var Rs=d('<div class="exercise-card svelte-1ni79z8"><div class="header svelte-1ni79z8"><div class="title-group svelte-1ni79z8"><button class="icon-btn info-btn svelte-1ni79z8" aria-label="Exercise Info"><div class="info-icon svelte-1ni79z8">?</div></button> <h4 class="svelte-1ni79z8"> </h4></div> <button class="icon-btn delete-btn svelte-1ni79z8" aria-label="Delete Exercise">üóëÔ∏è</button></div> <div class="table-header svelte-1ni79z8"><div class="col">Set</div> <div class="col">Previous</div> <div class="col">kg</div> <div class="col">Reps</div> <div class="col">‚úì</div></div> <div class="sets"></div> <button class="add-set-btn svelte-1ni79z8">+ Add Set</button></div>');function Ms(me,z){_t(z,!1);let u=at(z,"exercise",12),B=at(z,"prevExercise",8,void 0);const G=ca();function _(){const p=u().sets[u().sets.length-1],m={weight:p?p.weight:0,reps:p?p.reps:0,isWarmup:!1,isFailure:!1,isDropSet:!1,completed:!1};u(u().sets=[...u().sets,m],!0)}Xt();var F=Rs(),g=l(F),W=l(g),re=l(W),H=s(re,2),R=l(H,!0);a(H),a(W);var j=s(W,2);a(g);var w=s(g,4);fe(w,5,()=>(Ie(u()),be(()=>u().sets)),_e,(p,m,S)=>{{let se=Fa(()=>(Ie(B()),be(()=>B()?.sets[S]||null)));Bs(p,{setNumber:S+1,get prevSet(){return e(se)},get set(){return(Ie(u()),be(()=>u().sets))[S]},set set(J){(Ie(u()),be(()=>u().sets))[S]=J,Na(()=>u())},$$events:{complete(J){Rt.call(this,z,J)},focus(J){Rt.call(this,z,J)},change(J){Rt.call(this,z,J)}},$$legacy:!0})}}),a(w);var h=s(w,2);a(F),I(()=>Z(R,(Ie(u()),be(()=>u().name)))),ae("click",re,()=>G("info",u())),ae("click",j,()=>G("delete",u())),ae("click",h,_),i(me,F),mt()}var Ps=d('<div class="keypad svelte-1fay4f8"><div class="header svelte-1fay4f8"><span class="label svelte-1fay4f8"> </span> <div class="display svelte-1fay4f8" role="textbox" aria-readonly="true"> </div></div> <div class="quick-adds svelte-1fay4f8"><button class="svelte-1fay4f8">+2.5</button> <button class="svelte-1fay4f8">+5</button> <button class="svelte-1fay4f8">+10</button></div> <div class="grid svelte-1fay4f8"><button class="svelte-1fay4f8">1</button> <button class="svelte-1fay4f8">2</button> <button class="svelte-1fay4f8">3</button> <button class="svelte-1fay4f8">4</button> <button class="svelte-1fay4f8">5</button> <button class="svelte-1fay4f8">6</button> <button class="svelte-1fay4f8">7</button> <button class="svelte-1fay4f8">8</button> <button class="svelte-1fay4f8">9</button> <button class="action svelte-1fay4f8">C</button> <button class="svelte-1fay4f8">0</button> <button class="action svelte-1fay4f8">‚å´</button></div></div>');function $s(me,z){_t(z,!1);let u=at(z,"value",8,null),B=at(z,"label",8,"Value");const G=ca();function _(Y){const X=u()?.toString()||"";if(X.length>=5)return;const le=parseFloat(X+Y.toString());G("change",le)}function F(){G("change",0)}function g(){const Y=u()?.toString()||"";if(Y.length<=1){G("change",0);return}const X=parseFloat(Y.slice(0,-1));G("change",X)}function W(Y){G("change",(u()||0)+Y)}Xt();var re=Ps(),H=l(re),R=l(H),j=l(R,!0);a(R);var w=s(R,2),h=l(w,!0);a(w),a(H);var p=s(H,2),m=l(p),S=s(m,2),se=s(S,2);a(p);var J=s(p,2),q=l(J),V=s(q,2),K=s(V,2),ee=s(K,2),$=s(ee,2),k=s($,2),Q=s(k,2),E=s(Q,2),y=s(E,2),x=s(y,2),N=s(x,2),L=s(N,2);a(J),a(re),I(()=>{Z(j,B()),ot(w,"aria-label",B()),Z(h,u()||0)}),ae("click",m,()=>W(2.5)),ae("click",S,()=>W(5)),ae("click",se,()=>W(10)),ae("click",q,()=>_(1)),ae("click",V,()=>_(2)),ae("click",K,()=>_(3)),ae("click",ee,()=>_(4)),ae("click",$,()=>_(5)),ae("click",k,()=>_(6)),ae("click",Q,()=>_(7)),ae("click",E,()=>_(8)),ae("click",y,()=>_(9)),ae("click",x,F),ae("click",N,()=>_(0)),ae("click",L,g),i(me,re),mt()}var Ws=d('<div class="rest-timer svelte-18i4gcv"><div class="timer-display svelte-18i4gcv"><span class="label svelte-18i4gcv">Rest</span> <span class="time svelte-18i4gcv"> </span></div> <div class="controls svelte-18i4gcv"><button class="svelte-18i4gcv">-30</button> <button class="svelte-18i4gcv">+30</button> <button class="skip svelte-18i4gcv">Skip</button></div></div>');function Us(me,z){_t(z,!1);const u=ze(),B=ze();let G=at(z,"duration",8,90),_=at(z,"onComplete",8,()=>{}),F=ze(G()),g,W=at(z,"visible",12,!0);function re(){clearInterval(g),t(F,G()),g=setInterval(()=>{Da(F,-1),e(F)<=0&&(clearInterval(g),_()())},1e3)}function H(m){t(F,e(F)+m)}function R(m){e(F)>m&&t(F,e(F)-m)}function j(){W(!1),clearInterval(g),_()()}va(()=>{re()}),za(()=>{clearInterval(g)}),Yt(()=>e(F),()=>{t(u,Math.floor(e(F)/60))}),Yt(()=>e(F),()=>{t(B,e(F)%60)}),Oa(),Xt();var w=ft(),h=nt(w);{var p=m=>{var S=Ws(),se=l(S),J=s(l(se),2),q=l(J);a(J),a(se);var V=s(se,2),K=l(V),ee=s(K,2),$=s(ee,2);a(V),a(S),I(k=>Z(q,`${e(u)??""}:${k??""}`),[()=>(e(B),be(()=>e(B).toString().padStart(2,"0")))]),ae("click",K,()=>R(30)),ae("click",ee,()=>H(30)),ae("click",$,j),na(3,S,()=>ga,()=>({y:50,duration:300})),i(m,S)};A(h,m=>{W()&&m(p)})}i(me,w),mt()}var Js=d("<img/>"),Ks=d('<div class="animation-frame svelte-zbmy0k"></div>'),Hs=d('<div class="visual-placeholder svelte-zbmy0k"><span>No animation available</span></div>'),Ys=d("<li> </li>"),Qs=d('<div class="modal-overlay svelte-zbmy0k" role="button" tabindex="0" aria-label="Close modal"><div class="modal-content svelte-zbmy0k" role="dialog" aria-modal="true" tabindex="-1"><div class="header svelte-zbmy0k"><h3 class="svelte-zbmy0k"> </h3> <span class="category svelte-zbmy0k"> </span> <button class="close-btn svelte-zbmy0k" aria-label="Close">√ó</button></div> <div class="visual-container svelte-zbmy0k"><!> <div class="muscles svelte-zbmy0k"> </div></div> <div class="instructions svelte-zbmy0k"><h4>Instructions</h4> <ol class="svelte-zbmy0k"></ol></div></div></div>');function Xs(me,z){_t(z,!1);let u=at(z,"exercise",8),B=at(z,"visible",8,!1);const G=ca();let _=ze(0),F;function g(){u().images&&u().images.length>0&&(t(_,0),F=setInterval(()=>{t(_,(e(_)+1)%u().images.length)},800))}function W(){F&&clearInterval(F)}za(()=>{W()});function re(){G("close")}Yt(()=>(Ie(B()),Ie(u())),()=>{B()&&u().images?.length?g():W()}),Oa(),Xt();var H=ft(),R=nt(H);{var j=w=>{var h=Qs(),p=l(h),m=l(p),S=l(m),se=l(S,!0);a(S);var J=s(S,2),q=l(J,!0);a(J);var V=s(J,2);a(m);var K=s(m,2),ee=l(K);{var $=N=>{var L=Ks();fe(L,5,()=>(Ie(u()),be(()=>u().images)),_e,(Y,X,le)=>{var te=Js();let ye;I(()=>{ot(te,"src",`${ls??""}${e(X)??""}`),ot(te,"alt",`${Ie(u()),be(()=>u().name)??""} frame ${le+1}`),ye=Je(te,1,"svelte-zbmy0k",null,ye,{active:le===e(_)})}),i(Y,te)}),a(L),i(N,L)},k=N=>{var L=Hs();i(N,L)};A(ee,N=>{Ie(u()),be(()=>u().images&&u().images.length>0)?N($):N(k,!1)})}var Q=s(ee,2),E=l(Q);a(Q),a(K);var y=s(K,2),x=s(l(y),2);fe(x,5,()=>(Ie(u()),be(()=>u().instructions)),_e,(N,L)=>{var Y=Ys(),X=l(Y,!0);a(Y),I(()=>Z(X,e(L))),i(N,Y)}),a(x),a(y),a(p),a(h),I(N=>{Z(se,(Ie(u()),be(()=>u().name))),Z(q,(Ie(u()),be(()=>u().category))),Z(E,`Targets: ${N??""}`)},[()=>(Ie(u()),be(()=>u().targetMuscles.join(", ")))]),ae("click",V,re),na(3,p,()=>ga,()=>({y:50,duration:300})),ae("click",p,ba(function(N){Rt.call(this,z,N)})),ae("keydown",p,ba(function(N){Rt.call(this,z,N)})),ae("click",h,re),ae("keydown",h,N=>N.key==="Escape"&&re()),i(w,h)};A(R,w=>{B()&&w(j)})}i(me,H),mt()}var Zs=d("<span>Saved! ‚úì</span>"),el=d("<button><!></button>"),tl=d("<option> </option>"),al=d('<button class="exercise-item svelte-1w0zsmt"><span class="name svelte-1w0zsmt"> </span> <span class="muscles svelte-1w0zsmt"> </span></button>'),sl=d('<div class="modal-overlay svelte-1w0zsmt" role="button" tabindex="0" aria-label="Close modal"><div class="picker-modal svelte-1w0zsmt" role="dialog" aria-modal="true" tabindex="-1"><div class="picker-header svelte-1w0zsmt"><h3>Add Exercise</h3> <div class="search-row svelte-1w0zsmt"><input type="text" placeholder="Search exercises..." class="svelte-1w0zsmt"/> <select class="svelte-1w0zsmt"><option>All Categories</option><!></select></div></div> <div class="picker-list svelte-1w0zsmt"></div></div></div>'),ll=d('<div class="keypad-overlay svelte-1w0zsmt"><div class="keypad-header svelte-1w0zsmt"><span> </span> <button class="svelte-1w0zsmt">Done</button></div> <!></div>'),rl=d('<div class="gym-session-form svelte-1w0zsmt"><div class="session-meta svelte-1w0zsmt"><input type="text" class="session-name svelte-1w0zsmt" placeholder="Workout Name (e.g. Pull Day)"/> <div class="meta-row svelte-1w0zsmt"><label class="svelte-1w0zsmt">Start Time <input type="datetime-local" class="svelte-1w0zsmt"/></label> <label class="svelte-1w0zsmt">Bodyweight (kg) <input type="number" placeholder="Optional" class="svelte-1w0zsmt"/></label> <label class="svelte-1w0zsmt">Block <select class="svelte-1w0zsmt"><option>Strength</option><option>Power</option><option>Power Endurance</option><option>Muscular Endurance</option></select></label></div></div> <div class="exercises-list"></div> <button class="add-exercise-btn svelte-1w0zsmt">+ Add Exercise</button> <!> <!> <!> <!> <!> <!></div>');function il(me,z){_t(z,!1);const u=ze(),B=ca(),G="gym_session_draft";let _=ze(""),F=ze(),g=ze([]),W=ze(new Date().toISOString().slice(0,16)),re=ze("Strength"),H=ze(null),R=ze(!1),j=ze(""),w=ze(""),h=ze(null),p=ze(!1),m=ze(null),S=ze(null),se=ze(!1);va(()=>{const C=localStorage.getItem(G);if(C)try{const O=JSON.parse(C);O.sessionName&&t(_,O.sessionName),O.bodyweight&&t(F,O.bodyweight),O.startTime&&t(W,O.startTime),O.trainingBlock&&t(re,O.trainingBlock),O.exercises&&t(g,O.exercises)}catch(O){console.error("Failed to restore draft",O)}});const J=Array.from(new Set(Ta.map(C=>C.category))).sort();function q(C){const O={id:crypto.randomUUID(),name:C.name,sets:[{weight:0,reps:0,isWarmup:!1,isFailure:!1,isDropSet:!1,completed:!1}]};t(g,[...e(g),O]),t(R,!1),t(j,""),t(w,"")}function V(C,O,v){t(h,{exerciseIndex:O,setIndex:v,field:C.detail.field})}function K(C){if(!e(h))return;const{exerciseIndex:O,setIndex:v,field:f}=e(h);Ba(g,e(g)[O].sets[v][f]=C.detail),t(g,[...e(g)])}function ee(){t(p,!0)}function $(){e(g).length!==0&&($a({date:e(W).split("T")[0],name:e(_)||"Gym Workout",bodyweight:e(F),trainingBlock:e(re),exercises:e(g)}),t(se,!0),localStorage.removeItem(G),setTimeout(()=>{t(se,!1),B("save")},1500))}function k(){t(h,null)}Yt(()=>(e(re),e(W)),()=>{const O=Wa().filter(v=>(v.trainingBlock||"Strength")===e(re)&&v.date<e(W).split("T")[0]);O.sort((v,f)=>new Date(f.date).getTime()-new Date(v.date).getTime()),t(H,O.length>0?O[0]:null)}),Yt(()=>(e(_),e(F),e(W),e(re),e(g)),()=>{if(typeof localStorage<"u"){const C={sessionName:e(_),bodyweight:e(F),startTime:e(W),trainingBlock:e(re),exercises:e(g)};localStorage.setItem(G,JSON.stringify(C))}}),Yt(()=>(e(j),e(w)),()=>{t(u,Ta.filter(C=>{const O=C.name.toLowerCase().includes(e(j).toLowerCase())||C.targetMuscles.some(f=>f.toLowerCase().includes(e(j).toLowerCase())),v=e(w)?C.category===e(w):!0;return O&&v}))}),Oa(),Xt();var Q=rl(),E=l(Q),y=l(E);D(y);var x=s(y,2),N=l(x),L=s(l(N));D(L),a(N);var Y=s(N,2),X=s(l(Y));D(X),a(Y);var le=s(Y,2),te=s(l(le));I(()=>{e(re),Na(()=>{})});var ye=l(te);ye.value=ye.__value="Strength";var Ve=s(ye);Ve.value=Ve.__value="Power";var Re=s(Ve);Re.value=Re.__value="Power Endurance";var Me=s(Re);Me.value=Me.__value="Muscular Endurance",a(te),a(le),a(x),a(E);var ue=s(E,2);fe(ue,5,()=>e(g),_e,(C,O,v)=>{{let f=Fa(()=>(e(H),e(O),be(()=>e(H)?.exercises.find(T=>T.name===e(O).name))));Ms(C,{get exercise(){return e(O)},get prevExercise(){return e(f)},$$events:{focus:T=>V(T,v,e(g)[v].sets.indexOf(T.detail.set)),complete:ee,delete:()=>{t(S,v)},info:()=>{const T=Ta.find(U=>U.name===e(O).name);T&&t(m,T)}}})}}),a(ue);var qe=s(ue,2),Fe=s(qe,2);{var We=C=>{var O=el();let v;var f=l(O);{var T=ie=>{var xe=Zs();i(ie,xe)},U=ie=>{var xe=Le("Finish Workout");i(ie,xe)};A(f,ie=>{e(se)?ie(T):ie(U,!1)})}a(O),I(()=>{v=Je(O,1,"save-btn svelte-1w0zsmt",null,v,{success:e(se)}),O.disabled=e(se)}),ae("click",O,$),i(C,O)};A(Fe,C=>{e(g),be(()=>e(g).length>0)&&C(We)})}var ce=s(Fe,2);{var ne=C=>{var O=sl(),v=l(O),f=l(v),T=s(l(f),2),U=l(T);D(U);var ie=s(U,2);I(()=>{e(w),Na(()=>{})});var xe=l(ie);xe.value=xe.__value="";var Ze=s(xe);fe(Ze,1,()=>J,_e,(we,Be)=>{var Te=tl(),Ke=l(Te,!0);a(Te);var st={};I(()=>{Z(Ke,e(Be)),st!==(st=e(Be))&&(Te.value=(Te.__value=e(Be))??"")}),i(we,Te)}),a(ie),a(T),a(f);var gt=s(f,2);fe(gt,5,()=>e(u),_e,(we,Be)=>{var Te=al(),Ke=l(Te),st=l(Ke,!0);a(Ke);var He=s(Ke,2),je=l(He,!0);a(He),a(Te),I(vt=>{Z(st,(e(Be),be(()=>e(Be).name))),Z(je,vt)},[()=>(e(Be),be(()=>e(Be).targetMuscles.join(", ")))]),ae("click",Te,()=>q(e(Be))),i(we,Te)}),a(gt),a(v),a(O),P(U,()=>e(j),we=>t(j,we)),Qe(ie,()=>e(w),we=>t(w,we)),ae("click",v,ba(function(we){Rt.call(this,z,we)})),ae("keydown",v,ba(function(we){Rt.call(this,z,we)})),na(3,v,()=>ga,()=>({y:100,duration:300})),ae("click",O,()=>t(R,!1)),ae("keydown",O,we=>we.key==="Escape"&&t(R,!1)),na(3,O,()=>Xa),i(C,O)};A(ce,C=>{e(R)&&C(ne)})}var ve=s(ce,2);{var Oe=C=>{Xs(C,{get exercise(){return e(m)},visible:!0,$$events:{close:()=>t(m,null)}})};A(ve,C=>{e(m)&&C(Oe)})}var ge=s(ve,2);{var De=C=>{var O=ll(),v=l(O),f=l(v),T=l(f);a(f);var U=s(f,2);a(v);var ie=s(v,2);{let xe=Fa(()=>(e(h),be(()=>e(h).field==="weight"?"Weight (kg)":"Reps")));$s(ie,{get value(){return e(g),e(h),be(()=>e(g)[e(h).exerciseIndex].sets[e(h).setIndex][e(h).field])},get label(){return e(xe)},$$events:{change:K}})}a(O),I(()=>Z(T,`Editing ${e(g),e(h),be(()=>e(g)[e(h).exerciseIndex].name)??""} - Set ${e(h),be(()=>e(h).setIndex+1)??""}`)),ae("click",U,k),na(3,O,()=>ga,()=>({y:200,duration:300})),i(C,O)};A(ge,C=>{e(h)&&C(De)})}var Ce=s(ge,2);Us(Ce,{get visible(){return e(p)},set visible(C){t(p,C)},$$legacy:!0});var Pe=s(Ce,2);{var Xe=C=>{Za(C,{isOpen:!0,title:"Delete Exercise",get message(){return`Are you sure you want to delete ${e(g),e(S),be(()=>e(g)[e(S)].name)??""}?`},requireInput:!1,onConfirm:()=>{e(S)!==null&&(t(g,e(g).filter((O,v)=>v!==e(S))),t(S,null))},onCancel:()=>t(S,null)})};A(Pe,C=>{e(S)!==null&&C(Xe)})}a(Q),P(y,()=>e(_),C=>t(_,C)),P(L,()=>e(W),C=>t(W,C)),P(X,()=>e(F),C=>t(F,C)),Qe(te,()=>e(re),C=>t(re,C)),ae("click",qe,()=>t(R,!0)),i(me,Q),mt()}var ol=d("<option> </option>"),nl=d("<option> </option>"),vl=d('<button class="remove-set-btn svelte-1m63nqt">‚úï</button>'),cl=d('<div class="set-row svelte-1m63nqt"><div class="input-wrap svelte-1m63nqt"><label class="svelte-1m63nqt">Weight</label> <input type="number" placeholder="0" class="svelte-1m63nqt"/></div> <div class="input-wrap svelte-1m63nqt"><label class="svelte-1m63nqt">Reps/Secs</label> <input type="number" placeholder="1" class="svelte-1m63nqt"/></div> <!></div>'),dl=d('<div class="exercise-card svelte-1m63nqt"><div class="card-header svelte-1m63nqt"><div class="header-inputs svelte-1m63nqt"><select class="svelte-1m63nqt"></select> <select class="svelte-1m63nqt"></select></div> <button class="remove-card-btn svelte-1m63nqt" title="Remove Exercise">‚úï</button></div> <div class="sets-list svelte-1m63nqt"><!> <button class="add-set-btn svelte-1m63nqt">+ Add Set</button></div> <div class="card-footer svelte-1m63nqt"><div class="meta-input svelte-1m63nqt"><label class="svelte-1m63nqt">Total Sets</label> <input type="number" readonly="" disabled class="svelte-1m63nqt"/></div> <div class="notes-input svelte-1m63nqt"><label class="svelte-1m63nqt">Notes</label> <input type="text" placeholder="Notes..." class="svelte-1m63nqt"/></div></div></div>'),ul=d("<div> </div>"),pl=d('<div class="form-content svelte-1m63nqt"><div class="header-row svelte-1m63nqt"><h3 class="svelte-1m63nqt">ü§è Fingerboarding</h3> <button class="add-row-btn svelte-1m63nqt">+ Add Exercise</button></div> <div class="form-group date-group svelte-1m63nqt"><label for="date">Date</label> <input type="date" id="date" class="svelte-1m63nqt"/></div> <div class="cards-container svelte-1m63nqt"></div> <div class="submit-section"><!> <button type="button" class="submit-btn svelte-1m63nqt"><!></button></div></div>');function fl(me,z){_t(z,!0);const u=["Max hangs","Recruitment pulls","Max pick-ups"],B=["Full-crimp","Half-crimp","Three finger drag","Pinch","Open hand","Sloper"];let G=b($e(new Date().toISOString().split("T")[0])),_=b($e([]));function F(){t(_,[...e(_),{id:crypto.randomUUID(),name:u[0],gripType:B[1],sets:1,details:[{weight:0,reps:5}],notes:""}],!0)}ma(()=>{e(_).length===0&&F()});function g(E){t(_,e(_).filter((y,x)=>x!==E),!0)}function W(E){const y=e(_)[E],x=y.details[y.details.length-1];y.details=[...y.details,{...x}],y.sets=y.details.length}function re(E,y){const x=e(_)[E];x.details.length>1&&(x.details=x.details.filter((N,L)=>L!==y),x.sets=x.details.length)}let H=b("idle"),R=b("");async function j(){t(H,"saving");try{const E={date:e(G),location:"N/A",exercises:JSON.parse(JSON.stringify(e(_)))},y=Ua(E);if(da()){const x=await es(E);x.ok?(ha(y.id,x.id),ya(x.id),t(H,"success"),t(R,"Session saved and synced!")):(Sa(y.id),t(H,"success"),t(R,"Saved locally. Sync failed: "+(x.error||"Unknown error")))}else t(H,"success"),t(R,"Saved locally. Will sync when online.");window.dispatchEvent(new CustomEvent("session-saved")),setTimeout(()=>{w()},2e3)}catch(E){t(H,"error"),t(R,"Failed to save session"),console.error("Save error:",E)}}function w(){t(G,new Date().toISOString().split("T")[0],!0),t(_,[],!0),F(),t(H,"idle"),t(R,"")}var h=pl(),p=l(h),m=s(l(p),2);m.__click=F,a(p);var S=s(p,2),se=s(l(S),2);D(se),a(S);var J=s(S,2);fe(J,21,()=>e(_),_e,(E,y,x)=>{var N=dl(),L=l(N),Y=l(L),X=l(Y);fe(X,21,()=>u,_e,(ve,Oe)=>{var ge=ol(),De=l(ge,!0);a(ge);var Ce={};I(()=>{Z(De,e(Oe)),Ce!==(Ce=e(Oe))&&(ge.value=(ge.__value=e(Oe))??"")}),i(ve,ge)}),a(X);var le=s(X,2);fe(le,21,()=>B,_e,(ve,Oe)=>{var ge=nl(),De=l(ge,!0);a(ge);var Ce={};I(()=>{Z(De,e(Oe)),Ce!==(Ce=e(Oe))&&(ge.value=(ge.__value=e(Oe))??"")}),i(ve,ge)}),a(le),a(Y);var te=s(Y,2);te.__click=()=>g(x),a(L);var ye=s(L,2),Ve=l(ye);fe(Ve,17,()=>e(y).details,_e,(ve,Oe,ge)=>{var De=cl(),Ce=l(De),Pe=l(Ce);ot(Pe,"for",`weight-${x}-${ge}`);var Xe=s(Pe,2);D(Xe),ot(Xe,"id",`weight-${x}-${ge}`),a(Ce);var C=s(Ce,2),O=l(C);ot(O,"for",`reps-${x}-${ge}`);var v=s(O,2);D(v),ot(v,"id",`reps-${x}-${ge}`),a(C);var f=s(C,2);{var T=U=>{var ie=vl();ie.__click=()=>re(x,ge),i(U,ie)};A(f,U=>{e(y).details.length>1&&U(T)})}a(De),P(Xe,()=>e(Oe).weight,U=>e(Oe).weight=U),P(v,()=>e(Oe).reps,U=>e(Oe).reps=U),i(ve,De)});var Re=s(Ve,2);Re.__click=()=>W(x),a(ye);var Me=s(ye,2),ue=l(Me),qe=l(ue);ot(qe,"for",`total-sets-${x}`);var Fe=s(qe,2);D(Fe),ot(Fe,"id",`total-sets-${x}`),a(ue);var We=s(ue,2),ce=l(We);ot(ce,"for",`notes-${x}`);var ne=s(ce,2);D(ne),ot(ne,"id",`notes-${x}`),a(We),a(Me),a(N),I(()=>Ra(Fe,e(y).sets)),Qe(X,()=>e(y).name,ve=>e(y).name=ve),Qe(le,()=>e(y).gripType,ve=>e(y).gripType=ve),P(ne,()=>e(y).notes,ve=>e(y).notes=ve),i(E,N)}),a(J);var q=s(J,2),V=l(q);{var K=E=>{var y=ul();let x;var N=l(y,!0);a(y),I(()=>{x=Je(y,1,"save-message svelte-1m63nqt",null,x,{success:e(H)==="success",error:e(H)==="error"}),Z(N,e(R))}),i(E,y)};A(V,E=>{e(R)&&E(K)})}var ee=s(V,2);ee.__click=j;var $=l(ee);{var k=E=>{var y=Le("Saving...");i(E,y)},Q=E=>{var y=ft(),x=nt(y);{var N=Y=>{var X=Le("‚úì Saved!");i(Y,X)},L=Y=>{var X=Le("Save Session");i(Y,X)};A(x,Y=>{e(H)==="success"?Y(N):Y(L,!1)},!0)}i(E,y)};A($,E=>{e(H)==="saving"?E(k):E(Q,!1)})}a(ee),a(q),a(h),I(()=>ee.disabled=e(H)==="saving"),P(se,()=>e(G),E=>t(G,E)),i(me,h),mt()}Qt(["click"]);var _l=d("<option> </option>"),ml=d('<input type="text" placeholder="Enter venue name" class="mt-2 svelte-1fje4dh"/>'),gl=d("<option> </option>"),bl=d("<option> </option>"),hl=d('<input type="text" placeholder="Round name" class="mt-2 svelte-1fje4dh"/>'),yl=d('<div class="result-mode-content svelte-1fje4dh"><div class="form-group svelte-1fje4dh"><label for="position" class="svelte-1fje4dh">Final Position</label> <input type="number" id="position" placeholder="#" class="large-input svelte-1fje4dh"/></div></div>'),Sl=d("<option> </option>"),kl=d('<input type="number" min="1" class="svelte-1fje4dh"/>'),xl=d('<span class="flash-dash">-</span>'),wl=d('<tr><td class="col-name svelte-1fje4dh"><input type="text" class="svelte-1fje4dh"/></td><td class="col-status svelte-1fje4dh"><select class="svelte-1fje4dh"></select></td><td class="col-attempt svelte-1fje4dh"><!></td><td class="col-notes svelte-1fje4dh"><input type="text" placeholder="..." class="svelte-1fje4dh"/></td><td class="col-action svelte-1fje4dh"><button class="svelte-1fje4dh">‚úï</button></td></tr>'),ql=d('<div class="load-metrics-compact svelte-1fje4dh"><div class="metric svelte-1fje4dh"><label for="finger">Finger Load</label> <input type="number" id="finger" min="0" max="5" step="0.5" class="svelte-1fje4dh"/></div> <div class="metric svelte-1fje4dh"><label for="shoulder">Shoulder Load</label> <input type="number" id="shoulder" min="0" max="5" step="0.5" class="svelte-1fje4dh"/></div> <div class="metric svelte-1fje4dh"><label for="forearm">Forearm Load</label> <input type="number" id="forearm" min="0" max="5" step="0.5" class="svelte-1fje4dh"/></div></div> <div class="climbs-table-container svelte-1fje4dh"><div class="section-header svelte-1fje4dh"><h4 class="svelte-1fje4dh">Boulders / Routes</h4></div> <table class="climbs-table svelte-1fje4dh"><thead><tr><th class="svelte-1fje4dh">#</th><th class="svelte-1fje4dh">Result</th><th class="svelte-1fje4dh">Att.</th><th class="svelte-1fje4dh">Notes</th><th class="svelte-1fje4dh"></th></tr></thead><tbody></tbody></table> <button class="add-row-btn svelte-1fje4dh">+ Add Row</button></div>',1),Cl=d("<div> </div>"),Tl=d('<div class="form-content svelte-1fje4dh"><h3 class="svelte-1fje4dh">üèÜ Competition</h3> <div class="form-grid svelte-1fje4dh"><div class="form-group svelte-1fje4dh"><label for="date" class="svelte-1fje4dh">Date</label> <input type="date" id="date" class="svelte-1fje4dh"/></div> <div class="form-group svelte-1fje4dh"><label for="venue" class="svelte-1fje4dh">Venue</label> <select id="venue" class="svelte-1fje4dh"><option disabled>Select venue...</option><!></select> <!></div></div> <div class="form-group mb-4 svelte-1fje4dh"><label for="type" class="svelte-1fje4dh">Type</label> <select id="type" class="svelte-1fje4dh"></select></div> <div class="round-section svelte-1fje4dh"><div class="form-group svelte-1fje4dh"><label for="round" class="svelte-1fje4dh">Round</label> <select id="round" class="svelte-1fje4dh"></select> <!></div> <!></div> <div class="submit-section"><!> <button type="button" class="submit-btn svelte-1fje4dh"><!></button></div></div>');function Nl(me,z){_t(z,!0);const u=["Flashpoint Bristol","Rockstar Techno","Rockstar Unit 3","Rockstar Unit 5","Bloc","TCA","Other"],B=["Bouldering","Lead","Speed"],G=["Qualifiers","Semi-Finals","Finals","Result","Other"],_=["Flash","Top","Zone","Attempt"];let F=b($e(new Date().toISOString().split("T")[0])),g=b(""),W=b(""),re=b("Bouldering"),H=b(4),R=b(4),j=b(4),w=b("Qualifiers"),h=b(""),p=b(null),m=b($e([{name:"#1",status:"Flash",attemptCount:1,notes:""}])),S=Bt(()=>e(w)==="Result"),se=Bt(()=>e(g)==="Other"),J=Bt(()=>e(w)==="Other"),q=Bt(()=>e(w)==="Other"?e(h):e(w));function V(){const v=e(m).length+1;t(m,[...e(m),{name:`#${v}`,status:"Flash",attemptCount:1,notes:""}],!0)}function K(v){e(m).length>1?t(m,e(m).filter((f,T)=>T!==v),!0):e(m)[0]={name:"#1",status:"Flash",attemptCount:1,notes:""}}function ee(v,f){e(m)[v].status=f,f==="Flash"&&(e(m)[v].attemptCount=1)}let $=b("idle"),k=b("");async function Q(){if(!e(g)||e(g)==="Other"&&!e(W)){t($,"error"),t(k,"Please specify a venue");return}t($,"saving");try{const v={name:e(q),position:e(S)?e(p):void 0,climbs:e(S)?void 0:JSON.parse(JSON.stringify(e(m)))},f={date:e(F),venue:e(g)==="Other"?e(W):e(g),customVenue:e(g)==="Other"?e(W):void 0,type:e(re),fingerLoad:e(S)?void 0:e(H),shoulderLoad:e(S)?void 0:e(R),forearmLoad:e(S)?void 0:e(j),rounds:[v]},T=Ja(f);if(da()){const U=await ts(f);U.ok?(ha(T.id,U.id),ya(U.id),t($,"success"),t(k,"Competition saved and synced!")):(Sa(T.id),t($,"success"),t(k,"Saved locally. Sync failed: "+(U.error||"Unknown error")))}else t($,"success"),t(k,"Saved locally. Will sync when online.");window.dispatchEvent(new CustomEvent("session-saved")),setTimeout(()=>{E()},2e3)}catch(v){t($,"error"),t(k,"Failed to save session"),console.error("Save error:",v)}}function E(){t(F,new Date().toISOString().split("T")[0],!0),t(g,""),t(W,""),t(p,null),t(m,[{name:"#1",status:"Flash",attemptCount:1,notes:""}],!0),t($,"idle"),t(k,"")}var y=Tl(),x=s(l(y),2),N=l(x),L=s(l(N),2);D(L),a(N);var Y=s(N,2),X=s(l(Y),2),le=l(X);le.value=le.__value="";var te=s(le);fe(te,17,()=>u,_e,(v,f)=>{var T=_l(),U=l(T,!0);a(T);var ie={};I(()=>{Z(U,e(f)),ie!==(ie=e(f))&&(T.value=(T.__value=e(f))??"")}),i(v,T)}),a(X);var ye=s(X,2);{var Ve=v=>{var f=ml();D(f),P(f,()=>e(W),T=>t(W,T)),i(v,f)};A(ye,v=>{e(se)&&v(Ve)})}a(Y),a(x);var Re=s(x,2),Me=s(l(Re),2);fe(Me,21,()=>B,_e,(v,f)=>{var T=gl(),U=l(T,!0);a(T);var ie={};I(()=>{Z(U,e(f)),ie!==(ie=e(f))&&(T.value=(T.__value=e(f))??"")}),i(v,T)}),a(Me),a(Re);var ue=s(Re,2),qe=l(ue),Fe=s(l(qe),2);fe(Fe,21,()=>G,_e,(v,f)=>{var T=bl(),U=l(T,!0);a(T);var ie={};I(()=>{Z(U,e(f)),ie!==(ie=e(f))&&(T.value=(T.__value=e(f))??"")}),i(v,T)}),a(Fe);var We=s(Fe,2);{var ce=v=>{var f=hl();D(f),P(f,()=>e(h),T=>t(h,T)),i(v,f)};A(We,v=>{e(J)&&v(ce)})}a(qe);var ne=s(qe,2);{var ve=v=>{var f=yl(),T=l(f),U=s(l(T),2);D(U),a(T),a(f),P(U,()=>e(p),ie=>t(p,ie)),i(v,f)},Oe=v=>{var f=ql(),T=nt(f),U=l(T),ie=s(l(U),2);D(ie),a(U);var xe=s(U,2),Ze=s(l(xe),2);D(Ze),a(xe);var gt=s(xe,2),we=s(l(gt),2);D(we),a(gt),a(T);var Be=s(T,2),Te=s(l(Be),2),Ke=s(l(Te));fe(Ke,21,()=>e(m),_e,(He,je,vt)=>{var ht=wl(),yt=l(ht),xt=l(yt);D(xt),a(yt);var St=s(yt),lt=l(St);lt.__change=Ne=>ee(vt,Ne.target.value),fe(lt,21,()=>_,_e,(Ne,Ue)=>{var ct=Sl(),Ft=l(ct,!0);a(ct);var It={};I(()=>{Z(Ft,e(Ue)),It!==(It=e(Ue))&&(ct.value=(ct.__value=e(Ue))??"")}),i(Ne,ct)}),a(lt);var wt;Ga(lt),a(St);var qt=s(St),Gt=l(qt);{var zt=Ne=>{var Ue=kl();D(Ue),P(Ue,()=>e(je).attemptCount,ct=>e(je).attemptCount=ct),i(Ne,Ue)},Ct=Ne=>{var Ue=xl();i(Ne,Ue)};A(Gt,Ne=>{e(je).status!=="Flash"?Ne(zt):Ne(Ct,!1)})}a(qt);var Tt=s(qt),kt=l(Tt);D(kt),a(Tt);var At=s(Tt),Nt=l(At);Nt.__click=()=>K(vt),a(At),a(ht),I(()=>{wt!==(wt=e(je).status)&&(lt.value=(lt.__value=e(je).status)??"",La(lt,e(je).status))}),P(xt,()=>e(je).name,Ne=>e(je).name=Ne),P(kt,()=>e(je).notes,Ne=>e(je).notes=Ne),i(He,ht)}),a(Ke),a(Te);var st=s(Te,2);st.__click=V,a(Be),P(ie,()=>e(H),He=>t(H,He)),P(Ze,()=>e(R),He=>t(R,He)),P(we,()=>e(j),He=>t(j,He)),i(v,f)};A(ne,v=>{e(S)?v(ve):v(Oe,!1)})}a(ue);var ge=s(ue,2),De=l(ge);{var Ce=v=>{var f=Cl();let T;var U=l(f,!0);a(f),I(()=>{T=Je(f,1,"save-message svelte-1fje4dh",null,T,{success:e($)==="success",error:e($)==="error"}),Z(U,e(k))}),i(v,f)};A(De,v=>{e(k)&&v(Ce)})}var Pe=s(De,2);Pe.__click=Q;var Xe=l(Pe);{var C=v=>{var f=Le("Saving...");i(v,f)},O=v=>{var f=ft(),T=nt(f);{var U=xe=>{var Ze=Le("‚úì Saved!");i(xe,Ze)},ie=xe=>{var Ze=Le("Save Session");i(xe,Ze)};A(T,xe=>{e($)==="success"?xe(U):xe(ie,!1)},!0)}i(v,f)};A(Xe,v=>{e($)==="saving"?v(C):v(O,!1)})}a(Pe),a(ge),a(y),I(()=>Pe.disabled=e($)==="saving"),P(L,()=>e(F),v=>t(F,v)),Qe(X,()=>e(g),v=>t(g,v)),Qe(Me,()=>e(re),v=>t(re,v)),Qe(Fe,()=>e(w),v=>t(w,v)),i(me,y),mt()}Qt(["change","click"]);var Fl=d('<span class="spinner svelte-b2zgdd"></span> Syncing...',1),Ol=d("<button><!></button>"),Gl=d("<div> </div>"),Ll=d('<div><div class="sync-info svelte-b2zgdd"><span class="sync-icon svelte-b2zgdd"> </span> <span class="sync-text svelte-b2zgdd"><!></span></div> <!> <!></div>'),jl=d("<option> </option>"),El=d('<div class="form-container svelte-b2zgdd"><!></div>'),zl=d('<div class="page svelte-b2zgdd"><div class="page-header svelte-b2zgdd"><h1 class="svelte-b2zgdd">üìù Log Data</h1> <p class="subtitle svelte-b2zgdd">Record your training sessions</p></div> <!> <div class="content-card svelte-b2zgdd"><div class="form-group svelte-b2zgdd"><label for="activity-type" class="svelte-b2zgdd">Activity Type</label> <select id="activity-type" class="svelte-b2zgdd"><option disabled>Select an activity...</option><!></select></div> <!></div></div>');function Jl(me,z){_t(z,!0);const u=[{value:"indoor_climb",label:"Indoor Climb",icon:"üßó"},{value:"outdoor_climb",label:"Outdoor Climb",icon:"‚õ∞Ô∏è"},{value:"gym_session",label:"Gym Session",icon:"üèãÔ∏è"},{value:"fingerboarding",label:"Fingerboarding",icon:"ü§è"},{value:"competition",label:"Competition",icon:"üèÜ"}];let B=b(""),G=b(0),_=b("idle"),F=b(""),g=b(!0);va(()=>{W(),t(g,da(),!0);const q=()=>{t(g,!0),W()},V=()=>{t(g,!1)},K=()=>{W()};return window.addEventListener("online",q),window.addEventListener("offline",V),window.addEventListener("session-saved",K),()=>{window.removeEventListener("online",q),window.removeEventListener("offline",V),window.removeEventListener("session-saved",K)}});function W(){t(G,as(),!0)}async function re(){if(!e(g)){t(_,"error"),t(F,"No network connection");return}t(_,"syncing"),t(F,"");try{const q=await ss();q.failed===0&&q.success>0?(t(_,"success"),t(F,`Synced ${q.success} session${q.success>1?"s":""}!`)):q.failed>0&&q.success>0?(t(_,"error"),t(F,`Synced ${q.success}, failed ${q.failed}`)):q.failed>0?(t(_,"error"),t(F,`Failed to sync ${q.failed} session${q.failed>1?"s":""}`)):(t(_,"idle"),t(F,"")),W(),e(_)==="success"&&setTimeout(()=>{t(_,"idle"),t(F,"")},3e3)}catch(q){t(_,"error"),t(F,"Sync failed"),console.error("Sync error:",q)}}var H=zl(),R=s(l(H),2);{var j=q=>{var V=Ll();let K;var ee=l(V),$=l(ee),k=l($,!0);a($);var Q=s($,2),E=l(Q);{var y=le=>{var te=Le();I(()=>Z(te,`${e(G)??""} session${e(G)>1?"s":""} waiting to sync`)),i(le,te)},x=le=>{var te=Le();I(()=>Z(te,`Offline - ${e(G)??""} session${e(G)>1?"s":""} saved locally`)),i(le,te)};A(E,le=>{e(g)?le(y):le(x,!1)})}a(Q),a(ee);var N=s(ee,2);{var L=le=>{var te=Ol();let ye;te.__click=re;var Ve=l(te);{var Re=ue=>{var qe=Fl();Ae(),i(ue,qe)},Me=ue=>{var qe=ft(),Fe=nt(qe);{var We=ne=>{var ve=Le("‚úì Synced!");i(ne,ve)},ce=ne=>{var ve=Le("Sync Now");i(ne,ve)};A(Fe,ne=>{e(_)==="success"?ne(We):ne(ce,!1)},!0)}i(ue,qe)};A(Ve,ue=>{e(_)==="syncing"?ue(Re):ue(Me,!1)})}a(te),I(()=>{ye=Je(te,1,"sync-btn svelte-b2zgdd",null,ye,{syncing:e(_)==="syncing"}),te.disabled=e(_)==="syncing"}),i(le,te)};A(N,le=>{e(g)&&le(L)})}var Y=s(N,2);{var X=le=>{var te=Gl();let ye;var Ve=l(te,!0);a(te),I(()=>{ye=Je(te,1,"sync-message svelte-b2zgdd",null,ye,{error:e(_)==="error",success:e(_)==="success"}),Z(Ve,e(F))}),i(le,te)};A(Y,le=>{e(F)&&le(X)})}a(V),I(()=>{K=Je(V,1,"sync-banner svelte-b2zgdd",null,K,{offline:!e(g)}),Z(k,e(g)?"üîÑ":"üì¥")}),i(q,V)};A(R,q=>{e(G)>0&&q(j)})}var w=s(R,2),h=l(w),p=s(l(h),2),m=l(p);m.value=m.__value="";var S=s(m);fe(S,17,()=>u,q=>q.value,(q,V)=>{var K=jl(),ee=l(K);a(K);var $={};I(()=>{Z(ee,`${e(V).icon??""} ${e(V).label??""}`),$!==($=e(V).value)&&(K.value=(K.__value=e(V).value)??"")}),i(q,K)}),a(p),a(h);var se=s(h,2);{var J=q=>{var V=El(),K=l(V);{var ee=k=>{ks(k,{})},$=k=>{var Q=ft(),E=nt(Q);{var y=N=>{Vs(N,{})},x=N=>{var L=ft(),Y=nt(L);{var X=te=>{il(te,{})},le=te=>{var ye=ft(),Ve=nt(ye);{var Re=ue=>{fl(ue,{})},Me=ue=>{var qe=ft(),Fe=nt(qe);{var We=ce=>{Nl(ce,{})};A(Fe,ce=>{e(B)==="competition"&&ce(We)},!0)}i(ue,qe)};A(Ve,ue=>{e(B)==="fingerboarding"?ue(Re):ue(Me,!1)},!0)}i(te,ye)};A(Y,te=>{e(B)==="gym_session"?te(X):te(le,!1)},!0)}i(N,L)};A(E,N=>{e(B)==="outdoor_climb"?N(y):N(x,!1)},!0)}i(k,Q)};A(K,k=>{e(B)==="indoor_climb"?k(ee):k($,!1)})}a(V),i(q,V)};A(se,q=>{e(B)&&q(J)})}a(w),a(H),Qe(p,()=>e(B),q=>t(B,q)),i(me,H),mt()}Qt(["click"]);export{Jl as component};
