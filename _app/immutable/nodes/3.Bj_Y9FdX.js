import{f as m,a as r,c as qt,t as ft}from"../chunks/DUbgAile.js";import{a3 as $a,p as Lt,c as l,r as a,s,k as e,t as O,a as Gt,f as _t,aL as _,y as rt,o as Kt,z as t,e as da,ar as vt,b1 as xa,aM as Xt,b2 as Ta,l as pt,g as Te,b3 as Aa,b4 as Ja,b5 as Ka,b6 as wa,b7 as Pa,aK as Ve,x as ja,b8 as Ha}from"../chunks/DaGARe-0.js";import{d as ua,s as K,e as ae}from"../chunks/Bakgm2wc.js";import{i as z}from"../chunks/CUckLC5A.js";import{i as de,j as me,r as R,h as Et,p as Ya}from"../chunks/DBqONLHR.js";import{i as Ra,s as za,b as G,a as Ze,c as Ba,d as Qa,e as Xa,f as Va,g as Za,h as es,j as ts,k as as,l as ss}from"../chunks/DPE7s4ba.js";import{s as gt}from"../chunks/CD1qkUQ9.js";import{p as St}from"../chunks/DKI8ZABo.js";import{g as ls,a as is,t as ca,s as rs,f as Ma,b as Da,E as ka,D as os}from"../chunks/D95HXmMX.js";import{i as Ca}from"../chunks/DWDYtkkU.js";import{b as ns}from"../chunks/h4Oy4OB0.js";function Ia(we){return function(...g){var d=g[0];return d.stopPropagation(),we?.apply(this,g)}}function ea(we,g){var d=we.$$events?.[g.type],k=$a(d)?d.slice():d==null?[]:[d];for(var j of k)j.call(this,g)}var vs=m('<span class="placeholder svelte-1g8x5ph"> </span>'),cs=m('<span class="chip-display"> </span>'),ds=m('<button type="button"> </button>'),us=m('<div class="multi-select-container svelte-1g8x5ph"><div class="chips svelte-1g8x5ph"><!></div> <div class="options-grid svelte-1g8x5ph"></div></div>');function Zt(we,g){Lt(g,!0);let d=St(g,"selected",19,()=>[]),k=St(g,"placeholder",3,"Select options...");function j(T){let F=[...d()];T==="None"?F.includes("None")?F=[]:F=["None"]:(F=F.filter(N=>N!=="None"),F.includes(T)?F=F.filter(N=>N!==T):F.push(T)),g.onChange(F)}var M=us(),U=l(M),x=l(U);{var S=T=>{var F=vs(),N=l(F,!0);a(F),O(()=>K(N,k())),r(T,F)},q=T=>{var F=qt(),N=_t(F);de(N,17,d,me,(V,w)=>{var y=cs(),u=l(y,!0);a(y),O(()=>K(u,e(w))),r(V,y)}),r(T,F)};z(x,T=>{d().length===0?T(S):T(q,!1)})}a(U);var J=s(U,2);de(J,21,()=>g.options,me,(T,F)=>{var N=ds();N.__click=()=>j(e(F));var V=l(N,!0);a(N),O(w=>{gt(N,1,`option-chip ${w??""}`,"svelte-1g8x5ph"),K(V,e(F))},[()=>d().includes(e(F))?"selected":""]),r(T,N)}),a(J),a(M),r(we,M),Gt()}ua(["click"]);var ps=m('<div class="input-with-action svelte-1lf3qka"><input type="text" id="location-manual" placeholder="Enter custom location..." class="flat-left svelte-1lf3qka"/> <button type="button" class="action-btn flat-right svelte-1lf3qka" title="Back to list">‚úï</button></div>'),fs=m("<option> </option>"),ms=m('<select id="location" class="svelte-1lf3qka"><option disabled>Select location...</option><!></select>'),_s=m("<option> </option>"),gs=m("<option> </option>"),bs=m('<th class="svelte-1lf3qka">Sport?</th>'),hs=m('<td class="center svelte-1lf3qka"><input type="checkbox" class="svelte-1lf3qka"/></td>'),ys=m('<span class="grade-error svelte-1lf3qka">Invalid</span>'),Ss=m("<option> </option>"),ks=m("<option> </option>"),ws=m("<option> </option>"),xs=m('<button type="button" class="remove-btn svelte-1lf3qka">‚úï</button>'),Ts=m('<tr><!><td class="svelte-1lf3qka"><input type="text" placeholder="Route name..." class="svelte-1lf3qka"/></td><td class="svelte-1lf3qka"><input type="text" placeholder="V3"/> <!></td><td class="svelte-1lf3qka"><select class="svelte-1lf3qka"></select></td><td class="svelte-1lf3qka"><input type="number" min="1" class="svelte-1lf3qka"/></td><td class="svelte-1lf3qka"><select class="svelte-1lf3qka"></select></td><td class="svelte-1lf3qka"><select class="svelte-1lf3qka"></select></td><td><textarea placeholder="Notes..." class="svelte-1lf3qka"></textarea></td><td class="center svelte-1lf3qka"><!></td></tr>'),Cs=m("<div> </div>"),qs=m('<div class="form-content svelte-1lf3qka"><h3 class="svelte-1lf3qka">üßó Indoor Climb</h3> <div class="form-row svelte-1lf3qka"><div class="form-group svelte-1lf3qka"><label for="date" class="svelte-1lf3qka">Date</label> <div class="date-time-row svelte-1lf3qka"><input type="date" id="date" class="svelte-1lf3qka"/> <input type="time" id="time" class="svelte-1lf3qka"/></div></div> <div class="form-group svelte-1lf3qka"><label for="location" class="svelte-1lf3qka">Location</label> <!></div></div> <div class="form-group svelte-1lf3qka"><label for="climbing-type" class="svelte-1lf3qka">Climbing Type</label> <select id="climbing-type" class="svelte-1lf3qka"><option disabled>Select type...</option><!></select></div> <div class="load-section svelte-1lf3qka"><h4 class="svelte-1lf3qka">Load Metrics</h4> <div class="load-metrics svelte-1lf3qka"><div class="load-item svelte-1lf3qka"><label for="finger-load" class="svelte-1lf3qka">Finger</label> <input type="number" id="finger-load" min="1" max="5" class="svelte-1lf3qka"/> <span class="load-scale svelte-1lf3qka">/ 5</span></div> <div class="load-item svelte-1lf3qka"><label for="shoulder-load" class="svelte-1lf3qka">Shoulder</label> <input type="number" id="shoulder-load" min="1" max="5" class="svelte-1lf3qka"/> <span class="load-scale svelte-1lf3qka">/ 5</span></div> <div class="load-item svelte-1lf3qka"><label for="forearm-load" class="svelte-1lf3qka">Forearm</label> <input type="number" id="forearm-load" min="1" max="5" class="svelte-1lf3qka"/> <span class="load-scale svelte-1lf3qka">/ 5</span></div></div> <h4 class="mt-4 svelte-1lf3qka">Grip Metrics</h4> <div class="load-metrics svelte-1lf3qka"><div class="load-item svelte-1lf3qka"><label for="open-grip" class="svelte-1lf3qka">Open</label> <input type="number" id="open-grip" min="1" max="5" class="svelte-1lf3qka"/> <span class="load-scale svelte-1lf3qka">/ 5</span></div> <div class="load-item svelte-1lf3qka"><label for="crimp-grip" class="svelte-1lf3qka">Crimp</label> <input type="number" id="crimp-grip" min="1" max="5" class="svelte-1lf3qka"/> <span class="load-scale svelte-1lf3qka">/ 5</span></div> <div class="load-item svelte-1lf3qka"><label for="pinch-grip" class="svelte-1lf3qka">Pinch</label> <input type="number" id="pinch-grip" min="1" max="5" class="svelte-1lf3qka"/> <span class="load-scale svelte-1lf3qka">/ 5</span></div> <div class="load-item svelte-1lf3qka"><label for="sloper-grip" class="svelte-1lf3qka">Sloper</label> <input type="number" id="sloper-grip" min="1" max="5" class="svelte-1lf3qka"/> <span class="load-scale svelte-1lf3qka">/ 5</span></div> <div class="load-item svelte-1lf3qka"><label for="jug-grip" class="svelte-1lf3qka">Jug</label> <input type="number" id="jug-grip" min="1" max="5" class="svelte-1lf3qka"/> <span class="load-scale svelte-1lf3qka">/ 5</span></div></div></div> <div class="training-section svelte-1lf3qka"><h4 class="svelte-1lf3qka">Training Details</h4> <div class="training-grid svelte-1lf3qka"><div class="training-item svelte-1lf3qka"><label for="training-type" class="svelte-1lf3qka">Training Type</label> <!></div> <div class="training-item svelte-1lf3qka"><label for="difficulty" class="svelte-1lf3qka">Difficulty</label> <select id="difficulty" class="svelte-1lf3qka"></select></div> <div class="training-item svelte-1lf3qka"><label for="category" class="svelte-1lf3qka">Category</label> <!></div> <div class="training-item svelte-1lf3qka"><label for="energy-system" class="svelte-1lf3qka">Energy System</label> <!></div> <div class="training-item svelte-1lf3qka"><label for="wall-angle" class="svelte-1lf3qka">Wall</label> <!></div></div></div> <div class="form-group notes-section svelte-1lf3qka"><label for="session-notes" class="svelte-1lf3qka">Session Notes</label> <textarea id="session-notes" placeholder="How did the session feel? Energy levels, mood, etc." rows="3" class="svelte-1lf3qka"></textarea></div> <div class="climbs-section svelte-1lf3qka"><h4 class="svelte-1lf3qka">Climbs</h4> <div class="table-container svelte-1lf3qka"><table class="climbs-table svelte-1lf3qka"><thead><tr><!><th class="svelte-1lf3qka">Name</th><th class="svelte-1lf3qka">Grade</th><th class="svelte-1lf3qka">Attempt</th><th class="svelte-1lf3qka">#</th><th class="svelte-1lf3qka">Wall Angle</th><th class="svelte-1lf3qka">Technique Focus</th><th class="svelte-1lf3qka">Notes</th><th class="svelte-1lf3qka"></th></tr></thead><tbody></tbody></table></div> <button type="button" class="add-btn svelte-1lf3qka">+ Add Climb</button></div> <div class="submit-section svelte-1lf3qka"><!> <button type="button" class="submit-btn svelte-1lf3qka"><!></button></div></div>');function Ns(we,g){Lt(g,!0);const d=["Rockstar Unit 3","Rockstar Unit 5","Rockstar Techno","Flashpoint Bristol","Redpoint Bristol","TCH Bristol","TCA Mothership","TCA Church","TCA Arc","Bloc","270 Climbing","Other"],k=["Bouldering","Sport","Mixed"],j=["Onsight","Flash","Redpoint","Repeat","Dogged","DNF"],M=["None","Projecting","Onsighting","Campusing","Repeaters","Comp Sim"],U=["None","Easy","Medium","Hard","Max","Limit+"],x=["None","Strength","Power","Strength Capacity","Power Capacity","Strength Endurance","Power Endurance","Endurance","Coordination","Slab Technique","Overhang Technique"],S=["None","Aerobic Lactic Capacity","Aerobic Lactic Power","Anaerobic Alactic Capacity","Anaerobic Alactic Power","Anaerobic Power","Anaerobic Lactic Capacity"],q=["None","Trusting feet","Double-clutch","Standing on volumes","Deadpointing","Flagging","Swapping feet","Edging","Smearing","Matching","Backstepping","Drop Knee","Bridging","Laybacking","Mantling","Kneebar","Dyno","Pogo","Coordination Moves","Gastoning","Undercutting","Compressing","Heel Hook","Toe Hook","Bicycle"],J=["None","Overhang","Vertical","Slab","Roof"],T=["None","Moon Board","Kilter Board","Tension Board","Beast","Circuit Board","Boulder wall","Lead wall","Comp wall","Auto belays"],N=["V0-","4-","V0","4","V0+","4+","V1","5","V2","5+","V3","6A","6A+","V4","6B","6B+","V5","6C","6C+","V6","7A","V7","7A+","V8","7B","7B+","V9","7C","V10","7C+","V11","8A","V12","8A+","V13","8B","V14","8B+","V15","8C","V16","8C+","V17","9A"].map(f=>f.toLowerCase());let V=_(null),w=_(rt(new Date().toISOString().split("T")[0])),y=_(rt(new Date().toTimeString().split(" ")[0].slice(0,5))),u=_(""),D=_(""),E=_(rt(["None"])),P=_("None"),B=_(rt(["None"])),A=_(rt(["None"])),X=_(rt(["None"])),Q=_(3),ie=_(3),re=_(3),ue=_(3),Z=_(3),se=_(3),W=_(3),ce=_(3),L=_(rt([{isSport:!1,name:"",grade:"",attemptType:"Flash",attemptsNum:1,notes:"",wall:"Overhang"}])),pe=_(""),Oe=_(!1);const he="indoor_climb_draft";let $=_(!1);Kt(()=>{const f=localStorage.getItem(he);if(f)try{const n=JSON.parse(f);n.location&&t(u,n.location,!0),n.time&&t(y,n.time,!0),n.isOtherLocation&&t(Oe,n.isOtherLocation,!0),n.climbingType&&t(D,n.climbingType,!0),n.trainingTypes&&t(E,n.trainingTypes,!0),n.difficulty&&t(P,n.difficulty,!0),n.categories&&t(B,n.categories,!0),n.energySystems&&t(A,n.energySystems,!0),n.wallAngles&&t(X,n.wallAngles,!0),n.fingerLoad&&t(Q,n.fingerLoad,!0),n.shoulderLoad&&t(ie,n.shoulderLoad,!0),n.forearmLoad&&t(re,n.forearmLoad,!0),n.openGrip&&t(ue,n.openGrip,!0),n.crimpGrip&&t(Z,n.crimpGrip,!0),n.pinchGrip&&t(se,n.pinchGrip,!0),n.sloperGrip&&t(W,n.sloperGrip,!0),n.jugGrip&&t(ce,n.jugGrip,!0),n.climbs&&t(L,n.climbs,!0),n.notes&&t(pe,n.notes,!0)}catch(n){console.error("Failed to restore draft",n)}t($,!0)}),da(()=>{if(!e($))return;const f={date:e(w),time:e(y),location:e(u),isOtherLocation:e(Oe),climbingType:e(D),trainingTypes:e(E),difficulty:e(P),categories:e(B),energySystems:e(A),fingerLoad:e(Q),shoulderLoad:e(ie),forearmLoad:e(re),openGrip:e(ue),crimpGrip:e(Z),pinchGrip:e(se),sloperGrip:e(W),jugGrip:e(ce),climbs:e(L),notes:e(pe)};localStorage.setItem(he,JSON.stringify(f))});function b(){e(u)==="Other"&&(t(Oe,!0),t(u,""))}function C(){t(Oe,!1),t(u,"")}function ee(){t(L,[...e(L),{isSport:!1,name:"",grade:"",attemptType:"Flash",attemptsNum:1,notes:"",wall:"Overhang"}],!0)}function Le(f){t(L,e(L).filter((n,ne)=>ne!==f),!0)}function He(f,n){e(L)[f].attemptType=n,(n==="Flash"||n==="Onsight")&&(e(L)[f].attemptsNum=1)}function Pe(f){t(V,f,!0)}function et(){t(V,null)}let ot=Xt(()=>e(D)==="Mixed");function bt(f){return e(D)==="Sport"?!0:e(D)==="Bouldering"?!1:f.isSport}function tt(f){return f.trim()?N.includes(f.trim().toLowerCase()):!0}let Ce=_("idle"),be=_("");function $e(){return e(u)?e(D)?e(L).filter(n=>n.grade.trim()&&!tt(n.grade)).length>0?"Please fix invalid grades":null:"Please select a climbing type":"Please select a location"}async function _e(){const f=$e();if(f){t(Ce,"error"),t(be,f,!0);return}t(Ce,"saving");try{const n=e(L).map(Ke=>({...Ke,isSport:bt(Ke)})),ne={date:e(w),time:e(y),location:e(u),customLocation:e(Oe)?e(u):void 0,climbingType:e(D),trainingTypes:e(E),difficulty:e(P),categories:e(B),energySystems:e(A),wallAngles:e(X),fingerLoad:e(Q),shoulderLoad:e(ie),forearmLoad:e(re),openGrip:e(ue),crimpGrip:e(Z),pinchGrip:e(se),sloperGrip:e(W),jugGrip:e(ce),climbs:n,notes:e(pe)},Ye=await Qa(ne);Ye.ok?(t(Ce,"success"),t(be,"Session saved!"),localStorage.removeItem(he)):(t(Ce,"error"),t(be,"Failed to save: "+(Ye.error||"Unknown error"))),window.dispatchEvent(new CustomEvent("session-saved")),setTimeout(()=>{Ge()},2e3)}catch(n){t(Ce,"error"),t(be,"Failed to save session"),console.error("Save error:",n)}}function Ge(){t(w,new Date().toISOString().split("T")[0],!0),t(y,new Date().toTimeString().split(" ")[0].slice(0,5),!0),t(u,""),t(Oe,!1),t(D,""),t(E,["None"],!0),t(P,"None"),t(B,["None"],!0),t(A,["None"],!0),t(X,["None"],!0),t(Q,3),t(ie,3),t(re,3),t(ue,3),t(Z,3),t(se,3),t(W,3),t(ce,3),t(L,[{isSport:!1,name:"",grade:"",attemptType:"Flash",attemptsNum:1,notes:"",wall:"Overhang"}],!0),t(pe,""),t(Ce,"idle"),t(be,"")}var Be=qs(),ze=s(l(Be),2),Me=l(ze),ye=s(l(Me),2),xe=l(ye);R(xe);var Se=s(xe,2);R(Se),a(ye),a(Me);var ke=s(Me,2),ge=s(l(ke),2);{var De=f=>{var n=ps(),ne=l(n);R(ne);var Ye=s(ne,2);Ye.__click=C,a(n),G(ne,()=>e(u),Ke=>t(u,Ke)),r(f,n)},qe=f=>{var n=ms();n.__change=b;var ne=l(n);ne.value=ne.__value="";var Ye=s(ne);de(Ye,17,()=>d,me,(Ke,Tt)=>{var v=fs(),o=l(v,!0);a(v);var H={};O(()=>{K(o,e(Tt)),H!==(H=e(Tt))&&(v.value=(v.__value=e(Tt))??"")}),r(Ke,v)}),a(n),Ze(n,()=>e(u),Ke=>t(u,Ke)),r(f,n)};z(ge,f=>{e(Oe)?f(De):f(qe,!1)})}a(ke),a(ze);var ct=s(ze,2),h=s(l(ct),2),p=l(h);p.value=p.__value="";var i=s(p);de(i,17,()=>k,me,(f,n)=>{var ne=_s(),Ye=l(ne,!0);a(ne);var Ke={};O(()=>{K(Ye,e(n)),Ke!==(Ke=e(n))&&(ne.value=(ne.__value=e(n))??"")}),r(f,ne)}),a(h),a(ct);var c=s(ct,2),I=s(l(c),2),te=l(I),Y=s(l(te),2);R(Y),vt(2),a(te);var oe=s(te,2),ve=s(l(oe),2);R(ve),vt(2),a(oe);var Ae=s(oe,2),Dt=s(l(Ae),2);R(Dt),vt(2),a(Ae),a(I);var At=s(I,4),It=l(At),mt=s(l(It),2);R(mt),vt(2),a(It);var at=s(It,2),Ne=s(l(at),2);R(Ne),vt(2),a(at);var Ee=s(at,2),Ue=s(l(Ee),2);R(Ue),vt(2),a(Ee);var dt=s(Ee,2),Nt=s(l(dt),2);R(Nt),vt(2),a(dt);var Je=s(dt,2),kt=s(l(Je),2);R(kt),vt(2),a(Je),a(At),a(c);var ut=s(c,2),st=s(l(ut),2),lt=l(st),nt=s(l(lt),2);Zt(nt,{get options(){return M},get selected(){return e(E)},placeholder:"Select types...",onChange:f=>t(E,f,!0)}),a(lt);var ht=s(lt,2),yt=s(l(ht),2);de(yt,21,()=>U,me,(f,n)=>{var ne=gs(),Ye=l(ne,!0);a(ne);var Ke={};O(()=>{K(Ye,e(n)),Ke!==(Ke=e(n))&&(ne.value=(ne.__value=e(n))??"")}),r(f,ne)}),a(yt),a(ht);var Bt=s(ht,2),ta=s(l(Bt),2);Zt(ta,{get options(){return x},get selected(){return e(B)},placeholder:"Select categories...",onChange:f=>t(B,f,!0)}),a(Bt);var We=s(Bt,2),wt=s(l(We),2);Zt(wt,{get options(){return S},get selected(){return e(A)},placeholder:"Select systems...",onChange:f=>t(A,f,!0)}),a(We);var xt=s(We,2),pa=s(l(xt),2);Zt(pa,{get options(){return T},get selected(){return e(X)},placeholder:"Select walls...",onChange:f=>t(X,f,!0)}),a(xt),a(st),a(ut);var jt=s(ut,2),aa=s(l(jt),2);xa(aa),a(jt);var Ht=s(jt,2),fa=s(l(Ht),2),ma=l(fa),_a=l(ma),sa=l(_a),qa=l(sa);{var ga=f=>{var n=bs();r(f,n)};z(qa,f=>{e(ot)&&f(ga)})}vt(8),a(sa),a(_a);var la=s(_a);de(la,21,()=>e(L),me,(f,n,ne)=>{var Ye=Ts(),Ke=l(Ye);{var Tt=le=>{var je=hs(),Fe=l(je);R(Fe),a(je),Ba(Fe,()=>e(n).isSport,Vt=>e(n).isSport=Vt),r(le,je)};z(Ke,le=>{e(ot)&&le(Tt)})}var v=s(Ke),o=l(v);R(o),a(v);var H=s(v),Ie=l(H);R(Ie);let Re;var Ft=s(Ie,2);{var Rt=le=>{var je=ys();r(le,je)};z(Ft,le=>{tt(e(n).grade)||le(Rt)})}a(H);var Ct=s(H),it=l(Ct);it.__change=le=>He(ne,le.target.value),de(it,21,()=>j,me,(le,je)=>{var Fe=Ss(),Vt=l(Fe,!0);a(Fe);var Pt={};O(()=>{K(Vt,e(je)),Pt!==(Pt=e(je))&&(Fe.value=(Fe.__value=e(je))??"")}),r(le,Fe)}),a(it);var Ot;Ra(it),a(Ct);var Mt=s(Ct),Ut=l(Mt);R(Ut),a(Mt);var ha=s(Mt),Yt=l(ha);de(Yt,21,()=>J.filter(le=>le!=="None"),me,(le,je)=>{var Fe=ks(),Vt=l(Fe,!0);a(Fe);var Pt={};O(()=>{K(Vt,e(je)),Pt!==(Pt=e(je))&&(Fe.value=(Fe.__value=e(je))??"")}),r(le,Fe)}),a(Yt),a(ha);var zt=s(ha),oa=l(zt);de(oa,21,()=>q,me,(le,je)=>{var Fe=ws(),Vt=l(Fe,!0);a(Fe);var Pt={};O(()=>{K(Vt,e(je)),Pt!==(Pt=e(je))&&(Fe.value=(Fe.__value=e(je))??"")}),r(le,Fe)}),a(oa),a(zt);var Wt=s(zt);let na;var $t=l(Wt);xa($t),a(Wt);var va=s(Wt),ya=l(va);{var Sa=le=>{var je=xs();je.__click=()=>Le(ne),r(le,je)};z(ya,le=>{e(L).length>1&&le(Sa)})}a(va),a(Ye),O(le=>{Re=gt(Ie,1,"grade-input svelte-1lf3qka",null,Re,le),Ot!==(Ot=e(n).attemptType)&&(it.value=(it.__value=e(n).attemptType)??"",za(it,e(n).attemptType)),Ut.disabled=e(n).attemptType==="Flash"||e(n).attemptType==="Onsight",na=gt(Wt,1,"notes-cell svelte-1lf3qka",null,na,{expanded:e(V)===ne})},[()=>({invalid:!tt(e(n).grade)})]),G(o,()=>e(n).name,le=>e(n).name=le),G(Ie,()=>e(n).grade,le=>e(n).grade=le),G(Ut,()=>e(n).attemptsNum,le=>e(n).attemptsNum=le),Ze(Yt,()=>e(n).wall,le=>e(n).wall=le),Ze(oa,()=>e(n).techniqueFocus,le=>e(n).techniqueFocus=le),ae("focus",$t,()=>Pe(ne)),ae("blur",$t,et),G($t,()=>e(n).notes,le=>e(n).notes=le),r(f,Ye)}),a(la),a(ma),a(fa);var Na=s(fa,2);Na.__click=ee,a(Ht);var ia=s(Ht,2),ba=l(ia);{var Fa=f=>{var n=Cs();let ne;var Ye=l(n,!0);a(n),O(()=>{ne=gt(n,1,"save-message svelte-1lf3qka",null,ne,{success:e(Ce)==="success",error:e(Ce)==="error"}),K(Ye,e(be))}),r(f,n)};z(ba,f=>{e(be)&&f(Fa)})}var ra=s(ba,2);ra.__click=_e;var Oa=l(ra);{var La=f=>{var n=ft("Saving...");r(f,n)},Ea=f=>{var n=qt(),ne=_t(n);{var Ye=Tt=>{var v=ft("‚úì Saved!");r(Tt,v)},Ke=Tt=>{var v=ft("Save Session");r(Tt,v)};z(ne,Tt=>{e(Ce)==="success"?Tt(Ye):Tt(Ke,!1)},!0)}r(f,n)};z(Oa,f=>{e(Ce)==="saving"?f(La):f(Ea,!1)})}a(ra),a(ia),a(Be),O(()=>ra.disabled=e(Ce)==="saving"),G(xe,()=>e(w),f=>t(w,f)),G(Se,()=>e(y),f=>t(y,f)),Ze(h,()=>e(D),f=>t(D,f)),G(Y,()=>e(Q),f=>t(Q,f)),G(ve,()=>e(ie),f=>t(ie,f)),G(Dt,()=>e(re),f=>t(re,f)),G(mt,()=>e(ue),f=>t(ue,f)),G(Ne,()=>e(Z),f=>t(Z,f)),G(Ue,()=>e(se),f=>t(se,f)),G(Nt,()=>e(W),f=>t(W,f)),G(kt,()=>e(ce),f=>t(ce,f)),Ze(yt,()=>e(P),f=>t(P,f)),G(aa,()=>e(pe),f=>t(pe,f)),r(we,Be),Gt()}ua(["click","change"]);var Os=m("<option> </option>"),Es=m('<div class="input-with-action svelte-15o2ys1"><input type="text" id="crag-manual" placeholder="Enter custom crag name..." class="flat-left svelte-15o2ys1"/> <button type="button" class="action-btn flat-right svelte-15o2ys1" title="Back to list">‚úï</button></div>'),As=m("<option> </option>"),Is=m("<option>Other (Manual Entry)</option>"),Fs=m('<select id="crag" class="svelte-15o2ys1"><option disabled> </option><!><!></select>'),Ls=m("<option> </option>"),Gs=m("<option> </option>"),Ds=m('<th class="svelte-15o2ys1">Sport?</th>'),Rs=m('<td class="center svelte-15o2ys1"><input type="checkbox" class="svelte-15o2ys1"/></td>'),zs=m('<span class="grade-error svelte-15o2ys1">Invalid</span>'),js=m("<option> </option>"),Vs=m("<option> </option>"),Ps=m("<option> </option>"),Bs=m('<button type="button" class="remove-btn svelte-15o2ys1">‚úï</button>'),Ms=m('<tr><!><td class="svelte-15o2ys1"><input type="text" placeholder="Route name..." class="svelte-15o2ys1"/></td><td class="svelte-15o2ys1"><input type="text" placeholder="V3"/> <!></td><td class="svelte-15o2ys1"><select class="svelte-15o2ys1"></select></td><td class="svelte-15o2ys1"><input type="number" min="1" class="svelte-15o2ys1"/></td><td class="svelte-15o2ys1"><select class="svelte-15o2ys1"></select></td><td class="svelte-15o2ys1"><select class="svelte-15o2ys1"></select></td><td><textarea placeholder="Notes..." class="svelte-15o2ys1"></textarea></td><td class="center svelte-15o2ys1"><!></td></tr>'),Us=m("<div> </div>"),Ws=m('<div class="form-content svelte-15o2ys1"><h3 class="svelte-15o2ys1">‚õ∞Ô∏è Outdoor Climb</h3> <div class="form-row svelte-15o2ys1"><div class="form-group svelte-15o2ys1"><label for="date" class="svelte-15o2ys1">Date</label> <div class="date-time-row svelte-15o2ys1"><input type="date" id="date" class="svelte-15o2ys1"/> <input type="time" id="time" class="svelte-15o2ys1"/></div></div> <div class="form-group svelte-15o2ys1"><label for="area" class="svelte-15o2ys1">Area</label> <select id="area" class="svelte-15o2ys1"><option disabled>Select area...</option><!></select></div></div> <div class="form-row svelte-15o2ys1"><div class="form-group svelte-15o2ys1"><label for="crag" class="svelte-15o2ys1">Crag</label> <!></div> <div class="form-group svelte-15o2ys1"><label for="sector" class="svelte-15o2ys1">Wall / Sector</label> <input type="text" id="sector" placeholder="Enter sector or wall name..." class="svelte-15o2ys1"/></div></div> <div class="form-group svelte-15o2ys1"><label for="climbing-type" class="svelte-15o2ys1">Climbing Type</label> <select id="climbing-type" class="svelte-15o2ys1"><option disabled>Select type...</option><!></select></div> <div class="load-section svelte-15o2ys1"><h4 class="svelte-15o2ys1">Load Metrics</h4> <div class="load-metrics svelte-15o2ys1"><div class="load-item svelte-15o2ys1"><label for="finger-load" class="svelte-15o2ys1">Finger</label> <input type="number" id="finger-load" min="1" max="5" class="svelte-15o2ys1"/> <span class="load-scale svelte-15o2ys1">/ 5</span></div> <div class="load-item svelte-15o2ys1"><label for="shoulder-load" class="svelte-15o2ys1">Shoulder</label> <input type="number" id="shoulder-load" min="1" max="5" class="svelte-15o2ys1"/> <span class="load-scale svelte-15o2ys1">/ 5</span></div> <div class="load-item svelte-15o2ys1"><label for="forearm-load" class="svelte-15o2ys1">Forearm</label> <input type="number" id="forearm-load" min="1" max="5" class="svelte-15o2ys1"/> <span class="load-scale svelte-15o2ys1">/ 5</span></div></div> <h4 class="mt-4 svelte-15o2ys1">Grip Metrics</h4> <div class="load-metrics svelte-15o2ys1"><div class="load-item svelte-15o2ys1"><label for="open-grip" class="svelte-15o2ys1">Open</label> <input type="number" id="open-grip" min="1" max="5" class="svelte-15o2ys1"/> <span class="load-scale svelte-15o2ys1">/ 5</span></div> <div class="load-item svelte-15o2ys1"><label for="crimp-grip" class="svelte-15o2ys1">Crimp</label> <input type="number" id="crimp-grip" min="1" max="5" class="svelte-15o2ys1"/> <span class="load-scale svelte-15o2ys1">/ 5</span></div> <div class="load-item svelte-15o2ys1"><label for="pinch-grip" class="svelte-15o2ys1">Pinch</label> <input type="number" id="pinch-grip" min="1" max="5" class="svelte-15o2ys1"/> <span class="load-scale svelte-15o2ys1">/ 5</span></div> <div class="load-item svelte-15o2ys1"><label for="sloper-grip" class="svelte-15o2ys1">Sloper</label> <input type="number" id="sloper-grip" min="1" max="5" class="svelte-15o2ys1"/> <span class="load-scale svelte-15o2ys1">/ 5</span></div> <div class="load-item svelte-15o2ys1"><label for="jug-grip" class="svelte-15o2ys1">Jug</label> <input type="number" id="jug-grip" min="1" max="5" class="svelte-15o2ys1"/> <span class="load-scale svelte-15o2ys1">/ 5</span></div></div></div> <div class="training-section svelte-15o2ys1"><h4 class="svelte-15o2ys1">Training Details</h4> <div class="training-grid svelte-15o2ys1"><div class="training-item svelte-15o2ys1"><label for="training-type" class="svelte-15o2ys1">Training Type</label> <!></div> <div class="training-item svelte-15o2ys1"><label for="difficulty" class="svelte-15o2ys1">Difficulty</label> <select id="difficulty" class="svelte-15o2ys1"></select></div> <div class="training-item svelte-15o2ys1"><label for="category" class="svelte-15o2ys1">Category</label> <!></div> <div class="training-item svelte-15o2ys1"><label for="energy-system" class="svelte-15o2ys1">Energy System</label> <!></div></div></div> <div class="form-group notes-section svelte-15o2ys1"><label for="session-notes" class="svelte-15o2ys1">Session Notes</label> <textarea id="session-notes" placeholder="How did the session feel? Weather, conditions, mood..." rows="3"></textarea></div> <div class="climbs-section svelte-15o2ys1"><h4 class="svelte-15o2ys1">Climbs</h4> <div class="table-container svelte-15o2ys1"><table class="climbs-table svelte-15o2ys1"><thead><tr><!><th class="svelte-15o2ys1">Name</th><th class="svelte-15o2ys1">Grade</th><th class="svelte-15o2ys1">Attempt</th><th class="svelte-15o2ys1">#</th><th class="svelte-15o2ys1">Wall Angle</th><th class="svelte-15o2ys1">Technique Focus</th><th class="svelte-15o2ys1">Notes</th><th class="svelte-15o2ys1"></th></tr></thead><tbody></tbody></table></div> <button type="button" class="add-btn svelte-15o2ys1">+ Add Climb</button></div> <div class="submit-section svelte-15o2ys1"><!> <button type="button" class="submit-btn svelte-15o2ys1"><!></button></div></div>');function $s(we,g){Lt(g,!0);const d=ls(),k=["Boulder","Sport","Trad"],j=["Onsight","Flash","Redpoint","Repeat","Dogged","DNF"],M=["None","Overhang","Vertical","Slab","Roof"],U=["None","Projecting","Onsighting","Campusing","Repeaters","Comp Sim"],x=["None","Easy","Medium","Hard","Max","Limit+"],S=["None","Strength","Power","Strength Capacity","Power Capacity","Strength Endurance","Power Endurance","Endurance","Coordination","Slab Technique","Overhang Technique"],q=["None","Aerobic Lactic Capacity","Aerobic Lactic Power","Anaerobic Alactic Capacity","Anaerobic Alactic Power","Anaerobic Power","Anaerobic Lactic Capacity"],J=["None","Trusting feet","Double-clutch","Deadpointing","Flagging","Swapping feet","Edging","Smearing","Matching","Backstepping","Drop Knee","Bridging","Laybacking","Mantling","Kneebar","Dyno","Coordination Moves","Gastoning","Undercutting","Compressing","Heel Hook","Toe Hook","Bicycle"],F=["V0-","4-","V0","4","V0+","4+","V1","5","V2","5+","V3","6A","6A+","V4","6B","6B+","V5","6C","6C+","V6","7A","V7","7A+","V8","7B","7B+","V9","7C","V10","7C+","V11","8A","V12","8A+","V13","8B","V14","8B+","V15","8C","V16","8C+","V17","9A"].map(v=>v.toLowerCase());let N=_(null),V=_(rt(new Date().toISOString().split("T")[0])),w=_(rt(new Date().toTimeString().split(" ")[0].slice(0,5))),y=_(""),u=_(""),D=_(""),E=_(""),P=_(rt(["None"])),B=_("None"),A=_(rt(["None"])),X=_(rt(["None"])),Q=_(3),ie=_(3),re=_(3),ue=_(3),Z=_(3),se=_(3),W=_(3),ce=_(3),L=_(rt([{isSport:!1,name:"",grade:"",attemptType:"Flash",attemptsNum:1,notes:""}])),pe=_(""),Oe=Xt(()=>e(y)?is(e(y)):[]),he=_(!1);const $="outdoor_climb_draft";let b=_(!1);Kt(()=>{const v=localStorage.getItem($);if(v)try{const o=JSON.parse(v);o.time&&t(w,o.time,!0),o.area&&t(y,o.area,!0),o.crag&&t(u,o.crag,!0),o.sector&&t(D,o.sector,!0),o.isOtherCrag&&t(he,o.isOtherCrag,!0),o.climbingType&&t(E,o.climbingType,!0),o.trainingTypes&&t(P,o.trainingTypes,!0),o.difficulty&&t(B,o.difficulty,!0),o.categories&&t(A,o.categories,!0),o.energySystems&&t(X,o.energySystems,!0),o.fingerLoad&&t(Q,o.fingerLoad,!0),o.shoulderLoad&&t(ie,o.shoulderLoad,!0),o.forearmLoad&&t(re,o.forearmLoad,!0),o.openGrip&&t(ue,o.openGrip,!0),o.crimpGrip&&t(Z,o.crimpGrip,!0),o.pinchGrip&&t(se,o.pinchGrip,!0),o.sloperGrip&&t(W,o.sloperGrip,!0),o.jugGrip&&t(ce,o.jugGrip,!0),o.climbs&&t(L,o.climbs,!0),o.notes&&t(pe,o.notes,!0)}catch(o){console.error("Failed to restore draft",o)}t(b,!0)}),da(()=>{if(!e(b))return;const v={date:e(V),time:e(w),area:e(y),crag:e(u),sector:e(D),isOtherCrag:e(he),climbingType:e(E),trainingTypes:e(P),difficulty:e(B),categories:e(A),energySystems:e(X),fingerLoad:e(Q),shoulderLoad:e(ie),forearmLoad:e(re),openGrip:e(ue),crimpGrip:e(Z),pinchGrip:e(se),sloperGrip:e(W),jugGrip:e(ce),climbs:e(L),notes:e(pe)};localStorage.setItem($,JSON.stringify(v))}),da(()=>{e(y)&&(t(u,""),t(he,!1))});function C(){e(u)==="Other"&&(t(he,!0),t(u,""))}function ee(){t(he,!1),t(u,"")}function Le(){t(L,[...e(L),{isSport:!1,name:"",grade:"",attemptType:"Flash",attemptsNum:1,notes:""}],!0)}function He(v){t(L,e(L).filter((o,H)=>H!==v),!0)}function Pe(v,o){e(L)[v].attemptType=o,(o==="Flash"||o==="Onsight")&&(e(L)[v].attemptsNum=1)}function et(v){t(N,v,!0)}function ot(){t(N,null)}let bt=Xt(()=>e(E)==="Trad");function tt(v){return e(E)==="Sport"?!0:e(E)==="Boulder"?!1:v.isSport}function Ce(v){return v.trim()?F.includes(v.trim().toLowerCase()):!0}let be=_("idle"),$e=_("");function _e(){return e(y)?e(u)?e(E)?e(L).filter(o=>o.grade.trim()&&!Ce(o.grade)).length>0?"Please fix invalid grades":null:"Please select a climbing type":"Please select a crag":"Please select an area"}async function Ge(){const v=_e();if(v){t(be,"error"),t($e,v,!0);return}t(be,"saving");try{const o=e(L).map(Re=>({...Re,isSport:tt(Re)})),H={date:e(V),time:e(w),area:e(y),crag:e(u),sector:e(D)||void 0,climbingType:e(E),trainingTypes:e(P),difficulty:e(B),categories:e(A),energySystems:e(X),fingerLoad:e(Q),shoulderLoad:e(ie),forearmLoad:e(re),openGrip:e(ue),crimpGrip:e(Z),pinchGrip:e(se),sloperGrip:e(W),jugGrip:e(ce),climbs:o,notes:e(pe)},Ie=await Xa(H);Ie.ok?(t(be,"success"),t($e,"Session saved!"),localStorage.removeItem($)):(t(be,"error"),t($e,"Failed to save: "+(Ie.error||"Unknown error"))),window.dispatchEvent(new CustomEvent("session-saved")),setTimeout(()=>{Be()},2e3)}catch(o){t(be,"error"),t($e,"Failed to save session"),console.error("Save error:",o)}}function Be(){t(V,new Date().toISOString().split("T")[0],!0),t(w,new Date().toTimeString().split(" ")[0].slice(0,5),!0),t(y,""),t(u,""),t(D,""),t(E,""),t(P,["None"],!0),t(B,"None"),t(A,["None"],!0),t(X,["None"],!0),t(Q,3),t(ie,3),t(re,3),t(ue,3),t(Z,3),t(se,3),t(W,3),t(ce,3),t(L,[{isSport:!1,name:"",grade:"",attemptType:"Flash",attemptsNum:1,notes:""}],!0),t(pe,""),t(be,"idle"),t($e,"")}var ze=Ws(),Me=s(l(ze),2),ye=l(Me),xe=s(l(ye),2),Se=l(xe);R(Se);var ke=s(Se,2);R(ke),a(xe),a(ye);var ge=s(ye,2),De=s(l(ge),2),qe=l(De);qe.value=qe.__value="";var ct=s(qe);de(ct,17,()=>d,me,(v,o)=>{var H=Os(),Ie=l(H,!0);a(H);var Re={};O(()=>{K(Ie,e(o)),Re!==(Re=e(o))&&(H.value=(H.__value=e(o))??"")}),r(v,H)}),a(De),a(ge),a(Me);var h=s(Me,2),p=l(h),i=s(l(p),2);{var c=v=>{var o=Es(),H=l(o);R(H);var Ie=s(H,2);Ie.__click=ee,a(o),G(H,()=>e(u),Re=>t(u,Re)),r(v,o)},I=v=>{var o=Fs();o.__change=C;var H=l(o),Ie=l(H,!0);a(H),H.value=H.__value="";var Re=s(H);de(Re,17,()=>e(Oe),me,(Ct,it)=>{var Ot=As(),Mt=l(Ot,!0);a(Ot);var Ut={};O(()=>{K(Mt,e(it)),Ut!==(Ut=e(it))&&(Ot.value=(Ot.__value=e(it))??"")}),r(Ct,Ot)});var Ft=s(Re);{var Rt=Ct=>{var it=Is();it.value=it.__value="Other",r(Ct,it)};z(Ft,Ct=>{e(y)&&Ct(Rt)})}a(o),O(()=>{o.disabled=!e(y),K(Ie,e(y)?"Select crag...":"Select area first...")}),Ze(o,()=>e(u),Ct=>t(u,Ct)),r(v,o)};z(i,v=>{e(he)?v(c):v(I,!1)})}a(p);var te=s(p,2),Y=s(l(te),2);R(Y),a(te),a(h);var oe=s(h,2),ve=s(l(oe),2),Ae=l(ve);Ae.value=Ae.__value="";var Dt=s(Ae);de(Dt,17,()=>k,me,(v,o)=>{var H=Ls(),Ie=l(H,!0);a(H);var Re={};O(()=>{K(Ie,e(o)),Re!==(Re=e(o))&&(H.value=(H.__value=e(o))??"")}),r(v,H)}),a(ve),a(oe);var At=s(oe,2),It=s(l(At),2),mt=l(It),at=s(l(mt),2);R(at),vt(2),a(mt);var Ne=s(mt,2),Ee=s(l(Ne),2);R(Ee),vt(2),a(Ne);var Ue=s(Ne,2),dt=s(l(Ue),2);R(dt),vt(2),a(Ue),a(It);var Nt=s(It,4),Je=l(Nt),kt=s(l(Je),2);R(kt),vt(2),a(Je);var ut=s(Je,2),st=s(l(ut),2);R(st),vt(2),a(ut);var lt=s(ut,2),nt=s(l(lt),2);R(nt),vt(2),a(lt);var ht=s(lt,2),yt=s(l(ht),2);R(yt),vt(2),a(ht);var Bt=s(ht,2),ta=s(l(Bt),2);R(ta),vt(2),a(Bt),a(Nt),a(At);var We=s(At,2),wt=s(l(We),2),xt=l(wt),pa=s(l(xt),2);Zt(pa,{get options(){return U},get selected(){return e(P)},placeholder:"Select types...",onChange:v=>t(P,v,!0)}),a(xt);var jt=s(xt,2),aa=s(l(jt),2);de(aa,21,()=>x,me,(v,o)=>{var H=Gs(),Ie=l(H,!0);a(H);var Re={};O(()=>{K(Ie,e(o)),Re!==(Re=e(o))&&(H.value=(H.__value=e(o))??"")}),r(v,H)}),a(aa),a(jt);var Ht=s(jt,2),fa=s(l(Ht),2);Zt(fa,{get options(){return S},get selected(){return e(A)},placeholder:"Select categories...",onChange:v=>t(A,v,!0)}),a(Ht);var ma=s(Ht,2),_a=s(l(ma),2);Zt(_a,{get options(){return q},get selected(){return e(X)},placeholder:"Select systems...",onChange:v=>t(X,v,!0)}),a(ma),a(wt),a(We);var sa=s(We,2),qa=s(l(sa),2);xa(qa),a(sa);var ga=s(sa,2),la=s(l(ga),2),Na=l(la),ia=l(Na),ba=l(ia),Fa=l(ba);{var ra=v=>{var o=Ds();r(v,o)};z(Fa,v=>{e(bt)&&v(ra)})}vt(8),a(ba),a(ia);var Oa=s(ia);de(Oa,21,()=>e(L),me,(v,o,H)=>{var Ie=Ms(),Re=l(Ie);{var Ft=fe=>{var Qe=Rs(),Xe=l(Qe);R(Xe),a(Qe),Ba(Xe,()=>e(o).isSport,Qt=>e(o).isSport=Qt),r(fe,Qe)};z(Re,fe=>{e(bt)&&fe(Ft)})}var Rt=s(Re),Ct=l(Rt);R(Ct),a(Rt);var it=s(Rt),Ot=l(it);R(Ot);let Mt;var Ut=s(Ot,2);{var ha=fe=>{var Qe=zs();r(fe,Qe)};z(Ut,fe=>{Ce(e(o).grade)||fe(ha)})}a(it);var Yt=s(it),zt=l(Yt);zt.__change=fe=>Pe(H,fe.target.value),de(zt,21,()=>j,me,(fe,Qe)=>{var Xe=js(),Qt=l(Xe,!0);a(Xe);var Jt={};O(()=>{K(Qt,e(Qe)),Jt!==(Jt=e(Qe))&&(Xe.value=(Xe.__value=e(Qe))??"")}),r(fe,Xe)}),a(zt);var oa;Ra(zt),a(Yt);var Wt=s(Yt),na=l(Wt);R(na),a(Wt);var $t=s(Wt),va=l($t);de(va,21,()=>M.filter(fe=>fe!=="None"),me,(fe,Qe)=>{var Xe=Vs(),Qt=l(Xe,!0);a(Xe);var Jt={};O(()=>{K(Qt,e(Qe)),Jt!==(Jt=e(Qe))&&(Xe.value=(Xe.__value=e(Qe))??"")}),r(fe,Xe)}),a(va),a($t);var ya=s($t),Sa=l(ya);de(Sa,21,()=>J,me,(fe,Qe)=>{var Xe=Ps(),Qt=l(Xe,!0);a(Xe);var Jt={};O(()=>{K(Qt,e(Qe)),Jt!==(Jt=e(Qe))&&(Xe.value=(Xe.__value=e(Qe))??"")}),r(fe,Xe)}),a(Sa),a(ya);var le=s(ya);let je;var Fe=l(le);xa(Fe),a(le);var Vt=s(le),Pt=l(Vt);{var Wa=fe=>{var Qe=Bs();Qe.__click=()=>He(H),r(fe,Qe)};z(Pt,fe=>{e(L).length>1&&fe(Wa)})}a(Vt),a(Ie),O(fe=>{Mt=gt(Ot,1,"grade-input svelte-15o2ys1",null,Mt,fe),oa!==(oa=e(o).attemptType)&&(zt.value=(zt.__value=e(o).attemptType)??"",za(zt,e(o).attemptType)),na.disabled=e(o).attemptType==="Flash"||e(o).attemptType==="Onsight",je=gt(le,1,"notes-cell svelte-15o2ys1",null,je,{expanded:e(N)===H})},[()=>({invalid:!Ce(e(o).grade)})]),G(Ct,()=>e(o).name,fe=>e(o).name=fe),G(Ot,()=>e(o).grade,fe=>e(o).grade=fe),G(na,()=>e(o).attemptsNum,fe=>e(o).attemptsNum=fe),Ze(va,()=>e(o).wall,fe=>e(o).wall=fe),Ze(Sa,()=>e(o).techniqueFocus,fe=>e(o).techniqueFocus=fe),ae("focus",Fe,()=>et(H)),ae("blur",Fe,ot),G(Fe,()=>e(o).notes,fe=>e(o).notes=fe),r(v,Ie)}),a(Oa),a(Na),a(la);var La=s(la,2);La.__click=Le,a(ga);var Ea=s(ga,2),f=l(Ea);{var n=v=>{var o=Us();let H;var Ie=l(o,!0);a(o),O(()=>{H=gt(o,1,"save-message svelte-15o2ys1",null,H,{success:e(be)==="success",error:e(be)==="error"}),K(Ie,e($e))}),r(v,o)};z(f,v=>{e($e)&&v(n)})}var ne=s(f,2);ne.__click=Ge;var Ye=l(ne);{var Ke=v=>{var o=ft("Saving...");r(v,o)},Tt=v=>{var o=qt(),H=_t(o);{var Ie=Ft=>{var Rt=ft("‚úì Saved!");r(Ft,Rt)},Re=Ft=>{var Rt=ft("Save Session");r(Ft,Rt)};z(H,Ft=>{e(be)==="success"?Ft(Ie):Ft(Re,!1)},!0)}r(v,o)};z(Ye,v=>{e(be)==="saving"?v(Ke):v(Tt,!1)})}a(ne),a(Ea),a(ze),O(()=>ne.disabled=e(be)==="saving"),G(Se,()=>e(V),v=>t(V,v)),G(ke,()=>e(w),v=>t(w,v)),Ze(De,()=>e(y),v=>t(y,v)),G(Y,()=>e(D),v=>t(D,v)),Ze(ve,()=>e(E),v=>t(E,v)),G(at,()=>e(Q),v=>t(Q,v)),G(Ee,()=>e(ie),v=>t(ie,v)),G(dt,()=>e(re),v=>t(re,v)),G(kt,()=>e(ue),v=>t(ue,v)),G(st,()=>e(Z),v=>t(Z,v)),G(nt,()=>e(se),v=>t(se,v)),G(yt,()=>e(W),v=>t(W,v)),G(ta,()=>e(ce),v=>t(ce,v)),Ze(aa,()=>e(B),v=>t(B,v)),G(qa,()=>e(pe),v=>t(pe,v)),r(we,ze),Gt()}ua(["click","change"]);var Js=m('<div><div class="col set-num svelte-ow8x7m"> </div> <div class="col weight svelte-ow8x7m"><input type="number" placeholder="-" class="svelte-ow8x7m"/></div> <div class="col reps svelte-ow8x7m"><input type="number" placeholder="-" class="svelte-ow8x7m"/></div> <div class="col check svelte-ow8x7m"><button><!></button></div></div>');function Ks(we,g){Lt(g,!1);let d=St(g,"setNumber",8),k=St(g,"set",12);const j=Ta();function M(){k(k().completed=!k().completed,!0),j("change",k()),k().completed&&j("complete")}function U(P){j("focus",{field:P,value:k()[P],set:k()})}Ca();var x=Js();let S;var q=l(x),J=l(q,!0);a(q);var T=s(q,2),F=l(T);R(F),a(T);var N=s(T,2),V=l(N);R(V),a(N);var w=s(N,2),y=l(w);let u;var D=l(y);{var E=P=>{var B=ft("‚úì");r(P,B)};z(D,P=>{pt(k()),Te(()=>k().completed)&&P(E)})}a(y),a(w),a(x),O(()=>{S=gt(x,1,"set-row svelte-ow8x7m",null,S,{completed:k().completed}),K(J,d()),u=gt(y,1,"check-btn svelte-ow8x7m",null,u,{checked:k().completed})}),G(F,()=>k().weight,P=>k(k().weight=P,!0)),ae("focus",F,()=>U("weight")),G(V,()=>k().reps,P=>k(k().reps=P,!0)),ae("focus",V,()=>U("reps")),ae("click",y,M),r(we,x),Gt()}var Hs=m('<div><span class="dot svelte-1ni79z8"></span> <span class="text"> </span></div>'),Ys=m("<button></button>"),Qs=m('<div class="exercise-card svelte-1ni79z8"><div class="header svelte-1ni79z8"><div class="title-group svelte-1ni79z8"><button class="icon-btn info-btn svelte-1ni79z8" aria-label="Exercise Info"><div class="info-icon svelte-1ni79z8">?</div></button> <div><h4 class="svelte-1ni79z8"> </h4> <button class="icon-btn timer-btn svelte-1ni79z8" aria-label="Open Timer" title="Interval Timer">‚è±</button> <div class="benchmarks svelte-1ni79z8"></div></div></div> <button class="icon-btn delete-btn svelte-1ni79z8" aria-label="Delete Exercise">üóëÔ∏è</button></div> <div class="table-header svelte-1ni79z8"><div class="col">Set</div> <div class="col">kg</div> <div class="col">Reps</div> <div class="col">‚úì</div></div> <div class="sets"></div> <button class="add-set-btn svelte-1ni79z8">+ Add Set</button> <div class="difficulty-footer svelte-1ni79z8"><span class="diff-label svelte-1ni79z8">How did it feel?</span> <div class="diff-circles svelte-1ni79z8"></div></div></div>');function Xs(we,g){Lt(g,!1);let d=St(g,"exercise",12),k=St(g,"benchmarks",24,()=>({}));const j=Ta();function M(){const B=d().sets[d().sets.length-1],A={weight:B?B.weight:0,reps:B?B.reps:0,isWarmup:!1,isFailure:!1,isDropSet:!1,completed:!1};d(d().sets=[...d().sets,A],!0)}const U=["Green","Yellow","Orange","Red"];Ca();var x=Qs(),S=l(x),q=l(S),J=l(q),T=s(J,2),F=l(T),N=l(F,!0);a(F);var V=s(F,2),w=s(V,2);de(w,5,()=>U,me,(B,A)=>{var X=qt(),Q=_t(X);{var ie=re=>{var ue=Hs();gt(ue,1,"benchmark-pill svelte-1ni79z8",null,{},{"has-data":!0});var Z=s(l(ue),2),se=l(Z);a(Z),a(ue),O(W=>{Va(ue,`--pill-color: var(--color-${W??""})`),K(se,`${pt(k()),e(A),Te(()=>k()[e(A)]?.weight)??""}kg x ${pt(k()),e(A),Te(()=>k()[e(A)]?.reps)??""}`)},[()=>(e(A),Te(()=>e(A).toLowerCase()))]),r(re,ue)};z(Q,re=>{pt(k()),e(A),Te(()=>k()[e(A)])&&re(ie)})}r(B,X)}),a(w),a(T),a(q);var y=s(q,2);a(S);var u=s(S,4);de(u,5,()=>(pt(d()),Te(()=>d().sets)),me,(B,A,X)=>{Ks(B,{setNumber:X+1,get set(){return(pt(d()),Te(()=>d().sets))[X]},set set(Q){(pt(d()),Te(()=>d().sets))[X]=Q,Aa(()=>d())},$$events:{complete(Q){ea.call(this,g,Q)},focus(Q){ea.call(this,g,Q)},change(Q){ea.call(this,g,Q)}},$$legacy:!0})}),a(u);var D=s(u,2),E=s(D,2),P=s(l(E),2);de(P,5,()=>U,me,(B,A)=>{var X=Ys();let Q;O(ie=>{Q=gt(X,1,"diff-circle svelte-1ni79z8",null,Q,{selected:d().difficulty===e(A)}),Va(X,`--circle-color: var(--color-${ie??""})`),Et(X,"aria-label",`Mark as ${e(A)??""}`)},[()=>(e(A),Te(()=>e(A).toLowerCase()))]),ae("click",X,()=>d(d().difficulty=e(A),!0)),r(B,X)}),a(P),a(E),a(x),O(()=>K(N,(pt(d()),Te(()=>d().name)))),ae("click",J,()=>j("info",d())),ae("click",V,()=>j("timer",d())),ae("click",y,()=>j("delete",d())),ae("click",D,M),r(we,x),Gt()}var Zs=m('<div class="keypad svelte-1fay4f8"><div class="header svelte-1fay4f8"><span class="label svelte-1fay4f8"> </span> <div class="display svelte-1fay4f8" role="textbox" aria-readonly="true"> </div></div> <div class="quick-adds svelte-1fay4f8"><button class="svelte-1fay4f8">+2.5</button> <button class="svelte-1fay4f8">+5</button> <button class="svelte-1fay4f8">+10</button></div> <div class="grid svelte-1fay4f8"><button class="svelte-1fay4f8">1</button> <button class="svelte-1fay4f8">2</button> <button class="svelte-1fay4f8">3</button> <button class="svelte-1fay4f8">4</button> <button class="svelte-1fay4f8">5</button> <button class="svelte-1fay4f8">6</button> <button class="svelte-1fay4f8">7</button> <button class="svelte-1fay4f8">8</button> <button class="svelte-1fay4f8">9</button> <button class="action svelte-1fay4f8">C</button> <button class="svelte-1fay4f8">0</button> <button class="action svelte-1fay4f8">‚å´</button></div></div>');function el(we,g){Lt(g,!1);let d=St(g,"value",8,null),k=St(g,"label",8,"Value");const j=Ta();function M(L){const pe=d()?.toString()||"";if(pe.length>=5)return;const Oe=parseFloat(pe+L.toString());j("change",Oe)}function U(){j("change",0)}function x(){const L=d()?.toString()||"";if(L.length<=1){j("change",0);return}const pe=parseFloat(L.slice(0,-1));j("change",pe)}function S(L){j("change",(d()||0)+L)}Ca();var q=Zs(),J=l(q),T=l(J),F=l(T,!0);a(T);var N=s(T,2),V=l(N,!0);a(N),a(J);var w=s(J,2),y=l(w),u=s(y,2),D=s(u,2);a(w);var E=s(w,2),P=l(E),B=s(P,2),A=s(B,2),X=s(A,2),Q=s(X,2),ie=s(Q,2),re=s(ie,2),ue=s(re,2),Z=s(ue,2),se=s(Z,2),W=s(se,2),ce=s(W,2);a(E),a(q),O(()=>{K(F,k()),Et(N,"aria-label",k()),K(V,d()||0)}),ae("click",y,()=>S(2.5)),ae("click",u,()=>S(5)),ae("click",D,()=>S(10)),ae("click",P,()=>M(1)),ae("click",B,()=>M(2)),ae("click",A,()=>M(3)),ae("click",X,()=>M(4)),ae("click",Q,()=>M(5)),ae("click",ie,()=>M(6)),ae("click",re,()=>M(7)),ae("click",ue,()=>M(8)),ae("click",Z,()=>M(9)),ae("click",se,U),ae("click",W,()=>M(0)),ae("click",ce,x),r(we,q),Gt()}function tl(we){const g=we-1;return g*g*g+1}class Ga{static audioContext=null;static gainNode=null;static isInitialized=!1;static init(){if(!this.isInitialized)try{(window.AudioContext||window.webkitAudioContext)&&(this.audioContext=new AudioContext,this.gainNode=this.audioContext.createGain(),this.gainNode.connect(this.audioContext.destination),this.isInitialized=!0)}catch(g){console.warn("AudioContext not supported",g)}}static async playChime(){if(this.isInitialized||this.init(),!this.audioContext||!this.gainNode)return;this.audioContext.state==="suspended"&&await this.audioContext.resume();const g=this.audioContext.currentTime,d=this.audioContext.createOscillator();d.type="sine",d.frequency.setValueAtTime(880,g),d.frequency.exponentialRampToValueAtTime(.01,g+1.5);const k=this.audioContext.createGain();k.gain.setValueAtTime(.3,g),k.gain.exponentialRampToValueAtTime(.001,g+1.5),d.connect(k),k.connect(this.gainNode),d.start(g),d.stop(g+1.5);const j=this.audioContext.createOscillator();j.type="triangle",j.frequency.setValueAtTime(1760,g),j.frequency.exponentialRampToValueAtTime(.01,g+1);const M=this.audioContext.createGain();M.gain.setValueAtTime(.1,g),M.gain.exponentialRampToValueAtTime(.001,g+1),j.connect(M),M.connect(this.gainNode),j.start(g),j.stop(g+1)}static vibrate(g=200){typeof navigator<"u"&&navigator.vibrate&&navigator.vibrate(g)}static async playCompletionAlert(){this.vibrate([500,100,500]),await this.playChime()}static async playTick(){if(this.isInitialized||this.init(),!this.audioContext||!this.gainNode)return;this.audioContext.state==="suspended"&&await this.audioContext.resume();const g=this.audioContext.currentTime,d=this.audioContext.createOscillator();d.type="sine",d.frequency.setValueAtTime(600,g);const k=this.audioContext.createGain();k.gain.setValueAtTime(.05,g),k.gain.exponentialRampToValueAtTime(.001,g+.1),d.connect(k),k.connect(this.gainNode),d.start(g),d.stop(g+.1),this.vibrate(50)}}var al=m('<div class="setup-form svelte-18i4gcv"><div class="input-group svelte-18i4gcv"><label for="work-duration" class="svelte-18i4gcv">Work</label> <div class="time-adjuster svelte-18i4gcv"><button class="svelte-18i4gcv">‚àí</button> <span class="val svelte-18i4gcv"> </span> <button class="svelte-18i4gcv">+</button></div></div> <div class="input-group svelte-18i4gcv"><label for="rest-duration" class="svelte-18i4gcv">Rest</label> <div class="time-adjuster svelte-18i4gcv"><button class="svelte-18i4gcv">‚àí</button> <span class="val svelte-18i4gcv"> </span> <button class="svelte-18i4gcv">+</button></div></div> <div class="input-group svelte-18i4gcv"><label for="num-sets" class="svelte-18i4gcv">Sets</label> <div class="time-adjuster svelte-18i4gcv"><button class="svelte-18i4gcv">‚àí</button> <span class="val svelte-18i4gcv"> </span> <button class="svelte-18i4gcv">+</button></div></div> <button class="start-btn svelte-18i4gcv">‚ñ∂ Start Interval</button></div>'),sl=m('<div class="finished-state svelte-18i4gcv"><div class="check-icon svelte-18i4gcv">‚úì</div> <h3>Nicely Done!</h3> <button class="reset-btn svelte-18i4gcv">Back to Setup</button></div>'),ll=m('<button class="ctl-btn pause svelte-18i4gcv">‚è∏</button>'),il=m('<button class="ctl-btn play svelte-18i4gcv">‚ñ∂</button>'),rl=m('<div class="timer-circle svelte-18i4gcv"><svg viewBox="0 0 100 100" class="ring svelte-18i4gcv"><circle class="track svelte-18i4gcv" cx="50" cy="50" r="45"></circle><circle class="progress svelte-18i4gcv" cx="50" cy="50" r="45" stroke-dasharray="283"></circle></svg> <div class="timer-val svelte-18i4gcv"><div class="phase-label svelte-18i4gcv"> </div> <div class="digits svelte-18i4gcv"> </div></div></div> <div class="controls svelte-18i4gcv"><!> <button class="ctl-btn skip svelte-18i4gcv">‚è≠</button> <button class="ctl-btn stop svelte-18i4gcv" style="font-size: 1rem; padding: 1rem;">Stop</button></div>',1),ol=m('<div class="overlay svelte-18i4gcv" role="button" tabindex="0"><div><div class="header svelte-18i4gcv"><span class="title svelte-18i4gcv"><!></span> <button class="close-btn svelte-18i4gcv">‚úï</button></div> <div class="content svelte-18i4gcv"><!></div></div></div>');function Ua(we,g){Lt(g,!0);let d=St(g,"visible",15,!1),k=St(g,"defaultSets",3,3),j=St(g,"associatedExerciseId",7,null),M=St(g,"onComplete",3,()=>{}),U=St(g,"onClose",3,()=>{}),x=_("SETUP"),S=_("PAUSED"),q=_(30),J=_(60),T=_(3),F=_(1),N=_(30),V=_(null),w=_(null);const y="interval_timer_prefs";let u=null;da(()=>{d()&&(Ga.init(),e(x)==="SETUP"&&(D(),k()>0&&t(T,k())))}),Kt(()=>(B(),u=setInterval(W,100),()=>clearInterval(u)));function D(){if(j())try{const $=JSON.parse(localStorage.getItem(y)||"{}"),b=$[j()]||$.default;b&&(t(q,b.work||30,!0),t(J,b.rest||60,!0))}catch($){console.warn($)}}function E(){try{const $=JSON.parse(localStorage.getItem(y)||"{}"),b={work:e(q),rest:e(J)};j()&&($[j()]=b),$.default=b,localStorage.setItem(y,JSON.stringify($))}catch($){console.error($)}}function P(){if(e(x)==="SETUP")return;const $={phase:e(x),runningState:e(S),remaining:e(N),endTimestamp:e(V),configWork:e(q),configRest:e(J),configSets:e(T),currentSet:e(F),associatedExerciseId:j(),pausedTimeRemaining:e(w),timestamp:Date.now()};localStorage.setItem("active_interval_timer",JSON.stringify($))}function B(){try{const $=localStorage.getItem("active_interval_timer");if($){const b=JSON.parse($);Date.now()-b.timestamp<36e5&&(t(x,b.phase,!0),t(S,b.runningState,!0),t(N,b.remaining,!0),t(V,b.endTimestamp,!0),t(q,b.configWork,!0),t(J,b.configRest,!0),t(T,b.configSets,!0),t(F,b.currentSet,!0),j(b.associatedExerciseId),t(w,b.pausedTimeRemaining,!0),e(x)!=="SETUP"&&e(x)!=="FINISHED"&&d(!0))}}catch{}}function A(){localStorage.removeItem("active_interval_timer")}function X(){E(),t(x,"WORK"),t(F,1),Q(e(q))}function Q($){t(S,"RUNNING"),t(N,$,!0),t(V,Date.now()+$*1e3),P(),Ga.playChime()}function ie(){t(S,"PAUSED"),t(w,e(N),!0),t(V,null),P()}function re(){e(w)&&(t(S,"RUNNING"),t(V,Date.now()+e(w)*1e3),P())}function ue(){se()}function Z(){t(x,"SETUP"),t(S,"PAUSED"),A()}function se(){Ga.playCompletionAlert(),e(x)==="WORK"?e(F)>=e(T)?(t(x,"FINISHED"),t(S,"PAUSED"),t(V,null),M()(),A()):(t(x,"REST"),Q(e(J))):e(x)==="REST"&&(Ja(F),t(x,"WORK"),Q(e(q)))}function W(){if(!(!d()||e(x)==="SETUP"||e(x)==="FINISHED"||e(S)==="PAUSED")&&e(V)){const $=Date.now(),b=e(V)-$;t(N,Math.ceil(b/1e3),!0),e(N)<=0&&(t(N,0),se())}}function ce($){const b=Math.floor($/60),C=$%60;return`${b}:${C.toString().padStart(2,"0")}`}function L(){(e(x)==="SETUP"||e(x)==="FINISHED")&&Z(),d(!1),U()&&U()()}var pe=qt(),Oe=_t(pe);{var he=$=>{var b=ol();b.__click=_e=>{_e.target===_e.currentTarget&&L()},b.__keydown=_e=>{_e.key==="Escape"&&L()};var C=l(b);let ee;var Le=l(C),He=l(Le),Pe=l(He);{var et=_e=>{var Ge=ft("Timer Setup");r(_e,Ge)},ot=_e=>{var Ge=qt(),Be=_t(Ge);{var ze=ye=>{var xe=ft("Complete");r(ye,xe)},Me=ye=>{var xe=ft();O(()=>K(xe,`Set ${e(F)??""} / ${e(T)??""}`)),r(ye,xe)};z(Be,ye=>{e(x)==="FINISHED"?ye(ze):ye(Me,!1)},!0)}r(_e,Ge)};z(Pe,_e=>{e(x)==="SETUP"?_e(et):_e(ot,!1)})}a(He);var bt=s(He,2);bt.__click=L,a(Le);var tt=s(Le,2),Ce=l(tt);{var be=_e=>{var Ge=al(),Be=l(Ge),ze=s(l(Be),2),Me=l(ze);Me.__click=()=>t(q,Math.max(5,e(q)-5),!0);var ye=s(Me,2),xe=l(ye,!0);a(ye);var Se=s(ye,2);Se.__click=()=>t(q,e(q)+5),a(ze),a(Be);var ke=s(Be,2),ge=s(l(ke),2),De=l(ge);De.__click=()=>t(J,Math.max(5,e(J)-5),!0);var qe=s(De,2),ct=l(qe,!0);a(qe);var h=s(qe,2);h.__click=()=>t(J,e(J)+5),a(ge),a(ke);var p=s(ke,2),i=s(l(p),2),c=l(i);c.__click=()=>t(T,Math.max(1,e(T)-1),!0);var I=s(c,2),te=l(I,!0);a(I);var Y=s(I,2);Y.__click=()=>t(T,e(T)+1),a(i),a(p);var oe=s(p,2);oe.__click=X,a(Ge),O((ve,Ae)=>{K(xe,ve),K(ct,Ae),K(te,e(T))},[()=>ce(e(q)),()=>ce(e(J))]),r(_e,Ge)},$e=_e=>{var Ge=qt(),Be=_t(Ge);{var ze=ye=>{var xe=sl(),Se=s(l(xe),4);Se.__click=()=>t(x,"SETUP"),a(xe),r(ye,xe)},Me=ye=>{var xe=rl(),Se=_t(xe),ke=l(Se),ge=s(l(ke));a(ke);var De=s(ke,2),qe=l(De),ct=l(qe,!0);a(qe);var h=s(qe,2),p=l(h,!0);a(h),a(De),a(Se);var i=s(Se,2),c=l(i);{var I=ve=>{var Ae=ll();Ae.__click=ie,r(ve,Ae)},te=ve=>{var Ae=il();Ae.__click=re,r(ve,Ae)};z(c,ve=>{e(S)==="RUNNING"?ve(I):ve(te,!1)})}var Y=s(c,2);Y.__click=ue;var oe=s(Y,2);oe.__click=Z,a(i),O(ve=>{Et(ge,"stroke-dashoffset",283*(1-e(N)/(e(x)==="WORK"?e(q):e(J)))),K(ct,e(x)),K(p,ve)},[()=>ce(e(N))]),r(ye,xe)};z(Be,ye=>{e(x)==="FINISHED"?ye(ze):ye(Me,!1)},!0)}r(_e,Ge)};z(Ce,_e=>{e(x)==="SETUP"?_e(be):_e($e,!1)})}a(tt),a(C),a(b),O(()=>ee=gt(C,1,"timer-card svelte-18i4gcv",null,ee,{work:e(x)==="WORK",rest:e(x)==="REST"})),ca(3,C,()=>rs,()=>({start:.96,duration:300,easing:tl})),ca(3,b,()=>Ma,()=>({duration:250})),r($,b)};z(Oe,$=>{d()&&$(he)})}r(we,pe),Gt()}ua(["click","keydown"]);var nl=m("<img/>"),vl=m('<div class="animation-frame svelte-zbmy0k"></div>'),cl=m('<div class="visual-placeholder svelte-zbmy0k"><span>No animation available</span></div>'),dl=m("<li> </li>"),ul=m('<div class="modal-overlay svelte-zbmy0k" role="button" tabindex="0" aria-label="Close modal"><div class="modal-content svelte-zbmy0k" role="dialog" aria-modal="true" tabindex="-1"><div class="header svelte-zbmy0k"><h3 class="svelte-zbmy0k"> </h3> <span class="category svelte-zbmy0k"> </span> <button class="close-btn svelte-zbmy0k" aria-label="Close">√ó</button></div> <div class="visual-container svelte-zbmy0k"><!> <div class="muscles svelte-zbmy0k"> </div></div> <div class="instructions svelte-zbmy0k"><h4>Instructions</h4> <ol class="svelte-zbmy0k"></ol></div></div></div>');function pl(we,g){Lt(g,!1);let d=St(g,"exercise",8),k=St(g,"visible",8,!1);const j=Ta();let M=Ve(0),U;function x(){d().images&&d().images.length>0&&(t(M,0),U=setInterval(()=>{t(M,(e(M)+1)%d().images.length)},800))}function S(){U&&clearInterval(U)}Ka(()=>{S()});function q(){j("close")}wa(()=>(pt(k()),pt(d())),()=>{k()&&d().images?.length?x():S()}),Pa(),Ca();var J=qt(),T=_t(J);{var F=N=>{var V=ul(),w=l(V),y=l(w),u=l(y),D=l(u,!0);a(u);var E=s(u,2),P=l(E,!0);a(E);var B=s(E,2);a(y);var A=s(y,2),X=l(A);{var Q=W=>{var ce=vl();de(ce,5,()=>(pt(d()),Te(()=>d().images)),me,(L,pe,Oe)=>{var he=nl();let $;O(()=>{Et(he,"src",`${ns??""}${e(pe)??""}`),Et(he,"alt",`${pt(d()),Te(()=>d().name)??""} frame ${Oe+1}`),$=gt(he,1,"svelte-zbmy0k",null,$,{active:Oe===e(M)})}),r(L,he)}),a(ce),r(W,ce)},ie=W=>{var ce=cl();r(W,ce)};z(X,W=>{pt(d()),Te(()=>d().images&&d().images.length>0)?W(Q):W(ie,!1)})}var re=s(X,2),ue=l(re);a(re),a(A);var Z=s(A,2),se=s(l(Z),2);de(se,5,()=>(pt(d()),Te(()=>d().instructions)),me,(W,ce)=>{var L=dl(),pe=l(L,!0);a(L),O(()=>K(pe,e(ce))),r(W,L)}),a(se),a(Z),a(w),a(V),O(W=>{K(D,(pt(d()),Te(()=>d().name))),K(P,(pt(d()),Te(()=>d().category))),K(ue,`Targets: ${W??""}`)},[()=>(pt(d()),Te(()=>d().targetMuscles.join(", ")))]),ae("click",B,q),ca(3,w,()=>Da,()=>({y:50,duration:300})),ae("click",w,Ia(function(W){ea.call(this,g,W)})),ae("keydown",w,Ia(function(W){ea.call(this,g,W)})),ae("click",V,q),ae("keydown",V,W=>W.key==="Escape"&&q()),r(N,V)};z(T,N=>{k()&&N(F)})}r(we,J),Gt()}var fl=m("<span>Saved! ‚úì</span>"),ml=m("<button><!></button>"),_l=m("<option> </option>"),gl=m("<option> </option>"),bl=m('<div class="filter-row svelte-1w0zsmt"><select class="category-select svelte-1w0zsmt"><option>Select Category...</option><!></select> <select class="subcategory-select svelte-1w0zsmt"><option>Select Subcategory...</option><!></select></div>'),hl=m('<span class="details svelte-1w0zsmt"> </span>'),yl=m('<button class="exercise-item-simple svelte-1w0zsmt"><span class="name svelte-1w0zsmt"> </span> <!></button>'),Sl=m('<div class="no-results svelte-1w0zsmt"> </div>'),kl=m('<div class="modal-overlay svelte-1w0zsmt" role="button" tabindex="0" aria-label="Close modal"><div class="picker-modal svelte-1w0zsmt" role="dialog" aria-modal="true" tabindex="-1"><div class="picker-header svelte-1w0zsmt"><h3>Add Exercise</h3> <div class="search-row svelte-1w0zsmt"><input type="text" placeholder="Search exercises..." class="svelte-1w0zsmt"/></div> <!></div> <div class="picker-content svelte-1w0zsmt"><div class="exercise-list-simple svelte-1w0zsmt"><!> <!></div></div></div></div>'),wl=m('<div class="keypad-overlay svelte-1w0zsmt"><div class="keypad-header svelte-1w0zsmt"><span> </span> <button class="svelte-1w0zsmt">Done</button></div> <!></div>'),xl=m('<div class="gym-session-form svelte-1w0zsmt"><div class="session-meta svelte-1w0zsmt"><input type="text" class="session-name svelte-1w0zsmt" placeholder="Workout Name (e.g. Pull Day)"/> <div class="meta-row svelte-1w0zsmt"><label class="svelte-1w0zsmt">Date <div class="date-time-row svelte-1w0zsmt"><input type="date" class="svelte-1w0zsmt"/> <input type="time" class="svelte-1w0zsmt"/></div></label> <label class="svelte-1w0zsmt">Bodyweight (kg) <input type="number" placeholder="Optional" class="svelte-1w0zsmt"/></label> <label class="svelte-1w0zsmt">Block <select class="svelte-1w0zsmt"><option>Strength</option><option>Power</option><option>Power Endurance</option><option>Muscular Endurance</option></select></label></div></div> <div class="exercises-list"></div> <button class="add-exercise-btn svelte-1w0zsmt">+ Add Exercise</button> <!> <!> <!> <!> <!> <!></div>');function Tl(we,g){Lt(g,!1);const d=Ve(),k=Ve(),j=Ta(),M="gym_session_draft";let U=Ve(""),x=Ve(),S=Ve([]),q=Ve(new Date().toISOString().split("T")[0]),J=Ve(new Date().toTimeString().split(" ")[0].slice(0,5)),T=Ve("Strength"),F=Ve(null),N=Ve([]);Kt(async()=>{const i=await Za();i.ok&&i.data&&t(N,i.data.map(c=>({...c,activityType:"gym_session",syncStatus:"synced"})))});function V(i){const c={Green:null,Yellow:null,Orange:null,Red:null},I=[...e(N)].sort((te,Y)=>new Date(Y.date).getTime()-new Date(te.date).getTime());for(const te of I){if(c.Green&&c.Yellow&&c.Orange&&c.Red)break;const Y=te.exercises.find(oe=>oe.name===i);if(Y&&Y.difficulty&&!c[Y.difficulty]){let oe=null;for(const ve of Y.sets)(!oe||ve.weight>oe.weight||ve.weight===oe.weight&&ve.reps>oe.reps)&&(oe=ve);oe&&(c[Y.difficulty]={weight:oe.weight,reps:oe.reps})}}return c}let w=Ve(!1),y=Ve(""),u=Ve(""),D=Ve(""),E=Ve(null),P=Ve(!1),B=Ve(null),A=Ve(null),X=Ve(!1),Q=Ve(null),ie=Ve(3),re=Ve(!1);Kt(()=>{const i=localStorage.getItem(M);if(i)try{const c=JSON.parse(i);c.sessionName&&t(U,c.sessionName),c.bodyweight&&t(x,c.bodyweight),c.startTime&&t(q,c.startTime),c.time&&t(J,c.time),c.trainingBlock&&t(T,c.trainingBlock),c.exercises&&t(S,c.exercises)}catch(c){console.error("Failed to restore draft",c)}t(re,!0)});const ue=Array.from(new Set(ka.map(i=>i.category))).sort();function Z(){t(D,"")}function se(i){const c={id:crypto.randomUUID(),name:i.name,sets:[{weight:0,reps:0,isWarmup:!1,isFailure:!1,isDropSet:!1,completed:!1}]};t(S,[...e(S),c]),t(w,!1),t(y,""),t(u,""),t(D,"")}function W(i,c,I){t(E,{exerciseIndex:c,setIndex:I,field:i.detail.field})}function ce(i){if(!e(E))return;const{exerciseIndex:c,setIndex:I,field:te}=e(E);Ha(S,e(S)[c].sets[I][te]=i.detail),t(S,[...e(S)])}function L(i){const c=i.detail;t(Q,c.id),t(ie,c.sets.length),t(P,!0)}function pe(){}async function Oe(){if(e(S).length===0)return;const i=await es({date:e(q),time:e(J),name:e(U)||"Gym Workout",bodyweight:e(x),trainingBlock:e(T),exercises:e(S)});i.ok?(t(X,!0),localStorage.removeItem(M),setTimeout(()=>{t(X,!1),j("save")},1500)):console.error("Failed to save gym session",i.error)}function he(){t(E,null)}wa(()=>(e(N),e(T),e(q)),()=>{const i=e(N).filter(c=>(c.trainingBlock||"Strength")===e(T)&&c.date<e(q));i.sort((c,I)=>new Date(I.date).getTime()-new Date(c.date).getTime()),t(F,i.length>0?i[0]:null)}),wa(()=>(e(re),e(U),e(x),e(q),e(J),e(T),e(S)),()=>{if(e(re)&&typeof localStorage<"u"){const i={sessionName:e(U),bodyweight:e(x),startTime:e(q),time:e(J),trainingBlock:e(T),exercises:e(S)};localStorage.setItem(M,JSON.stringify(i))}}),wa(()=>(e(y),e(u),e(D)),()=>{t(d,ka.filter(i=>{if(e(y))return i.name.toLowerCase().includes(e(y).toLowerCase())||i.targetMuscles.some(te=>te.toLowerCase().includes(e(y).toLowerCase()));const c=e(u)?i.category===e(u):!0,I=e(D)?i.subcategory===e(D):!0;return c&&I}))}),wa(()=>(e(u),ka),()=>{t(k,e(u)?Array.from(new Set(ka.filter(i=>i.category===e(u)).map(i=>i.subcategory))).sort():[])}),Pa(),Ca();var $=xl(),b=l($),C=l(b);R(C);var ee=s(C,2),Le=l(ee),He=s(l(Le)),Pe=l(He);R(Pe);var et=s(Pe,2);R(et),a(He),a(Le);var ot=s(Le,2),bt=s(l(ot));R(bt),a(ot);var tt=s(ot,2),Ce=s(l(tt));O(()=>{e(T),Aa(()=>{})});var be=l(Ce);be.value=be.__value="Strength";var $e=s(be);$e.value=$e.__value="Power";var _e=s($e);_e.value=_e.__value="Power Endurance";var Ge=s(_e);Ge.value=Ge.__value="Muscular Endurance",a(Ce),a(tt),a(ee),a(b);var Be=s(b,2);de(Be,5,()=>e(S),me,(i,c,I)=>{{let te=ja(()=>(e(c),Te(()=>V(e(c).name))));Xs(i,{get exercise(){return e(c)},get benchmarks(){return e(te)},$$events:{focus:Y=>W(Y,I,e(S)[I].sets.indexOf(Y.detail.set)),complete:pe,timer:L,delete:()=>{t(A,I)},info:()=>{const Y=ka.find(oe=>oe.name===e(c).name);Y&&t(B,Y)}}})}}),a(Be);var ze=s(Be,2),Me=s(ze,2);{var ye=i=>{var c=ml();let I;var te=l(c);{var Y=ve=>{var Ae=fl();r(ve,Ae)},oe=ve=>{var Ae=ft("Finish Workout");r(ve,Ae)};z(te,ve=>{e(X)?ve(Y):ve(oe,!1)})}a(c),O(()=>{I=gt(c,1,"save-btn svelte-1w0zsmt",null,I,{success:e(X)}),c.disabled=e(X)}),ae("click",c,Oe),r(i,c)};z(Me,i=>{e(S),Te(()=>e(S).length>0)&&i(ye)})}var xe=s(Me,2);{var Se=i=>{var c=kl(),I=l(c),te=l(I),Y=s(l(te),2),oe=l(Y);R(oe),a(Y);var ve=s(Y,2);{var Ae=Ne=>{var Ee=bl(),Ue=l(Ee);O(()=>{e(u),Aa(()=>{})});var dt=l(Ue);dt.value=dt.__value="";var Nt=s(dt);de(Nt,1,()=>ue,me,(st,lt)=>{var nt=_l(),ht=l(nt,!0);a(nt);var yt={};O(()=>{K(ht,e(lt)),yt!==(yt=e(lt))&&(nt.value=(nt.__value=e(lt))??"")}),r(st,nt)}),a(Ue);var Je=s(Ue,2);O(()=>{e(D),Aa(()=>{e(u),e(k)})});var kt=l(Je);kt.value=kt.__value="";var ut=s(kt);de(ut,1,()=>e(k),me,(st,lt)=>{var nt=gl(),ht=l(nt,!0);a(nt);var yt={};O(()=>{K(ht,e(lt)),yt!==(yt=e(lt))&&(nt.value=(nt.__value=e(lt))??"")}),r(st,nt)}),a(Je),a(Ee),O(()=>Je.disabled=!e(u)),Ze(Ue,()=>e(u),st=>t(u,st)),ae("change",Ue,Z),Ze(Je,()=>e(D),st=>t(D,st)),r(Ne,Ee)};z(ve,Ne=>{e(y)||Ne(Ae)})}a(te);var Dt=s(te,2),At=l(Dt),It=l(At);de(It,1,()=>e(d),me,(Ne,Ee)=>{var Ue=yl(),dt=l(Ue),Nt=l(dt,!0);a(dt);var Je=s(dt,2);{var kt=ut=>{var st=hl(),lt=l(st);a(st),O(()=>K(lt,`${e(Ee),Te(()=>e(Ee).category)??""} - ${e(Ee),Te(()=>e(Ee).subcategory)??""}`)),r(ut,st)};z(Je,ut=>{e(y)&&ut(kt)})}a(Ue),O(()=>K(Nt,(e(Ee),Te(()=>e(Ee).name)))),ae("click",Ue,()=>se(e(Ee))),r(Ne,Ue)});var mt=s(It,2);{var at=Ne=>{var Ee=Sl(),Ue=l(Ee,!0);a(Ee),O(()=>K(Ue,e(y)?"No exercises found":"Select a category and subcategory to view exercises.")),r(Ne,Ee)};z(mt,Ne=>{e(d),Te(()=>e(d).length===0)&&Ne(at)})}a(At),a(Dt),a(I),a(c),G(oe,()=>e(y),Ne=>t(y,Ne)),ae("click",I,Ia(function(Ne){ea.call(this,g,Ne)})),ae("keydown",I,Ia(function(Ne){ea.call(this,g,Ne)})),ca(3,I,()=>Da,()=>({y:100,duration:300})),ae("click",c,()=>t(w,!1)),ae("keydown",c,Ne=>Ne.key==="Escape"&&t(w,!1)),ca(3,c,()=>Ma),r(i,c)};z(xe,i=>{e(w)&&i(Se)})}var ke=s(xe,2);{var ge=i=>{pl(i,{get exercise(){return e(B)},visible:!0,$$events:{close:()=>t(B,null)}})};z(ke,i=>{e(B)&&i(ge)})}var De=s(ke,2);{var qe=i=>{var c=wl(),I=l(c),te=l(I),Y=l(te);a(te);var oe=s(te,2);a(I);var ve=s(I,2);{let Ae=ja(()=>(e(E),Te(()=>e(E).field==="weight"?"Weight (kg)":"Reps")));el(ve,{get value(){return e(S),e(E),Te(()=>e(S)[e(E).exerciseIndex].sets[e(E).setIndex][e(E).field])},get label(){return e(Ae)},$$events:{change:ce}})}a(c),O(()=>K(Y,`Editing ${e(S),e(E),Te(()=>e(S)[e(E).exerciseIndex].name)??""} - Set ${e(E),Te(()=>e(E).setIndex+1)??""}`)),ae("click",oe,he),ca(3,c,()=>Da,()=>({y:200,duration:300})),r(i,c)};z(De,i=>{e(E)&&i(qe)})}var ct=s(De,2);Ua(ct,{get defaultSets(){return e(ie)},get associatedExerciseId(){return e(Q)},get visible(){return e(P)},set visible(i){t(P,i)},$$legacy:!0});var h=s(ct,2);{var p=i=>{os(i,{isOpen:!0,title:"Delete Exercise",get message(){return`Are you sure you want to delete ${e(S),e(A),Te(()=>e(S)[e(A)].name)??""}?`},requireInput:!1,onConfirm:()=>{e(A)!==null&&(t(S,e(S).filter((c,I)=>I!==e(A))),t(A,null))},onCancel:()=>t(A,null)})};z(h,i=>{e(A)!==null&&i(p)})}a($),G(C,()=>e(U),i=>t(U,i)),G(Pe,()=>e(q),i=>t(q,i)),G(et,()=>e(J),i=>t(J,i)),G(bt,()=>e(x),i=>t(x,i)),Ze(Ce,()=>e(T),i=>t(T,i)),ae("click",ze,()=>t(w,!0)),r(we,$),Gt()}var Cl=m("<option> </option>"),ql=m("<option> </option>"),Nl=m('<button class="remove-set-btn svelte-1m63nqt">‚úï</button>'),Ol=m('<div class="set-row svelte-1m63nqt"><div class="input-wrap svelte-1m63nqt"><label class="svelte-1m63nqt">Weight</label> <input type="number" placeholder="0" class="svelte-1m63nqt"/></div> <div class="input-wrap svelte-1m63nqt"><label class="svelte-1m63nqt">Reps/Secs</label> <input type="number" placeholder="1" class="svelte-1m63nqt"/></div> <!></div>'),El=m('<div class="exercise-card svelte-1m63nqt"><div class="card-header svelte-1m63nqt"><div class="header-inputs svelte-1m63nqt"><select class="svelte-1m63nqt"></select> <select class="svelte-1m63nqt"></select></div> <button class="remove-card-btn svelte-1m63nqt" title="Remove Exercise">‚úï</button></div> <div class="sets-list svelte-1m63nqt"><!> <button class="add-set-btn svelte-1m63nqt">+ Add Set</button> <button class="rest-btn svelte-1m63nqt" title="Interval Timer">‚è± Timer</button></div> <div class="card-footer svelte-1m63nqt"><div class="meta-input svelte-1m63nqt"><label class="svelte-1m63nqt">Total Sets</label> <input type="number" readonly="" disabled class="svelte-1m63nqt"/></div> <div class="notes-input svelte-1m63nqt"><label class="svelte-1m63nqt">Notes</label> <input type="text" placeholder="Notes..." class="svelte-1m63nqt"/></div></div></div>'),Al=m("<div> </div>"),Il=m('<div class="form-content svelte-1m63nqt"><div class="header-row svelte-1m63nqt"><h3 class="svelte-1m63nqt">ü§è Fingerboarding</h3> <button class="add-row-btn svelte-1m63nqt">+ Add Exercise</button></div> <div class="form-group date-group svelte-1m63nqt"><label for="date">Date</label> <div class="date-time-row svelte-1m63nqt"><input type="date" id="date" class="svelte-1m63nqt"/> <input type="time" id="time" class="svelte-1m63nqt"/></div></div> <div class="cards-container svelte-1m63nqt"></div> <div class="submit-section"><!> <button type="button" class="submit-btn svelte-1m63nqt"><!></button></div> <!></div>');function Fl(we,g){Lt(g,!0);const d=["Max hangs","Recruitment pulls","Max pick-ups"],k=["Full-crimp","Half-crimp","Three finger drag","Pinch","Open hand","Sloper"];let j=_(rt(new Date().toISOString().split("T")[0])),M=_(rt(new Date().toTimeString().split(" ")[0].slice(0,5))),U=_(rt([])),x=_(!1),S=_(null),q=_(3);function J(b){t(S,b.id,!0),t(q,b.sets,!0),t(x,!0)}function T(){t(U,[...e(U),{id:crypto.randomUUID(),name:d[0],gripType:k[1],sets:1,details:[{weight:0,reps:5}],notes:""}],!0)}const F="fingerboard_session_draft";let N=_(!1);Kt(()=>{const b=localStorage.getItem(F);if(b)try{const C=JSON.parse(b);C.time&&t(M,C.time,!0),C.exercises&&Array.isArray(C.exercises)&&t(U,C.exercises,!0)}catch(C){console.error("Failed to restore draft",C)}e(U).length===0&&T(),t(N,!0)}),da(()=>{if(!e(N))return;const b={date:e(j),time:e(M),exercises:e(U)};localStorage.setItem(F,JSON.stringify(b))});function V(b){t(U,e(U).filter((C,ee)=>ee!==b),!0)}function w(b){const C=e(U)[b],ee=C.details[C.details.length-1];C.details=[...C.details,{...ee}],C.sets=C.details.length}function y(b,C){const ee=e(U)[b];ee.details.length>1&&(ee.details=ee.details.filter((Le,He)=>He!==C),ee.sets=ee.details.length)}let u=_("idle"),D=_("");async function E(){t(u,"saving");try{const b={date:e(j),time:e(M),location:"N/A",exercises:JSON.parse(JSON.stringify(e(U)))},C=await ts(b);C.ok?(t(u,"success"),t(D,"Session saved!"),localStorage.removeItem(F)):(t(u,"error"),t(D,"Failed to save: "+(C.error||"Unknown error"))),window.dispatchEvent(new CustomEvent("session-saved")),setTimeout(()=>{P()},2e3)}catch(b){t(u,"error"),t(D,"Failed to save session"),console.error("Save error:",b)}}function P(){t(j,new Date().toISOString().split("T")[0],!0),t(M,new Date().toTimeString().split(" ")[0].slice(0,5),!0),t(U,[],!0),T(),t(u,"idle"),t(D,"")}var B=Il(),A=l(B),X=s(l(A),2);X.__click=T,a(A);var Q=s(A,2),ie=s(l(Q),2),re=l(ie);R(re);var ue=s(re,2);R(ue),a(ie),a(Q);var Z=s(Q,2);de(Z,21,()=>e(U),me,(b,C,ee)=>{var Le=El(),He=l(Le),Pe=l(He),et=l(Pe);de(et,21,()=>d,me,(Se,ke)=>{var ge=Cl(),De=l(ge,!0);a(ge);var qe={};O(()=>{K(De,e(ke)),qe!==(qe=e(ke))&&(ge.value=(ge.__value=e(ke))??"")}),r(Se,ge)}),a(et);var ot=s(et,2);de(ot,21,()=>k,me,(Se,ke)=>{var ge=ql(),De=l(ge,!0);a(ge);var qe={};O(()=>{K(De,e(ke)),qe!==(qe=e(ke))&&(ge.value=(ge.__value=e(ke))??"")}),r(Se,ge)}),a(ot),a(Pe);var bt=s(Pe,2);bt.__click=()=>V(ee),a(He);var tt=s(He,2),Ce=l(tt);de(Ce,17,()=>e(C).details,me,(Se,ke,ge)=>{var De=Ol(),qe=l(De),ct=l(qe);Et(ct,"for",`weight-${ee}-${ge}`);var h=s(ct,2);R(h),Et(h,"id",`weight-${ee}-${ge}`),a(qe);var p=s(qe,2),i=l(p);Et(i,"for",`reps-${ee}-${ge}`);var c=s(i,2);R(c),Et(c,"id",`reps-${ee}-${ge}`),a(p);var I=s(p,2);{var te=Y=>{var oe=Nl();oe.__click=()=>y(ee,ge),r(Y,oe)};z(I,Y=>{e(C).details.length>1&&Y(te)})}a(De),G(h,()=>e(ke).weight,Y=>e(ke).weight=Y),G(c,()=>e(ke).reps,Y=>e(ke).reps=Y),r(Se,De)});var be=s(Ce,2);be.__click=()=>w(ee);var $e=s(be,2);$e.__click=()=>J(e(C)),a(tt);var _e=s(tt,2),Ge=l(_e),Be=l(Ge);Et(Be,"for",`total-sets-${ee}`);var ze=s(Be,2);R(ze),Et(ze,"id",`total-sets-${ee}`),a(Ge);var Me=s(Ge,2),ye=l(Me);Et(ye,"for",`notes-${ee}`);var xe=s(ye,2);R(xe),Et(xe,"id",`notes-${ee}`),a(Me),a(_e),a(Le),O(()=>Ya(ze,e(C).sets)),Ze(et,()=>e(C).name,Se=>e(C).name=Se),Ze(ot,()=>e(C).gripType,Se=>e(C).gripType=Se),G(xe,()=>e(C).notes,Se=>e(C).notes=Se),r(b,Le)}),a(Z);var se=s(Z,2),W=l(se);{var ce=b=>{var C=Al();let ee;var Le=l(C,!0);a(C),O(()=>{ee=gt(C,1,"save-message svelte-1m63nqt",null,ee,{success:e(u)==="success",error:e(u)==="error"}),K(Le,e(D))}),r(b,C)};z(W,b=>{e(D)&&b(ce)})}var L=s(W,2);L.__click=E;var pe=l(L);{var Oe=b=>{var C=ft("Saving...");r(b,C)},he=b=>{var C=qt(),ee=_t(C);{var Le=Pe=>{var et=ft("‚úì Saved!");r(Pe,et)},He=Pe=>{var et=ft("Save Session");r(Pe,et)};z(ee,Pe=>{e(u)==="success"?Pe(Le):Pe(He,!1)},!0)}r(b,C)};z(pe,b=>{e(u)==="saving"?b(Oe):b(he,!1)})}a(L),a(se);var $=s(se,2);Ua($,{get defaultSets(){return e(q)},get associatedExerciseId(){return e(S)},get visible(){return e(x)},set visible(b){t(x,b,!0)}}),a(B),O(()=>L.disabled=e(u)==="saving"),G(re,()=>e(j),b=>t(j,b)),G(ue,()=>e(M),b=>t(M,b)),r(we,B),Gt()}ua(["click"]);var Ll=m("<option> </option>"),Gl=m('<input type="text" placeholder="Enter venue name" class="mt-2 svelte-1fje4dh"/>'),Dl=m("<option> </option>"),Rl=m("<option> </option>"),zl=m('<input type="text" placeholder="Round name" class="mt-2 svelte-1fje4dh"/>'),jl=m('<div class="result-mode-content svelte-1fje4dh"><div class="form-group svelte-1fje4dh"><label for="position" class="svelte-1fje4dh">Final Position</label> <input type="number" id="position" placeholder="#" class="large-input svelte-1fje4dh"/></div></div>'),Vl=m("<option> </option>"),Pl=m('<input type="number" min="1" class="svelte-1fje4dh"/>'),Bl=m('<span class="flash-dash">-</span>'),Ml=m('<tr><td class="col-name svelte-1fje4dh"><input type="text" class="svelte-1fje4dh"/></td><td class="col-status svelte-1fje4dh"><select class="svelte-1fje4dh"></select></td><td class="col-attempt svelte-1fje4dh"><!></td><td class="col-notes svelte-1fje4dh"><input type="text" placeholder="..." class="svelte-1fje4dh"/></td><td class="col-action svelte-1fje4dh"><button class="svelte-1fje4dh">‚úï</button></td></tr>'),Ul=m('<div class="load-metrics-compact svelte-1fje4dh"><div class="metric svelte-1fje4dh"><label for="finger">Finger Load</label> <input type="number" id="finger" min="0" max="5" step="0.5" class="svelte-1fje4dh"/></div> <div class="metric svelte-1fje4dh"><label for="shoulder">Shoulder Load</label> <input type="number" id="shoulder" min="0" max="5" step="0.5" class="svelte-1fje4dh"/></div> <div class="metric svelte-1fje4dh"><label for="forearm">Forearm Load</label> <input type="number" id="forearm" min="0" max="5" step="0.5" class="svelte-1fje4dh"/></div></div> <div class="climbs-table-container svelte-1fje4dh"><div class="section-header svelte-1fje4dh"><h4 class="svelte-1fje4dh">Boulders / Routes</h4></div> <table class="climbs-table svelte-1fje4dh"><thead><tr><th class="svelte-1fje4dh">#</th><th class="svelte-1fje4dh">Result</th><th class="svelte-1fje4dh">Att.</th><th class="svelte-1fje4dh">Notes</th><th class="svelte-1fje4dh"></th></tr></thead><tbody></tbody></table> <button class="add-row-btn svelte-1fje4dh">+ Add Row</button></div>',1),Wl=m("<div> </div>"),$l=m('<div class="form-content svelte-1fje4dh"><h3 class="svelte-1fje4dh">üèÜ Competition</h3> <div class="form-grid svelte-1fje4dh"><div class="form-group svelte-1fje4dh"><label for="date" class="svelte-1fje4dh">Date</label> <div class="date-time-row svelte-1fje4dh"><input type="date" id="date" class="svelte-1fje4dh"/> <input type="time" id="time" class="svelte-1fje4dh"/></div></div> <div class="form-group svelte-1fje4dh"><label for="venue" class="svelte-1fje4dh">Venue</label> <select id="venue" class="svelte-1fje4dh"><option disabled>Select venue...</option><!></select> <!></div></div> <div class="form-group mb-4 svelte-1fje4dh"><label for="type" class="svelte-1fje4dh">Type</label> <select id="type" class="svelte-1fje4dh"></select></div> <div class="form-group mb-4 svelte-1fje4dh"><label for="session-notes" class="svelte-1fje4dh">Session Notes</label> <textarea id="session-notes" placeholder="How did the comp go? Strategy, mindset, etc." rows="3" class="svelte-1fje4dh"></textarea></div> <div class="round-section svelte-1fje4dh"><div class="form-group svelte-1fje4dh"><label for="round" class="svelte-1fje4dh">Round</label> <select id="round" class="svelte-1fje4dh"></select> <!></div> <!></div> <div class="submit-section"><!> <button type="button" class="submit-btn svelte-1fje4dh"><!></button></div></div>');function Jl(we,g){Lt(g,!0);const d=["Flashpoint Bristol","Rockstar Techno","Rockstar Unit 3","Rockstar Unit 5","Bloc","TCA","Other"],k=["Bouldering","Lead","Speed"],j=["Qualifiers","Semi-Finals","Finals","Result","Other"],M=["Flash","Top","Zone","Attempt"];let U=_(rt(new Date().toISOString().split("T")[0])),x=_(rt(new Date().toTimeString().split(" ")[0].slice(0,5))),S=_(""),q=_(""),J=_("Bouldering"),T=_(4),F=_(4),N=_(4),V=_("Qualifiers"),w=_(""),y=_(null),u=_(rt([{name:"#1",status:"Flash",attemptCount:1,notes:""}])),D=_("");const E="competition_session_draft";let P=_(!1);Kt(()=>{const h=localStorage.getItem(E);if(h)try{const p=JSON.parse(h);p.venue&&t(S,p.venue,!0),p.time&&t(x,p.time,!0),p.customVenue&&t(q,p.customVenue,!0),p.type&&t(J,p.type,!0),p.fingerLoad&&t(T,p.fingerLoad,!0),p.shoulderLoad&&t(F,p.shoulderLoad,!0),p.forearmLoad&&t(N,p.forearmLoad,!0),p.roundName&&t(V,p.roundName,!0),p.customRoundName&&t(w,p.customRoundName,!0),p.finalPosition&&t(y,p.finalPosition,!0),p.climbs&&t(u,p.climbs,!0),p.notes&&t(D,p.notes,!0)}catch(p){console.error("Failed to restore draft",p)}t(P,!0)}),da(()=>{if(!e(P))return;const h={date:e(U),time:e(x),venue:e(S),customVenue:e(q),type:e(J),fingerLoad:e(T),shoulderLoad:e(F),forearmLoad:e(N),roundName:e(V),customRoundName:e(w),finalPosition:e(y),climbs:e(u),notes:e(D)};localStorage.setItem(E,JSON.stringify(h))});let B=Xt(()=>e(V)==="Result"),A=Xt(()=>e(S)==="Other"),X=Xt(()=>e(V)==="Other"),Q=Xt(()=>e(V)==="Other"?e(w):e(V));function ie(){const h=e(u).length+1;t(u,[...e(u),{name:`#${h}`,status:"Flash",attemptCount:1,notes:""}],!0)}function re(h){e(u).length>1?t(u,e(u).filter((p,i)=>i!==h),!0):e(u)[0]={name:"#1",status:"Flash",attemptCount:1,notes:""}}function ue(h,p){e(u)[h].status=p,p==="Flash"&&(e(u)[h].attemptCount=1)}let Z=_("idle"),se=_("");async function W(){if(!e(S)||e(S)==="Other"&&!e(q)){t(Z,"error"),t(se,"Please specify a venue");return}t(Z,"saving");try{const h={name:e(Q),position:e(B)?e(y):void 0,climbs:e(B)?void 0:JSON.parse(JSON.stringify(e(u)))},p={date:e(U),time:e(x),venue:e(S)==="Other"?e(q):e(S),customVenue:e(S)==="Other"?e(q):void 0,type:e(J),fingerLoad:e(B)?void 0:e(T),shoulderLoad:e(B)?void 0:e(F),forearmLoad:e(B)?void 0:e(N),rounds:[h],notes:e(D)},i=await as(p);i.ok?(t(Z,"success"),t(se,"Competition saved!"),localStorage.removeItem(E)):(t(Z,"error"),t(se,"Failed to save: "+(i.error||"Unknown error"))),window.dispatchEvent(new CustomEvent("session-saved")),setTimeout(()=>{ce()},2e3)}catch(h){t(Z,"error"),t(se,"Failed to save session"),console.error("Save error:",h)}}function ce(){t(U,new Date().toISOString().split("T")[0],!0),t(x,new Date().toTimeString().split(" ")[0].slice(0,5),!0),t(S,""),t(q,""),t(y,null),t(u,[{name:"#1",status:"Flash",attemptCount:1,notes:""}],!0),t(D,""),t(Z,"idle"),t(se,"")}var L=$l(),pe=s(l(L),2),Oe=l(pe),he=s(l(Oe),2),$=l(he);R($);var b=s($,2);R(b),a(he),a(Oe);var C=s(Oe,2),ee=s(l(C),2),Le=l(ee);Le.value=Le.__value="";var He=s(Le);de(He,17,()=>d,me,(h,p)=>{var i=Ll(),c=l(i,!0);a(i);var I={};O(()=>{K(c,e(p)),I!==(I=e(p))&&(i.value=(i.__value=e(p))??"")}),r(h,i)}),a(ee);var Pe=s(ee,2);{var et=h=>{var p=Gl();R(p),G(p,()=>e(q),i=>t(q,i)),r(h,p)};z(Pe,h=>{e(A)&&h(et)})}a(C),a(pe);var ot=s(pe,2),bt=s(l(ot),2);de(bt,21,()=>k,me,(h,p)=>{var i=Dl(),c=l(i,!0);a(i);var I={};O(()=>{K(c,e(p)),I!==(I=e(p))&&(i.value=(i.__value=e(p))??"")}),r(h,i)}),a(bt),a(ot);var tt=s(ot,2),Ce=s(l(tt),2);xa(Ce),a(tt);var be=s(tt,2),$e=l(be),_e=s(l($e),2);de(_e,21,()=>j,me,(h,p)=>{var i=Rl(),c=l(i,!0);a(i);var I={};O(()=>{K(c,e(p)),I!==(I=e(p))&&(i.value=(i.__value=e(p))??"")}),r(h,i)}),a(_e);var Ge=s(_e,2);{var Be=h=>{var p=zl();R(p),G(p,()=>e(w),i=>t(w,i)),r(h,p)};z(Ge,h=>{e(X)&&h(Be)})}a($e);var ze=s($e,2);{var Me=h=>{var p=jl(),i=l(p),c=s(l(i),2);R(c),a(i),a(p),G(c,()=>e(y),I=>t(y,I)),r(h,p)},ye=h=>{var p=Ul(),i=_t(p),c=l(i),I=s(l(c),2);R(I),a(c);var te=s(c,2),Y=s(l(te),2);R(Y),a(te);var oe=s(te,2),ve=s(l(oe),2);R(ve),a(oe),a(i);var Ae=s(i,2),Dt=s(l(Ae),2),At=s(l(Dt));de(At,21,()=>e(u),me,(mt,at,Ne)=>{var Ee=Ml(),Ue=l(Ee),dt=l(Ue);R(dt),a(Ue);var Nt=s(Ue),Je=l(Nt);Je.__change=We=>ue(Ne,We.target.value),de(Je,21,()=>M,me,(We,wt)=>{var xt=Vl(),pa=l(xt,!0);a(xt);var jt={};O(()=>{K(pa,e(wt)),jt!==(jt=e(wt))&&(xt.value=(xt.__value=e(wt))??"")}),r(We,xt)}),a(Je);var kt;Ra(Je),a(Nt);var ut=s(Nt),st=l(ut);{var lt=We=>{var wt=Pl();R(wt),G(wt,()=>e(at).attemptCount,xt=>e(at).attemptCount=xt),r(We,wt)},nt=We=>{var wt=Bl();r(We,wt)};z(st,We=>{e(at).status!=="Flash"?We(lt):We(nt,!1)})}a(ut);var ht=s(ut),yt=l(ht);R(yt),a(ht);var Bt=s(ht),ta=l(Bt);ta.__click=()=>re(Ne),a(Bt),a(Ee),O(()=>{kt!==(kt=e(at).status)&&(Je.value=(Je.__value=e(at).status)??"",za(Je,e(at).status))}),G(dt,()=>e(at).name,We=>e(at).name=We),G(yt,()=>e(at).notes,We=>e(at).notes=We),r(mt,Ee)}),a(At),a(Dt);var It=s(Dt,2);It.__click=ie,a(Ae),G(I,()=>e(T),mt=>t(T,mt)),G(Y,()=>e(F),mt=>t(F,mt)),G(ve,()=>e(N),mt=>t(N,mt)),r(h,p)};z(ze,h=>{e(B)?h(Me):h(ye,!1)})}a(be);var xe=s(be,2),Se=l(xe);{var ke=h=>{var p=Wl();let i;var c=l(p,!0);a(p),O(()=>{i=gt(p,1,"save-message svelte-1fje4dh",null,i,{success:e(Z)==="success",error:e(Z)==="error"}),K(c,e(se))}),r(h,p)};z(Se,h=>{e(se)&&h(ke)})}var ge=s(Se,2);ge.__click=W;var De=l(ge);{var qe=h=>{var p=ft("Saving...");r(h,p)},ct=h=>{var p=qt(),i=_t(p);{var c=te=>{var Y=ft("‚úì Saved!");r(te,Y)},I=te=>{var Y=ft("Save Session");r(te,Y)};z(i,te=>{e(Z)==="success"?te(c):te(I,!1)},!0)}r(h,p)};z(De,h=>{e(Z)==="saving"?h(qe):h(ct,!1)})}a(ge),a(xe),a(L),O(()=>ge.disabled=e(Z)==="saving"),G($,()=>e(U),h=>t(U,h)),G(b,()=>e(x),h=>t(x,h)),Ze(ee,()=>e(S),h=>t(S,h)),Ze(bt,()=>e(J),h=>t(J,h)),G(Ce,()=>e(D),h=>t(D,h)),Ze(_e,()=>e(V),h=>t(V,h)),r(we,L),Gt()}ua(["change","click"]);var Kl=m('<div class="offline-banner svelte-b2zgdd">‚ö†Ô∏è You are currently offline. Changes may not save if specific offline mode is not configured.</div>'),Hl=m("<option> </option>"),Yl=m('<div class="form-container svelte-b2zgdd"><!></div>'),Ql=m('<div class="page svelte-b2zgdd"><div class="page-header svelte-b2zgdd"><h1 class="svelte-b2zgdd">üìù Log Data</h1> <p class="subtitle svelte-b2zgdd">Record your training sessions</p></div> <!> <div class="content-card svelte-b2zgdd"><div class="form-group svelte-b2zgdd"><label for="activity-type" class="svelte-b2zgdd">Activity Type</label> <select id="activity-type" class="svelte-b2zgdd"><option disabled>Select an activity...</option><!></select></div> <!></div></div>');function vi(we,g){Lt(g,!0);const d=[{value:"indoor_climb",label:"Indoor Climb",icon:"üßó"},{value:"outdoor_climb",label:"Outdoor Climb",icon:"‚õ∞Ô∏è"},{value:"gym_session",label:"Gym Session",icon:"üèãÔ∏è"},{value:"fingerboarding",label:"Fingerboarding",icon:"ü§è"},{value:"competition",label:"Competition",icon:"üèÜ"}];let k=_(""),j=_(!0);Kt(()=>{t(j,ss(),!0);const w=()=>t(j,!0),y=()=>t(j,!1);return window.addEventListener("online",w),window.addEventListener("offline",y),()=>{window.removeEventListener("online",w),window.removeEventListener("offline",y)}});var M=Ql(),U=s(l(M),2);{var x=w=>{var y=Kl();r(w,y)};z(U,w=>{e(j)||w(x)})}var S=s(U,2),q=l(S),J=s(l(q),2),T=l(J);T.value=T.__value="";var F=s(T);de(F,17,()=>d,w=>w.value,(w,y)=>{var u=Hl(),D=l(u);a(u);var E={};O(()=>{K(D,`${e(y).icon??""} ${e(y).label??""}`),E!==(E=e(y).value)&&(u.value=(u.__value=e(y).value)??"")}),r(w,u)}),a(J),a(q);var N=s(q,2);{var V=w=>{var y=Yl(),u=l(y);{var D=P=>{Ns(P,{})},E=P=>{var B=qt(),A=_t(B);{var X=ie=>{$s(ie,{})},Q=ie=>{var re=qt(),ue=_t(re);{var Z=W=>{Tl(W,{})},se=W=>{var ce=qt(),L=_t(ce);{var pe=he=>{Fl(he,{})},Oe=he=>{var $=qt(),b=_t($);{var C=ee=>{Jl(ee,{})};z(b,ee=>{e(k)==="competition"&&ee(C)},!0)}r(he,$)};z(L,he=>{e(k)==="fingerboarding"?he(pe):he(Oe,!1)},!0)}r(W,ce)};z(ue,W=>{e(k)==="gym_session"?W(Z):W(se,!1)},!0)}r(ie,re)};z(A,ie=>{e(k)==="outdoor_climb"?ie(X):ie(Q,!1)},!0)}r(P,B)};z(u,P=>{e(k)==="indoor_climb"?P(D):P(E,!1)})}a(y),r(w,y)};z(N,w=>{e(k)&&w(V)})}a(S),a(M),Ze(J,()=>e(k),w=>t(k,w)),r(we,M),Gt()}export{vi as component};
