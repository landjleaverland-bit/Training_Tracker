import{f as l,a as r,c as We,t as ba}from"../chunks/CKcnA5P_.js";import{p as sa,c as t,s,j as e,aV as F,r as a,t as m,a as ia,F as n,f as Ae,aW as fa,E as _a,o as Ba,aG as qa,d as Ja}from"../chunks/4c6jdw0Z.js";import{d as aa,s as o}from"../chunks/K94srNfd.js";import{i as _}from"../chunks/CK8hGvwc.js";import{s as He,r as $e,e as ke,i as Ge,b as ea}from"../chunks/BVSa1UsB.js";import{t as Xe,k as ra,D as Ea,s as Na,l as Za,g as Ka,b as Xa,m as Ya,E as Qa,n as $a,o as et,p as at,d as tt,q as st}from"../chunks/9PYLJcFu.js";import{c as wa,k as Ia,l as Wa,n as Ga,o as Ma,p as Ra,q as Pa,t as it}from"../chunks/BqWccOr6.js";import{s as Ke}from"../chunks/9PGhKrW6.js";import{s as Ze}from"../chunks/CzX-2X6y.js";import{p as Ua}from"../chunks/CfB7tKQ8.js";var rt=l('<span class="chevron svelte-12crvy">‚ñ≤</span>'),lt=l('<span class="chevron svelte-12crvy">‚ñº</span>'),vt=l('<div class="input-with-action svelte-12crvy"><input type="text" id="location-manual" placeholder="Custom location..." class="flat-left svelte-12crvy"/> <button type="button" class="action-btn flat-right svelte-12crvy" title="Back to list">‚úï</button></div>'),nt=l("<option> </option>"),ot=l('<select id="location-filter" class="svelte-12crvy"><option>Any Location</option><!></select>'),dt=l("<option> </option>"),ct=l("<option> </option>"),_t=l('<div class="filter-body svelte-12crvy"><div class="filter-grid svelte-12crvy"><div class="filter-item svelte-12crvy"><label for="start-date" class="svelte-12crvy">Start Date</label> <input type="date" id="start-date" class="svelte-12crvy"/></div> <div class="filter-item svelte-12crvy"><label for="end-date" class="svelte-12crvy">End Date</label> <input type="date" id="end-date" class="svelte-12crvy"/></div> <div class="filter-item svelte-12crvy"><label for="location-filter" class="svelte-12crvy">Location</label> <!></div> <div class="filter-item svelte-12crvy"><label for="climbing-type-filter" class="svelte-12crvy">Climb Type</label> <select id="climbing-type-filter" class="svelte-12crvy"><option>Any Type</option><!></select></div> <div class="filter-item svelte-12crvy"><label for="session-type-filter" class="svelte-12crvy">Session Type</label> <select id="session-type-filter" class="svelte-12crvy"><option>Any Type</option><!></select></div> <div class="filter-item svelte-12crvy"><label for="grade-filter" class="svelte-12crvy">Grade (Exact)</label> <input type="text" id="grade-filter" placeholder="e.g. V4" class="svelte-12crvy"/></div></div> <div class="filter-actions svelte-12crvy"><button class="reset-btn svelte-12crvy">Reset Filters</button></div></div>'),ut=l('<div class="filter-container svelte-12crvy"><button class="filter-header svelte-12crvy"><div class="header-content svelte-12crvy"><span class="icon svelte-12crvy">üîç</span> <span class="title svelte-12crvy">Filters</span> <!></div></button> <!></div>');function ft(he,i){sa(i,!0);const w=["Rockstar Swindon","Flashpoint Swindon","Flashpoint Bristol","Redpoint Bristol","TCH Bristol","Other"],g=["Bouldering","Sport","Mixed"],z=["Projecting","Onsighting","Campusing","Repeaters"];let D=F(!1),h=F(""),T=F(""),b=F(""),L=F(""),B=F(""),V=F(""),ne=F(!1);function M(){n(D,!e(D))}function J(){n(h,""),n(T,""),n(b,""),n(L,""),n(ne,!1),n(B,""),n(V,""),R()}function R(){i.onFilterParamsChange({startDate:e(h),endDate:e(T),location:e(b),climbingType:e(L),sessionType:e(B),grade:e(V)})}function Q(){e(b)==="Other"?(n(ne,!0),n(b,"")):R()}function X(){n(ne,!1),n(b,""),R()}var ae=ut(),$=t(ae);$.__click=M;var Y=t($),te=s(t(Y),4);{var ce=x=>{var G=rt();r(x,G)},Z=x=>{var G=lt();r(x,G)};_(te,x=>{e(D)?x(ce):x(Z,!1)})}a(Y),a($);var ue=s($,2);{var y=x=>{var G=_t(),P=t(G),W=t(P),re=s(t(W),2);$e(re),re.__change=R,a(W);var _e=s(W,2),c=s(t(_e),2);$e(c),c.__change=R,a(_e);var p=s(_e,2),f=s(t(p),2);{var v=q=>{var O=vt(),de=t(O);$e(de),de.__input=R;var Te=s(de,2);Te.__click=X,a(O),ea(de,()=>e(b),C=>n(b,C)),r(q,O)},d=q=>{var O=ot();O.__change=Q;var de=t(O);de.value=de.__value="";var Te=s(de);ke(Te,17,()=>w,Ge,(C,se)=>{var Le=nt(),ee=t(Le,!0);a(Le);var ie={};m(()=>{o(ee,e(se)),ie!==(ie=e(se))&&(Le.value=(Le.__value=e(se))??"")}),r(C,Le)}),a(O),wa(O,()=>e(b),C=>n(b,C)),r(q,O)};_(f,q=>{e(ne)?q(v):q(d,!1)})}a(p);var k=s(p,2),A=s(t(k),2);A.__change=R;var le=t(A);le.value=le.__value="";var ge=s(le);ke(ge,17,()=>g,Ge,(q,O)=>{var de=dt(),Te=t(de,!0);a(de);var C={};m(()=>{o(Te,e(O)),C!==(C=e(O))&&(de.value=(de.__value=e(O))??"")}),r(q,de)}),a(A),a(k);var Ee=s(k,2),pe=s(t(Ee),2);pe.__change=R;var E=t(pe);E.value=E.__value="";var U=s(E);ke(U,17,()=>z,Ge,(q,O)=>{var de=ct(),Te=t(de,!0);a(de);var C={};m(()=>{o(Te,e(O)),C!==(C=e(O))&&(de.value=(de.__value=e(O))??"")}),r(q,de)}),a(pe),a(Ee);var H=s(Ee,2),xe=s(t(H),2);$e(xe),xe.__input=R,a(H),a(P);var ze=s(P,2),Fe=t(ze);Fe.__click=J,a(ze),a(G),ea(re,()=>e(h),q=>n(h,q)),ea(c,()=>e(T),q=>n(T,q)),wa(A,()=>e(L),q=>n(L,q)),wa(pe,()=>e(B),q=>n(B,q)),ea(xe,()=>e(V),q=>n(V,q)),Xe(3,G,()=>ra,()=>({duration:200})),r(x,G)};_(ue,x=>{e(D)&&x(y)})}a(ae),m(()=>He($,"aria-expanded",e(D))),r(he,ae),ia()}aa(["click","change","input"]);var gt=l('<span class="climb-type-tag svelte-yz0xxt"> </span>'),pt=l('<span class="notes-preview svelte-yz0xxt"> </span>'),mt=l('<span class="attempts-count svelte-yz0xxt"> </span>'),ht=l('<div class="detail-row svelte-yz0xxt"><span class="label svelte-yz0xxt">Notes:</span> <p class="notes svelte-yz0xxt"> </p></div>'),bt=l('<p class="empty-notes svelte-yz0xxt">No notes for this climb.</p>'),yt=l('<div class="climb-details svelte-yz0xxt"><!> <div class="tags svelte-yz0xxt"><span class="tag type svelte-yz0xxt"> </span> <span class="tag attempt-text svelte-yz0xxt"> </span></div></div>'),xt=l('<div><div class="climb-header svelte-yz0xxt" role="button" tabindex="0"><div class="climb-main-info svelte-yz0xxt"><span> </span> <span class="climb-name svelte-yz0xxt"> </span> <!> <!></div> <div class="climb-meta svelte-yz0xxt"><span><span class="icon svelte-yz0xxt"> </span> <!></span> <button class="delete-btn svelte-yz0xxt" aria-label="Delete climb" title="Delete climb">üóëÔ∏è</button> <span class="chevron svelte-yz0xxt"> </span></div></div> <!></div>');function wt(he,i){sa(i,!0);let w=Ua(i,"showClimbType",3,!1),g=F(!1);function z(){n(g,!e(g))}function D(c){c.stopPropagation(),i.onDelete()}const h={Flash:"‚ö°",Onsight:"üëÅÔ∏è",Redpoint:"üî¥",Dogged:"üõ†Ô∏è",DNF:"‚ùå"};var T=xt();let b;var L=t(T);L.__click=z,L.__keydown=c=>(c.key==="Enter"||c.key===" ")&&z();var B=t(L),V=t(B);let ne;var M=t(V,!0);a(V);var J=s(V,2),R=t(J,!0);a(J);var Q=s(J,2);{var X=c=>{var p=gt(),f=t(p,!0);a(p),m(()=>o(f,i.climb.isSport?"Sport":"Boulder")),r(c,p)};_(Q,c=>{w()&&c(X)})}var ae=s(Q,2);{var $=c=>{var p=pt(),f=t(p);a(p),m(()=>o(f,`- ${i.climb.notes??""}`)),r(c,p)};_(ae,c=>{!e(g)&&i.climb.notes&&c($)})}a(B);var Y=s(B,2),te=t(Y);let ce;var Z=t(te),ue=t(Z,!0);a(Z);var y=s(Z,2);{var x=c=>{var p=mt(),f=t(p,!0);a(p),m(()=>o(f,i.climb.attemptsNum)),r(c,p)};_(y,c=>{i.climb.attemptType!=="Flash"&&i.climb.attemptType!=="Onsight"&&c(x)})}a(te);var G=s(te,2);G.__click=D;var P=s(G,2),W=t(P,!0);a(P),a(Y),a(L);var re=s(L,2);{var _e=c=>{var p=yt(),f=t(p);{var v=pe=>{var E=ht(),U=s(t(E),2),H=t(U,!0);a(U),a(E),m(()=>o(H,i.climb.notes)),r(pe,E)},d=pe=>{var E=bt();r(pe,E)};_(f,pe=>{i.climb.notes?pe(v):pe(d,!1)})}var k=s(f,2),A=t(k),le=t(A,!0);a(A);var ge=s(A,2),Ee=t(ge,!0);a(ge),a(k),a(p),m(()=>{o(le,i.climb.isSport?"Sport":"Boulder"),o(Ee,i.climb.attemptType)}),Xe(3,p,()=>ra,()=>({duration:150})),r(c,p)};_(re,c=>{e(g)&&c(_e)})}a(T),m(()=>{b=Ke(T,1,"climb-entry svelte-yz0xxt",null,b,{expanded:e(g)}),He(L,"aria-expanded",e(g)),ne=Ke(V,1,"grade-badge svelte-yz0xxt",null,ne,{sport:i.climb.isSport}),o(M,i.climb.grade),o(R,i.climb.name||"Unnamed Route"),ce=Ke(te,1,"attempt-type svelte-yz0xxt",null,ce,{flash:i.climb.attemptType==="Flash"}),o(ue,h[i.climb.attemptType]||i.climb.attemptType),o(W,e(g)?"‚ñ≤":"‚ñº")}),r(he,T),ia()}aa(["click","keydown"]);var Dt=l('<span class="stat svelte-7vqogn"> </span>'),St=l('<span class="status-icon pending svelte-7vqogn" title="Waiting to sync">üîÑ</span>'),kt=l('<span class="status-icon error svelte-7vqogn" title="Sync error">‚ö†Ô∏è</span>'),Tt=l('<span class="chip svelte-7vqogn"> </span>'),qt=l('<span class="text-none svelte-7vqogn">None</span>'),Ct=l('<div class="detail-item svelte-7vqogn"><span class="label svelte-7vqogn">Difficulty</span> <span class="value svelte-7vqogn"> </span></div>'),zt=l('<span class="chip svelte-7vqogn"> </span>'),Ft=l('<span class="text-none svelte-7vqogn">None</span>'),Lt=l('<div class="detail-item svelte-7vqogn"><span class="label svelte-7vqogn">Category</span> <div class="value-chips svelte-7vqogn"><!></div></div>'),Gt=l('<span class="chip svelte-7vqogn"> </span>'),Et=l('<span class="text-none svelte-7vqogn">None</span>'),jt=l('<div class="detail-item svelte-7vqogn"><span class="label svelte-7vqogn">Focus</span> <div class="value-chips svelte-7vqogn"><!></div></div>'),At=l('<span class="chip svelte-7vqogn"> </span>'),Ot=l('<span class="text-none svelte-7vqogn">None</span>'),Nt=l('<div class="detail-item svelte-7vqogn"><span class="label svelte-7vqogn">Energy System</span> <div class="value-chips svelte-7vqogn"><!></div></div>'),It=l('<span class="chip svelte-7vqogn"> </span>'),Mt=l('<span class="text-none svelte-7vqogn">None</span>'),Rt=l('<div class="detail-item svelte-7vqogn"><span class="label svelte-7vqogn">Wall Angle</span> <div class="value-chips svelte-7vqogn"><!></div></div>'),Pt=l('<div class="metric svelte-7vqogn"><span class="label svelte-7vqogn">Open Grip</span> <div class="bar-container svelte-7vqogn"><div class="bar-fill svelte-7vqogn"></div></div> <span class="score svelte-7vqogn"> </span></div>'),Bt=l('<div class="metric svelte-7vqogn"><span class="label svelte-7vqogn">Crimp Grip</span> <div class="bar-container svelte-7vqogn"><div class="bar-fill svelte-7vqogn"></div></div> <span class="score svelte-7vqogn"> </span></div>'),Vt=l('<div class="metric svelte-7vqogn"><span class="label svelte-7vqogn">Pinch Grip</span> <div class="bar-container svelte-7vqogn"><div class="bar-fill svelte-7vqogn"></div></div> <span class="score svelte-7vqogn"> </span></div>'),Wt=l('<div class="metric svelte-7vqogn"><span class="label svelte-7vqogn">Sloper Grip</span> <div class="bar-container svelte-7vqogn"><div class="bar-fill svelte-7vqogn"></div></div> <span class="score svelte-7vqogn"> </span></div>'),Ut=l('<div class="metric svelte-7vqogn"><span class="label svelte-7vqogn">Jug Grip</span> <div class="bar-container svelte-7vqogn"><div class="bar-fill svelte-7vqogn"></div></div> <span class="score svelte-7vqogn"> </span></div>'),Ht=l('<p class="no-climbs svelte-7vqogn">No climbs logged for this session.</p>'),Jt=l('<div class="card-body svelte-7vqogn"><div class="details-grid svelte-7vqogn"><div class="detail-item svelte-7vqogn"><span class="label svelte-7vqogn">Training Type</span> <div class="value-chips svelte-7vqogn"><!></div></div> <!> <!> <!> <!> <!></div> <div class="metrics-container svelte-7vqogn"><div class="metric svelte-7vqogn"><span class="label svelte-7vqogn">Finger Load</span> <div class="bar-container svelte-7vqogn"><div class="bar-fill svelte-7vqogn"></div></div> <span class="score svelte-7vqogn"> </span></div> <div class="metric svelte-7vqogn"><span class="label svelte-7vqogn">Shoulder Load</span> <div class="bar-container svelte-7vqogn"><div class="bar-fill svelte-7vqogn"></div></div> <span class="score svelte-7vqogn"> </span></div> <div class="metric svelte-7vqogn"><span class="label svelte-7vqogn">Forearm Load</span> <div class="bar-container svelte-7vqogn"><div class="bar-fill svelte-7vqogn"></div></div> <span class="score svelte-7vqogn"> </span></div> <!> <!> <!> <!> <!></div> <div class="climbs-list svelte-7vqogn"><h4 class="svelte-7vqogn">Climbs</h4> <div class="climbs-container svelte-7vqogn"><!> <!></div></div></div>'),Zt=l('<div><div class="card-header svelte-7vqogn" role="button" tabindex="0"><div class="header-main svelte-7vqogn"><div class="date-badge svelte-7vqogn"><span class="day svelte-7vqogn"> </span> <span class="month svelte-7vqogn"> </span></div> <div class="session-info svelte-7vqogn"><div class="session-text svelte-7vqogn"><h3 class="location svelte-7vqogn"> </h3> <div class="session-meta svelte-7vqogn"><span class="type-tag svelte-7vqogn"> </span> <span class="stat svelte-7vqogn"> </span> <!></div></div> <div class="load-summary svelte-7vqogn"><div class="load-badge finger svelte-7vqogn"> </div> <div class="load-badge shoulder svelte-7vqogn"> </div> <div class="load-badge forearm svelte-7vqogn"> </div></div></div></div> <div class="header-actions"><div class="header-status svelte-7vqogn"><!></div>  <button class="btn-icon delete-session" title="Delete Session">üóëÔ∏è</button> <span class="chevron svelte-7vqogn"> </span></div></div> <!></div> <!>',1);function Kt(he,i){sa(i,!0);let w=F(!1),g=F(!1);function z(){n(w,!e(w))}function D(){n(g,!0)}function h(){Ia(i.session.id),n(g,!1),i.onDelete()}function T(q){const O=[...i.session.climbs];O.splice(q,1),Wa(i.session.id,{climbs:O}),i.onDelete()}let b=fa(()=>i.session.climbs?.length??0),L=fa(()=>(i.session.climbs||[]).reduce((q,O)=>{const de=parseInt(O.grade.replace(/\D/g,""))||0,Te=parseInt(q.replace(/\D/g,""))||0;return de>Te?O.grade:q},"V0"));var B=Zt(),V=Ae(B);let ne;var M=t(V);M.__click=z,M.__keydown=q=>q.key==="Enter"&&z();var J=t(M),R=t(J),Q=t(R),X=t(Q,!0);a(Q);var ae=s(Q,2),$=t(ae,!0);a(ae),a(R);var Y=s(R,2),te=t(Y),ce=t(te),Z=t(ce,!0);a(ce);var ue=s(ce,2),y=t(ue),x=t(y,!0);a(y);var G=s(y,2),P=t(G);a(G);var W=s(G,2);{var re=q=>{var O=Dt(),de=t(O);a(O),m(()=>o(de,`Max: ${e(L)??""}`)),r(q,O)};_(W,q=>{e(b)>0&&q(re)})}a(ue),a(te);var _e=s(te,2),c=t(_e),p=t(c,!0);a(c);var f=s(c,2),v=t(f,!0);a(f);var d=s(f,2),k=t(d,!0);a(d),a(_e),a(Y),a(J);var A=s(J,2),le=t(A),ge=t(le);{var Ee=q=>{var O=St();r(q,O)},pe=q=>{var O=We(),de=Ae(O);{var Te=C=>{var se=kt();r(C,se)};_(de,C=>{i.session.syncStatus==="error"&&C(Te)},!0)}r(q,O)};_(ge,q=>{i.session.syncStatus==="pending"?q(Ee):q(pe,!1)})}a(le);var E=s(le,2);E.__click=q=>{q.stopPropagation(),D()};var U=s(E,2),H=t(U,!0);a(U),a(A),a(M);var xe=s(M,2);{var ze=q=>{var O=Jt(),de=t(O),Te=t(de),C=s(t(Te),2),se=t(C);{var Le=I=>{var N=We(),u=Ae(N);ke(u,17,()=>i.session.trainingTypes,Ge,(S,j)=>{var oe=Tt(),K=t(oe,!0);a(oe),m(()=>o(K,e(j))),r(S,oe)}),r(I,N)},ee=I=>{var N=qt();r(I,N)};_(se,I=>{i.session.trainingTypes&&i.session.trainingTypes.length>0&&!i.session.trainingTypes.includes("None")?I(Le):I(ee,!1)})}a(C),a(Te);var ie=s(Te,2);{var ve=I=>{var N=Ct(),u=s(t(N),2),S=t(u,!0);a(u),a(N),m(()=>o(S,i.session.difficulty)),r(I,N)};_(ie,I=>{i.session.difficulty&&I(ve)})}var be=s(ie,2);{var me=I=>{var N=Lt(),u=s(t(N),2),S=t(u);{var j=K=>{var fe=We(),Ce=Ae(fe);ke(Ce,17,()=>i.session.categories,Ge,(Me,da)=>{var Re=zt(),ca=t(Re,!0);a(Re),m(()=>o(ca,e(da))),r(Me,Re)}),r(K,fe)},oe=K=>{var fe=Ft();r(K,fe)};_(S,K=>{i.session.categories.length>0&&!i.session.categories.includes("None")?K(j):K(oe,!1)})}a(u),a(N),r(I,N)};_(be,I=>{i.session.categories?.length&&I(me)})}var we=s(be,2);{var De=I=>{var N=jt(),u=s(t(N),2),S=t(u);{var j=K=>{var fe=We(),Ce=Ae(fe);ke(Ce,17,()=>i.session.techniqueFocuses,Ge,(Me,da)=>{var Re=Gt(),ca=t(Re,!0);a(Re),m(()=>o(ca,e(da))),r(Me,Re)}),r(K,fe)},oe=K=>{var fe=Et();r(K,fe)};_(S,K=>{i.session.techniqueFocuses.length>0&&!i.session.techniqueFocuses.includes("None")?K(j):K(oe,!1)})}a(u),a(N),r(I,N)};_(we,I=>{i.session.techniqueFocuses?.length&&I(De)})}var Se=s(we,2);{var ye=I=>{var N=Nt(),u=s(t(N),2),S=t(u);{var j=K=>{var fe=We(),Ce=Ae(fe);ke(Ce,17,()=>i.session.energySystems,Ge,(Me,da)=>{var Re=At(),ca=t(Re,!0);a(Re),m(()=>o(ca,e(da))),r(Me,Re)}),r(K,fe)},oe=K=>{var fe=Ot();r(K,fe)};_(S,K=>{i.session.energySystems.length>0&&!i.session.energySystems.includes("None")?K(j):K(oe,!1)})}a(u),a(N),r(I,N)};_(Se,I=>{i.session.energySystems?.length&&I(ye)})}var qe=s(Se,2);{var Pe=I=>{var N=Rt(),u=s(t(N),2),S=t(u);{var j=K=>{var fe=We(),Ce=Ae(fe);ke(Ce,17,()=>i.session.wallAngles,Ge,(Me,da)=>{var Re=It(),ca=t(Re,!0);a(Re),m(()=>o(ca,e(da))),r(Me,Re)}),r(K,fe)},oe=K=>{var fe=Mt();r(K,fe)};_(S,K=>{i.session.wallAngles.length>0&&!i.session.wallAngles.includes("None")?K(j):K(oe,!1)})}a(u),a(N),r(I,N)};_(qe,I=>{i.session.wallAngles?.length&&I(Pe)})}a(de);var Ve=s(de,2),Oe=t(Ve),Je=s(t(Oe),2),Ne=t(Je);a(Je);var Ie=s(Je,2),ua=t(Ie);a(Ie),a(Oe);var Be=s(Oe,2),la=s(t(Be),2),je=t(la);a(la);var Ue=s(la,2),Da=t(Ue);a(Ue),a(Be);var ta=s(Be,2),Ye=s(t(ta),2),va=t(Ye);a(Ye);var ga=s(Ye,2),na=t(ga);a(ga),a(ta);var oa=s(ta,2);{var Sa=I=>{var N=Pt(),u=s(t(N),2),S=t(u);a(u);var j=s(u,2),oe=t(j);a(j),a(N),m(()=>{Ze(S,`width: ${i.session.openGrip/5*100}%`),o(oe,`${i.session.openGrip??""}/5`)}),r(I,N)};_(oa,I=>{i.session.openGrip&&I(Sa)})}var Qe=s(oa,2);{var Ca=I=>{var N=Bt(),u=s(t(N),2),S=t(u);a(u);var j=s(u,2),oe=t(j);a(j),a(N),m(()=>{Ze(S,`width: ${i.session.crimpGrip/5*100}%`),o(oe,`${i.session.crimpGrip??""}/5`)}),r(I,N)};_(Qe,I=>{i.session.crimpGrip&&I(Ca)})}var ma=s(Qe,2);{var ka=I=>{var N=Vt(),u=s(t(N),2),S=t(u);a(u);var j=s(u,2),oe=t(j);a(j),a(N),m(()=>{Ze(S,`width: ${i.session.pinchGrip/5*100}%`),o(oe,`${i.session.pinchGrip??""}/5`)}),r(I,N)};_(ma,I=>{i.session.pinchGrip&&I(ka)})}var ha=s(ma,2);{var ja=I=>{var N=Wt(),u=s(t(N),2),S=t(u);a(u);var j=s(u,2),oe=t(j);a(j),a(N),m(()=>{Ze(S,`width: ${i.session.sloperGrip/5*100}%`),o(oe,`${i.session.sloperGrip??""}/5`)}),r(I,N)};_(ha,I=>{i.session.sloperGrip&&I(ja)})}var za=s(ha,2);{var Aa=I=>{var N=Ut(),u=s(t(N),2),S=t(u);a(u);var j=s(u,2),oe=t(j);a(j),a(N),m(()=>{Ze(S,`width: ${i.session.jugGrip/5*100}%`),o(oe,`${i.session.jugGrip??""}/5`)}),r(I,N)};_(za,I=>{i.session.jugGrip&&I(Aa)})}a(Ve);var Ta=s(Ve,2),ya=s(t(Ta),2),xa=t(ya);ke(xa,17,()=>i.session.climbs||[],Ge,(I,N,u)=>{{let S=fa(()=>i.session.climbingType==="Mixed");wt(I,{get climb(){return e(N)},onDelete:()=>T(u),get showClimbType(){return e(S)}})}});var Fa=s(xa,2);{var La=I=>{var N=Ht();r(I,N)};_(Fa,I=>{(i.session.climbs||[]).length===0&&I(La)})}a(ya),a(Ta),a(O),m(()=>{Ze(Ne,`width: ${i.session.fingerLoad/5*100}%`),o(ua,`${i.session.fingerLoad??""}/5`),Ze(je,`width: ${i.session.shoulderLoad/5*100}%`),o(Da,`${i.session.shoulderLoad??""}/5`),Ze(va,`width: ${i.session.forearmLoad/5*100}%`),o(na,`${i.session.forearmLoad??""}/5`)}),Xe(3,O,()=>ra,()=>({duration:150})),r(q,O)};_(xe,q=>{e(w)&&q(ze)})}a(V);var Fe=s(V,2);Ea(Fe,{get isOpen(){return e(g)},title:"Delete Session",message:"Are you sure you want to delete this session and all its climbs? This cannot be undone.",onConfirm:h,onCancel:()=>n(g,!1)}),m((q,O)=>{ne=Ke(V,1,"session-card svelte-7vqogn",null,ne,{expanded:e(w)}),He(M,"aria-expanded",e(w)),o(X,q),o($,O),o(Z,i.session.location),o(x,i.session.climbingType),o(P,`${e(b)??""} climbs`),He(c,"title",`Finger Load: ${i.session.fingerLoad??""}`),o(p,i.session.fingerLoad),He(f,"title",`Shoulder Load: ${i.session.shoulderLoad??""}`),o(v,i.session.shoulderLoad),He(d,"title",`Forearm Load: ${i.session.forearmLoad??""}`),o(k,i.session.forearmLoad),o(H,e(w)?"‚ñ≤":"‚ñº")},[()=>new Date(i.session.date).getDate(),()=>new Date(i.session.date).toLocaleDateString("en-GB",{month:"short"})]),r(he,B),ia()}aa(["click","keydown"]);var Xt=l('<div class="legend-item svelte-11p9lqi"><span class="l-icon svelte-11p9lqi"> </span> <span class="l-label svelte-11p9lqi"> </span></div>'),Yt=l('<div class="legend-content svelte-11p9lqi"><div class="legend-grid svelte-11p9lqi"></div></div>'),Qt=l('<div class="legend-container svelte-11p9lqi"><button class="legend-toggle svelte-11p9lqi"><span class="icon">‚ÑπÔ∏è</span> <span class="text">Icon Legend</span> <span class="chevron svelte-11p9lqi"> </span></button> <!></div>');function Ha(he){let i=F(!1);const w=[{icon:"üëÅÔ∏è",label:"Onsight"},{icon:"‚ö°",label:"Flash"},{icon:"üî¥",label:"Redpoint"},{icon:"üõ†Ô∏è",label:"Dogged"},{icon:"‚ùå",label:"DNF"}];var g=Qt(),z=t(g);z.__click=()=>n(i,!e(i));var D=s(t(z),4),h=t(D,!0);a(D),a(z);var T=s(z,2);{var b=L=>{var B=Yt(),V=t(B);ke(V,21,()=>w,Ge,(ne,M)=>{var J=Xt(),R=t(J),Q=t(R,!0);a(R);var X=s(R,2),ae=t(X,!0);a(X),a(J),m(()=>{o(Q,e(M).icon),o(ae,e(M).label)}),r(ne,J)}),a(V),a(B),Xe(3,B,()=>ra),r(L,B)};_(T,L=>{e(i)&&L(b)})}a(g),m(()=>{He(z,"aria-expanded",e(i)),o(h,e(i)?"‚ñº":"‚ñ∂")}),r(he,g)}aa(["click"]);function Va(he,i){if(!he||he.length===0){alert("No data to export");return}const w=Array.from(new Set(he.flatMap(Object.keys))),g=[w.join(","),...he.map(h=>w.map(T=>{let b=h[T];if(b==null)return"";if(typeof b=="object"){if(b instanceof Date)return b.toISOString();b=JSON.stringify(b).replace(/"/g,'""')}else typeof b=="string"&&(b=b.replace(/"/g,'""'));return typeof b=="string"&&(b.includes(",")||b.includes('"')||b.includes(`
`))?`"${b}"`:b}).join(","))].join(`
`),z=new Blob([g],{type:"text/csv;charset=utf-8;"}),D=document.createElement("a");if(D.download!==void 0){const h=URL.createObjectURL(z);D.setAttribute("href",h),D.setAttribute("download",i.endsWith(".csv")?i:`${i}.csv`),D.style.visibility="hidden",document.body.appendChild(D),D.click(),document.body.removeChild(D)}}var $t=l('<span class="spinner svelte-14fqz8w"></span> Fetching...',1),es=l('<div class="error-banner svelte-14fqz8w"> </div>'),as=l('<small class="svelte-14fqz8w">Try adjusting your filters.</small>'),ts=l('<div class="empty-state svelte-14fqz8w"><p class="svelte-14fqz8w">No indoor climbing sessions found.</p> <!></div>'),ss=l('<div class="load-more-container svelte-14fqz8w"><button class="load-more-btn svelte-14fqz8w"> </button></div>'),is=l('<div class="view-container svelte-14fqz8w"><div class="view-header svelte-14fqz8w"><h2 class="view-title svelte-14fqz8w">üßó Indoor Climbing History</h2> <div class="header-actions svelte-14fqz8w"><button class="action-btn secondary svelte-14fqz8w" title="Export filtered data to CSV">üì• Export</button> <button class="action-btn svelte-14fqz8w" title="Fetch data from cloud"><!></button></div></div> <!> <!> <div class="info-bar svelte-14fqz8w"><div class="legend-wrapper svelte-14fqz8w"><!></div> <div class="load-key svelte-14fqz8w"><span class="key-label svelte-14fqz8w">Load:</span> <div class="key-item svelte-14fqz8w"><span class="dot finger svelte-14fqz8w"></span> Finger</div> <div class="key-item svelte-14fqz8w"><span class="dot shoulder svelte-14fqz8w"></span> Shoulder</div> <div class="key-item svelte-14fqz8w"><span class="dot forearm svelte-14fqz8w"></span> Forearm</div></div></div> <div class="sessions-list"><!> <!> <!></div></div>');function rs(he,i){sa(i,!0);let w=F(_a([])),g=F(_a([])),z=F(!1),D=F(""),h=F(_a({startDate:"",endDate:"",location:"",climbingType:"",sessionType:"",grade:""})),T=F(20);const b=20;Ba(()=>{L()});function L(){const v=Ga("indoor_climb");n(w,v.sort((d,k)=>new Date(k.date).getTime()-new Date(d.date).getTime()),!0),M()}async function B(){n(z,!0),n(D,"");try{await Na();const v=await Za();v.ok&&v.data?V(v.data):n(D,v.error||"Failed to fetch data",!0)}catch(v){n(D,v instanceof Error?v.message:"Unknown error",!0)}finally{n(z,!1)}}function V(v){const d=v.map(A=>({...A,activityType:"indoor_climb",createdAt:new Date().toISOString(),updatedAt:new Date().toISOString(),syncStatus:"synced",syncedAt:new Date().toISOString(),openGrip:0,crimpGrip:0,pinchGrip:0,sloperGrip:0,jugGrip:0}));Ma(d);const k=Ga("indoor_climb");n(w,k.sort((A,le)=>new Date(le.date).getTime()-new Date(A.date).getTime()),!0),M()}function ne(v){n(h,v,!0),M()}function M(){n(T,b),n(g,e(w).filter(v=>{if(e(h).startDate&&v.date<e(h).startDate||e(h).endDate&&v.date>e(h).endDate||e(h).location&&v.location!==e(h).location)return!1;if(e(h).climbingType&&(v.climbingType==="Leading"?"Sport":v.climbingType)!==e(h).climbingType)if(v.climbingType==="Mixed")if(e(h).climbingType==="Bouldering"){if(!v.climbs.some(k=>!k.isSport))return!1}else if(e(h).climbingType==="Sport"){if(!v.climbs.some(k=>k.isSport))return!1}else return!1;else return!1;if(e(h).sessionType&&!v.trainingTypes?.includes(e(h).sessionType))return!1;if(e(h).grade){const d=e(h).grade.trim().toLowerCase();if(!v.climbs.some(A=>A.grade.trim().toLowerCase()===d))return!1}return!0}),!0)}function J(){n(T,e(T)+b)}var R=is(),Q=t(R),X=s(t(Q),2),ae=t(X);ae.__click=()=>Va(e(g),"indoor_climbs");var $=s(ae,2);$.__click=B;var Y=t($);{var te=v=>{var d=$t();qa(),r(v,d)},ce=v=>{var d=ba("‚òÅÔ∏è Fetch Data");r(v,d)};_(Y,v=>{e(z)?v(te):v(ce,!1)})}a($),a(X),a(Q);var Z=s(Q,2);{var ue=v=>{var d=es(),k=t(d,!0);a(d),m(()=>o(k,e(D))),Xe(3,d,()=>ra),r(v,d)};_(Z,v=>{e(D)&&v(ue)})}var y=s(Z,2);ft(y,{onFilterParamsChange:ne});var x=s(y,2),G=t(x),P=t(G);Ha(P),a(G),qa(2),a(x);var W=s(x,2),re=t(W);ke(re,17,()=>e(g).slice(0,e(T)),v=>v.id,(v,d)=>{Kt(v,{get session(){return e(d)},onDelete:L})});var _e=s(re,2);{var c=v=>{var d=ts(),k=s(t(d),2);{var A=le=>{var ge=as();r(le,ge)};_(k,le=>{e(w).length>0&&le(A)})}a(d),r(v,d)};_(_e,v=>{e(g).length===0&&v(c)})}var p=s(_e,2);{var f=v=>{var d=ss(),k=t(d);k.__click=J;var A=t(k);a(k),a(d),m(()=>o(A,`Load More (${e(g).length-e(T)} remaining)`)),r(v,d)};_(p,v=>{e(T)<e(g).length&&v(f)})}a(W),a(R),m(()=>$.disabled=e(z)),r(he,R),ia()}aa(["click"]);var ls=l('<span class="chevron svelte-1frtlim">‚ñ≤</span>'),vs=l('<span class="chevron svelte-1frtlim">‚ñº</span>'),ns=l('<div class="input-with-action svelte-1frtlim"><input type="text" id="area-filter-text" placeholder="Type area name..." class="flat-left svelte-1frtlim"/> <button class="action-btn flat-right svelte-1frtlim" title="Back to list">‚úï</button></div>'),os=l("<option> </option>"),ds=l('<select id="area-filter" class="svelte-1frtlim"><option>All Areas</option><!><option>Other (Manual Entry)</option></select>'),cs=l('<div class="input-with-action svelte-1frtlim"><input type="text" id="crag-filter-text" placeholder="Type crag name..." class="flat-left svelte-1frtlim"/> <button class="action-btn flat-right svelte-1frtlim" title="Back to list">‚úï</button></div>'),_s=l("<option> </option>"),us=l('<select id="crag-filter" class="svelte-1frtlim"><option>All Crags</option><!><option>Other (Manual Entry)</option></select>'),fs=l('<input type="text" id="crag-filter-text" class="svelte-1frtlim"/>'),gs=l("<option> </option>"),ps=l("<option> </option>"),ms=l('<div class="filter-body svelte-1frtlim"><div class="filter-grid svelte-1frtlim"><div class="filter-item svelte-1frtlim"><label for="start-date" class="svelte-1frtlim">Start Date</label> <input type="date" id="start-date" class="svelte-1frtlim"/></div> <div class="filter-item svelte-1frtlim"><label for="end-date" class="svelte-1frtlim">End Date</label> <input type="date" id="end-date" class="svelte-1frtlim"/></div> <div class="filter-item svelte-1frtlim"><label for="area-filter" class="svelte-1frtlim">Area</label> <!></div> <div class="filter-item svelte-1frtlim"><label for="crag-filter" class="svelte-1frtlim">Crag</label> <!></div> <div class="filter-item svelte-1frtlim"><label for="climbing-type-filter" class="svelte-1frtlim">Climb Type</label> <select id="climbing-type-filter" class="svelte-1frtlim"><option>Any Type</option><!></select></div> <div class="filter-item svelte-1frtlim"><label for="session-type-filter" class="svelte-1frtlim">Session Type</label> <select id="session-type-filter" class="svelte-1frtlim"><option>Any Type</option><!></select></div> <div class="filter-item svelte-1frtlim"><label for="grade-filter" class="svelte-1frtlim">Grade (Exact)</label> <input type="text" id="grade-filter" placeholder="e.g. 7a" class="svelte-1frtlim"/></div></div> <div class="filter-actions svelte-1frtlim"><button class="reset-btn svelte-1frtlim">Reset Filters</button></div></div>'),hs=l('<div class="filter-container svelte-1frtlim"><button class="filter-header svelte-1frtlim"><div class="header-content svelte-1frtlim"><span class="icon svelte-1frtlim">üîç</span> <span class="title svelte-1frtlim">Filters</span> <!></div></button> <!></div>');function bs(he,i){sa(i,!0);const w=Ka(),g=["Bouldering","Sport","Mixed","Trad"],z=["Projecting","Onsighting","Campusing","Repeaters","Fun","Volume"];let D=F(!1),h=F(""),T=F(""),b=F(""),L=F(""),B=F(""),V=F(""),ne=F(""),M=F(!1),J=F(!1),R=fa(()=>e(b)&&e(b)!=="Other"?Xa(e(b)):[]);function Q(){e(b)==="Other"?(n(M,!0),n(b,"")):n(M,!1),n(L,""),n(J,!1),Y()}function X(){e(L)==="Other"?(n(J,!0),n(L,"")):n(J,!1),Y()}function ae(){n(D,!e(D))}function $(){n(h,""),n(T,""),n(b,""),n(L,""),n(B,""),n(V,""),n(ne,""),n(M,!1),n(J,!1),Y()}function Y(){i.onFilterParamsChange({startDate:e(h),endDate:e(T),area:e(b),crag:e(L),climbingType:e(B),sessionType:e(V),grade:e(ne)})}var te=hs(),ce=t(te);ce.__click=ae;var Z=t(ce),ue=s(t(Z),4);{var y=W=>{var re=ls();r(W,re)},x=W=>{var re=vs();r(W,re)};_(ue,W=>{e(D)?W(y):W(x,!1)})}a(Z),a(ce);var G=s(ce,2);{var P=W=>{var re=ms(),_e=t(re),c=t(_e),p=s(t(c),2);$e(p),p.__change=Y,a(c);var f=s(c,2),v=s(t(f),2);$e(v),v.__change=Y,a(f);var d=s(f,2),k=s(t(d),2);{var A=ee=>{var ie=ns(),ve=t(ie);$e(ve),ve.__input=Y;var be=s(ve,2);be.__click=()=>{n(M,!1),n(b,""),Y()},a(ie),ea(ve,()=>e(b),me=>n(b,me)),r(ee,ie)},le=ee=>{var ie=ds();ie.__change=Q;var ve=t(ie);ve.value=ve.__value="";var be=s(ve);ke(be,17,()=>w,Ge,(we,De)=>{var Se=os(),ye=t(Se,!0);a(Se);var qe={};m(()=>{o(ye,e(De)),qe!==(qe=e(De))&&(Se.value=(Se.__value=e(De))??"")}),r(we,Se)});var me=s(be);me.value=me.__value="Other",a(ie),wa(ie,()=>e(b),we=>n(b,we)),r(ee,ie)};_(k,ee=>{e(M)?ee(A):ee(le,!1)})}a(d);var ge=s(d,2),Ee=s(t(ge),2);{var pe=ee=>{var ie=cs(),ve=t(ie);$e(ve),ve.__input=Y;var be=s(ve,2);be.__click=()=>{n(J,!1),n(L,""),Y()},a(ie),ea(ve,()=>e(L),me=>n(L,me)),r(ee,ie)},E=ee=>{var ie=We(),ve=Ae(ie);{var be=we=>{var De=us();De.__change=X;var Se=t(De);Se.value=Se.__value="";var ye=s(Se);ke(ye,17,()=>e(R),Ge,(Pe,Ve)=>{var Oe=_s(),Je=t(Oe,!0);a(Oe);var Ne={};m(()=>{o(Je,e(Ve)),Ne!==(Ne=e(Ve))&&(Oe.value=(Oe.__value=e(Ve))??"")}),r(Pe,Oe)});var qe=s(ye);qe.value=qe.__value="Other",a(De),wa(De,()=>e(L),Pe=>n(L,Pe)),r(we,De)},me=we=>{var De=fs();$e(De),De.__input=Y,m(()=>{He(De,"placeholder",e(b)?"Filter crag...":"Select area first"),De.disabled=!e(M)&&!e(b)}),ea(De,()=>e(L),Se=>n(L,Se)),r(we,De)};_(ve,we=>{!e(M)&&e(b)&&e(R).length>0?we(be):we(me,!1)},!0)}r(ee,ie)};_(Ee,ee=>{e(J)?ee(pe):ee(E,!1)})}a(ge);var U=s(ge,2),H=s(t(U),2);H.__change=Y;var xe=t(H);xe.value=xe.__value="";var ze=s(xe);ke(ze,17,()=>g,Ge,(ee,ie)=>{var ve=gs(),be=t(ve,!0);a(ve);var me={};m(()=>{o(be,e(ie)),me!==(me=e(ie))&&(ve.value=(ve.__value=e(ie))??"")}),r(ee,ve)}),a(H),a(U);var Fe=s(U,2),q=s(t(Fe),2);q.__change=Y;var O=t(q);O.value=O.__value="";var de=s(O);ke(de,17,()=>z,Ge,(ee,ie)=>{var ve=ps(),be=t(ve,!0);a(ve);var me={};m(()=>{o(be,e(ie)),me!==(me=e(ie))&&(ve.value=(ve.__value=e(ie))??"")}),r(ee,ve)}),a(q),a(Fe);var Te=s(Fe,2),C=s(t(Te),2);$e(C),C.__input=Y,a(Te),a(_e);var se=s(_e,2),Le=t(se);Le.__click=$,a(se),a(re),ea(p,()=>e(h),ee=>n(h,ee)),ea(v,()=>e(T),ee=>n(T,ee)),wa(H,()=>e(B),ee=>n(B,ee)),wa(q,()=>e(V),ee=>n(V,ee)),ea(C,()=>e(ne),ee=>n(ne,ee)),Xe(3,re,()=>ra,()=>({duration:200})),r(W,re)};_(G,W=>{e(D)&&W(P)})}a(te),m(()=>He(ce,"aria-expanded",e(D))),r(he,te),ia()}aa(["click","change","input"]);var ys=l('<span class="climb-type-tag svelte-1k6anfh"> </span>'),xs=l('<span class="notes-preview svelte-1k6anfh"> </span>'),ws=l('<span class="attempts-count svelte-1k6anfh"> </span>'),Ds=l('<div class="detail-row svelte-1k6anfh"><span class="label svelte-1k6anfh">Notes:</span> <p class="notes svelte-1k6anfh"> </p></div>'),Ss=l('<p class="empty-notes svelte-1k6anfh">No notes for this climb.</p>'),ks=l('<div class="climb-details svelte-1k6anfh"><!> <div class="tags svelte-1k6anfh"><span class="tag type svelte-1k6anfh"> </span> <span class="tag attempt-text svelte-1k6anfh"> </span></div></div>'),Ts=l('<div><div class="climb-header svelte-1k6anfh" role="button" tabindex="0"><div class="climb-main-info svelte-1k6anfh"><span> </span> <span class="climb-name svelte-1k6anfh"> </span> <!> <!></div> <div class="climb-meta svelte-1k6anfh"><span><span class="icon svelte-1k6anfh"> </span> <!></span> <button class="delete-btn svelte-1k6anfh" aria-label="Delete climb" title="Delete climb">üóëÔ∏è</button> <span class="chevron svelte-1k6anfh"> </span></div></div> <!></div>');function qs(he,i){sa(i,!0);let w=Ua(i,"showClimbType",3,!1),g=F(!1);function z(){n(g,!e(g))}function D(c){c.stopPropagation(),i.onDelete()}const h={Flash:"‚ö°",Onsight:"üëÅÔ∏è",Redpoint:"üî¥",Dogged:"üõ†Ô∏è",DNF:"‚ùå"};var T=Ts();let b;var L=t(T);L.__click=z,L.__keydown=c=>(c.key==="Enter"||c.key===" ")&&z();var B=t(L),V=t(B);let ne;var M=t(V,!0);a(V);var J=s(V,2),R=t(J,!0);a(J);var Q=s(J,2);{var X=c=>{var p=ys(),f=t(p,!0);a(p),m(()=>o(f,i.climb.isSport?"Sport":"Boulder")),r(c,p)};_(Q,c=>{w()&&c(X)})}var ae=s(Q,2);{var $=c=>{var p=xs(),f=t(p);a(p),m(()=>o(f,`- ${i.climb.notes??""}`)),r(c,p)};_(ae,c=>{!e(g)&&i.climb.notes&&c($)})}a(B);var Y=s(B,2),te=t(Y);let ce;var Z=t(te),ue=t(Z,!0);a(Z);var y=s(Z,2);{var x=c=>{var p=ws(),f=t(p,!0);a(p),m(()=>o(f,i.climb.attemptsNum)),r(c,p)};_(y,c=>{i.climb.attemptType!=="Flash"&&i.climb.attemptType!=="Onsight"&&c(x)})}a(te);var G=s(te,2);G.__click=D;var P=s(G,2),W=t(P,!0);a(P),a(Y),a(L);var re=s(L,2);{var _e=c=>{var p=ks(),f=t(p);{var v=pe=>{var E=Ds(),U=s(t(E),2),H=t(U,!0);a(U),a(E),m(()=>o(H,i.climb.notes)),r(pe,E)},d=pe=>{var E=Ss();r(pe,E)};_(f,pe=>{i.climb.notes?pe(v):pe(d,!1)})}var k=s(f,2),A=t(k),le=t(A,!0);a(A);var ge=s(A,2),Ee=t(ge,!0);a(ge),a(k),a(p),m(()=>{o(le,i.climb.isSport?"Sport":"Boulder"),o(Ee,i.climb.attemptType)}),Xe(3,p,()=>ra,()=>({duration:150})),r(c,p)};_(re,c=>{e(g)&&c(_e)})}a(T),m(()=>{b=Ke(T,1,"climb-entry svelte-1k6anfh",null,b,{expanded:e(g)}),He(L,"aria-expanded",e(g)),ne=Ke(V,1,"grade-badge svelte-1k6anfh",null,ne,{sport:i.climb.isSport}),o(M,i.climb.grade),o(R,i.climb.name||"Unnamed Route"),ce=Ke(te,1,"attempt-type svelte-1k6anfh",null,ce,{flash:i.climb.attemptType==="Flash"}),o(ue,h[i.climb.attemptType]||i.climb.attemptType),o(W,e(g)?"‚ñ≤":"‚ñº")}),r(he,T),ia()}aa(["click","keydown"]);var Cs=l('<div class="sector-meta svelte-d5hg2r"> </div>'),zs=l('<span class="stat svelte-d5hg2r"> </span>'),Fs=l('<span class="status-icon pending svelte-d5hg2r" title="Waiting to sync">üîÑ</span>'),Ls=l('<span class="status-icon error svelte-d5hg2r" title="Sync error">‚ö†Ô∏è</span>'),Gs=l('<span class="chip svelte-d5hg2r"> </span>'),Es=l('<span class="text-none svelte-d5hg2r">None</span>'),js=l('<div class="detail-item svelte-d5hg2r"><span class="label svelte-d5hg2r">Difficulty</span> <span class="value svelte-d5hg2r"> </span></div>'),As=l('<span class="chip svelte-d5hg2r"> </span>'),Os=l('<span class="text-none svelte-d5hg2r">None</span>'),Ns=l('<div class="detail-item svelte-d5hg2r"><span class="label svelte-d5hg2r">Category</span> <div class="value-chips svelte-d5hg2r"><!></div></div>'),Is=l('<span class="chip svelte-d5hg2r"> </span>'),Ms=l('<span class="text-none svelte-d5hg2r">None</span>'),Rs=l('<div class="detail-item svelte-d5hg2r"><span class="label svelte-d5hg2r">Focus</span> <div class="value-chips svelte-d5hg2r"><!></div></div>'),Ps=l('<span class="chip svelte-d5hg2r"> </span>'),Bs=l('<span class="text-none svelte-d5hg2r">None</span>'),Vs=l('<div class="detail-item svelte-d5hg2r"><span class="label svelte-d5hg2r">Energy System</span> <div class="value-chips svelte-d5hg2r"><!></div></div>'),Ws=l('<div class="metric svelte-d5hg2r"><span class="label svelte-d5hg2r">Open Grip</span> <div class="bar-container svelte-d5hg2r"><div class="bar-fill svelte-d5hg2r"></div></div> <span class="score svelte-d5hg2r"> </span></div>'),Us=l('<div class="metric svelte-d5hg2r"><span class="label svelte-d5hg2r">Crimp Grip</span> <div class="bar-container svelte-d5hg2r"><div class="bar-fill svelte-d5hg2r"></div></div> <span class="score svelte-d5hg2r"> </span></div>'),Hs=l('<div class="metric svelte-d5hg2r"><span class="label svelte-d5hg2r">Pinch Grip</span> <div class="bar-container svelte-d5hg2r"><div class="bar-fill svelte-d5hg2r"></div></div> <span class="score svelte-d5hg2r"> </span></div>'),Js=l('<div class="metric svelte-d5hg2r"><span class="label svelte-d5hg2r">Sloper Grip</span> <div class="bar-container svelte-d5hg2r"><div class="bar-fill svelte-d5hg2r"></div></div> <span class="score svelte-d5hg2r"> </span></div>'),Zs=l('<div class="metric svelte-d5hg2r"><span class="label svelte-d5hg2r">Jug Grip</span> <div class="bar-container svelte-d5hg2r"><div class="bar-fill svelte-d5hg2r"></div></div> <span class="score svelte-d5hg2r"> </span></div>'),Ks=l('<p class="no-climbs svelte-d5hg2r">No climbs logged for this session.</p>'),Xs=l('<div class="card-body svelte-d5hg2r"><div class="details-grid svelte-d5hg2r"><div class="detail-item svelte-d5hg2r"><span class="label svelte-d5hg2r">Training Type</span> <div class="value-chips svelte-d5hg2r"><!></div></div> <!> <!> <!> <!></div> <div class="metrics-container svelte-d5hg2r"><div class="metric svelte-d5hg2r"><span class="label svelte-d5hg2r">Finger Load</span> <div class="bar-container svelte-d5hg2r"><div class="bar-fill svelte-d5hg2r"></div></div> <span class="score svelte-d5hg2r"> </span></div> <div class="metric svelte-d5hg2r"><span class="label svelte-d5hg2r">Shoulder Load</span> <div class="bar-container svelte-d5hg2r"><div class="bar-fill svelte-d5hg2r"></div></div> <span class="score svelte-d5hg2r"> </span></div> <div class="metric svelte-d5hg2r"><span class="label svelte-d5hg2r">Forearm Load</span> <div class="bar-container svelte-d5hg2r"><div class="bar-fill svelte-d5hg2r"></div></div> <span class="score svelte-d5hg2r"> </span></div> <!> <!> <!> <!> <!></div> <div class="climbs-list svelte-d5hg2r"><h4 class="svelte-d5hg2r">Climbs</h4> <div class="climbs-container svelte-d5hg2r"><!> <!></div></div></div>'),Ys=l('<div><div class="card-header svelte-d5hg2r" role="button" tabindex="0"><div class="header-main svelte-d5hg2r"><div class="date-badge svelte-d5hg2r"><span class="day svelte-d5hg2r"> </span> <span class="month svelte-d5hg2r"> </span></div> <div class="session-info svelte-d5hg2r"><div class="session-text svelte-d5hg2r"><h3 class="location svelte-d5hg2r"> <!></h3> <!> <div class="session-meta svelte-d5hg2r"><span class="type-tag svelte-d5hg2r"> </span> <span class="stat svelte-d5hg2r"> </span> <!></div></div> <div class="load-summary svelte-d5hg2r"><div class="load-badge finger svelte-d5hg2r"> </div> <div class="load-badge shoulder svelte-d5hg2r"> </div> <div class="load-badge forearm svelte-d5hg2r"> </div></div></div></div> <div class="header-actions svelte-d5hg2r"><div class="header-status svelte-d5hg2r"><!></div> <button class="btn-icon delete-session svelte-d5hg2r" title="Delete Session">üóëÔ∏è</button> <span class="chevron svelte-d5hg2r"> </span></div></div> <!></div> <!>',1);function Qs(he,i){sa(i,!0);let w=F(!1),g=F(!1);function z(){n(w,!e(w))}function D(){n(g,!0)}function h(){Ia(i.session.id),n(g,!1),i.onDelete()}function T(C){const se=[...i.session.climbs];se.splice(C,1),Wa(i.session.id,{climbs:se}),i.onDelete()}let b=fa(()=>i.session.climbs?.length??0),L=fa(()=>(i.session.climbs||[]).reduce((C,se)=>{const Le=parseInt(se.grade.replace(/\D/g,""))||0,ee=parseInt(C.replace(/\D/g,""))||0;return Le>ee?se.grade:C},"V0/4a"));var B=Ys(),V=Ae(B);let ne;var M=t(V);M.__click=z,M.__keydown=C=>C.key==="Enter"&&z();var J=t(M),R=t(J),Q=t(R),X=t(Q,!0);a(Q);var ae=s(Q,2),$=t(ae,!0);a(ae),a(R);var Y=s(R,2),te=t(Y),ce=t(te),Z=t(ce),ue=s(Z);{var y=C=>{var se=ba();m(()=>o(se,`- ${i.session.crag??""}`)),r(C,se)};_(ue,C=>{i.session.crag&&C(y)})}a(ce);var x=s(ce,2);{var G=C=>{var se=Cs(),Le=t(se);a(se),m(()=>o(Le,`üìç ${i.session.sector??""}`)),r(C,se)};_(x,C=>{i.session.sector&&C(G)})}var P=s(x,2),W=t(P),re=t(W,!0);a(W);var _e=s(W,2),c=t(_e);a(_e);var p=s(_e,2);{var f=C=>{var se=zs(),Le=t(se);a(se),m(()=>o(Le,`Max: ${e(L)??""}`)),r(C,se)};_(p,C=>{e(b)>0&&C(f)})}a(P),a(te);var v=s(te,2),d=t(v),k=t(d,!0);a(d);var A=s(d,2),le=t(A,!0);a(A);var ge=s(A,2),Ee=t(ge,!0);a(ge),a(v),a(Y),a(J);var pe=s(J,2),E=t(pe),U=t(E);{var H=C=>{var se=Fs();r(C,se)},xe=C=>{var se=We(),Le=Ae(se);{var ee=ie=>{var ve=Ls();r(ie,ve)};_(Le,ie=>{i.session.syncStatus==="error"&&ie(ee)},!0)}r(C,se)};_(U,C=>{i.session.syncStatus==="pending"?C(H):C(xe,!1)})}a(E);var ze=s(E,2);ze.__click=C=>{C.stopPropagation(),D()};var Fe=s(ze,2),q=t(Fe,!0);a(Fe),a(pe),a(M);var O=s(M,2);{var de=C=>{var se=Xs(),Le=t(se),ee=t(Le),ie=s(t(ee),2),ve=t(ie);{var be=u=>{var S=We(),j=Ae(S);ke(j,17,()=>i.session.trainingTypes,Ge,(oe,K)=>{var fe=Gs(),Ce=t(fe,!0);a(fe),m(()=>o(Ce,e(K))),r(oe,fe)}),r(u,S)},me=u=>{var S=Es();r(u,S)};_(ve,u=>{i.session.trainingTypes&&i.session.trainingTypes.length>0&&!i.session.trainingTypes.includes("None")?u(be):u(me,!1)})}a(ie),a(ee);var we=s(ee,2);{var De=u=>{var S=js(),j=s(t(S),2),oe=t(j,!0);a(j),a(S),m(()=>o(oe,i.session.difficulty)),r(u,S)};_(we,u=>{i.session.difficulty&&u(De)})}var Se=s(we,2);{var ye=u=>{var S=Ns(),j=s(t(S),2),oe=t(j);{var K=Ce=>{var Me=We(),da=Ae(Me);ke(da,17,()=>i.session.categories,Ge,(Re,ca)=>{var pa=As(),Oa=t(pa,!0);a(pa),m(()=>o(Oa,e(ca))),r(Re,pa)}),r(Ce,Me)},fe=Ce=>{var Me=Os();r(Ce,Me)};_(oe,Ce=>{i.session.categories.length>0&&!i.session.categories.includes("None")?Ce(K):Ce(fe,!1)})}a(j),a(S),r(u,S)};_(Se,u=>{i.session.categories?.length&&u(ye)})}var qe=s(Se,2);{var Pe=u=>{var S=Rs(),j=s(t(S),2),oe=t(j);{var K=Ce=>{var Me=We(),da=Ae(Me);ke(da,17,()=>i.session.techniqueFocuses,Ge,(Re,ca)=>{var pa=Is(),Oa=t(pa,!0);a(pa),m(()=>o(Oa,e(ca))),r(Re,pa)}),r(Ce,Me)},fe=Ce=>{var Me=Ms();r(Ce,Me)};_(oe,Ce=>{i.session.techniqueFocuses.length>0&&!i.session.techniqueFocuses.includes("None")?Ce(K):Ce(fe,!1)})}a(j),a(S),r(u,S)};_(qe,u=>{i.session.techniqueFocuses?.length&&u(Pe)})}var Ve=s(qe,2);{var Oe=u=>{var S=Vs(),j=s(t(S),2),oe=t(j);{var K=Ce=>{var Me=We(),da=Ae(Me);ke(da,17,()=>i.session.energySystems,Ge,(Re,ca)=>{var pa=Ps(),Oa=t(pa,!0);a(pa),m(()=>o(Oa,e(ca))),r(Re,pa)}),r(Ce,Me)},fe=Ce=>{var Me=Bs();r(Ce,Me)};_(oe,Ce=>{i.session.energySystems.length>0&&!i.session.energySystems.includes("None")?Ce(K):Ce(fe,!1)})}a(j),a(S),r(u,S)};_(Ve,u=>{i.session.energySystems?.length&&u(Oe)})}a(Le);var Je=s(Le,2),Ne=t(Je),Ie=s(t(Ne),2),ua=t(Ie);a(Ie);var Be=s(Ie,2),la=t(Be);a(Be),a(Ne);var je=s(Ne,2),Ue=s(t(je),2),Da=t(Ue);a(Ue);var ta=s(Ue,2),Ye=t(ta);a(ta),a(je);var va=s(je,2),ga=s(t(va),2),na=t(ga);a(ga);var oa=s(ga,2),Sa=t(oa);a(oa),a(va);var Qe=s(va,2);{var Ca=u=>{var S=Ws(),j=s(t(S),2),oe=t(j);a(j);var K=s(j,2),fe=t(K);a(K),a(S),m(()=>{Ze(oe,`width: ${i.session.openGrip/5*100}%`),o(fe,`${i.session.openGrip??""}/5`)}),r(u,S)};_(Qe,u=>{i.session.openGrip&&u(Ca)})}var ma=s(Qe,2);{var ka=u=>{var S=Us(),j=s(t(S),2),oe=t(j);a(j);var K=s(j,2),fe=t(K);a(K),a(S),m(()=>{Ze(oe,`width: ${i.session.crimpGrip/5*100}%`),o(fe,`${i.session.crimpGrip??""}/5`)}),r(u,S)};_(ma,u=>{i.session.crimpGrip&&u(ka)})}var ha=s(ma,2);{var ja=u=>{var S=Hs(),j=s(t(S),2),oe=t(j);a(j);var K=s(j,2),fe=t(K);a(K),a(S),m(()=>{Ze(oe,`width: ${i.session.pinchGrip/5*100}%`),o(fe,`${i.session.pinchGrip??""}/5`)}),r(u,S)};_(ha,u=>{i.session.pinchGrip&&u(ja)})}var za=s(ha,2);{var Aa=u=>{var S=Js(),j=s(t(S),2),oe=t(j);a(j);var K=s(j,2),fe=t(K);a(K),a(S),m(()=>{Ze(oe,`width: ${i.session.sloperGrip/5*100}%`),o(fe,`${i.session.sloperGrip??""}/5`)}),r(u,S)};_(za,u=>{i.session.sloperGrip&&u(Aa)})}var Ta=s(za,2);{var ya=u=>{var S=Zs(),j=s(t(S),2),oe=t(j);a(j);var K=s(j,2),fe=t(K);a(K),a(S),m(()=>{Ze(oe,`width: ${i.session.jugGrip/5*100}%`),o(fe,`${i.session.jugGrip??""}/5`)}),r(u,S)};_(Ta,u=>{i.session.jugGrip&&u(ya)})}a(Je);var xa=s(Je,2),Fa=s(t(xa),2),La=t(Fa);ke(La,17,()=>i.session.climbs||[],Ge,(u,S,j)=>{{let oe=fa(()=>i.session.climbingType==="Mixed");qs(u,{get climb(){return e(S)},onDelete:()=>T(j),get showClimbType(){return e(oe)}})}});var I=s(La,2);{var N=u=>{var S=Ks();r(u,S)};_(I,u=>{(i.session.climbs||[]).length===0&&u(N)})}a(Fa),a(xa),a(se),m(()=>{Ze(ua,`width: ${i.session.fingerLoad/5*100}%`),o(la,`${i.session.fingerLoad??""}/5`),Ze(Da,`width: ${i.session.shoulderLoad/5*100}%`),o(Ye,`${i.session.shoulderLoad??""}/5`),Ze(na,`width: ${i.session.forearmLoad/5*100}%`),o(Sa,`${i.session.forearmLoad??""}/5`)}),Xe(3,se,()=>ra,()=>({duration:150})),r(C,se)};_(O,C=>{e(w)&&C(de)})}a(V);var Te=s(V,2);Ea(Te,{get isOpen(){return e(g)},title:"Delete Session",message:"Are you sure you want to delete this session and all its climbs? This cannot be undone.",onConfirm:h,onCancel:()=>n(g,!1)}),m((C,se)=>{ne=Ke(V,1,"session-card svelte-d5hg2r",null,ne,{expanded:e(w)}),He(M,"aria-expanded",e(w)),o(X,C),o($,se),o(Z,`${i.session.area??""} `),o(re,i.session.climbingType),o(c,`${e(b)??""} climbs`),He(d,"title",`Finger Load: ${i.session.fingerLoad??""}`),o(k,i.session.fingerLoad),He(A,"title",`Shoulder Load: ${i.session.shoulderLoad??""}`),o(le,i.session.shoulderLoad),He(ge,"title",`Forearm Load: ${i.session.forearmLoad??""}`),o(Ee,i.session.forearmLoad),o(q,e(w)?"‚ñ≤":"‚ñº")},[()=>new Date(i.session.date).getDate(),()=>new Date(i.session.date).toLocaleDateString(void 0,{month:"short"})]),r(he,B),ia()}aa(["click","keydown"]);var $s=l('<span class="spinner svelte-1s7jdlh"></span> Fetching...',1),ei=l('<div class="error-banner svelte-1s7jdlh"> </div>'),ai=l('<small class="svelte-1s7jdlh">Try adjusting your filters.</small>'),ti=l('<div class="empty-state svelte-1s7jdlh"><p class="svelte-1s7jdlh">No outdoor climbing sessions found.</p> <!></div>'),si=l('<div class="load-more-container svelte-1s7jdlh"><button class="load-more-btn svelte-1s7jdlh"> </button></div>'),ii=l('<div class="view-container svelte-1s7jdlh"><div class="view-header svelte-1s7jdlh"><h2 class="view-title svelte-1s7jdlh">‚õ∞Ô∏è Outdoor Climbing History</h2> <div class="header-actions svelte-1s7jdlh"><button class="action-btn secondary svelte-1s7jdlh" title="Export filtered data to CSV">üì• Export</button> <button class="action-btn svelte-1s7jdlh" title="Fetch data from cloud"><!></button></div></div> <!> <!> <div class="info-bar svelte-1s7jdlh"><div class="legend-wrapper svelte-1s7jdlh"><!></div> <div class="load-key svelte-1s7jdlh"><span class="key-label svelte-1s7jdlh">Load:</span> <div class="key-item svelte-1s7jdlh"><span class="dot finger svelte-1s7jdlh"></span> Finger</div> <div class="key-item svelte-1s7jdlh"><span class="dot shoulder svelte-1s7jdlh"></span> Shoulder</div> <div class="key-item svelte-1s7jdlh"><span class="dot forearm svelte-1s7jdlh"></span> Forearm</div></div></div> <div class="sessions-list"><!> <!> <!></div></div>');function ri(he,i){sa(i,!0);let w=F(_a([])),g=F(_a([])),z=F(!1),D=F(""),h=F(_a({startDate:"",endDate:"",area:"",crag:"",climbingType:"",sessionType:"",grade:""})),T=F(20);const b=20;Ba(()=>{L()});function L(){const v=Ga("outdoor_climb");n(w,v.sort((d,k)=>new Date(k.date).getTime()-new Date(d.date).getTime()),!0),M()}async function B(){n(z,!0),n(D,"");try{await Na();const v=await Ya();v.ok&&v.data?V(v.data):n(D,v.error||"Failed to fetch data",!0)}catch(v){n(D,v instanceof Error?v.message:"Unknown error",!0)}finally{n(z,!1)}}function V(v){const d=v.map(A=>({...A,activityType:"outdoor_climb",createdAt:new Date().toISOString(),updatedAt:new Date().toISOString(),syncStatus:"synced",syncedAt:new Date().toISOString(),openGrip:0,crimpGrip:0,pinchGrip:0,sloperGrip:0,jugGrip:0}));Ma(d);const k=Ga("outdoor_climb");n(w,k.sort((A,le)=>new Date(le.date).getTime()-new Date(A.date).getTime()),!0),M()}function ne(v){n(h,v,!0),M()}function M(){n(T,b),n(g,e(w).filter(v=>{if(e(h).startDate&&v.date<e(h).startDate||e(h).endDate&&v.date>e(h).endDate||e(h).area&&!v.area.toLowerCase().includes(e(h).area.toLowerCase())||e(h).crag&&!v.crag.toLowerCase().includes(e(h).crag.toLowerCase()))return!1;if(e(h).climbingType&&(v.climbingType==="Leading"?"Sport":v.climbingType)!==e(h).climbingType)if(v.climbingType==="Mixed")if(e(h).climbingType==="Bouldering"){if(!v.climbs.some(k=>!k.isSport))return!1}else if(e(h).climbingType==="Sport"||e(h).climbingType==="Trad"){if(!v.climbs.some(k=>k.isSport))return!1}else return!1;else return!1;if(e(h).sessionType&&!v.trainingTypes?.includes(e(h).sessionType))return!1;if(e(h).grade){const d=e(h).grade.trim().toLowerCase();if(!v.climbs.some(A=>A.grade.trim().toLowerCase()===d))return!1}return!0}),!0)}function J(){n(T,e(T)+b)}var R=ii(),Q=t(R),X=s(t(Q),2),ae=t(X);ae.__click=()=>Va(e(g),"outdoor_climbs");var $=s(ae,2);$.__click=B;var Y=t($);{var te=v=>{var d=$s();qa(),r(v,d)},ce=v=>{var d=ba("‚òÅÔ∏è Fetch Data");r(v,d)};_(Y,v=>{e(z)?v(te):v(ce,!1)})}a($),a(X),a(Q);var Z=s(Q,2);{var ue=v=>{var d=ei(),k=t(d,!0);a(d),m(()=>o(k,e(D))),Xe(3,d,()=>ra),r(v,d)};_(Z,v=>{e(D)&&v(ue)})}var y=s(Z,2);bs(y,{onFilterParamsChange:ne});var x=s(y,2),G=t(x),P=t(G);Ha(P),a(G),qa(2),a(x);var W=s(x,2),re=t(W);ke(re,17,()=>e(g).slice(0,e(T)),v=>v.id,(v,d)=>{Qs(v,{get session(){return e(d)},onDelete:L})});var _e=s(re,2);{var c=v=>{var d=ti(),k=s(t(d),2);{var A=le=>{var ge=ai();r(le,ge)};_(k,le=>{e(w).length>0&&le(A)})}a(d),r(v,d)};_(_e,v=>{e(g).length===0&&v(c)})}var p=s(_e,2);{var f=v=>{var d=si(),k=t(d);k.__click=J;var A=t(k);a(k),a(d),m(()=>o(A,`Load More (${e(g).length-e(T)} remaining)`)),r(v,d)};_(p,v=>{e(T)<e(g).length&&v(f)})}a(W),a(R),m(()=>$.disabled=e(z)),r(he,R),ia()}aa(["click"]);var li=l('<span class="chevron svelte-11rkzid">‚ñ≤</span>'),vi=l('<span class="chevron svelte-11rkzid">‚ñº</span>'),ni=l('<div class="filter-body svelte-11rkzid"><div class="filter-grid svelte-11rkzid"><div class="filter-item svelte-11rkzid"><label for="start-date" class="svelte-11rkzid">Start Date</label> <input type="date" id="start-date" class="svelte-11rkzid"/></div> <div class="filter-item svelte-11rkzid"><label for="end-date" class="svelte-11rkzid">End Date</label> <input type="date" id="end-date" class="svelte-11rkzid"/></div> <div class="filter-item svelte-11rkzid"><label for="name-filter" class="svelte-11rkzid">Session Name</label> <input type="text" id="name-filter" placeholder="e.g. Leg Day" class="svelte-11rkzid"/></div></div> <div class="filter-actions svelte-11rkzid"><button class="reset-btn svelte-11rkzid">Reset Filters</button></div></div>'),oi=l('<div class="filter-container svelte-11rkzid"><button class="filter-header svelte-11rkzid"><div class="header-content svelte-11rkzid"><span class="icon svelte-11rkzid">üîç</span> <span class="title svelte-11rkzid">Filters</span> <!></div></button> <!></div>');function di(he,i){sa(i,!0);let w=F(!1),g=F(""),z=F(""),D=F("");function h(){n(w,!e(w))}function T(){n(g,""),n(z,""),n(D,""),b()}function b(){i.onFilterParamsChange({startDate:e(g),endDate:e(z),name:e(D)})}var L=oi(),B=t(L);B.__click=h;var V=t(B),ne=s(t(V),4);{var M=X=>{var ae=li();r(X,ae)},J=X=>{var ae=vi();r(X,ae)};_(ne,X=>{e(w)?X(M):X(J,!1)})}a(V),a(B);var R=s(B,2);{var Q=X=>{var ae=ni(),$=t(ae),Y=t($),te=s(t(Y),2);$e(te),te.__change=b,a(Y);var ce=s(Y,2),Z=s(t(ce),2);$e(Z),Z.__change=b,a(ce);var ue=s(ce,2),y=s(t(ue),2);$e(y),y.__input=b,a(ue),a($);var x=s($,2),G=t(x);G.__click=T,a(x),a(ae),ea(te,()=>e(g),P=>n(g,P)),ea(Z,()=>e(z),P=>n(z,P)),ea(y,()=>e(D),P=>n(D,P)),Xe(3,ae,()=>ra,()=>({duration:200})),r(X,ae)};_(R,X=>{e(w)&&X(Q)})}a(L),m(()=>He(B,"aria-expanded",e(w))),r(he,L),ia()}aa(["click","change","input"]);var ci=l('<span class="status-icon pending svelte-cirrfc" title="Waiting to sync">üîÑ</span>'),_i=l('<span class="status-icon error svelte-cirrfc" title="Sync error">‚ö†Ô∏è</span>'),ui=l('<div class="bw-info svelte-cirrfc"><span class="label svelte-cirrfc">Bodyweight:</span> </div>'),fi=l('<span class="muscle-tag svelte-cirrfc"> </span>'),gi=l('<span class="muscle-tag svelte-cirrfc"> </span>'),pi=l('<div class="muscle-tags svelte-cirrfc"><!> <!></div>'),mi=l('<span class="tag w svelte-cirrfc">W</span>'),hi=l('<span class="tag f svelte-cirrfc">F</span>'),bi=l('<span class="tag d svelte-cirrfc">D</span>'),yi=l('<div><span class="set-num svelte-cirrfc"></span> <!> <!> <!> <span class="val svelte-cirrfc"><span class="weight"> </span> <span class="x svelte-cirrfc">x</span> <span class="reps"> </span></span></div>'),xi=l('<div class="exercise-item svelte-cirrfc"><div class="exercise-header svelte-cirrfc"><h4 class="svelte-cirrfc"> </h4> <!></div> <div class="sets-grid svelte-cirrfc"></div></div>'),wi=l('<div class="card-body svelte-cirrfc"><!> <div class="exercises-list svelte-cirrfc"></div></div>'),Di=l('<div><div class="card-header svelte-cirrfc" role="button" tabindex="0"><div class="header-main svelte-cirrfc"><div class="date-badge svelte-cirrfc"><span class="day svelte-cirrfc"> </span> <span class="month svelte-cirrfc"> </span></div> <div class="session-info svelte-cirrfc"><div class="session-text"><h3 class="name svelte-cirrfc"> </h3> <div class="session-meta svelte-cirrfc"><span class="stat svelte-cirrfc"> </span> <span class="stat svelte-cirrfc"> </span> <span class="stat svelte-cirrfc"> </span></div></div></div></div> <div class="header-actions svelte-cirrfc"><div class="header-status"><!></div> <button class="btn-icon delete-session svelte-cirrfc" title="Delete Session">üóëÔ∏è</button> <span class="chevron svelte-cirrfc"> </span></div></div> <!></div> <!>',1);function Si(he,i){sa(i,!0);let w=F(!1),g=F(!1);function z(){n(w,!e(w))}function D(){n(g,!0)}function h(){Ia(i.session.id),n(g,!1),i.onDelete()}function T(E){return Qa.find(U=>U.name===E)}let b=fa(()=>i.session.exercises?.length??0),L=fa(()=>(i.session.exercises||[]).reduce((E,U)=>E+(U.sets?.length||0),0)),B=fa(()=>(i.session.exercises||[]).reduce((E,U)=>E+(U.sets||[]).reduce((H,xe)=>H+(xe.weight||0)*(xe.reps||0),0),0));var V=Di(),ne=Ae(V);let M;var J=t(ne);J.__click=z,J.__keydown=E=>E.key==="Enter"&&z();var R=t(J),Q=t(R),X=t(Q),ae=t(X,!0);a(X);var $=s(X,2),Y=t($,!0);a($),a(Q);var te=s(Q,2),ce=t(te),Z=t(ce),ue=t(Z,!0);a(Z);var y=s(Z,2),x=t(y),G=t(x);a(x);var P=s(x,2),W=t(P);a(P);var re=s(P,2),_e=t(re);a(re),a(y),a(ce),a(te),a(R);var c=s(R,2),p=t(c),f=t(p);{var v=E=>{var U=ci();r(E,U)},d=E=>{var U=We(),H=Ae(U);{var xe=ze=>{var Fe=_i();r(ze,Fe)};_(H,ze=>{i.session.syncStatus==="error"&&ze(xe)},!0)}r(E,U)};_(f,E=>{i.session.syncStatus==="pending"?E(v):E(d,!1)})}a(p);var k=s(p,2);k.__click=E=>{E.stopPropagation(),D()};var A=s(k,2),le=t(A,!0);a(A),a(c),a(J);var ge=s(J,2);{var Ee=E=>{var U=wi(),H=t(U);{var xe=Fe=>{var q=ui(),O=s(t(q));a(q),m(()=>o(O,` ${i.session.bodyweight??""}kg`)),r(Fe,q)};_(H,Fe=>{i.session.bodyweight&&Fe(xe)})}var ze=s(H,2);ke(ze,21,()=>i.session.exercises,Ge,(Fe,q)=>{const O=fa(()=>T(e(q).name));var de=xi(),Te=t(de),C=t(Te),se=t(C,!0);a(C);var Le=s(C,2);{var ee=ve=>{var be=pi(),me=t(be);ke(me,17,()=>e(O).targetMuscles.slice(0,3),Ge,(Se,ye)=>{var qe=fi(),Pe=t(qe,!0);a(qe),m(()=>o(Pe,e(ye))),r(Se,qe)});var we=s(me,2);{var De=Se=>{var ye=gi(),qe=t(ye);a(ye),m(()=>o(qe,`+${e(O).targetMuscles.length-3}`)),r(Se,ye)};_(we,Se=>{e(O).targetMuscles.length>3&&Se(De)})}a(be),r(ve,be)};_(Le,ve=>{e(O)&&ve(ee)})}a(Te);var ie=s(Te,2);ke(ie,21,()=>e(q).sets,Ge,(ve,be,me)=>{var we=yi();let De;var Se=t(we);Se.textContent=me+1;var ye=s(Se,2);{var qe=je=>{var Ue=mi();r(je,Ue)};_(ye,je=>{e(be).isWarmup&&je(qe)})}var Pe=s(ye,2);{var Ve=je=>{var Ue=hi();r(je,Ue)};_(Pe,je=>{e(be).isFailure&&je(Ve)})}var Oe=s(Pe,2);{var Je=je=>{var Ue=bi();r(je,Ue)};_(Oe,je=>{e(be).isDropSet&&je(Je)})}var Ne=s(Oe,2),Ie=t(Ne),ua=t(Ie);a(Ie);var Be=s(Ie,4),la=t(Be,!0);a(Be),a(Ne),a(we),m(()=>{De=Ke(we,1,"set-pill svelte-cirrfc",null,De,{completed:e(be).completed,warmup:e(be).isWarmup}),o(ua,`${e(be).weight??""}kg`),o(la,e(be).reps)}),r(ve,we)}),a(ie),a(de),m(()=>o(se,e(q).name)),r(Fe,de)}),a(ze),a(U),Xe(3,U,()=>ra,()=>({duration:150})),r(E,U)};_(ge,E=>{e(w)&&E(Ee)})}a(ne);var pe=s(ne,2);Ea(pe,{get isOpen(){return e(g)},title:"Delete Session",message:"Are you sure you want to delete this session? This cannot be undone.",onConfirm:h,onCancel:()=>n(g,!1)}),m((E,U,H)=>{M=Ke(ne,1,"session-card svelte-cirrfc",null,M,{expanded:e(w)}),He(J,"aria-expanded",e(w)),o(ae,E),o(Y,U),o(ue,i.session.name),o(G,`${e(b)??""} Exercises`),o(W,`${e(L)??""} Sets`),o(_e,`~${H??""}kg Vol`),o(le,e(w)?"‚ñ≤":"‚ñº")},[()=>new Date(i.session.date).getDate(),()=>new Date(i.session.date).toLocaleDateString("en-GB",{month:"short"}),()=>Math.round(e(B)).toLocaleString()]),r(he,V),ia()}aa(["click","keydown"]);var ki=l('<span class="spinner svelte-133enjd"></span> Fetching...',1),Ti=l('<div class="error-banner svelte-133enjd"> </div>'),qi=l('<small class="svelte-133enjd">Try adjusting your filters.</small>'),Ci=l('<div class="empty-state svelte-133enjd"><p class="svelte-133enjd">No gym sessions found.</p> <!></div>'),zi=l('<div class="load-more-container svelte-133enjd"><button class="load-more-btn svelte-133enjd"> </button></div>'),Fi=l('<div class="view-container svelte-133enjd"><div class="view-header svelte-133enjd"><h2 class="view-title svelte-133enjd">üèãÔ∏è Gym Session History</h2> <div class="header-actions svelte-133enjd"><button class="action-btn secondary svelte-133enjd" title="Export filtered data to CSV">üì• Export</button> <button class="action-btn svelte-133enjd" title="Fetch data from cloud"><!></button></div></div> <!> <!> <div class="sessions-list"><!> <!> <!></div></div>');function Li(he,i){sa(i,!0);let w=F(_a([])),g=F(_a([])),z=F(!1),D=F(""),h=F(_a({startDate:"",endDate:"",name:""})),T=F(20);const b=20;Ba(()=>{L()});function L(){const c=Ga("gym_session");n(w,c.sort((p,f)=>new Date(f.date).getTime()-new Date(p.date).getTime()),!0),M()}async function B(){n(z,!0),n(D,"");try{await Na();const c=await $a();c.ok&&c.data?V(c.data):n(D,c.error||"Failed to fetch data",!0)}catch(c){n(D,c instanceof Error?c.message:"Unknown error",!0)}finally{n(z,!1)}}function V(c){const p=c.map(v=>({...v,activityType:"gym_session",syncStatus:"synced",syncedAt:new Date().toISOString(),createdAt:v.createdAt||new Date().toISOString(),updatedAt:v.updatedAt||new Date().toISOString()}));Ma(p);const f=Ga("gym_session");n(w,f.sort((v,d)=>new Date(d.date).getTime()-new Date(v.date).getTime()),!0),M()}function ne(c){n(h,c,!0),M()}function M(){n(T,b),n(g,e(w).filter(c=>!(e(h).startDate&&c.date<e(h).startDate||e(h).endDate&&c.date>e(h).endDate||e(h).name&&!c.name.toLowerCase().includes(e(h).name.toLowerCase()))),!0)}function J(){n(T,e(T)+b)}var R=Fi(),Q=t(R),X=s(t(Q),2),ae=t(X);ae.__click=()=>Va(e(g),"gym_sessions");var $=s(ae,2);$.__click=B;var Y=t($);{var te=c=>{var p=ki();qa(),r(c,p)},ce=c=>{var p=ba("‚òÅÔ∏è Fetch Data");r(c,p)};_(Y,c=>{e(z)?c(te):c(ce,!1)})}a($),a(X),a(Q);var Z=s(Q,2);{var ue=c=>{var p=Ti(),f=t(p,!0);a(p),m(()=>o(f,e(D))),Xe(3,p,()=>ra),r(c,p)};_(Z,c=>{e(D)&&c(ue)})}var y=s(Z,2);di(y,{onFilterParamsChange:ne});var x=s(y,2),G=t(x);ke(G,17,()=>e(g).slice(0,e(T)),c=>c.id,(c,p)=>{Si(c,{get session(){return e(p)},onDelete:L})});var P=s(G,2);{var W=c=>{var p=Ci(),f=s(t(p),2);{var v=d=>{var k=qi();r(d,k)};_(f,d=>{e(w).length>0&&d(v)})}a(p),r(c,p)};_(P,c=>{e(g).length===0&&c(W)})}var re=s(P,2);{var _e=c=>{var p=zi(),f=t(p);f.__click=J;var v=t(f);a(f),a(p),m(()=>o(v,`Load More (${e(g).length-e(T)} remaining)`)),r(c,p)};_(re,c=>{e(T)<e(g).length&&c(_e)})}a(x),a(R),m(()=>$.disabled=e(z)),r(he,R),ia()}aa(["click"]);var Gi=l('<span class="spinner svelte-1szs0u9"></span> Fetching...',1),Ei=l('<div class="loading svelte-1szs0u9">Loading sessions...</div>'),ji=l('<div class="empty-state svelte-1szs0u9"><!></div>'),Ai=l('<span class="set-tag svelte-1szs0u9"> <span class="x svelte-1szs0u9">x</span> </span>'),Oi=l('<div class="ex-notes svelte-1szs0u9"> </div>'),Ni=l('<div class="exercise-item svelte-1szs0u9"><div class="ex-header svelte-1szs0u9"><span class="ex-name svelte-1szs0u9"> </span> <span class="ex-grip svelte-1szs0u9"> </span></div> <div class="ex-sets svelte-1szs0u9"></div> <!></div>'),Ii=l('<div class="card-body svelte-1szs0u9"><div class="exercises-list svelte-1szs0u9"></div></div>'),Mi=l('<div><div class="card-header svelte-1szs0u9" role="button" tabindex="0"><div class="header-main"><span class="session-date svelte-1szs0u9"> </span> <span class="meta svelte-1szs0u9"><!> </span></div> <div class="header-status svelte-1szs0u9"><span>‚óè</span> <button class="btn-icon delete-btn svelte-1szs0u9" title="Delete Session">üóëÔ∏è</button> <span class="chevron svelte-1szs0u9"> </span></div></div> <!></div>'),Ri=l('<div class="load-more-container svelte-1szs0u9"><button class="load-more-btn svelte-1szs0u9"> </button></div>'),Pi=l('<div class="timeline svelte-1szs0u9"><!> <!></div>'),Bi=l('<div class="view-content svelte-1szs0u9"><div class="header svelte-1szs0u9"><h3 class="svelte-1szs0u9">ü§è Fingerboarding Log</h3> <button class="fetch-btn svelte-1szs0u9" title="Fetch data from cloud"><!></button></div> <div class="filters svelte-1szs0u9"><div class="filter-group svelte-1szs0u9"><label for="start-date" class="svelte-1szs0u9">From</label> <input type="date" id="start-date" class="svelte-1szs0u9"/></div> <div class="filter-group svelte-1szs0u9"><label for="end-date" class="svelte-1szs0u9">To</label> <input type="date" id="end-date" class="svelte-1szs0u9"/></div></div> <!></div> <!>',1);function Vi(he,i){sa(i,!0);let w=F(_a([])),g=F(!0),z=F(""),D=F(""),h=F(_a(new Set)),T=F(20);const b=20;Ja(()=>{e(z),e(D),n(T,b)});let L=F(!1),B=F(null);function V(f){n(B,f,!0),n(L,!0)}function ne(){e(B)&&(Ia(e(B)),n(B,null),n(L,!1),n(w,Ra().sort((f,v)=>new Date(v.date).getTime()-new Date(f.date).getTime()),!0))}async function M(){n(g,!0),n(w,Ra().sort((f,v)=>new Date(v.date).getTime()-new Date(f.date).getTime()),!0);try{await Na();const f=await et();if(f.ok&&f.data){const v=f.data.map(d=>({...d,activityType:"fingerboarding",createdAt:d.createdAt||new Date().toISOString(),updatedAt:d.updatedAt||new Date().toISOString(),syncStatus:"synced"}));Ma(v),n(w,Ra().sort((d,k)=>new Date(k.date).getTime()-new Date(d.date).getTime()),!0)}}catch(f){console.error("Failed to sync",f)}finally{n(g,!1)}}M();let J=fa(()=>e(w).filter(f=>!(e(z)&&new Date(f.date)<new Date(e(z))||e(D)&&new Date(f.date)>new Date(e(D)))));function R(){n(T,e(T)+b)}function Q(f){e(h).has(f)?e(h).delete(f):e(h).add(f),n(h,new Set(e(h)),!0)}function X(f){return f.exercises.reduce((v,d)=>v+d.details.length,0)}var ae=Bi(),$=Ae(ae),Y=t($),te=s(t(Y),2);te.__click=M;var ce=t(te);{var Z=f=>{var v=Gi();qa(),r(f,v)},ue=f=>{var v=ba("‚òÅÔ∏è Fetch Data");r(f,v)};_(ce,f=>{e(g)?f(Z):f(ue,!1)})}a(te),a(Y);var y=s(Y,2),x=t(y),G=s(t(x),2);$e(G),a(x);var P=s(x,2),W=s(t(P),2);$e(W),a(P),a(y);var re=s(y,2);{var _e=f=>{var v=Ei();r(f,v)},c=f=>{var v=We(),d=Ae(v);{var k=le=>{var ge=ji(),Ee=t(ge);{var pe=U=>{var H=ba("No sessions match filter.");r(U,H)},E=U=>{var H=ba("No fingerboarding sessions logged yet.");r(U,H)};_(Ee,U=>{e(w).length>0?U(pe):U(E,!1)})}a(ge),r(le,ge)},A=le=>{var ge=Pi(),Ee=t(ge);ke(Ee,17,()=>e(J).slice(0,e(T)),Ge,(U,H)=>{var xe=Mi();let ze;var Fe=t(xe);Fe.__click=()=>Q(e(H).id),Fe.__keydown=ye=>ye.key==="Enter"&&Q(e(H).id);var q=t(Fe),O=t(q),de=t(O,!0);a(O);var Te=s(O,2),C=t(Te);{var se=ye=>{var qe=ba();m(()=>o(qe,`${e(H).location??""} ¬∑`)),r(ye,qe)};_(C,ye=>{e(H).location&&e(H).location!=="N/A"&&e(H).location!=="Home"&&ye(se)})}var Le=s(C);a(Te),a(q);var ee=s(q,2),ie=t(ee);let ve;var be=s(ie,2);be.__click=ye=>{ye.stopPropagation(),V(e(H).id)};var me=s(be,2),we=t(me,!0);a(me),a(ee),a(Fe);var De=s(Fe,2);{var Se=ye=>{var qe=Ii(),Pe=t(qe);ke(Pe,21,()=>e(H).exercises||[],Ge,(Ve,Oe)=>{var Je=Ni(),Ne=t(Je),Ie=t(Ne),ua=t(Ie,!0);a(Ie);var Be=s(Ie,2),la=t(Be,!0);a(Be),a(Ne);var je=s(Ne,2);ke(je,21,()=>e(Oe).details,Ge,(ta,Ye)=>{var va=Ai(),ga=t(va),na=s(ga,2);a(va),m(()=>{o(ga,`${e(Ye).weight>0?`+${e(Ye).weight}kg`:"BW"} `),o(na,` ${e(Ye).reps??""}s/reps`)}),r(ta,va)}),a(je);var Ue=s(je,2);{var Da=ta=>{var Ye=Oi(),va=t(Ye);a(Ye),m(()=>o(va,`"${e(Oe).notes??""}"`)),r(ta,Ye)};_(Ue,ta=>{e(Oe).notes&&ta(Da)})}a(Je),m(()=>{o(ua,e(Oe).name),o(la,e(Oe).gripType)}),r(Ve,Je)}),a(Pe),a(qe),Xe(3,qe,()=>ra,()=>({duration:150})),r(ye,qe)};_(De,ye=>{e(h).has(e(H).id)&&ye(Se)})}a(xe),m((ye,qe,Pe,Ve)=>{ze=Ke(xe,1,"session-card svelte-1szs0u9",null,ze,ye),o(de,qe),o(Le,` ${e(H).exercises.length??""} Exercises ¬∑ ${Pe??""} Sets`),ve=Ke(ie,1,"sync-dot svelte-1szs0u9",null,ve,{synced:e(H).syncStatus==="synced"}),He(ie,"title",e(H).syncStatus==="synced"?"Synced":"Local"),o(we,Ve)},[()=>({expanded:e(h).has(e(H).id)}),()=>new Date(e(H).date).toLocaleDateString(void 0,{weekday:"short",month:"short",day:"numeric"}),()=>X(e(H)),()=>e(h).has(e(H).id)?"‚ñ≤":"‚ñº"]),r(U,xe)});var pe=s(Ee,2);{var E=U=>{var H=Ri(),xe=t(H);xe.__click=R;var ze=t(xe);a(xe),a(H),m(()=>o(ze,`Load More (${e(J).length-e(T)} remaining)`)),r(U,H)};_(pe,U=>{e(T)<e(J).length&&U(E)})}a(ge),r(le,ge)};_(d,le=>{e(J).length===0?le(k):le(A,!1)},!0)}r(f,v)};_(re,f=>{e(g)&&e(w).length===0?f(_e):f(c,!1)})}a($);var p=s($,2);Ea(p,{get isOpen(){return e(L)},title:"Delete Fingerboard Session",message:"Are you sure you want to delete this session? This cannot be undone.",onConfirm:ne,onCancel:()=>n(L,!1)}),m(()=>te.disabled=e(g)),ea(G,()=>e(z),f=>n(z,f)),ea(W,()=>e(D),f=>n(D,f)),r(he,ae),ia()}aa(["click","keydown"]);var Wi=l('<span class="spinner svelte-xyvf5r"></span> Fetching...',1),Ui=l('<div class="loading svelte-xyvf5r">Loading sessions...</div>'),Hi=l('<div class="empty-state svelte-xyvf5r">No competitions logged yet.</div>'),Ji=l('<span class="round-pos svelte-xyvf5r"> </span>'),Zi=l('<span class="c-attempts svelte-xyvf5r"> </span>'),Ki=l('<div class="climb-notes svelte-xyvf5r"> </div>'),Xi=l('<div class="climb-row svelte-xyvf5r"><div class="climb-info svelte-xyvf5r"><span class="c-name svelte-xyvf5r"> </span> <!></div> <div class="climb-result"><span> </span></div></div> <!>',1),Yi=l('<div class="climbs-list"></div>'),Qi=l('<div class="round-item svelte-xyvf5r"><div class="round-header svelte-xyvf5r"><span class="round-name"> </span> <!></div> <!></div>'),$i=l('<div class="rounds-list svelte-xyvf5r"></div>'),er=l('<div class="load-meta svelte-xyvf5r"><span> </span></div>'),ar=l('<div class="card-body svelte-xyvf5r"><!> <!> <div class="session-footer svelte-xyvf5r"><span> </span></div></div>'),tr=l('<div><div class="card-header svelte-xyvf5r" role="button" tabindex="0"><div class="header-main svelte-xyvf5r"><div class="left-col svelte-xyvf5r"><span class="venue svelte-xyvf5r"> </span> <span class="date svelte-xyvf5r"> </span></div> <div class="right-col svelte-xyvf5r"><div class="badges svelte-xyvf5r"><span class="type-tag svelte-xyvf5r"> </span> <span class="result-tag svelte-xyvf5r"> </span></div></div></div> <div class="header-status svelte-xyvf5r"><span>‚óè</span> <button class="btn-icon delete-btn svelte-xyvf5r" title="Delete Session">üóëÔ∏è</button> <span class="chevron svelte-xyvf5r"> </span></div></div> <!></div>'),sr=l('<div class="load-more-container svelte-xyvf5r"><button class="load-more-btn svelte-xyvf5r"> </button></div>'),ir=l('<div class="timeline svelte-xyvf5r"><!> <!></div>'),rr=l('<div class="view-content svelte-xyvf5r"><div class="header svelte-xyvf5r"><h3 class="svelte-xyvf5r">üèÜ Competition Log</h3> <button class="fetch-btn svelte-xyvf5r" title="Fetch data from cloud"><!></button></div> <!> <!></div>');function lr(he,i){sa(i,!0);let w=F(_a([])),g=F(!0),z=F(_a(new Set)),D=F(20);const h=20;let T=F(!1),b=F(null);function L(y){n(b,y,!0),n(T,!0)}function B(){e(b)&&(Ia(e(b)),n(b,null),n(T,!1),n(w,Pa().sort((y,x)=>new Date(x.date).getTime()-new Date(y.date).getTime()),!0))}async function V(){n(g,!0),n(D,h),n(w,Pa().sort((y,x)=>new Date(x.date).getTime()-new Date(y.date).getTime()),!0);try{await Na();const y=await at();if(y.ok&&y.data){const x=y.data.map(G=>({...G,activityType:"competition",type:G.type,rounds:G.rounds.map(P=>({...P,climbs:P.climbs?.map(W=>({...W,status:W.status}))})),createdAt:G.createdAt||new Date().toISOString(),updatedAt:G.updatedAt||new Date().toISOString(),syncStatus:"synced"}));Ma(x),n(w,Pa().sort((G,P)=>new Date(P.date).getTime()-new Date(G.date).getTime()),!0)}}catch(y){console.error("Failed to sync",y)}finally{n(g,!1)}}V();function ne(y){e(z).has(y)?e(z).delete(y):e(z).add(y),n(z,new Set(e(z)),!0)}function M(){n(D,e(D)+h)}function J(y){if(!y.rounds||y.rounds.length===0)return"No rounds";const x=y.rounds[y.rounds.length-1];if(x.position)return`#${x.position} ${x.name}`;if(x.climbs){const G=x.climbs.filter(W=>W.status==="Top"||W.status==="Flash").length,P=x.climbs.filter(W=>W.status==="Zone").length;return`${y.rounds.length} Rnds ¬∑ Final: ${G}T ${P+G}Z`}return x.name}var R=rr(),Q=t(R),X=s(t(Q),2);X.__click=V;var ae=t(X);{var $=y=>{var x=Wi();qa(),r(y,x)},Y=y=>{var x=ba("‚òÅÔ∏è Fetch Data");r(y,x)};_(ae,y=>{e(g)?y($):y(Y,!1)})}a(X),a(Q);var te=s(Q,2);{var ce=y=>{var x=Ui();r(y,x)},Z=y=>{var x=We(),G=Ae(x);{var P=re=>{var _e=Hi();r(re,_e)},W=re=>{var _e=ir(),c=t(_e);ke(c,17,()=>e(w).slice(0,e(D)),Ge,(v,d)=>{var k=tr();let A;var le=t(k);le.__click=()=>ne(e(d).id),le.__keydown=me=>me.key==="Enter"&&ne(e(d).id);var ge=t(le),Ee=t(ge),pe=t(Ee),E=t(pe,!0);a(pe);var U=s(pe,2),H=t(U,!0);a(U),a(Ee);var xe=s(Ee,2),ze=t(xe),Fe=t(ze),q=t(Fe,!0);a(Fe);var O=s(Fe,2),de=t(O,!0);a(O),a(ze),a(xe),a(ge);var Te=s(ge,2),C=t(Te);let se;var Le=s(C,2);Le.__click=me=>{me.stopPropagation(),L(e(d).id)};var ee=s(Le,2),ie=t(ee,!0);a(ee),a(Te),a(le);var ve=s(le,2);{var be=me=>{var we=ar(),De=t(we);{var Se=Ne=>{var Ie=$i();ke(Ie,21,()=>e(d).rounds||[],Ge,(ua,Be)=>{var la=Qi(),je=t(la),Ue=t(je),Da=t(Ue,!0);a(Ue);var ta=s(Ue,2);{var Ye=na=>{var oa=Ji(),Sa=t(oa);a(oa),m(()=>o(Sa,`#${e(Be).position??""}`)),r(na,oa)};_(ta,na=>{e(Be).position&&na(Ye)})}a(je);var va=s(je,2);{var ga=na=>{var oa=Yi();ke(oa,21,()=>e(Be).climbs||[],Ge,(Sa,Qe)=>{var Ca=Xi(),ma=Ae(Ca),ka=t(ma),ha=t(ka),ja=t(ha,!0);a(ha);var za=s(ha,2);{var Aa=N=>{var u=Zi(),S=t(u);a(u),m(()=>o(S,`(${e(Qe).attemptCount??""} tries)`)),r(N,u)};_(za,N=>{e(Qe).attemptCount>1&&N(Aa)})}a(ka);var Ta=s(ka,2),ya=t(Ta);let xa;var Fa=t(ya,!0);a(ya),a(Ta),a(ma);var La=s(ma,2);{var I=N=>{var u=Ki(),S=t(u);a(u),m(()=>o(S,`"${e(Qe).notes??""}"`)),r(N,u)};_(La,N=>{e(Qe).notes&&N(I)})}m(()=>{o(ja,e(Qe).name),xa=Ke(ya,1,"status-badge svelte-xyvf5r",null,xa,{top:e(Qe).status==="Top"||e(Qe).status==="Flash",zone:e(Qe).status==="Zone"}),o(Fa,e(Qe).status)}),r(Sa,Ca)}),a(oa),r(na,oa)};_(va,na=>{e(Be).climbs&&na(ga)})}a(la),m(()=>o(Da,e(Be).name)),r(ua,la)}),a(Ie),r(Ne,Ie)};_(De,Ne=>{e(d).rounds&&Ne(Se)})}var ye=s(De,2);{var qe=Ne=>{var Ie=er(),ua=t(Ie),Be=t(ua);a(ua),a(Ie),m(()=>o(Be,`Detailed Load: Fingers ${e(d).fingerLoad??""}/5, Shoulders ${e(d).shoulderLoad??""}/5, Forearms ${e(d).forearmLoad??""}/5`)),r(Ne,Ie)};_(ye,Ne=>{(e(d).fingerLoad||e(d).shoulderLoad)&&Ne(qe)})}var Pe=s(ye,2),Ve=t(Pe);let Oe;var Je=t(Ve,!0);a(Ve),a(Pe),a(we),m(()=>{Oe=Ke(Ve,1,"sync-status svelte-xyvf5r",null,Oe,{synced:e(d).syncStatus==="synced"}),o(Je,e(d).syncStatus==="synced"?"‚úì Synced":"‚òÅ Local")}),Xe(3,we,()=>ra,()=>({duration:150})),r(me,we)};_(ve,me=>{e(z).has(e(d).id)&&me(be)})}a(k),m((me,we,De,Se)=>{A=Ke(k,1,"session-card svelte-xyvf5r",null,A,me),o(E,e(d).customVenue||e(d).venue),o(H,we),o(q,e(d).type),o(de,De),se=Ke(C,1,"sync-dot",null,se,{synced:e(d).syncStatus==="synced"}),He(C,"title",e(d).syncStatus==="synced"?"Synced":"Local"),o(ie,Se)},[()=>({expanded:e(z).has(e(d).id)}),()=>new Date(e(d).date).toLocaleDateString(void 0,{weekday:"short",day:"numeric",month:"short"}),()=>J(e(d)),()=>e(z).has(e(d).id)?"‚ñ≤":"‚ñº"]),r(v,k)});var p=s(c,2);{var f=v=>{var d=sr(),k=t(d);k.__click=M;var A=t(k);a(k),a(d),m(()=>o(A,`Load More (${e(w).length-e(D)} remaining)`)),r(v,d)};_(p,v=>{e(D)<e(w).length&&v(f)})}a(_e),r(re,_e)};_(G,re=>{e(w).length===0?re(P):re(W,!1)},!0)}r(y,x)};_(te,y=>{e(g)&&e(w).length===0?y(ce):y(Z,!1)})}var ue=s(te,2);Ea(ue,{get isOpen(){return e(T)},title:"Delete Competition",message:"Are you sure you want to delete this competition session? This action cannot be undone.",onConfirm:B,onCancel:()=>n(T,!1)}),a(R),m(()=>X.disabled=e(g)),r(he,R),ia()}aa(["click","keydown"]);var vr=l('<button class="backdrop svelte-108px9u" aria-label="Close settings"></button> <div class="settings-modal svelte-108px9u" role="dialog" aria-modal="true"><div class="settings-header svelte-108px9u"><h3 class="svelte-108px9u">Settings</h3> <button class="close-btn svelte-108px9u">‚úï</button></div> <div class="settings-content"><div class="setting-item svelte-108px9u"><div class="setting-info svelte-108px9u"><span class="setting-label svelte-108px9u">Local Data</span> <span class="setting-desc svelte-108px9u">Clear all cached data on this device</span></div> <button class="btn-clear-cache svelte-108px9u">Clear Cache</button></div></div></div>',1),nr=l("<option> </option>"),or=l('<div class="view-container svelte-108px9u"><!></div>'),dr=l('<div class="page svelte-108px9u"><div class="page-header svelte-108px9u"><div><h1 class="svelte-108px9u">üìä View Data</h1> <p class="subtitle svelte-108px9u">Browse your training history</p></div> <button class="settings-btn svelte-108px9u" aria-label="Settings">‚öôÔ∏è</button></div> <!> <!> <div class="content-card svelte-108px9u"><div class="form-group svelte-108px9u"><label for="activity-type" class="svelte-108px9u">Activity Type</label> <select id="activity-type" class="svelte-108px9u"><option disabled>Select an activity...</option><!></select></div> <!></div></div>');function xr(he,i){sa(i,!0);const w=[{value:"indoor_climb",label:"Indoor Climb",icon:"üßó"},{value:"outdoor_climb",label:"Outdoor Climb",icon:"‚õ∞Ô∏è"},{value:"gym_session",label:"Gym Session",icon:"üèãÔ∏è"},{value:"fingerboarding",label:"Fingerboarding",icon:"ü§è"},{value:"competition",label:"Competition",icon:"üèÜ"}];let g=F(""),z=F(!1),D=F(!1);function h(){n(z,!0)}function T(){n(z,!1)}function b(){n(z,!1),n(D,!0)}function L(){it()}var B=dr(),V=t(B),ne=s(t(V),2);ne.__click=h,a(V);var M=s(V,2);{var J=Z=>{var ue=vr(),y=Ae(ue);y.__click=T;var x=s(y,2),G=t(x),P=s(t(G),2);P.__click=T,a(G);var W=s(G,2),re=t(W),_e=s(t(re),2);_e.__click=b,a(re),a(W),a(x),Xe(3,y,()=>tt,()=>({duration:200})),Xe(3,x,()=>st,()=>({duration:200,start:.9})),r(Z,ue)};_(M,Z=>{e(z)&&Z(J)})}var R=s(M,2);Ea(R,{get isOpen(){return e(D)},title:"Clear all local data?",message:"Are you sure you want to clear all locally cached data? This will remove all sessions stored on this device. Data already synced to the cloud will be preserved.",confirmKeyword:"clear",onConfirm:L,onCancel:()=>n(D,!1)});var Q=s(R,2),X=t(Q),ae=s(t(X),2),$=t(ae);$.value=$.__value="";var Y=s($);ke(Y,17,()=>w,Z=>Z.value,(Z,ue)=>{var y=nr(),x=t(y);a(y);var G={};m(()=>{o(x,`${e(ue).icon??""} ${e(ue).label??""}`),G!==(G=e(ue).value)&&(y.value=(y.__value=e(ue).value)??"")}),r(Z,y)}),a(ae),a(X);var te=s(X,2);{var ce=Z=>{var ue=or(),y=t(ue);{var x=P=>{rs(P,{})},G=P=>{var W=We(),re=Ae(W);{var _e=p=>{ri(p,{})},c=p=>{var f=We(),v=Ae(f);{var d=A=>{Li(A,{})},k=A=>{var le=We(),ge=Ae(le);{var Ee=E=>{Vi(E,{})},pe=E=>{var U=We(),H=Ae(U);{var xe=ze=>{lr(ze,{})};_(H,ze=>{e(g)==="competition"&&ze(xe)},!0)}r(E,U)};_(ge,E=>{e(g)==="fingerboarding"?E(Ee):E(pe,!1)},!0)}r(A,le)};_(v,A=>{e(g)==="gym_session"?A(d):A(k,!1)},!0)}r(p,f)};_(re,p=>{e(g)==="outdoor_climb"?p(_e):p(c,!1)},!0)}r(P,W)};_(y,P=>{e(g)==="indoor_climb"?P(x):P(G,!1)})}a(ue),r(Z,ue)};_(te,Z=>{e(g)&&Z(ce)})}a(Q),a(B),wa(ae,()=>e(g),Z=>n(g,Z)),r(he,B),ia()}aa(["click"]);export{xr as component};
