import{f as v,a as i,c as He,t as Ot}from"../chunks/C7ZOrG79.js";import{p as gt,c as a,s,i as e,aV as y,r as t,t as g,a as mt,x as l,b0 as ta,f as Pe,aG as jt,aW as lt,w as nt,o as oa,b8 as ca,d as ba}from"../chunks/DeIY3UD2.js";import{d as _t,s as o}from"../chunks/BL09rjKV.js";import{i as p}from"../chunks/C7-VmZUr.js";import{s as rt,r as Ve,e as Fe,i as Ae,b as Ie,c as pa,d as ha}from"../chunks/B2YICR1D.js";import{t as Ye,l as ot,D as aa,i as $t,u as _a,k as sa,m as ya,g as xa,b as wa,n as ua,o as Sa,E as ka,p as Da,q as Ta,r as qa,v as za,f as fa,s as ga}from"../chunks/C2p8zr_t.js";import{c as St,n as ra,f as ct,o as Ut,m as ea,b as Ft,p as Zt,q as ia,t as na,v as va,w as La,x as Ca}from"../chunks/Cz46uNnZ.js";import{s as vt}from"../chunks/DXqZ3xgB.js";import{p as Xt}from"../chunks/BV00zs06.js";var Fa=v('<span class="chevron svelte-12crvy">‚ñ≤</span>'),Ea=v('<span class="chevron svelte-12crvy">‚ñº</span>'),Ga=v('<div class="input-with-action svelte-12crvy"><input type="text" id="location-manual" placeholder="Custom location..." class="flat-left svelte-12crvy"/> <button type="button" class="action-btn flat-right svelte-12crvy" title="Back to list">‚úï</button></div>'),Na=v("<option> </option>"),Aa=v('<select id="location-filter" class="svelte-12crvy"><option>Any Location</option><!></select>'),Oa=v("<option> </option>"),ja=v("<option> </option>"),Pa=v('<div class="filter-body svelte-12crvy"><div class="filter-grid svelte-12crvy"><div class="filter-item svelte-12crvy"><label for="start-date" class="svelte-12crvy">Start Date</label> <input type="date" id="start-date" class="svelte-12crvy"/></div> <div class="filter-item svelte-12crvy"><label for="end-date" class="svelte-12crvy">End Date</label> <input type="date" id="end-date" class="svelte-12crvy"/></div> <div class="filter-item svelte-12crvy"><label for="location-filter" class="svelte-12crvy">Location</label> <!></div> <div class="filter-item svelte-12crvy"><label for="climbing-type-filter" class="svelte-12crvy">Climb Type</label> <select id="climbing-type-filter" class="svelte-12crvy"><option>Any Type</option><!></select></div> <div class="filter-item svelte-12crvy"><label for="session-type-filter" class="svelte-12crvy">Session Type</label> <select id="session-type-filter" class="svelte-12crvy"><option>Any Type</option><!></select></div> <div class="filter-item svelte-12crvy"><label for="grade-filter" class="svelte-12crvy">Grade (Exact)</label> <input type="text" id="grade-filter" placeholder="e.g. V4" class="svelte-12crvy"/></div></div> <div class="filter-actions svelte-12crvy"><button class="reset-btn svelte-12crvy">Reset Filters</button></div></div>'),Ma=v('<div class="filter-container svelte-12crvy"><button class="filter-header svelte-12crvy"><div class="header-content svelte-12crvy"><span class="icon svelte-12crvy">üîç</span> <span class="title svelte-12crvy">Filters</span> <!></div></button> <!></div>');function Ia(ze,u){gt(u,!0);const r=["Rockstar Swindon","Flashpoint Swindon","Flashpoint Bristol","Redpoint Bristol","TCH Bristol","Other"],h=["Bouldering","Sport","Mixed"],q=["Projecting","Onsighting","Campusing","Repeaters"];let w=y(!1),m=y(""),C=y(""),S=y(""),V=y(""),re=y(""),ce=y(""),De=y(!1);function te(){l(w,!e(w))}function ie(){l(m,""),l(C,""),l(S,""),l(V,""),l(De,!1),l(re,""),l(ce,""),F()}function F(){u.onFilterParamsChange({startDate:e(m),endDate:e(C),location:e(S),climbingType:e(V),sessionType:e(re),grade:e(ce)})}function le(){e(S)==="Other"?(l(De,!0),l(S,"")):F()}function de(){l(De,!1),l(S,""),F()}var ne=Ma(),G=a(ne);G.__click=te;var $=a(G),_e=s(a($),4);{var fe=k=>{var J=Fa();i(k,J)},we=k=>{var J=Ea();i(k,J)};p(_e,k=>{e(w)?k(fe):k(we,!1)})}t($),t(G);var L=s(G,2);{var A=k=>{var J=Pa(),B=a(J),M=a(B),ve=s(a(M),2);Ve(ve),ve.__change=F,t(M);var Z=s(M,2),b=s(a(Z),2);Ve(b),b.__change=F,t(Z);var c=s(Z,2),d=s(a(c),2);{var n=K=>{var j=Ga(),ee=a(j);Ve(ee),ee.__input=F;var qe=s(ee,2);qe.__click=de,t(j),Ie(ee,()=>e(S),Ce=>l(S,Ce)),i(K,j)},_=K=>{var j=Aa();j.__change=le;var ee=a(j);ee.value=ee.__value="";var qe=s(ee);Fe(qe,17,()=>r,Ae,(Ce,ge)=>{var be=Na(),Y=a(be,!0);t(be);var he={};g(()=>{o(Y,e(ge)),he!==(he=e(ge))&&(be.value=(be.__value=e(ge))??"")}),i(Ce,be)}),t(j),St(j,()=>e(S),Ce=>l(S,Ce)),i(K,j)};p(d,K=>{e(De)?K(n):K(_,!1)})}t(c);var D=s(c,2),U=s(a(D),2);U.__change=F;var oe=a(U);oe.value=oe.__value="";var O=s(oe);Fe(O,17,()=>h,Ae,(K,j)=>{var ee=Oa(),qe=a(ee,!0);t(ee);var Ce={};g(()=>{o(qe,e(j)),Ce!==(Ce=e(j))&&(ee.value=(ee.__value=e(j))??"")}),i(K,ee)}),t(U),t(D);var ye=s(D,2),ue=s(a(ye),2);ue.__change=F;var Le=a(ue);Le.value=Le.__value="";var T=s(Le);Fe(T,17,()=>q,Ae,(K,j)=>{var ee=ja(),qe=a(ee,!0);t(ee);var Ce={};g(()=>{o(qe,e(j)),Ce!==(Ce=e(j))&&(ee.value=(ee.__value=e(j))??"")}),i(K,ee)}),t(ue),t(ye);var ae=s(ye,2),P=s(a(ae),2);Ve(P),P.__input=F,t(ae),t(B);var me=s(B,2),Se=a(me);Se.__click=ie,t(me),t(J),Ie(ve,()=>e(m),K=>l(m,K)),Ie(b,()=>e(C),K=>l(C,K)),St(U,()=>e(V),K=>l(V,K)),St(ue,()=>e(re),K=>l(re,K)),Ie(P,()=>e(ce),K=>l(ce,K)),Ye(3,J,()=>ot,()=>({duration:200})),i(k,J)};p(L,k=>{e(w)&&k(A)})}t(ne),g(()=>rt(G,"aria-expanded",e(w))),i(ze,ne),mt()}_t(["click","change","input"]);var Ra=v('<label class="type-toggle svelte-yz0xxt"><input type="checkbox"/> <span>Sport?</span></label>'),Ba=v("<option> </option>"),Va=v('<div class="edit-form svelte-yz0xxt"><div class="edit-row main svelte-yz0xxt"><input type="text" class="edit-input grade svelte-yz0xxt" placeholder="Grade"/> <input type="text" class="edit-input name svelte-yz0xxt" placeholder="Route Name"/> <!></div> <div class="edit-row meta svelte-yz0xxt"><select class="edit-select svelte-yz0xxt"></select> <div class="attempts-input-wrapper svelte-yz0xxt"><span>#</span> <input type="number" min="1" class="edit-input num svelte-yz0xxt"/></div></div> <div class="edit-row notes svelte-yz0xxt"><textarea class="edit-input notes-area svelte-yz0xxt" placeholder="Notes..."></textarea></div> <div class="edit-actions svelte-yz0xxt"><button class="action-btn cancel svelte-yz0xxt">Cancel</button> <button class="action-btn save svelte-yz0xxt">Save</button></div></div>'),Ua=v('<span class="climb-type-tag svelte-yz0xxt"> </span>'),Wa=v('<span class="notes-preview svelte-yz0xxt"> </span>'),Ha=v('<span class="wall-tag svelte-yz0xxt"> </span>'),Ya=v('<span class="technique-tag svelte-yz0xxt"> </span>'),Ja=v('<span class="attempts-count svelte-yz0xxt"> </span>'),Za=v('<div class="detail-row svelte-yz0xxt"><span class="label svelte-yz0xxt">Notes:</span> <p class="notes svelte-yz0xxt"> </p></div>'),Xa=v('<p class="empty-notes svelte-yz0xxt">No notes for this climb.</p>'),Ka=v('<div class="climb-details svelte-yz0xxt"><!> <div class="tags svelte-yz0xxt"><span class="tag type svelte-yz0xxt"> </span> <span class="tag attempt-text svelte-yz0xxt"> </span></div></div>'),Qa=v('<div class="climb-header svelte-yz0xxt" role="button" tabindex="0"><div class="climb-main-info svelte-yz0xxt"><span> </span> <span class="climb-name svelte-yz0xxt"> </span> <!> <!> <!> <!></div> <div class="climb-meta svelte-yz0xxt"><span><span class="icon svelte-yz0xxt"> </span> <!></span> <button class="icon-btn edit-btn svelte-yz0xxt" aria-label="Edit climb" title="Edit climb">‚úé</button> <button class="icon-btn delete-btn svelte-yz0xxt" aria-label="Delete climb" title="Delete climb">üóëÔ∏è</button> <span class="chevron svelte-yz0xxt"> </span></div></div> <!>',1),$a=v("<div><!></div>");function es(ze,u){gt(u,!0);let r=Xt(u,"showClimbType",3,!1),h=y(!1),q=y(!1),w=y(""),m=y(""),C=y(""),S=y(1),V=y(""),re=y(!1);function ce(){e(q)||l(h,!e(h))}function De(L){L.stopPropagation(),u.onDelete()}function te(L){L.stopPropagation(),l(w,u.climb.name,!0),l(m,u.climb.grade,!0),l(C,u.climb.attemptType,!0),l(S,u.climb.attemptsNum,!0),l(V,u.climb.notes,!0),l(re,u.climb.isSport,!0),l(q,!0),l(h,!0)}function ie(L){L.stopPropagation(),l(q,!1)}function F(L){L.stopPropagation();const A={...u.climb,name:e(w),grade:e(m),attemptType:e(C),attemptsNum:e(S),notes:e(V),isSport:e(re)};u.onUpdate(A),l(q,!1)}function le(){(e(C)==="Flash"||e(C)==="Onsight")&&l(S,1)}const de={Flash:"‚ö°",Onsight:"üëÅÔ∏è",Redpoint:"üî¥",Dogged:"üõ†Ô∏è",DNF:"‚ùå"},ne=["Flash","Onsight","Redpoint","Dogged","DNF"];var G=$a();let $;var _e=a(G);{var fe=L=>{var A=Va(),k=a(A),J=a(k);Ve(J);var B=s(J,2);Ve(B);var M=s(B,2);{var ve=O=>{var ye=Ra(),ue=a(ye);Ve(ue),jt(2),t(ye),pa(ue,()=>e(re),Le=>l(re,Le)),i(O,ye)};p(M,O=>{r()&&O(ve)})}t(k);var Z=s(k,2),b=a(Z);b.__change=le,Fe(b,21,()=>ne,Ae,(O,ye)=>{var ue=Ba(),Le=a(ue,!0);t(ue);var T={};g(()=>{o(Le,e(ye)),T!==(T=e(ye))&&(ue.value=(ue.__value=e(ye))??"")}),i(O,ue)}),t(b);var c=s(b,2),d=s(a(c),2);Ve(d),t(c),t(Z);var n=s(Z,2),_=a(n);ta(_),t(n);var D=s(n,2),U=a(D);U.__click=ie;var oe=s(U,2);oe.__click=F,t(D),t(A),g(()=>d.disabled=e(C)==="Flash"||e(C)==="Onsight"),Ie(J,()=>e(m),O=>l(m,O)),Ie(B,()=>e(w),O=>l(w,O)),St(b,()=>e(C),O=>l(C,O)),Ie(d,()=>e(S),O=>l(S,O)),Ie(_,()=>e(V),O=>l(V,O)),i(L,A)},we=L=>{var A=Qa(),k=Pe(A);k.__click=ce,k.__keydown=ge=>(ge.key==="Enter"||ge.key===" ")&&ce();var J=a(k),B=a(J);let M;var ve=a(B,!0);t(B);var Z=s(B,2),b=a(Z,!0);t(Z);var c=s(Z,2);{var d=ge=>{var be=Ua(),Y=a(be,!0);t(be),g(()=>o(Y,u.climb.isSport?"Sport":"Boulder")),i(ge,be)};p(c,ge=>{r()&&ge(d)})}var n=s(c,2);{var _=ge=>{var be=Wa(),Y=a(be);t(be),g(()=>o(Y,`- ${u.climb.notes??""}`)),i(ge,be)};p(n,ge=>{!e(h)&&u.climb.notes&&ge(_)})}var D=s(n,2);{var U=ge=>{var be=Ha(),Y=a(be,!0);t(be),g(()=>o(Y,u.climb.wall)),i(ge,be)};p(D,ge=>{u.climb.wall&&ge(U)})}var oe=s(D,2);{var O=ge=>{var be=Ya(),Y=a(be,!0);t(be),g(()=>o(Y,u.climb.techniqueFocus)),i(ge,be)};p(oe,ge=>{u.climb.techniqueFocus&&ge(O)})}t(J);var ye=s(J,2),ue=a(ye);let Le;var T=a(ue),ae=a(T,!0);t(T);var P=s(T,2);{var me=ge=>{var be=Ja(),Y=a(be,!0);t(be),g(()=>o(Y,u.climb.attemptsNum)),i(ge,be)};p(P,ge=>{u.climb.attemptType!=="Flash"&&u.climb.attemptType!=="Onsight"&&ge(me)})}t(ue);var Se=s(ue,2);Se.__click=te;var K=s(Se,2);K.__click=De;var j=s(K,2),ee=a(j,!0);t(j),t(ye),t(k);var qe=s(k,2);{var Ce=ge=>{var be=Ka(),Y=a(be);{var he=x=>{var I=Za(),Ee=s(a(I),2),Me=a(Ee,!0);t(Ee),t(I),g(()=>o(Me,u.climb.notes)),i(x,I)},xe=x=>{var I=Xa();i(x,I)};p(Y,x=>{u.climb.notes?x(he):x(xe,!1)})}var X=s(Y,2),W=a(X),ke=a(W,!0);t(W);var Te=s(W,2),E=a(Te,!0);t(Te),t(X),t(be),g(()=>{o(ke,u.climb.isSport?"Sport":"Boulder"),o(E,u.climb.attemptType)}),Ye(3,be,()=>ot,()=>({duration:150})),i(ge,be)};p(qe,ge=>{e(h)&&ge(Ce)})}g(()=>{rt(k,"aria-expanded",e(h)),M=vt(B,1,"grade-badge svelte-yz0xxt",null,M,{sport:u.climb.isSport}),o(ve,u.climb.grade),o(b,u.climb.name||"Unnamed Route"),Le=vt(ue,1,"attempt-type svelte-yz0xxt",null,Le,{flash:u.climb.attemptType==="Flash"}),o(ae,de[u.climb.attemptType]||u.climb.attemptType),o(ee,e(h)?"‚ñ≤":"‚ñº")}),i(L,A)};p(_e,L=>{e(q)?L(fe):L(we,!1)})}t(G),g(()=>$=vt(G,1,"climb-entry svelte-yz0xxt",null,$,{expanded:e(h),editing:e(q)})),i(ze,G),mt()}_t(["change","click","keydown"]);var ts=v('<span class="stat svelte-7vqogn"> </span>'),as=v('<span class="status-icon pending svelte-7vqogn" title="Waiting to sync">üîÑ</span>'),ss=v('<span class="status-icon error svelte-7vqogn" title="Sync error">‚ö†Ô∏è</span>'),rs=v('<span class="chip svelte-7vqogn"> </span>'),is=v('<span class="text-none svelte-7vqogn">None</span>'),ls=v('<div class="detail-item svelte-7vqogn"><span class="label svelte-7vqogn">Difficulty</span> <span class="value svelte-7vqogn"> </span></div>'),ns=v('<span class="chip svelte-7vqogn"> </span>'),vs=v('<span class="text-none svelte-7vqogn">None</span>'),os=v('<div class="detail-item svelte-7vqogn"><span class="label svelte-7vqogn">Category</span> <div class="value-chips svelte-7vqogn"><!></div></div>'),ds=v('<span class="chip svelte-7vqogn"> </span>'),cs=v('<span class="text-none svelte-7vqogn">None</span>'),_s=v('<div class="detail-item svelte-7vqogn"><span class="label svelte-7vqogn">Energy System</span> <div class="value-chips svelte-7vqogn"><!></div></div>'),us=v('<span class="chip svelte-7vqogn"> </span>'),ps=v('<span class="text-none svelte-7vqogn">None</span>'),fs=v('<div class="detail-item svelte-7vqogn"><span class="label svelte-7vqogn">Wall</span> <div class="value-chips svelte-7vqogn"><!></div></div>'),gs=v('<button class="icon-btn edit-notes-btn svelte-7vqogn" title="Edit Notes">‚úé</button>'),ms=v('<div class="edit-notes-area"><textarea placeholder="Add session notes..." rows="3" class="notes-editor svelte-7vqogn"></textarea> <div class="edit-actions svelte-7vqogn"><button class="cancel-btn svelte-7vqogn">Cancel</button> <button class="save-btn svelte-7vqogn"> </button></div></div>'),bs=v('<p class="notes-text svelte-7vqogn"> </p>'),hs=v('<p class="notes-placeholder svelte-7vqogn">No notes.</p>'),ys=v('<div class="metric svelte-7vqogn"><span class="label svelte-7vqogn">Open Grip</span> <div class="bar-container svelte-7vqogn"><div class="bar-fill svelte-7vqogn"></div></div> <span class="score svelte-7vqogn"> </span></div>'),xs=v('<div class="metric svelte-7vqogn"><span class="label svelte-7vqogn">Crimp Grip</span> <div class="bar-container svelte-7vqogn"><div class="bar-fill svelte-7vqogn"></div></div> <span class="score svelte-7vqogn"> </span></div>'),ws=v('<div class="metric svelte-7vqogn"><span class="label svelte-7vqogn">Pinch Grip</span> <div class="bar-container svelte-7vqogn"><div class="bar-fill svelte-7vqogn"></div></div> <span class="score svelte-7vqogn"> </span></div>'),Ss=v('<div class="metric svelte-7vqogn"><span class="label svelte-7vqogn">Sloper Grip</span> <div class="bar-container svelte-7vqogn"><div class="bar-fill svelte-7vqogn"></div></div> <span class="score svelte-7vqogn"> </span></div>'),ks=v('<div class="metric svelte-7vqogn"><span class="label svelte-7vqogn">Jug Grip</span> <div class="bar-container svelte-7vqogn"><div class="bar-fill svelte-7vqogn"></div></div> <span class="score svelte-7vqogn"> </span></div>'),Ds=v('<p class="no-climbs svelte-7vqogn">No climbs logged for this session.</p>'),Ts=v('<div class="card-body svelte-7vqogn"><div class="details-grid svelte-7vqogn"><div class="detail-item svelte-7vqogn"><span class="label svelte-7vqogn">Training Type</span> <div class="value-chips svelte-7vqogn"><!></div></div> <!> <!> <!> <!></div> <div class="notes-container svelte-7vqogn"><div class="notes-header svelte-7vqogn"><span class="label svelte-7vqogn">Session Notes</span> <!></div> <!></div> <div class="metrics-container svelte-7vqogn"><div class="metric svelte-7vqogn"><span class="label svelte-7vqogn">Finger Load</span> <div class="bar-container svelte-7vqogn"><div class="bar-fill svelte-7vqogn"></div></div> <span class="score svelte-7vqogn"> </span></div> <div class="metric svelte-7vqogn"><span class="label svelte-7vqogn">Shoulder Load</span> <div class="bar-container svelte-7vqogn"><div class="bar-fill svelte-7vqogn"></div></div> <span class="score svelte-7vqogn"> </span></div> <div class="metric svelte-7vqogn"><span class="label svelte-7vqogn">Forearm Load</span> <div class="bar-container svelte-7vqogn"><div class="bar-fill svelte-7vqogn"></div></div> <span class="score svelte-7vqogn"> </span></div> <!> <!> <!> <!> <!></div> <div class="climbs-list svelte-7vqogn"><h4 class="svelte-7vqogn">Climbs</h4> <div class="climbs-container svelte-7vqogn"><!> <!></div></div></div>'),qs=v('<div><div class="card-header svelte-7vqogn" role="button" tabindex="0"><div class="header-main svelte-7vqogn"><div class="date-badge svelte-7vqogn"><span class="day svelte-7vqogn"> </span> <span class="month svelte-7vqogn"> </span> <span class="year svelte-7vqogn"> </span></div> <div class="session-info svelte-7vqogn"><div class="session-text svelte-7vqogn"><h3 class="location svelte-7vqogn"> </h3> <div class="session-meta svelte-7vqogn"><span class="type-tag svelte-7vqogn"> </span> <span class="stat svelte-7vqogn"> </span> <!></div></div> <div class="load-summary svelte-7vqogn"><div class="load-badge finger svelte-7vqogn"> </div> <div class="load-badge shoulder svelte-7vqogn"> </div> <div class="load-badge forearm svelte-7vqogn"> </div></div></div></div> <div class="header-actions"><div class="header-status svelte-7vqogn"><!></div>  <button class="btn-icon delete-session" title="Delete Session">üóëÔ∏è</button> <span class="chevron svelte-7vqogn"> </span></div></div> <!> <!></div>');function zs(ze,u){gt(u,!0);let r=Xt(u,"session",7),h=y(!1),q=y(!1);function w(){l(h,!e(h))}function m(){l(q,!0)}function C(){ra(r().id),l(q,!1),u.onDelete()}function S(X){const W=[...r().climbs];W.splice(X,1),Ut(r().id,{climbs:W}),u.onDelete()}function V(X,W){const ke=[...r().climbs];ke[X]=W,re(ke)}async function re(X){if(Ut(r().id,{climbs:X}),r().climbs=X,$t()){const W={date:r().date,location:r().location,customLocation:r().customLocation,climbingType:r().climbingType,trainingTypes:r().trainingTypes||[],difficulty:r().difficulty,categories:r().categories||[],energySystems:r().energySystems||[],wallAngles:r().wallAngles||[],fingerLoad:r().fingerLoad,shoulderLoad:r().shoulderLoad,forearmLoad:r().forearmLoad,openGrip:r().openGrip,crimpGrip:r().crimpGrip,pinchGrip:r().pinchGrip,sloperGrip:r().sloperGrip,jugGrip:r().jugGrip,climbs:X};try{const ke=await _a(r().id,W);ke.ok?(ea(r().id),r().syncStatus="synced"):(console.error("Failed to sync update:",ke.error),Ft(r().id),r().syncStatus="error")}catch(ke){console.error("Exception syncing update:",ke),Ft(r().id),r().syncStatus="error"}}}let ce=lt(()=>r().climbs?.length??0),De=lt(()=>(r().climbs||[]).reduce((X,W)=>{const ke=parseInt(W.grade.replace(/\D/g,""))||0,Te=parseInt(X.replace(/\D/g,""))||0;return ke>Te?W.grade:X},"V0")),te=y(!1),ie=y(""),F=y(!1);function le(){l(ie,r().notes||"",!0),l(te,!0)}function de(){l(te,!1),l(ie,"")}async function ne(){if(!e(F)){if(l(F,!0),r().notes,r().notes=e(ie),Ut(r().id,{notes:e(ie)}),$t()){const X={date:r().date,location:r().location,customLocation:r().customLocation,climbingType:r().climbingType,trainingTypes:r().trainingTypes||[],difficulty:r().difficulty,categories:r().categories||[],energySystems:r().energySystems||[],wallAngles:r().wallAngles||[],fingerLoad:r().fingerLoad,shoulderLoad:r().shoulderLoad,forearmLoad:r().forearmLoad,openGrip:r().openGrip,crimpGrip:r().crimpGrip,pinchGrip:r().pinchGrip,sloperGrip:r().sloperGrip,jugGrip:r().jugGrip,climbs:r().climbs,notes:e(ie)};try{const W=await _a(r().id,X);W.ok?(ea(r().id),r().syncStatus="synced"):(console.error("Failed to sync note update:",W.error),Ft(r().id),r().syncStatus="error")}catch(W){console.error("Exception syncing note update:",W),Ft(r().id),r().syncStatus="error"}}l(te,!1),l(F,!1)}}var G=qs();let $;var _e=a(G);_e.__click=w,_e.__keydown=X=>X.key==="Enter"&&w();var fe=a(_e),we=a(fe),L=a(we),A=a(L,!0);t(L);var k=s(L,2),J=a(k,!0);t(k);var B=s(k,2),M=a(B,!0);t(B),t(we);var ve=s(we,2),Z=a(ve),b=a(Z),c=a(b,!0);t(b);var d=s(b,2),n=a(d),_=a(n,!0);t(n);var D=s(n,2),U=a(D);t(D);var oe=s(D,2);{var O=X=>{var W=ts(),ke=a(W);t(W),g(()=>o(ke,`Max: ${e(De)??""}`)),i(X,W)};p(oe,X=>{e(ce)>0&&X(O)})}t(d),t(Z);var ye=s(Z,2),ue=a(ye),Le=a(ue,!0);t(ue);var T=s(ue,2),ae=a(T,!0);t(T);var P=s(T,2),me=a(P,!0);t(P),t(ye),t(ve),t(fe);var Se=s(fe,2),K=a(Se),j=a(K);{var ee=X=>{var W=as();i(X,W)},qe=X=>{var W=He(),ke=Pe(W);{var Te=E=>{var x=ss();i(E,x)};p(ke,E=>{r().syncStatus==="error"&&E(Te)},!0)}i(X,W)};p(j,X=>{r().syncStatus==="pending"?X(ee):X(qe,!1)})}t(K);var Ce=s(K,2);Ce.__click=X=>{X.stopPropagation(),m()};var ge=s(Ce,2),be=a(ge,!0);t(ge),t(Se),t(_e);var Y=s(_e,2);{var he=X=>{var W=Ts(),ke=a(W),Te=a(ke),E=s(a(Te),2),x=a(E);{var I=H=>{var R=He(),f=Pe(R);Fe(f,17,()=>r().trainingTypes,Ae,(z,N)=>{var se=rs(),Q=a(se,!0);t(se),g(()=>o(Q,e(N))),i(z,se)}),i(H,R)},Ee=H=>{var R=is();i(H,R)};p(x,H=>{r().trainingTypes&&r().trainingTypes.length>0&&!r().trainingTypes.includes("None")?H(I):H(Ee,!1)})}t(E),t(Te);var Me=s(Te,2);{var Oe=H=>{var R=ls(),f=s(a(R),2),z=a(f,!0);t(f),t(R),g(()=>o(z,r().difficulty)),i(H,R)};p(Me,H=>{r().difficulty&&H(Oe)})}var $e=s(Me,2);{var Je=H=>{var R=os(),f=s(a(R),2),z=a(f);{var N=Q=>{var pe=He(),je=Pe(pe);Fe(je,17,()=>r().categories,Ae,(et,Nt)=>{var ft=ns(),At=a(ft,!0);t(ft),g(()=>o(At,e(Nt))),i(et,ft)}),i(Q,pe)},se=Q=>{var pe=vs();i(Q,pe)};p(z,Q=>{r().categories.length>0&&!r().categories.includes("None")?Q(N):Q(se,!1)})}t(f),t(R),i(H,R)};p($e,H=>{r().categories?.length&&H(Je)})}var Ze=s($e,2);{var qt=H=>{var R=_s(),f=s(a(R),2),z=a(f);{var N=Q=>{var pe=He(),je=Pe(pe);Fe(je,17,()=>r().energySystems,Ae,(et,Nt)=>{var ft=ds(),At=a(ft,!0);t(ft),g(()=>o(At,e(Nt))),i(et,ft)}),i(Q,pe)},se=Q=>{var pe=cs();i(Q,pe)};p(z,Q=>{r().energySystems.length>0&&!r().energySystems.includes("None")?Q(N):Q(se,!1)})}t(f),t(R),i(H,R)};p(Ze,H=>{r().energySystems?.length&&H(qt)})}var ht=s(Ze,2);{var zt=H=>{var R=fs(),f=s(a(R),2),z=a(f);{var N=Q=>{var pe=He(),je=Pe(pe);Fe(je,17,()=>r().wallAngles,Ae,(et,Nt)=>{var ft=us(),At=a(ft,!0);t(ft),g(()=>o(At,e(Nt))),i(et,ft)}),i(Q,pe)},se=Q=>{var pe=ps();i(Q,pe)};p(z,Q=>{r().wallAngles.length>0&&!r().wallAngles.includes("None")?Q(N):Q(se,!1)})}t(f),t(R),i(H,R)};p(ht,H=>{r().wallAngles?.length&&H(zt)})}t(ke);var yt=s(ke,2),Lt=a(yt),kt=s(a(Lt),2);{var dt=H=>{var R=gs();R.__click=le,i(H,R)};p(kt,H=>{e(te)||H(dt)})}t(Lt);var Xe=s(Lt,2);{var Re=H=>{var R=ms(),f=a(R);ta(f);var z=s(f,2),N=a(z);N.__click=de;var se=s(N,2);se.__click=ne;var Q=a(se,!0);t(se),t(z),t(R),g(()=>{N.disabled=e(F),se.disabled=e(F),o(Q,e(F)?"Saving...":"Save")}),Ie(f,()=>e(ie),pe=>l(ie,pe)),Ye(3,R,()=>ot,()=>({duration:150})),i(H,R)},bt=H=>{var R=He(),f=Pe(R);{var z=se=>{var Q=bs(),pe=a(Q,!0);t(Q),g(()=>o(pe,r().notes)),i(se,Q)},N=se=>{var Q=hs();i(se,Q)};p(f,se=>{r().notes?se(z):se(N,!1)},!0)}i(H,R)};p(Xe,H=>{e(te)?H(Re):H(bt,!1)})}t(yt);var tt=s(yt,2),xt=a(tt),at=s(a(xt),2),Ge=a(at);t(at);var Ne=s(at,2),Ke=a(Ne);t(Ne),t(xt);var Ue=s(xt,2),st=s(a(Ue),2),Be=a(st);t(st);var We=s(st,2),ut=a(We);t(We),t(Ue);var Dt=s(Ue,2),Tt=s(a(Dt),2),Ct=a(Tt);t(Tt);var Qe=s(Tt,2),it=a(Qe);t(Qe),t(Dt);var wt=s(Dt,2);{var It=H=>{var R=ys(),f=s(a(R),2),z=a(f);t(f);var N=s(f,2),se=a(N);t(N),t(R),g(()=>{ct(z,`width: ${r().openGrip/5*100}%`),o(se,`${r().openGrip??""}/5`)}),i(H,R)};p(wt,H=>{r().openGrip&&H(It)})}var pt=s(wt,2);{var Wt=H=>{var R=xs(),f=s(a(R),2),z=a(f);t(f);var N=s(f,2),se=a(N);t(N),t(R),g(()=>{ct(z,`width: ${r().crimpGrip/5*100}%`),o(se,`${r().crimpGrip??""}/5`)}),i(H,R)};p(pt,H=>{r().crimpGrip&&H(Wt)})}var Et=s(pt,2);{var Rt=H=>{var R=ws(),f=s(a(R),2),z=a(f);t(f);var N=s(f,2),se=a(N);t(N),t(R),g(()=>{ct(z,`width: ${r().pinchGrip/5*100}%`),o(se,`${r().pinchGrip??""}/5`)}),i(H,R)};p(Et,H=>{r().pinchGrip&&H(Rt)})}var Gt=s(Et,2);{var Kt=H=>{var R=Ss(),f=s(a(R),2),z=a(f);t(f);var N=s(f,2),se=a(N);t(N),t(R),g(()=>{ct(z,`width: ${r().sloperGrip/5*100}%`),o(se,`${r().sloperGrip??""}/5`)}),i(H,R)};p(Gt,H=>{r().sloperGrip&&H(Kt)})}var Ht=s(Gt,2);{var Qt=H=>{var R=ks(),f=s(a(R),2),z=a(f);t(f);var N=s(f,2),se=a(N);t(N),t(R),g(()=>{ct(z,`width: ${r().jugGrip/5*100}%`),o(se,`${r().jugGrip??""}/5`)}),i(H,R)};p(Ht,H=>{r().jugGrip&&H(Qt)})}t(tt);var Bt=s(tt,2),Pt=s(a(Bt),2),Mt=a(Pt);Fe(Mt,17,()=>r().climbs||[],Ae,(H,R,f)=>{{let z=lt(()=>r().climbingType==="Mixed");es(H,{get climb(){return e(R)},onDelete:()=>S(f),onUpdate:N=>V(f,N),get showClimbType(){return e(z)}})}});var Yt=s(Mt,2);{var Jt=H=>{var R=Ds();i(H,R)};p(Yt,H=>{(r().climbs||[]).length===0&&H(Jt)})}t(Pt),t(Bt),t(W),g(()=>{ct(Ge,`width: ${r().fingerLoad/5*100}%`),o(Ke,`${r().fingerLoad??""}/5`),ct(Be,`width: ${r().shoulderLoad/5*100}%`),o(ut,`${r().shoulderLoad??""}/5`),ct(Ct,`width: ${r().forearmLoad/5*100}%`),o(it,`${r().forearmLoad??""}/5`)}),Ye(3,W,()=>ot,()=>({duration:150})),i(X,W)};p(Y,X=>{e(h)&&X(he)})}var xe=s(Y,2);aa(xe,{get isOpen(){return e(q)},title:"Delete Session",message:"Are you sure you want to delete this session? This action cannot be undone.",onConfirm:C,onCancel:()=>l(q,!1)}),t(G),g((X,W,ke)=>{$=vt(G,1,"session-card svelte-7vqogn",null,$,{expanded:e(h)}),rt(_e,"aria-expanded",e(h)),o(A,X),o(J,W),o(M,ke),o(c,r().location),o(_,r().climbingType),o(U,`${e(ce)??""} climbs`),rt(ue,"title",`Finger Load: ${r().fingerLoad??""}`),o(Le,r().fingerLoad),rt(T,"title",`Shoulder Load: ${r().shoulderLoad??""}`),o(ae,r().shoulderLoad),rt(P,"title",`Forearm Load: ${r().forearmLoad??""}`),o(me,r().forearmLoad),o(be,e(h)?"‚ñ≤":"‚ñº")},[()=>new Date(r().date).getDate(),()=>new Date(r().date).toLocaleDateString("en-GB",{month:"short"}),()=>new Date(r().date).getFullYear()]),i(ze,G),mt()}_t(["click","keydown"]);var Ls=v('<div class="legend-item svelte-11p9lqi"><span class="l-icon svelte-11p9lqi"> </span> <span class="l-label svelte-11p9lqi"> </span></div>'),Cs=v('<div class="legend-content svelte-11p9lqi"><div class="legend-grid svelte-11p9lqi"></div></div>'),Fs=v('<div class="legend-container svelte-11p9lqi"><button class="legend-toggle svelte-11p9lqi"><span class="icon">‚ÑπÔ∏è</span> <span class="text">Icon Legend</span> <span class="chevron svelte-11p9lqi"> </span></button> <!></div>');function ma(ze){let u=y(!1);const r=[{icon:"üëÅÔ∏è",label:"Onsight"},{icon:"‚ö°",label:"Flash"},{icon:"üî¥",label:"Redpoint"},{icon:"üõ†Ô∏è",label:"Dogged"},{icon:"‚ùå",label:"DNF"}];var h=Fs(),q=a(h);q.__click=()=>l(u,!e(u));var w=s(a(q),4),m=a(w,!0);t(w),t(q);var C=s(q,2);{var S=V=>{var re=Cs(),ce=a(re);Fe(ce,21,()=>r,Ae,(De,te)=>{var ie=Ls(),F=a(ie),le=a(F,!0);t(F);var de=s(F,2),ne=a(de,!0);t(de),t(ie),g(()=>{o(le,e(te).icon),o(ne,e(te).label)}),i(De,ie)}),t(ce),t(re),Ye(3,re,()=>ot),i(V,re)};p(C,V=>{e(u)&&V(S)})}t(h),g(()=>{rt(q,"aria-expanded",e(u)),o(m,e(u)?"‚ñº":"‚ñ∂")}),i(ze,h)}_t(["click"]);function da(ze,u){if(!ze||ze.length===0){alert("No data to export");return}const r=Array.from(new Set(ze.flatMap(Object.keys))),h=[r.join(","),...ze.map(m=>r.map(C=>{let S=m[C];if(S==null)return"";if(typeof S=="object"){if(S instanceof Date)return S.toISOString();S=JSON.stringify(S).replace(/"/g,'""')}else typeof S=="string"&&(S=S.replace(/"/g,'""'));return typeof S=="string"&&(S.includes(",")||S.includes('"')||S.includes(`
`))?`"${S}"`:S}).join(","))].join(`
`),q=new Blob([h],{type:"text/csv;charset=utf-8;"}),w=document.createElement("a");if(w.download!==void 0){const m=URL.createObjectURL(q);w.setAttribute("href",m),w.setAttribute("download",u.endsWith(".csv")?u:`${u}.csv`),w.style.visibility="hidden",document.body.appendChild(w),w.click(),document.body.removeChild(w)}}var Es=v('<span class="spinner svelte-14fqz8w"></span> Fetching...',1),Gs=v('<div class="error-banner svelte-14fqz8w"> </div>'),Ns=v('<small class="svelte-14fqz8w">Try adjusting your filters.</small>'),As=v('<div class="empty-state svelte-14fqz8w"><p class="svelte-14fqz8w">No indoor climbing sessions found.</p> <!></div>'),Os=v('<div class="load-more-container svelte-14fqz8w"><button class="load-more-btn svelte-14fqz8w"> </button></div>'),js=v('<div class="view-container svelte-14fqz8w"><div class="view-header svelte-14fqz8w"><h2 class="view-title svelte-14fqz8w">üßó Indoor Climbing History</h2> <div class="header-actions svelte-14fqz8w"><button class="action-btn secondary svelte-14fqz8w" title="Export filtered data to CSV">üì• Export</button> <button class="action-btn svelte-14fqz8w" title="Fetch data from cloud"><!></button></div></div> <!> <!> <div class="info-bar svelte-14fqz8w"><div class="legend-wrapper svelte-14fqz8w"><!></div> <div class="load-key svelte-14fqz8w"><span class="key-label svelte-14fqz8w">Load:</span> <div class="key-item svelte-14fqz8w"><span class="dot finger svelte-14fqz8w"></span> Finger</div> <div class="key-item svelte-14fqz8w"><span class="dot shoulder svelte-14fqz8w"></span> Shoulder</div> <div class="key-item svelte-14fqz8w"><span class="dot forearm svelte-14fqz8w"></span> Forearm</div></div></div> <div class="sessions-list"><!> <!> <!></div></div>');function Ps(ze,u){gt(u,!0);let r=y(nt([])),h=y(nt([])),q=y(!1),w=y(""),m=y(nt({startDate:"",endDate:"",location:"",climbingType:"",sessionType:"",grade:""})),C=y(20);const S=20;oa(()=>{V()});function V(){const n=Zt("indoor_climb");l(r,n.sort((_,D)=>new Date(D.date).getTime()-new Date(_.date).getTime()),!0),te()}async function re(){l(q,!0),l(w,"");try{await sa();const n=await ya();n.ok&&n.data?ce(n.data):l(w,n.error||"Failed to fetch data",!0)}catch(n){l(w,n instanceof Error?n.message:"Unknown error",!0)}finally{l(q,!1)}}function ce(n){const _=n.map(U=>({...U,activityType:"indoor_climb",createdAt:new Date().toISOString(),updatedAt:new Date().toISOString(),syncStatus:"synced",syncedAt:new Date().toISOString(),openGrip:0,crimpGrip:0,pinchGrip:0,sloperGrip:0,jugGrip:0}));ia(_);const D=Zt("indoor_climb");l(r,D.sort((U,oe)=>new Date(oe.date).getTime()-new Date(U.date).getTime()),!0),te()}function De(n){l(m,n,!0),te()}function te(){l(C,S),l(h,e(r).filter(n=>{if(e(m).startDate&&n.date<e(m).startDate||e(m).endDate&&n.date>e(m).endDate||e(m).location&&n.location!==e(m).location)return!1;if(e(m).climbingType&&(n.climbingType==="Leading"?"Sport":n.climbingType)!==e(m).climbingType)if(n.climbingType==="Mixed")if(e(m).climbingType==="Bouldering"){if(!n.climbs.some(D=>!D.isSport))return!1}else if(e(m).climbingType==="Sport"){if(!n.climbs.some(D=>D.isSport))return!1}else return!1;else return!1;if(e(m).sessionType&&!n.trainingTypes?.includes(e(m).sessionType))return!1;if(e(m).grade){const _=e(m).grade.trim().toLowerCase();if(!n.climbs.some(U=>U.grade.trim().toLowerCase()===_))return!1}return!0}),!0)}function ie(){l(C,e(C)+S)}var F=js(),le=a(F),de=s(a(le),2),ne=a(de);ne.__click=()=>da(e(h),"indoor_climbs");var G=s(ne,2);G.__click=re;var $=a(G);{var _e=n=>{var _=Es();jt(),i(n,_)},fe=n=>{var _=Ot("‚òÅÔ∏è Fetch Data");i(n,_)};p($,n=>{e(q)?n(_e):n(fe,!1)})}t(G),t(de),t(le);var we=s(le,2);{var L=n=>{var _=Gs(),D=a(_,!0);t(_),g(()=>o(D,e(w))),Ye(3,_,()=>ot),i(n,_)};p(we,n=>{e(w)&&n(L)})}var A=s(we,2);Ia(A,{onFilterParamsChange:De});var k=s(A,2),J=a(k),B=a(J);ma(B),t(J),jt(2),t(k);var M=s(k,2),ve=a(M);Fe(ve,17,()=>e(h).slice(0,e(C)),n=>n.id,(n,_)=>{zs(n,{get session(){return e(_)},onDelete:V})});var Z=s(ve,2);{var b=n=>{var _=As(),D=s(a(_),2);{var U=oe=>{var O=Ns();i(oe,O)};p(D,oe=>{e(r).length>0&&oe(U)})}t(_),i(n,_)};p(Z,n=>{e(h).length===0&&n(b)})}var c=s(Z,2);{var d=n=>{var _=Os(),D=a(_);D.__click=ie;var U=a(D);t(D),t(_),g(()=>o(U,`Load More (${e(h).length-e(C)} remaining)`)),i(n,_)};p(c,n=>{e(C)<e(h).length&&n(d)})}t(M),t(F),g(()=>G.disabled=e(q)),i(ze,F),mt()}_t(["click"]);var Ms=v('<span class="chevron svelte-1frtlim">‚ñ≤</span>'),Is=v('<span class="chevron svelte-1frtlim">‚ñº</span>'),Rs=v('<div class="input-with-action svelte-1frtlim"><input type="text" id="area-filter-text" placeholder="Type area name..." class="flat-left svelte-1frtlim"/> <button class="action-btn flat-right svelte-1frtlim" title="Back to list">‚úï</button></div>'),Bs=v("<option> </option>"),Vs=v('<select id="area-filter" class="svelte-1frtlim"><option>All Areas</option><!><option>Other (Manual Entry)</option></select>'),Us=v('<div class="input-with-action svelte-1frtlim"><input type="text" id="crag-filter-text" placeholder="Type crag name..." class="flat-left svelte-1frtlim"/> <button class="action-btn flat-right svelte-1frtlim" title="Back to list">‚úï</button></div>'),Ws=v("<option> </option>"),Hs=v('<select id="crag-filter" class="svelte-1frtlim"><option>All Crags</option><!><option>Other (Manual Entry)</option></select>'),Ys=v('<input type="text" id="crag-filter-text" class="svelte-1frtlim"/>'),Js=v("<option> </option>"),Zs=v("<option> </option>"),Xs=v('<div class="filter-body svelte-1frtlim"><div class="filter-grid svelte-1frtlim"><div class="filter-item svelte-1frtlim"><label for="start-date" class="svelte-1frtlim">Start Date</label> <input type="date" id="start-date" class="svelte-1frtlim"/></div> <div class="filter-item svelte-1frtlim"><label for="end-date" class="svelte-1frtlim">End Date</label> <input type="date" id="end-date" class="svelte-1frtlim"/></div> <div class="filter-item svelte-1frtlim"><label for="area-filter" class="svelte-1frtlim">Area</label> <!></div> <div class="filter-item svelte-1frtlim"><label for="crag-filter" class="svelte-1frtlim">Crag</label> <!></div> <div class="filter-item svelte-1frtlim"><label for="climbing-type-filter" class="svelte-1frtlim">Climb Type</label> <select id="climbing-type-filter" class="svelte-1frtlim"><option>Any Type</option><!></select></div> <div class="filter-item svelte-1frtlim"><label for="session-type-filter" class="svelte-1frtlim">Session Type</label> <select id="session-type-filter" class="svelte-1frtlim"><option>Any Type</option><!></select></div> <div class="filter-item svelte-1frtlim"><label for="grade-filter" class="svelte-1frtlim">Grade (Exact)</label> <input type="text" id="grade-filter" placeholder="e.g. 7a" class="svelte-1frtlim"/></div></div> <div class="filter-actions svelte-1frtlim"><button class="reset-btn svelte-1frtlim">Reset Filters</button></div></div>'),Ks=v('<div class="filter-container svelte-1frtlim"><button class="filter-header svelte-1frtlim"><div class="header-content svelte-1frtlim"><span class="icon svelte-1frtlim">üîç</span> <span class="title svelte-1frtlim">Filters</span> <!></div></button> <!></div>');function Qs(ze,u){gt(u,!0);const r=xa(),h=["Bouldering","Sport","Mixed","Trad"],q=["Projecting","Onsighting","Campusing","Repeaters","Fun","Volume"];let w=y(!1),m=y(""),C=y(""),S=y(""),V=y(""),re=y(""),ce=y(""),De=y(""),te=y(!1),ie=y(!1),F=lt(()=>e(S)&&e(S)!=="Other"?wa(e(S)):[]);function le(){e(S)==="Other"?(l(te,!0),l(S,"")):l(te,!1),l(V,""),l(ie,!1),$()}function de(){e(V)==="Other"?(l(ie,!0),l(V,"")):l(ie,!1),$()}function ne(){l(w,!e(w))}function G(){l(m,""),l(C,""),l(S,""),l(V,""),l(re,""),l(ce,""),l(De,""),l(te,!1),l(ie,!1),$()}function $(){u.onFilterParamsChange({startDate:e(m),endDate:e(C),area:e(S),crag:e(V),climbingType:e(re),sessionType:e(ce),grade:e(De)})}var _e=Ks(),fe=a(_e);fe.__click=ne;var we=a(fe),L=s(a(we),4);{var A=M=>{var ve=Ms();i(M,ve)},k=M=>{var ve=Is();i(M,ve)};p(L,M=>{e(w)?M(A):M(k,!1)})}t(we),t(fe);var J=s(fe,2);{var B=M=>{var ve=Xs(),Z=a(ve),b=a(Z),c=s(a(b),2);Ve(c),c.__change=$,t(b);var d=s(b,2),n=s(a(d),2);Ve(n),n.__change=$,t(d);var _=s(d,2),D=s(a(_),2);{var U=Y=>{var he=Rs(),xe=a(he);Ve(xe),xe.__input=$;var X=s(xe,2);X.__click=()=>{l(te,!1),l(S,""),$()},t(he),Ie(xe,()=>e(S),W=>l(S,W)),i(Y,he)},oe=Y=>{var he=Vs();he.__change=le;var xe=a(he);xe.value=xe.__value="";var X=s(xe);Fe(X,17,()=>r,Ae,(ke,Te)=>{var E=Bs(),x=a(E,!0);t(E);var I={};g(()=>{o(x,e(Te)),I!==(I=e(Te))&&(E.value=(E.__value=e(Te))??"")}),i(ke,E)});var W=s(X);W.value=W.__value="Other",t(he),St(he,()=>e(S),ke=>l(S,ke)),i(Y,he)};p(D,Y=>{e(te)?Y(U):Y(oe,!1)})}t(_);var O=s(_,2),ye=s(a(O),2);{var ue=Y=>{var he=Us(),xe=a(he);Ve(xe),xe.__input=$;var X=s(xe,2);X.__click=()=>{l(ie,!1),l(V,""),$()},t(he),Ie(xe,()=>e(V),W=>l(V,W)),i(Y,he)},Le=Y=>{var he=He(),xe=Pe(he);{var X=ke=>{var Te=Hs();Te.__change=de;var E=a(Te);E.value=E.__value="";var x=s(E);Fe(x,17,()=>e(F),Ae,(Ee,Me)=>{var Oe=Ws(),$e=a(Oe,!0);t(Oe);var Je={};g(()=>{o($e,e(Me)),Je!==(Je=e(Me))&&(Oe.value=(Oe.__value=e(Me))??"")}),i(Ee,Oe)});var I=s(x);I.value=I.__value="Other",t(Te),St(Te,()=>e(V),Ee=>l(V,Ee)),i(ke,Te)},W=ke=>{var Te=Ys();Ve(Te),Te.__input=$,g(()=>{rt(Te,"placeholder",e(S)?"Filter crag...":"Select area first"),Te.disabled=!e(te)&&!e(S)}),Ie(Te,()=>e(V),E=>l(V,E)),i(ke,Te)};p(xe,ke=>{!e(te)&&e(S)&&e(F).length>0?ke(X):ke(W,!1)},!0)}i(Y,he)};p(ye,Y=>{e(ie)?Y(ue):Y(Le,!1)})}t(O);var T=s(O,2),ae=s(a(T),2);ae.__change=$;var P=a(ae);P.value=P.__value="";var me=s(P);Fe(me,17,()=>h,Ae,(Y,he)=>{var xe=Js(),X=a(xe,!0);t(xe);var W={};g(()=>{o(X,e(he)),W!==(W=e(he))&&(xe.value=(xe.__value=e(he))??"")}),i(Y,xe)}),t(ae),t(T);var Se=s(T,2),K=s(a(Se),2);K.__change=$;var j=a(K);j.value=j.__value="";var ee=s(j);Fe(ee,17,()=>q,Ae,(Y,he)=>{var xe=Zs(),X=a(xe,!0);t(xe);var W={};g(()=>{o(X,e(he)),W!==(W=e(he))&&(xe.value=(xe.__value=e(he))??"")}),i(Y,xe)}),t(K),t(Se);var qe=s(Se,2),Ce=s(a(qe),2);Ve(Ce),Ce.__input=$,t(qe),t(Z);var ge=s(Z,2),be=a(ge);be.__click=G,t(ge),t(ve),Ie(c,()=>e(m),Y=>l(m,Y)),Ie(n,()=>e(C),Y=>l(C,Y)),St(ae,()=>e(re),Y=>l(re,Y)),St(K,()=>e(ce),Y=>l(ce,Y)),Ie(Ce,()=>e(De),Y=>l(De,Y)),Ye(3,ve,()=>ot,()=>({duration:200})),i(M,ve)};p(J,M=>{e(w)&&M(B)})}t(_e),g(()=>rt(fe,"aria-expanded",e(w))),i(ze,_e),mt()}_t(["click","change","input"]);var $s=v('<label class="type-toggle svelte-1k6anfh"><input type="checkbox"/> <span>Sport?</span></label>'),er=v("<option> </option>"),tr=v('<div class="edit-form svelte-1k6anfh"><div class="edit-row main svelte-1k6anfh"><input type="text" class="edit-input grade svelte-1k6anfh" placeholder="Grade"/> <input type="text" class="edit-input name svelte-1k6anfh" placeholder="Route Name"/> <!></div> <div class="edit-row meta svelte-1k6anfh"><select class="edit-select svelte-1k6anfh"></select> <div class="attempts-input-wrapper svelte-1k6anfh"><span>#</span> <input type="number" min="1" class="edit-input num svelte-1k6anfh"/></div></div> <div class="edit-row notes svelte-1k6anfh"><textarea class="edit-input notes-area svelte-1k6anfh" placeholder="Notes..."></textarea></div> <div class="edit-actions svelte-1k6anfh"><button class="action-btn cancel svelte-1k6anfh">Cancel</button> <button class="action-btn save svelte-1k6anfh">Save</button></div></div>'),ar=v('<span class="climb-type-tag svelte-1k6anfh"> </span>'),sr=v('<span class="notes-preview svelte-1k6anfh"> </span>'),rr=v('<span class="attempts-count svelte-1k6anfh"> </span>'),ir=v('<div class="detail-row svelte-1k6anfh"><span class="label svelte-1k6anfh">Notes:</span> <p class="notes svelte-1k6anfh"> </p></div>'),lr=v('<p class="empty-notes svelte-1k6anfh">No notes for this climb.</p>'),nr=v('<span class="tag wall-tag svelte-1k6anfh"> </span>'),vr=v('<span class="tag technique-tag svelte-1k6anfh"> </span>'),or=v('<div class="climb-details svelte-1k6anfh"><!> <div class="tags svelte-1k6anfh"><span class="tag type svelte-1k6anfh"> </span> <!> <!> <span class="tag attempt-text svelte-1k6anfh"> </span></div></div>'),dr=v('<div class="climb-header svelte-1k6anfh" role="button" tabindex="0"><div class="climb-main-info svelte-1k6anfh"><span> </span> <span class="climb-name svelte-1k6anfh"> </span> <!> <!></div> <div class="climb-meta svelte-1k6anfh"><span><span class="icon svelte-1k6anfh"> </span> <!></span> <button class="icon-btn edit-btn svelte-1k6anfh" aria-label="Edit climb" title="Edit climb">‚úé</button> <button class="icon-btn delete-btn svelte-1k6anfh" aria-label="Delete climb" title="Delete climb">üóëÔ∏è</button> <span class="chevron svelte-1k6anfh"> </span></div></div> <!>',1),cr=v("<div><!></div>");function _r(ze,u){gt(u,!0);let r=Xt(u,"showClimbType",3,!1),h=y(!1),q=y(!1),w=y(""),m=y(""),C=y(""),S=y(1),V=y(""),re=y(!1);function ce(){e(q)||l(h,!e(h))}function De(L){L.stopPropagation(),u.onDelete()}function te(L){L.stopPropagation(),l(w,u.climb.name,!0),l(m,u.climb.grade,!0),l(C,u.climb.attemptType,!0),l(S,u.climb.attemptsNum,!0),l(V,u.climb.notes,!0),l(re,u.climb.isSport,!0),l(q,!0),l(h,!0)}function ie(L){L.stopPropagation(),l(q,!1)}function F(L){L.stopPropagation();const A={...u.climb,name:e(w),grade:e(m),attemptType:e(C),attemptsNum:e(S),notes:e(V),isSport:e(re)};u.onUpdate(A),l(q,!1)}function le(){(e(C)==="Flash"||e(C)==="Onsight")&&l(S,1)}const de={Flash:"‚ö°",Onsight:"üëÅÔ∏è",Redpoint:"üî¥",Dogged:"üõ†Ô∏è",DNF:"‚ùå"},ne=["Flash","Onsight","Redpoint","Dogged","DNF"];var G=cr();let $;var _e=a(G);{var fe=L=>{var A=tr(),k=a(A),J=a(k);Ve(J);var B=s(J,2);Ve(B);var M=s(B,2);{var ve=O=>{var ye=$s(),ue=a(ye);Ve(ue),jt(2),t(ye),pa(ue,()=>e(re),Le=>l(re,Le)),i(O,ye)};p(M,O=>{r()&&O(ve)})}t(k);var Z=s(k,2),b=a(Z);b.__change=le,Fe(b,21,()=>ne,Ae,(O,ye)=>{var ue=er(),Le=a(ue,!0);t(ue);var T={};g(()=>{o(Le,e(ye)),T!==(T=e(ye))&&(ue.value=(ue.__value=e(ye))??"")}),i(O,ue)}),t(b);var c=s(b,2),d=s(a(c),2);Ve(d),t(c),t(Z);var n=s(Z,2),_=a(n);ta(_),t(n);var D=s(n,2),U=a(D);U.__click=ie;var oe=s(U,2);oe.__click=F,t(D),t(A),g(()=>d.disabled=e(C)==="Flash"||e(C)==="Onsight"),Ie(J,()=>e(m),O=>l(m,O)),Ie(B,()=>e(w),O=>l(w,O)),St(b,()=>e(C),O=>l(C,O)),Ie(d,()=>e(S),O=>l(S,O)),Ie(_,()=>e(V),O=>l(V,O)),i(L,A)},we=L=>{var A=dr(),k=Pe(A);k.__click=ce,k.__keydown=j=>(j.key==="Enter"||j.key===" ")&&ce();var J=a(k),B=a(J);let M;var ve=a(B,!0);t(B);var Z=s(B,2),b=a(Z,!0);t(Z);var c=s(Z,2);{var d=j=>{var ee=ar(),qe=a(ee,!0);t(ee),g(()=>o(qe,u.climb.isSport?"Sport":"Boulder")),i(j,ee)};p(c,j=>{r()&&j(d)})}var n=s(c,2);{var _=j=>{var ee=sr(),qe=a(ee);t(ee),g(()=>o(qe,`- ${u.climb.notes??""}`)),i(j,ee)};p(n,j=>{!e(h)&&u.climb.notes&&j(_)})}t(J);var D=s(J,2),U=a(D);let oe;var O=a(U),ye=a(O,!0);t(O);var ue=s(O,2);{var Le=j=>{var ee=rr(),qe=a(ee,!0);t(ee),g(()=>o(qe,u.climb.attemptsNum)),i(j,ee)};p(ue,j=>{u.climb.attemptType!=="Flash"&&u.climb.attemptType!=="Onsight"&&j(Le)})}t(U);var T=s(U,2);T.__click=te;var ae=s(T,2);ae.__click=De;var P=s(ae,2),me=a(P,!0);t(P),t(D),t(k);var Se=s(k,2);{var K=j=>{var ee=or(),qe=a(ee);{var Ce=x=>{var I=ir(),Ee=s(a(I),2),Me=a(Ee,!0);t(Ee),t(I),g(()=>o(Me,u.climb.notes)),i(x,I)},ge=x=>{var I=lr();i(x,I)};p(qe,x=>{u.climb.notes?x(Ce):x(ge,!1)})}var be=s(qe,2),Y=a(be),he=a(Y,!0);t(Y);var xe=s(Y,2);{var X=x=>{var I=nr(),Ee=a(I,!0);t(I),g(()=>o(Ee,u.climb.wall)),i(x,I)};p(xe,x=>{u.climb.wall&&x(X)})}var W=s(xe,2);{var ke=x=>{var I=vr(),Ee=a(I,!0);t(I),g(()=>o(Ee,u.climb.techniqueFocus)),i(x,I)};p(W,x=>{u.climb.techniqueFocus&&x(ke)})}var Te=s(W,2),E=a(Te,!0);t(Te),t(be),t(ee),g(()=>{o(he,u.climb.isSport?"Sport":"Boulder"),o(E,u.climb.attemptType)}),Ye(3,ee,()=>ot,()=>({duration:150})),i(j,ee)};p(Se,j=>{e(h)&&j(K)})}g(()=>{rt(k,"aria-expanded",e(h)),M=vt(B,1,"grade-badge svelte-1k6anfh",null,M,{sport:u.climb.isSport}),o(ve,u.climb.grade),o(b,u.climb.name||"Unnamed Route"),oe=vt(U,1,"attempt-type svelte-1k6anfh",null,oe,{flash:u.climb.attemptType==="Flash"}),o(ye,de[u.climb.attemptType]||u.climb.attemptType),o(me,e(h)?"‚ñ≤":"‚ñº")}),i(L,A)};p(_e,L=>{e(q)?L(fe):L(we,!1)})}t(G),g(()=>$=vt(G,1,"climb-entry svelte-1k6anfh",null,$,{expanded:e(h),editing:e(q)})),i(ze,G),mt()}_t(["change","click","keydown"]);var ur=v('<div class="sector-meta"> </div>'),pr=v('<span class="stat svelte-d5hg2r"> </span>'),fr=v('<span class="status-icon pending svelte-d5hg2r" title="Waiting to sync">üîÑ</span>'),gr=v('<span class="status-icon error svelte-d5hg2r" title="Sync error">‚ö†Ô∏è</span>'),mr=v('<span class="chip svelte-d5hg2r"> </span>'),br=v('<span class="text-none svelte-d5hg2r">None</span>'),hr=v('<div class="detail-item svelte-d5hg2r"><span class="label svelte-d5hg2r">Difficulty</span> <span class="value svelte-d5hg2r"> </span></div>'),yr=v('<span class="chip svelte-d5hg2r"> </span>'),xr=v('<span class="text-none svelte-d5hg2r">None</span>'),wr=v('<div class="detail-item svelte-d5hg2r"><span class="label svelte-d5hg2r">Category</span> <div class="value-chips svelte-d5hg2r"><!></div></div>'),Sr=v('<span class="chip svelte-d5hg2r"> </span>'),kr=v('<span class="text-none svelte-d5hg2r">None</span>'),Dr=v('<div class="detail-item svelte-d5hg2r"><span class="label svelte-d5hg2r">Energy System</span> <div class="value-chips svelte-d5hg2r"><!></div></div>'),Tr=v('<button class="icon-btn edit-notes-btn svelte-d5hg2r" title="Edit Notes">‚úé</button>'),qr=v('<div class="edit-notes-area"><textarea placeholder="Add session notes..." rows="3" class="notes-editor svelte-d5hg2r"></textarea> <div class="edit-actions svelte-d5hg2r"><button class="cancel-btn svelte-d5hg2r">Cancel</button> <button class="save-btn svelte-d5hg2r"> </button></div></div>'),zr=v('<p class="notes-text svelte-d5hg2r"> </p>'),Lr=v('<p class="notes-placeholder svelte-d5hg2r">No notes.</p>'),Cr=v('<div class="metric svelte-d5hg2r"><span class="label svelte-d5hg2r">Open Grip</span> <div class="bar-container svelte-d5hg2r"><div class="bar-fill svelte-d5hg2r"></div></div> <span class="score svelte-d5hg2r"> </span></div>'),Fr=v('<div class="metric svelte-d5hg2r"><span class="label svelte-d5hg2r">Crimp Grip</span> <div class="bar-container svelte-d5hg2r"><div class="bar-fill svelte-d5hg2r"></div></div> <span class="score svelte-d5hg2r"> </span></div>'),Er=v('<div class="metric svelte-d5hg2r"><span class="label svelte-d5hg2r">Pinch Grip</span> <div class="bar-container svelte-d5hg2r"><div class="bar-fill svelte-d5hg2r"></div></div> <span class="score svelte-d5hg2r"> </span></div>'),Gr=v('<div class="metric svelte-d5hg2r"><span class="label svelte-d5hg2r">Sloper Grip</span> <div class="bar-container svelte-d5hg2r"><div class="bar-fill svelte-d5hg2r"></div></div> <span class="score svelte-d5hg2r"> </span></div>'),Nr=v('<div class="metric svelte-d5hg2r"><span class="label svelte-d5hg2r">Jug Grip</span> <div class="bar-container svelte-d5hg2r"><div class="bar-fill svelte-d5hg2r"></div></div> <span class="score svelte-d5hg2r"> </span></div>'),Ar=v('<p class="no-climbs svelte-d5hg2r">No climbs logged for this session.</p>'),Or=v('<div class="card-body svelte-d5hg2r"><div class="details-grid svelte-d5hg2r"><div class="detail-item svelte-d5hg2r"><span class="label svelte-d5hg2r">Training Type</span> <div class="value-chips svelte-d5hg2r"><!></div></div> <!> <!> <!></div> <div class="notes-container svelte-d5hg2r"><div class="notes-header svelte-d5hg2r"><span class="label svelte-d5hg2r">Session Notes</span> <!></div> <!></div> <div class="metrics-container svelte-d5hg2r"><div class="metric svelte-d5hg2r"><span class="label svelte-d5hg2r">Finger Load</span> <div class="bar-container svelte-d5hg2r"><div class="bar-fill svelte-d5hg2r"></div></div> <span class="score svelte-d5hg2r"> </span></div> <div class="metric svelte-d5hg2r"><span class="label svelte-d5hg2r">Shoulder Load</span> <div class="bar-container svelte-d5hg2r"><div class="bar-fill svelte-d5hg2r"></div></div> <span class="score svelte-d5hg2r"> </span></div> <div class="metric svelte-d5hg2r"><span class="label svelte-d5hg2r">Forearm Load</span> <div class="bar-container svelte-d5hg2r"><div class="bar-fill svelte-d5hg2r"></div></div> <span class="score svelte-d5hg2r"> </span></div> <!> <!> <!> <!> <!></div> <div class="climbs-list svelte-d5hg2r"><h4 class="svelte-d5hg2r">Climbs</h4> <div class="climbs-container svelte-d5hg2r"><!> <!></div></div></div>'),jr=v('<div><div class="card-header svelte-d5hg2r" role="button" tabindex="0"><div class="header-main svelte-d5hg2r"><div class="date-badge svelte-d5hg2r"><span class="day svelte-d5hg2r"> </span> <span class="month svelte-d5hg2r"> </span> <span class="year svelte-d5hg2r"> </span></div> <div class="session-info svelte-d5hg2r"><div class="session-text svelte-d5hg2r"><h3 class="location svelte-d5hg2r"> <!></h3> <!> <div class="session-meta svelte-d5hg2r"><span class="type-tag svelte-d5hg2r"> </span> <span class="stat svelte-d5hg2r"> </span> <!></div></div> <div class="load-summary svelte-d5hg2r"><div class="load-badge finger svelte-d5hg2r"> </div> <div class="load-badge shoulder svelte-d5hg2r"> </div> <div class="load-badge forearm svelte-d5hg2r"> </div></div></div></div> <div class="header-actions"><div class="header-status svelte-d5hg2r"><!></div> <button class="btn-icon delete-session" title="Delete Session">üóëÔ∏è</button> <span class="chevron svelte-d5hg2r"> </span></div></div> <!> <!></div>');function Pr(ze,u){gt(u,!0);let r=Xt(u,"session",7),h=y(!1),q=y(!1);function w(){l(h,!e(h))}function m(){l(q,!0)}function C(){ra(r().id),l(q,!1),u.onDelete()}function S(E){const x=[...r().climbs];x.splice(E,1),Ut(r().id,{climbs:x}),u.onDelete()}function V(E,x){const I=[...r().climbs];I[E]=x,re(I)}async function re(E){if(Ut(r().id,{climbs:E}),r().climbs=E,$t()){const x={date:r().date,area:r().area,crag:r().crag,sector:r().sector,climbingType:r().climbingType,trainingTypes:r().trainingTypes||[],difficulty:r().difficulty,categories:r().categories||[],energySystems:r().energySystems||[],fingerLoad:r().fingerLoad,shoulderLoad:r().shoulderLoad,forearmLoad:r().forearmLoad,climbs:E};try{const I=await ua(r().id,x);I.ok?(ea(r().id),r().syncStatus="synced"):(console.error("Failed to sync update:",I.error),Ft(r().id),r().syncStatus="error")}catch(I){console.error("Exception syncing update:",I),Ft(r().id),r().syncStatus="error"}}}let ce=lt(()=>r().climbs?.length??0),De=lt(()=>(r().climbs||[]).reduce((E,x)=>{const I=parseInt(x.grade.replace(/\D/g,""))||0,Ee=parseInt(E.replace(/\D/g,""))||0;return I>Ee?x.grade:E},"V0/4a")),te=y(!1),ie=y(""),F=y(!1);function le(){l(ie,r().notes||"",!0),l(te,!0)}function de(){l(te,!1),l(ie,"")}async function ne(){if(!e(F)){if(l(F,!0),r().notes,r().notes=e(ie),Ut(r().id,{notes:e(ie)}),$t()){const E={date:r().date,area:r().area,crag:r().crag,sector:r().sector,climbingType:r().climbingType,trainingTypes:r().trainingTypes||[],difficulty:r().difficulty,categories:r().categories||[],energySystems:r().energySystems||[],fingerLoad:r().fingerLoad,shoulderLoad:r().shoulderLoad,forearmLoad:r().forearmLoad,climbs:r().climbs,notes:e(ie)};try{const x=await ua(r().id,E);x.ok?(ea(r().id),r().syncStatus="synced"):(console.error("Failed to sync note update:",x.error),Ft(r().id),r().syncStatus="error")}catch(x){console.error("Exception syncing note update:",x),Ft(r().id),r().syncStatus="error"}}l(te,!1),l(F,!1)}}var G=jr();let $;var _e=a(G);_e.__click=w,_e.__keydown=E=>E.key==="Enter"&&w();var fe=a(_e),we=a(fe),L=a(we),A=a(L,!0);t(L);var k=s(L,2),J=a(k,!0);t(k);var B=s(k,2),M=a(B,!0);t(B),t(we);var ve=s(we,2),Z=a(ve),b=a(Z),c=a(b),d=s(c);{var n=E=>{var x=Ot();g(()=>o(x,`- ${r().crag??""}`)),i(E,x)};p(d,E=>{r().crag&&E(n)})}t(b);var _=s(b,2);{var D=E=>{var x=ur(),I=a(x);t(x),g(()=>o(I,`üìç ${r().sector??""}`)),i(E,x)};p(_,E=>{r().sector&&E(D)})}var U=s(_,2),oe=a(U),O=a(oe,!0);t(oe);var ye=s(oe,2),ue=a(ye);t(ye);var Le=s(ye,2);{var T=E=>{var x=pr(),I=a(x);t(x),g(()=>o(I,`Max: ${e(De)??""}`)),i(E,x)};p(Le,E=>{e(ce)>0&&E(T)})}t(U),t(Z);var ae=s(Z,2),P=a(ae),me=a(P,!0);t(P);var Se=s(P,2),K=a(Se,!0);t(Se);var j=s(Se,2),ee=a(j,!0);t(j),t(ae),t(ve),t(fe);var qe=s(fe,2),Ce=a(qe),ge=a(Ce);{var be=E=>{var x=fr();i(E,x)},Y=E=>{var x=He(),I=Pe(x);{var Ee=Me=>{var Oe=gr();i(Me,Oe)};p(I,Me=>{r().syncStatus==="error"&&Me(Ee)},!0)}i(E,x)};p(ge,E=>{r().syncStatus==="pending"?E(be):E(Y,!1)})}t(Ce);var he=s(Ce,2);he.__click=E=>{E.stopPropagation(),m()};var xe=s(he,2),X=a(xe,!0);t(xe),t(qe),t(_e);var W=s(_e,2);{var ke=E=>{var x=Or(),I=a(x),Ee=a(I),Me=s(a(Ee),2),Oe=a(Me);{var $e=f=>{var z=He(),N=Pe(z);Fe(N,17,()=>r().trainingTypes,Ae,(se,Q)=>{var pe=mr(),je=a(pe,!0);t(pe),g(()=>o(je,e(Q))),i(se,pe)}),i(f,z)},Je=f=>{var z=br();i(f,z)};p(Oe,f=>{r().trainingTypes&&r().trainingTypes.length>0&&!r().trainingTypes.includes("None")?f($e):f(Je,!1)})}t(Me),t(Ee);var Ze=s(Ee,2);{var qt=f=>{var z=hr(),N=s(a(z),2),se=a(N,!0);t(N),t(z),g(()=>o(se,r().difficulty)),i(f,z)};p(Ze,f=>{r().difficulty&&f(qt)})}var ht=s(Ze,2);{var zt=f=>{var z=wr(),N=s(a(z),2),se=a(N);{var Q=je=>{var et=He(),Nt=Pe(et);Fe(Nt,17,()=>r().categories,Ae,(ft,At)=>{var Vt=yr(),la=a(Vt,!0);t(Vt),g(()=>o(la,e(At))),i(ft,Vt)}),i(je,et)},pe=je=>{var et=xr();i(je,et)};p(se,je=>{r().categories.length>0&&!r().categories.includes("None")?je(Q):je(pe,!1)})}t(N),t(z),i(f,z)};p(ht,f=>{r().categories?.length&&f(zt)})}var yt=s(ht,2);{var Lt=f=>{var z=Dr(),N=s(a(z),2),se=a(N);{var Q=je=>{var et=He(),Nt=Pe(et);Fe(Nt,17,()=>r().energySystems,Ae,(ft,At)=>{var Vt=Sr(),la=a(Vt,!0);t(Vt),g(()=>o(la,e(At))),i(ft,Vt)}),i(je,et)},pe=je=>{var et=kr();i(je,et)};p(se,je=>{r().energySystems.length>0&&!r().energySystems.includes("None")?je(Q):je(pe,!1)})}t(N),t(z),i(f,z)};p(yt,f=>{r().energySystems?.length&&f(Lt)})}t(I);var kt=s(I,2),dt=a(kt),Xe=s(a(dt),2);{var Re=f=>{var z=Tr();z.__click=le,i(f,z)};p(Xe,f=>{e(te)||f(Re)})}t(dt);var bt=s(dt,2);{var tt=f=>{var z=qr(),N=a(z);ta(N);var se=s(N,2),Q=a(se);Q.__click=de;var pe=s(Q,2);pe.__click=ne;var je=a(pe,!0);t(pe),t(se),t(z),g(()=>{Q.disabled=e(F),pe.disabled=e(F),o(je,e(F)?"Saving...":"Save")}),Ie(N,()=>e(ie),et=>l(ie,et)),Ye(3,z,()=>ot,()=>({duration:150})),i(f,z)},xt=f=>{var z=He(),N=Pe(z);{var se=pe=>{var je=zr(),et=a(je,!0);t(je),g(()=>o(et,r().notes)),i(pe,je)},Q=pe=>{var je=Lr();i(pe,je)};p(N,pe=>{r().notes?pe(se):pe(Q,!1)},!0)}i(f,z)};p(bt,f=>{e(te)?f(tt):f(xt,!1)})}t(kt);var at=s(kt,2),Ge=a(at),Ne=s(a(Ge),2),Ke=a(Ne);t(Ne);var Ue=s(Ne,2),st=a(Ue);t(Ue),t(Ge);var Be=s(Ge,2),We=s(a(Be),2),ut=a(We);t(We);var Dt=s(We,2),Tt=a(Dt);t(Dt),t(Be);var Ct=s(Be,2),Qe=s(a(Ct),2),it=a(Qe);t(Qe);var wt=s(Qe,2),It=a(wt);t(wt),t(Ct);var pt=s(Ct,2);{var Wt=f=>{var z=Cr(),N=s(a(z),2),se=a(N);t(N);var Q=s(N,2),pe=a(Q);t(Q),t(z),g(()=>{ct(se,`width: ${r().openGrip/5*100}%`),o(pe,`${r().openGrip??""}/5`)}),i(f,z)};p(pt,f=>{r().openGrip&&f(Wt)})}var Et=s(pt,2);{var Rt=f=>{var z=Fr(),N=s(a(z),2),se=a(N);t(N);var Q=s(N,2),pe=a(Q);t(Q),t(z),g(()=>{ct(se,`width: ${r().crimpGrip/5*100}%`),o(pe,`${r().crimpGrip??""}/5`)}),i(f,z)};p(Et,f=>{r().crimpGrip&&f(Rt)})}var Gt=s(Et,2);{var Kt=f=>{var z=Er(),N=s(a(z),2),se=a(N);t(N);var Q=s(N,2),pe=a(Q);t(Q),t(z),g(()=>{ct(se,`width: ${r().pinchGrip/5*100}%`),o(pe,`${r().pinchGrip??""}/5`)}),i(f,z)};p(Gt,f=>{r().pinchGrip&&f(Kt)})}var Ht=s(Gt,2);{var Qt=f=>{var z=Gr(),N=s(a(z),2),se=a(N);t(N);var Q=s(N,2),pe=a(Q);t(Q),t(z),g(()=>{ct(se,`width: ${r().sloperGrip/5*100}%`),o(pe,`${r().sloperGrip??""}/5`)}),i(f,z)};p(Ht,f=>{r().sloperGrip&&f(Qt)})}var Bt=s(Ht,2);{var Pt=f=>{var z=Nr(),N=s(a(z),2),se=a(N);t(N);var Q=s(N,2),pe=a(Q);t(Q),t(z),g(()=>{ct(se,`width: ${r().jugGrip/5*100}%`),o(pe,`${r().jugGrip??""}/5`)}),i(f,z)};p(Bt,f=>{r().jugGrip&&f(Pt)})}t(at);var Mt=s(at,2),Yt=s(a(Mt),2),Jt=a(Yt);Fe(Jt,17,()=>r().climbs||[],Ae,(f,z,N)=>{{let se=lt(()=>r().climbingType==="Mixed");_r(f,{get climb(){return e(z)},onDelete:()=>S(N),onUpdate:Q=>V(N,Q),get showClimbType(){return e(se)}})}});var H=s(Jt,2);{var R=f=>{var z=Ar();i(f,z)};p(H,f=>{(r().climbs||[]).length===0&&f(R)})}t(Yt),t(Mt),t(x),g(()=>{ct(Ke,`width: ${r().fingerLoad/5*100}%`),o(st,`${r().fingerLoad??""}/5`),ct(ut,`width: ${r().shoulderLoad/5*100}%`),o(Tt,`${r().shoulderLoad??""}/5`),ct(it,`width: ${r().forearmLoad/5*100}%`),o(It,`${r().forearmLoad??""}/5`)}),Ye(3,x,()=>ot,()=>({duration:150})),i(E,x)};p(W,E=>{e(h)&&E(ke)})}var Te=s(W,2);aa(Te,{get isOpen(){return e(q)},title:"Delete Session",message:"Are you sure you want to delete this session? This action cannot be undone.",onConfirm:C,onCancel:()=>l(q,!1)}),t(G),g((E,x,I)=>{$=vt(G,1,"session-card svelte-d5hg2r",null,$,{expanded:e(h)}),rt(_e,"aria-expanded",e(h)),o(A,E),o(J,x),o(M,I),o(c,`${r().area??""} `),o(O,r().climbingType),o(ue,`${e(ce)??""} climbs`),rt(P,"title",`Finger Load: ${r().fingerLoad??""}`),o(me,r().fingerLoad),rt(Se,"title",`Shoulder Load: ${r().shoulderLoad??""}`),o(K,r().shoulderLoad),rt(j,"title",`Forearm Load: ${r().forearmLoad??""}`),o(ee,r().forearmLoad),o(X,e(h)?"‚ñ≤":"‚ñº")},[()=>new Date(r().date).getDate(),()=>new Date(r().date).toLocaleDateString(void 0,{month:"short"}),()=>new Date(r().date).getFullYear()]),i(ze,G),mt()}_t(["click","keydown"]);var Mr=v('<span class="spinner svelte-1s7jdlh"></span> Fetching...',1),Ir=v('<div class="error-banner svelte-1s7jdlh"> </div>'),Rr=v('<small class="svelte-1s7jdlh">Try adjusting your filters.</small>'),Br=v('<div class="empty-state svelte-1s7jdlh"><p class="svelte-1s7jdlh">No outdoor climbing sessions found.</p> <!></div>'),Vr=v('<div class="load-more-container svelte-1s7jdlh"><button class="load-more-btn svelte-1s7jdlh"> </button></div>'),Ur=v('<div class="view-container svelte-1s7jdlh"><div class="view-header svelte-1s7jdlh"><h2 class="view-title svelte-1s7jdlh">‚õ∞Ô∏è Outdoor Climbing History</h2> <div class="header-actions svelte-1s7jdlh"><button class="action-btn secondary svelte-1s7jdlh" title="Export filtered data to CSV">üì• Export</button> <button class="action-btn svelte-1s7jdlh" title="Fetch data from cloud"><!></button></div></div> <!> <!> <div class="info-bar svelte-1s7jdlh"><div class="legend-wrapper svelte-1s7jdlh"><!></div> <div class="load-key svelte-1s7jdlh"><span class="key-label svelte-1s7jdlh">Load:</span> <div class="key-item svelte-1s7jdlh"><span class="dot finger svelte-1s7jdlh"></span> Finger</div> <div class="key-item svelte-1s7jdlh"><span class="dot shoulder svelte-1s7jdlh"></span> Shoulder</div> <div class="key-item svelte-1s7jdlh"><span class="dot forearm svelte-1s7jdlh"></span> Forearm</div></div></div> <div class="sessions-list"><!> <!> <!></div></div>');function Wr(ze,u){gt(u,!0);let r=y(nt([])),h=y(nt([])),q=y(!1),w=y(""),m=y(nt({startDate:"",endDate:"",area:"",crag:"",climbingType:"",sessionType:"",grade:""})),C=y(20);const S=20;oa(()=>{V()});function V(){const n=Zt("outdoor_climb");l(r,n.sort((_,D)=>new Date(D.date).getTime()-new Date(_.date).getTime()),!0),te()}async function re(){l(q,!0),l(w,"");try{await sa();const n=await Sa();n.ok&&n.data?ce(n.data):l(w,n.error||"Failed to fetch data",!0)}catch(n){l(w,n instanceof Error?n.message:"Unknown error",!0)}finally{l(q,!1)}}function ce(n){const _=n.map(U=>({...U,activityType:"outdoor_climb",createdAt:new Date().toISOString(),updatedAt:new Date().toISOString(),syncStatus:"synced",syncedAt:new Date().toISOString(),openGrip:0,crimpGrip:0,pinchGrip:0,sloperGrip:0,jugGrip:0}));ia(_);const D=Zt("outdoor_climb");l(r,D.sort((U,oe)=>new Date(oe.date).getTime()-new Date(U.date).getTime()),!0),te()}function De(n){l(m,n,!0),te()}function te(){l(C,S),l(h,e(r).filter(n=>{if(e(m).startDate&&n.date<e(m).startDate||e(m).endDate&&n.date>e(m).endDate||e(m).area&&!n.area.toLowerCase().includes(e(m).area.toLowerCase())||e(m).crag&&!n.crag.toLowerCase().includes(e(m).crag.toLowerCase()))return!1;if(e(m).climbingType&&(n.climbingType==="Leading"?"Sport":n.climbingType)!==e(m).climbingType)if(n.climbingType==="Mixed")if(e(m).climbingType==="Bouldering"){if(!n.climbs.some(D=>!D.isSport))return!1}else if(e(m).climbingType==="Sport"||e(m).climbingType==="Trad"){if(!n.climbs.some(D=>D.isSport))return!1}else return!1;else return!1;if(e(m).sessionType&&!n.trainingTypes?.includes(e(m).sessionType))return!1;if(e(m).grade){const _=e(m).grade.trim().toLowerCase();if(!n.climbs.some(U=>U.grade.trim().toLowerCase()===_))return!1}return!0}),!0)}function ie(){l(C,e(C)+S)}var F=Ur(),le=a(F),de=s(a(le),2),ne=a(de);ne.__click=()=>da(e(h),"outdoor_climbs");var G=s(ne,2);G.__click=re;var $=a(G);{var _e=n=>{var _=Mr();jt(),i(n,_)},fe=n=>{var _=Ot("‚òÅÔ∏è Fetch Data");i(n,_)};p($,n=>{e(q)?n(_e):n(fe,!1)})}t(G),t(de),t(le);var we=s(le,2);{var L=n=>{var _=Ir(),D=a(_,!0);t(_),g(()=>o(D,e(w))),Ye(3,_,()=>ot),i(n,_)};p(we,n=>{e(w)&&n(L)})}var A=s(we,2);Qs(A,{onFilterParamsChange:De});var k=s(A,2),J=a(k),B=a(J);ma(B),t(J),jt(2),t(k);var M=s(k,2),ve=a(M);Fe(ve,17,()=>e(h).slice(0,e(C)),n=>n.id,(n,_)=>{Pr(n,{get session(){return e(_)},onDelete:V})});var Z=s(ve,2);{var b=n=>{var _=Br(),D=s(a(_),2);{var U=oe=>{var O=Rr();i(oe,O)};p(D,oe=>{e(r).length>0&&oe(U)})}t(_),i(n,_)};p(Z,n=>{e(h).length===0&&n(b)})}var c=s(Z,2);{var d=n=>{var _=Vr(),D=a(_);D.__click=ie;var U=a(D);t(D),t(_),g(()=>o(U,`Load More (${e(h).length-e(C)} remaining)`)),i(n,_)};p(c,n=>{e(C)<e(h).length&&n(d)})}t(M),t(F),g(()=>G.disabled=e(q)),i(ze,F),mt()}_t(["click"]);var Hr=v('<span class="chevron svelte-11rkzid">‚ñ≤</span>'),Yr=v('<span class="chevron svelte-11rkzid">‚ñº</span>'),Jr=v('<div class="filter-body svelte-11rkzid"><div class="filter-grid svelte-11rkzid"><div class="filter-item svelte-11rkzid"><label for="start-date" class="svelte-11rkzid">Start Date</label> <input type="date" id="start-date" class="svelte-11rkzid"/></div> <div class="filter-item svelte-11rkzid"><label for="end-date" class="svelte-11rkzid">End Date</label> <input type="date" id="end-date" class="svelte-11rkzid"/></div> <div class="filter-item svelte-11rkzid"><label for="name-filter" class="svelte-11rkzid">Session Name</label> <input type="text" id="name-filter" placeholder="e.g. Leg Day" class="svelte-11rkzid"/></div> <div class="filter-item svelte-11rkzid"><label for="block-filter" class="svelte-11rkzid">Training Block</label> <select id="block-filter" class="svelte-11rkzid"><option>All Blocks</option><option>Strength</option><option>Power</option><option>Power Endurance</option><option>Muscular Endurance</option></select></div></div> <div class="filter-actions svelte-11rkzid"><button class="reset-btn svelte-11rkzid">Reset Filters</button></div></div>'),Zr=v('<div class="filter-container svelte-11rkzid"><button class="filter-header svelte-11rkzid"><div class="header-content svelte-11rkzid"><span class="icon svelte-11rkzid">üîç</span> <span class="title svelte-11rkzid">Filters</span> <!></div></button> <!></div>');function Xr(ze,u){gt(u,!0);let r=y(!1),h=y(""),q=y(""),w=y(""),m=y("");function C(){l(r,!e(r))}function S(){l(h,""),l(q,""),l(w,""),l(m,""),V()}function V(){u.onFilterParamsChange({startDate:e(h),endDate:e(q),name:e(w),trainingBlock:e(m)})}var re=Zr(),ce=a(re);ce.__click=C;var De=a(ce),te=s(a(De),4);{var ie=ne=>{var G=Hr();i(ne,G)},F=ne=>{var G=Yr();i(ne,G)};p(te,ne=>{e(r)?ne(ie):ne(F,!1)})}t(De),t(ce);var le=s(ce,2);{var de=ne=>{var G=Jr(),$=a(G),_e=a($),fe=s(a(_e),2);Ve(fe),fe.__change=V,t(_e);var we=s(_e,2),L=s(a(we),2);Ve(L),L.__change=V,t(we);var A=s(we,2),k=s(a(A),2);Ve(k),k.__input=V,t(A);var J=s(A,2),B=s(a(J),2);B.__change=V;var M=a(B);M.value=M.__value="";var ve=s(M);ve.value=ve.__value="Strength";var Z=s(ve);Z.value=Z.__value="Power";var b=s(Z);b.value=b.__value="Power Endurance";var c=s(b);c.value=c.__value="Muscular Endurance",t(B),t(J),t($);var d=s($,2),n=a(d);n.__click=S,t(d),t(G),Ie(fe,()=>e(h),_=>l(h,_)),Ie(L,()=>e(q),_=>l(q,_)),Ie(k,()=>e(w),_=>l(w,_)),St(B,()=>e(m),_=>l(m,_)),Ye(3,G,()=>ot,()=>({duration:200})),i(ne,G)};p(le,ne=>{e(r)&&ne(de)})}t(re),g(()=>rt(ce,"aria-expanded",e(r))),i(ze,re),mt()}_t(["click","change","input"]);var Kr=v('<span class="status-icon pending svelte-cirrfc" title="Waiting to sync">üîÑ</span>'),Qr=v('<span class="status-icon error svelte-cirrfc" title="Sync error">‚ö†Ô∏è</span>'),$r=v('<div class="bw-info svelte-cirrfc"><span class="label svelte-cirrfc">Bodyweight:</span> </div>'),ei=v('<span class="muscle-tag svelte-cirrfc"> </span>'),ti=v('<span class="muscle-tag svelte-cirrfc"> </span>'),ai=v('<div class="muscle-tags svelte-cirrfc"><!> <!></div>'),si=v('<span class="tag w svelte-cirrfc">W</span>'),ri=v('<span class="tag f svelte-cirrfc">F</span>'),ii=v('<span class="tag d svelte-cirrfc">D</span>'),li=v('<div><span class="set-num svelte-cirrfc"></span> <!> <!> <!> <span class="val svelte-cirrfc"><span class="weight"> </span> <span class="x svelte-cirrfc">x</span> <span class="reps"> </span></span></div>'),ni=v('<div class="exercise-item svelte-cirrfc"><div class="exercise-header svelte-cirrfc"><h4 class="svelte-cirrfc"> </h4> <!></div> <div class="sets-grid svelte-cirrfc"></div></div>'),vi=v('<div class="subcategory-group svelte-cirrfc"><h5 class="subcategory-header svelte-cirrfc"> </h5> <!></div>'),oi=v('<div class="category-group svelte-cirrfc"><h4 class="category-header svelte-cirrfc"> </h4> <!></div>'),di=v('<div class="card-body svelte-cirrfc"><!> <div class="exercises-list svelte-cirrfc"></div></div>'),ci=v('<div><div class="card-header svelte-cirrfc" role="button" tabindex="0"><div class="header-main svelte-cirrfc"><div class="date-badge svelte-cirrfc"><span class="day svelte-cirrfc"> </span> <span class="month svelte-cirrfc"> </span> <span class="year svelte-cirrfc"> </span></div> <div class="session-info svelte-cirrfc"><div class="session-text"><h3 class="name svelte-cirrfc"> </h3> <div class="session-meta svelte-cirrfc"><span class="stat svelte-cirrfc"> </span> <span class="stat svelte-cirrfc"> </span> <span class="stat svelte-cirrfc"> </span></div></div></div></div> <div class="header-actions svelte-cirrfc"><div class="header-status"><!></div> <button class="btn-icon delete-session svelte-cirrfc" title="Delete Session">üóëÔ∏è</button> <span class="chevron svelte-cirrfc"> </span></div></div> <!></div> <!>',1);function _i(ze,u){gt(u,!0);let r=y(!1),h=y(!1);function q(){l(r,!e(r))}function w(){l(h,!0)}function m(){ra(u.session.id),l(h,!1),u.onDelete()}function C(P){return ka.find(me=>me.name===P)}let S=lt(()=>u.session.exercises?.length??0),V=lt(()=>(u.session.exercises||[]).reduce((P,me)=>P+(me.sets?.length||0),0)),re=lt(()=>(u.session.exercises||[]).reduce((P,me)=>P+(me.sets||[]).reduce((Se,K)=>Se+(K.weight||0)*(K.reps||0),0),0)),ce=lt(()=>(u.session.exercises||[]).reduce((P,me)=>{const Se=C(me.name),K=Se?.category||"Other",j=Se?.subcategory||"Misc";return P[K]||(P[K]={}),P[K][j]||(P[K][j]=[]),P[K][j].push(me),P},{}));var De=ci(),te=Pe(De);let ie;var F=a(te);F.__click=q,F.__keydown=P=>P.key==="Enter"&&q();var le=a(F),de=a(le),ne=a(de),G=a(ne,!0);t(ne);var $=s(ne,2),_e=a($,!0);t($);var fe=s($,2),we=a(fe,!0);t(fe),t(de);var L=s(de,2),A=a(L),k=a(A),J=a(k,!0);t(k);var B=s(k,2),M=a(B),ve=a(M);t(M);var Z=s(M,2),b=a(Z);t(Z);var c=s(Z,2),d=a(c);t(c),t(B),t(A),t(L),t(le);var n=s(le,2),_=a(n),D=a(_);{var U=P=>{var me=Kr();i(P,me)},oe=P=>{var me=He(),Se=Pe(me);{var K=j=>{var ee=Qr();i(j,ee)};p(Se,j=>{u.session.syncStatus==="error"&&j(K)},!0)}i(P,me)};p(D,P=>{u.session.syncStatus==="pending"?P(U):P(oe,!1)})}t(_);var O=s(_,2);O.__click=P=>{P.stopPropagation(),w()};var ye=s(O,2),ue=a(ye,!0);t(ye),t(n),t(F);var Le=s(F,2);{var T=P=>{var me=di(),Se=a(me);{var K=ee=>{var qe=$r(),Ce=s(a(qe));t(qe),g(()=>o(Ce,` ${u.session.bodyweight??""}kg`)),i(ee,qe)};p(Se,ee=>{u.session.bodyweight&&ee(K)})}var j=s(Se,2);Fe(j,21,()=>Object.entries(e(ce)),Ae,(ee,qe)=>{var Ce=lt(()=>ca(e(qe),2));let ge=()=>e(Ce)[0],be=()=>e(Ce)[1];var Y=oi(),he=a(Y),xe=a(he,!0);t(he);var X=s(he,2);Fe(X,17,()=>Object.entries(be()),Ae,(W,ke)=>{var Te=lt(()=>ca(e(ke),2));let E=()=>e(Te)[0],x=()=>e(Te)[1];var I=vi(),Ee=a(I),Me=a(Ee,!0);t(Ee);var Oe=s(Ee,2);Fe(Oe,17,x,Ae,($e,Je)=>{const Ze=lt(()=>C(e(Je).name));var qt=ni(),ht=a(qt),zt=a(ht),yt=a(zt,!0);t(zt);var Lt=s(zt,2);{var kt=Xe=>{var Re=ai(),bt=a(Re);Fe(bt,17,()=>e(Ze).targetMuscles.slice(0,3),Ae,(at,Ge)=>{var Ne=ei(),Ke=a(Ne,!0);t(Ne),g(()=>o(Ke,e(Ge))),i(at,Ne)});var tt=s(bt,2);{var xt=at=>{var Ge=ti(),Ne=a(Ge);t(Ge),g(()=>o(Ne,`+${e(Ze).targetMuscles.length-3}`)),i(at,Ge)};p(tt,at=>{e(Ze).targetMuscles.length>3&&at(xt)})}t(Re),i(Xe,Re)};p(Lt,Xe=>{e(Ze)&&Xe(kt)})}t(ht);var dt=s(ht,2);Fe(dt,21,()=>e(Je).sets,Ae,(Xe,Re,bt)=>{var tt=li();let xt;var at=a(tt);at.textContent=bt+1;var Ge=s(at,2);{var Ne=Qe=>{var it=si();i(Qe,it)};p(Ge,Qe=>{e(Re).isWarmup&&Qe(Ne)})}var Ke=s(Ge,2);{var Ue=Qe=>{var it=ri();i(Qe,it)};p(Ke,Qe=>{e(Re).isFailure&&Qe(Ue)})}var st=s(Ke,2);{var Be=Qe=>{var it=ii();i(Qe,it)};p(st,Qe=>{e(Re).isDropSet&&Qe(Be)})}var We=s(st,2),ut=a(We),Dt=a(ut);t(ut);var Tt=s(ut,4),Ct=a(Tt,!0);t(Tt),t(We),t(tt),g(()=>{xt=vt(tt,1,"set-pill svelte-cirrfc",null,xt,{completed:e(Re).completed,warmup:e(Re).isWarmup}),o(Dt,`${e(Re).weight??""}kg`),o(Ct,e(Re).reps)}),i(Xe,tt)}),t(dt),t(qt),g(()=>o(yt,e(Je).name)),i($e,qt)}),t(I),g(()=>o(Me,E())),i(W,I)}),t(Y),g(()=>o(xe,ge())),i(ee,Y)}),t(j),t(me),Ye(3,me,()=>ot,()=>({duration:150})),i(P,me)};p(Le,P=>{e(r)&&P(T)})}t(te);var ae=s(te,2);aa(ae,{get isOpen(){return e(h)},title:"Delete Session",message:"Are you sure you want to delete this session? This cannot be undone.",onConfirm:m,onCancel:()=>l(h,!1)}),g((P,me,Se,K)=>{ie=vt(te,1,"session-card svelte-cirrfc",null,ie,{expanded:e(r)}),rt(F,"aria-expanded",e(r)),o(G,P),o(_e,me),o(we,Se),o(J,u.session.name),o(ve,`${e(S)??""} Exercises`),o(b,`${e(V)??""} Sets`),o(d,`~${K??""}kg Vol`),o(ue,e(r)?"‚ñ≤":"‚ñº")},[()=>new Date(u.session.date).getDate(),()=>new Date(u.session.date).toLocaleDateString("en-GB",{month:"short"}),()=>new Date(u.session.date).getFullYear(),()=>Math.round(e(re)).toLocaleString()]),i(ze,De),mt()}_t(["click","keydown"]);var ui=v('<span class="spinner svelte-133enjd"></span> Fetching...',1),pi=v('<div class="error-banner svelte-133enjd"> </div>'),fi=v('<small class="svelte-133enjd">Try adjusting your filters.</small>'),gi=v('<div class="empty-state svelte-133enjd"><p class="svelte-133enjd">No gym sessions found.</p> <!></div>'),mi=v('<div class="load-more-container svelte-133enjd"><button class="load-more-btn svelte-133enjd"> </button></div>'),bi=v('<div class="view-container svelte-133enjd"><div class="view-header svelte-133enjd"><h2 class="view-title svelte-133enjd">üèãÔ∏è Gym Session History</h2> <div class="header-actions svelte-133enjd"><button class="action-btn secondary svelte-133enjd" title="Export filtered data to CSV">üì• Export</button> <button class="action-btn svelte-133enjd" title="Fetch data from cloud"><!></button></div></div> <!> <!> <div class="sessions-list"><!> <!> <!></div></div>');function hi(ze,u){gt(u,!0);let r=y(nt([])),h=y(nt([])),q=y(!1),w=y(""),m=y(nt({startDate:"",endDate:"",name:"",trainingBlock:""})),C=y(20);const S=20;oa(()=>{V()});function V(){const b=Zt("gym_session");l(r,b.sort((c,d)=>new Date(d.date).getTime()-new Date(c.date).getTime()),!0),te()}async function re(){l(q,!0),l(w,"");try{await sa();const b=await Da();b.ok&&b.data?ce(b.data):l(w,b.error||"Failed to fetch data",!0)}catch(b){l(w,b instanceof Error?b.message:"Unknown error",!0)}finally{l(q,!1)}}function ce(b){const c=b.map(n=>({...n,activityType:"gym_session",syncStatus:"synced",syncedAt:new Date().toISOString(),createdAt:n.createdAt||new Date().toISOString(),updatedAt:n.updatedAt||new Date().toISOString()}));ia(c);const d=Zt("gym_session");l(r,d.sort((n,_)=>new Date(_.date).getTime()-new Date(n.date).getTime()),!0),te()}function De(b){l(m,b,!0),te()}function te(){l(C,S),l(h,e(r).filter(b=>!(e(m).startDate&&b.date<e(m).startDate||e(m).endDate&&b.date>e(m).endDate||e(m).name&&!b.name.toLowerCase().includes(e(m).name.toLowerCase())||e(m).trainingBlock&&b.trainingBlock!==e(m).trainingBlock)),!0)}function ie(){l(C,e(C)+S)}var F=bi(),le=a(F),de=s(a(le),2),ne=a(de);ne.__click=()=>da(e(h),"gym_sessions");var G=s(ne,2);G.__click=re;var $=a(G);{var _e=b=>{var c=ui();jt(),i(b,c)},fe=b=>{var c=Ot("‚òÅÔ∏è Fetch Data");i(b,c)};p($,b=>{e(q)?b(_e):b(fe,!1)})}t(G),t(de),t(le);var we=s(le,2);{var L=b=>{var c=pi(),d=a(c,!0);t(c),g(()=>o(d,e(w))),Ye(3,c,()=>ot),i(b,c)};p(we,b=>{e(w)&&b(L)})}var A=s(we,2);Xr(A,{onFilterParamsChange:De});var k=s(A,2),J=a(k);Fe(J,17,()=>e(h).slice(0,e(C)),b=>b.id,(b,c)=>{_i(b,{get session(){return e(c)},onDelete:V})});var B=s(J,2);{var M=b=>{var c=gi(),d=s(a(c),2);{var n=_=>{var D=fi();i(_,D)};p(d,_=>{e(r).length>0&&_(n)})}t(c),i(b,c)};p(B,b=>{e(h).length===0&&b(M)})}var ve=s(B,2);{var Z=b=>{var c=mi(),d=a(c);d.__click=ie;var n=a(d);t(d),t(c),g(()=>o(n,`Load More (${e(h).length-e(C)} remaining)`)),i(b,c)};p(ve,b=>{e(C)<e(h).length&&b(Z)})}t(k),t(F),g(()=>G.disabled=e(q)),i(ze,F),mt()}_t(["click"]);var yi=v('<span class="spinner svelte-1szs0u9"></span> Fetching...',1),xi=v('<div class="loading svelte-1szs0u9">Loading sessions...</div>'),wi=v('<div class="empty-state svelte-1szs0u9"><!></div>'),Si=v('<span class="set-tag svelte-1szs0u9"> <span class="x svelte-1szs0u9">x</span> </span>'),ki=v('<div class="ex-notes svelte-1szs0u9"> </div>'),Di=v('<div class="exercise-item svelte-1szs0u9"><div class="ex-header svelte-1szs0u9"><span class="ex-name svelte-1szs0u9"> </span> <span class="ex-grip svelte-1szs0u9"> </span></div> <div class="ex-sets svelte-1szs0u9"></div> <!></div>'),Ti=v('<div class="card-body svelte-1szs0u9"><div class="exercises-list svelte-1szs0u9"></div></div>'),qi=v('<div><div class="card-header svelte-1szs0u9" role="button" tabindex="0"><div class="header-main"><span class="session-date svelte-1szs0u9"> </span> <span class="meta svelte-1szs0u9"><!> </span></div> <div class="header-status svelte-1szs0u9"><span>‚óè</span> <button class="btn-icon delete-btn svelte-1szs0u9" title="Delete Session">üóëÔ∏è</button> <span class="chevron svelte-1szs0u9"> </span></div></div> <!></div>'),zi=v('<div class="load-more-container svelte-1szs0u9"><button class="load-more-btn svelte-1szs0u9"> </button></div>'),Li=v('<div class="timeline svelte-1szs0u9"><!> <!></div>'),Ci=v('<div class="view-content svelte-1szs0u9"><div class="header svelte-1szs0u9"><h3 class="svelte-1szs0u9">ü§è Fingerboarding Log</h3> <button class="fetch-btn svelte-1szs0u9" title="Fetch data from cloud"><!></button></div> <div class="filters svelte-1szs0u9"><div class="filter-group svelte-1szs0u9"><label for="start-date" class="svelte-1szs0u9">From</label> <input type="date" id="start-date" class="svelte-1szs0u9"/></div> <div class="filter-group svelte-1szs0u9"><label for="end-date" class="svelte-1szs0u9">To</label> <input type="date" id="end-date" class="svelte-1szs0u9"/></div></div> <!></div> <!>',1);function Fi(ze,u){gt(u,!0);let r=y(nt([])),h=y(!0),q=y(""),w=y(""),m=y(nt(new Set)),C=y(20);const S=20;ba(()=>{e(q),e(w),l(C,S)});let V=y(!1),re=y(null);function ce(d){l(re,d,!0),l(V,!0)}function De(){e(re)&&(ra(e(re)),l(re,null),l(V,!1),l(r,na().sort((d,n)=>new Date(n.date).getTime()-new Date(d.date).getTime()),!0))}async function te(){l(h,!0),l(r,na().sort((d,n)=>new Date(n.date).getTime()-new Date(d.date).getTime()),!0);try{await sa();const d=await Ta();if(d.ok&&d.data){const n=d.data.map(_=>({..._,activityType:"fingerboarding",createdAt:_.createdAt||new Date().toISOString(),updatedAt:_.updatedAt||new Date().toISOString(),syncStatus:"synced"}));ia(n),l(r,na().sort((_,D)=>new Date(D.date).getTime()-new Date(_.date).getTime()),!0)}}catch(d){console.error("Failed to sync",d)}finally{l(h,!1)}}te();let ie=lt(()=>e(r).filter(d=>!(e(q)&&new Date(d.date)<new Date(e(q))||e(w)&&new Date(d.date)>new Date(e(w)))));function F(){l(C,e(C)+S)}function le(d){e(m).has(d)?e(m).delete(d):e(m).add(d),l(m,new Set(e(m)),!0)}function de(d){return d.exercises.reduce((n,_)=>n+_.details.length,0)}var ne=Ci(),G=Pe(ne),$=a(G),_e=s(a($),2);_e.__click=te;var fe=a(_e);{var we=d=>{var n=yi();jt(),i(d,n)},L=d=>{var n=Ot("‚òÅÔ∏è Fetch Data");i(d,n)};p(fe,d=>{e(h)?d(we):d(L,!1)})}t(_e),t($);var A=s($,2),k=a(A),J=s(a(k),2);Ve(J),t(k);var B=s(k,2),M=s(a(B),2);Ve(M),t(B),t(A);var ve=s(A,2);{var Z=d=>{var n=xi();i(d,n)},b=d=>{var n=He(),_=Pe(n);{var D=oe=>{var O=wi(),ye=a(O);{var ue=T=>{var ae=Ot("No sessions match filter.");i(T,ae)},Le=T=>{var ae=Ot("No fingerboarding sessions logged yet.");i(T,ae)};p(ye,T=>{e(r).length>0?T(ue):T(Le,!1)})}t(O),i(oe,O)},U=oe=>{var O=Li(),ye=a(O);Fe(ye,17,()=>e(ie).slice(0,e(C)),Ae,(T,ae)=>{var P=qi();let me;var Se=a(P);Se.__click=()=>le(e(ae).id),Se.__keydown=x=>x.key==="Enter"&&le(e(ae).id);var K=a(Se),j=a(K),ee=a(j,!0);t(j);var qe=s(j,2),Ce=a(qe);{var ge=x=>{var I=Ot();g(()=>o(I,`${e(ae).location??""} ¬∑`)),i(x,I)};p(Ce,x=>{e(ae).location&&e(ae).location!=="N/A"&&e(ae).location!=="Home"&&x(ge)})}var be=s(Ce);t(qe),t(K);var Y=s(K,2),he=a(Y);let xe;var X=s(he,2);X.__click=x=>{x.stopPropagation(),ce(e(ae).id)};var W=s(X,2),ke=a(W,!0);t(W),t(Y),t(Se);var Te=s(Se,2);{var E=x=>{var I=Ti(),Ee=a(I);Fe(Ee,21,()=>e(ae).exercises||[],Ae,(Me,Oe)=>{var $e=Di(),Je=a($e),Ze=a(Je),qt=a(Ze,!0);t(Ze);var ht=s(Ze,2),zt=a(ht,!0);t(ht),t(Je);var yt=s(Je,2);Fe(yt,21,()=>e(Oe).details,Ae,(dt,Xe)=>{var Re=Si(),bt=a(Re),tt=s(bt,2);t(Re),g(()=>{o(bt,`${e(Xe).weight>0?`+${e(Xe).weight}kg`:"BW"} `),o(tt,` ${e(Xe).reps??""}s/reps`)}),i(dt,Re)}),t(yt);var Lt=s(yt,2);{var kt=dt=>{var Xe=ki(),Re=a(Xe);t(Xe),g(()=>o(Re,`"${e(Oe).notes??""}"`)),i(dt,Xe)};p(Lt,dt=>{e(Oe).notes&&dt(kt)})}t($e),g(()=>{o(qt,e(Oe).name),o(zt,e(Oe).gripType)}),i(Me,$e)}),t(Ee),t(I),Ye(3,I,()=>ot,()=>({duration:150})),i(x,I)};p(Te,x=>{e(m).has(e(ae).id)&&x(E)})}t(P),g((x,I,Ee,Me)=>{me=vt(P,1,"session-card svelte-1szs0u9",null,me,x),o(ee,I),o(be,` ${e(ae).exercises.length??""} Exercises ¬∑ ${Ee??""} Sets`),xe=vt(he,1,"sync-dot svelte-1szs0u9",null,xe,{synced:e(ae).syncStatus==="synced"}),rt(he,"title",e(ae).syncStatus==="synced"?"Synced":"Local"),o(ke,Me)},[()=>({expanded:e(m).has(e(ae).id)}),()=>new Date(e(ae).date).toLocaleDateString(void 0,{weekday:"short",month:"short",day:"numeric",year:"numeric"}),()=>de(e(ae)),()=>e(m).has(e(ae).id)?"‚ñ≤":"‚ñº"]),i(T,P)});var ue=s(ye,2);{var Le=T=>{var ae=zi(),P=a(ae);P.__click=F;var me=a(P);t(P),t(ae),g(()=>o(me,`Load More (${e(ie).length-e(C)} remaining)`)),i(T,ae)};p(ue,T=>{e(C)<e(ie).length&&T(Le)})}t(O),i(oe,O)};p(_,oe=>{e(ie).length===0?oe(D):oe(U,!1)},!0)}i(d,n)};p(ve,d=>{e(h)&&e(r).length===0?d(Z):d(b,!1)})}t(G);var c=s(G,2);aa(c,{get isOpen(){return e(V)},title:"Delete Fingerboard Session",message:"Are you sure you want to delete this session? This cannot be undone.",onConfirm:De,onCancel:()=>l(V,!1)}),g(()=>_e.disabled=e(h)),Ie(J,()=>e(q),d=>l(q,d)),Ie(M,()=>e(w),d=>l(w,d)),i(ze,ne),mt()}_t(["click","keydown"]);var Ei=v('<span class="spinner svelte-xyvf5r"></span> Fetching...',1),Gi=v('<div class="loading svelte-xyvf5r">Loading sessions...</div>'),Ni=v('<div class="empty-state svelte-xyvf5r">No competitions logged yet.</div>'),Ai=v('<button class="icon-btn edit-notes-btn svelte-xyvf5r" title="Edit Notes">‚úé</button>'),Oi=v('<div class="edit-notes-area"><textarea placeholder="Add session notes..." rows="3" class="notes-editor svelte-xyvf5r"></textarea> <div class="edit-actions svelte-xyvf5r"><button class="cancel-btn svelte-xyvf5r">Cancel</button> <button class="save-btn svelte-xyvf5r"> </button></div></div>'),ji=v('<p class="note-text svelte-xyvf5r"> </p>'),Pi=v('<p class="notes-placeholder svelte-xyvf5r">No notes.</p>'),Mi=v('<span class="round-pos svelte-xyvf5r"> </span>'),Ii=v('<span class="c-attempts svelte-xyvf5r"> </span>'),Ri=v('<div class="climb-notes svelte-xyvf5r"> </div>'),Bi=v('<div class="climb-row svelte-xyvf5r"><div class="climb-info svelte-xyvf5r"><span class="c-name svelte-xyvf5r"> </span> <!></div> <div class="climb-result"><span> </span></div></div> <!>',1),Vi=v('<div class="climbs-list"></div>'),Ui=v('<div class="round-item svelte-xyvf5r"><div class="round-header svelte-xyvf5r"><span class="round-name"> </span> <!></div> <!></div>'),Wi=v('<div class="rounds-list svelte-xyvf5r"></div>'),Hi=v('<div class="load-meta svelte-xyvf5r"><span> </span></div>'),Yi=v('<div class="card-body svelte-xyvf5r"><div class="session-notes-container svelte-xyvf5r"><div class="notes-header svelte-xyvf5r"><span class="note-label svelte-xyvf5r">Session Notes</span> <!></div> <!></div> <!> <!> <div class="session-footer svelte-xyvf5r"><span> </span></div></div>'),Ji=v('<div><div class="card-header svelte-xyvf5r" role="button" tabindex="0"><div class="header-main svelte-xyvf5r"><div class="left-col svelte-xyvf5r"><span class="venue svelte-xyvf5r"> </span> <span class="date svelte-xyvf5r"> </span></div> <div class="right-col svelte-xyvf5r"><div class="badges svelte-xyvf5r"><span class="type-tag svelte-xyvf5r"> </span> <span class="result-tag svelte-xyvf5r"> </span></div></div></div> <div class="header-status svelte-xyvf5r"><span>‚óè</span> <button class="btn-icon delete-btn svelte-xyvf5r" title="Delete Session">üóëÔ∏è</button> <span class="chevron svelte-xyvf5r"> </span></div></div> <!></div>'),Zi=v('<div class="load-more-container svelte-xyvf5r"><button class="load-more-btn svelte-xyvf5r"> </button></div>'),Xi=v('<div class="timeline svelte-xyvf5r"><!> <!></div>'),Ki=v('<div class="view-content svelte-xyvf5r"><div class="header svelte-xyvf5r"><h3 class="svelte-xyvf5r">üèÜ Competition Log</h3> <button class="fetch-btn svelte-xyvf5r" title="Fetch data from cloud"><!></button></div> <!> <!></div>');function Qi(ze,u){gt(u,!0);let r=y(nt([])),h=y(!0),q=y(nt(new Set)),w=y(20);const m=20;let C=y(!1),S=y(null);function V(c){l(S,c,!0),l(C,!0)}function re(){e(S)&&(ra(e(S)),l(S,null),l(C,!1),l(r,va().sort((c,d)=>new Date(d.date).getTime()-new Date(c.date).getTime()),!0))}async function ce(){l(h,!0),l(w,m),l(r,va().sort((c,d)=>new Date(d.date).getTime()-new Date(c.date).getTime()),!0);try{await sa();const c=await qa();if(c.ok&&c.data){const d=c.data.map(n=>({...n,activityType:"competition",type:n.type,rounds:n.rounds.map(_=>({..._,climbs:_.climbs?.map(D=>({...D,status:D.status}))})),createdAt:n.createdAt||new Date().toISOString(),updatedAt:n.updatedAt||new Date().toISOString(),syncStatus:"synced"}));ia(d),l(r,va().sort((n,_)=>new Date(_.date).getTime()-new Date(n.date).getTime()),!0)}}catch(c){console.error("Failed to sync",c)}finally{l(h,!1)}}ce();function De(c){e(q).has(c)?e(q).delete(c):e(q).add(c),l(q,new Set(e(q)),!0)}function te(){l(w,e(w)+m)}function ie(c){if(!c.rounds||c.rounds.length===0)return"No rounds";const d=c.rounds[c.rounds.length-1];if(d.position)return`#${d.position} ${d.name}`;if(d.climbs){const n=d.climbs.filter(D=>D.status==="Top"||D.status==="Flash").length,_=d.climbs.filter(D=>D.status==="Zone").length;return`${c.rounds.length} Rnds ¬∑ Final: ${n}T ${_+n}Z`}return d.name}let F=y(nt(new Set)),le=y(nt(new Map)),de=y(nt(new Set));function ne(c){e(le).set(c.id,c.notes||""),l(le,new Map(e(le)),!0),e(F).add(c.id),l(F,new Set(e(F)),!0)}function G(c){e(F).delete(c),l(F,new Set(e(F)),!0),e(le).delete(c),l(le,new Map(e(le)),!0)}function $(c){return e(le).get(c)||""}function _e(c,d){e(le).set(c,d),l(le,new Map(e(le)),!0)}async function fe(c){if(e(de).has(c.id))return;const d=e(le).get(c.id);if(d===void 0)return;e(de).add(c.id),l(de,new Set(e(de)),!0),Ut(c.id,{notes:d});const n=e(r).find(_=>_.id===c.id);if(n&&(n.notes=d),$t()){const _={date:c.date,venue:c.venue,customVenue:c.customVenue,type:c.type,fingerLoad:c.fingerLoad,shoulderLoad:c.shoulderLoad,forearmLoad:c.forearmLoad,rounds:c.rounds,notes:d};try{const D=await za(c.id,_);D.ok?(ea(c.id),n&&(n.syncStatus="synced")):(console.error("Failed to sync note update:",D.error),Ft(c.id),n&&(n.syncStatus="error"))}catch(D){console.error("Exception syncing note update:",D),Ft(c.id),n&&(n.syncStatus="error")}}e(F).delete(c.id),l(F,new Set(e(F)),!0),e(de).delete(c.id),l(de,new Set(e(de)),!0)}var we=Ki(),L=a(we),A=s(a(L),2);A.__click=ce;var k=a(A);{var J=c=>{var d=Ei();jt(),i(c,d)},B=c=>{var d=Ot("‚òÅÔ∏è Fetch Data");i(c,d)};p(k,c=>{e(h)?c(J):c(B,!1)})}t(A),t(L);var M=s(L,2);{var ve=c=>{var d=Gi();i(c,d)},Z=c=>{var d=He(),n=Pe(d);{var _=U=>{var oe=Ni();i(U,oe)},D=U=>{var oe=Xi(),O=a(oe);Fe(O,17,()=>e(r).slice(0,e(w)),Ae,(Le,T)=>{var ae=Ji();let P;var me=a(ae);me.__click=()=>De(e(T).id),me.__keydown=Oe=>Oe.key==="Enter"&&De(e(T).id);var Se=a(me),K=a(Se),j=a(K),ee=a(j,!0);t(j);var qe=s(j,2),Ce=a(qe,!0);t(qe),t(K);var ge=s(K,2),be=a(ge),Y=a(be),he=a(Y,!0);t(Y);var xe=s(Y,2),X=a(xe,!0);t(xe),t(be),t(ge),t(Se);var W=s(Se,2),ke=a(W);let Te;var E=s(ke,2);E.__click=Oe=>{Oe.stopPropagation(),V(e(T).id)};var x=s(E,2),I=a(x,!0);t(x),t(W),t(me);var Ee=s(me,2);{var Me=Oe=>{var $e=Yi(),Je=a($e),Ze=a(Je),qt=s(a(Ze),2);{var ht=Ge=>{var Ne=Ai();Ne.__click=()=>ne(e(T)),i(Ge,Ne)};p(qt,Ge=>{e(F).has(e(T).id)||Ge(ht)})}t(Ze);var zt=s(Ze,2);{var yt=Ge=>{var Ne=Oi(),Ke=a(Ne);ta(Ke),Ke.__input=ut=>_e(e(T).id,ut.currentTarget.value);var Ue=s(Ke,2),st=a(Ue);st.__click=()=>G(e(T).id);var Be=s(st,2);Be.__click=()=>fe(e(T));var We=a(Be,!0);t(Be),t(Ue),t(Ne),g((ut,Dt,Tt,Ct)=>{ha(Ke,ut),st.disabled=Dt,Be.disabled=Tt,o(We,Ct)},[()=>$(e(T).id),()=>e(de).has(e(T).id),()=>e(de).has(e(T).id),()=>e(de).has(e(T).id)?"Saving...":"Save"]),Ye(3,Ne,()=>ot,()=>({duration:150})),i(Ge,Ne)},Lt=Ge=>{var Ne=He(),Ke=Pe(Ne);{var Ue=Be=>{var We=ji(),ut=a(We,!0);t(We),g(()=>o(ut,e(T).notes)),i(Be,We)},st=Be=>{var We=Pi();i(Be,We)};p(Ke,Be=>{e(T).notes?Be(Ue):Be(st,!1)},!0)}i(Ge,Ne)};p(zt,Ge=>{e(F).has(e(T).id)?Ge(yt):Ge(Lt,!1)})}t(Je);var kt=s(Je,2);{var dt=Ge=>{var Ne=Wi();Fe(Ne,21,()=>e(T).rounds||[],Ae,(Ke,Ue)=>{var st=Ui(),Be=a(st),We=a(Be),ut=a(We,!0);t(We);var Dt=s(We,2);{var Tt=it=>{var wt=Mi(),It=a(wt);t(wt),g(()=>o(It,`#${e(Ue).position??""}`)),i(it,wt)};p(Dt,it=>{e(Ue).position&&it(Tt)})}t(Be);var Ct=s(Be,2);{var Qe=it=>{var wt=Vi();Fe(wt,21,()=>e(Ue).climbs||[],Ae,(It,pt)=>{var Wt=Bi(),Et=Pe(Wt),Rt=a(Et),Gt=a(Rt),Kt=a(Gt,!0);t(Gt);var Ht=s(Gt,2);{var Qt=R=>{var f=Ii(),z=a(f);t(f),g(()=>o(z,`(${e(pt).attemptCount??""} tries)`)),i(R,f)};p(Ht,R=>{e(pt).attemptCount>1&&R(Qt)})}t(Rt);var Bt=s(Rt,2),Pt=a(Bt);let Mt;var Yt=a(Pt,!0);t(Pt),t(Bt),t(Et);var Jt=s(Et,2);{var H=R=>{var f=Ri(),z=a(f);t(f),g(()=>o(z,`"${e(pt).notes??""}"`)),i(R,f)};p(Jt,R=>{e(pt).notes&&R(H)})}g(()=>{o(Kt,e(pt).name),Mt=vt(Pt,1,"status-badge svelte-xyvf5r",null,Mt,{top:e(pt).status==="Top"||e(pt).status==="Flash",zone:e(pt).status==="Zone"}),o(Yt,e(pt).status)}),i(It,Wt)}),t(wt),i(it,wt)};p(Ct,it=>{e(Ue).climbs&&it(Qe)})}t(st),g(()=>o(ut,e(Ue).name)),i(Ke,st)}),t(Ne),i(Ge,Ne)};p(kt,Ge=>{e(T).rounds&&Ge(dt)})}var Xe=s(kt,2);{var Re=Ge=>{var Ne=Hi(),Ke=a(Ne),Ue=a(Ke);t(Ke),t(Ne),g(()=>o(Ue,`Detailed Load: Fingers ${e(T).fingerLoad??""}/5, Shoulders ${e(T).shoulderLoad??""}/5,
										Forearms ${e(T).forearmLoad??""}/5`)),i(Ge,Ne)};p(Xe,Ge=>{(e(T).fingerLoad||e(T).shoulderLoad)&&Ge(Re)})}var bt=s(Xe,2),tt=a(bt);let xt;var at=a(tt,!0);t(tt),t(bt),t($e),g(()=>{xt=vt(tt,1,"sync-status svelte-xyvf5r",null,xt,{synced:e(T).syncStatus==="synced"}),o(at,e(T).syncStatus==="synced"?"‚úì Synced":"‚òÅ Local")}),Ye(3,$e,()=>ot,()=>({duration:150})),i(Oe,$e)};p(Ee,Oe=>{e(q).has(e(T).id)&&Oe(Me)})}t(ae),g((Oe,$e,Je,Ze)=>{P=vt(ae,1,"session-card svelte-xyvf5r",null,P,Oe),o(ee,e(T).customVenue||e(T).venue),o(Ce,$e),o(he,e(T).type),o(X,Je),Te=vt(ke,1,"sync-dot",null,Te,{synced:e(T).syncStatus==="synced"}),rt(ke,"title",e(T).syncStatus==="synced"?"Synced":"Local"),o(I,Ze)},[()=>({expanded:e(q).has(e(T).id)}),()=>new Date(e(T).date).toLocaleDateString(void 0,{weekday:"short",day:"numeric",month:"short",year:"numeric"}),()=>ie(e(T)),()=>e(q).has(e(T).id)?"‚ñ≤":"‚ñº"]),i(Le,ae)});var ye=s(O,2);{var ue=Le=>{var T=Zi(),ae=a(T);ae.__click=te;var P=a(ae);t(ae),t(T),g(()=>o(P,`Load More (${e(r).length-e(w)} remaining)`)),i(Le,T)};p(ye,Le=>{e(w)<e(r).length&&Le(ue)})}t(oe),i(U,oe)};p(n,U=>{e(r).length===0?U(_):U(D,!1)},!0)}i(c,d)};p(M,c=>{e(h)&&e(r).length===0?c(ve):c(Z,!1)})}var b=s(M,2);aa(b,{get isOpen(){return e(C)},title:"Delete Competition",message:"Are you sure you want to delete this competition session? This action cannot be undone.",onConfirm:re,onCancel:()=>l(C,!1)}),t(we),g(()=>A.disabled=e(h)),i(ze,we),mt()}_t(["click","keydown","input"]);var $i=v("<option> </option>"),el=v("<option> </option>"),tl=v('<small class="svelte-uzmgeu">Try adjusting the filters to find data.</small>'),al=v('<button class="backdrop svelte-uzmgeu" aria-label="Close modal"></button> <div class="modal svelte-uzmgeu" role="dialog" aria-modal="true"><h3 class="svelte-uzmgeu">Delete Data</h3> <p class="subtitle svelte-uzmgeu">Select data to remove from your local cache.</p> <div class="form-group svelte-uzmgeu"><label for="delete-activity" class="svelte-uzmgeu">Activity Type</label> <select id="delete-activity" class="svelte-uzmgeu"></select></div> <div class="form-group svelte-uzmgeu"><label for="delete-range" class="svelte-uzmgeu">Time Range</label> <select id="delete-range" class="svelte-uzmgeu"></select></div> <div><p class="svelte-uzmgeu">This will delete <strong class="svelte-uzmgeu"> </strong> </p> <!></div> <div class="actions svelte-uzmgeu"><button class="btn-cancel svelte-uzmgeu">Cancel</button> <button class="btn-delete svelte-uzmgeu">Delete</button></div></div>',1);function sl(ze,u){gt(u,!0);let r=Xt(u,"isOpen",3,!1),h=Xt(u,"sessions",19,()=>[]),q=y("all"),w=y("all_time");const m=[{value:"all",label:"All Activities"},{value:"indoor_climb",label:"Indoor Climb"},{value:"outdoor_climb",label:"Outdoor Climb"},{value:"gym_session",label:"Gym Session"},{value:"fingerboarding",label:"Fingerboarding"},{value:"competition",label:"Competition"}],C=[{value:"24_hours",label:"Past 24 Hours"},{value:"7_days",label:"Past 7 Days"},{value:"30_days",label:"Past 30 Days"},{value:"1_year",label:"Past Year"},{value:"all_time",label:"All Time"}];function S(F,le,de){const ne=new Date;return F.filter(G=>{if(le!=="all"&&G.activityType!==le)return!1;if(de==="all_time")return!0;const $=new Date(G.date),fe=(ne.getTime()-$.getTime())/(1e3*3600*24);switch(de){case"24_hours":return fe<=1;case"7_days":return fe<=7;case"30_days":return fe<=30;case"1_year":return fe<=365;default:return!0}})}let V=lt(()=>S(h(),e(q),e(w))),re=lt(()=>e(V).length);function ce(){u.onDelete({activityType:e(q),timeRange:e(w)})}var De=He(),te=Pe(De);{var ie=F=>{var le=al(),de=Pe(le);de.__click=function(...d){u.onClose?.apply(this,d)};var ne=s(de,2),G=s(a(ne),4),$=s(a(G),2);Fe($,21,()=>m,Ae,(d,n)=>{var _=$i(),D=a(_,!0);t(_);var U={};g(()=>{o(D,e(n).label),U!==(U=e(n).value)&&(_.value=(_.__value=e(n).value)??"")}),i(d,_)}),t($),t(G);var _e=s(G,2),fe=s(a(_e),2);Fe(fe,21,()=>C,Ae,(d,n)=>{var _=el(),D=a(_,!0);t(_);var U={};g(()=>{o(D,e(n).label),U!==(U=e(n).value)&&(_.value=(_.__value=e(n).value)??"")}),i(d,_)}),t(fe),t(_e);var we=s(_e,2);let L;var A=a(we),k=s(a(A)),J=a(k,!0);t(k);var B=s(k);t(A);var M=s(A,2);{var ve=d=>{var n=tl();i(d,n)};p(M,d=>{e(re)===0&&d(ve)})}t(we);var Z=s(we,2),b=a(Z);b.__click=function(...d){u.onClose?.apply(this,d)};var c=s(b,2);c.__click=ce,t(Z),t(ne),g(()=>{L=vt(we,1,"summary-box svelte-uzmgeu",null,L,{"has-items":e(re)>0}),o(J,e(re)),o(B,` session${e(re)!==1?"s":""}.`),c.disabled=e(re)===0}),Ye(3,de,()=>fa,()=>({duration:200})),St($,()=>e(q),d=>l(q,d)),St(fe,()=>e(w),d=>l(w,d)),Ye(3,ne,()=>ga,()=>({duration:200,start:.9})),i(F,le)};p(te,F=>{r()&&F(ie)})}i(ze,De),mt()}_t(["click"]);var rl=v('<button class="backdrop svelte-108px9u" aria-label="Close settings"></button> <div class="settings-modal svelte-108px9u" role="dialog" aria-modal="true"><div class="settings-header svelte-108px9u"><h3 class="svelte-108px9u">Settings</h3> <button class="close-btn svelte-108px9u">‚úï</button></div> <div class="settings-content"><div class="setting-item svelte-108px9u"><div class="setting-info svelte-108px9u"><span class="setting-label svelte-108px9u">Local Data</span> <span class="setting-desc svelte-108px9u">Remove specific sessions from this device</span></div> <button class="btn-clear-cache svelte-108px9u">Delete Data</button></div></div></div>',1),il=v("<option> </option>"),ll=v('<div class="view-container svelte-108px9u"><!></div>'),nl=v('<div class="page svelte-108px9u"><div class="page-header svelte-108px9u"><div><h1 class="svelte-108px9u">üìä View Data</h1> <p class="subtitle svelte-108px9u">Browse your training history</p></div> <button class="settings-btn svelte-108px9u" aria-label="Settings">‚öôÔ∏è</button></div> <!> <!> <div class="content-card svelte-108px9u"><div class="form-group svelte-108px9u"><label for="activity-type" class="svelte-108px9u">Activity Type</label> <select id="activity-type" class="svelte-108px9u"><option disabled>Select an activity...</option><!></select></div> <!></div></div>');function ml(ze,u){gt(u,!0);const r=[{value:"indoor_climb",label:"Indoor Climb",icon:"üßó"},{value:"outdoor_climb",label:"Outdoor Climb",icon:"‚õ∞Ô∏è"},{value:"gym_session",label:"Gym Session",icon:"üèãÔ∏è"},{value:"fingerboarding",label:"Fingerboarding",icon:"ü§è"},{value:"competition",label:"Competition",icon:"üèÜ"}];let h=y(""),q=y(!1),w=y(!1),m=y(nt([]));function C(){l(q,!0)}function S(){l(q,!1)}function V(){l(m,Ca(),!0),l(q,!1),l(w,!0)}function re(L){const{activityType:A,timeRange:k}=L,J=new Date,B=[];e(m).forEach(M=>{if(!(A!=="all"&&M.activityType!==A)){if(k!=="all_time"){const ve=new Date(M.date),b=(J.getTime()-ve.getTime())/(1e3*3600*24);switch(k){case"24_hours":if(b>1)return;break;case"7_days":if(b>7)return;break;case"30_days":if(b>30)return;break;case"1_year":if(b>365)return;break}}B.push(M.id)}}),l(w,!1),B.length>0&&(La(B),window.location.reload())}var ce=nl(),De=a(ce),te=s(a(De),2);te.__click=C,t(De);var ie=s(De,2);{var F=L=>{var A=rl(),k=Pe(A);k.__click=S;var J=s(k,2),B=a(J),M=s(a(B),2);M.__click=S,t(B);var ve=s(B,2),Z=a(ve),b=s(a(Z),2);b.__click=V,t(Z),t(ve),t(J),Ye(3,k,()=>fa,()=>({duration:200})),Ye(3,J,()=>ga,()=>({duration:200,start:.9})),i(L,A)};p(ie,L=>{e(q)&&L(F)})}var le=s(ie,2);sl(le,{get isOpen(){return e(w)},get sessions(){return e(m)},onClose:()=>l(w,!1),onDelete:re});var de=s(le,2),ne=a(de),G=s(a(ne),2),$=a(G);$.value=$.__value="";var _e=s($);Fe(_e,17,()=>r,L=>L.value,(L,A)=>{var k=il(),J=a(k);t(k);var B={};g(()=>{o(J,`${e(A).icon??""} ${e(A).label??""}`),B!==(B=e(A).value)&&(k.value=(k.__value=e(A).value)??"")}),i(L,k)}),t(G),t(ne);var fe=s(ne,2);{var we=L=>{var A=ll(),k=a(A);{var J=M=>{Ps(M,{})},B=M=>{var ve=He(),Z=Pe(ve);{var b=d=>{Wr(d,{})},c=d=>{var n=He(),_=Pe(n);{var D=oe=>{hi(oe,{})},U=oe=>{var O=He(),ye=Pe(O);{var ue=T=>{Fi(T,{})},Le=T=>{var ae=He(),P=Pe(ae);{var me=Se=>{Qi(Se,{})};p(P,Se=>{e(h)==="competition"&&Se(me)},!0)}i(T,ae)};p(ye,T=>{e(h)==="fingerboarding"?T(ue):T(Le,!1)},!0)}i(oe,O)};p(_,oe=>{e(h)==="gym_session"?oe(D):oe(U,!1)},!0)}i(d,n)};p(Z,d=>{e(h)==="outdoor_climb"?d(b):d(c,!1)},!0)}i(M,ve)};p(k,M=>{e(h)==="indoor_climb"?M(J):M(B,!1)})}t(A),i(L,A)};p(fe,L=>{e(h)&&L(we)})}t(de),t(ce),St(G,()=>e(h),L=>l(h,L)),i(ze,ce),mt()}_t(["click"]);export{ml as component};
