import{f as u,a as v,t as Be,c as Z}from"../chunks/BANvjMEk.js";import{ad as Ct,aE as xt,aw as Tt,_ as wt,aW as Ft,aX as Vt,o as Ge,ag as At,p as Lt,aT as C,aJ as lt,s as o,c as r,r as l,t as M,i as e,ap as ne,aU as Ot,aY as It,aK as n,a as Nt,f as $}from"../chunks/BIujM3vT.js";import{d as zt,s as H,e as rt}from"../chunks/B8kAwu97.js";import{i as k}from"../chunks/B3BYz1Zt.js";import{r as N,e as K,i as Y,a as De,b as z,c as Bt}from"../chunks/CJjZnxzT.js";import"../chunks/Czdzg1Yu.js";function Pe(s,d,f=!1){if(s.multiple){if(d==null)return;if(!wt(d))return Ft();for(var g of s.options)g.selected=d.includes(ee(g));return}for(g of s.options){var V=ee(g);if(Vt(V,d)){g.selected=!0;return}}(!f||d!==void 0)&&(s.selectedIndex=-1)}function it(s){var d=new MutationObserver(()=>{Pe(s,s.__value)});d.observe(s,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["value"]}),Tt(()=>{d.disconnect()})}function ve(s,d,f=d){var g=new WeakSet,V=!0;Ct(s,"change",q=>{var L=q?"[selected]":":checked",x;if(s.multiple)x=[].map.call(s.querySelectorAll(L),ee);else{var B=s.querySelector(L)??s.querySelector("option:not([disabled])");x=B&&ee(B)}f(x),Ge!==null&&g.add(Ge)}),xt(()=>{var q=d();if(s===document.activeElement){var L=At??Ge;if(g.has(L))return}if(Pe(s,q,V),V&&q===void 0){var x=s.querySelector(":checked");x!==null&&(q=ee(x),f(q))}s.__value=q,V=!1}),it(s)}function ee(s){return"__value"in s?s.__value:s.value}const nt="training_tracker_sessions";function Gt(){return crypto.randomUUID()}function ot(){return new Date().toISOString()}function Dt(){if(typeof localStorage>"u")return[];const s=localStorage.getItem(nt);if(!s)return[];try{return JSON.parse(s)}catch{return console.error("Failed to parse cached sessions"),[]}}function Pt(s){typeof localStorage>"u"||localStorage.setItem(nt,JSON.stringify(s))}function Et(s){const d={...s,id:Gt(),createdAt:ot(),updatedAt:ot(),syncStatus:"pending"},f=Dt();return f.push(d),Pt(f),d}function Mt(s){return Et({activityType:"indoor_climb",...s})}var Rt=u("<option> </option>"),jt=u('<div class="form-group svelte-1lf3qka"><label for="custom-location" class="svelte-1lf3qka">Custom Location</label> <input type="text" id="custom-location" placeholder="Enter location name..." class="svelte-1lf3qka"/></div>'),Jt=u("<option> </option>"),Ut=u("<option> </option>"),Wt=u('<th class="svelte-1lf3qka">Sport?</th>'),Ht=u('<td class="center svelte-1lf3qka"><input type="checkbox" class="svelte-1lf3qka"/></td>'),Kt=u('<span class="grade-error svelte-1lf3qka">Invalid</span>'),Yt=u("<option> </option>"),Xt=u('<button type="button" class="remove-btn svelte-1lf3qka">âœ•</button>'),Qt=u('<tr><!><td class="svelte-1lf3qka"><input type="text" placeholder="Route name..." class="svelte-1lf3qka"/></td><td class="svelte-1lf3qka"><input type="text" placeholder="V3"/> <!></td><td class="svelte-1lf3qka"><select class="svelte-1lf3qka"></select></td><td class="svelte-1lf3qka"><input type="number" min="1" class="svelte-1lf3qka"/></td><td><textarea placeholder="Notes..." class="svelte-1lf3qka"></textarea></td><td class="center svelte-1lf3qka"><!></td></tr>'),Zt=u("<div> </div>"),$t=u('<div class="form-content svelte-1lf3qka"><h3 class="svelte-1lf3qka">ğŸ§— Indoor Climb</h3> <div class="form-row svelte-1lf3qka"><div class="form-group svelte-1lf3qka"><label for="date" class="svelte-1lf3qka">Date</label> <input type="date" id="date" class="svelte-1lf3qka"/></div> <div class="form-group svelte-1lf3qka"><label for="location" class="svelte-1lf3qka">Location</label> <select id="location" class="svelte-1lf3qka"><option disabled>Select location...</option><!></select></div></div> <!> <div class="form-row svelte-1lf3qka"><div class="form-group svelte-1lf3qka"><label for="climbing-type" class="svelte-1lf3qka">Climbing Type</label> <select id="climbing-type" class="svelte-1lf3qka"><option disabled>Select type...</option><!></select></div> <div class="form-group svelte-1lf3qka"><label for="session-type" class="svelte-1lf3qka">Session Type</label> <select id="session-type" class="svelte-1lf3qka"><option disabled>Select session...</option><!></select></div></div> <div class="load-section svelte-1lf3qka"><h4 class="svelte-1lf3qka">Load Metrics</h4> <div class="load-metrics svelte-1lf3qka"><div class="load-item svelte-1lf3qka"><label for="finger-load" class="svelte-1lf3qka">Finger</label> <input type="number" id="finger-load" min="1" max="5" class="svelte-1lf3qka"/> <span class="load-scale svelte-1lf3qka">/ 5</span></div> <div class="load-item svelte-1lf3qka"><label for="shoulder-load" class="svelte-1lf3qka">Shoulder</label> <input type="number" id="shoulder-load" min="1" max="5" class="svelte-1lf3qka"/> <span class="load-scale svelte-1lf3qka">/ 5</span></div> <div class="load-item svelte-1lf3qka"><label for="forearm-load" class="svelte-1lf3qka">Forearm</label> <input type="number" id="forearm-load" min="1" max="5" class="svelte-1lf3qka"/> <span class="load-scale svelte-1lf3qka">/ 5</span></div></div></div> <div class="climbs-section svelte-1lf3qka"><h4 class="svelte-1lf3qka">Climbs</h4> <div class="table-container svelte-1lf3qka"><table class="climbs-table svelte-1lf3qka"><thead><tr><!><th class="svelte-1lf3qka">Name</th><th class="svelte-1lf3qka">Grade</th><th class="svelte-1lf3qka">Attempt</th><th class="svelte-1lf3qka">#</th><th class="svelte-1lf3qka">Notes</th><th class="svelte-1lf3qka"></th></tr></thead><tbody></tbody></table></div> <button type="button" class="add-btn svelte-1lf3qka">+ Add Climb</button></div> <div class="submit-section svelte-1lf3qka"><!> <button type="button" class="submit-btn svelte-1lf3qka"><!></button></div></div>');function ea(s,d){Lt(d,!0);const f=["Rockstar Swindon","Flashpoint Swindon","Flashpoint Bristol","Redpoint Bristol","TCH Bristol","Other"],g=["Bouldering","Sport","Mixed"],V=["Projecting","Onsighting","Campusing"],q=["Flash","Redpoint","Dogged"],x=["V0-","4-","V0","4","V0+","4+","V1","5","V2","5+","V3","6A","V4","6B","V5","6C","V6","7A","V7","7A+","V8","7B","7B+","V9","7C","V10","7C+","V11","8A","V12","8A+","V13","8B","V14","8B+","V15","8C","V16","8C+","V17","9A"].map(t=>t.toLowerCase());let B=C(null),J=C(lt(new Date().toISOString().split("T")[0])),w=C(""),b=C(""),p=C(""),y=C(""),G=C(3),O=C(3),F=C(3),h=C(lt([{isSport:!1,name:"",grade:"",attemptType:"Flash",attemptsNum:1,notes:""}]));function de(){n(h,[...e(h),{isSport:!1,name:"",grade:"",attemptType:"Flash",attemptsNum:1,notes:""}],!0)}function ce(t){n(h,e(h).filter((a,i)=>i!==t),!0)}function ue(t,a){e(h)[t].attemptType=a,a==="Flash"&&(e(h)[t].attemptsNum=1)}function D(t){n(B,t,!0)}function te(){n(B,null)}let ae=Ot(()=>e(p)==="Mixed");function fe(t){return e(p)==="Sport"?!0:e(p)==="Bouldering"?!1:t.isSport}function X(t){return t.trim()?x.includes(t.trim().toLowerCase()):!0}let _=C("idle"),I=C("");function pe(){return e(w)?e(w)==="Other"&&!e(b).trim()?"Please enter a custom location":e(p)?e(y)?e(h).filter(a=>a.grade.trim()&&!X(a.grade)).length>0?"Please fix invalid grades":null:"Please select a session type":"Please select a climbing type":"Please select a location"}function _e(){const t=pe();if(t){n(_,"error"),n(I,t,!0);return}n(_,"saving");try{const a=e(h).map(i=>({...i,isSport:fe(i)}));Mt({date:e(J),location:e(w)==="Other"?e(b):e(w),customLocation:e(w)==="Other"?e(b):void 0,climbingType:e(p),sessionType:e(y),fingerLoad:e(G),shoulderLoad:e(O),forearmLoad:e(F),climbs:a}),n(_,"success"),n(I,"Session saved locally! Will sync when online."),setTimeout(()=>{me()},2e3)}catch(a){n(_,"error"),n(I,"Failed to save session"),console.error("Save error:",a)}}function me(){n(J,new Date().toISOString().split("T")[0],!0),n(w,""),n(b,""),n(p,""),n(y,""),n(G,3),n(O,3),n(F,3),n(h,[{isSport:!1,name:"",grade:"",attemptType:"Flash",attemptsNum:1,notes:""}],!0),n(_,"idle"),n(I,"")}var A=$t(),U=o(r(A),2),Q=r(U),se=o(r(Q),2);N(se),l(Q);var W=o(Q,2),ge=o(r(W),2),be=r(ge);be.value=be.__value="";var vt=o(be);K(vt,17,()=>f,Y,(t,a)=>{var i=Rt(),m=r(i,!0);l(i);var S={};M(()=>{H(m,e(a)),S!==(S=e(a))&&(i.value=(i.__value=e(a))??"")}),v(t,i)}),l(ge),l(W),l(U);var Ee=o(U,2);{var dt=t=>{var a=jt(),i=o(r(a),2);N(i),l(a),z(i,()=>e(b),m=>n(b,m)),v(t,a)};k(Ee,t=>{e(w)==="Other"&&t(dt)})}var he=o(Ee,2),ke=r(he),qe=o(r(ke),2),ye=r(qe);ye.value=ye.__value="";var ct=o(ye);K(ct,17,()=>g,Y,(t,a)=>{var i=Jt(),m=r(i,!0);l(i);var S={};M(()=>{H(m,e(a)),S!==(S=e(a))&&(i.value=(i.__value=e(a))??"")}),v(t,i)}),l(qe),l(ke);var Me=o(ke,2),Se=o(r(Me),2),Ce=r(Se);Ce.value=Ce.__value="";var ut=o(Ce);K(ut,17,()=>V,Y,(t,a)=>{var i=Ut(),m=r(i,!0);l(i);var S={};M(()=>{H(m,e(a)),S!==(S=e(a))&&(i.value=(i.__value=e(a))??"")}),v(t,i)}),l(Se),l(Me),l(he);var xe=o(he,2),Re=o(r(xe),2),Te=r(Re),je=o(r(Te),2);N(je),ne(2),l(Te);var we=o(Te,2),Je=o(r(we),2);N(Je),ne(2),l(we);var Ue=o(we,2),We=o(r(Ue),2);N(We),ne(2),l(Ue),l(Re),l(xe);var Fe=o(xe,2),Ve=o(r(Fe),2),He=r(Ve),Ae=r(He),Ke=r(Ae),ft=r(Ke);{var pt=t=>{var a=Wt();v(t,a)};k(ft,t=>{e(ae)&&t(pt)})}ne(6),l(Ke),l(Ae);var Ye=o(Ae);K(Ye,21,()=>e(h),Y,(t,a,i)=>{var m=Qt(),S=r(m);{var P=c=>{var T=Ht(),E=r(T);N(E),l(T),Bt(E,()=>e(a).isSport,ze=>e(a).isSport=ze),v(c,T)};k(S,c=>{e(ae)&&c(P)})}var R=o(S),Ze=r(R);N(Ze),l(R);var Le=o(R),re=r(Le);N(re);let $e;var kt=o(re,2);{var qt=c=>{var T=Kt();v(c,T)};k(kt,c=>{X(e(a).grade)||c(qt)})}l(Le);var Oe=o(Le),j=r(Oe);j.__change=c=>ue(i,c.target.value),K(j,21,()=>q,Y,(c,T)=>{var E=Yt(),ze=r(E,!0);l(E);var st={};M(()=>{H(ze,e(T)),st!==(st=e(T))&&(E.value=(E.__value=e(T))??"")}),v(c,E)}),l(j);var et;it(j),l(Oe);var Ie=o(Oe),Ne=r(Ie);N(Ne),l(Ie);var oe=o(Ie);let tt;var ie=r(oe);It(ie),l(oe);var at=o(oe),yt=r(at);{var St=c=>{var T=Xt();T.__click=()=>ce(i),v(c,T)};k(yt,c=>{e(h).length>1&&c(St)})}l(at),l(m),M(c=>{$e=De(re,1,"grade-input svelte-1lf3qka",null,$e,c),et!==(et=e(a).attemptType)&&(j.value=(j.__value=e(a).attemptType)??"",Pe(j,e(a).attemptType)),Ne.disabled=e(a).attemptType==="Flash",tt=De(oe,1,"notes-cell svelte-1lf3qka",null,tt,{expanded:e(B)===i})},[()=>({invalid:!X(e(a).grade)})]),z(Ze,()=>e(a).name,c=>e(a).name=c),z(re,()=>e(a).grade,c=>e(a).grade=c),z(Ne,()=>e(a).attemptsNum,c=>e(a).attemptsNum=c),rt("focus",ie,()=>D(i)),rt("blur",ie,te),z(ie,()=>e(a).notes,c=>e(a).notes=c),v(t,m)}),l(Ye),l(He),l(Ve);var _t=o(Ve,2);_t.__click=de,l(Fe);var Xe=o(Fe,2),Qe=r(Xe);{var mt=t=>{var a=Zt();let i;var m=r(a,!0);l(a),M(()=>{i=De(a,1,"save-message svelte-1lf3qka",null,i,{success:e(_)==="success",error:e(_)==="error"}),H(m,e(I))}),v(t,a)};k(Qe,t=>{e(I)&&t(mt)})}var le=o(Qe,2);le.__click=_e;var gt=r(le);{var bt=t=>{var a=Be("Saving...");v(t,a)},ht=t=>{var a=Z(),i=$(a);{var m=P=>{var R=Be("âœ“ Saved!");v(P,R)},S=P=>{var R=Be("Save Session");v(P,R)};k(i,P=>{e(_)==="success"?P(m):P(S,!1)},!0)}v(t,a)};k(gt,t=>{e(_)==="saving"?t(bt):t(ht,!1)})}l(le),l(Xe),l(A),M(()=>le.disabled=e(_)==="saving"),z(se,()=>e(J),t=>n(J,t)),ve(ge,()=>e(w),t=>n(w,t)),ve(qe,()=>e(p),t=>n(p,t)),ve(Se,()=>e(y),t=>n(y,t)),z(je,()=>e(G),t=>n(G,t)),z(Je,()=>e(O),t=>n(O,t)),z(We,()=>e(F),t=>n(F,t)),v(s,A),Nt()}zt(["change","click"]);var ta=u('<div class="form-content svelte-15o2ys1"><h3 class="svelte-15o2ys1">â›°ï¸ Outdoor Climb</h3> <p class="form-placeholder svelte-15o2ys1">Outdoor climbing form fields will go here</p></div>');function aa(s){var d=ta();v(s,d)}var sa=u('<div class="form-content svelte-1w0zsmt"><h3 class="svelte-1w0zsmt">ğŸ‹ï¸ Gym Session</h3> <p class="form-placeholder svelte-1w0zsmt">Gym session form fields will go here</p></div>');function la(s){var d=sa();v(s,d)}var ra=u('<div class="form-content svelte-1m63nqt"><h3 class="svelte-1m63nqt">ğŸ¤ Fingerboarding</h3> <p class="form-placeholder svelte-1m63nqt">Fingerboarding form fields will go here</p></div>');function oa(s){var d=ra();v(s,d)}var ia=u('<div class="form-content svelte-1fje4dh"><h3 class="svelte-1fje4dh">ğŸ† Competition</h3> <p class="form-placeholder svelte-1fje4dh">Competition form fields will go here</p></div>');function na(s){var d=ia();v(s,d)}var va=u("<option> </option>"),da=u('<div class="form-container svelte-b2zgdd"><!></div>'),ca=u('<div class="page svelte-b2zgdd"><div class="page-header svelte-b2zgdd"><h1 class="svelte-b2zgdd">ğŸ“ Log Data</h1> <p class="subtitle svelte-b2zgdd">Record your training sessions</p></div> <div class="content-card svelte-b2zgdd"><div class="form-group svelte-b2zgdd"><label for="activity-type" class="svelte-b2zgdd">Activity Type</label> <select id="activity-type" class="svelte-b2zgdd"><option disabled>Select an activity...</option><!></select></div> <!></div></div>');function ba(s){const d=[{value:"indoor_climb",label:"Indoor Climb",icon:"ğŸ§—"},{value:"outdoor_climb",label:"Outdoor Climb",icon:"â›°ï¸"},{value:"gym_session",label:"Gym Session",icon:"ğŸ‹ï¸"},{value:"fingerboarding",label:"Fingerboarding",icon:"ğŸ¤"},{value:"competition",label:"Competition",icon:"ğŸ†"}];let f=C("");var g=ca(),V=o(r(g),2),q=r(V),L=o(r(q),2),x=r(L);x.value=x.__value="";var B=o(x);K(B,17,()=>d,Y,(b,p)=>{var y=va(),G=r(y);l(y);var O={};M(()=>{H(G,`${e(p).icon??""} ${e(p).label??""}`),O!==(O=e(p).value)&&(y.value=(y.__value=e(p).value)??"")}),v(b,y)}),l(L),l(q);var J=o(q,2);{var w=b=>{var p=da(),y=r(p);{var G=F=>{ea(F,{})},O=F=>{var h=Z(),de=$(h);{var ce=D=>{aa(D)},ue=D=>{var te=Z(),ae=$(te);{var fe=_=>{la(_)},X=_=>{var I=Z(),pe=$(I);{var _e=A=>{oa(A)},me=A=>{var U=Z(),Q=$(U);{var se=W=>{na(W)};k(Q,W=>{e(f)==="competition"&&W(se)},!0)}v(A,U)};k(pe,A=>{e(f)==="fingerboarding"?A(_e):A(me,!1)},!0)}v(_,I)};k(ae,_=>{e(f)==="gym_session"?_(fe):_(X,!1)},!0)}v(D,te)};k(de,D=>{e(f)==="outdoor_climb"?D(ce):D(ue,!1)},!0)}v(F,h)};k(y,F=>{e(f)==="indoor_climb"?F(G):F(O,!1)})}l(p),v(b,p)};k(J,b=>{e(f)&&b(w)})}l(V),l(g),ve(L,()=>e(f),b=>n(f,b)),v(s,g)}export{ba as component};
