import{f as l,a as r,c as Xe,t as Ta}from"../chunks/CKcnA5P_.js";import{p as _a,c as t,s,j as e,aV as C,r as a,t as m,a as ua,F as n,f as Ge,aW as la,E as ba,o as Ba,aG as La,b8 as Wa,d as Za}from"../chunks/4c6jdw0Z.js";import{d as oa,s as d}from"../chunks/K94srNfd.js";import{i as _}from"../chunks/CK8hGvwc.js";import{s as Ye,r as va,e as xe,i as ke,b as na}from"../chunks/BVSa1UsB.js";import{t as ta,k as fa,D as Oa,s as Na,l as Ka,g as Xa,b as Ya,m as Qa,E as $a,n as et,o as at,p as tt,d as st,q as it}from"../chunks/Dsikxa4z.js";import{c as qa,l as Ma,n as Ua,o as ja,p as Ia,q as Ra,t as Pa,v as rt}from"../chunks/ChylFdpu.js";import{s as aa}from"../chunks/9PGhKrW6.js";import{s as ea}from"../chunks/CzX-2X6y.js";import{p as Ha}from"../chunks/CfB7tKQ8.js";var lt=l('<span class="chevron svelte-12crvy">‚ñ≤</span>'),vt=l('<span class="chevron svelte-12crvy">‚ñº</span>'),nt=l('<div class="input-with-action svelte-12crvy"><input type="text" id="location-manual" placeholder="Custom location..." class="flat-left svelte-12crvy"/> <button type="button" class="action-btn flat-right svelte-12crvy" title="Back to list">‚úï</button></div>'),ot=l("<option> </option>"),dt=l('<select id="location-filter" class="svelte-12crvy"><option>Any Location</option><!></select>'),ct=l("<option> </option>"),_t=l("<option> </option>"),ut=l('<div class="filter-body svelte-12crvy"><div class="filter-grid svelte-12crvy"><div class="filter-item svelte-12crvy"><label for="start-date" class="svelte-12crvy">Start Date</label> <input type="date" id="start-date" class="svelte-12crvy"/></div> <div class="filter-item svelte-12crvy"><label for="end-date" class="svelte-12crvy">End Date</label> <input type="date" id="end-date" class="svelte-12crvy"/></div> <div class="filter-item svelte-12crvy"><label for="location-filter" class="svelte-12crvy">Location</label> <!></div> <div class="filter-item svelte-12crvy"><label for="climbing-type-filter" class="svelte-12crvy">Climb Type</label> <select id="climbing-type-filter" class="svelte-12crvy"><option>Any Type</option><!></select></div> <div class="filter-item svelte-12crvy"><label for="session-type-filter" class="svelte-12crvy">Session Type</label> <select id="session-type-filter" class="svelte-12crvy"><option>Any Type</option><!></select></div> <div class="filter-item svelte-12crvy"><label for="grade-filter" class="svelte-12crvy">Grade (Exact)</label> <input type="text" id="grade-filter" placeholder="e.g. V4" class="svelte-12crvy"/></div></div> <div class="filter-actions svelte-12crvy"><button class="reset-btn svelte-12crvy">Reset Filters</button></div></div>'),ft=l('<div class="filter-container svelte-12crvy"><button class="filter-header svelte-12crvy"><div class="header-content svelte-12crvy"><span class="icon svelte-12crvy">üîç</span> <span class="title svelte-12crvy">Filters</span> <!></div></button> <!></div>');function gt(he,i){_a(i,!0);const w=["Rockstar Swindon","Flashpoint Swindon","Flashpoint Bristol","Redpoint Bristol","TCH Bristol","Other"],h=["Bouldering","Sport","Mixed"],z=["Projecting","Onsighting","Campusing","Repeaters"];let S=C(!1),g=C(""),k=C(""),y=C(""),F=C(""),U=C(""),V=C(""),ne=C(!1);function P(){n(S,!e(S))}function Y(){n(g,""),n(k,""),n(y,""),n(F,""),n(ne,!1),n(U,""),n(V,""),M()}function M(){i.onFilterParamsChange({startDate:e(g),endDate:e(k),location:e(y),climbingType:e(F),sessionType:e(U),grade:e(V)})}function ee(){e(y)==="Other"?(n(ne,!0),n(y,"")):M()}function de(){n(ne,!1),n(y,""),M()}var K=ft(),H=t(K);H.__click=P;var X=t(H),se=s(t(X),4);{var ce=x=>{var j=lt();r(x,j)},J=x=>{var j=vt();r(x,j)};_(se,x=>{e(S)?x(ce):x(J,!1)})}a(X),a(H);var oe=s(H,2);{var b=x=>{var j=ut(),Z=t(j),A=t(Z),Q=s(t(A),2);va(Q),Q.__change=M,a(A);var ie=s(A,2),c=s(t(ie),2);va(c),c.__change=M,a(ie);var p=s(ie,2),u=s(t(p),2);{var v=q=>{var I=nt(),le=t(I);va(le),le.__input=M;var Ce=s(le,2);Ce.__click=de,a(I),na(le,()=>e(y),G=>n(y,G)),r(q,I)},o=q=>{var I=dt();I.__change=ee;var le=t(I);le.value=le.__value="";var Ce=s(le);xe(Ce,17,()=>w,ke,(G,$)=>{var Se=ot(),ae=t(Se,!0);a(Se);var re={};m(()=>{d(ae,e($)),re!==(re=e($))&&(Se.value=(Se.__value=e($))??"")}),r(G,Se)}),a(I),qa(I,()=>e(y),G=>n(y,G)),r(q,I)};_(u,q=>{e(ne)?q(v):q(o,!1)})}a(p);var T=s(p,2),N=s(t(T),2);N.__change=M;var te=t(N);te.value=te.__value="";var ge=s(te);xe(ge,17,()=>h,ke,(q,I)=>{var le=ct(),Ce=t(le,!0);a(le);var G={};m(()=>{d(Ce,e(I)),G!==(G=e(I))&&(le.value=(le.__value=e(I))??"")}),r(q,le)}),a(N),a(T);var Le=s(T,2),pe=s(t(Le),2);pe.__change=M;var ue=t(pe);ue.value=ue.__value="";var L=s(ue);xe(L,17,()=>z,ke,(q,I)=>{var le=_t(),Ce=t(le,!0);a(le);var G={};m(()=>{d(Ce,e(I)),G!==(G=e(I))&&(le.value=(le.__value=e(I))??"")}),r(q,le)}),a(pe),a(Le);var E=s(Le,2),me=s(t(E),2);va(me),me.__input=M,a(E),a(Z);var be=s(Z,2),we=t(be);we.__click=Y,a(be),a(j),na(Q,()=>e(g),q=>n(g,q)),na(c,()=>e(k),q=>n(k,q)),qa(N,()=>e(F),q=>n(F,q)),qa(pe,()=>e(U),q=>n(U,q)),na(me,()=>e(V),q=>n(V,q)),ta(3,j,()=>fa,()=>({duration:200})),r(x,j)};_(oe,x=>{e(S)&&x(b)})}a(K),m(()=>Ye(H,"aria-expanded",e(S))),r(he,K),ua()}oa(["click","change","input"]);var pt=l('<span class="climb-type-tag svelte-yz0xxt"> </span>'),mt=l('<span class="notes-preview svelte-yz0xxt"> </span>'),ht=l('<span class="attempts-count svelte-yz0xxt"> </span>'),bt=l('<div class="detail-row svelte-yz0xxt"><span class="label svelte-yz0xxt">Notes:</span> <p class="notes svelte-yz0xxt"> </p></div>'),yt=l('<p class="empty-notes svelte-yz0xxt">No notes for this climb.</p>'),xt=l('<div class="climb-details svelte-yz0xxt"><!> <div class="tags svelte-yz0xxt"><span class="tag type svelte-yz0xxt"> </span> <span class="tag attempt-text svelte-yz0xxt"> </span></div></div>'),wt=l('<div><div class="climb-header svelte-yz0xxt" role="button" tabindex="0"><div class="climb-main-info svelte-yz0xxt"><span> </span> <span class="climb-name svelte-yz0xxt"> </span> <!> <!></div> <div class="climb-meta svelte-yz0xxt"><span><span class="icon svelte-yz0xxt"> </span> <!></span> <button class="delete-btn svelte-yz0xxt" aria-label="Delete climb" title="Delete climb">üóëÔ∏è</button> <span class="chevron svelte-yz0xxt"> </span></div></div> <!></div>');function St(he,i){_a(i,!0);let w=Ha(i,"showClimbType",3,!1),h=C(!1);function z(){n(h,!e(h))}function S(c){c.stopPropagation(),i.onDelete()}const g={Flash:"‚ö°",Onsight:"üëÅÔ∏è",Redpoint:"üî¥",Dogged:"üõ†Ô∏è",DNF:"‚ùå"};var k=wt();let y;var F=t(k);F.__click=z,F.__keydown=c=>(c.key==="Enter"||c.key===" ")&&z();var U=t(F),V=t(U);let ne;var P=t(V,!0);a(V);var Y=s(V,2),M=t(Y,!0);a(Y);var ee=s(Y,2);{var de=c=>{var p=pt(),u=t(p,!0);a(p),m(()=>d(u,i.climb.isSport?"Sport":"Boulder")),r(c,p)};_(ee,c=>{w()&&c(de)})}var K=s(ee,2);{var H=c=>{var p=mt(),u=t(p);a(p),m(()=>d(u,`- ${i.climb.notes??""}`)),r(c,p)};_(K,c=>{!e(h)&&i.climb.notes&&c(H)})}a(U);var X=s(U,2),se=t(X);let ce;var J=t(se),oe=t(J,!0);a(J);var b=s(J,2);{var x=c=>{var p=ht(),u=t(p,!0);a(p),m(()=>d(u,i.climb.attemptsNum)),r(c,p)};_(b,c=>{i.climb.attemptType!=="Flash"&&i.climb.attemptType!=="Onsight"&&c(x)})}a(se);var j=s(se,2);j.__click=S;var Z=s(j,2),A=t(Z,!0);a(Z),a(X),a(F);var Q=s(F,2);{var ie=c=>{var p=xt(),u=t(p);{var v=pe=>{var ue=bt(),L=s(t(ue),2),E=t(L,!0);a(L),a(ue),m(()=>d(E,i.climb.notes)),r(pe,ue)},o=pe=>{var ue=yt();r(pe,ue)};_(u,pe=>{i.climb.notes?pe(v):pe(o,!1)})}var T=s(u,2),N=t(T),te=t(N,!0);a(N);var ge=s(N,2),Le=t(ge,!0);a(ge),a(T),a(p),m(()=>{d(te,i.climb.isSport?"Sport":"Boulder"),d(Le,i.climb.attemptType)}),ta(3,p,()=>fa,()=>({duration:150})),r(c,p)};_(Q,c=>{e(h)&&c(ie)})}a(k),m(()=>{y=aa(k,1,"climb-entry svelte-yz0xxt",null,y,{expanded:e(h)}),Ye(F,"aria-expanded",e(h)),ne=aa(V,1,"grade-badge svelte-yz0xxt",null,ne,{sport:i.climb.isSport}),d(P,i.climb.grade),d(M,i.climb.name||"Unnamed Route"),ce=aa(se,1,"attempt-type svelte-yz0xxt",null,ce,{flash:i.climb.attemptType==="Flash"}),d(oe,g[i.climb.attemptType]||i.climb.attemptType),d(A,e(h)?"‚ñ≤":"‚ñº")}),r(he,k),ua()}oa(["click","keydown"]);var Dt=l('<span class="stat svelte-7vqogn"> </span>'),kt=l('<span class="status-icon pending svelte-7vqogn" title="Waiting to sync">üîÑ</span>'),Tt=l('<span class="status-icon error svelte-7vqogn" title="Sync error">‚ö†Ô∏è</span>'),qt=l('<span class="chip svelte-7vqogn"> </span>'),Ct=l('<span class="text-none svelte-7vqogn">None</span>'),zt=l('<div class="detail-item svelte-7vqogn"><span class="label svelte-7vqogn">Difficulty</span> <span class="value svelte-7vqogn"> </span></div>'),Ft=l('<span class="chip svelte-7vqogn"> </span>'),Lt=l('<span class="text-none svelte-7vqogn">None</span>'),Et=l('<div class="detail-item svelte-7vqogn"><span class="label svelte-7vqogn">Category</span> <div class="value-chips svelte-7vqogn"><!></div></div>'),Gt=l('<span class="chip svelte-7vqogn"> </span>'),jt=l('<span class="text-none svelte-7vqogn">None</span>'),Ot=l('<div class="detail-item svelte-7vqogn"><span class="label svelte-7vqogn">Focus</span> <div class="value-chips svelte-7vqogn"><!></div></div>'),At=l('<span class="chip svelte-7vqogn"> </span>'),Nt=l('<span class="text-none svelte-7vqogn">None</span>'),Mt=l('<div class="detail-item svelte-7vqogn"><span class="label svelte-7vqogn">Energy System</span> <div class="value-chips svelte-7vqogn"><!></div></div>'),It=l('<span class="chip svelte-7vqogn"> </span>'),Rt=l('<span class="text-none svelte-7vqogn">None</span>'),Pt=l('<div class="detail-item svelte-7vqogn"><span class="label svelte-7vqogn">Wall Angle</span> <div class="value-chips svelte-7vqogn"><!></div></div>'),Bt=l('<div class="metric svelte-7vqogn"><span class="label svelte-7vqogn">Open Grip</span> <div class="bar-container svelte-7vqogn"><div class="bar-fill svelte-7vqogn"></div></div> <span class="score svelte-7vqogn"> </span></div>'),Vt=l('<div class="metric svelte-7vqogn"><span class="label svelte-7vqogn">Crimp Grip</span> <div class="bar-container svelte-7vqogn"><div class="bar-fill svelte-7vqogn"></div></div> <span class="score svelte-7vqogn"> </span></div>'),Wt=l('<div class="metric svelte-7vqogn"><span class="label svelte-7vqogn">Pinch Grip</span> <div class="bar-container svelte-7vqogn"><div class="bar-fill svelte-7vqogn"></div></div> <span class="score svelte-7vqogn"> </span></div>'),Ut=l('<div class="metric svelte-7vqogn"><span class="label svelte-7vqogn">Sloper Grip</span> <div class="bar-container svelte-7vqogn"><div class="bar-fill svelte-7vqogn"></div></div> <span class="score svelte-7vqogn"> </span></div>'),Ht=l('<div class="metric svelte-7vqogn"><span class="label svelte-7vqogn">Jug Grip</span> <div class="bar-container svelte-7vqogn"><div class="bar-fill svelte-7vqogn"></div></div> <span class="score svelte-7vqogn"> </span></div>'),Jt=l('<p class="no-climbs svelte-7vqogn">No climbs logged for this session.</p>'),Zt=l('<div class="card-body svelte-7vqogn"><div class="details-grid svelte-7vqogn"><div class="detail-item svelte-7vqogn"><span class="label svelte-7vqogn">Training Type</span> <div class="value-chips svelte-7vqogn"><!></div></div> <!> <!> <!> <!> <!></div> <div class="metrics-container svelte-7vqogn"><div class="metric svelte-7vqogn"><span class="label svelte-7vqogn">Finger Load</span> <div class="bar-container svelte-7vqogn"><div class="bar-fill svelte-7vqogn"></div></div> <span class="score svelte-7vqogn"> </span></div> <div class="metric svelte-7vqogn"><span class="label svelte-7vqogn">Shoulder Load</span> <div class="bar-container svelte-7vqogn"><div class="bar-fill svelte-7vqogn"></div></div> <span class="score svelte-7vqogn"> </span></div> <div class="metric svelte-7vqogn"><span class="label svelte-7vqogn">Forearm Load</span> <div class="bar-container svelte-7vqogn"><div class="bar-fill svelte-7vqogn"></div></div> <span class="score svelte-7vqogn"> </span></div> <!> <!> <!> <!> <!></div> <div class="climbs-list svelte-7vqogn"><h4 class="svelte-7vqogn">Climbs</h4> <div class="climbs-container svelte-7vqogn"><!> <!></div></div></div>'),Kt=l('<div><div class="card-header svelte-7vqogn" role="button" tabindex="0"><div class="header-main svelte-7vqogn"><div class="date-badge svelte-7vqogn"><span class="day svelte-7vqogn"> </span> <span class="month svelte-7vqogn"> </span></div> <div class="session-info svelte-7vqogn"><div class="session-text svelte-7vqogn"><h3 class="location svelte-7vqogn"> </h3> <div class="session-meta svelte-7vqogn"><span class="type-tag svelte-7vqogn"> </span> <span class="stat svelte-7vqogn"> </span> <!></div></div> <div class="load-summary svelte-7vqogn"><div class="load-badge finger svelte-7vqogn"> </div> <div class="load-badge shoulder svelte-7vqogn"> </div> <div class="load-badge forearm svelte-7vqogn"> </div></div></div></div> <div class="header-actions"><div class="header-status svelte-7vqogn"><!></div>  <button class="btn-icon delete-session" title="Delete Session">üóëÔ∏è</button> <span class="chevron svelte-7vqogn"> </span></div></div> <!></div> <!>',1);function Xt(he,i){_a(i,!0);let w=C(!1),h=C(!1);function z(){n(w,!e(w))}function S(){n(h,!0)}function g(){Ma(i.session.id),n(h,!1),i.onDelete()}function k(q){const I=[...i.session.climbs];I.splice(q,1),Ua(i.session.id,{climbs:I}),i.onDelete()}let y=la(()=>i.session.climbs?.length??0),F=la(()=>(i.session.climbs||[]).reduce((q,I)=>{const le=parseInt(I.grade.replace(/\D/g,""))||0,Ce=parseInt(q.replace(/\D/g,""))||0;return le>Ce?I.grade:q},"V0"));var U=Kt(),V=Ge(U);let ne;var P=t(V);P.__click=z,P.__keydown=q=>q.key==="Enter"&&z();var Y=t(P),M=t(Y),ee=t(M),de=t(ee,!0);a(ee);var K=s(ee,2),H=t(K,!0);a(K),a(M);var X=s(M,2),se=t(X),ce=t(se),J=t(ce,!0);a(ce);var oe=s(ce,2),b=t(oe),x=t(b,!0);a(b);var j=s(b,2),Z=t(j);a(j);var A=s(j,2);{var Q=q=>{var I=Dt(),le=t(I);a(I),m(()=>d(le,`Max: ${e(F)??""}`)),r(q,I)};_(A,q=>{e(y)>0&&q(Q)})}a(oe),a(se);var ie=s(se,2),c=t(ie),p=t(c,!0);a(c);var u=s(c,2),v=t(u,!0);a(u);var o=s(u,2),T=t(o,!0);a(o),a(ie),a(X),a(Y);var N=s(Y,2),te=t(N),ge=t(te);{var Le=q=>{var I=kt();r(q,I)},pe=q=>{var I=Xe(),le=Ge(I);{var Ce=G=>{var $=Tt();r(G,$)};_(le,G=>{i.session.syncStatus==="error"&&G(Ce)},!0)}r(q,I)};_(ge,q=>{i.session.syncStatus==="pending"?q(Le):q(pe,!1)})}a(te);var ue=s(te,2);ue.__click=q=>{q.stopPropagation(),S()};var L=s(ue,2),E=t(L,!0);a(L),a(N),a(P);var me=s(P,2);{var be=q=>{var I=Zt(),le=t(I),Ce=t(le),G=s(t(Ce),2),$=t(G);{var Se=B=>{var R=Xe(),f=Ge(R);xe(f,17,()=>i.session.trainingTypes,ke,(D,O)=>{var ve=qt(),W=t(ve,!0);a(ve),m(()=>d(W,e(O))),r(D,ve)}),r(B,R)},ae=B=>{var R=Ct();r(B,R)};_($,B=>{i.session.trainingTypes&&i.session.trainingTypes.length>0&&!i.session.trainingTypes.includes("None")?B(Se):B(ae,!1)})}a(G),a(Ce);var re=s(Ce,2);{var _e=B=>{var R=zt(),f=s(t(R),2),D=t(f,!0);a(f),a(R),m(()=>d(D,i.session.difficulty)),r(B,R)};_(re,B=>{i.session.difficulty&&B(_e)})}var je=s(re,2);{var ye=B=>{var R=Et(),f=s(t(R),2),D=t(f);{var O=W=>{var fe=Xe(),De=Ge(fe);xe(De,17,()=>i.session.categories,ke,(Pe,ma)=>{var Be=Ft(),ha=t(Be,!0);a(Be),m(()=>d(ha,e(ma))),r(Pe,Be)}),r(W,fe)},ve=W=>{var fe=Lt();r(W,fe)};_(D,W=>{i.session.categories.length>0&&!i.session.categories.includes("None")?W(O):W(ve,!1)})}a(f),a(R),r(B,R)};_(je,B=>{i.session.categories?.length&&B(ye)})}var ze=s(je,2);{var Te=B=>{var R=Ot(),f=s(t(R),2),D=t(f);{var O=W=>{var fe=Xe(),De=Ge(fe);xe(De,17,()=>i.session.techniqueFocuses,ke,(Pe,ma)=>{var Be=Gt(),ha=t(Be,!0);a(Be),m(()=>d(ha,e(ma))),r(Pe,Be)}),r(W,fe)},ve=W=>{var fe=jt();r(W,fe)};_(D,W=>{i.session.techniqueFocuses.length>0&&!i.session.techniqueFocuses.includes("None")?W(O):W(ve,!1)})}a(f),a(R),r(B,R)};_(ze,B=>{i.session.techniqueFocuses?.length&&B(Te)})}var Fe=s(ze,2);{var qe=B=>{var R=Mt(),f=s(t(R),2),D=t(f);{var O=W=>{var fe=Xe(),De=Ge(fe);xe(De,17,()=>i.session.energySystems,ke,(Pe,ma)=>{var Be=At(),ha=t(Be,!0);a(Be),m(()=>d(ha,e(ma))),r(Pe,Be)}),r(W,fe)},ve=W=>{var fe=Nt();r(W,fe)};_(D,W=>{i.session.energySystems.length>0&&!i.session.energySystems.includes("None")?W(O):W(ve,!1)})}a(f),a(R),r(B,R)};_(Fe,B=>{i.session.energySystems?.length&&B(qe)})}var Oe=s(Fe,2);{var Qe=B=>{var R=Pt(),f=s(t(R),2),D=t(f);{var O=W=>{var fe=Xe(),De=Ge(fe);xe(De,17,()=>i.session.wallAngles,ke,(Pe,ma)=>{var Be=It(),ha=t(Be,!0);a(Be),m(()=>d(ha,e(ma))),r(Pe,Be)}),r(W,fe)},ve=W=>{var fe=Rt();r(W,fe)};_(D,W=>{i.session.wallAngles.length>0&&!i.session.wallAngles.includes("None")?W(O):W(ve,!1)})}a(f),a(R),r(B,R)};_(Oe,B=>{i.session.wallAngles?.length&&B(Qe)})}a(le);var Ze=s(le,2),Ae=t(Ze),Ve=s(t(Ae),2),Ne=t(Ve);a(Ve);var Me=s(Ve,2),da=t(Me);a(Me),a(Ae);var Ke=s(Ae,2),ga=s(t(Ke),2),sa=t(ga);a(ga);var ia=s(ga,2),pa=t(ia);a(ia),a(Ke);var Ee=s(Ke,2),We=s(t(Ee),2),Ue=t(We);a(We);var $e=s(We,2),Ie=t($e);a($e),a(Ee);var Re=s(Ee,2);{var ra=B=>{var R=Bt(),f=s(t(R),2),D=t(f);a(f);var O=s(f,2),ve=t(O);a(O),a(R),m(()=>{ea(D,`width: ${i.session.openGrip/5*100}%`),d(ve,`${i.session.openGrip??""}/5`)}),r(B,R)};_(Re,B=>{i.session.openGrip&&B(ra)})}var He=s(Re,2);{var Ca=B=>{var R=Vt(),f=s(t(R),2),D=t(f);a(f);var O=s(f,2),ve=t(O);a(O),a(R),m(()=>{ea(D,`width: ${i.session.crimpGrip/5*100}%`),d(ve,`${i.session.crimpGrip??""}/5`)}),r(B,R)};_(He,B=>{i.session.crimpGrip&&B(Ca)})}var ya=s(He,2);{var Sa=B=>{var R=Wt(),f=s(t(R),2),D=t(f);a(f);var O=s(f,2),ve=t(O);a(O),a(R),m(()=>{ea(D,`width: ${i.session.pinchGrip/5*100}%`),d(ve,`${i.session.pinchGrip??""}/5`)}),r(B,R)};_(ya,B=>{i.session.pinchGrip&&B(Sa)})}var xa=s(ya,2);{var Da=B=>{var R=Ut(),f=s(t(R),2),D=t(f);a(f);var O=s(f,2),ve=t(O);a(O),a(R),m(()=>{ea(D,`width: ${i.session.sloperGrip/5*100}%`),d(ve,`${i.session.sloperGrip??""}/5`)}),r(B,R)};_(xa,B=>{i.session.sloperGrip&&B(Da)})}var za=s(xa,2);{var Fa=B=>{var R=Ht(),f=s(t(R),2),D=t(f);a(f);var O=s(f,2),ve=t(O);a(O),a(R),m(()=>{ea(D,`width: ${i.session.jugGrip/5*100}%`),d(ve,`${i.session.jugGrip??""}/5`)}),r(B,R)};_(za,B=>{i.session.jugGrip&&B(Fa)})}a(Ze);var ka=s(Ze,2),Je=s(t(ka),2),ca=t(Je);xe(ca,17,()=>i.session.climbs||[],ke,(B,R,f)=>{{let D=la(()=>i.session.climbingType==="Mixed");St(B,{get climb(){return e(R)},onDelete:()=>k(f),get showClimbType(){return e(D)}})}});var Ea=s(ca,2);{var Ga=B=>{var R=Jt();r(B,R)};_(Ea,B=>{(i.session.climbs||[]).length===0&&B(Ga)})}a(Je),a(ka),a(I),m(()=>{ea(Ne,`width: ${i.session.fingerLoad/5*100}%`),d(da,`${i.session.fingerLoad??""}/5`),ea(sa,`width: ${i.session.shoulderLoad/5*100}%`),d(pa,`${i.session.shoulderLoad??""}/5`),ea(Ue,`width: ${i.session.forearmLoad/5*100}%`),d(Ie,`${i.session.forearmLoad??""}/5`)}),ta(3,I,()=>fa,()=>({duration:150})),r(q,I)};_(me,q=>{e(w)&&q(be)})}a(V);var we=s(V,2);Oa(we,{get isOpen(){return e(h)},title:"Delete Session",message:"Are you sure you want to delete this session and all its climbs? This cannot be undone.",onConfirm:g,onCancel:()=>n(h,!1)}),m((q,I)=>{ne=aa(V,1,"session-card svelte-7vqogn",null,ne,{expanded:e(w)}),Ye(P,"aria-expanded",e(w)),d(de,q),d(H,I),d(J,i.session.location),d(x,i.session.climbingType),d(Z,`${e(y)??""} climbs`),Ye(c,"title",`Finger Load: ${i.session.fingerLoad??""}`),d(p,i.session.fingerLoad),Ye(u,"title",`Shoulder Load: ${i.session.shoulderLoad??""}`),d(v,i.session.shoulderLoad),Ye(o,"title",`Forearm Load: ${i.session.forearmLoad??""}`),d(T,i.session.forearmLoad),d(E,e(w)?"‚ñ≤":"‚ñº")},[()=>new Date(i.session.date).getDate(),()=>new Date(i.session.date).toLocaleDateString("en-GB",{month:"short"})]),r(he,U),ua()}oa(["click","keydown"]);var Yt=l('<div class="legend-item svelte-11p9lqi"><span class="l-icon svelte-11p9lqi"> </span> <span class="l-label svelte-11p9lqi"> </span></div>'),Qt=l('<div class="legend-content svelte-11p9lqi"><div class="legend-grid svelte-11p9lqi"></div></div>'),$t=l('<div class="legend-container svelte-11p9lqi"><button class="legend-toggle svelte-11p9lqi"><span class="icon">‚ÑπÔ∏è</span> <span class="text">Icon Legend</span> <span class="chevron svelte-11p9lqi"> </span></button> <!></div>');function Ja(he){let i=C(!1);const w=[{icon:"üëÅÔ∏è",label:"Onsight"},{icon:"‚ö°",label:"Flash"},{icon:"üî¥",label:"Redpoint"},{icon:"üõ†Ô∏è",label:"Dogged"},{icon:"‚ùå",label:"DNF"}];var h=$t(),z=t(h);z.__click=()=>n(i,!e(i));var S=s(t(z),4),g=t(S,!0);a(S),a(z);var k=s(z,2);{var y=F=>{var U=Qt(),V=t(U);xe(V,21,()=>w,ke,(ne,P)=>{var Y=Yt(),M=t(Y),ee=t(M,!0);a(M);var de=s(M,2),K=t(de,!0);a(de),a(Y),m(()=>{d(ee,e(P).icon),d(K,e(P).label)}),r(ne,Y)}),a(V),a(U),ta(3,U,()=>fa),r(F,U)};_(k,F=>{e(i)&&F(y)})}a(h),m(()=>{Ye(z,"aria-expanded",e(i)),d(g,e(i)?"‚ñº":"‚ñ∂")}),r(he,h)}oa(["click"]);function Va(he,i){if(!he||he.length===0){alert("No data to export");return}const w=Array.from(new Set(he.flatMap(Object.keys))),h=[w.join(","),...he.map(g=>w.map(k=>{let y=g[k];if(y==null)return"";if(typeof y=="object"){if(y instanceof Date)return y.toISOString();y=JSON.stringify(y).replace(/"/g,'""')}else typeof y=="string"&&(y=y.replace(/"/g,'""'));return typeof y=="string"&&(y.includes(",")||y.includes('"')||y.includes(`
`))?`"${y}"`:y}).join(","))].join(`
`),z=new Blob([h],{type:"text/csv;charset=utf-8;"}),S=document.createElement("a");if(S.download!==void 0){const g=URL.createObjectURL(z);S.setAttribute("href",g),S.setAttribute("download",i.endsWith(".csv")?i:`${i}.csv`),S.style.visibility="hidden",document.body.appendChild(S),S.click(),document.body.removeChild(S)}}var es=l('<span class="spinner svelte-14fqz8w"></span> Fetching...',1),as=l('<div class="error-banner svelte-14fqz8w"> </div>'),ts=l('<small class="svelte-14fqz8w">Try adjusting your filters.</small>'),ss=l('<div class="empty-state svelte-14fqz8w"><p class="svelte-14fqz8w">No indoor climbing sessions found.</p> <!></div>'),is=l('<div class="load-more-container svelte-14fqz8w"><button class="load-more-btn svelte-14fqz8w"> </button></div>'),rs=l('<div class="view-container svelte-14fqz8w"><div class="view-header svelte-14fqz8w"><h2 class="view-title svelte-14fqz8w">üßó Indoor Climbing History</h2> <div class="header-actions svelte-14fqz8w"><button class="action-btn secondary svelte-14fqz8w" title="Export filtered data to CSV">üì• Export</button> <button class="action-btn svelte-14fqz8w" title="Fetch data from cloud"><!></button></div></div> <!> <!> <div class="info-bar svelte-14fqz8w"><div class="legend-wrapper svelte-14fqz8w"><!></div> <div class="load-key svelte-14fqz8w"><span class="key-label svelte-14fqz8w">Load:</span> <div class="key-item svelte-14fqz8w"><span class="dot finger svelte-14fqz8w"></span> Finger</div> <div class="key-item svelte-14fqz8w"><span class="dot shoulder svelte-14fqz8w"></span> Shoulder</div> <div class="key-item svelte-14fqz8w"><span class="dot forearm svelte-14fqz8w"></span> Forearm</div></div></div> <div class="sessions-list"><!> <!> <!></div></div>');function ls(he,i){_a(i,!0);let w=C(ba([])),h=C(ba([])),z=C(!1),S=C(""),g=C(ba({startDate:"",endDate:"",location:"",climbingType:"",sessionType:"",grade:""})),k=C(20);const y=20;Ba(()=>{F()});function F(){const v=ja("indoor_climb");n(w,v.sort((o,T)=>new Date(T.date).getTime()-new Date(o.date).getTime()),!0),P()}async function U(){n(z,!0),n(S,"");try{await Na();const v=await Ka();v.ok&&v.data?V(v.data):n(S,v.error||"Failed to fetch data",!0)}catch(v){n(S,v instanceof Error?v.message:"Unknown error",!0)}finally{n(z,!1)}}function V(v){const o=v.map(N=>({...N,activityType:"indoor_climb",createdAt:new Date().toISOString(),updatedAt:new Date().toISOString(),syncStatus:"synced",syncedAt:new Date().toISOString(),openGrip:0,crimpGrip:0,pinchGrip:0,sloperGrip:0,jugGrip:0}));Ia(o);const T=ja("indoor_climb");n(w,T.sort((N,te)=>new Date(te.date).getTime()-new Date(N.date).getTime()),!0),P()}function ne(v){n(g,v,!0),P()}function P(){n(k,y),n(h,e(w).filter(v=>{if(e(g).startDate&&v.date<e(g).startDate||e(g).endDate&&v.date>e(g).endDate||e(g).location&&v.location!==e(g).location)return!1;if(e(g).climbingType&&(v.climbingType==="Leading"?"Sport":v.climbingType)!==e(g).climbingType)if(v.climbingType==="Mixed")if(e(g).climbingType==="Bouldering"){if(!v.climbs.some(T=>!T.isSport))return!1}else if(e(g).climbingType==="Sport"){if(!v.climbs.some(T=>T.isSport))return!1}else return!1;else return!1;if(e(g).sessionType&&!v.trainingTypes?.includes(e(g).sessionType))return!1;if(e(g).grade){const o=e(g).grade.trim().toLowerCase();if(!v.climbs.some(N=>N.grade.trim().toLowerCase()===o))return!1}return!0}),!0)}function Y(){n(k,e(k)+y)}var M=rs(),ee=t(M),de=s(t(ee),2),K=t(de);K.__click=()=>Va(e(h),"indoor_climbs");var H=s(K,2);H.__click=U;var X=t(H);{var se=v=>{var o=es();La(),r(v,o)},ce=v=>{var o=Ta("‚òÅÔ∏è Fetch Data");r(v,o)};_(X,v=>{e(z)?v(se):v(ce,!1)})}a(H),a(de),a(ee);var J=s(ee,2);{var oe=v=>{var o=as(),T=t(o,!0);a(o),m(()=>d(T,e(S))),ta(3,o,()=>fa),r(v,o)};_(J,v=>{e(S)&&v(oe)})}var b=s(J,2);gt(b,{onFilterParamsChange:ne});var x=s(b,2),j=t(x),Z=t(j);Ja(Z),a(j),La(2),a(x);var A=s(x,2),Q=t(A);xe(Q,17,()=>e(h).slice(0,e(k)),v=>v.id,(v,o)=>{Xt(v,{get session(){return e(o)},onDelete:F})});var ie=s(Q,2);{var c=v=>{var o=ss(),T=s(t(o),2);{var N=te=>{var ge=ts();r(te,ge)};_(T,te=>{e(w).length>0&&te(N)})}a(o),r(v,o)};_(ie,v=>{e(h).length===0&&v(c)})}var p=s(ie,2);{var u=v=>{var o=is(),T=t(o);T.__click=Y;var N=t(T);a(T),a(o),m(()=>d(N,`Load More (${e(h).length-e(k)} remaining)`)),r(v,o)};_(p,v=>{e(k)<e(h).length&&v(u)})}a(A),a(M),m(()=>H.disabled=e(z)),r(he,M),ua()}oa(["click"]);var vs=l('<span class="chevron svelte-1frtlim">‚ñ≤</span>'),ns=l('<span class="chevron svelte-1frtlim">‚ñº</span>'),os=l('<div class="input-with-action svelte-1frtlim"><input type="text" id="area-filter-text" placeholder="Type area name..." class="flat-left svelte-1frtlim"/> <button class="action-btn flat-right svelte-1frtlim" title="Back to list">‚úï</button></div>'),ds=l("<option> </option>"),cs=l('<select id="area-filter" class="svelte-1frtlim"><option>All Areas</option><!><option>Other (Manual Entry)</option></select>'),_s=l('<div class="input-with-action svelte-1frtlim"><input type="text" id="crag-filter-text" placeholder="Type crag name..." class="flat-left svelte-1frtlim"/> <button class="action-btn flat-right svelte-1frtlim" title="Back to list">‚úï</button></div>'),us=l("<option> </option>"),fs=l('<select id="crag-filter" class="svelte-1frtlim"><option>All Crags</option><!><option>Other (Manual Entry)</option></select>'),gs=l('<input type="text" id="crag-filter-text" class="svelte-1frtlim"/>'),ps=l("<option> </option>"),ms=l("<option> </option>"),hs=l('<div class="filter-body svelte-1frtlim"><div class="filter-grid svelte-1frtlim"><div class="filter-item svelte-1frtlim"><label for="start-date" class="svelte-1frtlim">Start Date</label> <input type="date" id="start-date" class="svelte-1frtlim"/></div> <div class="filter-item svelte-1frtlim"><label for="end-date" class="svelte-1frtlim">End Date</label> <input type="date" id="end-date" class="svelte-1frtlim"/></div> <div class="filter-item svelte-1frtlim"><label for="area-filter" class="svelte-1frtlim">Area</label> <!></div> <div class="filter-item svelte-1frtlim"><label for="crag-filter" class="svelte-1frtlim">Crag</label> <!></div> <div class="filter-item svelte-1frtlim"><label for="climbing-type-filter" class="svelte-1frtlim">Climb Type</label> <select id="climbing-type-filter" class="svelte-1frtlim"><option>Any Type</option><!></select></div> <div class="filter-item svelte-1frtlim"><label for="session-type-filter" class="svelte-1frtlim">Session Type</label> <select id="session-type-filter" class="svelte-1frtlim"><option>Any Type</option><!></select></div> <div class="filter-item svelte-1frtlim"><label for="grade-filter" class="svelte-1frtlim">Grade (Exact)</label> <input type="text" id="grade-filter" placeholder="e.g. 7a" class="svelte-1frtlim"/></div></div> <div class="filter-actions svelte-1frtlim"><button class="reset-btn svelte-1frtlim">Reset Filters</button></div></div>'),bs=l('<div class="filter-container svelte-1frtlim"><button class="filter-header svelte-1frtlim"><div class="header-content svelte-1frtlim"><span class="icon svelte-1frtlim">üîç</span> <span class="title svelte-1frtlim">Filters</span> <!></div></button> <!></div>');function ys(he,i){_a(i,!0);const w=Xa(),h=["Bouldering","Sport","Mixed","Trad"],z=["Projecting","Onsighting","Campusing","Repeaters","Fun","Volume"];let S=C(!1),g=C(""),k=C(""),y=C(""),F=C(""),U=C(""),V=C(""),ne=C(""),P=C(!1),Y=C(!1),M=la(()=>e(y)&&e(y)!=="Other"?Ya(e(y)):[]);function ee(){e(y)==="Other"?(n(P,!0),n(y,"")):n(P,!1),n(F,""),n(Y,!1),X()}function de(){e(F)==="Other"?(n(Y,!0),n(F,"")):n(Y,!1),X()}function K(){n(S,!e(S))}function H(){n(g,""),n(k,""),n(y,""),n(F,""),n(U,""),n(V,""),n(ne,""),n(P,!1),n(Y,!1),X()}function X(){i.onFilterParamsChange({startDate:e(g),endDate:e(k),area:e(y),crag:e(F),climbingType:e(U),sessionType:e(V),grade:e(ne)})}var se=bs(),ce=t(se);ce.__click=K;var J=t(ce),oe=s(t(J),4);{var b=A=>{var Q=vs();r(A,Q)},x=A=>{var Q=ns();r(A,Q)};_(oe,A=>{e(S)?A(b):A(x,!1)})}a(J),a(ce);var j=s(ce,2);{var Z=A=>{var Q=hs(),ie=t(Q),c=t(ie),p=s(t(c),2);va(p),p.__change=X,a(c);var u=s(c,2),v=s(t(u),2);va(v),v.__change=X,a(u);var o=s(u,2),T=s(t(o),2);{var N=ae=>{var re=os(),_e=t(re);va(_e),_e.__input=X;var je=s(_e,2);je.__click=()=>{n(P,!1),n(y,""),X()},a(re),na(_e,()=>e(y),ye=>n(y,ye)),r(ae,re)},te=ae=>{var re=cs();re.__change=ee;var _e=t(re);_e.value=_e.__value="";var je=s(_e);xe(je,17,()=>w,ke,(ze,Te)=>{var Fe=ds(),qe=t(Fe,!0);a(Fe);var Oe={};m(()=>{d(qe,e(Te)),Oe!==(Oe=e(Te))&&(Fe.value=(Fe.__value=e(Te))??"")}),r(ze,Fe)});var ye=s(je);ye.value=ye.__value="Other",a(re),qa(re,()=>e(y),ze=>n(y,ze)),r(ae,re)};_(T,ae=>{e(P)?ae(N):ae(te,!1)})}a(o);var ge=s(o,2),Le=s(t(ge),2);{var pe=ae=>{var re=_s(),_e=t(re);va(_e),_e.__input=X;var je=s(_e,2);je.__click=()=>{n(Y,!1),n(F,""),X()},a(re),na(_e,()=>e(F),ye=>n(F,ye)),r(ae,re)},ue=ae=>{var re=Xe(),_e=Ge(re);{var je=ze=>{var Te=fs();Te.__change=de;var Fe=t(Te);Fe.value=Fe.__value="";var qe=s(Fe);xe(qe,17,()=>e(M),ke,(Qe,Ze)=>{var Ae=us(),Ve=t(Ae,!0);a(Ae);var Ne={};m(()=>{d(Ve,e(Ze)),Ne!==(Ne=e(Ze))&&(Ae.value=(Ae.__value=e(Ze))??"")}),r(Qe,Ae)});var Oe=s(qe);Oe.value=Oe.__value="Other",a(Te),qa(Te,()=>e(F),Qe=>n(F,Qe)),r(ze,Te)},ye=ze=>{var Te=gs();va(Te),Te.__input=X,m(()=>{Ye(Te,"placeholder",e(y)?"Filter crag...":"Select area first"),Te.disabled=!e(P)&&!e(y)}),na(Te,()=>e(F),Fe=>n(F,Fe)),r(ze,Te)};_(_e,ze=>{!e(P)&&e(y)&&e(M).length>0?ze(je):ze(ye,!1)},!0)}r(ae,re)};_(Le,ae=>{e(Y)?ae(pe):ae(ue,!1)})}a(ge);var L=s(ge,2),E=s(t(L),2);E.__change=X;var me=t(E);me.value=me.__value="";var be=s(me);xe(be,17,()=>h,ke,(ae,re)=>{var _e=ps(),je=t(_e,!0);a(_e);var ye={};m(()=>{d(je,e(re)),ye!==(ye=e(re))&&(_e.value=(_e.__value=e(re))??"")}),r(ae,_e)}),a(E),a(L);var we=s(L,2),q=s(t(we),2);q.__change=X;var I=t(q);I.value=I.__value="";var le=s(I);xe(le,17,()=>z,ke,(ae,re)=>{var _e=ms(),je=t(_e,!0);a(_e);var ye={};m(()=>{d(je,e(re)),ye!==(ye=e(re))&&(_e.value=(_e.__value=e(re))??"")}),r(ae,_e)}),a(q),a(we);var Ce=s(we,2),G=s(t(Ce),2);va(G),G.__input=X,a(Ce),a(ie);var $=s(ie,2),Se=t($);Se.__click=H,a($),a(Q),na(p,()=>e(g),ae=>n(g,ae)),na(v,()=>e(k),ae=>n(k,ae)),qa(E,()=>e(U),ae=>n(U,ae)),qa(q,()=>e(V),ae=>n(V,ae)),na(G,()=>e(ne),ae=>n(ne,ae)),ta(3,Q,()=>fa,()=>({duration:200})),r(A,Q)};_(j,A=>{e(S)&&A(Z)})}a(se),m(()=>Ye(ce,"aria-expanded",e(S))),r(he,se),ua()}oa(["click","change","input"]);var xs=l('<span class="climb-type-tag svelte-1k6anfh"> </span>'),ws=l('<span class="notes-preview svelte-1k6anfh"> </span>'),Ss=l('<span class="attempts-count svelte-1k6anfh"> </span>'),Ds=l('<div class="detail-row svelte-1k6anfh"><span class="label svelte-1k6anfh">Notes:</span> <p class="notes svelte-1k6anfh"> </p></div>'),ks=l('<p class="empty-notes svelte-1k6anfh">No notes for this climb.</p>'),Ts=l('<div class="climb-details svelte-1k6anfh"><!> <div class="tags svelte-1k6anfh"><span class="tag type svelte-1k6anfh"> </span> <span class="tag attempt-text svelte-1k6anfh"> </span></div></div>'),qs=l('<div><div class="climb-header svelte-1k6anfh" role="button" tabindex="0"><div class="climb-main-info svelte-1k6anfh"><span> </span> <span class="climb-name svelte-1k6anfh"> </span> <!> <!></div> <div class="climb-meta svelte-1k6anfh"><span><span class="icon svelte-1k6anfh"> </span> <!></span> <button class="delete-btn svelte-1k6anfh" aria-label="Delete climb" title="Delete climb">üóëÔ∏è</button> <span class="chevron svelte-1k6anfh"> </span></div></div> <!></div>');function Cs(he,i){_a(i,!0);let w=Ha(i,"showClimbType",3,!1),h=C(!1);function z(){n(h,!e(h))}function S(c){c.stopPropagation(),i.onDelete()}const g={Flash:"‚ö°",Onsight:"üëÅÔ∏è",Redpoint:"üî¥",Dogged:"üõ†Ô∏è",DNF:"‚ùå"};var k=qs();let y;var F=t(k);F.__click=z,F.__keydown=c=>(c.key==="Enter"||c.key===" ")&&z();var U=t(F),V=t(U);let ne;var P=t(V,!0);a(V);var Y=s(V,2),M=t(Y,!0);a(Y);var ee=s(Y,2);{var de=c=>{var p=xs(),u=t(p,!0);a(p),m(()=>d(u,i.climb.isSport?"Sport":"Boulder")),r(c,p)};_(ee,c=>{w()&&c(de)})}var K=s(ee,2);{var H=c=>{var p=ws(),u=t(p);a(p),m(()=>d(u,`- ${i.climb.notes??""}`)),r(c,p)};_(K,c=>{!e(h)&&i.climb.notes&&c(H)})}a(U);var X=s(U,2),se=t(X);let ce;var J=t(se),oe=t(J,!0);a(J);var b=s(J,2);{var x=c=>{var p=Ss(),u=t(p,!0);a(p),m(()=>d(u,i.climb.attemptsNum)),r(c,p)};_(b,c=>{i.climb.attemptType!=="Flash"&&i.climb.attemptType!=="Onsight"&&c(x)})}a(se);var j=s(se,2);j.__click=S;var Z=s(j,2),A=t(Z,!0);a(Z),a(X),a(F);var Q=s(F,2);{var ie=c=>{var p=Ts(),u=t(p);{var v=pe=>{var ue=Ds(),L=s(t(ue),2),E=t(L,!0);a(L),a(ue),m(()=>d(E,i.climb.notes)),r(pe,ue)},o=pe=>{var ue=ks();r(pe,ue)};_(u,pe=>{i.climb.notes?pe(v):pe(o,!1)})}var T=s(u,2),N=t(T),te=t(N,!0);a(N);var ge=s(N,2),Le=t(ge,!0);a(ge),a(T),a(p),m(()=>{d(te,i.climb.isSport?"Sport":"Boulder"),d(Le,i.climb.attemptType)}),ta(3,p,()=>fa,()=>({duration:150})),r(c,p)};_(Q,c=>{e(h)&&c(ie)})}a(k),m(()=>{y=aa(k,1,"climb-entry svelte-1k6anfh",null,y,{expanded:e(h)}),Ye(F,"aria-expanded",e(h)),ne=aa(V,1,"grade-badge svelte-1k6anfh",null,ne,{sport:i.climb.isSport}),d(P,i.climb.grade),d(M,i.climb.name||"Unnamed Route"),ce=aa(se,1,"attempt-type svelte-1k6anfh",null,ce,{flash:i.climb.attemptType==="Flash"}),d(oe,g[i.climb.attemptType]||i.climb.attemptType),d(A,e(h)?"‚ñ≤":"‚ñº")}),r(he,k),ua()}oa(["click","keydown"]);var zs=l('<div class="sector-meta svelte-d5hg2r"> </div>'),Fs=l('<span class="stat svelte-d5hg2r"> </span>'),Ls=l('<span class="status-icon pending svelte-d5hg2r" title="Waiting to sync">üîÑ</span>'),Es=l('<span class="status-icon error svelte-d5hg2r" title="Sync error">‚ö†Ô∏è</span>'),Gs=l('<span class="chip svelte-d5hg2r"> </span>'),js=l('<span class="text-none svelte-d5hg2r">None</span>'),Os=l('<div class="detail-item svelte-d5hg2r"><span class="label svelte-d5hg2r">Difficulty</span> <span class="value svelte-d5hg2r"> </span></div>'),As=l('<span class="chip svelte-d5hg2r"> </span>'),Ns=l('<span class="text-none svelte-d5hg2r">None</span>'),Ms=l('<div class="detail-item svelte-d5hg2r"><span class="label svelte-d5hg2r">Category</span> <div class="value-chips svelte-d5hg2r"><!></div></div>'),Is=l('<span class="chip svelte-d5hg2r"> </span>'),Rs=l('<span class="text-none svelte-d5hg2r">None</span>'),Ps=l('<div class="detail-item svelte-d5hg2r"><span class="label svelte-d5hg2r">Focus</span> <div class="value-chips svelte-d5hg2r"><!></div></div>'),Bs=l('<span class="chip svelte-d5hg2r"> </span>'),Vs=l('<span class="text-none svelte-d5hg2r">None</span>'),Ws=l('<div class="detail-item svelte-d5hg2r"><span class="label svelte-d5hg2r">Energy System</span> <div class="value-chips svelte-d5hg2r"><!></div></div>'),Us=l('<div class="metric svelte-d5hg2r"><span class="label svelte-d5hg2r">Open Grip</span> <div class="bar-container svelte-d5hg2r"><div class="bar-fill svelte-d5hg2r"></div></div> <span class="score svelte-d5hg2r"> </span></div>'),Hs=l('<div class="metric svelte-d5hg2r"><span class="label svelte-d5hg2r">Crimp Grip</span> <div class="bar-container svelte-d5hg2r"><div class="bar-fill svelte-d5hg2r"></div></div> <span class="score svelte-d5hg2r"> </span></div>'),Js=l('<div class="metric svelte-d5hg2r"><span class="label svelte-d5hg2r">Pinch Grip</span> <div class="bar-container svelte-d5hg2r"><div class="bar-fill svelte-d5hg2r"></div></div> <span class="score svelte-d5hg2r"> </span></div>'),Zs=l('<div class="metric svelte-d5hg2r"><span class="label svelte-d5hg2r">Sloper Grip</span> <div class="bar-container svelte-d5hg2r"><div class="bar-fill svelte-d5hg2r"></div></div> <span class="score svelte-d5hg2r"> </span></div>'),Ks=l('<div class="metric svelte-d5hg2r"><span class="label svelte-d5hg2r">Jug Grip</span> <div class="bar-container svelte-d5hg2r"><div class="bar-fill svelte-d5hg2r"></div></div> <span class="score svelte-d5hg2r"> </span></div>'),Xs=l('<p class="no-climbs svelte-d5hg2r">No climbs logged for this session.</p>'),Ys=l('<div class="card-body svelte-d5hg2r"><div class="details-grid svelte-d5hg2r"><div class="detail-item svelte-d5hg2r"><span class="label svelte-d5hg2r">Training Type</span> <div class="value-chips svelte-d5hg2r"><!></div></div> <!> <!> <!> <!></div> <div class="metrics-container svelte-d5hg2r"><div class="metric svelte-d5hg2r"><span class="label svelte-d5hg2r">Finger Load</span> <div class="bar-container svelte-d5hg2r"><div class="bar-fill svelte-d5hg2r"></div></div> <span class="score svelte-d5hg2r"> </span></div> <div class="metric svelte-d5hg2r"><span class="label svelte-d5hg2r">Shoulder Load</span> <div class="bar-container svelte-d5hg2r"><div class="bar-fill svelte-d5hg2r"></div></div> <span class="score svelte-d5hg2r"> </span></div> <div class="metric svelte-d5hg2r"><span class="label svelte-d5hg2r">Forearm Load</span> <div class="bar-container svelte-d5hg2r"><div class="bar-fill svelte-d5hg2r"></div></div> <span class="score svelte-d5hg2r"> </span></div> <!> <!> <!> <!> <!></div> <div class="climbs-list svelte-d5hg2r"><h4 class="svelte-d5hg2r">Climbs</h4> <div class="climbs-container svelte-d5hg2r"><!> <!></div></div></div>'),Qs=l('<div><div class="card-header svelte-d5hg2r" role="button" tabindex="0"><div class="header-main svelte-d5hg2r"><div class="date-badge svelte-d5hg2r"><span class="day svelte-d5hg2r"> </span> <span class="month svelte-d5hg2r"> </span></div> <div class="session-info svelte-d5hg2r"><div class="session-text svelte-d5hg2r"><h3 class="location svelte-d5hg2r"> <!></h3> <!> <div class="session-meta svelte-d5hg2r"><span class="type-tag svelte-d5hg2r"> </span> <span class="stat svelte-d5hg2r"> </span> <!></div></div> <div class="load-summary svelte-d5hg2r"><div class="load-badge finger svelte-d5hg2r"> </div> <div class="load-badge shoulder svelte-d5hg2r"> </div> <div class="load-badge forearm svelte-d5hg2r"> </div></div></div></div> <div class="header-actions svelte-d5hg2r"><div class="header-status svelte-d5hg2r"><!></div> <button class="btn-icon delete-session svelte-d5hg2r" title="Delete Session">üóëÔ∏è</button> <span class="chevron svelte-d5hg2r"> </span></div></div> <!></div> <!>',1);function $s(he,i){_a(i,!0);let w=C(!1),h=C(!1);function z(){n(w,!e(w))}function S(){n(h,!0)}function g(){Ma(i.session.id),n(h,!1),i.onDelete()}function k(G){const $=[...i.session.climbs];$.splice(G,1),Ua(i.session.id,{climbs:$}),i.onDelete()}let y=la(()=>i.session.climbs?.length??0),F=la(()=>(i.session.climbs||[]).reduce((G,$)=>{const Se=parseInt($.grade.replace(/\D/g,""))||0,ae=parseInt(G.replace(/\D/g,""))||0;return Se>ae?$.grade:G},"V0/4a"));var U=Qs(),V=Ge(U);let ne;var P=t(V);P.__click=z,P.__keydown=G=>G.key==="Enter"&&z();var Y=t(P),M=t(Y),ee=t(M),de=t(ee,!0);a(ee);var K=s(ee,2),H=t(K,!0);a(K),a(M);var X=s(M,2),se=t(X),ce=t(se),J=t(ce),oe=s(J);{var b=G=>{var $=Ta();m(()=>d($,`- ${i.session.crag??""}`)),r(G,$)};_(oe,G=>{i.session.crag&&G(b)})}a(ce);var x=s(ce,2);{var j=G=>{var $=zs(),Se=t($);a($),m(()=>d(Se,`üìç ${i.session.sector??""}`)),r(G,$)};_(x,G=>{i.session.sector&&G(j)})}var Z=s(x,2),A=t(Z),Q=t(A,!0);a(A);var ie=s(A,2),c=t(ie);a(ie);var p=s(ie,2);{var u=G=>{var $=Fs(),Se=t($);a($),m(()=>d(Se,`Max: ${e(F)??""}`)),r(G,$)};_(p,G=>{e(y)>0&&G(u)})}a(Z),a(se);var v=s(se,2),o=t(v),T=t(o,!0);a(o);var N=s(o,2),te=t(N,!0);a(N);var ge=s(N,2),Le=t(ge,!0);a(ge),a(v),a(X),a(Y);var pe=s(Y,2),ue=t(pe),L=t(ue);{var E=G=>{var $=Ls();r(G,$)},me=G=>{var $=Xe(),Se=Ge($);{var ae=re=>{var _e=Es();r(re,_e)};_(Se,re=>{i.session.syncStatus==="error"&&re(ae)},!0)}r(G,$)};_(L,G=>{i.session.syncStatus==="pending"?G(E):G(me,!1)})}a(ue);var be=s(ue,2);be.__click=G=>{G.stopPropagation(),S()};var we=s(be,2),q=t(we,!0);a(we),a(pe),a(P);var I=s(P,2);{var le=G=>{var $=Ys(),Se=t($),ae=t(Se),re=s(t(ae),2),_e=t(re);{var je=f=>{var D=Xe(),O=Ge(D);xe(O,17,()=>i.session.trainingTypes,ke,(ve,W)=>{var fe=Gs(),De=t(fe,!0);a(fe),m(()=>d(De,e(W))),r(ve,fe)}),r(f,D)},ye=f=>{var D=js();r(f,D)};_(_e,f=>{i.session.trainingTypes&&i.session.trainingTypes.length>0&&!i.session.trainingTypes.includes("None")?f(je):f(ye,!1)})}a(re),a(ae);var ze=s(ae,2);{var Te=f=>{var D=Os(),O=s(t(D),2),ve=t(O,!0);a(O),a(D),m(()=>d(ve,i.session.difficulty)),r(f,D)};_(ze,f=>{i.session.difficulty&&f(Te)})}var Fe=s(ze,2);{var qe=f=>{var D=Ms(),O=s(t(D),2),ve=t(O);{var W=De=>{var Pe=Xe(),ma=Ge(Pe);xe(ma,17,()=>i.session.categories,ke,(Be,ha)=>{var wa=As(),Aa=t(wa,!0);a(wa),m(()=>d(Aa,e(ha))),r(Be,wa)}),r(De,Pe)},fe=De=>{var Pe=Ns();r(De,Pe)};_(ve,De=>{i.session.categories.length>0&&!i.session.categories.includes("None")?De(W):De(fe,!1)})}a(O),a(D),r(f,D)};_(Fe,f=>{i.session.categories?.length&&f(qe)})}var Oe=s(Fe,2);{var Qe=f=>{var D=Ps(),O=s(t(D),2),ve=t(O);{var W=De=>{var Pe=Xe(),ma=Ge(Pe);xe(ma,17,()=>i.session.techniqueFocuses,ke,(Be,ha)=>{var wa=Is(),Aa=t(wa,!0);a(wa),m(()=>d(Aa,e(ha))),r(Be,wa)}),r(De,Pe)},fe=De=>{var Pe=Rs();r(De,Pe)};_(ve,De=>{i.session.techniqueFocuses.length>0&&!i.session.techniqueFocuses.includes("None")?De(W):De(fe,!1)})}a(O),a(D),r(f,D)};_(Oe,f=>{i.session.techniqueFocuses?.length&&f(Qe)})}var Ze=s(Oe,2);{var Ae=f=>{var D=Ws(),O=s(t(D),2),ve=t(O);{var W=De=>{var Pe=Xe(),ma=Ge(Pe);xe(ma,17,()=>i.session.energySystems,ke,(Be,ha)=>{var wa=Bs(),Aa=t(wa,!0);a(wa),m(()=>d(Aa,e(ha))),r(Be,wa)}),r(De,Pe)},fe=De=>{var Pe=Vs();r(De,Pe)};_(ve,De=>{i.session.energySystems.length>0&&!i.session.energySystems.includes("None")?De(W):De(fe,!1)})}a(O),a(D),r(f,D)};_(Ze,f=>{i.session.energySystems?.length&&f(Ae)})}a(Se);var Ve=s(Se,2),Ne=t(Ve),Me=s(t(Ne),2),da=t(Me);a(Me);var Ke=s(Me,2),ga=t(Ke);a(Ke),a(Ne);var sa=s(Ne,2),ia=s(t(sa),2),pa=t(ia);a(ia);var Ee=s(ia,2),We=t(Ee);a(Ee),a(sa);var Ue=s(sa,2),$e=s(t(Ue),2),Ie=t($e);a($e);var Re=s($e,2),ra=t(Re);a(Re),a(Ue);var He=s(Ue,2);{var Ca=f=>{var D=Us(),O=s(t(D),2),ve=t(O);a(O);var W=s(O,2),fe=t(W);a(W),a(D),m(()=>{ea(ve,`width: ${i.session.openGrip/5*100}%`),d(fe,`${i.session.openGrip??""}/5`)}),r(f,D)};_(He,f=>{i.session.openGrip&&f(Ca)})}var ya=s(He,2);{var Sa=f=>{var D=Hs(),O=s(t(D),2),ve=t(O);a(O);var W=s(O,2),fe=t(W);a(W),a(D),m(()=>{ea(ve,`width: ${i.session.crimpGrip/5*100}%`),d(fe,`${i.session.crimpGrip??""}/5`)}),r(f,D)};_(ya,f=>{i.session.crimpGrip&&f(Sa)})}var xa=s(ya,2);{var Da=f=>{var D=Js(),O=s(t(D),2),ve=t(O);a(O);var W=s(O,2),fe=t(W);a(W),a(D),m(()=>{ea(ve,`width: ${i.session.pinchGrip/5*100}%`),d(fe,`${i.session.pinchGrip??""}/5`)}),r(f,D)};_(xa,f=>{i.session.pinchGrip&&f(Da)})}var za=s(xa,2);{var Fa=f=>{var D=Zs(),O=s(t(D),2),ve=t(O);a(O);var W=s(O,2),fe=t(W);a(W),a(D),m(()=>{ea(ve,`width: ${i.session.sloperGrip/5*100}%`),d(fe,`${i.session.sloperGrip??""}/5`)}),r(f,D)};_(za,f=>{i.session.sloperGrip&&f(Fa)})}var ka=s(za,2);{var Je=f=>{var D=Ks(),O=s(t(D),2),ve=t(O);a(O);var W=s(O,2),fe=t(W);a(W),a(D),m(()=>{ea(ve,`width: ${i.session.jugGrip/5*100}%`),d(fe,`${i.session.jugGrip??""}/5`)}),r(f,D)};_(ka,f=>{i.session.jugGrip&&f(Je)})}a(Ve);var ca=s(Ve,2),Ea=s(t(ca),2),Ga=t(Ea);xe(Ga,17,()=>i.session.climbs||[],ke,(f,D,O)=>{{let ve=la(()=>i.session.climbingType==="Mixed");Cs(f,{get climb(){return e(D)},onDelete:()=>k(O),get showClimbType(){return e(ve)}})}});var B=s(Ga,2);{var R=f=>{var D=Xs();r(f,D)};_(B,f=>{(i.session.climbs||[]).length===0&&f(R)})}a(Ea),a(ca),a($),m(()=>{ea(da,`width: ${i.session.fingerLoad/5*100}%`),d(ga,`${i.session.fingerLoad??""}/5`),ea(pa,`width: ${i.session.shoulderLoad/5*100}%`),d(We,`${i.session.shoulderLoad??""}/5`),ea(Ie,`width: ${i.session.forearmLoad/5*100}%`),d(ra,`${i.session.forearmLoad??""}/5`)}),ta(3,$,()=>fa,()=>({duration:150})),r(G,$)};_(I,G=>{e(w)&&G(le)})}a(V);var Ce=s(V,2);Oa(Ce,{get isOpen(){return e(h)},title:"Delete Session",message:"Are you sure you want to delete this session and all its climbs? This cannot be undone.",onConfirm:g,onCancel:()=>n(h,!1)}),m((G,$)=>{ne=aa(V,1,"session-card svelte-d5hg2r",null,ne,{expanded:e(w)}),Ye(P,"aria-expanded",e(w)),d(de,G),d(H,$),d(J,`${i.session.area??""} `),d(Q,i.session.climbingType),d(c,`${e(y)??""} climbs`),Ye(o,"title",`Finger Load: ${i.session.fingerLoad??""}`),d(T,i.session.fingerLoad),Ye(N,"title",`Shoulder Load: ${i.session.shoulderLoad??""}`),d(te,i.session.shoulderLoad),Ye(ge,"title",`Forearm Load: ${i.session.forearmLoad??""}`),d(Le,i.session.forearmLoad),d(q,e(w)?"‚ñ≤":"‚ñº")},[()=>new Date(i.session.date).getDate(),()=>new Date(i.session.date).toLocaleDateString(void 0,{month:"short"})]),r(he,U),ua()}oa(["click","keydown"]);var ei=l('<span class="spinner svelte-1s7jdlh"></span> Fetching...',1),ai=l('<div class="error-banner svelte-1s7jdlh"> </div>'),ti=l('<small class="svelte-1s7jdlh">Try adjusting your filters.</small>'),si=l('<div class="empty-state svelte-1s7jdlh"><p class="svelte-1s7jdlh">No outdoor climbing sessions found.</p> <!></div>'),ii=l('<div class="load-more-container svelte-1s7jdlh"><button class="load-more-btn svelte-1s7jdlh"> </button></div>'),ri=l('<div class="view-container svelte-1s7jdlh"><div class="view-header svelte-1s7jdlh"><h2 class="view-title svelte-1s7jdlh">‚õ∞Ô∏è Outdoor Climbing History</h2> <div class="header-actions svelte-1s7jdlh"><button class="action-btn secondary svelte-1s7jdlh" title="Export filtered data to CSV">üì• Export</button> <button class="action-btn svelte-1s7jdlh" title="Fetch data from cloud"><!></button></div></div> <!> <!> <div class="info-bar svelte-1s7jdlh"><div class="legend-wrapper svelte-1s7jdlh"><!></div> <div class="load-key svelte-1s7jdlh"><span class="key-label svelte-1s7jdlh">Load:</span> <div class="key-item svelte-1s7jdlh"><span class="dot finger svelte-1s7jdlh"></span> Finger</div> <div class="key-item svelte-1s7jdlh"><span class="dot shoulder svelte-1s7jdlh"></span> Shoulder</div> <div class="key-item svelte-1s7jdlh"><span class="dot forearm svelte-1s7jdlh"></span> Forearm</div></div></div> <div class="sessions-list"><!> <!> <!></div></div>');function li(he,i){_a(i,!0);let w=C(ba([])),h=C(ba([])),z=C(!1),S=C(""),g=C(ba({startDate:"",endDate:"",area:"",crag:"",climbingType:"",sessionType:"",grade:""})),k=C(20);const y=20;Ba(()=>{F()});function F(){const v=ja("outdoor_climb");n(w,v.sort((o,T)=>new Date(T.date).getTime()-new Date(o.date).getTime()),!0),P()}async function U(){n(z,!0),n(S,"");try{await Na();const v=await Qa();v.ok&&v.data?V(v.data):n(S,v.error||"Failed to fetch data",!0)}catch(v){n(S,v instanceof Error?v.message:"Unknown error",!0)}finally{n(z,!1)}}function V(v){const o=v.map(N=>({...N,activityType:"outdoor_climb",createdAt:new Date().toISOString(),updatedAt:new Date().toISOString(),syncStatus:"synced",syncedAt:new Date().toISOString(),openGrip:0,crimpGrip:0,pinchGrip:0,sloperGrip:0,jugGrip:0}));Ia(o);const T=ja("outdoor_climb");n(w,T.sort((N,te)=>new Date(te.date).getTime()-new Date(N.date).getTime()),!0),P()}function ne(v){n(g,v,!0),P()}function P(){n(k,y),n(h,e(w).filter(v=>{if(e(g).startDate&&v.date<e(g).startDate||e(g).endDate&&v.date>e(g).endDate||e(g).area&&!v.area.toLowerCase().includes(e(g).area.toLowerCase())||e(g).crag&&!v.crag.toLowerCase().includes(e(g).crag.toLowerCase()))return!1;if(e(g).climbingType&&(v.climbingType==="Leading"?"Sport":v.climbingType)!==e(g).climbingType)if(v.climbingType==="Mixed")if(e(g).climbingType==="Bouldering"){if(!v.climbs.some(T=>!T.isSport))return!1}else if(e(g).climbingType==="Sport"||e(g).climbingType==="Trad"){if(!v.climbs.some(T=>T.isSport))return!1}else return!1;else return!1;if(e(g).sessionType&&!v.trainingTypes?.includes(e(g).sessionType))return!1;if(e(g).grade){const o=e(g).grade.trim().toLowerCase();if(!v.climbs.some(N=>N.grade.trim().toLowerCase()===o))return!1}return!0}),!0)}function Y(){n(k,e(k)+y)}var M=ri(),ee=t(M),de=s(t(ee),2),K=t(de);K.__click=()=>Va(e(h),"outdoor_climbs");var H=s(K,2);H.__click=U;var X=t(H);{var se=v=>{var o=ei();La(),r(v,o)},ce=v=>{var o=Ta("‚òÅÔ∏è Fetch Data");r(v,o)};_(X,v=>{e(z)?v(se):v(ce,!1)})}a(H),a(de),a(ee);var J=s(ee,2);{var oe=v=>{var o=ai(),T=t(o,!0);a(o),m(()=>d(T,e(S))),ta(3,o,()=>fa),r(v,o)};_(J,v=>{e(S)&&v(oe)})}var b=s(J,2);ys(b,{onFilterParamsChange:ne});var x=s(b,2),j=t(x),Z=t(j);Ja(Z),a(j),La(2),a(x);var A=s(x,2),Q=t(A);xe(Q,17,()=>e(h).slice(0,e(k)),v=>v.id,(v,o)=>{$s(v,{get session(){return e(o)},onDelete:F})});var ie=s(Q,2);{var c=v=>{var o=si(),T=s(t(o),2);{var N=te=>{var ge=ti();r(te,ge)};_(T,te=>{e(w).length>0&&te(N)})}a(o),r(v,o)};_(ie,v=>{e(h).length===0&&v(c)})}var p=s(ie,2);{var u=v=>{var o=ii(),T=t(o);T.__click=Y;var N=t(T);a(T),a(o),m(()=>d(N,`Load More (${e(h).length-e(k)} remaining)`)),r(v,o)};_(p,v=>{e(k)<e(h).length&&v(u)})}a(A),a(M),m(()=>H.disabled=e(z)),r(he,M),ua()}oa(["click"]);var vi=l('<span class="chevron svelte-11rkzid">‚ñ≤</span>'),ni=l('<span class="chevron svelte-11rkzid">‚ñº</span>'),oi=l('<div class="filter-body svelte-11rkzid"><div class="filter-grid svelte-11rkzid"><div class="filter-item svelte-11rkzid"><label for="start-date" class="svelte-11rkzid">Start Date</label> <input type="date" id="start-date" class="svelte-11rkzid"/></div> <div class="filter-item svelte-11rkzid"><label for="end-date" class="svelte-11rkzid">End Date</label> <input type="date" id="end-date" class="svelte-11rkzid"/></div> <div class="filter-item svelte-11rkzid"><label for="name-filter" class="svelte-11rkzid">Session Name</label> <input type="text" id="name-filter" placeholder="e.g. Leg Day" class="svelte-11rkzid"/></div> <div class="filter-item svelte-11rkzid"><label for="block-filter" class="svelte-11rkzid">Training Block</label> <select id="block-filter" class="svelte-11rkzid"><option>All Blocks</option><option>Strength</option><option>Power</option><option>Power Endurance</option><option>Muscular Endurance</option></select></div></div> <div class="filter-actions svelte-11rkzid"><button class="reset-btn svelte-11rkzid">Reset Filters</button></div></div>'),di=l('<div class="filter-container svelte-11rkzid"><button class="filter-header svelte-11rkzid"><div class="header-content svelte-11rkzid"><span class="icon svelte-11rkzid">üîç</span> <span class="title svelte-11rkzid">Filters</span> <!></div></button> <!></div>');function ci(he,i){_a(i,!0);let w=C(!1),h=C(""),z=C(""),S=C(""),g=C("");function k(){n(w,!e(w))}function y(){n(h,""),n(z,""),n(S,""),n(g,""),F()}function F(){i.onFilterParamsChange({startDate:e(h),endDate:e(z),name:e(S),trainingBlock:e(g)})}var U=di(),V=t(U);V.__click=k;var ne=t(V),P=s(t(ne),4);{var Y=K=>{var H=vi();r(K,H)},M=K=>{var H=ni();r(K,H)};_(P,K=>{e(w)?K(Y):K(M,!1)})}a(ne),a(V);var ee=s(V,2);{var de=K=>{var H=oi(),X=t(H),se=t(X),ce=s(t(se),2);va(ce),ce.__change=F,a(se);var J=s(se,2),oe=s(t(J),2);va(oe),oe.__change=F,a(J);var b=s(J,2),x=s(t(b),2);va(x),x.__input=F,a(b);var j=s(b,2),Z=s(t(j),2);Z.__change=F;var A=t(Z);A.value=A.__value="";var Q=s(A);Q.value=Q.__value="Strength";var ie=s(Q);ie.value=ie.__value="Power";var c=s(ie);c.value=c.__value="Power Endurance";var p=s(c);p.value=p.__value="Muscular Endurance",a(Z),a(j),a(X);var u=s(X,2),v=t(u);v.__click=y,a(u),a(H),na(ce,()=>e(h),o=>n(h,o)),na(oe,()=>e(z),o=>n(z,o)),na(x,()=>e(S),o=>n(S,o)),qa(Z,()=>e(g),o=>n(g,o)),ta(3,H,()=>fa,()=>({duration:200})),r(K,H)};_(ee,K=>{e(w)&&K(de)})}a(U),m(()=>Ye(V,"aria-expanded",e(w))),r(he,U),ua()}oa(["click","change","input"]);var _i=l('<span class="status-icon pending svelte-cirrfc" title="Waiting to sync">üîÑ</span>'),ui=l('<span class="status-icon error svelte-cirrfc" title="Sync error">‚ö†Ô∏è</span>'),fi=l('<div class="bw-info svelte-cirrfc"><span class="label svelte-cirrfc">Bodyweight:</span> </div>'),gi=l('<span class="muscle-tag svelte-cirrfc"> </span>'),pi=l('<span class="muscle-tag svelte-cirrfc"> </span>'),mi=l('<div class="muscle-tags svelte-cirrfc"><!> <!></div>'),hi=l('<span class="tag w svelte-cirrfc">W</span>'),bi=l('<span class="tag f svelte-cirrfc">F</span>'),yi=l('<span class="tag d svelte-cirrfc">D</span>'),xi=l('<div><span class="set-num svelte-cirrfc"></span> <!> <!> <!> <span class="val svelte-cirrfc"><span class="weight"> </span> <span class="x svelte-cirrfc">x</span> <span class="reps"> </span></span></div>'),wi=l('<div class="exercise-item svelte-cirrfc"><div class="exercise-header svelte-cirrfc"><h4 class="svelte-cirrfc"> </h4> <!></div> <div class="sets-grid svelte-cirrfc"></div></div>'),Si=l('<div class="subcategory-group svelte-cirrfc"><h5 class="subcategory-header svelte-cirrfc"> </h5> <!></div>'),Di=l('<div class="category-group svelte-cirrfc"><h4 class="category-header svelte-cirrfc"> </h4> <!></div>'),ki=l('<div class="card-body svelte-cirrfc"><!> <div class="exercises-list svelte-cirrfc"></div></div>'),Ti=l('<div><div class="card-header svelte-cirrfc" role="button" tabindex="0"><div class="header-main svelte-cirrfc"><div class="date-badge svelte-cirrfc"><span class="day svelte-cirrfc"> </span> <span class="month svelte-cirrfc"> </span></div> <div class="session-info svelte-cirrfc"><div class="session-text"><h3 class="name svelte-cirrfc"> </h3> <div class="session-meta svelte-cirrfc"><span class="stat svelte-cirrfc"> </span> <span class="stat svelte-cirrfc"> </span> <span class="stat svelte-cirrfc"> </span></div></div></div></div> <div class="header-actions svelte-cirrfc"><div class="header-status"><!></div> <button class="btn-icon delete-session svelte-cirrfc" title="Delete Session">üóëÔ∏è</button> <span class="chevron svelte-cirrfc"> </span></div></div> <!></div> <!>',1);function qi(he,i){_a(i,!0);let w=C(!1),h=C(!1);function z(){n(w,!e(w))}function S(){n(h,!0)}function g(){Ma(i.session.id),n(h,!1),i.onDelete()}function k(L){return $a.find(E=>E.name===L)}let y=la(()=>i.session.exercises?.length??0),F=la(()=>(i.session.exercises||[]).reduce((L,E)=>L+(E.sets?.length||0),0)),U=la(()=>(i.session.exercises||[]).reduce((L,E)=>L+(E.sets||[]).reduce((me,be)=>me+(be.weight||0)*(be.reps||0),0),0)),V=la(()=>(i.session.exercises||[]).reduce((L,E)=>{const me=k(E.name),be=me?.category||"Other",we=me?.subcategory||"Misc";return L[be]||(L[be]={}),L[be][we]||(L[be][we]=[]),L[be][we].push(E),L},{}));var ne=Ti(),P=Ge(ne);let Y;var M=t(P);M.__click=z,M.__keydown=L=>L.key==="Enter"&&z();var ee=t(M),de=t(ee),K=t(de),H=t(K,!0);a(K);var X=s(K,2),se=t(X,!0);a(X),a(de);var ce=s(de,2),J=t(ce),oe=t(J),b=t(oe,!0);a(oe);var x=s(oe,2),j=t(x),Z=t(j);a(j);var A=s(j,2),Q=t(A);a(A);var ie=s(A,2),c=t(ie);a(ie),a(x),a(J),a(ce),a(ee);var p=s(ee,2),u=t(p),v=t(u);{var o=L=>{var E=_i();r(L,E)},T=L=>{var E=Xe(),me=Ge(E);{var be=we=>{var q=ui();r(we,q)};_(me,we=>{i.session.syncStatus==="error"&&we(be)},!0)}r(L,E)};_(v,L=>{i.session.syncStatus==="pending"?L(o):L(T,!1)})}a(u);var N=s(u,2);N.__click=L=>{L.stopPropagation(),S()};var te=s(N,2),ge=t(te,!0);a(te),a(p),a(M);var Le=s(M,2);{var pe=L=>{var E=ki(),me=t(E);{var be=q=>{var I=fi(),le=s(t(I));a(I),m(()=>d(le,` ${i.session.bodyweight??""}kg`)),r(q,I)};_(me,q=>{i.session.bodyweight&&q(be)})}var we=s(me,2);xe(we,21,()=>Object.entries(e(V)),ke,(q,I)=>{var le=la(()=>Wa(e(I),2));let Ce=()=>e(le)[0],G=()=>e(le)[1];var $=Di(),Se=t($),ae=t(Se,!0);a(Se);var re=s(Se,2);xe(re,17,()=>Object.entries(G()),ke,(_e,je)=>{var ye=la(()=>Wa(e(je),2));let ze=()=>e(ye)[0],Te=()=>e(ye)[1];var Fe=Si(),qe=t(Fe),Oe=t(qe,!0);a(qe);var Qe=s(qe,2);xe(Qe,17,Te,ke,(Ze,Ae)=>{const Ve=la(()=>k(e(Ae).name));var Ne=wi(),Me=t(Ne),da=t(Me),Ke=t(da,!0);a(da);var ga=s(da,2);{var sa=pa=>{var Ee=mi(),We=t(Ee);xe(We,17,()=>e(Ve).targetMuscles.slice(0,3),ke,(Ie,Re)=>{var ra=gi(),He=t(ra,!0);a(ra),m(()=>d(He,e(Re))),r(Ie,ra)});var Ue=s(We,2);{var $e=Ie=>{var Re=pi(),ra=t(Re);a(Re),m(()=>d(ra,`+${e(Ve).targetMuscles.length-3}`)),r(Ie,Re)};_(Ue,Ie=>{e(Ve).targetMuscles.length>3&&Ie($e)})}a(Ee),r(pa,Ee)};_(ga,pa=>{e(Ve)&&pa(sa)})}a(Me);var ia=s(Me,2);xe(ia,21,()=>e(Ae).sets,ke,(pa,Ee,We)=>{var Ue=xi();let $e;var Ie=t(Ue);Ie.textContent=We+1;var Re=s(Ie,2);{var ra=Je=>{var ca=hi();r(Je,ca)};_(Re,Je=>{e(Ee).isWarmup&&Je(ra)})}var He=s(Re,2);{var Ca=Je=>{var ca=bi();r(Je,ca)};_(He,Je=>{e(Ee).isFailure&&Je(Ca)})}var ya=s(He,2);{var Sa=Je=>{var ca=yi();r(Je,ca)};_(ya,Je=>{e(Ee).isDropSet&&Je(Sa)})}var xa=s(ya,2),Da=t(xa),za=t(Da);a(Da);var Fa=s(Da,4),ka=t(Fa,!0);a(Fa),a(xa),a(Ue),m(()=>{$e=aa(Ue,1,"set-pill svelte-cirrfc",null,$e,{completed:e(Ee).completed,warmup:e(Ee).isWarmup}),d(za,`${e(Ee).weight??""}kg`),d(ka,e(Ee).reps)}),r(pa,Ue)}),a(ia),a(Ne),m(()=>d(Ke,e(Ae).name)),r(Ze,Ne)}),a(Fe),m(()=>d(Oe,ze())),r(_e,Fe)}),a($),m(()=>d(ae,Ce())),r(q,$)}),a(we),a(E),ta(3,E,()=>fa,()=>({duration:150})),r(L,E)};_(Le,L=>{e(w)&&L(pe)})}a(P);var ue=s(P,2);Oa(ue,{get isOpen(){return e(h)},title:"Delete Session",message:"Are you sure you want to delete this session? This cannot be undone.",onConfirm:g,onCancel:()=>n(h,!1)}),m((L,E,me)=>{Y=aa(P,1,"session-card svelte-cirrfc",null,Y,{expanded:e(w)}),Ye(M,"aria-expanded",e(w)),d(H,L),d(se,E),d(b,i.session.name),d(Z,`${e(y)??""} Exercises`),d(Q,`${e(F)??""} Sets`),d(c,`~${me??""}kg Vol`),d(ge,e(w)?"‚ñ≤":"‚ñº")},[()=>new Date(i.session.date).getDate(),()=>new Date(i.session.date).toLocaleDateString("en-GB",{month:"short"}),()=>Math.round(e(U)).toLocaleString()]),r(he,ne),ua()}oa(["click","keydown"]);var Ci=l('<span class="spinner svelte-133enjd"></span> Fetching...',1),zi=l('<div class="error-banner svelte-133enjd"> </div>'),Fi=l('<small class="svelte-133enjd">Try adjusting your filters.</small>'),Li=l('<div class="empty-state svelte-133enjd"><p class="svelte-133enjd">No gym sessions found.</p> <!></div>'),Ei=l('<div class="load-more-container svelte-133enjd"><button class="load-more-btn svelte-133enjd"> </button></div>'),Gi=l('<div class="view-container svelte-133enjd"><div class="view-header svelte-133enjd"><h2 class="view-title svelte-133enjd">üèãÔ∏è Gym Session History</h2> <div class="header-actions svelte-133enjd"><button class="action-btn secondary svelte-133enjd" title="Export filtered data to CSV">üì• Export</button> <button class="action-btn svelte-133enjd" title="Fetch data from cloud"><!></button></div></div> <!> <!> <div class="sessions-list"><!> <!> <!></div></div>');function ji(he,i){_a(i,!0);let w=C(ba([])),h=C(ba([])),z=C(!1),S=C(""),g=C(ba({startDate:"",endDate:"",name:"",trainingBlock:""})),k=C(20);const y=20;Ba(()=>{F()});function F(){const c=ja("gym_session");n(w,c.sort((p,u)=>new Date(u.date).getTime()-new Date(p.date).getTime()),!0),P()}async function U(){n(z,!0),n(S,"");try{await Na();const c=await et();c.ok&&c.data?V(c.data):n(S,c.error||"Failed to fetch data",!0)}catch(c){n(S,c instanceof Error?c.message:"Unknown error",!0)}finally{n(z,!1)}}function V(c){const p=c.map(v=>({...v,activityType:"gym_session",syncStatus:"synced",syncedAt:new Date().toISOString(),createdAt:v.createdAt||new Date().toISOString(),updatedAt:v.updatedAt||new Date().toISOString()}));Ia(p);const u=ja("gym_session");n(w,u.sort((v,o)=>new Date(o.date).getTime()-new Date(v.date).getTime()),!0),P()}function ne(c){n(g,c,!0),P()}function P(){n(k,y),n(h,e(w).filter(c=>!(e(g).startDate&&c.date<e(g).startDate||e(g).endDate&&c.date>e(g).endDate||e(g).name&&!c.name.toLowerCase().includes(e(g).name.toLowerCase())||e(g).trainingBlock&&c.trainingBlock!==e(g).trainingBlock)),!0)}function Y(){n(k,e(k)+y)}var M=Gi(),ee=t(M),de=s(t(ee),2),K=t(de);K.__click=()=>Va(e(h),"gym_sessions");var H=s(K,2);H.__click=U;var X=t(H);{var se=c=>{var p=Ci();La(),r(c,p)},ce=c=>{var p=Ta("‚òÅÔ∏è Fetch Data");r(c,p)};_(X,c=>{e(z)?c(se):c(ce,!1)})}a(H),a(de),a(ee);var J=s(ee,2);{var oe=c=>{var p=zi(),u=t(p,!0);a(p),m(()=>d(u,e(S))),ta(3,p,()=>fa),r(c,p)};_(J,c=>{e(S)&&c(oe)})}var b=s(J,2);ci(b,{onFilterParamsChange:ne});var x=s(b,2),j=t(x);xe(j,17,()=>e(h).slice(0,e(k)),c=>c.id,(c,p)=>{qi(c,{get session(){return e(p)},onDelete:F})});var Z=s(j,2);{var A=c=>{var p=Li(),u=s(t(p),2);{var v=o=>{var T=Fi();r(o,T)};_(u,o=>{e(w).length>0&&o(v)})}a(p),r(c,p)};_(Z,c=>{e(h).length===0&&c(A)})}var Q=s(Z,2);{var ie=c=>{var p=Ei(),u=t(p);u.__click=Y;var v=t(u);a(u),a(p),m(()=>d(v,`Load More (${e(h).length-e(k)} remaining)`)),r(c,p)};_(Q,c=>{e(k)<e(h).length&&c(ie)})}a(x),a(M),m(()=>H.disabled=e(z)),r(he,M),ua()}oa(["click"]);var Oi=l('<span class="spinner svelte-1szs0u9"></span> Fetching...',1),Ai=l('<div class="loading svelte-1szs0u9">Loading sessions...</div>'),Ni=l('<div class="empty-state svelte-1szs0u9"><!></div>'),Mi=l('<span class="set-tag svelte-1szs0u9"> <span class="x svelte-1szs0u9">x</span> </span>'),Ii=l('<div class="ex-notes svelte-1szs0u9"> </div>'),Ri=l('<div class="exercise-item svelte-1szs0u9"><div class="ex-header svelte-1szs0u9"><span class="ex-name svelte-1szs0u9"> </span> <span class="ex-grip svelte-1szs0u9"> </span></div> <div class="ex-sets svelte-1szs0u9"></div> <!></div>'),Pi=l('<div class="card-body svelte-1szs0u9"><div class="exercises-list svelte-1szs0u9"></div></div>'),Bi=l('<div><div class="card-header svelte-1szs0u9" role="button" tabindex="0"><div class="header-main"><span class="session-date svelte-1szs0u9"> </span> <span class="meta svelte-1szs0u9"><!> </span></div> <div class="header-status svelte-1szs0u9"><span>‚óè</span> <button class="btn-icon delete-btn svelte-1szs0u9" title="Delete Session">üóëÔ∏è</button> <span class="chevron svelte-1szs0u9"> </span></div></div> <!></div>'),Vi=l('<div class="load-more-container svelte-1szs0u9"><button class="load-more-btn svelte-1szs0u9"> </button></div>'),Wi=l('<div class="timeline svelte-1szs0u9"><!> <!></div>'),Ui=l('<div class="view-content svelte-1szs0u9"><div class="header svelte-1szs0u9"><h3 class="svelte-1szs0u9">ü§è Fingerboarding Log</h3> <button class="fetch-btn svelte-1szs0u9" title="Fetch data from cloud"><!></button></div> <div class="filters svelte-1szs0u9"><div class="filter-group svelte-1szs0u9"><label for="start-date" class="svelte-1szs0u9">From</label> <input type="date" id="start-date" class="svelte-1szs0u9"/></div> <div class="filter-group svelte-1szs0u9"><label for="end-date" class="svelte-1szs0u9">To</label> <input type="date" id="end-date" class="svelte-1szs0u9"/></div></div> <!></div> <!>',1);function Hi(he,i){_a(i,!0);let w=C(ba([])),h=C(!0),z=C(""),S=C(""),g=C(ba(new Set)),k=C(20);const y=20;Za(()=>{e(z),e(S),n(k,y)});let F=C(!1),U=C(null);function V(u){n(U,u,!0),n(F,!0)}function ne(){e(U)&&(Ma(e(U)),n(U,null),n(F,!1),n(w,Ra().sort((u,v)=>new Date(v.date).getTime()-new Date(u.date).getTime()),!0))}async function P(){n(h,!0),n(w,Ra().sort((u,v)=>new Date(v.date).getTime()-new Date(u.date).getTime()),!0);try{await Na();const u=await at();if(u.ok&&u.data){const v=u.data.map(o=>({...o,activityType:"fingerboarding",createdAt:o.createdAt||new Date().toISOString(),updatedAt:o.updatedAt||new Date().toISOString(),syncStatus:"synced"}));Ia(v),n(w,Ra().sort((o,T)=>new Date(T.date).getTime()-new Date(o.date).getTime()),!0)}}catch(u){console.error("Failed to sync",u)}finally{n(h,!1)}}P();let Y=la(()=>e(w).filter(u=>!(e(z)&&new Date(u.date)<new Date(e(z))||e(S)&&new Date(u.date)>new Date(e(S)))));function M(){n(k,e(k)+y)}function ee(u){e(g).has(u)?e(g).delete(u):e(g).add(u),n(g,new Set(e(g)),!0)}function de(u){return u.exercises.reduce((v,o)=>v+o.details.length,0)}var K=Ui(),H=Ge(K),X=t(H),se=s(t(X),2);se.__click=P;var ce=t(se);{var J=u=>{var v=Oi();La(),r(u,v)},oe=u=>{var v=Ta("‚òÅÔ∏è Fetch Data");r(u,v)};_(ce,u=>{e(h)?u(J):u(oe,!1)})}a(se),a(X);var b=s(X,2),x=t(b),j=s(t(x),2);va(j),a(x);var Z=s(x,2),A=s(t(Z),2);va(A),a(Z),a(b);var Q=s(b,2);{var ie=u=>{var v=Ai();r(u,v)},c=u=>{var v=Xe(),o=Ge(v);{var T=te=>{var ge=Ni(),Le=t(ge);{var pe=L=>{var E=Ta("No sessions match filter.");r(L,E)},ue=L=>{var E=Ta("No fingerboarding sessions logged yet.");r(L,E)};_(Le,L=>{e(w).length>0?L(pe):L(ue,!1)})}a(ge),r(te,ge)},N=te=>{var ge=Wi(),Le=t(ge);xe(Le,17,()=>e(Y).slice(0,e(k)),ke,(L,E)=>{var me=Bi();let be;var we=t(me);we.__click=()=>ee(e(E).id),we.__keydown=qe=>qe.key==="Enter"&&ee(e(E).id);var q=t(we),I=t(q),le=t(I,!0);a(I);var Ce=s(I,2),G=t(Ce);{var $=qe=>{var Oe=Ta();m(()=>d(Oe,`${e(E).location??""} ¬∑`)),r(qe,Oe)};_(G,qe=>{e(E).location&&e(E).location!=="N/A"&&e(E).location!=="Home"&&qe($)})}var Se=s(G);a(Ce),a(q);var ae=s(q,2),re=t(ae);let _e;var je=s(re,2);je.__click=qe=>{qe.stopPropagation(),V(e(E).id)};var ye=s(je,2),ze=t(ye,!0);a(ye),a(ae),a(we);var Te=s(we,2);{var Fe=qe=>{var Oe=Pi(),Qe=t(Oe);xe(Qe,21,()=>e(E).exercises||[],ke,(Ze,Ae)=>{var Ve=Ri(),Ne=t(Ve),Me=t(Ne),da=t(Me,!0);a(Me);var Ke=s(Me,2),ga=t(Ke,!0);a(Ke),a(Ne);var sa=s(Ne,2);xe(sa,21,()=>e(Ae).details,ke,(Ee,We)=>{var Ue=Mi(),$e=t(Ue),Ie=s($e,2);a(Ue),m(()=>{d($e,`${e(We).weight>0?`+${e(We).weight}kg`:"BW"} `),d(Ie,` ${e(We).reps??""}s/reps`)}),r(Ee,Ue)}),a(sa);var ia=s(sa,2);{var pa=Ee=>{var We=Ii(),Ue=t(We);a(We),m(()=>d(Ue,`"${e(Ae).notes??""}"`)),r(Ee,We)};_(ia,Ee=>{e(Ae).notes&&Ee(pa)})}a(Ve),m(()=>{d(da,e(Ae).name),d(ga,e(Ae).gripType)}),r(Ze,Ve)}),a(Qe),a(Oe),ta(3,Oe,()=>fa,()=>({duration:150})),r(qe,Oe)};_(Te,qe=>{e(g).has(e(E).id)&&qe(Fe)})}a(me),m((qe,Oe,Qe,Ze)=>{be=aa(me,1,"session-card svelte-1szs0u9",null,be,qe),d(le,Oe),d(Se,` ${e(E).exercises.length??""} Exercises ¬∑ ${Qe??""} Sets`),_e=aa(re,1,"sync-dot svelte-1szs0u9",null,_e,{synced:e(E).syncStatus==="synced"}),Ye(re,"title",e(E).syncStatus==="synced"?"Synced":"Local"),d(ze,Ze)},[()=>({expanded:e(g).has(e(E).id)}),()=>new Date(e(E).date).toLocaleDateString(void 0,{weekday:"short",month:"short",day:"numeric"}),()=>de(e(E)),()=>e(g).has(e(E).id)?"‚ñ≤":"‚ñº"]),r(L,me)});var pe=s(Le,2);{var ue=L=>{var E=Vi(),me=t(E);me.__click=M;var be=t(me);a(me),a(E),m(()=>d(be,`Load More (${e(Y).length-e(k)} remaining)`)),r(L,E)};_(pe,L=>{e(k)<e(Y).length&&L(ue)})}a(ge),r(te,ge)};_(o,te=>{e(Y).length===0?te(T):te(N,!1)},!0)}r(u,v)};_(Q,u=>{e(h)&&e(w).length===0?u(ie):u(c,!1)})}a(H);var p=s(H,2);Oa(p,{get isOpen(){return e(F)},title:"Delete Fingerboard Session",message:"Are you sure you want to delete this session? This cannot be undone.",onConfirm:ne,onCancel:()=>n(F,!1)}),m(()=>se.disabled=e(h)),na(j,()=>e(z),u=>n(z,u)),na(A,()=>e(S),u=>n(S,u)),r(he,K),ua()}oa(["click","keydown"]);var Ji=l('<span class="spinner svelte-xyvf5r"></span> Fetching...',1),Zi=l('<div class="loading svelte-xyvf5r">Loading sessions...</div>'),Ki=l('<div class="empty-state svelte-xyvf5r">No competitions logged yet.</div>'),Xi=l('<span class="round-pos svelte-xyvf5r"> </span>'),Yi=l('<span class="c-attempts svelte-xyvf5r"> </span>'),Qi=l('<div class="climb-notes svelte-xyvf5r"> </div>'),$i=l('<div class="climb-row svelte-xyvf5r"><div class="climb-info svelte-xyvf5r"><span class="c-name svelte-xyvf5r"> </span> <!></div> <div class="climb-result"><span> </span></div></div> <!>',1),er=l('<div class="climbs-list"></div>'),ar=l('<div class="round-item svelte-xyvf5r"><div class="round-header svelte-xyvf5r"><span class="round-name"> </span> <!></div> <!></div>'),tr=l('<div class="rounds-list svelte-xyvf5r"></div>'),sr=l('<div class="load-meta svelte-xyvf5r"><span> </span></div>'),ir=l('<div class="card-body svelte-xyvf5r"><!> <!> <div class="session-footer svelte-xyvf5r"><span> </span></div></div>'),rr=l('<div><div class="card-header svelte-xyvf5r" role="button" tabindex="0"><div class="header-main svelte-xyvf5r"><div class="left-col svelte-xyvf5r"><span class="venue svelte-xyvf5r"> </span> <span class="date svelte-xyvf5r"> </span></div> <div class="right-col svelte-xyvf5r"><div class="badges svelte-xyvf5r"><span class="type-tag svelte-xyvf5r"> </span> <span class="result-tag svelte-xyvf5r"> </span></div></div></div> <div class="header-status svelte-xyvf5r"><span>‚óè</span> <button class="btn-icon delete-btn svelte-xyvf5r" title="Delete Session">üóëÔ∏è</button> <span class="chevron svelte-xyvf5r"> </span></div></div> <!></div>'),lr=l('<div class="load-more-container svelte-xyvf5r"><button class="load-more-btn svelte-xyvf5r"> </button></div>'),vr=l('<div class="timeline svelte-xyvf5r"><!> <!></div>'),nr=l('<div class="view-content svelte-xyvf5r"><div class="header svelte-xyvf5r"><h3 class="svelte-xyvf5r">üèÜ Competition Log</h3> <button class="fetch-btn svelte-xyvf5r" title="Fetch data from cloud"><!></button></div> <!> <!></div>');function or(he,i){_a(i,!0);let w=C(ba([])),h=C(!0),z=C(ba(new Set)),S=C(20);const g=20;let k=C(!1),y=C(null);function F(b){n(y,b,!0),n(k,!0)}function U(){e(y)&&(Ma(e(y)),n(y,null),n(k,!1),n(w,Pa().sort((b,x)=>new Date(x.date).getTime()-new Date(b.date).getTime()),!0))}async function V(){n(h,!0),n(S,g),n(w,Pa().sort((b,x)=>new Date(x.date).getTime()-new Date(b.date).getTime()),!0);try{await Na();const b=await tt();if(b.ok&&b.data){const x=b.data.map(j=>({...j,activityType:"competition",type:j.type,rounds:j.rounds.map(Z=>({...Z,climbs:Z.climbs?.map(A=>({...A,status:A.status}))})),createdAt:j.createdAt||new Date().toISOString(),updatedAt:j.updatedAt||new Date().toISOString(),syncStatus:"synced"}));Ia(x),n(w,Pa().sort((j,Z)=>new Date(Z.date).getTime()-new Date(j.date).getTime()),!0)}}catch(b){console.error("Failed to sync",b)}finally{n(h,!1)}}V();function ne(b){e(z).has(b)?e(z).delete(b):e(z).add(b),n(z,new Set(e(z)),!0)}function P(){n(S,e(S)+g)}function Y(b){if(!b.rounds||b.rounds.length===0)return"No rounds";const x=b.rounds[b.rounds.length-1];if(x.position)return`#${x.position} ${x.name}`;if(x.climbs){const j=x.climbs.filter(A=>A.status==="Top"||A.status==="Flash").length,Z=x.climbs.filter(A=>A.status==="Zone").length;return`${b.rounds.length} Rnds ¬∑ Final: ${j}T ${Z+j}Z`}return x.name}var M=nr(),ee=t(M),de=s(t(ee),2);de.__click=V;var K=t(de);{var H=b=>{var x=Ji();La(),r(b,x)},X=b=>{var x=Ta("‚òÅÔ∏è Fetch Data");r(b,x)};_(K,b=>{e(h)?b(H):b(X,!1)})}a(de),a(ee);var se=s(ee,2);{var ce=b=>{var x=Zi();r(b,x)},J=b=>{var x=Xe(),j=Ge(x);{var Z=Q=>{var ie=Ki();r(Q,ie)},A=Q=>{var ie=vr(),c=t(ie);xe(c,17,()=>e(w).slice(0,e(S)),ke,(v,o)=>{var T=rr();let N;var te=t(T);te.__click=()=>ne(e(o).id),te.__keydown=ye=>ye.key==="Enter"&&ne(e(o).id);var ge=t(te),Le=t(ge),pe=t(Le),ue=t(pe,!0);a(pe);var L=s(pe,2),E=t(L,!0);a(L),a(Le);var me=s(Le,2),be=t(me),we=t(be),q=t(we,!0);a(we);var I=s(we,2),le=t(I,!0);a(I),a(be),a(me),a(ge);var Ce=s(ge,2),G=t(Ce);let $;var Se=s(G,2);Se.__click=ye=>{ye.stopPropagation(),F(e(o).id)};var ae=s(Se,2),re=t(ae,!0);a(ae),a(Ce),a(te);var _e=s(te,2);{var je=ye=>{var ze=ir(),Te=t(ze);{var Fe=Ne=>{var Me=tr();xe(Me,21,()=>e(o).rounds||[],ke,(da,Ke)=>{var ga=ar(),sa=t(ga),ia=t(sa),pa=t(ia,!0);a(ia);var Ee=s(ia,2);{var We=Ie=>{var Re=Xi(),ra=t(Re);a(Re),m(()=>d(ra,`#${e(Ke).position??""}`)),r(Ie,Re)};_(Ee,Ie=>{e(Ke).position&&Ie(We)})}a(sa);var Ue=s(sa,2);{var $e=Ie=>{var Re=er();xe(Re,21,()=>e(Ke).climbs||[],ke,(ra,He)=>{var Ca=$i(),ya=Ge(Ca),Sa=t(ya),xa=t(Sa),Da=t(xa,!0);a(xa);var za=s(xa,2);{var Fa=R=>{var f=Yi(),D=t(f);a(f),m(()=>d(D,`(${e(He).attemptCount??""} tries)`)),r(R,f)};_(za,R=>{e(He).attemptCount>1&&R(Fa)})}a(Sa);var ka=s(Sa,2),Je=t(ka);let ca;var Ea=t(Je,!0);a(Je),a(ka),a(ya);var Ga=s(ya,2);{var B=R=>{var f=Qi(),D=t(f);a(f),m(()=>d(D,`"${e(He).notes??""}"`)),r(R,f)};_(Ga,R=>{e(He).notes&&R(B)})}m(()=>{d(Da,e(He).name),ca=aa(Je,1,"status-badge svelte-xyvf5r",null,ca,{top:e(He).status==="Top"||e(He).status==="Flash",zone:e(He).status==="Zone"}),d(Ea,e(He).status)}),r(ra,Ca)}),a(Re),r(Ie,Re)};_(Ue,Ie=>{e(Ke).climbs&&Ie($e)})}a(ga),m(()=>d(pa,e(Ke).name)),r(da,ga)}),a(Me),r(Ne,Me)};_(Te,Ne=>{e(o).rounds&&Ne(Fe)})}var qe=s(Te,2);{var Oe=Ne=>{var Me=sr(),da=t(Me),Ke=t(da);a(da),a(Me),m(()=>d(Ke,`Detailed Load: Fingers ${e(o).fingerLoad??""}/5, Shoulders ${e(o).shoulderLoad??""}/5, Forearms ${e(o).forearmLoad??""}/5`)),r(Ne,Me)};_(qe,Ne=>{(e(o).fingerLoad||e(o).shoulderLoad)&&Ne(Oe)})}var Qe=s(qe,2),Ze=t(Qe);let Ae;var Ve=t(Ze,!0);a(Ze),a(Qe),a(ze),m(()=>{Ae=aa(Ze,1,"sync-status svelte-xyvf5r",null,Ae,{synced:e(o).syncStatus==="synced"}),d(Ve,e(o).syncStatus==="synced"?"‚úì Synced":"‚òÅ Local")}),ta(3,ze,()=>fa,()=>({duration:150})),r(ye,ze)};_(_e,ye=>{e(z).has(e(o).id)&&ye(je)})}a(T),m((ye,ze,Te,Fe)=>{N=aa(T,1,"session-card svelte-xyvf5r",null,N,ye),d(ue,e(o).customVenue||e(o).venue),d(E,ze),d(q,e(o).type),d(le,Te),$=aa(G,1,"sync-dot",null,$,{synced:e(o).syncStatus==="synced"}),Ye(G,"title",e(o).syncStatus==="synced"?"Synced":"Local"),d(re,Fe)},[()=>({expanded:e(z).has(e(o).id)}),()=>new Date(e(o).date).toLocaleDateString(void 0,{weekday:"short",day:"numeric",month:"short"}),()=>Y(e(o)),()=>e(z).has(e(o).id)?"‚ñ≤":"‚ñº"]),r(v,T)});var p=s(c,2);{var u=v=>{var o=lr(),T=t(o);T.__click=P;var N=t(T);a(T),a(o),m(()=>d(N,`Load More (${e(w).length-e(S)} remaining)`)),r(v,o)};_(p,v=>{e(S)<e(w).length&&v(u)})}a(ie),r(Q,ie)};_(j,Q=>{e(w).length===0?Q(Z):Q(A,!1)},!0)}r(b,x)};_(se,b=>{e(h)&&e(w).length===0?b(ce):b(J,!1)})}var oe=s(se,2);Oa(oe,{get isOpen(){return e(k)},title:"Delete Competition",message:"Are you sure you want to delete this competition session? This action cannot be undone.",onConfirm:U,onCancel:()=>n(k,!1)}),a(M),m(()=>de.disabled=e(h)),r(he,M),ua()}oa(["click","keydown"]);var dr=l('<button class="backdrop svelte-108px9u" aria-label="Close settings"></button> <div class="settings-modal svelte-108px9u" role="dialog" aria-modal="true"><div class="settings-header svelte-108px9u"><h3 class="svelte-108px9u">Settings</h3> <button class="close-btn svelte-108px9u">‚úï</button></div> <div class="settings-content"><div class="setting-item svelte-108px9u"><div class="setting-info svelte-108px9u"><span class="setting-label svelte-108px9u">Local Data</span> <span class="setting-desc svelte-108px9u">Clear all cached data on this device</span></div> <button class="btn-clear-cache svelte-108px9u">Clear Cache</button></div></div></div>',1),cr=l("<option> </option>"),_r=l('<div class="view-container svelte-108px9u"><!></div>'),ur=l('<div class="page svelte-108px9u"><div class="page-header svelte-108px9u"><div><h1 class="svelte-108px9u">üìä View Data</h1> <p class="subtitle svelte-108px9u">Browse your training history</p></div> <button class="settings-btn svelte-108px9u" aria-label="Settings">‚öôÔ∏è</button></div> <!> <!> <div class="content-card svelte-108px9u"><div class="form-group svelte-108px9u"><label for="activity-type" class="svelte-108px9u">Activity Type</label> <select id="activity-type" class="svelte-108px9u"><option disabled>Select an activity...</option><!></select></div> <!></div></div>');function Dr(he,i){_a(i,!0);const w=[{value:"indoor_climb",label:"Indoor Climb",icon:"üßó"},{value:"outdoor_climb",label:"Outdoor Climb",icon:"‚õ∞Ô∏è"},{value:"gym_session",label:"Gym Session",icon:"üèãÔ∏è"},{value:"fingerboarding",label:"Fingerboarding",icon:"ü§è"},{value:"competition",label:"Competition",icon:"üèÜ"}];let h=C(""),z=C(!1),S=C(!1);function g(){n(z,!0)}function k(){n(z,!1)}function y(){n(z,!1),n(S,!0)}function F(){rt()}var U=ur(),V=t(U),ne=s(t(V),2);ne.__click=g,a(V);var P=s(V,2);{var Y=J=>{var oe=dr(),b=Ge(oe);b.__click=k;var x=s(b,2),j=t(x),Z=s(t(j),2);Z.__click=k,a(j);var A=s(j,2),Q=t(A),ie=s(t(Q),2);ie.__click=y,a(Q),a(A),a(x),ta(3,b,()=>st,()=>({duration:200})),ta(3,x,()=>it,()=>({duration:200,start:.9})),r(J,oe)};_(P,J=>{e(z)&&J(Y)})}var M=s(P,2);Oa(M,{get isOpen(){return e(S)},title:"Clear all local data?",message:"Are you sure you want to clear all locally cached data? This will remove all sessions stored on this device. Data already synced to the cloud will be preserved.",confirmKeyword:"clear",onConfirm:F,onCancel:()=>n(S,!1)});var ee=s(M,2),de=t(ee),K=s(t(de),2),H=t(K);H.value=H.__value="";var X=s(H);xe(X,17,()=>w,J=>J.value,(J,oe)=>{var b=cr(),x=t(b);a(b);var j={};m(()=>{d(x,`${e(oe).icon??""} ${e(oe).label??""}`),j!==(j=e(oe).value)&&(b.value=(b.__value=e(oe).value)??"")}),r(J,b)}),a(K),a(de);var se=s(de,2);{var ce=J=>{var oe=_r(),b=t(oe);{var x=Z=>{ls(Z,{})},j=Z=>{var A=Xe(),Q=Ge(A);{var ie=p=>{li(p,{})},c=p=>{var u=Xe(),v=Ge(u);{var o=N=>{ji(N,{})},T=N=>{var te=Xe(),ge=Ge(te);{var Le=ue=>{Hi(ue,{})},pe=ue=>{var L=Xe(),E=Ge(L);{var me=be=>{or(be,{})};_(E,be=>{e(h)==="competition"&&be(me)},!0)}r(ue,L)};_(ge,ue=>{e(h)==="fingerboarding"?ue(Le):ue(pe,!1)},!0)}r(N,te)};_(v,N=>{e(h)==="gym_session"?N(o):N(T,!1)},!0)}r(p,u)};_(Q,p=>{e(h)==="outdoor_climb"?p(ie):p(c,!1)},!0)}r(Z,A)};_(b,Z=>{e(h)==="indoor_climb"?Z(x):Z(j,!1)})}a(oe),r(J,oe)};_(se,J=>{e(h)&&J(ce)})}a(ee),a(U),qa(K,()=>e(h),J=>n(h,J)),r(he,U),ua()}oa(["click"]);export{Dr as component};
