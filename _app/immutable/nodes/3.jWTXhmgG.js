import{f as c,a as o,c as ct,t as Te}from"../chunks/bxSSDmCG.js";import{p as Pt,c as l,r as s,s as a,i as e,t as w,a as $t,f as tt,aV as n,E as we,aG as he,F as t,aW as Ot,aY as ms,d as gs,o as bs}from"../chunks/BvwCwrbP.js";import{d as It,s as z,e as ls}from"../chunks/D97XAFTq.js";import{i as k}from"../chunks/DJDEC4-q.js";import{e as oe,i as ne,r as y,b,c as hs,s as wt,d as Ss}from"../chunks/C6b-0WKN.js";import{s as Ye}from"../chunks/r3Oz2b9H.js";import{i as us,s as ps,c as Ue,d as ks,m as rs,b as os,e as qs,f as xs,h as ws}from"../chunks/CIEREIgH.js";import{i as Xt,c as Cs,g as Ns,a as Ts,b as Fs,d as Os,e as js,f as Vs,s as As}from"../chunks/DD0kMcH3.js";import{p as _s}from"../chunks/BzRc-_KC.js";import"../chunks/C34k2uMk.js";var Ls=c('<span class="placeholder svelte-1g8x5ph"> </span>'),Gs=c('<span class="chip-display"> </span>'),Bs=c('<button type="button"> </button>'),Ds=c('<div class="multi-select-container svelte-1g8x5ph"><div class="chips svelte-1g8x5ph"><!></div> <div class="options-grid svelte-1g8x5ph"></div></div>');function ht(Pe,ke){Pt(ke,!0);let Fe=_s(ke,"selected",19,()=>[]),pe=_s(ke,"placeholder",3,"Select options...");function fe(D){let N=[...Fe()];D==="None"?N.includes("None")?N=[]:N=["None"]:(N=N.filter(F=>F!=="None"),N.includes(D)?N=N.filter(F=>F!==D):N.push(D)),ke.onChange(N)}var C=Ds(),U=l(C),K=l(U);{var _e=D=>{var N=Ls(),F=l(N,!0);s(N),w(()=>z(F,pe())),o(D,N)},$e=D=>{var N=ct(),F=tt(N);oe(F,17,Fe,ne,(V,x)=>{var O=Gs(),A=l(O,!0);s(O),w(()=>z(A,e(x))),o(V,O)}),o(D,N)};k(K,D=>{Fe().length===0?D(_e):D($e,!1)})}s(U);var Y=a(U,2);oe(Y,21,()=>ke.options,ne,(D,N)=>{var F=Bs();F.__click=()=>fe(e(N));var V=l(F,!0);s(F),w(x=>{Ye(F,1,`option-chip ${x??""}`,"svelte-1g8x5ph"),z(V,e(N))},[()=>Fe().includes(e(N))?"selected":""]),o(D,F)}),s(Y),s(C),o(Pe,C),$t()}It(["click"]);var Es=c("<option> </option>"),Rs=c('<div class="form-group svelte-1lf3qka"><label for="custom-location" class="svelte-1lf3qka">Custom Location</label> <input type="text" id="custom-location" placeholder="Enter location name..." class="svelte-1lf3qka"/></div>'),Ms=c("<option> </option>"),Ps=c("<option> </option>"),$s=c('<th class="svelte-1lf3qka">Sport?</th>'),Is=c('<td class="center svelte-1lf3qka"><input type="checkbox" class="svelte-1lf3qka"/></td>'),zs=c('<span class="grade-error svelte-1lf3qka">Invalid</span>'),Us=c("<option> </option>"),Ws=c('<button type="button" class="remove-btn svelte-1lf3qka">‚úï</button>'),Hs=c('<tr><!><td class="svelte-1lf3qka"><input type="text" placeholder="Route name..." class="svelte-1lf3qka"/></td><td class="svelte-1lf3qka"><input type="text" placeholder="V3"/> <!></td><td class="svelte-1lf3qka"><select class="svelte-1lf3qka"></select></td><td class="svelte-1lf3qka"><input type="number" min="1" class="svelte-1lf3qka"/></td><td><textarea placeholder="Notes..." class="svelte-1lf3qka"></textarea></td><td class="center svelte-1lf3qka"><!></td></tr>'),Js=c("<div> </div>"),Ks=c('<div class="form-content svelte-1lf3qka"><h3 class="svelte-1lf3qka">üßó Indoor Climb</h3> <div class="form-row svelte-1lf3qka"><div class="form-group svelte-1lf3qka"><label for="date" class="svelte-1lf3qka">Date</label> <input type="date" id="date" class="svelte-1lf3qka"/></div> <div class="form-group svelte-1lf3qka"><label for="location" class="svelte-1lf3qka">Location</label> <select id="location" class="svelte-1lf3qka"><option disabled>Select location...</option><!></select></div></div> <!> <div class="form-group svelte-1lf3qka"><label for="climbing-type" class="svelte-1lf3qka">Climbing Type</label> <select id="climbing-type" class="svelte-1lf3qka"><option disabled>Select type...</option><!></select></div> <div class="load-section svelte-1lf3qka"><h4 class="svelte-1lf3qka">Load Metrics</h4> <div class="load-metrics svelte-1lf3qka"><div class="load-item svelte-1lf3qka"><label for="finger-load" class="svelte-1lf3qka">Finger</label> <input type="number" id="finger-load" min="1" max="5" class="svelte-1lf3qka"/> <span class="load-scale svelte-1lf3qka">/ 5</span></div> <div class="load-item svelte-1lf3qka"><label for="shoulder-load" class="svelte-1lf3qka">Shoulder</label> <input type="number" id="shoulder-load" min="1" max="5" class="svelte-1lf3qka"/> <span class="load-scale svelte-1lf3qka">/ 5</span></div> <div class="load-item svelte-1lf3qka"><label for="forearm-load" class="svelte-1lf3qka">Forearm</label> <input type="number" id="forearm-load" min="1" max="5" class="svelte-1lf3qka"/> <span class="load-scale svelte-1lf3qka">/ 5</span></div></div> <h4 class="mt-4 svelte-1lf3qka">Grip Metrics</h4> <div class="load-metrics svelte-1lf3qka"><div class="load-item svelte-1lf3qka"><label for="open-grip" class="svelte-1lf3qka">Open</label> <input type="number" id="open-grip" min="1" max="5" class="svelte-1lf3qka"/> <span class="load-scale svelte-1lf3qka">/ 5</span></div> <div class="load-item svelte-1lf3qka"><label for="crimp-grip" class="svelte-1lf3qka">Crimp</label> <input type="number" id="crimp-grip" min="1" max="5" class="svelte-1lf3qka"/> <span class="load-scale svelte-1lf3qka">/ 5</span></div> <div class="load-item svelte-1lf3qka"><label for="pinch-grip" class="svelte-1lf3qka">Pinch</label> <input type="number" id="pinch-grip" min="1" max="5" class="svelte-1lf3qka"/> <span class="load-scale svelte-1lf3qka">/ 5</span></div> <div class="load-item svelte-1lf3qka"><label for="sloper-grip" class="svelte-1lf3qka">Sloper</label> <input type="number" id="sloper-grip" min="1" max="5" class="svelte-1lf3qka"/> <span class="load-scale svelte-1lf3qka">/ 5</span></div> <div class="load-item svelte-1lf3qka"><label for="jug-grip" class="svelte-1lf3qka">Jug</label> <input type="number" id="jug-grip" min="1" max="5" class="svelte-1lf3qka"/> <span class="load-scale svelte-1lf3qka">/ 5</span></div></div></div> <div class="training-section svelte-1lf3qka"><h4 class="svelte-1lf3qka">Training Details</h4> <div class="training-grid svelte-1lf3qka"><div class="training-item svelte-1lf3qka"><label for="training-type" class="svelte-1lf3qka">Training Type</label> <!></div> <div class="training-item svelte-1lf3qka"><label for="difficulty" class="svelte-1lf3qka">Difficulty</label> <select id="difficulty" class="svelte-1lf3qka"></select></div> <div class="training-item svelte-1lf3qka"><label for="category" class="svelte-1lf3qka">Category</label> <!></div> <div class="training-item svelte-1lf3qka"><label for="energy-system" class="svelte-1lf3qka">Energy System</label> <!></div> <div class="training-item svelte-1lf3qka"><label for="technique-focus" class="svelte-1lf3qka">Technique Focus</label> <!></div> <div class="training-item svelte-1lf3qka"><label for="wall-angle" class="svelte-1lf3qka">Wall</label> <!></div></div></div> <div class="climbs-section svelte-1lf3qka"><h4 class="svelte-1lf3qka">Climbs</h4> <div class="table-container svelte-1lf3qka"><table class="climbs-table svelte-1lf3qka"><thead><tr><!><th class="svelte-1lf3qka">Name</th><th class="svelte-1lf3qka">Grade</th><th class="svelte-1lf3qka">Attempt</th><th class="svelte-1lf3qka">#</th><th class="svelte-1lf3qka">Notes</th><th class="svelte-1lf3qka"></th></tr></thead><tbody></tbody></table></div> <button type="button" class="add-btn svelte-1lf3qka">+ Add Climb</button></div> <div class="submit-section svelte-1lf3qka"><!> <button type="button" class="submit-btn svelte-1lf3qka"><!></button></div></div>');function Qs(Pe,ke){Pt(ke,!0);const Fe=["Rockstar Unit 3","Rockstar Unit 5","Rockstar Techno","Flashpoint Bristol","Redpoint Bristol","TCH Bristol","Other"],pe=["Bouldering","Sport","Mixed"],fe=["Onsight","Flash","Redpoint","Dogged","DNF"],C=["None","Projecting","Onsighting","Campusing","Repeaters"],U=["None","Easy","Medium","Hard","Max","Limit+"],K=["None","Strength","Strength-endurance","Power Endurance","Coordination","Slab Technique","Overhang technique","Warm-up","Power"],_e=["None","Aerobic capacity","Aerobic lactic power","Anaerobic alactic capacity","Anaerobic alactic power","Anaerobic power","Anaerobic lactic capacity"],$e=["None","Trusting feet","Double-clutch","Standing on volumes","Deadpointing","Flagging","Swapping feet","Edging","Smearing","Matching","Backstepping","Drop Knee","Stemming","Bridging","Laybacking","Mantling","Kneebar","Dyno","Pogo","Coordination Moves","Gastoning","Underclinging","Compressing","Heel Hook","Toe Hook","Bicycle"],Y=["None","Overhang","Slab","Roof","Moon Board","Kilter Board","Beast","Circuit Board"],N=["V0-","4-","V0","4","V0+","4+","V1","5","V2","5+","V3","6A","V4","6B","V5","6C","V6","7A","V7","7A+","V8","7B","7B+","V9","7C","V10","7C+","V11","8A","V12","8A+","V13","8B","V14","8B+","V15","8C","V16","8C+","V17","9A"].map(i=>i.toLowerCase());let F=n(null),V=n(we(new Date().toISOString().split("T")[0])),x=n(""),O=n(""),A=n(""),Ce=n(we(["None"])),qe=n("None"),h=n(we(["None"])),E=n(we(["None"])),W=n(we(["None"])),te=n(we(["None"])),j=n(0),$=n(0),me=n(0),S=n(0),f=n(0),m=n(0),L=n(0),G=n(0),R=n(we([{isSport:!1,name:"",grade:"",attemptType:"Flash",attemptsNum:1,notes:""}]));function se(){t(R,[...e(R),{isSport:!1,name:"",grade:"",attemptType:"Flash",attemptsNum:1,notes:""}],!0)}function I(i){t(R,e(R).filter((u,q)=>q!==i),!0)}function B(i,u){e(R)[i].attemptType=u,(u==="Flash"||u==="Onsight")&&(e(R)[i].attemptsNum=1)}function ye(i){t(F,i,!0)}function Ae(){t(F,null)}let Le=Ot(()=>e(A)==="Mixed");function Ge(i){return e(A)==="Sport"?!0:e(A)==="Bouldering"?!1:i.isSport}function H(i){return i.trim()?N.includes(i.trim().toLowerCase()):!0}let M=n("idle"),ae=n("");function Be(){return e(x)?e(x)==="Other"&&!e(O).trim()?"Please enter a custom location":e(A)?e(R).filter(u=>u.grade.trim()&&!H(u.grade)).length>0?"Please fix invalid grades":null:"Please select a climbing type":"Please select a location"}async function Z(){const i=Be();if(i){t(M,"error"),t(ae,i,!0);return}t(M,"saving");try{const u=e(R).map(de=>({...de,isSport:Ge(de)})),q={date:e(V),location:e(x)==="Other"?e(O):e(x),customLocation:e(x)==="Other"?e(O):void 0,climbingType:e(A),trainingTypes:e(Ce),difficulty:e(qe),categories:e(h),energySystems:e(E),techniqueFocuses:e(W),wallAngles:e(te),fingerLoad:e(j),shoulderLoad:e($),forearmLoad:e(me),openGrip:e(S),crimpGrip:e(f),pinchGrip:e(m),sloperGrip:e(L),jugGrip:e(G),climbs:u},ue=ks(q);if(Xt()){const de=await Cs(q);de.ok?(rs(ue.id),t(M,"success"),t(ae,"Session saved and synced!")):(os(ue.id),t(M,"success"),t(ae,"Saved locally. Sync failed: "+(de.error||"Unknown error")))}else t(M,"success"),t(ae,"Saved locally. Will sync when online.");window.dispatchEvent(new CustomEvent("session-saved")),setTimeout(()=>{le()},2e3)}catch(u){t(M,"error"),t(ae,"Failed to save session"),console.error("Save error:",u)}}function le(){t(V,new Date().toISOString().split("T")[0],!0),t(x,""),t(O,""),t(A,""),t(Ce,["None"],!0),t(qe,"None"),t(h,["None"],!0),t(E,["None"],!0),t(W,["None"],!0),t(te,["None"],!0),t(j,0),t($,0),t(me,0),t(S,0),t(f,0),t(m,0),t(L,0),t(G,0),t(R,[{isSport:!1,name:"",grade:"",attemptType:"Flash",attemptsNum:1,notes:""}],!0),t(M,"idle"),t(ae,"")}var re=Ks(),ce=a(l(re),2),Q=l(ce),xe=a(l(Q),2);y(xe),s(Q);var be=a(Q,2),Oe=a(l(be),2),We=l(Oe);We.value=We.__value="";var st=a(We);oe(st,17,()=>Fe,ne,(i,u)=>{var q=Es(),ue=l(q,!0);s(q);var de={};w(()=>{z(ue,e(u)),de!==(de=e(u))&&(q.value=(q.__value=e(u))??"")}),o(i,q)}),s(Oe),s(be),s(ce);var Ze=a(ce,2);{var d=i=>{var u=Rs(),q=a(l(u),2);y(q),s(u),b(q,()=>e(O),ue=>t(O,ue)),o(i,u)};k(Ze,i=>{e(x)==="Other"&&i(d)})}var p=a(Ze,2),_=a(l(p),2),T=l(_);T.value=T.__value="";var ie=a(T);oe(ie,17,()=>pe,ne,(i,u)=>{var q=Ms(),ue=l(q,!0);s(q);var de={};w(()=>{z(ue,e(u)),de!==(de=e(u))&&(q.value=(q.__value=e(u))??"")}),o(i,q)}),s(_),s(p);var Ne=a(p,2),He=a(l(Ne),2),ut=l(He),yt=a(l(ut),2);y(yt),he(2),s(ut);var at=a(ut,2),lt=a(l(at),2);y(lt),he(2),s(at);var pt=a(at,2),jt=a(l(pt),2);y(jt),he(2),s(pt),s(He);var De=a(He,4),Se=l(De),ft=a(l(Se),2);y(ft),he(2),s(Se);var rt=a(Se,2),ot=a(l(rt),2);y(ot),he(2),s(rt);var _t=a(rt,2),mt=a(l(_t),2);y(mt),he(2),s(_t);var Ee=a(_t,2),bt=a(l(Ee),2);y(bt),he(2),s(Ee);var it=a(Ee,2),Ct=a(l(it),2);y(Ct),he(2),s(it),s(De),s(Ne);var gt=a(Ne,2),Nt=a(l(gt),2),Xe=l(Nt),Tt=a(l(Xe),2);ht(Tt,{get options(){return C},get selected(){return e(Ce)},placeholder:"Select types...",onChange:i=>t(Ce,i,!0)}),s(Xe);var nt=a(Xe,2),St=a(l(nt),2);oe(St,21,()=>U,ne,(i,u)=>{var q=Ps(),ue=l(q,!0);s(q);var de={};w(()=>{z(ue,e(u)),de!==(de=e(u))&&(q.value=(q.__value=e(u))??"")}),o(i,q)}),s(St),s(nt);var ve=a(nt,2),Re=a(l(ve),2);ht(Re,{get options(){return K},get selected(){return e(h)},placeholder:"Select categories...",onChange:i=>t(h,i,!0)}),s(ve);var je=a(ve,2),Vt=a(l(je),2);ht(Vt,{get options(){return _e},get selected(){return e(E)},placeholder:"Select systems...",onChange:i=>t(E,i,!0)}),s(je);var vt=a(je,2),is=a(l(vt),2);ht(is,{get options(){return $e},get selected(){return e(W)},placeholder:"Select focus...",onChange:i=>t(W,i,!0)}),s(vt);var At=a(vt,2),zt=a(l(At),2);ht(zt,{get options(){return Y},get selected(){return e(te)},placeholder:"Select angles...",onChange:i=>t(te,i,!0)}),s(At),s(Nt),s(gt);var Ft=a(gt,2),Ut=a(l(Ft),2),Lt=l(Ut),Wt=l(Lt),Ht=l(Wt),ns=l(Ht);{var Jt=i=>{var u=$s();o(i,u)};k(ns,i=>{e(Le)&&i(Jt)})}he(6),s(Ht),s(Wt);var Gt=a(Wt);oe(Gt,21,()=>e(R),ne,(i,u,q)=>{var ue=Hs(),de=l(ue);{var dt=P=>{var Ve=Is(),ze=l(Ve);y(ze),s(Ve),hs(ze,()=>e(u).isSport,Mt=>e(u).isSport=Mt),o(P,Ve)};k(de,P=>{e(Le)&&P(dt)})}var r=a(de),v=l(r);y(v),s(r);var g=a(r),X=l(g);y(X);let J;var Je=a(X,2);{var et=P=>{var Ve=zs();o(P,Ve)};k(Je,P=>{H(e(u).grade)||P(et)})}s(g);var Me=a(g),ge=l(Me);ge.__change=P=>B(q,P.target.value),oe(ge,21,()=>fe,ne,(P,Ve)=>{var ze=Us(),Mt=l(ze,!0);s(ze);var as={};w(()=>{z(Mt,e(Ve)),as!==(as=e(Ve))&&(ze.value=(ze.__value=e(Ve))??"")}),o(P,ze)}),s(ge);var Ie;us(ge),s(Me);var kt=a(Me),qt=l(kt);y(qt),s(kt);var Et=a(kt);let Rt;var Ke=l(Et);ms(Ke),s(Et);var Qt=a(Et),Yt=l(Qt);{var Zt=P=>{var Ve=Ws();Ve.__click=()=>I(q),o(P,Ve)};k(Yt,P=>{e(R).length>1&&P(Zt)})}s(Qt),s(ue),w(P=>{J=Ye(X,1,"grade-input svelte-1lf3qka",null,J,P),Ie!==(Ie=e(u).attemptType)&&(ge.value=(ge.__value=e(u).attemptType)??"",ps(ge,e(u).attemptType)),qt.disabled=e(u).attemptType==="Flash",Rt=Ye(Et,1,"notes-cell svelte-1lf3qka",null,Rt,{expanded:e(F)===q})},[()=>({invalid:!H(e(u).grade)})]),b(v,()=>e(u).name,P=>e(u).name=P),b(X,()=>e(u).grade,P=>e(u).grade=P),b(qt,()=>e(u).attemptsNum,P=>e(u).attemptsNum=P),ls("focus",Ke,()=>ye(q)),ls("blur",Ke,Ae),b(Ke,()=>e(u).notes,P=>e(u).notes=P),o(i,ue)}),s(Gt),s(Lt),s(Ut);var es=a(Ut,2);es.__click=se,s(Ft);var Bt=a(Ft,2),Kt=l(Bt);{var vs=i=>{var u=Js();let q;var ue=l(u,!0);s(u),w(()=>{q=Ye(u,1,"save-message svelte-1lf3qka",null,q,{success:e(M)==="success",error:e(M)==="error"}),z(ue,e(ae))}),o(i,u)};k(Kt,i=>{e(ae)&&i(vs)})}var Dt=a(Kt,2);Dt.__click=Z;var ts=l(Dt);{var ds=i=>{var u=Te("Saving...");o(i,u)},ss=i=>{var u=ct(),q=tt(u);{var ue=dt=>{var r=Te("‚úì Saved!");o(dt,r)},de=dt=>{var r=Te("Save Session");o(dt,r)};k(q,dt=>{e(M)==="success"?dt(ue):dt(de,!1)},!0)}o(i,u)};k(ts,i=>{e(M)==="saving"?i(ds):i(ss,!1)})}s(Dt),s(Bt),s(re),w(()=>Dt.disabled=e(M)==="saving"),b(xe,()=>e(V),i=>t(V,i)),Ue(Oe,()=>e(x),i=>t(x,i)),Ue(_,()=>e(A),i=>t(A,i)),b(yt,()=>e(j),i=>t(j,i)),b(lt,()=>e($),i=>t($,i)),b(jt,()=>e(me),i=>t(me,i)),b(ft,()=>e(S),i=>t(S,i)),b(ot,()=>e(f),i=>t(f,i)),b(mt,()=>e(m),i=>t(m,i)),b(bt,()=>e(L),i=>t(L,i)),b(Ct,()=>e(G),i=>t(G,i)),Ue(St,()=>e(qe),i=>t(qe,i)),o(Pe,re),$t()}It(["change","click"]);var Ys=c("<option> </option>"),Zs=c('<div class="input-with-action svelte-15o2ys1"><input type="text" id="crag-manual" placeholder="Enter custom crag name..." class="flat-left svelte-15o2ys1"/> <button type="button" class="action-btn flat-right svelte-15o2ys1" title="Back to list">‚úï</button></div>'),Xs=c("<option> </option>"),ea=c("<option>Other (Manual Entry)</option>"),ta=c('<select id="crag" class="svelte-15o2ys1"><option disabled> </option><!><!></select>'),sa=c("<option> </option>"),aa=c("<option> </option>"),la=c('<th class="svelte-15o2ys1">Sport?</th>'),ra=c('<td class="center svelte-15o2ys1"><input type="checkbox" class="svelte-15o2ys1"/></td>'),oa=c('<span class="grade-error svelte-15o2ys1">Invalid</span>'),ia=c("<option> </option>"),na=c('<button type="button" class="remove-btn svelte-15o2ys1">‚úï</button>'),va=c('<tr><!><td class="svelte-15o2ys1"><input type="text" placeholder="Route name..." class="svelte-15o2ys1"/></td><td class="svelte-15o2ys1"><input type="text" placeholder="V3"/> <!></td><td class="svelte-15o2ys1"><select class="svelte-15o2ys1"></select></td><td class="svelte-15o2ys1"><input type="number" min="1" class="svelte-15o2ys1"/></td><td><textarea placeholder="Notes..." class="svelte-15o2ys1"></textarea></td><td class="center svelte-15o2ys1"><!></td></tr>'),da=c("<div> </div>"),ca=c('<div class="form-content svelte-15o2ys1"><h3 class="svelte-15o2ys1">‚õ∞Ô∏è Outdoor Climb</h3> <div class="form-row svelte-15o2ys1"><div class="form-group svelte-15o2ys1"><label for="date" class="svelte-15o2ys1">Date</label> <input type="date" id="date" class="svelte-15o2ys1"/></div> <div class="form-group svelte-15o2ys1"><label for="area" class="svelte-15o2ys1">Area</label> <select id="area" class="svelte-15o2ys1"><option disabled>Select area...</option><!></select></div></div> <div class="form-row svelte-15o2ys1"><div class="form-group svelte-15o2ys1"><label for="crag" class="svelte-15o2ys1">Crag</label> <!></div> <div class="form-group svelte-15o2ys1"><label for="sector" class="svelte-15o2ys1">Wall / Sector</label> <input type="text" id="sector" placeholder="Enter sector or wall name..." class="svelte-15o2ys1"/></div></div> <div class="form-group svelte-15o2ys1"><label for="climbing-type" class="svelte-15o2ys1">Climbing Type</label> <select id="climbing-type" class="svelte-15o2ys1"><option disabled>Select type...</option><!></select></div> <div class="load-section svelte-15o2ys1"><h4 class="svelte-15o2ys1">Load Metrics</h4> <div class="load-metrics svelte-15o2ys1"><div class="load-item svelte-15o2ys1"><label for="finger-load" class="svelte-15o2ys1">Finger</label> <input type="number" id="finger-load" min="1" max="5" class="svelte-15o2ys1"/> <span class="load-scale svelte-15o2ys1">/ 5</span></div> <div class="load-item svelte-15o2ys1"><label for="shoulder-load" class="svelte-15o2ys1">Shoulder</label> <input type="number" id="shoulder-load" min="1" max="5" class="svelte-15o2ys1"/> <span class="load-scale svelte-15o2ys1">/ 5</span></div> <div class="load-item svelte-15o2ys1"><label for="forearm-load" class="svelte-15o2ys1">Forearm</label> <input type="number" id="forearm-load" min="1" max="5" class="svelte-15o2ys1"/> <span class="load-scale svelte-15o2ys1">/ 5</span></div></div> <h4 class="mt-4 svelte-15o2ys1">Grip Metrics</h4> <div class="load-metrics svelte-15o2ys1"><div class="load-item svelte-15o2ys1"><label for="open-grip" class="svelte-15o2ys1">Open</label> <input type="number" id="open-grip" min="1" max="5" class="svelte-15o2ys1"/> <span class="load-scale svelte-15o2ys1">/ 5</span></div> <div class="load-item svelte-15o2ys1"><label for="crimp-grip" class="svelte-15o2ys1">Crimp</label> <input type="number" id="crimp-grip" min="1" max="5" class="svelte-15o2ys1"/> <span class="load-scale svelte-15o2ys1">/ 5</span></div> <div class="load-item svelte-15o2ys1"><label for="pinch-grip" class="svelte-15o2ys1">Pinch</label> <input type="number" id="pinch-grip" min="1" max="5" class="svelte-15o2ys1"/> <span class="load-scale svelte-15o2ys1">/ 5</span></div> <div class="load-item svelte-15o2ys1"><label for="sloper-grip" class="svelte-15o2ys1">Sloper</label> <input type="number" id="sloper-grip" min="1" max="5" class="svelte-15o2ys1"/> <span class="load-scale svelte-15o2ys1">/ 5</span></div> <div class="load-item svelte-15o2ys1"><label for="jug-grip" class="svelte-15o2ys1">Jug</label> <input type="number" id="jug-grip" min="1" max="5" class="svelte-15o2ys1"/> <span class="load-scale svelte-15o2ys1">/ 5</span></div></div></div> <div class="training-section svelte-15o2ys1"><h4 class="svelte-15o2ys1">Training Details</h4> <div class="training-grid svelte-15o2ys1"><div class="training-item svelte-15o2ys1"><label for="training-type" class="svelte-15o2ys1">Training Type</label> <!></div> <div class="training-item svelte-15o2ys1"><label for="difficulty" class="svelte-15o2ys1">Difficulty</label> <select id="difficulty" class="svelte-15o2ys1"></select></div> <div class="training-item svelte-15o2ys1"><label for="category" class="svelte-15o2ys1">Category</label> <!></div> <div class="training-item svelte-15o2ys1"><label for="energy-system" class="svelte-15o2ys1">Energy System</label> <!></div> <div class="training-item svelte-15o2ys1"><label for="technique-focus" class="svelte-15o2ys1">Technique Focus</label> <!></div></div></div> <div class="climbs-section svelte-15o2ys1"><h4 class="svelte-15o2ys1">Climbs</h4> <div class="table-container svelte-15o2ys1"><table class="climbs-table svelte-15o2ys1"><thead><tr><!><th class="svelte-15o2ys1">Name</th><th class="svelte-15o2ys1">Grade</th><th class="svelte-15o2ys1">Attempt</th><th class="svelte-15o2ys1">#</th><th class="svelte-15o2ys1">Notes</th><th class="svelte-15o2ys1"></th></tr></thead><tbody></tbody></table></div> <button type="button" class="add-btn svelte-15o2ys1">+ Add Climb</button></div> <div class="submit-section svelte-15o2ys1"><!> <button type="button" class="submit-btn svelte-15o2ys1"><!></button></div></div>');function ua(Pe,ke){Pt(ke,!0);const Fe=Ns(),pe=["Boulder","Sport","Trad"],fe=["Onsight","Flash","Redpoint","Dogged","DNF"],C=["None","Projecting","Onsighting","Campusing","Repeaters"],U=["None","Easy","Medium","Hard","Max","Limit+"],K=["None","Technique","Strength","Strength-endurance","Warm-up","Power"],_e=["None","Aerobic capacity","Aerobic lactic power","Anaerobic alactic capacity","Anaerobic alactic power","Anaerobic power","Anaerobic lactic capacity"],$e=["None","Double-clutch","Standing on volumes","Trusting feet"],D=["V0-","4-","V0","4","V0+","4+","V1","5","V2","5+","V3","6A","V4","6B","V5","6C","V6","7A","V7","7A+","V8","7B","7B+","V9","7C","V10","7C+","V11","8A","V12","8A+","V13","8B","V14","8B+","V15","8C","V16","8C+","V17","9A"].map(r=>r.toLowerCase());let N=n(null),F=n(we(new Date().toISOString().split("T")[0])),V=n(""),x=n(""),O=n(""),A=n(""),Ce=n(we(["None"])),qe=n("None"),h=n(we(["None"])),E=n(we(["None"])),W=n(we(["None"])),te=n(0),j=n(0),$=n(0),me=n(0),S=n(0),f=n(0),m=n(0),L=n(0),G=n(we([{isSport:!1,name:"",grade:"",attemptType:"Flash",attemptsNum:1,notes:""}])),R=Ot(()=>e(V)?Fs(e(V)):[]),se=n(!1);gs(()=>{e(V)&&(t(x,""),t(se,!1))});function I(){e(x)==="Other"&&(t(se,!0),t(x,""))}function B(){t(se,!1),t(x,"")}function ye(){t(G,[...e(G),{isSport:!1,name:"",grade:"",attemptType:"Flash",attemptsNum:1,notes:""}],!0)}function Ae(r){t(G,e(G).filter((v,g)=>g!==r),!0)}function Le(r,v){e(G)[r].attemptType=v,(v==="Flash"||v==="Onsight")&&(e(G)[r].attemptsNum=1)}function Ge(r){t(N,r,!0)}function H(){t(N,null)}let M=Ot(()=>e(A)==="Trad");function ae(r){return e(A)==="Sport"?!0:e(A)==="Boulder"?!1:r.isSport}function Be(r){return r.trim()?D.includes(r.trim().toLowerCase()):!0}let Z=n("idle"),le=n("");function re(){return e(V)?e(x)?e(A)?e(G).filter(v=>v.grade.trim()&&!Be(v.grade)).length>0?"Please fix invalid grades":null:"Please select a climbing type":"Please select a crag":"Please select an area"}async function ce(){const r=re();if(r){t(Z,"error"),t(le,r,!0);return}t(Z,"saving");try{const v=e(G).map(J=>({...J,isSport:ae(J)})),g={date:e(F),area:e(V),crag:e(x),sector:e(O)||void 0,climbingType:e(A),trainingTypes:e(Ce),difficulty:e(qe),categories:e(h),energySystems:e(E),techniqueFocuses:e(W),fingerLoad:e(te),shoulderLoad:e(j),forearmLoad:e($),openGrip:e(me),crimpGrip:e(S),pinchGrip:e(f),sloperGrip:e(m),jugGrip:e(L),climbs:v},X=qs(g);if(Xt()){const J=await Ts(g);J.ok?(rs(X.id),t(Z,"success"),t(le,"Session saved and synced!")):(os(X.id),t(Z,"success"),t(le,"Saved locally. Sync failed: "+(J.error||"Unknown error")))}else t(Z,"success"),t(le,"Saved locally. Will sync when online.");window.dispatchEvent(new CustomEvent("session-saved")),setTimeout(()=>{Q()},2e3)}catch(v){t(Z,"error"),t(le,"Failed to save session"),console.error("Save error:",v)}}function Q(){t(F,new Date().toISOString().split("T")[0],!0),t(V,""),t(x,""),t(O,""),t(A,""),t(Ce,["None"],!0),t(qe,"None"),t(h,["None"],!0),t(E,["None"],!0),t(W,["None"],!0),t(te,0),t(j,0),t($,0),t(me,0),t(S,0),t(f,0),t(m,0),t(L,0),t(G,[{isSport:!1,name:"",grade:"",attemptType:"Flash",attemptsNum:1,notes:""}],!0),t(Z,"idle"),t(le,"")}var xe=ca(),be=a(l(xe),2),Oe=l(be),We=a(l(Oe),2);y(We),s(Oe);var st=a(Oe,2),Ze=a(l(st),2),d=l(Ze);d.value=d.__value="";var p=a(d);oe(p,17,()=>Fe,ne,(r,v)=>{var g=Ys(),X=l(g,!0);s(g);var J={};w(()=>{z(X,e(v)),J!==(J=e(v))&&(g.value=(g.__value=e(v))??"")}),o(r,g)}),s(Ze),s(st),s(be);var _=a(be,2),T=l(_),ie=a(l(T),2);{var Ne=r=>{var v=Zs(),g=l(v);y(g);var X=a(g,2);X.__click=B,s(v),b(g,()=>e(x),J=>t(x,J)),o(r,v)},He=r=>{var v=ta();v.__change=I;var g=l(v),X=l(g,!0);s(g),g.value=g.__value="";var J=a(g);oe(J,17,()=>e(R),ne,(Me,ge)=>{var Ie=Xs(),kt=l(Ie,!0);s(Ie);var qt={};w(()=>{z(kt,e(ge)),qt!==(qt=e(ge))&&(Ie.value=(Ie.__value=e(ge))??"")}),o(Me,Ie)});var Je=a(J);{var et=Me=>{var ge=ea();ge.value=ge.__value="Other",o(Me,ge)};k(Je,Me=>{e(V)&&Me(et)})}s(v),w(()=>{v.disabled=!e(V),z(X,e(V)?"Select crag...":"Select area first...")}),Ue(v,()=>e(x),Me=>t(x,Me)),o(r,v)};k(ie,r=>{e(se)?r(Ne):r(He,!1)})}s(T);var ut=a(T,2),yt=a(l(ut),2);y(yt),s(ut),s(_);var at=a(_,2),lt=a(l(at),2),pt=l(lt);pt.value=pt.__value="";var jt=a(pt);oe(jt,17,()=>pe,ne,(r,v)=>{var g=sa(),X=l(g,!0);s(g);var J={};w(()=>{z(X,e(v)),J!==(J=e(v))&&(g.value=(g.__value=e(v))??"")}),o(r,g)}),s(lt),s(at);var De=a(at,2),Se=a(l(De),2),ft=l(Se),rt=a(l(ft),2);y(rt),he(2),s(ft);var ot=a(ft,2),_t=a(l(ot),2);y(_t),he(2),s(ot);var mt=a(ot,2),Ee=a(l(mt),2);y(Ee),he(2),s(mt),s(Se);var bt=a(Se,4),it=l(bt),Ct=a(l(it),2);y(Ct),he(2),s(it);var gt=a(it,2),Nt=a(l(gt),2);y(Nt),he(2),s(gt);var Xe=a(gt,2),Tt=a(l(Xe),2);y(Tt),he(2),s(Xe);var nt=a(Xe,2),St=a(l(nt),2);y(St),he(2),s(nt);var ve=a(nt,2),Re=a(l(ve),2);y(Re),he(2),s(ve),s(bt),s(De);var je=a(De,2),Vt=a(l(je),2),vt=l(Vt),is=a(l(vt),2);ht(is,{get options(){return C},get selected(){return e(Ce)},placeholder:"Select types...",onChange:r=>t(Ce,r,!0)}),s(vt);var At=a(vt,2),zt=a(l(At),2);oe(zt,21,()=>U,ne,(r,v)=>{var g=aa(),X=l(g,!0);s(g);var J={};w(()=>{z(X,e(v)),J!==(J=e(v))&&(g.value=(g.__value=e(v))??"")}),o(r,g)}),s(zt),s(At);var Ft=a(At,2),Ut=a(l(Ft),2);ht(Ut,{get options(){return K},get selected(){return e(h)},placeholder:"Select categories...",onChange:r=>t(h,r,!0)}),s(Ft);var Lt=a(Ft,2),Wt=a(l(Lt),2);ht(Wt,{get options(){return _e},get selected(){return e(E)},placeholder:"Select systems...",onChange:r=>t(E,r,!0)}),s(Lt);var Ht=a(Lt,2),ns=a(l(Ht),2);ht(ns,{get options(){return $e},get selected(){return e(W)},placeholder:"Select focus...",onChange:r=>t(W,r,!0)}),s(Ht),s(Vt),s(je);var Jt=a(je,2),Gt=a(l(Jt),2),es=l(Gt),Bt=l(es),Kt=l(Bt),vs=l(Kt);{var Dt=r=>{var v=la();o(r,v)};k(vs,r=>{e(M)&&r(Dt)})}he(6),s(Kt),s(Bt);var ts=a(Bt);oe(ts,21,()=>e(G),ne,(r,v,g)=>{var X=va(),J=l(X);{var Je=ee=>{var Qe=ra(),xt=l(Qe);y(xt),s(Qe),hs(xt,()=>e(v).isSport,cs=>e(v).isSport=cs),o(ee,Qe)};k(J,ee=>{e(M)&&ee(Je)})}var et=a(J),Me=l(et);y(Me),s(et);var ge=a(et),Ie=l(ge);y(Ie);let kt;var qt=a(Ie,2);{var Et=ee=>{var Qe=oa();o(ee,Qe)};k(qt,ee=>{Be(e(v).grade)||ee(Et)})}s(ge);var Rt=a(ge),Ke=l(Rt);Ke.__change=ee=>Le(g,ee.target.value),oe(Ke,21,()=>fe,ne,(ee,Qe)=>{var xt=ia(),cs=l(xt,!0);s(xt);var fs={};w(()=>{z(cs,e(Qe)),fs!==(fs=e(Qe))&&(xt.value=(xt.__value=e(Qe))??"")}),o(ee,xt)}),s(Ke);var Qt;us(Ke),s(Rt);var Yt=a(Rt),Zt=l(Yt);y(Zt),s(Yt);var P=a(Yt);let Ve;var ze=l(P);ms(ze),s(P);var Mt=a(P),as=l(Mt);{var ys=ee=>{var Qe=na();Qe.__click=()=>Ae(g),o(ee,Qe)};k(as,ee=>{e(G).length>1&&ee(ys)})}s(Mt),s(X),w(ee=>{kt=Ye(Ie,1,"grade-input svelte-15o2ys1",null,kt,ee),Qt!==(Qt=e(v).attemptType)&&(Ke.value=(Ke.__value=e(v).attemptType)??"",ps(Ke,e(v).attemptType)),Zt.disabled=e(v).attemptType==="Flash",Ve=Ye(P,1,"notes-cell svelte-15o2ys1",null,Ve,{expanded:e(N)===g})},[()=>({invalid:!Be(e(v).grade)})]),b(Me,()=>e(v).name,ee=>e(v).name=ee),b(Ie,()=>e(v).grade,ee=>e(v).grade=ee),b(Zt,()=>e(v).attemptsNum,ee=>e(v).attemptsNum=ee),ls("focus",ze,()=>Ge(g)),ls("blur",ze,H),b(ze,()=>e(v).notes,ee=>e(v).notes=ee),o(r,X)}),s(ts),s(es),s(Gt);var ds=a(Gt,2);ds.__click=ye,s(Jt);var ss=a(Jt,2),i=l(ss);{var u=r=>{var v=da();let g;var X=l(v,!0);s(v),w(()=>{g=Ye(v,1,"save-message svelte-15o2ys1",null,g,{success:e(Z)==="success",error:e(Z)==="error"}),z(X,e(le))}),o(r,v)};k(i,r=>{e(le)&&r(u)})}var q=a(i,2);q.__click=ce;var ue=l(q);{var de=r=>{var v=Te("Saving...");o(r,v)},dt=r=>{var v=ct(),g=tt(v);{var X=Je=>{var et=Te("‚úì Saved!");o(Je,et)},J=Je=>{var et=Te("Save Session");o(Je,et)};k(g,Je=>{e(Z)==="success"?Je(X):Je(J,!1)},!0)}o(r,v)};k(ue,r=>{e(Z)==="saving"?r(de):r(dt,!1)})}s(q),s(ss),s(xe),w(()=>q.disabled=e(Z)==="saving"),b(We,()=>e(F),r=>t(F,r)),Ue(Ze,()=>e(V),r=>t(V,r)),b(yt,()=>e(O),r=>t(O,r)),Ue(lt,()=>e(A),r=>t(A,r)),b(rt,()=>e(te),r=>t(te,r)),b(_t,()=>e(j),r=>t(j,r)),b(Ee,()=>e($),r=>t($,r)),b(Ct,()=>e(me),r=>t(me,r)),b(Nt,()=>e(S),r=>t(S,r)),b(Tt,()=>e(f),r=>t(f,r)),b(St,()=>e(m),r=>t(m,r)),b(Re,()=>e(L),r=>t(L,r)),Ue(zt,()=>e(qe),r=>t(qe,r)),o(Pe,xe),$t()}It(["click","change"]);var pa=c('<div class="form-content svelte-1w0zsmt"><h3 class="svelte-1w0zsmt">üèãÔ∏è Gym Session</h3> <p class="form-placeholder svelte-1w0zsmt">Gym session form fields will go here</p></div>');function fa(Pe){var ke=pa();o(Pe,ke)}var _a=c("<option> </option>"),ma=c("<option> </option>"),ga=c('<button class="remove-set-btn svelte-1m63nqt">‚úï</button>'),ha=c('<div class="set-row svelte-1m63nqt"><div class="input-wrap svelte-1m63nqt"><label class="svelte-1m63nqt">Weight</label> <input type="number" placeholder="0" class="svelte-1m63nqt"/></div> <div class="input-wrap svelte-1m63nqt"><label class="svelte-1m63nqt">Reps/Secs</label> <input type="number" placeholder="1" class="svelte-1m63nqt"/></div> <!></div>'),ya=c('<div class="exercise-card svelte-1m63nqt"><div class="card-header svelte-1m63nqt"><div class="header-inputs svelte-1m63nqt"><select class="svelte-1m63nqt"></select> <select class="svelte-1m63nqt"></select></div> <button class="remove-card-btn svelte-1m63nqt" title="Remove Exercise">‚úï</button></div> <div class="sets-list svelte-1m63nqt"><!> <button class="add-set-btn svelte-1m63nqt">+ Add Set</button></div> <div class="card-footer svelte-1m63nqt"><div class="meta-input svelte-1m63nqt"><label class="svelte-1m63nqt">Total Sets</label> <input type="number" readonly="" disabled class="svelte-1m63nqt"/></div> <div class="notes-input svelte-1m63nqt"><label class="svelte-1m63nqt">Notes</label> <input type="text" placeholder="Notes..." class="svelte-1m63nqt"/></div></div></div>'),ba=c("<div> </div>"),Sa=c('<div class="form-content svelte-1m63nqt"><div class="header-row svelte-1m63nqt"><h3 class="svelte-1m63nqt">ü§è Fingerboarding</h3> <button class="add-row-btn svelte-1m63nqt">+ Add Exercise</button></div> <div class="form-group date-group svelte-1m63nqt"><label for="date">Date</label> <input type="date" id="date" class="svelte-1m63nqt"/></div> <div class="cards-container svelte-1m63nqt"></div> <div class="submit-section"><!> <button type="button" class="submit-btn svelte-1m63nqt"><!></button></div></div>');function ka(Pe,ke){Pt(ke,!0);const Fe=["Max hangs","Recruitment pulls","Max pick-ups"],pe=["Full-crimp","Half-crimp","Three finger drag","Pinch","Open hand","Sloper"];let fe=n(we(new Date().toISOString().split("T")[0])),C=n(we([]));function U(){t(C,[...e(C),{id:crypto.randomUUID(),name:Fe[0],gripType:pe[1],sets:1,details:[{weight:0,reps:5}],notes:""}],!0)}gs(()=>{e(C).length===0&&U()});function K(S){t(C,e(C).filter((f,m)=>m!==S),!0)}function _e(S){const f=e(C)[S],m=f.details[f.details.length-1];f.details=[...f.details,{...m}],f.sets=f.details.length}function $e(S,f){const m=e(C)[S];m.details.length>1&&(m.details=m.details.filter((L,G)=>G!==f),m.sets=m.details.length)}let Y=n("idle"),D=n("");async function N(){t(Y,"saving");try{const S={date:e(fe),location:"N/A",exercises:JSON.parse(JSON.stringify(e(C)))},f=xs(S);if(Xt()){const m=await Os(S);m.ok?(rs(f.id),t(Y,"success"),t(D,"Session saved and synced!")):(os(f.id),t(Y,"success"),t(D,"Saved locally. Sync failed: "+(m.error||"Unknown error")))}else t(Y,"success"),t(D,"Saved locally. Will sync when online.");window.dispatchEvent(new CustomEvent("session-saved")),setTimeout(()=>{F()},2e3)}catch(S){t(Y,"error"),t(D,"Failed to save session"),console.error("Save error:",S)}}function F(){t(fe,new Date().toISOString().split("T")[0],!0),t(C,[],!0),U(),t(Y,"idle"),t(D,"")}var V=Sa(),x=l(V),O=a(l(x),2);O.__click=U,s(x);var A=a(x,2),Ce=a(l(A),2);y(Ce),s(A);var qe=a(A,2);oe(qe,21,()=>e(C),ne,(S,f,m)=>{var L=ya(),G=l(L),R=l(G),se=l(R);oe(se,21,()=>Fe,ne,(re,ce)=>{var Q=_a(),xe=l(Q,!0);s(Q);var be={};w(()=>{z(xe,e(ce)),be!==(be=e(ce))&&(Q.value=(Q.__value=e(ce))??"")}),o(re,Q)}),s(se);var I=a(se,2);oe(I,21,()=>pe,ne,(re,ce)=>{var Q=ma(),xe=l(Q,!0);s(Q);var be={};w(()=>{z(xe,e(ce)),be!==(be=e(ce))&&(Q.value=(Q.__value=e(ce))??"")}),o(re,Q)}),s(I),s(R);var B=a(R,2);B.__click=()=>K(m),s(G);var ye=a(G,2),Ae=l(ye);oe(Ae,17,()=>e(f).details,ne,(re,ce,Q)=>{var xe=ha(),be=l(xe),Oe=l(be);wt(Oe,"for",`weight-${m}-${Q}`);var We=a(Oe,2);y(We),wt(We,"id",`weight-${m}-${Q}`),s(be);var st=a(be,2),Ze=l(st);wt(Ze,"for",`reps-${m}-${Q}`);var d=a(Ze,2);y(d),wt(d,"id",`reps-${m}-${Q}`),s(st);var p=a(st,2);{var _=T=>{var ie=ga();ie.__click=()=>$e(m,Q),o(T,ie)};k(p,T=>{e(f).details.length>1&&T(_)})}s(xe),b(We,()=>e(ce).weight,T=>e(ce).weight=T),b(d,()=>e(ce).reps,T=>e(ce).reps=T),o(re,xe)});var Le=a(Ae,2);Le.__click=()=>_e(m),s(ye);var Ge=a(ye,2),H=l(Ge),M=l(H);wt(M,"for",`total-sets-${m}`);var ae=a(M,2);y(ae),wt(ae,"id",`total-sets-${m}`),s(H);var Be=a(H,2),Z=l(Be);wt(Z,"for",`notes-${m}`);var le=a(Z,2);y(le),wt(le,"id",`notes-${m}`),s(Be),s(Ge),s(L),w(()=>Ss(ae,e(f).sets)),Ue(se,()=>e(f).name,re=>e(f).name=re),Ue(I,()=>e(f).gripType,re=>e(f).gripType=re),b(le,()=>e(f).notes,re=>e(f).notes=re),o(S,L)}),s(qe);var h=a(qe,2),E=l(h);{var W=S=>{var f=ba();let m;var L=l(f,!0);s(f),w(()=>{m=Ye(f,1,"save-message svelte-1m63nqt",null,m,{success:e(Y)==="success",error:e(Y)==="error"}),z(L,e(D))}),o(S,f)};k(E,S=>{e(D)&&S(W)})}var te=a(E,2);te.__click=N;var j=l(te);{var $=S=>{var f=Te("Saving...");o(S,f)},me=S=>{var f=ct(),m=tt(f);{var L=R=>{var se=Te("‚úì Saved!");o(R,se)},G=R=>{var se=Te("Save Session");o(R,se)};k(m,R=>{e(Y)==="success"?R(L):R(G,!1)},!0)}o(S,f)};k(j,S=>{e(Y)==="saving"?S($):S(me,!1)})}s(te),s(h),s(V),w(()=>te.disabled=e(Y)==="saving"),b(Ce,()=>e(fe),S=>t(fe,S)),o(Pe,V),$t()}It(["click"]);var qa=c("<option> </option>"),xa=c('<input type="text" placeholder="Enter venue name" class="mt-2 svelte-1fje4dh"/>'),wa=c("<option> </option>"),Ca=c("<option> </option>"),Na=c('<input type="text" placeholder="Round name" class="mt-2 svelte-1fje4dh"/>'),Ta=c('<div class="result-mode-content svelte-1fje4dh"><div class="form-group svelte-1fje4dh"><label for="position" class="svelte-1fje4dh">Final Position</label> <input type="number" id="position" placeholder="#" class="large-input svelte-1fje4dh"/></div></div>'),Fa=c("<option> </option>"),Oa=c('<input type="number" min="1" class="svelte-1fje4dh"/>'),ja=c('<span class="flash-dash">-</span>'),Va=c('<tr><td class="col-name svelte-1fje4dh"><input type="text" class="svelte-1fje4dh"/></td><td class="col-status svelte-1fje4dh"><select class="svelte-1fje4dh"></select></td><td class="col-attempt svelte-1fje4dh"><!></td><td class="col-notes svelte-1fje4dh"><input type="text" placeholder="..." class="svelte-1fje4dh"/></td><td class="col-action svelte-1fje4dh"><button class="svelte-1fje4dh">‚úï</button></td></tr>'),Aa=c('<div class="load-metrics-compact svelte-1fje4dh"><div class="metric svelte-1fje4dh"><label for="finger">Finger Load</label> <input type="number" id="finger" min="0" max="5" step="0.5" class="svelte-1fje4dh"/></div> <div class="metric svelte-1fje4dh"><label for="shoulder">Shoulder Load</label> <input type="number" id="shoulder" min="0" max="5" step="0.5" class="svelte-1fje4dh"/></div> <div class="metric svelte-1fje4dh"><label for="forearm">Forearm Load</label> <input type="number" id="forearm" min="0" max="5" step="0.5" class="svelte-1fje4dh"/></div></div> <div class="climbs-table-container svelte-1fje4dh"><div class="section-header svelte-1fje4dh"><h4 class="svelte-1fje4dh">Boulders / Routes</h4></div> <table class="climbs-table svelte-1fje4dh"><thead><tr><th class="svelte-1fje4dh">#</th><th class="svelte-1fje4dh">Result</th><th class="svelte-1fje4dh">Att.</th><th class="svelte-1fje4dh">Notes</th><th class="svelte-1fje4dh"></th></tr></thead><tbody></tbody></table> <button class="add-row-btn svelte-1fje4dh">+ Add Row</button></div>',1),La=c("<div> </div>"),Ga=c('<div class="form-content svelte-1fje4dh"><h3 class="svelte-1fje4dh">üèÜ Competition</h3> <div class="form-grid svelte-1fje4dh"><div class="form-group svelte-1fje4dh"><label for="date" class="svelte-1fje4dh">Date</label> <input type="date" id="date" class="svelte-1fje4dh"/></div> <div class="form-group svelte-1fje4dh"><label for="venue" class="svelte-1fje4dh">Venue</label> <select id="venue" class="svelte-1fje4dh"><option disabled>Select venue...</option><!></select> <!></div></div> <div class="form-group mb-4 svelte-1fje4dh"><label for="type" class="svelte-1fje4dh">Type</label> <select id="type" class="svelte-1fje4dh"></select></div> <div class="round-section svelte-1fje4dh"><div class="form-group svelte-1fje4dh"><label for="round" class="svelte-1fje4dh">Round</label> <select id="round" class="svelte-1fje4dh"></select> <!></div> <!></div> <div class="submit-section"><!> <button type="button" class="submit-btn svelte-1fje4dh"><!></button></div></div>');function Ba(Pe,ke){Pt(ke,!0);const Fe=["Flashpoint Bristol","Rockstar Techno","Rockstar Unit 3","Rockstar Unit 5","Bloc","TCA","Other"],pe=["Bouldering","Lead","Speed"],fe=["Qualifiers","Semi-Finals","Finals","Result","Other"],C=["Flash","Top","Zone","Attempt"];let U=n(we(new Date().toISOString().split("T")[0])),K=n(""),_e=n(""),$e=n("Bouldering"),Y=n(4),D=n(4),N=n(4),F=n("Qualifiers"),V=n(""),x=n(null),O=n(we([{name:"#1",status:"Flash",attemptCount:1,notes:""}])),A=Ot(()=>e(F)==="Result"),Ce=Ot(()=>e(K)==="Other"),qe=Ot(()=>e(F)==="Other"),h=Ot(()=>e(F)==="Other"?e(V):e(F));function E(){const d=e(O).length+1;t(O,[...e(O),{name:`#${d}`,status:"Flash",attemptCount:1,notes:""}],!0)}function W(d){e(O).length>1?t(O,e(O).filter((p,_)=>_!==d),!0):e(O)[0]={name:"#1",status:"Flash",attemptCount:1,notes:""}}function te(d,p){e(O)[d].status=p,p==="Flash"&&(e(O)[d].attemptCount=1)}let j=n("idle"),$=n("");async function me(){if(!e(K)||e(K)==="Other"&&!e(_e)){t(j,"error"),t($,"Please specify a venue");return}t(j,"saving");try{const d={name:e(h),position:e(A)?e(x):void 0,climbs:e(A)?void 0:JSON.parse(JSON.stringify(e(O)))},p={date:e(U),venue:e(K)==="Other"?e(_e):e(K),customVenue:e(K)==="Other"?e(_e):void 0,type:e($e),fingerLoad:e(A)?void 0:e(Y),shoulderLoad:e(A)?void 0:e(D),forearmLoad:e(A)?void 0:e(N),rounds:[d]},_=ws(p);if(Xt()){const T=await js(p);T.ok?(rs(_.id),t(j,"success"),t($,"Competition saved and synced!")):(os(_.id),t(j,"success"),t($,"Saved locally. Sync failed: "+(T.error||"Unknown error")))}else t(j,"success"),t($,"Saved locally. Will sync when online.");window.dispatchEvent(new CustomEvent("session-saved")),setTimeout(()=>{S()},2e3)}catch(d){t(j,"error"),t($,"Failed to save session"),console.error("Save error:",d)}}function S(){t(U,new Date().toISOString().split("T")[0],!0),t(K,""),t(_e,""),t(x,null),t(O,[{name:"#1",status:"Flash",attemptCount:1,notes:""}],!0),t(j,"idle"),t($,"")}var f=Ga(),m=a(l(f),2),L=l(m),G=a(l(L),2);y(G),s(L);var R=a(L,2),se=a(l(R),2),I=l(se);I.value=I.__value="";var B=a(I);oe(B,17,()=>Fe,ne,(d,p)=>{var _=qa(),T=l(_,!0);s(_);var ie={};w(()=>{z(T,e(p)),ie!==(ie=e(p))&&(_.value=(_.__value=e(p))??"")}),o(d,_)}),s(se);var ye=a(se,2);{var Ae=d=>{var p=xa();y(p),b(p,()=>e(_e),_=>t(_e,_)),o(d,p)};k(ye,d=>{e(Ce)&&d(Ae)})}s(R),s(m);var Le=a(m,2),Ge=a(l(Le),2);oe(Ge,21,()=>pe,ne,(d,p)=>{var _=wa(),T=l(_,!0);s(_);var ie={};w(()=>{z(T,e(p)),ie!==(ie=e(p))&&(_.value=(_.__value=e(p))??"")}),o(d,_)}),s(Ge),s(Le);var H=a(Le,2),M=l(H),ae=a(l(M),2);oe(ae,21,()=>fe,ne,(d,p)=>{var _=Ca(),T=l(_,!0);s(_);var ie={};w(()=>{z(T,e(p)),ie!==(ie=e(p))&&(_.value=(_.__value=e(p))??"")}),o(d,_)}),s(ae);var Be=a(ae,2);{var Z=d=>{var p=Na();y(p),b(p,()=>e(V),_=>t(V,_)),o(d,p)};k(Be,d=>{e(qe)&&d(Z)})}s(M);var le=a(M,2);{var re=d=>{var p=Ta(),_=l(p),T=a(l(_),2);y(T),s(_),s(p),b(T,()=>e(x),ie=>t(x,ie)),o(d,p)},ce=d=>{var p=Aa(),_=tt(p),T=l(_),ie=a(l(T),2);y(ie),s(T);var Ne=a(T,2),He=a(l(Ne),2);y(He),s(Ne);var ut=a(Ne,2),yt=a(l(ut),2);y(yt),s(ut),s(_);var at=a(_,2),lt=a(l(at),2),pt=a(l(lt));oe(pt,21,()=>e(O),ne,(De,Se,ft)=>{var rt=Va(),ot=l(rt),_t=l(ot);y(_t),s(ot);var mt=a(ot),Ee=l(mt);Ee.__change=ve=>te(ft,ve.target.value),oe(Ee,21,()=>C,ne,(ve,Re)=>{var je=Fa(),Vt=l(je,!0);s(je);var vt={};w(()=>{z(Vt,e(Re)),vt!==(vt=e(Re))&&(je.value=(je.__value=e(Re))??"")}),o(ve,je)}),s(Ee);var bt;us(Ee),s(mt);var it=a(mt),Ct=l(it);{var gt=ve=>{var Re=Oa();y(Re),b(Re,()=>e(Se).attemptCount,je=>e(Se).attemptCount=je),o(ve,Re)},Nt=ve=>{var Re=ja();o(ve,Re)};k(Ct,ve=>{e(Se).status!=="Flash"?ve(gt):ve(Nt,!1)})}s(it);var Xe=a(it),Tt=l(Xe);y(Tt),s(Xe);var nt=a(Xe),St=l(nt);St.__click=()=>W(ft),s(nt),s(rt),w(()=>{bt!==(bt=e(Se).status)&&(Ee.value=(Ee.__value=e(Se).status)??"",ps(Ee,e(Se).status))}),b(_t,()=>e(Se).name,ve=>e(Se).name=ve),b(Tt,()=>e(Se).notes,ve=>e(Se).notes=ve),o(De,rt)}),s(pt),s(lt);var jt=a(lt,2);jt.__click=E,s(at),b(ie,()=>e(Y),De=>t(Y,De)),b(He,()=>e(D),De=>t(D,De)),b(yt,()=>e(N),De=>t(N,De)),o(d,p)};k(le,d=>{e(A)?d(re):d(ce,!1)})}s(H);var Q=a(H,2),xe=l(Q);{var be=d=>{var p=La();let _;var T=l(p,!0);s(p),w(()=>{_=Ye(p,1,"save-message svelte-1fje4dh",null,_,{success:e(j)==="success",error:e(j)==="error"}),z(T,e($))}),o(d,p)};k(xe,d=>{e($)&&d(be)})}var Oe=a(xe,2);Oe.__click=me;var We=l(Oe);{var st=d=>{var p=Te("Saving...");o(d,p)},Ze=d=>{var p=ct(),_=tt(p);{var T=Ne=>{var He=Te("‚úì Saved!");o(Ne,He)},ie=Ne=>{var He=Te("Save Session");o(Ne,He)};k(_,Ne=>{e(j)==="success"?Ne(T):Ne(ie,!1)},!0)}o(d,p)};k(We,d=>{e(j)==="saving"?d(st):d(Ze,!1)})}s(Oe),s(Q),s(f),w(()=>Oe.disabled=e(j)==="saving"),b(G,()=>e(U),d=>t(U,d)),Ue(se,()=>e(K),d=>t(K,d)),Ue(Ge,()=>e($e),d=>t($e,d)),Ue(ae,()=>e(F),d=>t(F,d)),o(Pe,f),$t()}It(["change","click"]);var Da=c('<span class="spinner svelte-b2zgdd"></span> Syncing...',1),Ea=c("<button><!></button>"),Ra=c("<div> </div>"),Ma=c('<div><div class="sync-info svelte-b2zgdd"><span class="sync-icon svelte-b2zgdd"> </span> <span class="sync-text svelte-b2zgdd"><!></span></div> <!> <!></div>'),Pa=c("<option> </option>"),$a=c('<div class="form-container svelte-b2zgdd"><!></div>'),Ia=c('<div class="page svelte-b2zgdd"><div class="page-header svelte-b2zgdd"><h1 class="svelte-b2zgdd">üìù Log Data</h1> <p class="subtitle svelte-b2zgdd">Record your training sessions</p></div> <!> <div class="content-card svelte-b2zgdd"><div class="form-group svelte-b2zgdd"><label for="activity-type" class="svelte-b2zgdd">Activity Type</label> <select id="activity-type" class="svelte-b2zgdd"><option disabled>Select an activity...</option><!></select></div> <!></div></div>');function el(Pe,ke){Pt(ke,!0);const Fe=[{value:"indoor_climb",label:"Indoor Climb",icon:"üßó"},{value:"outdoor_climb",label:"Outdoor Climb",icon:"‚õ∞Ô∏è"},{value:"gym_session",label:"Gym Session",icon:"üèãÔ∏è"},{value:"fingerboarding",label:"Fingerboarding",icon:"ü§è"},{value:"competition",label:"Competition",icon:"üèÜ"}];let pe=n(""),fe=n(0),C=n("idle"),U=n(""),K=n(!0);bs(()=>{_e(),t(K,Xt(),!0);const h=()=>{t(K,!0),_e()},E=()=>{t(K,!1)},W=()=>{_e()};return window.addEventListener("online",h),window.addEventListener("offline",E),window.addEventListener("session-saved",W),()=>{window.removeEventListener("online",h),window.removeEventListener("offline",E),window.removeEventListener("session-saved",W)}});function _e(){t(fe,Vs(),!0)}async function $e(){if(!e(K)){t(C,"error"),t(U,"No network connection");return}t(C,"syncing"),t(U,"");try{const h=await As();h.failed===0&&h.success>0?(t(C,"success"),t(U,`Synced ${h.success} session${h.success>1?"s":""}!`)):h.failed>0&&h.success>0?(t(C,"error"),t(U,`Synced ${h.success}, failed ${h.failed}`)):h.failed>0?(t(C,"error"),t(U,`Failed to sync ${h.failed} session${h.failed>1?"s":""}`)):(t(C,"idle"),t(U,"")),_e(),e(C)==="success"&&setTimeout(()=>{t(C,"idle"),t(U,"")},3e3)}catch(h){t(C,"error"),t(U,"Sync failed"),console.error("Sync error:",h)}}var Y=Ia(),D=a(l(Y),2);{var N=h=>{var E=Ma();let W;var te=l(E),j=l(te),$=l(j,!0);s(j);var me=a(j,2),S=l(me);{var f=I=>{var B=Te();w(()=>z(B,`${e(fe)??""} session${e(fe)>1?"s":""} waiting to sync`)),o(I,B)},m=I=>{var B=Te();w(()=>z(B,`Offline - ${e(fe)??""} session${e(fe)>1?"s":""} saved locally`)),o(I,B)};k(S,I=>{e(K)?I(f):I(m,!1)})}s(me),s(te);var L=a(te,2);{var G=I=>{var B=Ea();let ye;B.__click=$e;var Ae=l(B);{var Le=H=>{var M=Da();he(),o(H,M)},Ge=H=>{var M=ct(),ae=tt(M);{var Be=le=>{var re=Te("‚úì Synced!");o(le,re)},Z=le=>{var re=Te("Sync Now");o(le,re)};k(ae,le=>{e(C)==="success"?le(Be):le(Z,!1)},!0)}o(H,M)};k(Ae,H=>{e(C)==="syncing"?H(Le):H(Ge,!1)})}s(B),w(()=>{ye=Ye(B,1,"sync-btn svelte-b2zgdd",null,ye,{syncing:e(C)==="syncing"}),B.disabled=e(C)==="syncing"}),o(I,B)};k(L,I=>{e(K)&&I(G)})}var R=a(L,2);{var se=I=>{var B=Ra();let ye;var Ae=l(B,!0);s(B),w(()=>{ye=Ye(B,1,"sync-message svelte-b2zgdd",null,ye,{error:e(C)==="error",success:e(C)==="success"}),z(Ae,e(U))}),o(I,B)};k(R,I=>{e(U)&&I(se)})}s(E),w(()=>{W=Ye(E,1,"sync-banner svelte-b2zgdd",null,W,{offline:!e(K)}),z($,e(K)?"üîÑ":"üì¥")}),o(h,E)};k(D,h=>{e(fe)>0&&h(N)})}var F=a(D,2),V=l(F),x=a(l(V),2),O=l(x);O.value=O.__value="";var A=a(O);oe(A,17,()=>Fe,h=>h.value,(h,E)=>{var W=Pa(),te=l(W);s(W);var j={};w(()=>{z(te,`${e(E).icon??""} ${e(E).label??""}`),j!==(j=e(E).value)&&(W.value=(W.__value=e(E).value)??"")}),o(h,W)}),s(x),s(V);var Ce=a(V,2);{var qe=h=>{var E=$a(),W=l(E);{var te=$=>{Qs($,{})},j=$=>{var me=ct(),S=tt(me);{var f=L=>{ua(L,{})},m=L=>{var G=ct(),R=tt(G);{var se=B=>{fa(B)},I=B=>{var ye=ct(),Ae=tt(ye);{var Le=H=>{ka(H,{})},Ge=H=>{var M=ct(),ae=tt(M);{var Be=Z=>{Ba(Z,{})};k(ae,Z=>{e(pe)==="competition"&&Z(Be)},!0)}o(H,M)};k(Ae,H=>{e(pe)==="fingerboarding"?H(Le):H(Ge,!1)},!0)}o(B,ye)};k(R,B=>{e(pe)==="gym_session"?B(se):B(I,!1)},!0)}o(L,G)};k(S,L=>{e(pe)==="outdoor_climb"?L(f):L(m,!1)},!0)}o($,me)};k(W,$=>{e(pe)==="indoor_climb"?$(te):$(j,!1)})}s(E),o(h,E)};k(Ce,h=>{e(pe)&&h(qe)})}s(F),s(Y),Ue(x,()=>e(pe),h=>t(pe,h)),o(Pe,Y),$t()}It(["click"]);export{el as component};
