import{f as n,a as r,c as Le,t as wa}from"../chunks/bxSSDmCG.js";import{H as at,$ as tt,aZ as st,aw as it,q as rt,e as nt,a_ as vt,aN as Ja,a$ as lt,ai as ot,b0 as ja,p as ca,c as a,s as i,i as t,aV as H,r as e,t as y,a as _a,F as l,f as qe,aW as ba,E as ga,o as Ka,aG as Ga,d as dt}from"../chunks/BvwCwrbP.js";import{a as ct,d as na,s as d}from"../chunks/D97XAFTq.js";import{i as _}from"../chunks/DJDEC4-q.js";import{s as Re,r as ta,e as ye,i as Se,b as sa}from"../chunks/C6b-0WKN.js";import{c as La,j as Ma,k as Ya,l as Ra,n as Pa,o as Wa,p as Ua}from"../chunks/CIEREIgH.js";import{s as He}from"../chunks/r3Oz2b9H.js";import{s as Ie}from"../chunks/CT9WbTd_.js";import{p as Na}from"../chunks/BzRc-_KC.js";import{s as Ba,h as _t,g as ut,b as ft,j as gt,k as pt,l as mt}from"../chunks/DD0kMcH3.js";import"../chunks/C34k2uMk.js";const ht=()=>performance.now(),ha={tick:S=>requestAnimationFrame(S),now:()=>ht(),tasks:new Set};function Qa(){const S=ha.now();ha.tasks.forEach(s=>{s.c(S)||(ha.tasks.delete(s),s.f())}),ha.tasks.size!==0&&ha.tick(Qa)}function bt(S){let s;return ha.tasks.size===0&&ha.tick(Qa),{promise:new Promise(p=>{ha.tasks.add(s={c:S,f:p})}),abort(){ha.tasks.delete(s)}}}function Ia(S,s){Ja(()=>{S.dispatchEvent(new CustomEvent(s))})}function yt(S){if(S==="float")return"cssFloat";if(S==="offset")return"cssOffset";if(S.startsWith("--"))return S;const s=S.split("-");return s.length===1?s[0]:s[0]+s.slice(1).map(p=>p[0].toUpperCase()+p.slice(1)).join("")}function Za(S){const s={},p=S.split(";");for(const u of p){const[h,m]=u.split(":");if(!h||m===void 0)break;const g=yt(h.trim());s[g]=m.trim()}return s}const xt=S=>S;function ia(S,s,p,u){var h=(S&vt)!==0,m="both",g,f=s.inert,x=s.style.overflow,D,C;function z(){return Ja(()=>g??=p()(s,u?.()??{},{direction:m}))}var I={is_global:h,in(){s.inert=f,Ia(s,"introstart"),D=Ha(s,z(),C,1,()=>{Ia(s,"introend"),D?.abort(),D=g=void 0,s.style.overflow=x})},out(O){s.inert=!0,Ia(s,"outrostart"),C=Ha(s,z(),D,0,()=>{Ia(s,"outroend"),O?.()})},stop:()=>{D?.abort(),C?.abort()}},T=at;if((T.nodes.t??=[]).push(I),ct){var M=h;if(!M){for(var F=T.parent;F&&(F.f&tt)!==0;)for(;(F=F.parent)&&(F.f&st)===0;);M=!F||(F.f&it)!==0}M&&rt(()=>{nt(()=>I.in())})}}function Ha(S,s,p,u,h){var m=u===1;if(lt(s)){var g,f=!1;return ot(()=>{if(!f){var O=s({direction:m?"in":"out"});g=Ha(S,O,p,u,h)}}),{abort:()=>{f=!0,g?.abort()},deactivate:()=>g.deactivate(),reset:()=>g.reset(),t:()=>g.t()}}if(p?.deactivate(),!s?.duration)return h(),{abort:ja,deactivate:ja,reset:ja,t:()=>u};const{delay:x=0,css:D,tick:C,easing:z=xt}=s;var I=[];if(m&&p===void 0&&(C&&C(0,1),D)){var T=Za(D(0,1));I.push(T,T)}var M=()=>1-u,F=S.animate(I,{duration:x,fill:"forwards"});return F.onfinish=()=>{F.cancel();var O=p?.t()??1-u;p?.abort();var B=u-O,Z=s.duration*Math.abs(B),de=[];if(Z>0){var ne=!1;if(D)for(var Y=Math.ceil(Z/16.666666666666668),ce=0;ce<=Y;ce+=1){var _e=O+B*z(ce/Y),le=Za(D(_e,1-_e));de.push(le),ne||=le.overflow==="hidden"}ne&&(S.style.overflow="hidden"),M=()=>{var w=F.currentTime;return O+B*z(w/Z)},C&&bt(()=>{if(F.playState!=="running")return!1;var w=M();return C(w,1-w),!0})}F=S.animate(de,{duration:Z,fill:"forwards"}),F.onfinish=()=>{M=()=>u,C?.(u,1-u),h()}},{abort:()=>{F&&(F.cancel(),F.effect=null,F.onfinish=ja)},deactivate:()=>{h=ja},reset:()=>{u===0&&C?.(1,0)},t:()=>M()}}const wt=S=>S;function Xa(S){const s=S-1;return s*s*s+1}function qt(S,{delay:s=0,duration:p=400,easing:u=wt}={}){const h=+getComputedStyle(S).opacity;return{delay:s,duration:p,easing:u,css:m=>`opacity: ${m*h}`}}function ua(S,{delay:s=0,duration:p=400,easing:u=Xa,axis:h="y"}={}){const m=getComputedStyle(S),g=+m.opacity,f=h==="y"?"height":"width",x=parseFloat(m[f]),D=h==="y"?["top","bottom"]:["left","right"],C=D.map(B=>`${B[0].toUpperCase()}${B.slice(1)}`),z=parseFloat(m[`padding${C[0]}`]),I=parseFloat(m[`padding${C[1]}`]),T=parseFloat(m[`margin${C[0]}`]),M=parseFloat(m[`margin${C[1]}`]),F=parseFloat(m[`border${C[0]}Width`]),O=parseFloat(m[`border${C[1]}Width`]);return{delay:s,duration:p,easing:u,css:B=>`overflow: hidden;opacity: ${Math.min(B*20,1)*g};${f}: ${B*x}px;padding-${D[0]}: ${B*z}px;padding-${D[1]}: ${B*I}px;margin-${D[0]}: ${B*T}px;margin-${D[1]}: ${B*M}px;border-${D[0]}-width: ${B*F}px;border-${D[1]}-width: ${B*O}px;min-${f}: 0`}}function Dt(S,{delay:s=0,duration:p=400,easing:u=Xa,start:h=0,opacity:m=0}={}){const g=getComputedStyle(S),f=+g.opacity,x=g.transform==="none"?"":g.transform,D=1-h,C=f*(1-m);return{delay:s,duration:p,easing:u,css:(z,I)=>`
			transform: ${x} scale(${1-D*I});
			opacity: ${f-C*I}
		`}}var St=n('<span class="chevron svelte-12crvy">‚ñ≤</span>'),kt=n('<span class="chevron svelte-12crvy">‚ñº</span>'),Tt=n('<div class="input-with-action svelte-12crvy"><input type="text" id="location-manual" placeholder="Custom location..." class="flat-left svelte-12crvy"/> <button type="button" class="action-btn flat-right svelte-12crvy" title="Back to list">‚úï</button></div>'),Ct=n("<option> </option>"),Ft=n('<select id="location-filter" class="svelte-12crvy"><option>Any Location</option><!></select>'),zt=n("<option> </option>"),Lt=n('<div class="filter-body svelte-12crvy"><div class="filter-grid svelte-12crvy"><div class="filter-item svelte-12crvy"><label for="start-date" class="svelte-12crvy">Start Date</label> <input type="date" id="start-date" class="svelte-12crvy"/></div> <div class="filter-item svelte-12crvy"><label for="end-date" class="svelte-12crvy">End Date</label> <input type="date" id="end-date" class="svelte-12crvy"/></div> <div class="filter-item svelte-12crvy"><label for="location-filter" class="svelte-12crvy">Location</label> <!></div> <div class="filter-item svelte-12crvy"><label for="session-type-filter" class="svelte-12crvy">Session Type</label> <select id="session-type-filter" class="svelte-12crvy"><option>Any Type</option><!></select></div> <div class="filter-item svelte-12crvy"><label for="grade-filter" class="svelte-12crvy">Grade (Exact)</label> <input type="text" id="grade-filter" placeholder="e.g. V4" class="svelte-12crvy"/></div></div> <div class="filter-actions svelte-12crvy"><button class="reset-btn svelte-12crvy">Reset Filters</button></div></div>'),Gt=n('<div class="filter-container svelte-12crvy"><button class="filter-header svelte-12crvy"><div class="header-content svelte-12crvy"><span class="icon svelte-12crvy">üîç</span> <span class="title svelte-12crvy">Filters</span> <!></div></button> <!></div>');function Et(S,s){ca(s,!0);const p=["Rockstar Swindon","Flashpoint Swindon","Flashpoint Bristol","Redpoint Bristol","TCH Bristol","Other"],u=["Projecting","Onsighting","Campusing","Repeaters"];let h=H(!1),m=H(""),g=H(""),f=H(""),x=H(""),D=H(""),C=H(!1);function z(){l(h,!t(h))}function I(){l(m,""),l(g,""),l(f,""),l(C,!1),l(x,""),l(D,""),T()}function T(){s.onFilterParamsChange({startDate:t(m),endDate:t(g),location:t(f),sessionType:t(x),grade:t(D)})}function M(){t(f)==="Other"?(l(C,!0),l(f,"")):T()}function F(){l(C,!1),l(f,""),T()}var O=Gt(),B=a(O);B.__click=z;var Z=a(B),de=i(a(Z),4);{var ne=le=>{var w=St();r(le,w)},Y=le=>{var w=kt();r(le,w)};_(de,le=>{t(h)?le(ne):le(Y,!1)})}e(Z),e(B);var ce=i(B,2);{var _e=le=>{var w=Lt(),A=a(w),W=a(A),ee=i(a(W),2);ta(ee),ee.__change=T,e(W);var ve=i(W,2),fe=i(a(ve),2);ta(fe),fe.__change=T,e(ve);var te=i(ve,2),k=i(a(te),2);{var P=Q=>{var X=Tt(),U=a(X);ta(U),U.__input=T;var we=i(U,2);we.__click=F,e(X),sa(U,()=>t(f),xe=>l(f,xe)),r(Q,X)},b=Q=>{var X=Ft();X.__change=M;var U=a(X);U.value=U.__value="";var we=i(U);ye(we,17,()=>p,Se,(xe,Ce)=>{var ae=Ct(),j=a(ae,!0);e(ae);var ie={};y(()=>{d(j,t(Ce)),ie!==(ie=t(Ce))&&(ae.value=(ae.__value=t(Ce))??"")}),r(xe,ae)}),e(X),La(X,()=>t(f),xe=>l(f,xe)),r(Q,X)};_(k,Q=>{t(C)?Q(P):Q(b,!1)})}e(te);var v=i(te,2),o=i(a(v),2);o.__change=T;var R=a(o);R.value=R.__value="";var K=i(R);ye(K,17,()=>u,Se,(Q,X)=>{var U=zt(),we=a(U,!0);e(U);var xe={};y(()=>{d(we,t(X)),xe!==(xe=t(X))&&(U.value=(U.__value=t(X))??"")}),r(Q,U)}),e(o),e(v);var se=i(v,2),ue=i(a(se),2);ta(ue),ue.__input=T,e(se),e(A);var Te=i(A,2),ge=a(Te);ge.__click=I,e(Te),e(w),sa(ee,()=>t(m),Q=>l(m,Q)),sa(fe,()=>t(g),Q=>l(g,Q)),La(o,()=>t(x),Q=>l(x,Q)),sa(ue,()=>t(D),Q=>l(D,Q)),ia(3,w,()=>ua,()=>({duration:200})),r(le,w)};_(ce,le=>{t(h)&&le(_e)})}e(O),y(()=>Re(B,"aria-expanded",t(h))),r(S,O),_a()}na(["click","change","input"]);var Ot=n('<span class="climb-type-tag svelte-yz0xxt"> </span>'),At=n('<span class="notes-preview svelte-yz0xxt"> </span>'),jt=n('<span class="attempts-count svelte-yz0xxt"> </span>'),Nt=n('<div class="detail-row svelte-yz0xxt"><span class="label svelte-yz0xxt">Notes:</span> <p class="notes svelte-yz0xxt"> </p></div>'),It=n('<p class="empty-notes svelte-yz0xxt">No notes for this climb.</p>'),Rt=n('<div class="climb-details svelte-yz0xxt"><!> <div class="tags svelte-yz0xxt"><span class="tag type svelte-yz0xxt"> </span> <span class="tag attempt-text svelte-yz0xxt"> </span></div></div>'),Mt=n('<div><div class="climb-header svelte-yz0xxt" role="button" tabindex="0"><div class="climb-main-info svelte-yz0xxt"><span> </span> <span class="climb-name svelte-yz0xxt"> </span> <!> <!></div> <div class="climb-meta svelte-yz0xxt"><span><span class="icon svelte-yz0xxt"> </span> <!></span> <button class="delete-btn svelte-yz0xxt" aria-label="Delete climb" title="Delete climb">üóëÔ∏è</button> <span class="chevron svelte-yz0xxt"> </span></div></div> <!></div>');function Pt(S,s){ca(s,!0);let p=Na(s,"showClimbType",3,!1),u=H(!1);function h(){l(u,!t(u))}function m(k){k.stopPropagation(),s.onDelete()}const g={Flash:"‚ö°",Onsight:"üëÅÔ∏è",Redpoint:"üî¥",Dogged:"üõ†Ô∏è",DNF:"‚ùå"};var f=Mt();let x;var D=a(f);D.__click=h,D.__keydown=k=>(k.key==="Enter"||k.key===" ")&&h();var C=a(D),z=a(C);let I;var T=a(z,!0);e(z);var M=i(z,2),F=a(M,!0);e(M);var O=i(M,2);{var B=k=>{var P=Ot(),b=a(P,!0);e(P),y(()=>d(b,s.climb.isSport?"Sport":"Boulder")),r(k,P)};_(O,k=>{p()&&k(B)})}var Z=i(O,2);{var de=k=>{var P=At(),b=a(P);e(P),y(()=>d(b,`- ${s.climb.notes??""}`)),r(k,P)};_(Z,k=>{!t(u)&&s.climb.notes&&k(de)})}e(C);var ne=i(C,2),Y=a(ne);let ce;var _e=a(Y),le=a(_e,!0);e(_e);var w=i(_e,2);{var A=k=>{var P=jt(),b=a(P,!0);e(P),y(()=>d(b,s.climb.attemptsNum)),r(k,P)};_(w,k=>{s.climb.attemptType!=="Flash"&&s.climb.attemptType!=="Onsight"&&k(A)})}e(Y);var W=i(Y,2);W.__click=m;var ee=i(W,2),ve=a(ee,!0);e(ee),e(ne),e(D);var fe=i(D,2);{var te=k=>{var P=Rt(),b=a(P);{var v=ge=>{var Q=Nt(),X=i(a(Q),2),U=a(X,!0);e(X),e(Q),y(()=>d(U,s.climb.notes)),r(ge,Q)},o=ge=>{var Q=It();r(ge,Q)};_(b,ge=>{s.climb.notes?ge(v):ge(o,!1)})}var R=i(b,2),K=a(R),se=a(K,!0);e(K);var ue=i(K,2),Te=a(ue,!0);e(ue),e(R),e(P),y(()=>{d(se,s.climb.isSport?"Sport":"Boulder"),d(Te,s.climb.attemptType)}),ia(3,P,()=>ua,()=>({duration:150})),r(k,P)};_(fe,k=>{t(u)&&k(te)})}e(f),y(()=>{x=He(f,1,"climb-entry svelte-yz0xxt",null,x,{expanded:t(u)}),Re(D,"aria-expanded",t(u)),I=He(z,1,"grade-badge svelte-yz0xxt",null,I,{sport:s.climb.isSport}),d(T,s.climb.grade),d(F,s.climb.name||"Unnamed Route"),ce=He(Y,1,"attempt-type svelte-yz0xxt",null,ce,{flash:s.climb.attemptType==="Flash"}),d(le,g[s.climb.attemptType]||s.climb.attemptType),d(ve,t(u)?"‚ñ≤":"‚ñº")}),r(S,f),_a()}na(["click","keydown"]);var Bt=n('<button class="backdrop svelte-12q9g58" aria-label="Close modal"></button> <div class="modal svelte-12q9g58" role="dialog" aria-modal="true"><h3 class="svelte-12q9g58"> </h3> <p class="svelte-12q9g58"> </p> <div class="input-group svelte-12q9g58"><label for="delete-confirm" class="svelte-12q9g58">Type <strong>delete</strong> to confirm:</label> <input type="text" id="delete-confirm" placeholder="delete" autocomplete="off" class="svelte-12q9g58"/></div> <div class="actions svelte-12q9g58"><button class="btn-cancel svelte-12q9g58">Cancel</button> <button class="btn-delete svelte-12q9g58">Delete</button></div></div>',1);function Va(S,s){ca(s,!0);let p=Na(s,"isOpen",3,!1),u=Na(s,"title",3,"Confirm Delete"),h=Na(s,"message",3,"Are you sure you want to delete this item? This action cannot be undone."),m=H(""),g=ba(()=>t(m).toLowerCase()==="delete");function f(){t(g)&&(s.onConfirm(),l(m,""))}function x(){s.onCancel(),l(m,"")}var D=Le(),C=qe(D);{var z=I=>{var T=Bt(),M=qe(T);M.__click=x;var F=i(M,2),O=a(F),B=a(O,!0);e(O);var Z=i(O,2),de=a(Z,!0);e(Z);var ne=i(Z,2),Y=i(a(ne),2);ta(Y),e(ne);var ce=i(ne,2),_e=a(ce);_e.__click=x;var le=i(_e,2);le.__click=f,e(ce),e(F),y(()=>{d(B,u()),d(de,h()),le.disabled=!t(g)}),ia(3,M,()=>qt,()=>({duration:200})),sa(Y,()=>t(m),w=>l(m,w)),ia(3,F,()=>Dt,()=>({duration:200,start:.9})),r(I,T)};_(C,I=>{p()&&I(z)})}r(S,D),_a()}na(["click"]);var Vt=n('<span class="stat svelte-7vqogn"> </span>'),Wt=n('<span class="status-icon pending svelte-7vqogn" title="Waiting to sync">üîÑ</span>'),Ut=n('<span class="status-icon error svelte-7vqogn" title="Sync error">‚ö†Ô∏è</span>'),Ht=n('<span class="chip svelte-7vqogn"> </span>'),Zt=n('<span class="text-none svelte-7vqogn">None</span>'),Jt=n('<div class="detail-item svelte-7vqogn"><span class="label svelte-7vqogn">Difficulty</span> <span class="value svelte-7vqogn"> </span></div>'),Kt=n('<span class="chip svelte-7vqogn"> </span>'),Yt=n('<span class="text-none svelte-7vqogn">None</span>'),Qt=n('<div class="detail-item svelte-7vqogn"><span class="label svelte-7vqogn">Category</span> <div class="value-chips svelte-7vqogn"><!></div></div>'),Xt=n('<span class="chip svelte-7vqogn"> </span>'),$t=n('<span class="text-none svelte-7vqogn">None</span>'),es=n('<div class="detail-item svelte-7vqogn"><span class="label svelte-7vqogn">Focus</span> <div class="value-chips svelte-7vqogn"><!></div></div>'),as=n('<span class="chip svelte-7vqogn"> </span>'),ts=n('<span class="text-none svelte-7vqogn">None</span>'),ss=n('<div class="detail-item svelte-7vqogn"><span class="label svelte-7vqogn">Energy System</span> <div class="value-chips svelte-7vqogn"><!></div></div>'),is=n('<span class="chip svelte-7vqogn"> </span>'),rs=n('<span class="text-none svelte-7vqogn">None</span>'),ns=n('<div class="detail-item svelte-7vqogn"><span class="label svelte-7vqogn">Wall Angle</span> <div class="value-chips svelte-7vqogn"><!></div></div>'),vs=n('<div class="metric svelte-7vqogn"><span class="label svelte-7vqogn">Open Grip</span> <div class="bar-container svelte-7vqogn"><div class="bar-fill svelte-7vqogn"></div></div> <span class="score svelte-7vqogn"> </span></div>'),ls=n('<div class="metric svelte-7vqogn"><span class="label svelte-7vqogn">Crimp Grip</span> <div class="bar-container svelte-7vqogn"><div class="bar-fill svelte-7vqogn"></div></div> <span class="score svelte-7vqogn"> </span></div>'),os=n('<div class="metric svelte-7vqogn"><span class="label svelte-7vqogn">Pinch Grip</span> <div class="bar-container svelte-7vqogn"><div class="bar-fill svelte-7vqogn"></div></div> <span class="score svelte-7vqogn"> </span></div>'),ds=n('<div class="metric svelte-7vqogn"><span class="label svelte-7vqogn">Sloper Grip</span> <div class="bar-container svelte-7vqogn"><div class="bar-fill svelte-7vqogn"></div></div> <span class="score svelte-7vqogn"> </span></div>'),cs=n('<div class="metric svelte-7vqogn"><span class="label svelte-7vqogn">Jug Grip</span> <div class="bar-container svelte-7vqogn"><div class="bar-fill svelte-7vqogn"></div></div> <span class="score svelte-7vqogn"> </span></div>'),_s=n('<p class="no-climbs svelte-7vqogn">No climbs logged for this session.</p>'),us=n('<div class="card-body svelte-7vqogn"><div class="details-grid svelte-7vqogn"><div class="detail-item svelte-7vqogn"><span class="label svelte-7vqogn">Training Type</span> <div class="value-chips svelte-7vqogn"><!></div></div> <!> <!> <!> <!> <!></div> <div class="metrics-container svelte-7vqogn"><div class="metric svelte-7vqogn"><span class="label svelte-7vqogn">Finger Load</span> <div class="bar-container svelte-7vqogn"><div class="bar-fill svelte-7vqogn"></div></div> <span class="score svelte-7vqogn"> </span></div> <div class="metric svelte-7vqogn"><span class="label svelte-7vqogn">Shoulder Load</span> <div class="bar-container svelte-7vqogn"><div class="bar-fill svelte-7vqogn"></div></div> <span class="score svelte-7vqogn"> </span></div> <div class="metric svelte-7vqogn"><span class="label svelte-7vqogn">Forearm Load</span> <div class="bar-container svelte-7vqogn"><div class="bar-fill svelte-7vqogn"></div></div> <span class="score svelte-7vqogn"> </span></div> <!> <!> <!> <!> <!></div> <div class="climbs-list svelte-7vqogn"><h4 class="svelte-7vqogn">Climbs</h4> <div class="climbs-container svelte-7vqogn"><!> <!></div></div></div>'),fs=n('<div><div class="card-header svelte-7vqogn" role="button" tabindex="0"><div class="header-main svelte-7vqogn"><div class="date-badge svelte-7vqogn"><span class="day svelte-7vqogn"> </span> <span class="month svelte-7vqogn"> </span></div> <div class="session-info svelte-7vqogn"><div class="session-text svelte-7vqogn"><h3 class="location svelte-7vqogn"> </h3> <div class="session-meta svelte-7vqogn"><span class="type-tag svelte-7vqogn"> </span> <span class="stat svelte-7vqogn"> </span> <!></div></div> <div class="load-summary svelte-7vqogn"><div class="load-badge finger svelte-7vqogn"> </div> <div class="load-badge shoulder svelte-7vqogn"> </div> <div class="load-badge forearm svelte-7vqogn"> </div></div></div></div> <div class="header-actions"><div class="header-status svelte-7vqogn"><!></div>  <button class="btn-icon delete-session" title="Delete Session">üóëÔ∏è</button> <span class="chevron svelte-7vqogn"> </span></div></div> <!></div> <!>',1);function gs(S,s){ca(s,!0);let p=H(!1),u=H(!1);function h(){l(p,!t(p))}function m(){l(u,!0)}function g(){Ma(s.session.id),l(u,!1),s.onDelete()}function f(ae){const j=[...s.session.climbs];j.splice(ae,1),Ya(s.session.id,{climbs:j}),s.onDelete()}let x=ba(()=>s.session.climbs?.length??0),D=ba(()=>(s.session.climbs||[]).reduce((ae,j)=>{const ie=parseInt(j.grade.replace(/\D/g,""))||0,oe=parseInt(ae.replace(/\D/g,""))||0;return ie>oe?j.grade:ae},"V0"));var C=fs(),z=qe(C);let I;var T=a(z);T.__click=h,T.__keydown=ae=>ae.key==="Enter"&&h();var M=a(T),F=a(M),O=a(F),B=a(O,!0);e(O);var Z=i(O,2),de=a(Z,!0);e(Z),e(F);var ne=i(F,2),Y=a(ne),ce=a(Y),_e=a(ce,!0);e(ce);var le=i(ce,2),w=a(le),A=a(w,!0);e(w);var W=i(w,2),ee=a(W);e(W);var ve=i(W,2);{var fe=ae=>{var j=Vt(),ie=a(j);e(j),y(()=>d(ie,`Max: ${t(D)??""}`)),r(ae,j)};_(ve,ae=>{t(x)>0&&ae(fe)})}e(le),e(Y);var te=i(Y,2),k=a(te),P=a(k,!0);e(k);var b=i(k,2),v=a(b,!0);e(b);var o=i(b,2),R=a(o,!0);e(o),e(te),e(ne),e(M);var K=i(M,2),se=a(K),ue=a(se);{var Te=ae=>{var j=Wt();r(ae,j)},ge=ae=>{var j=Le(),ie=qe(j);{var oe=G=>{var J=Ut();r(G,J)};_(ie,G=>{s.session.syncStatus==="error"&&G(oe)},!0)}r(ae,j)};_(ue,ae=>{s.session.syncStatus==="pending"?ae(Te):ae(ge,!1)})}e(se);var Q=i(se,2);Q.__click=ae=>{ae.stopPropagation(),m()};var X=i(Q,2),U=a(X,!0);e(X),e(K),e(T);var we=i(T,2);{var xe=ae=>{var j=us(),ie=a(j),oe=a(ie),G=i(a(oe),2),J=a(G);{var he=N=>{var E=Le(),c=qe(E);ye(c,17,()=>s.session.trainingTypes,Se,(q,L)=>{var $=Ht(),V=a($,!0);e($),y(()=>d(V,t(L))),r(q,$)}),r(N,E)},pe=N=>{var E=Zt();r(N,E)};_(J,N=>{s.session.trainingTypes&&s.session.trainingTypes.length>0&&!s.session.trainingTypes.includes("None")?N(he):N(pe,!1)})}e(G),e(oe);var be=i(oe,2);{var Me=N=>{var E=Jt(),c=i(a(E),2),q=a(c,!0);e(c),e(E),y(()=>d(q,s.session.difficulty)),r(N,E)};_(be,N=>{s.session.difficulty&&N(Me)})}var Pe=i(be,2);{var ze=N=>{var E=Qt(),c=i(a(E),2),q=a(c);{var L=V=>{var re=Le(),me=qe(re);ye(me,17,()=>s.session.categories,Se,(ke,ea)=>{var Fe=Kt(),aa=a(Fe,!0);e(Fe),y(()=>d(aa,t(ea))),r(ke,Fe)}),r(V,re)},$=V=>{var re=Yt();r(V,re)};_(q,V=>{s.session.categories.length>0&&!s.session.categories.includes("None")?V(L):V($,!1)})}e(c),e(E),r(N,E)};_(Pe,N=>{s.session.categories?.length&&N(ze)})}var Ge=i(Pe,2);{var je=N=>{var E=es(),c=i(a(E),2),q=a(c);{var L=V=>{var re=Le(),me=qe(re);ye(me,17,()=>s.session.techniqueFocuses,Se,(ke,ea)=>{var Fe=Xt(),aa=a(Fe,!0);e(Fe),y(()=>d(aa,t(ea))),r(ke,Fe)}),r(V,re)},$=V=>{var re=$t();r(V,re)};_(q,V=>{s.session.techniqueFocuses.length>0&&!s.session.techniqueFocuses.includes("None")?V(L):V($,!1)})}e(c),e(E),r(N,E)};_(Ge,N=>{s.session.techniqueFocuses?.length&&N(je)})}var Ze=i(Ge,2);{var De=N=>{var E=ss(),c=i(a(E),2),q=a(c);{var L=V=>{var re=Le(),me=qe(re);ye(me,17,()=>s.session.energySystems,Se,(ke,ea)=>{var Fe=as(),aa=a(Fe,!0);e(Fe),y(()=>d(aa,t(ea))),r(ke,Fe)}),r(V,re)},$=V=>{var re=ts();r(V,re)};_(q,V=>{s.session.energySystems.length>0&&!s.session.energySystems.includes("None")?V(L):V($,!1)})}e(c),e(E),r(N,E)};_(Ze,N=>{s.session.energySystems?.length&&N(De)})}var Ne=i(Ze,2);{var va=N=>{var E=ns(),c=i(a(E),2),q=a(c);{var L=V=>{var re=Le(),me=qe(re);ye(me,17,()=>s.session.wallAngles,Se,(ke,ea)=>{var Fe=is(),aa=a(Fe,!0);e(Fe),y(()=>d(aa,t(ea))),r(ke,Fe)}),r(V,re)},$=V=>{var re=rs();r(V,re)};_(q,V=>{s.session.wallAngles.length>0&&!s.session.wallAngles.includes("None")?V(L):V($,!1)})}e(c),e(E),r(N,E)};_(Ne,N=>{s.session.wallAngles?.length&&N(va)})}e(ie);var Je=i(ie,2),We=a(Je),Ke=i(a(We),2),Oe=a(Ke);e(Ke);var Ee=i(Ke,2),fa=a(Ee);e(Ee),e(We);var Ae=i(We,2),la=i(a(Ae),2),Ye=a(la);e(la);var ra=i(la,2),qa=a(ra);e(ra),e(Ae);var Ue=i(Ae,2),Be=i(a(Ue),2),Qe=a(Be);e(Be);var oa=i(Be,2),Xe=a(oa);e(oa),e(Ue);var $e=i(Ue,2);{var Da=N=>{var E=vs(),c=i(a(E),2),q=a(c);e(c);var L=i(c,2),$=a(L);e(L),e(E),y(()=>{Ie(q,`width: ${s.session.openGrip/5*100}%`),d($,`${s.session.openGrip??""}/5`)}),r(N,E)};_($e,N=>{s.session.openGrip&&N(Da)})}var Ve=i($e,2);{var Ta=N=>{var E=ls(),c=i(a(E),2),q=a(c);e(c);var L=i(c,2),$=a(L);e(L),e(E),y(()=>{Ie(q,`width: ${s.session.crimpGrip/5*100}%`),d($,`${s.session.crimpGrip??""}/5`)}),r(N,E)};_(Ve,N=>{s.session.crimpGrip&&N(Ta)})}var pa=i(Ve,2);{var Sa=N=>{var E=os(),c=i(a(E),2),q=a(c);e(c);var L=i(c,2),$=a(L);e(L),e(E),y(()=>{Ie(q,`width: ${s.session.pinchGrip/5*100}%`),d($,`${s.session.pinchGrip??""}/5`)}),r(N,E)};_(pa,N=>{s.session.pinchGrip&&N(Sa)})}var ma=i(pa,2);{var Ea=N=>{var E=ds(),c=i(a(E),2),q=a(c);e(c);var L=i(c,2),$=a(L);e(L),e(E),y(()=>{Ie(q,`width: ${s.session.sloperGrip/5*100}%`),d($,`${s.session.sloperGrip??""}/5`)}),r(N,E)};_(ma,N=>{s.session.sloperGrip&&N(Ea)})}var Ca=i(ma,2);{var Oa=N=>{var E=cs(),c=i(a(E),2),q=a(c);e(c);var L=i(c,2),$=a(L);e(L),e(E),y(()=>{Ie(q,`width: ${s.session.jugGrip/5*100}%`),d($,`${s.session.jugGrip??""}/5`)}),r(N,E)};_(Ca,N=>{s.session.jugGrip&&N(Oa)})}e(Je);var ka=i(Je,2),ya=i(a(ka),2),xa=a(ya);ye(xa,17,()=>s.session.climbs||[],Se,(N,E,c)=>{{let q=ba(()=>s.session.climbingType==="Mixed");Pt(N,{get climb(){return t(E)},onDelete:()=>f(c),get showClimbType(){return t(q)}})}});var Fa=i(xa,2);{var za=N=>{var E=_s();r(N,E)};_(Fa,N=>{(s.session.climbs||[]).length===0&&N(za)})}e(ya),e(ka),e(j),y(()=>{Ie(Oe,`width: ${s.session.fingerLoad/5*100}%`),d(fa,`${s.session.fingerLoad??""}/5`),Ie(Ye,`width: ${s.session.shoulderLoad/5*100}%`),d(qa,`${s.session.shoulderLoad??""}/5`),Ie(Qe,`width: ${s.session.forearmLoad/5*100}%`),d(Xe,`${s.session.forearmLoad??""}/5`)}),ia(3,j,()=>ua,()=>({duration:150})),r(ae,j)};_(we,ae=>{t(p)&&ae(xe)})}e(z);var Ce=i(z,2);Va(Ce,{get isOpen(){return t(u)},title:"Delete Session",message:"Are you sure you want to delete this session and all its climbs? This cannot be undone.",onConfirm:g,onCancel:()=>l(u,!1)}),y((ae,j)=>{I=He(z,1,"session-card svelte-7vqogn",null,I,{expanded:t(p)}),Re(T,"aria-expanded",t(p)),d(B,ae),d(de,j),d(_e,s.session.location),d(A,s.session.climbingType),d(ee,`${t(x)??""} climbs`),Re(k,"title",`Finger Load: ${s.session.fingerLoad??""}`),d(P,s.session.fingerLoad),Re(b,"title",`Shoulder Load: ${s.session.shoulderLoad??""}`),d(v,s.session.shoulderLoad),Re(o,"title",`Forearm Load: ${s.session.forearmLoad??""}`),d(R,s.session.forearmLoad),d(U,t(p)?"‚ñ≤":"‚ñº")},[()=>new Date(s.session.date).getDate(),()=>new Date(s.session.date).toLocaleDateString("en-GB",{month:"short"})]),r(S,C),_a()}na(["click","keydown"]);var ps=n('<div class="legend-item svelte-11p9lqi"><span class="l-icon svelte-11p9lqi"> </span> <span class="l-label svelte-11p9lqi"> </span></div>'),ms=n('<div class="legend-content svelte-11p9lqi"><div class="legend-grid svelte-11p9lqi"></div></div>'),hs=n('<div class="legend-container svelte-11p9lqi"><button class="legend-toggle svelte-11p9lqi"><span class="icon">‚ÑπÔ∏è</span> <span class="text">Icon Legend</span> <span class="chevron svelte-11p9lqi"> </span></button> <!></div>');function $a(S){let s=H(!1);const p=[{icon:"üëÅÔ∏è",label:"Onsight"},{icon:"‚ö°",label:"Flash"},{icon:"üî¥",label:"Redpoint"},{icon:"üõ†Ô∏è",label:"Dogged"},{icon:"‚ùå",label:"DNF"}];var u=hs(),h=a(u);h.__click=()=>l(s,!t(s));var m=i(a(h),4),g=a(m,!0);e(m),e(h);var f=i(h,2);{var x=D=>{var C=ms(),z=a(C);ye(z,21,()=>p,Se,(I,T)=>{var M=ps(),F=a(M),O=a(F,!0);e(F);var B=i(F,2),Z=a(B,!0);e(B),e(M),y(()=>{d(O,t(T).icon),d(Z,t(T).label)}),r(I,M)}),e(z),e(C),ia(3,C,()=>ua),r(D,C)};_(f,D=>{t(s)&&D(x)})}e(u),y(()=>{Re(h,"aria-expanded",t(s)),d(g,t(s)?"‚ñº":"‚ñ∂")}),r(S,u)}na(["click"]);function et(S,s){if(!S||S.length===0){alert("No data to export");return}const p=Array.from(new Set(S.flatMap(Object.keys))),u=[p.join(","),...S.map(g=>p.map(f=>{let x=g[f];if(x==null)return"";if(typeof x=="object"){if(x instanceof Date)return x.toISOString();x=JSON.stringify(x).replace(/"/g,'""')}else typeof x=="string"&&(x=x.replace(/"/g,'""'));return typeof x=="string"&&(x.includes(",")||x.includes('"')||x.includes(`
`))?`"${x}"`:x}).join(","))].join(`
`),h=new Blob([u],{type:"text/csv;charset=utf-8;"}),m=document.createElement("a");if(m.download!==void 0){const g=URL.createObjectURL(h);m.setAttribute("href",g),m.setAttribute("download",s.endsWith(".csv")?s:`${s}.csv`),m.style.visibility="hidden",document.body.appendChild(m),m.click(),document.body.removeChild(m)}}var bs=n('<span class="spinner svelte-14fqz8w"></span> Fetching...',1),ys=n('<div class="error-banner svelte-14fqz8w"> </div>'),xs=n('<small class="svelte-14fqz8w">Try adjusting your filters.</small>'),ws=n('<div class="empty-state svelte-14fqz8w"><p class="svelte-14fqz8w">No indoor climbing sessions found.</p> <!></div>'),qs=n('<div class="load-more-container svelte-14fqz8w"><button class="load-more-btn svelte-14fqz8w"> </button></div>'),Ds=n('<div class="view-container svelte-14fqz8w"><div class="view-header svelte-14fqz8w"><h2 class="view-title svelte-14fqz8w">üßó Indoor Climbing History</h2> <div class="header-actions svelte-14fqz8w"><button class="action-btn secondary svelte-14fqz8w" title="Export filtered data to CSV">üì• Export</button> <button class="action-btn svelte-14fqz8w" title="Fetch data from cloud"><!></button></div></div> <!> <!> <div class="info-bar svelte-14fqz8w"><div class="legend-wrapper svelte-14fqz8w"><!></div> <div class="load-key svelte-14fqz8w"><span class="key-label svelte-14fqz8w">Load:</span> <div class="key-item svelte-14fqz8w"><span class="dot finger svelte-14fqz8w"></span> Finger</div> <div class="key-item svelte-14fqz8w"><span class="dot shoulder svelte-14fqz8w"></span> Shoulder</div> <div class="key-item svelte-14fqz8w"><span class="dot forearm svelte-14fqz8w"></span> Forearm</div></div></div> <div class="sessions-list"><!> <!> <!></div></div>');function Ss(S,s){ca(s,!0);let p=H(ga([])),u=H(ga([])),h=H(!1),m=H(""),g=H(ga({startDate:"",endDate:"",location:"",sessionType:"",grade:""})),f=H(20);const x=20;Ka(()=>{D()});function D(){const v=Ra("indoor_climb");l(p,v.sort((o,R)=>new Date(R.date).getTime()-new Date(o.date).getTime()),!0),T()}async function C(){l(h,!0),l(m,"");try{await Ba();const v=await _t();v.ok&&v.data?z(v.data):l(m,v.error||"Failed to fetch data",!0)}catch(v){l(m,v instanceof Error?v.message:"Unknown error",!0)}finally{l(h,!1)}}function z(v){const o=v.map(K=>({...K,activityType:"indoor_climb",createdAt:new Date().toISOString(),updatedAt:new Date().toISOString(),syncStatus:"synced",syncedAt:new Date().toISOString(),openGrip:0,crimpGrip:0,pinchGrip:0,sloperGrip:0,jugGrip:0}));Pa(o);const R=Ra("indoor_climb");l(p,R.sort((K,se)=>new Date(se.date).getTime()-new Date(K.date).getTime()),!0),T()}function I(v){l(g,v,!0),T()}function T(){l(f,x),l(u,t(p).filter(v=>{if(t(g).startDate&&v.date<t(g).startDate||t(g).endDate&&v.date>t(g).endDate||t(g).location&&v.location!==t(g).location||t(g).sessionType&&!v.trainingTypes?.includes(t(g).sessionType))return!1;if(t(g).grade){const o=t(g).grade.trim().toLowerCase();if(!v.climbs.some(K=>K.grade.trim().toLowerCase()===o))return!1}return!0}),!0)}function M(){l(f,t(f)+x)}var F=Ds(),O=a(F),B=i(a(O),2),Z=a(B);Z.__click=()=>et(t(u),"indoor_climbs");var de=i(Z,2);de.__click=C;var ne=a(de);{var Y=v=>{var o=bs();Ga(),r(v,o)},ce=v=>{var o=wa("‚òÅÔ∏è Fetch Data");r(v,o)};_(ne,v=>{t(h)?v(Y):v(ce,!1)})}e(de),e(B),e(O);var _e=i(O,2);{var le=v=>{var o=ys(),R=a(o,!0);e(o),y(()=>d(R,t(m))),ia(3,o,()=>ua),r(v,o)};_(_e,v=>{t(m)&&v(le)})}var w=i(_e,2);Et(w,{onFilterParamsChange:I});var A=i(w,2),W=a(A),ee=a(W);$a(ee),e(W),Ga(2),e(A);var ve=i(A,2),fe=a(ve);ye(fe,17,()=>t(u).slice(0,t(f)),v=>v.id,(v,o)=>{gs(v,{get session(){return t(o)},onDelete:D})});var te=i(fe,2);{var k=v=>{var o=ws(),R=i(a(o),2);{var K=se=>{var ue=xs();r(se,ue)};_(R,se=>{t(p).length>0&&se(K)})}e(o),r(v,o)};_(te,v=>{t(u).length===0&&v(k)})}var P=i(te,2);{var b=v=>{var o=qs(),R=a(o);R.__click=M;var K=a(R);e(R),e(o),y(()=>d(K,`Load More (${t(u).length-t(f)} remaining)`)),r(v,o)};_(P,v=>{t(f)<t(u).length&&v(b)})}e(ve),e(F),y(()=>de.disabled=t(h)),r(S,F),_a()}na(["click"]);var ks=n('<span class="chevron svelte-1frtlim">‚ñ≤</span>'),Ts=n('<span class="chevron svelte-1frtlim">‚ñº</span>'),Cs=n('<div class="input-with-action svelte-1frtlim"><input type="text" id="area-filter-text" placeholder="Type area name..." class="flat-left svelte-1frtlim"/> <button class="action-btn flat-right svelte-1frtlim" title="Back to list">‚úï</button></div>'),Fs=n("<option> </option>"),zs=n('<select id="area-filter" class="svelte-1frtlim"><option>All Areas</option><!><option>Other (Manual Entry)</option></select>'),Ls=n('<div class="input-with-action svelte-1frtlim"><input type="text" id="crag-filter-text" placeholder="Type crag name..." class="flat-left svelte-1frtlim"/> <button class="action-btn flat-right svelte-1frtlim" title="Back to list">‚úï</button></div>'),Gs=n("<option> </option>"),Es=n('<select id="crag-filter" class="svelte-1frtlim"><option>All Crags</option><!><option>Other (Manual Entry)</option></select>'),Os=n('<input type="text" id="crag-filter-text" class="svelte-1frtlim"/>'),As=n("<option> </option>"),js=n('<div class="filter-body svelte-1frtlim"><div class="filter-grid svelte-1frtlim"><div class="filter-item svelte-1frtlim"><label for="start-date" class="svelte-1frtlim">Start Date</label> <input type="date" id="start-date" class="svelte-1frtlim"/></div> <div class="filter-item svelte-1frtlim"><label for="end-date" class="svelte-1frtlim">End Date</label> <input type="date" id="end-date" class="svelte-1frtlim"/></div> <div class="filter-item svelte-1frtlim"><label for="area-filter" class="svelte-1frtlim">Area</label> <!></div> <div class="filter-item svelte-1frtlim"><label for="crag-filter" class="svelte-1frtlim">Crag</label> <!></div> <div class="filter-item svelte-1frtlim"><label for="session-type-filter" class="svelte-1frtlim">Session Type</label> <select id="session-type-filter" class="svelte-1frtlim"><option>Any Type</option><!></select></div> <div class="filter-item svelte-1frtlim"><label for="grade-filter" class="svelte-1frtlim">Grade (Exact)</label> <input type="text" id="grade-filter" placeholder="e.g. 7a" class="svelte-1frtlim"/></div></div> <div class="filter-actions svelte-1frtlim"><button class="reset-btn svelte-1frtlim">Reset Filters</button></div></div>'),Ns=n('<div class="filter-container svelte-1frtlim"><button class="filter-header svelte-1frtlim"><div class="header-content svelte-1frtlim"><span class="icon svelte-1frtlim">üîç</span> <span class="title svelte-1frtlim">Filters</span> <!></div></button> <!></div>');function Is(S,s){ca(s,!0);const p=ut(),u=["Projecting","Onsighting","Campusing","Repeaters","Fun","Volume"];let h=H(!1),m=H(""),g=H(""),f=H(""),x=H(""),D=H(""),C=H(""),z=H(!1),I=H(!1),T=ba(()=>t(f)&&t(f)!=="Other"?ft(t(f)):[]);function M(){t(f)==="Other"?(l(z,!0),l(f,"")):l(z,!1),l(x,""),l(I,!1),Z()}function F(){t(x)==="Other"?(l(I,!0),l(x,"")):l(I,!1),Z()}function O(){l(h,!t(h))}function B(){l(m,""),l(g,""),l(f,""),l(x,""),l(D,""),l(C,""),l(z,!1),l(I,!1),Z()}function Z(){s.onFilterParamsChange({startDate:t(m),endDate:t(g),area:t(f),crag:t(x),sessionType:t(D),grade:t(C)})}var de=Ns(),ne=a(de);ne.__click=O;var Y=a(ne),ce=i(a(Y),4);{var _e=W=>{var ee=ks();r(W,ee)},le=W=>{var ee=Ts();r(W,ee)};_(ce,W=>{t(h)?W(_e):W(le,!1)})}e(Y),e(ne);var w=i(ne,2);{var A=W=>{var ee=js(),ve=a(ee),fe=a(ve),te=i(a(fe),2);ta(te),te.__change=Z,e(fe);var k=i(fe,2),P=i(a(k),2);ta(P),P.__change=Z,e(k);var b=i(k,2),v=i(a(b),2);{var o=j=>{var ie=Cs(),oe=a(ie);ta(oe),oe.__input=Z;var G=i(oe,2);G.__click=()=>{l(z,!1),l(f,""),Z()},e(ie),sa(oe,()=>t(f),J=>l(f,J)),r(j,ie)},R=j=>{var ie=zs();ie.__change=M;var oe=a(ie);oe.value=oe.__value="";var G=i(oe);ye(G,17,()=>p,Se,(he,pe)=>{var be=Fs(),Me=a(be,!0);e(be);var Pe={};y(()=>{d(Me,t(pe)),Pe!==(Pe=t(pe))&&(be.value=(be.__value=t(pe))??"")}),r(he,be)});var J=i(G);J.value=J.__value="Other",e(ie),La(ie,()=>t(f),he=>l(f,he)),r(j,ie)};_(v,j=>{t(z)?j(o):j(R,!1)})}e(b);var K=i(b,2),se=i(a(K),2);{var ue=j=>{var ie=Ls(),oe=a(ie);ta(oe),oe.__input=Z;var G=i(oe,2);G.__click=()=>{l(I,!1),l(x,""),Z()},e(ie),sa(oe,()=>t(x),J=>l(x,J)),r(j,ie)},Te=j=>{var ie=Le(),oe=qe(ie);{var G=he=>{var pe=Es();pe.__change=F;var be=a(pe);be.value=be.__value="";var Me=i(be);ye(Me,17,()=>t(T),Se,(ze,Ge)=>{var je=Gs(),Ze=a(je,!0);e(je);var De={};y(()=>{d(Ze,t(Ge)),De!==(De=t(Ge))&&(je.value=(je.__value=t(Ge))??"")}),r(ze,je)});var Pe=i(Me);Pe.value=Pe.__value="Other",e(pe),La(pe,()=>t(x),ze=>l(x,ze)),r(he,pe)},J=he=>{var pe=Os();ta(pe),pe.__input=Z,y(()=>{Re(pe,"placeholder",t(f)?"Filter crag...":"Select area first"),pe.disabled=!t(z)&&!t(f)}),sa(pe,()=>t(x),be=>l(x,be)),r(he,pe)};_(oe,he=>{!t(z)&&t(f)&&t(T).length>0?he(G):he(J,!1)},!0)}r(j,ie)};_(se,j=>{t(I)?j(ue):j(Te,!1)})}e(K);var ge=i(K,2),Q=i(a(ge),2);Q.__change=Z;var X=a(Q);X.value=X.__value="";var U=i(X);ye(U,17,()=>u,Se,(j,ie)=>{var oe=As(),G=a(oe,!0);e(oe);var J={};y(()=>{d(G,t(ie)),J!==(J=t(ie))&&(oe.value=(oe.__value=t(ie))??"")}),r(j,oe)}),e(Q),e(ge);var we=i(ge,2),xe=i(a(we),2);ta(xe),xe.__input=Z,e(we),e(ve);var Ce=i(ve,2),ae=a(Ce);ae.__click=B,e(Ce),e(ee),sa(te,()=>t(m),j=>l(m,j)),sa(P,()=>t(g),j=>l(g,j)),La(Q,()=>t(D),j=>l(D,j)),sa(xe,()=>t(C),j=>l(C,j)),ia(3,ee,()=>ua,()=>({duration:200})),r(W,ee)};_(w,W=>{t(h)&&W(A)})}e(de),y(()=>Re(ne,"aria-expanded",t(h))),r(S,de),_a()}na(["click","change","input"]);var Rs=n('<span class="climb-type-tag svelte-1k6anfh"> </span>'),Ms=n('<span class="notes-preview svelte-1k6anfh"> </span>'),Ps=n('<span class="attempts-count svelte-1k6anfh"> </span>'),Bs=n('<div class="detail-row svelte-1k6anfh"><span class="label svelte-1k6anfh">Notes:</span> <p class="notes svelte-1k6anfh"> </p></div>'),Vs=n('<p class="empty-notes svelte-1k6anfh">No notes for this climb.</p>'),Ws=n('<div class="climb-details svelte-1k6anfh"><!> <div class="tags svelte-1k6anfh"><span class="tag type svelte-1k6anfh"> </span> <span class="tag attempt-text svelte-1k6anfh"> </span></div></div>'),Us=n('<div><div class="climb-header svelte-1k6anfh" role="button" tabindex="0"><div class="climb-main-info svelte-1k6anfh"><span> </span> <span class="climb-name svelte-1k6anfh"> </span> <!> <!></div> <div class="climb-meta svelte-1k6anfh"><span><span class="icon svelte-1k6anfh"> </span> <!></span> <button class="delete-btn svelte-1k6anfh" aria-label="Delete climb" title="Delete climb">üóëÔ∏è</button> <span class="chevron svelte-1k6anfh"> </span></div></div> <!></div>');function Hs(S,s){ca(s,!0);let p=Na(s,"showClimbType",3,!1),u=H(!1);function h(){l(u,!t(u))}function m(k){k.stopPropagation(),s.onDelete()}const g={Flash:"‚ö°",Onsight:"üëÅÔ∏è",Redpoint:"üî¥",Dogged:"üõ†Ô∏è",DNF:"‚ùå"};var f=Us();let x;var D=a(f);D.__click=h,D.__keydown=k=>(k.key==="Enter"||k.key===" ")&&h();var C=a(D),z=a(C);let I;var T=a(z,!0);e(z);var M=i(z,2),F=a(M,!0);e(M);var O=i(M,2);{var B=k=>{var P=Rs(),b=a(P,!0);e(P),y(()=>d(b,s.climb.isSport?"Sport":"Boulder")),r(k,P)};_(O,k=>{p()&&k(B)})}var Z=i(O,2);{var de=k=>{var P=Ms(),b=a(P);e(P),y(()=>d(b,`- ${s.climb.notes??""}`)),r(k,P)};_(Z,k=>{!t(u)&&s.climb.notes&&k(de)})}e(C);var ne=i(C,2),Y=a(ne);let ce;var _e=a(Y),le=a(_e,!0);e(_e);var w=i(_e,2);{var A=k=>{var P=Ps(),b=a(P,!0);e(P),y(()=>d(b,s.climb.attemptsNum)),r(k,P)};_(w,k=>{s.climb.attemptType!=="Flash"&&s.climb.attemptType!=="Onsight"&&k(A)})}e(Y);var W=i(Y,2);W.__click=m;var ee=i(W,2),ve=a(ee,!0);e(ee),e(ne),e(D);var fe=i(D,2);{var te=k=>{var P=Ws(),b=a(P);{var v=ge=>{var Q=Bs(),X=i(a(Q),2),U=a(X,!0);e(X),e(Q),y(()=>d(U,s.climb.notes)),r(ge,Q)},o=ge=>{var Q=Vs();r(ge,Q)};_(b,ge=>{s.climb.notes?ge(v):ge(o,!1)})}var R=i(b,2),K=a(R),se=a(K,!0);e(K);var ue=i(K,2),Te=a(ue,!0);e(ue),e(R),e(P),y(()=>{d(se,s.climb.isSport?"Sport":"Boulder"),d(Te,s.climb.attemptType)}),ia(3,P,()=>ua,()=>({duration:150})),r(k,P)};_(fe,k=>{t(u)&&k(te)})}e(f),y(()=>{x=He(f,1,"climb-entry svelte-1k6anfh",null,x,{expanded:t(u)}),Re(D,"aria-expanded",t(u)),I=He(z,1,"grade-badge svelte-1k6anfh",null,I,{sport:s.climb.isSport}),d(T,s.climb.grade),d(F,s.climb.name||"Unnamed Route"),ce=He(Y,1,"attempt-type svelte-1k6anfh",null,ce,{flash:s.climb.attemptType==="Flash"}),d(le,g[s.climb.attemptType]||s.climb.attemptType),d(ve,t(u)?"‚ñ≤":"‚ñº")}),r(S,f),_a()}na(["click","keydown"]);var Zs=n('<div class="sector-meta svelte-d5hg2r"> </div>'),Js=n('<span class="stat svelte-d5hg2r"> </span>'),Ks=n('<span class="status-icon pending svelte-d5hg2r" title="Waiting to sync">üîÑ</span>'),Ys=n('<span class="status-icon error svelte-d5hg2r" title="Sync error">‚ö†Ô∏è</span>'),Qs=n('<span class="chip svelte-d5hg2r"> </span>'),Xs=n('<span class="text-none svelte-d5hg2r">None</span>'),$s=n('<div class="detail-item svelte-d5hg2r"><span class="label svelte-d5hg2r">Difficulty</span> <span class="value svelte-d5hg2r"> </span></div>'),ei=n('<span class="chip svelte-d5hg2r"> </span>'),ai=n('<span class="text-none svelte-d5hg2r">None</span>'),ti=n('<div class="detail-item svelte-d5hg2r"><span class="label svelte-d5hg2r">Category</span> <div class="value-chips svelte-d5hg2r"><!></div></div>'),si=n('<span class="chip svelte-d5hg2r"> </span>'),ii=n('<span class="text-none svelte-d5hg2r">None</span>'),ri=n('<div class="detail-item svelte-d5hg2r"><span class="label svelte-d5hg2r">Focus</span> <div class="value-chips svelte-d5hg2r"><!></div></div>'),ni=n('<span class="chip svelte-d5hg2r"> </span>'),vi=n('<span class="text-none svelte-d5hg2r">None</span>'),li=n('<div class="detail-item svelte-d5hg2r"><span class="label svelte-d5hg2r">Energy System</span> <div class="value-chips svelte-d5hg2r"><!></div></div>'),oi=n('<div class="metric svelte-d5hg2r"><span class="label svelte-d5hg2r">Open Grip</span> <div class="bar-container svelte-d5hg2r"><div class="bar-fill svelte-d5hg2r"></div></div> <span class="score svelte-d5hg2r"> </span></div>'),di=n('<div class="metric svelte-d5hg2r"><span class="label svelte-d5hg2r">Crimp Grip</span> <div class="bar-container svelte-d5hg2r"><div class="bar-fill svelte-d5hg2r"></div></div> <span class="score svelte-d5hg2r"> </span></div>'),ci=n('<div class="metric svelte-d5hg2r"><span class="label svelte-d5hg2r">Pinch Grip</span> <div class="bar-container svelte-d5hg2r"><div class="bar-fill svelte-d5hg2r"></div></div> <span class="score svelte-d5hg2r"> </span></div>'),_i=n('<div class="metric svelte-d5hg2r"><span class="label svelte-d5hg2r">Sloper Grip</span> <div class="bar-container svelte-d5hg2r"><div class="bar-fill svelte-d5hg2r"></div></div> <span class="score svelte-d5hg2r"> </span></div>'),ui=n('<div class="metric svelte-d5hg2r"><span class="label svelte-d5hg2r">Jug Grip</span> <div class="bar-container svelte-d5hg2r"><div class="bar-fill svelte-d5hg2r"></div></div> <span class="score svelte-d5hg2r"> </span></div>'),fi=n('<p class="no-climbs svelte-d5hg2r">No climbs logged for this session.</p>'),gi=n('<div class="card-body svelte-d5hg2r"><div class="details-grid svelte-d5hg2r"><div class="detail-item svelte-d5hg2r"><span class="label svelte-d5hg2r">Training Type</span> <div class="value-chips svelte-d5hg2r"><!></div></div> <!> <!> <!> <!></div> <div class="metrics-container svelte-d5hg2r"><div class="metric svelte-d5hg2r"><span class="label svelte-d5hg2r">Finger Load</span> <div class="bar-container svelte-d5hg2r"><div class="bar-fill svelte-d5hg2r"></div></div> <span class="score svelte-d5hg2r"> </span></div> <div class="metric svelte-d5hg2r"><span class="label svelte-d5hg2r">Shoulder Load</span> <div class="bar-container svelte-d5hg2r"><div class="bar-fill svelte-d5hg2r"></div></div> <span class="score svelte-d5hg2r"> </span></div> <div class="metric svelte-d5hg2r"><span class="label svelte-d5hg2r">Forearm Load</span> <div class="bar-container svelte-d5hg2r"><div class="bar-fill svelte-d5hg2r"></div></div> <span class="score svelte-d5hg2r"> </span></div> <!> <!> <!> <!> <!></div> <div class="climbs-list svelte-d5hg2r"><h4 class="svelte-d5hg2r">Climbs</h4> <div class="climbs-container svelte-d5hg2r"><!> <!></div></div></div>'),pi=n('<div><div class="card-header svelte-d5hg2r" role="button" tabindex="0"><div class="header-main svelte-d5hg2r"><div class="date-badge svelte-d5hg2r"><span class="day svelte-d5hg2r"> </span> <span class="month svelte-d5hg2r"> </span></div> <div class="session-info svelte-d5hg2r"><div class="session-text svelte-d5hg2r"><h3 class="location svelte-d5hg2r"> <!></h3> <!> <div class="session-meta svelte-d5hg2r"><span class="type-tag svelte-d5hg2r"> </span> <span class="stat svelte-d5hg2r"> </span> <!></div></div> <div class="load-summary svelte-d5hg2r"><div class="load-badge finger svelte-d5hg2r"> </div> <div class="load-badge shoulder svelte-d5hg2r"> </div> <div class="load-badge forearm svelte-d5hg2r"> </div></div></div></div> <div class="header-actions svelte-d5hg2r"><div class="header-status svelte-d5hg2r"><!></div> <button class="btn-icon delete-session svelte-d5hg2r" title="Delete Session">üóëÔ∏è</button> <span class="chevron svelte-d5hg2r"> </span></div></div> <!></div> <!>',1);function mi(S,s){ca(s,!0);let p=H(!1),u=H(!1);function h(){l(p,!t(p))}function m(){l(u,!0)}function g(){Ma(s.session.id),l(u,!1),s.onDelete()}function f(G){const J=[...s.session.climbs];J.splice(G,1),Ya(s.session.id,{climbs:J}),s.onDelete()}let x=ba(()=>s.session.climbs?.length??0),D=ba(()=>(s.session.climbs||[]).reduce((G,J)=>{const he=parseInt(J.grade.replace(/\D/g,""))||0,pe=parseInt(G.replace(/\D/g,""))||0;return he>pe?J.grade:G},"V0/4a"));var C=pi(),z=qe(C);let I;var T=a(z);T.__click=h,T.__keydown=G=>G.key==="Enter"&&h();var M=a(T),F=a(M),O=a(F),B=a(O,!0);e(O);var Z=i(O,2),de=a(Z,!0);e(Z),e(F);var ne=i(F,2),Y=a(ne),ce=a(Y),_e=a(ce),le=i(_e);{var w=G=>{var J=wa();y(()=>d(J,`- ${s.session.crag??""}`)),r(G,J)};_(le,G=>{s.session.crag&&G(w)})}e(ce);var A=i(ce,2);{var W=G=>{var J=Zs(),he=a(J);e(J),y(()=>d(he,`üìç ${s.session.sector??""}`)),r(G,J)};_(A,G=>{s.session.sector&&G(W)})}var ee=i(A,2),ve=a(ee),fe=a(ve,!0);e(ve);var te=i(ve,2),k=a(te);e(te);var P=i(te,2);{var b=G=>{var J=Js(),he=a(J);e(J),y(()=>d(he,`Max: ${t(D)??""}`)),r(G,J)};_(P,G=>{t(x)>0&&G(b)})}e(ee),e(Y);var v=i(Y,2),o=a(v),R=a(o,!0);e(o);var K=i(o,2),se=a(K,!0);e(K);var ue=i(K,2),Te=a(ue,!0);e(ue),e(v),e(ne),e(M);var ge=i(M,2),Q=a(ge),X=a(Q);{var U=G=>{var J=Ks();r(G,J)},we=G=>{var J=Le(),he=qe(J);{var pe=be=>{var Me=Ys();r(be,Me)};_(he,be=>{s.session.syncStatus==="error"&&be(pe)},!0)}r(G,J)};_(X,G=>{s.session.syncStatus==="pending"?G(U):G(we,!1)})}e(Q);var xe=i(Q,2);xe.__click=G=>{G.stopPropagation(),m()};var Ce=i(xe,2),ae=a(Ce,!0);e(Ce),e(ge),e(T);var j=i(T,2);{var ie=G=>{var J=gi(),he=a(J),pe=a(he),be=i(a(pe),2),Me=a(be);{var Pe=c=>{var q=Le(),L=qe(q);ye(L,17,()=>s.session.trainingTypes,Se,($,V)=>{var re=Qs(),me=a(re,!0);e(re),y(()=>d(me,t(V))),r($,re)}),r(c,q)},ze=c=>{var q=Xs();r(c,q)};_(Me,c=>{s.session.trainingTypes&&s.session.trainingTypes.length>0&&!s.session.trainingTypes.includes("None")?c(Pe):c(ze,!1)})}e(be),e(pe);var Ge=i(pe,2);{var je=c=>{var q=$s(),L=i(a(q),2),$=a(L,!0);e(L),e(q),y(()=>d($,s.session.difficulty)),r(c,q)};_(Ge,c=>{s.session.difficulty&&c(je)})}var Ze=i(Ge,2);{var De=c=>{var q=ti(),L=i(a(q),2),$=a(L);{var V=me=>{var ke=Le(),ea=qe(ke);ye(ea,17,()=>s.session.categories,Se,(Fe,aa)=>{var da=ei(),Aa=a(da,!0);e(da),y(()=>d(Aa,t(aa))),r(Fe,da)}),r(me,ke)},re=me=>{var ke=ai();r(me,ke)};_($,me=>{s.session.categories.length>0&&!s.session.categories.includes("None")?me(V):me(re,!1)})}e(L),e(q),r(c,q)};_(Ze,c=>{s.session.categories?.length&&c(De)})}var Ne=i(Ze,2);{var va=c=>{var q=ri(),L=i(a(q),2),$=a(L);{var V=me=>{var ke=Le(),ea=qe(ke);ye(ea,17,()=>s.session.techniqueFocuses,Se,(Fe,aa)=>{var da=si(),Aa=a(da,!0);e(da),y(()=>d(Aa,t(aa))),r(Fe,da)}),r(me,ke)},re=me=>{var ke=ii();r(me,ke)};_($,me=>{s.session.techniqueFocuses.length>0&&!s.session.techniqueFocuses.includes("None")?me(V):me(re,!1)})}e(L),e(q),r(c,q)};_(Ne,c=>{s.session.techniqueFocuses?.length&&c(va)})}var Je=i(Ne,2);{var We=c=>{var q=li(),L=i(a(q),2),$=a(L);{var V=me=>{var ke=Le(),ea=qe(ke);ye(ea,17,()=>s.session.energySystems,Se,(Fe,aa)=>{var da=ni(),Aa=a(da,!0);e(da),y(()=>d(Aa,t(aa))),r(Fe,da)}),r(me,ke)},re=me=>{var ke=vi();r(me,ke)};_($,me=>{s.session.energySystems.length>0&&!s.session.energySystems.includes("None")?me(V):me(re,!1)})}e(L),e(q),r(c,q)};_(Je,c=>{s.session.energySystems?.length&&c(We)})}e(he);var Ke=i(he,2),Oe=a(Ke),Ee=i(a(Oe),2),fa=a(Ee);e(Ee);var Ae=i(Ee,2),la=a(Ae);e(Ae),e(Oe);var Ye=i(Oe,2),ra=i(a(Ye),2),qa=a(ra);e(ra);var Ue=i(ra,2),Be=a(Ue);e(Ue),e(Ye);var Qe=i(Ye,2),oa=i(a(Qe),2),Xe=a(oa);e(oa);var $e=i(oa,2),Da=a($e);e($e),e(Qe);var Ve=i(Qe,2);{var Ta=c=>{var q=oi(),L=i(a(q),2),$=a(L);e(L);var V=i(L,2),re=a(V);e(V),e(q),y(()=>{Ie($,`width: ${s.session.openGrip/5*100}%`),d(re,`${s.session.openGrip??""}/5`)}),r(c,q)};_(Ve,c=>{s.session.openGrip&&c(Ta)})}var pa=i(Ve,2);{var Sa=c=>{var q=di(),L=i(a(q),2),$=a(L);e(L);var V=i(L,2),re=a(V);e(V),e(q),y(()=>{Ie($,`width: ${s.session.crimpGrip/5*100}%`),d(re,`${s.session.crimpGrip??""}/5`)}),r(c,q)};_(pa,c=>{s.session.crimpGrip&&c(Sa)})}var ma=i(pa,2);{var Ea=c=>{var q=ci(),L=i(a(q),2),$=a(L);e(L);var V=i(L,2),re=a(V);e(V),e(q),y(()=>{Ie($,`width: ${s.session.pinchGrip/5*100}%`),d(re,`${s.session.pinchGrip??""}/5`)}),r(c,q)};_(ma,c=>{s.session.pinchGrip&&c(Ea)})}var Ca=i(ma,2);{var Oa=c=>{var q=_i(),L=i(a(q),2),$=a(L);e(L);var V=i(L,2),re=a(V);e(V),e(q),y(()=>{Ie($,`width: ${s.session.sloperGrip/5*100}%`),d(re,`${s.session.sloperGrip??""}/5`)}),r(c,q)};_(Ca,c=>{s.session.sloperGrip&&c(Oa)})}var ka=i(Ca,2);{var ya=c=>{var q=ui(),L=i(a(q),2),$=a(L);e(L);var V=i(L,2),re=a(V);e(V),e(q),y(()=>{Ie($,`width: ${s.session.jugGrip/5*100}%`),d(re,`${s.session.jugGrip??""}/5`)}),r(c,q)};_(ka,c=>{s.session.jugGrip&&c(ya)})}e(Ke);var xa=i(Ke,2),Fa=i(a(xa),2),za=a(Fa);ye(za,17,()=>s.session.climbs||[],Se,(c,q,L)=>{{let $=ba(()=>s.session.climbingType==="Mixed");Hs(c,{get climb(){return t(q)},onDelete:()=>f(L),get showClimbType(){return t($)}})}});var N=i(za,2);{var E=c=>{var q=fi();r(c,q)};_(N,c=>{(s.session.climbs||[]).length===0&&c(E)})}e(Fa),e(xa),e(J),y(()=>{Ie(fa,`width: ${s.session.fingerLoad/5*100}%`),d(la,`${s.session.fingerLoad??""}/5`),Ie(qa,`width: ${s.session.shoulderLoad/5*100}%`),d(Be,`${s.session.shoulderLoad??""}/5`),Ie(Xe,`width: ${s.session.forearmLoad/5*100}%`),d(Da,`${s.session.forearmLoad??""}/5`)}),ia(3,J,()=>ua,()=>({duration:150})),r(G,J)};_(j,G=>{t(p)&&G(ie)})}e(z);var oe=i(z,2);Va(oe,{get isOpen(){return t(u)},title:"Delete Session",message:"Are you sure you want to delete this session and all its climbs? This cannot be undone.",onConfirm:g,onCancel:()=>l(u,!1)}),y((G,J)=>{I=He(z,1,"session-card svelte-d5hg2r",null,I,{expanded:t(p)}),Re(T,"aria-expanded",t(p)),d(B,G),d(de,J),d(_e,`${s.session.area??""} `),d(fe,s.session.climbingType),d(k,`${t(x)??""} climbs`),Re(o,"title",`Finger Load: ${s.session.fingerLoad??""}`),d(R,s.session.fingerLoad),Re(K,"title",`Shoulder Load: ${s.session.shoulderLoad??""}`),d(se,s.session.shoulderLoad),Re(ue,"title",`Forearm Load: ${s.session.forearmLoad??""}`),d(Te,s.session.forearmLoad),d(ae,t(p)?"‚ñ≤":"‚ñº")},[()=>new Date(s.session.date).getDate(),()=>new Date(s.session.date).toLocaleDateString(void 0,{month:"short"})]),r(S,C),_a()}na(["click","keydown"]);var hi=n('<span class="spinner svelte-1s7jdlh"></span> Fetching...',1),bi=n('<div class="error-banner svelte-1s7jdlh"> </div>'),yi=n('<small class="svelte-1s7jdlh">Try adjusting your filters.</small>'),xi=n('<div class="empty-state svelte-1s7jdlh"><p class="svelte-1s7jdlh">No outdoor climbing sessions found.</p> <!></div>'),wi=n('<div class="load-more-container svelte-1s7jdlh"><button class="load-more-btn svelte-1s7jdlh"> </button></div>'),qi=n('<div class="view-container svelte-1s7jdlh"><div class="view-header svelte-1s7jdlh"><h2 class="view-title svelte-1s7jdlh">‚õ∞Ô∏è Outdoor Climbing History</h2> <div class="header-actions svelte-1s7jdlh"><button class="action-btn secondary svelte-1s7jdlh" title="Export filtered data to CSV">üì• Export</button> <button class="action-btn svelte-1s7jdlh" title="Fetch data from cloud"><!></button></div></div> <!> <!> <div class="info-bar svelte-1s7jdlh"><div class="legend-wrapper svelte-1s7jdlh"><!></div> <div class="load-key svelte-1s7jdlh"><span class="key-label svelte-1s7jdlh">Load:</span> <div class="key-item svelte-1s7jdlh"><span class="dot finger svelte-1s7jdlh"></span> Finger</div> <div class="key-item svelte-1s7jdlh"><span class="dot shoulder svelte-1s7jdlh"></span> Shoulder</div> <div class="key-item svelte-1s7jdlh"><span class="dot forearm svelte-1s7jdlh"></span> Forearm</div></div></div> <div class="sessions-list"><!> <!> <!></div></div>');function Di(S,s){ca(s,!0);let p=H(ga([])),u=H(ga([])),h=H(!1),m=H(""),g=H(ga({startDate:"",endDate:"",area:"",crag:"",sessionType:"",grade:""})),f=H(20);const x=20;Ka(()=>{D()});function D(){const v=Ra("outdoor_climb");l(p,v.sort((o,R)=>new Date(R.date).getTime()-new Date(o.date).getTime()),!0),T()}async function C(){l(h,!0),l(m,"");try{await Ba();const v=await gt();v.ok&&v.data?z(v.data):l(m,v.error||"Failed to fetch data",!0)}catch(v){l(m,v instanceof Error?v.message:"Unknown error",!0)}finally{l(h,!1)}}function z(v){const o=v.map(K=>({...K,activityType:"outdoor_climb",createdAt:new Date().toISOString(),updatedAt:new Date().toISOString(),syncStatus:"synced",syncedAt:new Date().toISOString(),openGrip:0,crimpGrip:0,pinchGrip:0,sloperGrip:0,jugGrip:0}));Pa(o);const R=Ra("outdoor_climb");l(p,R.sort((K,se)=>new Date(se.date).getTime()-new Date(K.date).getTime()),!0),T()}function I(v){l(g,v,!0),T()}function T(){l(f,x),l(u,t(p).filter(v=>{if(t(g).startDate&&v.date<t(g).startDate||t(g).endDate&&v.date>t(g).endDate||t(g).area&&!v.area.toLowerCase().includes(t(g).area.toLowerCase())||t(g).crag&&!v.crag.toLowerCase().includes(t(g).crag.toLowerCase())||t(g).sessionType&&!v.trainingTypes?.includes(t(g).sessionType))return!1;if(t(g).grade){const o=t(g).grade.trim().toLowerCase();if(!v.climbs.some(K=>K.grade.trim().toLowerCase()===o))return!1}return!0}),!0)}function M(){l(f,t(f)+x)}var F=qi(),O=a(F),B=i(a(O),2),Z=a(B);Z.__click=()=>et(t(u),"outdoor_climbs");var de=i(Z,2);de.__click=C;var ne=a(de);{var Y=v=>{var o=hi();Ga(),r(v,o)},ce=v=>{var o=wa("‚òÅÔ∏è Fetch Data");r(v,o)};_(ne,v=>{t(h)?v(Y):v(ce,!1)})}e(de),e(B),e(O);var _e=i(O,2);{var le=v=>{var o=bi(),R=a(o,!0);e(o),y(()=>d(R,t(m))),ia(3,o,()=>ua),r(v,o)};_(_e,v=>{t(m)&&v(le)})}var w=i(_e,2);Is(w,{onFilterParamsChange:I});var A=i(w,2),W=a(A),ee=a(W);$a(ee),e(W),Ga(2),e(A);var ve=i(A,2),fe=a(ve);ye(fe,17,()=>t(u).slice(0,t(f)),v=>v.id,(v,o)=>{mi(v,{get session(){return t(o)},onDelete:D})});var te=i(fe,2);{var k=v=>{var o=xi(),R=i(a(o),2);{var K=se=>{var ue=yi();r(se,ue)};_(R,se=>{t(p).length>0&&se(K)})}e(o),r(v,o)};_(te,v=>{t(u).length===0&&v(k)})}var P=i(te,2);{var b=v=>{var o=wi(),R=a(o);R.__click=M;var K=a(R);e(R),e(o),y(()=>d(K,`Load More (${t(u).length-t(f)} remaining)`)),r(v,o)};_(P,v=>{t(f)<t(u).length&&v(b)})}e(ve),e(F),y(()=>de.disabled=t(h)),r(S,F),_a()}na(["click"]);var Si=n('<div class="view-container svelte-133enjd"><h2 class="view-title svelte-133enjd">üèãÔ∏è Gym Session History</h2> <p class="placeholder-text svelte-133enjd">Your gym sessions will appear here</p></div>');function ki(S){var s=Si();r(S,s)}var Ti=n('<span class="spinner svelte-1szs0u9"></span> Fetching...',1),Ci=n('<div class="loading svelte-1szs0u9">Loading sessions...</div>'),Fi=n('<div class="empty-state svelte-1szs0u9"><!></div>'),zi=n('<span class="set-tag svelte-1szs0u9"> <span class="x svelte-1szs0u9">x</span> </span>'),Li=n('<div class="ex-notes svelte-1szs0u9"> </div>'),Gi=n('<div class="exercise-item svelte-1szs0u9"><div class="ex-header svelte-1szs0u9"><span class="ex-name svelte-1szs0u9"> </span> <span class="ex-grip svelte-1szs0u9"> </span></div> <div class="ex-sets svelte-1szs0u9"></div> <!></div>'),Ei=n('<div class="card-body svelte-1szs0u9"><div class="exercises-list svelte-1szs0u9"></div></div>'),Oi=n('<div><div class="card-header svelte-1szs0u9" role="button" tabindex="0"><div class="header-main"><span class="session-date svelte-1szs0u9"> </span> <span class="meta svelte-1szs0u9"><!> </span></div> <div class="header-status svelte-1szs0u9"><span>‚óè</span> <button class="btn-icon delete-btn svelte-1szs0u9" title="Delete Session">üóëÔ∏è</button> <span class="chevron svelte-1szs0u9"> </span></div></div> <!></div>'),Ai=n('<div class="load-more-container svelte-1szs0u9"><button class="load-more-btn svelte-1szs0u9"> </button></div>'),ji=n('<div class="timeline svelte-1szs0u9"><!> <!></div>'),Ni=n('<div class="view-content svelte-1szs0u9"><div class="header svelte-1szs0u9"><h3 class="svelte-1szs0u9">ü§è Fingerboarding Log</h3> <button class="fetch-btn svelte-1szs0u9" title="Fetch data from cloud"><!></button></div> <div class="filters svelte-1szs0u9"><div class="filter-group svelte-1szs0u9"><label for="start-date" class="svelte-1szs0u9">From</label> <input type="date" id="start-date" class="svelte-1szs0u9"/></div> <div class="filter-group svelte-1szs0u9"><label for="end-date" class="svelte-1szs0u9">To</label> <input type="date" id="end-date" class="svelte-1szs0u9"/></div></div> <!></div> <!>',1);function Ii(S,s){ca(s,!0);let p=H(ga([])),u=H(!0),h=H(""),m=H(""),g=H(ga(new Set)),f=H(20);const x=20;dt(()=>{t(h),t(m),l(f,x)});let D=H(!1),C=H(null);function z(b){l(C,b,!0),l(D,!0)}function I(){t(C)&&(Ma(t(C)),l(C,null),l(D,!1),l(p,Wa().sort((b,v)=>new Date(v.date).getTime()-new Date(b.date).getTime()),!0))}async function T(){l(u,!0),l(p,Wa().sort((b,v)=>new Date(v.date).getTime()-new Date(b.date).getTime()),!0);try{await Ba();const b=await pt();if(b.ok&&b.data){const v=b.data.map(o=>({...o,activityType:"fingerboarding",createdAt:o.createdAt||new Date().toISOString(),updatedAt:o.updatedAt||new Date().toISOString(),syncStatus:"synced"}));Pa(v),l(p,Wa().sort((o,R)=>new Date(R.date).getTime()-new Date(o.date).getTime()),!0)}}catch(b){console.error("Failed to sync",b)}finally{l(u,!1)}}T();let M=ba(()=>t(p).filter(b=>!(t(h)&&new Date(b.date)<new Date(t(h))||t(m)&&new Date(b.date)>new Date(t(m)))));function F(){l(f,t(f)+x)}function O(b){t(g).has(b)?t(g).delete(b):t(g).add(b),l(g,new Set(t(g)),!0)}function B(b){return b.exercises.reduce((v,o)=>v+o.details.length,0)}var Z=Ni(),de=qe(Z),ne=a(de),Y=i(a(ne),2);Y.__click=T;var ce=a(Y);{var _e=b=>{var v=Ti();Ga(),r(b,v)},le=b=>{var v=wa("‚òÅÔ∏è Fetch Data");r(b,v)};_(ce,b=>{t(u)?b(_e):b(le,!1)})}e(Y),e(ne);var w=i(ne,2),A=a(w),W=i(a(A),2);ta(W),e(A);var ee=i(A,2),ve=i(a(ee),2);ta(ve),e(ee),e(w);var fe=i(w,2);{var te=b=>{var v=Ci();r(b,v)},k=b=>{var v=Le(),o=qe(v);{var R=se=>{var ue=Fi(),Te=a(ue);{var ge=X=>{var U=wa("No sessions match filter.");r(X,U)},Q=X=>{var U=wa("No fingerboarding sessions logged yet.");r(X,U)};_(Te,X=>{t(p).length>0?X(ge):X(Q,!1)})}e(ue),r(se,ue)},K=se=>{var ue=ji(),Te=a(ue);ye(Te,17,()=>t(M).slice(0,t(f)),Se,(X,U)=>{var we=Oi();let xe;var Ce=a(we);Ce.__click=()=>O(t(U).id),Ce.__keydown=De=>De.key==="Enter"&&O(t(U).id);var ae=a(Ce),j=a(ae),ie=a(j,!0);e(j);var oe=i(j,2),G=a(oe);{var J=De=>{var Ne=wa();y(()=>d(Ne,`${t(U).location??""} ¬∑`)),r(De,Ne)};_(G,De=>{t(U).location&&t(U).location!=="N/A"&&t(U).location!=="Home"&&De(J)})}var he=i(G);e(oe),e(ae);var pe=i(ae,2),be=a(pe);let Me;var Pe=i(be,2);Pe.__click=De=>{De.stopPropagation(),z(t(U).id)};var ze=i(Pe,2),Ge=a(ze,!0);e(ze),e(pe),e(Ce);var je=i(Ce,2);{var Ze=De=>{var Ne=Ei(),va=a(Ne);ye(va,21,()=>t(U).exercises||[],Se,(Je,We)=>{var Ke=Gi(),Oe=a(Ke),Ee=a(Oe),fa=a(Ee,!0);e(Ee);var Ae=i(Ee,2),la=a(Ae,!0);e(Ae),e(Oe);var Ye=i(Oe,2);ye(Ye,21,()=>t(We).details,Se,(Ue,Be)=>{var Qe=zi(),oa=a(Qe),Xe=i(oa,2);e(Qe),y(()=>{d(oa,`${t(Be).weight>0?`+${t(Be).weight}kg`:"BW"} `),d(Xe,` ${t(Be).reps??""}s/reps`)}),r(Ue,Qe)}),e(Ye);var ra=i(Ye,2);{var qa=Ue=>{var Be=Li(),Qe=a(Be);e(Be),y(()=>d(Qe,`"${t(We).notes??""}"`)),r(Ue,Be)};_(ra,Ue=>{t(We).notes&&Ue(qa)})}e(Ke),y(()=>{d(fa,t(We).name),d(la,t(We).gripType)}),r(Je,Ke)}),e(va),e(Ne),ia(3,Ne,()=>ua,()=>({duration:150})),r(De,Ne)};_(je,De=>{t(g).has(t(U).id)&&De(Ze)})}e(we),y((De,Ne,va,Je)=>{xe=He(we,1,"session-card svelte-1szs0u9",null,xe,De),d(ie,Ne),d(he,` ${t(U).exercises.length??""} Exercises ¬∑ ${va??""} Sets`),Me=He(be,1,"sync-dot svelte-1szs0u9",null,Me,{synced:t(U).syncStatus==="synced"}),Re(be,"title",t(U).syncStatus==="synced"?"Synced":"Local"),d(Ge,Je)},[()=>({expanded:t(g).has(t(U).id)}),()=>new Date(t(U).date).toLocaleDateString(void 0,{weekday:"short",month:"short",day:"numeric"}),()=>B(t(U)),()=>t(g).has(t(U).id)?"‚ñ≤":"‚ñº"]),r(X,we)});var ge=i(Te,2);{var Q=X=>{var U=Ai(),we=a(U);we.__click=F;var xe=a(we);e(we),e(U),y(()=>d(xe,`Load More (${t(M).length-t(f)} remaining)`)),r(X,U)};_(ge,X=>{t(f)<t(M).length&&X(Q)})}e(ue),r(se,ue)};_(o,se=>{t(M).length===0?se(R):se(K,!1)},!0)}r(b,v)};_(fe,b=>{t(u)&&t(p).length===0?b(te):b(k,!1)})}e(de);var P=i(de,2);Va(P,{get isOpen(){return t(D)},title:"Delete Fingerboard Session",message:"Are you sure you want to delete this session? This cannot be undone.",onConfirm:I,onCancel:()=>l(D,!1)}),y(()=>Y.disabled=t(u)),sa(W,()=>t(h),b=>l(h,b)),sa(ve,()=>t(m),b=>l(m,b)),r(S,Z),_a()}na(["click","keydown"]);var Ri=n('<span class="spinner svelte-xyvf5r"></span> Fetching...',1),Mi=n('<div class="loading svelte-xyvf5r">Loading sessions...</div>'),Pi=n('<div class="empty-state svelte-xyvf5r">No competitions logged yet.</div>'),Bi=n('<span class="round-pos svelte-xyvf5r"> </span>'),Vi=n('<span class="c-attempts svelte-xyvf5r"> </span>'),Wi=n('<div class="climb-notes svelte-xyvf5r"> </div>'),Ui=n('<div class="climb-row svelte-xyvf5r"><div class="climb-info svelte-xyvf5r"><span class="c-name svelte-xyvf5r"> </span> <!></div> <div class="climb-result"><span> </span></div></div> <!>',1),Hi=n('<div class="climbs-list"></div>'),Zi=n('<div class="round-item svelte-xyvf5r"><div class="round-header svelte-xyvf5r"><span class="round-name"> </span> <!></div> <!></div>'),Ji=n('<div class="rounds-list svelte-xyvf5r"></div>'),Ki=n('<div class="load-meta svelte-xyvf5r"><span> </span></div>'),Yi=n('<div class="card-body svelte-xyvf5r"><!> <!> <div class="session-footer svelte-xyvf5r"><span> </span></div></div>'),Qi=n('<div><div class="card-header svelte-xyvf5r" role="button" tabindex="0"><div class="header-main svelte-xyvf5r"><div class="left-col svelte-xyvf5r"><span class="venue svelte-xyvf5r"> </span> <span class="date svelte-xyvf5r"> </span></div> <div class="right-col svelte-xyvf5r"><div class="badges svelte-xyvf5r"><span class="type-tag svelte-xyvf5r"> </span> <span class="result-tag svelte-xyvf5r"> </span></div></div></div> <div class="header-status svelte-xyvf5r"><span>‚óè</span> <button class="btn-icon delete-btn svelte-xyvf5r" title="Delete Session">üóëÔ∏è</button> <span class="chevron svelte-xyvf5r"> </span></div></div> <!></div>'),Xi=n('<div class="load-more-container svelte-xyvf5r"><button class="load-more-btn svelte-xyvf5r"> </button></div>'),$i=n('<div class="timeline svelte-xyvf5r"><!> <!></div>'),er=n('<div class="view-content svelte-xyvf5r"><div class="header svelte-xyvf5r"><h3 class="svelte-xyvf5r">üèÜ Competition Log</h3> <button class="fetch-btn svelte-xyvf5r" title="Fetch data from cloud"><!></button></div> <!> <!></div>');function ar(S,s){ca(s,!0);let p=H(ga([])),u=H(!0),h=H(ga(new Set)),m=H(20);const g=20;let f=H(!1),x=H(null);function D(w){l(x,w,!0),l(f,!0)}function C(){t(x)&&(Ma(t(x)),l(x,null),l(f,!1),l(p,Ua().sort((w,A)=>new Date(A.date).getTime()-new Date(w.date).getTime()),!0))}async function z(){l(u,!0),l(m,g),l(p,Ua().sort((w,A)=>new Date(A.date).getTime()-new Date(w.date).getTime()),!0);try{await Ba();const w=await mt();if(w.ok&&w.data){const A=w.data.map(W=>({...W,activityType:"competition",type:W.type,rounds:W.rounds.map(ee=>({...ee,climbs:ee.climbs?.map(ve=>({...ve,status:ve.status}))})),createdAt:W.createdAt||new Date().toISOString(),updatedAt:W.updatedAt||new Date().toISOString(),syncStatus:"synced"}));Pa(A),l(p,Ua().sort((W,ee)=>new Date(ee.date).getTime()-new Date(W.date).getTime()),!0)}}catch(w){console.error("Failed to sync",w)}finally{l(u,!1)}}z();function I(w){t(h).has(w)?t(h).delete(w):t(h).add(w),l(h,new Set(t(h)),!0)}function T(){l(m,t(m)+g)}function M(w){if(!w.rounds||w.rounds.length===0)return"No rounds";const A=w.rounds[w.rounds.length-1];if(A.position)return`#${A.position} ${A.name}`;if(A.climbs){const W=A.climbs.filter(ve=>ve.status==="Top"||ve.status==="Flash").length,ee=A.climbs.filter(ve=>ve.status==="Zone").length;return`${w.rounds.length} Rnds ¬∑ Final: ${W}T ${ee+W}Z`}return A.name}var F=er(),O=a(F),B=i(a(O),2);B.__click=z;var Z=a(B);{var de=w=>{var A=Ri();Ga(),r(w,A)},ne=w=>{var A=wa("‚òÅÔ∏è Fetch Data");r(w,A)};_(Z,w=>{t(u)?w(de):w(ne,!1)})}e(B),e(O);var Y=i(O,2);{var ce=w=>{var A=Mi();r(w,A)},_e=w=>{var A=Le(),W=qe(A);{var ee=fe=>{var te=Pi();r(fe,te)},ve=fe=>{var te=$i(),k=a(te);ye(k,17,()=>t(p).slice(0,t(m)),Se,(v,o)=>{var R=Qi();let K;var se=a(R);se.__click=()=>I(t(o).id),se.__keydown=ze=>ze.key==="Enter"&&I(t(o).id);var ue=a(se),Te=a(ue),ge=a(Te),Q=a(ge,!0);e(ge);var X=i(ge,2),U=a(X,!0);e(X),e(Te);var we=i(Te,2),xe=a(we),Ce=a(xe),ae=a(Ce,!0);e(Ce);var j=i(Ce,2),ie=a(j,!0);e(j),e(xe),e(we),e(ue);var oe=i(ue,2),G=a(oe);let J;var he=i(G,2);he.__click=ze=>{ze.stopPropagation(),D(t(o).id)};var pe=i(he,2),be=a(pe,!0);e(pe),e(oe),e(se);var Me=i(se,2);{var Pe=ze=>{var Ge=Yi(),je=a(Ge);{var Ze=Oe=>{var Ee=Ji();ye(Ee,21,()=>t(o).rounds||[],Se,(fa,Ae)=>{var la=Zi(),Ye=a(la),ra=a(Ye),qa=a(ra,!0);e(ra);var Ue=i(ra,2);{var Be=Xe=>{var $e=Bi(),Da=a($e);e($e),y(()=>d(Da,`#${t(Ae).position??""}`)),r(Xe,$e)};_(Ue,Xe=>{t(Ae).position&&Xe(Be)})}e(Ye);var Qe=i(Ye,2);{var oa=Xe=>{var $e=Hi();ye($e,21,()=>t(Ae).climbs||[],Se,(Da,Ve)=>{var Ta=Ui(),pa=qe(Ta),Sa=a(pa),ma=a(Sa),Ea=a(ma,!0);e(ma);var Ca=i(ma,2);{var Oa=E=>{var c=Vi(),q=a(c);e(c),y(()=>d(q,`(${t(Ve).attemptCount??""} tries)`)),r(E,c)};_(Ca,E=>{t(Ve).attemptCount>1&&E(Oa)})}e(Sa);var ka=i(Sa,2),ya=a(ka);let xa;var Fa=a(ya,!0);e(ya),e(ka),e(pa);var za=i(pa,2);{var N=E=>{var c=Wi(),q=a(c);e(c),y(()=>d(q,`"${t(Ve).notes??""}"`)),r(E,c)};_(za,E=>{t(Ve).notes&&E(N)})}y(()=>{d(Ea,t(Ve).name),xa=He(ya,1,"status-badge svelte-xyvf5r",null,xa,{top:t(Ve).status==="Top"||t(Ve).status==="Flash",zone:t(Ve).status==="Zone"}),d(Fa,t(Ve).status)}),r(Da,Ta)}),e($e),r(Xe,$e)};_(Qe,Xe=>{t(Ae).climbs&&Xe(oa)})}e(la),y(()=>d(qa,t(Ae).name)),r(fa,la)}),e(Ee),r(Oe,Ee)};_(je,Oe=>{t(o).rounds&&Oe(Ze)})}var De=i(je,2);{var Ne=Oe=>{var Ee=Ki(),fa=a(Ee),Ae=a(fa);e(fa),e(Ee),y(()=>d(Ae,`Detailed Load: Fingers ${t(o).fingerLoad??""}/5, Shoulders ${t(o).shoulderLoad??""}/5, Forearms ${t(o).forearmLoad??""}/5`)),r(Oe,Ee)};_(De,Oe=>{(t(o).fingerLoad||t(o).shoulderLoad)&&Oe(Ne)})}var va=i(De,2),Je=a(va);let We;var Ke=a(Je,!0);e(Je),e(va),e(Ge),y(()=>{We=He(Je,1,"sync-status svelte-xyvf5r",null,We,{synced:t(o).syncStatus==="synced"}),d(Ke,t(o).syncStatus==="synced"?"‚úì Synced":"‚òÅ Local")}),ia(3,Ge,()=>ua,()=>({duration:150})),r(ze,Ge)};_(Me,ze=>{t(h).has(t(o).id)&&ze(Pe)})}e(R),y((ze,Ge,je,Ze)=>{K=He(R,1,"session-card svelte-xyvf5r",null,K,ze),d(Q,t(o).customVenue||t(o).venue),d(U,Ge),d(ae,t(o).type),d(ie,je),J=He(G,1,"sync-dot",null,J,{synced:t(o).syncStatus==="synced"}),Re(G,"title",t(o).syncStatus==="synced"?"Synced":"Local"),d(be,Ze)},[()=>({expanded:t(h).has(t(o).id)}),()=>new Date(t(o).date).toLocaleDateString(void 0,{weekday:"short",day:"numeric",month:"short"}),()=>M(t(o)),()=>t(h).has(t(o).id)?"‚ñ≤":"‚ñº"]),r(v,R)});var P=i(k,2);{var b=v=>{var o=Xi(),R=a(o);R.__click=T;var K=a(R);e(R),e(o),y(()=>d(K,`Load More (${t(p).length-t(m)} remaining)`)),r(v,o)};_(P,v=>{t(m)<t(p).length&&v(b)})}e(te),r(fe,te)};_(W,fe=>{t(p).length===0?fe(ee):fe(ve,!1)},!0)}r(w,A)};_(Y,w=>{t(u)&&t(p).length===0?w(ce):w(_e,!1)})}var le=i(Y,2);Va(le,{get isOpen(){return t(f)},title:"Delete Competition",message:"Are you sure you want to delete this competition session? This action cannot be undone.",onConfirm:C,onCancel:()=>l(f,!1)}),e(F),y(()=>B.disabled=t(u)),r(S,F),_a()}na(["click","keydown"]);var tr=n("<option> </option>"),sr=n('<div class="view-container svelte-108px9u"><!></div>'),ir=n('<div class="page svelte-108px9u"><div class="page-header svelte-108px9u"><h1 class="svelte-108px9u">üìä View Data</h1> <p class="subtitle svelte-108px9u">Browse your training history</p></div> <div class="content-card svelte-108px9u"><div class="form-group svelte-108px9u"><label for="activity-type" class="svelte-108px9u">Activity Type</label> <select id="activity-type" class="svelte-108px9u"><option disabled>Select an activity...</option><!></select></div> <!></div></div>');function pr(S){const s=[{value:"indoor_climb",label:"Indoor Climb",icon:"üßó"},{value:"outdoor_climb",label:"Outdoor Climb",icon:"‚õ∞Ô∏è"},{value:"gym_session",label:"Gym Session",icon:"üèãÔ∏è"},{value:"fingerboarding",label:"Fingerboarding",icon:"ü§è"},{value:"competition",label:"Competition",icon:"üèÜ"}];let p=H("");var u=ir(),h=i(a(u),2),m=a(h),g=i(a(m),2),f=a(g);f.value=f.__value="";var x=i(f);ye(x,17,()=>s,z=>z.value,(z,I)=>{var T=tr(),M=a(T);e(T);var F={};y(()=>{d(M,`${t(I).icon??""} ${t(I).label??""}`),F!==(F=t(I).value)&&(T.value=(T.__value=t(I).value)??"")}),r(z,T)}),e(g),e(m);var D=i(m,2);{var C=z=>{var I=sr(),T=a(I);{var M=O=>{Ss(O,{})},F=O=>{var B=Le(),Z=qe(B);{var de=Y=>{Di(Y,{})},ne=Y=>{var ce=Le(),_e=qe(ce);{var le=A=>{ki(A)},w=A=>{var W=Le(),ee=qe(W);{var ve=te=>{Ii(te,{})},fe=te=>{var k=Le(),P=qe(k);{var b=v=>{ar(v,{})};_(P,v=>{t(p)==="competition"&&v(b)},!0)}r(te,k)};_(ee,te=>{t(p)==="fingerboarding"?te(ve):te(fe,!1)},!0)}r(A,W)};_(_e,A=>{t(p)==="gym_session"?A(le):A(w,!1)},!0)}r(Y,ce)};_(Z,Y=>{t(p)==="outdoor_climb"?Y(de):Y(ne,!1)},!0)}r(O,B)};_(T,O=>{t(p)==="indoor_climb"?O(M):O(F,!1)})}e(I),r(z,I)};_(D,z=>{t(p)&&z(C)})}e(h),e(u),La(g,()=>t(p),z=>l(p,z)),r(S,u)}export{pr as component};
