import{f as u,a as o,c as ct,t as Fe}from"../chunks/bxSSDmCG.js";import{p as Pt,c as l,r as s,s as a,i as e,t as C,a as It,f as tt,aV as v,E as Ce,aG as he,F as t,aW as Ot,aY as ms,d as gs,o as bs}from"../chunks/BvwCwrbP.js";import{d as $t,s as $,e as ls}from"../chunks/D97XAFTq.js";import{i as k}from"../chunks/DJDEC4-q.js";import{e as re,i as ie,r as y,b,c as hs,s as wt,d as Ss}from"../chunks/C6b-0WKN.js";import{s as Ye}from"../chunks/r3Oz2b9H.js";import{i as us,s as ps,c as We,d as ks,m as rs,b as os,e as qs,f as xs,h as ws}from"../chunks/CIEREIgH.js";import{i as Xt,c as Cs,g as Ns,a as Ts,b as Fs,d as Os,e as js,f as Vs,s as As}from"../chunks/DD0kMcH3.js";import{p as _s}from"../chunks/BzRc-_KC.js";import"../chunks/C34k2uMk.js";var Ls=u('<span class="placeholder svelte-1g8x5ph"> </span>'),Gs=u('<span class="chip-display"> </span>'),Bs=u('<button type="button"> </button>'),Ds=u('<div class="multi-select-container svelte-1g8x5ph"><div class="chips svelte-1g8x5ph"><!></div> <div class="options-grid svelte-1g8x5ph"></div></div>');function ht(Pe,xe){Pt(xe,!0);let Oe=_s(xe,"selected",19,()=>[]),ce=_s(xe,"placeholder",3,"Select options...");function ue(D){let F=[...Oe()];D==="None"?F.includes("None")?F=[]:F=["None"]:(F=F.filter(j=>j!=="None"),F.includes(D)?F=F.filter(j=>j!==D):F.push(D)),xe.onChange(F)}var N=Ds(),z=l(N),H=l(z);{var pe=D=>{var F=Ls(),j=l(F,!0);s(F),C(()=>$(j,ce())),o(D,F)},Ie=D=>{var F=ct(),j=tt(F);re(j,17,Oe,ie,(A,q)=>{var T=Gs(),P=l(T,!0);s(T),C(()=>$(P,e(q))),o(A,T)}),o(D,F)};k(H,D=>{Oe().length===0?D(pe):D(Ie,!1)})}s(z);var Q=a(z,2);re(Q,21,()=>xe.options,ie,(D,F)=>{var j=Bs();j.__click=()=>ue(e(F));var A=l(j,!0);s(j),C(q=>{Ye(j,1,`option-chip ${q??""}`,"svelte-1g8x5ph"),$(A,e(F))},[()=>Oe().includes(e(F))?"selected":""]),o(D,j)}),s(Q),s(N),o(Pe,N),It()}$t(["click"]);var Es=u('<div class="input-with-action svelte-1lf3qka"><input type="text" id="location-manual" placeholder="Enter custom location..." class="flat-left svelte-1lf3qka"/> <button type="button" class="action-btn flat-right svelte-1lf3qka" title="Back to list">‚úï</button></div>'),Rs=u("<option> </option>"),Ms=u('<select id="location" class="svelte-1lf3qka"><option disabled>Select location...</option><!></select>'),Ps=u("<option> </option>"),Is=u("<option> </option>"),$s=u('<th class="svelte-1lf3qka">Sport?</th>'),zs=u('<td class="center svelte-1lf3qka"><input type="checkbox" class="svelte-1lf3qka"/></td>'),Us=u('<span class="grade-error svelte-1lf3qka">Invalid</span>'),Ws=u("<option> </option>"),Hs=u('<button type="button" class="remove-btn svelte-1lf3qka">‚úï</button>'),Js=u('<tr><!><td class="svelte-1lf3qka"><input type="text" placeholder="Route name..." class="svelte-1lf3qka"/></td><td class="svelte-1lf3qka"><input type="text" placeholder="V3"/> <!></td><td class="svelte-1lf3qka"><select class="svelte-1lf3qka"></select></td><td class="svelte-1lf3qka"><input type="number" min="1" class="svelte-1lf3qka"/></td><td><textarea placeholder="Notes..." class="svelte-1lf3qka"></textarea></td><td class="center svelte-1lf3qka"><!></td></tr>'),Ks=u("<div> </div>"),Qs=u('<div class="form-content svelte-1lf3qka"><h3 class="svelte-1lf3qka">üßó Indoor Climb</h3> <div class="form-row svelte-1lf3qka"><div class="form-group svelte-1lf3qka"><label for="date" class="svelte-1lf3qka">Date</label> <input type="date" id="date" class="svelte-1lf3qka"/></div> <div class="form-group svelte-1lf3qka"><label for="location" class="svelte-1lf3qka">Location</label> <!></div></div> <div class="form-group svelte-1lf3qka"><label for="climbing-type" class="svelte-1lf3qka">Climbing Type</label> <select id="climbing-type" class="svelte-1lf3qka"><option disabled>Select type...</option><!></select></div> <div class="load-section svelte-1lf3qka"><h4 class="svelte-1lf3qka">Load Metrics</h4> <div class="load-metrics svelte-1lf3qka"><div class="load-item svelte-1lf3qka"><label for="finger-load" class="svelte-1lf3qka">Finger</label> <input type="number" id="finger-load" min="1" max="5" class="svelte-1lf3qka"/> <span class="load-scale svelte-1lf3qka">/ 5</span></div> <div class="load-item svelte-1lf3qka"><label for="shoulder-load" class="svelte-1lf3qka">Shoulder</label> <input type="number" id="shoulder-load" min="1" max="5" class="svelte-1lf3qka"/> <span class="load-scale svelte-1lf3qka">/ 5</span></div> <div class="load-item svelte-1lf3qka"><label for="forearm-load" class="svelte-1lf3qka">Forearm</label> <input type="number" id="forearm-load" min="1" max="5" class="svelte-1lf3qka"/> <span class="load-scale svelte-1lf3qka">/ 5</span></div></div> <h4 class="mt-4 svelte-1lf3qka">Grip Metrics</h4> <div class="load-metrics svelte-1lf3qka"><div class="load-item svelte-1lf3qka"><label for="open-grip" class="svelte-1lf3qka">Open</label> <input type="number" id="open-grip" min="1" max="5" class="svelte-1lf3qka"/> <span class="load-scale svelte-1lf3qka">/ 5</span></div> <div class="load-item svelte-1lf3qka"><label for="crimp-grip" class="svelte-1lf3qka">Crimp</label> <input type="number" id="crimp-grip" min="1" max="5" class="svelte-1lf3qka"/> <span class="load-scale svelte-1lf3qka">/ 5</span></div> <div class="load-item svelte-1lf3qka"><label for="pinch-grip" class="svelte-1lf3qka">Pinch</label> <input type="number" id="pinch-grip" min="1" max="5" class="svelte-1lf3qka"/> <span class="load-scale svelte-1lf3qka">/ 5</span></div> <div class="load-item svelte-1lf3qka"><label for="sloper-grip" class="svelte-1lf3qka">Sloper</label> <input type="number" id="sloper-grip" min="1" max="5" class="svelte-1lf3qka"/> <span class="load-scale svelte-1lf3qka">/ 5</span></div> <div class="load-item svelte-1lf3qka"><label for="jug-grip" class="svelte-1lf3qka">Jug</label> <input type="number" id="jug-grip" min="1" max="5" class="svelte-1lf3qka"/> <span class="load-scale svelte-1lf3qka">/ 5</span></div></div></div> <div class="training-section svelte-1lf3qka"><h4 class="svelte-1lf3qka">Training Details</h4> <div class="training-grid svelte-1lf3qka"><div class="training-item svelte-1lf3qka"><label for="training-type" class="svelte-1lf3qka">Training Type</label> <!></div> <div class="training-item svelte-1lf3qka"><label for="difficulty" class="svelte-1lf3qka">Difficulty</label> <select id="difficulty" class="svelte-1lf3qka"></select></div> <div class="training-item svelte-1lf3qka"><label for="category" class="svelte-1lf3qka">Category</label> <!></div> <div class="training-item svelte-1lf3qka"><label for="energy-system" class="svelte-1lf3qka">Energy System</label> <!></div> <div class="training-item svelte-1lf3qka"><label for="technique-focus" class="svelte-1lf3qka">Technique Focus</label> <!></div> <div class="training-item svelte-1lf3qka"><label for="wall-angle" class="svelte-1lf3qka">Wall</label> <!></div></div></div> <div class="climbs-section svelte-1lf3qka"><h4 class="svelte-1lf3qka">Climbs</h4> <div class="table-container svelte-1lf3qka"><table class="climbs-table svelte-1lf3qka"><thead><tr><!><th class="svelte-1lf3qka">Name</th><th class="svelte-1lf3qka">Grade</th><th class="svelte-1lf3qka">Attempt</th><th class="svelte-1lf3qka">#</th><th class="svelte-1lf3qka">Notes</th><th class="svelte-1lf3qka"></th></tr></thead><tbody></tbody></table></div> <button type="button" class="add-btn svelte-1lf3qka">+ Add Climb</button></div> <div class="submit-section svelte-1lf3qka"><!> <button type="button" class="submit-btn svelte-1lf3qka"><!></button></div></div>');function Ys(Pe,xe){Pt(xe,!0);const Oe=["Rockstar Unit 3","Rockstar Unit 5","Rockstar Techno","Flashpoint Bristol","Redpoint Bristol","TCH Bristol","Other"],ce=["Bouldering","Sport","Mixed"],ue=["Onsight","Flash","Redpoint","Dogged","DNF"],N=["None","Projecting","Onsighting","Campusing","Repeaters"],z=["None","Easy","Medium","Hard","Max","Limit+"],H=["None","Strength","Strength-endurance","Power Endurance","Coordination","Slab Technique","Overhang technique","Warm-up","Power"],pe=["None","Aerobic capacity","Aerobic lactic power","Anaerobic alactic capacity","Anaerobic alactic power","Anaerobic power","Anaerobic lactic capacity"],Ie=["None","Trusting feet","Double-clutch","Standing on volumes","Deadpointing","Flagging","Swapping feet","Edging","Smearing","Matching","Backstepping","Drop Knee","Stemming","Bridging","Laybacking","Mantling","Kneebar","Dyno","Pogo","Coordination Moves","Gastoning","Underclinging","Compressing","Heel Hook","Toe Hook","Bicycle"],Q=["None","Overhang","Slab","Roof","Moon Board","Kilter Board","Beast","Circuit Board"],F=["V0-","4-","V0","4","V0+","4+","V1","5","V2","5+","V3","6A","V4","6B","V5","6C","V6","7A","V7","7A+","V8","7B","7B+","V9","7C","V10","7C+","V11","8A","V12","8A+","V13","8B","V14","8B+","V15","8C","V16","8C+","V17","9A"].map(i=>i.toLowerCase());let j=v(null),A=v(Ce(new Date().toISOString().split("T")[0])),q=v(""),T=v(""),P=v(Ce(["None"])),Ne=v("None"),we=v(Ce(["None"])),h=v(Ce(["None"])),E=v(Ce(["None"])),U=v(Ce(["None"])),te=v(3),V=v(3),M=v(3),fe=v(3),S=v(3),f=v(3),g=v(3),L=v(3),x=v(Ce([{isSport:!1,name:"",grade:"",attemptType:"Flash",attemptsNum:1,notes:""}])),Y=v(!1);function se(){e(q)==="Other"&&(t(Y,!0),t(q,""))}function I(){t(Y,!1),t(q,"")}function G(){t(x,[...e(x),{isSport:!1,name:"",grade:"",attemptType:"Flash",attemptsNum:1,notes:""}],!0)}function ye(i){t(x,e(x).filter((c,w)=>w!==i),!0)}function Ae(i,c){e(x)[i].attemptType=c,(c==="Flash"||c==="Onsight")&&(e(x)[i].attemptsNum=1)}function $e(i){t(j,i,!0)}function Le(){t(j,null)}let J=Ot(()=>e(T)==="Mixed");function _e(i){return e(T)==="Sport"?!0:e(T)==="Bouldering"?!1:i.isSport}function be(i){return i.trim()?F.includes(i.trim().toLowerCase()):!0}let Z=v("idle"),B=v("");function le(){return e(q)?e(T)?e(x).filter(c=>c.grade.trim()&&!be(c.grade)).length>0?"Please fix invalid grades":null:"Please select a climbing type":"Please select a location"}async function ne(){const i=le();if(i){t(Z,"error"),t(B,i,!0);return}t(Z,"saving");try{const c=e(x).map(ae=>({...ae,isSport:_e(ae)})),w={date:e(A),location:e(q),customLocation:e(Y)?e(q):void 0,climbingType:e(T),trainingTypes:e(P),difficulty:e(Ne),categories:e(we),energySystems:e(h),techniqueFocuses:e(E),wallAngles:e(U),fingerLoad:e(te),shoulderLoad:e(V),forearmLoad:e(M),openGrip:e(fe),crimpGrip:e(S),pinchGrip:e(f),sloperGrip:e(g),jugGrip:e(L),climbs:c},de=ks(w);if(Xt()){const ae=await Cs(w);ae.ok?(rs(de.id),t(Z,"success"),t(B,"Session saved and synced!")):(os(de.id),t(Z,"success"),t(B,"Saved locally. Sync failed: "+(ae.error||"Unknown error")))}else t(Z,"success"),t(B,"Saved locally. Will sync when online.");window.dispatchEvent(new CustomEvent("session-saved")),setTimeout(()=>{Se()},2e3)}catch(c){t(Z,"error"),t(B,"Failed to save session"),console.error("Save error:",c)}}function Se(){t(A,new Date().toISOString().split("T")[0],!0),t(q,""),t(Y,!1),t(T,""),t(P,["None"],!0),t(Ne,"None"),t(we,["None"],!0),t(h,["None"],!0),t(E,["None"],!0),t(U,["None"],!0),t(te,3),t(V,3),t(M,3),t(fe,3),t(S,3),t(f,3),t(g,3),t(L,3),t(x,[{isSport:!1,name:"",grade:"",attemptType:"Flash",attemptsNum:1,notes:""}],!0),t(Z,"idle"),t(B,"")}var K=Qs(),ke=a(l(K),2),me=l(ke),Ge=a(l(me),2);y(Ge),s(me);var Ze=a(me,2),st=a(l(Ze),2);{var at=i=>{var c=Es(),w=l(c);y(w);var de=a(w,2);de.__click=I,s(c),b(w,()=>e(q),ae=>t(q,ae)),o(i,c)},d=i=>{var c=Ms();c.__change=se;var w=l(c);w.value=w.__value="";var de=a(w);re(de,17,()=>Oe,ie,(ae,Re)=>{var r=Rs(),n=l(r,!0);s(r);var _={};C(()=>{$(n,e(Re)),_!==(_=e(Re))&&(r.value=(r.__value=e(Re))??"")}),o(ae,r)}),s(c),We(c,()=>e(q),ae=>t(q,ae)),o(i,c)};k(st,i=>{e(Y)?i(at):i(d,!1)})}s(Ze),s(ke);var p=a(ke,2),m=a(l(p),2),O=l(m);O.value=O.__value="";var oe=a(O);re(oe,17,()=>ce,ie,(i,c)=>{var w=Ps(),de=l(w,!0);s(w);var ae={};C(()=>{$(de,e(c)),ae!==(ae=e(c))&&(w.value=(w.__value=e(c))??"")}),o(i,w)}),s(m),s(p);var Te=a(p,2),He=a(l(Te),2),ut=l(He),yt=a(l(ut),2);y(yt),he(2),s(ut);var lt=a(ut,2),rt=a(l(lt),2);y(rt),he(2),s(lt);var pt=a(lt,2),jt=a(l(pt),2);y(jt),he(2),s(pt),s(He);var Be=a(He,4),qe=l(Be),ft=a(l(qe),2);y(ft),he(2),s(qe);var ot=a(qe,2),it=a(l(ot),2);y(it),he(2),s(ot);var _t=a(ot,2),mt=a(l(_t),2);y(mt),he(2),s(_t);var De=a(_t,2),bt=a(l(De),2);y(bt),he(2),s(De);var nt=a(De,2),Ct=a(l(nt),2);y(Ct),he(2),s(nt),s(Be),s(Te);var gt=a(Te,2),Nt=a(l(gt),2),Xe=l(Nt),Tt=a(l(Xe),2);ht(Tt,{get options(){return N},get selected(){return e(P)},placeholder:"Select types...",onChange:i=>t(P,i,!0)}),s(Xe);var vt=a(Xe,2),St=a(l(vt),2);re(St,21,()=>z,ie,(i,c)=>{var w=Is(),de=l(w,!0);s(w);var ae={};C(()=>{$(de,e(c)),ae!==(ae=e(c))&&(w.value=(w.__value=e(c))??"")}),o(i,w)}),s(St),s(vt);var ve=a(vt,2),Ee=a(l(ve),2);ht(Ee,{get options(){return H},get selected(){return e(we)},placeholder:"Select categories...",onChange:i=>t(we,i,!0)}),s(ve);var je=a(ve,2),Vt=a(l(je),2);ht(Vt,{get options(){return pe},get selected(){return e(h)},placeholder:"Select systems...",onChange:i=>t(h,i,!0)}),s(je);var dt=a(je,2),is=a(l(dt),2);ht(is,{get options(){return Ie},get selected(){return e(E)},placeholder:"Select focus...",onChange:i=>t(E,i,!0)}),s(dt);var At=a(dt,2),zt=a(l(At),2);ht(zt,{get options(){return Q},get selected(){return e(U)},placeholder:"Select angles...",onChange:i=>t(U,i,!0)}),s(At),s(Nt),s(gt);var Ft=a(gt,2),Ut=a(l(Ft),2),Lt=l(Ut),Wt=l(Lt),Ht=l(Wt),ns=l(Ht);{var Jt=i=>{var c=$s();o(i,c)};k(ns,i=>{e(J)&&i(Jt)})}he(6),s(Ht),s(Wt);var Gt=a(Wt);re(Gt,21,()=>e(x),ie,(i,c,w)=>{var de=Js(),ae=l(de);{var Re=R=>{var Ve=zs(),Ue=l(Ve);y(Ue),s(Ve),hs(Ue,()=>e(c).isSport,Mt=>e(c).isSport=Mt),o(R,Ve)};k(ae,R=>{e(J)&&R(Re)})}var r=a(ae),n=l(r);y(n),s(r);var _=a(r),X=l(_);y(X);let W;var Je=a(X,2);{var et=R=>{var Ve=Us();o(R,Ve)};k(Je,R=>{be(e(c).grade)||R(et)})}s(_);var Me=a(_),ge=l(Me);ge.__change=R=>Ae(w,R.target.value),re(ge,21,()=>ue,ie,(R,Ve)=>{var Ue=Ws(),Mt=l(Ue,!0);s(Ue);var as={};C(()=>{$(Mt,e(Ve)),as!==(as=e(Ve))&&(Ue.value=(Ue.__value=e(Ve))??"")}),o(R,Ue)}),s(ge);var ze;us(ge),s(Me);var kt=a(Me),qt=l(kt);y(qt),s(kt);var Et=a(kt);let Rt;var Ke=l(Et);ms(Ke),s(Et);var Qt=a(Et),Yt=l(Qt);{var Zt=R=>{var Ve=Hs();Ve.__click=()=>ye(w),o(R,Ve)};k(Yt,R=>{e(x).length>1&&R(Zt)})}s(Qt),s(de),C(R=>{W=Ye(X,1,"grade-input svelte-1lf3qka",null,W,R),ze!==(ze=e(c).attemptType)&&(ge.value=(ge.__value=e(c).attemptType)??"",ps(ge,e(c).attemptType)),qt.disabled=e(c).attemptType==="Flash",Rt=Ye(Et,1,"notes-cell svelte-1lf3qka",null,Rt,{expanded:e(j)===w})},[()=>({invalid:!be(e(c).grade)})]),b(n,()=>e(c).name,R=>e(c).name=R),b(X,()=>e(c).grade,R=>e(c).grade=R),b(qt,()=>e(c).attemptsNum,R=>e(c).attemptsNum=R),ls("focus",Ke,()=>$e(w)),ls("blur",Ke,Le),b(Ke,()=>e(c).notes,R=>e(c).notes=R),o(i,de)}),s(Gt),s(Lt),s(Ut);var es=a(Ut,2);es.__click=G,s(Ft);var Bt=a(Ft,2),Kt=l(Bt);{var vs=i=>{var c=Ks();let w;var de=l(c,!0);s(c),C(()=>{w=Ye(c,1,"save-message svelte-1lf3qka",null,w,{success:e(Z)==="success",error:e(Z)==="error"}),$(de,e(B))}),o(i,c)};k(Kt,i=>{e(B)&&i(vs)})}var Dt=a(Kt,2);Dt.__click=ne;var ts=l(Dt);{var ds=i=>{var c=Fe("Saving...");o(i,c)},ss=i=>{var c=ct(),w=tt(c);{var de=Re=>{var r=Fe("‚úì Saved!");o(Re,r)},ae=Re=>{var r=Fe("Save Session");o(Re,r)};k(w,Re=>{e(Z)==="success"?Re(de):Re(ae,!1)},!0)}o(i,c)};k(ts,i=>{e(Z)==="saving"?i(ds):i(ss,!1)})}s(Dt),s(Bt),s(K),C(()=>Dt.disabled=e(Z)==="saving"),b(Ge,()=>e(A),i=>t(A,i)),We(m,()=>e(T),i=>t(T,i)),b(yt,()=>e(te),i=>t(te,i)),b(rt,()=>e(V),i=>t(V,i)),b(jt,()=>e(M),i=>t(M,i)),b(ft,()=>e(fe),i=>t(fe,i)),b(it,()=>e(S),i=>t(S,i)),b(mt,()=>e(f),i=>t(f,i)),b(bt,()=>e(g),i=>t(g,i)),b(Ct,()=>e(L),i=>t(L,i)),We(St,()=>e(Ne),i=>t(Ne,i)),o(Pe,K),It()}$t(["click","change"]);var Zs=u("<option> </option>"),Xs=u('<div class="input-with-action svelte-15o2ys1"><input type="text" id="crag-manual" placeholder="Enter custom crag name..." class="flat-left svelte-15o2ys1"/> <button type="button" class="action-btn flat-right svelte-15o2ys1" title="Back to list">‚úï</button></div>'),ea=u("<option> </option>"),ta=u("<option>Other (Manual Entry)</option>"),sa=u('<select id="crag" class="svelte-15o2ys1"><option disabled> </option><!><!></select>'),aa=u("<option> </option>"),la=u("<option> </option>"),ra=u('<th class="svelte-15o2ys1">Sport?</th>'),oa=u('<td class="center svelte-15o2ys1"><input type="checkbox" class="svelte-15o2ys1"/></td>'),ia=u('<span class="grade-error svelte-15o2ys1">Invalid</span>'),na=u("<option> </option>"),va=u('<button type="button" class="remove-btn svelte-15o2ys1">‚úï</button>'),da=u('<tr><!><td class="svelte-15o2ys1"><input type="text" placeholder="Route name..." class="svelte-15o2ys1"/></td><td class="svelte-15o2ys1"><input type="text" placeholder="V3"/> <!></td><td class="svelte-15o2ys1"><select class="svelte-15o2ys1"></select></td><td class="svelte-15o2ys1"><input type="number" min="1" class="svelte-15o2ys1"/></td><td><textarea placeholder="Notes..." class="svelte-15o2ys1"></textarea></td><td class="center svelte-15o2ys1"><!></td></tr>'),ca=u("<div> </div>"),ua=u('<div class="form-content svelte-15o2ys1"><h3 class="svelte-15o2ys1">‚õ∞Ô∏è Outdoor Climb</h3> <div class="form-row svelte-15o2ys1"><div class="form-group svelte-15o2ys1"><label for="date" class="svelte-15o2ys1">Date</label> <input type="date" id="date" class="svelte-15o2ys1"/></div> <div class="form-group svelte-15o2ys1"><label for="area" class="svelte-15o2ys1">Area</label> <select id="area" class="svelte-15o2ys1"><option disabled>Select area...</option><!></select></div></div> <div class="form-row svelte-15o2ys1"><div class="form-group svelte-15o2ys1"><label for="crag" class="svelte-15o2ys1">Crag</label> <!></div> <div class="form-group svelte-15o2ys1"><label for="sector" class="svelte-15o2ys1">Wall / Sector</label> <input type="text" id="sector" placeholder="Enter sector or wall name..." class="svelte-15o2ys1"/></div></div> <div class="form-group svelte-15o2ys1"><label for="climbing-type" class="svelte-15o2ys1">Climbing Type</label> <select id="climbing-type" class="svelte-15o2ys1"><option disabled>Select type...</option><!></select></div> <div class="load-section svelte-15o2ys1"><h4 class="svelte-15o2ys1">Load Metrics</h4> <div class="load-metrics svelte-15o2ys1"><div class="load-item svelte-15o2ys1"><label for="finger-load" class="svelte-15o2ys1">Finger</label> <input type="number" id="finger-load" min="1" max="5" class="svelte-15o2ys1"/> <span class="load-scale svelte-15o2ys1">/ 5</span></div> <div class="load-item svelte-15o2ys1"><label for="shoulder-load" class="svelte-15o2ys1">Shoulder</label> <input type="number" id="shoulder-load" min="1" max="5" class="svelte-15o2ys1"/> <span class="load-scale svelte-15o2ys1">/ 5</span></div> <div class="load-item svelte-15o2ys1"><label for="forearm-load" class="svelte-15o2ys1">Forearm</label> <input type="number" id="forearm-load" min="1" max="5" class="svelte-15o2ys1"/> <span class="load-scale svelte-15o2ys1">/ 5</span></div></div> <h4 class="mt-4 svelte-15o2ys1">Grip Metrics</h4> <div class="load-metrics svelte-15o2ys1"><div class="load-item svelte-15o2ys1"><label for="open-grip" class="svelte-15o2ys1">Open</label> <input type="number" id="open-grip" min="1" max="5" class="svelte-15o2ys1"/> <span class="load-scale svelte-15o2ys1">/ 5</span></div> <div class="load-item svelte-15o2ys1"><label for="crimp-grip" class="svelte-15o2ys1">Crimp</label> <input type="number" id="crimp-grip" min="1" max="5" class="svelte-15o2ys1"/> <span class="load-scale svelte-15o2ys1">/ 5</span></div> <div class="load-item svelte-15o2ys1"><label for="pinch-grip" class="svelte-15o2ys1">Pinch</label> <input type="number" id="pinch-grip" min="1" max="5" class="svelte-15o2ys1"/> <span class="load-scale svelte-15o2ys1">/ 5</span></div> <div class="load-item svelte-15o2ys1"><label for="sloper-grip" class="svelte-15o2ys1">Sloper</label> <input type="number" id="sloper-grip" min="1" max="5" class="svelte-15o2ys1"/> <span class="load-scale svelte-15o2ys1">/ 5</span></div> <div class="load-item svelte-15o2ys1"><label for="jug-grip" class="svelte-15o2ys1">Jug</label> <input type="number" id="jug-grip" min="1" max="5" class="svelte-15o2ys1"/> <span class="load-scale svelte-15o2ys1">/ 5</span></div></div></div> <div class="training-section svelte-15o2ys1"><h4 class="svelte-15o2ys1">Training Details</h4> <div class="training-grid svelte-15o2ys1"><div class="training-item svelte-15o2ys1"><label for="training-type" class="svelte-15o2ys1">Training Type</label> <!></div> <div class="training-item svelte-15o2ys1"><label for="difficulty" class="svelte-15o2ys1">Difficulty</label> <select id="difficulty" class="svelte-15o2ys1"></select></div> <div class="training-item svelte-15o2ys1"><label for="category" class="svelte-15o2ys1">Category</label> <!></div> <div class="training-item svelte-15o2ys1"><label for="energy-system" class="svelte-15o2ys1">Energy System</label> <!></div> <div class="training-item svelte-15o2ys1"><label for="technique-focus" class="svelte-15o2ys1">Technique Focus</label> <!></div></div></div> <div class="climbs-section svelte-15o2ys1"><h4 class="svelte-15o2ys1">Climbs</h4> <div class="table-container svelte-15o2ys1"><table class="climbs-table svelte-15o2ys1"><thead><tr><!><th class="svelte-15o2ys1">Name</th><th class="svelte-15o2ys1">Grade</th><th class="svelte-15o2ys1">Attempt</th><th class="svelte-15o2ys1">#</th><th class="svelte-15o2ys1">Notes</th><th class="svelte-15o2ys1"></th></tr></thead><tbody></tbody></table></div> <button type="button" class="add-btn svelte-15o2ys1">+ Add Climb</button></div> <div class="submit-section svelte-15o2ys1"><!> <button type="button" class="submit-btn svelte-15o2ys1"><!></button></div></div>');function pa(Pe,xe){Pt(xe,!0);const Oe=Ns(),ce=["Boulder","Sport","Trad"],ue=["Onsight","Flash","Redpoint","Dogged","DNF"],N=["None","Projecting","Onsighting","Campusing","Repeaters"],z=["None","Easy","Medium","Hard","Max","Limit+"],H=["None","Technique","Strength","Strength-endurance","Warm-up","Power"],pe=["None","Aerobic capacity","Aerobic lactic power","Anaerobic alactic capacity","Anaerobic alactic power","Anaerobic power","Anaerobic lactic capacity"],Ie=["None","Double-clutch","Standing on volumes","Trusting feet"],D=["V0-","4-","V0","4","V0+","4+","V1","5","V2","5+","V3","6A","V4","6B","V5","6C","V6","7A","V7","7A+","V8","7B","7B+","V9","7C","V10","7C+","V11","8A","V12","8A+","V13","8B","V14","8B+","V15","8C","V16","8C+","V17","9A"].map(r=>r.toLowerCase());let F=v(null),j=v(Ce(new Date().toISOString().split("T")[0])),A=v(""),q=v(""),T=v(""),P=v(""),Ne=v(Ce(["None"])),we=v("None"),h=v(Ce(["None"])),E=v(Ce(["None"])),U=v(Ce(["None"])),te=v(3),V=v(3),M=v(3),fe=v(3),S=v(3),f=v(3),g=v(3),L=v(3),x=v(Ce([{isSport:!1,name:"",grade:"",attemptType:"Flash",attemptsNum:1,notes:""}])),Y=Ot(()=>e(A)?Fs(e(A)):[]),se=v(!1);gs(()=>{e(A)&&(t(q,""),t(se,!1))});function I(){e(q)==="Other"&&(t(se,!0),t(q,""))}function G(){t(se,!1),t(q,"")}function ye(){t(x,[...e(x),{isSport:!1,name:"",grade:"",attemptType:"Flash",attemptsNum:1,notes:""}],!0)}function Ae(r){t(x,e(x).filter((n,_)=>_!==r),!0)}function $e(r,n){e(x)[r].attemptType=n,(n==="Flash"||n==="Onsight")&&(e(x)[r].attemptsNum=1)}function Le(r){t(F,r,!0)}function J(){t(F,null)}let _e=Ot(()=>e(P)==="Trad");function be(r){return e(P)==="Sport"?!0:e(P)==="Boulder"?!1:r.isSport}function Z(r){return r.trim()?D.includes(r.trim().toLowerCase()):!0}let B=v("idle"),le=v("");function ne(){return e(A)?e(q)?e(P)?e(x).filter(n=>n.grade.trim()&&!Z(n.grade)).length>0?"Please fix invalid grades":null:"Please select a climbing type":"Please select a crag":"Please select an area"}async function Se(){const r=ne();if(r){t(B,"error"),t(le,r,!0);return}t(B,"saving");try{const n=e(x).map(W=>({...W,isSport:be(W)})),_={date:e(j),area:e(A),crag:e(q),sector:e(T)||void 0,climbingType:e(P),trainingTypes:e(Ne),difficulty:e(we),categories:e(h),energySystems:e(E),techniqueFocuses:e(U),fingerLoad:e(te),shoulderLoad:e(V),forearmLoad:e(M),openGrip:e(fe),crimpGrip:e(S),pinchGrip:e(f),sloperGrip:e(g),jugGrip:e(L),climbs:n},X=qs(_);if(Xt()){const W=await Ts(_);W.ok?(rs(X.id),t(B,"success"),t(le,"Session saved and synced!")):(os(X.id),t(B,"success"),t(le,"Saved locally. Sync failed: "+(W.error||"Unknown error")))}else t(B,"success"),t(le,"Saved locally. Will sync when online.");window.dispatchEvent(new CustomEvent("session-saved")),setTimeout(()=>{K()},2e3)}catch(n){t(B,"error"),t(le,"Failed to save session"),console.error("Save error:",n)}}function K(){t(j,new Date().toISOString().split("T")[0],!0),t(A,""),t(q,""),t(T,""),t(P,""),t(Ne,["None"],!0),t(we,"None"),t(h,["None"],!0),t(E,["None"],!0),t(U,["None"],!0),t(te,3),t(V,3),t(M,3),t(fe,3),t(S,3),t(f,3),t(g,3),t(L,3),t(x,[{isSport:!1,name:"",grade:"",attemptType:"Flash",attemptsNum:1,notes:""}],!0),t(B,"idle"),t(le,"")}var ke=ua(),me=a(l(ke),2),Ge=l(me),Ze=a(l(Ge),2);y(Ze),s(Ge);var st=a(Ge,2),at=a(l(st),2),d=l(at);d.value=d.__value="";var p=a(d);re(p,17,()=>Oe,ie,(r,n)=>{var _=Zs(),X=l(_,!0);s(_);var W={};C(()=>{$(X,e(n)),W!==(W=e(n))&&(_.value=(_.__value=e(n))??"")}),o(r,_)}),s(at),s(st),s(me);var m=a(me,2),O=l(m),oe=a(l(O),2);{var Te=r=>{var n=Xs(),_=l(n);y(_);var X=a(_,2);X.__click=G,s(n),b(_,()=>e(q),W=>t(q,W)),o(r,n)},He=r=>{var n=sa();n.__change=I;var _=l(n),X=l(_,!0);s(_),_.value=_.__value="";var W=a(_);re(W,17,()=>e(Y),ie,(Me,ge)=>{var ze=ea(),kt=l(ze,!0);s(ze);var qt={};C(()=>{$(kt,e(ge)),qt!==(qt=e(ge))&&(ze.value=(ze.__value=e(ge))??"")}),o(Me,ze)});var Je=a(W);{var et=Me=>{var ge=ta();ge.value=ge.__value="Other",o(Me,ge)};k(Je,Me=>{e(A)&&Me(et)})}s(n),C(()=>{n.disabled=!e(A),$(X,e(A)?"Select crag...":"Select area first...")}),We(n,()=>e(q),Me=>t(q,Me)),o(r,n)};k(oe,r=>{e(se)?r(Te):r(He,!1)})}s(O);var ut=a(O,2),yt=a(l(ut),2);y(yt),s(ut),s(m);var lt=a(m,2),rt=a(l(lt),2),pt=l(rt);pt.value=pt.__value="";var jt=a(pt);re(jt,17,()=>ce,ie,(r,n)=>{var _=aa(),X=l(_,!0);s(_);var W={};C(()=>{$(X,e(n)),W!==(W=e(n))&&(_.value=(_.__value=e(n))??"")}),o(r,_)}),s(rt),s(lt);var Be=a(lt,2),qe=a(l(Be),2),ft=l(qe),ot=a(l(ft),2);y(ot),he(2),s(ft);var it=a(ft,2),_t=a(l(it),2);y(_t),he(2),s(it);var mt=a(it,2),De=a(l(mt),2);y(De),he(2),s(mt),s(qe);var bt=a(qe,4),nt=l(bt),Ct=a(l(nt),2);y(Ct),he(2),s(nt);var gt=a(nt,2),Nt=a(l(gt),2);y(Nt),he(2),s(gt);var Xe=a(gt,2),Tt=a(l(Xe),2);y(Tt),he(2),s(Xe);var vt=a(Xe,2),St=a(l(vt),2);y(St),he(2),s(vt);var ve=a(vt,2),Ee=a(l(ve),2);y(Ee),he(2),s(ve),s(bt),s(Be);var je=a(Be,2),Vt=a(l(je),2),dt=l(Vt),is=a(l(dt),2);ht(is,{get options(){return N},get selected(){return e(Ne)},placeholder:"Select types...",onChange:r=>t(Ne,r,!0)}),s(dt);var At=a(dt,2),zt=a(l(At),2);re(zt,21,()=>z,ie,(r,n)=>{var _=la(),X=l(_,!0);s(_);var W={};C(()=>{$(X,e(n)),W!==(W=e(n))&&(_.value=(_.__value=e(n))??"")}),o(r,_)}),s(zt),s(At);var Ft=a(At,2),Ut=a(l(Ft),2);ht(Ut,{get options(){return H},get selected(){return e(h)},placeholder:"Select categories...",onChange:r=>t(h,r,!0)}),s(Ft);var Lt=a(Ft,2),Wt=a(l(Lt),2);ht(Wt,{get options(){return pe},get selected(){return e(E)},placeholder:"Select systems...",onChange:r=>t(E,r,!0)}),s(Lt);var Ht=a(Lt,2),ns=a(l(Ht),2);ht(ns,{get options(){return Ie},get selected(){return e(U)},placeholder:"Select focus...",onChange:r=>t(U,r,!0)}),s(Ht),s(Vt),s(je);var Jt=a(je,2),Gt=a(l(Jt),2),es=l(Gt),Bt=l(es),Kt=l(Bt),vs=l(Kt);{var Dt=r=>{var n=ra();o(r,n)};k(vs,r=>{e(_e)&&r(Dt)})}he(6),s(Kt),s(Bt);var ts=a(Bt);re(ts,21,()=>e(x),ie,(r,n,_)=>{var X=da(),W=l(X);{var Je=ee=>{var Qe=oa(),xt=l(Qe);y(xt),s(Qe),hs(xt,()=>e(n).isSport,cs=>e(n).isSport=cs),o(ee,Qe)};k(W,ee=>{e(_e)&&ee(Je)})}var et=a(W),Me=l(et);y(Me),s(et);var ge=a(et),ze=l(ge);y(ze);let kt;var qt=a(ze,2);{var Et=ee=>{var Qe=ia();o(ee,Qe)};k(qt,ee=>{Z(e(n).grade)||ee(Et)})}s(ge);var Rt=a(ge),Ke=l(Rt);Ke.__change=ee=>$e(_,ee.target.value),re(Ke,21,()=>ue,ie,(ee,Qe)=>{var xt=na(),cs=l(xt,!0);s(xt);var fs={};C(()=>{$(cs,e(Qe)),fs!==(fs=e(Qe))&&(xt.value=(xt.__value=e(Qe))??"")}),o(ee,xt)}),s(Ke);var Qt;us(Ke),s(Rt);var Yt=a(Rt),Zt=l(Yt);y(Zt),s(Yt);var R=a(Yt);let Ve;var Ue=l(R);ms(Ue),s(R);var Mt=a(R),as=l(Mt);{var ys=ee=>{var Qe=va();Qe.__click=()=>Ae(_),o(ee,Qe)};k(as,ee=>{e(x).length>1&&ee(ys)})}s(Mt),s(X),C(ee=>{kt=Ye(ze,1,"grade-input svelte-15o2ys1",null,kt,ee),Qt!==(Qt=e(n).attemptType)&&(Ke.value=(Ke.__value=e(n).attemptType)??"",ps(Ke,e(n).attemptType)),Zt.disabled=e(n).attemptType==="Flash",Ve=Ye(R,1,"notes-cell svelte-15o2ys1",null,Ve,{expanded:e(F)===_})},[()=>({invalid:!Z(e(n).grade)})]),b(Me,()=>e(n).name,ee=>e(n).name=ee),b(ze,()=>e(n).grade,ee=>e(n).grade=ee),b(Zt,()=>e(n).attemptsNum,ee=>e(n).attemptsNum=ee),ls("focus",Ue,()=>Le(_)),ls("blur",Ue,J),b(Ue,()=>e(n).notes,ee=>e(n).notes=ee),o(r,X)}),s(ts),s(es),s(Gt);var ds=a(Gt,2);ds.__click=ye,s(Jt);var ss=a(Jt,2),i=l(ss);{var c=r=>{var n=ca();let _;var X=l(n,!0);s(n),C(()=>{_=Ye(n,1,"save-message svelte-15o2ys1",null,_,{success:e(B)==="success",error:e(B)==="error"}),$(X,e(le))}),o(r,n)};k(i,r=>{e(le)&&r(c)})}var w=a(i,2);w.__click=Se;var de=l(w);{var ae=r=>{var n=Fe("Saving...");o(r,n)},Re=r=>{var n=ct(),_=tt(n);{var X=Je=>{var et=Fe("‚úì Saved!");o(Je,et)},W=Je=>{var et=Fe("Save Session");o(Je,et)};k(_,Je=>{e(B)==="success"?Je(X):Je(W,!1)},!0)}o(r,n)};k(de,r=>{e(B)==="saving"?r(ae):r(Re,!1)})}s(w),s(ss),s(ke),C(()=>w.disabled=e(B)==="saving"),b(Ze,()=>e(j),r=>t(j,r)),We(at,()=>e(A),r=>t(A,r)),b(yt,()=>e(T),r=>t(T,r)),We(rt,()=>e(P),r=>t(P,r)),b(ot,()=>e(te),r=>t(te,r)),b(_t,()=>e(V),r=>t(V,r)),b(De,()=>e(M),r=>t(M,r)),b(Ct,()=>e(fe),r=>t(fe,r)),b(Nt,()=>e(S),r=>t(S,r)),b(Tt,()=>e(f),r=>t(f,r)),b(St,()=>e(g),r=>t(g,r)),b(Ee,()=>e(L),r=>t(L,r)),We(zt,()=>e(we),r=>t(we,r)),o(Pe,ke),It()}$t(["click","change"]);var fa=u('<div class="form-content svelte-1w0zsmt"><h3 class="svelte-1w0zsmt">üèãÔ∏è Gym Session</h3> <p class="form-placeholder svelte-1w0zsmt">Gym session form fields will go here</p></div>');function _a(Pe){var xe=fa();o(Pe,xe)}var ma=u("<option> </option>"),ga=u("<option> </option>"),ha=u('<button class="remove-set-btn svelte-1m63nqt">‚úï</button>'),ya=u('<div class="set-row svelte-1m63nqt"><div class="input-wrap svelte-1m63nqt"><label class="svelte-1m63nqt">Weight</label> <input type="number" placeholder="0" class="svelte-1m63nqt"/></div> <div class="input-wrap svelte-1m63nqt"><label class="svelte-1m63nqt">Reps/Secs</label> <input type="number" placeholder="1" class="svelte-1m63nqt"/></div> <!></div>'),ba=u('<div class="exercise-card svelte-1m63nqt"><div class="card-header svelte-1m63nqt"><div class="header-inputs svelte-1m63nqt"><select class="svelte-1m63nqt"></select> <select class="svelte-1m63nqt"></select></div> <button class="remove-card-btn svelte-1m63nqt" title="Remove Exercise">‚úï</button></div> <div class="sets-list svelte-1m63nqt"><!> <button class="add-set-btn svelte-1m63nqt">+ Add Set</button></div> <div class="card-footer svelte-1m63nqt"><div class="meta-input svelte-1m63nqt"><label class="svelte-1m63nqt">Total Sets</label> <input type="number" readonly="" disabled class="svelte-1m63nqt"/></div> <div class="notes-input svelte-1m63nqt"><label class="svelte-1m63nqt">Notes</label> <input type="text" placeholder="Notes..." class="svelte-1m63nqt"/></div></div></div>'),Sa=u("<div> </div>"),ka=u('<div class="form-content svelte-1m63nqt"><div class="header-row svelte-1m63nqt"><h3 class="svelte-1m63nqt">ü§è Fingerboarding</h3> <button class="add-row-btn svelte-1m63nqt">+ Add Exercise</button></div> <div class="form-group date-group svelte-1m63nqt"><label for="date">Date</label> <input type="date" id="date" class="svelte-1m63nqt"/></div> <div class="cards-container svelte-1m63nqt"></div> <div class="submit-section"><!> <button type="button" class="submit-btn svelte-1m63nqt"><!></button></div></div>');function qa(Pe,xe){Pt(xe,!0);const Oe=["Max hangs","Recruitment pulls","Max pick-ups"],ce=["Full-crimp","Half-crimp","Three finger drag","Pinch","Open hand","Sloper"];let ue=v(Ce(new Date().toISOString().split("T")[0])),N=v(Ce([]));function z(){t(N,[...e(N),{id:crypto.randomUUID(),name:Oe[0],gripType:ce[1],sets:1,details:[{weight:0,reps:5}],notes:""}],!0)}gs(()=>{e(N).length===0&&z()});function H(S){t(N,e(N).filter((f,g)=>g!==S),!0)}function pe(S){const f=e(N)[S],g=f.details[f.details.length-1];f.details=[...f.details,{...g}],f.sets=f.details.length}function Ie(S,f){const g=e(N)[S];g.details.length>1&&(g.details=g.details.filter((L,x)=>x!==f),g.sets=g.details.length)}let Q=v("idle"),D=v("");async function F(){t(Q,"saving");try{const S={date:e(ue),location:"N/A",exercises:JSON.parse(JSON.stringify(e(N)))},f=xs(S);if(Xt()){const g=await Os(S);g.ok?(rs(f.id),t(Q,"success"),t(D,"Session saved and synced!")):(os(f.id),t(Q,"success"),t(D,"Saved locally. Sync failed: "+(g.error||"Unknown error")))}else t(Q,"success"),t(D,"Saved locally. Will sync when online.");window.dispatchEvent(new CustomEvent("session-saved")),setTimeout(()=>{j()},2e3)}catch(S){t(Q,"error"),t(D,"Failed to save session"),console.error("Save error:",S)}}function j(){t(ue,new Date().toISOString().split("T")[0],!0),t(N,[],!0),z(),t(Q,"idle"),t(D,"")}var A=ka(),q=l(A),T=a(l(q),2);T.__click=z,s(q);var P=a(q,2),Ne=a(l(P),2);y(Ne),s(P);var we=a(P,2);re(we,21,()=>e(N),ie,(S,f,g)=>{var L=ba(),x=l(L),Y=l(x),se=l(Y);re(se,21,()=>Oe,ie,(ne,Se)=>{var K=ma(),ke=l(K,!0);s(K);var me={};C(()=>{$(ke,e(Se)),me!==(me=e(Se))&&(K.value=(K.__value=e(Se))??"")}),o(ne,K)}),s(se);var I=a(se,2);re(I,21,()=>ce,ie,(ne,Se)=>{var K=ga(),ke=l(K,!0);s(K);var me={};C(()=>{$(ke,e(Se)),me!==(me=e(Se))&&(K.value=(K.__value=e(Se))??"")}),o(ne,K)}),s(I),s(Y);var G=a(Y,2);G.__click=()=>H(g),s(x);var ye=a(x,2),Ae=l(ye);re(Ae,17,()=>e(f).details,ie,(ne,Se,K)=>{var ke=ya(),me=l(ke),Ge=l(me);wt(Ge,"for",`weight-${g}-${K}`);var Ze=a(Ge,2);y(Ze),wt(Ze,"id",`weight-${g}-${K}`),s(me);var st=a(me,2),at=l(st);wt(at,"for",`reps-${g}-${K}`);var d=a(at,2);y(d),wt(d,"id",`reps-${g}-${K}`),s(st);var p=a(st,2);{var m=O=>{var oe=ha();oe.__click=()=>Ie(g,K),o(O,oe)};k(p,O=>{e(f).details.length>1&&O(m)})}s(ke),b(Ze,()=>e(Se).weight,O=>e(Se).weight=O),b(d,()=>e(Se).reps,O=>e(Se).reps=O),o(ne,ke)});var $e=a(Ae,2);$e.__click=()=>pe(g),s(ye);var Le=a(ye,2),J=l(Le),_e=l(J);wt(_e,"for",`total-sets-${g}`);var be=a(_e,2);y(be),wt(be,"id",`total-sets-${g}`),s(J);var Z=a(J,2),B=l(Z);wt(B,"for",`notes-${g}`);var le=a(B,2);y(le),wt(le,"id",`notes-${g}`),s(Z),s(Le),s(L),C(()=>Ss(be,e(f).sets)),We(se,()=>e(f).name,ne=>e(f).name=ne),We(I,()=>e(f).gripType,ne=>e(f).gripType=ne),b(le,()=>e(f).notes,ne=>e(f).notes=ne),o(S,L)}),s(we);var h=a(we,2),E=l(h);{var U=S=>{var f=Sa();let g;var L=l(f,!0);s(f),C(()=>{g=Ye(f,1,"save-message svelte-1m63nqt",null,g,{success:e(Q)==="success",error:e(Q)==="error"}),$(L,e(D))}),o(S,f)};k(E,S=>{e(D)&&S(U)})}var te=a(E,2);te.__click=F;var V=l(te);{var M=S=>{var f=Fe("Saving...");o(S,f)},fe=S=>{var f=ct(),g=tt(f);{var L=Y=>{var se=Fe("‚úì Saved!");o(Y,se)},x=Y=>{var se=Fe("Save Session");o(Y,se)};k(g,Y=>{e(Q)==="success"?Y(L):Y(x,!1)},!0)}o(S,f)};k(V,S=>{e(Q)==="saving"?S(M):S(fe,!1)})}s(te),s(h),s(A),C(()=>te.disabled=e(Q)==="saving"),b(Ne,()=>e(ue),S=>t(ue,S)),o(Pe,A),It()}$t(["click"]);var xa=u("<option> </option>"),wa=u('<input type="text" placeholder="Enter venue name" class="mt-2 svelte-1fje4dh"/>'),Ca=u("<option> </option>"),Na=u("<option> </option>"),Ta=u('<input type="text" placeholder="Round name" class="mt-2 svelte-1fje4dh"/>'),Fa=u('<div class="result-mode-content svelte-1fje4dh"><div class="form-group svelte-1fje4dh"><label for="position" class="svelte-1fje4dh">Final Position</label> <input type="number" id="position" placeholder="#" class="large-input svelte-1fje4dh"/></div></div>'),Oa=u("<option> </option>"),ja=u('<input type="number" min="1" class="svelte-1fje4dh"/>'),Va=u('<span class="flash-dash">-</span>'),Aa=u('<tr><td class="col-name svelte-1fje4dh"><input type="text" class="svelte-1fje4dh"/></td><td class="col-status svelte-1fje4dh"><select class="svelte-1fje4dh"></select></td><td class="col-attempt svelte-1fje4dh"><!></td><td class="col-notes svelte-1fje4dh"><input type="text" placeholder="..." class="svelte-1fje4dh"/></td><td class="col-action svelte-1fje4dh"><button class="svelte-1fje4dh">‚úï</button></td></tr>'),La=u('<div class="load-metrics-compact svelte-1fje4dh"><div class="metric svelte-1fje4dh"><label for="finger">Finger Load</label> <input type="number" id="finger" min="0" max="5" step="0.5" class="svelte-1fje4dh"/></div> <div class="metric svelte-1fje4dh"><label for="shoulder">Shoulder Load</label> <input type="number" id="shoulder" min="0" max="5" step="0.5" class="svelte-1fje4dh"/></div> <div class="metric svelte-1fje4dh"><label for="forearm">Forearm Load</label> <input type="number" id="forearm" min="0" max="5" step="0.5" class="svelte-1fje4dh"/></div></div> <div class="climbs-table-container svelte-1fje4dh"><div class="section-header svelte-1fje4dh"><h4 class="svelte-1fje4dh">Boulders / Routes</h4></div> <table class="climbs-table svelte-1fje4dh"><thead><tr><th class="svelte-1fje4dh">#</th><th class="svelte-1fje4dh">Result</th><th class="svelte-1fje4dh">Att.</th><th class="svelte-1fje4dh">Notes</th><th class="svelte-1fje4dh"></th></tr></thead><tbody></tbody></table> <button class="add-row-btn svelte-1fje4dh">+ Add Row</button></div>',1),Ga=u("<div> </div>"),Ba=u('<div class="form-content svelte-1fje4dh"><h3 class="svelte-1fje4dh">üèÜ Competition</h3> <div class="form-grid svelte-1fje4dh"><div class="form-group svelte-1fje4dh"><label for="date" class="svelte-1fje4dh">Date</label> <input type="date" id="date" class="svelte-1fje4dh"/></div> <div class="form-group svelte-1fje4dh"><label for="venue" class="svelte-1fje4dh">Venue</label> <select id="venue" class="svelte-1fje4dh"><option disabled>Select venue...</option><!></select> <!></div></div> <div class="form-group mb-4 svelte-1fje4dh"><label for="type" class="svelte-1fje4dh">Type</label> <select id="type" class="svelte-1fje4dh"></select></div> <div class="round-section svelte-1fje4dh"><div class="form-group svelte-1fje4dh"><label for="round" class="svelte-1fje4dh">Round</label> <select id="round" class="svelte-1fje4dh"></select> <!></div> <!></div> <div class="submit-section"><!> <button type="button" class="submit-btn svelte-1fje4dh"><!></button></div></div>');function Da(Pe,xe){Pt(xe,!0);const Oe=["Flashpoint Bristol","Rockstar Techno","Rockstar Unit 3","Rockstar Unit 5","Bloc","TCA","Other"],ce=["Bouldering","Lead","Speed"],ue=["Qualifiers","Semi-Finals","Finals","Result","Other"],N=["Flash","Top","Zone","Attempt"];let z=v(Ce(new Date().toISOString().split("T")[0])),H=v(""),pe=v(""),Ie=v("Bouldering"),Q=v(4),D=v(4),F=v(4),j=v("Qualifiers"),A=v(""),q=v(null),T=v(Ce([{name:"#1",status:"Flash",attemptCount:1,notes:""}])),P=Ot(()=>e(j)==="Result"),Ne=Ot(()=>e(H)==="Other"),we=Ot(()=>e(j)==="Other"),h=Ot(()=>e(j)==="Other"?e(A):e(j));function E(){const d=e(T).length+1;t(T,[...e(T),{name:`#${d}`,status:"Flash",attemptCount:1,notes:""}],!0)}function U(d){e(T).length>1?t(T,e(T).filter((p,m)=>m!==d),!0):e(T)[0]={name:"#1",status:"Flash",attemptCount:1,notes:""}}function te(d,p){e(T)[d].status=p,p==="Flash"&&(e(T)[d].attemptCount=1)}let V=v("idle"),M=v("");async function fe(){if(!e(H)||e(H)==="Other"&&!e(pe)){t(V,"error"),t(M,"Please specify a venue");return}t(V,"saving");try{const d={name:e(h),position:e(P)?e(q):void 0,climbs:e(P)?void 0:JSON.parse(JSON.stringify(e(T)))},p={date:e(z),venue:e(H)==="Other"?e(pe):e(H),customVenue:e(H)==="Other"?e(pe):void 0,type:e(Ie),fingerLoad:e(P)?void 0:e(Q),shoulderLoad:e(P)?void 0:e(D),forearmLoad:e(P)?void 0:e(F),rounds:[d]},m=ws(p);if(Xt()){const O=await js(p);O.ok?(rs(m.id),t(V,"success"),t(M,"Competition saved and synced!")):(os(m.id),t(V,"success"),t(M,"Saved locally. Sync failed: "+(O.error||"Unknown error")))}else t(V,"success"),t(M,"Saved locally. Will sync when online.");window.dispatchEvent(new CustomEvent("session-saved")),setTimeout(()=>{S()},2e3)}catch(d){t(V,"error"),t(M,"Failed to save session"),console.error("Save error:",d)}}function S(){t(z,new Date().toISOString().split("T")[0],!0),t(H,""),t(pe,""),t(q,null),t(T,[{name:"#1",status:"Flash",attemptCount:1,notes:""}],!0),t(V,"idle"),t(M,"")}var f=Ba(),g=a(l(f),2),L=l(g),x=a(l(L),2);y(x),s(L);var Y=a(L,2),se=a(l(Y),2),I=l(se);I.value=I.__value="";var G=a(I);re(G,17,()=>Oe,ie,(d,p)=>{var m=xa(),O=l(m,!0);s(m);var oe={};C(()=>{$(O,e(p)),oe!==(oe=e(p))&&(m.value=(m.__value=e(p))??"")}),o(d,m)}),s(se);var ye=a(se,2);{var Ae=d=>{var p=wa();y(p),b(p,()=>e(pe),m=>t(pe,m)),o(d,p)};k(ye,d=>{e(Ne)&&d(Ae)})}s(Y),s(g);var $e=a(g,2),Le=a(l($e),2);re(Le,21,()=>ce,ie,(d,p)=>{var m=Ca(),O=l(m,!0);s(m);var oe={};C(()=>{$(O,e(p)),oe!==(oe=e(p))&&(m.value=(m.__value=e(p))??"")}),o(d,m)}),s(Le),s($e);var J=a($e,2),_e=l(J),be=a(l(_e),2);re(be,21,()=>ue,ie,(d,p)=>{var m=Na(),O=l(m,!0);s(m);var oe={};C(()=>{$(O,e(p)),oe!==(oe=e(p))&&(m.value=(m.__value=e(p))??"")}),o(d,m)}),s(be);var Z=a(be,2);{var B=d=>{var p=Ta();y(p),b(p,()=>e(A),m=>t(A,m)),o(d,p)};k(Z,d=>{e(we)&&d(B)})}s(_e);var le=a(_e,2);{var ne=d=>{var p=Fa(),m=l(p),O=a(l(m),2);y(O),s(m),s(p),b(O,()=>e(q),oe=>t(q,oe)),o(d,p)},Se=d=>{var p=La(),m=tt(p),O=l(m),oe=a(l(O),2);y(oe),s(O);var Te=a(O,2),He=a(l(Te),2);y(He),s(Te);var ut=a(Te,2),yt=a(l(ut),2);y(yt),s(ut),s(m);var lt=a(m,2),rt=a(l(lt),2),pt=a(l(rt));re(pt,21,()=>e(T),ie,(Be,qe,ft)=>{var ot=Aa(),it=l(ot),_t=l(it);y(_t),s(it);var mt=a(it),De=l(mt);De.__change=ve=>te(ft,ve.target.value),re(De,21,()=>N,ie,(ve,Ee)=>{var je=Oa(),Vt=l(je,!0);s(je);var dt={};C(()=>{$(Vt,e(Ee)),dt!==(dt=e(Ee))&&(je.value=(je.__value=e(Ee))??"")}),o(ve,je)}),s(De);var bt;us(De),s(mt);var nt=a(mt),Ct=l(nt);{var gt=ve=>{var Ee=ja();y(Ee),b(Ee,()=>e(qe).attemptCount,je=>e(qe).attemptCount=je),o(ve,Ee)},Nt=ve=>{var Ee=Va();o(ve,Ee)};k(Ct,ve=>{e(qe).status!=="Flash"?ve(gt):ve(Nt,!1)})}s(nt);var Xe=a(nt),Tt=l(Xe);y(Tt),s(Xe);var vt=a(Xe),St=l(vt);St.__click=()=>U(ft),s(vt),s(ot),C(()=>{bt!==(bt=e(qe).status)&&(De.value=(De.__value=e(qe).status)??"",ps(De,e(qe).status))}),b(_t,()=>e(qe).name,ve=>e(qe).name=ve),b(Tt,()=>e(qe).notes,ve=>e(qe).notes=ve),o(Be,ot)}),s(pt),s(rt);var jt=a(rt,2);jt.__click=E,s(lt),b(oe,()=>e(Q),Be=>t(Q,Be)),b(He,()=>e(D),Be=>t(D,Be)),b(yt,()=>e(F),Be=>t(F,Be)),o(d,p)};k(le,d=>{e(P)?d(ne):d(Se,!1)})}s(J);var K=a(J,2),ke=l(K);{var me=d=>{var p=Ga();let m;var O=l(p,!0);s(p),C(()=>{m=Ye(p,1,"save-message svelte-1fje4dh",null,m,{success:e(V)==="success",error:e(V)==="error"}),$(O,e(M))}),o(d,p)};k(ke,d=>{e(M)&&d(me)})}var Ge=a(ke,2);Ge.__click=fe;var Ze=l(Ge);{var st=d=>{var p=Fe("Saving...");o(d,p)},at=d=>{var p=ct(),m=tt(p);{var O=Te=>{var He=Fe("‚úì Saved!");o(Te,He)},oe=Te=>{var He=Fe("Save Session");o(Te,He)};k(m,Te=>{e(V)==="success"?Te(O):Te(oe,!1)},!0)}o(d,p)};k(Ze,d=>{e(V)==="saving"?d(st):d(at,!1)})}s(Ge),s(K),s(f),C(()=>Ge.disabled=e(V)==="saving"),b(x,()=>e(z),d=>t(z,d)),We(se,()=>e(H),d=>t(H,d)),We(Le,()=>e(Ie),d=>t(Ie,d)),We(be,()=>e(j),d=>t(j,d)),o(Pe,f),It()}$t(["change","click"]);var Ea=u('<span class="spinner svelte-b2zgdd"></span> Syncing...',1),Ra=u("<button><!></button>"),Ma=u("<div> </div>"),Pa=u('<div><div class="sync-info svelte-b2zgdd"><span class="sync-icon svelte-b2zgdd"> </span> <span class="sync-text svelte-b2zgdd"><!></span></div> <!> <!></div>'),Ia=u("<option> </option>"),$a=u('<div class="form-container svelte-b2zgdd"><!></div>'),za=u('<div class="page svelte-b2zgdd"><div class="page-header svelte-b2zgdd"><h1 class="svelte-b2zgdd">üìù Log Data</h1> <p class="subtitle svelte-b2zgdd">Record your training sessions</p></div> <!> <div class="content-card svelte-b2zgdd"><div class="form-group svelte-b2zgdd"><label for="activity-type" class="svelte-b2zgdd">Activity Type</label> <select id="activity-type" class="svelte-b2zgdd"><option disabled>Select an activity...</option><!></select></div> <!></div></div>');function tl(Pe,xe){Pt(xe,!0);const Oe=[{value:"indoor_climb",label:"Indoor Climb",icon:"üßó"},{value:"outdoor_climb",label:"Outdoor Climb",icon:"‚õ∞Ô∏è"},{value:"gym_session",label:"Gym Session",icon:"üèãÔ∏è"},{value:"fingerboarding",label:"Fingerboarding",icon:"ü§è"},{value:"competition",label:"Competition",icon:"üèÜ"}];let ce=v(""),ue=v(0),N=v("idle"),z=v(""),H=v(!0);bs(()=>{pe(),t(H,Xt(),!0);const h=()=>{t(H,!0),pe()},E=()=>{t(H,!1)},U=()=>{pe()};return window.addEventListener("online",h),window.addEventListener("offline",E),window.addEventListener("session-saved",U),()=>{window.removeEventListener("online",h),window.removeEventListener("offline",E),window.removeEventListener("session-saved",U)}});function pe(){t(ue,Vs(),!0)}async function Ie(){if(!e(H)){t(N,"error"),t(z,"No network connection");return}t(N,"syncing"),t(z,"");try{const h=await As();h.failed===0&&h.success>0?(t(N,"success"),t(z,`Synced ${h.success} session${h.success>1?"s":""}!`)):h.failed>0&&h.success>0?(t(N,"error"),t(z,`Synced ${h.success}, failed ${h.failed}`)):h.failed>0?(t(N,"error"),t(z,`Failed to sync ${h.failed} session${h.failed>1?"s":""}`)):(t(N,"idle"),t(z,"")),pe(),e(N)==="success"&&setTimeout(()=>{t(N,"idle"),t(z,"")},3e3)}catch(h){t(N,"error"),t(z,"Sync failed"),console.error("Sync error:",h)}}var Q=za(),D=a(l(Q),2);{var F=h=>{var E=Pa();let U;var te=l(E),V=l(te),M=l(V,!0);s(V);var fe=a(V,2),S=l(fe);{var f=I=>{var G=Fe();C(()=>$(G,`${e(ue)??""} session${e(ue)>1?"s":""} waiting to sync`)),o(I,G)},g=I=>{var G=Fe();C(()=>$(G,`Offline - ${e(ue)??""} session${e(ue)>1?"s":""} saved locally`)),o(I,G)};k(S,I=>{e(H)?I(f):I(g,!1)})}s(fe),s(te);var L=a(te,2);{var x=I=>{var G=Ra();let ye;G.__click=Ie;var Ae=l(G);{var $e=J=>{var _e=Ea();he(),o(J,_e)},Le=J=>{var _e=ct(),be=tt(_e);{var Z=le=>{var ne=Fe("‚úì Synced!");o(le,ne)},B=le=>{var ne=Fe("Sync Now");o(le,ne)};k(be,le=>{e(N)==="success"?le(Z):le(B,!1)},!0)}o(J,_e)};k(Ae,J=>{e(N)==="syncing"?J($e):J(Le,!1)})}s(G),C(()=>{ye=Ye(G,1,"sync-btn svelte-b2zgdd",null,ye,{syncing:e(N)==="syncing"}),G.disabled=e(N)==="syncing"}),o(I,G)};k(L,I=>{e(H)&&I(x)})}var Y=a(L,2);{var se=I=>{var G=Ma();let ye;var Ae=l(G,!0);s(G),C(()=>{ye=Ye(G,1,"sync-message svelte-b2zgdd",null,ye,{error:e(N)==="error",success:e(N)==="success"}),$(Ae,e(z))}),o(I,G)};k(Y,I=>{e(z)&&I(se)})}s(E),C(()=>{U=Ye(E,1,"sync-banner svelte-b2zgdd",null,U,{offline:!e(H)}),$(M,e(H)?"üîÑ":"üì¥")}),o(h,E)};k(D,h=>{e(ue)>0&&h(F)})}var j=a(D,2),A=l(j),q=a(l(A),2),T=l(q);T.value=T.__value="";var P=a(T);re(P,17,()=>Oe,h=>h.value,(h,E)=>{var U=Ia(),te=l(U);s(U);var V={};C(()=>{$(te,`${e(E).icon??""} ${e(E).label??""}`),V!==(V=e(E).value)&&(U.value=(U.__value=e(E).value)??"")}),o(h,U)}),s(q),s(A);var Ne=a(A,2);{var we=h=>{var E=$a(),U=l(E);{var te=M=>{Ys(M,{})},V=M=>{var fe=ct(),S=tt(fe);{var f=L=>{pa(L,{})},g=L=>{var x=ct(),Y=tt(x);{var se=G=>{_a(G)},I=G=>{var ye=ct(),Ae=tt(ye);{var $e=J=>{qa(J,{})},Le=J=>{var _e=ct(),be=tt(_e);{var Z=B=>{Da(B,{})};k(be,B=>{e(ce)==="competition"&&B(Z)},!0)}o(J,_e)};k(Ae,J=>{e(ce)==="fingerboarding"?J($e):J(Le,!1)},!0)}o(G,ye)};k(Y,G=>{e(ce)==="gym_session"?G(se):G(I,!1)},!0)}o(L,x)};k(S,L=>{e(ce)==="outdoor_climb"?L(f):L(g,!1)},!0)}o(M,fe)};k(U,M=>{e(ce)==="indoor_climb"?M(te):M(V,!1)})}s(E),o(h,E)};k(Ne,h=>{e(ce)&&h(we)})}s(j),s(Q),We(q,()=>e(ce),h=>t(ce,h)),o(Pe,Q),It()}$t(["click"]);export{tl as component};
