import{f as v,a as i,c as Ye,t as zt}from"../chunks/CSQvsE9s.js";import{p as ut,c as a,s,i as e,aV as S,r as t,t as f,a as ft,x as l,b0 as Zt,f as Ie,aG as Ct,aW as pt,w as bt,o as Ut,b8 as Ht,d as Qt}from"../chunks/DGPNV_z9.js";import{d as _t,s as d}from"../chunks/DSMXtqZM.js";import{i as c}from"../chunks/D9GEZg6r.js";import{s as Qe,r as Me,e as De,i as ze,b as Pe,c as Jt}from"../chunks/_iMURHzE.js";import{t as ct,k as gt,i as Kt,u as ea,s as At,l as ta,g as aa,b as sa,m as ra,n as ia,D as Pt,E as la,o as va,p as na,q as oa,d as da,r as ca}from"../chunks/CuiA2Y8F.js";import{c as Dt,f as ot,n as It,m as Xt,b as Mt,o as Et,p as Nt,q as $t,t as Bt,v as Vt,w as pa}from"../chunks/Cn4iyW3Z.js";import{s as dt}from"../chunks/Ct8JfZaa.js";import{p as Rt}from"../chunks/Dd0awD9h.js";var _a=v('<span class="chevron svelte-12crvy">‚ñ≤</span>'),ua=v('<span class="chevron svelte-12crvy">‚ñº</span>'),fa=v('<div class="input-with-action svelte-12crvy"><input type="text" id="location-manual" placeholder="Custom location..." class="flat-left svelte-12crvy"/> <button type="button" class="action-btn flat-right svelte-12crvy" title="Back to list">‚úï</button></div>'),ga=v("<option> </option>"),ma=v('<select id="location-filter" class="svelte-12crvy"><option>Any Location</option><!></select>'),ha=v("<option> </option>"),ba=v("<option> </option>"),ya=v('<div class="filter-body svelte-12crvy"><div class="filter-grid svelte-12crvy"><div class="filter-item svelte-12crvy"><label for="start-date" class="svelte-12crvy">Start Date</label> <input type="date" id="start-date" class="svelte-12crvy"/></div> <div class="filter-item svelte-12crvy"><label for="end-date" class="svelte-12crvy">End Date</label> <input type="date" id="end-date" class="svelte-12crvy"/></div> <div class="filter-item svelte-12crvy"><label for="location-filter" class="svelte-12crvy">Location</label> <!></div> <div class="filter-item svelte-12crvy"><label for="climbing-type-filter" class="svelte-12crvy">Climb Type</label> <select id="climbing-type-filter" class="svelte-12crvy"><option>Any Type</option><!></select></div> <div class="filter-item svelte-12crvy"><label for="session-type-filter" class="svelte-12crvy">Session Type</label> <select id="session-type-filter" class="svelte-12crvy"><option>Any Type</option><!></select></div> <div class="filter-item svelte-12crvy"><label for="grade-filter" class="svelte-12crvy">Grade (Exact)</label> <input type="text" id="grade-filter" placeholder="e.g. V4" class="svelte-12crvy"/></div></div> <div class="filter-actions svelte-12crvy"><button class="reset-btn svelte-12crvy">Reset Filters</button></div></div>'),xa=v('<div class="filter-container svelte-12crvy"><button class="filter-header svelte-12crvy"><div class="header-content svelte-12crvy"><span class="icon svelte-12crvy">üîç</span> <span class="title svelte-12crvy">Filters</span> <!></div></button> <!></div>');function wa(Te,p){ut(p,!0);const r=["Rockstar Swindon","Flashpoint Swindon","Flashpoint Bristol","Redpoint Bristol","TCH Bristol","Other"],g=["Bouldering","Sport","Mixed"],F=["Projecting","Onsighting","Campusing","Repeaters"];let k=S(!1),u=S(""),q=S(""),x=S(""),B=S(""),X=S(""),oe=S(""),pe=S(!1);function se(){l(k,!e(k))}function ee(){l(u,""),l(q,""),l(x,""),l(B,""),l(pe,!1),l(X,""),l(oe,""),H()}function H(){p.onFilterParamsChange({startDate:e(u),endDate:e(q),location:e(x),climbingType:e(B),sessionType:e(X),grade:e(oe)})}function de(){e(x)==="Other"?(l(pe,!0),l(x,"")):H()}function _e(){l(pe,!1),l(x,""),H()}var re=xa(),$=a(re);$.__click=se;var ve=a($),xe=s(a(ve),4);{var be=m=>{var z=_a();i(m,z)},te=m=>{var z=ua();i(m,z)};c(xe,m=>{e(k)?m(be):m(te,!1)})}t(ve),t($);var A=s($,2);{var _=m=>{var z=ya(),N=a(z),P=a(N),W=s(a(P),2);Me(W),W.__change=H,t(P);var J=s(P,2),b=s(a(J),2);Me(b),b.__change=H,t(J);var O=s(J,2),y=s(a(O),2);{var n=T=>{var w=fa(),j=a(w);Me(j),j.__input=H;var U=s(j,2);U.__click=_e,t(w),Pe(j,()=>e(x),h=>l(x,h)),i(T,w)},o=T=>{var w=ma();w.__change=de;var j=a(w);j.value=j.__value="";var U=s(j);De(U,17,()=>r,ze,(h,R)=>{var ue=ga(),Y=a(ue,!0);t(ue);var Q={};f(()=>{d(Y,e(R)),Q!==(Q=e(R))&&(ue.value=(ue.__value=e(R))??"")}),i(h,ue)}),t(w),Dt(w,()=>e(x),h=>l(x,h)),i(T,w)};c(y,T=>{e(pe)?T(n):T(o,!1)})}t(O);var D=s(O,2),V=s(a(D),2);V.__change=H;var K=a(V);K.value=K.__value="";var L=s(K);De(L,17,()=>g,ze,(T,w)=>{var j=ha(),U=a(j,!0);t(j);var h={};f(()=>{d(U,e(w)),h!==(h=e(w))&&(j.value=(j.__value=e(w))??"")}),i(T,j)}),t(V),t(D);var ce=s(D,2),ne=s(a(ce),2);ne.__change=H;var we=a(ne);we.value=we.__value="";var E=s(we);De(E,17,()=>F,ze,(T,w)=>{var j=ba(),U=a(j,!0);t(j);var h={};f(()=>{d(U,e(w)),h!==(h=e(w))&&(j.value=(j.__value=e(w))??"")}),i(T,j)}),t(ne),t(ce);var I=s(ce,2),fe=s(a(I),2);Me(fe),fe.__input=H,t(I),t(N);var ye=s(N,2),Se=a(ye);Se.__click=ee,t(ye),t(z),Pe(W,()=>e(u),T=>l(u,T)),Pe(b,()=>e(q),T=>l(q,T)),Dt(V,()=>e(B),T=>l(B,T)),Dt(ne,()=>e(X),T=>l(X,T)),Pe(fe,()=>e(oe),T=>l(oe,T)),ct(3,z,()=>gt,()=>({duration:200})),i(m,z)};c(A,m=>{e(k)&&m(_)})}t(re),f(()=>Qe($,"aria-expanded",e(k))),i(Te,re),ft()}_t(["click","change","input"]);var Sa=v('<label class="type-toggle svelte-yz0xxt"><input type="checkbox"/> <span>Sport?</span></label>'),ka=v("<option> </option>"),Da=v('<div class="edit-form svelte-yz0xxt"><div class="edit-row main svelte-yz0xxt"><input type="text" class="edit-input grade svelte-yz0xxt" placeholder="Grade"/> <input type="text" class="edit-input name svelte-yz0xxt" placeholder="Route Name"/> <!></div> <div class="edit-row meta svelte-yz0xxt"><select class="edit-select svelte-yz0xxt"></select> <div class="attempts-input-wrapper svelte-yz0xxt"><span>#</span> <input type="number" min="1" class="edit-input num svelte-yz0xxt"/></div></div> <div class="edit-row notes svelte-yz0xxt"><textarea class="edit-input notes-area svelte-yz0xxt" placeholder="Notes..."></textarea></div> <div class="edit-actions svelte-yz0xxt"><button class="action-btn cancel svelte-yz0xxt">Cancel</button> <button class="action-btn save svelte-yz0xxt">Save</button></div></div>'),Ta=v('<span class="climb-type-tag svelte-yz0xxt"> </span>'),qa=v('<span class="notes-preview svelte-yz0xxt"> </span>'),za=v('<span class="wall-tag svelte-yz0xxt"> </span>'),Ca=v('<span class="attempts-count svelte-yz0xxt"> </span>'),Fa=v('<div class="detail-row svelte-yz0xxt"><span class="label svelte-yz0xxt">Notes:</span> <p class="notes svelte-yz0xxt"> </p></div>'),La=v('<p class="empty-notes svelte-yz0xxt">No notes for this climb.</p>'),Ea=v('<div class="climb-details svelte-yz0xxt"><!> <div class="tags svelte-yz0xxt"><span class="tag type svelte-yz0xxt"> </span> <span class="tag attempt-text svelte-yz0xxt"> </span></div></div>'),Ga=v('<div class="climb-header svelte-yz0xxt" role="button" tabindex="0"><div class="climb-main-info svelte-yz0xxt"><span> </span> <span class="climb-name svelte-yz0xxt"> </span> <!> <!> <!></div> <div class="climb-meta svelte-yz0xxt"><span><span class="icon svelte-yz0xxt"> </span> <!></span> <button class="icon-btn edit-btn svelte-yz0xxt" aria-label="Edit climb" title="Edit climb">‚úé</button> <button class="icon-btn delete-btn svelte-yz0xxt" aria-label="Delete climb" title="Delete climb">üóëÔ∏è</button> <span class="chevron svelte-yz0xxt"> </span></div></div> <!>',1),Oa=v("<div><!></div>");function ja(Te,p){ut(p,!0);let r=Rt(p,"showClimbType",3,!1),g=S(!1),F=S(!1),k=S(""),u=S(""),q=S(""),x=S(1),B=S(""),X=S(!1);function oe(){e(F)||l(g,!e(g))}function pe(A){A.stopPropagation(),p.onDelete()}function se(A){A.stopPropagation(),l(k,p.climb.name,!0),l(u,p.climb.grade,!0),l(q,p.climb.attemptType,!0),l(x,p.climb.attemptsNum,!0),l(B,p.climb.notes,!0),l(X,p.climb.isSport,!0),l(F,!0),l(g,!0)}function ee(A){A.stopPropagation(),l(F,!1)}function H(A){A.stopPropagation();const _={...p.climb,name:e(k),grade:e(u),attemptType:e(q),attemptsNum:e(x),notes:e(B),isSport:e(X)};p.onUpdate(_),l(F,!1)}function de(){(e(q)==="Flash"||e(q)==="Onsight")&&l(x,1)}const _e={Flash:"‚ö°",Onsight:"üëÅÔ∏è",Redpoint:"üî¥",Dogged:"üõ†Ô∏è",DNF:"‚ùå"},re=["Flash","Onsight","Redpoint","Dogged","DNF"];var $=Oa();let ve;var xe=a($);{var be=A=>{var _=Da(),m=a(_),z=a(m);Me(z);var N=s(z,2);Me(N);var P=s(N,2);{var W=L=>{var ce=Sa(),ne=a(ce);Me(ne),Ct(2),t(ce),Jt(ne,()=>e(X),we=>l(X,we)),i(L,ce)};c(P,L=>{r()&&L(W)})}t(m);var J=s(m,2),b=a(J);b.__change=de,De(b,21,()=>re,ze,(L,ce)=>{var ne=ka(),we=a(ne,!0);t(ne);var E={};f(()=>{d(we,e(ce)),E!==(E=e(ce))&&(ne.value=(ne.__value=e(ce))??"")}),i(L,ne)}),t(b);var O=s(b,2),y=s(a(O),2);Me(y),t(O),t(J);var n=s(J,2),o=a(n);Zt(o),t(n);var D=s(n,2),V=a(D);V.__click=ee;var K=s(V,2);K.__click=H,t(D),t(_),f(()=>y.disabled=e(q)==="Flash"||e(q)==="Onsight"),Pe(z,()=>e(u),L=>l(u,L)),Pe(N,()=>e(k),L=>l(k,L)),Dt(b,()=>e(q),L=>l(q,L)),Pe(y,()=>e(x),L=>l(x,L)),Pe(o,()=>e(B),L=>l(B,L)),i(A,_)},te=A=>{var _=Ga(),m=Ie(_);m.__click=oe,m.__keydown=U=>(U.key==="Enter"||U.key===" ")&&oe();var z=a(m),N=a(z);let P;var W=a(N,!0);t(N);var J=s(N,2),b=a(J,!0);t(J);var O=s(J,2);{var y=U=>{var h=Ta(),R=a(h,!0);t(h),f(()=>d(R,p.climb.isSport?"Sport":"Boulder")),i(U,h)};c(O,U=>{r()&&U(y)})}var n=s(O,2);{var o=U=>{var h=qa(),R=a(h);t(h),f(()=>d(R,`- ${p.climb.notes??""}`)),i(U,h)};c(n,U=>{!e(g)&&p.climb.notes&&U(o)})}var D=s(n,2);{var V=U=>{var h=za(),R=a(h,!0);t(h),f(()=>d(R,p.climb.wall)),i(U,h)};c(D,U=>{p.climb.wall&&U(V)})}t(z);var K=s(z,2),L=a(K);let ce;var ne=a(L),we=a(ne,!0);t(ne);var E=s(ne,2);{var I=U=>{var h=Ca(),R=a(h,!0);t(h),f(()=>d(R,p.climb.attemptsNum)),i(U,h)};c(E,U=>{p.climb.attemptType!=="Flash"&&p.climb.attemptType!=="Onsight"&&U(I)})}t(L);var fe=s(L,2);fe.__click=se;var ye=s(fe,2);ye.__click=pe;var Se=s(ye,2),T=a(Se,!0);t(Se),t(K),t(m);var w=s(m,2);{var j=U=>{var h=Ea(),R=a(h);{var ue=le=>{var he=Fa(),qe=s(a(he),2),Fe=a(qe,!0);t(qe),t(he),f(()=>d(Fe,p.climb.notes)),i(le,he)},Y=le=>{var he=La();i(le,he)};c(R,le=>{p.climb.notes?le(ue):le(Y,!1)})}var Q=s(R,2),ie=a(Q),Ee=a(ie,!0);t(ie);var ke=s(ie,2),Ce=a(ke,!0);t(ke),t(Q),t(h),f(()=>{d(Ee,p.climb.isSport?"Sport":"Boulder"),d(Ce,p.climb.attemptType)}),ct(3,h,()=>gt,()=>({duration:150})),i(U,h)};c(w,U=>{e(g)&&U(j)})}f(()=>{Qe(m,"aria-expanded",e(g)),P=dt(N,1,"grade-badge svelte-yz0xxt",null,P,{sport:p.climb.isSport}),d(W,p.climb.grade),d(b,p.climb.name||"Unnamed Route"),ce=dt(L,1,"attempt-type svelte-yz0xxt",null,ce,{flash:p.climb.attemptType==="Flash"}),d(we,_e[p.climb.attemptType]||p.climb.attemptType),d(T,e(g)?"‚ñ≤":"‚ñº")}),i(A,_)};c(xe,A=>{e(F)?A(be):A(te,!1)})}t($),f(()=>ve=dt($,1,"climb-entry svelte-yz0xxt",null,ve,{expanded:e(g),editing:e(F)})),i(Te,$),ft()}_t(["change","click","keydown"]);var Aa=v('<span class="stat svelte-7vqogn"> </span>'),Na=v('<span class="status-icon pending svelte-7vqogn" title="Waiting to sync">üîÑ</span>'),Ia=v('<span class="status-icon error svelte-7vqogn" title="Sync error">‚ö†Ô∏è</span>'),Ma=v('<span class="chip svelte-7vqogn"> </span>'),Pa=v('<span class="text-none svelte-7vqogn">None</span>'),Ra=v('<div class="detail-item svelte-7vqogn"><span class="label svelte-7vqogn">Difficulty</span> <span class="value svelte-7vqogn"> </span></div>'),Ba=v('<span class="chip svelte-7vqogn"> </span>'),Va=v('<span class="text-none svelte-7vqogn">None</span>'),Ua=v('<div class="detail-item svelte-7vqogn"><span class="label svelte-7vqogn">Category</span> <div class="value-chips svelte-7vqogn"><!></div></div>'),$a=v('<span class="chip svelte-7vqogn"> </span>'),Wa=v('<span class="text-none svelte-7vqogn">None</span>'),Ha=v('<div class="detail-item svelte-7vqogn"><span class="label svelte-7vqogn">Focus</span> <div class="value-chips svelte-7vqogn"><!></div></div>'),Za=v('<span class="chip svelte-7vqogn"> </span>'),Ja=v('<span class="text-none svelte-7vqogn">None</span>'),Ka=v('<div class="detail-item svelte-7vqogn"><span class="label svelte-7vqogn">Energy System</span> <div class="value-chips svelte-7vqogn"><!></div></div>'),Xa=v('<div class="metric svelte-7vqogn"><span class="label svelte-7vqogn">Open Grip</span> <div class="bar-container svelte-7vqogn"><div class="bar-fill svelte-7vqogn"></div></div> <span class="score svelte-7vqogn"> </span></div>'),Ya=v('<div class="metric svelte-7vqogn"><span class="label svelte-7vqogn">Crimp Grip</span> <div class="bar-container svelte-7vqogn"><div class="bar-fill svelte-7vqogn"></div></div> <span class="score svelte-7vqogn"> </span></div>'),Qa=v('<div class="metric svelte-7vqogn"><span class="label svelte-7vqogn">Pinch Grip</span> <div class="bar-container svelte-7vqogn"><div class="bar-fill svelte-7vqogn"></div></div> <span class="score svelte-7vqogn"> </span></div>'),es=v('<div class="metric svelte-7vqogn"><span class="label svelte-7vqogn">Sloper Grip</span> <div class="bar-container svelte-7vqogn"><div class="bar-fill svelte-7vqogn"></div></div> <span class="score svelte-7vqogn"> </span></div>'),ts=v('<div class="metric svelte-7vqogn"><span class="label svelte-7vqogn">Jug Grip</span> <div class="bar-container svelte-7vqogn"><div class="bar-fill svelte-7vqogn"></div></div> <span class="score svelte-7vqogn"> </span></div>'),as=v('<p class="no-climbs svelte-7vqogn">No climbs logged for this session.</p>'),ss=v('<div class="card-body svelte-7vqogn"><div class="details-grid svelte-7vqogn"><div class="detail-item svelte-7vqogn"><span class="label svelte-7vqogn">Training Type</span> <div class="value-chips svelte-7vqogn"><!></div></div> <!> <!> <!> <!></div> <div class="metrics-container svelte-7vqogn"><div class="metric svelte-7vqogn"><span class="label svelte-7vqogn">Finger Load</span> <div class="bar-container svelte-7vqogn"><div class="bar-fill svelte-7vqogn"></div></div> <span class="score svelte-7vqogn"> </span></div> <div class="metric svelte-7vqogn"><span class="label svelte-7vqogn">Shoulder Load</span> <div class="bar-container svelte-7vqogn"><div class="bar-fill svelte-7vqogn"></div></div> <span class="score svelte-7vqogn"> </span></div> <div class="metric svelte-7vqogn"><span class="label svelte-7vqogn">Forearm Load</span> <div class="bar-container svelte-7vqogn"><div class="bar-fill svelte-7vqogn"></div></div> <span class="score svelte-7vqogn"> </span></div> <!> <!> <!> <!> <!></div> <div class="climbs-list svelte-7vqogn"><h4 class="svelte-7vqogn">Climbs</h4> <div class="climbs-container svelte-7vqogn"><!> <!></div></div></div>'),rs=v('<div><div class="card-header svelte-7vqogn" role="button" tabindex="0"><div class="header-main svelte-7vqogn"><div class="date-badge svelte-7vqogn"><span class="day svelte-7vqogn"> </span> <span class="month svelte-7vqogn"> </span></div> <div class="session-info svelte-7vqogn"><div class="session-text svelte-7vqogn"><h3 class="location svelte-7vqogn"> </h3> <div class="session-meta svelte-7vqogn"><span class="type-tag svelte-7vqogn"> </span> <span class="stat svelte-7vqogn"> </span> <!></div></div> <div class="load-summary svelte-7vqogn"><div class="load-badge finger svelte-7vqogn"> </div> <div class="load-badge shoulder svelte-7vqogn"> </div> <div class="load-badge forearm svelte-7vqogn"> </div></div></div></div> <div class="header-actions"><div class="header-status svelte-7vqogn"><!></div>  <button class="btn-icon delete-session" title="Delete Session">üóëÔ∏è</button> <span class="chevron svelte-7vqogn"> </span></div></div> <!></div>');function is(Te,p){ut(p,!0);let r=Rt(p,"session",7),g=S(!1),F=S(!1);function k(){l(g,!e(g))}function u(){l(F,!0)}function q(T){const w=[...r().climbs];w.splice(T,1),It(r().id,{climbs:w}),p.onDelete()}function x(T,w){const j=[...r().climbs];j[T]=w,B(j)}async function B(T){if(It(r().id,{climbs:T}),r().climbs=T,Kt()){const w={date:r().date,location:r().location,customLocation:r().customLocation,climbingType:r().climbingType,trainingTypes:r().trainingTypes||[],difficulty:r().difficulty,categories:r().categories||[],energySystems:r().energySystems||[],techniqueFocuses:r().techniqueFocuses||[],fingerLoad:r().fingerLoad,shoulderLoad:r().shoulderLoad,forearmLoad:r().forearmLoad,openGrip:r().openGrip,crimpGrip:r().crimpGrip,pinchGrip:r().pinchGrip,sloperGrip:r().sloperGrip,jugGrip:r().jugGrip,climbs:T};try{const j=await ea(r().id,w);j.ok?(Xt(r().id),r().syncStatus="synced"):(console.error("Failed to sync update:",j.error),Mt(r().id),r().syncStatus="error")}catch(j){console.error("Exception syncing update:",j),Mt(r().id),r().syncStatus="error"}}}let X=pt(()=>r().climbs?.length??0),oe=pt(()=>(r().climbs||[]).reduce((T,w)=>{const j=parseInt(w.grade.replace(/\D/g,""))||0,U=parseInt(T.replace(/\D/g,""))||0;return j>U?w.grade:T},"V0"));var pe=rs();let se;var ee=a(pe);ee.__click=k,ee.__keydown=T=>T.key==="Enter"&&k();var H=a(ee),de=a(H),_e=a(de),re=a(_e,!0);t(_e);var $=s(_e,2),ve=a($,!0);t($),t(de);var xe=s(de,2),be=a(xe),te=a(be),A=a(te,!0);t(te);var _=s(te,2),m=a(_),z=a(m,!0);t(m);var N=s(m,2),P=a(N);t(N);var W=s(N,2);{var J=T=>{var w=Aa(),j=a(w);t(w),f(()=>d(j,`Max: ${e(oe)??""}`)),i(T,w)};c(W,T=>{e(X)>0&&T(J)})}t(_),t(be);var b=s(be,2),O=a(b),y=a(O,!0);t(O);var n=s(O,2),o=a(n,!0);t(n);var D=s(n,2),V=a(D,!0);t(D),t(b),t(xe),t(H);var K=s(H,2),L=a(K),ce=a(L);{var ne=T=>{var w=Na();i(T,w)},we=T=>{var w=Ye(),j=Ie(w);{var U=h=>{var R=Ia();i(h,R)};c(j,h=>{r().syncStatus==="error"&&h(U)},!0)}i(T,w)};c(ce,T=>{r().syncStatus==="pending"?T(ne):T(we,!1)})}t(L);var E=s(L,2);E.__click=T=>{T.stopPropagation(),u()};var I=s(E,2),fe=a(I,!0);t(I),t(K),t(ee);var ye=s(ee,2);{var Se=T=>{var w=ss(),j=a(w),U=a(j),h=s(a(U),2),R=a(h);{var ue=Z=>{var ae=Ye(),ge=Ie(ae);De(ge,17,()=>r().trainingTypes,ze,(Ae,C)=>{var G=Ma(),M=a(G,!0);t(G),f(()=>d(M,e(C))),i(Ae,G)}),i(Z,ae)},Y=Z=>{var ae=Pa();i(Z,ae)};c(R,Z=>{r().trainingTypes&&r().trainingTypes.length>0&&!r().trainingTypes.includes("None")?Z(ue):Z(Y,!1)})}t(h),t(U);var Q=s(U,2);{var ie=Z=>{var ae=Ra(),ge=s(a(ae),2),Ae=a(ge,!0);t(ge),t(ae),f(()=>d(Ae,r().difficulty)),i(Z,ae)};c(Q,Z=>{r().difficulty&&Z(ie)})}var Ee=s(Q,2);{var ke=Z=>{var ae=Ua(),ge=s(a(ae),2),Ae=a(ge);{var C=M=>{var me=Ye(),Le=Ie(me);De(Le,17,()=>r().categories,ze,(Ne,Ge)=>{var je=Ba(),St=a(je,!0);t(je),f(()=>d(St,e(Ge))),i(Ne,je)}),i(M,me)},G=M=>{var me=Va();i(M,me)};c(Ae,M=>{r().categories.length>0&&!r().categories.includes("None")?M(C):M(G,!1)})}t(ge),t(ae),i(Z,ae)};c(Ee,Z=>{r().categories?.length&&Z(ke)})}var Ce=s(Ee,2);{var le=Z=>{var ae=Ha(),ge=s(a(ae),2),Ae=a(ge);{var C=M=>{var me=Ye(),Le=Ie(me);De(Le,17,()=>r().techniqueFocuses,ze,(Ne,Ge)=>{var je=$a(),St=a(je,!0);t(je),f(()=>d(St,e(Ge))),i(Ne,je)}),i(M,me)},G=M=>{var me=Wa();i(M,me)};c(Ae,M=>{r().techniqueFocuses.length>0&&!r().techniqueFocuses.includes("None")?M(C):M(G,!1)})}t(ge),t(ae),i(Z,ae)};c(Ce,Z=>{r().techniqueFocuses?.length&&Z(le)})}var he=s(Ce,2);{var qe=Z=>{var ae=Ka(),ge=s(a(ae),2),Ae=a(ge);{var C=M=>{var me=Ye(),Le=Ie(me);De(Le,17,()=>r().energySystems,ze,(Ne,Ge)=>{var je=Za(),St=a(je,!0);t(je),f(()=>d(St,e(Ge))),i(Ne,je)}),i(M,me)},G=M=>{var me=Ja();i(M,me)};c(Ae,M=>{r().energySystems.length>0&&!r().energySystems.includes("None")?M(C):M(G,!1)})}t(ge),t(ae),i(Z,ae)};c(he,Z=>{r().energySystems?.length&&Z(qe)})}t(j);var Fe=s(j,2),Ue=a(Fe),et=s(a(Ue),2),Re=a(et);t(et);var Be=s(et,2),$e=a(Be);t(Be),t(Ue);var tt=s(Ue,2),We=s(a(tt),2),at=a(We);t(We);var mt=s(We,2),He=a(mt);t(mt),t(tt);var it=s(tt,2),st=s(a(it),2),Oe=a(st);t(st);var Ze=s(st,2),Ve=a(Ze);t(Ze),t(it);var lt=s(it,2);{var vt=Z=>{var ae=Xa(),ge=s(a(ae),2),Ae=a(ge);t(ge);var C=s(ge,2),G=a(C);t(C),t(ae),f(()=>{ot(Ae,`width: ${r().openGrip/5*100}%`),d(G,`${r().openGrip??""}/5`)}),i(Z,ae)};c(lt,Z=>{r().openGrip&&Z(vt)})}var nt=s(lt,2);{var Je=Z=>{var ae=Ya(),ge=s(a(ae),2),Ae=a(ge);t(ge);var C=s(ge,2),G=a(C);t(C),t(ae),f(()=>{ot(Ae,`width: ${r().crimpGrip/5*100}%`),d(G,`${r().crimpGrip??""}/5`)}),i(Z,ae)};c(nt,Z=>{r().crimpGrip&&Z(Je)})}var Ke=s(nt,2);{var Tt=Z=>{var ae=Qa(),ge=s(a(ae),2),Ae=a(ge);t(ge);var C=s(ge,2),G=a(C);t(C),t(ae),f(()=>{ot(Ae,`width: ${r().pinchGrip/5*100}%`),d(G,`${r().pinchGrip??""}/5`)}),i(Z,ae)};c(Ke,Z=>{r().pinchGrip&&Z(Tt)})}var Xe=s(Ke,2);{var Ft=Z=>{var ae=es(),ge=s(a(ae),2),Ae=a(ge);t(ge);var C=s(ge,2),G=a(C);t(C),t(ae),f(()=>{ot(Ae,`width: ${r().sloperGrip/5*100}%`),d(G,`${r().sloperGrip??""}/5`)}),i(Z,ae)};c(Xe,Z=>{r().sloperGrip&&Z(Ft)})}var yt=s(Xe,2);{var xt=Z=>{var ae=ts(),ge=s(a(ae),2),Ae=a(ge);t(ge);var C=s(ge,2),G=a(C);t(C),t(ae),f(()=>{ot(Ae,`width: ${r().jugGrip/5*100}%`),d(G,`${r().jugGrip??""}/5`)}),i(Z,ae)};c(yt,Z=>{r().jugGrip&&Z(xt)})}t(Fe);var wt=s(Fe,2),qt=s(a(wt),2),Lt=a(qt);De(Lt,17,()=>r().climbs||[],ze,(Z,ae,ge)=>{{let Ae=pt(()=>r().climbingType==="Mixed");ja(Z,{get climb(){return e(ae)},onDelete:()=>q(ge),onUpdate:C=>x(ge,C),get showClimbType(){return e(Ae)}})}});var rt=s(Lt,2);{var ht=Z=>{var ae=as();i(Z,ae)};c(rt,Z=>{(r().climbs||[]).length===0&&Z(ht)})}t(qt),t(wt),t(w),f(()=>{ot(Re,`width: ${r().fingerLoad/5*100}%`),d($e,`${r().fingerLoad??""}/5`),ot(at,`width: ${r().shoulderLoad/5*100}%`),d(He,`${r().shoulderLoad??""}/5`),ot(Oe,`width: ${r().forearmLoad/5*100}%`),d(Ve,`${r().forearmLoad??""}/5`)}),ct(3,w,()=>gt,()=>({duration:150})),i(T,w)};c(ye,T=>{e(g)&&T(Se)})}t(pe),f((T,w)=>{se=dt(pe,1,"session-card svelte-7vqogn",null,se,{expanded:e(g)}),Qe(ee,"aria-expanded",e(g)),d(re,T),d(ve,w),d(A,r().location),d(z,r().climbingType),d(P,`${e(X)??""} climbs`),Qe(O,"title",`Finger Load: ${r().fingerLoad??""}`),d(y,r().fingerLoad),Qe(n,"title",`Shoulder Load: ${r().shoulderLoad??""}`),d(o,r().shoulderLoad),Qe(D,"title",`Forearm Load: ${r().forearmLoad??""}`),d(V,r().forearmLoad),d(fe,e(g)?"‚ñ≤":"‚ñº")},[()=>new Date(r().date).getDate(),()=>new Date(r().date).toLocaleDateString("en-GB",{month:"short"})]),i(Te,pe),ft()}_t(["click","keydown"]);var ls=v('<div class="legend-item svelte-11p9lqi"><span class="l-icon svelte-11p9lqi"> </span> <span class="l-label svelte-11p9lqi"> </span></div>'),vs=v('<div class="legend-content svelte-11p9lqi"><div class="legend-grid svelte-11p9lqi"></div></div>'),ns=v('<div class="legend-container svelte-11p9lqi"><button class="legend-toggle svelte-11p9lqi"><span class="icon">‚ÑπÔ∏è</span> <span class="text">Icon Legend</span> <span class="chevron svelte-11p9lqi"> </span></button> <!></div>');function Yt(Te){let p=S(!1);const r=[{icon:"üëÅÔ∏è",label:"Onsight"},{icon:"‚ö°",label:"Flash"},{icon:"üî¥",label:"Redpoint"},{icon:"üõ†Ô∏è",label:"Dogged"},{icon:"‚ùå",label:"DNF"}];var g=ns(),F=a(g);F.__click=()=>l(p,!e(p));var k=s(a(F),4),u=a(k,!0);t(k),t(F);var q=s(F,2);{var x=B=>{var X=vs(),oe=a(X);De(oe,21,()=>r,ze,(pe,se)=>{var ee=ls(),H=a(ee),de=a(H,!0);t(H);var _e=s(H,2),re=a(_e,!0);t(_e),t(ee),f(()=>{d(de,e(se).icon),d(re,e(se).label)}),i(pe,ee)}),t(oe),t(X),ct(3,X,()=>gt),i(B,X)};c(q,B=>{e(p)&&B(x)})}t(g),f(()=>{Qe(F,"aria-expanded",e(p)),d(u,e(p)?"‚ñº":"‚ñ∂")}),i(Te,g)}_t(["click"]);function Wt(Te,p){if(!Te||Te.length===0){alert("No data to export");return}const r=Array.from(new Set(Te.flatMap(Object.keys))),g=[r.join(","),...Te.map(u=>r.map(q=>{let x=u[q];if(x==null)return"";if(typeof x=="object"){if(x instanceof Date)return x.toISOString();x=JSON.stringify(x).replace(/"/g,'""')}else typeof x=="string"&&(x=x.replace(/"/g,'""'));return typeof x=="string"&&(x.includes(",")||x.includes('"')||x.includes(`
`))?`"${x}"`:x}).join(","))].join(`
`),F=new Blob([g],{type:"text/csv;charset=utf-8;"}),k=document.createElement("a");if(k.download!==void 0){const u=URL.createObjectURL(F);k.setAttribute("href",u),k.setAttribute("download",p.endsWith(".csv")?p:`${p}.csv`),k.style.visibility="hidden",document.body.appendChild(k),k.click(),document.body.removeChild(k)}}var os=v('<span class="spinner svelte-14fqz8w"></span> Fetching...',1),ds=v('<div class="error-banner svelte-14fqz8w"> </div>'),cs=v('<small class="svelte-14fqz8w">Try adjusting your filters.</small>'),ps=v('<div class="empty-state svelte-14fqz8w"><p class="svelte-14fqz8w">No indoor climbing sessions found.</p> <!></div>'),_s=v('<div class="load-more-container svelte-14fqz8w"><button class="load-more-btn svelte-14fqz8w"> </button></div>'),us=v('<div class="view-container svelte-14fqz8w"><div class="view-header svelte-14fqz8w"><h2 class="view-title svelte-14fqz8w">üßó Indoor Climbing History</h2> <div class="header-actions svelte-14fqz8w"><button class="action-btn secondary svelte-14fqz8w" title="Export filtered data to CSV">üì• Export</button> <button class="action-btn svelte-14fqz8w" title="Fetch data from cloud"><!></button></div></div> <!> <!> <div class="info-bar svelte-14fqz8w"><div class="legend-wrapper svelte-14fqz8w"><!></div> <div class="load-key svelte-14fqz8w"><span class="key-label svelte-14fqz8w">Load:</span> <div class="key-item svelte-14fqz8w"><span class="dot finger svelte-14fqz8w"></span> Finger</div> <div class="key-item svelte-14fqz8w"><span class="dot shoulder svelte-14fqz8w"></span> Shoulder</div> <div class="key-item svelte-14fqz8w"><span class="dot forearm svelte-14fqz8w"></span> Forearm</div></div></div> <div class="sessions-list"><!> <!> <!></div></div>');function fs(Te,p){ut(p,!0);let r=S(bt([])),g=S(bt([])),F=S(!1),k=S(""),u=S(bt({startDate:"",endDate:"",location:"",climbingType:"",sessionType:"",grade:""})),q=S(20);const x=20;Ut(()=>{B()});function B(){const n=Et("indoor_climb");l(r,n.sort((o,D)=>new Date(D.date).getTime()-new Date(o.date).getTime()),!0),se()}async function X(){l(F,!0),l(k,"");try{await At();const n=await ta();n.ok&&n.data?oe(n.data):l(k,n.error||"Failed to fetch data",!0)}catch(n){l(k,n instanceof Error?n.message:"Unknown error",!0)}finally{l(F,!1)}}function oe(n){const o=n.map(V=>({...V,activityType:"indoor_climb",createdAt:new Date().toISOString(),updatedAt:new Date().toISOString(),syncStatus:"synced",syncedAt:new Date().toISOString(),openGrip:0,crimpGrip:0,pinchGrip:0,sloperGrip:0,jugGrip:0}));Nt(o);const D=Et("indoor_climb");l(r,D.sort((V,K)=>new Date(K.date).getTime()-new Date(V.date).getTime()),!0),se()}function pe(n){l(u,n,!0),se()}function se(){l(q,x),l(g,e(r).filter(n=>{if(e(u).startDate&&n.date<e(u).startDate||e(u).endDate&&n.date>e(u).endDate||e(u).location&&n.location!==e(u).location)return!1;if(e(u).climbingType&&(n.climbingType==="Leading"?"Sport":n.climbingType)!==e(u).climbingType)if(n.climbingType==="Mixed")if(e(u).climbingType==="Bouldering"){if(!n.climbs.some(D=>!D.isSport))return!1}else if(e(u).climbingType==="Sport"){if(!n.climbs.some(D=>D.isSport))return!1}else return!1;else return!1;if(e(u).sessionType&&!n.trainingTypes?.includes(e(u).sessionType))return!1;if(e(u).grade){const o=e(u).grade.trim().toLowerCase();if(!n.climbs.some(V=>V.grade.trim().toLowerCase()===o))return!1}return!0}),!0)}function ee(){l(q,e(q)+x)}var H=us(),de=a(H),_e=s(a(de),2),re=a(_e);re.__click=()=>Wt(e(g),"indoor_climbs");var $=s(re,2);$.__click=X;var ve=a($);{var xe=n=>{var o=os();Ct(),i(n,o)},be=n=>{var o=zt("‚òÅÔ∏è Fetch Data");i(n,o)};c(ve,n=>{e(F)?n(xe):n(be,!1)})}t($),t(_e),t(de);var te=s(de,2);{var A=n=>{var o=ds(),D=a(o,!0);t(o),f(()=>d(D,e(k))),ct(3,o,()=>gt),i(n,o)};c(te,n=>{e(k)&&n(A)})}var _=s(te,2);wa(_,{onFilterParamsChange:pe});var m=s(_,2),z=a(m),N=a(z);Yt(N),t(z),Ct(2),t(m);var P=s(m,2),W=a(P);De(W,17,()=>e(g).slice(0,e(q)),n=>n.id,(n,o)=>{is(n,{get session(){return e(o)},onDelete:B})});var J=s(W,2);{var b=n=>{var o=ps(),D=s(a(o),2);{var V=K=>{var L=cs();i(K,L)};c(D,K=>{e(r).length>0&&K(V)})}t(o),i(n,o)};c(J,n=>{e(g).length===0&&n(b)})}var O=s(J,2);{var y=n=>{var o=_s(),D=a(o);D.__click=ee;var V=a(D);t(D),t(o),f(()=>d(V,`Load More (${e(g).length-e(q)} remaining)`)),i(n,o)};c(O,n=>{e(q)<e(g).length&&n(y)})}t(P),t(H),f(()=>$.disabled=e(F)),i(Te,H),ft()}_t(["click"]);var gs=v('<span class="chevron svelte-1frtlim">‚ñ≤</span>'),ms=v('<span class="chevron svelte-1frtlim">‚ñº</span>'),hs=v('<div class="input-with-action svelte-1frtlim"><input type="text" id="area-filter-text" placeholder="Type area name..." class="flat-left svelte-1frtlim"/> <button class="action-btn flat-right svelte-1frtlim" title="Back to list">‚úï</button></div>'),bs=v("<option> </option>"),ys=v('<select id="area-filter" class="svelte-1frtlim"><option>All Areas</option><!><option>Other (Manual Entry)</option></select>'),xs=v('<div class="input-with-action svelte-1frtlim"><input type="text" id="crag-filter-text" placeholder="Type crag name..." class="flat-left svelte-1frtlim"/> <button class="action-btn flat-right svelte-1frtlim" title="Back to list">‚úï</button></div>'),ws=v("<option> </option>"),Ss=v('<select id="crag-filter" class="svelte-1frtlim"><option>All Crags</option><!><option>Other (Manual Entry)</option></select>'),ks=v('<input type="text" id="crag-filter-text" class="svelte-1frtlim"/>'),Ds=v("<option> </option>"),Ts=v("<option> </option>"),qs=v('<div class="filter-body svelte-1frtlim"><div class="filter-grid svelte-1frtlim"><div class="filter-item svelte-1frtlim"><label for="start-date" class="svelte-1frtlim">Start Date</label> <input type="date" id="start-date" class="svelte-1frtlim"/></div> <div class="filter-item svelte-1frtlim"><label for="end-date" class="svelte-1frtlim">End Date</label> <input type="date" id="end-date" class="svelte-1frtlim"/></div> <div class="filter-item svelte-1frtlim"><label for="area-filter" class="svelte-1frtlim">Area</label> <!></div> <div class="filter-item svelte-1frtlim"><label for="crag-filter" class="svelte-1frtlim">Crag</label> <!></div> <div class="filter-item svelte-1frtlim"><label for="climbing-type-filter" class="svelte-1frtlim">Climb Type</label> <select id="climbing-type-filter" class="svelte-1frtlim"><option>Any Type</option><!></select></div> <div class="filter-item svelte-1frtlim"><label for="session-type-filter" class="svelte-1frtlim">Session Type</label> <select id="session-type-filter" class="svelte-1frtlim"><option>Any Type</option><!></select></div> <div class="filter-item svelte-1frtlim"><label for="grade-filter" class="svelte-1frtlim">Grade (Exact)</label> <input type="text" id="grade-filter" placeholder="e.g. 7a" class="svelte-1frtlim"/></div></div> <div class="filter-actions svelte-1frtlim"><button class="reset-btn svelte-1frtlim">Reset Filters</button></div></div>'),zs=v('<div class="filter-container svelte-1frtlim"><button class="filter-header svelte-1frtlim"><div class="header-content svelte-1frtlim"><span class="icon svelte-1frtlim">üîç</span> <span class="title svelte-1frtlim">Filters</span> <!></div></button> <!></div>');function Cs(Te,p){ut(p,!0);const r=aa(),g=["Bouldering","Sport","Mixed","Trad"],F=["Projecting","Onsighting","Campusing","Repeaters","Fun","Volume"];let k=S(!1),u=S(""),q=S(""),x=S(""),B=S(""),X=S(""),oe=S(""),pe=S(""),se=S(!1),ee=S(!1),H=pt(()=>e(x)&&e(x)!=="Other"?sa(e(x)):[]);function de(){e(x)==="Other"?(l(se,!0),l(x,"")):l(se,!1),l(B,""),l(ee,!1),ve()}function _e(){e(B)==="Other"?(l(ee,!0),l(B,"")):l(ee,!1),ve()}function re(){l(k,!e(k))}function $(){l(u,""),l(q,""),l(x,""),l(B,""),l(X,""),l(oe,""),l(pe,""),l(se,!1),l(ee,!1),ve()}function ve(){p.onFilterParamsChange({startDate:e(u),endDate:e(q),area:e(x),crag:e(B),climbingType:e(X),sessionType:e(oe),grade:e(pe)})}var xe=zs(),be=a(xe);be.__click=re;var te=a(be),A=s(a(te),4);{var _=P=>{var W=gs();i(P,W)},m=P=>{var W=ms();i(P,W)};c(A,P=>{e(k)?P(_):P(m,!1)})}t(te),t(be);var z=s(be,2);{var N=P=>{var W=qs(),J=a(W),b=a(J),O=s(a(b),2);Me(O),O.__change=ve,t(b);var y=s(b,2),n=s(a(y),2);Me(n),n.__change=ve,t(y);var o=s(y,2),D=s(a(o),2);{var V=Y=>{var Q=hs(),ie=a(Q);Me(ie),ie.__input=ve;var Ee=s(ie,2);Ee.__click=()=>{l(se,!1),l(x,""),ve()},t(Q),Pe(ie,()=>e(x),ke=>l(x,ke)),i(Y,Q)},K=Y=>{var Q=ys();Q.__change=de;var ie=a(Q);ie.value=ie.__value="";var Ee=s(ie);De(Ee,17,()=>r,ze,(Ce,le)=>{var he=bs(),qe=a(he,!0);t(he);var Fe={};f(()=>{d(qe,e(le)),Fe!==(Fe=e(le))&&(he.value=(he.__value=e(le))??"")}),i(Ce,he)});var ke=s(Ee);ke.value=ke.__value="Other",t(Q),Dt(Q,()=>e(x),Ce=>l(x,Ce)),i(Y,Q)};c(D,Y=>{e(se)?Y(V):Y(K,!1)})}t(o);var L=s(o,2),ce=s(a(L),2);{var ne=Y=>{var Q=xs(),ie=a(Q);Me(ie),ie.__input=ve;var Ee=s(ie,2);Ee.__click=()=>{l(ee,!1),l(B,""),ve()},t(Q),Pe(ie,()=>e(B),ke=>l(B,ke)),i(Y,Q)},we=Y=>{var Q=Ye(),ie=Ie(Q);{var Ee=Ce=>{var le=Ss();le.__change=_e;var he=a(le);he.value=he.__value="";var qe=s(he);De(qe,17,()=>e(H),ze,(Ue,et)=>{var Re=ws(),Be=a(Re,!0);t(Re);var $e={};f(()=>{d(Be,e(et)),$e!==($e=e(et))&&(Re.value=(Re.__value=e(et))??"")}),i(Ue,Re)});var Fe=s(qe);Fe.value=Fe.__value="Other",t(le),Dt(le,()=>e(B),Ue=>l(B,Ue)),i(Ce,le)},ke=Ce=>{var le=ks();Me(le),le.__input=ve,f(()=>{Qe(le,"placeholder",e(x)?"Filter crag...":"Select area first"),le.disabled=!e(se)&&!e(x)}),Pe(le,()=>e(B),he=>l(B,he)),i(Ce,le)};c(ie,Ce=>{!e(se)&&e(x)&&e(H).length>0?Ce(Ee):Ce(ke,!1)},!0)}i(Y,Q)};c(ce,Y=>{e(ee)?Y(ne):Y(we,!1)})}t(L);var E=s(L,2),I=s(a(E),2);I.__change=ve;var fe=a(I);fe.value=fe.__value="";var ye=s(fe);De(ye,17,()=>g,ze,(Y,Q)=>{var ie=Ds(),Ee=a(ie,!0);t(ie);var ke={};f(()=>{d(Ee,e(Q)),ke!==(ke=e(Q))&&(ie.value=(ie.__value=e(Q))??"")}),i(Y,ie)}),t(I),t(E);var Se=s(E,2),T=s(a(Se),2);T.__change=ve;var w=a(T);w.value=w.__value="";var j=s(w);De(j,17,()=>F,ze,(Y,Q)=>{var ie=Ts(),Ee=a(ie,!0);t(ie);var ke={};f(()=>{d(Ee,e(Q)),ke!==(ke=e(Q))&&(ie.value=(ie.__value=e(Q))??"")}),i(Y,ie)}),t(T),t(Se);var U=s(Se,2),h=s(a(U),2);Me(h),h.__input=ve,t(U),t(J);var R=s(J,2),ue=a(R);ue.__click=$,t(R),t(W),Pe(O,()=>e(u),Y=>l(u,Y)),Pe(n,()=>e(q),Y=>l(q,Y)),Dt(I,()=>e(X),Y=>l(X,Y)),Dt(T,()=>e(oe),Y=>l(oe,Y)),Pe(h,()=>e(pe),Y=>l(pe,Y)),ct(3,W,()=>gt,()=>({duration:200})),i(P,W)};c(z,P=>{e(k)&&P(N)})}t(xe),f(()=>Qe(be,"aria-expanded",e(k))),i(Te,xe),ft()}_t(["click","change","input"]);var Fs=v('<label class="type-toggle svelte-1k6anfh"><input type="checkbox"/> <span>Sport?</span></label>'),Ls=v("<option> </option>"),Es=v('<div class="edit-form svelte-1k6anfh"><div class="edit-row main svelte-1k6anfh"><input type="text" class="edit-input grade svelte-1k6anfh" placeholder="Grade"/> <input type="text" class="edit-input name svelte-1k6anfh" placeholder="Route Name"/> <!></div> <div class="edit-row meta svelte-1k6anfh"><select class="edit-select svelte-1k6anfh"></select> <div class="attempts-input-wrapper svelte-1k6anfh"><span>#</span> <input type="number" min="1" class="edit-input num svelte-1k6anfh"/></div></div> <div class="edit-row notes svelte-1k6anfh"><textarea class="edit-input notes-area svelte-1k6anfh" placeholder="Notes..."></textarea></div> <div class="edit-actions svelte-1k6anfh"><button class="action-btn cancel svelte-1k6anfh">Cancel</button> <button class="action-btn save svelte-1k6anfh">Save</button></div></div>'),Gs=v('<span class="climb-type-tag svelte-1k6anfh"> </span>'),Os=v('<span class="notes-preview svelte-1k6anfh"> </span>'),js=v('<span class="attempts-count svelte-1k6anfh"> </span>'),As=v('<div class="detail-row svelte-1k6anfh"><span class="label svelte-1k6anfh">Notes:</span> <p class="notes svelte-1k6anfh"> </p></div>'),Ns=v('<p class="empty-notes svelte-1k6anfh">No notes for this climb.</p>'),Is=v('<div class="climb-details svelte-1k6anfh"><!> <div class="tags svelte-1k6anfh"><span class="tag type svelte-1k6anfh"> </span> <span class="tag attempt-text svelte-1k6anfh"> </span></div></div>'),Ms=v('<div class="climb-header svelte-1k6anfh" role="button" tabindex="0"><div class="climb-main-info svelte-1k6anfh"><span> </span> <span class="climb-name svelte-1k6anfh"> </span> <!> <!></div> <div class="climb-meta svelte-1k6anfh"><span><span class="icon svelte-1k6anfh"> </span> <!></span> <button class="icon-btn edit-btn svelte-1k6anfh" aria-label="Edit climb" title="Edit climb">‚úé</button> <button class="icon-btn delete-btn svelte-1k6anfh" aria-label="Delete climb" title="Delete climb">üóëÔ∏è</button> <span class="chevron svelte-1k6anfh"> </span></div></div> <!>',1),Ps=v("<div><!></div>");function Rs(Te,p){ut(p,!0);let r=Rt(p,"showClimbType",3,!1),g=S(!1),F=S(!1),k=S(""),u=S(""),q=S(""),x=S(1),B=S(""),X=S(!1);function oe(){e(F)||l(g,!e(g))}function pe(A){A.stopPropagation(),p.onDelete()}function se(A){A.stopPropagation(),l(k,p.climb.name,!0),l(u,p.climb.grade,!0),l(q,p.climb.attemptType,!0),l(x,p.climb.attemptsNum,!0),l(B,p.climb.notes,!0),l(X,p.climb.isSport,!0),l(F,!0),l(g,!0)}function ee(A){A.stopPropagation(),l(F,!1)}function H(A){A.stopPropagation();const _={...p.climb,name:e(k),grade:e(u),attemptType:e(q),attemptsNum:e(x),notes:e(B),isSport:e(X)};p.onUpdate(_),l(F,!1)}function de(){(e(q)==="Flash"||e(q)==="Onsight")&&l(x,1)}const _e={Flash:"‚ö°",Onsight:"üëÅÔ∏è",Redpoint:"üî¥",Dogged:"üõ†Ô∏è",DNF:"‚ùå"},re=["Flash","Onsight","Redpoint","Dogged","DNF"];var $=Ps();let ve;var xe=a($);{var be=A=>{var _=Es(),m=a(_),z=a(m);Me(z);var N=s(z,2);Me(N);var P=s(N,2);{var W=L=>{var ce=Fs(),ne=a(ce);Me(ne),Ct(2),t(ce),Jt(ne,()=>e(X),we=>l(X,we)),i(L,ce)};c(P,L=>{r()&&L(W)})}t(m);var J=s(m,2),b=a(J);b.__change=de,De(b,21,()=>re,ze,(L,ce)=>{var ne=Ls(),we=a(ne,!0);t(ne);var E={};f(()=>{d(we,e(ce)),E!==(E=e(ce))&&(ne.value=(ne.__value=e(ce))??"")}),i(L,ne)}),t(b);var O=s(b,2),y=s(a(O),2);Me(y),t(O),t(J);var n=s(J,2),o=a(n);Zt(o),t(n);var D=s(n,2),V=a(D);V.__click=ee;var K=s(V,2);K.__click=H,t(D),t(_),f(()=>y.disabled=e(q)==="Flash"||e(q)==="Onsight"),Pe(z,()=>e(u),L=>l(u,L)),Pe(N,()=>e(k),L=>l(k,L)),Dt(b,()=>e(q),L=>l(q,L)),Pe(y,()=>e(x),L=>l(x,L)),Pe(o,()=>e(B),L=>l(B,L)),i(A,_)},te=A=>{var _=Ms(),m=Ie(_);m.__click=oe,m.__keydown=w=>(w.key==="Enter"||w.key===" ")&&oe();var z=a(m),N=a(z);let P;var W=a(N,!0);t(N);var J=s(N,2),b=a(J,!0);t(J);var O=s(J,2);{var y=w=>{var j=Gs(),U=a(j,!0);t(j),f(()=>d(U,p.climb.isSport?"Sport":"Boulder")),i(w,j)};c(O,w=>{r()&&w(y)})}var n=s(O,2);{var o=w=>{var j=Os(),U=a(j);t(j),f(()=>d(U,`- ${p.climb.notes??""}`)),i(w,j)};c(n,w=>{!e(g)&&p.climb.notes&&w(o)})}t(z);var D=s(z,2),V=a(D);let K;var L=a(V),ce=a(L,!0);t(L);var ne=s(L,2);{var we=w=>{var j=js(),U=a(j,!0);t(j),f(()=>d(U,p.climb.attemptsNum)),i(w,j)};c(ne,w=>{p.climb.attemptType!=="Flash"&&p.climb.attemptType!=="Onsight"&&w(we)})}t(V);var E=s(V,2);E.__click=se;var I=s(E,2);I.__click=pe;var fe=s(I,2),ye=a(fe,!0);t(fe),t(D),t(m);var Se=s(m,2);{var T=w=>{var j=Is(),U=a(j);{var h=ke=>{var Ce=As(),le=s(a(Ce),2),he=a(le,!0);t(le),t(Ce),f(()=>d(he,p.climb.notes)),i(ke,Ce)},R=ke=>{var Ce=Ns();i(ke,Ce)};c(U,ke=>{p.climb.notes?ke(h):ke(R,!1)})}var ue=s(U,2),Y=a(ue),Q=a(Y,!0);t(Y);var ie=s(Y,2),Ee=a(ie,!0);t(ie),t(ue),t(j),f(()=>{d(Q,p.climb.isSport?"Sport":"Boulder"),d(Ee,p.climb.attemptType)}),ct(3,j,()=>gt,()=>({duration:150})),i(w,j)};c(Se,w=>{e(g)&&w(T)})}f(()=>{Qe(m,"aria-expanded",e(g)),P=dt(N,1,"grade-badge svelte-1k6anfh",null,P,{sport:p.climb.isSport}),d(W,p.climb.grade),d(b,p.climb.name||"Unnamed Route"),K=dt(V,1,"attempt-type svelte-1k6anfh",null,K,{flash:p.climb.attemptType==="Flash"}),d(ce,_e[p.climb.attemptType]||p.climb.attemptType),d(ye,e(g)?"‚ñ≤":"‚ñº")}),i(A,_)};c(xe,A=>{e(F)?A(be):A(te,!1)})}t($),f(()=>ve=dt($,1,"climb-entry svelte-1k6anfh",null,ve,{expanded:e(g),editing:e(F)})),i(Te,$),ft()}_t(["change","click","keydown"]);var Bs=v('<div class="sector-meta"> </div>'),Vs=v('<span class="stat svelte-d5hg2r"> </span>'),Us=v('<span class="status-icon pending svelte-d5hg2r" title="Waiting to sync">üîÑ</span>'),$s=v('<span class="status-icon error svelte-d5hg2r" title="Sync error">‚ö†Ô∏è</span>'),Ws=v('<span class="chip svelte-d5hg2r"> </span>'),Hs=v('<span class="text-none svelte-d5hg2r">None</span>'),Zs=v('<div class="detail-item svelte-d5hg2r"><span class="label svelte-d5hg2r">Difficulty</span> <span class="value svelte-d5hg2r"> </span></div>'),Js=v('<span class="chip svelte-d5hg2r"> </span>'),Ks=v('<span class="text-none svelte-d5hg2r">None</span>'),Xs=v('<div class="detail-item svelte-d5hg2r"><span class="label svelte-d5hg2r">Category</span> <div class="value-chips svelte-d5hg2r"><!></div></div>'),Ys=v('<span class="chip svelte-d5hg2r"> </span>'),Qs=v('<span class="text-none svelte-d5hg2r">None</span>'),er=v('<div class="detail-item svelte-d5hg2r"><span class="label svelte-d5hg2r">Focus</span> <div class="value-chips svelte-d5hg2r"><!></div></div>'),tr=v('<span class="chip svelte-d5hg2r"> </span>'),ar=v('<span class="text-none svelte-d5hg2r">None</span>'),sr=v('<div class="detail-item svelte-d5hg2r"><span class="label svelte-d5hg2r">Energy System</span> <div class="value-chips svelte-d5hg2r"><!></div></div>'),rr=v('<div class="metric svelte-d5hg2r"><span class="label svelte-d5hg2r">Open Grip</span> <div class="bar-container svelte-d5hg2r"><div class="bar-fill svelte-d5hg2r"></div></div> <span class="score svelte-d5hg2r"> </span></div>'),ir=v('<div class="metric svelte-d5hg2r"><span class="label svelte-d5hg2r">Crimp Grip</span> <div class="bar-container svelte-d5hg2r"><div class="bar-fill svelte-d5hg2r"></div></div> <span class="score svelte-d5hg2r"> </span></div>'),lr=v('<div class="metric svelte-d5hg2r"><span class="label svelte-d5hg2r">Pinch Grip</span> <div class="bar-container svelte-d5hg2r"><div class="bar-fill svelte-d5hg2r"></div></div> <span class="score svelte-d5hg2r"> </span></div>'),vr=v('<div class="metric svelte-d5hg2r"><span class="label svelte-d5hg2r">Sloper Grip</span> <div class="bar-container svelte-d5hg2r"><div class="bar-fill svelte-d5hg2r"></div></div> <span class="score svelte-d5hg2r"> </span></div>'),nr=v('<div class="metric svelte-d5hg2r"><span class="label svelte-d5hg2r">Jug Grip</span> <div class="bar-container svelte-d5hg2r"><div class="bar-fill svelte-d5hg2r"></div></div> <span class="score svelte-d5hg2r"> </span></div>'),or=v('<p class="no-climbs svelte-d5hg2r">No climbs logged for this session.</p>'),dr=v('<div class="card-body svelte-d5hg2r"><div class="details-grid svelte-d5hg2r"><div class="detail-item svelte-d5hg2r"><span class="label svelte-d5hg2r">Training Type</span> <div class="value-chips svelte-d5hg2r"><!></div></div> <!> <!> <!> <!></div> <div class="metrics-container svelte-d5hg2r"><div class="metric svelte-d5hg2r"><span class="label svelte-d5hg2r">Finger Load</span> <div class="bar-container svelte-d5hg2r"><div class="bar-fill svelte-d5hg2r"></div></div> <span class="score svelte-d5hg2r"> </span></div> <div class="metric svelte-d5hg2r"><span class="label svelte-d5hg2r">Shoulder Load</span> <div class="bar-container svelte-d5hg2r"><div class="bar-fill svelte-d5hg2r"></div></div> <span class="score svelte-d5hg2r"> </span></div> <div class="metric svelte-d5hg2r"><span class="label svelte-d5hg2r">Forearm Load</span> <div class="bar-container svelte-d5hg2r"><div class="bar-fill svelte-d5hg2r"></div></div> <span class="score svelte-d5hg2r"> </span></div> <!> <!> <!> <!> <!></div> <div class="climbs-list svelte-d5hg2r"><h4 class="svelte-d5hg2r">Climbs</h4> <div class="climbs-container svelte-d5hg2r"><!> <!></div></div></div>'),cr=v('<div><div class="card-header svelte-d5hg2r" role="button" tabindex="0"><div class="header-main svelte-d5hg2r"><div class="date-badge svelte-d5hg2r"><span class="day svelte-d5hg2r"> </span> <span class="month svelte-d5hg2r"> </span></div> <div class="session-info svelte-d5hg2r"><div class="session-text svelte-d5hg2r"><h3 class="location svelte-d5hg2r"> <!></h3> <!> <div class="session-meta svelte-d5hg2r"><span class="type-tag svelte-d5hg2r"> </span> <span class="stat svelte-d5hg2r"> </span> <!></div></div> <div class="load-summary svelte-d5hg2r"><div class="load-badge finger svelte-d5hg2r"> </div> <div class="load-badge shoulder svelte-d5hg2r"> </div> <div class="load-badge forearm svelte-d5hg2r"> </div></div></div></div> <div class="header-actions"><div class="header-status svelte-d5hg2r"><!></div> <button class="btn-icon delete-session" title="Delete Session">üóëÔ∏è</button> <span class="chevron svelte-d5hg2r"> </span></div></div> <!></div>');function pr(Te,p){ut(p,!0);let r=Rt(p,"session",7),g=S(!1),F=S(!1);function k(){l(g,!e(g))}function u(){l(F,!0)}function q(h){const R=[...r().climbs];R.splice(h,1),It(r().id,{climbs:R}),p.onDelete()}function x(h,R){const ue=[...r().climbs];ue[h]=R,B(ue)}async function B(h){if(It(r().id,{climbs:h}),r().climbs=h,Kt()){const R={date:r().date,area:r().area,crag:r().crag,sector:r().sector,climbingType:r().climbingType,trainingTypes:r().trainingTypes||[],difficulty:r().difficulty,categories:r().categories||[],energySystems:r().energySystems||[],techniqueFocuses:r().techniqueFocuses||[],fingerLoad:r().fingerLoad,shoulderLoad:r().shoulderLoad,forearmLoad:r().forearmLoad,climbs:h};try{const ue=await ra(r().id,R);ue.ok?(Xt(r().id),r().syncStatus="synced"):(console.error("Failed to sync update:",ue.error),Mt(r().id),r().syncStatus="error")}catch(ue){console.error("Exception syncing update:",ue),Mt(r().id),r().syncStatus="error"}}}let X=pt(()=>r().climbs?.length??0),oe=pt(()=>(r().climbs||[]).reduce((h,R)=>{const ue=parseInt(R.grade.replace(/\D/g,""))||0,Y=parseInt(h.replace(/\D/g,""))||0;return ue>Y?R.grade:h},"V0/4a"));var pe=cr();let se;var ee=a(pe);ee.__click=k,ee.__keydown=h=>h.key==="Enter"&&k();var H=a(ee),de=a(H),_e=a(de),re=a(_e,!0);t(_e);var $=s(_e,2),ve=a($,!0);t($),t(de);var xe=s(de,2),be=a(xe),te=a(be),A=a(te),_=s(A);{var m=h=>{var R=zt();f(()=>d(R,`- ${r().crag??""}`)),i(h,R)};c(_,h=>{r().crag&&h(m)})}t(te);var z=s(te,2);{var N=h=>{var R=Bs(),ue=a(R);t(R),f(()=>d(ue,`üìç ${r().sector??""}`)),i(h,R)};c(z,h=>{r().sector&&h(N)})}var P=s(z,2),W=a(P),J=a(W,!0);t(W);var b=s(W,2),O=a(b);t(b);var y=s(b,2);{var n=h=>{var R=Vs(),ue=a(R);t(R),f(()=>d(ue,`Max: ${e(oe)??""}`)),i(h,R)};c(y,h=>{e(X)>0&&h(n)})}t(P),t(be);var o=s(be,2),D=a(o),V=a(D,!0);t(D);var K=s(D,2),L=a(K,!0);t(K);var ce=s(K,2),ne=a(ce,!0);t(ce),t(o),t(xe),t(H);var we=s(H,2),E=a(we),I=a(E);{var fe=h=>{var R=Us();i(h,R)},ye=h=>{var R=Ye(),ue=Ie(R);{var Y=Q=>{var ie=$s();i(Q,ie)};c(ue,Q=>{r().syncStatus==="error"&&Q(Y)},!0)}i(h,R)};c(I,h=>{r().syncStatus==="pending"?h(fe):h(ye,!1)})}t(E);var Se=s(E,2);Se.__click=h=>{h.stopPropagation(),u()};var T=s(Se,2),w=a(T,!0);t(T),t(we),t(ee);var j=s(ee,2);{var U=h=>{var R=dr(),ue=a(R),Y=a(ue),Q=s(a(Y),2),ie=a(Q);{var Ee=C=>{var G=Ye(),M=Ie(G);De(M,17,()=>r().trainingTypes,ze,(me,Le)=>{var Ne=Ws(),Ge=a(Ne,!0);t(Ne),f(()=>d(Ge,e(Le))),i(me,Ne)}),i(C,G)},ke=C=>{var G=Hs();i(C,G)};c(ie,C=>{r().trainingTypes&&r().trainingTypes.length>0&&!r().trainingTypes.includes("None")?C(Ee):C(ke,!1)})}t(Q),t(Y);var Ce=s(Y,2);{var le=C=>{var G=Zs(),M=s(a(G),2),me=a(M,!0);t(M),t(G),f(()=>d(me,r().difficulty)),i(C,G)};c(Ce,C=>{r().difficulty&&C(le)})}var he=s(Ce,2);{var qe=C=>{var G=Xs(),M=s(a(G),2),me=a(M);{var Le=Ge=>{var je=Ye(),St=Ie(je);De(St,17,()=>r().categories,ze,(Gt,Ot)=>{var kt=Js(),jt=a(kt,!0);t(kt),f(()=>d(jt,e(Ot))),i(Gt,kt)}),i(Ge,je)},Ne=Ge=>{var je=Ks();i(Ge,je)};c(me,Ge=>{r().categories.length>0&&!r().categories.includes("None")?Ge(Le):Ge(Ne,!1)})}t(M),t(G),i(C,G)};c(he,C=>{r().categories?.length&&C(qe)})}var Fe=s(he,2);{var Ue=C=>{var G=er(),M=s(a(G),2),me=a(M);{var Le=Ge=>{var je=Ye(),St=Ie(je);De(St,17,()=>r().techniqueFocuses,ze,(Gt,Ot)=>{var kt=Ys(),jt=a(kt,!0);t(kt),f(()=>d(jt,e(Ot))),i(Gt,kt)}),i(Ge,je)},Ne=Ge=>{var je=Qs();i(Ge,je)};c(me,Ge=>{r().techniqueFocuses.length>0&&!r().techniqueFocuses.includes("None")?Ge(Le):Ge(Ne,!1)})}t(M),t(G),i(C,G)};c(Fe,C=>{r().techniqueFocuses?.length&&C(Ue)})}var et=s(Fe,2);{var Re=C=>{var G=sr(),M=s(a(G),2),me=a(M);{var Le=Ge=>{var je=Ye(),St=Ie(je);De(St,17,()=>r().energySystems,ze,(Gt,Ot)=>{var kt=tr(),jt=a(kt,!0);t(kt),f(()=>d(jt,e(Ot))),i(Gt,kt)}),i(Ge,je)},Ne=Ge=>{var je=ar();i(Ge,je)};c(me,Ge=>{r().energySystems.length>0&&!r().energySystems.includes("None")?Ge(Le):Ge(Ne,!1)})}t(M),t(G),i(C,G)};c(et,C=>{r().energySystems?.length&&C(Re)})}t(ue);var Be=s(ue,2),$e=a(Be),tt=s(a($e),2),We=a(tt);t(tt);var at=s(tt,2),mt=a(at);t(at),t($e);var He=s($e,2),it=s(a(He),2),st=a(it);t(it);var Oe=s(it,2),Ze=a(Oe);t(Oe),t(He);var Ve=s(He,2),lt=s(a(Ve),2),vt=a(lt);t(lt);var nt=s(lt,2),Je=a(nt);t(nt),t(Ve);var Ke=s(Ve,2);{var Tt=C=>{var G=rr(),M=s(a(G),2),me=a(M);t(M);var Le=s(M,2),Ne=a(Le);t(Le),t(G),f(()=>{ot(me,`width: ${r().openGrip/5*100}%`),d(Ne,`${r().openGrip??""}/5`)}),i(C,G)};c(Ke,C=>{r().openGrip&&C(Tt)})}var Xe=s(Ke,2);{var Ft=C=>{var G=ir(),M=s(a(G),2),me=a(M);t(M);var Le=s(M,2),Ne=a(Le);t(Le),t(G),f(()=>{ot(me,`width: ${r().crimpGrip/5*100}%`),d(Ne,`${r().crimpGrip??""}/5`)}),i(C,G)};c(Xe,C=>{r().crimpGrip&&C(Ft)})}var yt=s(Xe,2);{var xt=C=>{var G=lr(),M=s(a(G),2),me=a(M);t(M);var Le=s(M,2),Ne=a(Le);t(Le),t(G),f(()=>{ot(me,`width: ${r().pinchGrip/5*100}%`),d(Ne,`${r().pinchGrip??""}/5`)}),i(C,G)};c(yt,C=>{r().pinchGrip&&C(xt)})}var wt=s(yt,2);{var qt=C=>{var G=vr(),M=s(a(G),2),me=a(M);t(M);var Le=s(M,2),Ne=a(Le);t(Le),t(G),f(()=>{ot(me,`width: ${r().sloperGrip/5*100}%`),d(Ne,`${r().sloperGrip??""}/5`)}),i(C,G)};c(wt,C=>{r().sloperGrip&&C(qt)})}var Lt=s(wt,2);{var rt=C=>{var G=nr(),M=s(a(G),2),me=a(M);t(M);var Le=s(M,2),Ne=a(Le);t(Le),t(G),f(()=>{ot(me,`width: ${r().jugGrip/5*100}%`),d(Ne,`${r().jugGrip??""}/5`)}),i(C,G)};c(Lt,C=>{r().jugGrip&&C(rt)})}t(Be);var ht=s(Be,2),Z=s(a(ht),2),ae=a(Z);De(ae,17,()=>r().climbs||[],ze,(C,G,M)=>{{let me=pt(()=>r().climbingType==="Mixed");Rs(C,{get climb(){return e(G)},onDelete:()=>q(M),onUpdate:Le=>x(M,Le),get showClimbType(){return e(me)}})}});var ge=s(ae,2);{var Ae=C=>{var G=or();i(C,G)};c(ge,C=>{(r().climbs||[]).length===0&&C(Ae)})}t(Z),t(ht),t(R),f(()=>{ot(We,`width: ${r().fingerLoad/5*100}%`),d(mt,`${r().fingerLoad??""}/5`),ot(st,`width: ${r().shoulderLoad/5*100}%`),d(Ze,`${r().shoulderLoad??""}/5`),ot(vt,`width: ${r().forearmLoad/5*100}%`),d(Je,`${r().forearmLoad??""}/5`)}),ct(3,R,()=>gt,()=>({duration:150})),i(h,R)};c(j,h=>{e(g)&&h(U)})}t(pe),f((h,R)=>{se=dt(pe,1,"session-card svelte-d5hg2r",null,se,{expanded:e(g)}),Qe(ee,"aria-expanded",e(g)),d(re,h),d(ve,R),d(A,`${r().area??""} `),d(J,r().climbingType),d(O,`${e(X)??""} climbs`),Qe(D,"title",`Finger Load: ${r().fingerLoad??""}`),d(V,r().fingerLoad),Qe(K,"title",`Shoulder Load: ${r().shoulderLoad??""}`),d(L,r().shoulderLoad),Qe(ce,"title",`Forearm Load: ${r().forearmLoad??""}`),d(ne,r().forearmLoad),d(w,e(g)?"‚ñ≤":"‚ñº")},[()=>new Date(r().date).getDate(),()=>new Date(r().date).toLocaleDateString(void 0,{month:"short"})]),i(Te,pe),ft()}_t(["click","keydown"]);var _r=v('<span class="spinner svelte-1s7jdlh"></span> Fetching...',1),ur=v('<div class="error-banner svelte-1s7jdlh"> </div>'),fr=v('<small class="svelte-1s7jdlh">Try adjusting your filters.</small>'),gr=v('<div class="empty-state svelte-1s7jdlh"><p class="svelte-1s7jdlh">No outdoor climbing sessions found.</p> <!></div>'),mr=v('<div class="load-more-container svelte-1s7jdlh"><button class="load-more-btn svelte-1s7jdlh"> </button></div>'),hr=v('<div class="view-container svelte-1s7jdlh"><div class="view-header svelte-1s7jdlh"><h2 class="view-title svelte-1s7jdlh">‚õ∞Ô∏è Outdoor Climbing History</h2> <div class="header-actions svelte-1s7jdlh"><button class="action-btn secondary svelte-1s7jdlh" title="Export filtered data to CSV">üì• Export</button> <button class="action-btn svelte-1s7jdlh" title="Fetch data from cloud"><!></button></div></div> <!> <!> <div class="info-bar svelte-1s7jdlh"><div class="legend-wrapper svelte-1s7jdlh"><!></div> <div class="load-key svelte-1s7jdlh"><span class="key-label svelte-1s7jdlh">Load:</span> <div class="key-item svelte-1s7jdlh"><span class="dot finger svelte-1s7jdlh"></span> Finger</div> <div class="key-item svelte-1s7jdlh"><span class="dot shoulder svelte-1s7jdlh"></span> Shoulder</div> <div class="key-item svelte-1s7jdlh"><span class="dot forearm svelte-1s7jdlh"></span> Forearm</div></div></div> <div class="sessions-list"><!> <!> <!></div></div>');function br(Te,p){ut(p,!0);let r=S(bt([])),g=S(bt([])),F=S(!1),k=S(""),u=S(bt({startDate:"",endDate:"",area:"",crag:"",climbingType:"",sessionType:"",grade:""})),q=S(20);const x=20;Ut(()=>{B()});function B(){const n=Et("outdoor_climb");l(r,n.sort((o,D)=>new Date(D.date).getTime()-new Date(o.date).getTime()),!0),se()}async function X(){l(F,!0),l(k,"");try{await At();const n=await ia();n.ok&&n.data?oe(n.data):l(k,n.error||"Failed to fetch data",!0)}catch(n){l(k,n instanceof Error?n.message:"Unknown error",!0)}finally{l(F,!1)}}function oe(n){const o=n.map(V=>({...V,activityType:"outdoor_climb",createdAt:new Date().toISOString(),updatedAt:new Date().toISOString(),syncStatus:"synced",syncedAt:new Date().toISOString(),openGrip:0,crimpGrip:0,pinchGrip:0,sloperGrip:0,jugGrip:0}));Nt(o);const D=Et("outdoor_climb");l(r,D.sort((V,K)=>new Date(K.date).getTime()-new Date(V.date).getTime()),!0),se()}function pe(n){l(u,n,!0),se()}function se(){l(q,x),l(g,e(r).filter(n=>{if(e(u).startDate&&n.date<e(u).startDate||e(u).endDate&&n.date>e(u).endDate||e(u).area&&!n.area.toLowerCase().includes(e(u).area.toLowerCase())||e(u).crag&&!n.crag.toLowerCase().includes(e(u).crag.toLowerCase()))return!1;if(e(u).climbingType&&(n.climbingType==="Leading"?"Sport":n.climbingType)!==e(u).climbingType)if(n.climbingType==="Mixed")if(e(u).climbingType==="Bouldering"){if(!n.climbs.some(D=>!D.isSport))return!1}else if(e(u).climbingType==="Sport"||e(u).climbingType==="Trad"){if(!n.climbs.some(D=>D.isSport))return!1}else return!1;else return!1;if(e(u).sessionType&&!n.trainingTypes?.includes(e(u).sessionType))return!1;if(e(u).grade){const o=e(u).grade.trim().toLowerCase();if(!n.climbs.some(V=>V.grade.trim().toLowerCase()===o))return!1}return!0}),!0)}function ee(){l(q,e(q)+x)}var H=hr(),de=a(H),_e=s(a(de),2),re=a(_e);re.__click=()=>Wt(e(g),"outdoor_climbs");var $=s(re,2);$.__click=X;var ve=a($);{var xe=n=>{var o=_r();Ct(),i(n,o)},be=n=>{var o=zt("‚òÅÔ∏è Fetch Data");i(n,o)};c(ve,n=>{e(F)?n(xe):n(be,!1)})}t($),t(_e),t(de);var te=s(de,2);{var A=n=>{var o=ur(),D=a(o,!0);t(o),f(()=>d(D,e(k))),ct(3,o,()=>gt),i(n,o)};c(te,n=>{e(k)&&n(A)})}var _=s(te,2);Cs(_,{onFilterParamsChange:pe});var m=s(_,2),z=a(m),N=a(z);Yt(N),t(z),Ct(2),t(m);var P=s(m,2),W=a(P);De(W,17,()=>e(g).slice(0,e(q)),n=>n.id,(n,o)=>{pr(n,{get session(){return e(o)},onDelete:B})});var J=s(W,2);{var b=n=>{var o=gr(),D=s(a(o),2);{var V=K=>{var L=fr();i(K,L)};c(D,K=>{e(r).length>0&&K(V)})}t(o),i(n,o)};c(J,n=>{e(g).length===0&&n(b)})}var O=s(J,2);{var y=n=>{var o=mr(),D=a(o);D.__click=ee;var V=a(D);t(D),t(o),f(()=>d(V,`Load More (${e(g).length-e(q)} remaining)`)),i(n,o)};c(O,n=>{e(q)<e(g).length&&n(y)})}t(P),t(H),f(()=>$.disabled=e(F)),i(Te,H),ft()}_t(["click"]);var yr=v('<span class="chevron svelte-11rkzid">‚ñ≤</span>'),xr=v('<span class="chevron svelte-11rkzid">‚ñº</span>'),wr=v('<div class="filter-body svelte-11rkzid"><div class="filter-grid svelte-11rkzid"><div class="filter-item svelte-11rkzid"><label for="start-date" class="svelte-11rkzid">Start Date</label> <input type="date" id="start-date" class="svelte-11rkzid"/></div> <div class="filter-item svelte-11rkzid"><label for="end-date" class="svelte-11rkzid">End Date</label> <input type="date" id="end-date" class="svelte-11rkzid"/></div> <div class="filter-item svelte-11rkzid"><label for="name-filter" class="svelte-11rkzid">Session Name</label> <input type="text" id="name-filter" placeholder="e.g. Leg Day" class="svelte-11rkzid"/></div> <div class="filter-item svelte-11rkzid"><label for="block-filter" class="svelte-11rkzid">Training Block</label> <select id="block-filter" class="svelte-11rkzid"><option>All Blocks</option><option>Strength</option><option>Power</option><option>Power Endurance</option><option>Muscular Endurance</option></select></div></div> <div class="filter-actions svelte-11rkzid"><button class="reset-btn svelte-11rkzid">Reset Filters</button></div></div>'),Sr=v('<div class="filter-container svelte-11rkzid"><button class="filter-header svelte-11rkzid"><div class="header-content svelte-11rkzid"><span class="icon svelte-11rkzid">üîç</span> <span class="title svelte-11rkzid">Filters</span> <!></div></button> <!></div>');function kr(Te,p){ut(p,!0);let r=S(!1),g=S(""),F=S(""),k=S(""),u=S("");function q(){l(r,!e(r))}function x(){l(g,""),l(F,""),l(k,""),l(u,""),B()}function B(){p.onFilterParamsChange({startDate:e(g),endDate:e(F),name:e(k),trainingBlock:e(u)})}var X=Sr(),oe=a(X);oe.__click=q;var pe=a(oe),se=s(a(pe),4);{var ee=re=>{var $=yr();i(re,$)},H=re=>{var $=xr();i(re,$)};c(se,re=>{e(r)?re(ee):re(H,!1)})}t(pe),t(oe);var de=s(oe,2);{var _e=re=>{var $=wr(),ve=a($),xe=a(ve),be=s(a(xe),2);Me(be),be.__change=B,t(xe);var te=s(xe,2),A=s(a(te),2);Me(A),A.__change=B,t(te);var _=s(te,2),m=s(a(_),2);Me(m),m.__input=B,t(_);var z=s(_,2),N=s(a(z),2);N.__change=B;var P=a(N);P.value=P.__value="";var W=s(P);W.value=W.__value="Strength";var J=s(W);J.value=J.__value="Power";var b=s(J);b.value=b.__value="Power Endurance";var O=s(b);O.value=O.__value="Muscular Endurance",t(N),t(z),t(ve);var y=s(ve,2),n=a(y);n.__click=x,t(y),t($),Pe(be,()=>e(g),o=>l(g,o)),Pe(A,()=>e(F),o=>l(F,o)),Pe(m,()=>e(k),o=>l(k,o)),Dt(N,()=>e(u),o=>l(u,o)),ct(3,$,()=>gt,()=>({duration:200})),i(re,$)};c(de,re=>{e(r)&&re(_e)})}t(X),f(()=>Qe(oe,"aria-expanded",e(r))),i(Te,X),ft()}_t(["click","change","input"]);var Dr=v('<span class="status-icon pending svelte-cirrfc" title="Waiting to sync">üîÑ</span>'),Tr=v('<span class="status-icon error svelte-cirrfc" title="Sync error">‚ö†Ô∏è</span>'),qr=v('<div class="bw-info svelte-cirrfc"><span class="label svelte-cirrfc">Bodyweight:</span> </div>'),zr=v('<span class="muscle-tag svelte-cirrfc"> </span>'),Cr=v('<span class="muscle-tag svelte-cirrfc"> </span>'),Fr=v('<div class="muscle-tags svelte-cirrfc"><!> <!></div>'),Lr=v('<span class="tag w svelte-cirrfc">W</span>'),Er=v('<span class="tag f svelte-cirrfc">F</span>'),Gr=v('<span class="tag d svelte-cirrfc">D</span>'),Or=v('<div><span class="set-num svelte-cirrfc"></span> <!> <!> <!> <span class="val svelte-cirrfc"><span class="weight"> </span> <span class="x svelte-cirrfc">x</span> <span class="reps"> </span></span></div>'),jr=v('<div class="exercise-item svelte-cirrfc"><div class="exercise-header svelte-cirrfc"><h4 class="svelte-cirrfc"> </h4> <!></div> <div class="sets-grid svelte-cirrfc"></div></div>'),Ar=v('<div class="subcategory-group svelte-cirrfc"><h5 class="subcategory-header svelte-cirrfc"> </h5> <!></div>'),Nr=v('<div class="category-group svelte-cirrfc"><h4 class="category-header svelte-cirrfc"> </h4> <!></div>'),Ir=v('<div class="card-body svelte-cirrfc"><!> <div class="exercises-list svelte-cirrfc"></div></div>'),Mr=v('<div><div class="card-header svelte-cirrfc" role="button" tabindex="0"><div class="header-main svelte-cirrfc"><div class="date-badge svelte-cirrfc"><span class="day svelte-cirrfc"> </span> <span class="month svelte-cirrfc"> </span></div> <div class="session-info svelte-cirrfc"><div class="session-text"><h3 class="name svelte-cirrfc"> </h3> <div class="session-meta svelte-cirrfc"><span class="stat svelte-cirrfc"> </span> <span class="stat svelte-cirrfc"> </span> <span class="stat svelte-cirrfc"> </span></div></div></div></div> <div class="header-actions svelte-cirrfc"><div class="header-status"><!></div> <button class="btn-icon delete-session svelte-cirrfc" title="Delete Session">üóëÔ∏è</button> <span class="chevron svelte-cirrfc"> </span></div></div> <!></div> <!>',1);function Pr(Te,p){ut(p,!0);let r=S(!1),g=S(!1);function F(){l(r,!e(r))}function k(){l(g,!0)}function u(){$t(p.session.id),l(g,!1),p.onDelete()}function q(E){return la.find(I=>I.name===E)}let x=pt(()=>p.session.exercises?.length??0),B=pt(()=>(p.session.exercises||[]).reduce((E,I)=>E+(I.sets?.length||0),0)),X=pt(()=>(p.session.exercises||[]).reduce((E,I)=>E+(I.sets||[]).reduce((fe,ye)=>fe+(ye.weight||0)*(ye.reps||0),0),0)),oe=pt(()=>(p.session.exercises||[]).reduce((E,I)=>{const fe=q(I.name),ye=fe?.category||"Other",Se=fe?.subcategory||"Misc";return E[ye]||(E[ye]={}),E[ye][Se]||(E[ye][Se]=[]),E[ye][Se].push(I),E},{}));var pe=Mr(),se=Ie(pe);let ee;var H=a(se);H.__click=F,H.__keydown=E=>E.key==="Enter"&&F();var de=a(H),_e=a(de),re=a(_e),$=a(re,!0);t(re);var ve=s(re,2),xe=a(ve,!0);t(ve),t(_e);var be=s(_e,2),te=a(be),A=a(te),_=a(A,!0);t(A);var m=s(A,2),z=a(m),N=a(z);t(z);var P=s(z,2),W=a(P);t(P);var J=s(P,2),b=a(J);t(J),t(m),t(te),t(be),t(de);var O=s(de,2),y=a(O),n=a(y);{var o=E=>{var I=Dr();i(E,I)},D=E=>{var I=Ye(),fe=Ie(I);{var ye=Se=>{var T=Tr();i(Se,T)};c(fe,Se=>{p.session.syncStatus==="error"&&Se(ye)},!0)}i(E,I)};c(n,E=>{p.session.syncStatus==="pending"?E(o):E(D,!1)})}t(y);var V=s(y,2);V.__click=E=>{E.stopPropagation(),k()};var K=s(V,2),L=a(K,!0);t(K),t(O),t(H);var ce=s(H,2);{var ne=E=>{var I=Ir(),fe=a(I);{var ye=T=>{var w=qr(),j=s(a(w));t(w),f(()=>d(j,` ${p.session.bodyweight??""}kg`)),i(T,w)};c(fe,T=>{p.session.bodyweight&&T(ye)})}var Se=s(fe,2);De(Se,21,()=>Object.entries(e(oe)),ze,(T,w)=>{var j=pt(()=>Ht(e(w),2));let U=()=>e(j)[0],h=()=>e(j)[1];var R=Nr(),ue=a(R),Y=a(ue,!0);t(ue);var Q=s(ue,2);De(Q,17,()=>Object.entries(h()),ze,(ie,Ee)=>{var ke=pt(()=>Ht(e(Ee),2));let Ce=()=>e(ke)[0],le=()=>e(ke)[1];var he=Ar(),qe=a(he),Fe=a(qe,!0);t(qe);var Ue=s(qe,2);De(Ue,17,le,ze,(et,Re)=>{const Be=pt(()=>q(e(Re).name));var $e=jr(),tt=a($e),We=a(tt),at=a(We,!0);t(We);var mt=s(We,2);{var He=st=>{var Oe=Fr(),Ze=a(Oe);De(Ze,17,()=>e(Be).targetMuscles.slice(0,3),ze,(vt,nt)=>{var Je=zr(),Ke=a(Je,!0);t(Je),f(()=>d(Ke,e(nt))),i(vt,Je)});var Ve=s(Ze,2);{var lt=vt=>{var nt=Cr(),Je=a(nt);t(nt),f(()=>d(Je,`+${e(Be).targetMuscles.length-3}`)),i(vt,nt)};c(Ve,vt=>{e(Be).targetMuscles.length>3&&vt(lt)})}t(Oe),i(st,Oe)};c(mt,st=>{e(Be)&&st(He)})}t(tt);var it=s(tt,2);De(it,21,()=>e(Re).sets,ze,(st,Oe,Ze)=>{var Ve=Or();let lt;var vt=a(Ve);vt.textContent=Ze+1;var nt=s(vt,2);{var Je=rt=>{var ht=Lr();i(rt,ht)};c(nt,rt=>{e(Oe).isWarmup&&rt(Je)})}var Ke=s(nt,2);{var Tt=rt=>{var ht=Er();i(rt,ht)};c(Ke,rt=>{e(Oe).isFailure&&rt(Tt)})}var Xe=s(Ke,2);{var Ft=rt=>{var ht=Gr();i(rt,ht)};c(Xe,rt=>{e(Oe).isDropSet&&rt(Ft)})}var yt=s(Xe,2),xt=a(yt),wt=a(xt);t(xt);var qt=s(xt,4),Lt=a(qt,!0);t(qt),t(yt),t(Ve),f(()=>{lt=dt(Ve,1,"set-pill svelte-cirrfc",null,lt,{completed:e(Oe).completed,warmup:e(Oe).isWarmup}),d(wt,`${e(Oe).weight??""}kg`),d(Lt,e(Oe).reps)}),i(st,Ve)}),t(it),t($e),f(()=>d(at,e(Re).name)),i(et,$e)}),t(he),f(()=>d(Fe,Ce())),i(ie,he)}),t(R),f(()=>d(Y,U())),i(T,R)}),t(Se),t(I),ct(3,I,()=>gt,()=>({duration:150})),i(E,I)};c(ce,E=>{e(r)&&E(ne)})}t(se);var we=s(se,2);Pt(we,{get isOpen(){return e(g)},title:"Delete Session",message:"Are you sure you want to delete this session? This cannot be undone.",onConfirm:u,onCancel:()=>l(g,!1)}),f((E,I,fe)=>{ee=dt(se,1,"session-card svelte-cirrfc",null,ee,{expanded:e(r)}),Qe(H,"aria-expanded",e(r)),d($,E),d(xe,I),d(_,p.session.name),d(N,`${e(x)??""} Exercises`),d(W,`${e(B)??""} Sets`),d(b,`~${fe??""}kg Vol`),d(L,e(r)?"‚ñ≤":"‚ñº")},[()=>new Date(p.session.date).getDate(),()=>new Date(p.session.date).toLocaleDateString("en-GB",{month:"short"}),()=>Math.round(e(X)).toLocaleString()]),i(Te,pe),ft()}_t(["click","keydown"]);var Rr=v('<span class="spinner svelte-133enjd"></span> Fetching...',1),Br=v('<div class="error-banner svelte-133enjd"> </div>'),Vr=v('<small class="svelte-133enjd">Try adjusting your filters.</small>'),Ur=v('<div class="empty-state svelte-133enjd"><p class="svelte-133enjd">No gym sessions found.</p> <!></div>'),$r=v('<div class="load-more-container svelte-133enjd"><button class="load-more-btn svelte-133enjd"> </button></div>'),Wr=v('<div class="view-container svelte-133enjd"><div class="view-header svelte-133enjd"><h2 class="view-title svelte-133enjd">üèãÔ∏è Gym Session History</h2> <div class="header-actions svelte-133enjd"><button class="action-btn secondary svelte-133enjd" title="Export filtered data to CSV">üì• Export</button> <button class="action-btn svelte-133enjd" title="Fetch data from cloud"><!></button></div></div> <!> <!> <div class="sessions-list"><!> <!> <!></div></div>');function Hr(Te,p){ut(p,!0);let r=S(bt([])),g=S(bt([])),F=S(!1),k=S(""),u=S(bt({startDate:"",endDate:"",name:"",trainingBlock:""})),q=S(20);const x=20;Ut(()=>{B()});function B(){const b=Et("gym_session");l(r,b.sort((O,y)=>new Date(y.date).getTime()-new Date(O.date).getTime()),!0),se()}async function X(){l(F,!0),l(k,"");try{await At();const b=await va();b.ok&&b.data?oe(b.data):l(k,b.error||"Failed to fetch data",!0)}catch(b){l(k,b instanceof Error?b.message:"Unknown error",!0)}finally{l(F,!1)}}function oe(b){const O=b.map(n=>({...n,activityType:"gym_session",syncStatus:"synced",syncedAt:new Date().toISOString(),createdAt:n.createdAt||new Date().toISOString(),updatedAt:n.updatedAt||new Date().toISOString()}));Nt(O);const y=Et("gym_session");l(r,y.sort((n,o)=>new Date(o.date).getTime()-new Date(n.date).getTime()),!0),se()}function pe(b){l(u,b,!0),se()}function se(){l(q,x),l(g,e(r).filter(b=>!(e(u).startDate&&b.date<e(u).startDate||e(u).endDate&&b.date>e(u).endDate||e(u).name&&!b.name.toLowerCase().includes(e(u).name.toLowerCase())||e(u).trainingBlock&&b.trainingBlock!==e(u).trainingBlock)),!0)}function ee(){l(q,e(q)+x)}var H=Wr(),de=a(H),_e=s(a(de),2),re=a(_e);re.__click=()=>Wt(e(g),"gym_sessions");var $=s(re,2);$.__click=X;var ve=a($);{var xe=b=>{var O=Rr();Ct(),i(b,O)},be=b=>{var O=zt("‚òÅÔ∏è Fetch Data");i(b,O)};c(ve,b=>{e(F)?b(xe):b(be,!1)})}t($),t(_e),t(de);var te=s(de,2);{var A=b=>{var O=Br(),y=a(O,!0);t(O),f(()=>d(y,e(k))),ct(3,O,()=>gt),i(b,O)};c(te,b=>{e(k)&&b(A)})}var _=s(te,2);kr(_,{onFilterParamsChange:pe});var m=s(_,2),z=a(m);De(z,17,()=>e(g).slice(0,e(q)),b=>b.id,(b,O)=>{Pr(b,{get session(){return e(O)},onDelete:B})});var N=s(z,2);{var P=b=>{var O=Ur(),y=s(a(O),2);{var n=o=>{var D=Vr();i(o,D)};c(y,o=>{e(r).length>0&&o(n)})}t(O),i(b,O)};c(N,b=>{e(g).length===0&&b(P)})}var W=s(N,2);{var J=b=>{var O=$r(),y=a(O);y.__click=ee;var n=a(y);t(y),t(O),f(()=>d(n,`Load More (${e(g).length-e(q)} remaining)`)),i(b,O)};c(W,b=>{e(q)<e(g).length&&b(J)})}t(m),t(H),f(()=>$.disabled=e(F)),i(Te,H),ft()}_t(["click"]);var Zr=v('<span class="spinner svelte-1szs0u9"></span> Fetching...',1),Jr=v('<div class="loading svelte-1szs0u9">Loading sessions...</div>'),Kr=v('<div class="empty-state svelte-1szs0u9"><!></div>'),Xr=v('<span class="set-tag svelte-1szs0u9"> <span class="x svelte-1szs0u9">x</span> </span>'),Yr=v('<div class="ex-notes svelte-1szs0u9"> </div>'),Qr=v('<div class="exercise-item svelte-1szs0u9"><div class="ex-header svelte-1szs0u9"><span class="ex-name svelte-1szs0u9"> </span> <span class="ex-grip svelte-1szs0u9"> </span></div> <div class="ex-sets svelte-1szs0u9"></div> <!></div>'),ei=v('<div class="card-body svelte-1szs0u9"><div class="exercises-list svelte-1szs0u9"></div></div>'),ti=v('<div><div class="card-header svelte-1szs0u9" role="button" tabindex="0"><div class="header-main"><span class="session-date svelte-1szs0u9"> </span> <span class="meta svelte-1szs0u9"><!> </span></div> <div class="header-status svelte-1szs0u9"><span>‚óè</span> <button class="btn-icon delete-btn svelte-1szs0u9" title="Delete Session">üóëÔ∏è</button> <span class="chevron svelte-1szs0u9"> </span></div></div> <!></div>'),ai=v('<div class="load-more-container svelte-1szs0u9"><button class="load-more-btn svelte-1szs0u9"> </button></div>'),si=v('<div class="timeline svelte-1szs0u9"><!> <!></div>'),ri=v('<div class="view-content svelte-1szs0u9"><div class="header svelte-1szs0u9"><h3 class="svelte-1szs0u9">ü§è Fingerboarding Log</h3> <button class="fetch-btn svelte-1szs0u9" title="Fetch data from cloud"><!></button></div> <div class="filters svelte-1szs0u9"><div class="filter-group svelte-1szs0u9"><label for="start-date" class="svelte-1szs0u9">From</label> <input type="date" id="start-date" class="svelte-1szs0u9"/></div> <div class="filter-group svelte-1szs0u9"><label for="end-date" class="svelte-1szs0u9">To</label> <input type="date" id="end-date" class="svelte-1szs0u9"/></div></div> <!></div> <!>',1);function ii(Te,p){ut(p,!0);let r=S(bt([])),g=S(!0),F=S(""),k=S(""),u=S(bt(new Set)),q=S(20);const x=20;Qt(()=>{e(F),e(k),l(q,x)});let B=S(!1),X=S(null);function oe(y){l(X,y,!0),l(B,!0)}function pe(){e(X)&&($t(e(X)),l(X,null),l(B,!1),l(r,Bt().sort((y,n)=>new Date(n.date).getTime()-new Date(y.date).getTime()),!0))}async function se(){l(g,!0),l(r,Bt().sort((y,n)=>new Date(n.date).getTime()-new Date(y.date).getTime()),!0);try{await At();const y=await na();if(y.ok&&y.data){const n=y.data.map(o=>({...o,activityType:"fingerboarding",createdAt:o.createdAt||new Date().toISOString(),updatedAt:o.updatedAt||new Date().toISOString(),syncStatus:"synced"}));Nt(n),l(r,Bt().sort((o,D)=>new Date(D.date).getTime()-new Date(o.date).getTime()),!0)}}catch(y){console.error("Failed to sync",y)}finally{l(g,!1)}}se();let ee=pt(()=>e(r).filter(y=>!(e(F)&&new Date(y.date)<new Date(e(F))||e(k)&&new Date(y.date)>new Date(e(k)))));function H(){l(q,e(q)+x)}function de(y){e(u).has(y)?e(u).delete(y):e(u).add(y),l(u,new Set(e(u)),!0)}function _e(y){return y.exercises.reduce((n,o)=>n+o.details.length,0)}var re=ri(),$=Ie(re),ve=a($),xe=s(a(ve),2);xe.__click=se;var be=a(xe);{var te=y=>{var n=Zr();Ct(),i(y,n)},A=y=>{var n=zt("‚òÅÔ∏è Fetch Data");i(y,n)};c(be,y=>{e(g)?y(te):y(A,!1)})}t(xe),t(ve);var _=s(ve,2),m=a(_),z=s(a(m),2);Me(z),t(m);var N=s(m,2),P=s(a(N),2);Me(P),t(N),t(_);var W=s(_,2);{var J=y=>{var n=Jr();i(y,n)},b=y=>{var n=Ye(),o=Ie(n);{var D=K=>{var L=Kr(),ce=a(L);{var ne=E=>{var I=zt("No sessions match filter.");i(E,I)},we=E=>{var I=zt("No fingerboarding sessions logged yet.");i(E,I)};c(ce,E=>{e(r).length>0?E(ne):E(we,!1)})}t(L),i(K,L)},V=K=>{var L=si(),ce=a(L);De(ce,17,()=>e(ee).slice(0,e(q)),ze,(E,I)=>{var fe=ti();let ye;var Se=a(fe);Se.__click=()=>de(e(I).id),Se.__keydown=qe=>qe.key==="Enter"&&de(e(I).id);var T=a(Se),w=a(T),j=a(w,!0);t(w);var U=s(w,2),h=a(U);{var R=qe=>{var Fe=zt();f(()=>d(Fe,`${e(I).location??""} ¬∑`)),i(qe,Fe)};c(h,qe=>{e(I).location&&e(I).location!=="N/A"&&e(I).location!=="Home"&&qe(R)})}var ue=s(h);t(U),t(T);var Y=s(T,2),Q=a(Y);let ie;var Ee=s(Q,2);Ee.__click=qe=>{qe.stopPropagation(),oe(e(I).id)};var ke=s(Ee,2),Ce=a(ke,!0);t(ke),t(Y),t(Se);var le=s(Se,2);{var he=qe=>{var Fe=ei(),Ue=a(Fe);De(Ue,21,()=>e(I).exercises||[],ze,(et,Re)=>{var Be=Qr(),$e=a(Be),tt=a($e),We=a(tt,!0);t(tt);var at=s(tt,2),mt=a(at,!0);t(at),t($e);var He=s($e,2);De(He,21,()=>e(Re).details,ze,(Oe,Ze)=>{var Ve=Xr(),lt=a(Ve),vt=s(lt,2);t(Ve),f(()=>{d(lt,`${e(Ze).weight>0?`+${e(Ze).weight}kg`:"BW"} `),d(vt,` ${e(Ze).reps??""}s/reps`)}),i(Oe,Ve)}),t(He);var it=s(He,2);{var st=Oe=>{var Ze=Yr(),Ve=a(Ze);t(Ze),f(()=>d(Ve,`"${e(Re).notes??""}"`)),i(Oe,Ze)};c(it,Oe=>{e(Re).notes&&Oe(st)})}t(Be),f(()=>{d(We,e(Re).name),d(mt,e(Re).gripType)}),i(et,Be)}),t(Ue),t(Fe),ct(3,Fe,()=>gt,()=>({duration:150})),i(qe,Fe)};c(le,qe=>{e(u).has(e(I).id)&&qe(he)})}t(fe),f((qe,Fe,Ue,et)=>{ye=dt(fe,1,"session-card svelte-1szs0u9",null,ye,qe),d(j,Fe),d(ue,` ${e(I).exercises.length??""} Exercises ¬∑ ${Ue??""} Sets`),ie=dt(Q,1,"sync-dot svelte-1szs0u9",null,ie,{synced:e(I).syncStatus==="synced"}),Qe(Q,"title",e(I).syncStatus==="synced"?"Synced":"Local"),d(Ce,et)},[()=>({expanded:e(u).has(e(I).id)}),()=>new Date(e(I).date).toLocaleDateString(void 0,{weekday:"short",month:"short",day:"numeric"}),()=>_e(e(I)),()=>e(u).has(e(I).id)?"‚ñ≤":"‚ñº"]),i(E,fe)});var ne=s(ce,2);{var we=E=>{var I=ai(),fe=a(I);fe.__click=H;var ye=a(fe);t(fe),t(I),f(()=>d(ye,`Load More (${e(ee).length-e(q)} remaining)`)),i(E,I)};c(ne,E=>{e(q)<e(ee).length&&E(we)})}t(L),i(K,L)};c(o,K=>{e(ee).length===0?K(D):K(V,!1)},!0)}i(y,n)};c(W,y=>{e(g)&&e(r).length===0?y(J):y(b,!1)})}t($);var O=s($,2);Pt(O,{get isOpen(){return e(B)},title:"Delete Fingerboard Session",message:"Are you sure you want to delete this session? This cannot be undone.",onConfirm:pe,onCancel:()=>l(B,!1)}),f(()=>xe.disabled=e(g)),Pe(z,()=>e(F),y=>l(F,y)),Pe(P,()=>e(k),y=>l(k,y)),i(Te,re),ft()}_t(["click","keydown"]);var li=v('<span class="spinner svelte-xyvf5r"></span> Fetching...',1),vi=v('<div class="loading svelte-xyvf5r">Loading sessions...</div>'),ni=v('<div class="empty-state svelte-xyvf5r">No competitions logged yet.</div>'),oi=v('<span class="type-tag simulation-tag svelte-xyvf5r">Simulation</span>'),di=v('<span class="round-pos svelte-xyvf5r"> </span>'),ci=v('<span class="c-attempts svelte-xyvf5r"> </span>'),pi=v('<div class="climb-notes svelte-xyvf5r"> </div>'),_i=v('<div class="climb-row svelte-xyvf5r"><div class="climb-info svelte-xyvf5r"><span class="c-name svelte-xyvf5r"> </span> <!></div> <div class="climb-result"><span> </span></div></div> <!>',1),ui=v('<div class="climbs-list"></div>'),fi=v('<div class="round-item svelte-xyvf5r"><div class="round-header svelte-xyvf5r"><span class="round-name"> </span> <!></div> <!></div>'),gi=v('<div class="rounds-list svelte-xyvf5r"></div>'),mi=v('<div class="load-meta svelte-xyvf5r"><span> </span></div>'),hi=v('<div class="card-body svelte-xyvf5r"><!> <!> <div class="session-footer svelte-xyvf5r"><span> </span></div></div>'),bi=v('<div><div class="card-header svelte-xyvf5r" role="button" tabindex="0"><div class="header-main svelte-xyvf5r"><div class="left-col svelte-xyvf5r"><span class="venue svelte-xyvf5r"> </span> <span class="date svelte-xyvf5r"> </span></div> <div class="right-col svelte-xyvf5r"><div class="badges svelte-xyvf5r"><span class="type-tag svelte-xyvf5r"> </span> <!> <span class="result-tag svelte-xyvf5r"> </span></div></div></div> <div class="header-status svelte-xyvf5r"><span>‚óè</span> <button class="btn-icon delete-btn svelte-xyvf5r" title="Delete Session">üóëÔ∏è</button> <span class="chevron svelte-xyvf5r"> </span></div></div> <!></div>'),yi=v('<div class="load-more-container svelte-xyvf5r"><button class="load-more-btn svelte-xyvf5r"> </button></div>'),xi=v('<div class="timeline svelte-xyvf5r"><!> <!></div>'),wi=v('<div class="view-content svelte-xyvf5r"><div class="header svelte-xyvf5r"><h3 class="svelte-xyvf5r">üèÜ Competition Log</h3> <button class="fetch-btn svelte-xyvf5r" title="Fetch data from cloud"><!></button></div> <!> <!></div>');function Si(Te,p){ut(p,!0);let r=S(bt([])),g=S(!0),F=S(bt(new Set)),k=S(20);const u=20;let q=S(!1),x=S(null);function B(_){l(x,_,!0),l(q,!0)}function X(){e(x)&&($t(e(x)),l(x,null),l(q,!1),l(r,Vt().sort((_,m)=>new Date(m.date).getTime()-new Date(_.date).getTime()),!0))}async function oe(){l(g,!0),l(k,u),l(r,Vt().sort((_,m)=>new Date(m.date).getTime()-new Date(_.date).getTime()),!0);try{await At();const _=await oa();if(_.ok&&_.data){const m=_.data.map(z=>({...z,activityType:"competition",type:z.type,rounds:z.rounds.map(N=>({...N,climbs:N.climbs?.map(P=>({...P,status:P.status}))})),createdAt:z.createdAt||new Date().toISOString(),updatedAt:z.updatedAt||new Date().toISOString(),syncStatus:"synced",isSimulation:z.isSimulation}));Nt(m),l(r,Vt().sort((z,N)=>new Date(N.date).getTime()-new Date(z.date).getTime()),!0)}}catch(_){console.error("Failed to sync",_)}finally{l(g,!1)}}oe();function pe(_){e(F).has(_)?e(F).delete(_):e(F).add(_),l(F,new Set(e(F)),!0)}function se(){l(k,e(k)+u)}function ee(_){if(_.isSimulation){if(_.rounds&&_.rounds.length>0&&_.rounds[0].climbs){const z=_.rounds[0].climbs,N=z.filter(W=>W.status==="Top"||W.status==="Flash").length,P=z.filter(W=>W.status==="Zone").length;return`${N}T ${P+N}Z`}return"Simulation"}if(!_.rounds||_.rounds.length===0)return"No rounds";const m=_.rounds[_.rounds.length-1];if(m.position)return`#${m.position} ${m.name}`;if(m.climbs){const z=m.climbs.filter(P=>P.status==="Top"||P.status==="Flash").length,N=m.climbs.filter(P=>P.status==="Zone").length;return`${_.rounds.length} Rnds ¬∑ Final: ${z}T ${N+z}Z`}return m.name}var H=wi(),de=a(H),_e=s(a(de),2);_e.__click=oe;var re=a(_e);{var $=_=>{var m=li();Ct(),i(_,m)},ve=_=>{var m=zt("‚òÅÔ∏è Fetch Data");i(_,m)};c(re,_=>{e(g)?_($):_(ve,!1)})}t(_e),t(de);var xe=s(de,2);{var be=_=>{var m=vi();i(_,m)},te=_=>{var m=Ye(),z=Ie(m);{var N=W=>{var J=ni();i(W,J)},P=W=>{var J=xi(),b=a(J);De(b,17,()=>e(r).slice(0,e(k)),ze,(n,o)=>{var D=bi();let V;var K=a(D);K.__click=()=>pe(e(o).id),K.__keydown=le=>le.key==="Enter"&&pe(e(o).id);var L=a(K),ce=a(L),ne=a(ce),we=a(ne,!0);t(ne);var E=s(ne,2),I=a(E,!0);t(E),t(ce);var fe=s(ce,2),ye=a(fe),Se=a(ye),T=a(Se,!0);t(Se);var w=s(Se,2);{var j=le=>{var he=oi();i(le,he)};c(w,le=>{e(o).isSimulation&&le(j)})}var U=s(w,2),h=a(U,!0);t(U),t(ye),t(fe),t(L);var R=s(L,2),ue=a(R);let Y;var Q=s(ue,2);Q.__click=le=>{le.stopPropagation(),B(e(o).id)};var ie=s(Q,2),Ee=a(ie,!0);t(ie),t(R),t(K);var ke=s(K,2);{var Ce=le=>{var he=hi(),qe=a(he);{var Fe=We=>{var at=gi();De(at,21,()=>e(o).rounds||[],ze,(mt,He)=>{var it=fi(),st=a(it),Oe=a(st),Ze=a(Oe,!0);t(Oe);var Ve=s(Oe,2);{var lt=Je=>{var Ke=di(),Tt=a(Ke);t(Ke),f(()=>d(Tt,`#${e(He).position??""}`)),i(Je,Ke)};c(Ve,Je=>{e(He).position&&Je(lt)})}t(st);var vt=s(st,2);{var nt=Je=>{var Ke=ui();De(Ke,21,()=>e(He).climbs||[],ze,(Tt,Xe)=>{var Ft=_i(),yt=Ie(Ft),xt=a(yt),wt=a(xt),qt=a(wt,!0);t(wt);var Lt=s(wt,2);{var rt=G=>{var M=ci(),me=a(M);t(M),f(()=>d(me,`(${e(Xe).attemptCount??""} tries)`)),i(G,M)};c(Lt,G=>{e(Xe).attemptCount>1&&G(rt)})}t(xt);var ht=s(xt,2),Z=a(ht);let ae;var ge=a(Z,!0);t(Z),t(ht),t(yt);var Ae=s(yt,2);{var C=G=>{var M=pi(),me=a(M);t(M),f(()=>d(me,`"${e(Xe).notes??""}"`)),i(G,M)};c(Ae,G=>{e(Xe).notes&&G(C)})}f(()=>{d(qt,e(Xe).name),ae=dt(Z,1,"status-badge svelte-xyvf5r",null,ae,{top:e(Xe).status==="Top"||e(Xe).status==="Flash",zone:e(Xe).status==="Zone"}),d(ge,e(Xe).status)}),i(Tt,Ft)}),t(Ke),i(Je,Ke)};c(vt,Je=>{e(He).climbs&&Je(nt)})}t(it),f(()=>d(Ze,e(He).name)),i(mt,it)}),t(at),i(We,at)};c(qe,We=>{e(o).rounds&&We(Fe)})}var Ue=s(qe,2);{var et=We=>{var at=mi(),mt=a(at),He=a(mt);t(mt),t(at),f(()=>d(He,`Detailed Load: Fingers ${e(o).fingerLoad??""}/5, Shoulders ${e(o).shoulderLoad??""}/5, Forearms ${e(o).forearmLoad??""}/5`)),i(We,at)};c(Ue,We=>{(e(o).fingerLoad||e(o).shoulderLoad)&&We(et)})}var Re=s(Ue,2),Be=a(Re);let $e;var tt=a(Be,!0);t(Be),t(Re),t(he),f(()=>{$e=dt(Be,1,"sync-status svelte-xyvf5r",null,$e,{synced:e(o).syncStatus==="synced"}),d(tt,e(o).syncStatus==="synced"?"‚úì Synced":"‚òÅ Local")}),ct(3,he,()=>gt,()=>({duration:150})),i(le,he)};c(ke,le=>{e(F).has(e(o).id)&&le(Ce)})}t(D),f((le,he,qe,Fe)=>{V=dt(D,1,"session-card svelte-xyvf5r",null,V,le),d(we,e(o).customVenue||e(o).venue),d(I,he),d(T,e(o).type),d(h,qe),Y=dt(ue,1,"sync-dot",null,Y,{synced:e(o).syncStatus==="synced"}),Qe(ue,"title",e(o).syncStatus==="synced"?"Synced":"Local"),d(Ee,Fe)},[()=>({expanded:e(F).has(e(o).id)}),()=>new Date(e(o).date).toLocaleDateString(void 0,{weekday:"short",day:"numeric",month:"short"}),()=>ee(e(o)),()=>e(F).has(e(o).id)?"‚ñ≤":"‚ñº"]),i(n,D)});var O=s(b,2);{var y=n=>{var o=yi(),D=a(o);D.__click=se;var V=a(D);t(D),t(o),f(()=>d(V,`Load More (${e(r).length-e(k)} remaining)`)),i(n,o)};c(O,n=>{e(k)<e(r).length&&n(y)})}t(J),i(W,J)};c(z,W=>{e(r).length===0?W(N):W(P,!1)},!0)}i(_,m)};c(xe,_=>{e(g)&&e(r).length===0?_(be):_(te,!1)})}var A=s(xe,2);Pt(A,{get isOpen(){return e(q)},title:"Delete Competition",message:"Are you sure you want to delete this competition session? This action cannot be undone.",onConfirm:X,onCancel:()=>l(q,!1)}),t(H),f(()=>_e.disabled=e(g)),i(Te,H),ft()}_t(["click","keydown"]);var ki=v('<button class="backdrop svelte-108px9u" aria-label="Close settings"></button> <div class="settings-modal svelte-108px9u" role="dialog" aria-modal="true"><div class="settings-header svelte-108px9u"><h3 class="svelte-108px9u">Settings</h3> <button class="close-btn svelte-108px9u">‚úï</button></div> <div class="settings-content"><div class="setting-item svelte-108px9u"><div class="setting-info svelte-108px9u"><span class="setting-label svelte-108px9u">Local Data</span> <span class="setting-desc svelte-108px9u">Clear all cached data on this device</span></div> <button class="btn-clear-cache svelte-108px9u">Clear Cache</button></div></div></div>',1),Di=v("<option> </option>"),Ti=v('<div class="view-container svelte-108px9u"><!></div>'),qi=v('<div class="page svelte-108px9u"><div class="page-header svelte-108px9u"><div><h1 class="svelte-108px9u">üìä View Data</h1> <p class="subtitle svelte-108px9u">Browse your training history</p></div> <button class="settings-btn svelte-108px9u" aria-label="Settings">‚öôÔ∏è</button></div> <!> <!> <div class="content-card svelte-108px9u"><div class="form-group svelte-108px9u"><label for="activity-type" class="svelte-108px9u">Activity Type</label> <select id="activity-type" class="svelte-108px9u"><option disabled>Select an activity...</option><!></select></div> <!></div></div>');function Ni(Te,p){ut(p,!0);const r=[{value:"indoor_climb",label:"Indoor Climb",icon:"üßó"},{value:"outdoor_climb",label:"Outdoor Climb",icon:"‚õ∞Ô∏è"},{value:"gym_session",label:"Gym Session",icon:"üèãÔ∏è"},{value:"fingerboarding",label:"Fingerboarding",icon:"ü§è"},{value:"competition",label:"Competition",icon:"üèÜ"}];let g=S(""),F=S(!1),k=S(!1);function u(){l(F,!0)}function q(){l(F,!1)}function x(){l(F,!1),l(k,!0)}function B(){pa()}var X=qi(),oe=a(X),pe=s(a(oe),2);pe.__click=u,t(oe);var se=s(oe,2);{var ee=te=>{var A=ki(),_=Ie(A);_.__click=q;var m=s(_,2),z=a(m),N=s(a(z),2);N.__click=q,t(z);var P=s(z,2),W=a(P),J=s(a(W),2);J.__click=x,t(W),t(P),t(m),ct(3,_,()=>da,()=>({duration:200})),ct(3,m,()=>ca,()=>({duration:200,start:.9})),i(te,A)};c(se,te=>{e(F)&&te(ee)})}var H=s(se,2);Pt(H,{get isOpen(){return e(k)},title:"Clear all local data?",message:"Are you sure you want to clear all locally cached data? This will remove all sessions stored on this device. Data already synced to the cloud will be preserved.",confirmKeyword:"clear",onConfirm:B,onCancel:()=>l(k,!1)});var de=s(H,2),_e=a(de),re=s(a(_e),2),$=a(re);$.value=$.__value="";var ve=s($);De(ve,17,()=>r,te=>te.value,(te,A)=>{var _=Di(),m=a(_);t(_);var z={};f(()=>{d(m,`${e(A).icon??""} ${e(A).label??""}`),z!==(z=e(A).value)&&(_.value=(_.__value=e(A).value)??"")}),i(te,_)}),t(re),t(_e);var xe=s(_e,2);{var be=te=>{var A=Ti(),_=a(A);{var m=N=>{fs(N,{})},z=N=>{var P=Ye(),W=Ie(P);{var J=O=>{br(O,{})},b=O=>{var y=Ye(),n=Ie(y);{var o=V=>{Hr(V,{})},D=V=>{var K=Ye(),L=Ie(K);{var ce=we=>{ii(we,{})},ne=we=>{var E=Ye(),I=Ie(E);{var fe=ye=>{Si(ye,{})};c(I,ye=>{e(g)==="competition"&&ye(fe)},!0)}i(we,E)};c(L,we=>{e(g)==="fingerboarding"?we(ce):we(ne,!1)},!0)}i(V,K)};c(n,V=>{e(g)==="gym_session"?V(o):V(D,!1)},!0)}i(O,y)};c(W,O=>{e(g)==="outdoor_climb"?O(J):O(b,!1)},!0)}i(N,P)};c(_,N=>{e(g)==="indoor_climb"?N(m):N(z,!1)})}t(A),i(te,A)};c(xe,te=>{e(g)&&te(be)})}t(de),t(X),Dt(re,()=>e(g),te=>l(g,te)),i(Te,X),ft()}_t(["click"]);export{Ni as component};
