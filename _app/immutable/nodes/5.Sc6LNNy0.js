import{f as l,a as r,c as Ve,t as ba}from"../chunks/CKcnA5P_.js";import{p as ta,c as t,s,j as e,aV as F,r as a,t as m,a as sa,F as n,f as Ee,aG as Da,aW as _a,E as ua,o as Va,d as Za}from"../chunks/4c6jdw0Z.js";import{d as $e,s as o}from"../chunks/K94srNfd.js";import{i as c}from"../chunks/CK8hGvwc.js";import{s as Ue,r as Xe,e as ke,i as Ge,b as Ye}from"../chunks/BVSa1UsB.js";import{t as Je,k as ra,d as Ua,l as Ha,s as Ia,m as Xa,g as Ya,b as Qa,n as $a,E as et,o as at,p as tt,q as st}from"../chunks/CpAFZDWU.js";import{c as wa,k as Ma,l as Ja,n as Ea,o as Ra,p as Pa,q as Ba,t as it}from"../chunks/BqWccOr6.js";import{s as Qe}from"../chunks/9PGhKrW6.js";import{s as Ze}from"../chunks/CzX-2X6y.js";import{p as Ga}from"../chunks/CfB7tKQ8.js";var rt=l('<span class="chevron svelte-12crvy">‚ñ≤</span>'),lt=l('<span class="chevron svelte-12crvy">‚ñº</span>'),vt=l('<div class="input-with-action svelte-12crvy"><input type="text" id="location-manual" placeholder="Custom location..." class="flat-left svelte-12crvy"/> <button type="button" class="action-btn flat-right svelte-12crvy" title="Back to list">‚úï</button></div>'),nt=l("<option> </option>"),ot=l('<select id="location-filter" class="svelte-12crvy"><option>Any Location</option><!></select>'),dt=l("<option> </option>"),ct=l("<option> </option>"),_t=l('<div class="filter-body svelte-12crvy"><div class="filter-grid svelte-12crvy"><div class="filter-item svelte-12crvy"><label for="start-date" class="svelte-12crvy">Start Date</label> <input type="date" id="start-date" class="svelte-12crvy"/></div> <div class="filter-item svelte-12crvy"><label for="end-date" class="svelte-12crvy">End Date</label> <input type="date" id="end-date" class="svelte-12crvy"/></div> <div class="filter-item svelte-12crvy"><label for="location-filter" class="svelte-12crvy">Location</label> <!></div> <div class="filter-item svelte-12crvy"><label for="climbing-type-filter" class="svelte-12crvy">Climb Type</label> <select id="climbing-type-filter" class="svelte-12crvy"><option>Any Type</option><!></select></div> <div class="filter-item svelte-12crvy"><label for="session-type-filter" class="svelte-12crvy">Session Type</label> <select id="session-type-filter" class="svelte-12crvy"><option>Any Type</option><!></select></div> <div class="filter-item svelte-12crvy"><label for="grade-filter" class="svelte-12crvy">Grade (Exact)</label> <input type="text" id="grade-filter" placeholder="e.g. V4" class="svelte-12crvy"/></div></div> <div class="filter-actions svelte-12crvy"><button class="reset-btn svelte-12crvy">Reset Filters</button></div></div>'),ut=l('<div class="filter-container svelte-12crvy"><button class="filter-header svelte-12crvy"><div class="header-content svelte-12crvy"><span class="icon svelte-12crvy">üîç</span> <span class="title svelte-12crvy">Filters</span> <!></div></button> <!></div>');function ft(me,i){ta(i,!0);const D=["Rockstar Swindon","Flashpoint Swindon","Flashpoint Bristol","Redpoint Bristol","TCH Bristol","Other"],p=["Bouldering","Sport","Mixed"],T=["Projecting","Onsighting","Campusing","Repeaters"];let w=F(!1),g=F(""),k=F(""),y=F(""),L=F(""),P=F(""),V=F(""),re=F(!1);function j(){n(w,!e(w))}function W(){n(g,""),n(k,""),n(y,""),n(L,""),n(re,!1),n(P,""),n(V,""),A()}function A(){i.onFilterParamsChange({startDate:e(g),endDate:e(k),location:e(y),climbingType:e(L),sessionType:e(P),grade:e(V)})}function Y(){e(y)==="Other"?(n(re,!0),n(y,"")):A()}function J(){n(re,!1),n(y,""),A()}var ae=ut(),Q=t(ae);Q.__click=j;var $=t(Q),ee=s(t($),4);{var ne=x=>{var G=rt();r(x,G)},U=x=>{var G=lt();r(x,G)};c(ee,x=>{e(w)?x(ne):x(U,!1)})}a($),a(Q);var _e=s(Q,2);{var b=x=>{var G=_t(),R=t(G),H=t(R),le=s(t(H),2);Xe(le),le.__change=A,a(H);var ue=s(H,2),_=s(t(ue),2);Xe(_),_.__change=A,a(ue);var h=s(ue,2),f=s(t(h),2);{var v=C=>{var I=vt(),ce=t(I);Xe(ce),ce.__input=A;var qe=s(ce,2);qe.__click=J,a(I),Ye(ce,()=>e(y),z=>n(y,z)),r(C,I)},d=C=>{var I=ot();I.__change=Y;var ce=t(I);ce.value=ce.__value="";var qe=s(ce);ke(qe,17,()=>D,Ge,(z,se)=>{var Le=nt(),te=t(Le,!0);a(Le);var ie={};m(()=>{o(te,e(se)),ie!==(ie=e(se))&&(Le.value=(Le.__value=e(se))??"")}),r(z,Le)}),a(I),wa(I,()=>e(y),z=>n(y,z)),r(C,I)};c(f,C=>{e(re)?C(v):C(d,!1)})}a(h);var q=s(h,2),N=s(t(q),2);N.__change=A;var ve=t(N);ve.value=ve.__value="";var ge=s(ve);ke(ge,17,()=>p,Ge,(C,I)=>{var ce=dt(),qe=t(ce,!0);a(ce);var z={};m(()=>{o(qe,e(I)),z!==(z=e(I))&&(ce.value=(ce.__value=e(I))??"")}),r(C,ce)}),a(N),a(q);var Oe=s(q,2),pe=s(t(Oe),2);pe.__change=A;var E=t(pe);E.value=E.__value="";var K=s(E);ke(K,17,()=>T,Ge,(C,I)=>{var ce=ct(),qe=t(ce,!0);a(ce);var z={};m(()=>{o(qe,e(I)),z!==(z=e(I))&&(ce.value=(ce.__value=e(I))??"")}),r(C,ce)}),a(pe),a(Oe);var Z=s(Oe,2),xe=s(t(Z),2);Xe(xe),xe.__input=A,a(Z),a(R);var ze=s(R,2),Fe=t(ze);Fe.__click=W,a(ze),a(G),Ye(le,()=>e(g),C=>n(g,C)),Ye(_,()=>e(k),C=>n(k,C)),wa(N,()=>e(L),C=>n(L,C)),wa(pe,()=>e(P),C=>n(P,C)),Ye(xe,()=>e(V),C=>n(V,C)),Je(3,G,()=>ra,()=>({duration:200})),r(x,G)};c(_e,x=>{e(w)&&x(b)})}a(ae),m(()=>Ue(Q,"aria-expanded",e(w))),r(me,ae),sa()}$e(["click","change","input"]);var gt=l('<span class="climb-type-tag svelte-yz0xxt"> </span>'),pt=l('<span class="notes-preview svelte-yz0xxt"> </span>'),mt=l('<span class="attempts-count svelte-yz0xxt"> </span>'),ht=l('<div class="detail-row svelte-yz0xxt"><span class="label svelte-yz0xxt">Notes:</span> <p class="notes svelte-yz0xxt"> </p></div>'),bt=l('<p class="empty-notes svelte-yz0xxt">No notes for this climb.</p>'),yt=l('<div class="climb-details svelte-yz0xxt"><!> <div class="tags svelte-yz0xxt"><span class="tag type svelte-yz0xxt"> </span> <span class="tag attempt-text svelte-yz0xxt"> </span></div></div>'),xt=l('<div><div class="climb-header svelte-yz0xxt" role="button" tabindex="0"><div class="climb-main-info svelte-yz0xxt"><span> </span> <span class="climb-name svelte-yz0xxt"> </span> <!> <!></div> <div class="climb-meta svelte-yz0xxt"><span><span class="icon svelte-yz0xxt"> </span> <!></span> <button class="delete-btn svelte-yz0xxt" aria-label="Delete climb" title="Delete climb">üóëÔ∏è</button> <span class="chevron svelte-yz0xxt"> </span></div></div> <!></div>');function wt(me,i){ta(i,!0);let D=Ga(i,"showClimbType",3,!1),p=F(!1);function T(){n(p,!e(p))}function w(_){_.stopPropagation(),i.onDelete()}const g={Flash:"‚ö°",Onsight:"üëÅÔ∏è",Redpoint:"üî¥",Dogged:"üõ†Ô∏è",DNF:"‚ùå"};var k=xt();let y;var L=t(k);L.__click=T,L.__keydown=_=>(_.key==="Enter"||_.key===" ")&&T();var P=t(L),V=t(P);let re;var j=t(V,!0);a(V);var W=s(V,2),A=t(W,!0);a(W);var Y=s(W,2);{var J=_=>{var h=gt(),f=t(h,!0);a(h),m(()=>o(f,i.climb.isSport?"Sport":"Boulder")),r(_,h)};c(Y,_=>{D()&&_(J)})}var ae=s(Y,2);{var Q=_=>{var h=pt(),f=t(h);a(h),m(()=>o(f,`- ${i.climb.notes??""}`)),r(_,h)};c(ae,_=>{!e(p)&&i.climb.notes&&_(Q)})}a(P);var $=s(P,2),ee=t($);let ne;var U=t(ee),_e=t(U,!0);a(U);var b=s(U,2);{var x=_=>{var h=mt(),f=t(h,!0);a(h),m(()=>o(f,i.climb.attemptsNum)),r(_,h)};c(b,_=>{i.climb.attemptType!=="Flash"&&i.climb.attemptType!=="Onsight"&&_(x)})}a(ee);var G=s(ee,2);G.__click=w;var R=s(G,2),H=t(R,!0);a(R),a($),a(L);var le=s(L,2);{var ue=_=>{var h=yt(),f=t(h);{var v=pe=>{var E=ht(),K=s(t(E),2),Z=t(K,!0);a(K),a(E),m(()=>o(Z,i.climb.notes)),r(pe,E)},d=pe=>{var E=bt();r(pe,E)};c(f,pe=>{i.climb.notes?pe(v):pe(d,!1)})}var q=s(f,2),N=t(q),ve=t(N,!0);a(N);var ge=s(N,2),Oe=t(ge,!0);a(ge),a(q),a(h),m(()=>{o(ve,i.climb.isSport?"Sport":"Boulder"),o(Oe,i.climb.attemptType)}),Je(3,h,()=>ra,()=>({duration:150})),r(_,h)};c(le,_=>{e(p)&&_(ue)})}a(k),m(()=>{y=Qe(k,1,"climb-entry svelte-yz0xxt",null,y,{expanded:e(p)}),Ue(L,"aria-expanded",e(p)),re=Qe(V,1,"grade-badge svelte-yz0xxt",null,re,{sport:i.climb.isSport}),o(j,i.climb.grade),o(A,i.climb.name||"Unnamed Route"),ne=Qe(ee,1,"attempt-type svelte-yz0xxt",null,ne,{flash:i.climb.attemptType==="Flash"}),o(_e,g[i.climb.attemptType]||i.climb.attemptType),o(H,e(p)?"‚ñ≤":"‚ñº")}),r(me,k),sa()}$e(["click","keydown"]);var Dt=l('<button class="backdrop svelte-12q9g58" aria-label="Close modal"></button> <div class="modal svelte-12q9g58" role="dialog" aria-modal="true"><h3 class="svelte-12q9g58"> </h3> <p class="svelte-12q9g58"> </p> <div class="input-group svelte-12q9g58"><label for="delete-confirm" class="svelte-12q9g58">Type <strong> </strong> to confirm:</label> <input type="text" id="delete-confirm" autocomplete="off" class="svelte-12q9g58"/></div> <div class="actions svelte-12q9g58"><button class="btn-cancel svelte-12q9g58">Cancel</button> <button class="btn-delete svelte-12q9g58">Delete</button></div></div>',1);function Oa(me,i){ta(i,!0);let D=Ga(i,"isOpen",3,!1),p=Ga(i,"title",3,"Confirm Delete"),T=Ga(i,"message",3,"Are you sure you want to delete this item? This action cannot be undone."),w=Ga(i,"confirmKeyword",3,"delete"),g=F(""),k=_a(()=>e(g).toLowerCase()===w().toLowerCase());function y(){e(k)&&(i.onConfirm(),n(g,""))}function L(){i.onCancel(),n(g,"")}var P=Ve(),V=Ee(P);{var re=j=>{var W=Dt(),A=Ee(W);A.__click=L;var Y=s(A,2),J=t(Y),ae=t(J,!0);a(J);var Q=s(J,2),$=t(Q,!0);a(Q);var ee=s(Q,2),ne=t(ee),U=s(t(ne)),_e=t(U,!0);a(U),Da(),a(ne);var b=s(ne,2);Xe(b),a(ee);var x=s(ee,2),G=t(x);G.__click=L;var R=s(G,2);R.__click=y,a(x),a(Y),m(()=>{o(ae,p()),o($,T()),o(_e,w()),Ue(b,"placeholder",w()),R.disabled=!e(k)}),Je(3,A,()=>Ua,()=>({duration:200})),Ye(b,()=>e(g),H=>n(g,H)),Je(3,Y,()=>Ha,()=>({duration:200,start:.9})),r(j,W)};c(V,j=>{D()&&j(re)})}r(me,P),sa()}$e(["click"]);var St=l('<span class="stat svelte-7vqogn"> </span>'),kt=l('<span class="status-icon pending svelte-7vqogn" title="Waiting to sync">üîÑ</span>'),qt=l('<span class="status-icon error svelte-7vqogn" title="Sync error">‚ö†Ô∏è</span>'),Tt=l('<span class="chip svelte-7vqogn"> </span>'),Ct=l('<span class="text-none svelte-7vqogn">None</span>'),zt=l('<div class="detail-item svelte-7vqogn"><span class="label svelte-7vqogn">Difficulty</span> <span class="value svelte-7vqogn"> </span></div>'),Ft=l('<span class="chip svelte-7vqogn"> </span>'),Lt=l('<span class="text-none svelte-7vqogn">None</span>'),Gt=l('<div class="detail-item svelte-7vqogn"><span class="label svelte-7vqogn">Category</span> <div class="value-chips svelte-7vqogn"><!></div></div>'),Et=l('<span class="chip svelte-7vqogn"> </span>'),Ot=l('<span class="text-none svelte-7vqogn">None</span>'),jt=l('<div class="detail-item svelte-7vqogn"><span class="label svelte-7vqogn">Focus</span> <div class="value-chips svelte-7vqogn"><!></div></div>'),At=l('<span class="chip svelte-7vqogn"> </span>'),Nt=l('<span class="text-none svelte-7vqogn">None</span>'),It=l('<div class="detail-item svelte-7vqogn"><span class="label svelte-7vqogn">Energy System</span> <div class="value-chips svelte-7vqogn"><!></div></div>'),Mt=l('<span class="chip svelte-7vqogn"> </span>'),Rt=l('<span class="text-none svelte-7vqogn">None</span>'),Pt=l('<div class="detail-item svelte-7vqogn"><span class="label svelte-7vqogn">Wall Angle</span> <div class="value-chips svelte-7vqogn"><!></div></div>'),Bt=l('<div class="metric svelte-7vqogn"><span class="label svelte-7vqogn">Open Grip</span> <div class="bar-container svelte-7vqogn"><div class="bar-fill svelte-7vqogn"></div></div> <span class="score svelte-7vqogn"> </span></div>'),Vt=l('<div class="metric svelte-7vqogn"><span class="label svelte-7vqogn">Crimp Grip</span> <div class="bar-container svelte-7vqogn"><div class="bar-fill svelte-7vqogn"></div></div> <span class="score svelte-7vqogn"> </span></div>'),Wt=l('<div class="metric svelte-7vqogn"><span class="label svelte-7vqogn">Pinch Grip</span> <div class="bar-container svelte-7vqogn"><div class="bar-fill svelte-7vqogn"></div></div> <span class="score svelte-7vqogn"> </span></div>'),Ut=l('<div class="metric svelte-7vqogn"><span class="label svelte-7vqogn">Sloper Grip</span> <div class="bar-container svelte-7vqogn"><div class="bar-fill svelte-7vqogn"></div></div> <span class="score svelte-7vqogn"> </span></div>'),Ht=l('<div class="metric svelte-7vqogn"><span class="label svelte-7vqogn">Jug Grip</span> <div class="bar-container svelte-7vqogn"><div class="bar-fill svelte-7vqogn"></div></div> <span class="score svelte-7vqogn"> </span></div>'),Jt=l('<p class="no-climbs svelte-7vqogn">No climbs logged for this session.</p>'),Kt=l('<div class="card-body svelte-7vqogn"><div class="details-grid svelte-7vqogn"><div class="detail-item svelte-7vqogn"><span class="label svelte-7vqogn">Training Type</span> <div class="value-chips svelte-7vqogn"><!></div></div> <!> <!> <!> <!> <!></div> <div class="metrics-container svelte-7vqogn"><div class="metric svelte-7vqogn"><span class="label svelte-7vqogn">Finger Load</span> <div class="bar-container svelte-7vqogn"><div class="bar-fill svelte-7vqogn"></div></div> <span class="score svelte-7vqogn"> </span></div> <div class="metric svelte-7vqogn"><span class="label svelte-7vqogn">Shoulder Load</span> <div class="bar-container svelte-7vqogn"><div class="bar-fill svelte-7vqogn"></div></div> <span class="score svelte-7vqogn"> </span></div> <div class="metric svelte-7vqogn"><span class="label svelte-7vqogn">Forearm Load</span> <div class="bar-container svelte-7vqogn"><div class="bar-fill svelte-7vqogn"></div></div> <span class="score svelte-7vqogn"> </span></div> <!> <!> <!> <!> <!></div> <div class="climbs-list svelte-7vqogn"><h4 class="svelte-7vqogn">Climbs</h4> <div class="climbs-container svelte-7vqogn"><!> <!></div></div></div>'),Zt=l('<div><div class="card-header svelte-7vqogn" role="button" tabindex="0"><div class="header-main svelte-7vqogn"><div class="date-badge svelte-7vqogn"><span class="day svelte-7vqogn"> </span> <span class="month svelte-7vqogn"> </span></div> <div class="session-info svelte-7vqogn"><div class="session-text svelte-7vqogn"><h3 class="location svelte-7vqogn"> </h3> <div class="session-meta svelte-7vqogn"><span class="type-tag svelte-7vqogn"> </span> <span class="stat svelte-7vqogn"> </span> <!></div></div> <div class="load-summary svelte-7vqogn"><div class="load-badge finger svelte-7vqogn"> </div> <div class="load-badge shoulder svelte-7vqogn"> </div> <div class="load-badge forearm svelte-7vqogn"> </div></div></div></div> <div class="header-actions"><div class="header-status svelte-7vqogn"><!></div>  <button class="btn-icon delete-session" title="Delete Session">üóëÔ∏è</button> <span class="chevron svelte-7vqogn"> </span></div></div> <!></div> <!>',1);function Xt(me,i){ta(i,!0);let D=F(!1),p=F(!1);function T(){n(D,!e(D))}function w(){n(p,!0)}function g(){Ma(i.session.id),n(p,!1),i.onDelete()}function k(C){const I=[...i.session.climbs];I.splice(C,1),Ja(i.session.id,{climbs:I}),i.onDelete()}let y=_a(()=>i.session.climbs?.length??0),L=_a(()=>(i.session.climbs||[]).reduce((C,I)=>{const ce=parseInt(I.grade.replace(/\D/g,""))||0,qe=parseInt(C.replace(/\D/g,""))||0;return ce>qe?I.grade:C},"V0"));var P=Zt(),V=Ee(P);let re;var j=t(V);j.__click=T,j.__keydown=C=>C.key==="Enter"&&T();var W=t(j),A=t(W),Y=t(A),J=t(Y,!0);a(Y);var ae=s(Y,2),Q=t(ae,!0);a(ae),a(A);var $=s(A,2),ee=t($),ne=t(ee),U=t(ne,!0);a(ne);var _e=s(ne,2),b=t(_e),x=t(b,!0);a(b);var G=s(b,2),R=t(G);a(G);var H=s(G,2);{var le=C=>{var I=St(),ce=t(I);a(I),m(()=>o(ce,`Max: ${e(L)??""}`)),r(C,I)};c(H,C=>{e(y)>0&&C(le)})}a(_e),a(ee);var ue=s(ee,2),_=t(ue),h=t(_,!0);a(_);var f=s(_,2),v=t(f,!0);a(f);var d=s(f,2),q=t(d,!0);a(d),a(ue),a($),a(W);var N=s(W,2),ve=t(N),ge=t(ve);{var Oe=C=>{var I=kt();r(C,I)},pe=C=>{var I=Ve(),ce=Ee(I);{var qe=z=>{var se=qt();r(z,se)};c(ce,z=>{i.session.syncStatus==="error"&&z(qe)},!0)}r(C,I)};c(ge,C=>{i.session.syncStatus==="pending"?C(Oe):C(pe,!1)})}a(ve);var E=s(ve,2);E.__click=C=>{C.stopPropagation(),w()};var K=s(E,2),Z=t(K,!0);a(K),a(N),a(j);var xe=s(j,2);{var ze=C=>{var I=Kt(),ce=t(I),qe=t(ce),z=s(t(qe),2),se=t(z);{var Le=B=>{var M=Ve(),u=Ee(M);ke(u,17,()=>i.session.trainingTypes,Ge,(S,O)=>{var de=Tt(),X=t(de,!0);a(de),m(()=>o(X,e(O))),r(S,de)}),r(B,M)},te=B=>{var M=Ct();r(B,M)};c(se,B=>{i.session.trainingTypes&&i.session.trainingTypes.length>0&&!i.session.trainingTypes.includes("None")?B(Le):B(te,!1)})}a(z),a(qe);var ie=s(qe,2);{var oe=B=>{var M=zt(),u=s(t(M),2),S=t(u,!0);a(u),a(M),m(()=>o(S,i.session.difficulty)),r(B,M)};c(ie,B=>{i.session.difficulty&&B(oe)})}var be=s(ie,2);{var he=B=>{var M=Gt(),u=s(t(M),2),S=t(u);{var O=X=>{var fe=Ve(),Ce=Ee(fe);ke(Ce,17,()=>i.session.categories,Ge,(Me,da)=>{var Re=Ft(),ca=t(Re,!0);a(Re),m(()=>o(ca,e(da))),r(Me,Re)}),r(X,fe)},de=X=>{var fe=Lt();r(X,fe)};c(S,X=>{i.session.categories.length>0&&!i.session.categories.includes("None")?X(O):X(de,!1)})}a(u),a(M),r(B,M)};c(be,B=>{i.session.categories?.length&&B(he)})}var we=s(be,2);{var De=B=>{var M=jt(),u=s(t(M),2),S=t(u);{var O=X=>{var fe=Ve(),Ce=Ee(fe);ke(Ce,17,()=>i.session.techniqueFocuses,Ge,(Me,da)=>{var Re=Et(),ca=t(Re,!0);a(Re),m(()=>o(ca,e(da))),r(Me,Re)}),r(X,fe)},de=X=>{var fe=Ot();r(X,fe)};c(S,X=>{i.session.techniqueFocuses.length>0&&!i.session.techniqueFocuses.includes("None")?X(O):X(de,!1)})}a(u),a(M),r(B,M)};c(we,B=>{i.session.techniqueFocuses?.length&&B(De)})}var Se=s(we,2);{var ye=B=>{var M=It(),u=s(t(M),2),S=t(u);{var O=X=>{var fe=Ve(),Ce=Ee(fe);ke(Ce,17,()=>i.session.energySystems,Ge,(Me,da)=>{var Re=At(),ca=t(Re,!0);a(Re),m(()=>o(ca,e(da))),r(Me,Re)}),r(X,fe)},de=X=>{var fe=Nt();r(X,fe)};c(S,X=>{i.session.energySystems.length>0&&!i.session.energySystems.includes("None")?X(O):X(de,!1)})}a(u),a(M),r(B,M)};c(Se,B=>{i.session.energySystems?.length&&B(ye)})}var Te=s(Se,2);{var Pe=B=>{var M=Pt(),u=s(t(M),2),S=t(u);{var O=X=>{var fe=Ve(),Ce=Ee(fe);ke(Ce,17,()=>i.session.wallAngles,Ge,(Me,da)=>{var Re=Mt(),ca=t(Re,!0);a(Re),m(()=>o(ca,e(da))),r(Me,Re)}),r(X,fe)},de=X=>{var fe=Rt();r(X,fe)};c(S,X=>{i.session.wallAngles.length>0&&!i.session.wallAngles.includes("None")?X(O):X(de,!1)})}a(u),a(M),r(B,M)};c(Te,B=>{i.session.wallAngles?.length&&B(Pe)})}a(ce);var We=s(ce,2),Ae=t(We),Ke=s(t(Ae),2),Ne=t(Ke);a(Ke);var Ie=s(Ke,2),fa=t(Ie);a(Ie),a(Ae);var Be=s(Ae,2),la=s(t(Be),2),je=t(la);a(la);var He=s(la,2),Sa=t(He);a(He),a(Be);var ia=s(Be,2),ea=s(t(ia),2),va=t(ea);a(ea);var ga=s(ea,2),na=t(ga);a(ga),a(ia);var oa=s(ia,2);{var ka=B=>{var M=Bt(),u=s(t(M),2),S=t(u);a(u);var O=s(u,2),de=t(O);a(O),a(M),m(()=>{Ze(S,`width: ${i.session.openGrip/5*100}%`),o(de,`${i.session.openGrip??""}/5`)}),r(B,M)};c(oa,B=>{i.session.openGrip&&B(ka)})}var aa=s(oa,2);{var Ca=B=>{var M=Vt(),u=s(t(M),2),S=t(u);a(u);var O=s(u,2),de=t(O);a(O),a(M),m(()=>{Ze(S,`width: ${i.session.crimpGrip/5*100}%`),o(de,`${i.session.crimpGrip??""}/5`)}),r(B,M)};c(aa,B=>{i.session.crimpGrip&&B(Ca)})}var ma=s(aa,2);{var qa=B=>{var M=Wt(),u=s(t(M),2),S=t(u);a(u);var O=s(u,2),de=t(O);a(O),a(M),m(()=>{Ze(S,`width: ${i.session.pinchGrip/5*100}%`),o(de,`${i.session.pinchGrip??""}/5`)}),r(B,M)};c(ma,B=>{i.session.pinchGrip&&B(qa)})}var ha=s(ma,2);{var ja=B=>{var M=Ut(),u=s(t(M),2),S=t(u);a(u);var O=s(u,2),de=t(O);a(O),a(M),m(()=>{Ze(S,`width: ${i.session.sloperGrip/5*100}%`),o(de,`${i.session.sloperGrip??""}/5`)}),r(B,M)};c(ha,B=>{i.session.sloperGrip&&B(ja)})}var za=s(ha,2);{var Aa=B=>{var M=Ht(),u=s(t(M),2),S=t(u);a(u);var O=s(u,2),de=t(O);a(O),a(M),m(()=>{Ze(S,`width: ${i.session.jugGrip/5*100}%`),o(de,`${i.session.jugGrip??""}/5`)}),r(B,M)};c(za,B=>{i.session.jugGrip&&B(Aa)})}a(We);var Ta=s(We,2),ya=s(t(Ta),2),xa=t(ya);ke(xa,17,()=>i.session.climbs||[],Ge,(B,M,u)=>{{let S=_a(()=>i.session.climbingType==="Mixed");wt(B,{get climb(){return e(M)},onDelete:()=>k(u),get showClimbType(){return e(S)}})}});var Fa=s(xa,2);{var La=B=>{var M=Jt();r(B,M)};c(Fa,B=>{(i.session.climbs||[]).length===0&&B(La)})}a(ya),a(Ta),a(I),m(()=>{Ze(Ne,`width: ${i.session.fingerLoad/5*100}%`),o(fa,`${i.session.fingerLoad??""}/5`),Ze(je,`width: ${i.session.shoulderLoad/5*100}%`),o(Sa,`${i.session.shoulderLoad??""}/5`),Ze(va,`width: ${i.session.forearmLoad/5*100}%`),o(na,`${i.session.forearmLoad??""}/5`)}),Je(3,I,()=>ra,()=>({duration:150})),r(C,I)};c(xe,C=>{e(D)&&C(ze)})}a(V);var Fe=s(V,2);Oa(Fe,{get isOpen(){return e(p)},title:"Delete Session",message:"Are you sure you want to delete this session and all its climbs? This cannot be undone.",onConfirm:g,onCancel:()=>n(p,!1)}),m((C,I)=>{re=Qe(V,1,"session-card svelte-7vqogn",null,re,{expanded:e(D)}),Ue(j,"aria-expanded",e(D)),o(J,C),o(Q,I),o(U,i.session.location),o(x,i.session.climbingType),o(R,`${e(y)??""} climbs`),Ue(_,"title",`Finger Load: ${i.session.fingerLoad??""}`),o(h,i.session.fingerLoad),Ue(f,"title",`Shoulder Load: ${i.session.shoulderLoad??""}`),o(v,i.session.shoulderLoad),Ue(d,"title",`Forearm Load: ${i.session.forearmLoad??""}`),o(q,i.session.forearmLoad),o(Z,e(D)?"‚ñ≤":"‚ñº")},[()=>new Date(i.session.date).getDate(),()=>new Date(i.session.date).toLocaleDateString("en-GB",{month:"short"})]),r(me,P),sa()}$e(["click","keydown"]);var Yt=l('<div class="legend-item svelte-11p9lqi"><span class="l-icon svelte-11p9lqi"> </span> <span class="l-label svelte-11p9lqi"> </span></div>'),Qt=l('<div class="legend-content svelte-11p9lqi"><div class="legend-grid svelte-11p9lqi"></div></div>'),$t=l('<div class="legend-container svelte-11p9lqi"><button class="legend-toggle svelte-11p9lqi"><span class="icon">‚ÑπÔ∏è</span> <span class="text">Icon Legend</span> <span class="chevron svelte-11p9lqi"> </span></button> <!></div>');function Ka(me){let i=F(!1);const D=[{icon:"üëÅÔ∏è",label:"Onsight"},{icon:"‚ö°",label:"Flash"},{icon:"üî¥",label:"Redpoint"},{icon:"üõ†Ô∏è",label:"Dogged"},{icon:"‚ùå",label:"DNF"}];var p=$t(),T=t(p);T.__click=()=>n(i,!e(i));var w=s(t(T),4),g=t(w,!0);a(w),a(T);var k=s(T,2);{var y=L=>{var P=Qt(),V=t(P);ke(V,21,()=>D,Ge,(re,j)=>{var W=Yt(),A=t(W),Y=t(A,!0);a(A);var J=s(A,2),ae=t(J,!0);a(J),a(W),m(()=>{o(Y,e(j).icon),o(ae,e(j).label)}),r(re,W)}),a(V),a(P),Je(3,P,()=>ra),r(L,P)};c(k,L=>{e(i)&&L(y)})}a(p),m(()=>{Ue(T,"aria-expanded",e(i)),o(g,e(i)?"‚ñº":"‚ñ∂")}),r(me,p)}$e(["click"]);function Wa(me,i){if(!me||me.length===0){alert("No data to export");return}const D=Array.from(new Set(me.flatMap(Object.keys))),p=[D.join(","),...me.map(g=>D.map(k=>{let y=g[k];if(y==null)return"";if(typeof y=="object"){if(y instanceof Date)return y.toISOString();y=JSON.stringify(y).replace(/"/g,'""')}else typeof y=="string"&&(y=y.replace(/"/g,'""'));return typeof y=="string"&&(y.includes(",")||y.includes('"')||y.includes(`
`))?`"${y}"`:y}).join(","))].join(`
`),T=new Blob([p],{type:"text/csv;charset=utf-8;"}),w=document.createElement("a");if(w.download!==void 0){const g=URL.createObjectURL(T);w.setAttribute("href",g),w.setAttribute("download",i.endsWith(".csv")?i:`${i}.csv`),w.style.visibility="hidden",document.body.appendChild(w),w.click(),document.body.removeChild(w)}}var es=l('<span class="spinner svelte-14fqz8w"></span> Fetching...',1),as=l('<div class="error-banner svelte-14fqz8w"> </div>'),ts=l('<small class="svelte-14fqz8w">Try adjusting your filters.</small>'),ss=l('<div class="empty-state svelte-14fqz8w"><p class="svelte-14fqz8w">No indoor climbing sessions found.</p> <!></div>'),is=l('<div class="load-more-container svelte-14fqz8w"><button class="load-more-btn svelte-14fqz8w"> </button></div>'),rs=l('<div class="view-container svelte-14fqz8w"><div class="view-header svelte-14fqz8w"><h2 class="view-title svelte-14fqz8w">üßó Indoor Climbing History</h2> <div class="header-actions svelte-14fqz8w"><button class="action-btn secondary svelte-14fqz8w" title="Export filtered data to CSV">üì• Export</button> <button class="action-btn svelte-14fqz8w" title="Fetch data from cloud"><!></button></div></div> <!> <!> <div class="info-bar svelte-14fqz8w"><div class="legend-wrapper svelte-14fqz8w"><!></div> <div class="load-key svelte-14fqz8w"><span class="key-label svelte-14fqz8w">Load:</span> <div class="key-item svelte-14fqz8w"><span class="dot finger svelte-14fqz8w"></span> Finger</div> <div class="key-item svelte-14fqz8w"><span class="dot shoulder svelte-14fqz8w"></span> Shoulder</div> <div class="key-item svelte-14fqz8w"><span class="dot forearm svelte-14fqz8w"></span> Forearm</div></div></div> <div class="sessions-list"><!> <!> <!></div></div>');function ls(me,i){ta(i,!0);let D=F(ua([])),p=F(ua([])),T=F(!1),w=F(""),g=F(ua({startDate:"",endDate:"",location:"",climbingType:"",sessionType:"",grade:""})),k=F(20);const y=20;Va(()=>{L()});function L(){const v=Ea("indoor_climb");n(D,v.sort((d,q)=>new Date(q.date).getTime()-new Date(d.date).getTime()),!0),j()}async function P(){n(T,!0),n(w,"");try{await Ia();const v=await Xa();v.ok&&v.data?V(v.data):n(w,v.error||"Failed to fetch data",!0)}catch(v){n(w,v instanceof Error?v.message:"Unknown error",!0)}finally{n(T,!1)}}function V(v){const d=v.map(N=>({...N,activityType:"indoor_climb",createdAt:new Date().toISOString(),updatedAt:new Date().toISOString(),syncStatus:"synced",syncedAt:new Date().toISOString(),openGrip:0,crimpGrip:0,pinchGrip:0,sloperGrip:0,jugGrip:0}));Ra(d);const q=Ea("indoor_climb");n(D,q.sort((N,ve)=>new Date(ve.date).getTime()-new Date(N.date).getTime()),!0),j()}function re(v){n(g,v,!0),j()}function j(){n(k,y),n(p,e(D).filter(v=>{if(e(g).startDate&&v.date<e(g).startDate||e(g).endDate&&v.date>e(g).endDate||e(g).location&&v.location!==e(g).location)return!1;if(e(g).climbingType&&(v.climbingType==="Leading"?"Sport":v.climbingType)!==e(g).climbingType)if(v.climbingType==="Mixed")if(e(g).climbingType==="Bouldering"){if(!v.climbs.some(q=>!q.isSport))return!1}else if(e(g).climbingType==="Sport"){if(!v.climbs.some(q=>q.isSport))return!1}else return!1;else return!1;if(e(g).sessionType&&!v.trainingTypes?.includes(e(g).sessionType))return!1;if(e(g).grade){const d=e(g).grade.trim().toLowerCase();if(!v.climbs.some(N=>N.grade.trim().toLowerCase()===d))return!1}return!0}),!0)}function W(){n(k,e(k)+y)}var A=rs(),Y=t(A),J=s(t(Y),2),ae=t(J);ae.__click=()=>Wa(e(p),"indoor_climbs");var Q=s(ae,2);Q.__click=P;var $=t(Q);{var ee=v=>{var d=es();Da(),r(v,d)},ne=v=>{var d=ba("‚òÅÔ∏è Fetch Data");r(v,d)};c($,v=>{e(T)?v(ee):v(ne,!1)})}a(Q),a(J),a(Y);var U=s(Y,2);{var _e=v=>{var d=as(),q=t(d,!0);a(d),m(()=>o(q,e(w))),Je(3,d,()=>ra),r(v,d)};c(U,v=>{e(w)&&v(_e)})}var b=s(U,2);ft(b,{onFilterParamsChange:re});var x=s(b,2),G=t(x),R=t(G);Ka(R),a(G),Da(2),a(x);var H=s(x,2),le=t(H);ke(le,17,()=>e(p).slice(0,e(k)),v=>v.id,(v,d)=>{Xt(v,{get session(){return e(d)},onDelete:L})});var ue=s(le,2);{var _=v=>{var d=ss(),q=s(t(d),2);{var N=ve=>{var ge=ts();r(ve,ge)};c(q,ve=>{e(D).length>0&&ve(N)})}a(d),r(v,d)};c(ue,v=>{e(p).length===0&&v(_)})}var h=s(ue,2);{var f=v=>{var d=is(),q=t(d);q.__click=W;var N=t(q);a(q),a(d),m(()=>o(N,`Load More (${e(p).length-e(k)} remaining)`)),r(v,d)};c(h,v=>{e(k)<e(p).length&&v(f)})}a(H),a(A),m(()=>Q.disabled=e(T)),r(me,A),sa()}$e(["click"]);var vs=l('<span class="chevron svelte-1frtlim">‚ñ≤</span>'),ns=l('<span class="chevron svelte-1frtlim">‚ñº</span>'),os=l('<div class="input-with-action svelte-1frtlim"><input type="text" id="area-filter-text" placeholder="Type area name..." class="flat-left svelte-1frtlim"/> <button class="action-btn flat-right svelte-1frtlim" title="Back to list">‚úï</button></div>'),ds=l("<option> </option>"),cs=l('<select id="area-filter" class="svelte-1frtlim"><option>All Areas</option><!><option>Other (Manual Entry)</option></select>'),_s=l('<div class="input-with-action svelte-1frtlim"><input type="text" id="crag-filter-text" placeholder="Type crag name..." class="flat-left svelte-1frtlim"/> <button class="action-btn flat-right svelte-1frtlim" title="Back to list">‚úï</button></div>'),us=l("<option> </option>"),fs=l('<select id="crag-filter" class="svelte-1frtlim"><option>All Crags</option><!><option>Other (Manual Entry)</option></select>'),gs=l('<input type="text" id="crag-filter-text" class="svelte-1frtlim"/>'),ps=l("<option> </option>"),ms=l("<option> </option>"),hs=l('<div class="filter-body svelte-1frtlim"><div class="filter-grid svelte-1frtlim"><div class="filter-item svelte-1frtlim"><label for="start-date" class="svelte-1frtlim">Start Date</label> <input type="date" id="start-date" class="svelte-1frtlim"/></div> <div class="filter-item svelte-1frtlim"><label for="end-date" class="svelte-1frtlim">End Date</label> <input type="date" id="end-date" class="svelte-1frtlim"/></div> <div class="filter-item svelte-1frtlim"><label for="area-filter" class="svelte-1frtlim">Area</label> <!></div> <div class="filter-item svelte-1frtlim"><label for="crag-filter" class="svelte-1frtlim">Crag</label> <!></div> <div class="filter-item svelte-1frtlim"><label for="climbing-type-filter" class="svelte-1frtlim">Climb Type</label> <select id="climbing-type-filter" class="svelte-1frtlim"><option>Any Type</option><!></select></div> <div class="filter-item svelte-1frtlim"><label for="session-type-filter" class="svelte-1frtlim">Session Type</label> <select id="session-type-filter" class="svelte-1frtlim"><option>Any Type</option><!></select></div> <div class="filter-item svelte-1frtlim"><label for="grade-filter" class="svelte-1frtlim">Grade (Exact)</label> <input type="text" id="grade-filter" placeholder="e.g. 7a" class="svelte-1frtlim"/></div></div> <div class="filter-actions svelte-1frtlim"><button class="reset-btn svelte-1frtlim">Reset Filters</button></div></div>'),bs=l('<div class="filter-container svelte-1frtlim"><button class="filter-header svelte-1frtlim"><div class="header-content svelte-1frtlim"><span class="icon svelte-1frtlim">üîç</span> <span class="title svelte-1frtlim">Filters</span> <!></div></button> <!></div>');function ys(me,i){ta(i,!0);const D=Ya(),p=["Bouldering","Sport","Mixed","Trad"],T=["Projecting","Onsighting","Campusing","Repeaters","Fun","Volume"];let w=F(!1),g=F(""),k=F(""),y=F(""),L=F(""),P=F(""),V=F(""),re=F(""),j=F(!1),W=F(!1),A=_a(()=>e(y)&&e(y)!=="Other"?Qa(e(y)):[]);function Y(){e(y)==="Other"?(n(j,!0),n(y,"")):n(j,!1),n(L,""),n(W,!1),$()}function J(){e(L)==="Other"?(n(W,!0),n(L,"")):n(W,!1),$()}function ae(){n(w,!e(w))}function Q(){n(g,""),n(k,""),n(y,""),n(L,""),n(P,""),n(V,""),n(re,""),n(j,!1),n(W,!1),$()}function $(){i.onFilterParamsChange({startDate:e(g),endDate:e(k),area:e(y),crag:e(L),climbingType:e(P),sessionType:e(V),grade:e(re)})}var ee=bs(),ne=t(ee);ne.__click=ae;var U=t(ne),_e=s(t(U),4);{var b=H=>{var le=vs();r(H,le)},x=H=>{var le=ns();r(H,le)};c(_e,H=>{e(w)?H(b):H(x,!1)})}a(U),a(ne);var G=s(ne,2);{var R=H=>{var le=hs(),ue=t(le),_=t(ue),h=s(t(_),2);Xe(h),h.__change=$,a(_);var f=s(_,2),v=s(t(f),2);Xe(v),v.__change=$,a(f);var d=s(f,2),q=s(t(d),2);{var N=te=>{var ie=os(),oe=t(ie);Xe(oe),oe.__input=$;var be=s(oe,2);be.__click=()=>{n(j,!1),n(y,""),$()},a(ie),Ye(oe,()=>e(y),he=>n(y,he)),r(te,ie)},ve=te=>{var ie=cs();ie.__change=Y;var oe=t(ie);oe.value=oe.__value="";var be=s(oe);ke(be,17,()=>D,Ge,(we,De)=>{var Se=ds(),ye=t(Se,!0);a(Se);var Te={};m(()=>{o(ye,e(De)),Te!==(Te=e(De))&&(Se.value=(Se.__value=e(De))??"")}),r(we,Se)});var he=s(be);he.value=he.__value="Other",a(ie),wa(ie,()=>e(y),we=>n(y,we)),r(te,ie)};c(q,te=>{e(j)?te(N):te(ve,!1)})}a(d);var ge=s(d,2),Oe=s(t(ge),2);{var pe=te=>{var ie=_s(),oe=t(ie);Xe(oe),oe.__input=$;var be=s(oe,2);be.__click=()=>{n(W,!1),n(L,""),$()},a(ie),Ye(oe,()=>e(L),he=>n(L,he)),r(te,ie)},E=te=>{var ie=Ve(),oe=Ee(ie);{var be=we=>{var De=fs();De.__change=J;var Se=t(De);Se.value=Se.__value="";var ye=s(Se);ke(ye,17,()=>e(A),Ge,(Pe,We)=>{var Ae=us(),Ke=t(Ae,!0);a(Ae);var Ne={};m(()=>{o(Ke,e(We)),Ne!==(Ne=e(We))&&(Ae.value=(Ae.__value=e(We))??"")}),r(Pe,Ae)});var Te=s(ye);Te.value=Te.__value="Other",a(De),wa(De,()=>e(L),Pe=>n(L,Pe)),r(we,De)},he=we=>{var De=gs();Xe(De),De.__input=$,m(()=>{Ue(De,"placeholder",e(y)?"Filter crag...":"Select area first"),De.disabled=!e(j)&&!e(y)}),Ye(De,()=>e(L),Se=>n(L,Se)),r(we,De)};c(oe,we=>{!e(j)&&e(y)&&e(A).length>0?we(be):we(he,!1)},!0)}r(te,ie)};c(Oe,te=>{e(W)?te(pe):te(E,!1)})}a(ge);var K=s(ge,2),Z=s(t(K),2);Z.__change=$;var xe=t(Z);xe.value=xe.__value="";var ze=s(xe);ke(ze,17,()=>p,Ge,(te,ie)=>{var oe=ps(),be=t(oe,!0);a(oe);var he={};m(()=>{o(be,e(ie)),he!==(he=e(ie))&&(oe.value=(oe.__value=e(ie))??"")}),r(te,oe)}),a(Z),a(K);var Fe=s(K,2),C=s(t(Fe),2);C.__change=$;var I=t(C);I.value=I.__value="";var ce=s(I);ke(ce,17,()=>T,Ge,(te,ie)=>{var oe=ms(),be=t(oe,!0);a(oe);var he={};m(()=>{o(be,e(ie)),he!==(he=e(ie))&&(oe.value=(oe.__value=e(ie))??"")}),r(te,oe)}),a(C),a(Fe);var qe=s(Fe,2),z=s(t(qe),2);Xe(z),z.__input=$,a(qe),a(ue);var se=s(ue,2),Le=t(se);Le.__click=Q,a(se),a(le),Ye(h,()=>e(g),te=>n(g,te)),Ye(v,()=>e(k),te=>n(k,te)),wa(Z,()=>e(P),te=>n(P,te)),wa(C,()=>e(V),te=>n(V,te)),Ye(z,()=>e(re),te=>n(re,te)),Je(3,le,()=>ra,()=>({duration:200})),r(H,le)};c(G,H=>{e(w)&&H(R)})}a(ee),m(()=>Ue(ne,"aria-expanded",e(w))),r(me,ee),sa()}$e(["click","change","input"]);var xs=l('<span class="climb-type-tag svelte-1k6anfh"> </span>'),ws=l('<span class="notes-preview svelte-1k6anfh"> </span>'),Ds=l('<span class="attempts-count svelte-1k6anfh"> </span>'),Ss=l('<div class="detail-row svelte-1k6anfh"><span class="label svelte-1k6anfh">Notes:</span> <p class="notes svelte-1k6anfh"> </p></div>'),ks=l('<p class="empty-notes svelte-1k6anfh">No notes for this climb.</p>'),qs=l('<div class="climb-details svelte-1k6anfh"><!> <div class="tags svelte-1k6anfh"><span class="tag type svelte-1k6anfh"> </span> <span class="tag attempt-text svelte-1k6anfh"> </span></div></div>'),Ts=l('<div><div class="climb-header svelte-1k6anfh" role="button" tabindex="0"><div class="climb-main-info svelte-1k6anfh"><span> </span> <span class="climb-name svelte-1k6anfh"> </span> <!> <!></div> <div class="climb-meta svelte-1k6anfh"><span><span class="icon svelte-1k6anfh"> </span> <!></span> <button class="delete-btn svelte-1k6anfh" aria-label="Delete climb" title="Delete climb">üóëÔ∏è</button> <span class="chevron svelte-1k6anfh"> </span></div></div> <!></div>');function Cs(me,i){ta(i,!0);let D=Ga(i,"showClimbType",3,!1),p=F(!1);function T(){n(p,!e(p))}function w(_){_.stopPropagation(),i.onDelete()}const g={Flash:"‚ö°",Onsight:"üëÅÔ∏è",Redpoint:"üî¥",Dogged:"üõ†Ô∏è",DNF:"‚ùå"};var k=Ts();let y;var L=t(k);L.__click=T,L.__keydown=_=>(_.key==="Enter"||_.key===" ")&&T();var P=t(L),V=t(P);let re;var j=t(V,!0);a(V);var W=s(V,2),A=t(W,!0);a(W);var Y=s(W,2);{var J=_=>{var h=xs(),f=t(h,!0);a(h),m(()=>o(f,i.climb.isSport?"Sport":"Boulder")),r(_,h)};c(Y,_=>{D()&&_(J)})}var ae=s(Y,2);{var Q=_=>{var h=ws(),f=t(h);a(h),m(()=>o(f,`- ${i.climb.notes??""}`)),r(_,h)};c(ae,_=>{!e(p)&&i.climb.notes&&_(Q)})}a(P);var $=s(P,2),ee=t($);let ne;var U=t(ee),_e=t(U,!0);a(U);var b=s(U,2);{var x=_=>{var h=Ds(),f=t(h,!0);a(h),m(()=>o(f,i.climb.attemptsNum)),r(_,h)};c(b,_=>{i.climb.attemptType!=="Flash"&&i.climb.attemptType!=="Onsight"&&_(x)})}a(ee);var G=s(ee,2);G.__click=w;var R=s(G,2),H=t(R,!0);a(R),a($),a(L);var le=s(L,2);{var ue=_=>{var h=qs(),f=t(h);{var v=pe=>{var E=Ss(),K=s(t(E),2),Z=t(K,!0);a(K),a(E),m(()=>o(Z,i.climb.notes)),r(pe,E)},d=pe=>{var E=ks();r(pe,E)};c(f,pe=>{i.climb.notes?pe(v):pe(d,!1)})}var q=s(f,2),N=t(q),ve=t(N,!0);a(N);var ge=s(N,2),Oe=t(ge,!0);a(ge),a(q),a(h),m(()=>{o(ve,i.climb.isSport?"Sport":"Boulder"),o(Oe,i.climb.attemptType)}),Je(3,h,()=>ra,()=>({duration:150})),r(_,h)};c(le,_=>{e(p)&&_(ue)})}a(k),m(()=>{y=Qe(k,1,"climb-entry svelte-1k6anfh",null,y,{expanded:e(p)}),Ue(L,"aria-expanded",e(p)),re=Qe(V,1,"grade-badge svelte-1k6anfh",null,re,{sport:i.climb.isSport}),o(j,i.climb.grade),o(A,i.climb.name||"Unnamed Route"),ne=Qe(ee,1,"attempt-type svelte-1k6anfh",null,ne,{flash:i.climb.attemptType==="Flash"}),o(_e,g[i.climb.attemptType]||i.climb.attemptType),o(H,e(p)?"‚ñ≤":"‚ñº")}),r(me,k),sa()}$e(["click","keydown"]);var zs=l('<div class="sector-meta svelte-d5hg2r"> </div>'),Fs=l('<span class="stat svelte-d5hg2r"> </span>'),Ls=l('<span class="status-icon pending svelte-d5hg2r" title="Waiting to sync">üîÑ</span>'),Gs=l('<span class="status-icon error svelte-d5hg2r" title="Sync error">‚ö†Ô∏è</span>'),Es=l('<span class="chip svelte-d5hg2r"> </span>'),Os=l('<span class="text-none svelte-d5hg2r">None</span>'),js=l('<div class="detail-item svelte-d5hg2r"><span class="label svelte-d5hg2r">Difficulty</span> <span class="value svelte-d5hg2r"> </span></div>'),As=l('<span class="chip svelte-d5hg2r"> </span>'),Ns=l('<span class="text-none svelte-d5hg2r">None</span>'),Is=l('<div class="detail-item svelte-d5hg2r"><span class="label svelte-d5hg2r">Category</span> <div class="value-chips svelte-d5hg2r"><!></div></div>'),Ms=l('<span class="chip svelte-d5hg2r"> </span>'),Rs=l('<span class="text-none svelte-d5hg2r">None</span>'),Ps=l('<div class="detail-item svelte-d5hg2r"><span class="label svelte-d5hg2r">Focus</span> <div class="value-chips svelte-d5hg2r"><!></div></div>'),Bs=l('<span class="chip svelte-d5hg2r"> </span>'),Vs=l('<span class="text-none svelte-d5hg2r">None</span>'),Ws=l('<div class="detail-item svelte-d5hg2r"><span class="label svelte-d5hg2r">Energy System</span> <div class="value-chips svelte-d5hg2r"><!></div></div>'),Us=l('<div class="metric svelte-d5hg2r"><span class="label svelte-d5hg2r">Open Grip</span> <div class="bar-container svelte-d5hg2r"><div class="bar-fill svelte-d5hg2r"></div></div> <span class="score svelte-d5hg2r"> </span></div>'),Hs=l('<div class="metric svelte-d5hg2r"><span class="label svelte-d5hg2r">Crimp Grip</span> <div class="bar-container svelte-d5hg2r"><div class="bar-fill svelte-d5hg2r"></div></div> <span class="score svelte-d5hg2r"> </span></div>'),Js=l('<div class="metric svelte-d5hg2r"><span class="label svelte-d5hg2r">Pinch Grip</span> <div class="bar-container svelte-d5hg2r"><div class="bar-fill svelte-d5hg2r"></div></div> <span class="score svelte-d5hg2r"> </span></div>'),Ks=l('<div class="metric svelte-d5hg2r"><span class="label svelte-d5hg2r">Sloper Grip</span> <div class="bar-container svelte-d5hg2r"><div class="bar-fill svelte-d5hg2r"></div></div> <span class="score svelte-d5hg2r"> </span></div>'),Zs=l('<div class="metric svelte-d5hg2r"><span class="label svelte-d5hg2r">Jug Grip</span> <div class="bar-container svelte-d5hg2r"><div class="bar-fill svelte-d5hg2r"></div></div> <span class="score svelte-d5hg2r"> </span></div>'),Xs=l('<p class="no-climbs svelte-d5hg2r">No climbs logged for this session.</p>'),Ys=l('<div class="card-body svelte-d5hg2r"><div class="details-grid svelte-d5hg2r"><div class="detail-item svelte-d5hg2r"><span class="label svelte-d5hg2r">Training Type</span> <div class="value-chips svelte-d5hg2r"><!></div></div> <!> <!> <!> <!></div> <div class="metrics-container svelte-d5hg2r"><div class="metric svelte-d5hg2r"><span class="label svelte-d5hg2r">Finger Load</span> <div class="bar-container svelte-d5hg2r"><div class="bar-fill svelte-d5hg2r"></div></div> <span class="score svelte-d5hg2r"> </span></div> <div class="metric svelte-d5hg2r"><span class="label svelte-d5hg2r">Shoulder Load</span> <div class="bar-container svelte-d5hg2r"><div class="bar-fill svelte-d5hg2r"></div></div> <span class="score svelte-d5hg2r"> </span></div> <div class="metric svelte-d5hg2r"><span class="label svelte-d5hg2r">Forearm Load</span> <div class="bar-container svelte-d5hg2r"><div class="bar-fill svelte-d5hg2r"></div></div> <span class="score svelte-d5hg2r"> </span></div> <!> <!> <!> <!> <!></div> <div class="climbs-list svelte-d5hg2r"><h4 class="svelte-d5hg2r">Climbs</h4> <div class="climbs-container svelte-d5hg2r"><!> <!></div></div></div>'),Qs=l('<div><div class="card-header svelte-d5hg2r" role="button" tabindex="0"><div class="header-main svelte-d5hg2r"><div class="date-badge svelte-d5hg2r"><span class="day svelte-d5hg2r"> </span> <span class="month svelte-d5hg2r"> </span></div> <div class="session-info svelte-d5hg2r"><div class="session-text svelte-d5hg2r"><h3 class="location svelte-d5hg2r"> <!></h3> <!> <div class="session-meta svelte-d5hg2r"><span class="type-tag svelte-d5hg2r"> </span> <span class="stat svelte-d5hg2r"> </span> <!></div></div> <div class="load-summary svelte-d5hg2r"><div class="load-badge finger svelte-d5hg2r"> </div> <div class="load-badge shoulder svelte-d5hg2r"> </div> <div class="load-badge forearm svelte-d5hg2r"> </div></div></div></div> <div class="header-actions svelte-d5hg2r"><div class="header-status svelte-d5hg2r"><!></div> <button class="btn-icon delete-session svelte-d5hg2r" title="Delete Session">üóëÔ∏è</button> <span class="chevron svelte-d5hg2r"> </span></div></div> <!></div> <!>',1);function $s(me,i){ta(i,!0);let D=F(!1),p=F(!1);function T(){n(D,!e(D))}function w(){n(p,!0)}function g(){Ma(i.session.id),n(p,!1),i.onDelete()}function k(z){const se=[...i.session.climbs];se.splice(z,1),Ja(i.session.id,{climbs:se}),i.onDelete()}let y=_a(()=>i.session.climbs?.length??0),L=_a(()=>(i.session.climbs||[]).reduce((z,se)=>{const Le=parseInt(se.grade.replace(/\D/g,""))||0,te=parseInt(z.replace(/\D/g,""))||0;return Le>te?se.grade:z},"V0/4a"));var P=Qs(),V=Ee(P);let re;var j=t(V);j.__click=T,j.__keydown=z=>z.key==="Enter"&&T();var W=t(j),A=t(W),Y=t(A),J=t(Y,!0);a(Y);var ae=s(Y,2),Q=t(ae,!0);a(ae),a(A);var $=s(A,2),ee=t($),ne=t(ee),U=t(ne),_e=s(U);{var b=z=>{var se=ba();m(()=>o(se,`- ${i.session.crag??""}`)),r(z,se)};c(_e,z=>{i.session.crag&&z(b)})}a(ne);var x=s(ne,2);{var G=z=>{var se=zs(),Le=t(se);a(se),m(()=>o(Le,`üìç ${i.session.sector??""}`)),r(z,se)};c(x,z=>{i.session.sector&&z(G)})}var R=s(x,2),H=t(R),le=t(H,!0);a(H);var ue=s(H,2),_=t(ue);a(ue);var h=s(ue,2);{var f=z=>{var se=Fs(),Le=t(se);a(se),m(()=>o(Le,`Max: ${e(L)??""}`)),r(z,se)};c(h,z=>{e(y)>0&&z(f)})}a(R),a(ee);var v=s(ee,2),d=t(v),q=t(d,!0);a(d);var N=s(d,2),ve=t(N,!0);a(N);var ge=s(N,2),Oe=t(ge,!0);a(ge),a(v),a($),a(W);var pe=s(W,2),E=t(pe),K=t(E);{var Z=z=>{var se=Ls();r(z,se)},xe=z=>{var se=Ve(),Le=Ee(se);{var te=ie=>{var oe=Gs();r(ie,oe)};c(Le,ie=>{i.session.syncStatus==="error"&&ie(te)},!0)}r(z,se)};c(K,z=>{i.session.syncStatus==="pending"?z(Z):z(xe,!1)})}a(E);var ze=s(E,2);ze.__click=z=>{z.stopPropagation(),w()};var Fe=s(ze,2),C=t(Fe,!0);a(Fe),a(pe),a(j);var I=s(j,2);{var ce=z=>{var se=Ys(),Le=t(se),te=t(Le),ie=s(t(te),2),oe=t(ie);{var be=u=>{var S=Ve(),O=Ee(S);ke(O,17,()=>i.session.trainingTypes,Ge,(de,X)=>{var fe=Es(),Ce=t(fe,!0);a(fe),m(()=>o(Ce,e(X))),r(de,fe)}),r(u,S)},he=u=>{var S=Os();r(u,S)};c(oe,u=>{i.session.trainingTypes&&i.session.trainingTypes.length>0&&!i.session.trainingTypes.includes("None")?u(be):u(he,!1)})}a(ie),a(te);var we=s(te,2);{var De=u=>{var S=js(),O=s(t(S),2),de=t(O,!0);a(O),a(S),m(()=>o(de,i.session.difficulty)),r(u,S)};c(we,u=>{i.session.difficulty&&u(De)})}var Se=s(we,2);{var ye=u=>{var S=Is(),O=s(t(S),2),de=t(O);{var X=Ce=>{var Me=Ve(),da=Ee(Me);ke(da,17,()=>i.session.categories,Ge,(Re,ca)=>{var pa=As(),Na=t(pa,!0);a(pa),m(()=>o(Na,e(ca))),r(Re,pa)}),r(Ce,Me)},fe=Ce=>{var Me=Ns();r(Ce,Me)};c(de,Ce=>{i.session.categories.length>0&&!i.session.categories.includes("None")?Ce(X):Ce(fe,!1)})}a(O),a(S),r(u,S)};c(Se,u=>{i.session.categories?.length&&u(ye)})}var Te=s(Se,2);{var Pe=u=>{var S=Ps(),O=s(t(S),2),de=t(O);{var X=Ce=>{var Me=Ve(),da=Ee(Me);ke(da,17,()=>i.session.techniqueFocuses,Ge,(Re,ca)=>{var pa=Ms(),Na=t(pa,!0);a(pa),m(()=>o(Na,e(ca))),r(Re,pa)}),r(Ce,Me)},fe=Ce=>{var Me=Rs();r(Ce,Me)};c(de,Ce=>{i.session.techniqueFocuses.length>0&&!i.session.techniqueFocuses.includes("None")?Ce(X):Ce(fe,!1)})}a(O),a(S),r(u,S)};c(Te,u=>{i.session.techniqueFocuses?.length&&u(Pe)})}var We=s(Te,2);{var Ae=u=>{var S=Ws(),O=s(t(S),2),de=t(O);{var X=Ce=>{var Me=Ve(),da=Ee(Me);ke(da,17,()=>i.session.energySystems,Ge,(Re,ca)=>{var pa=Bs(),Na=t(pa,!0);a(pa),m(()=>o(Na,e(ca))),r(Re,pa)}),r(Ce,Me)},fe=Ce=>{var Me=Vs();r(Ce,Me)};c(de,Ce=>{i.session.energySystems.length>0&&!i.session.energySystems.includes("None")?Ce(X):Ce(fe,!1)})}a(O),a(S),r(u,S)};c(We,u=>{i.session.energySystems?.length&&u(Ae)})}a(Le);var Ke=s(Le,2),Ne=t(Ke),Ie=s(t(Ne),2),fa=t(Ie);a(Ie);var Be=s(Ie,2),la=t(Be);a(Be),a(Ne);var je=s(Ne,2),He=s(t(je),2),Sa=t(He);a(He);var ia=s(He,2),ea=t(ia);a(ia),a(je);var va=s(je,2),ga=s(t(va),2),na=t(ga);a(ga);var oa=s(ga,2),ka=t(oa);a(oa),a(va);var aa=s(va,2);{var Ca=u=>{var S=Us(),O=s(t(S),2),de=t(O);a(O);var X=s(O,2),fe=t(X);a(X),a(S),m(()=>{Ze(de,`width: ${i.session.openGrip/5*100}%`),o(fe,`${i.session.openGrip??""}/5`)}),r(u,S)};c(aa,u=>{i.session.openGrip&&u(Ca)})}var ma=s(aa,2);{var qa=u=>{var S=Hs(),O=s(t(S),2),de=t(O);a(O);var X=s(O,2),fe=t(X);a(X),a(S),m(()=>{Ze(de,`width: ${i.session.crimpGrip/5*100}%`),o(fe,`${i.session.crimpGrip??""}/5`)}),r(u,S)};c(ma,u=>{i.session.crimpGrip&&u(qa)})}var ha=s(ma,2);{var ja=u=>{var S=Js(),O=s(t(S),2),de=t(O);a(O);var X=s(O,2),fe=t(X);a(X),a(S),m(()=>{Ze(de,`width: ${i.session.pinchGrip/5*100}%`),o(fe,`${i.session.pinchGrip??""}/5`)}),r(u,S)};c(ha,u=>{i.session.pinchGrip&&u(ja)})}var za=s(ha,2);{var Aa=u=>{var S=Ks(),O=s(t(S),2),de=t(O);a(O);var X=s(O,2),fe=t(X);a(X),a(S),m(()=>{Ze(de,`width: ${i.session.sloperGrip/5*100}%`),o(fe,`${i.session.sloperGrip??""}/5`)}),r(u,S)};c(za,u=>{i.session.sloperGrip&&u(Aa)})}var Ta=s(za,2);{var ya=u=>{var S=Zs(),O=s(t(S),2),de=t(O);a(O);var X=s(O,2),fe=t(X);a(X),a(S),m(()=>{Ze(de,`width: ${i.session.jugGrip/5*100}%`),o(fe,`${i.session.jugGrip??""}/5`)}),r(u,S)};c(Ta,u=>{i.session.jugGrip&&u(ya)})}a(Ke);var xa=s(Ke,2),Fa=s(t(xa),2),La=t(Fa);ke(La,17,()=>i.session.climbs||[],Ge,(u,S,O)=>{{let de=_a(()=>i.session.climbingType==="Mixed");Cs(u,{get climb(){return e(S)},onDelete:()=>k(O),get showClimbType(){return e(de)}})}});var B=s(La,2);{var M=u=>{var S=Xs();r(u,S)};c(B,u=>{(i.session.climbs||[]).length===0&&u(M)})}a(Fa),a(xa),a(se),m(()=>{Ze(fa,`width: ${i.session.fingerLoad/5*100}%`),o(la,`${i.session.fingerLoad??""}/5`),Ze(Sa,`width: ${i.session.shoulderLoad/5*100}%`),o(ea,`${i.session.shoulderLoad??""}/5`),Ze(na,`width: ${i.session.forearmLoad/5*100}%`),o(ka,`${i.session.forearmLoad??""}/5`)}),Je(3,se,()=>ra,()=>({duration:150})),r(z,se)};c(I,z=>{e(D)&&z(ce)})}a(V);var qe=s(V,2);Oa(qe,{get isOpen(){return e(p)},title:"Delete Session",message:"Are you sure you want to delete this session and all its climbs? This cannot be undone.",onConfirm:g,onCancel:()=>n(p,!1)}),m((z,se)=>{re=Qe(V,1,"session-card svelte-d5hg2r",null,re,{expanded:e(D)}),Ue(j,"aria-expanded",e(D)),o(J,z),o(Q,se),o(U,`${i.session.area??""} `),o(le,i.session.climbingType),o(_,`${e(y)??""} climbs`),Ue(d,"title",`Finger Load: ${i.session.fingerLoad??""}`),o(q,i.session.fingerLoad),Ue(N,"title",`Shoulder Load: ${i.session.shoulderLoad??""}`),o(ve,i.session.shoulderLoad),Ue(ge,"title",`Forearm Load: ${i.session.forearmLoad??""}`),o(Oe,i.session.forearmLoad),o(C,e(D)?"‚ñ≤":"‚ñº")},[()=>new Date(i.session.date).getDate(),()=>new Date(i.session.date).toLocaleDateString(void 0,{month:"short"})]),r(me,P),sa()}$e(["click","keydown"]);var ei=l('<span class="spinner svelte-1s7jdlh"></span> Fetching...',1),ai=l('<div class="error-banner svelte-1s7jdlh"> </div>'),ti=l('<small class="svelte-1s7jdlh">Try adjusting your filters.</small>'),si=l('<div class="empty-state svelte-1s7jdlh"><p class="svelte-1s7jdlh">No outdoor climbing sessions found.</p> <!></div>'),ii=l('<div class="load-more-container svelte-1s7jdlh"><button class="load-more-btn svelte-1s7jdlh"> </button></div>'),ri=l('<div class="view-container svelte-1s7jdlh"><div class="view-header svelte-1s7jdlh"><h2 class="view-title svelte-1s7jdlh">‚õ∞Ô∏è Outdoor Climbing History</h2> <div class="header-actions svelte-1s7jdlh"><button class="action-btn secondary svelte-1s7jdlh" title="Export filtered data to CSV">üì• Export</button> <button class="action-btn svelte-1s7jdlh" title="Fetch data from cloud"><!></button></div></div> <!> <!> <div class="info-bar svelte-1s7jdlh"><div class="legend-wrapper svelte-1s7jdlh"><!></div> <div class="load-key svelte-1s7jdlh"><span class="key-label svelte-1s7jdlh">Load:</span> <div class="key-item svelte-1s7jdlh"><span class="dot finger svelte-1s7jdlh"></span> Finger</div> <div class="key-item svelte-1s7jdlh"><span class="dot shoulder svelte-1s7jdlh"></span> Shoulder</div> <div class="key-item svelte-1s7jdlh"><span class="dot forearm svelte-1s7jdlh"></span> Forearm</div></div></div> <div class="sessions-list"><!> <!> <!></div></div>');function li(me,i){ta(i,!0);let D=F(ua([])),p=F(ua([])),T=F(!1),w=F(""),g=F(ua({startDate:"",endDate:"",area:"",crag:"",climbingType:"",sessionType:"",grade:""})),k=F(20);const y=20;Va(()=>{L()});function L(){const v=Ea("outdoor_climb");n(D,v.sort((d,q)=>new Date(q.date).getTime()-new Date(d.date).getTime()),!0),j()}async function P(){n(T,!0),n(w,"");try{await Ia();const v=await $a();v.ok&&v.data?V(v.data):n(w,v.error||"Failed to fetch data",!0)}catch(v){n(w,v instanceof Error?v.message:"Unknown error",!0)}finally{n(T,!1)}}function V(v){const d=v.map(N=>({...N,activityType:"outdoor_climb",createdAt:new Date().toISOString(),updatedAt:new Date().toISOString(),syncStatus:"synced",syncedAt:new Date().toISOString(),openGrip:0,crimpGrip:0,pinchGrip:0,sloperGrip:0,jugGrip:0}));Ra(d);const q=Ea("outdoor_climb");n(D,q.sort((N,ve)=>new Date(ve.date).getTime()-new Date(N.date).getTime()),!0),j()}function re(v){n(g,v,!0),j()}function j(){n(k,y),n(p,e(D).filter(v=>{if(e(g).startDate&&v.date<e(g).startDate||e(g).endDate&&v.date>e(g).endDate||e(g).area&&!v.area.toLowerCase().includes(e(g).area.toLowerCase())||e(g).crag&&!v.crag.toLowerCase().includes(e(g).crag.toLowerCase()))return!1;if(e(g).climbingType&&(v.climbingType==="Leading"?"Sport":v.climbingType)!==e(g).climbingType)if(v.climbingType==="Mixed")if(e(g).climbingType==="Bouldering"){if(!v.climbs.some(q=>!q.isSport))return!1}else if(e(g).climbingType==="Sport"||e(g).climbingType==="Trad"){if(!v.climbs.some(q=>q.isSport))return!1}else return!1;else return!1;if(e(g).sessionType&&!v.trainingTypes?.includes(e(g).sessionType))return!1;if(e(g).grade){const d=e(g).grade.trim().toLowerCase();if(!v.climbs.some(N=>N.grade.trim().toLowerCase()===d))return!1}return!0}),!0)}function W(){n(k,e(k)+y)}var A=ri(),Y=t(A),J=s(t(Y),2),ae=t(J);ae.__click=()=>Wa(e(p),"outdoor_climbs");var Q=s(ae,2);Q.__click=P;var $=t(Q);{var ee=v=>{var d=ei();Da(),r(v,d)},ne=v=>{var d=ba("‚òÅÔ∏è Fetch Data");r(v,d)};c($,v=>{e(T)?v(ee):v(ne,!1)})}a(Q),a(J),a(Y);var U=s(Y,2);{var _e=v=>{var d=ai(),q=t(d,!0);a(d),m(()=>o(q,e(w))),Je(3,d,()=>ra),r(v,d)};c(U,v=>{e(w)&&v(_e)})}var b=s(U,2);ys(b,{onFilterParamsChange:re});var x=s(b,2),G=t(x),R=t(G);Ka(R),a(G),Da(2),a(x);var H=s(x,2),le=t(H);ke(le,17,()=>e(p).slice(0,e(k)),v=>v.id,(v,d)=>{$s(v,{get session(){return e(d)},onDelete:L})});var ue=s(le,2);{var _=v=>{var d=si(),q=s(t(d),2);{var N=ve=>{var ge=ti();r(ve,ge)};c(q,ve=>{e(D).length>0&&ve(N)})}a(d),r(v,d)};c(ue,v=>{e(p).length===0&&v(_)})}var h=s(ue,2);{var f=v=>{var d=ii(),q=t(d);q.__click=W;var N=t(q);a(q),a(d),m(()=>o(N,`Load More (${e(p).length-e(k)} remaining)`)),r(v,d)};c(h,v=>{e(k)<e(p).length&&v(f)})}a(H),a(A),m(()=>Q.disabled=e(T)),r(me,A),sa()}$e(["click"]);var vi=l('<span class="chevron svelte-11rkzid">‚ñ≤</span>'),ni=l('<span class="chevron svelte-11rkzid">‚ñº</span>'),oi=l('<div class="filter-body svelte-11rkzid"><div class="filter-grid svelte-11rkzid"><div class="filter-item svelte-11rkzid"><label for="start-date" class="svelte-11rkzid">Start Date</label> <input type="date" id="start-date" class="svelte-11rkzid"/></div> <div class="filter-item svelte-11rkzid"><label for="end-date" class="svelte-11rkzid">End Date</label> <input type="date" id="end-date" class="svelte-11rkzid"/></div> <div class="filter-item svelte-11rkzid"><label for="name-filter" class="svelte-11rkzid">Session Name</label> <input type="text" id="name-filter" placeholder="e.g. Leg Day" class="svelte-11rkzid"/></div></div> <div class="filter-actions svelte-11rkzid"><button class="reset-btn svelte-11rkzid">Reset Filters</button></div></div>'),di=l('<div class="filter-container svelte-11rkzid"><button class="filter-header svelte-11rkzid"><div class="header-content svelte-11rkzid"><span class="icon svelte-11rkzid">üîç</span> <span class="title svelte-11rkzid">Filters</span> <!></div></button> <!></div>');function ci(me,i){ta(i,!0);let D=F(!1),p=F(""),T=F(""),w=F("");function g(){n(D,!e(D))}function k(){n(p,""),n(T,""),n(w,""),y()}function y(){i.onFilterParamsChange({startDate:e(p),endDate:e(T),name:e(w)})}var L=di(),P=t(L);P.__click=g;var V=t(P),re=s(t(V),4);{var j=J=>{var ae=vi();r(J,ae)},W=J=>{var ae=ni();r(J,ae)};c(re,J=>{e(D)?J(j):J(W,!1)})}a(V),a(P);var A=s(P,2);{var Y=J=>{var ae=oi(),Q=t(ae),$=t(Q),ee=s(t($),2);Xe(ee),ee.__change=y,a($);var ne=s($,2),U=s(t(ne),2);Xe(U),U.__change=y,a(ne);var _e=s(ne,2),b=s(t(_e),2);Xe(b),b.__input=y,a(_e),a(Q);var x=s(Q,2),G=t(x);G.__click=k,a(x),a(ae),Ye(ee,()=>e(p),R=>n(p,R)),Ye(U,()=>e(T),R=>n(T,R)),Ye(b,()=>e(w),R=>n(w,R)),Je(3,ae,()=>ra,()=>({duration:200})),r(J,ae)};c(A,J=>{e(D)&&J(Y)})}a(L),m(()=>Ue(P,"aria-expanded",e(D))),r(me,L),sa()}$e(["click","change","input"]);var _i=l('<span class="status-icon pending svelte-cirrfc" title="Waiting to sync">üîÑ</span>'),ui=l('<span class="status-icon error svelte-cirrfc" title="Sync error">‚ö†Ô∏è</span>'),fi=l('<div class="bw-info svelte-cirrfc"><span class="label svelte-cirrfc">Bodyweight:</span> </div>'),gi=l('<span class="muscle-tag svelte-cirrfc"> </span>'),pi=l('<span class="muscle-tag svelte-cirrfc"> </span>'),mi=l('<div class="muscle-tags svelte-cirrfc"><!> <!></div>'),hi=l('<span class="tag w svelte-cirrfc">W</span>'),bi=l('<span class="tag f svelte-cirrfc">F</span>'),yi=l('<span class="tag d svelte-cirrfc">D</span>'),xi=l('<div><span class="set-num svelte-cirrfc"></span> <!> <!> <!> <span class="val svelte-cirrfc"><span class="weight"> </span> <span class="x svelte-cirrfc">x</span> <span class="reps"> </span></span></div>'),wi=l('<div class="exercise-item svelte-cirrfc"><div class="exercise-header svelte-cirrfc"><h4 class="svelte-cirrfc"> </h4> <!></div> <div class="sets-grid svelte-cirrfc"></div></div>'),Di=l('<div class="card-body svelte-cirrfc"><!> <div class="exercises-list svelte-cirrfc"></div></div>'),Si=l('<div><div class="card-header svelte-cirrfc" role="button" tabindex="0"><div class="header-main svelte-cirrfc"><div class="date-badge svelte-cirrfc"><span class="day svelte-cirrfc"> </span> <span class="month svelte-cirrfc"> </span></div> <div class="session-info svelte-cirrfc"><div class="session-text"><h3 class="name svelte-cirrfc"> </h3> <div class="session-meta svelte-cirrfc"><span class="stat svelte-cirrfc"> </span> <span class="stat svelte-cirrfc"> </span> <span class="stat svelte-cirrfc"> </span></div></div></div></div> <div class="header-actions svelte-cirrfc"><div class="header-status"><!></div> <button class="btn-icon delete-session svelte-cirrfc" title="Delete Session">üóëÔ∏è</button> <span class="chevron svelte-cirrfc"> </span></div></div> <!></div> <!>',1);function ki(me,i){ta(i,!0);let D=F(!1),p=F(!1);function T(){n(D,!e(D))}function w(){n(p,!0)}function g(){Ma(i.session.id),n(p,!1),i.onDelete()}function k(E){return et.find(K=>K.name===E)}let y=_a(()=>i.session.exercises?.length??0),L=_a(()=>(i.session.exercises||[]).reduce((E,K)=>E+(K.sets?.length||0),0)),P=_a(()=>(i.session.exercises||[]).reduce((E,K)=>E+(K.sets||[]).reduce((Z,xe)=>Z+(xe.weight||0)*(xe.reps||0),0),0));var V=Si(),re=Ee(V);let j;var W=t(re);W.__click=T,W.__keydown=E=>E.key==="Enter"&&T();var A=t(W),Y=t(A),J=t(Y),ae=t(J,!0);a(J);var Q=s(J,2),$=t(Q,!0);a(Q),a(Y);var ee=s(Y,2),ne=t(ee),U=t(ne),_e=t(U,!0);a(U);var b=s(U,2),x=t(b),G=t(x);a(x);var R=s(x,2),H=t(R);a(R);var le=s(R,2),ue=t(le);a(le),a(b),a(ne),a(ee),a(A);var _=s(A,2),h=t(_),f=t(h);{var v=E=>{var K=_i();r(E,K)},d=E=>{var K=Ve(),Z=Ee(K);{var xe=ze=>{var Fe=ui();r(ze,Fe)};c(Z,ze=>{i.session.syncStatus==="error"&&ze(xe)},!0)}r(E,K)};c(f,E=>{i.session.syncStatus==="pending"?E(v):E(d,!1)})}a(h);var q=s(h,2);q.__click=E=>{E.stopPropagation(),w()};var N=s(q,2),ve=t(N,!0);a(N),a(_),a(W);var ge=s(W,2);{var Oe=E=>{var K=Di(),Z=t(K);{var xe=Fe=>{var C=fi(),I=s(t(C));a(C),m(()=>o(I,` ${i.session.bodyweight??""}kg`)),r(Fe,C)};c(Z,Fe=>{i.session.bodyweight&&Fe(xe)})}var ze=s(Z,2);ke(ze,21,()=>i.session.exercises,Ge,(Fe,C)=>{const I=_a(()=>k(e(C).name));var ce=wi(),qe=t(ce),z=t(qe),se=t(z,!0);a(z);var Le=s(z,2);{var te=oe=>{var be=mi(),he=t(be);ke(he,17,()=>e(I).targetMuscles.slice(0,3),Ge,(Se,ye)=>{var Te=gi(),Pe=t(Te,!0);a(Te),m(()=>o(Pe,e(ye))),r(Se,Te)});var we=s(he,2);{var De=Se=>{var ye=pi(),Te=t(ye);a(ye),m(()=>o(Te,`+${e(I).targetMuscles.length-3}`)),r(Se,ye)};c(we,Se=>{e(I).targetMuscles.length>3&&Se(De)})}a(be),r(oe,be)};c(Le,oe=>{e(I)&&oe(te)})}a(qe);var ie=s(qe,2);ke(ie,21,()=>e(C).sets,Ge,(oe,be,he)=>{var we=xi();let De;var Se=t(we);Se.textContent=he+1;var ye=s(Se,2);{var Te=je=>{var He=hi();r(je,He)};c(ye,je=>{e(be).isWarmup&&je(Te)})}var Pe=s(ye,2);{var We=je=>{var He=bi();r(je,He)};c(Pe,je=>{e(be).isFailure&&je(We)})}var Ae=s(Pe,2);{var Ke=je=>{var He=yi();r(je,He)};c(Ae,je=>{e(be).isDropSet&&je(Ke)})}var Ne=s(Ae,2),Ie=t(Ne),fa=t(Ie);a(Ie);var Be=s(Ie,4),la=t(Be,!0);a(Be),a(Ne),a(we),m(()=>{De=Qe(we,1,"set-pill svelte-cirrfc",null,De,{completed:e(be).completed,warmup:e(be).isWarmup}),o(fa,`${e(be).weight??""}kg`),o(la,e(be).reps)}),r(oe,we)}),a(ie),a(ce),m(()=>o(se,e(C).name)),r(Fe,ce)}),a(ze),a(K),Je(3,K,()=>ra,()=>({duration:150})),r(E,K)};c(ge,E=>{e(D)&&E(Oe)})}a(re);var pe=s(re,2);Oa(pe,{get isOpen(){return e(p)},title:"Delete Session",message:"Are you sure you want to delete this session? This cannot be undone.",onConfirm:g,onCancel:()=>n(p,!1)}),m((E,K,Z)=>{j=Qe(re,1,"session-card svelte-cirrfc",null,j,{expanded:e(D)}),Ue(W,"aria-expanded",e(D)),o(ae,E),o($,K),o(_e,i.session.name),o(G,`${e(y)??""} Exercises`),o(H,`${e(L)??""} Sets`),o(ue,`~${Z??""}kg Vol`),o(ve,e(D)?"‚ñ≤":"‚ñº")},[()=>new Date(i.session.date).getDate(),()=>new Date(i.session.date).toLocaleDateString("en-GB",{month:"short"}),()=>Math.round(e(P)).toLocaleString()]),r(me,V),sa()}$e(["click","keydown"]);var qi=l('<span class="spinner svelte-133enjd"></span> Fetching...',1),Ti=l('<div class="error-banner svelte-133enjd"> </div>'),Ci=l('<small class="svelte-133enjd">Try adjusting your filters.</small>'),zi=l('<div class="empty-state svelte-133enjd"><p class="svelte-133enjd">No gym sessions found.</p> <!></div>'),Fi=l('<div class="load-more-container svelte-133enjd"><button class="load-more-btn svelte-133enjd"> </button></div>'),Li=l('<div class="view-container svelte-133enjd"><div class="view-header svelte-133enjd"><h2 class="view-title svelte-133enjd">üèãÔ∏è Gym Session History</h2> <div class="header-actions svelte-133enjd"><button class="action-btn secondary svelte-133enjd" title="Export filtered data to CSV">üì• Export</button> <button class="action-btn svelte-133enjd" title="Fetch data from cloud"><!></button></div></div> <!> <!> <div class="sessions-list"><!> <!> <!></div></div>');function Gi(me,i){ta(i,!0);let D=F(ua([])),p=F(ua([])),T=F(!1),w=F(""),g=F(ua({startDate:"",endDate:"",name:""})),k=F(20);const y=20;Va(()=>{L()});function L(){const _=Ea("gym_session");n(D,_.sort((h,f)=>new Date(f.date).getTime()-new Date(h.date).getTime()),!0),j()}async function P(){n(T,!0),n(w,"");try{await Ia();const _=await at();_.ok&&_.data?V(_.data):n(w,_.error||"Failed to fetch data",!0)}catch(_){n(w,_ instanceof Error?_.message:"Unknown error",!0)}finally{n(T,!1)}}function V(_){const h=_.map(v=>({...v,activityType:"gym_session",syncStatus:"synced",syncedAt:new Date().toISOString(),createdAt:v.createdAt||new Date().toISOString(),updatedAt:v.updatedAt||new Date().toISOString()}));Ra(h);const f=Ea("gym_session");n(D,f.sort((v,d)=>new Date(d.date).getTime()-new Date(v.date).getTime()),!0),j()}function re(_){n(g,_,!0),j()}function j(){n(k,y),n(p,e(D).filter(_=>!(e(g).startDate&&_.date<e(g).startDate||e(g).endDate&&_.date>e(g).endDate||e(g).name&&!_.name.toLowerCase().includes(e(g).name.toLowerCase()))),!0)}function W(){n(k,e(k)+y)}var A=Li(),Y=t(A),J=s(t(Y),2),ae=t(J);ae.__click=()=>Wa(e(p),"gym_sessions");var Q=s(ae,2);Q.__click=P;var $=t(Q);{var ee=_=>{var h=qi();Da(),r(_,h)},ne=_=>{var h=ba("‚òÅÔ∏è Fetch Data");r(_,h)};c($,_=>{e(T)?_(ee):_(ne,!1)})}a(Q),a(J),a(Y);var U=s(Y,2);{var _e=_=>{var h=Ti(),f=t(h,!0);a(h),m(()=>o(f,e(w))),Je(3,h,()=>ra),r(_,h)};c(U,_=>{e(w)&&_(_e)})}var b=s(U,2);ci(b,{onFilterParamsChange:re});var x=s(b,2),G=t(x);ke(G,17,()=>e(p).slice(0,e(k)),_=>_.id,(_,h)=>{ki(_,{get session(){return e(h)},onDelete:L})});var R=s(G,2);{var H=_=>{var h=zi(),f=s(t(h),2);{var v=d=>{var q=Ci();r(d,q)};c(f,d=>{e(D).length>0&&d(v)})}a(h),r(_,h)};c(R,_=>{e(p).length===0&&_(H)})}var le=s(R,2);{var ue=_=>{var h=Fi(),f=t(h);f.__click=W;var v=t(f);a(f),a(h),m(()=>o(v,`Load More (${e(p).length-e(k)} remaining)`)),r(_,h)};c(le,_=>{e(k)<e(p).length&&_(ue)})}a(x),a(A),m(()=>Q.disabled=e(T)),r(me,A),sa()}$e(["click"]);var Ei=l('<span class="spinner svelte-1szs0u9"></span> Fetching...',1),Oi=l('<div class="loading svelte-1szs0u9">Loading sessions...</div>'),ji=l('<div class="empty-state svelte-1szs0u9"><!></div>'),Ai=l('<span class="set-tag svelte-1szs0u9"> <span class="x svelte-1szs0u9">x</span> </span>'),Ni=l('<div class="ex-notes svelte-1szs0u9"> </div>'),Ii=l('<div class="exercise-item svelte-1szs0u9"><div class="ex-header svelte-1szs0u9"><span class="ex-name svelte-1szs0u9"> </span> <span class="ex-grip svelte-1szs0u9"> </span></div> <div class="ex-sets svelte-1szs0u9"></div> <!></div>'),Mi=l('<div class="card-body svelte-1szs0u9"><div class="exercises-list svelte-1szs0u9"></div></div>'),Ri=l('<div><div class="card-header svelte-1szs0u9" role="button" tabindex="0"><div class="header-main"><span class="session-date svelte-1szs0u9"> </span> <span class="meta svelte-1szs0u9"><!> </span></div> <div class="header-status svelte-1szs0u9"><span>‚óè</span> <button class="btn-icon delete-btn svelte-1szs0u9" title="Delete Session">üóëÔ∏è</button> <span class="chevron svelte-1szs0u9"> </span></div></div> <!></div>'),Pi=l('<div class="load-more-container svelte-1szs0u9"><button class="load-more-btn svelte-1szs0u9"> </button></div>'),Bi=l('<div class="timeline svelte-1szs0u9"><!> <!></div>'),Vi=l('<div class="view-content svelte-1szs0u9"><div class="header svelte-1szs0u9"><h3 class="svelte-1szs0u9">ü§è Fingerboarding Log</h3> <button class="fetch-btn svelte-1szs0u9" title="Fetch data from cloud"><!></button></div> <div class="filters svelte-1szs0u9"><div class="filter-group svelte-1szs0u9"><label for="start-date" class="svelte-1szs0u9">From</label> <input type="date" id="start-date" class="svelte-1szs0u9"/></div> <div class="filter-group svelte-1szs0u9"><label for="end-date" class="svelte-1szs0u9">To</label> <input type="date" id="end-date" class="svelte-1szs0u9"/></div></div> <!></div> <!>',1);function Wi(me,i){ta(i,!0);let D=F(ua([])),p=F(!0),T=F(""),w=F(""),g=F(ua(new Set)),k=F(20);const y=20;Za(()=>{e(T),e(w),n(k,y)});let L=F(!1),P=F(null);function V(f){n(P,f,!0),n(L,!0)}function re(){e(P)&&(Ma(e(P)),n(P,null),n(L,!1),n(D,Pa().sort((f,v)=>new Date(v.date).getTime()-new Date(f.date).getTime()),!0))}async function j(){n(p,!0),n(D,Pa().sort((f,v)=>new Date(v.date).getTime()-new Date(f.date).getTime()),!0);try{await Ia();const f=await tt();if(f.ok&&f.data){const v=f.data.map(d=>({...d,activityType:"fingerboarding",createdAt:d.createdAt||new Date().toISOString(),updatedAt:d.updatedAt||new Date().toISOString(),syncStatus:"synced"}));Ra(v),n(D,Pa().sort((d,q)=>new Date(q.date).getTime()-new Date(d.date).getTime()),!0)}}catch(f){console.error("Failed to sync",f)}finally{n(p,!1)}}j();let W=_a(()=>e(D).filter(f=>!(e(T)&&new Date(f.date)<new Date(e(T))||e(w)&&new Date(f.date)>new Date(e(w)))));function A(){n(k,e(k)+y)}function Y(f){e(g).has(f)?e(g).delete(f):e(g).add(f),n(g,new Set(e(g)),!0)}function J(f){return f.exercises.reduce((v,d)=>v+d.details.length,0)}var ae=Vi(),Q=Ee(ae),$=t(Q),ee=s(t($),2);ee.__click=j;var ne=t(ee);{var U=f=>{var v=Ei();Da(),r(f,v)},_e=f=>{var v=ba("‚òÅÔ∏è Fetch Data");r(f,v)};c(ne,f=>{e(p)?f(U):f(_e,!1)})}a(ee),a($);var b=s($,2),x=t(b),G=s(t(x),2);Xe(G),a(x);var R=s(x,2),H=s(t(R),2);Xe(H),a(R),a(b);var le=s(b,2);{var ue=f=>{var v=Oi();r(f,v)},_=f=>{var v=Ve(),d=Ee(v);{var q=ve=>{var ge=ji(),Oe=t(ge);{var pe=K=>{var Z=ba("No sessions match filter.");r(K,Z)},E=K=>{var Z=ba("No fingerboarding sessions logged yet.");r(K,Z)};c(Oe,K=>{e(D).length>0?K(pe):K(E,!1)})}a(ge),r(ve,ge)},N=ve=>{var ge=Bi(),Oe=t(ge);ke(Oe,17,()=>e(W).slice(0,e(k)),Ge,(K,Z)=>{var xe=Ri();let ze;var Fe=t(xe);Fe.__click=()=>Y(e(Z).id),Fe.__keydown=ye=>ye.key==="Enter"&&Y(e(Z).id);var C=t(Fe),I=t(C),ce=t(I,!0);a(I);var qe=s(I,2),z=t(qe);{var se=ye=>{var Te=ba();m(()=>o(Te,`${e(Z).location??""} ¬∑`)),r(ye,Te)};c(z,ye=>{e(Z).location&&e(Z).location!=="N/A"&&e(Z).location!=="Home"&&ye(se)})}var Le=s(z);a(qe),a(C);var te=s(C,2),ie=t(te);let oe;var be=s(ie,2);be.__click=ye=>{ye.stopPropagation(),V(e(Z).id)};var he=s(be,2),we=t(he,!0);a(he),a(te),a(Fe);var De=s(Fe,2);{var Se=ye=>{var Te=Mi(),Pe=t(Te);ke(Pe,21,()=>e(Z).exercises||[],Ge,(We,Ae)=>{var Ke=Ii(),Ne=t(Ke),Ie=t(Ne),fa=t(Ie,!0);a(Ie);var Be=s(Ie,2),la=t(Be,!0);a(Be),a(Ne);var je=s(Ne,2);ke(je,21,()=>e(Ae).details,Ge,(ia,ea)=>{var va=Ai(),ga=t(va),na=s(ga,2);a(va),m(()=>{o(ga,`${e(ea).weight>0?`+${e(ea).weight}kg`:"BW"} `),o(na,` ${e(ea).reps??""}s/reps`)}),r(ia,va)}),a(je);var He=s(je,2);{var Sa=ia=>{var ea=Ni(),va=t(ea);a(ea),m(()=>o(va,`"${e(Ae).notes??""}"`)),r(ia,ea)};c(He,ia=>{e(Ae).notes&&ia(Sa)})}a(Ke),m(()=>{o(fa,e(Ae).name),o(la,e(Ae).gripType)}),r(We,Ke)}),a(Pe),a(Te),Je(3,Te,()=>ra,()=>({duration:150})),r(ye,Te)};c(De,ye=>{e(g).has(e(Z).id)&&ye(Se)})}a(xe),m((ye,Te,Pe,We)=>{ze=Qe(xe,1,"session-card svelte-1szs0u9",null,ze,ye),o(ce,Te),o(Le,` ${e(Z).exercises.length??""} Exercises ¬∑ ${Pe??""} Sets`),oe=Qe(ie,1,"sync-dot svelte-1szs0u9",null,oe,{synced:e(Z).syncStatus==="synced"}),Ue(ie,"title",e(Z).syncStatus==="synced"?"Synced":"Local"),o(we,We)},[()=>({expanded:e(g).has(e(Z).id)}),()=>new Date(e(Z).date).toLocaleDateString(void 0,{weekday:"short",month:"short",day:"numeric"}),()=>J(e(Z)),()=>e(g).has(e(Z).id)?"‚ñ≤":"‚ñº"]),r(K,xe)});var pe=s(Oe,2);{var E=K=>{var Z=Pi(),xe=t(Z);xe.__click=A;var ze=t(xe);a(xe),a(Z),m(()=>o(ze,`Load More (${e(W).length-e(k)} remaining)`)),r(K,Z)};c(pe,K=>{e(k)<e(W).length&&K(E)})}a(ge),r(ve,ge)};c(d,ve=>{e(W).length===0?ve(q):ve(N,!1)},!0)}r(f,v)};c(le,f=>{e(p)&&e(D).length===0?f(ue):f(_,!1)})}a(Q);var h=s(Q,2);Oa(h,{get isOpen(){return e(L)},title:"Delete Fingerboard Session",message:"Are you sure you want to delete this session? This cannot be undone.",onConfirm:re,onCancel:()=>n(L,!1)}),m(()=>ee.disabled=e(p)),Ye(G,()=>e(T),f=>n(T,f)),Ye(H,()=>e(w),f=>n(w,f)),r(me,ae),sa()}$e(["click","keydown"]);var Ui=l('<span class="spinner svelte-xyvf5r"></span> Fetching...',1),Hi=l('<div class="loading svelte-xyvf5r">Loading sessions...</div>'),Ji=l('<div class="empty-state svelte-xyvf5r">No competitions logged yet.</div>'),Ki=l('<span class="round-pos svelte-xyvf5r"> </span>'),Zi=l('<span class="c-attempts svelte-xyvf5r"> </span>'),Xi=l('<div class="climb-notes svelte-xyvf5r"> </div>'),Yi=l('<div class="climb-row svelte-xyvf5r"><div class="climb-info svelte-xyvf5r"><span class="c-name svelte-xyvf5r"> </span> <!></div> <div class="climb-result"><span> </span></div></div> <!>',1),Qi=l('<div class="climbs-list"></div>'),$i=l('<div class="round-item svelte-xyvf5r"><div class="round-header svelte-xyvf5r"><span class="round-name"> </span> <!></div> <!></div>'),er=l('<div class="rounds-list svelte-xyvf5r"></div>'),ar=l('<div class="load-meta svelte-xyvf5r"><span> </span></div>'),tr=l('<div class="card-body svelte-xyvf5r"><!> <!> <div class="session-footer svelte-xyvf5r"><span> </span></div></div>'),sr=l('<div><div class="card-header svelte-xyvf5r" role="button" tabindex="0"><div class="header-main svelte-xyvf5r"><div class="left-col svelte-xyvf5r"><span class="venue svelte-xyvf5r"> </span> <span class="date svelte-xyvf5r"> </span></div> <div class="right-col svelte-xyvf5r"><div class="badges svelte-xyvf5r"><span class="type-tag svelte-xyvf5r"> </span> <span class="result-tag svelte-xyvf5r"> </span></div></div></div> <div class="header-status svelte-xyvf5r"><span>‚óè</span> <button class="btn-icon delete-btn svelte-xyvf5r" title="Delete Session">üóëÔ∏è</button> <span class="chevron svelte-xyvf5r"> </span></div></div> <!></div>'),ir=l('<div class="load-more-container svelte-xyvf5r"><button class="load-more-btn svelte-xyvf5r"> </button></div>'),rr=l('<div class="timeline svelte-xyvf5r"><!> <!></div>'),lr=l('<div class="view-content svelte-xyvf5r"><div class="header svelte-xyvf5r"><h3 class="svelte-xyvf5r">üèÜ Competition Log</h3> <button class="fetch-btn svelte-xyvf5r" title="Fetch data from cloud"><!></button></div> <!> <!></div>');function vr(me,i){ta(i,!0);let D=F(ua([])),p=F(!0),T=F(ua(new Set)),w=F(20);const g=20;let k=F(!1),y=F(null);function L(b){n(y,b,!0),n(k,!0)}function P(){e(y)&&(Ma(e(y)),n(y,null),n(k,!1),n(D,Ba().sort((b,x)=>new Date(x.date).getTime()-new Date(b.date).getTime()),!0))}async function V(){n(p,!0),n(w,g),n(D,Ba().sort((b,x)=>new Date(x.date).getTime()-new Date(b.date).getTime()),!0);try{await Ia();const b=await st();if(b.ok&&b.data){const x=b.data.map(G=>({...G,activityType:"competition",type:G.type,rounds:G.rounds.map(R=>({...R,climbs:R.climbs?.map(H=>({...H,status:H.status}))})),createdAt:G.createdAt||new Date().toISOString(),updatedAt:G.updatedAt||new Date().toISOString(),syncStatus:"synced"}));Ra(x),n(D,Ba().sort((G,R)=>new Date(R.date).getTime()-new Date(G.date).getTime()),!0)}}catch(b){console.error("Failed to sync",b)}finally{n(p,!1)}}V();function re(b){e(T).has(b)?e(T).delete(b):e(T).add(b),n(T,new Set(e(T)),!0)}function j(){n(w,e(w)+g)}function W(b){if(!b.rounds||b.rounds.length===0)return"No rounds";const x=b.rounds[b.rounds.length-1];if(x.position)return`#${x.position} ${x.name}`;if(x.climbs){const G=x.climbs.filter(H=>H.status==="Top"||H.status==="Flash").length,R=x.climbs.filter(H=>H.status==="Zone").length;return`${b.rounds.length} Rnds ¬∑ Final: ${G}T ${R+G}Z`}return x.name}var A=lr(),Y=t(A),J=s(t(Y),2);J.__click=V;var ae=t(J);{var Q=b=>{var x=Ui();Da(),r(b,x)},$=b=>{var x=ba("‚òÅÔ∏è Fetch Data");r(b,x)};c(ae,b=>{e(p)?b(Q):b($,!1)})}a(J),a(Y);var ee=s(Y,2);{var ne=b=>{var x=Hi();r(b,x)},U=b=>{var x=Ve(),G=Ee(x);{var R=le=>{var ue=Ji();r(le,ue)},H=le=>{var ue=rr(),_=t(ue);ke(_,17,()=>e(D).slice(0,e(w)),Ge,(v,d)=>{var q=sr();let N;var ve=t(q);ve.__click=()=>re(e(d).id),ve.__keydown=he=>he.key==="Enter"&&re(e(d).id);var ge=t(ve),Oe=t(ge),pe=t(Oe),E=t(pe,!0);a(pe);var K=s(pe,2),Z=t(K,!0);a(K),a(Oe);var xe=s(Oe,2),ze=t(xe),Fe=t(ze),C=t(Fe,!0);a(Fe);var I=s(Fe,2),ce=t(I,!0);a(I),a(ze),a(xe),a(ge);var qe=s(ge,2),z=t(qe);let se;var Le=s(z,2);Le.__click=he=>{he.stopPropagation(),L(e(d).id)};var te=s(Le,2),ie=t(te,!0);a(te),a(qe),a(ve);var oe=s(ve,2);{var be=he=>{var we=tr(),De=t(we);{var Se=Ne=>{var Ie=er();ke(Ie,21,()=>e(d).rounds||[],Ge,(fa,Be)=>{var la=$i(),je=t(la),He=t(je),Sa=t(He,!0);a(He);var ia=s(He,2);{var ea=na=>{var oa=Ki(),ka=t(oa);a(oa),m(()=>o(ka,`#${e(Be).position??""}`)),r(na,oa)};c(ia,na=>{e(Be).position&&na(ea)})}a(je);var va=s(je,2);{var ga=na=>{var oa=Qi();ke(oa,21,()=>e(Be).climbs||[],Ge,(ka,aa)=>{var Ca=Yi(),ma=Ee(Ca),qa=t(ma),ha=t(qa),ja=t(ha,!0);a(ha);var za=s(ha,2);{var Aa=M=>{var u=Zi(),S=t(u);a(u),m(()=>o(S,`(${e(aa).attemptCount??""} tries)`)),r(M,u)};c(za,M=>{e(aa).attemptCount>1&&M(Aa)})}a(qa);var Ta=s(qa,2),ya=t(Ta);let xa;var Fa=t(ya,!0);a(ya),a(Ta),a(ma);var La=s(ma,2);{var B=M=>{var u=Xi(),S=t(u);a(u),m(()=>o(S,`"${e(aa).notes??""}"`)),r(M,u)};c(La,M=>{e(aa).notes&&M(B)})}m(()=>{o(ja,e(aa).name),xa=Qe(ya,1,"status-badge svelte-xyvf5r",null,xa,{top:e(aa).status==="Top"||e(aa).status==="Flash",zone:e(aa).status==="Zone"}),o(Fa,e(aa).status)}),r(ka,Ca)}),a(oa),r(na,oa)};c(va,na=>{e(Be).climbs&&na(ga)})}a(la),m(()=>o(Sa,e(Be).name)),r(fa,la)}),a(Ie),r(Ne,Ie)};c(De,Ne=>{e(d).rounds&&Ne(Se)})}var ye=s(De,2);{var Te=Ne=>{var Ie=ar(),fa=t(Ie),Be=t(fa);a(fa),a(Ie),m(()=>o(Be,`Detailed Load: Fingers ${e(d).fingerLoad??""}/5, Shoulders ${e(d).shoulderLoad??""}/5, Forearms ${e(d).forearmLoad??""}/5`)),r(Ne,Ie)};c(ye,Ne=>{(e(d).fingerLoad||e(d).shoulderLoad)&&Ne(Te)})}var Pe=s(ye,2),We=t(Pe);let Ae;var Ke=t(We,!0);a(We),a(Pe),a(we),m(()=>{Ae=Qe(We,1,"sync-status svelte-xyvf5r",null,Ae,{synced:e(d).syncStatus==="synced"}),o(Ke,e(d).syncStatus==="synced"?"‚úì Synced":"‚òÅ Local")}),Je(3,we,()=>ra,()=>({duration:150})),r(he,we)};c(oe,he=>{e(T).has(e(d).id)&&he(be)})}a(q),m((he,we,De,Se)=>{N=Qe(q,1,"session-card svelte-xyvf5r",null,N,he),o(E,e(d).customVenue||e(d).venue),o(Z,we),o(C,e(d).type),o(ce,De),se=Qe(z,1,"sync-dot",null,se,{synced:e(d).syncStatus==="synced"}),Ue(z,"title",e(d).syncStatus==="synced"?"Synced":"Local"),o(ie,Se)},[()=>({expanded:e(T).has(e(d).id)}),()=>new Date(e(d).date).toLocaleDateString(void 0,{weekday:"short",day:"numeric",month:"short"}),()=>W(e(d)),()=>e(T).has(e(d).id)?"‚ñ≤":"‚ñº"]),r(v,q)});var h=s(_,2);{var f=v=>{var d=ir(),q=t(d);q.__click=j;var N=t(q);a(q),a(d),m(()=>o(N,`Load More (${e(D).length-e(w)} remaining)`)),r(v,d)};c(h,v=>{e(w)<e(D).length&&v(f)})}a(ue),r(le,ue)};c(G,le=>{e(D).length===0?le(R):le(H,!1)},!0)}r(b,x)};c(ee,b=>{e(p)&&e(D).length===0?b(ne):b(U,!1)})}var _e=s(ee,2);Oa(_e,{get isOpen(){return e(k)},title:"Delete Competition",message:"Are you sure you want to delete this competition session? This action cannot be undone.",onConfirm:P,onCancel:()=>n(k,!1)}),a(A),m(()=>J.disabled=e(p)),r(me,A),sa()}$e(["click","keydown"]);var nr=l('<button class="backdrop svelte-108px9u" aria-label="Close settings"></button> <div class="settings-modal svelte-108px9u" role="dialog" aria-modal="true"><div class="settings-header svelte-108px9u"><h3 class="svelte-108px9u">Settings</h3> <button class="close-btn svelte-108px9u">‚úï</button></div> <div class="settings-content"><div class="setting-item svelte-108px9u"><div class="setting-info svelte-108px9u"><span class="setting-label svelte-108px9u">Local Data</span> <span class="setting-desc svelte-108px9u">Clear all cached data on this device</span></div> <button class="btn-clear-cache svelte-108px9u">Clear Cache</button></div></div></div>',1),or=l("<option> </option>"),dr=l('<div class="view-container svelte-108px9u"><!></div>'),cr=l('<div class="page svelte-108px9u"><div class="page-header svelte-108px9u"><div><h1 class="svelte-108px9u">üìä View Data</h1> <p class="subtitle svelte-108px9u">Browse your training history</p></div> <button class="settings-btn svelte-108px9u" aria-label="Settings">‚öôÔ∏è</button></div> <!> <!> <div class="content-card svelte-108px9u"><div class="form-group svelte-108px9u"><label for="activity-type" class="svelte-108px9u">Activity Type</label> <select id="activity-type" class="svelte-108px9u"><option disabled>Select an activity...</option><!></select></div> <!></div></div>');function wr(me,i){ta(i,!0);const D=[{value:"indoor_climb",label:"Indoor Climb",icon:"üßó"},{value:"outdoor_climb",label:"Outdoor Climb",icon:"‚õ∞Ô∏è"},{value:"gym_session",label:"Gym Session",icon:"üèãÔ∏è"},{value:"fingerboarding",label:"Fingerboarding",icon:"ü§è"},{value:"competition",label:"Competition",icon:"üèÜ"}];let p=F(""),T=F(!1),w=F(!1);function g(){n(T,!0)}function k(){n(T,!1)}function y(){n(T,!1),n(w,!0)}function L(){it()}var P=cr(),V=t(P),re=s(t(V),2);re.__click=g,a(V);var j=s(V,2);{var W=U=>{var _e=nr(),b=Ee(_e);b.__click=k;var x=s(b,2),G=t(x),R=s(t(G),2);R.__click=k,a(G);var H=s(G,2),le=t(H),ue=s(t(le),2);ue.__click=y,a(le),a(H),a(x),Je(3,b,()=>Ua,()=>({duration:200})),Je(3,x,()=>Ha,()=>({duration:200,start:.9})),r(U,_e)};c(j,U=>{e(T)&&U(W)})}var A=s(j,2);Oa(A,{get isOpen(){return e(w)},title:"Clear all local data?",message:"Are you sure you want to clear all locally cached data? This will remove all sessions stored on this device. Data already synced to the cloud will be preserved.",confirmKeyword:"clear",onConfirm:L,onCancel:()=>n(w,!1)});var Y=s(A,2),J=t(Y),ae=s(t(J),2),Q=t(ae);Q.value=Q.__value="";var $=s(Q);ke($,17,()=>D,U=>U.value,(U,_e)=>{var b=or(),x=t(b);a(b);var G={};m(()=>{o(x,`${e(_e).icon??""} ${e(_e).label??""}`),G!==(G=e(_e).value)&&(b.value=(b.__value=e(_e).value)??"")}),r(U,b)}),a(ae),a(J);var ee=s(J,2);{var ne=U=>{var _e=dr(),b=t(_e);{var x=R=>{ls(R,{})},G=R=>{var H=Ve(),le=Ee(H);{var ue=h=>{li(h,{})},_=h=>{var f=Ve(),v=Ee(f);{var d=N=>{Gi(N,{})},q=N=>{var ve=Ve(),ge=Ee(ve);{var Oe=E=>{Wi(E,{})},pe=E=>{var K=Ve(),Z=Ee(K);{var xe=ze=>{vr(ze,{})};c(Z,ze=>{e(p)==="competition"&&ze(xe)},!0)}r(E,K)};c(ge,E=>{e(p)==="fingerboarding"?E(Oe):E(pe,!1)},!0)}r(N,ve)};c(v,N=>{e(p)==="gym_session"?N(d):N(q,!1)},!0)}r(h,f)};c(le,h=>{e(p)==="outdoor_climb"?h(ue):h(_,!1)},!0)}r(R,H)};c(b,R=>{e(p)==="indoor_climb"?R(x):R(G,!1)})}a(_e),r(U,_e)};c(ee,U=>{e(p)&&U(ne)})}a(Y),a(P),wa(ae,()=>e(p),U=>n(p,U)),r(me,P),sa()}$e(["click"]);export{wr as component};
