import{f as u,a as o,t as Ne,c as ft}from"../chunks/DFOW_6n2.js";import{o as aa}from"../chunks/b6ntCrib.js";import{p as Et,aV as p,w as Tt,s as l,c as s,r as t,t as b,i as e,ao as mt,aW as Ft,aY as Kt,x as a,a as Dt,f as it,d as Xt}from"../chunks/CLLqIroS.js";import{d as Bt,s as T,e as Mt}from"../chunks/B3P2p6-W.js";import{i as q}from"../chunks/CFKLpgVY.js";import{r as N,e as z,i as G,a as et,b as A,d as ea,s as Ct,f as sa}from"../chunks/B1uQ-_P3.js";import{i as Qt,s as Yt,b as oe,c as la,a as It,d as oa,m as Wt,e as Ut,g as ra,f as ia,h as na,j as va,k as da,l as ca,n as ua,o as _a,p as pa,q as fa}from"../chunks/DnqHxCXM.js";import"../chunks/X8RR7YZ-.js";var ma=u("<option> </option>"),ga=u('<div class="form-group svelte-1lf3qka"><label for="custom-location" class="svelte-1lf3qka">Custom Location</label> <input type="text" id="custom-location" placeholder="Enter location name..." class="svelte-1lf3qka"/></div>'),ya=u("<option> </option>"),ha=u("<option> </option>"),ba=u("<option> </option>"),Sa=u("<option> </option>"),qa=u("<option> </option>"),ka=u("<option> </option>"),wa=u("<option> </option>"),xa=u('<th class="svelte-1lf3qka">Sport?</th>'),Ca=u('<td class="center svelte-1lf3qka"><input type="checkbox" class="svelte-1lf3qka"/></td>'),Ta=u('<span class="grade-error svelte-1lf3qka">Invalid</span>'),Na=u("<option> </option>"),Fa=u('<button type="button" class="remove-btn svelte-1lf3qka">‚úï</button>'),ja=u('<tr><!><td class="svelte-1lf3qka"><input type="text" placeholder="Route name..." class="svelte-1lf3qka"/></td><td class="svelte-1lf3qka"><input type="text" placeholder="V3"/> <!></td><td class="svelte-1lf3qka"><select class="svelte-1lf3qka"></select></td><td class="svelte-1lf3qka"><input type="number" min="1" class="svelte-1lf3qka"/></td><td><textarea placeholder="Notes..." class="svelte-1lf3qka"></textarea></td><td class="center svelte-1lf3qka"><!></td></tr>'),Va=u("<div> </div>"),Aa=u('<div class="form-content svelte-1lf3qka"><h3 class="svelte-1lf3qka">üßó Indoor Climb</h3> <div class="form-row svelte-1lf3qka"><div class="form-group svelte-1lf3qka"><label for="date" class="svelte-1lf3qka">Date</label> <input type="date" id="date" class="svelte-1lf3qka"/></div> <div class="form-group svelte-1lf3qka"><label for="location" class="svelte-1lf3qka">Location</label> <select id="location" class="svelte-1lf3qka"><option disabled>Select location...</option><!></select></div></div> <!> <div class="form-group svelte-1lf3qka"><label for="climbing-type" class="svelte-1lf3qka">Climbing Type</label> <select id="climbing-type" class="svelte-1lf3qka"><option disabled>Select type...</option><!></select></div> <div class="load-section svelte-1lf3qka"><h4 class="svelte-1lf3qka">Load Metrics</h4> <div class="load-metrics svelte-1lf3qka"><div class="load-item svelte-1lf3qka"><label for="finger-load" class="svelte-1lf3qka">Finger</label> <input type="number" id="finger-load" min="1" max="5" class="svelte-1lf3qka"/> <span class="load-scale svelte-1lf3qka">/ 5</span></div> <div class="load-item svelte-1lf3qka"><label for="shoulder-load" class="svelte-1lf3qka">Shoulder</label> <input type="number" id="shoulder-load" min="1" max="5" class="svelte-1lf3qka"/> <span class="load-scale svelte-1lf3qka">/ 5</span></div> <div class="load-item svelte-1lf3qka"><label for="forearm-load" class="svelte-1lf3qka">Forearm</label> <input type="number" id="forearm-load" min="1" max="5" class="svelte-1lf3qka"/> <span class="load-scale svelte-1lf3qka">/ 5</span></div></div></div> <div class="training-section svelte-1lf3qka"><h4 class="svelte-1lf3qka">Training Details</h4> <div class="training-grid svelte-1lf3qka"><div class="training-item svelte-1lf3qka"><label for="training-type" class="svelte-1lf3qka">Training Type</label> <select id="training-type" class="svelte-1lf3qka"></select></div> <div class="training-item svelte-1lf3qka"><label for="difficulty" class="svelte-1lf3qka">Difficulty</label> <select id="difficulty" class="svelte-1lf3qka"></select></div> <div class="training-item svelte-1lf3qka"><label for="category" class="svelte-1lf3qka">Category</label> <select id="category" class="svelte-1lf3qka"></select></div> <div class="training-item svelte-1lf3qka"><label for="energy-system" class="svelte-1lf3qka">Energy System</label> <select id="energy-system" class="svelte-1lf3qka"></select></div> <div class="training-item svelte-1lf3qka"><label for="technique-focus" class="svelte-1lf3qka">Technique Focus</label> <select id="technique-focus" class="svelte-1lf3qka"></select></div> <div class="training-item svelte-1lf3qka"><label for="wall-angle" class="svelte-1lf3qka">Wall Angle</label> <select id="wall-angle" class="svelte-1lf3qka"></select></div></div></div> <div class="climbs-section svelte-1lf3qka"><h4 class="svelte-1lf3qka">Climbs</h4> <div class="table-container svelte-1lf3qka"><table class="climbs-table svelte-1lf3qka"><thead><tr><!><th class="svelte-1lf3qka">Name</th><th class="svelte-1lf3qka">Grade</th><th class="svelte-1lf3qka">Attempt</th><th class="svelte-1lf3qka">#</th><th class="svelte-1lf3qka">Notes</th><th class="svelte-1lf3qka"></th></tr></thead><tbody></tbody></table></div> <button type="button" class="add-btn svelte-1lf3qka">+ Add Climb</button></div> <div class="submit-section svelte-1lf3qka"><!> <button type="button" class="submit-btn svelte-1lf3qka"><!></button></div></div>');function Oa(Ue,He){Et(He,!0);const tt=["Rockstar Swindon","Flashpoint Swindon","Flashpoint Bristol","Redpoint Bristol","TCH Bristol","Other"],me=["Bouldering","Sport","Mixed"],ge=["Flash","Redpoint","Dogged"],O=["None","Projecting","Onsighting","Campusing","Repeaters"],ae=["None","Easy","Medium","Hard","Max","Limit+"],ee=["None","Technique","Strength","Strength-endurance","Warm-up","Power"],ye=["None","Aerobic capacity","Aerobic lactic power","Anaerobic alactic capacity","Anaerobic alactic power","Anaerobic power","Anaerobic lactic capacity"],Je=["None","Double-clutch","Standing on volumes","Trusting feet"],se=["None","Overhang","Slab","Roof"],$e=["V0-","4-","V0","4","V0+","4+","V1","5","V2","5+","V3","6A","V4","6B","V5","6C","V6","7A","V7","7A+","V8","7B","7B+","V9","7C","V10","7C+","V11","8A","V12","8A+","V13","8B","V14","8B+","V15","8C","V16","8C+","V17","9A"].map(i=>i.toLowerCase());let ve=p(null),M=p(Tt(new Date().toISOString().split("T")[0])),x=p(""),R=p(""),E=p(""),Ce=p("None"),be=p("None"),y=p("None"),$=p("None"),U=p("None"),te=p("None"),F=p(3),P=p(3),H=p(3),h=p(Tt([{isSport:!1,name:"",grade:"",attemptType:"Flash",attemptsNum:1,notes:""}]));function m(){a(h,[...e(h),{isSport:!1,name:"",grade:"",attemptType:"Flash",attemptsNum:1,notes:""}],!0)}function S(i){a(h,e(h).filter((v,d)=>d!==i),!0)}function J(i,v){e(h)[i].attemptType=v,v==="Flash"&&(e(h)[i].attemptsNum=1)}function ce(i){a(ve,i,!0)}function re(){a(ve,null)}let le=Ft(()=>e(E)==="Mixed");function W(i){return e(E)==="Sport"?!0:e(E)==="Bouldering"?!1:i.isSport}function C(i){return i.trim()?$e.includes(i.trim().toLowerCase()):!0}let D=p("idle"),ie=p("");function Fe(){return e(x)?e(x)==="Other"&&!e(R).trim()?"Please enter a custom location":e(E)?e(h).filter(v=>v.grade.trim()&&!C(v.grade)).length>0?"Please fix invalid grades":null:"Please select a climbing type":"Please select a location"}async function Y(){const i=Fe();if(i){a(D,"error"),a(ie,i,!0);return}a(D,"saving");try{const v=e(h).map(w=>({...w,isSport:W(w)})),d={date:e(M),location:e(x)==="Other"?e(R):e(x),customLocation:e(x)==="Other"?e(R):void 0,climbingType:e(E),trainingType:e(Ce),difficulty:e(be),category:e(y),energySystem:e($),techniqueFocus:e(U),wallAngle:e(te),fingerLoad:e(F),shoulderLoad:e(P),forearmLoad:e(H),climbs:v},B=la(d);if(It()){const w=await oa(d);w.ok?(Wt(B.id),a(D,"success"),a(ie,"Session saved and synced!")):(Ut(B.id),a(D,"success"),a(ie,"Saved locally. Sync failed: "+(w.error||"Unknown error")))}else a(D,"success"),a(ie,"Saved locally. Will sync when online.");window.dispatchEvent(new CustomEvent("session-saved")),setTimeout(()=>{L()},2e3)}catch(v){a(D,"error"),a(ie,"Failed to save session"),console.error("Save error:",v)}}function L(){a(M,new Date().toISOString().split("T")[0],!0),a(x,""),a(R,""),a(E,""),a(Ce,"None"),a(be,"None"),a(y,"None"),a($,"None"),a(U,"None"),a(te,"None"),a(F,3),a(P,3),a(H,3),a(h,[{isSport:!1,name:"",grade:"",attemptType:"Flash",attemptsNum:1,notes:""}],!0),a(D,"idle"),a(ie,"")}var de=Aa(),fe=l(s(de),2),Ve=s(fe),Se=l(s(Ve),2);N(Se),t(Ve);var ue=l(Ve,2),Z=l(s(ue),2),ne=s(Z);ne.value=ne.__value="";var K=l(ne);z(K,17,()=>tt,G,(i,v)=>{var d=ma(),B=s(d,!0);t(d);var w={};b(()=>{T(B,e(v)),w!==(w=e(v))&&(d.value=(d.__value=e(v))??"")}),o(i,d)}),t(Z),t(ue),t(fe);var qe=l(fe,2);{var ke=i=>{var v=ga(),d=l(s(v),2);N(d),t(v),A(d,()=>e(R),B=>a(R,B)),o(i,v)};q(qe,i=>{e(x)==="Other"&&i(ke)})}var Re=l(qe,2),Ee=l(s(Re),2),De=s(Ee);De.value=De.__value="";var gt=l(De);z(gt,17,()=>me,G,(i,v)=>{var d=ya(),B=s(d,!0);t(d);var w={};b(()=>{T(B,e(v)),w!==(w=e(v))&&(d.value=(d.__value=e(v))??"")}),o(i,d)}),t(Ee),t(Re);var _=l(Re,2),f=l(s(_),2),g=s(f),j=l(s(g),2);N(j),mt(2),t(g);var Q=l(g,2),we=l(s(Q),2);N(we),mt(2),t(Q);var Be=l(Q,2),Nt=l(s(Be),2);N(Nt),mt(2),t(Be),t(f),t(_);var at=l(_,2),yt=l(s(at),2),Qe=s(yt),nt=l(s(Qe),2);z(nt,21,()=>O,G,(i,v)=>{var d=ha(),B=s(d,!0);t(d);var w={};b(()=>{T(B,e(v)),w!==(w=e(v))&&(d.value=(d.__value=e(v))??"")}),o(i,d)}),t(nt),t(Qe);var vt=l(Qe,2),Ae=l(s(vt),2);z(Ae,21,()=>ae,G,(i,v)=>{var d=ba(),B=s(d,!0);t(d);var w={};b(()=>{T(B,e(v)),w!==(w=e(v))&&(d.value=(d.__value=e(v))??"")}),o(i,d)}),t(Ae),t(vt);var xe=l(vt,2),dt=l(s(xe),2);z(dt,21,()=>ee,G,(i,v)=>{var d=Sa(),B=s(d,!0);t(d);var w={};b(()=>{T(B,e(v)),w!==(w=e(v))&&(d.value=(d.__value=e(v))??"")}),o(i,d)}),t(dt),t(xe);var Ye=l(xe,2),st=l(s(Ye),2);z(st,21,()=>ye,G,(i,v)=>{var d=qa(),B=s(d,!0);t(d);var w={};b(()=>{T(B,e(v)),w!==(w=e(v))&&(d.value=(d.__value=e(v))??"")}),o(i,d)}),t(st),t(Ye);var lt=l(Ye,2),Ze=l(s(lt),2);z(Ze,21,()=>Je,G,(i,v)=>{var d=ka(),B=s(d,!0);t(d);var w={};b(()=>{T(B,e(v)),w!==(w=e(v))&&(d.value=(d.__value=e(v))??"")}),o(i,d)}),t(Ze),t(lt);var Oe=l(lt,2),ot=l(s(Oe),2);z(ot,21,()=>se,G,(i,v)=>{var d=wa(),B=s(d,!0);t(d);var w={};b(()=>{T(B,e(v)),w!==(w=e(v))&&(d.value=(d.__value=e(v))??"")}),o(i,d)}),t(ot),t(Oe),t(yt),t(at);var Ke=l(at,2),ct=l(s(Ke),2),ht=s(ct),ut=s(ht),_t=s(ut),bt=s(_t);{var St=i=>{var v=xa();o(i,v)};q(bt,i=>{e(le)&&i(St)})}mt(6),t(_t),t(ut);var qt=l(ut);z(qt,21,()=>e(h),G,(i,v,d)=>{var B=ja(),w=s(B);{var rt=I=>{var je=Ca(),Pe=s(je);N(Pe),t(je),ea(Pe,()=>e(v).isSport,At=>e(v).isSport=At),o(I,je)};q(w,I=>{e(le)&&I(rt)})}var r=l(w),n=s(r);N(n),t(r);var c=l(r),V=s(c);N(V);let k;var Ge=l(V,2);{var Xe=I=>{var je=Ta();o(I,je)};q(Ge,I=>{C(e(v).grade)||I(Xe)})}t(c);var Le=l(c),pe=s(Le);pe.__change=I=>J(d,I.target.value),z(pe,21,()=>ge,G,(I,je)=>{var Pe=Na(),At=s(Pe,!0);t(Pe);var Gt={};b(()=>{T(At,e(je)),Gt!==(Gt=e(je))&&(Pe.value=(Pe.__value=e(je))??"")}),o(I,Pe)}),t(pe);var ze;Qt(pe),t(Le);var kt=l(Le),wt=s(kt);N(wt),t(kt);var jt=l(kt);let Vt;var Me=s(jt);Kt(Me),t(jt);var Lt=l(jt),$t=s(Lt);{var Rt=I=>{var je=Fa();je.__click=()=>S(d),o(I,je)};q($t,I=>{e(h).length>1&&I(Rt)})}t(Lt),t(B),b(I=>{k=et(V,1,"grade-input svelte-1lf3qka",null,k,I),ze!==(ze=e(v).attemptType)&&(pe.value=(pe.__value=e(v).attemptType)??"",Yt(pe,e(v).attemptType)),wt.disabled=e(v).attemptType==="Flash",Vt=et(jt,1,"notes-cell svelte-1lf3qka",null,Vt,{expanded:e(ve)===d})},[()=>({invalid:!C(e(v).grade)})]),A(n,()=>e(v).name,I=>e(v).name=I),A(V,()=>e(v).grade,I=>e(v).grade=I),A(wt,()=>e(v).attemptsNum,I=>e(v).attemptsNum=I),Mt("focus",Me,()=>ce(d)),Mt("blur",Me,re),A(Me,()=>e(v).notes,I=>e(v).notes=I),o(i,B)}),t(qt),t(ht),t(ct);var _e=l(ct,2);_e.__click=m,t(Ke);var Te=l(Ke,2),Ie=s(Te);{var Ot=i=>{var v=Va();let d;var B=s(v,!0);t(v),b(()=>{d=et(v,1,"save-message svelte-1lf3qka",null,d,{success:e(D)==="success",error:e(D)==="error"}),T(B,e(ie))}),o(i,v)};q(Ie,i=>{e(ie)&&i(Ot)})}var pt=l(Ie,2);pt.__click=Y;var zt=s(pt);{var Ht=i=>{var v=Ne("Saving...");o(i,v)},Pt=i=>{var v=ft(),d=it(v);{var B=rt=>{var r=Ne("‚úì Saved!");o(rt,r)},w=rt=>{var r=Ne("Save Session");o(rt,r)};q(d,rt=>{e(D)==="success"?rt(B):rt(w,!1)},!0)}o(i,v)};q(zt,i=>{e(D)==="saving"?i(Ht):i(Pt,!1)})}t(pt),t(Te),t(de),b(()=>pt.disabled=e(D)==="saving"),A(Se,()=>e(M),i=>a(M,i)),oe(Z,()=>e(x),i=>a(x,i)),oe(Ee,()=>e(E),i=>a(E,i)),A(j,()=>e(F),i=>a(F,i)),A(we,()=>e(P),i=>a(P,i)),A(Nt,()=>e(H),i=>a(H,i)),oe(nt,()=>e(Ce),i=>a(Ce,i)),oe(Ae,()=>e(be),i=>a(be,i)),oe(dt,()=>e(y),i=>a(y,i)),oe(st,()=>e($),i=>a($,i)),oe(Ze,()=>e(U),i=>a(U,i)),oe(ot,()=>e(te),i=>a(te,i)),o(Ue,de),Dt()}Bt(["change","click"]);var La=u("<option> </option>"),$a=u('<div class="input-with-action svelte-15o2ys1"><input type="text" id="crag-manual" placeholder="Enter custom crag name..." class="flat-left svelte-15o2ys1"/> <button type="button" class="action-btn flat-right svelte-15o2ys1" title="Back to list">‚úï</button></div>'),Ra=u("<option> </option>"),Ea=u("<option>Other (Manual Entry)</option>"),Da=u('<select id="crag" class="svelte-15o2ys1"><option disabled> </option><!><!></select>'),Ba=u("<option> </option>"),Ia=u("<option> </option>"),za=u("<option> </option>"),Pa=u("<option> </option>"),Ga=u("<option> </option>"),Ma=u("<option> </option>"),Wa=u('<th class="svelte-15o2ys1">Sport?</th>'),Ua=u('<td class="center svelte-15o2ys1"><input type="checkbox" class="svelte-15o2ys1"/></td>'),Ha=u('<span class="grade-error svelte-15o2ys1">Invalid</span>'),Ja=u("<option> </option>"),Qa=u('<button type="button" class="remove-btn svelte-15o2ys1">‚úï</button>'),Ya=u('<tr><!><td class="svelte-15o2ys1"><input type="text" placeholder="Route name..." class="svelte-15o2ys1"/></td><td class="svelte-15o2ys1"><input type="text" placeholder="V3"/> <!></td><td class="svelte-15o2ys1"><select class="svelte-15o2ys1"></select></td><td class="svelte-15o2ys1"><input type="number" min="1" class="svelte-15o2ys1"/></td><td><textarea placeholder="Notes..." class="svelte-15o2ys1"></textarea></td><td class="center svelte-15o2ys1"><!></td></tr>'),Za=u("<div> </div>"),Ka=u('<div class="form-content svelte-15o2ys1"><h3 class="svelte-15o2ys1">‚õ∞Ô∏è Outdoor Climb</h3> <div class="form-row svelte-15o2ys1"><div class="form-group svelte-15o2ys1"><label for="date" class="svelte-15o2ys1">Date</label> <input type="date" id="date" class="svelte-15o2ys1"/></div> <div class="form-group svelte-15o2ys1"><label for="area" class="svelte-15o2ys1">Area</label> <select id="area" class="svelte-15o2ys1"><option disabled>Select area...</option><!></select></div></div> <div class="form-row svelte-15o2ys1"><div class="form-group svelte-15o2ys1"><label for="crag" class="svelte-15o2ys1">Crag</label> <!></div> <div class="form-group svelte-15o2ys1"><label for="sector" class="svelte-15o2ys1">Wall / Sector</label> <input type="text" id="sector" placeholder="Enter sector or wall name..." class="svelte-15o2ys1"/></div></div> <div class="form-group svelte-15o2ys1"><label for="climbing-type" class="svelte-15o2ys1">Climbing Type</label> <select id="climbing-type" class="svelte-15o2ys1"><option disabled>Select type...</option><!></select></div> <div class="load-section svelte-15o2ys1"><h4 class="svelte-15o2ys1">Load Metrics</h4> <div class="load-metrics svelte-15o2ys1"><div class="load-item svelte-15o2ys1"><label for="finger-load" class="svelte-15o2ys1">Finger</label> <input type="number" id="finger-load" min="1" max="5" class="svelte-15o2ys1"/> <span class="load-scale svelte-15o2ys1">/ 5</span></div> <div class="load-item svelte-15o2ys1"><label for="shoulder-load" class="svelte-15o2ys1">Shoulder</label> <input type="number" id="shoulder-load" min="1" max="5" class="svelte-15o2ys1"/> <span class="load-scale svelte-15o2ys1">/ 5</span></div> <div class="load-item svelte-15o2ys1"><label for="forearm-load" class="svelte-15o2ys1">Forearm</label> <input type="number" id="forearm-load" min="1" max="5" class="svelte-15o2ys1"/> <span class="load-scale svelte-15o2ys1">/ 5</span></div></div></div> <div class="training-section svelte-15o2ys1"><h4 class="svelte-15o2ys1">Training Details</h4> <div class="training-grid svelte-15o2ys1"><div class="training-item svelte-15o2ys1"><label for="training-type" class="svelte-15o2ys1">Training Type</label> <select id="training-type" class="svelte-15o2ys1"></select></div> <div class="training-item svelte-15o2ys1"><label for="difficulty" class="svelte-15o2ys1">Difficulty</label> <select id="difficulty" class="svelte-15o2ys1"></select></div> <div class="training-item svelte-15o2ys1"><label for="category" class="svelte-15o2ys1">Category</label> <select id="category" class="svelte-15o2ys1"></select></div> <div class="training-item svelte-15o2ys1"><label for="energy-system" class="svelte-15o2ys1">Energy System</label> <select id="energy-system" class="svelte-15o2ys1"></select></div> <div class="training-item svelte-15o2ys1"><label for="technique-focus" class="svelte-15o2ys1">Technique Focus</label> <select id="technique-focus" class="svelte-15o2ys1"></select></div></div></div> <div class="climbs-section svelte-15o2ys1"><h4 class="svelte-15o2ys1">Climbs</h4> <div class="table-container svelte-15o2ys1"><table class="climbs-table svelte-15o2ys1"><thead><tr><!><th class="svelte-15o2ys1">Name</th><th class="svelte-15o2ys1">Grade</th><th class="svelte-15o2ys1">Attempt</th><th class="svelte-15o2ys1">#</th><th class="svelte-15o2ys1">Notes</th><th class="svelte-15o2ys1"></th></tr></thead><tbody></tbody></table></div> <button type="button" class="add-btn svelte-15o2ys1">+ Add Climb</button></div> <div class="submit-section svelte-15o2ys1"><!> <button type="button" class="submit-btn svelte-15o2ys1"><!></button></div></div>');function Xa(Ue,He){Et(He,!0);const tt=ra(),me=["Boulder","Sport","Trad"],ge=["Flash","Redpoint","Dogged"],O=["None","Projecting","Onsighting","Campusing","Repeaters"],ae=["None","Easy","Medium","Hard","Max","Limit+"],ee=["None","Technique","Strength","Strength-endurance","Warm-up","Power"],ye=["None","Aerobic capacity","Aerobic lactic power","Anaerobic alactic capacity","Anaerobic alactic power","Anaerobic power","Anaerobic lactic capacity"],Je=["None","Double-clutch","Standing on volumes","Trusting feet"],he=["V0-","4-","V0","4","V0+","4+","V1","5","V2","5+","V3","6A","V4","6B","V5","6C","V6","7A","V7","7A+","V8","7B","7B+","V9","7C","V10","7C+","V11","8A","V12","8A+","V13","8B","V14","8B+","V15","8C","V16","8C+","V17","9A"].map(r=>r.toLowerCase());let $e=p(null),ve=p(Tt(new Date().toISOString().split("T")[0])),M=p(""),x=p(""),R=p(""),E=p(""),Ce=p("None"),be=p("None"),y=p("None"),$=p("None"),U=p("None"),te=p(3),F=p(3),P=p(3),H=p(Tt([{isSport:!1,name:"",grade:"",attemptType:"Flash",attemptsNum:1,notes:""}])),h=Ft(()=>e(M)?va(e(M)):[]),m=p(!1);Xt(()=>{e(M)&&(a(x,""),a(m,!1))});function S(){e(x)==="Other"&&(a(m,!0),a(x,""))}function J(){a(m,!1),a(x,"")}function ce(){a(H,[...e(H),{isSport:!1,name:"",grade:"",attemptType:"Flash",attemptsNum:1,notes:""}],!0)}function re(r){a(H,e(H).filter((n,c)=>c!==r),!0)}function le(r,n){e(H)[r].attemptType=n,n==="Flash"&&(e(H)[r].attemptsNum=1)}function W(r){a($e,r,!0)}function C(){a($e,null)}let D=Ft(()=>e(E)==="Trad");function ie(r){return e(E)==="Sport"?!0:e(E)==="Boulder"?!1:r.isSport}function Fe(r){return r.trim()?he.includes(r.trim().toLowerCase()):!0}let Y=p("idle"),L=p("");function de(){return e(M)?e(x)?e(E)?e(H).filter(n=>n.grade.trim()&&!Fe(n.grade)).length>0?"Please fix invalid grades":null:"Please select a climbing type":"Please select a crag":"Please select an area"}async function fe(){const r=de();if(r){a(Y,"error"),a(L,r,!0);return}a(Y,"saving");try{const n=e(H).map(k=>({...k,isSport:ie(k)})),c={date:e(ve),area:e(M),crag:e(x),sector:e(R)||void 0,climbingType:e(E),trainingType:e(Ce),difficulty:e(be),category:e(y),energySystem:e($),techniqueFocus:e(U),fingerLoad:e(te),shoulderLoad:e(F),forearmLoad:e(P),climbs:n},V=ia(c);if(It()){const k=await na(c);k.ok?(Wt(V.id),a(Y,"success"),a(L,"Session saved and synced!")):(Ut(V.id),a(Y,"success"),a(L,"Saved locally. Sync failed: "+(k.error||"Unknown error")))}else a(Y,"success"),a(L,"Saved locally. Will sync when online.");window.dispatchEvent(new CustomEvent("session-saved")),setTimeout(()=>{Ve()},2e3)}catch(n){a(Y,"error"),a(L,"Failed to save session"),console.error("Save error:",n)}}function Ve(){a(ve,new Date().toISOString().split("T")[0],!0),a(M,""),a(x,""),a(R,""),a(E,""),a(Ce,"None"),a(be,"None"),a(y,"None"),a($,"None"),a(U,"None"),a(te,3),a(F,3),a(P,3),a(H,[{isSport:!1,name:"",grade:"",attemptType:"Flash",attemptsNum:1,notes:""}],!0),a(Y,"idle"),a(L,"")}var Se=Ka(),ue=l(s(Se),2),Z=s(ue),ne=l(s(Z),2);N(ne),t(Z);var K=l(Z,2),qe=l(s(K),2),ke=s(qe);ke.value=ke.__value="";var Re=l(ke);z(Re,17,()=>tt,G,(r,n)=>{var c=La(),V=s(c,!0);t(c);var k={};b(()=>{T(V,e(n)),k!==(k=e(n))&&(c.value=(c.__value=e(n))??"")}),o(r,c)}),t(qe),t(K),t(ue);var Ee=l(ue,2),De=s(Ee),gt=l(s(De),2);{var _=r=>{var n=$a(),c=s(n);N(c);var V=l(c,2);V.__click=J,t(n),A(c,()=>e(x),k=>a(x,k)),o(r,n)},f=r=>{var n=Da();n.__change=S;var c=s(n),V=s(c,!0);t(c),c.value=c.__value="";var k=l(c);z(k,17,()=>e(h),G,(Le,pe)=>{var ze=Ra(),kt=s(ze,!0);t(ze);var wt={};b(()=>{T(kt,e(pe)),wt!==(wt=e(pe))&&(ze.value=(ze.__value=e(pe))??"")}),o(Le,ze)});var Ge=l(k);{var Xe=Le=>{var pe=Ea();pe.value=pe.__value="Other",o(Le,pe)};q(Ge,Le=>{e(M)&&Le(Xe)})}t(n),b(()=>{n.disabled=!e(M),T(V,e(M)?"Select crag...":"Select area first...")}),oe(n,()=>e(x),Le=>a(x,Le)),o(r,n)};q(gt,r=>{e(m)?r(_):r(f,!1)})}t(De);var g=l(De,2),j=l(s(g),2);N(j),t(g),t(Ee);var Q=l(Ee,2),we=l(s(Q),2),Be=s(we);Be.value=Be.__value="";var Nt=l(Be);z(Nt,17,()=>me,G,(r,n)=>{var c=Ba(),V=s(c,!0);t(c);var k={};b(()=>{T(V,e(n)),k!==(k=e(n))&&(c.value=(c.__value=e(n))??"")}),o(r,c)}),t(we),t(Q);var at=l(Q,2),yt=l(s(at),2),Qe=s(yt),nt=l(s(Qe),2);N(nt),mt(2),t(Qe);var vt=l(Qe,2),Ae=l(s(vt),2);N(Ae),mt(2),t(vt);var xe=l(vt,2),dt=l(s(xe),2);N(dt),mt(2),t(xe),t(yt),t(at);var Ye=l(at,2),st=l(s(Ye),2),lt=s(st),Ze=l(s(lt),2);z(Ze,21,()=>O,G,(r,n)=>{var c=Ia(),V=s(c,!0);t(c);var k={};b(()=>{T(V,e(n)),k!==(k=e(n))&&(c.value=(c.__value=e(n))??"")}),o(r,c)}),t(Ze),t(lt);var Oe=l(lt,2),ot=l(s(Oe),2);z(ot,21,()=>ae,G,(r,n)=>{var c=za(),V=s(c,!0);t(c);var k={};b(()=>{T(V,e(n)),k!==(k=e(n))&&(c.value=(c.__value=e(n))??"")}),o(r,c)}),t(ot),t(Oe);var Ke=l(Oe,2),ct=l(s(Ke),2);z(ct,21,()=>ee,G,(r,n)=>{var c=Pa(),V=s(c,!0);t(c);var k={};b(()=>{T(V,e(n)),k!==(k=e(n))&&(c.value=(c.__value=e(n))??"")}),o(r,c)}),t(ct),t(Ke);var ht=l(Ke,2),ut=l(s(ht),2);z(ut,21,()=>ye,G,(r,n)=>{var c=Ga(),V=s(c,!0);t(c);var k={};b(()=>{T(V,e(n)),k!==(k=e(n))&&(c.value=(c.__value=e(n))??"")}),o(r,c)}),t(ut),t(ht);var _t=l(ht,2),bt=l(s(_t),2);z(bt,21,()=>Je,G,(r,n)=>{var c=Ma(),V=s(c,!0);t(c);var k={};b(()=>{T(V,e(n)),k!==(k=e(n))&&(c.value=(c.__value=e(n))??"")}),o(r,c)}),t(bt),t(_t),t(st),t(Ye);var St=l(Ye,2),qt=l(s(St),2),_e=s(qt),Te=s(_e),Ie=s(Te),Ot=s(Ie);{var pt=r=>{var n=Wa();o(r,n)};q(Ot,r=>{e(D)&&r(pt)})}mt(6),t(Ie),t(Te);var zt=l(Te);z(zt,21,()=>e(H),G,(r,n,c)=>{var V=Ya(),k=s(V);{var Ge=X=>{var We=Ua(),xt=s(We);N(xt),t(We),ea(xt,()=>e(n).isSport,Jt=>e(n).isSport=Jt),o(X,We)};q(k,X=>{e(D)&&X(Ge)})}var Xe=l(k),Le=s(Xe);N(Le),t(Xe);var pe=l(Xe),ze=s(pe);N(ze);let kt;var wt=l(ze,2);{var jt=X=>{var We=Ha();o(X,We)};q(wt,X=>{Fe(e(n).grade)||X(jt)})}t(pe);var Vt=l(pe),Me=s(Vt);Me.__change=X=>le(c,X.target.value),z(Me,21,()=>ge,G,(X,We)=>{var xt=Ja(),Jt=s(xt,!0);t(xt);var Zt={};b(()=>{T(Jt,e(We)),Zt!==(Zt=e(We))&&(xt.value=(xt.__value=e(We))??"")}),o(X,xt)}),t(Me);var Lt;Qt(Me),t(Vt);var $t=l(Vt),Rt=s($t);N(Rt),t($t);var I=l($t);let je;var Pe=s(I);Kt(Pe),t(I);var At=l(I),Gt=s(At);{var ta=X=>{var We=Qa();We.__click=()=>re(c),o(X,We)};q(Gt,X=>{e(H).length>1&&X(ta)})}t(At),t(V),b(X=>{kt=et(ze,1,"grade-input svelte-15o2ys1",null,kt,X),Lt!==(Lt=e(n).attemptType)&&(Me.value=(Me.__value=e(n).attemptType)??"",Yt(Me,e(n).attemptType)),Rt.disabled=e(n).attemptType==="Flash",je=et(I,1,"notes-cell svelte-15o2ys1",null,je,{expanded:e($e)===c})},[()=>({invalid:!Fe(e(n).grade)})]),A(Le,()=>e(n).name,X=>e(n).name=X),A(ze,()=>e(n).grade,X=>e(n).grade=X),A(Rt,()=>e(n).attemptsNum,X=>e(n).attemptsNum=X),Mt("focus",Pe,()=>W(c)),Mt("blur",Pe,C),A(Pe,()=>e(n).notes,X=>e(n).notes=X),o(r,V)}),t(zt),t(_e),t(qt);var Ht=l(qt,2);Ht.__click=ce,t(St);var Pt=l(St,2),i=s(Pt);{var v=r=>{var n=Za();let c;var V=s(n,!0);t(n),b(()=>{c=et(n,1,"save-message svelte-15o2ys1",null,c,{success:e(Y)==="success",error:e(Y)==="error"}),T(V,e(L))}),o(r,n)};q(i,r=>{e(L)&&r(v)})}var d=l(i,2);d.__click=fe;var B=s(d);{var w=r=>{var n=Ne("Saving...");o(r,n)},rt=r=>{var n=ft(),c=it(n);{var V=Ge=>{var Xe=Ne("‚úì Saved!");o(Ge,Xe)},k=Ge=>{var Xe=Ne("Save Session");o(Ge,Xe)};q(c,Ge=>{e(Y)==="success"?Ge(V):Ge(k,!1)},!0)}o(r,n)};q(B,r=>{e(Y)==="saving"?r(w):r(rt,!1)})}t(d),t(Pt),t(Se),b(()=>d.disabled=e(Y)==="saving"),A(ne,()=>e(ve),r=>a(ve,r)),oe(qe,()=>e(M),r=>a(M,r)),A(j,()=>e(R),r=>a(R,r)),oe(we,()=>e(E),r=>a(E,r)),A(nt,()=>e(te),r=>a(te,r)),A(Ae,()=>e(F),r=>a(F,r)),A(dt,()=>e(P),r=>a(P,r)),oe(Ze,()=>e(Ce),r=>a(Ce,r)),oe(ot,()=>e(be),r=>a(be,r)),oe(ct,()=>e(y),r=>a(y,r)),oe(ut,()=>e($),r=>a($,r)),oe(bt,()=>e(U),r=>a(U,r)),o(Ue,Se),Dt()}Bt(["click","change"]);var es=u('<div class="form-content svelte-1w0zsmt"><h3 class="svelte-1w0zsmt">üèãÔ∏è Gym Session</h3> <p class="form-placeholder svelte-1w0zsmt">Gym session form fields will go here</p></div>');function ts(Ue){var He=es();o(Ue,He)}var as=u("<option> </option>"),ss=u("<option> </option>"),ls=u('<button class="remove-set-btn svelte-1m63nqt">‚úï</button>'),os=u('<div class="set-row svelte-1m63nqt"><div class="input-wrap svelte-1m63nqt"><label class="svelte-1m63nqt">Weight</label> <input type="number" placeholder="0" class="svelte-1m63nqt"/></div> <div class="input-wrap svelte-1m63nqt"><label class="svelte-1m63nqt">Reps/Secs</label> <input type="number" placeholder="1" class="svelte-1m63nqt"/></div> <!></div>'),rs=u('<div class="exercise-card svelte-1m63nqt"><div class="card-header svelte-1m63nqt"><div class="header-inputs svelte-1m63nqt"><select class="svelte-1m63nqt"></select> <select class="svelte-1m63nqt"></select></div> <button class="remove-card-btn svelte-1m63nqt" title="Remove Exercise">‚úï</button></div> <div class="sets-list svelte-1m63nqt"><!> <button class="add-set-btn svelte-1m63nqt">+ Add Set</button></div> <div class="card-footer svelte-1m63nqt"><div class="meta-input svelte-1m63nqt"><label class="svelte-1m63nqt">Total Sets</label> <input type="number" readonly="" disabled class="svelte-1m63nqt"/></div> <div class="notes-input svelte-1m63nqt"><label class="svelte-1m63nqt">Notes</label> <input type="text" placeholder="Notes..." class="svelte-1m63nqt"/></div></div></div>'),is=u("<div> </div>"),ns=u('<div class="form-content svelte-1m63nqt"><div class="header-row svelte-1m63nqt"><h3 class="svelte-1m63nqt">ü§è Fingerboarding</h3> <button class="add-row-btn svelte-1m63nqt">+ Add Exercise</button></div> <div class="form-group date-group svelte-1m63nqt"><label for="date">Date</label> <input type="date" id="date" class="svelte-1m63nqt"/></div> <div class="cards-container svelte-1m63nqt"></div> <div class="submit-section"><!> <button type="button" class="submit-btn svelte-1m63nqt"><!></button></div></div>');function vs(Ue,He){Et(He,!0);const tt=["Max hangs","Recruitment pulls","Max pick-ups"],me=["Full-crimp","Half-crimp","Three finger drag","Pinch","Open hand","Sloper"];let ge=p(Tt(new Date().toISOString().split("T")[0])),O=p(Tt([]));function ae(){a(O,[...e(O),{id:crypto.randomUUID(),name:tt[0],gripType:me[1],sets:1,details:[{weight:0,reps:5}],notes:""}],!0)}Xt(()=>{e(O).length===0&&ae()});function ee(h){a(O,e(O).filter((m,S)=>S!==h),!0)}function ye(h){const m=e(O)[h],S=m.details[m.details.length-1];m.details=[...m.details,{...S}],m.sets=m.details.length}function Je(h,m){const S=e(O)[h];S.details.length>1&&(S.details=S.details.filter((J,ce)=>ce!==m),S.sets=S.details.length)}let se=p("idle"),he=p("");async function $e(){a(se,"saving");try{const h={date:e(ge),location:"N/A",exercises:JSON.parse(JSON.stringify(e(O)))},m=da(h);if(It()){const S=await ca(h);S.ok?(Wt(m.id),a(se,"success"),a(he,"Session saved and synced!")):(Ut(m.id),a(se,"success"),a(he,"Saved locally. Sync failed: "+(S.error||"Unknown error")))}else a(se,"success"),a(he,"Saved locally. Will sync when online.");window.dispatchEvent(new CustomEvent("session-saved")),setTimeout(()=>{ve()},2e3)}catch(h){a(se,"error"),a(he,"Failed to save session"),console.error("Save error:",h)}}function ve(){a(ge,new Date().toISOString().split("T")[0],!0),a(O,[],!0),ae(),a(se,"idle"),a(he,"")}var M=ns(),x=s(M),R=l(s(x),2);R.__click=ae,t(x);var E=l(x,2),Ce=l(s(E),2);N(Ce),t(E);var be=l(E,2);z(be,21,()=>e(O),G,(h,m,S)=>{var J=rs(),ce=s(J),re=s(ce),le=s(re);z(le,21,()=>tt,G,(Z,ne)=>{var K=as(),qe=s(K,!0);t(K);var ke={};b(()=>{T(qe,e(ne)),ke!==(ke=e(ne))&&(K.value=(K.__value=e(ne))??"")}),o(Z,K)}),t(le);var W=l(le,2);z(W,21,()=>me,G,(Z,ne)=>{var K=ss(),qe=s(K,!0);t(K);var ke={};b(()=>{T(qe,e(ne)),ke!==(ke=e(ne))&&(K.value=(K.__value=e(ne))??"")}),o(Z,K)}),t(W),t(re);var C=l(re,2);C.__click=()=>ee(S),t(ce);var D=l(ce,2),ie=s(D);z(ie,17,()=>e(m).details,G,(Z,ne,K)=>{var qe=os(),ke=s(qe),Re=s(ke);Ct(Re,"for",`weight-${S}-${K}`);var Ee=l(Re,2);N(Ee),Ct(Ee,"id",`weight-${S}-${K}`),t(ke);var De=l(ke,2),gt=s(De);Ct(gt,"for",`reps-${S}-${K}`);var _=l(gt,2);N(_),Ct(_,"id",`reps-${S}-${K}`),t(De);var f=l(De,2);{var g=j=>{var Q=ls();Q.__click=()=>Je(S,K),o(j,Q)};q(f,j=>{e(m).details.length>1&&j(g)})}t(qe),A(Ee,()=>e(ne).weight,j=>e(ne).weight=j),A(_,()=>e(ne).reps,j=>e(ne).reps=j),o(Z,qe)});var Fe=l(ie,2);Fe.__click=()=>ye(S),t(D);var Y=l(D,2),L=s(Y),de=s(L);Ct(de,"for",`total-sets-${S}`);var fe=l(de,2);N(fe),Ct(fe,"id",`total-sets-${S}`),t(L);var Ve=l(L,2),Se=s(Ve);Ct(Se,"for",`notes-${S}`);var ue=l(Se,2);N(ue),Ct(ue,"id",`notes-${S}`),t(Ve),t(Y),t(J),b(()=>sa(fe,e(m).sets)),oe(le,()=>e(m).name,Z=>e(m).name=Z),oe(W,()=>e(m).gripType,Z=>e(m).gripType=Z),A(ue,()=>e(m).notes,Z=>e(m).notes=Z),o(h,J)}),t(be);var y=l(be,2),$=s(y);{var U=h=>{var m=is();let S;var J=s(m,!0);t(m),b(()=>{S=et(m,1,"save-message svelte-1m63nqt",null,S,{success:e(se)==="success",error:e(se)==="error"}),T(J,e(he))}),o(h,m)};q($,h=>{e(he)&&h(U)})}var te=l($,2);te.__click=$e;var F=s(te);{var P=h=>{var m=Ne("Saving...");o(h,m)},H=h=>{var m=ft(),S=it(m);{var J=re=>{var le=Ne("‚úì Saved!");o(re,le)},ce=re=>{var le=Ne("Save Session");o(re,le)};q(S,re=>{e(se)==="success"?re(J):re(ce,!1)},!0)}o(h,m)};q(F,h=>{e(se)==="saving"?h(P):h(H,!1)})}t(te),t(y),t(M),b(()=>te.disabled=e(se)==="saving"),A(Ce,()=>e(ge),h=>a(ge,h)),o(Ue,M),Dt()}Bt(["click"]);var ds=u("<option> </option>"),cs=u('<input type="text" placeholder="Enter venue name" class="mt-2 svelte-1fje4dh"/>'),us=u("<option> </option>"),_s=u("<option> </option>"),ps=u('<input type="text" placeholder="Round name" class="mt-2 svelte-1fje4dh"/>'),fs=u('<div class="result-mode-content svelte-1fje4dh"><div class="form-group svelte-1fje4dh"><label for="position" class="svelte-1fje4dh">Final Position</label> <input type="number" id="position" placeholder="#" class="large-input svelte-1fje4dh"/></div></div>'),ms=u("<option> </option>"),gs=u('<input type="number" min="1" class="svelte-1fje4dh"/>'),ys=u('<span class="flash-dash">-</span>'),hs=u('<tr><td class="col-name svelte-1fje4dh"><input type="text" class="svelte-1fje4dh"/></td><td class="col-status svelte-1fje4dh"><select class="svelte-1fje4dh"></select></td><td class="col-attempt svelte-1fje4dh"><!></td><td class="col-notes svelte-1fje4dh"><input type="text" placeholder="..." class="svelte-1fje4dh"/></td><td class="col-action svelte-1fje4dh"><button class="svelte-1fje4dh">‚úï</button></td></tr>'),bs=u('<div class="load-metrics-compact svelte-1fje4dh"><div class="metric svelte-1fje4dh"><label for="finger">Finger Load</label> <input type="number" id="finger" min="0" max="5" step="0.5" class="svelte-1fje4dh"/></div> <div class="metric svelte-1fje4dh"><label for="shoulder">Shoulder Load</label> <input type="number" id="shoulder" min="0" max="5" step="0.5" class="svelte-1fje4dh"/></div> <div class="metric svelte-1fje4dh"><label for="forearm">Forearm Load</label> <input type="number" id="forearm" min="0" max="5" step="0.5" class="svelte-1fje4dh"/></div></div> <div class="climbs-table-container svelte-1fje4dh"><div class="section-header svelte-1fje4dh"><h4 class="svelte-1fje4dh">Boulders / Routes</h4></div> <table class="climbs-table svelte-1fje4dh"><thead><tr><th class="svelte-1fje4dh">#</th><th class="svelte-1fje4dh">Result</th><th class="svelte-1fje4dh">Att.</th><th class="svelte-1fje4dh">Notes</th><th class="svelte-1fje4dh"></th></tr></thead><tbody></tbody></table> <button class="add-row-btn svelte-1fje4dh">+ Add Row</button></div>',1),Ss=u("<div> </div>"),qs=u('<div class="form-content svelte-1fje4dh"><h3 class="svelte-1fje4dh">üèÜ Competition</h3> <div class="form-grid svelte-1fje4dh"><div class="form-group svelte-1fje4dh"><label for="date" class="svelte-1fje4dh">Date</label> <input type="date" id="date" class="svelte-1fje4dh"/></div> <div class="form-group svelte-1fje4dh"><label for="venue" class="svelte-1fje4dh">Venue</label> <select id="venue" class="svelte-1fje4dh"><option disabled>Select venue...</option><!></select> <!></div></div> <div class="form-group mb-4 svelte-1fje4dh"><label for="type" class="svelte-1fje4dh">Type</label> <select id="type" class="svelte-1fje4dh"></select></div> <div class="round-section svelte-1fje4dh"><div class="form-group svelte-1fje4dh"><label for="round" class="svelte-1fje4dh">Round</label> <select id="round" class="svelte-1fje4dh"></select> <!></div> <!></div> <div class="submit-section"><!> <button type="button" class="submit-btn svelte-1fje4dh"><!></button></div></div>');function ks(Ue,He){Et(He,!0);const tt=["Flashpoint Bristol","Rockstar Techno","Rockstar Unit 3","Rockstar Unit 5","Bloc","TCA","Other"],me=["Bouldering","Lead","Speed"],ge=["Qualifiers","Semi-Finals","Finals","Result","Other"],O=["Flash","Top","Zone","Attempt"];let ae=p(Tt(new Date().toISOString().split("T")[0])),ee=p(""),ye=p(""),Je=p("Bouldering"),se=p(4),he=p(4),$e=p(4),ve=p("Qualifiers"),M=p(""),x=p(null),R=p(Tt([{name:"#1",status:"Flash",attemptCount:1,notes:""}])),E=Ft(()=>e(ve)==="Result"),Ce=Ft(()=>e(ee)==="Other"),be=Ft(()=>e(ve)==="Other"),y=Ft(()=>e(ve)==="Other"?e(M):e(ve));function $(){const _=e(R).length+1;a(R,[...e(R),{name:`#${_}`,status:"Flash",attemptCount:1,notes:""}],!0)}function U(_){e(R).length>1?a(R,e(R).filter((f,g)=>g!==_),!0):e(R)[0]={name:"#1",status:"Flash",attemptCount:1,notes:""}}function te(_,f){e(R)[_].status=f,f==="Flash"&&(e(R)[_].attemptCount=1)}let F=p("idle"),P=p("");async function H(){if(!e(ee)||e(ee)==="Other"&&!e(ye)){a(F,"error"),a(P,"Please specify a venue");return}a(F,"saving");try{const _={name:e(y),position:e(E)?e(x):void 0,climbs:e(E)?void 0:JSON.parse(JSON.stringify(e(R)))},f={date:e(ae),venue:e(ee)==="Other"?e(ye):e(ee),customVenue:e(ee)==="Other"?e(ye):void 0,type:e(Je),fingerLoad:e(E)?void 0:e(se),shoulderLoad:e(E)?void 0:e(he),forearmLoad:e(E)?void 0:e($e),rounds:[_]},g=ua(f);if(It()){const j=await _a(f);j.ok?(Wt(g.id),a(F,"success"),a(P,"Competition saved and synced!")):(Ut(g.id),a(F,"success"),a(P,"Saved locally. Sync failed: "+(j.error||"Unknown error")))}else a(F,"success"),a(P,"Saved locally. Will sync when online.");window.dispatchEvent(new CustomEvent("session-saved")),setTimeout(()=>{h()},2e3)}catch(_){a(F,"error"),a(P,"Failed to save session"),console.error("Save error:",_)}}function h(){a(ae,new Date().toISOString().split("T")[0],!0),a(ee,""),a(ye,""),a(x,null),a(R,[{name:"#1",status:"Flash",attemptCount:1,notes:""}],!0),a(F,"idle"),a(P,"")}var m=qs(),S=l(s(m),2),J=s(S),ce=l(s(J),2);N(ce),t(J);var re=l(J,2),le=l(s(re),2),W=s(le);W.value=W.__value="";var C=l(W);z(C,17,()=>tt,G,(_,f)=>{var g=ds(),j=s(g,!0);t(g);var Q={};b(()=>{T(j,e(f)),Q!==(Q=e(f))&&(g.value=(g.__value=e(f))??"")}),o(_,g)}),t(le);var D=l(le,2);{var ie=_=>{var f=cs();N(f),A(f,()=>e(ye),g=>a(ye,g)),o(_,f)};q(D,_=>{e(Ce)&&_(ie)})}t(re),t(S);var Fe=l(S,2),Y=l(s(Fe),2);z(Y,21,()=>me,G,(_,f)=>{var g=us(),j=s(g,!0);t(g);var Q={};b(()=>{T(j,e(f)),Q!==(Q=e(f))&&(g.value=(g.__value=e(f))??"")}),o(_,g)}),t(Y),t(Fe);var L=l(Fe,2),de=s(L),fe=l(s(de),2);z(fe,21,()=>ge,G,(_,f)=>{var g=_s(),j=s(g,!0);t(g);var Q={};b(()=>{T(j,e(f)),Q!==(Q=e(f))&&(g.value=(g.__value=e(f))??"")}),o(_,g)}),t(fe);var Ve=l(fe,2);{var Se=_=>{var f=ps();N(f),A(f,()=>e(M),g=>a(M,g)),o(_,f)};q(Ve,_=>{e(be)&&_(Se)})}t(de);var ue=l(de,2);{var Z=_=>{var f=fs(),g=s(f),j=l(s(g),2);N(j),t(g),t(f),A(j,()=>e(x),Q=>a(x,Q)),o(_,f)},ne=_=>{var f=bs(),g=it(f),j=s(g),Q=l(s(j),2);N(Q),t(j);var we=l(j,2),Be=l(s(we),2);N(Be),t(we);var Nt=l(we,2),at=l(s(Nt),2);N(at),t(Nt),t(g);var yt=l(g,2),Qe=l(s(yt),2),nt=l(s(Qe));z(nt,21,()=>e(R),G,(Ae,xe,dt)=>{var Ye=hs(),st=s(Ye),lt=s(st);N(lt),t(st);var Ze=l(st),Oe=s(Ze);Oe.__change=_e=>te(dt,_e.target.value),z(Oe,21,()=>O,G,(_e,Te)=>{var Ie=ms(),Ot=s(Ie,!0);t(Ie);var pt={};b(()=>{T(Ot,e(Te)),pt!==(pt=e(Te))&&(Ie.value=(Ie.__value=e(Te))??"")}),o(_e,Ie)}),t(Oe);var ot;Qt(Oe),t(Ze);var Ke=l(Ze),ct=s(Ke);{var ht=_e=>{var Te=gs();N(Te),A(Te,()=>e(xe).attemptCount,Ie=>e(xe).attemptCount=Ie),o(_e,Te)},ut=_e=>{var Te=ys();o(_e,Te)};q(ct,_e=>{e(xe).status!=="Flash"?_e(ht):_e(ut,!1)})}t(Ke);var _t=l(Ke),bt=s(_t);N(bt),t(_t);var St=l(_t),qt=s(St);qt.__click=()=>U(dt),t(St),t(Ye),b(()=>{ot!==(ot=e(xe).status)&&(Oe.value=(Oe.__value=e(xe).status)??"",Yt(Oe,e(xe).status))}),A(lt,()=>e(xe).name,_e=>e(xe).name=_e),A(bt,()=>e(xe).notes,_e=>e(xe).notes=_e),o(Ae,Ye)}),t(nt),t(Qe);var vt=l(Qe,2);vt.__click=$,t(yt),A(Q,()=>e(se),Ae=>a(se,Ae)),A(Be,()=>e(he),Ae=>a(he,Ae)),A(at,()=>e($e),Ae=>a($e,Ae)),o(_,f)};q(ue,_=>{e(E)?_(Z):_(ne,!1)})}t(L);var K=l(L,2),qe=s(K);{var ke=_=>{var f=Ss();let g;var j=s(f,!0);t(f),b(()=>{g=et(f,1,"save-message svelte-1fje4dh",null,g,{success:e(F)==="success",error:e(F)==="error"}),T(j,e(P))}),o(_,f)};q(qe,_=>{e(P)&&_(ke)})}var Re=l(qe,2);Re.__click=H;var Ee=s(Re);{var De=_=>{var f=Ne("Saving...");o(_,f)},gt=_=>{var f=ft(),g=it(f);{var j=we=>{var Be=Ne("‚úì Saved!");o(we,Be)},Q=we=>{var Be=Ne("Save Session");o(we,Be)};q(g,we=>{e(F)==="success"?we(j):we(Q,!1)},!0)}o(_,f)};q(Ee,_=>{e(F)==="saving"?_(De):_(gt,!1)})}t(Re),t(K),t(m),b(()=>Re.disabled=e(F)==="saving"),A(ce,()=>e(ae),_=>a(ae,_)),oe(le,()=>e(ee),_=>a(ee,_)),oe(Y,()=>e(Je),_=>a(Je,_)),oe(fe,()=>e(ve),_=>a(ve,_)),o(Ue,m),Dt()}Bt(["change","click"]);var ws=u('<span class="spinner svelte-b2zgdd"></span> Syncing...',1),xs=u("<button><!></button>"),Cs=u("<div> </div>"),Ts=u('<div><div class="sync-info svelte-b2zgdd"><span class="sync-icon svelte-b2zgdd"> </span> <span class="sync-text svelte-b2zgdd"><!></span></div> <!> <!></div>'),Ns=u("<option> </option>"),Fs=u('<div class="form-container svelte-b2zgdd"><!></div>'),js=u('<div class="page svelte-b2zgdd"><div class="page-header svelte-b2zgdd"><h1 class="svelte-b2zgdd">üìù Log Data</h1> <p class="subtitle svelte-b2zgdd">Record your training sessions</p></div> <!> <div class="content-card svelte-b2zgdd"><div class="form-group svelte-b2zgdd"><label for="activity-type" class="svelte-b2zgdd">Activity Type</label> <select id="activity-type" class="svelte-b2zgdd"><option disabled>Select an activity...</option><!></select></div> <!></div></div>');function Bs(Ue,He){Et(He,!0);const tt=[{value:"indoor_climb",label:"Indoor Climb",icon:"üßó"},{value:"outdoor_climb",label:"Outdoor Climb",icon:"‚õ∞Ô∏è"},{value:"gym_session",label:"Gym Session",icon:"üèãÔ∏è"},{value:"fingerboarding",label:"Fingerboarding",icon:"ü§è"},{value:"competition",label:"Competition",icon:"üèÜ"}];let me=p(""),ge=p(0),O=p("idle"),ae=p(""),ee=p(!0);aa(()=>{ye(),a(ee,It(),!0);const y=()=>{a(ee,!0),ye()},$=()=>{a(ee,!1)},U=()=>{ye()};return window.addEventListener("online",y),window.addEventListener("offline",$),window.addEventListener("session-saved",U),()=>{window.removeEventListener("online",y),window.removeEventListener("offline",$),window.removeEventListener("session-saved",U)}});function ye(){a(ge,pa(),!0)}async function Je(){if(!e(ee)){a(O,"error"),a(ae,"No network connection");return}a(O,"syncing"),a(ae,"");try{const y=await fa();y.failed===0&&y.success>0?(a(O,"success"),a(ae,`Synced ${y.success} session${y.success>1?"s":""}!`)):y.failed>0&&y.success>0?(a(O,"error"),a(ae,`Synced ${y.success}, failed ${y.failed}`)):y.failed>0?(a(O,"error"),a(ae,`Failed to sync ${y.failed} session${y.failed>1?"s":""}`)):(a(O,"idle"),a(ae,"")),ye(),e(O)==="success"&&setTimeout(()=>{a(O,"idle"),a(ae,"")},3e3)}catch(y){a(O,"error"),a(ae,"Sync failed"),console.error("Sync error:",y)}}var se=js(),he=l(s(se),2);{var $e=y=>{var $=Ts();let U;var te=s($),F=s(te),P=s(F,!0);t(F);var H=l(F,2),h=s(H);{var m=W=>{var C=Ne();b(()=>T(C,`${e(ge)??""} session${e(ge)>1?"s":""} waiting to sync`)),o(W,C)},S=W=>{var C=Ne();b(()=>T(C,`Offline - ${e(ge)??""} session${e(ge)>1?"s":""} saved locally`)),o(W,C)};q(h,W=>{e(ee)?W(m):W(S,!1)})}t(H),t(te);var J=l(te,2);{var ce=W=>{var C=xs();let D;C.__click=Je;var ie=s(C);{var Fe=L=>{var de=ws();mt(),o(L,de)},Y=L=>{var de=ft(),fe=it(de);{var Ve=ue=>{var Z=Ne("‚úì Synced!");o(ue,Z)},Se=ue=>{var Z=Ne("Sync Now");o(ue,Z)};q(fe,ue=>{e(O)==="success"?ue(Ve):ue(Se,!1)},!0)}o(L,de)};q(ie,L=>{e(O)==="syncing"?L(Fe):L(Y,!1)})}t(C),b(()=>{D=et(C,1,"sync-btn svelte-b2zgdd",null,D,{syncing:e(O)==="syncing"}),C.disabled=e(O)==="syncing"}),o(W,C)};q(J,W=>{e(ee)&&W(ce)})}var re=l(J,2);{var le=W=>{var C=Cs();let D;var ie=s(C,!0);t(C),b(()=>{D=et(C,1,"sync-message svelte-b2zgdd",null,D,{error:e(O)==="error",success:e(O)==="success"}),T(ie,e(ae))}),o(W,C)};q(re,W=>{e(ae)&&W(le)})}t($),b(()=>{U=et($,1,"sync-banner svelte-b2zgdd",null,U,{offline:!e(ee)}),T(P,e(ee)?"üîÑ":"üì¥")}),o(y,$)};q(he,y=>{e(ge)>0&&y($e)})}var ve=l(he,2),M=s(ve),x=l(s(M),2),R=s(x);R.value=R.__value="";var E=l(R);z(E,17,()=>tt,y=>y.value,(y,$)=>{var U=Ns(),te=s(U);t(U);var F={};b(()=>{T(te,`${e($).icon??""} ${e($).label??""}`),F!==(F=e($).value)&&(U.value=(U.__value=e($).value)??"")}),o(y,U)}),t(x),t(M);var Ce=l(M,2);{var be=y=>{var $=Fs(),U=s($);{var te=P=>{Oa(P,{})},F=P=>{var H=ft(),h=it(H);{var m=J=>{Xa(J,{})},S=J=>{var ce=ft(),re=it(ce);{var le=C=>{ts(C)},W=C=>{var D=ft(),ie=it(D);{var Fe=L=>{vs(L,{})},Y=L=>{var de=ft(),fe=it(de);{var Ve=Se=>{ks(Se,{})};q(fe,Se=>{e(me)==="competition"&&Se(Ve)},!0)}o(L,de)};q(ie,L=>{e(me)==="fingerboarding"?L(Fe):L(Y,!1)},!0)}o(C,D)};q(re,C=>{e(me)==="gym_session"?C(le):C(W,!1)},!0)}o(J,ce)};q(h,J=>{e(me)==="outdoor_climb"?J(m):J(S,!1)},!0)}o(P,H)};q(U,P=>{e(me)==="indoor_climb"?P(te):P(F,!1)})}t($),o(y,$)};q(Ce,y=>{e(me)&&y(be)})}t(ve),t(se),oe(x,()=>e(me),y=>a(me,y)),o(Ue,se),Dt()}Bt(["click"]);export{Bs as component};
